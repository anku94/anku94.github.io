(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[104],{7524:function(e,t,r){Promise.resolve().then(r.bind(r,9234))},5100:function(e,t,r){"use strict";r.d(t,{I:function(){return n},W:function(){return AppStateProvider}});var a=r(7437),s=r(2265);let l={key:0,title:"GOI Budget 2023-24",selected_csv:"/dash/data/goi2324.v2/goi.csv"};function AppStateReducer(e,t){switch(t.type){case"REFRESH":return{...e,key:e.key+1};case"RESET":return l;case"SET_TITLE":return{...e,title:t.title};case"SET_CSV":return{...e,selected_csv:t.csv};case"SET_TITLE_AND_CSV":let r="/dash/data/goi2324.v2/".concat(t.csv,".csv");return{...e,title:t.title,selected_csv:r};default:return e}}let n=(0,s.createContext)({state:l,dispatch:()=>{}}),AppStateProvider=e=>{let{children:t}=e,[r,i]=(0,s.useReducer)(AppStateReducer,l);return(0,a.jsx)(n.Provider,{value:{state:r,dispatch:i},children:t})}},9234:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Page}});var a=r(7437),s=r(2265),l=r(3857),n=r(8938),i=r(9050),o=r(8874),d=r(6055),c=r(5100),u=r(8013),b=r(1709),h=r(9042),g=r(6921),f=r(7543),m=r(4368),_=r(2750),v=r(724);let x=[{field:"id",headerName:"ID",width:150},{field:"source_abbrev",headerName:"srckey",width:150},{field:"source_name",headerName:"srcname",width:150},{field:"dest_abbrev",headerName:"destkey",width:150},{field:"dest_name",headerName:"Ministry/Department",width:450},{field:"amount",headerName:"Amount",width:150},{field:"amount_inr",headerName:"Amount_INR",width:150},{field:"amount_usd",type:"number",headerName:"Amount (USD, $)",width:150,valueFormatter:e=>{if(null==e.value)return"";let t=e.value/1e9,r=t.toFixed(2);return"$".concat(r,"B")}}];function CustomGridToolbar(){return(0,a.jsxs)(b.D,{children:[(0,a.jsx)(h.S,{}),(0,a.jsx)(g.M,{}),(0,a.jsx)(f.L,{}),(0,a.jsx)(m.Zh,{}),(0,a.jsx)(_.T,{})]})}var BudgetDataGrid=()=>{let[e,t]=s.useState([]),{state:r,dispatch:l}=(0,s.useContext)(c.I);return(s.useEffect(()=>{let e=new u.Z;e.read(r.selected_csv).then(e=>{let r=e.map((e,t)=>(e.id=t,e));t(r)})},[r.selected_csv]),0==e.length)?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsx)("div",{style:{height:400},children:(0,a.jsx)(v._$,{filterMode:"client",initialState:{columns:{columnVisibilityModel:{id:!1,source_abbrev:!1,dest_abbrev:!1,amount:!1,amount_inr:!1}},sorting:{sortModel:[{field:"amount_usd",sort:"desc"}]},filter:{filterModel:{items:[],quickFilterValues:[""]}},pagination:{paginationModel:{pageSize:10}}},slots:{toolbar:CustomGridToolbar},rows:e,columns:x,onRowClick:e=>{let t=e.row.dest_abbrev,r=e.row.dest_name,a=t.replace("g2_","");console.log("Changing to: ",a),l({type:"SET_TITLE_AND_CSV",title:r,csv:a})}})})},p=r(8811),w=r.n(p);let T=w()(()=>Promise.all([r.e(934),r.e(901),r.e(305)]).then(r.bind(r,305)).then(e=>e.default),{loadableGenerated:{webpack:()=>[305]},ssr:!1});function Page(){let{state:e,dispatch:t}=(0,s.useContext)(c.I);return(0,a.jsxs)("div",{children:[(0,a.jsx)(l.ZP,{}),(0,a.jsxs)(n.Z,{maxWidth:"xl",sx:{mt:1,mb:0},children:[(0,a.jsx)(o.ZP,{children:(0,a.jsxs)(o.ZP,{item:!0,xs:12,children:[(0,a.jsx)(i.Z,{onClick:()=>{t({type:"RESET"})},children:"Reset"}),(0,a.jsx)(i.Z,{onClick:()=>{t({type:"REFRESH"})},children:"Refresh"}),"(Click on a box!)"]})}),(0,a.jsxs)(o.ZP,{container:!0,spacing:3,columnSpacing:0,sx:{p:0},children:[(0,a.jsx)(o.ZP,{item:!0,xs:12,md:8,lg:12,children:(0,a.jsx)(d.Z,{sx:{p:0,display:"flex",flexDirection:"column",height:720},children:(0,a.jsx)(T,{})})}),(0,a.jsx)(o.ZP,{item:!0,xs:12,children:(0,a.jsx)(d.Z,{sx:{p:2,display:"flex",flexDirection:"column"},children:(0,a.jsx)(BudgetDataGrid,{})})})]})]})]})}},9489:function(e,t){"use strict";t.Z={default40:["#ace","#5474e5","#b3bd33","#904cc4","#65c14c","#d25fc8","#3f9130","#a579e2","#869b32","#625bb2","#cea339","#6c97de","#da582f","#3abec8","#df405f","#4ec480","#dc4493","#58c8a9","#b33969","#63a669","#8b4791","#abbd6c","#4d68a7","#8a6d21","#b999e0","#5d792d","#b670b0","#35773e","#e184b0","#3c9779","#b33931","#4da9d9","#a05c2f","#206e54","#e7827a","#5c5e1e","#954b6d","#948f50","#a85558","#d69f6a"],light5:["rgb(102,225,208)","rgb(241,164,212)","rgb(150,225,127)","rgb(163,201,254)","rgb(225,202,105)"],light5v2:["rgb(179,192,178)","rgb(224,199,206)","rgb(219,230,213)","rgb(173,192,207)","rgb(192,219,234)"],light5v3:["rgba(132,196,175,0.3)","rgba(201,171,208,0.3)","rgba(183,187,146,0.3)","rgba(156,181,226,0.3)","rgba(224,169,166,0.3)","rgba(112,189,204,0.3)","rgba(129,187,222,0.3)","rgba(140,177,189,0.3)","rgba(153,191,203,0.3)","rgba(140,177,189,0.3)"]}},8013:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(1812),s=r.n(a),l=r(9489);let DataTreeUtils=class DataTreeUtils{static buildTree(e){let t=new Map;return e.forEach(e=>{t.has(e.source_abbrev)||t.set(e.source_abbrev,{children:new Set,level:0}),t.has(e.dest_abbrev)||t.set(e.dest_abbrev,{children:new Set,level:0}),t.get(e.source_abbrev).children.add(e.dest_abbrev)}),t}static setTreeLevels(e,t,r){let a=e.get(t);a&&(a.level=r,a.children.forEach(t=>{DataTreeUtils.setTreeLevels(e,t,r+1)}))}static assignColors(e,t){let r=DataTreeUtils.buildTree(e),a=e[0].source_abbrev;DataTreeUtils.setTreeLevels(r,a,1);let s=new Map;r.forEach((e,t)=>{let r=e.level;s.has(r)||s.set(r,0),s.set(r,s.get(r)+1)}),console.log("Level Counts: ",s);let l=1;for(let[e,t]of s)if(t>1){l=e;break}let n=new Map,i=1,assignColor=(e,a,s)=>{console.log("Assigning color to: ",e,s,l);let o=r.get(e);if(o){if(s<l)n.set(e,t[0]);else if(s==l){let r=i%t.length;console.log("Setting color: ",r),n.set(e,t[r]),i++}else{let t=n.get(a);n.set(e,t)}o.children.forEach(t=>{assignColor(t,e,s+1)})}};assignColor(a,"",1);let o=e.map(e=>n.get(e.dest_abbrev));return console.log("Colors: ",o),o}};let CsvReader=class CsvReader{async read(e){let t=await fetch(e),r=await t.text(),a=s().parse(r,{header:!0}),l=[];for(let e of a.data)console.log(e),e.amount&&l.push({source_name:e.source_name,dest_name:e.dest_name,source_abbrev:e.source_abbrev,dest_abbrev:e.dest_abbrev,amount:e.amount,amount_inr:e.amount_inr,amount_usd:e.amount_usd});return l}async get_dno_edges(e){console.log("Loading URL: ",e);let t=await this.read(e),r={};for(let e of t){let t=e.source_abbrev,a=e.dest_abbrev,s=e.amount_usd;r[t]=(r[t]||0)+Number(s),r[a]=(r[a]||0)+Number(s)}let a=t.filter(e=>{let t=e.source_abbrev,a=e.dest_abbrev;return r[t],r[a]>4e8});return a.length<8&&(a=t),{parents:a.map(e=>e.source_abbrev),ids:a.map(e=>e.dest_abbrev),labels:a.map(e=>e.dest_name),values:a.map(e=>e.amount_usd/1e9),marker:{color:DataTreeUtils.assignColors(a,l.Z.default40)}}}constructor(){}};var n=CsvReader}},function(e){e.O(0,[979,666,913,738,971,472,744],function(){return e(e.s=7524)}),_N_E=e.O()}]);