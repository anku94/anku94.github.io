(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{6028:function(i,o,s){var _=s(263).Buffer;self,i.exports=function(){var i={98847:function(i,o,s){"use strict";var _=s(71828),F={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var N in F){var j=N.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");_.addStyleRule(j,F[N])}},98222:function(i,o,s){"use strict";i.exports=s(82887)},27206:function(i,o,s){"use strict";i.exports=s(60822)},59893:function(i,o,s){"use strict";i.exports=s(23381)},5224:function(i,o,s){"use strict";i.exports=s(83832)},59509:function(i,o,s){"use strict";i.exports=s(72201)},75557:function(i,o,s){"use strict";i.exports=s(91815)},40338:function(i,o,s){"use strict";i.exports=s(21462)},35080:function(i,o,s){"use strict";i.exports=s(51319)},61396:function(i,o,s){"use strict";i.exports=s(57516)},40549:function(i,o,s){"use strict";i.exports=s(98128)},49866:function(i,o,s){"use strict";i.exports=s(99442)},36089:function(i,o,s){"use strict";i.exports=s(93740)},19548:function(i,o,s){"use strict";i.exports=s(8729)},35831:function(i,o,s){"use strict";i.exports=s(93814)},61039:function(i,o,s){"use strict";i.exports=s(14382)},97040:function(i,o,s){"use strict";i.exports=s(51759)},77986:function(i,o,s){"use strict";i.exports=s(10421)},24296:function(i,o,s){"use strict";i.exports=s(43102)},58872:function(i,o,s){"use strict";i.exports=s(92165)},29626:function(i,o,s){"use strict";i.exports=s(3325)},65591:function(i,o,s){"use strict";i.exports=s(36071)},69738:function(i,o,s){"use strict";i.exports=s(43905)},92650:function(i,o,s){"use strict";i.exports=s(35902)},35630:function(i,o,s){"use strict";i.exports=s(69816)},73434:function(i,o,s){"use strict";i.exports=s(94507)},27909:function(i,o,s){"use strict";var _=s(19548);_.register([s(27206),s(5224),s(58872),s(65591),s(69738),s(92650),s(49866),s(25743),s(6197),s(97040),s(85461),s(73434),s(54201),s(81299),s(47645),s(35630),s(77986),s(83043),s(93005),s(96881),s(4534),s(50581),s(40549),s(77900),s(47582),s(35080),s(21641),s(17280),s(5861),s(29626),s(10021),s(65317),s(96268),s(61396),s(35831),s(16122),s(46163),s(40344),s(40338),s(48131),s(36089),s(55334),s(75557),s(19440),s(99488),s(59893),s(97393),s(98222),s(61039),s(24296),s(66398),s(59509)]),i.exports=_},46163:function(i,o,s){"use strict";i.exports=s(15154)},96881:function(i,o,s){"use strict";i.exports=s(64943)},50581:function(i,o,s){"use strict";i.exports=s(21164)},55334:function(i,o,s){"use strict";i.exports=s(54186)},65317:function(i,o,s){"use strict";i.exports=s(94873)},10021:function(i,o,s){"use strict";i.exports=s(67618)},54201:function(i,o,s){"use strict";i.exports=s(58810)},5861:function(i,o,s){"use strict";i.exports=s(20593)},16122:function(i,o,s){"use strict";i.exports=s(29396)},83043:function(i,o,s){"use strict";i.exports=s(13551)},48131:function(i,o,s){"use strict";i.exports=s(46858)},47582:function(i,o,s){"use strict";i.exports=s(17988)},21641:function(i,o,s){"use strict";i.exports=s(68868)},96268:function(i,o,s){"use strict";i.exports=s(20467)},19440:function(i,o,s){"use strict";i.exports=s(91271)},99488:function(i,o,s){"use strict";i.exports=s(21461)},97393:function(i,o,s){"use strict";i.exports=s(85956)},25743:function(i,o,s){"use strict";i.exports=s(52979)},66398:function(i,o,s){"use strict";i.exports=s(32275)},17280:function(i,o,s){"use strict";i.exports=s(6419)},77900:function(i,o,s){"use strict";i.exports=s(61510)},81299:function(i,o,s){"use strict";i.exports=s(87619)},93005:function(i,o,s){"use strict";i.exports=s(93601)},40344:function(i,o,s){"use strict";i.exports=s(96595)},47645:function(i,o,s){"use strict";i.exports=s(70954)},6197:function(i,o,s){"use strict";i.exports=s(47462)},4534:function(i,o,s){"use strict";i.exports=s(17659)},85461:function(i,o,s){"use strict";i.exports=s(19990)},82884:function(i){"use strict";i.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(i,o,s){"use strict";var _=s(82884),F=s(41940),N=s(85555),j=s(44467).templatedArray;s(24695),i.exports=j("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:F({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:_.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:_.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",N.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",N.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",N.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",N.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:F({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(92605).draw;function annAutorange(i){var o=i._fullLayout;_.filterVisible(o.annotations).forEach(function(o){var s=F.getFromId(i,o.xref),_=F.getFromId(i,o.yref),N=F.getRefType(o.xref),j=F.getRefType(o.yref);o._extremes={},"range"===N&&calcAxisExpansion(o,s),"range"===j&&calcAxisExpansion(o,_)})}function calcAxisExpansion(i,o){var s,_=o._id,N=_.charAt(0),j=i[N],Z=i["a"+N],X=i[N+"ref"],$=i["a"+N+"ref"],ee=i["_"+N+"padplus"],et=i["_"+N+"padminus"],er={x:1,y:-1}[N]*i[N+"shift"],en=3*i.arrowsize*i.arrowwidth||0,ei=en+er,eo=en-er,es=3*i.startarrowsize*i.arrowwidth||0,el=es+er,ec=es-er;if($===X){var eu=F.findExtremes(o,[o.r2c(j)],{ppadplus:ei,ppadminus:eo}),ef=F.findExtremes(o,[o.r2c(Z)],{ppadplus:Math.max(ee,el),ppadminus:Math.max(et,ec)});s={min:[eu.min[0],ef.min[0]],max:[eu.max[0],ef.max[0]]}}else el=Z?el+Z:el,ec=Z?ec-Z:ec,s=F.findExtremes(o,[o.r2c(j)],{ppadplus:Math.max(ee,ei,el),ppadminus:Math.max(et,eo,ec)});i._extremes[_]=s}i.exports=function(i){var o=i._fullLayout;if(_.filterVisible(o.annotations).length&&i._fullData.length)return _.syncOrAsync([N,annAutorange],i)}},44317:function(i,o,s){"use strict";var _=s(71828),F=s(73972),N=s(44467).arrayEditor;function hasClickToShow(i,o){var s=getToggleSets(i,o);return s.on.length>0||s.explicitOff.length>0}function onClick(i,o){var s,j,Z=getToggleSets(i,o),X=Z.on,$=Z.off.concat(Z.explicitOff),ee={},et=i._fullLayout.annotations;if(X.length||$.length){for(s=0;s<X.length;s++)(j=N(i.layout,"annotations",et[X[s]])).modifyItem("visible",!0),_.extendFlat(ee,j.getUpdateObj());for(s=0;s<$.length;s++)(j=N(i.layout,"annotations",et[$[s]])).modifyItem("visible",!1),_.extendFlat(ee,j.getUpdateObj());return F.call("update",i,{},ee)}}function getToggleSets(i,o){var s,_,F,N,j,Z,X,$=i._fullLayout.annotations,ee=[],et=[],er=[],en=(o||[]).length;for(s=0;s<$.length;s++)if(N=(F=$[s]).clicktoshow){for(_=0;_<en;_++)if(Z=(j=o[_]).xaxis,X=j.yaxis,Z._id===F.xref&&X._id===F.yref&&Z.d2r(j.x)===clickData2r(F._xclick,Z)&&X.d2r(j.y)===clickData2r(F._yclick,X)){(F.visible?"onout"===N?et:er:ee).push(s);break}_===en&&F.visible&&"onout"===N&&et.push(s)}return{on:ee,off:et,explicitOff:er}}function clickData2r(i,o){return"log"===o.type?o.l2r(i):o.d2r(i)}i.exports={hasClickToShow:hasClickToShow,onClick:onClick}},25625:function(i,o,s){"use strict";var _=s(71828),F=s(7901);i.exports=function(i,o,s,N){N("opacity");var j=N("bgcolor"),Z=N("bordercolor"),X=F.opacity(Z);N("borderpad");var $=N("borderwidth"),ee=N("showarrow");if(N("text",ee?" ":s._dfltTitle.annotation),N("textangle"),_.coerceFont(N,"font",s.font),N("width"),N("align"),N("height")&&N("valign"),ee){var et,er,en=N("arrowside");-1!==en.indexOf("end")&&(et=N("arrowhead"),er=N("arrowsize")),-1!==en.indexOf("start")&&(N("startarrowhead",et),N("startarrowsize",er)),N("arrowcolor",X?o.bordercolor:F.defaultLine),N("arrowwidth",2*(X&&$||1)),N("standoff"),N("startstandoff")}var ei=N("hovertext"),eo=s.hoverlabel||{};if(ei){var es=N("hoverlabel.bgcolor",eo.bgcolor||(F.opacity(j)?F.rgb(j):F.defaultLine)),el=N("hoverlabel.bordercolor",eo.bordercolor||F.contrast(es));_.coerceFont(N,"hoverlabel.font",{family:eo.font.family,size:eo.font.size,color:eo.font.color||el})}N("captureevents",!!ei)}},94128:function(i,o,s){"use strict";var _=s(92770),F=s(58163);i.exports=function(i,o,s,N){o=o||{};var j,Z,X="log"===s&&"linear"===o.type,$="linear"===s&&"log"===o.type;if(X||$)for(var ee=i._fullLayout.annotations,et=o._id.charAt(0),er=0;er<ee.length;er++)j=ee[er],Z="annotations["+er+"].",j[et+"ref"]===o._id&&convert(et),j["a"+et+"ref"]===o._id&&convert("a"+et);function convert(i){var s=j[i],$=null;_($=X?F(s,o.range):Math.pow(10,s))||($=null),N(Z+i,$)}}},84046:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(85501),j=s(25625),Z=s(50215);function handleAnnotationDefaults(i,o,s){function coerce(s,F){return _.coerce(i,o,Z,s,F)}var N=coerce("visible"),X=coerce("clicktoshow");if(N||X){j(i,o,s,coerce);for(var $=o.showarrow,ee=["x","y"],et=[-10,-30],er={_fullLayout:s},en=0;en<2;en++){var ei=ee[en],eo=F.coerceRef(i,o,er,ei,"","paper");if("paper"!==eo&&F.getFromId(er,eo)._annIndices.push(o._index),F.coercePosition(o,er,coerce,eo,ei,.5),$){var es="a"+ei,el=F.coerceRef(i,o,er,es,"pixel",["pixel","paper"]);"pixel"!==el&&el!==eo&&(el=o[es]="pixel");var ec="pixel"===el?et[en]:.4;F.coercePosition(o,er,coerce,el,es,ec)}coerce(ei+"anchor"),coerce(ei+"shift")}if(_.noneOrAll(i,o,["x","y"]),$&&_.noneOrAll(i,o,["ax","ay"]),X){var eu=coerce("xclick"),ef=coerce("yclick");o._xclick=void 0===eu?o.x:F.cleanPosition(eu,er,o.xref),o._yclick=void 0===ef?o.y:F.cleanPosition(ef,er,o.yref)}}}i.exports=function(i,o){N(i,o,{name:"annotations",handleItemDefaults:handleAnnotationDefaults})}},92605:function(i,o,s){"use strict";var _=s(39898),F=s(73972),N=s(74875),j=s(71828),Z=j.strTranslate,X=s(89298),$=s(7901),ee=s(91424),et=s(30211),er=s(63893),en=s(6964),ei=s(28569),eo=s(44467).arrayEditor,es=s(13011);function draw(i){var o=i._fullLayout;o._infolayer.selectAll(".annotation").remove();for(var s=0;s<o.annotations.length;s++)o.annotations[s].visible&&drawOne(i,s);return N.previousPromises(i)}function drawOne(i,o){var s=i._fullLayout.annotations[o]||{},_=X.getFromId(i,s.xref),F=X.getFromId(i,s.yref);_&&_.setScale(),F&&F.setScale(),drawRaw(i,s,o,!1,_,F)}function shiftPosition(i,o,s,_,F){var N=F[s],j=F[s+"ref"],Z=-1!==s.indexOf("y"),$="domain"===X.getRefType(j),ee=Z?_.h:_.w;return i?$?N+(Z?-o:o)/i._length:i.p2r(i.r2p(N)+o):N+(Z?-o:o)/ee}function drawRaw(i,o,s,N,el,ec){var eu,ef,ed=i._fullLayout,eh=i._fullLayout._size,ep=i._context.edits;N?(eu="annotation-"+N,ef=N+".annotations"):(eu="annotation",ef="annotations");var eg=eo(i.layout,ef,o),em=eg.modifyBase,ey=eg.modifyItem,ev=eg.getUpdateObj;ed._infolayer.selectAll("."+eu+'[data-index="'+s+'"]').remove();var ex="clip"+ed._uid+"_ann"+s;if(!o._input||!1===o.visible){_.selectAll("#"+ex).remove();return}var e_={x:{},y:{}},ew=+o.textangle||0,eT=ed._infolayer.append("g").classed(eu,!0).attr("data-index",String(s)).style("opacity",o.opacity),ek=eT.append("g").classed("annotation-text-g",!0),eA=ep[o.showarrow?"annotationTail":"annotationPosition"],eS=o.captureevents||ep.annotationText||eA;function makeEventData(i){var _={index:s,annotation:o._input,fullAnnotation:o,event:i};return N&&(_.subplotId=N),_}var eM=ek.append("g").style("pointer-events",eS?"all":null).call(en,"pointer").on("click",function(){i._dragging=!1,i.emit("plotly_clickannotation",makeEventData(_.event))});o.hovertext&&eM.on("mouseover",function(){var s=o.hoverlabel,_=s.font,F=this.getBoundingClientRect(),N=i.getBoundingClientRect();et.loneHover({x0:F.left-N.left,x1:F.right-N.left,y:(F.top+F.bottom)/2-N.top,text:o.hovertext,color:s.bgcolor,borderColor:s.bordercolor,fontFamily:_.family,fontSize:_.size,fontColor:_.color},{container:ed._hoverlayer.node(),outerContainer:ed._paper.node(),gd:i})}).on("mouseout",function(){et.loneUnhover(ed._hoverlayer.node())});var eC=o.borderwidth,eE=eC+o.borderpad,eL=eM.append("rect").attr("class","bg").style("stroke-width",eC+"px").call($.stroke,o.bordercolor).call($.fill,o.bgcolor),eP=o.width||o.height,eI=ed._topclips.selectAll("#"+ex).data(eP?[0]:[]);eI.enter().append("clipPath").classed("annclip",!0).attr("id",ex).append("rect"),eI.exit().remove();var eO=o.font,eD=ed._meta?j.templateString(o.text,ed._meta):o.text,eR=eM.append("text").classed("annotation-text",!0).text(eD);function textLayout(s){return s.call(ee.font,eO).attr({"text-anchor":{left:"start",right:"end"}[o.align]||"middle"}),er.convertToTspans(s,i,drawGraphicalElements),s}function drawGraphicalElements(){var s,_=eR.selectAll("a");1===_.size()&&_.text()===eR.text()&&eM.insert("a",":first-child").attr({"xlink:xlink:href":_.attr("xlink:href"),"xlink:xlink:show":_.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(eL.node());var et=eM.select(".annotation-text-math-group"),eo=!et.empty(),eu=ee.bBox((eo?et:eR).node()),ef=eu.width,eg=eu.height,eS=o.width||ef,eO=o.height||eg,eD=Math.round(eS+2*eE),eB=Math.round(eO+2*eE);function shiftFraction(i,o){return"auto"===o&&(o=i<1/3?"left":i>2/3?"right":"center"),({center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5})[o]}for(var eF=!1,ez=["x","y"],eN=0;eN<ez.length;eN++){var ej,eV,eU,eH,eG,eW=ez[eN],eZ=o[eW+"ref"]||eW,eY=o["a"+eW+"ref"],eX={x:el,y:ec}[eW],eK=(ew+("x"===eW?0:-90))*Math.PI/180,eJ=eD*Math.cos(eK),e$=eB*Math.sin(eK),eQ=Math.abs(eJ)+Math.abs(e$),e0=o[eW+"anchor"],e1=o[eW+"shift"]*("x"===eW?1:-1),e2=e_[eW],e3=X.getRefType(eZ);if(eX&&"domain"!==e3){var e5=eX.r2fraction(o[eW]);(e5<0||e5>1)&&(eY===eZ?((e5=eX.r2fraction(o["a"+eW]))<0||e5>1)&&(eF=!0):eF=!0),ej=eX._offset+eX.r2p(o[eW]),eH=.5}else{var e4="domain"===e3;"x"===eW?(eU=o[eW],ej=e4?eX._offset+eX._length*eU:ej=eh.l+eh.w*eU):(eU=1-o[eW],ej=e4?eX._offset+eX._length*eU:ej=eh.t+eh.h*eU),eH=o.showarrow?.5:eU}if(o.showarrow){e2.head=ej;var e6=o["a"+eW];if(eG=eJ*shiftFraction(.5,o.xanchor)-e$*shiftFraction(.5,o.yanchor),eY===eZ){var e8=X.getRefType(eY);"domain"===e8?("y"===eW&&(e6=1-e6),e2.tail=eX._offset+eX._length*e6):"paper"===e8?"y"===eW?(e6=1-e6,e2.tail=eh.t+eh.h*e6):e2.tail=eh.l+eh.w*e6:e2.tail=eX._offset+eX.r2p(e6),eV=eG}else e2.tail=ej+e6,eV=eG+e6;e2.text=e2.tail+eG;var e7=ed["x"===eW?"width":"height"];if("paper"===eZ&&(e2.head=j.constrain(e2.head,1,e7-1)),"pixel"===eY){var e9=-Math.max(e2.tail-3,e2.text),te=Math.min(e2.tail+3,e2.text)-e7;e9>0?(e2.tail+=e9,e2.text+=e9):te>0&&(e2.tail-=te,e2.text-=te)}e2.tail+=e1,e2.head+=e1}else eV=eG=eQ*shiftFraction(eH,e0),e2.text=ej+eG;e2.text+=e1,eG+=e1,eV+=e1,o["_"+eW+"padplus"]=eQ/2+eV,o["_"+eW+"padminus"]=eQ/2-eV,o["_"+eW+"size"]=eQ,o["_"+eW+"shift"]=eG}if(eF){eM.remove();return}var tt=0,tr=0;if("left"!==o.align&&(tt=(eS-ef)*("center"===o.align?.5:1)),"top"!==o.valign&&(tr=(eO-eg)*("middle"===o.valign?.5:1)),eo)et.select("svg").attr({x:eE+tt-1,y:eE+tr}).call(ee.setClipUrl,eP?ex:null,i);else{var tn=eE+tr-eu.top,ta=eE+tt-eu.left;eR.call(er.positionText,ta,tn).call(ee.setClipUrl,eP?ex:null,i)}eI.select("rect").call(ee.setRect,eE,eE,eS,eO),eL.call(ee.setRect,eC/2,eC/2,eD-eC,eB-eC),eM.call(ee.setTranslate,Math.round(e_.x.text-eD/2),Math.round(e_.y.text-eB/2)),ek.attr({transform:"rotate("+ew+","+e_.x.text+","+e_.y.text+")"});var drawArrow=function(s,_){eT.selectAll(".annotation-arrow-g").remove();var X=e_.x.head,et=e_.y.head,er=e_.x.tail+s,en=e_.y.tail+_,eo=e_.x.text+s,eu=e_.y.text+_,ef=j.rotationXYMatrix(ew,eo,eu),ed=j.apply2DTransform(ef),eg=j.apply2DTransform2(ef),ex=+eL.attr("width"),eA=+eL.attr("height"),eS=eo-.5*ex,eC=eS+ex,eE=eu-.5*eA,eP=eE+eA,eI=[[eS,eE,eS,eP],[eS,eP,eC,eP],[eC,eP,eC,eE],[eC,eE,eS,eE]].map(eg);if(!eI.reduce(function(i,o){return!!j.segmentsIntersect(X,et,X+1e6,et+1e6,o[0],o[1],o[2],o[3])^i},!1)){eI.forEach(function(i){var o=j.segmentsIntersect(er,en,X,et,i[0],i[1],i[2],i[3]);o&&(er=o.x,en=o.y)});var eO=o.arrowwidth,eD=o.arrowcolor,eR=o.arrowside,eB=eT.append("g").style({opacity:$.opacity(eD)}).classed("annotation-arrow-g",!0),eF=eB.append("path").attr("d","M"+er+","+en+"L"+X+","+et).style("stroke-width",eO+"px").call($.stroke,$.rgb(eD));if(es(eF,eR,o),ep.annotationPosition&&eF.node().parentNode&&!N){var ez,eN,ej=X,eV=et;if(o.standoff){var eU=Math.sqrt(Math.pow(X-er,2)+Math.pow(et-en,2));ej+=o.standoff*(er-X)/eU,eV+=o.standoff*(en-et)/eU}var eH=eB.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(er-ej)+","+(en-eV),transform:Z(ej,eV)}).style("stroke-width",eO+6+"px").call($.stroke,"rgba(0,0,0,0)").call($.fill,"rgba(0,0,0,0)");ei.init({element:eH.node(),gd:i,prepFn:function(){var i=ee.getTranslate(eM);ez=i.x,eN=i.y,el&&el.autorange&&em(el._name+".autorange",!0),ec&&ec.autorange&&em(ec._name+".autorange",!0)},moveFn:function(i,s){var _=ed(ez,eN),F=_[0]+i,N=_[1]+s;eM.call(ee.setTranslate,F,N),ey("x",shiftPosition(el,i,"x",eh,o)),ey("y",shiftPosition(ec,s,"y",eh,o)),o.axref===o.xref&&ey("ax",shiftPosition(el,i,"ax",eh,o)),o.ayref===o.yref&&ey("ay",shiftPosition(ec,s,"ay",eh,o)),eB.attr("transform",Z(i,s)),ek.attr({transform:"rotate("+ew+","+F+","+N+")"})},doneFn:function(){F.call("_guiRelayout",i,ev());var o=document.querySelector(".js-notes-box-panel");o&&o.redraw(o.selectedObj)}})}}};o.showarrow&&drawArrow(0,0),eA&&ei.init({element:eM.node(),gd:i,prepFn:function(){s=ek.attr("transform")},moveFn:function(i,_){var F,j,X="pointer";if(o.showarrow)o.axref===o.xref?ey("ax",shiftPosition(el,i,"ax",eh,o)):ey("ax",o.ax+i),o.ayref===o.yref?ey("ay",shiftPosition(ec,_,"ay",eh.w,o)):ey("ay",o.ay+_),drawArrow(i,_);else{if(N)return;if(el)F=shiftPosition(el,i,"x",eh,o);else{var $=o._xsize/eh.w,ee=o.x+(o._xshift-o.xshift)/eh.w-$/2;F=ei.align(ee+i/eh.w,$,0,1,o.xanchor)}if(ec)j=shiftPosition(ec,_,"y",eh,o);else{var et=o._ysize/eh.h,er=o.y-(o._yshift+o.yshift)/eh.h-et/2;j=ei.align(er-_/eh.h,et,0,1,o.yanchor)}ey("x",F),ey("y",j),el&&ec||(X=ei.getCursor(el?.5:F,ec?.5:j,o.xanchor,o.yanchor))}ek.attr({transform:Z(i,_)+s}),en(eM,X)},clickFn:function(s,_){o.captureevents&&i.emit("plotly_clickannotation",makeEventData(_))},doneFn:function(){en(eM),F.call("_guiRelayout",i,ev());var o=document.querySelector(".js-notes-box-panel");o&&o.redraw(o.selectedObj)}})}ep.annotationText?eR.call(er.makeEditable,{delegate:eM,gd:i}).call(textLayout).on("edit",function(s){o.text=s,this.call(textLayout),ey("text",s),el&&el.autorange&&em(el._name+".autorange",!0),ec&&ec.autorange&&em(ec._name+".autorange",!0),F.call("_guiRelayout",i,ev())}):eR.call(textLayout)}i.exports={draw:draw,drawOne:drawOne,drawRaw:drawRaw}},13011:function(i,o,s){"use strict";var _=s(39898),F=s(7901),N=s(82884),j=s(71828),Z=j.strScale,X=j.strRotate,$=j.strTranslate;i.exports=function(i,o,s){var j,ee,et,er,en=i.node(),ei=N[s.arrowhead||0],eo=N[s.startarrowhead||0],es=(s.arrowwidth||1)*(s.arrowsize||1),el=(s.arrowwidth||1)*(s.startarrowsize||1),ec=o.indexOf("start")>=0,eu=o.indexOf("end")>=0,ef=ei.backoff*es+s.standoff,ed=eo.backoff*el+s.startstandoff;if("line"===en.nodeName){j={x:+i.attr("x1"),y:+i.attr("y1")},ee={x:+i.attr("x2"),y:+i.attr("y2")};var eh=j.x-ee.x,ep=j.y-ee.y;if(er=(et=Math.atan2(ep,eh))+Math.PI,ef&&ed&&ef+ed>Math.sqrt(eh*eh+ep*ep)){hideLine();return}if(ef){if(ef*ef>eh*eh+ep*ep){hideLine();return}var eg=ef*Math.cos(et),em=ef*Math.sin(et);ee.x+=eg,ee.y+=em,i.attr({x2:ee.x,y2:ee.y})}if(ed){if(ed*ed>eh*eh+ep*ep){hideLine();return}var ey=ed*Math.cos(et),ev=ed*Math.sin(et);j.x-=ey,j.y-=ev,i.attr({x1:j.x,y1:j.y})}}else if("path"===en.nodeName){var ex=en.getTotalLength(),e_="";if(ex<ef+ed){hideLine();return}var ew=en.getPointAtLength(0),eT=en.getPointAtLength(.1);et=Math.atan2(ew.y-eT.y,ew.x-eT.x),j=en.getPointAtLength(Math.min(ed,ex)),e_="0px,"+ed+"px,";var ek=en.getPointAtLength(ex),eA=en.getPointAtLength(ex-.1);er=Math.atan2(ek.y-eA.y,ek.x-eA.x),ee=en.getPointAtLength(Math.max(0,ex-ef));var eS=e_?ed+ef:ef;e_+=ex-eS+"px,"+ex+"px",i.style("stroke-dasharray",e_)}function hideLine(){i.style("stroke-dasharray","0px,100px")}function drawhead(o,N,j,ee){o.path&&(o.noRotate&&(j=0),_.select(en.parentNode).append("path").attr({class:i.attr("class"),d:o.path,transform:$(N.x,N.y)+X(180*j/Math.PI)+Z(ee)}).style({fill:F.rgb(s.arrowcolor),"stroke-width":0}))}ec&&drawhead(eo,j,et,el),eu&&drawhead(ei,ee,er,es)}},32745:function(i,o,s){"use strict";var _=s(92605),F=s(44317);i.exports={moduleType:"component",name:"annotations",layoutAttributes:s(50215),supplyLayoutDefaults:s(84046),includeBasePlot:s(76325)("annotations"),calcAutorange:s(3749),draw:_.draw,drawOne:_.drawOne,drawRaw:_.drawRaw,hasClickToShow:F.hasClickToShow,onClick:F.onClick,convertCoords:s(94128)}},26997:function(i,o,s){"use strict";var _=s(50215),F=s(30962).overrideAll,N=s(44467).templatedArray;i.exports=F(N("annotation",{visible:_.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:_.xanchor,xshift:_.xshift,yanchor:_.yanchor,yshift:_.yshift,text:_.text,textangle:_.textangle,font:_.font,width:_.width,height:_.height,opacity:_.opacity,align:_.align,valign:_.valign,bgcolor:_.bgcolor,bordercolor:_.bordercolor,borderpad:_.borderpad,borderwidth:_.borderwidth,showarrow:_.showarrow,arrowcolor:_.arrowcolor,arrowhead:_.arrowhead,startarrowhead:_.startarrowhead,arrowside:_.arrowside,arrowsize:_.arrowsize,startarrowsize:_.startarrowsize,arrowwidth:_.arrowwidth,standoff:_.standoff,startstandoff:_.startstandoff,hovertext:_.hovertext,hoverlabel:_.hoverlabel,captureevents:_.captureevents}),"calc","from-root")},5485:function(i,o,s){"use strict";var _=s(71828),F=s(89298);function mockAnnAxes(i,o){var s=o.fullSceneLayout.domain,N=o.fullLayout._size,j={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};i._xa={},_.extendFlat(i._xa,j),F.setConvert(i._xa),i._xa._offset=N.l+s.x[0]*N.w,i._xa.l2p=function(){return .5*(1+i._pdata[0]/i._pdata[3])*N.w*(s.x[1]-s.x[0])},i._ya={},_.extendFlat(i._ya,j),F.setConvert(i._ya),i._ya._offset=N.t+(1-s.y[1])*N.h,i._ya.l2p=function(){return .5*(1-i._pdata[1]/i._pdata[3])*N.h*(s.y[1]-s.y[0])}}i.exports=function(i){for(var o=i.fullSceneLayout.annotations,s=0;s<o.length;s++)mockAnnAxes(o[s],i);i.fullLayout._infolayer.selectAll(".annotation-"+i.id).remove()}},20226:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(85501),j=s(25625),Z=s(26997);function handleAnnotationDefaults(i,o,s,N){function coerce(s,F){return _.coerce(i,o,Z,s,F)}function coercePosition(i){var _=i+"axis",N={_fullLayout:{}};return N._fullLayout[_]=s[_],F.coercePosition(o,N,coerce,i,i,.5)}coerce("visible")&&(j(i,o,N.fullLayout,coerce),coercePosition("x"),coercePosition("y"),coercePosition("z"),_.noneOrAll(i,o,["x","y","z"]),o.xref="x",o.yref="y",o.zref="z",coerce("xanchor"),coerce("yanchor"),coerce("xshift"),coerce("yshift"),o.showarrow&&(o.axref="pixel",o.ayref="pixel",coerce("ax",-10),coerce("ay",-30),_.noneOrAll(i,o,["ax","ay"])))}i.exports=function(i,o,s){N(i,o,{name:"annotations",handleItemDefaults:handleAnnotationDefaults,fullLayout:s.fullLayout})}},82188:function(i,o,s){"use strict";var _=s(92605).drawRaw,F=s(63538),N=["x","y","z"];i.exports=function(i){for(var o=i.fullSceneLayout,s=i.dataScale,j=o.annotations,Z=0;Z<j.length;Z++){for(var X=j[Z],$=!1,ee=0;ee<3;ee++){var et=N[ee],er=X[et],en=o[et+"axis"].r2fraction(er);if(en<0||en>1){$=!0;break}}$?i.fullLayout._infolayer.select(".annotation-"+i.id+'[data-index="'+Z+'"]').remove():(X._pdata=F(i.glplot.cameraParams,[o.xaxis.r2l(X.x)*s[0],o.yaxis.r2l(X.y)*s[1],o.zaxis.r2l(X.z)*s[2]]),_(i.graphDiv,X,Z,i.id,X._xa,X._ya))}}},2468:function(i,o,s){"use strict";var _=s(73972),F=s(71828);function includeGL3D(i,o){var s=_.subplotsRegistry.gl3d;if(s)for(var N=s.attrRegex,j=Object.keys(i),Z=0;Z<j.length;Z++){var X=j[Z];N.test(X)&&(i[X].annotations||[]).length&&(F.pushUnique(o._basePlotModules,s),F.pushUnique(o._subplots.gl3d,X))}}i.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:s(26997)}}},layoutAttributes:s(26997),handleDefaults:s(20226),includeBasePlot:includeGL3D,convert:s(5485),draw:s(82188)}},7561:function(i,o,s){"use strict";i.exports=s(63489),s(94338),s(3961),s(38751),s(86825),s(37715),s(99384),s(43805),s(88874),s(83290),s(29108),s(55422),s(94320),s(31320),s(51367),s(21457)},72201:function(i,o,s){"use strict";var _=s(7561),F=s(71828),N=s(50606),j=N.EPOCHJD,Z=N.ONEDAY,X={valType:"enumerated",values:F.sortObjectKeys(_.calendars),editType:"calc",dflt:"gregorian"},handleDefaults=function(i,o,s,_){var N={};return N[s]=X,F.coerce(i,o,N,s,_)},$={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function worldCalFmt(i,o,s){for(var _,F,N,X,ee,et=Math.floor((o+.05)/Z)+j,er=getCal(s).fromJD(et),en=0;-1!==(en=i.indexOf("%",en));)"0"===(_=i.charAt(en+1))||"-"===_||"_"===_?(N=3,F=i.charAt(en+2),"_"===_&&(_="-")):(F=_,_="0",N=2),(X=$[F])?(ee="##"===X?"##":er.formatDate(X[_]),i=i.substr(0,en)+ee+i.substr(en+N),en+=ee.length):en+=N;return i}var ee={};function getCal(i){var o=ee[i];return o||(o=ee[i]=_.instance(i))}function makeAttrs(i){return F.extendFlat({},X,{description:i})}function makeTraceAttrsDescription(i){return"Sets the calendar system to use with `"+i+"` date data."}var et={xcalendar:makeAttrs(makeTraceAttrsDescription("x"))},er=F.extendFlat({},et,{ycalendar:makeAttrs(makeTraceAttrsDescription("y"))}),en=F.extendFlat({},er,{zcalendar:makeAttrs(makeTraceAttrsDescription("z"))}),ei=makeAttrs("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");i.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:er,bar:er,box:er,heatmap:er,contour:er,histogram:er,histogram2d:er,histogram2dcontour:er,scatter3d:en,surface:en,mesh3d:en,scattergl:er,ohlc:et,candlestick:et},layout:{calendar:makeAttrs("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:ei},yaxis:{calendar:ei},scene:{xaxis:{calendar:ei},yaxis:{calendar:ei},zaxis:{calendar:ei}},polar:{radialaxis:{calendar:ei}}},transforms:{filter:{valuecalendar:makeAttrs("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `value`, if it is a date."),targetcalendar:makeAttrs("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:X,handleDefaults:handleDefaults,handleTraceDefaults:function(i,o,s,_){for(var F=0;F<s.length;F++)handleDefaults(i,o,s[F]+"calendar",_.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:getCal,worldCalFmt:worldCalFmt}},22399:function(i,o){"use strict";o.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],o.defaultLine="#444",o.lightLine="#eee",o.background="#fff",o.borderLine="#BEC8D9",o.lightFraction=90.9090909090909},7901:function(i,o,s){"use strict";var _=s(84267),F=s(92770),N=s(73627).isTypedArray,j=i.exports={},Z=s(22399);j.defaults=Z.defaults;var X=j.defaultLine=Z.defaultLine;j.lightLine=Z.lightLine;var $=j.background=Z.background;function cleanOne(i){if(F(i)||"string"!=typeof i)return i;var o=i.trim();if("rgb"!==o.substr(0,3))return i;var s=o.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return i;var _=s[1].trim().split(/\s*[\s,]\s*/),N="a"===o.charAt(3)&&4===_.length;if(!N&&3!==_.length)return i;for(var j=0;j<_.length;j++){if(!_[j].length||(_[j]=Number(_[j]),!(_[j]>=0)))return i;if(3===j)_[j]>1&&(_[j]=1);else if(_[j]>=1)return i}var Z=Math.round(255*_[0])+", "+Math.round(255*_[1])+", "+Math.round(255*_[2]);return N?"rgba("+Z+", "+_[3]+")":"rgb("+Z+")"}j.tinyRGB=function(i){var o=i.toRgb();return"rgb("+Math.round(o.r)+", "+Math.round(o.g)+", "+Math.round(o.b)+")"},j.rgb=function(i){return j.tinyRGB(_(i))},j.opacity=function(i){return i?_(i).getAlpha():0},j.addOpacity=function(i,o){var s=_(i).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+o+")"},j.combine=function(i,o){var s=_(i).toRgb();if(1===s.a)return _(i).toRgbString();var F=_(o||$).toRgb(),N=1===F.a?F:{r:255*(1-F.a)+F.r*F.a,g:255*(1-F.a)+F.g*F.a,b:255*(1-F.a)+F.b*F.a};return _({r:N.r*(1-s.a)+s.r*s.a,g:N.g*(1-s.a)+s.g*s.a,b:N.b*(1-s.a)+s.b*s.a}).toRgbString()},j.contrast=function(i,o,s){var F=_(i);return 1!==F.getAlpha()&&(F=_(j.combine(i,$))),(F.isDark()?o?F.lighten(o):$:s?F.darken(s):X).toString()},j.stroke=function(i,o){var s=_(o);i.style({stroke:j.tinyRGB(s),"stroke-opacity":s.getAlpha()})},j.fill=function(i,o){var s=_(o);i.style({fill:j.tinyRGB(s),"fill-opacity":s.getAlpha()})},j.clean=function(i){if(i&&"object"==typeof i){var o,s,_,F,Z=Object.keys(i);for(o=0;o<Z.length;o++)if(F=i[_=Z[o]],"color"===_.substr(_.length-5)){if(Array.isArray(F))for(s=0;s<F.length;s++)F[s]=cleanOne(F[s]);else i[_]=cleanOne(F)}else if("colorscale"===_.substr(_.length-10)&&Array.isArray(F))for(s=0;s<F.length;s++)Array.isArray(F[s])&&(F[s][1]=cleanOne(F[s][1]));else if(Array.isArray(F)){var X=F[0];if(!Array.isArray(X)&&X&&"object"==typeof X)for(s=0;s<F.length;s++)j.clean(F[s])}else F&&"object"==typeof F&&!N(F)&&j.clean(F)}}},63583:function(i,o,s){"use strict";var _=s(13838),F=s(41940),N=s(1426).extendFlat,j=s(30962).overrideAll;i.exports=j({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:_.linecolor,outlinewidth:_.linewidth,bordercolor:_.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:_.minor.tickmode,nticks:_.nticks,tick0:_.tick0,dtick:_.dtick,tickvals:_.tickvals,ticktext:_.ticktext,ticks:N({},_.ticks,{dflt:""}),ticklabeloverflow:N({},_.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:_.ticklen,tickwidth:_.tickwidth,tickcolor:_.tickcolor,ticklabelstep:_.ticklabelstep,showticklabels:_.showticklabels,labelalias:_.labelalias,tickfont:F({}),tickangle:_.tickangle,tickformat:_.tickformat,tickformatstops:_.tickformatstops,tickprefix:_.tickprefix,showtickprefix:_.showtickprefix,ticksuffix:_.ticksuffix,showticksuffix:_.showticksuffix,separatethousands:_.separatethousands,exponentformat:_.exponentformat,minexponent:_.minexponent,showexponent:_.showexponent,title:{text:{valType:"string"},font:F({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:F({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(i){"use strict";i.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(i,o,s){"use strict";var _=s(71828),F=s(44467),N=s(26218),j=s(38701),Z=s(96115),X=s(89426),$=s(63583);i.exports=function(i,o,s){var ee,et,er,en=F.newContainer(o,"colorbar"),ei=i.colorbar||{};function coerce(i,o){return _.coerce(ei,en,$,i,o)}var eo=s.margin||{t:0,b:0,l:0,r:0},es=s.width-eo.l-eo.r,el=s.height-eo.t-eo.b,ec="v"===coerce("orientation"),eu=coerce("thicknessmode");coerce("thickness","fraction"===eu?30/(ec?es:el):30);var ef=coerce("lenmode");coerce("len","fraction"===ef?1:ec?el:es);var ed=coerce("yref"),eh=coerce("xref"),ep="paper"===ed,eg="paper"===eh,em="left";ec?(er="middle",em=eg?"left":"right",ee=eg?1.02:1,et=.5):(er=ep?"bottom":"top",em="center",ee=.5,et=ep?1.02:1),_.coerce(ei,en,{x:{valType:"number",min:eg?-2:0,max:eg?3:1,dflt:ee}},"x"),_.coerce(ei,en,{y:{valType:"number",min:ep?-2:0,max:ep?3:1,dflt:et}},"y"),coerce("xanchor",em),coerce("xpad"),coerce("yanchor",er),coerce("ypad"),_.noneOrAll(ei,en,["x","y"]),coerce("outlinecolor"),coerce("outlinewidth"),coerce("bordercolor"),coerce("borderwidth"),coerce("bgcolor");var ey=_.coerce(ei,en,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:ec?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");coerce("ticklabeloverflow",-1!==ey.indexOf("inside")?"hide past domain":"hide past div"),N(ei,en,coerce,"linear");var ev=s.font,ex={outerTicks:!1,font:ev};-1!==ey.indexOf("inside")&&(ex.bgColor="black"),X(ei,en,coerce,"linear",ex),Z(ei,en,coerce,"linear",ex),j(ei,en,coerce,"linear",ex),coerce("title.text",s._dfltTitle.colorbar);var e_=en.showticklabels?en.tickfont:ev,ew=_.extendFlat({},e_,{color:ev.color,size:_.bigFont(e_.size)});_.coerceFont(coerce,"title.font",ew),coerce("title.side",ec?"top":"right")}},98981:function(i,o,s){"use strict";var _=s(39898),F=s(84267),N=s(74875),j=s(73972),Z=s(89298),X=s(28569),$=s(71828),ee=$.strTranslate,et=s(1426).extendFlat,er=s(6964),en=s(91424),ei=s(7901),eo=s(92998),es=s(63893),el=s(52075).flipScale,ec=s(71453),eu=s(52830),ef=s(13838),ed=s(18783),eh=ed.LINE_SPACING,ep=ed.FROM_TL,eg=ed.FROM_BR,em=s(30939).cn;function draw(i){var o=i._fullLayout._infolayer.selectAll("g."+em.colorbar).data(makeColorBarData(i),function(i){return i._id});o.enter().append("g").attr("class",function(i){return i._id}).classed(em.colorbar,!0),o.each(function(o){var s=_.select(this);$.ensureSingle(s,"rect",em.cbbg),$.ensureSingle(s,"g",em.cbfills),$.ensureSingle(s,"g",em.cblines),$.ensureSingle(s,"g",em.cbaxis,function(i){i.classed(em.crisp,!0)}),$.ensureSingle(s,"g",em.cbtitleunshift,function(i){i.append("g").classed(em.cbtitle,!0)}),$.ensureSingle(s,"rect",em.cboutline);var F=drawColorBar(s,o,i);F&&F.then&&(i._promises||[]).push(F),i._context.edits.colorbarPosition&&makeEditable(s,o,i)}),o.exit().each(function(o){N.autoMargin(i,o._id)}).remove(),o.order()}function makeColorBarData(i){var o,s,_,F,N=i._fullLayout,j=i.calcdata,Z=[];function initOpts(i){return et(i,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function calcOpts(){"function"==typeof F.calc?F.calc(i,_,o):(o._fillgradient=s.reversescale?el(s.colorscale):s.colorscale,o._zrange=[s[F.min],s[F.max]])}for(var X=0;X<j.length;X++)if((_=j[X][0].trace)._module){var $=_._module.colorbar;if(!0===_.visible&&$)for(var ee=Array.isArray($),er=ee?$:[$],en=0;en<er.length;en++){var ei=(F=er[en]).container;(s=ei?_[ei]:_)&&s.showscale&&((o=initOpts(s.colorbar))._id="cb"+_.uid+(ee&&ei?"-"+ei:""),o._traceIndex=_.index,o._propPrefix=(ei?ei+".":"")+"colorbar.",o._meta=_._meta,calcOpts(),Z.push(o))}}for(var eo in N._colorAxes)if((s=N[eo]).showscale){var es=N._colorAxes[eo];(o=initOpts(s.colorbar))._id="cb"+eo,o._propPrefix=eo+".colorbar.",o._meta=N._meta,F={min:"cmin",max:"cmax"},"heatmap"!==es[0]&&(_=es[1],F.calc=_._module.colorbar.calc),calcOpts(),Z.push(o)}return Z}function drawColorBar(i,o,s){var j,X="v"===o.orientation,er=o.len,el=o.lenmode,ec=o.thickness,eu=o.thicknessmode,ef=o.outlinewidth,ed=o.borderwidth,ey=o.bgcolor,ev=o.xanchor,ex=o.yanchor,e_=o.xpad,ew=o.ypad,eT=o.x,ek=X?o.y:1-o.y,eA="paper"===o.yref,eS="paper"===o.xref,eM=s._fullLayout,eC=eM._size,eE=o._fillcolor,eL=o._line,eP=o.title,eI=eP.side,eO=o._zrange||_.extent(("function"==typeof eE?eE:eL.color).domain()),eD="function"==typeof eL.color?eL.color:function(){return eL.color},eR="function"==typeof eE?eE:function(){return eE},eB=o._levels,eF=calcLevels(s,o,eO),ez=eF.fill,eN=eF.line,ej=Math.round(ec*("fraction"===eu?X?eC.w:eC.h:1)),eV=ej/(X?eC.w:eC.h),eU=Math.round(er*("fraction"===el?X?eC.h:eC.w:1)),eH=eU/(X?eC.h:eC.w),eG=eS?eC.w:s._fullLayout.width,eW=eA?eC.h:s._fullLayout.height,eZ=Math.round(X?eT*eG+e_:ek*eW+ew),eY={center:.5,right:1}[ev]||0,eX={top:1,middle:.5}[ex]||0,eK=X?eT-eY*eV:ek-eX*eV,eJ=X?ek-eX*eH:eT-eY*eH,e$=Math.round(X?eW*(1-eJ):eG*eJ);o._lenFrac=eH,o._thickFrac=eV,o._uFrac=eK,o._vFrac=eJ;var eQ=o._axis=mockColorBarAxis(s,o,eO);eQ.position=eV+(X?eT+e_/eC.w:ek+ew/eC.h);var e0=-1!==["top","bottom"].indexOf(eI);if(X&&e0&&(eQ.title.side=eI,eQ.titlex=eT+e_/eC.w,eQ.titley=eJ+("top"===eP.side?eH-ew/eC.h:ew/eC.h)),X||e0||(eQ.title.side=eI,eQ.titley=ek+ew/eC.h,eQ.titlex=eJ+e_/eC.w),eL.color&&"auto"===o.tickmode){eQ.tickmode="linear",eQ.tick0=eB.start;var e1=eB.size,e2=$.constrain(eU/50,4,15)+1,e3=(eO[1]-eO[0])/((o.nticks||e2)*e1);if(e3>1){var e5=Math.pow(10,Math.floor(Math.log(e3)/Math.LN10));e1*=e5*$.roundUp(e3/e5,[2,5,10]),(Math.abs(eB.start)/eB.size+1e-6)%1<2e-6&&(eQ.tick0=0)}eQ.dtick=e1}eQ.domain=X?[eJ+ew/eC.h,eJ+eH-ew/eC.h]:[eJ+e_/eC.w,eJ+eH-e_/eC.w],eQ.setScale(),i.attr("transform",ee(Math.round(eC.l),Math.round(eC.t)));var e4=i.select("."+em.cbtitleunshift).attr("transform",ee(-Math.round(eC.l),-Math.round(eC.t))),e6=eQ.ticklabelposition,e8=eQ.title.font.size,e7=i.select("."+em.cbaxis),e9=0,te=0;function drawTitle(_,F){var N={propContainer:eQ,propName:o._propPrefix+"title",traceIndex:o._traceIndex,_meta:o._meta,placeholder:eM._dfltTitle.colorbar,containerGroup:i.select("."+em.cbtitle)},j="h"===_.charAt(0)?_.substr(1):"h"+_;i.selectAll("."+j+",."+j+"-math-group").remove(),eo.draw(s,_,et(N,F||{}))}function drawDummyTitle(){if(X&&e0||!X&&!e0){var i,o;"top"===eI&&(i=e_+eC.l+eG*eT,o=ew+eC.t+eW*(1-eJ-eH)+3+.75*e8),"bottom"===eI&&(i=e_+eC.l+eG*eT,o=ew+eC.t+eW*(1-eJ)-3-.25*e8),"right"===eI&&(o=ew+eC.t+eW*ek+3+.75*e8,i=e_+eC.l+eG*eJ),drawTitle(eQ._id+"title",{attributes:{x:i,y:o,"text-anchor":X?"start":"middle"}})}}function drawCbTitle(){if(X&&!e0||!X&&e0){var i,F,N=eQ.position||0,j=eQ._offset+eQ._length/2;if("right"===eI)F=j,i=eC.l+eG*N+10+e8*(eQ.showticklabels?1:.5);else if(i=j,"bottom"===eI&&(F=eC.t+eW*N+10+(-1===e6.indexOf("inside")?eQ.tickfont.size:0)+("intside"!==eQ.ticks&&o.ticklen||0)),"top"===eI){var Z=eP.text.split("<br>").length;F=eC.t+eW*N+10-ej-eh*e8*Z}drawTitle((X?"h":"v")+eQ._id+"title",{avoid:{selection:_.select(s).selectAll("g."+eQ._id+"tick"),side:eI,offsetTop:X?0:eC.t,offsetLeft:X?eC.l:0,maxShift:X?eM.width:eM.height},attributes:{x:i,y:F,"text-anchor":"middle"},transform:{rotate:X?-90:0,offset:0}})}}function drawAxis(){if(!X&&!e0||X&&e0){var N,j=i.select("."+em.cbtitle),et=j.select("text"),er=[-ef/2,ef/2],ei=j.select(".h"+eQ._id+"title-math-group").node(),eo=15.6;if(et.node()&&(eo=parseInt(et.node().style.fontSize,10)*eh),ei?(te=(N=en.bBox(ei)).width,(e9=N.height)>eo&&(er[1]-=(e9-eo)/2)):et.node()&&!et.classed(em.jsPlaceholder)&&(te=(N=en.bBox(et.node())).width,e9=N.height),X){if(e9){if(e9+=5,"top"===eI)eQ.domain[1]-=e9/eC.h,er[1]*=-1;else{eQ.domain[0]+=e9/eC.h;var el=es.lineCount(et);er[1]+=(1-el)*eo}j.attr("transform",ee(er[0],er[1])),eQ.setScale()}}else te&&("right"===eI&&(eQ.domain[0]+=(te+e8/2)/eC.w),j.attr("transform",ee(er[0],er[1])),eQ.setScale())}i.selectAll("."+em.cbfills+",."+em.cblines).attr("transform",X?ee(0,Math.round(eC.h*(1-eQ.domain[1]))):ee(Math.round(eC.w*eQ.domain[0]),0)),e7.attr("transform",X?ee(0,Math.round(-eC.t)):ee(Math.round(-eC.l),0));var ec=i.select("."+em.cbfills).selectAll("rect."+em.cbfill).attr("style","").data(ez);ec.enter().append("rect").classed(em.cbfill,!0).attr("style",""),ec.exit().remove();var eu=eO.map(eQ.c2p).map(Math.round).sort(function(i,o){return i-o});ec.each(function(i,N){var j=[0===N?eO[0]:(ez[N]+ez[N-1])/2,N===ez.length-1?eO[1]:(ez[N]+ez[N+1])/2].map(eQ.c2p).map(Math.round);X&&(j[1]=$.constrain(j[1]+(j[1]>j[0])?1:-1,eu[0],eu[1]));var Z=_.select(this).attr(X?"x":"y",eZ).attr(X?"y":"x",_.min(j)).attr(X?"width":"height",Math.max(ej,2)).attr(X?"height":"width",Math.max(_.max(j)-_.min(j),2));if(o._fillgradient)en.gradient(Z,s,o._id,X?"vertical":"horizontalreversed",o._fillgradient,"fill");else{var ee=eR(i).replace("e-","");Z.attr("fill",F(ee).toHexString())}});var ed=i.select("."+em.cblines).selectAll("path."+em.cbline).data(eL.color&&eL.width?eN:[]);ed.enter().append("path").classed(em.cbline,!0),ed.exit().remove(),ed.each(function(i){var o=Math.round(eQ.c2p(i))+eL.width/2%1;_.select(this).attr("d","M"+(X?eZ+","+o:o+","+eZ)+(X?"h":"v")+ej).call(en.lineGroupStyle,eL.width,eD(i),eL.dash)}),e7.selectAll("g."+eQ._id+"tick,path").remove();var ep=eZ+ej+(ef||0)/2-("outside"===o.ticks?1:0),eg=Z.calcTicks(eQ),ey=Z.getTickSigns(eQ)[2];return Z.drawTicks(s,eQ,{vals:"inside"===eQ.ticks?Z.clipEnds(eQ,eg):eg,layer:e7,path:Z.makeTickPath(eQ,ep,ey),transFn:Z.makeTransTickFn(eQ)}),Z.drawLabels(s,eQ,{vals:eg,layer:e7,transFn:Z.makeTransTickLabelFn(eQ),labelFns:Z.makeLabelFns(eQ,ep)})}function positionCB(){var _=ej+ef/2;-1===e6.indexOf("inside")&&(es=en.bBox(e7.node()),_+=X?es.width:es.height),j=e4.select("text");var Z=0,$=X&&"top"===eI,et=!X&&"right"===eI,eo=0;if(j.node()&&!j.classed(em.jsPlaceholder)){var es,eh,eE=e4.select(".h"+eQ._id+"title-math-group").node();eE&&(X&&e0||!X&&!e0)?(Z=(es=en.bBox(eE)).width,eh=es.height):(Z=(es=en.bBox(e4.node())).right-eC.l-(X?eZ:e$),eh=es.bottom-eC.t-(X?e$:eZ),X||"top"!==eI||(_+=es.height,eo=es.height)),et&&(j.attr("transform",ee(Z/2+e8/2,0)),Z*=2),_=Math.max(_,X?Z:eh)}var eL=(X?e_:ew)*2+_+ed+ef/2,eO=0;!X&&eP.text&&"bottom"===ex&&ek<=0&&(eO=eL/2,eL+=eO,eo+=eO),eM._hColorbarMoveTitle=eO,eM._hColorbarMoveCBTitle=eo;var eD=ed+ef,eR=(X?eZ:e$)-eD/2-(X?e_:0),eB=(X?e$:eZ)-(X?eU:ew+eo-eO);i.select("."+em.cbbg).attr("x",eR).attr("y",eB).attr(X?"width":"height",Math.max(eL-eO,2)).attr(X?"height":"width",Math.max(eU+eD,2)).call(ei.fill,ey).call(ei.stroke,o.bordercolor).style("stroke-width",ed);var eF=et?Math.max(Z-10,0):0;i.selectAll("."+em.cboutline).attr("x",(X?eZ:e$+e_)+eF).attr("y",(X?e$+ew-eU:eZ)+($?e9:0)).attr(X?"width":"height",Math.max(ej,2)).attr(X?"height":"width",Math.max(eU-(X?2*ew+e9:2*e_+eF),2)).call(ei.stroke,o.outlinecolor).style({fill:"none","stroke-width":ef});var ez=X?eY*eL:0,eN=X?0:(1-eX)*eL-eo;if(ez=eS?eC.l-ez:-ez,eN=eA?eC.t-eN:-eN,i.attr("transform",ee(ez,eN)),!X&&(ed||F(ey).getAlpha()&&!F.equals(eM.paper_bgcolor,ey))){var eV=e7.selectAll("text"),eH=eV[0].length,eG=i.select("."+em.cbbg).node(),eW=en.bBox(eG),eK=en.getTranslate(i);eV.each(function(i,o){var s=eH-1;if(0===o||o===s){var _,F=en.bBox(this),N=en.getTranslate(this);if(o===s){var j=F.right+N.x;(_=eW.right+eK.x+e$-ed-2+eT-j)>0&&(_=0)}else if(0===o){var Z=F.left+N.x;(_=eW.left+eK.x+e$+ed+2-Z)<0&&(_=0)}_&&(eH<3?this.setAttribute("transform","translate("+_+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var eJ={},e1=ep[ev],e2=eg[ev],e3=ep[ex],e5=eg[ex],te=eL-ej;X?("pixels"===el?(eJ.y=ek,eJ.t=eU*e3,eJ.b=eU*e5):(eJ.t=eJ.b=0,eJ.yt=ek+er*e3,eJ.yb=ek-er*e5),"pixels"===eu?(eJ.x=eT,eJ.l=eL*e1,eJ.r=eL*e2):(eJ.l=te*e1,eJ.r=te*e2,eJ.xl=eT-ec*e1,eJ.xr=eT+ec*e2)):("pixels"===el?(eJ.x=eT,eJ.l=eU*e1,eJ.r=eU*e2):(eJ.l=eJ.r=0,eJ.xl=eT+er*e1,eJ.xr=eT-er*e2),"pixels"===eu?(eJ.y=1-ek,eJ.t=eL*e3,eJ.b=eL*e5):(eJ.t=te*e3,eJ.b=te*e5,eJ.yt=ek-ec*e3,eJ.yb=ek+ec*e5));var tt=o.y<.5?"b":"t",tr=o.x<.5?"l":"r";s._fullLayout._reservedMargin[o._id]={};var tn={r:eM.width-eR-ez,l:eR+eJ.r,b:eM.height-eB-eN,t:eB+eJ.b};eS&&eA?N.autoMargin(s,o._id,eJ):eS?s._fullLayout._reservedMargin[o._id][tt]=tn[tt]:eA?s._fullLayout._reservedMargin[o._id][tr]=tn[tr]:X?s._fullLayout._reservedMargin[o._id][tr]=tn[tr]:s._fullLayout._reservedMargin[o._id][tt]=tn[tt]}return $.syncOrAsync([N.previousPromises,drawDummyTitle,drawAxis,drawCbTitle,N.previousPromises,positionCB],s)}function makeEditable(i,o,s){var _,F,N,Z="v"===o.orientation,$=s._fullLayout._size;X.init({element:i.node(),gd:s,prepFn:function(){_=i.attr("transform"),er(i)},moveFn:function(s,j){i.attr("transform",_+ee(s,j)),F=X.align((Z?o._uFrac:o._vFrac)+s/$.w,Z?o._thickFrac:o._lenFrac,0,1,o.xanchor),N=X.align((Z?o._vFrac:1-o._uFrac)-j/$.h,Z?o._lenFrac:o._thickFrac,0,1,o.yanchor),er(i,X.getCursor(F,N,o.xanchor,o.yanchor))},doneFn:function(){if(er(i),void 0!==F&&void 0!==N){var _={};_[o._propPrefix+"x"]=F,_[o._propPrefix+"y"]=N,void 0!==o._traceIndex?j.call("_guiRestyle",s,_,o._traceIndex):j.call("_guiRelayout",s,_)}}})}function calcLevels(i,o,s){var _,F,N=o._levels,j=[],Z=[],X=N.end+N.size/100,$=N.size,ee=1.001*s[0]-.001*s[1],et=1.001*s[1]-.001*s[0];for(F=0;F<1e5&&(_=N.start+F*$,$>0?!(_>=X):!(_<=X));F++)_>ee&&_<et&&j.push(_);if(o._fillgradient)Z=[0];else if("function"==typeof o._fillcolor){var er=o._filllevels;if(er)for(F=0,X=er.end+er.size/100,$=er.size;F<1e5&&(_=er.start+F*$,$>0?!(_>=X):!(_<=X));F++)_>s[0]&&_<s[1]&&Z.push(_);else(Z=j.map(function(i){return i-N.size/2})).push(Z[Z.length-1]+N.size)}else o._fillcolor&&"string"==typeof o._fillcolor&&(Z=[0]);return N.size<0&&(j.reverse(),Z.reverse()),{line:j,fill:Z}}function mockColorBarAxis(i,o,s){var _=i._fullLayout,F="v"===o.orientation,N={type:"linear",range:s,tickmode:o.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,showticklabels:o.showticklabels,labelalias:o.labelalias,ticklabelposition:o.ticklabelposition,ticklabeloverflow:o.ticklabeloverflow,ticklabelstep:o.ticklabelstep,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,showexponent:o.showexponent,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,title:o.title,showline:!0,anchor:"free",side:F?"right":"bottom",position:1},j=F?"y":"x",Z={type:"linear",_id:j+o._id},X={letter:j,font:_.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:_.calendar};function coerce(i,o){return $.coerce(N,Z,ef,i,o)}return ec(N,Z,coerce,X,_),eu(N,Z,coerce,X),Z}i.exports={draw:draw}},76228:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i){return _.isPlainObject(i.colorbar)}},12311:function(i,o,s){"use strict";i.exports={moduleType:"component",name:"colorbar",attributes:s(63583),supplyDefaults:s(62499),draw:s(98981).draw,hasColorbar:s(76228)}},50693:function(i,o,s){"use strict";var _=s(63583),F=s(30587).counter,N=s(78607),j=s(63282).scales;function code(i){return"`"+i+"`"}N(j),i.exports=function(i,o){i=i||"";var s,N=(o=o||{}).cLetter||"c";"onlyIfNumerical"in o&&o.onlyIfNumerical;var Z="noScale"in o?o.noScale:"marker.line"===i,X="showScaleDflt"in o?o.showScaleDflt:"z"===N,$="string"==typeof o.colorscaleDflt?j[o.colorscaleDflt]:null,ee=o.editTypeOverride||"",et=i?i+".":"";"colorAttr"in o?(s=o.colorAttr,o.colorAttr):code(et+(s=({z:"z",c:"color"})[N]));var er=N+"auto",en=N+"min",ei=N+"max";code(et+er),code(et+en),code(et+ei);var eo={};eo[en]=eo[ei]=void 0;var es={};es[er]=!1;var el={};return"color"===s&&(el.color={valType:"color",arrayOk:!0,editType:ee||"style"},o.anim&&(el.color.anim=!0)),el[er]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:eo},el[en]={valType:"number",dflt:null,editType:ee||"plot",impliedEdits:es},el[ei]={valType:"number",dflt:null,editType:ee||"plot",impliedEdits:es},el[N+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:eo},el.colorscale={valType:"colorscale",editType:"calc",dflt:$,impliedEdits:{autocolorscale:!1}},el.autocolorscale={valType:"boolean",dflt:!1!==o.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},el.reversescale={valType:"boolean",dflt:!1,editType:"plot"},Z||(el.showscale={valType:"boolean",dflt:X,editType:"calc"},el.colorbar=_),o.noColorAxis||(el.coloraxis={valType:"subplotid",regex:F("coloraxis"),dflt:null,editType:"calc"}),el}},78803:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(52075).extractOpts;i.exports=function(i,o,s){var j,Z=i._fullLayout,X=s.vals,$=s.containerStr,ee=$?F.nestedProperty(o,$).get():o,et=N(ee),er=!1!==et.auto,en=et.min,ei=et.max,eo=et.mid,minVal=function(){return F.aggNums(Math.min,null,X)},maxVal=function(){return F.aggNums(Math.max,null,X)};void 0===en?en=minVal():er&&(en=ee._colorAx&&_(en)?Math.min(en,minVal()):minVal()),void 0===ei?ei=maxVal():er&&(ei=ee._colorAx&&_(ei)?Math.max(ei,maxVal()):maxVal()),er&&void 0!==eo&&(ei-eo>eo-en?en=eo-(ei-eo):ei-eo<eo-en&&(ei=eo+(eo-en))),en===ei&&(en-=.5,ei+=.5),et._sync("min",en),et._sync("max",ei),et.autocolorscale&&(j=en*ei<0?Z.colorscale.diverging:en>=0?Z.colorscale.sequential:Z.colorscale.sequentialminus,et._sync("colorscale",j))}},33046:function(i,o,s){"use strict";var _=s(71828),F=s(52075).hasColorscale,N=s(52075).extractOpts;i.exports=function(i,o){function replace(i,o){var s=i["_"+o];void 0!==s&&(i[o]=s)}function relinkColorAttrs(i,s){var F=s.container?_.nestedProperty(i,s.container).get():i;if(F){if(F.coloraxis)F._colorAx=o[F.coloraxis];else{var j=N(F),Z=j.auto;(Z||void 0===j.min)&&replace(F,s.min),(Z||void 0===j.max)&&replace(F,s.max),j.autocolorscale&&replace(F,"colorscale")}}}for(var s=0;s<i.length;s++){var j=i[s],Z=j._module.colorbar;if(Z){if(Array.isArray(Z))for(var X=0;X<Z.length;X++)relinkColorAttrs(j,Z[X]);else relinkColorAttrs(j,Z)}F(j,"marker.line")&&relinkColorAttrs(j,{container:"marker.line",min:"cmin",max:"cmax"})}for(var $ in o._colorAxes)relinkColorAttrs(o[$],{min:"cmin",max:"cmax"})}},1586:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(76228),j=s(62499),Z=s(63282).isValid,X=s(73972).traceIs;function npMaybe(i,o){var s=o.slice(0,o.length-1);return o?F.nestedProperty(i,s).get()||{}:i}i.exports=function colorScaleDefaults(i,o,s,$,ee){var et,er,en=ee.prefix,ei=ee.cLetter,eo="_module"in o,es=npMaybe(i,en),el=npMaybe(o,en),ec=npMaybe(o._template||{},en)||{},thisFn=function(){return delete i.coloraxis,delete o.coloraxis,colorScaleDefaults(i,o,s,$,ee)};if(eo){var eu=s._colorAxes||{},ef=$(en+"coloraxis");if(ef){var ed=X(o,"contour")&&F.nestedProperty(o,"contours.coloring").get()||"heatmap",eh=eu[ef];eh?(eh[2].push(thisFn),eh[0]!==ed&&(eh[0]=!1,F.warn(["Ignoring coloraxis:",ef,"setting","as it is linked to incompatible colorscales."].join(" ")))):eu[ef]=[ed,o,[thisFn]];return}}var ep=es[ei+"min"],eg=es[ei+"max"];$(en+ei+"auto",!(_(ep)&&_(eg)&&ep<eg))?$(en+ei+"mid"):($(en+ei+"min"),$(en+ei+"max"));var em=es.colorscale,ey=ec.colorscale;void 0!==em&&(et=!Z(em)),void 0!==ey&&(et=!Z(ey)),$(en+"autocolorscale",et),$(en+"colorscale"),$(en+"reversescale"),"marker.line."!==en&&(en&&eo&&(er=N(es)),$(en+"showscale",er)&&(en&&ec&&(el._template=ec),j(es,el,s)))}},52075:function(i,o,s){"use strict";var _=s(39898),F=s(84267),N=s(92770),j=s(71828),Z=s(7901),X=s(63282).isValid;function hasColorscale(i,o,s){var _=o?j.nestedProperty(i,o).get()||{}:i,F=_[s||"color"],Z=!1;if(j.isArrayOrTypedArray(F)){for(var $=0;$<F.length;$++)if(N(F[$])){Z=!0;break}}return j.isPlainObject(_)&&(Z||!0===_.showscale||N(_.cmin)&&N(_.cmax)||X(_.colorscale)||j.isPlainObject(_.colorbar))}var $=["showscale","autocolorscale","colorscale","reversescale","colorbar"],ee=["min","max","mid","auto"];function extractOpts(i){var o,s,_,F,N=i._colorAx,j=N||i,Z={};for(s=0;s<$.length;s++)Z[_=$[s]]=j[_];if(N)for(s=0,o="c";s<ee.length;s++)Z[_=ee[s]]=j["c"+_];else{for(s=0;s<ee.length;s++){if((F="c"+(_=ee[s]))in j){Z[_]=j[F];continue}(F="z"+_)in j&&(Z[_]=j[F])}o=F.charAt(0)}return Z._sync=function(i,s){var _=-1!==ee.indexOf(i)?o+i:i;j[_]=j["_"+_]=s},Z}function extractScale(i){for(var o=extractOpts(i),s=o.min,_=o.max,F=o.reversescale?flipScale(o.colorscale):o.colorscale,N=F.length,j=Array(N),Z=Array(N),X=0;X<N;X++){var $=F[X];j[X]=s+$[0]*(_-s),Z[X]=$[1]}return{domain:j,range:Z}}function flipScale(i){for(var o=i.length,s=Array(o),_=o-1,F=0;_>=0;_--,F++){var N=i[_];s[F]=[1-N[0],N[1]]}return s}function makeColorScaleFunc(i,o){o=o||{};for(var s,j=i.domain,X=i.range,$=X.length,ee=Array($),et=0;et<$;et++){var er=F(X[et]).toRgb();ee[et]=[er.r,er.g,er.b,er.a]}var en=_.scale.linear().domain(j).range(ee).clamp(!0),ei=o.noNumericCheck,eo=o.returnArray;return(s=ei&&eo?en:ei?function(i){return colorArray2rbga(en(i))}:eo?function(i){return N(i)?en(i):F(i).isValid()?i:Z.defaultLine}:function(i){return N(i)?colorArray2rbga(en(i)):F(i).isValid()?i:Z.defaultLine}).domain=en.domain,s.range=function(){return X},s}function makeColorScaleFuncFromTrace(i,o){return makeColorScaleFunc(extractScale(i),o)}function colorArray2rbga(i){return F({r:i[0],g:i[1],b:i[2],a:i[3]}).toRgbString()}i.exports={hasColorscale:hasColorscale,extractOpts:extractOpts,extractScale:extractScale,flipScale:flipScale,makeColorScaleFunc:makeColorScaleFunc,makeColorScaleFuncFromTrace:makeColorScaleFuncFromTrace}},21081:function(i,o,s){"use strict";var _=s(63282),F=s(52075);i.exports={moduleType:"component",name:"colorscale",attributes:s(50693),layoutAttributes:s(72673),supplyLayoutDefaults:s(30959),handleDefaults:s(1586),crossTraceDefaults:s(33046),calc:s(78803),scales:_.scales,defaultScale:_.defaultScale,getScale:_.get,isValidScale:_.isValid,hasColorscale:F.hasColorscale,extractOpts:F.extractOpts,extractScale:F.extractScale,flipScale:F.flipScale,makeColorScaleFunc:F.makeColorScaleFunc,makeColorScaleFuncFromTrace:F.makeColorScaleFuncFromTrace}},72673:function(i,o,s){"use strict";var _=s(1426).extendFlat,F=s(50693),N=s(63282).scales;i.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:N.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:N.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:N.RdBu,editType:"calc"}},coloraxis:_({_isSubplotObj:!0,editType:"calc"},F("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(i,o,s){"use strict";var _=s(71828),F=s(44467),N=s(72673),j=s(1586);i.exports=function(i,o){function coerce(s,F){return _.coerce(i,o,N,s,F)}coerce("colorscale.sequential"),coerce("colorscale.sequentialminus"),coerce("colorscale.diverging");var s,Z,X=o._colorAxes;function coerceAx(i,o){return _.coerce(s,Z,N.coloraxis,i,o)}for(var $ in X){var ee=X[$];if(ee[0])s=i[$]||{},(Z=F.newContainer(o,$,"coloraxis"))._name=$,j(s,Z,o,coerceAx,{prefix:"",cLetter:"c"});else{for(var et=0;et<ee[2].length;et++)ee[2][et]();delete o._colorAxes[$]}}}},63282:function(i,o,s){"use strict";var _=s(84267),F={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},N=F.RdBu;function getScale(i,o){if(o||(o=N),!i)return o;function parseScale(){try{i=F[i]||JSON.parse(i)}catch(s){i=o}}return("string"==typeof i&&(parseScale(),"string"==typeof i&&parseScale()),isValidScaleArray(i))?i:o}function isValidScaleArray(i){var o=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var s=0;s<i.length;s++){var F=i[s];if(2!==F.length||+F[0]<o||!_(F[1]).isValid())return!1;o=+F[0]}return!0}function isValidScale(i){return void 0!==F[i]||isValidScaleArray(i)}i.exports={scales:F,defaultScale:N,get:getScale,isValid:isValidScale}},92807:function(i){"use strict";i.exports=function(i,o,s,_,F){var N=(i-s)/(_-s),j=N+o/(_-s),Z=(N+j)/2;return"left"===F||"bottom"===F?N:"center"===F||"middle"===F?Z:"right"===F||"top"===F?j:N<2/3-Z?N:j>4/3-Z?j:Z}},70461:function(i,o,s){"use strict";var _=s(71828),F=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];i.exports=function(i,o,s,N){return i="left"===s?0:"center"===s?1:"right"===s?2:_.constrain(Math.floor(3*i),0,2),F[o="bottom"===N?0:"middle"===N?1:"top"===N?2:_.constrain(Math.floor(3*o),0,2)][i]}},64505:function(i,o){"use strict";o.selectMode=function(i){return"lasso"===i||"select"===i},o.drawMode=function(i){return"drawclosedpath"===i||"drawopenpath"===i||"drawline"===i||"drawrect"===i||"drawcircle"===i},o.openMode=function(i){return"drawline"===i||"drawopenpath"===i},o.rectMode=function(i){return"select"===i||"drawline"===i||"drawrect"===i||"drawcircle"===i},o.freeMode=function(i){return"lasso"===i||"drawclosedpath"===i||"drawopenpath"===i},o.selectingOrDrawing=function(i){return o.freeMode(i)||o.rectMode(i)}},28569:function(i,o,s){"use strict";var _=s(48956),F=s(57035),N=s(38520),j=s(71828).removeElement,Z=s(85555),X=i.exports={};X.align=s(92807),X.getCursor=s(70461);var $=s(26041);function coverSlip(){var i=document.createElement("div");i.className="dragcover";var o=i.style;return o.position="fixed",o.left=0,o.right=0,o.top=0,o.bottom=0,o.zIndex=999999999,o.background="none",document.body.appendChild(i),i}function pointerOffset(i){return _(i.changedTouches?i.changedTouches[0]:i,document.body)}X.unhover=$.wrapped,X.unhoverRaw=$.raw,X.init=function(i){var o,s,_,$,ee,et,er,en,ei=i.gd,eo=1,es=ei._context.doubleClickDelay,el=i.element;function _clampFn(i,o,s){return Math.abs(i)<s&&(i=0),Math.abs(o)<s&&(o=0),[i,o]}ei._mouseDownTime||(ei._mouseDownTime=0),el.style.pointerEvents="all",el.onmousedown=onStart,N?(el._ontouchstart&&el.removeEventListener("touchstart",el._ontouchstart),el._ontouchstart=onStart,el.addEventListener("touchstart",onStart,{passive:!1})):el.ontouchstart=onStart;var ec=i.clampFn||_clampFn;function onStart(N){ei._dragged=!1,ei._dragging=!0;var j=pointerOffset(N);o=j[0],s=j[1],er=N.target,et=N,en=2===N.buttons||N.ctrlKey,void 0===N.clientX&&void 0===N.clientY&&(N.clientX=o,N.clientY=s),(_=new Date().getTime())-ei._mouseDownTime<es?eo+=1:(eo=1,ei._mouseDownTime=_),i.prepFn&&i.prepFn(N,o,s),F&&!en?(ee=coverSlip()).style.cursor=window.getComputedStyle(el).cursor:F||(ee=document,$=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(el).cursor),document.addEventListener("mouseup",onDone),document.addEventListener("touchend",onDone),!1!==i.dragmode&&(N.preventDefault(),document.addEventListener("mousemove",onMove),document.addEventListener("touchmove",onMove,{passive:!1}))}function onMove(_){_.preventDefault();var F=pointerOffset(_),N=i.minDrag||Z.MINDRAG,j=ec(F[0]-o,F[1]-s,N),$=j[0],ee=j[1];($||ee)&&(ei._dragged=!0,X.unhover(ei,_)),ei._dragged&&i.moveFn&&!en&&(ei._dragdata={element:el,dx:$,dy:ee},i.moveFn($,ee))}function onDone(o){if(delete ei._dragdata,!1!==i.dragmode&&(o.preventDefault(),document.removeEventListener("mousemove",onMove),document.removeEventListener("touchmove",onMove)),document.removeEventListener("mouseup",onDone),document.removeEventListener("touchend",onDone),F?j(ee):$&&(ee.documentElement.style.cursor=$,$=null),!ei._dragging){ei._dragged=!1;return}if(ei._dragging=!1,new Date().getTime()-ei._mouseDownTime>es&&(eo=Math.max(eo-1,1)),ei._dragged)i.doneFn&&i.doneFn();else if(i.clickFn&&i.clickFn(eo,et),!en){var s;try{s=new MouseEvent("click",o)}catch(i){var _=pointerOffset(o);(s=document.createEvent("MouseEvents")).initMouseEvent("click",o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,_[0],_[1],o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget)}er.dispatchEvent(s)}ei._dragging=!1,ei._dragged=!1}},X.coverSlip=coverSlip},26041:function(i,o,s){"use strict";var _=s(11086),F=s(79990),N=s(24401).getGraphDiv,j=s(26675),Z=i.exports={};Z.wrapped=function(i,o,s){(i=N(i))._fullLayout&&F.clear(i._fullLayout._uid+j.HOVERID),Z.raw(i,o,s)},Z.raw=function(i,o){var s=i._fullLayout,F=i._hoverdata;o||(o={}),(!o.target||i._dragged||!1!==_.triggerHandler(i,"plotly_beforehover",o))&&(s._hoverlayer.selectAll("g").remove(),s._hoverlayer.selectAll("line").remove(),s._hoverlayer.selectAll("circle").remove(),i._hoverdata=void 0,o.target&&F&&i.emit("plotly_unhover",{event:o,points:F}))}},79952:function(i,o){"use strict";o.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},o.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(i,o,s){"use strict";var _,F,N,j,Z,X,$,ee,et=s(39898),er=s(71828),en=er.numberFormat,ei=s(92770),eo=s(84267),es=s(73972),el=s(7901),ec=s(21081),eu=er.strTranslate,ef=s(63893),ed=s(77922),eh=s(18783).LINE_SPACING,ep=s(37822).DESELECTDIM,eg=s(34098),em=s(39984),ey=s(23469).appendArrayPointValue,ev=i.exports={};function setFillStyle(i,o,s){var _=o.fillpattern,F=_&&ev.getPatternAttr(_.shape,0,"");if(F){var N=ev.getPatternAttr(_.bgcolor,0,null),j=ev.getPatternAttr(_.fgcolor,0,null),Z=_.fgopacity,X=ev.getPatternAttr(_.size,0,8),$=ev.getPatternAttr(_.solidity,0,.3),ee=o.uid;ev.pattern(i,"point",s,ee,F,X,$,void 0,_.fillmode,N,j,Z)}else o.fillcolor&&i.call(el.fill,o.fillcolor)}ev.font=function(i,o,s,_){er.isPlainObject(o)&&(_=o.color,s=o.size,o=o.family),o&&i.style("font-family",o),s+1&&i.style("font-size",s+"px"),_&&i.call(el.fill,_)},ev.setPosition=function(i,o,s){i.attr("x",o).attr("y",s)},ev.setSize=function(i,o,s){i.attr("width",o).attr("height",s)},ev.setRect=function(i,o,s,_,F){i.call(ev.setPosition,o,s).call(ev.setSize,_,F)},ev.translatePoint=function(i,o,s,_){var F=s.c2p(i.x),N=_.c2p(i.y);return!!(ei(F)&&ei(N)&&o.node())&&("text"===o.node().nodeName?o.attr("x",F).attr("y",N):o.attr("transform",eu(F,N)),!0)},ev.translatePoints=function(i,o,s){i.each(function(i){var _=et.select(this);ev.translatePoint(i,_,o,s)})},ev.hideOutsideRangePoint=function(i,o,s,_,F,N){o.attr("display",s.isPtWithinRange(i,F)&&_.isPtWithinRange(i,N)?null:"none")},ev.hideOutsideRangePoints=function(i,o){if(o._hasClipOnAxisFalse){var s=o.xaxis,_=o.yaxis;i.each(function(o){var F=o[0].trace,N=F.xcalendar,j=F.ycalendar,Z=es.traceIs(F,"bar-like")?".bartext":".point,.textpoint";i.selectAll(Z).each(function(i){ev.hideOutsideRangePoint(i,et.select(this),s,_,N,j)})})}},ev.crispRound=function(i,o,s){return o&&ei(o)?i._context.staticPlot?o:o<1?1:Math.round(o):s||0},ev.singleLineStyle=function(i,o,s,_,F){o.style("fill","none");var N=(((i||[])[0]||{}).trace||{}).line||{},j=s||N.width||0,Z=F||N.dash||"";el.stroke(o,_||N.color),ev.dashLine(o,Z,j)},ev.lineGroupStyle=function(i,o,s,_){i.style("fill","none").each(function(i){var F=(((i||[])[0]||{}).trace||{}).line||{},N=o||F.width||0,j=_||F.dash||"";et.select(this).call(el.stroke,s||F.color).call(ev.dashLine,j,N)})},ev.dashLine=function(i,o,s){s=+s||0,o=ev.dashStyle(o,s),i.style({"stroke-dasharray":o,"stroke-width":s+"px"})},ev.dashStyle=function(i,o){var s=Math.max(o=+o||1,3);return"solid"===i?i="":"dot"===i?i=s+"px,"+s+"px":"dash"===i?i=3*s+"px,"+3*s+"px":"longdash"===i?i=5*s+"px,"+5*s+"px":"dashdot"===i?i=3*s+"px,"+s+"px,"+s+"px,"+s+"px":"longdashdot"===i&&(i=5*s+"px,"+2*s+"px,"+s+"px,"+2*s+"px"),i},ev.singleFillStyle=function(i,o){var s=((et.select(i.node()).data()[0]||[])[0]||{}).trace||{};setFillStyle(i,s,o)},ev.fillGroupStyle=function(i,o){i.style("stroke-width",0).each(function(i){var s=et.select(this);i[0].trace&&setFillStyle(s,i[0].trace,o)})};var ex=s(90998);ev.symbolNames=[],ev.symbolFuncs=[],ev.symbolBackOffs=[],ev.symbolNeedLines={},ev.symbolNoDot={},ev.symbolNoFill={},ev.symbolList=[],Object.keys(ex).forEach(function(i){var o=ex[i],s=o.n;ev.symbolList.push(s,String(s),i,s+100,String(s+100),i+"-open"),ev.symbolNames[s]=i,ev.symbolFuncs[s]=o.f,ev.symbolBackOffs[s]=o.backoff||0,o.needLine&&(ev.symbolNeedLines[s]=!0),o.noDot?ev.symbolNoDot[s]=!0:ev.symbolList.push(s+200,String(s+200),i+"-dot",s+300,String(s+300),i+"-open-dot"),o.noFill&&(ev.symbolNoFill[s]=!0)});var e_=ev.symbolNames.length;function makePointPath(i,o,s,_){return ev.symbolFuncs[i%100](o,s,_)+(i>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}ev.symbolNumber=function(i){if(ei(i))i=+i;else if("string"==typeof i){var o=0;i.indexOf("-open")>0&&(o=100,i=i.replace("-open","")),i.indexOf("-dot")>0&&(o+=200,i=i.replace("-dot","")),(i=ev.symbolNames.indexOf(i))>=0&&(i+=o)}return i%100>=e_||i>=400?0:Math.floor(Math.max(i,0))};var ew={x1:1,x2:0,y1:0,y2:0},eT={x1:0,x2:0,y1:1,y2:0},ek=en("~f"),eA={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:ew},horizontalreversed:{node:"linearGradient",attrs:ew,reversed:!0},vertical:{node:"linearGradient",attrs:eT},verticalreversed:{node:"linearGradient",attrs:eT,reversed:!0}};ev.gradient=function(i,o,s,_,F,N){for(var j=F.length,Z=eA[_],X=Array(j),$=0;$<j;$++)Z.reversed?X[j-1-$]=[ek((1-F[$][0])*100),F[$][1]]:X[$]=[ek(100*F[$][0]),F[$][1]];var ee=o._fullLayout,en="g"+ee._uid+"-"+s,ei=ee._defs.select(".gradients").selectAll("#"+en).data([_+X.join(";")],er.identity);ei.exit().remove(),ei.enter().append(Z.node).each(function(){var i=et.select(this);Z.attrs&&i.attr(Z.attrs),i.attr("id",en);var o=i.selectAll("stop").data(X);o.exit().remove(),o.enter().append("stop"),o.each(function(i){var o=eo(i[1]);et.select(this).attr({offset:i[0]+"%","stop-color":el.tinyRGB(o),"stop-opacity":o.getAlpha()})})}),i.style(N,getFullUrl(en,o)).style(N+"-opacity",null),i.classed("gradient_filled",!0)},ev.pattern=function(i,o,s,_,F,N,j,Z,X,$,ee,en){var ei,es,ec,eu,ef,ed,eh,ep="legend"===o;Z&&("overlay"===X?($=Z,ee=el.contrast($)):($=void 0,ee=Z));var eg=s._fullLayout,em="p"+eg._uid+"-"+_,ey={},ev=eo(ee),ex=el.tinyRGB(ev),e_=en*ev.getAlpha();switch(F){case"/":ef="M-"+(ec=N*Math.sqrt(2))/4+","+(eu=N*Math.sqrt(2))/4+"l"+ec/2+",-"+eu/2+"M0,"+eu+"L"+ec+",0M"+ec/4*3+","+eu/4*5+"l"+ec/2+",-"+eu/2,eh="path",ey={d:ef,opacity:e_,stroke:ex,"stroke-width":j*N+"px"};break;case"\\":ef="M"+(ec=N*Math.sqrt(2))/4*3+",-"+(eu=N*Math.sqrt(2))/4+"l"+ec/2+","+eu/2+"M0,0L"+ec+","+eu+"M-"+ec/4+","+eu/4*3+"l"+ec/2+","+eu/2,eh="path",ey={d:ef,opacity:e_,stroke:ex,"stroke-width":j*N+"px"};break;case"x":ef="M-"+(ec=N*Math.sqrt(2))/4+","+(eu=N*Math.sqrt(2))/4+"l"+ec/2+",-"+eu/2+"M0,"+eu+"L"+ec+",0M"+ec/4*3+","+eu/4*5+"l"+ec/2+",-"+eu/2+"M"+ec/4*3+",-"+eu/4+"l"+ec/2+","+eu/2+"M0,0L"+ec+","+eu+"M-"+ec/4+","+eu/4*3+"l"+ec/2+","+eu/2,eh="path",ey={d:ef,opacity:e_,stroke:ex,"stroke-width":N-N*Math.sqrt(1-j)+"px"};break;case"|":eh="path",ef="M"+(ec=N)/2+",0L"+ec/2+","+(eu=N),eh="path",ey={d:ef,opacity:e_,stroke:ex,"stroke-width":j*N+"px"};break;case"-":ec=N,eh="path",ef="M0,"+(eu=N)/2+"L"+ec+","+eu/2,eh="path",ey={d:ef,opacity:e_,stroke:ex,"stroke-width":j*N+"px"};break;case"+":eh="path",ef="M"+(ec=N)/2+",0L"+ec/2+","+(eu=N)+"M0,"+eu/2+"L"+ec+","+eu/2,eh="path",ey={d:ef,opacity:e_,stroke:ex,"stroke-width":N-N*Math.sqrt(1-j)+"px"};break;case".":(ec=N,eu=N,j<Math.PI/4)?ed=Math.sqrt(j*N*N/Math.PI):(ei=Math.PI/4,ed=(es=N/2)+(N/Math.sqrt(2)-es)*(j-ei)/(1-ei)),eh="circle",ey={cx:ec/2,cy:eu/2,r:ed,opacity:e_,fill:ex}}var ew=[F||"noSh",$||"noBg",ee||"noFg",N,j].join(";"),eT=eg._defs.select(".patterns").selectAll("#"+em).data([ew],er.identity);eT.exit().remove(),eT.enter().append("pattern").each(function(){var i=et.select(this);if(i.attr({id:em,width:ec+"px",height:eu+"px",patternUnits:"userSpaceOnUse",patternTransform:ep?"scale(0.8)":""}),$){var o=eo($),s=el.tinyRGB(o),_=o.getAlpha(),F=i.selectAll("rect").data([0]);F.exit().remove(),F.enter().append("rect").attr({width:ec+"px",height:eu+"px",fill:s,"fill-opacity":_})}var N=i.selectAll(eh).data([0]);N.exit().remove(),N.enter().append(eh).attr(ey)}),i.style("fill",getFullUrl(em,s)).style("fill-opacity",null),i.classed("pattern_filled",!0)},ev.initGradients=function(i){var o=i._fullLayout;er.ensureSingle(o._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),et.select(i).selectAll(".gradient_filled").classed("gradient_filled",!1)},ev.initPatterns=function(i){var o=i._fullLayout;er.ensureSingle(o._defs,"g","patterns").selectAll("pattern").remove(),et.select(i).selectAll(".pattern_filled").classed("pattern_filled",!1)},ev.getPatternAttr=function(i,o,s){return i&&er.isArrayOrTypedArray(i)?o<i.length?i[o]:s:i},ev.pointStyle=function(i,o,s,_){if(i.size()){var F=ev.makePointStyleFns(o);i.each(function(i){ev.singlePointStyle(i,et.select(this),o,F,s,_)})}},ev.singlePointStyle=function(i,o,s,_,F,N){var j,Z,X,$=s.marker,ee=$.line;if(N&&N.i>=0&&void 0===i.i&&(i.i=N.i),o.style("opacity",_.selectedOpacityFn?_.selectedOpacityFn(i):void 0===i.mo?$.opacity:i.mo),_.ms2mrc){et="various"===i.ms||"various"===$.size?3:_.ms2mrc(i.ms),i.mrc=et,_.selectedSizeFn&&(et=i.mrc=_.selectedSizeFn(i));var et,en=ev.symbolNumber(i.mx||$.symbol)||0;i.om=en%200>=100;var ei=getMarkerAngle(i,s),eo=getMarkerStandoff(i,s);o.attr("d",makePointPath(en,et,ei,eo))}var es=!1;if(i.so)X=ee.outlierwidth,Z=ee.outliercolor,j=$.outliercolor;else{var ec=(ee||{}).width;X=(i.mlw+1||ec+1||(i.trace?(i.trace.marker.line||{}).width:0)+1)-1||0,Z="mlc"in i?i.mlcc=_.lineScale(i.mlc):er.isArrayOrTypedArray(ee.color)?el.defaultLine:ee.color,er.isArrayOrTypedArray($.color)&&(j=el.defaultLine,es=!0),j="mc"in i?i.mcc=_.markerScale(i.mc):$.color||$.colors||"rgba(0,0,0,0)",_.selectedColorFn&&(j=_.selectedColorFn(i))}if(i.om)o.call(el.stroke,j).style({"stroke-width":(X||1)+"px",fill:"none"});else{o.style("stroke-width",(i.isBlank?0:X)+"px");var eu=$.gradient,ef=i.mgt;ef?es=!0:ef=eu&&eu.type,er.isArrayOrTypedArray(ef)&&!eA[ef=ef[0]]&&(ef=0);var ed=$.pattern,eh=ed&&ev.getPatternAttr(ed.shape,i.i,"");if(ef&&"none"!==ef){var ep=i.mgc;ep?es=!0:ep=eu.color;var eg=s.uid;es&&(eg+="-"+i.i),ev.gradient(o,F,eg,ef,[[0,ep],[1,j]],"fill")}else if(eh){var em=!1,ey=ed.fgcolor;!ey&&N&&N.color&&(ey=N.color,em=!0);var ex=ev.getPatternAttr(ey,i.i,N&&N.color||null),e_=ev.getPatternAttr(ed.bgcolor,i.i,null),ew=ed.fgopacity,eT=ev.getPatternAttr(ed.size,i.i,8),ek=ev.getPatternAttr(ed.solidity,i.i,.3);em=em||i.mcc||er.isArrayOrTypedArray(ed.shape)||er.isArrayOrTypedArray(ed.bgcolor)||er.isArrayOrTypedArray(ed.fgcolor)||er.isArrayOrTypedArray(ed.size)||er.isArrayOrTypedArray(ed.solidity);var eS=s.uid;em&&(eS+="-"+i.i),ev.pattern(o,"point",F,eS,eh,eT,ek,i.mcc,ed.fillmode,e_,ex,ew)}else er.isArrayOrTypedArray(j)?el.fill(o,j[i.i]):el.fill(o,j);X&&el.stroke(o,Z)}},ev.makePointStyleFns=function(i){var o={},s=i.marker;return o.markerScale=ev.tryColorscale(s,""),o.lineScale=ev.tryColorscale(s,"line"),es.traceIs(i,"symbols")&&(o.ms2mrc=eg.isBubble(i)?em(i):function(){return(s.size||6)/2}),i.selectedpoints&&er.extendFlat(o,ev.makeSelectedPointStyleFns(i)),o},ev.makeSelectedPointStyleFns=function(i){var o={},s=i.selected||{},_=i.unselected||{},F=i.marker||{},N=s.marker||{},j=_.marker||{},Z=F.opacity,X=N.opacity,$=j.opacity,ee=void 0!==X,et=void 0!==$;(er.isArrayOrTypedArray(Z)||ee||et)&&(o.selectedOpacityFn=function(i){var o=void 0===i.mo?F.opacity:i.mo;return i.selected?ee?X:o:et?$:ep*o});var en=F.color,ei=N.color,eo=j.color;(ei||eo)&&(o.selectedColorFn=function(i){var o=i.mcc||en;return i.selected?ei||o:eo||o});var el=F.size,ec=N.size,eu=j.size,ef=void 0!==ec,ed=void 0!==eu;return es.traceIs(i,"symbols")&&(ef||ed)&&(o.selectedSizeFn=function(i){var o=i.mrc||el/2;return i.selected?ef?ec/2:o:ed?eu/2:o}),o},ev.makeSelectedTextStyleFns=function(i){var o={},s=i.selected||{},_=i.unselected||{},F=i.textfont||{},N=s.textfont||{},j=_.textfont||{},Z=F.color,X=N.color,$=j.color;return o.selectedTextColorFn=function(i){var o=i.tc||Z;return i.selected?X||o:$||(X?o:el.addOpacity(o,ep))},o},ev.selectedPointStyle=function(i,o){if(i.size()&&o.selectedpoints){var s=ev.makeSelectedPointStyleFns(o),_=o.marker||{},F=[];s.selectedOpacityFn&&F.push(function(i,o){i.style("opacity",s.selectedOpacityFn(o))}),s.selectedColorFn&&F.push(function(i,o){el.fill(i,s.selectedColorFn(o))}),s.selectedSizeFn&&F.push(function(i,F){var N=F.mx||_.symbol||0,j=s.selectedSizeFn(F);i.attr("d",makePointPath(ev.symbolNumber(N),j,getMarkerAngle(F,o),getMarkerStandoff(F,o))),F.mrc2=j}),F.length&&i.each(function(i){for(var o=et.select(this),s=0;s<F.length;s++)F[s](o,i)})}},ev.tryColorscale=function(i,o){var s=o?er.nestedProperty(i,o).get():i;if(s){var _=s.color;if((s.colorscale||s._colorAx)&&er.isArrayOrTypedArray(_))return ec.makeColorScaleFuncFromTrace(s)}return er.identity};var eS={start:1,end:-1,middle:0,bottom:1,top:-1};function textPointPosition(i,o,s,_,F){var N=et.select(i.node().parentNode),j=-1!==o.indexOf("top")?"top":-1!==o.indexOf("bottom")?"bottom":"middle",Z=-1!==o.indexOf("left")?"end":-1!==o.indexOf("right")?"start":"middle",X=_?_/.8+1:0,$=(ef.lineCount(i)-1)*eh+1,ee=eS[Z]*X,er=.75*s+eS[j]*X+(eS[j]-1)*$*s/2;i.attr("text-anchor",Z),F||N.attr("transform",eu(ee,er))}function extracTextFontSize(i,o){var s=i.ts||o.textfont.size;return ei(s)&&s>0?s:0}function roundEnd(i,o,s){return s&&(i=applyBackoff(i)),o?roundY(i[1]):roundX(i[0])}function roundX(i){var o=et.round(i,2);return _=o,o}function roundY(i){var o=et.round(i,2);return F=o,o}function makeTangent(i,o,s,_){var F=i[0]-o[0],N=i[1]-o[1],j=s[0]-o[0],Z=s[1]-o[1],X=Math.pow(F*F+N*N,.25),$=Math.pow(j*j+Z*Z,.25),ee=($*$*F-X*X*j)*_,et=($*$*N-X*X*Z)*_,er=3*$*(X+$),en=3*X*(X+$);return[[roundX(o[0]+(er&&ee/er)),roundY(o[1]+(er&&et/er))],[roundX(o[0]-(en&&ee/en)),roundY(o[1]-(en&&et/en))]]}ev.textPointStyle=function(i,o,s){if(i.size()){if(o.selectedpoints){var _;_=ev.makeSelectedTextStyleFns(o).selectedTextColorFn}var F=o.texttemplate,N=s._fullLayout;i.each(function(i){var j=et.select(this),Z=F?er.extractOption(i,o,"txt","texttemplate"):er.extractOption(i,o,"tx","text");if(!Z&&0!==Z){j.remove();return}if(F){var X=o._module.formatLabels,$=X?X(i,o,N):{},ee={};ey(ee,o,i.i);var en=o._meta||{};Z=er.texttemplateString(Z,$,N._d3locale,ee,i,en)}var ei=i.tp||o.textposition,eo=extracTextFontSize(i,o),es=_?_(i):i.tc||o.textfont.color;j.call(ev.font,i.tf||o.textfont.family,eo,es).text(Z).call(ef.convertToTspans,s).call(textPointPosition,ei,eo,i.mrc)})}},ev.selectedTextStyle=function(i,o){if(i.size()&&o.selectedpoints){var s=ev.makeSelectedTextStyleFns(o);i.each(function(i){var _=et.select(this),F=s.selectedTextColorFn(i),N=i.tp||o.textposition,j=extracTextFontSize(i,o);el.fill(_,F);var Z=es.traceIs(o,"bar-like");textPointPosition(_,N,j,i.mrc2||i.mrc,Z)})}},ev.smoothopen=function(i,o){if(i.length<3)return"M"+i.join("L");var s,_="M"+i[0],F=[];for(s=1;s<i.length-1;s++)F.push(makeTangent(i[s-1],i[s],i[s+1],o));for(_+="Q"+F[0][0]+" "+i[1],s=2;s<i.length-1;s++)_+="C"+F[s-2][1]+" "+F[s-1][0]+" "+i[s];return _+("Q"+F[i.length-3][1]+" ")+i[i.length-1]},ev.smoothclosed=function(i,o){if(i.length<3)return"M"+i.join("L")+"Z";var s,_="M"+i[0],F=i.length-1,N=[makeTangent(i[F],i[0],i[1],o)];for(s=1;s<F;s++)N.push(makeTangent(i[s-1],i[s],i[s+1],o));for(N.push(makeTangent(i[F-1],i[F],i[0],o)),s=1;s<=F;s++)_+="C"+N[s-1][1]+" "+N[s][0]+" "+i[s];return _+("C"+N[F][1]+" "+N[0][0]+" "+i[0])+"Z"};var eM={hv:function(i,o,s){return"H"+roundX(o[0])+"V"+roundEnd(o,1,s)},vh:function(i,o,s){return"V"+roundY(o[1])+"H"+roundEnd(o,0,s)},hvh:function(i,o,s){return"H"+roundX((i[0]+o[0])/2)+"V"+roundY(o[1])+"H"+roundEnd(o,0,s)},vhv:function(i,o,s){return"V"+roundY((i[1]+o[1])/2)+"H"+roundX(o[0])+"V"+roundEnd(o,1,s)}},STEPLINEAR=function(i,o,s){return"L"+roundEnd(o,0,s)+","+roundEnd(o,1,s)};function applyBackoff(i,o){var s=i.backoff,N=i.trace,j=i.d,Z=i.i;if(s&&N&&N.marker&&N.marker.angle%360==0&&N.line&&"spline"!==N.line.shape){var X=er.isArrayOrTypedArray(s),$=i,ee=o?o[0]:_||0,et=o?o[1]:F||0,en=$[0],ei=$[1],eo=Math.atan2(ei-et,en-ee),es=X?s[Z]:s;if("auto"===es){var el=$.i;"scatter"===N.type&&el--;var ec=$.marker,eu=ec.symbol;er.isArrayOrTypedArray(eu)&&(eu=eu[el]);var ef=ec.size;er.isArrayOrTypedArray(ef)&&(ef=ef[el]),es=(ec?ev.symbolBackOffs[ev.symbolNumber(eu)]*ef:0)+(ev.getMarkerStandoff(j[el],N)||0)}var ed=en-es*Math.cos(eo),eh=ei-es*Math.sin(eo);(ed<=en&&ed>=ee||ed>=en&&ed<=ee)&&(eh<=ei&&eh>=et||eh>=ei&&eh<=et)&&(i=[ed,eh])}return i}ev.steps=function(i){var o=eM[i]||STEPLINEAR;return function(i){for(var s="M"+roundX(i[0][0])+","+roundY(i[0][1]),_=i.length,F=1;F<_;F++)s+=o(i[F-1],i[F],F===_-1);return s}},ev.applyBackoff=applyBackoff,ev.makeTester=function(){var i=er.ensureSingleById(et.select("body"),"svg","js-plotly-tester",function(i){i.attr(ed.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),o=er.ensureSingle(i,"path","js-reference-point",function(i){i.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});ev.tester=i,ev.testref=o},ev.savedBBoxes={};var eC=0;function nodeHash(i){var o=i.getAttribute("data-unformatted");if(null!==o)return o+i.getAttribute("data-math")+i.getAttribute("text-anchor")+i.getAttribute("style")}function getFullUrl(i,o){if(!i)return null;var s=o._context,_=s._exportedPlot?"":s._baseUrl||"";return _?"url('"+_+"#"+i+"')":"url(#"+i+")"}ev.bBox=function(i,o,s){if(s||(s=nodeHash(i)),s){if(_=ev.savedBBoxes[s])return er.extendFlat({},_)}else if(1===i.childNodes.length){var _,F,N,j=i.childNodes[0];if(s=nodeHash(j)){var Z=+j.getAttribute("x")||0,X=+j.getAttribute("y")||0,$=j.getAttribute("transform");if(!$){var ee=ev.bBox(j,!1,s);return Z&&(ee.left+=Z,ee.right+=Z),X&&(ee.top+=X,ee.bottom+=X),ee}if(s+="~"+Z+"~"+X+"~"+$,_=ev.savedBBoxes[s])return er.extendFlat({},_)}}o?F=i:(N=ev.tester.node(),F=i.cloneNode(!0),N.appendChild(F)),et.select(F).attr("transform",null).call(ef.positionText,0,0);var en=F.getBoundingClientRect(),ei=ev.testref.node().getBoundingClientRect();o||N.removeChild(F);var eo={height:en.height,width:en.width,left:en.left-ei.left,top:en.top-ei.top,right:en.right-ei.left,bottom:en.bottom-ei.top};return eC>=1e4&&(ev.savedBBoxes={},eC=0),s&&(ev.savedBBoxes[s]=eo),eC++,er.extendFlat({},eo)},ev.setClipUrl=function(i,o,s){i.attr("clip-path",getFullUrl(o,s))},ev.getTranslate=function(i){var o=i.attr?"attr":"getAttribute",s=(i[o]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(i,o,s){return[o,s].join(" ")}).split(" ");return{x:+s[0]||0,y:+s[1]||0}},ev.setTranslate=function(i,o,s){var _=i.attr?"attr":"getAttribute",F=i.attr?"attr":"setAttribute",N=i[_]("transform")||"";return o=o||0,s=s||0,N=(N=N.replace(/(\btranslate\(.*?\);?)/,"").trim()+eu(o,s)).trim(),i[F]("transform",N),N},ev.getScale=function(i){var o=i.attr?"attr":"getAttribute",s=(i[o]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(i,o,s){return[o,s].join(" ")}).split(" ");return{x:+s[0]||1,y:+s[1]||1}},ev.setScale=function(i,o,s){var _=i.attr?"attr":"getAttribute",F=i.attr?"attr":"setAttribute",N=i[_]("transform")||"";return o=o||1,s=s||1,N=(N=N.replace(/(\bscale\(.*?\);?)/,"").trim()+("scale("+o+",")+s+")").trim(),i[F]("transform",N),N};var eE=/\s*sc.*/;ev.setPointGroupScale=function(i,o,s){if(o=o||1,s=s||1,i){var _=1===o&&1===s?"":"scale("+o+","+s+")";i.each(function(){var i=(this.getAttribute("transform")||"").replace(eE,"");i+=_,i=i.trim(),this.setAttribute("transform",i)})}};var eL=/translate\([^)]*\)\s*$/;function getMarkerStandoff(i,o){var s;return(i&&(s=i.mf),void 0===s&&(s=o.marker&&o.marker.standoff||0),o._geo||o._xA)?s:-s}ev.setTextPointsScale=function(i,o,s){i&&i.each(function(){var i,_=et.select(this),F=_.select("text");if(F.node()){var N=parseFloat(F.attr("x")||0),j=parseFloat(F.attr("y")||0),Z=(_.attr("transform")||"").match(eL);i=1===o&&1===s?[]:[eu(N,j),"scale("+o+","+s+")",eu(-N,-j)],Z&&i.push(Z),_.attr("transform",i.join(""))}})},ev.getMarkerStandoff=getMarkerStandoff;var eP=Math.atan2,eI=Math.cos,eO=Math.sin;function rotate(i,o){var s=o[0],_=o[1];return[s*eI(i)-_*eO(i),s*eO(i)+_*eI(i)]}function getMarkerAngle(i,o){var s=i.ma;void 0===s&&(s=o.marker.angle||0);var _=o.marker.angleref;if("previous"===_||"north"===_){if(o._geo){var F=o._geo.project(i.lonlat);en=F[0],eo=F[1]}else{var et=o._xA,er=o._yA;if(!et||!er)return 90;en=et.c2p(i.x),eo=er.c2p(i.y)}if(o._geo){var en,eo,es,el=i.lonlat[0],ec=i.lonlat[1],eu=o._geo.project([el,ec+1e-5]),ef=o._geo.project([el+1e-5,ec]),ed=eP(ef[1]-eo,ef[0]-en),eh=eP(eu[1]-eo,eu[0]-en);if("north"===_)es=s/180*Math.PI;else if("previous"===_){var ep=ec/180*Math.PI,eg=j/180*Math.PI,em=N/180*Math.PI-el/180*Math.PI;es=-eP(eI(eg)*eO(em),eO(eg)*eI(ep)-eI(eg)*eO(ep)*eI(em))-Math.PI,N=el,j=ec}var ey=rotate(ed,[eI(es),0]),ev=rotate(eh,[eO(es),0]);s=eP(ey[1]+ev[1],ey[0]+ev[0])/Math.PI*180,"previous"!==_||ee===o.uid&&i.i===$+1||(s=null)}if("previous"===_&&!o._geo){if(ee===o.uid&&i.i===$+1&&ei(en)&&ei(eo)){var ex=en-Z,e_=eo-X,ew=o.line&&o.line.shape||"",eT=ew.slice(ew.length-1);"h"===eT&&(e_=0),"v"===eT&&(ex=0),s+=eP(e_,ex)/Math.PI*180+90}else s=null}}return Z=en,X=eo,$=i.i,ee=o.uid,s}ev.getMarkerAngle=getMarkerAngle},90998:function(i,o,s){"use strict";var _,F,N,j,Z=s(95616),X=s(39898).round,$="M0,0Z",ee=Math.sqrt(2),et=Math.sqrt(3),er=Math.PI,en=Math.cos,ei=Math.sin;function skipAngle(i){return null===i}function align(i,o,s){if((!i||i%360==0)&&!o)return s;if(N===i&&j===o&&_===s)return F;function rotate(i,s){var _=en(i),F=ei(i),N=s[0],j=s[1]+(o||0);return[N*_-j*F,N*F+j*_]}N=i,j=o,_=s;for(var X=i/180*er,$=0,ee=0,et=Z(s),eo="",es=0;es<et.length;es++){var el=et[es],ec=el[0],eu=$,ef=ee;if("M"===ec||"L"===ec)$=+el[1],ee=+el[2];else if("m"===ec||"l"===ec)$+=+el[1],ee+=+el[2];else if("H"===ec)$=+el[1];else if("h"===ec)$+=+el[1];else if("V"===ec)ee=+el[1];else if("v"===ec)ee+=+el[1];else if("A"===ec){$=+el[1],ee=+el[2];var ed=rotate(X,[+el[6],+el[7]]);el[6]=ed[0],el[7]=ed[1],el[3]=+el[3]+i}("H"===ec||"V"===ec)&&(ec="L"),("h"===ec||"v"===ec)&&(ec="l"),("m"===ec||"l"===ec)&&($-=eu,ee-=ef);var eh=rotate(X,[$,ee]);("H"===ec||"V"===ec)&&(ec="L"),("M"===ec||"L"===ec||"m"===ec||"l"===ec)&&(el[1]=eh[0],el[2]=eh[1]),el[0]=ec,eo+=el[0]+el.slice(1).join(",")}return F=eo,eo}i.exports={circle:{n:0,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2),F="M"+_+",0A"+_+","+_+" 0 1,1 0,-"+_+"A"+_+","+_+" 0 0,1 "+_+",0Z";return s?align(o,s,F):F}},square:{n:1,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M"+_+","+_+"H-"+_+"V-"+_+"H"+_+"Z")}},diamond:{n:2,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.3*i,2);return align(o,s,"M"+_+",0L0,"+_+"L-"+_+",0L0,-"+_+"Z")}},cross:{n:3,f:function(i,o,s){if(skipAngle(o))return $;var _=X(.4*i,2),F=X(1.2*i,2);return align(o,s,"M"+F+","+_+"H"+_+"V"+F+"H-"+_+"V"+_+"H-"+F+"V-"+_+"H-"+_+"V-"+F+"H"+_+"V-"+_+"H"+F+"Z")}},x:{n:4,f:function(i,o,s){if(skipAngle(o))return $;var _=X(.8*i/ee,2),F="l"+_+","+_,N="l"+_+",-"+_,j="l-"+_+",-"+_,Z="l-"+_+","+_;return align(o,s,"M0,"+_+F+N+j+N+j+Z+j+Z+F+Z+F+"Z")}},"triangle-up":{n:5,f:function(i,o,s){if(skipAngle(o))return $;var _=X(2*i/et,2);return align(o,s,"M-"+_+","+X(i/2,2)+"H"+_+"L0,-"+X(i,2)+"Z")}},"triangle-down":{n:6,f:function(i,o,s){if(skipAngle(o))return $;var _=X(2*i/et,2);return align(o,s,"M-"+_+",-"+X(i/2,2)+"H"+_+"L0,"+X(i,2)+"Z")}},"triangle-left":{n:7,f:function(i,o,s){if(skipAngle(o))return $;var _=X(2*i/et,2);return align(o,s,"M"+X(i/2,2)+",-"+_+"V"+_+"L-"+X(i,2)+",0Z")}},"triangle-right":{n:8,f:function(i,o,s){if(skipAngle(o))return $;var _=X(2*i/et,2);return align(o,s,"M-"+X(i/2,2)+",-"+_+"V"+_+"L"+X(i,2)+",0Z")}},"triangle-ne":{n:9,f:function(i,o,s){if(skipAngle(o))return $;var _=X(.6*i,2),F=X(1.2*i,2);return align(o,s,"M-"+F+",-"+_+"H"+_+"V"+F+"Z")}},"triangle-se":{n:10,f:function(i,o,s){if(skipAngle(o))return $;var _=X(.6*i,2),F=X(1.2*i,2);return align(o,s,"M"+_+",-"+F+"V"+_+"H-"+F+"Z")}},"triangle-sw":{n:11,f:function(i,o,s){if(skipAngle(o))return $;var _=X(.6*i,2),F=X(1.2*i,2);return align(o,s,"M"+F+","+_+"H-"+_+"V-"+F+"Z")}},"triangle-nw":{n:12,f:function(i,o,s){if(skipAngle(o))return $;var _=X(.6*i,2),F=X(1.2*i,2);return align(o,s,"M-"+_+","+F+"V-"+_+"H"+F+"Z")}},pentagon:{n:13,f:function(i,o,s){if(skipAngle(o))return $;var _=X(.951*i,2),F=X(.588*i,2),N=X(-i,2),j=X(-.309*i,2);return align(o,s,"M"+_+","+j+"L"+F+","+X(.809*i,2)+"H-"+F+"L-"+_+","+j+"L0,"+N+"Z")}},hexagon:{n:14,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2),F=X(i/2,2),N=X(i*et/2,2);return align(o,s,"M"+N+",-"+F+"V"+F+"L0,"+_+"L-"+N+","+F+"V-"+F+"L0,-"+_+"Z")}},hexagon2:{n:15,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2),F=X(i/2,2),N=X(i*et/2,2);return align(o,s,"M-"+F+","+N+"H"+F+"L"+_+",0L"+F+",-"+N+"H-"+F+"L-"+_+",0Z")}},octagon:{n:16,f:function(i,o,s){if(skipAngle(o))return $;var _=X(.924*i,2),F=X(.383*i,2);return align(o,s,"M-"+F+",-"+_+"H"+F+"L"+_+",-"+F+"V"+F+"L"+F+","+_+"H-"+F+"L-"+_+","+F+"V-"+F+"Z")}},star:{n:17,f:function(i,o,s){if(skipAngle(o))return $;var _=1.4*i,F=X(.225*_,2),N=X(.951*_,2),j=X(.363*_,2),Z=X(.588*_,2),ee=X(-_,2),et=X(-.309*_,2),er=X(.118*_,2),en=X(.809*_,2);return align(o,s,"M"+F+","+et+"H"+N+"L"+j+","+er+"L"+Z+","+en+"L0,"+X(.382*_,2)+"L-"+Z+","+en+"L-"+j+","+er+"L-"+N+","+et+"H-"+F+"L0,"+ee+"Z")}},hexagram:{n:18,f:function(i,o,s){if(skipAngle(o))return $;var _=X(.66*i,2),F=X(.38*i,2),N=X(.76*i,2);return align(o,s,"M-"+N+",0l-"+F+",-"+_+"h"+N+"l"+F+",-"+_+"l"+F+","+_+"h"+N+"l-"+F+","+_+"l"+F+","+_+"h-"+N+"l-"+F+","+_+"l-"+F+",-"+_+"h-"+N+"Z")}},"star-triangle-up":{n:19,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i*et*.8,2),F=X(.8*i,2),N=X(1.6*i,2),j=X(4*i,2),Z="A "+j+","+j+" 0 0 1 ";return align(o,s,"M-"+_+","+F+Z+_+","+F+Z+"0,-"+N+Z+"-"+_+","+F+"Z")}},"star-triangle-down":{n:20,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i*et*.8,2),F=X(.8*i,2),N=X(1.6*i,2),j=X(4*i,2),Z="A "+j+","+j+" 0 0 1 ";return align(o,s,"M"+_+",-"+F+Z+"-"+_+",-"+F+Z+"0,"+N+Z+_+",-"+F+"Z")}},"star-square":{n:21,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.1*i,2),F=X(2*i,2),N="A "+F+","+F+" 0 0 1 ";return align(o,s,"M-"+_+",-"+_+N+"-"+_+","+_+N+_+","+_+N+_+",-"+_+N+"-"+_+",-"+_+"Z")}},"star-diamond":{n:22,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.4*i,2),F=X(1.9*i,2),N="A "+F+","+F+" 0 0 1 ";return align(o,s,"M-"+_+",0"+N+"0,"+_+N+_+",0"+N+"0,-"+_+N+"-"+_+",0Z")}},"diamond-tall":{n:23,f:function(i,o,s){if(skipAngle(o))return $;var _=X(.7*i,2),F=X(1.4*i,2);return align(o,s,"M0,"+F+"L"+_+",0L0,-"+F+"L-"+_+",0Z")}},"diamond-wide":{n:24,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.4*i,2),F=X(.7*i,2);return align(o,s,"M0,"+F+"L"+_+",0L0,-"+F+"L-"+_+",0Z")}},hourglass:{n:25,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M"+_+","+_+"H-"+_+"L"+_+",-"+_+"H-"+_+"Z")},noDot:!0},bowtie:{n:26,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M"+_+","+_+"V-"+_+"L-"+_+","+_+"V-"+_+"Z")},noDot:!0},"circle-cross":{n:27,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M0,"+_+"V-"+_+"M"+_+",0H-"+_+"M"+_+",0A"+_+","+_+" 0 1,1 0,-"+_+"A"+_+","+_+" 0 0,1 "+_+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2),F=X(i/ee,2);return align(o,s,"M"+F+","+F+"L-"+F+",-"+F+"M"+F+",-"+F+"L-"+F+","+F+"M"+_+",0A"+_+","+_+" 0 1,1 0,-"+_+"A"+_+","+_+" 0 0,1 "+_+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M0,"+_+"V-"+_+"M"+_+",0H-"+_+"M"+_+","+_+"H-"+_+"V-"+_+"H"+_+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_+"M"+_+","+_+"H-"+_+"V-"+_+"H"+_+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.3*i,2);return align(o,s,"M"+_+",0L0,"+_+"L-"+_+",0L0,-"+_+"ZM0,-"+_+"V"+_+"M-"+_+",0H"+_)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.3*i,2),F=X(.65*i,2);return align(o,s,"M"+_+",0L0,"+_+"L-"+_+",0L0,-"+_+"ZM-"+F+",-"+F+"L"+F+","+F+"M-"+F+","+F+"L"+F+",-"+F)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.4*i,2);return align(o,s,"M0,"+_+"V-"+_+"M"+_+",0H-"+_)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.2*i,2),F=X(.85*i,2);return align(o,s,"M0,"+_+"V-"+_+"M"+_+",0H-"+_+"M"+F+","+F+"L-"+F+",-"+F+"M"+F+",-"+F+"L-"+F+","+F)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i/2,2),F=X(i,2);return align(o,s,"M"+_+","+F+"V-"+F+"M"+(_-F)+",-"+F+"V"+F+"M"+F+","+_+"H-"+F+"M-"+F+","+(_-F)+"H"+F)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.2*i,2),F=X(1.6*i,2),N=X(.8*i,2);return align(o,s,"M-"+_+","+N+"L0,0M"+_+","+N+"L0,0M0,-"+F+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.2*i,2),F=X(1.6*i,2),N=X(.8*i,2);return align(o,s,"M-"+_+",-"+N+"L0,0M"+_+",-"+N+"L0,0M0,"+F+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.2*i,2),F=X(1.6*i,2),N=X(.8*i,2);return align(o,s,"M"+N+","+_+"L0,0M"+N+",-"+_+"L0,0M-"+F+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.2*i,2),F=X(1.6*i,2),N=X(.8*i,2);return align(o,s,"M-"+N+","+_+"L0,0M-"+N+",-"+_+"L0,0M"+F+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.4*i,2);return align(o,s,"M"+_+",0H-"+_)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(i,o,s){if(skipAngle(o))return $;var _=X(1.4*i,2);return align(o,s,"M0,"+_+"V-"+_)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M"+_+",-"+_+"L-"+_+","+_)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M"+_+","+_+"L-"+_+",-"+_)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M0,0L-"+_+","+X(2*i,2)+"H"+_+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M0,0L-"+_+",-"+X(2*i,2)+"H"+_+"Z")},noDot:!0},"arrow-left":{n:47,f:function(i,o,s){if(skipAngle(o))return $;var _=X(2*i,2),F=X(i,2);return align(o,s,"M0,0L"+_+",-"+F+"V"+F+"Z")},noDot:!0},"arrow-right":{n:48,f:function(i,o,s){if(skipAngle(o))return $;var _=X(2*i,2),F=X(i,2);return align(o,s,"M0,0L-"+_+",-"+F+"V"+F+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M-"+_+",0H"+_+"M0,0L-"+_+","+X(2*i,2)+"H"+_+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(i,o,s){if(skipAngle(o))return $;var _=X(i,2);return align(o,s,"M-"+_+",0H"+_+"M0,0L-"+_+",-"+X(2*i,2)+"H"+_+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(i,o,s){if(skipAngle(o))return $;var _=X(2*i,2),F=X(i,2);return align(o,s,"M0,-"+F+"V"+F+"M0,0L"+_+",-"+F+"V"+F+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(i,o,s){if(skipAngle(o))return $;var _=X(2*i,2),F=X(i,2);return align(o,s,"M0,-"+F+"V"+F+"M0,0L-"+_+",-"+F+"V"+F+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(i,o,s){if(skipAngle(o))return $;var _=er/2.5,F=2*i*en(_),N=2*i*ei(_);return align(o,s,"M0,0L"+-F+","+N+"L"+F+","+N+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(i,o,s){if(skipAngle(o))return $;var _=er/4,F=2*i*en(_),N=2*i*ei(_);return align(o,s,"M0,0L"+-F+","+N+"A "+2*i+","+2*i+" 0 0 1 "+F+","+N+"Z")},backoff:.4,noDot:!0}}},25673:function(i){"use strict";i.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(i,o,s){"use strict";var _=s(92770),F=s(73972),N=s(89298),j=s(71828),Z=s(45827);function calcOneAxis(i,o,s,F){var X=o["error_"+F]||{},$=X.visible&&-1!==["linear","log"].indexOf(s.type),ee=[];if($){for(var et=Z(X),er=0;er<i.length;er++){var en=i[er],ei=en.i;if(void 0===ei)ei=er;else if(null===ei)continue;var eo=en[F];if(_(s.c2l(eo))){var es=et(eo,ei);if(_(es[0])&&_(es[1])){var el=en[F+"s"]=eo-es[0],ec=en[F+"h"]=eo+es[1];ee.push(el,ec)}}}var eu=s._id,ef=o._extremes[eu],ed=N.findExtremes(s,ee,j.extendFlat({tozero:ef.opts.tozero},{padded:!0}));ef.min=ef.min.concat(ed.min),ef.max=ef.max.concat(ed.max)}}i.exports=function(i){for(var o=i.calcdata,s=0;s<o.length;s++){var _=o[s],j=_[0].trace;if(!0===j.visible&&F.traceIs(j,"errorBarsOK")){var Z=N.getFromId(i,j.xaxis),X=N.getFromId(i,j.yaxis);calcOneAxis(_,j,Z,"x"),calcOneAxis(_,j,X,"y")}}}},45827:function(i){"use strict";function makeComputeErrorValue(i,o){return"percent"===i?function(i){return Math.abs(i*o/100)}:"constant"===i?function(){return Math.abs(o)}:"sqrt"===i?function(i){return Math.sqrt(Math.abs(i))}:void 0}i.exports=function(i){var o=i.type,s=i.symmetric;if("data"===o){var _=i.array||[];if(s)return function(i,o){var s=+_[o];return[s,s]};var F=i.arrayminus||[];return function(i,o){var s=+_[o],N=+F[o];return isNaN(s)&&isNaN(N)?[NaN,NaN]:[N||0,s||0]}}var N=makeComputeErrorValue(o,i.value),j=makeComputeErrorValue(o,i.valueminus);return s||void 0===i.valueminus?function(i){var o=N(i);return[o,o]}:function(i){return[j(i),N(i)]}}},97587:function(i,o,s){"use strict";var _=s(92770),F=s(73972),N=s(71828),j=s(44467),Z=s(25673);i.exports=function(i,o,s,X){var $="error_"+X.axis,ee=j.newContainer(o,$),et=i[$]||{};function coerce(i,o){return N.coerce(et,ee,Z,i,o)}if(!1!==coerce("visible",void 0!==et.array||void 0!==et.value||"sqrt"===et.type)){var er=coerce("type","array"in et?"data":"percent"),en=!0;"sqrt"!==er&&(en=coerce("symmetric",!(("data"===er?"arrayminus":"valueminus")in et))),"data"===er?(coerce("array"),coerce("traceref"),en||(coerce("arrayminus"),coerce("tracerefminus"))):"percent"!==er&&"constant"!==er||(coerce("value"),en||coerce("valueminus"));var ei="copy_"+X.inherit+"style";X.inherit&&(o["error_"+X.inherit]||{}).visible&&coerce(ei,!(et.color||_(et.thickness)||_(et.width))),X.inherit&&ee[ei]||(coerce("color",s),coerce("thickness"),coerce("width",F.traceIs(o,"gl3d")?0:4))}}},37369:function(i,o,s){"use strict";var _=s(71828),F=s(30962).overrideAll,N=s(25673),j={error_x:_.extendFlat({},N),error_y:_.extendFlat({},N)};delete j.error_x.copy_zstyle,delete j.error_y.copy_zstyle,delete j.error_y.copy_ystyle;var Z={error_x:_.extendFlat({},N),error_y:_.extendFlat({},N),error_z:_.extendFlat({},N)};function hoverInfo(i,o,s){(o.error_y||{}).visible&&(s.yerr=i.yh-i.y,o.error_y.symmetric||(s.yerrneg=i.y-i.ys)),(o.error_x||{}).visible&&(s.xerr=i.xh-i.x,o.error_x.symmetric||(s.xerrneg=i.x-i.xs))}delete Z.error_x.copy_ystyle,delete Z.error_y.copy_ystyle,delete Z.error_z.copy_ystyle,delete Z.error_z.copy_zstyle,i.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:j,bar:j,histogram:j,scatter3d:F(Z,"calc","nested"),scattergl:F(j,"calc","nested")}},supplyDefaults:s(97587),calc:s(84532),makeComputeError:s(45827),plot:s(19398),style:s(62662),hoverInfo:hoverInfo}},19398:function(i,o,s){"use strict";var _=s(39898),F=s(92770),N=s(91424),j=s(34098);function errorCoords(i,o,s){var _={x:o.c2p(i.x),y:s.c2p(i.y)};return void 0===i.yh||(_.yh=s.c2p(i.yh),_.ys=s.c2p(i.ys),F(_.ys)||(_.noYS=!0,_.ys=s.c2p(i.ys,!0))),void 0===i.xh||(_.xh=o.c2p(i.xh),_.xs=o.c2p(i.xs),F(_.xs)||(_.noXS=!0,_.xs=o.c2p(i.xs,!0))),_}i.exports=function(i,o,s,Z){var X=s.xaxis,$=s.yaxis,ee=Z&&Z.duration>0,et=i._context.staticPlot;o.each(function(o){var er,en=o[0].trace,ei=en.error_x||{},eo=en.error_y||{};en.ids&&(er=function(i){return i.id});var es=j.hasMarkers(en)&&en.marker.maxdisplayed>0;eo.visible||ei.visible||(o=[]);var el=_.select(this).selectAll("g.errorbar").data(o,er);if(el.exit().remove(),o.length){ei.visible||el.selectAll("path.xerror").remove(),eo.visible||el.selectAll("path.yerror").remove(),el.style("opacity",1);var ec=el.enter().append("g").classed("errorbar",!0);ee&&ec.style("opacity",0).transition().duration(Z.duration).style("opacity",1),N.setClipUrl(el,s.layerClipId,i),el.each(function(i){var o,s=_.select(this),N=errorCoords(i,X,$);if(!es||i.vis){var j=s.select("path.yerror");if(eo.visible&&F(N.x)&&F(N.yh)&&F(N.ys)){var er=eo.width;o="M"+(N.x-er)+","+N.yh+"h"+2*er+"m-"+er+",0V"+N.ys,N.noYS||(o+="m-"+er+",0h"+2*er),j.size()?ee&&(j=j.transition().duration(Z.duration).ease(Z.easing)):j=s.append("path").style("vector-effect",et?"none":"non-scaling-stroke").classed("yerror",!0),j.attr("d",o)}else j.remove();var en=s.select("path.xerror");if(ei.visible&&F(N.y)&&F(N.xh)&&F(N.xs)){var el=(ei.copy_ystyle?eo:ei).width;o="M"+N.xh+","+(N.y-el)+"v"+2*el+"m0,-"+el+"H"+N.xs,N.noXS||(o+="m0,-"+el+"v"+2*el),en.size()?ee&&(en=en.transition().duration(Z.duration).ease(Z.easing)):en=s.append("path").style("vector-effect",et?"none":"non-scaling-stroke").classed("xerror",!0),en.attr("d",o)}else en.remove()}})}})}},62662:function(i,o,s){"use strict";var _=s(39898),F=s(7901);i.exports=function(i){i.each(function(i){var o=i[0].trace,s=o.error_y||{},N=o.error_x||{},j=_.select(this);j.selectAll("path.yerror").style("stroke-width",s.thickness+"px").call(F.stroke,s.color),N.copy_ystyle&&(N=s),j.selectAll("path.xerror").style("stroke-width",N.thickness+"px").call(F.stroke,N.color)})}},77914:function(i,o,s){"use strict";var _=s(41940),F=s(528).hoverlabel,N=s(1426).extendFlat;i.exports={hoverlabel:{bgcolor:N({},F.bgcolor,{arrayOk:!0}),bordercolor:N({},F.bordercolor,{arrayOk:!0}),font:_({arrayOk:!0,editType:"none"}),align:N({},F.align,{arrayOk:!0}),namelength:N({},F.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(i,o,s){"use strict";var _=s(71828),F=s(73972);function paste(i,o,s,F){F=F||_.identity,Array.isArray(i)&&(o[0][s]=F(i))}i.exports=function(i){var o=i.calcdata,s=i._fullLayout;function makeCoerceHoverInfo(i){return function(o){return _.coerceHoverinfo({hoverinfo:o},{_module:i._module},s)}}for(var N=0;N<o.length;N++){var j=o[N],Z=j[0].trace;if(!F.traceIs(Z,"pie-like")){var X=F.traceIs(Z,"2dMap")?paste:_.fillArray;X(Z.hoverinfo,j,"hi",makeCoerceHoverInfo(Z)),Z.hovertemplate&&X(Z.hovertemplate,j,"ht"),Z.hoverlabel&&(X(Z.hoverlabel.bgcolor,j,"hbg"),X(Z.hoverlabel.bordercolor,j,"hbc"),X(Z.hoverlabel.font.size,j,"hts"),X(Z.hoverlabel.font.color,j,"htc"),X(Z.hoverlabel.font.family,j,"htf"),X(Z.hoverlabel.namelength,j,"hnl"),X(Z.hoverlabel.align,j,"hta"))}}}},75914:function(i,o,s){"use strict";var _=s(73972),F=s(88335).hover;i.exports=function(i,o,s){var N=_.getComponentMethod("annotations","onClick")(i,i._hoverdata);function emitClick(){i.emit("plotly_click",{points:i._hoverdata,event:o})}void 0!==s&&F(i,o,s,!0),i._hoverdata&&o&&o.target&&(N&&N.then?N.then(emitClick):emitClick(),o.stopImmediatePropagation&&o.stopImmediatePropagation())}},26675:function(i){"use strict";i.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(i,o,s){"use strict";var _=s(71828),F=s(77914),N=s(38048);i.exports=function(i,o,s,j){function coerce(s,N){return _.coerce(i,o,F,s,N)}var Z=_.extendFlat({},j.hoverlabel);o.hovertemplate&&(Z.namelength=-1),N(i,o,coerce,Z)}},23469:function(i,o,s){"use strict";var _=s(71828);o.getSubplot=function(i){return i.subplot||i.xaxis+i.yaxis||i.geo},o.isTraceInSubplots=function(i,s){if("splom"===i.type){for(var _=i.xaxes||[],F=i.yaxes||[],N=0;N<_.length;N++)for(var j=0;j<F.length;j++)if(-1!==s.indexOf(_[N]+F[j]))return!0;return!1}return -1!==s.indexOf(o.getSubplot(i))},o.flat=function(i,o){for(var s=Array(i.length),_=0;_<i.length;_++)s[_]=o;return s},o.p2c=function(i,o){for(var s=Array(i.length),_=0;_<i.length;_++)s[_]=i[_].p2c(o);return s},o.getDistanceFunction=function(i,s,_,F){return"closest"===i?F||o.quadrature(s,_):"x"===i.charAt(0)?s:_},o.getClosest=function(i,o,s){if(!1!==s.index)s.index>=0&&s.index<i.length?s.distance=0:s.index=!1;else for(var _=0;_<i.length;_++){var F=o(i[_]);F<=s.distance&&(s.index=_,s.distance=F)}return s},o.inbox=function(i,o,s){return i*o<0||0===i?s:1/0},o.quadrature=function(i,o){return function(s){var _=i(s),F=o(s);return Math.sqrt(_*_+F*F)}},o.makeEventData=function(i,s,_){var F="index"in i?i.index:i.pointNumber,N={data:s._input,fullData:s,curveNumber:s.index,pointNumber:F};if(s._indexToPoints){var j=s._indexToPoints[F];1===j.length?N.pointIndex=j[0]:N.pointIndices=j}else N.pointIndex=F;return s._module.eventData?N=s._module.eventData(N,i,s,_,F):("xVal"in i?N.x=i.xVal:"x"in i&&(N.x=i.x),"yVal"in i?N.y=i.yVal:"y"in i&&(N.y=i.y),i.xa&&(N.xaxis=i.xa),i.ya&&(N.yaxis=i.ya),void 0!==i.zLabelVal&&(N.z=i.zLabelVal)),o.appendArrayPointValue(N,s,F),N},o.appendArrayPointValue=function(i,o,s){var N=o._arrayAttrs;if(N)for(var j=0;j<N.length;j++){var Z=N[j],X=F[Z]||Z;if(void 0===i[X]){var $=getPointData(_.nestedProperty(o,Z).get(),s);void 0!==$&&(i[X]=$)}}},o.appendArrayMultiPointValues=function(i,o,s){var N=o._arrayAttrs;if(N)for(var j=0;j<N.length;j++){var Z=N[j],X=F[Z]||Z;if(void 0===i[X]){for(var $=_.nestedProperty(o,Z).get(),ee=Array(s.length),et=0;et<s.length;et++)ee[et]=getPointData($,s[et]);i[X]=ee}}};var F={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function getPointData(i,o){return Array.isArray(o)?Array.isArray(i)&&Array.isArray(i[o[0]])?i[o[0]][o[1]]:void 0:i[o]}var N={x:!0,y:!0},j={"x unified":!0,"y unified":!0};o.isUnifiedHover=function(i){return"string"==typeof i&&!!j[i]},o.isXYhover=function(i){return"string"==typeof i&&!!N[i]}},88335:function(i,o,s){"use strict";var _=s(39898),F=s(92770),N=s(84267),j=s(71828),Z=j.strTranslate,X=j.strRotate,$=s(11086),ee=s(63893),et=s(39918),er=s(91424),en=s(7901),ei=s(28569),eo=s(89298),es=s(73972),el=s(23469),ec=s(26675),eu=s(99017),ef=s(43969),ed=ec.YANGLE,eh=Math.PI*ed/180,ep=1/Math.sin(eh),eg=Math.cos(eh),em=Math.sin(eh),ey=ec.HOVERARROWSIZE,ev=ec.HOVERTEXTPAD,ex={box:!0,ohlc:!0,violin:!0,candlestick:!0},e_={scatter:!0,scattergl:!0,splom:!0};function _hover(i,o,s,N,Z){s||(s="xy");var X=Array.isArray(s)?s:[s],ee=i._fullLayout,er=ee._plots||[],eo=er[s],ec=ee._has("cartesian");if(eo){var eu=eo.overlays.map(function(i){return i.id});X=X.concat(eu)}for(var ef=X.length,ed=Array(ef),eh=Array(ef),ep=!1,eg=0;eg<ef;eg++){var em=X[eg];if(er[em])ep=!0,ed[eg]=er[em].xaxis,eh[eg]=er[em].yaxis;else if(ee[em]&&ee[em]._subplot){var ey=ee[em]._subplot;ed[eg]=ey.xaxis,eh[eg]=ey.yaxis}else{j.warn("Unrecognized subplot: "+em);return}}var ev=o.hovermode||ee.hovermode;if(ev&&!ep&&(ev="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(ev)||!i.calcdata||i.querySelector(".zoombox")||i._dragging)return ei.unhoverRaw(i,o);var ew=ee.hoverdistance;-1===ew&&(ew=1/0);var eT=ee.spikedistance;-1===eT&&(eT=1/0);var ek=[],eA=[],eS={hLinePoint:null,vLinePoint:null},eM=!1;if(Array.isArray(o))for(eL=0,ev="array";eL<o.length;eL++)(eI=i.calcdata[o[eL].curveNumber||0])&&(eO=eI[0].trace,"skip"!==eI[0].trace.hoverinfo&&(eA.push(eI),"h"===eO.orientation&&(eM=!0)));else{for(eP=0;eP<i.calcdata.length;eP++)"skip"!==(eO=(eI=i.calcdata[eP])[0].trace).hoverinfo&&el.isTraceInSubplots(eO,X)&&(eA.push(eI),"h"===eO.orientation&&(eM=!0));if(Z){if(!1===$.triggerHandler(i,"plotly_beforehover",o))return;var eC,eE,eL,eP,eI,eO,eD,eR,eB,eF,ez,eN,ej,eV,eU,eH=Z.getBoundingClientRect();eV=o.clientX-eH.left,eU=o.clientY-eH.top,ee._calcInverseTransform(i);var eG=j.apply3DTransform(ee._invTransform)(eV,eU);if(eV=eG[0],eU=eG[1],eV<0||eV>ed[0]._length||eU<0||eU>eh[0]._length)return ei.unhoverRaw(i,o)}else eV="xpx"in o?o.xpx:ed[0]._length/2,eU="ypx"in o?o.ypx:eh[0]._length/2;if(o.pointerX=eV+ed[0]._offset,o.pointerY=eU+eh[0]._offset,eC="xval"in o?el.flat(X,o.xval):el.p2c(ed,eV),eE="yval"in o?el.flat(X,o.yval):el.p2c(eh,eU),!F(eC[0])||!F(eE[0]))return j.warn("Fx.hover failed",o,i),ei.unhoverRaw(i,o)}var eW=1/0;function findHoverPoints(i,s){for(eP=0;eP<eA.length;eP++)if((eI=eA[eP])&&eI[0]&&eI[0].trace&&!0===(eO=eI[0].trace).visible&&0!==eO._length&&-1===["carpet","contourcarpet"].indexOf(eO._module.name)){if("splom"===eO.type?eD=X[eR=0]:(eD=el.getSubplot(eO),eR=X.indexOf(eD)),eB=ev,el.isUnifiedHover(eB)&&(eB=eB.charAt(0)),eN={cd:eI,trace:eO,xa:ed[eR],ya:eh[eR],maxHoverDistance:ew,maxSpikeDistance:eT,index:!1,distance:Math.min(eW,ew),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:en.defaultLine,name:eO.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ee[eD]&&(eN.subplot=ee[eD]._subplot),ee._splomScenes&&ee._splomScenes[eO.uid]&&(eN.scene=ee._splomScenes[eO.uid]),ej=ek.length,"array"===eB){var _=o[eP];"pointNumber"in _?(eN.index=_.pointNumber,eB="closest"):(eB="","xval"in _&&(eF=_.xval,eB="x"),"yval"in _&&(ez=_.yval,eB=eB?"closest":"y"))}else void 0!==i&&void 0!==s?(eF=i,ez=s):(eF=eC[eR],ez=eE[eR]);if(0!==ew){if(eO._module&&eO._module.hoverPoints){var N,Z=eO._module.hoverPoints(eN,eF,ez,eB,{finiteRange:!0,hoverLayer:ee._hoverlayer});if(Z)for(var $=0;$<Z.length;$++)F((N=Z[$]).x0)&&F(N.y0)&&ek.push(cleanPoint(N,ev))}else j.log("Unrecognized trace type in hover:",eO)}if("closest"===ev&&ek.length>ej&&(ek.splice(0,ej),eW=ek[0].distance),ec&&0!==eT&&0===ek.length){eN.distance=eT,eN.index=!1;var et=eO._module.hoverPoints(eN,eF,ez,"closest",{hoverLayer:ee._hoverlayer});if(et&&(et=et.filter(function(i){return i.spikeDistance<=eT})),et&&et.length){var er,ei=et.filter(function(i){return i.xa.showspikes&&"hovered data"!==i.xa.spikesnap});if(ei.length){var eo=ei[0];F(eo.x0)&&F(eo.y0)&&(er=fillSpikePoint(eo),(!eS.vLinePoint||eS.vLinePoint.spikeDistance>er.spikeDistance)&&(eS.vLinePoint=er))}var es=et.filter(function(i){return i.ya.showspikes&&"hovered data"!==i.ya.spikesnap});if(es.length){var eu=es[0];F(eu.x0)&&F(eu.y0)&&(er=fillSpikePoint(eu),(!eS.hLinePoint||eS.hLinePoint.spikeDistance>er.spikeDistance)&&(eS.hLinePoint=er))}}}}}function selectClosestPoint(i,o,s){for(var _,F=null,N=1/0,j=0;j<i.length;j++)_=i[j].spikeDistance,s&&0===j&&(_=-1/0),_<=N&&_<=o&&(F=i[j],N=_);return F}function fillSpikePoint(i){return i?{xa:i.xa,ya:i.ya,x:void 0!==i.xSpike?i.xSpike:(i.x0+i.x1)/2,y:void 0!==i.ySpike?i.ySpike:(i.y0+i.y1)/2,distance:i.distance,spikeDistance:i.spikeDistance,curveNumber:i.trace.index,color:i.color,pointNumber:i.index}:null}findHoverPoints();var eZ={fullLayout:ee,container:ee._hoverlayer,event:o},eY=i._spikepoints,eX={vLinePoint:eS.vLinePoint,hLinePoint:eS.hLinePoint};i._spikepoints=eX;var sortHoverData=function(){ek.sort(function(i,o){return i.distance-o.distance}),ek=orderRangePoints(ek,ev)};sortHoverData();var eK=ev.charAt(0),eJ=("x"===eK||"y"===eK)&&ek[0]&&e_[ek[0].trace.type];if(ec&&0!==eT&&0!==ek.length){var e$=selectClosestPoint(ek.filter(function(i){return i.ya.showspikes}),eT,eJ);eS.hLinePoint=fillSpikePoint(e$);var eQ=selectClosestPoint(ek.filter(function(i){return i.xa.showspikes}),eT,eJ);eS.vLinePoint=fillSpikePoint(eQ)}if(0===ek.length){var e0=ei.unhoverRaw(i,o);return ec&&(null!==eS.hLinePoint||null!==eS.vLinePoint)&&spikesChanged(eY)&&createSpikelines(i,eS,eZ),e0}if(ec&&spikesChanged(eY)&&createSpikelines(i,eS,eZ),el.isXYhover(eB)&&0!==ek[0].length&&"splom"!==ek[0].trace.type){var e1,e2=ek[0],e3=(ek=ex[e2.trace.type]?ek.filter(function(i){return i.trace.index===e2.trace.index}):[e2]).length;findHoverPoints(getCoord("x",e2,ee),getCoord("y",e2,ee));var e5=[],e4={},e6=0,insert=function(i){var o=ex[i.trace.type]?hoverDataKey(i):i.trace.index;if(e4[o]){var s=e4[o]-1,_=e5[s];s>0&&Math.abs(i.distance)<Math.abs(_.distance)&&(e5[s]=i)}else e6++,e4[o]=e6,e5.push(i)};for(e1=0;e1<e3;e1++)insert(ek[e1]);for(e1=ek.length-1;e1>e3-1;e1--)insert(ek[e1]);ek=e5,sortHoverData()}var e8=i._hoverdata,e7=[],e9=getTopOffset(i),te=getLeftOffset(i);for(eL=0;eL<ek.length;eL++){var tt=ek[eL],tr=el.makeEventData(tt,tt.trace,tt.cd);if(!1!==tt.hovertemplate){var tn=!1;tt.cd[tt.index]&&tt.cd[tt.index].ht&&(tn=tt.cd[tt.index].ht),tt.hovertemplate=tn||tt.trace.hovertemplate||!1}if(tt.xa&&tt.ya){var ta=tt.x0+tt.xa._offset,ti=tt.x1+tt.xa._offset,to=tt.y0+tt.ya._offset,ts=tt.y1+tt.ya._offset,tl=Math.min(ta,ti),tc=Math.max(ta,ti),tu=Math.min(to,ts),tf=Math.max(to,ts);tr.bbox={x0:tl+te,x1:tc+te,y0:tu+e9,y1:tf+e9}}tt.eventData=[tr],e7.push(tr)}i._hoverdata=e7;var td="y"===ev&&(eA.length>1||ek.length>1)||"closest"===ev&&eM&&ek.length>1,th=en.combine(ee.plot_bgcolor||en.background,ee.paper_bgcolor),tp=createHoverText(ek,{gd:i,hovermode:ev,rotateLabels:td,bgColor:th,container:ee._hoverlayer,outerContainer:ee._paper.node(),commonLabelOpts:ee.hoverlabel,hoverdistance:ee.hoverdistance}),tg=tp.hoverLabels;if(el.isUnifiedHover(ev)||(hoverAvoidOverlaps(tg,td,ee,tp.commonLabelBoundingBox),alignHoverText(tg,td,ee._invScaleX,ee._invScaleY)),Z&&Z.tagName){var tm=es.getComponentMethod("annotations","hasClickToShow")(i,e7);et(_.select(Z),tm?"pointer":"")}Z&&!N&&hoverChanged(i,o,e8)&&(e8&&i.emit("plotly_unhover",{event:o,points:e8}),i.emit("plotly_hover",{event:o,points:i._hoverdata,xaxes:ed,yaxes:eh,xvals:eC,yvals:eE}))}function hoverDataKey(i){return[i.trace.index,i.index,i.x0,i.y0,i.name,i.attr,i.xa?i.xa._id:"",i.ya?i.ya._id:""].join(",")}o.hover=function(i,o,s,_){i=j.getGraphDiv(i);var F=o.target;j.throttle(i._fullLayout._uid+ec.HOVERID,ec.HOVERMINTIME,function(){_hover(i,o,s,_,F)})},o.loneHover=function(i,o){var s=!0;Array.isArray(i)||(s=!1,i=[i]);var F=o.gd,N=getTopOffset(F),j=getLeftOffset(F),Z=createHoverText(i.map(function(i){var s=i._x0||i.x0||i.x||0,_=i._x1||i.x1||i.x||0,Z=i._y0||i.y0||i.y||0,X=i._y1||i.y1||i.y||0,$=i.eventData;if($){var ee=Math.min(s,_),et=Math.max(s,_),er=Math.min(Z,X),ei=Math.max(Z,X),eo=i.trace;if(es.traceIs(eo,"gl3d")){var el=F._fullLayout[eo.scene]._scene.container,ec=el.offsetLeft,eu=el.offsetTop;ee+=ec,et+=ec,er+=eu,ei+=eu}$.bbox={x0:ee+j,x1:et+j,y0:er+N,y1:ei+N},o.inOut_bbox&&o.inOut_bbox.push($.bbox)}else $=!1;return{color:i.color||en.defaultLine,x0:i.x0||i.x||0,x1:i.x1||i.x||0,y0:i.y0||i.y||0,y1:i.y1||i.y||0,xLabel:i.xLabel,yLabel:i.yLabel,zLabel:i.zLabel,text:i.text,name:i.name,idealAlign:i.idealAlign,borderColor:i.borderColor,fontFamily:i.fontFamily,fontSize:i.fontSize,fontColor:i.fontColor,nameLength:i.nameLength,textAlign:i.textAlign,trace:i.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:i.hovertemplate||!1,hovertemplateLabels:i.hovertemplateLabels||!1,eventData:$}}),{gd:F,hovermode:"closest",rotateLabels:!1,bgColor:o.bgColor||en.background,container:_.select(o.container),outerContainer:o.outerContainer||o.container}).hoverLabels,X=0,$=0;return Z.sort(function(i,o){return i.y0-o.y0}).each(function(i,s){var _=i.y0-i.by/2;_-5<X?i.offset=X-_+5:i.offset=0,X=_+i.by+i.offset,s===o.anchorIndex&&($=i.offset)}).each(function(i){i.offset-=$}),alignHoverText(Z,!1,F._fullLayout._invScaleX,F._fullLayout._invScaleY),s?Z:Z.node()};var ew=/<extra>([\s\S]*)<\/extra>/;function createHoverText(i,o){var s=o.gd,F=s._fullLayout,N=o.hovermode,$=o.rotateLabels,et=o.bgColor,ei=o.container,eo=o.outerContainer,eh=o.commonLabelOpts||{};if(0===i.length)return[[]];var ep=o.fontFamily||ec.HOVERFONT,eg=o.fontSize||ec.HOVERFONTSIZE,em=i[0],ex=em.xa,e_=em.ya,ew=N.charAt(0),eT=ew+"Label",ek=em[eT];if(void 0===ek&&"multicategory"===ex.type)for(var eA=0;eA<i.length&&void 0===(ek=i[eA][eT]);eA++);var eS=getBoundingClientRect(s,eo),eM=eS.top,eC=eS.width,eE=eS.height,eL=void 0!==ek&&em.distance<=o.hoverdistance&&("x"===N||"y"===N);if(eL){var eP,eI,eO=!0;for(eP=0;eP<i.length;eP++)if(eO&&void 0===i[eP].zLabel&&(eO=!1),eI=i[eP].hoverinfo||i[eP].trace.hoverinfo){var eD=Array.isArray(eI)?eI:eI.split("+");if(-1===eD.indexOf("all")&&-1===eD.indexOf(N)){eL=!1;break}}eO&&(eL=!1)}var eR=ei.selectAll("g.axistext").data(eL?[0]:[]);eR.enter().append("g").classed("axistext",!0),eR.exit().remove();var eB={minX:0,maxX:0,minY:0,maxY:0};if(eR.each(function(){var i=_.select(this),o=j.ensureSingle(i,"path","",function(i){i.style({"stroke-width":"1px"})}),X=j.ensureSingle(i,"text","",function(i){i.attr("data-notex",1)}),$=eh.bgcolor||en.defaultLine,et=eh.bordercolor||en.contrast($),ei=en.contrast($),eo={family:eh.font.family||ep,size:eh.font.size||eg,color:eh.font.color||ei};o.style({fill:$,stroke:et}),X.text(ek).call(er.font,eo).call(ee.positionText,0,0).call(ee.convertToTspans,s),i.attr("transform","");var es=getBoundingClientRect(s,X.node());if("x"===N){var el="top"===ex.side?"-":"";X.attr("text-anchor","middle").call(ee.positionText,0,"top"===ex.side?eM-es.bottom-ey-ev:eM-es.top+ey+ev),eu=ex._offset+(em.x0+em.x1)/2,ef=e_._offset+("top"===ex.side?0:e_._length);var ec=es.width/2+ev;eu<ec?(eu=ec,o.attr("d","M-"+(ec-ey)+",0L-"+(ec-2*ey)+","+el+ey+"H"+ec+"v"+el+(2*ev+es.height)+"H-"+ec+"V"+el+ey+"Z")):eu>F.width-ec?(eu=F.width-ec,o.attr("d","M"+(ec-ey)+",0L"+ec+","+el+ey+"v"+el+(2*ev+es.height)+"H-"+ec+"V"+el+ey+"H"+(ec-2*ey)+"Z")):o.attr("d","M0,0L"+ey+","+el+ey+"H"+ec+"v"+el+(2*ev+es.height)+"H-"+ec+"V"+el+ey+"H-"+ey+"Z"),eB.minX=eu-ec,eB.maxX=eu+ec,"top"===ex.side?(eB.minY=ef-(2*ev+es.height),eB.maxY=ef-ev):(eB.minY=ef+ev,eB.maxY=ef+(2*ev+es.height))}else{"right"===e_.side?(ed="start",ew=1,eT="",eu=ex._offset+ex._length):(ed="end",ew=-1,eT="-",eu=ex._offset),ef=e_._offset+(em.y0+em.y1)/2,X.attr("text-anchor",ed),o.attr("d","M0,0L"+eT+ey+","+ey+"V"+(ev+es.height/2)+"h"+eT+(2*ev+es.width)+"V-"+(ev+es.height/2)+"H"+eT+ey+"V-"+ey+"Z"),eB.minY=ef-(ev+es.height/2),eB.maxY=ef+(ev+es.height/2),"right"===e_.side?(eB.minX=eu+ey,eB.maxX=eu+ey+(2*ev+es.width)):(eB.minX=eu-ey-(2*ev+es.width),eB.maxX=eu-ey);var eu,ef,ed,ew,eT,eA,eS=es.height/2,eC=eM-es.top-eS,eE="clip"+F._uid+"commonlabel"+e_._id;if(eu<es.width+2*ev+ey){eA="M-"+(ey+ev)+"-"+eS+"h-"+(es.width-ev)+"V"+eS+"h"+(es.width-ev)+"Z";var eL=es.width-eu+ev;ee.positionText(X,eL,eC),"end"===ed&&X.selectAll("tspan").each(function(){var i=_.select(this),o=er.tester.append("text").text(i.text()).call(er.font,eo),F=getBoundingClientRect(s,o.node());Math.round(F.width)<Math.round(es.width)&&i.attr("x",eL-F.width),o.remove()})}else ee.positionText(X,ew*(ev+ey),eC),eA=null;var eP=F._topclips.selectAll("#"+eE).data(eA?[0]:[]);eP.enter().append("clipPath").attr("id",eE).append("path"),eP.exit().remove(),eP.select("path").attr("d",eA),er.setClipUrl(X,eA?eE:null,s)}i.attr("transform",Z(eu,ef))}),el.isUnifiedHover(N)){ei.selectAll("g.hovertext").remove();var eF,ez,eN,ej,eV,eU,eH=i.filter(function(i){return"none"!==i.hoverinfo});if(0===eH.length)return[];var eG=F.hoverlabel,eW=eG.font,eZ={showlegend:!0,legend:{title:{text:ek,font:eW},font:eW,bgcolor:eG.bgcolor,bordercolor:eG.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:F.legend?F.legend.traceorder:void 0,orientation:"v"}},eY={font:eW};eu(eZ,eY,s._fullData);var eX=eY.legend;eX.entries=[];for(var eK=0;eK<eH.length;eK++){var eJ=eH[eK];if("none"!==eJ.hoverinfo){var e$=getHoverLabelText(eJ,!0,N,F,ek),eQ=e$[0],e0=e$[1];eJ.name=e0,""!==e0?eJ.text=e0+" : "+eQ:eJ.text=eQ;var e1=eJ.cd[eJ.index];e1&&(e1.mc&&(eJ.mc=e1.mc),e1.mcc&&(eJ.mc=e1.mcc),e1.mlc&&(eJ.mlc=e1.mlc),e1.mlcc&&(eJ.mlc=e1.mlcc),e1.mlw&&(eJ.mlw=e1.mlw),e1.mrc&&(eJ.mrc=e1.mrc),e1.dir&&(eJ.dir=e1.dir)),eJ._distinct=!0,eX.entries.push([eJ])}}eX.entries.sort(function(i,o){return i[0].trace.index-o[0].trace.index}),eX.layer=ei,eX._inHover=!0,eX._groupTitleFont=eG.grouptitlefont,ef(s,eX);var e2=ei.select("g.legend"),e3=getBoundingClientRect(s,e2.node()),e5=e3.width+2*ev,e4=e3.height+2*ev,e6=eH[0],e8=(e6.x0+e6.x1)/2,e7=(e6.y0+e6.y1)/2,e9=!(es.traceIs(e6.trace,"bar-like")||es.traceIs(e6.trace,"box-violin"));"y"===ew?e9?(ez=e7-ev,eF=e7+ev):(ez=Math.min.apply(null,eH.map(function(i){return Math.min(i.y0,i.y1)})),eF=Math.max.apply(null,eH.map(function(i){return Math.max(i.y0,i.y1)}))):ez=eF=j.mean(eH.map(function(i){return(i.y0+i.y1)/2}))-e4/2,"x"===ew?e9?(eN=e8+ev,ej=e8-ev):(eN=Math.max.apply(null,eH.map(function(i){return Math.max(i.x0,i.x1)})),ej=Math.min.apply(null,eH.map(function(i){return Math.min(i.x0,i.x1)}))):eN=ej=j.mean(eH.map(function(i){return(i.x0+i.x1)/2}))-e5/2;var te=ex._offset,tt=e_._offset;return eF+=tt,eN+=te,ej+=te-e5,ez+=tt-e4,eV=(eN+e5<eC&&eN>=0?eN:ej+e5<eC&&ej>=0?ej:te+e5<eC?te:eN-e8<e8-ej+e5?eC-e5:0)+ev,eU=(eF+e4<eE&&eF>=0?eF:ez+e4<eE&&ez>=0?ez:tt+e4<eE?tt:eF-e7<e7-ez+e4?eE-e4:0)+ev,e2.attr("transform",Z(eV-1,eU-1)),e2}var tr=ei.selectAll("g.hovertext").data(i,function(i){return hoverDataKey(i)});return tr.enter().append("g").classed("hovertext",!0).each(function(){var i=_.select(this);i.append("rect").call(en.fill,en.addOpacity(et,.8)),i.append("text").classed("name",!0),i.append("path").style("stroke-width","1px"),i.append("text").classed("nums",!0).call(er.font,ep,eg)}),tr.exit().remove(),tr.each(function(i){var o,j,ei=_.select(this).attr("transform",""),eo=i.color;Array.isArray(eo)&&(eo=eo[i.eventData[0].pointNumber]);var es=i.bgcolor||eo,el=en.combine(en.opacity(es)?es:en.defaultLine,et),ec=en.combine(en.opacity(eo)?eo:en.defaultLine,et),eu=i.borderColor||en.contrast(el),ef=getHoverLabelText(i,eL,N,F,ek,ei),eh=ef[0],em=ef[1],ex=ei.select("text.nums").call(er.font,i.fontFamily||ep,i.fontSize||eg,i.fontColor||eu).text(eh).attr("data-notex",1).call(ee.positionText,0,0).call(ee.convertToTspans,s),e_=ei.select("text.name"),ew=0,eT=0;if(em&&em!==eh){e_.call(er.font,i.fontFamily||ep,i.fontSize||eg,ec).text(em).attr("data-notex",1).call(ee.positionText,0,0).call(ee.convertToTspans,s);var eA=getBoundingClientRect(s,e_.node());ew=eA.width+2*ev,eT=eA.height+2*ev}else e_.remove(),ei.select("rect").remove();ei.select("path").style({fill:el,stroke:eu});var eS=i.xa._offset+(i.x0+i.x1)/2,eP=i.ya._offset+(i.y0+i.y1)/2,eI=Math.abs(i.x1-i.x0),eO=Math.abs(i.y1-i.y0),eD=getBoundingClientRect(s,ex.node()),eR=eD.width/F._invScaleX,eB=eD.height/F._invScaleY;i.ty0=(eM-eD.top)/F._invScaleY,i.bx=eR+2*ev,i.by=Math.max(eB+2*ev,eT),i.anchor="start",i.txwidth=eR,i.tx2width=ew,i.offset=0;var eF=(eR+ey+ev+ew)*F._invScaleX;if($)i.pos=eS,o=eP+eO/2+eF<=eE,j=eP-eO/2-eF>=0,("top"===i.idealAlign||!o)&&j?(eP-=eO/2,i.anchor="end"):o?(eP+=eO/2,i.anchor="start"):i.anchor="middle",i.crossPos=eP;else{if(i.pos=eP,o=eS+eI/2+eF<=eC,j=eS-eI/2-eF>=0,("left"===i.idealAlign||!o)&&j)eS-=eI/2,i.anchor="end";else if(o)eS+=eI/2,i.anchor="start";else{i.anchor="middle";var ez=eF/2,eN=eS+ez-eC,ej=eS-ez;eN>0&&(eS-=eN),ej<0&&(eS+=-ej)}i.crossPos=eS}ex.attr("text-anchor",i.anchor),ew&&e_.attr("text-anchor",i.anchor),ei.attr("transform",Z(eS,eP)+($?X(ed):""))}),{hoverLabels:tr,commonLabelBoundingBox:eB}}function getHoverLabelText(i,o,s,_,F,N){var Z="",X="";void 0!==i.nameOverride&&(i.name=i.nameOverride),i.name&&(i.trace._meta&&(i.name=j.templateString(i.name,i.trace._meta)),Z=plainText(i.name,i.nameLength));var $=s.charAt(0);void 0!==i.zLabel?(void 0!==i.xLabel&&(X+="x: "+i.xLabel+"<br>"),void 0!==i.yLabel&&(X+="y: "+i.yLabel+"<br>"),"choropleth"!==i.trace.type&&"choroplethmapbox"!==i.trace.type&&(X+=(X?"z: ":"")+i.zLabel)):o&&i[$+"Label"]===F?X=i[("x"===$?"y":"x")+"Label"]||"":void 0===i.xLabel?void 0!==i.yLabel&&"scattercarpet"!==i.trace.type&&(X=i.yLabel):X=void 0===i.yLabel?i.xLabel:"("+i.xLabel+", "+i.yLabel+")",(i.text||0===i.text)&&!Array.isArray(i.text)&&(X+=(X?"<br>":"")+i.text),void 0!==i.extraText&&(X+=(X?"<br>":"")+i.extraText),N&&""===X&&!i.hovertemplate&&(""===Z&&N.remove(),X=Z);var ee=i.hovertemplate||!1;if(ee){var et=i.hovertemplateLabels||i;i[$+"Label"]!==F&&(et[$+"other"]=et[$+"Val"],et[$+"otherLabel"]=et[$+"Label"]),X=(X=j.hovertemplateString(ee,et,_._d3locale,i.eventData[0]||{},i.trace._meta)).replace(ew,function(o,s){return Z=plainText(s,i.nameLength),""})}return[X,Z]}function hoverAvoidOverlaps(i,o,s,_){var F,N,j,Z,X,$,ee,et=o?"xa":"ya",er=o?"ya":"xa",en=0,ei=1,eo=i.size(),es=Array(eo),el=0,ec=_.minX,eu=_.maxX,ef=_.minY,ed=_.maxY,pX=function(i){return i*s._invScaleX},pY=function(i){return i*s._invScaleY};function constrainGroup(i){var o=i[0],s=i[i.length-1];if(N=o.pmin-o.pos-o.dp+o.size,j=s.pos+s.dp+s.size-o.pmax,N>.01){for(X=i.length-1;X>=0;X--)i[X].dp+=N;F=!1}if(!(j<.01)){if(N<-.01){for(X=i.length-1;X>=0;X--)i[X].dp-=j;F=!1}if(F){var _=0;for(Z=0;Z<i.length;Z++)($=i[Z]).pos+$.dp+$.size>o.pmax&&_++;for(Z=i.length-1;Z>=0&&!(_<=0);Z--)($=i[Z]).pos>o.pmax-1&&($.del=!0,_--);for(Z=0;Z<i.length&&!(_<=0);Z++)if(($=i[Z]).pos<o.pmin+1)for($.del=!0,_--,j=2*$.size,X=i.length-1;X>=0;X--)i[X].dp-=j;for(Z=i.length-1;Z>=0&&!(_<=0);Z--)($=i[Z]).pos+$.dp+$.size>o.pmax&&($.del=!0,_--)}}}for(i.each(function(i){var _=i[et],F=i[er],N="x"===_._id.charAt(0),j=_.range;0===el&&j&&j[0]>j[1]!==N&&(ei=-1);var Z=0,X=N?s.width:s.height;if("x"===s.hovermode||"y"===s.hovermode){var $,ee,en=getHoverLabelOffsets(i,o),eo=i.anchor,eh="end"===eo?-1:1;if("middle"===eo)ee=($=i.crossPos+(N?pY(en.y-i.by/2):pX(i.bx/2+i.tx2width/2)))+(N?pY(i.by):pX(i.bx));else if(N)ee=($=i.crossPos+pY(ey+en.y)-pY(i.by/2-ey))+pY(i.by);else{var eg=pX(eh*ey+en.x),em=eg+pX(eh*i.bx);$=i.crossPos+Math.min(eg,em),ee=i.crossPos+Math.max(eg,em)}N?void 0!==ef&&void 0!==ed&&Math.min(ee,ed)-Math.max($,ef)>1&&("left"===F.side?(Z=F._mainLinePosition,X=s.width):X=F._mainLinePosition):void 0!==ec&&void 0!==eu&&Math.min(ee,eu)-Math.max($,ec)>1&&("top"===F.side?(Z=F._mainLinePosition,X=s.height):X=F._mainLinePosition)}es[el++]=[{datum:i,traceIndex:i.trace.index,dp:0,pos:i.pos,posref:i.posref,size:i.by*(N?ep:1)/2,pmin:Z,pmax:X}]}),es.sort(function(i,o){return i[0].posref-o[0].posref||ei*(o[0].traceIndex-i[0].traceIndex)});!F&&en<=eo;){for(en++,F=!0,Z=0;Z<es.length-1;){var eh=es[Z],eg=es[Z+1],em=eh[eh.length-1],ev=eg[0];if((N=em.pos+em.dp+em.size-ev.pos-ev.dp+ev.size)>.01&&em.pmin===ev.pmin&&em.pmax===ev.pmax){for(X=eg.length-1;X>=0;X--)eg[X].dp+=N;for(eh.push.apply(eh,eg),es.splice(Z+1,1),ee=0,X=eh.length-1;X>=0;X--)ee+=eh[X].dp;for(j=ee/eh.length,X=eh.length-1;X>=0;X--)eh[X].dp-=j;F=!1}else Z++}es.forEach(constrainGroup)}for(Z=es.length-1;Z>=0;Z--){var ex=es[Z];for(X=ex.length-1;X>=0;X--){var e_=ex[X],ew=e_.datum;ew.offset=e_.dp,ew.del=e_.del}}}function getHoverLabelOffsets(i,o){var s=0,_=i.offset;return o&&(_*=-em,s=i.offset*eg),{x:s,y:_}}function getTextShiftX(i){var o={start:1,end:-1,middle:0}[i.anchor],s=o*(ey+ev),_=s+o*(i.txwidth+ev);return"middle"===i.anchor&&(s-=i.tx2width/2,_+=i.txwidth/2+ev),{alignShift:o,textShiftX:s,text2ShiftX:_}}function alignHoverText(i,o,s,F){var pX=function(i){return i*s},pY=function(i){return i*F};i.each(function(i){var s=_.select(this);if(i.del)return s.remove();var F=s.select("text.nums"),N=i.anchor,j="end"===N?-1:1,Z=getTextShiftX(i),X=getHoverLabelOffsets(i,o),$=X.x,et=X.y,en="middle"===N;s.select("path").attr("d",en?"M-"+pX(i.bx/2+i.tx2width/2)+","+pY(et-i.by/2)+"h"+pX(i.bx)+"v"+pY(i.by)+"h-"+pX(i.bx)+"Z":"M0,0L"+pX(j*ey+$)+","+pY(ey+et)+"v"+pY(i.by/2-ey)+"h"+pX(j*i.bx)+"v-"+pY(i.by)+"H"+pX(j*ey+$)+"V"+pY(et-ey)+"Z");var ei=$+Z.textShiftX,eo=et+i.ty0-i.by/2+ev,es=i.textAlign||"auto";"auto"!==es&&("left"===es&&"start"!==N?(F.attr("text-anchor","start"),ei=en?-i.bx/2-i.tx2width/2+ev:-i.bx-ev):"right"===es&&"end"!==N&&(F.attr("text-anchor","end"),ei=en?i.bx/2-i.tx2width/2-ev:i.bx+ev)),F.call(ee.positionText,pX(ei),pY(eo)),i.tx2width&&(s.select("text.name").call(ee.positionText,pX(Z.text2ShiftX+Z.alignShift*ev+$),pY(et+i.ty0-i.by/2+ev)),s.select("rect").call(er.setRect,pX(Z.text2ShiftX+(Z.alignShift-1)*i.tx2width/2+$),pY(et-i.by/2-1),pX(i.tx2width),pY(i.by+2)))})}function cleanPoint(i,o){var s=i.index,_=i.trace||{},N=i.cd[0],Z=i.cd[s]||{};function pass(i){return i||F(i)&&0===i}var X=Array.isArray(s)?function(i,o){var F=j.castOption(N,s,i);return pass(F)?F:j.extractOption({},_,"",o)}:function(i,o){return j.extractOption(Z,_,i,o)};function fill(o,s,_){var F=X(s,_);pass(F)&&(i[o]=F)}if(fill("hoverinfo","hi","hoverinfo"),fill("bgcolor","hbg","hoverlabel.bgcolor"),fill("borderColor","hbc","hoverlabel.bordercolor"),fill("fontFamily","htf","hoverlabel.font.family"),fill("fontSize","hts","hoverlabel.font.size"),fill("fontColor","htc","hoverlabel.font.color"),fill("nameLength","hnl","hoverlabel.namelength"),fill("textAlign","hta","hoverlabel.align"),i.posref="y"===o||"closest"===o&&"h"===_.orientation?i.xa._offset+(i.x0+i.x1)/2:i.ya._offset+(i.y0+i.y1)/2,i.x0=j.constrain(i.x0,0,i.xa._length),i.x1=j.constrain(i.x1,0,i.xa._length),i.y0=j.constrain(i.y0,0,i.ya._length),i.y1=j.constrain(i.y1,0,i.ya._length),void 0!==i.xLabelVal&&(i.xLabel="xLabel"in i?i.xLabel:eo.hoverLabelText(i.xa,i.xLabelVal,_.xhoverformat),i.xVal=i.xa.c2d(i.xLabelVal)),void 0!==i.yLabelVal&&(i.yLabel="yLabel"in i?i.yLabel:eo.hoverLabelText(i.ya,i.yLabelVal,_.yhoverformat),i.yVal=i.ya.c2d(i.yLabelVal)),void 0!==i.zLabelVal&&void 0===i.zLabel&&(i.zLabel=String(i.zLabelVal)),!isNaN(i.xerr)&&!("log"===i.xa.type&&i.xerr<=0)){var $=eo.tickText(i.xa,i.xa.c2l(i.xerr),"hover").text;void 0!==i.xerrneg?i.xLabel+=" +"+$+" / -"+eo.tickText(i.xa,i.xa.c2l(i.xerrneg),"hover").text:i.xLabel+=" \xb1 "+$,"x"===o&&(i.distance+=1)}if(!isNaN(i.yerr)&&!("log"===i.ya.type&&i.yerr<=0)){var ee=eo.tickText(i.ya,i.ya.c2l(i.yerr),"hover").text;void 0!==i.yerrneg?i.yLabel+=" +"+ee+" / -"+eo.tickText(i.ya,i.ya.c2l(i.yerrneg),"hover").text:i.yLabel+=" \xb1 "+ee,"y"===o&&(i.distance+=1)}var et=i.hoverinfo||i.trace.hoverinfo;return et&&"all"!==et&&(-1===(et=Array.isArray(et)?et:et.split("+")).indexOf("x")&&(i.xLabel=void 0),-1===et.indexOf("y")&&(i.yLabel=void 0),-1===et.indexOf("z")&&(i.zLabel=void 0),-1===et.indexOf("text")&&(i.text=void 0),-1===et.indexOf("name")&&(i.name=void 0)),i}function createSpikelines(i,o,s){var _=s.container,F=s.fullLayout,j=F._size,Z=s.event,X=!!o.hLinePoint,$=!!o.vLinePoint;if(_.selectAll(".spikeline").remove(),$||X){var ee=en.combine(F.plot_bgcolor,F.paper_bgcolor);if(X){var et,ei,es,el,ec,eu,ef=o.hLinePoint;et=ef&&ef.xa,"cursor"===(ei=ef&&ef.ya).spikesnap?(es=Z.pointerX,el=Z.pointerY):(es=et._offset+ef.x,el=ei._offset+ef.y);var ed=1.5>N.readability(ef.color,ee)?en.contrast(ee):ef.color,eh=ei.spikemode,ep=ei.spikethickness,eg=ei.spikecolor||ed,em=eo.getPxPosition(i,ei);if(-1!==eh.indexOf("toaxis")||-1!==eh.indexOf("across")){if(-1!==eh.indexOf("toaxis")&&(ec=em,eu=es),-1!==eh.indexOf("across")){var ey=ei._counterDomainMin,ev=ei._counterDomainMax;"free"===ei.anchor&&(ey=Math.min(ey,ei.position),ev=Math.max(ev,ei.position)),ec=j.l+ey*j.w,eu=j.l+ev*j.w}_.insert("line",":first-child").attr({x1:ec,x2:eu,y1:el,y2:el,"stroke-width":ep,stroke:eg,"stroke-dasharray":er.dashStyle(ei.spikedash,ep)}).classed("spikeline",!0).classed("crisp",!0),_.insert("line",":first-child").attr({x1:ec,x2:eu,y1:el,y2:el,"stroke-width":ep+2,stroke:ee}).classed("spikeline",!0).classed("crisp",!0)}-1!==eh.indexOf("marker")&&_.insert("circle",":first-child").attr({cx:em+("right"!==ei.side?ep:-ep),cy:el,r:ep,fill:eg}).classed("spikeline",!0)}if($){var ex,e_,ew,eT,ek=o.vLinePoint;et=ek&&ek.xa,ei=ek&&ek.ya,"cursor"===et.spikesnap?(ex=Z.pointerX,e_=Z.pointerY):(ex=et._offset+ek.x,e_=ei._offset+ek.y);var eA=1.5>N.readability(ek.color,ee)?en.contrast(ee):ek.color,eS=et.spikemode,eM=et.spikethickness,eC=et.spikecolor||eA,eE=eo.getPxPosition(i,et);if(-1!==eS.indexOf("toaxis")||-1!==eS.indexOf("across")){if(-1!==eS.indexOf("toaxis")&&(ew=eE,eT=e_),-1!==eS.indexOf("across")){var eL=et._counterDomainMin,eP=et._counterDomainMax;"free"===et.anchor&&(eL=Math.min(eL,et.position),eP=Math.max(eP,et.position)),ew=j.t+(1-eP)*j.h,eT=j.t+(1-eL)*j.h}_.insert("line",":first-child").attr({x1:ex,x2:ex,y1:ew,y2:eT,"stroke-width":eM,stroke:eC,"stroke-dasharray":er.dashStyle(et.spikedash,eM)}).classed("spikeline",!0).classed("crisp",!0),_.insert("line",":first-child").attr({x1:ex,x2:ex,y1:ew,y2:eT,"stroke-width":eM+2,stroke:ee}).classed("spikeline",!0).classed("crisp",!0)}-1!==eS.indexOf("marker")&&_.insert("circle",":first-child").attr({cx:ex,cy:eE-("top"!==et.side?eM:-eM),r:eM,fill:eC}).classed("spikeline",!0)}}}function hoverChanged(i,o,s){if(!s||s.length!==i._hoverdata.length)return!0;for(var _=s.length-1;_>=0;_--){var F=s[_],N=i._hoverdata[_];if(F.curveNumber!==N.curveNumber||String(F.pointNumber)!==String(N.pointNumber)||String(F.pointNumbers)!==String(N.pointNumbers))return!0}return!1}function spikesChanged(i,o){return!o||o.vLinePoint!==i._spikepoints.vLinePoint||o.hLinePoint!==i._spikepoints.hLinePoint}function plainText(i,o){return ee.plainText(i||"",{len:o,allowedTags:["br","sub","sup","b","i","em"]})}function orderRangePoints(i,o){for(var s=o.charAt(0),_=[],F=[],N=[],j=0;j<i.length;j++){var Z=i[j];es.traceIs(Z.trace,"bar-like")||es.traceIs(Z.trace,"box-violin")?N.push(Z):Z.trace[s+"period"]?F.push(Z):_.push(Z)}return _.concat(F).concat(N)}function getCoord(i,o,s){var _=o[i+"a"],F=o[i+"Val"],N=o.cd[0];if("category"===_.type||"multicategory"===_.type)F=_._categoriesMap[F];else if("date"===_.type){var j=o.trace[i+"periodalignment"];if(j){var Z=o.cd[o.index],X=Z[i+"Start"];void 0===X&&(X=Z[i]);var $=Z[i+"End"];void 0===$&&($=Z[i]);var ee=$-X;"end"===j?F+=ee:"middle"===j&&(F+=ee/2)}F=_.d2c(F)}return N&&N.t&&N.t.posLetter===_._id&&("group"===s.boxmode||"group"===s.violinmode)&&(F+=N.t.dPos),F}function getTopOffset(i){return i.offsetTop+i.clientTop}function getLeftOffset(i){return i.offsetLeft+i.clientLeft}function getBoundingClientRect(i,o){var s=i._fullLayout,_=o.getBoundingClientRect(),F=_.left,N=_.top,Z=F+_.width,X=N+_.height,$=j.apply3DTransform(s._invTransform)(F,N),ee=j.apply3DTransform(s._invTransform)(Z,X),et=$[0],er=$[1],en=ee[0],ei=ee[1];return{x:et,y:er,width:en-et,height:ei-er,top:Math.min(er,ei),left:Math.min(et,en),right:Math.max(et,en),bottom:Math.max(er,ei)}}},38048:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(23469).isUnifiedHover;i.exports=function(i,o,s,j){j=j||{};var Z=o.legend;function inheritFontAttr(i){j.font[i]||(j.font[i]=Z?o.legend.font[i]:o.font[i])}o&&N(o.hovermode)&&(j.font||(j.font={}),inheritFontAttr("size"),inheritFontAttr("family"),inheritFontAttr("color"),Z?(j.bgcolor||(j.bgcolor=F.combine(o.legend.bgcolor,o.paper_bgcolor)),j.bordercolor||(j.bordercolor=o.legend.bordercolor)):j.bgcolor||(j.bgcolor=o.paper_bgcolor)),s("hoverlabel.bgcolor",j.bgcolor),s("hoverlabel.bordercolor",j.bordercolor),s("hoverlabel.namelength",j.namelength),_.coerceFont(s,"hoverlabel.font",j.font),s("hoverlabel.align",j.align)}},98212:function(i,o,s){"use strict";var _=s(71828),F=s(528);i.exports=function(i,o){function coerce(s,N){return void 0!==o[s]?o[s]:_.coerce(i,o,F,s,N)}return coerce("clickmode"),coerce("hovermode")}},30211:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(28569),j=s(23469),Z=s(528),X=s(88335);function loneUnhover(i){var o=F.isD3Selection(i)?i:_.select(i);o.selectAll("g.hovertext").remove(),o.selectAll(".spikeline").remove()}function castHoverOption(i,o,s){return F.castOption(i,o,"hoverlabel."+s)}function castHoverinfo(i,o,s){function _coerce(s){return F.coerceHoverinfo({hoverinfo:s},{_module:i._module},o)}return F.castOption(i,s,"hoverinfo",_coerce)}i.exports={moduleType:"component",name:"fx",constants:s(26675),schema:{layout:Z},attributes:s(77914),layoutAttributes:Z,supplyLayoutGlobalDefaults:s(22774),supplyDefaults:s(54268),supplyLayoutDefaults:s(34938),calc:s(30732),getDistanceFunction:j.getDistanceFunction,getClosest:j.getClosest,inbox:j.inbox,quadrature:j.quadrature,appendArrayPointValue:j.appendArrayPointValue,castHoverOption:castHoverOption,castHoverinfo:castHoverinfo,hover:X.hover,unhover:N.unhover,loneHover:X.loneHover,loneUnhover:loneUnhover,click:s(75914)}},528:function(i,o,s){"use strict";var _=s(26675),F=s(41940),N=F({editType:"none"});N.family.dflt=_.HOVERFONT,N.size.dflt=_.HOVERFONTSIZE,i.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:N,grouptitlefont:F({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(i,o,s){"use strict";var _=s(71828),F=s(528),N=s(98212),j=s(38048);i.exports=function(i,o){function coerce(s,N){return _.coerce(i,o,F,s,N)}N(i,o)&&(coerce("hoverdistance"),coerce("spikedistance")),"select"===coerce("dragmode")&&coerce("selectdirection");var s=o._has("mapbox"),Z=o._has("geo"),X=o._basePlotModules.length;"zoom"===o.dragmode&&((s||Z)&&1===X||s&&Z&&2===X)&&(o.dragmode="pan"),j(i,o,coerce),_.coerceFont(coerce,"hoverlabel.grouptitlefont",o.hoverlabel.font)}},22774:function(i,o,s){"use strict";var _=s(71828),F=s(38048),N=s(528);i.exports=function(i,o){function coerce(s,F){return _.coerce(i,o,N,s,F)}F(i,o,coerce)}},83312:function(i,o,s){"use strict";var _=s(71828),F=s(30587).counter,N=s(27670).Y,j=s(85555).idRegex,Z=s(44467),X={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[F("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[j.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[j.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:N({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function getAxes(i,o,s){var _=o[s+"axes"],F=Object.keys((i._splomAxes||{})[s]||{});return Array.isArray(_)?_:F.length?F:void 0}function sizeDefaults(i,o){var s,F,N,j,$=i.grid||{},ee=getAxes(o,$,"x"),et=getAxes(o,$,"y");if(i.grid||ee||et){var er=Array.isArray($.subplots)&&Array.isArray($.subplots[0]),en=Array.isArray(ee),ei=Array.isArray(et),eo=en&&ee!==$.xaxes&&ei&&et!==$.yaxes;er?(s=$.subplots.length,F=$.subplots[0].length):(ei&&(s=et.length),en&&(F=ee.length));var es=Z.newContainer(o,"grid"),el=coerce("rows",s),ec=coerce("columns",F);if(!(el*ec>1)){delete o.grid;return}er||en||ei||"independent"!==coerce("pattern")||(er=!0),es._hasSubplotGrid=er;var eu=coerce("roworder"),ef=er?.2:.1,ed=er?.3:.1;eo&&o._splomGridDflt&&(N=o._splomGridDflt.xside,j=o._splomGridDflt.yside),es._domains={x:fillGridPositions("x",coerce,ef,N,ec),y:fillGridPositions("y",coerce,ed,j,el,"top to bottom"===eu)}}function coerce(i,o){return _.coerce($,es,X,i,o)}}function fillGridPositions(i,o,s,_,F,N){var j=o(i+"gap",s),Z=o("domain."+i);o(i+"side",_);for(var X=Array(F),$=Z[0],ee=(Z[1]-$)/(F-j),et=ee*(1-j),er=0;er<F;er++){var en=$+ee*er;X[N?F-1-er:er]=[en,en+et]}return X}function contentDefaults(i,o){var s=o.grid;if(s&&s._domains){var _=i.grid||{},F=o._subplots,N=s._hasSubplotGrid,j=s.rows,Z=s.columns,X="independent"===s.pattern,$=s._axisMap={};if(N){var ee=_.subplots||[];eg=s.subplots=Array(j);var et=1;for(eu=0;eu<j;eu++){var er=eg[eu]=Array(Z),en=ee[eu]||[];for(ef=0;ef<Z;ef++)if(X?(ep=1===et?"xy":"x"+et+"y"+et,et++):ep=en[ef],er[ef]="",-1!==F.cartesian.indexOf(ep)){if(em=ep.indexOf("y"),ed=ep.slice(0,em),eh=ep.slice(em),void 0!==$[ed]&&$[ed]!==ef||void 0!==$[eh]&&$[eh]!==eu)continue;er[ef]=ep,$[ed]=ef,$[eh]=eu}}}else{var ei=getAxes(o,_,"x"),eo=getAxes(o,_,"y");s.xaxes=fillGridAxes(ei,F.xaxis,Z,$,"x"),s.yaxes=fillGridAxes(eo,F.yaxis,j,$,"y")}var es=s._anchors={},el="top to bottom"===s.roworder;for(var ec in $){var eu,ef,ed,eh,ep,eg,em,ey,ev,ex,e_=ec.charAt(0),ew=s[e_+"side"];if(ew.length<8)es[ec]="free";else if("x"===e_){if("t"===ew.charAt(0)===el?(ey=0,ev=1,ex=j):(ey=j-1,ev=-1,ex=-1),N){var eT=$[ec];for(eu=ey;eu!==ex;eu+=ev)if((ep=eg[eu][eT])&&(em=ep.indexOf("y"),ep.slice(0,em)===ec)){es[ec]=ep.slice(em);break}}else for(eu=ey;eu!==ex;eu+=ev)if(eh=s.yaxes[eu],-1!==F.cartesian.indexOf(ec+eh)){es[ec]=eh;break}}else if("l"===ew.charAt(0)?(ey=0,ev=1,ex=Z):(ey=Z-1,ev=-1,ex=-1),N){var ek=$[ec];for(eu=ey;eu!==ex;eu+=ev)if((ep=eg[ek][eu])&&(em=ep.indexOf("y"),ep.slice(em)===ec)){es[ec]=ep.slice(0,em);break}}else for(eu=ey;eu!==ex;eu+=ev)if(ed=s.xaxes[eu],-1!==F.cartesian.indexOf(ed+ec)){es[ec]=ed;break}}}}function fillGridAxes(i,o,s,_,F){var N,j=Array(s);function fillOneAxis(i,s){-1!==o.indexOf(s)&&void 0===_[s]?(j[i]=s,_[s]=i):j[i]=""}if(Array.isArray(i))for(N=0;N<s;N++)fillOneAxis(N,i[N]);else for(fillOneAxis(0,F),N=1;N<s;N++)fillOneAxis(N,F+(N+1));return j}i.exports={moduleType:"component",name:"grid",schema:{layout:{grid:X}},layoutAttributes:X,sizeDefaults:sizeDefaults,contentDefaults:contentDefaults}},69819:function(i,o,s){"use strict";var _=s(85555),F=s(44467).templatedArray;s(24695),i.exports=F("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",_.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",_.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(i,o,s){"use strict";var _=s(92770),F=s(58163);i.exports=function(i,o,s,N){o=o||{};var j,Z,X="log"===s&&"linear"===o.type,$="linear"===s&&"log"===o.type;if(X||$){for(var ee=i._fullLayout.images,et=o._id.charAt(0),er=0;er<ee.length;er++)if(j=ee[er],Z="images["+er+"].",j[et+"ref"]===o._id){var en=j[et],ei=j["size"+et],eo=null,es=null;if(X){var el=ei/Math.pow(10,eo=F(en,o.range))/2;es=2*Math.log(el+Math.sqrt(1+el*el))/Math.LN10}else es=(eo=Math.pow(10,en))*(Math.pow(10,ei/2)-Math.pow(10,-ei/2));_(eo)?_(es)||(es=null):(eo=null,es=null),N(Z+et,eo),N(Z+"size"+et,es)}}}},81603:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(85501),j=s(69819);function imageDefaults(i,o,s){function coerce(s,F){return _.coerce(i,o,j,s,F)}var N=coerce("source");if(!coerce("visible",!!N))return o;coerce("layer"),coerce("xanchor"),coerce("yanchor"),coerce("sizex"),coerce("sizey"),coerce("sizing"),coerce("opacity");for(var Z={_fullLayout:s},X=["x","y"],$=0;$<2;$++){var ee=X[$],et=F.coerceRef(i,o,Z,ee,"paper",void 0);"paper"!==et&&F.getFromId(Z,et)._imgIndices.push(o._index),F.coercePosition(o,Z,coerce,et,ee,0)}return o}i.exports=function(i,o){N(i,o,{name:"images",handleItemDefaults:imageDefaults})}},80750:function(i,o,s){"use strict";var _=s(39898),F=s(91424),N=s(89298),j=s(41675),Z=s(77922);i.exports=function(i){var o,s,X=i._fullLayout,$=[],ee={},et=[];for(s=0;s<X.images.length;s++){var er=X.images[s];if(er.visible){if("below"===er.layer&&"paper"!==er.xref&&"paper"!==er.yref){o=j.ref2id(er.xref)+j.ref2id(er.yref);var en=X._plots[o];if(!en){et.push(er);continue}en.mainplot&&(o=en.mainplot.id),ee[o]||(ee[o]=[]),ee[o].push(er)}else"above"===er.layer?$.push(er):et.push(er)}}var ei={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function setImage(o){var s=_.select(this);if(this._imgSrc!==o.source){if(s.attr("xmlns",Z.svg),o.source&&"data:"===o.source.slice(0,5))s.attr("xlink:href",o.source),this._imgSrc=o.source;else{var F=new Promise((function(i){var _=new Image;function errorHandler(){s.remove(),i()}this.img=_,_.setAttribute("crossOrigin","anonymous"),_.onerror=errorHandler,_.onload=function(){var o=document.createElement("canvas");o.width=this.width,o.height=this.height,o.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var _=o.toDataURL("image/png");s.attr("xlink:href",_),i()},s.on("error",errorHandler),_.src=o.source,this._imgSrc=o.source}).bind(this));i._promises.push(F)}}}function applyAttributes(o){var s,j,Z,$,ee=_.select(this),et=N.getFromId(i,o.xref),er=N.getFromId(i,o.yref),en="domain"===N.getRefType(o.xref),eo="domain"===N.getRefType(o.yref),es=X._size;s=void 0!==et?"string"==typeof o.xref&&en?et._length*o.sizex:Math.abs(et.l2p(o.sizex)-et.l2p(0)):o.sizex*es.w,j=void 0!==er?"string"==typeof o.yref&&eo?er._length*o.sizey:Math.abs(er.l2p(o.sizey)-er.l2p(0)):o.sizey*es.h;var el=s*ei.x[o.xanchor].offset,ec=j*ei.y[o.yanchor].offset,eu=ei.x[o.xanchor].sizing+ei.y[o.yanchor].sizing;switch(Z=(void 0!==et?"string"==typeof o.xref&&en?et._length*o.x+et._offset:et.r2p(o.x)+et._offset:o.x*es.w+es.l)+el,$=(void 0!==er?"string"==typeof o.yref&&eo?er._length*(1-o.y)+er._offset:er.r2p(o.y)+er._offset:es.h-o.y*es.h+es.t)+ec,o.sizing){case"fill":eu+=" slice";break;case"stretch":eu="none"}ee.attr({x:Z,y:$,width:s,height:j,preserveAspectRatio:eu,opacity:o.opacity});var ef=(et&&"domain"!==N.getRefType(o.xref)?et._id:"")+(er&&"domain"!==N.getRefType(o.yref)?er._id:"");F.setClipUrl(ee,ef?"clip"+X._uid+ef:null,i)}var eo=X._imageLowerLayer.selectAll("image").data(et),es=X._imageUpperLayer.selectAll("image").data($);eo.enter().append("image"),es.enter().append("image"),eo.exit().remove(),es.exit().remove(),eo.each(function(i){setImage.bind(this)(i),applyAttributes.bind(this)(i)}),es.each(function(i){setImage.bind(this)(i),applyAttributes.bind(this)(i)});var el=Object.keys(X._plots);for(s=0;s<el.length;s++){o=el[s];var ec=X._plots[o];if(ec.imagelayer){var eu=ec.imagelayer.selectAll("image").data(ee[o]||[]);eu.enter().append("image"),eu.exit().remove(),eu.each(function(i){setImage.bind(this)(i),applyAttributes.bind(this)(i)})}}}},68804:function(i,o,s){"use strict";i.exports={moduleType:"component",name:"images",layoutAttributes:s(69819),supplyLayoutDefaults:s(81603),includeBasePlot:s(76325)("images"),draw:s(80750),convertCoords:s(75378)}},33030:function(i,o,s){"use strict";var _=s(41940),F=s(22399);i.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:F.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:_({editType:"legend"}),grouptitlefont:_({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:_({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(i){"use strict";i.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=s(44467),j=s(9012),Z=s(33030),X=s(10820),$=s(10130);function groupDefaults(i,o,s,ee){var et,er,en,ei,eo=o[i]||{},es=N.newContainer(s,i);function coerce(i,o){return F.coerce(eo,es,Z,i,o)}var el=F.coerceFont(coerce,"font",s.font);if(coerce("bgcolor",s.paper_bgcolor),coerce("bordercolor"),coerce("visible")){for(var traceCoerce=function(i,o){var s=et._input,_=et;return F.coerce(s,_,j,i,o)},ec=s.font||{},eu=F.coerceFont(coerce,"grouptitlefont",F.extendFlat({},ec,{size:Math.round(1.1*ec.size)})),ef=0,ed=!1,eh="normal",ep=(s.shapes||[]).filter(function(i){return i.showlegend}),eg=ee.concat(ep).filter(function(o){return i===(o.legend||"legend")}),em=0;em<eg.length;em++)if((et=eg[em]).visible){var ey=et._isShape;(et.showlegend||et._dfltShowLegend&&!(et._module&&et._module.attributes&&et._module.attributes.showlegend&&!1===et._module.attributes.showlegend.dflt))&&(ef++,et.showlegend&&(ed=!0,(!ey&&_.traceIs(et,"pie-like")||!0===et._input.showlegend)&&ef++),F.coerceFont(traceCoerce,"legendgrouptitle.font",eu)),(!ey&&_.traceIs(et,"bar")&&"stack"===s.barmode||-1!==["tonextx","tonexty"].indexOf(et.fill))&&(eh=$.isGrouped({traceorder:eh})?"grouped+reversed":"reversed"),void 0!==et.legendgroup&&""!==et.legendgroup&&(eh=$.isReversed({traceorder:eh})?"reversed+grouped":"grouped")}var ev=F.coerce(o,s,X,"showlegend",ed&&ef>("legend"===i?1:0));if(!1===ev&&(s[i]=void 0),(!1!==ev||eo.uirevision)&&(coerce("uirevision",s.uirevision),!1!==ev)){coerce("borderwidth");var ex=coerce("orientation"),e_=coerce("yref"),ew=coerce("xref"),eT="h"===ex,ek="paper"===e_,eA="paper"===ew,eS="left";if(eT?(er=0,_.getComponentMethod("rangeslider","isVisible")(o.xaxis)?ek?(en=1.1,ei="bottom"):(en=1,ei="top"):ek?(en=-.1,ei="top"):(en=0,ei="bottom")):(en=1,ei="auto",eA?er=1.02:(er=1,eS="right")),F.coerce(eo,es,{x:{valType:"number",editType:"legend",min:eA?-2:0,max:eA?3:1,dflt:er}},"x"),F.coerce(eo,es,{y:{valType:"number",editType:"legend",min:ek?-2:0,max:ek?3:1,dflt:en}},"y"),coerce("traceorder",eh),$.isGrouped(s[i])&&coerce("tracegroupgap"),coerce("entrywidth"),coerce("entrywidthmode"),coerce("itemsizing"),coerce("itemwidth"),coerce("itemclick"),coerce("itemdoubleclick"),coerce("groupclick"),coerce("xanchor",eS),coerce("yanchor",ei),coerce("valign"),F.noneOrAll(eo,es,["x","y"]),coerce("title.text")){coerce("title.side",eT?"left":"top");var eM=F.extendFlat({},el,{size:F.bigFont(el.size)});F.coerceFont(coerce,"title.font",eM)}}}}i.exports=function(i,o,s){var _,N=s.slice(),j=o.shapes;if(j)for(_=0;_<j.length;_++){var Z=j[_];if(Z.showlegend){var X={_input:Z._input,visible:Z.visible,showlegend:Z.showlegend,legend:Z.legend};N.push(X)}}var $=["legend"];for(_=0;_<N.length;_++)F.pushUnique($,N[_].legend);for(_=0,o._legends=[];_<$.length;_++){var ee=$[_];groupDefaults(ee,i,o,N),o[ee]&&o[ee].visible&&(o[ee]._id=ee),o._legends.push(ee)}}},43969:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(74875),j=s(73972),Z=s(11086),X=s(28569),$=s(91424),ee=s(7901),et=s(63893),er=s(85167),en=s(14928),ei=s(18783),eo=ei.LINE_SPACING,es=ei.FROM_TL,el=ei.FROM_BR,ec=s(82424),eu=s(53630),ef=s(10130),ed=/^legend[0-9]*$/;function horizontalAlignTitle(i,o,s){if("top center"===o.title.side||"top right"===o.title.side){var _=o.title.font.size*eo,F=0,N=i.node(),j=$.bBox(N).width;"top center"===o.title.side?F=.5*(o._width-2*s-2*en.titlePad-j):"top right"===o.title.side&&(F=o._width-2*s-2*en.titlePad-j),et.positionText(i,s+en.titlePad+F,s+_)}}function drawOne(i,o){var s,Z,et,er,ei=o||{},eo=i._fullLayout,el=getId(ei),ef=ei._inHover;if(ef?(Z=ei.layer,s="hover"):(Z=eo._infolayer,s=el),Z){if(s+=eo._uid,i._legendMouseDownTime||(i._legendMouseDownTime=0),ef){if(!ei.entries)return;et=ec(ei.entries,ei)}else{for(var ed=(i.calcdata||[]).slice(),eh=eo.shapes,ep=0;ep<eh.length;ep++){var eg=eh[ep];if(eg.showlegend){var em={_isShape:!0,_fullInput:eg,index:eg._index,name:eg.name||eg.label.text||"shape "+eg._index,legend:eg.legend,legendgroup:eg.legendgroup,legendgrouptitle:eg.legendgrouptitle,legendrank:eg.legendrank,legendwidth:eg.legendwidth,showlegend:eg.showlegend,visible:eg.visible,opacity:eg.opacity,mode:"line"===eg.type?"lines":"markers",line:eg.line,marker:{line:eg.line,color:eg.fillcolor,size:12,symbol:"rect"===eg.type?"square":"circle"===eg.type?"circle":"hexagon2"}};ed.push([{trace:em}])}}et=eo.showlegend&&ec(ed,ei,eo._legends.length>1)}var ey=eo.hiddenlabels||[];if(!ef&&(!eo.showlegend||!et.length))return Z.selectAll("."+el).remove(),eo._topdefs.select("#"+s).remove(),N.autoMargin(i,el);var ev=F.ensureSingle(Z,"g",el,function(i){ef||i.attr("pointer-events","all")}),ex=F.ensureSingleById(eo._topdefs,"clipPath",s,function(i){i.append("rect")}),e_=F.ensureSingle(ev,"rect","bg",function(i){i.attr("shape-rendering","crispEdges")});e_.call(ee.stroke,ei.bordercolor).call(ee.fill,ei.bgcolor).style("stroke-width",ei.borderwidth+"px");var ew=F.ensureSingle(ev,"g","scrollbox"),eT=ei.title;ei._titleWidth=0,ei._titleHeight=0,eT.text?((er=F.ensureSingle(ew,"text",el+"titletext")).attr("text-anchor","start").call($.font,eT.font).text(eT.text),textLayout(er,ew,i,ei,1)):ew.selectAll("."+el+"titletext").remove();var ek=F.ensureSingle(ev,"rect","scrollbar",function(i){i.attr(en.scrollBarEnterAttrs).call(ee.fill,en.scrollBarColor)}),eA=ew.selectAll("g.groups").data(et);eA.enter().append("g").attr("class","groups"),eA.exit().remove();var eS=eA.selectAll("g.traces").data(F.identity);eS.enter().append("g").attr("class","traces"),eS.exit().remove(),eS.style("opacity",function(i){var o=i[0].trace;return j.traceIs(o,"pie-like")?-1!==ey.indexOf(i[0].label)?.5:1:"legendonly"===o.visible?.5:1}).each(function(){_.select(this).call(drawTexts,i,ei)}).call(eu,i,ei).each(function(){ef||_.select(this).call(setupTraceToggle,i,el)}),F.syncOrAsync([N.previousPromises,function(){return computeLegendDimensions(i,eA,eS,ei)},function(){var o,N,ee,et,ec=eo._size,eu=ei.borderwidth,ed="paper"===ei.xref,eh="paper"===ei.yref;if(eT.text&&horizontalAlignTitle(er,ei,eu),!ef){if(expandMargin(i,el,ey=ed?ec.l+ec.w*ei.x-es[getXanchor(ei)]*ei._width:eo.width*ei.x-es[getXanchor(ei)]*ei._width,eA=eh?ec.t+ec.h*(1-ei.y)-es[getYanchor(ei)]*ei._effHeight:eo.height*(1-ei.y)-es[getYanchor(ei)]*ei._effHeight))return;if(eo.margin.autoexpand){var ep=ey,eg=eA;ey=ed?F.constrain(ey,0,eo.width-ei._width):ep,eA=eh?F.constrain(eA,0,eo.height-ei._effHeight):eg,ey!==ep&&F.log("Constrain "+el+".x to make legend fit inside graph"),eA!==eg&&F.log("Constrain "+el+".y to make legend fit inside graph")}$.setTranslate(ev,ey,eA)}if(ek.on(".drag",null),ev.on("wheel",null),ef||ei._height<=ei._maxHeight||i._context.staticPlot){var em=ei._effHeight;ef&&(em=ei._height),e_.attr({width:ei._width-eu,height:em-eu,x:eu/2,y:eu/2}),$.setTranslate(ew,0,0),ex.select("rect").attr({width:ei._width-2*eu,height:em-2*eu,x:eu,y:eu}),$.setClipUrl(ew,s,i),$.setRect(ek,0,0,0,0),delete ei._scrollY}else{var ey,eA,eS,eM,eC,eE=Math.max(en.scrollBarMinHeight,ei._effHeight*ei._effHeight/ei._height),eL=ei._effHeight-eE-2*en.scrollBarMargin,eP=ei._height-ei._effHeight,eI=eL/eP,eO=Math.min(ei._scrollY||0,eP);e_.attr({width:ei._width-2*eu+en.scrollBarWidth+en.scrollBarMargin,height:ei._effHeight-eu,x:eu/2,y:eu/2}),ex.select("rect").attr({width:ei._width-2*eu+en.scrollBarWidth+en.scrollBarMargin,height:ei._effHeight-2*eu,x:eu,y:eu+eO}),$.setClipUrl(ew,s,i),scrollHandler(eO,eE,eI),ev.on("wheel",function(){scrollHandler(eO=F.constrain(ei._scrollY+_.event.deltaY/eL*eP,0,eP),eE,eI),0!==eO&&eO!==eP&&_.event.preventDefault()});var getScrollBarDragY=function(i,o,s){var _=(s-o)/eI+i;return F.constrain(_,0,eP)},getNaturalDragY=function(i,o,s){var _=(o-s)/eI+i;return F.constrain(_,0,eP)},eD=_.behavior.drag().on("dragstart",function(){var i=_.event.sourceEvent;eS="touchstart"===i.type?i.changedTouches[0].clientY:i.clientY,eC=eO}).on("drag",function(){var i=_.event.sourceEvent;2===i.buttons||i.ctrlKey||(eM="touchmove"===i.type?i.changedTouches[0].clientY:i.clientY,scrollHandler(eO=getScrollBarDragY(eC,eS,eM),eE,eI))});ek.call(eD);var eR=_.behavior.drag().on("dragstart",function(){var i=_.event.sourceEvent;"touchstart"===i.type&&(eS=i.changedTouches[0].clientY,eC=eO)}).on("drag",function(){var i=_.event.sourceEvent;"touchmove"===i.type&&(eM=i.changedTouches[0].clientY,scrollHandler(eO=getNaturalDragY(eC,eS,eM),eE,eI))});ew.call(eR)}function scrollHandler(o,s,_){ei._scrollY=i._fullLayout[el]._scrollY=o,$.setTranslate(ew,0,-o),$.setRect(ek,ei._width,en.scrollBarMargin+o*_,en.scrollBarWidth,s),ex.select("rect").attr("y",eu+o)}i._context.edits.legendPosition&&(ev.classed("cursor-move",!0),X.init({element:ev.node(),gd:i,prepFn:function(){var i=$.getTranslate(ev);ee=i.x,et=i.y},moveFn:function(i,s){var _=ee+i,F=et+s;$.setTranslate(ev,_,F),o=X.align(_,ei._width,ec.l,ec.l+ec.w,ei.xanchor),N=X.align(F+ei._height,-ei._height,ec.t+ec.h,ec.t,ei.yanchor)},doneFn:function(){if(void 0!==o&&void 0!==N){var s={};s[el+".x"]=o,s[el+".y"]=N,j.call("_guiRelayout",i,s)}},clickFn:function(o,s){var _=Z.selectAll("g.traces").filter(function(){var i=this.getBoundingClientRect();return s.clientX>=i.left&&s.clientX<=i.right&&s.clientY>=i.top&&s.clientY<=i.bottom});_.size()>0&&clickOrDoubleClick(i,ev,_,o,s)}}))}],i)}}function getTraceWidth(i,o,s){var _=i[0],F=_.width,N=o.entrywidthmode,j=_.trace.legendwidth||o.entrywidth;return"fraction"===N?o._maxWidth*j:s+(j||F)}function clickOrDoubleClick(i,o,s,_,F){var N=s.data()[0][0].trace,X={event:F,node:s.node(),curveNumber:N.index,expandedIndex:N._expandedIndex,data:i.data,layout:i.layout,frames:i._transitionData._frames,config:i._context,fullData:i._fullData,fullLayout:i._fullLayout};N._group&&(X.group=N._group),j.traceIs(N,"pie-like")&&(X.label=s.datum()[0].label);var $=Z.triggerHandler(i,"plotly_legendclick",X);if(1===_){if(!1===$)return;o._clickTimeout=setTimeout(function(){i._fullLayout&&er(s,i,_)},i._context.doubleClickDelay)}else 2===_&&(o._clickTimeout&&clearTimeout(o._clickTimeout),i._legendMouseDownTime=0,!1!==Z.triggerHandler(i,"plotly_legenddoubleclick",X)&&!1!==$&&er(s,i,_))}function drawTexts(i,o,s){var _,N,Z=getId(s),X=i.data()[0][0],ee=X.trace,er=j.traceIs(ee,"pie-like"),ei=!s._inHover&&o._context.edits.legendText&&!er,eo=s._maxNameLength;X.groupTitle?(_=X.groupTitle.text,N=X.groupTitle.font):(N=s.font,s.entries?_=X.text:(_=er?X.label:ee.name,ee._meta&&(_=F.templateString(_,ee._meta))));var es=F.ensureSingle(i,"text",Z+"text");es.attr("text-anchor","start").call($.font,N).text(ei?ensureLength(_,eo):_);var el=s.itemwidth+2*en.itemGap;et.positionText(es,el,0),ei?es.call(et.makeEditable,{gd:o,text:_}).call(textLayout,i,o,s).on("edit",function(_){this.text(ensureLength(_,eo)).call(textLayout,i,o,s);var N=X.trace._fullInput||{},Z={};if(j.hasTransform(N,"groupby")){var $=j.getTransformIndices(N,"groupby"),et=$[$.length-1],er=F.keyedContainer(N,"transforms["+et+"].styles","target","value.name");er.set(X.trace._group,_),Z=er.constructUpdate()}else Z.name=_;return N._isShape?j.call("_guiRelayout",o,"shapes["+ee.index+"].name",Z.name):j.call("_guiRestyle",o,Z,ee.index)}):textLayout(es,i,o,s)}function ensureLength(i,o){var s=Math.max(4,o);if(i&&i.trim().length>=s/2)return i;i=i||"";for(var _=s-i.length;_>0;_--)i+=" ";return i}function setupTraceToggle(i,o,s){var N,j=o._context.doubleClickDelay,Z=1,X=F.ensureSingle(i,"rect",s+"toggle",function(i){o._context.staticPlot||i.style("cursor","pointer").attr("pointer-events","all"),i.call(ee.fill,"rgba(0,0,0,0)")});o._context.staticPlot||(X.on("mousedown",function(){(N=new Date().getTime())-o._legendMouseDownTime<j?Z+=1:(Z=1,o._legendMouseDownTime=N)}),X.on("mouseup",function(){if(!o._dragged&&!o._editing){var F=o._fullLayout[s];new Date().getTime()-o._legendMouseDownTime>j&&(Z=Math.max(Z-1,1)),clickOrDoubleClick(o,F,i,Z,_.event)}}))}function textLayout(i,o,s,_,F){_._inHover&&i.attr("data-notex",!0),et.convertToTspans(i,s,function(){computeTextDimensions(o,s,_,F)})}function computeTextDimensions(i,o,s,_){var F,N,j=i.data()[0][0];if(!s._inHover&&j&&!j.trace.showlegend){i.remove();return}var Z=i.select("g[class*=math-group]"),X=Z.node(),ee=getId(s);s||(s=o._fullLayout[ee]);var er=s.borderwidth,ei=(1===_?s.title.font:j.groupTitle?j.groupTitle.font:s.font).size*eo;if(X){var es=$.bBox(X);F=es.height,N=es.width,1===_?$.setTranslate(Z,er,er+.75*F):$.setTranslate(Z,0,.25*F)}else{var el=i.select("."+ee+(1===_?"title":"")+"text"),ec=et.lineCount(el),eu=el.node();if(F=ei*ec,N=eu?$.bBox(eu).width:0,1===_)"left"===s.title.side&&(N+=2*en.itemGap),et.positionText(el,er+en.titlePad,er+ei);else{var ef=2*en.itemGap+s.itemwidth;j.groupTitle&&(ef=en.itemGap,N-=s.itemwidth),et.positionText(el,ef,-ei*((ec-1)/2-.3))}}1===_?(s._titleWidth=N,s._titleHeight=F):(j.lineHeight=ei,j.height=Math.max(F,16)+3,j.width=N)}function getTitleSize(i){var o=0,s=0,_=i.title.side;return _&&(-1!==_.indexOf("left")&&(o=i._titleWidth),-1!==_.indexOf("top")&&(s=i._titleHeight)),[o,s]}function computeLegendDimensions(i,o,s,F){var N=i._fullLayout,j=getId(F);F||(F=N[j]);var Z=N._size,X=ef.isVertical(F),ee=ef.isGrouped(F),et="fraction"===F.entrywidthmode,er=F.borderwidth,ei=2*er,eo=en.itemGap,es=F.itemwidth+2*eo,el=2*(er+eo),ec=getYanchor(F),eu=F.y<0||0===F.y&&"top"===ec,ed=F.y>1||1===F.y&&"bottom"===ec,eh=F.tracegroupgap,ep={};F._maxHeight=Math.max(eu||ed?N.height/2:Z.h,30);var eg=0;F._width=0,F._height=0;var em=getTitleSize(F);if(X)s.each(function(i){var o=i[0].height;$.setTranslate(this,er+em[0],er+em[1]+F._height+o/2+eo),F._height+=o,F._width=Math.max(F._width,i[0].width)}),eg=es+F._width,F._width+=eo+es+ei,F._height+=el,ee&&(o.each(function(i,o){$.setTranslate(this,0,o*F.tracegroupgap)}),F._height+=(F._lgroupsLength-1)*F.tracegroupgap);else{var ey=getXanchor(F),ev=F.x<0||0===F.x&&"right"===ey,ex=F.x>1||1===F.x&&"left"===ey,e_=ed||eu,ew=N.width/2;F._maxWidth=Math.max(ev?e_&&"left"===ey?Z.l+Z.w:ew:ex?e_&&"right"===ey?Z.r+Z.w:ew:Z.w,2*es);var eT=0,ek=0;s.each(function(i){var o=getTraceWidth(i,F,es);eT=Math.max(eT,o),ek+=o}),eg=null;var eA=0;if(ee){var eS=0,eM=0,eC=0;o.each(function(){var i=0,o=0;_.select(this).selectAll("g.traces").each(function(s){var _=getTraceWidth(s,F,es),N=s[0].height;$.setTranslate(this,em[0],em[1]+er+eo+N/2+o),o+=N,i=Math.max(i,_),ep[s[0].trace.legendgroup]=i});var s=i+eo;eM>0&&s+er+eM>F._maxWidth?(eA=Math.max(eA,eM),eM=0,eC+=eS+eh,eS=o):eS=Math.max(eS,o),$.setTranslate(this,eM,eC),eM+=s}),F._width=Math.max(eA,eM)+er,F._height=eC+eS+el}else{var eE=s.size(),eL=ek+ei+(eE-1)*eo<F._maxWidth,eP=0,eI=0,eO=0,eD=0;s.each(function(i){var o=i[0].height,s=getTraceWidth(i,F,es,ee),_=eL?s:eT;et||(_+=eo),_+er+eI-eo>=F._maxWidth&&(eA=Math.max(eA,eD),eI=0,eO+=eP,F._height+=eP,eP=0),$.setTranslate(this,em[0]+er+eI,em[1]+er+eO+o/2+eo),eD=eI+s+eo,eI+=_,eP=Math.max(eP,o)}),eL?(F._width=eI+ei,F._height=eP+el):(F._width=Math.max(eA,eD)+ei,F._height+=eP+el)}}F._width=Math.ceil(Math.max(F._width+em[0],F._titleWidth+2*(er+en.titlePad))),F._height=Math.ceil(Math.max(F._height+em[1],F._titleHeight+2*(er+en.itemGap))),F._effHeight=Math.min(F._height,F._maxHeight);var eR=i._context.edits,eB=eR.legendText||eR.legendPosition;s.each(function(i){var o=_.select(this).select("."+j+"toggle"),s=i[0].height,N=i[0].trace.legendgroup,Z=getTraceWidth(i,F,es);ee&&""!==N&&(Z=ep[N]);var er=eB?es:eg||Z;X||et||(er+=eo/2),$.setRect(o,0,-s/2,er,s)})}function expandMargin(i,o,s,_){var F=i._fullLayout,j=F[o],Z=getXanchor(j),X=getYanchor(j),$="paper"===j.xref,ee="paper"===j.yref;i._fullLayout._reservedMargin[o]={};var et=j.y<.5?"b":"t",er=j.x<.5?"l":"r",en={r:F.width-s,l:s+j._width,b:F.height-_,t:_+j._effHeight};if($&&ee)return N.autoMargin(i,o,{x:j.x,y:j.y,l:j._width*es[Z],r:j._width*el[Z],b:j._effHeight*el[X],t:j._effHeight*es[X]});$?i._fullLayout._reservedMargin[o][et]=en[et]:ee?i._fullLayout._reservedMargin[o][er]=en[er]:"v"===j.orientation?i._fullLayout._reservedMargin[o][er]=en[er]:i._fullLayout._reservedMargin[o][et]=en[et]}function getXanchor(i){return F.isRightAnchor(i)?"right":F.isCenterAnchor(i)?"center":"left"}function getYanchor(i){return F.isBottomAnchor(i)?"bottom":F.isMiddleAnchor(i)?"middle":"top"}function getId(i){return i._id||"legend"}i.exports=function(i,o){if(o)drawOne(i,o);else{var s=i._fullLayout,F=s._legends;s._infolayer.selectAll('[class^="legend"]').each(function(){var i=_.select(this),o=i.attr("class").split(" ")[0];o.match(ed)&&-1===F.indexOf(o)&&i.remove()});for(var N=0;N<F.length;N++){var j=F[N],Z=i._fullLayout[j];drawOne(i,Z)}}}},82424:function(i,o,s){"use strict";var _=s(73972),F=s(10130);i.exports=function(i,o,s){var N,j,Z=o._inHover,X=F.isGrouped(o),$=F.isReversed(o),ee={},et=[],er=!1,en={},ei=0,eo=0;function addOneItem(i,_,N){if(!1!==o.visible&&(!s||i===o._id)){if(""!==_&&F.isGrouped(o))-1===et.indexOf(_)?(et.push(_),er=!0,ee[_]=[N]):ee[_].push(N);else{var j="~~i"+ei;et.push(j),ee[j]=[N],ei++}}}for(N=0;N<i.length;N++){var es=i[N],el=es[0],ec=el.trace,eu=ec.legend,ef=ec.legendgroup;if(Z||ec.visible&&ec.showlegend){if(_.traceIs(ec,"pie-like"))for(en[ef]||(en[ef]={}),j=0;j<es.length;j++){var ed=es[j].label;en[ef][ed]||(addOneItem(eu,ef,{label:ed,color:es[j].color,i:es[j].i,trace:ec,pts:es[j].pts}),en[ef][ed]=!0,eo=Math.max(eo,(ed||"").length))}else addOneItem(eu,ef,el),eo=Math.max(eo,(ec.name||"").length)}}if(!et.length)return[];var eh=!er||!X,ep=[];for(N=0;N<et.length;N++){var eg=ee[et[N]];eh?ep.push(eg[0]):ep.push(eg)}for(eh&&(ep=[ep]),N=0;N<ep.length;N++){var em=1/0;for(j=0;j<ep[N].length;j++){var ey=ep[N][j].trace.legendrank;em>ey&&(em=ey)}ep[N][0]._groupMinRank=em,ep[N][0]._preGroupSort=N}var orderFn2=function(i,o){return i.trace.legendrank-o.trace.legendrank||i._preSort-o._preSort};for(ep.forEach(function(i,o){i[0]._preGroupSort=o}),ep.sort(function(i,o){return i[0]._groupMinRank-o[0]._groupMinRank||i[0]._preGroupSort-o[0]._preGroupSort}),N=0;N<ep.length;N++){ep[N].forEach(function(i,o){i._preSort=o}),ep[N].sort(orderFn2);var ev=ep[N][0].trace,ex=null;for(j=0;j<ep[N].length;j++){var e_=ep[N][j].trace.legendgrouptitle;if(e_&&e_.text){ex=e_,Z&&(e_.font=o._groupTitleFont);break}}if($&&ep[N].reverse(),ex){var ew=!1;for(j=0;j<ep[N].length;j++)if(_.traceIs(ep[N][j].trace,"pie-like")){ew=!0;break}ep[N].unshift({i:-1,groupTitle:ex,noClick:ew,trace:{showlegend:ev.showlegend,legendgroup:ev.legendgroup,visible:"toggleitem"===o.groupclick||ev.visible}})}for(j=0;j<ep[N].length;j++)ep[N][j]=[ep[N][j]]}return o._lgroupsLength=ep.length,o._maxNameLength=eo,ep}},85167:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=F.pushUnique,j=!0;i.exports=function(i,o,s){var Z=o._fullLayout;if(!o._dragged&&!o._editing){var X=Z.legend.itemclick,$=Z.legend.itemdoubleclick,ee=Z.legend.groupclick;if(1===s&&"toggle"===X&&"toggleothers"===$&&j&&o.data&&o._context.showTips&&F.notifier(F._(o,"Double-click on legend to isolate one trace"),"long"),j=!1,1===s?eL=X:2===s&&(eL=$),eL){var et="togglegroup"===ee,er=Z.hiddenlabels?Z.hiddenlabels.slice():[],en=i.data()[0][0];if(!en.groupTitle||!en.noClick){var ei=o._fullData,eo=(Z.shapes||[]).filter(function(i){return i.showlegend}),es=ei.concat(eo),el=en.trace;el._isShape&&(el=el._fullInput);var ec=el.legendgroup,eu={},ef=[],ed=[],eh=[],ep=(Z.shapes||[]).map(function(i){return i._input}),eg=!1,em=el.legend,ey=el._fullInput;if(!(ey&&ey._isShape)&&_.traceIs(el,"pie-like")){var ev=en.label,ex=er.indexOf(ev);if("toggle"===eL)-1===ex?er.push(ev):er.splice(ex,1);else if("toggleothers"===eL){var e_=-1!==ex,ew=[];for(eP=0;eP<o.calcdata.length;eP++){var eT=o.calcdata[eP];for(eI=0;eI<eT.length;eI++){var ek=eT[eI].label;em===eT[0].trace.legend&&ev!==ek&&(-1===er.indexOf(ek)&&(e_=!0),N(er,ek),ew.push(ek))}}if(!e_)for(var eA=0;eA<ew.length;eA++){var eS=er.indexOf(ew[eA]);-1!==eS&&er.splice(eS,1)}}_.call("_guiRelayout",o,"hiddenlabels",er)}else{var eM=ec&&ec.length,eC=[];if(eM)for(eP=0;eP<es.length;eP++)(eB=es[eP]).visible&&eB.legendgroup===ec&&eC.push(eP);if("toggle"===eL){switch(el.visible){case!0:eF="legendonly";break;case!1:eF=!1;break;case"legendonly":eF=!0}if(eM){if(et)for(eP=0;eP<es.length;eP++){var eE=es[eP];!1!==eE.visible&&eE.legendgroup===ec&&setVisibility(eE,eF)}else setVisibility(el,eF)}else setVisibility(el,eF)}else if("toggleothers"===eL){var eL,eP,eI,eO,eD,eR,eB,eF,ez,eN,ej,eV,eU,eH=!0;for(eP=0;eP<es.length;eP++)if(ez=(eU=es[eP])===el,ej=!0!==eU.showlegend,!ez&&!ej&&!(eN=eM&&eU.legendgroup===ec)&&eU.legend===em&&!0===eU.visible&&!_.traceIs(eU,"notLegendIsolatable")){eH=!1;break}for(eP=0;eP<es.length;eP++)if(!1!==(eU=es[eP]).visible&&eU.legend===em){if(_.traceIs(eU,"notLegendIsolatable"))continue;switch(el.visible){case"legendonly":setVisibility(eU,!0);break;case!0:eV=!!eH||"legendonly",ez=eU===el,ej=!0!==eU.showlegend&&!eU.legendgroup,eN=ez||eM&&eU.legendgroup===ec,setVisibility(eU,!!eN||!!ej||eV)}}}for(eP=0;eP<ed.length;eP++)if(eO=ed[eP]){var eG=eO.constructUpdate(),eW=Object.keys(eG);for(eI=0;eI<eW.length;eI++)(eu[eD=eW[eI]]=eu[eD]||[])[eh[eP]]=eG[eD]}for(eP=0,eR=Object.keys(eu);eP<eR.length;eP++)for(eI=0,eD=eR[eP];eI<ef.length;eI++)eu[eD].hasOwnProperty(eI)||(eu[eD][eI]=void 0);eg?_.call("_guiUpdate",o,eu,{shapes:ep},ef):_.call("_guiRestyle",o,eu,ef)}}}}function insertDataUpdate(i,o){var s=ef.indexOf(i),_=eu.visible;return _||(_=eu.visible=[]),-1===ef.indexOf(i)&&(ef.push(i),s=ef.length-1),_[s]=o,s}function insertShapesUpdate(i,o){ep[i].visible=o,eg=!0}function setVisibility(i,o){if(!en.groupTitle||et){var s=i._fullInput||i,N=s._isShape,j=s.index;if(void 0===j&&(j=s._index),_.hasTransform(s,"groupby")){var Z=ed[j];if(!Z){var X=_.getTransformIndices(s,"groupby"),$=X[X.length-1];Z=F.keyedContainer(s,"transforms["+$+"].styles","target","value.visible"),ed[j]=Z}var ee=Z.get(i._group);void 0===ee&&(ee=!0),!1!==ee&&Z.set(i._group,o),eh[j]=insertDataUpdate(j,!1!==s.visible)}else{var er=!1!==s.visible&&o;N?insertShapesUpdate(j,er):insertDataUpdate(j,er)}}}}},10130:function(i,o){"use strict";o.isGrouped=function(i){return -1!==(i.traceorder||"").indexOf("grouped")},o.isVertical=function(i){return"h"!==i.orientation},o.isReversed=function(i){return -1!==(i.traceorder||"").indexOf("reversed")}},2199:function(i,o,s){"use strict";i.exports={moduleType:"component",name:"legend",layoutAttributes:s(33030),supplyLayoutDefaults:s(99017),draw:s(43969),style:s(53630)}},53630:function(i,o,s){"use strict";var _=s(39898),F=s(73972),N=s(71828),j=N.strTranslate,Z=s(91424),X=s(7901),$=s(52075).extractOpts,ee=s(34098),et=s(63463),er=s(53581).castOption,en=s(14928);function getGradientDirection(i,o){return(o?"radial":"horizontal")+(i?"":"reversed")}function getStyleGuide(i){var o=i[0].trace,s=o.contours,_=ee.hasLines(o),F=ee.hasMarkers(o),N=o.visible&&o.fill&&"none"!==o.fill,j=!1,Z=!1;if(s){var X=s.coloring;"lines"===X?j=!0:_="none"===X||"heatmap"===X||s.showlines,"constraint"===s.type?N="="!==s._operation:("fill"===X||"heatmap"===X)&&(Z=!0)}return{showMarker:F,showLine:_,showFill:N,showGradientLine:j,showGradientFill:Z,anyLine:_||j,anyFill:N||Z}}function dimAttr(i,o,s){return i&&N.isArrayOrTypedArray(i)?o:i>s?s:i}i.exports=function(i,o,s){var ei=o._fullLayout;s||(s=ei.legend);var eo="constant"===s.itemsizing,es=s.itemwidth,el=j((es+2*en.itemGap)/2,0),boundLineWidth=function(i,o,s,_){var F;if(i+1)F=i;else{if(!o||!(o.width>0))return 0;F=o.width}return eo?_:Math.min(F,s)};function styleLines(i){var s,F,j=getStyleGuide(i),X=j.showFill,et=j.showLine,er=j.showGradientLine,en=j.showGradientFill,ei=j.anyFill,eo=j.anyLine,el=i[0],ec=el.trace,eu=$(ec),ef=eu.colorscale,ed=eu.reversescale,eh=ee.hasMarkers(ec)||!ei?"M5,0":eo?"M5,-2":"M5,-3",ep=_.select(this),eg=ep.select(".legendfill").selectAll("path").data(X||en?[i]:[]);if(eg.enter().append("path").classed("js-fill",!0),eg.exit().remove(),eg.attr("d",eh+"h"+es+"v6h-"+es+"z").call(function(i){if(i.size()){if(X)Z.fillGroupStyle(i,o);else{var s="legendfill-"+ec.uid;Z.gradient(i,o,s,getGradientDirection(ed),ef,"fill")}}}),et||er){var em=boundLineWidth(void 0,ec.line,10,5);F=N.minExtend(ec,{line:{width:em}}),s=[N.minExtend(el,{trace:F})]}var ey=ep.select(".legendlines").selectAll("path").data(et||er?[s]:[]);ey.enter().append("path").classed("js-line",!0),ey.exit().remove(),ey.attr("d",eh+(er?"l"+es+",0.0001":"h"+es)).call(et?Z.lineGroupStyle:function(i){if(i.size()){var s="legendline-"+ec.uid;Z.lineGroupStyle(i),Z.gradient(i,o,s,getGradientDirection(ed),ef,"stroke")}})}function stylePoints(i){var s,F,j=getStyleGuide(i),X=j.anyFill,$=j.anyLine,et=j.showLine,er=j.showMarker,en=i[0],ei=en.trace,es=!er&&!$&&!X&&ee.hasText(ei);function boundVal(i,o,s,_){var F=N.nestedProperty(ei,i).get(),j=N.isArrayOrTypedArray(F)&&o?o(F):F;if(eo&&j&&void 0!==_&&(j=_),s){if(j<s[0])return s[0];if(j>s[1])return s[1]}return j}function pickFirst(i){return en._distinct&&en.index&&i[en.index]?i[en.index]:i[0]}if(er||es||et){var ec={},eu={};if(er){ec.mc=boundVal("marker.color",pickFirst),ec.mx=boundVal("marker.symbol",pickFirst),ec.mo=boundVal("marker.opacity",N.mean,[.2,1]),ec.mlc=boundVal("marker.line.color",pickFirst),ec.mlw=boundVal("marker.line.width",N.mean,[0,5],2),eu.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ef=boundVal("marker.size",N.mean,[2,16],12);ec.ms=ef,eu.marker.size=ef}et&&(eu.line={width:boundVal("line.width",pickFirst,[0,10],5)}),es&&(ec.tx="Aa",ec.tp=boundVal("textposition",pickFirst),ec.ts=10,ec.tc=boundVal("textfont.color",pickFirst),ec.tf=boundVal("textfont.family",pickFirst)),s=[N.minExtend(en,ec)],(F=N.minExtend(ei,eu)).selectedpoints=null,F.texttemplate=null}var ed=_.select(this).select("g.legendpoints"),eh=ed.selectAll("path.scatterpts").data(er?s:[]);eh.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",el),eh.exit().remove(),eh.call(Z.pointStyle,F,o),er&&(s[0].mrc=3);var ep=ed.selectAll("g.pointtext").data(es?s:[]);ep.enter().append("g").classed("pointtext",!0).append("text").attr("transform",el),ep.exit().remove(),ep.selectAll("text").call(Z.textPointStyle,F,o)}function styleWaterfalls(i){var o=i[0].trace,s="waterfall"===o.type;if(i[0]._distinct&&s){var F=i[0].trace[i[0].dir].marker;return i[0].mc=F.color,i[0].mlw=F.line.width,i[0].mlc=F.line.color,styleBarLike(i,this,"waterfall")}var N=[];o.visible&&s&&(N=i[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var j=_.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(N);j.enter().append("path").classed("legendwaterfall",!0).attr("transform",el).style("stroke-miterlimit",1),j.exit().remove(),j.each(function(i){var s=_.select(this),F=o[i[0]].marker,N=boundLineWidth(void 0,F.line,5,2);s.attr("d",i[1]).style("stroke-width",N+"px").call(X.fill,F.color),N&&s.call(X.stroke,F.line.color)})}function styleBars(i){styleBarLike(i,this)}function styleFunnels(i){styleBarLike(i,this,"funnel")}function styleBarLike(i,N,j){var ee=i[0].trace,et=ee.marker||{},er=et.line||{},en=j?ee.visible&&ee.type===j:F.traceIs(ee,"bar"),ei=_.select(N).select("g.legendpoints").selectAll("path.legend"+j).data(en?[i]:[]);ei.enter().append("path").classed("legend"+j,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",el),ei.exit().remove(),ei.each(function(i){var F=_.select(this),N=i[0],j=boundLineWidth(N.mlw,et.line,5,2);F.style("stroke-width",j+"px");var en=N.mcc;if(!s._inHover&&"mc"in N){var ei=$(et),eo=ei.mid;void 0===eo&&(eo=(ei.max+ei.min)/2),en=Z.tryColorscale(et,"")(eo)}var es=en||N.mc||et.color,el=et.pattern,ec=el&&Z.getPatternAttr(el.shape,0,"");if(ec){var eu=Z.getPatternAttr(el.bgcolor,0,null),ef=Z.getPatternAttr(el.fgcolor,0,null),ed=el.fgopacity,eh=dimAttr(el.size,8,10),ep=dimAttr(el.solidity,.5,1),eg="legend-"+ee.uid;F.call(Z.pattern,"legend",o,eg,ec,eh,ep,en,el.fillmode,eu,ef,ed)}else F.call(X.fill,es);j&&X.stroke(F,N.mlc||er.color)})}function styleBoxes(i){var s=i[0].trace,j=_.select(this).select("g.legendpoints").selectAll("path.legendbox").data(s.visible&&F.traceIs(s,"box-violin")?[i]:[]);j.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",el),j.exit().remove(),j.each(function(){var i=_.select(this);if(("all"===s.boxpoints||"all"===s.points)&&0===X.opacity(s.fillcolor)&&0===X.opacity((s.line||{}).color)){var F=N.minExtend(s,{marker:{size:eo?12:N.constrain(s.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});j.call(Z.pointStyle,F,o)}else{var $=boundLineWidth(void 0,s.line,5,2);i.style("stroke-width",$+"px").call(X.fill,s.fillcolor),$&&X.stroke(i,s.line.color)}})}function styleCandles(i){var o=i[0].trace,s=_.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(o.visible&&"candlestick"===o.type?[i,i]:[]);s.enter().append("path").classed("legendcandle",!0).attr("d",function(i,o){return o?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",el).style("stroke-miterlimit",1),s.exit().remove(),s.each(function(i,s){var F=_.select(this),N=o[s?"increasing":"decreasing"],j=boundLineWidth(void 0,N.line,5,2);F.style("stroke-width",j+"px").call(X.fill,N.fillcolor),j&&X.stroke(F,N.line.color)})}function styleOHLC(i){var o=i[0].trace,s=_.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(o.visible&&"ohlc"===o.type?[i,i]:[]);s.enter().append("path").classed("legendohlc",!0).attr("d",function(i,o){return o?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",el).style("stroke-miterlimit",1),s.exit().remove(),s.each(function(i,s){var F=_.select(this),N=o[s?"increasing":"decreasing"],j=boundLineWidth(void 0,N.line,5,2);F.style("fill","none").call(Z.dashLine,N.line.dash,j),j&&X.stroke(F,N.line.color)})}function stylePies(i){stylePieLike(i,this,"pie")}function styleFunnelareas(i){stylePieLike(i,this,"funnelarea")}function stylePieLike(i,s,j){var Z=i[0],X=Z.trace,$=j?X.visible&&X.type===j:F.traceIs(X,j),ee=_.select(s).select("g.legendpoints").selectAll("path.legend"+j).data($?[i]:[]);if(ee.enter().append("path").classed("legend"+j,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",el),ee.exit().remove(),ee.size()){var en=X.marker||{},ei=boundLineWidth(er(en.line.width,Z.pts),en.line,5,2),eo="pieLike",es=N.minExtend(X,{marker:{line:{width:ei}}},eo);et(ee,N.minExtend(Z,{trace:es},eo),es,o)}}function styleSpatial(i){var s,F=i[0].trace,j=[];if(F.visible)switch(F.type){case"histogram2d":case"heatmap":j=[["M-15,-2V4H15V-2Z"]],s=!0;break;case"choropleth":case"choroplethmapbox":j=[["M-6,-6V6H6V-6Z"]],s=!0;break;case"densitymapbox":j=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],s="radial";break;case"cone":j=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],s=!1;break;case"streamtube":j=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],s=!1;break;case"surface":j=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],s=!0;break;case"mesh3d":j=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],s=!1;break;case"volume":j=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],s=!0;break;case"isosurface":j=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],s=!1}var ee=_.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(j);ee.enter().append("path").classed("legend3dandfriends",!0).attr("transform",el).style("stroke-miterlimit",1),ee.exit().remove(),ee.each(function(i,j){var ee,et=_.select(this),er=$(F),en=er.colorscale,ei=er.reversescale;if(en){if(!s){var eo=en.length;ee=0===j?en[ei?eo-1:0][1]:1===j?en[ei?0:eo-1][1]:en[Math.floor((eo-1)/2)][1]}}else{var es=F.vertexcolor||F.facecolor||F.color;ee=N.isArrayOrTypedArray(es)?es[j]||es[0]:es}et.attr("d",i[0]),ee?et.call(X.fill,ee):et.call(function(i){if(i.size()){var _="legendfill-"+F.uid;Z.gradient(i,o,_,getGradientDirection(ei,"radial"===s),en,"fill")}})})}i.each(function(i){var o=_.select(this),F=N.ensureSingle(o,"g","layers");F.style("opacity",i[0].trace.opacity);var Z=s.valign,X=i[0].lineHeight,$=i[0].height;"middle"!==Z&&X&&$?F.attr("transform",j(0,{top:1,bottom:-1}[Z]*(.5*(X-$+3)))):F.attr("transform",null),F.selectAll("g.legendfill").data([i]).enter().append("g").classed("legendfill",!0),F.selectAll("g.legendlines").data([i]).enter().append("g").classed("legendlines",!0);var ee=F.selectAll("g.legendsymbols").data([i]);ee.enter().append("g").classed("legendsymbols",!0),ee.selectAll("g.legendpoints").data([i]).enter().append("g").classed("legendpoints",!0)}).each(styleSpatial).each(styleWaterfalls).each(styleFunnels).each(styleBars).each(styleBoxes).each(styleFunnelareas).each(stylePies).each(styleLines).each(stylePoints).each(styleCandles).each(styleOHLC)}},42068:function(i,o,s){"use strict";s(93348),i.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(i,o,s){"use strict";var _=s(73972),F=s(74875),N=s(41675),j=s(24255),Z=s(34031).eraseActiveShape,X=s(71828),$=X._,ee=i.exports={};function handleCartesian(i,o){var s=o.currentTarget,F=s.getAttribute("data-attr"),j=s.getAttribute("data-val")||!0,Z=i._fullLayout,X={},$=N.list(i,null,!0),ee=Z._cartesianSpikesEnabled;if("zoom"===F){var et,er,en,ei="in"===j?.5:2,eo=(1+ei)/2,es=(1-ei)/2;for(er=0;er<$.length;er++)if(!(et=$[er]).fixedrange){if(en=et._name,"auto"===j)X[en+".autorange"]=!0;else if("reset"===j)void 0===et._rangeInitial0&&void 0===et._rangeInitial1?X[en+".autorange"]=!0:void 0===et._rangeInitial0?(X[en+".autorange"]=et._autorangeInitial,X[en+".range"]=[null,et._rangeInitial1]):void 0===et._rangeInitial1?(X[en+".range"]=[et._rangeInitial0,null],X[en+".autorange"]=et._autorangeInitial):X[en+".range"]=[et._rangeInitial0,et._rangeInitial1],void 0===et._showSpikeInitial||(X[en+".showspikes"]=et._showSpikeInitial,"on"!==ee||et._showSpikeInitial||(ee="off"));else{var el=[et.r2l(et.range[0]),et.r2l(et.range[1])],ec=[eo*el[0]+es*el[1],eo*el[1]+es*el[0]];X[en+".range[0]"]=et.l2r(ec[0]),X[en+".range[1]"]=et.l2r(ec[1])}}}else"hovermode"===F&&("x"===j||"y"===j)&&(j=Z._isHoriz?"y":"x",s.setAttribute("data-val",j)),X[F]=j;Z._cartesianSpikesEnabled=ee,_.call("_guiRelayout",i,X)}function handleDrag3d(i,o){for(var s=o.currentTarget,F=s.getAttribute("data-attr"),N=s.getAttribute("data-val")||!0,j=i._fullLayout._subplots.gl3d||[],Z={},X=F.split("."),$=0;$<j.length;$++)Z[j[$]+"."+X[1]]=N;var ee="pan"===N?N:"zoom";Z.dragmode=ee,_.call("_guiRelayout",i,Z)}function handleCamera3d(i,o){for(var s=o.currentTarget.getAttribute("data-attr"),F="resetLastSave"===s,N="resetDefault"===s,j=i._fullLayout,Z=j._subplots.gl3d||[],X={},$=0;$<Z.length;$++){var ee,et=Z[$],er=et+".camera",en=et+".aspectratio",ei=et+".aspectmode",eo=j[et]._scene;F?(X[er+".up"]=eo.viewInitial.up,X[er+".eye"]=eo.viewInitial.eye,X[er+".center"]=eo.viewInitial.center,ee=!0):N&&(X[er+".up"]=null,X[er+".eye"]=null,X[er+".center"]=null,ee=!0),ee&&(X[en+".x"]=eo.viewInitial.aspectratio.x,X[en+".y"]=eo.viewInitial.aspectratio.y,X[en+".z"]=eo.viewInitial.aspectratio.z,X[ei]=eo.viewInitial.aspectmode)}_.call("_guiRelayout",i,X)}function getNextHover3d(i,o){var s=o.currentTarget,_=s._previousVal,F=i._fullLayout,N=F._subplots.gl3d||[],j=["xaxis","yaxis","zaxis"],Z={},X={};if(_)X=_,s._previousVal=null;else{for(var $=0;$<N.length;$++){var ee=N[$],et=F[ee],er=ee+".hovermode";Z[er]=et.hovermode,X[er]=!1;for(var en=0;en<3;en++){var ei=j[en],eo=ee+"."+ei+".showspikes";X[eo]=!1,Z[eo]=et[ei].showspikes}}s._previousVal=Z}return X}function handleHover3d(i,o){var s=getNextHover3d(i,o);_.call("_guiRelayout",i,s)}function handleGeo(i,o){for(var s=o.currentTarget,F=s.getAttribute("data-attr"),N=s.getAttribute("data-val")||!0,j=i._fullLayout,Z=j._subplots.geo||[],X=0;X<Z.length;X++){var $=Z[X],ee=j[$];if("zoom"===F){var et=ee.projection.scale,er="in"===N?2*et:.5*et;_.call("_guiRelayout",i,$+".projection.scale",er)}}"reset"===F&&resetView(i,"geo")}function getNextHover(i){var o=i._fullLayout;return!o.hovermode&&(o._has("cartesian")?o._isHoriz?"y":"x":"closest")}function toggleHover(i){var o=getNextHover(i);_.call("_guiRelayout",i,"hovermode",o)}function setSpikelineVisibility(i){for(var o="on"===i._fullLayout._cartesianSpikesEnabled,s=N.list(i,null,!0),_={},F=0;F<s.length;F++){var j=s[F];_[j._name+".showspikes"]=!!o||j._showSpikeInitial}return _}function handleMapboxZoom(i,o){for(var s=o.currentTarget.getAttribute("data-val"),F=i._fullLayout,N=F._subplots.mapbox||[],j={},Z=0;Z<N.length;Z++){var X=N[Z],$=F[X].zoom,ee="in"===s?1.05*$:$/1.05;j[X+".zoom"]=ee}_.call("_guiRelayout",i,j)}function resetView(i,o){for(var s=i._fullLayout,F=s._subplots[o]||[],N={},j=0;j<F.length;j++)for(var Z=F[j],X=s[Z]._subplot.viewInitial,$=Object.keys(X),ee=0;ee<$.length;ee++){var et=$[ee];N[Z+"."+et]=X[et]}_.call("_guiRelayout",i,N)}ee.toImage={name:"toImage",title:function(i){return"png"===((i._context.toImageButtonOptions||{}).format||"png")?$(i,"Download plot as a png"):$(i,"Download plot")},icon:j.camera,click:function(i){var o=i._context.toImageButtonOptions,s={format:o.format||"png"};X.notifier($(i,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==s.format&&X.isIE()&&(X.notifier($(i,"IE only supports svg.  Changing format to svg."),"long"),s.format="svg"),["filename","width","height","scale"].forEach(function(i){i in o&&(s[i]=o[i])}),_.call("downloadImage",i,s).then(function(o){X.notifier($(i,"Snapshot succeeded")+" - "+o,"long")}).catch(function(){X.notifier($(i,"Sorry, there was a problem downloading your snapshot!"),"long")})}},ee.sendDataToCloud={name:"sendDataToCloud",title:function(i){return $(i,"Edit in Chart Studio")},icon:j.disk,click:function(i){F.sendDataToCloud(i)}},ee.editInChartStudio={name:"editInChartStudio",title:function(i){return $(i,"Edit in Chart Studio")},icon:j.pencil,click:function(i){F.sendDataToCloud(i)}},ee.zoom2d={name:"zoom2d",_cat:"zoom",title:function(i){return $(i,"Zoom")},attr:"dragmode",val:"zoom",icon:j.zoombox,click:handleCartesian},ee.pan2d={name:"pan2d",_cat:"pan",title:function(i){return $(i,"Pan")},attr:"dragmode",val:"pan",icon:j.pan,click:handleCartesian},ee.select2d={name:"select2d",_cat:"select",title:function(i){return $(i,"Box Select")},attr:"dragmode",val:"select",icon:j.selectbox,click:handleCartesian},ee.lasso2d={name:"lasso2d",_cat:"lasso",title:function(i){return $(i,"Lasso Select")},attr:"dragmode",val:"lasso",icon:j.lasso,click:handleCartesian},ee.drawclosedpath={name:"drawclosedpath",title:function(i){return $(i,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:j.drawclosedpath,click:handleCartesian},ee.drawopenpath={name:"drawopenpath",title:function(i){return $(i,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:j.drawopenpath,click:handleCartesian},ee.drawline={name:"drawline",title:function(i){return $(i,"Draw line")},attr:"dragmode",val:"drawline",icon:j.drawline,click:handleCartesian},ee.drawrect={name:"drawrect",title:function(i){return $(i,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:j.drawrect,click:handleCartesian},ee.drawcircle={name:"drawcircle",title:function(i){return $(i,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:j.drawcircle,click:handleCartesian},ee.eraseshape={name:"eraseshape",title:function(i){return $(i,"Erase active shape")},icon:j.eraseshape,click:Z},ee.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(i){return $(i,"Zoom in")},attr:"zoom",val:"in",icon:j.zoom_plus,click:handleCartesian},ee.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(i){return $(i,"Zoom out")},attr:"zoom",val:"out",icon:j.zoom_minus,click:handleCartesian},ee.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(i){return $(i,"Autoscale")},attr:"zoom",val:"auto",icon:j.autoscale,click:handleCartesian},ee.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(i){return $(i,"Reset axes")},attr:"zoom",val:"reset",icon:j.home,click:handleCartesian},ee.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(i){return $(i,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:j.tooltip_basic,gravity:"ne",click:handleCartesian},ee.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(i){return $(i,"Compare data on hover")},attr:"hovermode",val:function(i){return i._fullLayout._isHoriz?"y":"x"},icon:j.tooltip_compare,gravity:"ne",click:handleCartesian},ee.zoom3d={name:"zoom3d",_cat:"zoom",title:function(i){return $(i,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:j.zoombox,click:handleDrag3d},ee.pan3d={name:"pan3d",_cat:"pan",title:function(i){return $(i,"Pan")},attr:"scene.dragmode",val:"pan",icon:j.pan,click:handleDrag3d},ee.orbitRotation={name:"orbitRotation",title:function(i){return $(i,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:j["3d_rotate"],click:handleDrag3d},ee.tableRotation={name:"tableRotation",title:function(i){return $(i,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:j["z-axis"],click:handleDrag3d},ee.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(i){return $(i,"Reset camera to default")},attr:"resetDefault",icon:j.home,click:handleCamera3d},ee.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(i){return $(i,"Reset camera to last save")},attr:"resetLastSave",icon:j.movie,click:handleCamera3d},ee.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(i){return $(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:j.tooltip_basic,gravity:"ne",click:handleHover3d},ee.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(i){return $(i,"Zoom in")},attr:"zoom",val:"in",icon:j.zoom_plus,click:handleGeo},ee.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(i){return $(i,"Zoom out")},attr:"zoom",val:"out",icon:j.zoom_minus,click:handleGeo},ee.resetGeo={name:"resetGeo",_cat:"reset",title:function(i){return $(i,"Reset")},attr:"reset",val:null,icon:j.autoscale,click:handleGeo},ee.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(i){return $(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:j.tooltip_basic,gravity:"ne",click:toggleHover},ee.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(i){return $(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:j.tooltip_basic,gravity:"ne",click:toggleHover},ee.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(i){return $(i,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:j.tooltip_basic,gravity:"ne",click:toggleHover},ee.resetViewSankey={name:"resetSankeyGroup",title:function(i){return $(i,"Reset view")},icon:j.home,click:function(i){for(var o={"node.groups":[],"node.x":[],"node.y":[]},s=0;s<i._fullData.length;s++){var F=i._fullData[s]._viewInitial;o["node.groups"].push(F.node.groups.slice()),o["node.x"].push(F.node.x.slice()),o["node.y"].push(F.node.y.slice())}_.call("restyle",i,o)}},ee.toggleHover={name:"toggleHover",title:function(i){return $(i,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:j.tooltip_basic,gravity:"ne",click:function(i,o){var s=getNextHover3d(i,o);s.hovermode=getNextHover(i),_.call("_guiRelayout",i,s)}},ee.resetViews={name:"resetViews",title:function(i){return $(i,"Reset views")},icon:j.home,click:function(i,o){var s=o.currentTarget;s.setAttribute("data-attr","zoom"),s.setAttribute("data-val","reset"),handleCartesian(i,o),s.setAttribute("data-attr","resetLastSave"),handleCamera3d(i,o),resetView(i,"geo"),resetView(i,"mapbox")}},ee.toggleSpikelines={name:"toggleSpikelines",title:function(i){return $(i,"Toggle Spike Lines")},icon:j.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(i){var o=i._fullLayout,s=o._cartesianSpikesEnabled;o._cartesianSpikesEnabled="on"===s?"off":"on",_.call("_guiRelayout",i,setSpikelineVisibility(i))}},ee.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(i){return $(i,"Reset view")},attr:"reset",icon:j.home,click:function(i){resetView(i,"mapbox")}},ee.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(i){return $(i,"Zoom in")},attr:"zoom",val:"in",icon:j.zoom_plus,click:handleMapboxZoom},ee.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(i){return $(i,"Zoom out")},attr:"zoom",val:"out",icon:j.zoom_minus,click:handleMapboxZoom}},93348:function(i,o,s){"use strict";var _=s(26023),F=Object.keys(_),N=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],j=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(N),Z=[],addToForeButtons=function(i){if(-1===j.indexOf(i._cat||i.name)){var o=i.name,s=(i._cat||i.name).toLowerCase();-1===Z.indexOf(o)&&Z.push(o),-1===Z.indexOf(s)&&Z.push(s)}};F.forEach(function(i){addToForeButtons(_[i])}),Z.sort(),i.exports={DRAW_MODES:N,backButtons:j,foreButtons:Z}},35750:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(44467),j=s(42068);i.exports=function(i,o){var s=i.modebar||{},Z=N.newContainer(o,"modebar");function coerce(i,o){return _.coerce(s,Z,j,i,o)}coerce("orientation"),coerce("bgcolor",F.addOpacity(o.paper_bgcolor,.5));var X=F.contrast(F.rgb(o.modebar.bgcolor));coerce("color",F.addOpacity(X,.3)),coerce("activecolor",F.addOpacity(X,.7)),coerce("uirevision",o.uirevision),coerce("add"),coerce("remove")}},64168:function(i,o,s){"use strict";i.exports={moduleType:"component",name:"modebar",layoutAttributes:s(42068),supplyLayoutDefaults:s(35750),manage:s(14192)}},14192:function(i,o,s){"use strict";var _=s(41675),F=s(34098),N=s(73972),j=s(23469).isUnifiedHover,Z=s(37676),X=s(26023),$=s(93348).DRAW_MODES,ee=s(71828).extendDeep;function getButtonGroups(i){var o=i._fullLayout,s=i._fullData,_=i._context;function match(i,o){if("string"==typeof o){if(o.toLowerCase()===i.toLowerCase())return!0}else{var s=o.name,_=o._cat||o.name;if(s===i||_===i.toLowerCase())return!0}return!1}var F=o.modebar.add;"string"==typeof F&&(F=[F]);var N=o.modebar.remove;"string"==typeof N&&(N=[N]);var Z=_.modeBarButtonsToAdd.concat(F.filter(function(i){for(var o=0;o<_.modeBarButtonsToRemove.length;o++)if(match(i,_.modeBarButtonsToRemove[o]))return!1;return!0})),ee=_.modeBarButtonsToRemove.concat(N.filter(function(i){for(var o=0;o<_.modeBarButtonsToAdd.length;o++)if(match(i,_.modeBarButtonsToAdd[o]))return!1;return!0})),et=o._has("cartesian"),er=o._has("gl3d"),en=o._has("geo"),ei=o._has("pie"),eo=o._has("funnelarea"),es=o._has("gl2d"),el=o._has("ternary"),ec=o._has("mapbox"),eu=o._has("polar"),ef=o._has("smith"),ed=o._has("sankey"),eh=areAllAxesFixed(o),ep=j(o.hovermode),eg=[];function addGroup(i){if(i.length){for(var o=[],s=0;s<i.length;s++){for(var _=i[s],F=X[_],N=F.name.toLowerCase(),j=(F._cat||F.name).toLowerCase(),Z=!1,$=0;$<ee.length;$++){var et=ee[$].toLowerCase();if(et===N||et===j){Z=!0;break}}Z||o.push(X[_])}eg.push(o)}}var em=["toImage"];_.showEditInChartStudio?em.push("editInChartStudio"):_.showSendToCloud&&em.push("sendDataToCloud"),addGroup(em);var ey=[],ev=[],ex=[],e_=[];(et||es||ei||eo||el)+en+er+ec+eu+ef>1?(ev=["toggleHover"],ex=["resetViews"]):en?(ey=["zoomInGeo","zoomOutGeo"],ev=["hoverClosestGeo"],ex=["resetGeo"]):er?(ev=["hoverClosest3d"],ex=["resetCameraDefault3d","resetCameraLastSave3d"]):ec?(ey=["zoomInMapbox","zoomOutMapbox"],ev=["toggleHover"],ex=["resetViewMapbox"]):es?ev=["hoverClosestGl2d"]:ei?ev=["hoverClosestPie"]:ed?(ev=["hoverClosestCartesian","hoverCompareCartesian"],ex=["resetViewSankey"]):ev=["toggleHover"],et&&(ev=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(hasNoHover(s)||ep)&&(ev=[]),(et||es)&&!eh&&(ey=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==ex[0]&&(ex=["resetScale2d"])),er?e_=["zoom3d","pan3d","orbitRotation","tableRotation"]:(et||es)&&!eh||el?e_=["zoom2d","pan2d"]:ec||en?e_=["pan2d"]:eu&&(e_=["zoom2d"]),isSelectable(s)&&e_.push("select2d","lasso2d");var ew=[],enableHover=function(i){-1===ew.indexOf(i)&&-1!==ev.indexOf(i)&&ew.push(i)};if(Array.isArray(Z)){for(var eT=[],ek=0;ek<Z.length;ek++){var eA=Z[ek];"string"==typeof eA?(eA=eA.toLowerCase(),-1!==$.indexOf(eA)?(o._has("mapbox")||o._has("cartesian"))&&e_.push(eA):"togglespikelines"===eA?enableHover("toggleSpikelines"):"togglehover"===eA?enableHover("toggleHover"):"hovercompare"===eA?enableHover("hoverCompareCartesian"):"hoverclosest"===eA?(enableHover("hoverClosestCartesian"),enableHover("hoverClosestGeo"),enableHover("hoverClosest3d"),enableHover("hoverClosestGl2d"),enableHover("hoverClosestPie")):"v1hovermode"===eA&&(enableHover("toggleHover"),enableHover("hoverClosestCartesian"),enableHover("hoverCompareCartesian"),enableHover("hoverClosestGeo"),enableHover("hoverClosest3d"),enableHover("hoverClosestGl2d"),enableHover("hoverClosestPie"))):eT.push(eA)}Z=eT}return addGroup(e_),addGroup(ey.concat(ex)),addGroup(ew),appendButtonsToGroups(eg,Z)}function areAllAxesFixed(i){for(var o=_.list({_fullLayout:i},null,!0),s=0;s<o.length;s++)if(!o[s].fixedrange)return!1;return!0}function isSelectable(i){for(var o=!1,s=0;s<i.length&&!o;s++){var _=i[s];_._module&&_._module.selectPoints&&(N.traceIs(_,"scatter-like")?(F.hasMarkers(_)||F.hasText(_))&&(o=!0):N.traceIs(_,"box-violin")?("all"===_.boxpoints||"all"===_.points)&&(o=!0):o=!0)}return o}function hasNoHover(i){for(var o=0;o<i.length;o++)if(!N.traceIs(i[o],"noHover"))return!1;return!0}function appendButtonsToGroups(i,o){if(o.length){if(Array.isArray(o[0]))for(var s=0;s<o.length;s++)i.push(o[s]);else i.push(o)}return i}function fillCustomButton(i){for(var o=ee([],i),s=0;s<o.length;s++)for(var _=o[s],F=0;F<_.length;F++){var N=_[F];if("string"==typeof N){if(void 0!==X[N])o[s][F]=X[N];else throw Error("*modeBarButtons* configuration options invalid button name")}}return o}i.exports=function(i){var o,s=i._fullLayout,_=i._context,F=s._modeBar;if(!_.displayModeBar&&!_.watermark){F&&(F.destroy(),delete s._modeBar);return}if(!Array.isArray(_.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(_.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var N=_.modeBarButtons;o=Array.isArray(N)&&N.length?fillCustomButton(N):!_.displayModeBar&&_.watermark?[]:getButtonGroups(i),F?F.update(i,o):s._modeBar=Z(i,o)}},37676:function(i,o,s){"use strict";var _=s(39898),F=s(92770),N=s(71828),j=s(24255),Z=s(11506).version,X=new DOMParser;function ModeBar(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var $=ModeBar.prototype;function jsVersion(i){return i+" (v"+Z+")"}function createModeBar(i,o){var s=i._fullLayout,F=new ModeBar({graphInfo:i,container:s._modebardiv.node(),buttons:o});return s._privateplot&&_.select(F.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),F}$.update=function(i,o){this.graphInfo=i;var s=this.graphInfo._context,_=this.graphInfo._fullLayout,F="modebar-"+_._uid;this.element.setAttribute("id",F),this._uid=F,this.element.className="modebar","hover"===s.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===_.modebar.orientation&&(this.element.className+=" vertical",o=o.reverse());var j=_.modebar,Z="hover"===s.displayModeBar?".js-plotly-plot .plotly:hover ":"";N.deleteRelatedStyleRule(F),N.addRelatedStyleRule(F,Z+"#"+F+" .modebar-group","background-color: "+j.bgcolor),N.addRelatedStyleRule(F,"#"+F+" .modebar-btn .icon path","fill: "+j.color),N.addRelatedStyleRule(F,"#"+F+" .modebar-btn:hover .icon path","fill: "+j.activecolor),N.addRelatedStyleRule(F,"#"+F+" .modebar-btn.active .icon path","fill: "+j.activecolor);var X=!this.hasButtons(o),$=this.hasLogo!==s.displaylogo,ee=this.locale!==s.locale;if(this.locale=s.locale,(X||$||ee)&&(this.removeAllButtons(),this.updateButtons(o),s.watermark||s.displaylogo)){var et=this.getLogo();s.watermark&&(et.className=et.className+" watermark"),"v"===_.modebar.orientation?this.element.insertBefore(et,this.element.childNodes[0]):this.element.appendChild(et),this.hasLogo=!0}this.updateActiveButton()},$.updateButtons=function(i){var o=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(i){var s=o.createGroup();i.forEach(function(i){var _=i.name;if(!_)throw Error("must provide button 'name' in button config");if(-1!==o.buttonsNames.indexOf(_))throw Error("button name '"+_+"' is taken");o.buttonsNames.push(_);var F=o.createButton(i);o.buttonElements.push(F),s.appendChild(F)}),o.element.appendChild(s)})},$.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},$.createButton=function(i){var o=this,s=document.createElement("a");s.setAttribute("rel","tooltip"),s.className="modebar-btn";var F=i.title;void 0===F?F=i.name:"function"==typeof F&&(F=F(this.graphInfo)),(F||0===F)&&s.setAttribute("data-title",F),void 0!==i.attr&&s.setAttribute("data-attr",i.attr);var N=i.val;if(void 0!==N&&("function"==typeof N&&(N=N(this.graphInfo)),s.setAttribute("data-val",N)),"function"!=typeof i.click)throw Error("must provide button 'click' function in button config");s.addEventListener("click",function(s){i.click(o.graphInfo,s),o.updateActiveButton(s.currentTarget)}),s.setAttribute("data-toggle",i.toggle||!1),i.toggle&&_.select(s).classed("active",!0);var Z=i.icon;return"function"==typeof Z?s.appendChild(Z()):s.appendChild(this.createIcon(Z||j.question)),s.setAttribute("data-gravity",i.gravity||"n"),s},$.createIcon=function(i){var o,s=F(i.height)?Number(i.height):i.ascent-i.descent,_="http://www.w3.org/2000/svg";if(i.path){(o=document.createElementNS(_,"svg")).setAttribute("viewBox",[0,0,i.width,s].join(" ")),o.setAttribute("class","icon");var N=document.createElementNS(_,"path");N.setAttribute("d",i.path),i.transform?N.setAttribute("transform",i.transform):void 0!==i.ascent&&N.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),o.appendChild(N)}return i.svg&&(o=X.parseFromString(i.svg,"application/xml").childNodes[0]),o.setAttribute("height","1em"),o.setAttribute("width","1em"),o},$.updateActiveButton=function(i){var o=this.graphInfo._fullLayout,s=void 0!==i?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var F=i.getAttribute("data-val")||!0,j=i.getAttribute("data-attr"),Z="true"===i.getAttribute("data-toggle"),X=_.select(i);if(Z)j===s&&X.classed("active",!X.classed("active"));else{var $=null===j?j:N.nestedProperty(o,j).get();X.classed("active",$===F)}})},$.hasButtons=function(i){var o=this.buttons;if(!o||i.length!==o.length)return!1;for(var s=0;s<i.length;++s){if(i[s].length!==o[s].length)return!1;for(var _=0;_<i[s].length;_++)if(i[s][_].name!==o[s][_].name)return!1}return!0},$.getLogo=function(){var i=this.createGroup(),o=document.createElement("a");return o.href="https://plotly.com/",o.target="_blank",o.setAttribute("data-title",jsVersion(N._(this.graphInfo,"Produced with Plotly.js"))),o.className="modebar-btn plotlyjsicon modebar-btn--logo",o.appendChild(this.createIcon(j.newplotlylogo)),i.appendChild(o),i},$.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},$.destroy=function(){N.removeElement(this.container.querySelector(".modebar")),N.deleteRelatedStyleRule(this._uid)},i.exports=createModeBar},37113:function(i,o,s){"use strict";var _=s(41940),F=s(22399),N=(0,s(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});i.exports={visible:{valType:"boolean",editType:"plot"},buttons:N,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:_({editType:"plot"}),bgcolor:{valType:"color",dflt:F.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:F.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(i){"use strict";i.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(44467),j=s(85501),Z=s(37113),X=s(89573);function buttonDefaults(i,o,s,F){var N=F.calendar;function coerce(s,F){return _.coerce(i,o,Z.buttons,s,F)}if(coerce("visible")){var j=coerce("step");"all"!==j&&(N&&"gregorian"!==N&&("month"===j||"year"===j)?o.stepmode="backward":coerce("stepmode"),coerce("count")),coerce("label")}}function getPosDflt(i,o,s){for(var _=s.filter(function(s){return o[s].anchor===i._id}),F=0,N=0;N<_.length;N++){var j=o[_[N]].domain;j&&(F=Math.max(j[1],F))}return[i.domain[0],F+X.yPad]}i.exports=function(i,o,s,$,ee){var et=i.rangeselector||{},er=N.newContainer(o,"rangeselector");function coerce(i,o){return _.coerce(et,er,Z,i,o)}if(coerce("visible",j(et,er,{name:"buttons",handleItemDefaults:buttonDefaults,calendar:ee}).length>0)){var en=getPosDflt(o,s,$);coerce("x",en[0]),coerce("y",en[1]),_.noneOrAll(i,o,["x","y"]),coerce("xanchor"),coerce("yanchor"),_.coerceFont(coerce,"font",s.font);var ei=coerce("bgcolor");coerce("activecolor",F.contrast(ei,X.lightAmount,X.darkAmount)),coerce("bordercolor"),coerce("borderwidth")}}},21598:function(i,o,s){"use strict";var _=s(39898),F=s(73972),N=s(74875),j=s(7901),Z=s(91424),X=s(71828),$=X.strTranslate,ee=s(63893),et=s(41675),er=s(18783),en=er.LINE_SPACING,ei=er.FROM_TL,eo=er.FROM_BR,es=s(89573),el=s(70565);function makeSelectorData(i){for(var o=et.list(i,"x",!0),s=[],_=0;_<o.length;_++){var F=o[_];F.rangeselector&&F.rangeselector.visible&&s.push(F)}return s}function selectorKeyFunc(i){return i._id}function isActive(i,o,s){if("all"===o.step)return!0===i.autorange;var _=Object.keys(s);return i.range[0]===s[_[0]]&&i.range[1]===s[_[1]]}function drawButtonRect(i,o,s){var _=X.ensureSingle(i,"rect","selector-rect",function(i){i.attr("shape-rendering","crispEdges")});_.attr({rx:es.rx,ry:es.ry}),_.call(j.stroke,o.bordercolor).call(j.fill,getFillColor(o,s)).style("stroke-width",o.borderwidth+"px")}function getFillColor(i,o){return o._isActive||o._isHovered?i.activecolor:i.bgcolor}function drawButtonText(i,o,s,_){function textLayout(i){ee.convertToTspans(i,_)}X.ensureSingle(i,"text","selector-text",function(i){i.attr("text-anchor","middle")}).call(Z.font,o.font).text(getLabel(s,_._fullLayout._meta)).call(textLayout)}function getLabel(i,o){return i.label?o?X.templateString(i.label,o):i.label:"all"===i.step?"all":i.count+i.step.charAt(0)}function reposition(i,o,s,F,j){var et=0,er=0,el=s.borderwidth;o.each(function(){var i=_.select(this).select(".selector-text"),o=Math.max(s.font.size*en*ee.lineCount(i),16)+3;er=Math.max(er,o)}),o.each(function(){var i=_.select(this),o=i.select(".selector-rect"),F=i.select(".selector-text"),N=F.node()&&Z.bBox(F.node()).width,j=s.font.size*en,X=ee.lineCount(F),ei=Math.max(N+10,es.minButtonWidth);i.attr("transform",$(el+et,el)),o.attr({x:0,y:0,width:ei,height:er}),ee.positionText(F,ei/2,er/2-(X-1)*j/2+3),et+=ei+5});var ec=i._fullLayout._size,eu=ec.l+ec.w*s.x,ef=ec.t+ec.h*(1-s.y),ed="left";X.isRightAnchor(s)&&(eu-=et,ed="right"),X.isCenterAnchor(s)&&(eu-=et/2,ed="center");var eh="top";X.isBottomAnchor(s)&&(ef-=er,eh="bottom"),X.isMiddleAnchor(s)&&(ef-=er/2,eh="middle"),et=Math.ceil(et),er=Math.ceil(er),eu=Math.round(eu),ef=Math.round(ef),N.autoMargin(i,F+"-range-selector",{x:s.x,y:s.y,l:et*ei[ed],r:et*eo[ed],b:er*eo[eh],t:er*ei[eh]}),j.attr("transform",$(eu,ef))}i.exports=function(i){var o=i._fullLayout._infolayer.selectAll(".rangeselector").data(makeSelectorData(i),selectorKeyFunc);o.enter().append("g").classed("rangeselector",!0),o.exit().remove(),o.style({cursor:"pointer","pointer-events":"all"}),o.each(function(o){var s=_.select(this),N=o.rangeselector,j=s.selectAll("g.button").data(X.filterVisible(N.buttons));j.enter().append("g").classed("button",!0),j.exit().remove(),j.each(function(s){var j=_.select(this),Z=el(o,s);s._isActive=isActive(o,s,Z),j.call(drawButtonRect,N,s),j.call(drawButtonText,N,s,i),j.on("click",function(){i._dragged||F.call("_guiRelayout",i,Z)}),j.on("mouseover",function(){s._isHovered=!0,j.call(drawButtonRect,N,s)}),j.on("mouseout",function(){s._isHovered=!1,j.call(drawButtonRect,N,s)})}),reposition(i,j,N,o._name,s)})}},70565:function(i,o,s){"use strict";var _=s(81041),F=s(71828).titleCase;function getXRange(i,o){var s,N=i.range,j=new Date(i.r2l(N[1])),Z=_["utc"+F(o.step)],X=o.count;switch(o.stepmode){case"backward":s=i.l2r(+Z.offset(j,-X));break;case"todate":var $=Z.offset(j,-X);s=i.l2r(+Z.ceil($))}return[s,N[1]]}i.exports=function(i,o){var s=i._name,_={};if("all"===o.step)_[s+".autorange"]=!0;else{var F=getXRange(i,o);_[s+".range[0]"]=F[0],_[s+".range[1]"]=F[1]}return _}},97218:function(i,o,s){"use strict";i.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:s(37113)}}},layoutAttributes:s(37113),handleDefaults:s(28674),draw:s(21598)}},75148:function(i,o,s){"use strict";var _=s(22399);i.exports={bgcolor:{valType:"color",dflt:_.background,editType:"plot"},bordercolor:{valType:"color",dflt:_.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(i,o,s){"use strict";var _=s(41675).list,F=s(71739).getAutoRange,N=s(73251);i.exports=function(i){for(var o=_(i,"x",!0),s=0;s<o.length;s++){var j=o[s],Z=j[N.name];Z&&Z.visible&&Z.autorange&&(Z._input.autorange=!0,Z._input.range=Z.range=F(i,j))}}},73251:function(i){"use strict";i.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(i,o,s){"use strict";var _=s(71828),F=s(44467),N=s(41675),j=s(75148),Z=s(47850);i.exports=function(i,o,s){var X=i[s],$=o[s];if(X.rangeslider||o._requestRangeslider[$._id]){_.isPlainObject(X.rangeslider)||(X.rangeslider={});var ee=X.rangeslider,et=F.newContainer($,"rangeslider");if(coerce("visible")){coerce("bgcolor",o.plot_bgcolor),coerce("bordercolor"),coerce("borderwidth"),coerce("thickness"),coerce("autorange",!$.isValidRange(ee.range)),coerce("range");var er=o._subplots;if(er)for(var en=er.cartesian.filter(function(i){return i.substr(0,i.indexOf("y"))===N.name2id(s)}).map(function(i){return i.substr(i.indexOf("y"),i.length)}),ei=_.simpleMap(en,N.id2name),eo=0;eo<ei.length;eo++){var es,el,ec,eu=ei[eo];es=ee[eu]||{},el=F.newContainer(et,eu,"yaxis");var ef=o[eu];es.range&&ef.isValidRange(es.range)&&(ec="fixed"),"match"!==coerceRange("rangemode",ec)&&coerceRange("range",ef.range.slice())}et._input=ee}}function coerce(i,o){return _.coerce(ee,et,j,i,o)}function coerceRange(i,o){return _.coerce(es,el,Z,i,o)}}},72413:function(i,o,s){"use strict";var _=s(39898),F=s(73972),N=s(74875),j=s(71828),Z=j.strTranslate,X=s(91424),$=s(7901),ee=s(92998),et=s(93612),er=s(41675),en=s(28569),ei=s(6964),eo=s(73251);function setupDragElement(i,o,s,F){if(!o._context.staticPlot){var N=i.select("rect."+eo.slideBoxClassName).node(),Z=i.select("rect."+eo.grabAreaMinClassName).node(),X=i.select("rect."+eo.grabAreaMaxClassName).node();i.on("mousedown",mouseDownHandler),i.on("touchstart",mouseDownHandler)}function mouseDownHandler(){var $=_.event,ee=$.target,et=$.clientX||$.touches[0].clientX,er=et-i.node().getBoundingClientRect().left,eo=F.d2p(s._rl[0]),es=F.d2p(s._rl[1]),el=en.coverSlip();function mouseMove(j){var $,en,ec,eu=+(j.clientX||j.touches[0].clientX)-et;switch(ee){case N:if(ec="ew-resize",eo+eu>s._length||es+eu<0)return;$=eo+eu,en=es+eu;break;case Z:if(ec="col-resize",eo+eu>s._length)return;$=eo+eu,en=es;break;case X:if(ec="col-resize",es+eu<0)return;$=eo,en=es+eu;break;default:ec="ew-resize",$=er,en=er+eu}if(en<$){var ef=en;en=$,$=ef}F._pixelMin=$,F._pixelMax=en,ei(_.select(el),ec),setDataRange(i,o,s,F)}function mouseUp(){el.removeEventListener("mousemove",mouseMove),el.removeEventListener("mouseup",mouseUp),this.removeEventListener("touchmove",mouseMove),this.removeEventListener("touchend",mouseUp),j.removeElement(el)}this.addEventListener("touchmove",mouseMove),this.addEventListener("touchend",mouseUp),el.addEventListener("mousemove",mouseMove),el.addEventListener("mouseup",mouseUp)}}function setDataRange(i,o,s,_){function clamp(i){return s.l2r(j.constrain(i,_._rl[0],_._rl[1]))}var N=clamp(_.p2d(_._pixelMin)),Z=clamp(_.p2d(_._pixelMax));window.requestAnimationFrame(function(){F.call("_guiRelayout",o,s._name+".range",[N,Z])})}function setPixelRange(i,o,s,_,F,N){var X=eo.handleWidth/2;function clamp(i){return j.constrain(i,0,_._width)}function clampOppAxis(i){return j.constrain(i,0,_._height)}function clampHandle(i){return j.constrain(i,-X,_._width+X)}var $=clamp(_.d2p(s._rl[0])),ee=clamp(_.d2p(s._rl[1]));if(i.select("rect."+eo.slideBoxClassName).attr("x",$).attr("width",ee-$),i.select("rect."+eo.maskMinClassName).attr("width",$),i.select("rect."+eo.maskMaxClassName).attr("x",ee).attr("width",_._width-ee),"match"!==N.rangemode){var et=_._height-clampOppAxis(_.d2pOppAxis(F._rl[1])),er=_._height-clampOppAxis(_.d2pOppAxis(F._rl[0]));i.select("rect."+eo.maskMinOppAxisClassName).attr("x",$).attr("height",et).attr("width",ee-$),i.select("rect."+eo.maskMaxOppAxisClassName).attr("x",$).attr("y",er).attr("height",_._height-er).attr("width",ee-$),i.select("rect."+eo.slideBoxClassName).attr("y",et).attr("height",er-et)}var en=Math.round(clampHandle($-X))-.5,ei=Math.round(clampHandle(ee-X))+.5;i.select("g."+eo.grabberMinClassName).attr("transform",Z(en,.5)),i.select("g."+eo.grabberMaxClassName).attr("transform",Z(ei,.5))}function drawBg(i,o,s,_){var F=j.ensureSingle(i,"rect",eo.bgClassName,function(i){i.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),N=_.borderwidth%2==0?_.borderwidth:_.borderwidth-1,ee=-_._offsetShift,et=X.crispRound(o,_.borderwidth);F.attr({width:_._width+N,height:_._height+N,transform:Z(ee,ee),"stroke-width":et}).call($.stroke,_.bordercolor).call($.fill,_.bgcolor)}function addClipPath(i,o,s,_){var F=o._fullLayout;j.ensureSingleById(F._topdefs,"clipPath",_._clipId,function(i){i.append("rect").attr({x:0,y:0})}).select("rect").attr({width:_._width,height:_._height})}function drawRangePlot(i,o,s,F){var Z,$=o.calcdata,ee=i.selectAll("g."+eo.rangePlotClassName).data(s._subplotsWith,j.identity);ee.enter().append("g").attr("class",function(i){return eo.rangePlotClassName+" "+i}).call(X.setClipUrl,F._clipId,o),ee.order(),ee.exit().remove(),ee.each(function(i,j){var X=_.select(this),ee=er.getFromId(o,i,"y"),en=ee._name,ei=F[en],eo={data:[],layout:{xaxis:{type:s.type,domain:[0,1],range:F.range.slice(),calendar:s.calendar},width:F._width,height:F._height,margin:{t:0,b:0,l:0,r:0}},_context:o._context};s.rangebreaks&&(eo.layout.xaxis.rangebreaks=s.rangebreaks),eo.layout[en]={type:ee.type,domain:[0,1],range:"match"!==ei.rangemode?ei.range.slice():ee.range.slice(),calendar:ee.calendar},ee.rangebreaks&&(eo.layout[en].rangebreaks=ee.rangebreaks),N.supplyDefaults(eo);var es=eo._fullLayout.xaxis,el=eo._fullLayout[en];es.clearCalc(),es.setScale(),el.clearCalc(),el.setScale();var ec={id:i,plotgroup:X,xaxis:es,yaxis:el,isRangePlot:!0};0===j?Z=ec:(ec.mainplot="xy",ec.mainplotinfo=Z),et.rangePlot(o,ec,filterRangePlotCalcData($,i))})}function filterRangePlotCalcData(i,o){for(var s=[],_=0;_<i.length;_++){var F=i[_],N=F[0].trace;N.xaxis+N.yaxis===o&&s.push(F)}return s}function drawMasks(i,o,s,_,F){j.ensureSingle(i,"rect",eo.maskMinClassName,function(i){i.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",_._height).call($.fill,eo.maskColor),j.ensureSingle(i,"rect",eo.maskMaxClassName,function(i){i.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",_._height).call($.fill,eo.maskColor),"match"!==F.rangemode&&(j.ensureSingle(i,"rect",eo.maskMinOppAxisClassName,function(i){i.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",_._width).call($.fill,eo.maskOppAxisColor),j.ensureSingle(i,"rect",eo.maskMaxOppAxisClassName,function(i){i.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",_._width).style("border-top",eo.maskOppBorder).call($.fill,eo.maskOppAxisColor))}function drawSlideBox(i,o,s,_){o._context.staticPlot||j.ensureSingle(i,"rect",eo.slideBoxClassName,function(i){i.attr({y:0,cursor:eo.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:_._height,fill:eo.slideBoxFill})}function drawGrabbers(i,o,s,_){var F=j.ensureSingle(i,"g",eo.grabberMinClassName),N=j.ensureSingle(i,"g",eo.grabberMaxClassName),Z={x:0,width:eo.handleWidth,rx:eo.handleRadius,fill:$.background,stroke:$.defaultLine,"stroke-width":eo.handleStrokeWidth,"shape-rendering":"crispEdges"},X={y:Math.round(_._height/4),height:Math.round(_._height/2)};j.ensureSingle(F,"rect",eo.handleMinClassName,function(i){i.attr(Z)}).attr(X),j.ensureSingle(N,"rect",eo.handleMaxClassName,function(i){i.attr(Z)}).attr(X);var ee={width:eo.grabAreaWidth,x:0,y:0,fill:eo.grabAreaFill,cursor:o._context.staticPlot?void 0:eo.grabAreaCursor};j.ensureSingle(F,"rect",eo.grabAreaMinClassName,function(i){i.attr(ee)}).attr("height",_._height),j.ensureSingle(N,"rect",eo.grabAreaMaxClassName,function(i){i.attr(ee)}).attr("height",_._height)}i.exports=function(i){for(var o=i._fullLayout,s=o._rangeSliderData,F=0;F<s.length;F++){var N=s[F][eo.name];N._clipId=N._id+"-"+o._uid}function keyFunction(i){return i._name}var X=o._infolayer.selectAll("g."+eo.containerClassName).data(s,keyFunction);X.exit().each(function(i){var s=i[eo.name];o._topdefs.select("#"+s._clipId).remove()}).remove(),0!==s.length&&(X.enter().append("g").classed(eo.containerClassName,!0).attr("pointer-events","all"),X.each(function(s){var F=_.select(this),N=s[eo.name],X=o[er.id2name(s.anchor)],$=N[er.id2name(s.anchor)];if(N.range){var et,en=j.simpleMap(N.range,s.r2l),ei=j.simpleMap(s.range,s.r2l);et=ei[0]<ei[1]?[Math.min(en[0],ei[0]),Math.max(en[1],ei[1])]:[Math.max(en[0],ei[0]),Math.min(en[1],ei[1])],N.range=N._input.range=j.simpleMap(et,s.l2r)}s.cleanRange("rangeslider.range");var es=o._size,el=s.domain;N._width=es.w*(el[1]-el[0]);var ec=Math.round(es.l+es.w*el[0]),eu=Math.round(es.t+es.h*(1-s._counterDomainMin)+("bottom"===s.side?s._depth:0)+N._offsetShift+eo.extraPad);F.attr("transform",Z(ec,eu)),N._rl=j.simpleMap(N.range,s.r2l);var ef=N._rl[0],ed=N._rl[1],eh=ed-ef;if(N.p2d=function(i){return i/N._width*eh+ef},N.d2p=function(i){return(i-ef)/eh*N._width},s.rangebreaks){var ep=s.locateBreaks(ef,ed);if(ep.length){var eg,em,ey=0;for(eg=0;eg<ep.length;eg++)ey+=(em=ep[eg]).max-em.min;var ev=N._width/(ed-ef-ey),ex=[-ev*ef];for(eg=0;eg<ep.length;eg++)em=ep[eg],ex.push(ex[ex.length-1]-ev*(em.max-em.min));for(eg=0,N.d2p=function(i){for(var o=ex[0],s=0;s<ep.length;s++){var _=ep[s];if(i>=_.max)o=ex[s+1];else if(i<_.min)break}return o+ev*i};eg<ep.length;eg++)(em=ep[eg]).pmin=N.d2p(em.min),em.pmax=N.d2p(em.max);N.p2d=function(i){for(var o=ex[0],s=0;s<ep.length;s++){var _=ep[s];if(i>=_.pmax)o=ex[s+1];else if(i<_.pmin)break}return(i-o)/ev}}}if("match"!==$.rangemode){var e_=X.r2l($.range[0]),ew=X.r2l($.range[1])-e_;N.d2pOppAxis=function(i){return(i-e_)/ew*N._height}}F.call(drawBg,i,s,N).call(addClipPath,i,s,N).call(drawRangePlot,i,s,N).call(drawMasks,i,s,N,$).call(drawSlideBox,i,s,N).call(drawGrabbers,i,s,N),setupDragElement(F,i,s,N),setPixelRange(F,i,s,N,X,$),"bottom"===s.side&&ee.draw(i,s._id+"title",{propContainer:s,propName:s._name+".title",placeholder:o._dfltTitle.x,attributes:{x:s._offset+s._length/2,y:eu+N._height+N._offsetShift+10+1.5*s.title.font.size,"text-anchor":"middle"}})}))}},549:function(i,o,s){"use strict";var _=s(41675),F=s(63893),N=s(73251),j=s(18783).LINE_SPACING,Z=N.name;function isVisible(i){var o=i&&i[Z];return o&&o.visible}o.isVisible=isVisible,o.makeData=function(i){var o=_.list({_fullLayout:i},"x",!0),s=i.margin,F=[];if(!i._has("gl2d"))for(var N=0;N<o.length;N++){var j=o[N];if(isVisible(j)){F.push(j);var X=j[Z];X._id=Z+j._id,X._height=(i.height-s.b-s.t)*X.thickness,X._offsetShift=Math.floor(X.borderwidth/2)}}i._rangeSliderData=F},o.autoMarginOpts=function(i,o){var s=i._fullLayout,_=o[Z],X=o._id.charAt(0),$=0,ee=0;return"bottom"===o.side&&($=o._depth,o.title.text!==s._dfltTitle[X]&&(ee=1.5*o.title.font.size+10+_._offsetShift+(o.title.text.match(F.BR_TAG_ALL)||[]).length*o.title.font.size*j)),{x:0,y:o._counterDomainMin,l:0,r:0,t:0,b:_._height+$+Math.max(s.margin.b,ee),pad:N.extraPad+2*_._offsetShift}}},13137:function(i,o,s){"use strict";var _=s(71828),F=s(75148),N=s(47850),j=s(549);i.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:_.extendFlat({},F,{yaxis:N})}}},layoutAttributes:s(75148),handleDefaults:s(26377),calcAutorange:s(88443),draw:s(72413),isVisible:j.isVisible,makeData:j.makeData,autoMarginOpts:j.autoMarginOpts}},47850:function(i){"use strict";i.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(i,o,s){"use strict";var _=s(50215),F=s(82196).line,N=s(79952).P,j=s(1426).extendFlat,Z=s(30962).overrideAll,X=s(44467).templatedArray;s(24695),i.exports=Z(X("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:j({},_.xref,{}),yref:j({},_.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:F.color,width:j({},F.width,{min:1,dflt:1}),dash:j({},N,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(i){"use strict";i.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(85501),j=s(8389),Z=s(30477);function handleSelectionDefaults(i,o,s){function coerce(s,F){return _.coerce(i,o,j,s,F)}var N=coerce("path"),X="path"!==coerce("type",N?"path":"rect");X&&delete o.path,coerce("opacity"),coerce("line.color"),coerce("line.width"),coerce("line.dash");for(var $=["x","y"],ee=0;ee<2;ee++){var et,er,en,ei=$[ee],eo={_fullLayout:s},es=F.coerceRef(i,o,eo,ei);if((et=F.getFromId(eo,es))._selectionIndices.push(o._index),en=Z.rangeToShapePosition(et),er=Z.shapePositionToRange(et),X){var el=ei+"0",ec=ei+"1",eu=i[el],ef=i[ec];i[el]=er(i[el],!0),i[ec]=er(i[ec],!0),F.coercePosition(o,eo,coerce,es,el),F.coercePosition(o,eo,coerce,es,ec);var ed=o[el],eh=o[ec];void 0!==ed&&void 0!==eh&&(o[el]=en(ed),o[ec]=en(eh),i[el]=eu,i[ec]=ef)}}X&&_.noneOrAll(i,o,["x0","x1","y0","y1"])}i.exports=function(i,o){N(i,o,{name:"selections",handleItemDefaults:handleSelectionDefaults});for(var s=o.selections,_=0;_<s.length;_++){var F=s[_];F&&void 0===F.path&&(void 0===F.x0||void 0===F.x1||void 0===F.y0||void 0===F.y1)&&(o.selections[_]=null)}}},32485:function(i,o,s){"use strict";var _=s(60165).readPaths,F=s(42359),N=s(51873).clearOutlineControllers,j=s(7901),Z=s(91424),X=s(44467).arrayEditor,$=s(30477),ee=$.getPathString;function draw(i){var o=i._fullLayout;for(var s in N(i),o._selectionLayer.selectAll("path").remove(),o._plots){var _=o._plots[s].selectionLayer;_&&_.selectAll("path").remove()}for(var F=0;F<o.selections.length;F++)drawOne(i,F)}function couldHaveActiveSelection(i){return i._context.editSelection}function drawOne(i,o){i._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+o+'"]').remove();var s=$.makeSelectionsOptionsAndPlotinfo(i,o),N=s.options,et=s.plotinfo;function drawSelection(s){var $=ee(i,N),er={"data-index":o,"fill-rule":"evenodd",d:$},en=N.opacity,ei="rgba(0,0,0,0)",eo=N.line.color||j.contrast(i._fullLayout.plot_bgcolor),es=N.line.width,el=N.line.dash;es||(es=5,el="solid");var ec=couldHaveActiveSelection(i)&&i._fullLayout._activeSelectionIndex===o;ec&&(ei=i._fullLayout.activeselection.fillcolor,en=i._fullLayout.activeselection.opacity);for(var eu=[],ef=1;ef>=0;ef--){var ed=s.append("path").attr(er).style("opacity",ef?.1:en).call(j.stroke,eo).call(j.fill,ei).call(Z.dashLine,ef?"solid":el,ef?4+es:es);if(setClipPath(ed,i,N),ec){var eh=X(i.layout,"selections",N);ed.style({cursor:"move"});var ep={element:ed.node(),plotinfo:et,gd:i,editHelpers:eh,isActiveSelection:!0};F(_($,i),ed,ep)}else ed.style("pointer-events",ef?"all":"none");eu[ef]=ed}var eg=eu[0];eu[1].node().addEventListener("click",function(){return activateSelection(i,eg)})}N._input&&drawSelection(i._fullLayout._selectionLayer)}function setClipPath(i,o,s){var _=s.xref+s.yref;Z.setClipUrl(i,"clip"+o._fullLayout._uid+_,o)}function activateSelection(i,o){if(couldHaveActiveSelection(i)){var s=+o.node().getAttribute("data-index");if(s>=0){if(s===i._fullLayout._activeSelectionIndex){deactivateSelection(i);return}i._fullLayout._activeSelectionIndex=s,i._fullLayout._deactivateSelection=deactivateSelection,draw(i)}}}function activateLastSelection(i){if(couldHaveActiveSelection(i)){var o=i._fullLayout.selections.length-1;i._fullLayout._activeSelectionIndex=o,i._fullLayout._deactivateSelection=deactivateSelection,draw(i)}}function deactivateSelection(i){couldHaveActiveSelection(i)&&i._fullLayout._activeSelectionIndex>=0&&(N(i),delete i._fullLayout._activeSelectionIndex,draw(i))}i.exports={draw:draw,drawOne:drawOne,activateLastSelection:activateLastSelection}},53777:function(i,o,s){"use strict";var _=s(79952).P,F=s(1426).extendFlat;i.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:F({},_,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(i){"use strict";i.exports=function(i,o,s){s("newselection.mode"),s("newselection.line.width")&&(s("newselection.line.color"),s("newselection.line.dash")),s("activeselection.fillcolor"),s("activeselection.opacity")}},35855:function(i,o,s){"use strict";var _=s(64505).selectMode,F=s(51873).clearOutline,N=s(60165),j=N.readPaths,Z=N.writePaths,X=N.fixDatesForPaths;i.exports=function(i,o){if(i.length){var s,N=i[0][0];if(N){var $=N.getAttribute("d"),ee=o.gd,et=ee._fullLayout.newselection,er=o.plotinfo,en=er.xaxis,ei=er.yaxis,eo=o.isActiveSelection,es=o.dragmode,el=(ee.layout||{}).selections||[];if(!_(es)&&void 0!==eo){var ec=ee._fullLayout._activeSelectionIndex;if(ec<el.length)switch(ee._fullLayout.selections[ec].type){case"rect":es="select";break;case"path":es="lasso"}}var eu=j($,ee,er,eo),ef={xref:en._id,yref:ei._id,opacity:et.opacity,line:{color:et.line.color,width:et.line.width,dash:et.line.dash}};1===eu.length&&(s=eu[0]),s&&5===s.length&&"select"===es?(ef.type="rect",ef.x0=s[0][1],ef.y0=s[0][2],ef.x1=s[2][1],ef.y1=s[2][2]):(ef.type="path",en&&ei&&X(eu,en,ei),ef.path=Z(eu),s=null),F(ee);for(var ed=o.editHelpers,eh=(ed||{}).modifyItem,ep=[],eg=0;eg<el.length;eg++){var em=ee._fullLayout.selections[eg];if(!em){ep[eg]=em;continue}if(ep[eg]=em._input,void 0!==eo&&eg===ee._fullLayout._activeSelectionIndex)switch(em.type){case"rect":eh("x0",ef.x0),eh("x1",ef.x1),eh("y0",ef.y0),eh("y1",ef.y1);break;case"path":eh("path",ef.path)}}return void 0===eo?(ep.push(ef),ep):ed?ed.getUpdateObj():{}}}}},75549:function(i,o,s){"use strict";var _=s(71828).strTranslate;function p2r(i,o){switch(i.type){case"log":return i.p2d(o);case"date":return i.p2r(o,0,i.calendar);default:return i.p2r(o)}}function r2p(i,o){switch(i.type){case"log":return i.d2p(o);case"date":return i.r2p(o,0,i.calendar);default:return i.r2p(o)}}function axValue(i){var o="y"===i._id.charAt(0)?1:0;return function(s){return p2r(i,s[o])}}function getTransform(i){return _(i.xaxis._offset,i.yaxis._offset)}i.exports={p2r:p2r,r2p:r2p,axValue:axValue,getTransform:getTransform}},47322:function(i,o,s){"use strict";var _=s(32485),F=s(3937);i.exports={moduleType:"component",name:"selections",layoutAttributes:s(8389),supplyLayoutDefaults:s(59402),supplyDrawNewSelectionDefaults:s(90849),includeBasePlot:s(76325)("selections"),draw:_.draw,drawOne:_.drawOne,reselect:F.reselect,prepSelect:F.prepSelect,clearOutline:F.clearOutline,clearSelectionsCache:F.clearSelectionsCache,selectOnClick:F.selectOnClick}},3937:function(i,o,s){"use strict";var _=s(52142),F=s(38258),N=s(73972),j=s(91424).dashStyle,Z=s(7901),X=s(30211),$=s(23469).makeEventData,ee=s(64505),et=ee.freeMode,er=ee.rectMode,en=ee.drawMode,ei=ee.openMode,eo=ee.selectMode,es=s(30477),el=s(21459),ec=s(42359),eu=s(51873).clearOutline,ef=s(60165),ed=ef.handleEllipse,eh=ef.readPaths,ep=s(90551).newShapes,eg=s(35855),em=s(32485).activateLastSelection,ey=s(71828),ev=ey.sorterAsc,ex=s(61082),e_=s(79990),ew=s(41675).getFromId,eT=s(33306),ek=s(61549).redrawReglTraces,eA=s(34122),eS=eA.MINSELECT,eM=ex.filter,eC=ex.tester,eE=s(75549),eL=eE.p2r,eP=eE.axValue,eI=eE.getTransform;function hasSubplot(i){return void 0!==i.subplot}function prepSelect(i,o,s,_,F){var $,ee,es,el,eu,ef,eh,ep=!hasSubplot(_),eg=et(F),em=er(F),ev=ei(F),ex=en(F),ew=eo(F),eT="drawline"===F,ek="drawcircle"===F,eE=eT||ek,eL=_.gd,eP=eL._fullLayout,eO=ew&&"immediate"===eP.newselection.mode&&ep,eD=eP._zoomlayer,eR=_.element.getBoundingClientRect(),eB=_.plotinfo,eF=eI(eB),ez=o-eR.left,eN=s-eR.top;eP._calcInverseTransform(eL);var ej=ey.apply3DTransform(eP._invTransform)(ez,eN);ez=ej[0],eN=ej[1];var eV=eP._invScaleX,eU=eP._invScaleY,eH=ez,eG=eN,eW="M"+ez+","+eN,eZ=_.xaxes[0],eY=_.yaxes[0],eX=eZ._length,eK=eY._length,eJ=i.altKey&&!(en(F)&&ev);coerceSelectionsCache(i,eL,_),eg&&($=eM([[ez,eN]],eA.BENDPX));var e$=eD.selectAll("path.select-outline-"+eB.id).data([1]),eQ=ex?eP.newshape:eP.newselection;ex&&(_.hasText=eQ.label.text||eQ.label.texttemplate);var e0=ex&&!ev?eQ.fillcolor:"rgba(0,0,0,0)",e1=eQ.line.color||(ep?Z.contrast(eL._fullLayout.plot_bgcolor):"#7f7f7f");e$.enter().append("path").attr("class","select-outline select-outline-"+eB.id).style({opacity:ex?eQ.opacity/2:1,"stroke-dasharray":j(eQ.line.dash,eQ.line.width),"stroke-width":eQ.line.width+"px","shape-rendering":"crispEdges"}).call(Z.stroke,e1).call(Z.fill,e0).attr("fill-rule","evenodd").classed("cursor-move",!!ex).attr("transform",eF).attr("d",eW+"Z");var e2=eD.append("path").attr("class","zoombox-corners").style({fill:Z.background,stroke:Z.defaultLine,"stroke-width":1}).attr("transform",eF).attr("d","M0,0Z");if(ex&&_.hasText){var e3=eD.select(".label-temp");e3.empty()&&(e3=eD.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var e5=eP._uid+eA.SELECTID,e4=[],e6=determineSearchTraces(eL,_.xaxes,_.yaxes,_.subplot);eO&&!i.shiftKey&&(_._clearSubplotSelections=function(){if(ep){var i=eZ._id,o=eY._id;deselectSubplot(eL,i,o,e6);for(var s=(eL.layout||{}).selections||[],_=[],F=!1,j=0;j<s.length;j++){var Z=eP.selections[j];Z.xref!==i||Z.yref!==o?_.push(s[j]):F=!0}F&&(eL._fullLayout._noEmitSelectedAtStart=!0,N.call("_guiRelayout",eL,{selections:_}))}});var e8=getFillRangeItems(_);_.moveFn=function(i,o){_._clearSubplotSelections&&(_._clearSubplotSelections(),_._clearSubplotSelections=void 0);var s=Math.abs((eH=Math.max(0,Math.min(eX,eV*i+ez)))-ez),F=Math.abs((eG=Math.max(0,Math.min(eK,eU*o+eN)))-eN);if(em){if(ew){var N,j,Z,X=eP.selectdirection;switch(N="any"===X?F<Math.min(.6*s,eS)?"h":s<Math.min(.6*F,eS)?"v":"d":X){case"h":j=ek?eK/2:0,Z=eK;break;case"v":j=ek?eX/2:0,Z=eX}}if(ex)switch(eP.newshape.drawdirection){case"vertical":N="h",j=ek?eK/2:0,Z=eK;break;case"horizontal":N="v",j=ek?eX/2:0,Z=eX;break;case"ortho":s<F?(N="h",j=eN,Z=eG):(N="v",j=ez,Z=eH);break;default:N="d"}"h"===N?((el=eE?ed(ek,[eH,j],[eH,Z]):[[ez,j],[ez,Z],[eH,Z],[eH,j]]).xmin=eE?eH:Math.min(ez,eH),el.xmax=eE?eH:Math.max(ez,eH),el.ymin=Math.min(j,Z),el.ymax=Math.max(j,Z),e2.attr("d","M"+el.xmin+","+(eN-eS)+"h-4v"+2*eS+"h4ZM"+(el.xmax-1)+","+(eN-eS)+"h4v"+2*eS+"h-4Z")):"v"===N?((el=eE?ed(ek,[j,eG],[Z,eG]):[[j,eN],[j,eG],[Z,eG],[Z,eN]]).xmin=Math.min(j,Z),el.xmax=Math.max(j,Z),el.ymin=eE?eG:Math.min(eN,eG),el.ymax=eE?eG:Math.max(eN,eG),e2.attr("d","M"+(ez-eS)+","+el.ymin+"v-4h"+2*eS+"v4ZM"+(ez-eS)+","+(el.ymax-1)+"v4h"+2*eS+"v-4Z")):"d"===N&&((el=eE?ed(ek,[ez,eN],[eH,eG]):[[ez,eN],[ez,eG],[eH,eG],[eH,eN]]).xmin=Math.min(ez,eH),el.xmax=Math.max(ez,eH),el.ymin=Math.min(eN,eG),el.ymax=Math.max(eN,eG),e2.attr("d","M0,0Z"))}else eg&&($.addPt([eH,eG]),el=$.filtered);if(_.selectionDefs&&_.selectionDefs.length?(es=mergePolygons(_.mergedPolygons,el,eJ),el.subtract=eJ,ee=multiTester(_.selectionDefs.concat([el]))):(es=[el],ee=eC(el)),ec(convertPoly(es,ev),e$,_),ew){var et,er=reselect(eL,!1),en=er.eventData?er.eventData.points.slice():[];ee=(er=reselect(eL,!1,ee,e6,_)).selectionTesters,eh=er.eventData,et=$?$.filtered:castMultiPolygon(es),e_.throttle(e5,eA.SELECTDELAY,function(){for(var i=(e4=_doSelect(ee,e6)).slice(),o=0;o<en.length;o++){for(var s=en[o],_=!1,F=0;F<i.length;F++)if(i[F].curveNumber===s.curveNumber&&i[F].pointNumber===s.pointNumber){_=!0;break}_||i.push(s)}i.length&&(eh||(eh={}),eh.points=i),e8(eh,et),emitSelecting(eL,eh)})}},_.clickFn=function(i,o){if(e2.remove(),eL._fullLayout._activeShapeIndex>=0){eL._fullLayout._deactivateShape(eL);return}if(!ex){var s=eP.clickmode;e_.done(e5).then(function(){if(e_.clear(e5),2===i){for(e$.remove(),eu=0;eu<e6.length;eu++)(ef=e6[eu])._module.selectPoints(ef,!1);if(updateSelectedState(eL,e6),clearSelectionsCache(_),emitDeselect(eL),e6.length){var F=e6[0].xaxis,j=e6[0].yaxis;if(F&&j){for(var Z=[],$=eL._fullLayout.selections,ee=0;ee<$.length;ee++){var et=$[ee];et&&(et.xref!==F._id||et.yref!==j._id)&&Z.push(et)}Z.length<$.length&&(eL._fullLayout._noEmitSelectedAtStart=!0,N.call("_guiRelayout",eL,{selections:Z}))}}}else s.indexOf("select")>-1&&selectOnClick(o,eL,_.xaxes,_.yaxes,_.subplot,_,e$),"event"===s&&emitSelected(eL,void 0);X.click(eL,o,eB.id)}).catch(ey.error)}},_.doneFn=function(){e2.remove(),e_.done(e5).then(function(){e_.clear(e5),!eO&&el&&_.selectionDefs&&(el.subtract=eJ,_.selectionDefs.push(el),_.mergedPolygons.length=0,[].push.apply(_.mergedPolygons,es)),(eO||ex)&&clearSelectionsCache(_,eO),_.doneFnCompleted&&_.doneFnCompleted(e4),ew&&emitSelected(eL,eh)}).catch(ey.error)}}function selectOnClick(i,o,s,_,F,N,j){var Z,X,$,ee,et,er,en,eo,es,el=o._hoverdata,eu=o._fullLayout.clickmode.indexOf("event")>-1,ef=[];if(isHoverDataSet(el)){coerceSelectionsCache(i,o,N);var ed=extractClickedPtInfo(el,Z=determineSearchTraces(o,s,_,F));if(ed.pointNumbers.length>0?isOnlyThisBinSelected(Z,ed):isOnlyOnePointSelected(Z)&&(er=isPointOrBinSelected(ed))){for(j&&j.remove(),es=0;es<Z.length;es++)(X=Z[es])._module.selectPoints(X,!1);updateSelectedState(o,Z),clearSelectionsCache(N),eu&&emitDeselect(o)}else{for(es=0,en=i.shiftKey&&(void 0!==er?er:isPointOrBinSelected(ed)),$=newPointSelectionDef(ed.pointNumber,ed.searchInfo,en),ee=multiTester(N.selectionDefs.concat([$]),ee);es<Z.length;es++)if(et=fillSelectionItem(Z[es]._module.selectPoints(Z[es],ee),Z[es]),ef.length)for(var eh=0;eh<et.length;eh++)ef.push(et[eh]);else ef=et;updateSelectedState(o,Z,eo={points:ef}),$&&N&&N.selectionDefs.push($),j&&ec(convertPoly(N.mergedPolygons,ei(N.dragmode)),j,N),eu&&emitSelected(o,eo)}}}function newPointSelectionDef(i,o,s){return{pointNumber:i,searchInfo:o,subtract:!!s}}function isPointSelectionDef(i){return"pointNumber"in i&&"searchInfo"in i}function newPointNumTester(i){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(o,s,_,F){var N=i.searchInfo.cd[0].trace._expandedIndex;return F.cd[0].trace._expandedIndex===N&&_===i.pointNumber},isRect:!1,degenerate:!1,subtract:!!i.subtract}}function multiTester(i){if(i.length){for(var o=[],s=isPointSelectionDef(i[0])?0:i[0][0][0],_=s,F=isPointSelectionDef(i[0])?0:i[0][0][1],N=F,j=0;j<i.length;j++)if(isPointSelectionDef(i[j]))o.push(newPointNumTester(i[j]));else{var Z=eC(i[j]);Z.subtract=!!i[j].subtract,o.push(Z),s=Math.min(s,Z.xmin),_=Math.max(_,Z.xmax),F=Math.min(F,Z.ymin),N=Math.max(N,Z.ymax)}return{xmin:s,xmax:_,ymin:F,ymax:N,pts:[],contains:contains,isRect:!1,degenerate:!1}}function contains(i,s,_,F){for(var N=!1,j=0;j<o.length;j++)o[j].contains(i,s,_,F)&&(N=!o[j].subtract);return N}}function coerceSelectionsCache(i,o,s){var _=o._fullLayout,F=s.plotinfo,N=s.dragmode,j=_._lastSelectedSubplot&&_._lastSelectedSubplot===F.id,Z=(i.shiftKey||i.altKey)&&!(en(N)&&ei(N));j&&Z&&F.selection&&F.selection.selectionDefs&&!s.selectionDefs?(s.selectionDefs=F.selection.selectionDefs,s.mergedPolygons=F.selection.mergedPolygons):Z&&F.selection||clearSelectionsCache(s),j||(eu(o),_._lastSelectedSubplot=F.id)}function hasActiveShape(i){return i._fullLayout._activeShapeIndex>=0}function hasActiveSelection(i){return i._fullLayout._activeSelectionIndex>=0}function clearSelectionsCache(i,o){var s=i.dragmode,_=i.plotinfo,F=i.gd;hasActiveShape(F)&&F._fullLayout._deactivateShape(F),hasActiveSelection(F)&&F._fullLayout._deactivateSelection(F);var j=F._fullLayout._zoomlayer,Z=en(s),X=eo(s);if(Z||X){var $,ee,et=j.selectAll(".select-outline-"+_.id);et&&F._fullLayout._outlining&&(Z&&($=ep(et,i)),$&&N.call("_guiRelayout",F,{shapes:$}),X&&!hasSubplot(i)&&(ee=eg(et,i)),ee&&(F._fullLayout._noEmitSelectedAtStart=!0,N.call("_guiRelayout",F,{selections:ee}).then(function(){o&&em(F)})),F._fullLayout._outlining=!1)}_.selection={},_.selection.selectionDefs=i.selectionDefs=[],_.selection.mergedPolygons=i.mergedPolygons=[]}function getAxId(i){return i._id}function determineSearchTraces(i,o,s,_){if(!i.calcdata)return[];var F,N,j,Z=[],X=o.map(getAxId),$=s.map(getAxId);for(j=0;j<i.calcdata.length;j++)if(!0===(N=(F=i.calcdata[j])[0].trace).visible&&N._module&&N._module.selectPoints){if(hasSubplot({subplot:_})&&(N.subplot===_||N.geo===_))Z.push(createSearchInfo(N._module,F,o[0],s[0]));else if("splom"===N.type){if(N._xaxes[X[0]]&&N._yaxes[$[0]]){var ee=createSearchInfo(N._module,F,o[0],s[0]);ee.scene=i._fullLayout._splomScenes[N.uid],Z.push(ee)}}else if("sankey"===N.type){var et=createSearchInfo(N._module,F,o[0],s[0]);Z.push(et)}else{if(-1===X.indexOf(N.xaxis)||-1===$.indexOf(N.yaxis))continue;Z.push(createSearchInfo(N._module,F,ew(i,N.xaxis),ew(i,N.yaxis)))}}return Z}function createSearchInfo(i,o,s,_){return{_module:i,cd:o,xaxis:s,yaxis:_}}function isHoverDataSet(i){return i&&Array.isArray(i)&&!0!==i[0].hoverOnBox}function extractClickedPtInfo(i,o){var s,_,F=i[0],N=-1,j=[];for(_=0;_<o.length;_++)if(s=o[_],F.fullData._expandedIndex===s.cd[0].trace._expandedIndex){if(!0===F.hoverOnBox)break;void 0!==F.pointNumber?N=F.pointNumber:void 0!==F.binNumber&&(N=F.binNumber,j=F.pointNumbers);break}return{pointNumber:N,pointNumbers:j,searchInfo:s}}function isPointOrBinSelected(i){var o=i.searchInfo.cd[0].trace,s=i.pointNumber,_=i.pointNumbers,F=_.length>0?_[0]:s;return!!o.selectedpoints&&o.selectedpoints.indexOf(F)>-1}function isOnlyThisBinSelected(i,o){var s,_,F,N=[];for(F=0;F<i.length;F++)(s=i[F]).cd[0].trace.selectedpoints&&s.cd[0].trace.selectedpoints.length>0&&N.push(s);if(1===N.length&&N[0]===o.searchInfo&&(_=o.searchInfo.cd[0].trace).selectedpoints.length===o.pointNumbers.length){for(F=0;F<o.pointNumbers.length;F++)if(0>_.selectedpoints.indexOf(o.pointNumbers[F]))return!1;return!0}return!1}function isOnlyOnePointSelected(i){var o,s,_=0;for(s=0;s<i.length;s++)if((o=i[s].cd[0].trace).selectedpoints&&(o.selectedpoints.length>1||(_+=o.selectedpoints.length)>1))return!1;return 1===_}function updateSelectedState(i,o,s){for(_=0;_<o.length;_++){var _,F,N=o[_].cd[0].trace._fullInput,j=i._fullLayout._tracePreGUI[N.uid]||{};void 0===j.selectedpoints&&(j.selectedpoints=N._input.selectedpoints||null)}if(s){var Z=s.points||[];for(_=0;_<o.length;_++)(F=o[_].cd[0].trace)._input.selectedpoints=F._fullInput.selectedpoints=[],F._fullInput!==F&&(F.selectedpoints=[]);for(var X=0;X<Z.length;X++){var $=Z[X],ee=$.data,et=$.fullData,er=$.pointIndex,en=$.pointIndices;en?([].push.apply(ee.selectedpoints,en),F._fullInput!==F&&[].push.apply(et.selectedpoints,en)):(ee.selectedpoints.push(er),F._fullInput!==F&&et.selectedpoints.push(er))}}else for(_=0;_<o.length;_++)F=o[_].cd[0].trace,delete F.selectedpoints,delete F._input.selectedpoints,F._fullInput!==F&&delete F._fullInput.selectedpoints;updateReglSelectedState(i,o)}function updateReglSelectedState(i,o){for(var s=!1,_=0;_<o.length;_++){var F=o[_],j=F.cd;N.traceIs(j[0].trace,"regl")&&(s=!0);var Z=F._module,X=Z.styleOnSelect||Z.style;X&&(X(i,j,j[0].node3),j[0].nodeRangePlot3&&X(i,j,j[0].nodeRangePlot3))}s&&(eT(i),ek(i))}function mergePolygons(i,o,s){for(var F=(s?_.difference:_.union)({regions:i},{regions:[o]}).regions.reverse(),N=0;N<F.length;N++){var j=F[N];j.subtract=getSubtract(j,F.slice(0,N))}return F}function fillSelectionItem(i,o){if(Array.isArray(i))for(var s=o.cd,_=o.cd[0].trace,F=0;F<i.length;F++)i[F]=$(i[F],_,s);return i}function convertPoly(i,o){for(var s=[],_=0;_<i.length;_++){s[_]=[];for(var F=0;F<i[_].length;F++){s[_][F]=[],s[_][F][0]=F?"L":"M";for(var N=0;N<i[_][F].length;N++)s[_][F].push(i[_][F][N])}o||s[_].push(["Z",s[_][0][1],s[_][0][2]])}return s}function _doSelect(i,o){for(var s,_,F=[],N=[],j=0;j<o.length;j++){var Z=o[j];_=Z._module.selectPoints(Z,i),N.push(_),s=fillSelectionItem(_,Z),F=F.concat(s)}return F}function reselect(i,o,s,_,F){var N,j,Z,X=!!_;F&&(N=F.plotinfo,j=F.xaxes[0]._id,Z=F.yaxes[0]._id);var $=[],ee=[],et=getLayoutPolygons(i),er=i._fullLayout;if(N){var ei=er._zoomlayer,es=er.dragmode,el=en(es),ec=eo(es);if(el||ec){var eu=ew(i,j,"x"),ef=ew(i,Z,"y");if(eu&&ef){var ed=ei.selectAll(".select-outline-"+N.id);if(ed&&i._fullLayout._outlining&&ed.length){for(var ep=eh(ed[0][0].getAttribute("d"),i,N),eg=[],em=0;em<ep.length;em++){for(var ey=ep[em],ev=[],ex=0;ex<ey.length;ex++)ev.push([convert(eu,ey[ex][1]),convert(ef,ey[ex][2])]);ev.xref=j,ev.yref=Z,ev.subtract=getSubtract(ev,eg),eg.push(ev)}et=et.concat(eg)}}}}var e_=j&&Z?[j+Z]:er._subplots.cartesian;epmtySplomSelectionBatch(i);for(var eT={},ek=0;ek<e_.length;ek++){var eA=e_[ek],eS=eA.indexOf("y"),eM=eA.slice(0,eS),eC=eA.slice(eS),eE=j&&Z?s:void 0;if(eE=addTester(et,eM,eC,eE)){var eL=_;if(!X){var eP=ew(i,eM,"x"),eI=ew(i,eC,"y");eL=determineSearchTraces(i,[eP],[eI],eA);for(var eO=0;eO<eL.length;eO++){var eD=eL[eO],eR=eD.cd[0],eB=eR.trace;if("scattergl"===eD._module.name&&!eR.t.xpx){var eF=eB.x,ez=eB.y,eN=eB._length;eR.t.xpx=[],eR.t.ypx=[];for(var ej=0;ej<eN;ej++)eR.t.xpx[ej]=eP.c2p(eF[ej]),eR.t.ypx[ej]=eI.c2p(ez[ej])}"splom"!==eD._module.name||eT[eB.uid]||(eT[eB.uid]=!0)}}var eV=_doSelect(eE,eL);$=$.concat(eV),ee=ee.concat(eL)}}var eU={points:$};updateSelectedState(i,ee,eU);var eH=er.clickmode.indexOf("event")>-1&&o;if(!N&&o){var eG=getLayoutPolygons(i,!0);if(eG.length){var eW=eG[0].xref,eZ=eG[0].yref;if(eW&&eZ){var eY=castMultiPolygon(eG);makeFillRangeItems([ew(i,eW,"x"),ew(i,eZ,"y")])(eU,eY)}}i._fullLayout._noEmitSelectedAtStart?i._fullLayout._noEmitSelectedAtStart=!1:eH&&emitSelected(i,eU),er._reselect=!1}if(!N&&er._deselect){var eX=er._deselect;subplotSelected(j=eX.xref,Z=eX.yref,ee)||deselectSubplot(i,j,Z,_),eH&&(eU.points.length?emitSelected(i,eU):emitDeselect(i)),er._deselect=!1}return{eventData:eU,selectionTesters:s}}function epmtySplomSelectionBatch(i){var o=i.calcdata;if(o)for(var s=0;s<o.length;s++){var _=o[s][0].trace,F=i._fullLayout._splomScenes;if(F){var N=F[_.uid];N&&(N.selectBatch=[])}}}function subplotSelected(i,o,s){for(var _=0;_<s.length;_++){var F=s[_];if(F.xaxis&&F.xaxis._id===i&&F.yaxis&&F.yaxis._id===o)return!0}return!1}function deselectSubplot(i,o,s,_){_=determineSearchTraces(i,[ew(i,o,"x")],[ew(i,s,"y")],o+s);for(var F=0;F<_.length;F++){var N=_[F];N._module.selectPoints(N,!1)}updateSelectedState(i,_)}function addTester(i,o,s,_){for(var F,N=0;N<i.length;N++){var j=i[N];if(o===j.xref&&s===j.yref){if(F){var Z=!!j.subtract;_=multiTester(F=mergePolygons(F,j,Z))}else F=[j],_=eC(j)}}return _}function getLayoutPolygons(i,o){for(var s=[],_=i._fullLayout,F=_.selections,N=F.length,j=0;j<N;j++)if(!o||j===_._activeSelectionIndex){var Z,X,$,ee,et,er=F[j];if(er){var en=er.xref,ei=er.yref,eo=ew(i,en,"x"),ec=ew(i,ei,"y");if("rect"===er.type){et=[];var eu=convert(eo,er.x0),ef=convert(eo,er.x1),ed=convert(ec,er.y0),eh=convert(ec,er.y1);et=[[eu,ed],[eu,eh],[ef,eh],[ef,ed]],Z=Math.min(eu,ef),X=Math.max(eu,ef),$=Math.min(ed,eh),ee=Math.max(ed,eh),et.xmin=Z,et.xmax=X,et.ymin=$,et.ymax=ee,et.xref=en,et.yref=ei,et.subtract=!1,et.isRect=!0,s.push(et)}else if("path"===er.type)for(var ep=er.path.split("Z"),eg=[],em=0;em<ep.length;em++){var ey=ep[em];if(ey){ey+="Z";var ev=es.extractPathCoords(ey,el.paramIsX,"raw"),ex=es.extractPathCoords(ey,el.paramIsY,"raw");Z=1/0,X=-1/0,$=1/0,ee=-1/0,et=[];for(var e_=0;e_<ev.length;e_++){var eT=convert(eo,ev[e_]),ek=convert(ec,ex[e_]);et.push([eT,ek]),Z=Math.min(eT,Z),X=Math.max(eT,X),$=Math.min(ek,$),ee=Math.max(ek,ee)}et.xmin=Z,et.xmax=X,et.ymin=$,et.ymax=ee,et.xref=en,et.yref=ei,et.subtract=getSubtract(et,eg),eg.push(et),s.push(et)}}}}return s}function getSubtract(i,o){for(var s=!1,_=0;_<o.length;_++)for(var N=o[_],j=0;j<i.length;j++)if(F(i[j],N)){s=!s;break}return s}function convert(i,o){return"date"===i.type&&(o=o.replace("_"," ")),"log"===i.type?i.c2p(o):i.r2p(o,null,i.calendar)}function castMultiPolygon(i){for(var o=i.length,s=[],_=0;_<o;_++){var F=i[_];s=(s=s.concat(F)).concat([F[0]])}return computeRectAndRanges(s)}function computeRectAndRanges(i){return i.isRect=5===i.length&&i[0][0]===i[4][0]&&i[0][1]===i[4][1]&&i[0][0]===i[1][0]&&i[2][0]===i[3][0]&&i[0][1]===i[3][1]&&i[1][1]===i[2][1]||i[0][1]===i[1][1]&&i[2][1]===i[3][1]&&i[0][0]===i[3][0]&&i[1][0]===i[2][0],i.isRect&&(i.xmin=Math.min(i[0][0],i[2][0]),i.xmax=Math.max(i[0][0],i[2][0]),i.ymin=Math.min(i[0][1],i[2][1]),i.ymax=Math.max(i[0][1],i[2][1])),i}function makeFillRangeItems(i){return function(o,s){for(var _,F,N=0;N<i.length;N++){var j=i[N],Z=j._id,X=Z.charAt(0);if(s.isRect){_||(_={});var $=s[X+"min"],ee=s[X+"max"];void 0!==$&&void 0!==ee&&(_[Z]=[eL(j,$),eL(j,ee)].sort(ev))}else F||(F={}),F[Z]=s.map(eP(j))}_&&(o.range=_),F&&(o.lassoPoints=F)}}function getFillRangeItems(i){return i.plotinfo.fillRangeItems||makeFillRangeItems(i.xaxes.concat(i.yaxes))}function emitSelecting(i,o){i.emit("plotly_selecting",o)}function emitSelected(i,o){o&&(o.selections=(i.layout||{}).selections||[]),i.emit("plotly_selected",o)}function emitDeselect(i){i.emit("plotly_deselect",null)}i.exports={reselect:reselect,prepSelect:prepSelect,clearOutline:eu,clearSelectionsCache:clearSelectionsCache,selectOnClick:selectOnClick}},89827:function(i,o,s){"use strict";var _=s(50215),F=s(41940),N=s(82196).line,j=s(79952).P,Z=s(1426).extendFlat,X=s(44467).templatedArray;s(24695);var $=s(9012),ee=s(5386).R,et=s(37281);i.exports=X("shape",{visible:Z({},$.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:Z({},$.legend,{editType:"calc+arraydraw"}),legendgroup:Z({},$.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:Z({},$.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:F({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:Z({},$.legendrank,{editType:"calc+arraydraw"}),legendwidth:Z({},$.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:Z({},_.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:Z({},_.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:Z({},N.color,{editType:"arraydraw"}),width:Z({},N.width,{editType:"calc+arraydraw"}),dash:Z({},j,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:ee({},{keys:Object.keys(et)}),font:F({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(21459),j=s(30477);function calcXPaddingOptions(i){return calcPaddingOptions(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function calcYPaddingOptions(i){return calcPaddingOptions(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function calcPaddingOptions(i,o,s,F,Z,X){var $=i/2;if("pixel"!==o)return{ppad:$};var ee=Z?j.extractPathCoords(Z,X?N.paramIsY:N.paramIsX):[s,F],et=_.aggNums(Math.max,null,ee),er=_.aggNums(Math.min,null,ee),en=er<0?Math.abs(er)+$:$,ei=et>0?et+$:$;return{ppad:$,ppadplus:X?en:ei,ppadminus:X?ei:en}}function shapeBounds(i,o,s,_,F){var Z,X,$,ee,et="category"===i.type||"multicategory"===i.type?i.r2c:i.d2c;if(void 0!==o)return[et(o),et(s)];if(_){var er=1/0,en=-1/0,ei=_.match(N.segmentRE);for("date"===i.type&&(et=j.decodeDate(et)),Z=0;Z<ei.length;Z++)void 0!==(X=F[ei[Z].charAt(0)].drawn)&&($=ei[Z].substr(1).match(N.paramRE))&&!($.length<X)&&((ee=et($[X]))<er&&(er=ee),ee>en&&(en=ee));if(en>=er)return[er,en]}}i.exports=function(i){var o=i._fullLayout,s=_.filterVisible(o.shapes);if(s.length&&i._fullData.length)for(var j=0;j<s.length;j++){var Z,X,$=s[j];$._extremes={};var ee=F.getRefType($.xref),et=F.getRefType($.yref);if("paper"!==$.xref&&"domain"!==ee){var er="pixel"===$.xsizemode?$.xanchor:$.x0,en="pixel"===$.xsizemode?$.xanchor:$.x1;(X=shapeBounds(Z=F.getFromId(i,$.xref),er,en,$.path,N.paramIsX))&&($._extremes[Z._id]=F.findExtremes(Z,X,calcXPaddingOptions($)))}if("paper"!==$.yref&&"domain"!==et){var ei="pixel"===$.ysizemode?$.yanchor:$.y0,eo="pixel"===$.ysizemode?$.yanchor:$.y1;(X=shapeBounds(Z=F.getFromId(i,$.yref),ei,eo,$.path,N.paramIsY))&&($._extremes[Z._id]=F.findExtremes(Z,X,calcYPaddingOptions($)))}}}},21459:function(i){"use strict";i.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(85501),j=s(89827),Z=s(30477);function dfltLabelYanchor(i,o){return i?"bottom":-1!==o.indexOf("top")?"top":-1!==o.indexOf("bottom")?"bottom":"middle"}function handleShapeDefaults(i,o,s){function coerce(s,F){return _.coerce(i,o,j,s,F)}if(o._isShape=!0,coerce("visible")){coerce("showlegend")&&(coerce("legend"),coerce("legendwidth"),coerce("legendgroup"),coerce("legendgrouptitle.text"),_.coerceFont(coerce,"legendgrouptitle.font"),coerce("legendrank"));var N=coerce("path"),X=coerce("type",N?"path":"rect"),$="path"!==X;$&&delete o.path,coerce("editable"),coerce("layer"),coerce("opacity"),coerce("fillcolor"),coerce("fillrule"),coerce("line.width")&&(coerce("line.color"),coerce("line.dash"));for(var ee=coerce("xsizemode"),et=coerce("ysizemode"),er=["x","y"],en=0;en<2;en++){var ei,eo,es,el,ec,eu=er[en],ef=eu+"anchor",ed="x"===eu?ee:et,eh={_fullLayout:s},ep=F.coerceRef(i,o,eh,eu,void 0,"paper");if("range"===F.getRefType(ep)?((es=F.getFromId(eh,ep))._shapeIndices.push(o._index),ec=Z.rangeToShapePosition(es),el=Z.shapePositionToRange(es)):el=ec=_.identity,$){var eg=eu+"0",em=eu+"1",ey=i[eg],ev=i[em];i[eg]=el(i[eg],!0),i[em]=el(i[em],!0),"pixel"===ed?(coerce(eg,0),coerce(em,10)):(F.coercePosition(o,eh,coerce,ep,eg,.25),F.coercePosition(o,eh,coerce,ep,em,.75)),o[eg]=ec(o[eg]),o[em]=ec(o[em]),i[eg]=ey,i[em]=ev}if("pixel"===ed){var ex=i[ef];i[ef]=el(i[ef],!0),F.coercePosition(o,eh,coerce,ep,ef,.25),o[ef]=ec(o[ef]),i[ef]=ex}}$&&_.noneOrAll(i,o,["x0","x1","y0","y1"]);var e_="line"===X;if($&&(ei=coerce("label.texttemplate")),ei||(eo=coerce("label.text")),eo||ei){coerce("label.textangle");var ew=coerce("label.textposition",e_?"middle":"middle center");coerce("label.xanchor"),coerce("label.yanchor",dfltLabelYanchor(e_,ew)),coerce("label.padding"),_.coerceFont(coerce,"label.font",s.font)}}}i.exports=function(i,o){N(i,o,{name:"shapes",handleItemDefaults:handleShapeDefaults})}},48100:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(63893),j=s(91424),Z=s(60165).readPaths,X=s(30477),$=X.getPathString,ee=s(37281),et=s(18783).FROM_TL;function calcTextAngle(i,o,s,_){var F;return F=Math.abs(s-i),-180/Math.PI*Math.atan2(s>=i?o-_:_-o,F)}function calcTextPosition(i,o,s,_,F,N,j){var Z,X,$,ee,er=F.label.textposition,en=F.label.textangle,ei=F.label.padding,eo=F.type,es=Math.PI/180*N,el=Math.sin(es),ec=Math.cos(es),eu=F.label.xanchor,ef=F.label.yanchor;if("line"===eo){"start"===er?(Z=i,X=o):"end"===er?(Z=s,X=_):(Z=(i+s)/2,X=(o+_)/2),"auto"===eu&&(eu="start"===er?"auto"===en?s>i?"left":s<i?"right":"center":s>i?"right":s<i?"left":"center":"end"===er?"auto"===en?s>i?"right":s<i?"left":"center":s>i?"left":s<i?"right":"center":"center");var ed={bottom:-1,middle:0,top:1};if("auto"===en){var eh=ed[ef];$=-ei*el*eh,ee=ei*ec*eh}else{var ep={left:1,center:0,right:-1}[eu],eg=ed[ef];$=ei*ep,ee=ei*eg}Z+=$,X+=ee}else $=ei+3,-1!==er.indexOf("right")?(Z=Math.max(i,s)-$,"auto"===eu&&(eu="right")):-1!==er.indexOf("left")?(Z=Math.min(i,s)+$,"auto"===eu&&(eu="left")):(Z=(i+s)/2,"auto"===eu&&(eu="center")),X=-1!==er.indexOf("top")?Math.min(o,_):-1!==er.indexOf("bottom")?Math.max(o,_):(o+_)/2,ee=ei,"bottom"===ef?X-=ee:"top"===ef&&(X+=ee);var em=et[ef],ey=F.label.font.size,ev=j.height;return{textx:Z+(ev*em-ey)*el,texty:X+-(ev*em-ey)*ec,xanchor:eu}}i.exports=function(i,o,s,et){if(et.selectAll(".shape-label").remove(),s.label.text||s.label.texttemplate){if(s.label.texttemplate){var er,en,ei,eo,es,el={};if("path"!==s.type){var ec=F.getFromId(i,s.xref),eu=F.getFromId(i,s.yref);for(var ef in ee){var ed=ee[ef](s,ec,eu);void 0!==ed&&(el[ef]=ed)}}er=_.texttemplateStringForShapes(s.label.texttemplate,{},i._fullLayout._d3locale,el)}else er=s.label.text;var eh=s.label.font,ep=et.append("g").attr({"data-index":o}).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(er);if(s.path){var eg=Z($(i,s),i);en=1/0,eo=1/0,ei=-1/0,es=-1/0;for(var em=0;em<eg.length;em++)for(var ey=0;ey<eg[em].length;ey++)for(var ev=eg[em][ey],ex=1;ex<ev.length;ex+=2){var e_=ev[ex],ew=ev[ex+1];en=Math.min(en,e_),ei=Math.max(ei,e_),eo=Math.min(eo,ew),es=Math.max(es,ew)}}else{var eT=F.getFromId(i,s.xref),ek=F.getRefType(s.xref),eA=F.getFromId(i,s.yref),eS=F.getRefType(s.yref),eM=X.getDataToPixel(i,eT,!1,ek),eC=X.getDataToPixel(i,eA,!0,eS);en=eM(s.x0),ei=eM(s.x1),eo=eC(s.y0),es=eC(s.y1)}var eE=s.label.textangle;"auto"===eE&&(eE="line"===s.type?calcTextAngle(en,eo,ei,es):0),ep.call(function(o){return o.call(j.font,eh).attr({}),N.convertToTspans(o,i),o});var eL=calcTextPosition(en,eo,ei,es,s,eE,j.bBox(ep.node())),eP=eL.textx,eI=eL.texty,eO=eL.xanchor;ep.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[eO],y:eI,x:eP,transform:"rotate("+eE+","+eP+","+eI+")"}).call(N.positionText,eP,eI)}}},42359:function(i,o,s){"use strict";var _=s(71828).strTranslate,F=s(28569),N=s(64505),j=N.drawMode,Z=N.selectMode,X=s(73972),$=s(7901),ee=s(89995),et=ee.i000,er=ee.i090,en=ee.i180,ei=ee.i270,eo=s(51873).clearOutlineControllers,es=s(60165),el=es.pointsOnRectangle,ec=es.pointsOnEllipse,eu=es.writePaths,ef=s(90551).newShapes,ed=s(90551).createShapeObj,eh=s(35855),ep=s(48100);function recordPositions(i,o){for(var s=0;s<o.length;s++){var _=o[s];i[s]=[];for(var F=0;F<_.length;F++){i[s][F]=[];for(var N=0;N<_[F].length;N++)i[s][F][N]=_[F][N]}}return i}function getNextPoint(i,o){var s,_,F,N=i[o][1],j=i[o][2],Z=i.length;return _=i[s=(o+1)%Z][1],F=i[s][2],_===N&&F===j&&(_=i[s=(o+2)%Z][1],F=i[s][2]),[s,_,F]}function eraseActiveSelection(i){if(Z(i._fullLayout.dragmode)){eo(i);var o=i._fullLayout._activeSelectionIndex,s=(i.layout||{}).selections||[];if(o<s.length){for(var _=[],F=0;F<s.length;F++)F!==o&&_.push(s[F]);delete i._fullLayout._activeSelectionIndex;var N=i._fullLayout.selections[o];i._fullLayout._deselect={xref:N.xref,yref:N.yref},X.call("_guiRelayout",i,{selections:_})}}}i.exports=function displayOutlines(i,o,s,N){N||(N=0);var ee,es,eg,em,ey,ev=s.gd;function redraw(){displayOutlines(i,o,s,N++),(ec(i[0])||s.hasText)&&update({redrawing:!0})}function update(i){var _={};void 0!==s.isActiveShape&&(s.isActiveShape=!1,_=ef(o,s)),void 0!==s.isActiveSelection&&(s.isActiveSelection=!1,_=eh(o,s),ev._fullLayout._reselect=!0),Object.keys(_).length&&X.call((i||{}).redrawing?"relayout":"_guiRelayout",ev,_)}var ex=ev._fullLayout._zoomlayer,e_=s.dragmode,ew=j(e_),eT=Z(e_);if((ew||eT)&&(ev._fullLayout._outlining=!0),eo(ev),o.attr("d",eu(i)),!N&&(s.isActiveShape||s.isActiveSelection)&&(ey=recordPositions([],i),addVertexControllers(ex.append("g").attr("class","outline-controllers")),addGroupControllers()),ew&&s.hasText){var ek=ex.select(".label-temp");ep(ev,"label-temp",ed(o,s,s.dragmode),ek)}function startDragVertex(i){eg=+i.srcElement.getAttribute("data-i"),em=+i.srcElement.getAttribute("data-j"),ee[eg][em].moveFn=moveVertexController}function moveVertexController(o,_){if(i.length){var F=ey[eg][em][1],N=ey[eg][em][2],j=i[eg],Z=j.length;if(el(j)){var X=o,$=_;s.isActiveSelection&&(getNextPoint(j,em)[1]===j[em][1]?$=0:X=0);for(var ee=0;ee<Z;ee++)if(ee!==em){var et=j[ee];et[1]===j[em][1]&&(et[1]=F+X),et[2]===j[em][2]&&(et[2]=N+$)}if(j[em][1]=F+X,j[em][2]=N+$,!el(j))for(var er=0;er<Z;er++)for(var en=0;en<j[er].length;en++)j[er][en]=ey[eg][er][en]}else j[em][1]=F+o,j[em][2]=N+_;redraw()}}function endDragVertexController(){update()}function removeVertex(){if(i.length&&i[eg]&&i[eg].length){for(var o=[],s=0;s<i[eg].length;s++)s!==em&&o.push(i[eg][s]);o.length>1&&!(2===o.length&&"Z"===o[1][0])&&(0===em&&(o[0][0]="M"),i[eg]=o,redraw(),update())}}function clickVertexController(o,s){if(2===o){eg=+s.srcElement.getAttribute("data-i"),em=+s.srcElement.getAttribute("data-j");var _=i[eg];el(_)||ec(_)||removeVertex()}}function addVertexControllers(o){ee=[];for(var N=0;N<i.length;N++){var j=i[N],Z=el(j),X=!Z&&ec(j);ee[N]=[];for(var eo=j.length,es=0;es<eo;es++)if("Z"!==j[es][0]){if(X&&es!==et&&es!==er&&es!==en&&es!==ei)continue;var eu,ef=Z&&s.isActiveSelection;ef&&(eu=getNextPoint(j,es));var ed=j[es][1],eh=j[es][2],ep=o.append(ef?"rect":"circle").attr("data-i",N).attr("data-j",es).style({fill:$.background,stroke:$.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(ef){var eg=eu[1]-ed,em=eu[2]-eh,ey=em?5:Math.max(Math.min(25,Math.abs(eg)-5),5),ex=eg?5:Math.max(Math.min(25,Math.abs(em)-5),5);ep.classed(em?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",ey).attr("height",ex).attr("x",ed-ey/2).attr("y",eh-ex/2).attr("transform",_(eg/2,em/2))}else ep.classed("cursor-grab",!0).attr("r",5).attr("cx",ed).attr("cy",eh);ee[N][es]={element:ep.node(),gd:ev,prepFn:startDragVertex,doneFn:endDragVertexController,clickFn:clickVertexController},F.init(ee[N][es])}}}function moveGroup(o,s){if(i.length)for(var _=0;_<i.length;_++)for(var F=0;F<i[_].length;F++)for(var N=0;N+2<i[_][F].length;N+=2)i[_][F][N+1]=ey[_][F][N+1]+o,i[_][F][N+2]=ey[_][F][N+2]+s}function moveGroupController(i,o){moveGroup(i,o),redraw()}function startDragGroupController(i){(eg=+i.srcElement.getAttribute("data-i"))||(eg=0),es[eg].moveFn=moveGroupController}function endDragGroupController(){update()}function clickGroupController(i){2===i&&eraseActiveSelection(ev)}function addGroupControllers(){es=[],i.length&&(es[0]={element:o[0][0],gd:ev,prepFn:startDragGroupController,doneFn:endDragGroupController,clickFn:clickGroupController},F.init(es[0]))}}},34031:function(i,o,s){"use strict";var _=s(39898),F=s(73972),N=s(71828),j=s(89298),Z=s(60165).readPaths,X=s(42359),$=s(48100),ee=s(51873).clearOutlineControllers,et=s(7901),er=s(91424),en=s(44467).arrayEditor,ei=s(28569),eo=s(6964),es=s(21459),el=s(30477),ec=el.getPathString;function draw(i){var o=i._fullLayout;for(var s in o._shapeUpperLayer.selectAll("path").remove(),o._shapeLowerLayer.selectAll("path").remove(),o._shapeUpperLayer.selectAll("text").remove(),o._shapeLowerLayer.selectAll("text").remove(),o._plots){var _=o._plots[s].shapelayer;_&&(_.selectAll("path").remove(),_.selectAll("text").remove())}for(var F=0;F<o.shapes.length;F++)!0===o.shapes[F].visible&&drawOne(i,F)}function shouldSkipEdits(i){return!!i._fullLayout._outlining}function couldHaveActiveShape(i){return!i._context.edits.shapePosition}function drawOne(i,o){i._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+o+'"]').remove();var s=el.makeShapesOptionsAndPlotinfo(i,o),_=s.options,F=s.plotinfo;function drawShape(s){var N,j=ec(i,_),ee={"data-index":o,"fill-rule":_.fillrule,d:j},ei=_.opacity,eo=_.fillcolor,es=_.line.width?_.line.color:"rgba(0,0,0,0)",el=_.line.width,eu=_.line.dash;el||!0!==_.editable||(el=5,eu="solid");var ef="Z"!==j[j.length-1],ed=couldHaveActiveShape(i)&&_.editable&&i._fullLayout._activeShapeIndex===o;ed&&(eo=ef?"rgba(0,0,0,0)":i._fullLayout.activeshape.fillcolor,ei=i._fullLayout.activeshape.opacity);var eh=s.append("g").classed("shape-group",!0).attr({"data-index":o}),ep=eh.append("path").attr(ee).style("opacity",ei).call(et.stroke,es).call(et.fill,eo).call(er.dashLine,eu,el);if(setClipPath(eh,i,_),$(i,o,_,eh),(ed||i._context.edits.shapePosition)&&(N=en(i.layout,"shapes",_)),ed){ep.style({cursor:"move"});var eg={element:ep.node(),plotinfo:F,gd:i,editHelpers:N,hasText:_.label.text||_.label.texttemplate,isActiveShape:!0};X(Z(j,i),ep,eg)}else i._context.edits.shapePosition?setupDragElement(i,ep,_,o,s,N):!0===_.editable&&ep.style("pointer-events",ef||et.opacity(eo)*ei<=.5?"stroke":"all");ep.node().addEventListener("click",function(){return activateShape(i,ep)})}_._input&&!0===_.visible&&drawShape("below"!==_.layer?i._fullLayout._shapeUpperLayer:"paper"===_.xref||"paper"===_.yref?i._fullLayout._shapeLowerLayer:F._hadPlotinfo?(F.mainplotinfo||F).shapelayer:i._fullLayout._shapeLowerLayer)}function setClipPath(i,o,s){var _=(s.xref+s.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");er.setClipUrl(i,_?"clip"+o._fullLayout._uid+_:null,o)}function setupDragElement(i,o,s,Z,X,ee){var et,en,eu,ef,ed,eh,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA="pixel"===s.xsizemode,eS="pixel"===s.ysizemode,eM="line"===s.type,eC="path"===s.type,eE=ee.modifyItem,eL=_.select(o.node().parentNode),eP=j.getFromId(i,s.xref),eI=j.getRefType(s.xref),eO=j.getFromId(i,s.yref),eD=j.getRefType(s.yref),eR=el.getDataToPixel(i,eP,!1,eI),eB=el.getDataToPixel(i,eO,!0,eD),eF=el.getPixelToData(i,eP,!1,eI),ez=el.getPixelToData(i,eO,!0,eD),eN=obtainSensoryElement(),ej={element:eN.node(),gd:i,prepFn:startDrag,doneFn:endDrag,clickFn:abortDrag};function obtainSensoryElement(){return eM?createLineDragHandles():o}function createLineDragHandles(){var i=Math.max(s.line.width,10),_=X.append("g").attr("data-index",Z).attr("drag-helper",!0);_.append("path").attr("d",o.attr("d")).style({cursor:"move","stroke-width":i,"stroke-opacity":"0"});var F={"fill-opacity":"0"},N=Math.max(i/2,10);return _.append("circle").attr({"data-line-point":"start-point",cx:eA?eR(s.xanchor)+s.x0:eR(s.x0),cy:eS?eB(s.yanchor)-s.y0:eB(s.y0),r:N}).style(F).classed("cursor-grab",!0),_.append("circle").attr({"data-line-point":"end-point",cx:eA?eR(s.xanchor)+s.x1:eR(s.x1),cy:eS?eB(s.yanchor)-s.y1:eB(s.y1),r:N}).style(F).classed("cursor-grab",!0),_}function updateDragMode(s){if(shouldSkipEdits(i)){ek=null;return}if(eM)ek="path"===s.target.tagName?"move":"start-point"===s.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var _=ej.element.getBoundingClientRect(),F=_.right-_.left,N=_.bottom-_.top,j=s.clientX-_.left,Z=s.clientY-_.top,X=!eC&&F>10&&N>10&&!s.shiftKey?ei.getCursor(j/F,1-Z/N):"move";eo(o,X),ek=X.split("-")[0]}}function startDrag(_){shouldSkipEdits(i)||(eA&&(ed=eR(s.xanchor)),eS&&(eh=eB(s.yanchor)),"path"===s.type?eT=s.path:(et=eA?s.x0:eR(s.x0),en=eS?s.y0:eB(s.y0),eu=eA?s.x1:eR(s.x1),ef=eS?s.y1:eB(s.y1)),et<eu?(em=et,e_="x0",ey=eu,ew="x1"):(em=eu,e_="x1",ey=et,ew="x0"),!eS&&en<ef||eS&&en>ef?(ep=en,ev="y0",eg=ef,ex="y1"):(ep=ef,ev="y1",eg=en,ex="y0"),updateDragMode(_),renderVisualCues(X,s),deactivateClipPathTemporarily(o,s,i),ej.moveFn="move"===ek?moveShape:resizeShape,ej.altKey=_.altKey)}function endDrag(){shouldSkipEdits(i)||(eo(o),removeVisualCues(X),setClipPath(o,i,s),F.call("_guiRelayout",i,ee.getUpdateObj()))}function abortDrag(){shouldSkipEdits(i)||removeVisualCues(X)}function moveShape(_,F){if("path"===s.type){var noOp=function(i){return i},N=noOp,j=noOp;eA?eE("xanchor",s.xanchor=eF(ed+_)):(N=function(i){return eF(eR(i)+_)},eP&&"date"===eP.type&&(N=el.encodeDate(N))),eS?eE("yanchor",s.yanchor=ez(eh+F)):(j=function(i){return ez(eB(i)+F)},eO&&"date"===eO.type&&(j=el.encodeDate(j))),eE("path",s.path=movePath(eT,N,j))}else eA?eE("xanchor",s.xanchor=eF(ed+_)):(eE("x0",s.x0=eF(et+_)),eE("x1",s.x1=eF(eu+_))),eS?eE("yanchor",s.yanchor=ez(eh+F)):(eE("y0",s.y0=ez(en+F)),eE("y1",s.y1=ez(ef+F)));o.attr("d",ec(i,s)),renderVisualCues(X,s),$(i,Z,s,eL)}function resizeShape(_,F){if(eC){var noOp=function(i){return i},N=noOp,j=noOp;eA?eE("xanchor",s.xanchor=eF(ed+_)):(N=function(i){return eF(eR(i)+_)},eP&&"date"===eP.type&&(N=el.encodeDate(N))),eS?eE("yanchor",s.yanchor=ez(eh+F)):(j=function(i){return ez(eB(i)+F)},eO&&"date"===eO.type&&(j=el.encodeDate(j))),eE("path",s.path=movePath(eT,N,j))}else if(eM){if("resize-over-start-point"===ek){var ee=et+_,er=eS?en-F:en+F;eE("x0",s.x0=eA?ee:eF(ee)),eE("y0",s.y0=eS?er:ez(er))}else if("resize-over-end-point"===ek){var ei=eu+_,eo=eS?ef-F:ef+F;eE("x1",s.x1=eA?ei:eF(ei)),eE("y1",s.y1=eS?eo:ez(eo))}}else{var has=function(i){return -1!==ek.indexOf(i)},es=has("n"),eI=has("s"),eD=has("w"),eN=has("e"),ej=es?ep+F:ep,eV=eI?eg+F:eg,eU=eD?em+_:em,eH=eN?ey+_:ey;eS&&(es&&(ej=ep-F),eI&&(eV=eg-F)),(!eS&&eV-ej>10||eS&&ej-eV>10)&&(eE(ev,s[ev]=eS?ej:ez(ej)),eE(ex,s[ex]=eS?eV:ez(eV))),eH-eU>10&&(eE(e_,s[e_]=eA?eU:eF(eU)),eE(ew,s[ew]=eA?eH:eF(eH)))}o.attr("d",ec(i,s)),renderVisualCues(X,s),$(i,Z,s,eL)}function renderVisualCues(i,o){(eA||eS)&&renderAnchor();function renderAnchor(){var s="path"!==o.type,_=i.selectAll(".visual-cue").data([0]);_.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var F=eR(eA?o.xanchor:N.midRange(s?[o.x0,o.x1]:el.extractPathCoords(o.path,es.paramIsX))),j=eB(eS?o.yanchor:N.midRange(s?[o.y0,o.y1]:el.extractPathCoords(o.path,es.paramIsY)));if(F=el.roundPositionForSharpStrokeRendering(F,1),j=el.roundPositionForSharpStrokeRendering(j,1),eA&&eS){var Z="M"+(F-1-1)+","+(j-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";_.attr("d",Z)}else if(eA){var X="M"+(F-1-1)+","+(j-9-1)+"v18 h2 v-18 Z";_.attr("d",X)}else{var $="M"+(F-9-1)+","+(j-1-1)+"h18 v2 h-18 Z";_.attr("d",$)}}}function removeVisualCues(i){i.selectAll(".visual-cue").remove()}function deactivateClipPathTemporarily(i,o,s){var _=o.xref,F=o.yref,N=j.getFromId(s,_),Z=j.getFromId(s,F),X="";"paper"===_||N.autorange||(X+=_),"paper"===F||Z.autorange||(X+=F),er.setClipUrl(i,X?"clip"+s._fullLayout._uid+X:null,s)}ei.init(ej),eN.node().onmousemove=updateDragMode}function movePath(i,o,s){return i.replace(es.segmentRE,function(i){var _=0,F=i.charAt(0),N=es.paramIsX[F],j=es.paramIsY[F],Z=es.numParams[F];return F+i.substr(1).replace(es.paramRE,function(i){return _>=Z||(N[_]?i=o(i):j[_]&&(i=s(i)),_++),i})})}function activateShape(i,o){if(couldHaveActiveShape(i)){var s=+o.node().getAttribute("data-index");if(s>=0){if(s===i._fullLayout._activeShapeIndex){deactivateShape(i);return}i._fullLayout._activeShapeIndex=s,i._fullLayout._deactivateShape=deactivateShape,draw(i)}}}function deactivateShape(i){couldHaveActiveShape(i)&&i._fullLayout._activeShapeIndex>=0&&(ee(i),delete i._fullLayout._activeShapeIndex,draw(i))}function eraseActiveShape(i){if(couldHaveActiveShape(i)){ee(i);var o=i._fullLayout._activeShapeIndex,s=(i.layout||{}).shapes||[];if(o<s.length){for(var _=[],N=0;N<s.length;N++)N!==o&&_.push(s[N]);return delete i._fullLayout._activeShapeIndex,F.call("_guiRelayout",i,{shapes:_})}}}i.exports={draw:draw,drawOne:drawOne,eraseActiveShape:eraseActiveShape,drawLabel:$}},29241:function(i,o,s){"use strict";var _=s(30962).overrideAll,F=s(9012),N=s(41940),j=s(79952).P,Z=s(1426).extendFlat,X=s(5386).R,$=s(37281);i.exports=_({newshape:{visible:Z({},F.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:Z({},F.legend,{}),legendgroup:Z({},F.legendgroup,{}),legendgrouptitle:{text:Z({},F.legendgrouptitle.text,{}),font:N({})},legendrank:Z({},F.legendrank,{}),legendwidth:Z({},F.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:Z({},j,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:Z({},F.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:X({newshape:!0},{keys:Object.keys($)}),font:N({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function(i){"use strict";i.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(i,o,s){"use strict";var _=s(7901),F=s(71828);function dfltLabelYanchor(i,o){return i?"bottom":-1!==o.indexOf("top")?"top":-1!==o.indexOf("bottom")?"bottom":"middle"}i.exports=function(i,o,s){if(s("newshape.visible"),s("newshape.name"),s("newshape.showlegend"),s("newshape.legend"),s("newshape.legendwidth"),s("newshape.legendgroup"),s("newshape.legendgrouptitle.text"),F.coerceFont(s,"newshape.legendgrouptitle.font"),s("newshape.legendrank"),s("newshape.drawdirection"),s("newshape.layer"),s("newshape.fillcolor"),s("newshape.fillrule"),s("newshape.opacity"),s("newshape.line.width")){var N=(i||{}).plot_bgcolor||"#FFF";s("newshape.line.color",_.contrast(N)),s("newshape.line.dash")}var j="drawline"===i.dragmode,Z=s("newshape.label.text"),X=s("newshape.label.texttemplate");if(Z||X){s("newshape.label.textangle");var $=s("newshape.label.textposition",j?"middle":"middle center");s("newshape.label.xanchor"),s("newshape.label.yanchor",dfltLabelYanchor(j,$)),s("newshape.label.padding"),F.coerceFont(s,"newshape.label.font",o.font)}s("activeshape.fillcolor"),s("activeshape.opacity")}},60165:function(i,o,s){"use strict";var _=s(95616),F=s(89995),N=F.CIRCLE_SIDES,j=F.SQRT2,Z=s(75549),X=Z.p2r,$=Z.r2p,ee=[0,3,4,5,6,1,2],et=[0,3,4,1,2];function almostEq(i,o){return 1e-6>=Math.abs(i-o)}function dist(i,o){var s=o[1]-i[1],_=o[2]-i[2];return Math.sqrt(s*s+_*_)}o.writePaths=function(i){var o=i.length;if(!o)return"M0,0Z";for(var s="",_=0;_<o;_++)for(var F=i[_].length,N=0;N<F;N++){var j=i[_][N][0];if("Z"===j)s+="Z";else for(var Z=i[_][N].length,X=0;X<Z;X++){var $=X;"Q"===j||"S"===j?$=et[X]:"C"===j&&($=ee[X]),s+=i[_][N][$],X>0&&X<Z-1&&(s+=",")}}return s},o.readPaths=function(i,o,s,F){var j=_(i),Z=[],ee=-1,et=0,er=0,recStart=function(){eo=et,es=er};recStart();for(var en=0;en<j.length;en++){var ei,eo,es,el,ec,eu,ef,ed=[],eh=j[en][0],ep=eh;switch(eh){case"M":Z[++ee]=[],et=+j[en][1],er=+j[en][2],ed.push([ep,et,er]),recStart();break;case"Q":case"S":el=+j[en][1],eu=+j[en][2],et=+j[en][3],er=+j[en][4],ed.push([ep,et,er,el,eu]);break;case"C":el=+j[en][1],eu=+j[en][2],ec=+j[en][3],ef=+j[en][4],et=+j[en][5],er=+j[en][6],ed.push([ep,et,er,el,eu,ec,ef]);break;case"T":case"L":et=+j[en][1],er=+j[en][2],ed.push([ep,et,er]);break;case"H":ep="L",et=+j[en][1],ed.push([ep,et,er]);break;case"V":ep="L",er=+j[en][1],ed.push([ep,et,er]);break;case"A":ep="L";var eg=+j[en][1],em=+j[en][2];+j[en][4]||(eg=-eg,em=-em);var ey=et-eg,ev=er;for(ei=1;ei<=N/2;ei++){var ex=2*Math.PI*ei/N;ed.push([ep,ey+eg*Math.cos(ex),ev+em*Math.sin(ex)])}break;case"Z":(et!==eo||er!==es)&&(et=eo,er=es,ed.push([ep,et,er]))}for(var e_=(s||{}).domain,ew=o._fullLayout._size,eT=s&&"pixel"===s.xsizemode,ek=s&&"pixel"===s.ysizemode,eA=!1===F,eS=0;eS<ed.length;eS++){for(ei=0;ei+2<7;ei+=2){var eM=ed[eS][ei+1],eC=ed[eS][ei+2];void 0!==eM&&void 0!==eC&&(et=eM,er=eC,s&&(s.xaxis&&s.xaxis.p2r?(eA&&(eM-=s.xaxis._offset),eM=eT?$(s.xaxis,s.xanchor)+eM:X(s.xaxis,eM)):(eA&&(eM-=ew.l),e_?eM=e_.x[0]+eM/ew.w:eM/=ew.w),s.yaxis&&s.yaxis.p2r?(eA&&(eC-=s.yaxis._offset),eC=ek?$(s.yaxis,s.yanchor)-eC:X(s.yaxis,eC)):(eA&&(eC-=ew.t),eC=e_?e_.y[1]-eC/ew.h:1-eC/ew.h)),ed[eS][ei+1]=eM,ed[eS][ei+2]=eC)}Z[ee].push(ed[eS].slice())}}return Z},o.pointsOnRectangle=function(i){if(5!==i.length)return!1;for(var o=1;o<3;o++)if(!almostEq(i[0][o]-i[1][o],i[3][o]-i[2][o])||!almostEq(i[0][o]-i[3][o],i[1][o]-i[2][o]))return!1;return!!(almostEq(i[0][1],i[1][1])||almostEq(i[0][1],i[3][1]))&&!!(dist(i[0],i[1])*dist(i[0],i[3]))},o.pointsOnEllipse=function(i){var o=i.length;if(o!==N+1)return!1;o=N;for(var s=0;s<o;s++){var _=(2*o-s)%o,F=(o/2+_)%o,j=(o/2+s)%o;if(!almostEq(dist(i[s],i[j]),dist(i[_],i[F])))return!1}return!0},o.handleEllipse=function(i,s,_){if(!i)return[s,_];var F=o.ellipseOver({x0:s[0],y0:s[1],x1:_[0],y1:_[1]}),Z=(F.x1+F.x0)/2,X=(F.y1+F.y0)/2,$=(F.x1-F.x0)/2,ee=(F.y1-F.y0)/2;$||($=ee/=j),ee||(ee=$/=j);for(var et=[],er=0;er<N;er++){var en=2*er*Math.PI/N;et.push([Z+$*Math.cos(en),X+ee*Math.sin(en)])}return et},o.ellipseOver=function(i){var o=i.x0,s=i.y0,_=i.x1,F=i.y1,N=_-o,Z=F-s,X=((o-=N)+_)/2,$=((s-=Z)+F)/2;return{x0:X-(N*=j),y0:$-(Z*=j),x1:X+N,y1:$+Z}},o.fixDatesForPaths=function(i,o,s){var _="date"===o.type,F="date"===s.type;if(!_&&!F)return i;for(var N=0;N<i.length;N++)for(var j=0;j<i[N].length;j++)for(var Z=0;Z+2<i[N][j].length;Z+=2)_&&(i[N][j][Z+1]=i[N][j][Z+1].replace(" ","_")),F&&(i[N][j][Z+2]=i[N][j][Z+2].replace(" ","_"));return i}},90551:function(i,o,s){"use strict";var _=s(64505),F=_.drawMode,N=_.openMode,j=s(89995),Z=j.i000,X=j.i090,$=j.i180,ee=j.i270,et=j.cos45,er=j.sin45,en=s(75549),ei=en.p2r,eo=en.r2p,es=s(51873).clearOutline,el=s(60165),ec=el.readPaths,eu=el.writePaths,ef=el.ellipseOver,ed=el.fixDatesForPaths;function newShapes(i,o){if(i.length&&i[0][0]){var s=o.gd,_=o.isActiveShape,N=o.dragmode,j=(s.layout||{}).shapes||[];if(!F(N)&&void 0!==_){var Z=s._fullLayout._activeShapeIndex;if(Z<j.length)switch(s._fullLayout.shapes[Z].type){case"rect":N="drawrect";break;case"circle":N="drawcircle";break;case"line":N="drawline";break;case"path":var X=j[Z].path||"";N="Z"===X[X.length-1]?"drawclosedpath":"drawopenpath"}}var $=createShapeObj(i,o,N);es(s);for(var ee=o.editHelpers,et=(ee||{}).modifyItem,er=[],en=0;en<j.length;en++){var ei=s._fullLayout.shapes[en];if(er[en]=ei._input,void 0!==_&&en===s._fullLayout._activeShapeIndex)switch(ei.type){case"line":case"rect":case"circle":et("x0",$.x0),et("x1",$.x1),et("y0",$.y0),et("y1",$.y1);break;case"path":et("path",$.path)}}return void 0===_?(er.push($),er):ee?ee.getUpdateObj():{}}}function createShapeObj(i,o,s){var _,F=i[0][0],j=o.gd,en=F.getAttribute("d"),es=j._fullLayout.newshape,el=o.plotinfo,eh=o.isActiveShape,ep=el.xaxis,eg=el.yaxis,em=!!el.domain||!el.xaxis,ey=!!el.domain||!el.yaxis,ev=N(s),ex=ec(en,j,el,eh),e_={editable:!0,visible:es.visible,name:es.name,showlegend:es.showlegend,legend:es.legend,legendwidth:es.legendwidth,legendgroup:es.legendgroup,legendgrouptitle:{text:es.legendgrouptitle.text,font:es.legendgrouptitle.font},legendrank:es.legendrank,label:es.label,xref:em?"paper":ep._id,yref:ey?"paper":eg._id,layer:es.layer,opacity:es.opacity,line:{color:es.line.color,width:es.line.width,dash:es.line.dash}};if(ev||(e_.fillcolor=es.fillcolor,e_.fillrule=es.fillrule),1===ex.length&&(_=ex[0]),_&&5===_.length&&"drawrect"===s)e_.type="rect",e_.x0=_[0][1],e_.y0=_[0][2],e_.x1=_[2][1],e_.y1=_[2][2];else if(_&&"drawline"===s)e_.type="line",e_.x0=_[0][1],e_.y0=_[0][2],e_.x1=_[1][1],e_.y1=_[1][2];else if(_&&"drawcircle"===s){e_.type="circle";var ew=_[Z][1],eT=_[X][1],ek=_[$][1],eA=_[ee][1],eS=_[Z][2],eM=_[X][2],eC=_[$][2],eE=_[ee][2],eL=el.xaxis&&("date"===el.xaxis.type||"log"===el.xaxis.type),eP=el.yaxis&&("date"===el.yaxis.type||"log"===el.yaxis.type);eL&&(ew=eo(el.xaxis,ew),eT=eo(el.xaxis,eT),ek=eo(el.xaxis,ek),eA=eo(el.xaxis,eA)),eP&&(eS=eo(el.yaxis,eS),eM=eo(el.yaxis,eM),eC=eo(el.yaxis,eC),eE=eo(el.yaxis,eE));var eI=(eT+eA)/2,eO=(eS+eC)/2,eD=ef({x0:eI,y0:eO,x1:eI+(eA-eT+ek-ew)/2*et,y1:eO+(eE-eM+eC-eS)/2*er});eL&&(eD.x0=ei(el.xaxis,eD.x0),eD.x1=ei(el.xaxis,eD.x1)),eP&&(eD.y0=ei(el.yaxis,eD.y0),eD.y1=ei(el.yaxis,eD.y1)),e_.x0=eD.x0,e_.y0=eD.y0,e_.x1=eD.x1,e_.y1=eD.y1}else e_.type="path",ep&&eg&&ed(ex,ep,eg),e_.path=eu(ex),_=null;return e_}i.exports={newShapes:newShapes,createShapeObj:createShapeObj}},51873:function(i){"use strict";function clearOutlineControllers(i){var o=i._fullLayout._zoomlayer;o&&o.selectAll(".outline-controllers").remove()}function clearOutline(i){var o=i._fullLayout._zoomlayer;o&&o.selectAll(".select-outline").remove(),i._fullLayout._outlining=!1}i.exports={clearOutlineControllers:clearOutlineControllers,clearOutline:clearOutline}},30477:function(i,o,s){"use strict";var _=s(21459),F=s(71828),N=s(89298);function convertPath(i,o,s){var N=i.path,j=i.xsizemode,Z=i.ysizemode,X=i.xanchor,$=i.yanchor;return N.replace(_.segmentRE,function(i){var N=0,ee=i.charAt(0),et=_.paramIsX[ee],er=_.paramIsY[ee],en=_.numParams[ee],ei=i.substr(1).replace(_.paramRE,function(i){return et[N]?i="pixel"===j?o(X)+Number(i):o(i):er[N]&&(i="pixel"===Z?s($)-Number(i):s(i)),++N>en&&(i="X"),i});return N>en&&(ei=ei.replace(/[\s,]*X.*/,""),F.log("Ignoring extra params in segment "+i)),ee+ei})}o.rangeToShapePosition=function(i){return"log"===i.type?i.r2d:function(i){return i}},o.shapePositionToRange=function(i){return"log"===i.type?i.d2r:function(i){return i}},o.decodeDate=function(i){return function(o){return o.replace&&(o=o.replace("_"," ")),i(o)}},o.encodeDate=function(i){return function(o){return i(o).replace(" ","_")}},o.extractPathCoords=function(i,o,s){var N=[];return i.match(_.segmentRE).forEach(function(i){var j=o[i.charAt(0)].drawn;if(void 0!==j){var Z=i.substr(1).match(_.paramRE);if(Z&&!(Z.length<j)){var X=Z[j],$=s?X:F.cleanNumber(X);N.push($)}}}),N},o.getDataToPixel=function(i,s,_,F){var N,j=i._fullLayout._size;if(s){if("domain"===F)N=function(i){return s._length*(_?1-i:i)+s._offset};else{var Z=o.shapePositionToRange(s);N=function(i){return s._offset+s.r2p(Z(i,!0))},"date"===s.type&&(N=o.decodeDate(N))}}else N=_?function(i){return j.t+j.h*(1-i)}:function(i){return j.l+j.w*i};return N},o.getPixelToData=function(i,s,_,F){var N,j=i._fullLayout._size;if(s){if("domain"===F)N=function(i){var o=(i-s._offset)/s._length;return _?1-o:o};else{var Z=o.rangeToShapePosition(s);N=function(i){return Z(s.p2r(i-s._offset))}}}else N=_?function(i){return 1-(i-j.t)/j.h}:function(i){return(i-j.l)/j.w};return N},o.roundPositionForSharpStrokeRendering=function(i,o){var s=Math.round(i);return 1===Math.round(o%2)?s+.5:s},o.makeShapesOptionsAndPlotinfo=function(i,o){var s=i._fullLayout.shapes[o]||{},_=i._fullLayout._plots[s.xref+s.yref];return _?_._hadPlotinfo=!0:(_={},s.xref&&"paper"!==s.xref&&(_.xaxis=i._fullLayout[s.xref+"axis"]),s.yref&&"paper"!==s.yref&&(_.yaxis=i._fullLayout[s.yref+"axis"])),_.xsizemode=s.xsizemode,_.ysizemode=s.ysizemode,_.xanchor=s.xanchor,_.yanchor=s.yanchor,{options:s,plotinfo:_}},o.makeSelectionsOptionsAndPlotinfo=function(i,o){var s=i._fullLayout.selections[o]||{},_=i._fullLayout._plots[s.xref+s.yref];return _?_._hadPlotinfo=!0:(_={},s.xref&&(_.xaxis=i._fullLayout[s.xref+"axis"]),s.yref&&(_.yaxis=i._fullLayout[s.yref+"axis"])),{options:s,plotinfo:_}},o.getPathString=function(i,s){var _,F,j,Z,X,$,ee,et,er=s.type,en=N.getRefType(s.xref),ei=N.getRefType(s.yref),eo=N.getFromId(i,s.xref),es=N.getFromId(i,s.yref),el=i._fullLayout._size;if(eo?"domain"===en?F=function(i){return eo._offset+eo._length*i}:(_=o.shapePositionToRange(eo),F=function(i){return eo._offset+eo.r2p(_(i,!0))}):F=function(i){return el.l+el.w*i},es?"domain"===ei?Z=function(i){return es._offset+es._length*(1-i)}:(j=o.shapePositionToRange(es),Z=function(i){return es._offset+es.r2p(j(i,!0))}):Z=function(i){return el.t+el.h*(1-i)},"path"===er)return eo&&"date"===eo.type&&(F=o.decodeDate(F)),es&&"date"===es.type&&(Z=o.decodeDate(Z)),convertPath(s,F,Z);if("pixel"===s.xsizemode){var ec=F(s.xanchor);X=ec+s.x0,$=ec+s.x1}else X=F(s.x0),$=F(s.x1);if("pixel"===s.ysizemode){var eu=Z(s.yanchor);ee=eu-s.y0,et=eu-s.y1}else ee=Z(s.y0),et=Z(s.y1);if("line"===er)return"M"+X+","+ee+"L"+$+","+et;if("rect"===er)return"M"+X+","+ee+"H"+$+"V"+et+"H"+X+"Z";var ef=(X+$)/2,ed=(ee+et)/2,eh=Math.abs(ef-X),ep=Math.abs(ed-ee),eg="A"+eh+","+ep,em=ef+eh+","+ed;return"M"+em+eg+" 0 1,1 "+ef+","+(ed-ep)+eg+" 0 0,1 "+em+"Z"}},89853:function(i,o,s){"use strict";var _=s(34031);i.exports={moduleType:"component",name:"shapes",layoutAttributes:s(89827),supplyLayoutDefaults:s(84726),supplyDrawNewShapeDefaults:s(45547),includeBasePlot:s(76325)("shapes"),calcAutorange:s(5627),draw:_.draw,drawOne:_.drawOne}},37281:function(i){"use strict";function d2l(i,o){return o?o.d2l(i):i}function x0Fn(i){return i.x0}function x1Fn(i){return i.x1}function y0Fn(i){return i.y0}function y1Fn(i){return i.y1}function dxFn(i,o){return d2l(i.x1,o)-d2l(i.x0,o)}function dyFn(i,o,s){return d2l(i.y1,s)-d2l(i.y0,s)}function widthFn(i,o){return Math.abs(dxFn(i,o))}function heightFn(i,o,s){return Math.abs(dyFn(i,o,s))}function lengthFn(i,o,s){return"line"!==i.type?void 0:Math.sqrt(Math.pow(dxFn(i,o),2)+Math.pow(dyFn(i,o,s),2))}function xcenterFn(i,o){var s;return s=(d2l(i.x1,o)+d2l(i.x0,o))/2,o?o.l2d(s):s}function ycenterFn(i,o,s){var _;return _=(d2l(i.y1,s)+d2l(i.y0,s))/2,s?s.l2d(_):_}function slopeFn(i,o,s){return"line"!==i.type?void 0:dyFn(i,o,s)/dxFn(i,o)}i.exports={x0:x0Fn,x1:x1Fn,y0:y0Fn,y1:y1Fn,slope:slopeFn,dx:dxFn,dy:dyFn,width:widthFn,height:heightFn,length:lengthFn,xcenter:xcenterFn,ycenter:ycenterFn}},75067:function(i,o,s){"use strict";var _=s(41940),F=s(35025),N=s(1426).extendDeepAll,j=s(30962).overrideAll,Z=s(85594),X=s(44467).templatedArray,$=s(98292),ee=X("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});i.exports=j(X("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:ee,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:N(F({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:Z.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:_({})},font:_({}),activebgcolor:{valType:"color",dflt:$.gripBgActiveColor},bgcolor:{valType:"color",dflt:$.railBgColor},bordercolor:{valType:"color",dflt:$.railBorderColor},borderwidth:{valType:"number",min:0,dflt:$.railBorderWidth},ticklen:{valType:"number",min:0,dflt:$.tickLength},tickcolor:{valType:"color",dflt:$.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:$.minorTickLength}}),"arraydraw","from-root")},98292:function(i){"use strict";i.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(i,o,s){"use strict";var _=s(71828),F=s(85501),N=s(75067),j=s(98292).name,Z=N.steps;function sliderDefaults(i,o,s){function coerce(s,F){return _.coerce(i,o,N,s,F)}for(var j=F(i,o,{name:"steps",handleItemDefaults:stepDefaults}),Z=0,X=0;X<j.length;X++)j[X].visible&&Z++;if(Z<2?o.visible=!1:coerce("visible")){o._stepCount=Z;var $=o._visibleSteps=_.filterVisible(j);(j[coerce("active")]||{}).visible||(o.active=$[0]._index),coerce("x"),coerce("y"),_.noneOrAll(i,o,["x","y"]),coerce("xanchor"),coerce("yanchor"),coerce("len"),coerce("lenmode"),coerce("pad.t"),coerce("pad.r"),coerce("pad.b"),coerce("pad.l"),_.coerceFont(coerce,"font",s.font),coerce("currentvalue.visible")&&(coerce("currentvalue.xanchor"),coerce("currentvalue.prefix"),coerce("currentvalue.suffix"),coerce("currentvalue.offset"),_.coerceFont(coerce,"currentvalue.font",o.font)),coerce("transition.duration"),coerce("transition.easing"),coerce("bgcolor"),coerce("activebgcolor"),coerce("bordercolor"),coerce("borderwidth"),coerce("ticklen"),coerce("tickwidth"),coerce("tickcolor"),coerce("minorticklen")}}function stepDefaults(i,o){function coerce(s,F){return _.coerce(i,o,Z,s,F)}if("skip"===i.method||Array.isArray(i.args)?coerce("visible"):o.visible=!1){coerce("method"),coerce("args");var s=coerce("label","step-"+o._index);coerce("value",s),coerce("execute")}}i.exports=function(i,o){F(i,o,{name:j,handleItemDefaults:sliderDefaults})}},44504:function(i,o,s){"use strict";var _=s(39898),F=s(74875),N=s(7901),j=s(91424),Z=s(71828),X=Z.strTranslate,$=s(63893),ee=s(44467).arrayEditor,et=s(98292),er=s(18783),en=er.LINE_SPACING,ei=er.FROM_TL,eo=er.FROM_BR;function autoMarginId(i){return et.autoMarginIdRoot+i._index}function makeSliderData(i,o){for(var s=i[et.name],_=[],F=0;F<s.length;F++){var N=s[F];N.visible&&(N._gd=o,_.push(N))}return _}function keyFunction(i){return i._index}function findDimensions(i,o){var s=j.tester.selectAll("g."+et.labelGroupClass).data(o._visibleSteps);s.enter().append("g").classed(et.labelGroupClass,!0);var N=0,X=0;s.each(function(i){var s=drawLabel(_.select(this),{step:i},o).node();if(s){var F=j.bBox(s);X=Math.max(X,F.height),N=Math.max(N,F.width)}}),s.remove();var ee=o._dims={};ee.inputAreaWidth=Math.max(et.railWidth,et.gripHeight);var er=i._fullLayout._size;ee.lx=er.l+er.w*o.x,ee.ly=er.t+er.h*(1-o.y),"fraction"===o.lenmode?ee.outerLength=Math.round(er.w*o.len):ee.outerLength=o.len,ee.inputAreaStart=0,ee.inputAreaLength=Math.round(ee.outerLength-o.pad.l-o.pad.r);var en=(ee.inputAreaLength-2*et.stepInset)/(o._stepCount-1),es=N+et.labelPadding;if(ee.labelStride=Math.max(1,Math.ceil(es/en)),ee.labelHeight=X,ee.currentValueMaxWidth=0,ee.currentValueHeight=0,ee.currentValueTotalHeight=0,ee.currentValueMaxLines=1,o.currentvalue.visible){var el=j.tester.append("g");s.each(function(i){var s=drawCurrentValue(el,o,i.label),_=s.node()&&j.bBox(s.node())||{width:0,height:0},F=$.lineCount(s);ee.currentValueMaxWidth=Math.max(ee.currentValueMaxWidth,Math.ceil(_.width)),ee.currentValueHeight=Math.max(ee.currentValueHeight,Math.ceil(_.height)),ee.currentValueMaxLines=Math.max(ee.currentValueMaxLines,F)}),ee.currentValueTotalHeight=ee.currentValueHeight+o.currentvalue.offset,el.remove()}ee.height=ee.currentValueTotalHeight+et.tickOffset+o.ticklen+et.labelOffset+ee.labelHeight+o.pad.t+o.pad.b;var ec="left";Z.isRightAnchor(o)&&(ee.lx-=ee.outerLength,ec="right"),Z.isCenterAnchor(o)&&(ee.lx-=ee.outerLength/2,ec="center");var eu="top";Z.isBottomAnchor(o)&&(ee.ly-=ee.height,eu="bottom"),Z.isMiddleAnchor(o)&&(ee.ly-=ee.height/2,eu="middle"),ee.outerLength=Math.ceil(ee.outerLength),ee.height=Math.ceil(ee.height),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly);var ef={y:o.y,b:ee.height*eo[eu],t:ee.height*ei[eu]};"fraction"===o.lenmode?(ef.l=0,ef.xl=o.x-o.len*ei[ec],ef.r=0,ef.xr=o.x+o.len*eo[ec]):(ef.x=o.x,ef.l=ee.outerLength*ei[ec],ef.r=ee.outerLength*eo[ec]),F.autoMargin(i,autoMarginId(o),ef)}function drawSlider(i,o,s){(s.steps[s.active]||{}).visible||(s.active=s._visibleSteps[0]._index),o.call(drawCurrentValue,s).call(drawRail,s).call(drawLabelGroup,s).call(drawTicks,s).call(drawTouchRect,i,s).call(drawGrip,i,s);var _=s._dims;j.setTranslate(o,_.lx+s.pad.l,_.ly+s.pad.t),o.call(setGripPosition,s,!1),o.call(drawCurrentValue,s)}function drawCurrentValue(i,o,s){if(o.currentvalue.visible){var _,F,N=o._dims;switch(o.currentvalue.xanchor){case"right":_=N.inputAreaLength-et.currentValueInset-N.currentValueMaxWidth,F="left";break;case"center":_=.5*N.inputAreaLength,F="middle";break;default:_=et.currentValueInset,F="left"}var X=Z.ensureSingle(i,"text",et.labelClass,function(i){i.attr({"text-anchor":F,"data-notex":1})}),ee=o.currentvalue.prefix?o.currentvalue.prefix:"";if("string"==typeof s)ee+=s;else{var er=o.steps[o.active].label,ei=o._gd._fullLayout._meta;ei&&(er=Z.templateString(er,ei)),ee+=er}o.currentvalue.suffix&&(ee+=o.currentvalue.suffix),X.call(j.font,o.currentvalue.font).text(ee).call($.convertToTspans,o._gd);var eo=$.lineCount(X),es=(N.currentValueMaxLines+1-eo)*o.currentvalue.font.size*en;return $.positionText(X,_,es),X}}function drawGrip(i,o,s){Z.ensureSingle(i,"rect",et.gripRectClass,function(_){_.call(attachGripEvents,o,i,s).style("pointer-events","all")}).attr({width:et.gripWidth,height:et.gripHeight,rx:et.gripRadius,ry:et.gripRadius}).call(N.stroke,s.bordercolor).call(N.fill,s.bgcolor).style("stroke-width",s.borderwidth+"px")}function drawLabel(i,o,s){var _=Z.ensureSingle(i,"text",et.labelClass,function(i){i.attr({"text-anchor":"middle","data-notex":1})}),F=o.step.label,N=s._gd._fullLayout._meta;return N&&(F=Z.templateString(F,N)),_.call(j.font,s.font).text(F).call($.convertToTspans,s._gd),_}function drawLabelGroup(i,o){var s=Z.ensureSingle(i,"g",et.labelsClass),F=o._dims,N=s.selectAll("g."+et.labelGroupClass).data(F.labelSteps);N.enter().append("g").classed(et.labelGroupClass,!0),N.exit().remove(),N.each(function(i){var s=_.select(this);s.call(drawLabel,i,o),j.setTranslate(s,normalizedValueToPosition(o,i.fraction),et.tickOffset+o.ticklen+o.font.size*en+et.labelOffset+F.currentValueTotalHeight)})}function handleInput(i,o,s,_,F){var N=Math.round(_*(s._stepCount-1)),j=s._visibleSteps[N]._index;j!==s.active&&setActive(i,o,s,j,!0,F)}function setActive(i,o,s,_,N,j){var Z=s.active;s.active=_,ee(i.layout,et.name,s).applyUpdate("active",_);var X=s.steps[s.active];o.call(setGripPosition,s,j),o.call(drawCurrentValue,s),i.emit("plotly_sliderchange",{slider:s,step:s.steps[s.active],interaction:N,previousActive:Z}),X&&X.method&&N&&(o._nextMethod?(o._nextMethod.step=X,o._nextMethod.doCallback=N,o._nextMethod.doTransition=j):(o._nextMethod={step:X,doCallback:N,doTransition:j},o._nextMethodRaf=window.requestAnimationFrame(function(){var s=o._nextMethod.step;s.method&&(s.execute&&F.executeAPICommand(i,s.method,s.args),o._nextMethod=null,o._nextMethodRaf=null)})))}function attachGripEvents(i,o,s){if(!o._context.staticPlot){var F=s.node(),j=_.select(o);i.on("mousedown",mouseDownHandler),i.on("touchstart",mouseDownHandler)}function getSliderOpts(){return s.data()[0]}function mouseDownHandler(){var i=getSliderOpts();o.emit("plotly_sliderstart",{slider:i});var Z=s.select("."+et.gripRectClass);_.event.stopPropagation(),_.event.preventDefault(),Z.call(N.fill,i.activebgcolor);var X=positionToNormalizedValue(i,_.mouse(F)[0]);function mouseMoveHandler(){var i=getSliderOpts(),N=positionToNormalizedValue(i,_.mouse(F)[0]);handleInput(o,s,i,N,!1)}function mouseUpHandler(){var i=getSliderOpts();i._dragging=!1,Z.call(N.fill,i.bgcolor),j.on("mouseup",null),j.on("mousemove",null),j.on("touchend",null),j.on("touchmove",null),o.emit("plotly_sliderend",{slider:i,step:i.steps[i.active]})}handleInput(o,s,i,X,!0),i._dragging=!0,j.on("mousemove",mouseMoveHandler),j.on("touchmove",mouseMoveHandler),j.on("mouseup",mouseUpHandler),j.on("touchend",mouseUpHandler)}}function drawTicks(i,o){var s=i.selectAll("rect."+et.tickRectClass).data(o._visibleSteps),F=o._dims;s.enter().append("rect").classed(et.tickRectClass,!0),s.exit().remove(),s.attr({width:o.tickwidth+"px","shape-rendering":"crispEdges"}),s.each(function(i,s){var Z=s%F.labelStride==0,X=_.select(this);X.attr({height:Z?o.ticklen:o.minorticklen}).call(N.fill,o.tickcolor),j.setTranslate(X,normalizedValueToPosition(o,s/(o._stepCount-1))-.5*o.tickwidth,(Z?et.tickOffset:et.minorTickOffset)+F.currentValueTotalHeight)})}function computeLabelSteps(i){var o=i._dims;o.labelSteps=[];for(var s=i._stepCount,_=0;_<s;_+=o.labelStride)o.labelSteps.push({fraction:_/(s-1),step:i._visibleSteps[_]})}function setGripPosition(i,o,s){for(var _=i.select("rect."+et.gripRectClass),F=0,N=0;N<o._stepCount;N++)if(o._visibleSteps[N]._index===o.active){F=N;break}var j=normalizedValueToPosition(o,F/(o._stepCount-1));if(!o._invokingCommand){var Z=_;s&&o.transition.duration>0&&(Z=Z.transition().duration(o.transition.duration).ease(o.transition.easing)),Z.attr("transform",X(j-.5*et.gripWidth,o._dims.currentValueTotalHeight))}}function normalizedValueToPosition(i,o){var s=i._dims;return s.inputAreaStart+et.stepInset+(s.inputAreaLength-2*et.stepInset)*Math.min(1,Math.max(0,o))}function positionToNormalizedValue(i,o){var s=i._dims;return Math.min(1,Math.max(0,(o-et.stepInset-s.inputAreaStart)/(s.inputAreaLength-2*et.stepInset-2*s.inputAreaStart)))}function drawTouchRect(i,o,s){var _=s._dims,F=Z.ensureSingle(i,"rect",et.railTouchRectClass,function(_){_.call(attachGripEvents,o,i,s).style("pointer-events","all")});F.attr({width:_.inputAreaLength,height:Math.max(_.inputAreaWidth,et.tickOffset+s.ticklen+_.labelHeight)}).call(N.fill,s.bgcolor).attr("opacity",0),j.setTranslate(F,0,_.currentValueTotalHeight)}function drawRail(i,o){var s=o._dims,_=s.inputAreaLength-2*et.railInset,F=Z.ensureSingle(i,"rect",et.railRectClass);F.attr({width:_,height:et.railWidth,rx:et.railRadius,ry:et.railRadius,"shape-rendering":"crispEdges"}).call(N.stroke,o.bordercolor).call(N.fill,o.bgcolor).style("stroke-width",o.borderwidth+"px"),j.setTranslate(F,et.railInset,(s.inputAreaWidth-et.railWidth)*.5+s.currentValueTotalHeight)}i.exports=function(i){var o=i._context.staticPlot,s=i._fullLayout,N=makeSliderData(s,i),j=s._infolayer.selectAll("g."+et.containerClassName).data(N.length>0?[0]:[]);function clearSlider(o){o._commandObserver&&(o._commandObserver.remove(),delete o._commandObserver),F.autoMargin(i,autoMarginId(o))}if(j.enter().append("g").classed(et.containerClassName,!0).style("cursor",o?null:"ew-resize"),j.exit().each(function(){_.select(this).selectAll("g."+et.groupClassName).each(clearSlider)}).remove(),0!==N.length){var Z=j.selectAll("g."+et.groupClassName).data(N,keyFunction);Z.enter().append("g").classed(et.groupClassName,!0),Z.exit().each(clearSlider).remove();for(var X=0;X<N.length;X++)findDimensions(i,N[X]);Z.each(function(o){var s=_.select(this);computeLabelSteps(o),F.manageCommandObserver(i,o,o._visibleSteps,function(o){var _=s.data()[0];_.active!==o.index&&(_._dragging||setActive(i,s,_,o.index,!1,!0))}),drawSlider(i,_.select(this),o)})}}},23243:function(i,o,s){"use strict";var _=s(98292);i.exports={moduleType:"component",name:_.name,layoutAttributes:s(75067),supplyLayoutDefaults:s(12343),draw:s(44504)}},92998:function(i,o,s){"use strict";var _=s(39898),F=s(92770),N=s(74875),j=s(73972),Z=s(71828),X=Z.strTranslate,$=s(91424),ee=s(7901),et=s(63893),er=s(37822),en=s(18783).OPPOSITE_SIDE,ei=/ [XY][0-9]* /;function draw(i,o,s){var eo,es,el=s.propContainer,ec=s.propName,eu=s.placeholder,ef=s.traceIndex,ed=s.avoid||{},eh=s.attributes,ep=s.transform,eg=s.containerGroup,em=i._fullLayout,ey=1,ev=!1,ex=el.title,e_=(ex&&ex.text?ex.text:"").trim(),ew=ex&&ex.font?ex.font:{},eT=ew.family,ek=ew.size,eA=ew.color;"title.text"===ec?eo="titleText":-1!==ec.indexOf("axis")?eo="axisTitleText":ec.indexOf(!0)&&(eo="colorbarTitleText");var eS=i._context.edits[eo];""===e_?ey=0:e_.replace(ei," % ")!==eu.replace(ei," % ")||(ey=.2,ev=!0,eS||(e_="")),s._meta?e_=Z.templateString(e_,s._meta):em._meta&&(e_=Z.templateString(e_,em._meta));var eM=e_||eS;eg||(eg=Z.ensureSingle(em._infolayer,"g","g-"+o),es=em._hColorbarMoveTitle);var eC=eg.selectAll("text").data(eM?[0]:[]);if(eC.enter().append("text"),eC.text(e_).attr("class",o),eC.exit().remove(),!eM)return eg;function titleLayout(i){Z.syncOrAsync([drawTitle,scootTitle],i)}function drawTitle(o){var s;return!ep&&es&&(ep={}),ep?(s="",ep.rotate&&(s+="rotate("+[ep.rotate,eh.x,eh.y]+")"),(ep.offset||es)&&(s+=X(0,(ep.offset||0)-(es||0)))):s=null,o.attr("transform",s),o.style({"font-family":eT,"font-size":_.round(ek,2)+"px",fill:ee.rgb(eA),opacity:ey*ee.opacity(eA),"font-weight":N.fontWeight}).attr(eh).call(et.convertToTspans,i),N.previousPromises(i)}function scootTitle(o){var s=_.select(o.node().parentNode);if(ed&&ed.selection&&ed.side&&e_){s.attr("transform",null);var N=en[ed.side],j="left"===ed.side||"top"===ed.side?-1:1,ee=F(ed.pad)?ed.pad:2,et=$.bBox(s.node()),er={t:0,b:0,l:0,r:0},ei=i._fullLayout._reservedMargin;for(var eo in ei)for(var es in ei[eo]){var ec=ei[eo][es];er[es]=Math.max(er[es],ec)}var eu={left:er.l,top:er.t,right:em.width-er.r,bottom:em.height-er.b},ef=ed.maxShift||j*(eu[ed.side]-et[ed.side]),eh=0;if(ef<0)eh=ef;else{var ep=ed.offsetLeft||0,eg=ed.offsetTop||0;et.left-=ep,et.right-=ep,et.top-=eg,et.bottom-=eg,ed.selection.each(function(){var i=$.bBox(this);Z.bBoxIntersect(et,i,ee)&&(eh=Math.max(eh,j*(i[ed.side]-et[N])+ee))}),eh=Math.min(ef,eh),el._titleScoot=Math.abs(eh)}if(eh>0||ef<0){var ey={left:[-eh,0],right:[eh,0],top:[0,-eh],bottom:[0,eh]}[ed.side];s.attr("transform",X(ey[0],ey[1]))}}}function setPlaceholder(){ey=0,ev=!0,eC.text(eu).on("mouseover.opacity",function(){_.select(this).transition().duration(er.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){_.select(this).transition().duration(er.HIDE_PLACEHOLDER).style("opacity",0)})}return eC.call(titleLayout),eS&&(e_?eC.on(".opacity",null):setPlaceholder(),eC.call(et.makeEditable,{gd:i}).on("edit",function(o){void 0!==ef?j.call("_guiRestyle",i,ec,o,ef):j.call("_guiRelayout",i,ec,o)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(titleLayout)}).on("input",function(i){this.text(i||" ").call(et.positionText,eh.x,eh.y)})),eC.classed("js-placeholder",ev),eg}i.exports={draw:draw}},7163:function(i,o,s){"use strict";var _=s(41940),F=s(22399),N=s(1426).extendFlat,j=s(30962).overrideAll,Z=s(35025),X=s(44467).templatedArray,$=X("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});i.exports=j(X("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:$,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:N(Z({editType:"arraydraw"}),{}),font:_({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:F.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(i){"use strict";i.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},64897:function(i,o,s){"use strict";var _=s(71828),F=s(85501),N=s(7163),j=s(75909).name,Z=N.buttons;function menuDefaults(i,o,s){function coerce(s,F){return _.coerce(i,o,N,s,F)}coerce("visible",F(i,o,{name:"buttons",handleItemDefaults:buttonDefaults}).length>0)&&(coerce("active"),coerce("direction"),coerce("type"),coerce("showactive"),coerce("x"),coerce("y"),_.noneOrAll(i,o,["x","y"]),coerce("xanchor"),coerce("yanchor"),coerce("pad.t"),coerce("pad.r"),coerce("pad.b"),coerce("pad.l"),_.coerceFont(coerce,"font",s.font),coerce("bgcolor",s.paper_bgcolor),coerce("bordercolor"),coerce("borderwidth"))}function buttonDefaults(i,o){function coerce(s,F){return _.coerce(i,o,Z,s,F)}coerce("visible","skip"===i.method||Array.isArray(i.args))&&(coerce("method"),coerce("args"),coerce("args2"),coerce("label"),coerce("execute"))}i.exports=function(i,o){F(i,o,{name:j,handleItemDefaults:menuDefaults})}},13689:function(i,o,s){"use strict";var _=s(39898),F=s(74875),N=s(7901),j=s(91424),Z=s(71828),X=s(63893),$=s(44467).arrayEditor,ee=s(18783).LINE_SPACING,et=s(75909),er=s(25849);function keyFunction(i){return i._index}function isFolded(i){return -1==+i.attr(et.menuIndexAttrName)}function isActive(i,o){return+i.attr(et.menuIndexAttrName)===o._index}function setActive(i,o,s,_,F,N,j,Z){o.active=j,$(i.layout,et.name,o).applyUpdate("active",j),"buttons"===o.type?drawButtons(i,_,null,null,o):"dropdown"!==o.type||(F.attr(et.menuIndexAttrName,"-1"),drawHeader(i,_,F,N,o),Z||drawButtons(i,_,F,N,o))}function drawHeader(i,o,s,_,F){var N=Z.ensureSingle(o,"g",et.headerClassName,function(i){i.style("pointer-events","all")}),X=F._dims,$=F.active,ee=F.buttons[$]||et.blankHeaderOpts,er={y:F.pad.t,yPad:0,x:F.pad.l,xPad:0,index:0},en={width:X.headerWidth,height:X.headerHeight};N.call(drawItem,F,ee,i).call(setItemPosition,F,er,en),Z.ensureSingle(o,"text",et.headerArrowClassName,function(i){i.attr("text-anchor","end").call(j.font,F.font).text(et.arrowSymbol[F.direction])}).attr({x:X.headerWidth-et.arrowOffsetX+F.pad.l,y:X.headerHeight/2+et.textOffsetY+F.pad.t}),N.on("click",function(){s.call(removeAllButtons,String(isActive(s,F)?-1:F._index)),drawButtons(i,o,s,_,F)}),N.on("mouseover",function(){N.call(styleOnMouseOver)}),N.on("mouseout",function(){N.call(styleOnMouseOut,F)}),j.setTranslate(o,X.lx,X.ly)}function drawButtons(i,o,s,N,j){s||(s=o).attr("pointer-events","all");var X=isFolded(s)&&"buttons"!==j.type?[]:j.buttons,$="dropdown"===j.type?et.dropdownButtonClassName:et.buttonClassName,ee=s.selectAll("g."+$).data(Z.filterVisible(X)),er=ee.enter().append("g").classed($,!0),en=ee.exit();"dropdown"===j.type?(er.attr("opacity","0").transition().attr("opacity","1"),en.transition().attr("opacity","0").remove()):en.remove();var ei=0,eo=0,es=j._dims,el=-1!==["up","down"].indexOf(j.direction);"dropdown"===j.type&&(el?eo=es.headerHeight+et.gapButtonHeader:ei=es.headerWidth+et.gapButtonHeader),"dropdown"===j.type&&"up"===j.direction&&(eo=-et.gapButtonHeader+et.gapButton-es.openHeight),"dropdown"===j.type&&"left"===j.direction&&(ei=-et.gapButtonHeader+et.gapButton-es.openWidth);var ec={x:es.lx+ei+j.pad.l,y:es.ly+eo+j.pad.t,yPad:et.gapButton,xPad:et.gapButton,index:0},eu={l:ec.x+j.borderwidth,t:ec.y+j.borderwidth};ee.each(function(Z,X){var $=_.select(this);$.call(drawItem,j,Z,i).call(setItemPosition,j,ec),$.on("click",function(){_.event.defaultPrevented||(Z.execute&&(Z.args2&&j.active===X?(setActive(i,j,Z,o,s,N,-1),F.executeAPICommand(i,Z.method,Z.args2)):(setActive(i,j,Z,o,s,N,X),F.executeAPICommand(i,Z.method,Z.args))),i.emit("plotly_buttonclicked",{menu:j,button:Z,active:j.active}))}),$.on("mouseover",function(){$.call(styleOnMouseOver)}),$.on("mouseout",function(){$.call(styleOnMouseOut,j),ee.call(styleButtons,j)})}),ee.call(styleButtons,j),el?(eu.w=Math.max(es.openWidth,es.headerWidth),eu.h=ec.y-eu.t):(eu.w=ec.x-eu.l,eu.h=Math.max(es.openHeight,es.headerHeight)),eu.direction=j.direction,N&&(ee.size()?drawScrollBox(i,o,s,N,j,eu):hideScrollBox(N))}function drawScrollBox(i,o,s,_,F,N){var j,Z,X,$=F.direction,ee=F._dims,er=F.active;if("up"===$||"down"===$)for(X=0,Z=0;X<er;X++)Z+=ee.heights[X]+et.gapButton;else for(X=0,j=0;X<er;X++)j+=ee.widths[X]+et.gapButton;_.enable(N,j,Z),_.hbar&&_.hbar.attr("opacity","0").transition().attr("opacity","1"),_.vbar&&_.vbar.attr("opacity","0").transition().attr("opacity","1")}function hideScrollBox(i){var o=!!i.hbar,s=!!i.vbar;o&&i.hbar.transition().attr("opacity","0").each("end",function(){o=!1,s||i.disable()}),s&&i.vbar.transition().attr("opacity","0").each("end",function(){s=!1,o||i.disable()})}function drawItem(i,o,s,_){i.call(drawItemRect,o).call(drawItemText,o,s,_)}function drawItemRect(i,o){Z.ensureSingle(i,"rect",et.itemRectClassName,function(i){i.attr({rx:et.rx,ry:et.ry,"shape-rendering":"crispEdges"})}).call(N.stroke,o.bordercolor).call(N.fill,o.bgcolor).style("stroke-width",o.borderwidth+"px")}function drawItemText(i,o,s,_){var F=Z.ensureSingle(i,"text",et.itemTextClassName,function(i){i.attr({"text-anchor":"start","data-notex":1})}),N=s.label,$=_._fullLayout._meta;$&&(N=Z.templateString(N,$)),F.call(j.font,o.font).text(N).call(X.convertToTspans,_)}function styleButtons(i,o){var s=o.active;i.each(function(i,F){var j=_.select(this);F===s&&o.showactive&&j.select("rect."+et.itemRectClassName).call(N.fill,et.activeColor)})}function styleOnMouseOver(i){i.select("rect."+et.itemRectClassName).call(N.fill,et.hoverColor)}function styleOnMouseOut(i,o){i.select("rect."+et.itemRectClassName).call(N.fill,o.bgcolor)}function findDimensions(i,o){var s=o._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},N=j.tester.selectAll("g."+et.dropdownButtonClassName).data(Z.filterVisible(o.buttons));N.enter().append("g").classed(et.dropdownButtonClassName,!0);var $=-1!==["up","down"].indexOf(o.direction);N.each(function(F,N){var Z=_.select(this);Z.call(drawItem,o,F,i);var er=Z.select("."+et.itemTextClassName),en=Math.max((er.node()&&j.bBox(er.node()).width)+et.textPadX,et.minWidth),ei=Math.max(o.font.size*ee*X.lineCount(er),et.minHeight)+et.textOffsetY;ei=Math.ceil(ei),en=Math.ceil(en),s.widths[N]=en,s.heights[N]=ei,s.height1=Math.max(s.height1,ei),s.width1=Math.max(s.width1,en),$?(s.totalWidth=Math.max(s.totalWidth,en),s.openWidth=s.totalWidth,s.totalHeight+=ei+et.gapButton,s.openHeight+=ei+et.gapButton):(s.totalWidth+=en+et.gapButton,s.openWidth+=en+et.gapButton,s.totalHeight=Math.max(s.totalHeight,ei),s.openHeight=s.totalHeight)}),$?s.totalHeight-=et.gapButton:s.totalWidth-=et.gapButton,s.headerWidth=s.width1+et.arrowPadX,s.headerHeight=s.height1,"dropdown"===o.type&&($?(s.width1+=et.arrowPadX,s.totalHeight=s.height1):s.totalWidth=s.width1,s.totalWidth+=et.arrowPadX),N.remove();var er=s.totalWidth+o.pad.l+o.pad.r,en=s.totalHeight+o.pad.t+o.pad.b,ei=i._fullLayout._size;s.lx=ei.l+ei.w*o.x,s.ly=ei.t+ei.h*(1-o.y);var eo="left";Z.isRightAnchor(o)&&(s.lx-=er,eo="right"),Z.isCenterAnchor(o)&&(s.lx-=er/2,eo="center");var es="top";Z.isBottomAnchor(o)&&(s.ly-=en,es="bottom"),Z.isMiddleAnchor(o)&&(s.ly-=en/2,es="middle"),s.totalWidth=Math.ceil(s.totalWidth),s.totalHeight=Math.ceil(s.totalHeight),s.lx=Math.round(s.lx),s.ly=Math.round(s.ly),F.autoMargin(i,autoMarginId(o),{x:o.x,y:o.y,l:er*(({right:1,center:.5})[eo]||0),r:er*(({left:1,center:.5})[eo]||0),b:en*(({top:1,middle:.5})[es]||0),t:en*(({bottom:1,middle:.5})[es]||0)})}function autoMarginId(i){return et.autoMarginIdRoot+i._index}function setItemPosition(i,o,s,_){_=_||{};var F=i.select("."+et.itemRectClassName),N=i.select("."+et.itemTextClassName),Z=o.borderwidth,$=s.index,er=o._dims;j.setTranslate(i,Z+s.x,Z+s.y);var en=-1!==["up","down"].indexOf(o.direction),ei=_.height||(en?er.heights[$]:er.height1);F.attr({x:0,y:0,width:_.width||(en?er.width1:er.widths[$]),height:ei});var eo=o.font.size*ee,es=X.lineCount(N);X.positionText(N,et.textOffsetX,ei/2-(es-1)*eo/2+et.textOffsetY),en?s.y+=er.heights[$]+s.yPad:s.x+=er.widths[$]+s.xPad,s.index++}function removeAllButtons(i,o){i.attr(et.menuIndexAttrName,o||"-1").selectAll("g."+et.dropdownButtonClassName).remove()}i.exports=function(i){var o=i._fullLayout,s=Z.filterVisible(o[et.name]);function clearAutoMargin(o){F.autoMargin(i,autoMarginId(o))}var N=o._menulayer.selectAll("g."+et.containerClassName).data(s.length>0?[0]:[]);if(N.enter().append("g").classed(et.containerClassName,!0).style("cursor","pointer"),N.exit().each(function(){_.select(this).selectAll("g."+et.headerGroupClassName).each(clearAutoMargin)}).remove(),0!==s.length){var j=N.selectAll("g."+et.headerGroupClassName).data(s,keyFunction);j.enter().append("g").classed(et.headerGroupClassName,!0);for(var X=Z.ensureSingle(N,"g",et.dropdownButtonGroupClassName,function(i){i.style("pointer-events","all")}),$=0;$<s.length;$++)findDimensions(i,s[$]);var ee=new er(i,X,"updatemenus"+o._uid);j.enter().size()&&(X.node().parentNode.appendChild(X.node()),X.call(removeAllButtons)),j.exit().each(function(i){X.call(removeAllButtons),clearAutoMargin(i)}).remove(),j.each(function(o){var s=_.select(this),N="dropdown"===o.type?X:null;F.manageCommandObserver(i,o,o.buttons,function(_){setActive(i,o,o.buttons[_.index],s,N,ee,_.index,!0)}),"dropdown"===o.type?(drawHeader(i,s,X,ee,o),isActive(X,o)&&drawButtons(i,s,X,ee,o)):drawButtons(i,s,null,null,o)})}}},20763:function(i,o,s){"use strict";var _=s(75909);i.exports={moduleType:"component",name:_.name,layoutAttributes:s(7163),supplyLayoutDefaults:s(64897),draw:s(13689)}},25849:function(i,o,s){"use strict";i.exports=ScrollBox;var _=s(39898),F=s(7901),N=s(91424),j=s(71828);function ScrollBox(i,o,s){this.gd=i,this.container=o,this.id=s,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}ScrollBox.barWidth=2,ScrollBox.barLength=20,ScrollBox.barRadius=2,ScrollBox.barPad=1,ScrollBox.barColor="#808BA4",ScrollBox.prototype.enable=function(i,o,s){var j,Z,X,$,ee=this.gd._fullLayout,et=ee.width,er=ee.height;this.position=i;var en=this.position.l,ei=this.position.w,eo=this.position.t,es=this.position.h,el=this.position.direction,ec="down"===el,eu="left"===el,ef="up"===el,ed=ei,eh=es;ec||eu||"right"===el||ef||(this.position.direction="down",ec=!0),ec||ef?(Z=(j=en)+ed,ec?eh=($=Math.min((X=eo)+eh,er))-X:(X=Math.max(($=eo+eh)-eh,0),eh=$-X)):($=(X=eo)+eh,eu?(j=Math.max((Z=en+ed)-ed,0),ed=Z-j):ed=(Z=Math.min((j=en)+ed,et))-j),this._box={l:j,t:X,w:ed,h:eh};var ep=ei>ed,eg=ScrollBox.barLength+2*ScrollBox.barPad,em=ScrollBox.barWidth+2*ScrollBox.barPad,ey=eo+es;ey+em>er&&(ey=er-em);var ev=this.container.selectAll("rect.scrollbar-horizontal").data(ep?[0]:[]);ev.exit().on(".drag",null).remove(),ev.enter().append("rect").classed("scrollbar-horizontal",!0).call(F.fill,ScrollBox.barColor),ep?(this.hbar=ev.attr({rx:ScrollBox.barRadius,ry:ScrollBox.barRadius,x:en,y:ey,width:eg,height:em}),this._hbarXMin=en+eg/2,this._hbarTranslateMax=ed-eg):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var ex=es>eh,e_=ScrollBox.barWidth+2*ScrollBox.barPad,ew=ScrollBox.barLength+2*ScrollBox.barPad,eT=en+ei;eT+e_>et&&(eT=et-e_);var ek=this.container.selectAll("rect.scrollbar-vertical").data(ex?[0]:[]);ek.exit().on(".drag",null).remove(),ek.enter().append("rect").classed("scrollbar-vertical",!0).call(F.fill,ScrollBox.barColor),ex?(this.vbar=ek.attr({rx:ScrollBox.barRadius,ry:ScrollBox.barRadius,x:eT,y:eo,width:e_,height:ew}),this._vbarYMin=eo+ew/2,this._vbarTranslateMax=eh-ew):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var eA=this.id,eS=j-.5,eM=ex?Z+e_+.5:Z+.5,eC=X-.5,eE=ep?$+em+.5:$+.5,eL=ee._topdefs.selectAll("#"+eA).data(ep||ex?[0]:[]);if(eL.exit().remove(),eL.enter().append("clipPath").attr("id",eA).append("rect"),ep||ex?(this._clipRect=eL.select("rect").attr({x:Math.floor(eS),y:Math.floor(eC),width:Math.ceil(eM)-Math.floor(eS),height:Math.ceil(eE)-Math.floor(eC)}),this.container.call(N.setClipUrl,eA,this.gd),this.bg.attr({x:en,y:eo,width:ei,height:es})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(N.setClipUrl,null),delete this._clipRect),ep||ex){var eP=_.behavior.drag().on("dragstart",function(){_.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(eP);var eI=_.behavior.drag().on("dragstart",function(){_.event.sourceEvent.preventDefault(),_.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));ep&&this.hbar.on(".drag",null).call(eI),ex&&this.vbar.on(".drag",null).call(eI)}this.setTranslate(o,s)},ScrollBox.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(N.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},ScrollBox.prototype._onBoxDrag=function(){var i=this.translateX,o=this.translateY;this.hbar&&(i-=_.event.dx),this.vbar&&(o-=_.event.dy),this.setTranslate(i,o)},ScrollBox.prototype._onBoxWheel=function(){var i=this.translateX,o=this.translateY;this.hbar&&(i+=_.event.deltaY),this.vbar&&(o+=_.event.deltaY),this.setTranslate(i,o)},ScrollBox.prototype._onBarDrag=function(){var i=this.translateX,o=this.translateY;if(this.hbar){var s=i+this._hbarXMin,F=s+this._hbarTranslateMax;i=(j.constrain(_.event.x,s,F)-s)/(F-s)*(this.position.w-this._box.w)}if(this.vbar){var N=o+this._vbarYMin,Z=N+this._vbarTranslateMax;o=(j.constrain(_.event.y,N,Z)-N)/(Z-N)*(this.position.h-this._box.h)}this.setTranslate(i,o)},ScrollBox.prototype.setTranslate=function(i,o){var s=this.position.w-this._box.w,_=this.position.h-this._box.h;if(i=j.constrain(i||0,0,s),o=j.constrain(o||0,0,_),this.translateX=i,this.translateY=o,this.container.call(N.setTranslate,this._box.l-this.position.l-i,this._box.t-this.position.t-o),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+i-.5),y:Math.floor(this.position.t+o-.5)}),this.hbar){var F=i/s;this.hbar.call(N.setTranslate,i+F*this._hbarTranslateMax,o)}if(this.vbar){var Z=o/_;this.vbar.call(N.setTranslate,i,o+Z*this._vbarTranslateMax)}}},18783:function(i){"use strict";i.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(i){"use strict";i.exports={axisRefDescription:function(i,o,s){return["If set to a",i,"axis id (e.g. *"+i+"* or","*"+i+"2*), the `"+i+"` position refers to a",i,"coordinate. If set to *paper*, the `"+i+"`","position refers to the distance from the",o,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",o,"("+s+"). If set to a",i,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",o,"of the domain of that axis: e.g.,","*"+i+"2 domain* refers to the domain of the second",i," axis and a",i,"position of 0.5 refers to the","point between the",o,"and the",s,"of the domain of the","second",i,"axis."].join(" ")}}},22372:function(i){"use strict";i.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},31562:function(i){"use strict";i.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(i){"use strict";i.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(i){"use strict";i.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(i){"use strict";i.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},37822:function(i){"use strict";i.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(i){"use strict";i.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}},32396:function(i,o){"use strict";o.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],o.STYLE=o.CSS_DECLARATIONS.map(function(i){return i.join(": ")+"; "}).join("")},77922:function(i,o){"use strict";o.xmlns="http://www.w3.org/2000/xmlns/",o.svg="http://www.w3.org/2000/svg",o.xlink="http://www.w3.org/1999/xlink",o.svgAttrs={xmlns:o.svg,"xmlns:xlink":o.xlink}},8729:function(i,o,s){"use strict";o.version=s(11506).version,s(7417),s(98847);for(var _=s(73972),F=o.register=_.register,N=s(10641),j=Object.keys(N),Z=0;Z<j.length;Z++){var X=j[Z];"_"!==X.charAt(0)&&(o[X]=N[X]),F({moduleType:"apiMethod",name:X,fn:N[X]})}F(s(67368)),F([s(32745),s(2468),s(47322),s(89853),s(68804),s(20763),s(23243),s(13137),s(97218),s(83312),s(37369),s(21081),s(12311),s(2199),s(30211),s(64168)]),F([s(92177),s(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(F(window.PlotlyLocales),delete window.PlotlyLocales),o.Icons=s(24255);var $=s(30211),ee=s(74875);o.Plots={resize:ee.resize,graphJson:ee.graphJson,sendDataToCloud:ee.sendDataToCloud},o.Fx={hover:$.hover,unhover:$.unhover,loneHover:$.loneHover,loneUnhover:$.loneUnhover},o.Snapshot=s(44511),o.PlotSchema=s(86281)},24255:function(i){"use strict";i.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs> <style>  .cls-0{fill:#000;}  .cls-1{fill:#FFF;}  .cls-2{fill:#F26;}  .cls-3{fill:#D69;}  .cls-4{fill:#BAC;}  .cls-5{fill:#9EF;} </style></defs> <title>plotly-logomark</title> <g id='symbol'>  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>  <circle class='cls-5' cx='102' cy='30' r='6'/>  <circle class='cls-4' cx='78' cy='30' r='6'/>  <circle class='cls-4' cx='78' cy='54' r='6'/>  <circle class='cls-3' cx='54' cy='30' r='6'/>  <circle class='cls-2' cx='30' cy='30' r='6'/>  <circle class='cls-2' cx='30' cy='54' r='6'/>  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/> </g></svg>"}}},99863:function(i,o){"use strict";o.isLeftAnchor=function(i){return"left"===i.xanchor||"auto"===i.xanchor&&i.x<=1/3},o.isCenterAnchor=function(i){return"center"===i.xanchor||"auto"===i.xanchor&&i.x>1/3&&i.x<2/3},o.isRightAnchor=function(i){return"right"===i.xanchor||"auto"===i.xanchor&&i.x>=2/3},o.isTopAnchor=function(i){return"top"===i.yanchor||"auto"===i.yanchor&&i.y>=2/3},o.isMiddleAnchor=function(i){return"middle"===i.yanchor||"auto"===i.yanchor&&i.y>1/3&&i.y<2/3},o.isBottomAnchor=function(i){return"bottom"===i.yanchor||"auto"===i.yanchor&&i.y<=1/3}},26348:function(i,o,s){"use strict";var _=s(64872),F=_.mod,N=_.modHalf,j=Math.PI,Z=2*j;function deg2rad(i){return i/180*j}function rad2deg(i){return i/j*180}function isFullCircle(i){return Math.abs(i[1]-i[0])>Z-1e-14}function angleDelta(i,o){return N(o-i,Z)}function angleDist(i,o){return Math.abs(angleDelta(i,o))}function isAngleInsideSector(i,o){if(isFullCircle(o))return!0;o[0]<o[1]?(s=o[0],_=o[1]):(s=o[1],_=o[0]),(s=F(s,Z))>(_=F(_,Z))&&(_+=Z);var s,_,N=F(i,Z),j=N+Z;return N>=s&&N<=_||j>=s&&j<=_}function isPtInsideSector(i,o,s,_){var F,N;return!!isAngleInsideSector(o,_)&&(s[0]<s[1]?(F=s[0],N=s[1]):(F=s[1],N=s[0]),i>=F&&i<=N)}function _path(i,o,s,_,F,N,X){F=F||0,N=N||0;var $,ee,et,er,en,ei,eo=isFullCircle([s,_]);function pt(i,o){return[i*Math.cos(o)+F,N-i*Math.sin(o)]}eo?($=0,ee=j,et=Z):s<_?($=s,et=_):($=_,et=s),i<o?(er=i,en=o):(er=o,en=i);var es=Math.abs(et-$)<=j?0:1;function arc(i,o,s){return"A"+[i,i]+" "+[0,es,s]+" "+pt(i,o)}return eo?ei=null===er?"M"+pt(en,$)+arc(en,ee,0)+arc(en,et,0)+"Z":"M"+pt(er,$)+arc(er,ee,0)+arc(er,et,0)+"ZM"+pt(en,$)+arc(en,ee,1)+arc(en,et,1)+"Z":null===er?(ei="M"+pt(en,$)+arc(en,et,0),X&&(ei+="L0,0Z")):ei="M"+pt(er,$)+"L"+pt(en,$)+arc(en,et,0)+"L"+pt(er,et)+arc(er,$,1)+"Z",ei}function pathArc(i,o,s,_,F){return _path(null,i,o,s,_,F,0)}function pathSector(i,o,s,_,F){return _path(null,i,o,s,_,F,1)}function pathAnnulus(i,o,s,_,F,N){return _path(i,o,s,_,F,N,1)}i.exports={deg2rad:deg2rad,rad2deg:rad2deg,angleDelta:angleDelta,angleDist:angleDist,isFullCircle:isFullCircle,isAngleInsideSector:isAngleInsideSector,isPtInsideSector:isPtInsideSector,pathArc:pathArc,pathSector:pathSector,pathAnnulus:pathAnnulus}},73627:function(i,o){"use strict";var s=Array.isArray,_=ArrayBuffer,F=DataView;function isTypedArray(i){return _.isView(i)&&!(i instanceof F)}function isArrayOrTypedArray(i){return s(i)||isTypedArray(i)}function isArray1D(i){return!isArrayOrTypedArray(i[0])}function _rowLength(i,o,s){if(isArrayOrTypedArray(i)){if(!isArrayOrTypedArray(i[0]))return i.length;for(var _=s,F=0;F<i.length;F++)_=o(_,i[F].length);return _}return 0}o.isTypedArray=isTypedArray,o.isArrayOrTypedArray=isArrayOrTypedArray,o.isArray1D=isArray1D,o.ensureArray=function(i,o){return s(i)||(i=[]),i.length=o,i},o.concat=function(){var i,o,_,F,N,j,Z,X,$=[],ee=!0,et=0;for(_=0;_<arguments.length;_++)F=arguments[_],(j=F.length)&&(o?$.push(F):(o=F,N=j),s(F)?i=!1:(ee=!1,et?i!==F.constructor&&(i=!1):i=F.constructor),et+=j);if(!et)return[];if(!$.length)return o;if(ee)return o.concat.apply(o,$);if(i){for((Z=new i(et)).set(o),_=0;_<$.length;_++)F=$[_],Z.set(F,N),N+=F.length;return Z}for(X=0,Z=Array(et);X<o.length;X++)Z[X]=o[X];for(_=0;_<$.length;_++){for(X=0,F=$[_];X<F.length;X++)Z[N+X]=F[X];N+=X}return Z},o.maxRowLength=function(i){return _rowLength(i,Math.max,0)},o.minRowLength=function(i){return _rowLength(i,Math.min,1/0)}},95218:function(i,o,s){"use strict";var _=s(92770),F=s(50606).BADNUM,N=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;i.exports=function(i){return("string"==typeof i&&(i=i.replace(N,"")),_(i))?Number(i):F}},33306:function(i){"use strict";i.exports=function(i){var o=i._fullLayout;o._glcanvas&&o._glcanvas.size()&&o._glcanvas.each(function(i){i.regl&&i.regl.clear({color:!0,depth:!0})})}},86367:function(i){"use strict";i.exports=function(i){i._responsiveChartHandler&&(window.removeEventListener("resize",i._responsiveChartHandler),delete i._responsiveChartHandler)}},96554:function(i,o,s){"use strict";var _=s(92770),F=s(84267),N=s(9012),j=s(63282),Z=s(7901),X=s(37822).DESELECTDIM,$=s(65487),ee=s(30587).counter,et=s(64872).modHalf,er=s(73627).isArrayOrTypedArray;function validate(i,s){var _=o.valObjectMeta[s.valType];if(s.arrayOk&&er(i))return!0;if(_.validateFunction)return _.validateFunction(i,s);var F={},N=F;return _.coerceFunction(i,{set:function(i){N=i}},F,s),N!==F}o.valObjectMeta={data_array:{coerceFunction:function(i,o,s){er(i)?o.set(i):void 0!==s&&o.set(s)}},enumerated:{coerceFunction:function(i,o,s,_){_.coerceNumber&&(i=+i),-1===_.values.indexOf(i)?o.set(s):o.set(i)},validateFunction:function(i,o){o.coerceNumber&&(i=+i);for(var s=o.values,_=0;_<s.length;_++){var F=String(s[_]);if("/"===F.charAt(0)&&"/"===F.charAt(F.length-1)){if(new RegExp(F.substr(1,F.length-2)).test(i))return!0}else if(i===s[_])return!0}return!1}},boolean:{coerceFunction:function(i,o,s){!0===i||!1===i?o.set(i):o.set(s)}},number:{coerceFunction:function(i,o,s,F){!_(i)||void 0!==F.min&&i<F.min||void 0!==F.max&&i>F.max?o.set(s):o.set(+i)}},integer:{coerceFunction:function(i,o,s,F){i%1||!_(i)||void 0!==F.min&&i<F.min||void 0!==F.max&&i>F.max?o.set(s):o.set(+i)}},string:{coerceFunction:function(i,o,s,_){if("string"!=typeof i){var F="number"==typeof i;!0!==_.strict&&F?o.set(String(i)):o.set(s)}else _.noBlank&&!i?o.set(s):o.set(i)}},color:{coerceFunction:function(i,o,s){F(i).isValid()?o.set(i):o.set(s)}},colorlist:{coerceFunction:function(i,o,s){function isColor(i){return F(i).isValid()}Array.isArray(i)&&i.length&&i.every(isColor)?o.set(i):o.set(s)}},colorscale:{coerceFunction:function(i,o,s){o.set(j.get(i,s))}},angle:{coerceFunction:function(i,o,s){"auto"===i?o.set("auto"):_(i)?o.set(et(+i,360)):o.set(s)}},subplotid:{coerceFunction:function(i,o,s,_){var F=_.regex||ee(s);if("string"==typeof i&&F.test(i)){o.set(i);return}o.set(s)},validateFunction:function(i,o){var s=o.dflt;return i===s||"string"==typeof i&&!!ee(s).test(i)}},flaglist:{coerceFunction:function(i,o,s,_){if(-1!==(_.extras||[]).indexOf(i)){o.set(i);return}if("string"!=typeof i){o.set(s);return}for(var F=i.split("+"),N=0;N<F.length;){var j=F[N];-1===_.flags.indexOf(j)||F.indexOf(j)<N?F.splice(N,1):N++}F.length?o.set(F.join("+")):o.set(s)}},any:{coerceFunction:function(i,o,s){void 0===i?o.set(s):o.set(i)}},info_array:{coerceFunction:function(i,s,_,F){function coercePart(i,s,_){var F;return void 0===_&&(_=s.dflt),o.valObjectMeta[s.valType].coerceFunction(i,{set:function(i){F=i}},_,s),F}var N,j,Z,X,$,ee,et=2===F.dimensions||"1-2"===F.dimensions&&Array.isArray(i)&&Array.isArray(i[0]);if(!Array.isArray(i)){s.set(_);return}var er=F.items,en=[],ei=Array.isArray(er),eo=ei&&et&&Array.isArray(er[0]),es=et&&ei&&!eo,el=ei&&!es?er.length:i.length;if(_=Array.isArray(_)?_:[],et)for(N=0;N<el;N++)for(j=0,en[N]=[],Z=Array.isArray(i[N])?i[N]:[],$=es?er.length:ei?er[N].length:Z.length;j<$;j++)X=es?er[j]:ei?er[N][j]:er,void 0!==(ee=coercePart(Z[j],X,(_[N]||[])[j]))&&(en[N][j]=ee);else for(N=0;N<el;N++)void 0!==(ee=coercePart(i[N],ei?er[N]:er,_[N]))&&(en[N]=ee);s.set(en)},validateFunction:function(i,o){if(!Array.isArray(i))return!1;var s=o.items,_=Array.isArray(s),F=2===o.dimensions;if(!o.freeLength&&i.length!==s.length)return!1;for(var N=0;N<i.length;N++)if(F){if(!Array.isArray(i[N])||!o.freeLength&&i[N].length!==s[N].length)return!1;for(var j=0;j<i[N].length;j++)if(!validate(i[N][j],_?s[N][j]:s))return!1}else if(!validate(i[N],_?s[N]:s))return!1;return!0}}},o.coerce=function(i,s,_,F,N){var j=$(_,F).get(),Z=$(i,F),X=$(s,F),ee=Z.get(),et=s._template;if(void 0===ee&&et&&(ee=$(et,F).get(),et=0),void 0===N&&(N=j.dflt),j.arrayOk&&er(ee))return X.set(ee),ee;var en=o.valObjectMeta[j.valType].coerceFunction;en(ee,X,N,j);var ei=X.get();return et&&ei===N&&!validate(ee,j)&&(en(ee=$(et,F).get(),X,N,j),ei=X.get()),ei},o.coerce2=function(i,s,_,F,N){var j=$(i,F),Z=o.coerce(i,s,_,F,N);return null!=j.get()&&Z},o.coerceFont=function(i,o,s){var _={};return s=s||{},_.family=i(o+".family",s.family),_.size=i(o+".size",s.size),_.color=i(o+".color",s.color),_},o.coercePattern=function(i,o,s,_){if(i(o+".shape")){i(o+".solidity"),i(o+".size");var F="overlay"===i(o+".fillmode");if(!_){var N=i(o+".bgcolor",F?s:void 0);i(o+".fgcolor",F?Z.contrast(N):s)}i(o+".fgopacity",F?.5:1)}},o.coerceHoverinfo=function(i,s,_){var F,j=s._module.attributes,Z=j.hoverinfo?j:N,X=Z.hoverinfo;if(1===_._dataLength){var $="all"===X.dflt?X.flags.slice():X.dflt.split("+");$.splice($.indexOf("name"),1),F=$.join("+")}return o.coerce(i,s,Z,"hoverinfo",F)},o.coerceSelectionMarkerOpacity=function(i,o){if(i.marker){var s,_,F=i.marker.opacity;void 0!==F&&(er(F)||i.selected||i.unselected||(s=F,_=X*F),o("selected.marker.opacity",s),o("unselected.marker.opacity",_))}},o.validate=validate},41631:function(i,o,s){"use strict";var _,F,N=s(84096).i$,j=s(92770),Z=s(47769),X=s(64872).mod,$=s(50606),ee=$.BADNUM,et=$.ONEDAY,er=$.ONEHOUR,en=$.ONEMIN,ei=$.ONESEC,eo=$.EPOCHJD,es=s(73972),el=s(84096).g0,ec=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,eu=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,ef=new Date().getFullYear()-70;function isWorldCalendar(i){return i&&es.componentsRegistry.calendars&&"string"==typeof i&&"gregorian"!==i}function _dateTick0(i,o){return isWorldCalendar(i)?o?es.getComponentMethod("calendars","CANONICAL_SUNDAY")[i]:es.getComponentMethod("calendars","CANONICAL_TICK")[i]:o?"2000-01-02":"2000-01-01"}function lpad(i,o){return String(i+Math.pow(10,o)).substr(1)}o.dateTick0=function(i,s){var _=_dateTick0(i,!!s);if(s<2)return _;var F=o.dateTime2ms(_,i);return F+=et*(s-1),o.ms2DateTime(F,0,i)},o.dfltRange=function(i){return isWorldCalendar(i)?es.getComponentMethod("calendars","DFLTRANGE")[i]:["2000-01-01","2001-01-01"]},o.isJSDate=function(i){return"object"==typeof i&&null!==i&&"function"==typeof i.getTime},o.dateTime2ms=function(i,s){if(o.isJSDate(i)){var N=i.getTimezoneOffset()*en,j=(i.getUTCMinutes()-i.getMinutes())*en+(i.getUTCSeconds()-i.getSeconds())*ei+(i.getUTCMilliseconds()-i.getMilliseconds());if(j){var Z=3*en;N=N-Z/2+X(j-N+Z/2,Z)}return(i=Number(i)-N)>=_&&i<=F?i:ee}if("string"!=typeof i&&"number"!=typeof i)return ee;i=String(i);var $=isWorldCalendar(s),el=i.charAt(0);$&&("G"===el||"g"===el)&&(i=i.substr(1),s="");var ed=$&&"chinese"===s.substr(0,7),eh=i.match(ed?eu:ec);if(!eh)return ee;var ep=eh[1],eg=eh[3]||"1",em=Number(eh[5]||1),ey=Number(eh[7]||0),ev=Number(eh[9]||0),ex=Number(eh[11]||0);if($){if(2===ep.length)return ee;ep=Number(ep);try{var e_,ew=es.getComponentMethod("calendars","getCal")(s);if(ed){var eT="i"===eg.charAt(eg.length-1);eg=parseInt(eg,10),e_=ew.newDate(ep,ew.toMonthIndex(ep,eg,eT),em)}else e_=ew.newDate(ep,Number(eg),em)}catch(i){return ee}return e_?(e_.toJD()-eo)*et+ey*er+ev*en+ex*ei:ee}ep=2===ep.length?(Number(ep)+2e3-ef)%100+ef:Number(ep);var ek=new Date(Date.UTC(2e3,eg-=1,em,ey,ev));return(ek.setUTCFullYear(ep),ek.getUTCMonth()!==eg||ek.getUTCDate()!==em)?ee:ek.getTime()+ex*ei},_=o.MIN_MS=o.dateTime2ms("-9999"),F=o.MAX_MS=o.dateTime2ms("9999-12-31 23:59:59.9999"),o.isDateTime=function(i,s){return o.dateTime2ms(i,s)!==ee};var ed=90*et,eh=3*er,ep=5*en;function includeTime(i,o,s,_,F){if((o||s||_||F)&&(i+=" "+lpad(o,2)+":"+lpad(s,2),(_||F)&&(i+=":"+lpad(_,2),F))){for(var N=4;F%10==0;)N-=1,F/=10;i+="."+lpad(F,N)}return i}o.ms2DateTime=function(i,o,s){if("number"!=typeof i||!(i>=_&&i<=F))return ee;o||(o=0);var N,j,Z,$,ec,eu,ef=Math.floor(10*X(i+.05,1)),eg=Math.round(i-ef/10);if(isWorldCalendar(s)){var em=Math.floor(eg/et)+eo,ey=Math.floor(X(i,et));try{N=es.getComponentMethod("calendars","getCal")(s).fromJD(em).formatDate("yyyy-mm-dd")}catch(i){N=el("G%Y-%m-%d")(new Date(eg))}if("-"===N.charAt(0))for(;N.length<11;)N="-0"+N.substr(1);else for(;N.length<10;)N="0"+N;j=o<ed?Math.floor(ey/er):0,Z=o<ed?Math.floor(ey%er/en):0,$=o<eh?Math.floor(ey%en/ei):0,ec=o<ep?ey%ei*10+ef:0}else eu=new Date(eg),N=el("%Y-%m-%d")(eu),j=o<ed?eu.getUTCHours():0,Z=o<ed?eu.getUTCMinutes():0,$=o<eh?eu.getUTCSeconds():0,ec=o<ep?10*eu.getUTCMilliseconds()+ef:0;return includeTime(N,j,Z,$,ec)},o.ms2DateTimeLocal=function(i){if(!(i>=_+et&&i<=F-et))return ee;var o=Math.floor(10*X(i+.05,1)),s=new Date(Math.round(i-o/10));return includeTime(N("%Y-%m-%d")(s),s.getHours(),s.getMinutes(),s.getSeconds(),10*s.getUTCMilliseconds()+o)},o.cleanDate=function(i,s,_){if(i===ee)return s;if(o.isJSDate(i)||"number"==typeof i&&isFinite(i)){if(isWorldCalendar(_))return Z.error("JS Dates and milliseconds are incompatible with world calendars",i),s;if(!(i=o.ms2DateTimeLocal(+i))&&void 0!==s)return s}else if(!o.isDateTime(i,_))return Z.error("unrecognized date",i),s;return i};var eg=/%\d?f/g,em=/%h/g,ey={1:"1",2:"1",3:"2",4:"2"};function modDateFormat(i,o,s,_){i=i.replace(eg,function(i){var s=Math.min(+i.charAt(1)||6,6);return(o/1e3%1+2).toFixed(s).substr(2).replace(/0+$/,"")||"0"});var F=new Date(Math.floor(o+.05));if(i=i.replace(em,function(){return ey[s("%q")(F)]}),isWorldCalendar(_))try{i=es.getComponentMethod("calendars","worldCalFmt")(i,o,_)}catch(i){return"Invalid"}return s(i)(F)}var ev=[59,59.9,59.99,59.999,59.9999];function formatTime(i,o){var s=X(i+.05,et),_=lpad(Math.floor(s/er),2)+":"+lpad(X(Math.floor(s/en),60),2);if("M"!==o){j(o)||(o=0);var F=(100+Math.min(X(i/ei,60),ev[o])).toFixed(o).substr(1);o>0&&(F=F.replace(/0+$/,"").replace(/[\.]$/,"")),_+=":"+F}return _}o.formatDate=function(i,o,s,_,F,N){if(F=isWorldCalendar(F)&&F,!o){if("y"===s)o=N.year;else if("m"===s)o=N.month;else{if("d"!==s)return formatTime(i,s)+"\n"+modDateFormat(N.dayMonthYear,i,_,F);o=N.dayMonth+"\n"+N.year}}return modDateFormat(o,i,_,F)};var ex=3*et;o.incrementMonth=function(i,o,s){s=isWorldCalendar(s)&&s;var _=X(i,et);if(i=Math.round(i-_),s)try{var F=Math.round(i/et)+eo,N=es.getComponentMethod("calendars","getCal")(s),j=N.fromJD(F);return o%12?N.add(j,o,"m"):N.add(j,o/12,"y"),(j.toJD()-eo)*et+_}catch(o){Z.error("invalid ms "+i+" in calendar "+s)}var $=new Date(i+ex);return $.setUTCMonth($.getUTCMonth()+o)+_-ex},o.findExactDates=function(i,o){for(var s,_,F=0,N=0,Z=0,X=0,$=isWorldCalendar(o)&&es.getComponentMethod("calendars","getCal")(o),ee=0;ee<i.length;ee++){if(!j(_=i[ee])){X++;continue}if(!(_%et)){if($)try{s=$.fromJD(_/et+eo),1===s.day()?1===s.month()?F++:N++:Z++}catch(i){}else 1===(s=new Date(_)).getUTCDate()?0===s.getUTCMonth()?F++:N++:Z++}}N+=F,Z+=N;var er=i.length-X;return{exactYears:F/er,exactMonths:N/er,exactDays:Z/er}}},24401:function(i,o,s){"use strict";var _=s(39898),F=s(47769),N=s(35657),j=s(79576);function getGraphDiv(i){var o;if("string"==typeof i){if(null===(o=document.getElementById(i)))throw Error("No DOM element with id '"+i+"' exists on the page.");return o}if(null==i)throw Error("DOM element provided is null or undefined");return i}function isPlotDiv(i){var o=_.select(i);return o.node() instanceof HTMLElement&&o.size()&&o.classed("js-plotly-plot")}function removeElement(i){var o=i&&i.parentNode;o&&o.removeChild(i)}function addStyleRule(i,o){addRelatedStyleRule("global",i,o)}function addRelatedStyleRule(i,o,s){var _="plotly.js-style-"+i,N=document.getElementById(_);N||((N=document.createElement("style")).setAttribute("id",_),N.appendChild(document.createTextNode("")),document.head.appendChild(N));var j=N.sheet;j.insertRule?j.insertRule(o+"{"+s+"}",0):j.addRule?j.addRule(o,s,0):F.warn("addStyleRule failed")}function deleteRelatedStyleRule(i){var o=document.getElementById("plotly.js-style-"+i);o&&removeElement(o)}function getFullTransformMatrix(i){var o=getElementAndAncestors(i),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return o.forEach(function(i){var o=getElementTransformMatrix(i);if(o){var _=N.convertCssMatrix(o);s=j.multiply(s,s,_)}}),s}function getElementTransformMatrix(i){var o=window.getComputedStyle(i,null),s=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("-moz-transform")||o.getPropertyValue("-ms-transform")||o.getPropertyValue("-o-transform")||o.getPropertyValue("transform");return"none"===s?null:s.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function getElementAndAncestors(i){for(var o=[];isTransformableElement(i);)o.push(i),i=i.parentNode;return o}function isTransformableElement(i){return i&&(i instanceof Element||i instanceof HTMLElement)}function equalDomRects(i,o){return i&&o&&i.top===o.top&&i.left===o.left&&i.right===o.right&&i.bottom===o.bottom}i.exports={getGraphDiv:getGraphDiv,isPlotDiv:isPlotDiv,removeElement:removeElement,addStyleRule:addStyleRule,addRelatedStyleRule:addRelatedStyleRule,deleteRelatedStyleRule:deleteRelatedStyleRule,getFullTransformMatrix:getFullTransformMatrix,getElementTransformMatrix:getElementTransformMatrix,getElementAndAncestors:getElementAndAncestors,equalDomRects:equalDomRects}},11086:function(i,o,s){"use strict";var _=s(15398).EventEmitter;i.exports={init:function(i){if(i._ev instanceof _)return i;var o=new _,s=new _;return i._ev=o,i._internalEv=s,i.on=o.on.bind(o),i.once=o.once.bind(o),i.removeListener=o.removeListener.bind(o),i.removeAllListeners=o.removeAllListeners.bind(o),i._internalOn=s.on.bind(s),i._internalOnce=s.once.bind(s),i._removeInternalListener=s.removeListener.bind(s),i._removeAllInternalListeners=s.removeAllListeners.bind(s),i.emit=function(_,F){"undefined"!=typeof jQuery&&jQuery(i).trigger(_,F),o.emit(_,F),s.emit(_,F)},i},triggerHandler:function(i,o,s){"undefined"!=typeof jQuery&&(_=jQuery(i).triggerHandler(o,s));var _,F,N,j=i._ev;if(!j)return _;var Z=j._events[o];if(!Z)return _;function apply(i){return i.listener?(j.removeListener(o,i.listener),i.fired)?void 0:(i.fired=!0,i.listener.apply(j,[s])):i.apply(j,[s])}for(N=0,Z=Array.isArray(Z)?Z:[Z];N<Z.length-1;N++)apply(Z[N]);return F=apply(Z[N]),void 0!==_?_:F},purge:function(i){return delete i._ev,delete i.on,delete i.once,delete i.removeListener,delete i.removeAllListeners,delete i.emit,delete i._ev,delete i._internalEv,delete i._internalOn,delete i._internalOnce,delete i._removeInternalListener,delete i._removeAllInternalListeners,i}}},1426:function(i,o,s){"use strict";var _=s(41965),F=Array.isArray;function primitivesLoopSplice(i,o){var s,_;for(s=0;s<i.length;s++){if(null!==(_=i[s])&&"object"==typeof _)return!1;void 0!==_&&(o[s]=_)}return!0}function _extend(i,o,s,N){var j,Z,X,$,ee,et,er=i[0],en=i.length;if(2===en&&F(er)&&F(i[1])&&0===er.length){if(primitivesLoopSplice(i[1],er))return er;er.splice(0,er.length)}for(var ei=1;ei<en;ei++)for(Z in j=i[ei])X=er[Z],$=j[Z],N&&F($)?er[Z]=$:o&&$&&(_($)||(ee=F($)))?(ee?(ee=!1,et=X&&F(X)?X:[]):et=X&&_(X)?X:{},er[Z]=_extend([et,$],o,s,N)):(void 0!==$||s)&&(er[Z]=$);return er}o.extendFlat=function(){return _extend(arguments,!1,!1,!1)},o.extendDeep=function(){return _extend(arguments,!0,!1,!1)},o.extendDeepAll=function(){return _extend(arguments,!0,!0,!1)},o.extendDeepNoArrays=function(){return _extend(arguments,!0,!1,!0)}},75744:function(i){"use strict";i.exports=function(i){for(var o={},s=[],_=0,F=0;F<i.length;F++){var N=i[F];1!==o[N]&&(o[N]=1,s[_++]=N)}return s}},76756:function(i){"use strict";function baseFilter(i){return!0===i.visible}function calcDataFilter(i){var o=i[0].trace;return!0===o.visible&&0!==o._length}function isCalcData(i){return Array.isArray(i)&&Array.isArray(i[0])&&i[0][0]&&i[0][0].trace}i.exports=function(i){for(var o=isCalcData(i)?calcDataFilter:baseFilter,s=[],_=0;_<i.length;_++){var F=i[_];o(F)&&s.push(F)}return s}},41327:function(i,o,s){"use strict";var _=s(39898),F=s(24138),N=s(30774),j=s(29261),Z=s(85268),X=s(23389),$=s(47769),ee=s(41965),et=s(65487),er=s(61082),en=Object.keys(F),ei={"ISO-3":X,"USA-states":X,"country names":countryNameToISO3};function countryNameToISO3(i){for(var o=0;o<en.length;o++){var s=en[o];if(new RegExp(F[s]).test(i.trim().toLowerCase()))return s}return $.log("Unrecognized country name: "+i+"."),!1}function locationToFeature(i,o,s){if(!o||"string"!=typeof o)return!1;var _,F,N,j=ei[i](o);if(j){if("USA-states"===i)for(N=0,_=[];N<s.length;N++)(F=s[N]).properties&&F.properties.gu&&"USA"===F.properties.gu&&_.push(F);else _=s;for(N=0;N<_.length;N++)if((F=_[N]).id===j)return F;$.log(["Location with id",j,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function feature2polygons(i){var o,s,_,F,N=i.geometry,j=N.coordinates,Z=i.id,X=[];function doesCrossAntiMerdian(i){for(var o=0;o<i.length-1;o++)if(i[o][0]>0&&i[o+1][0]<0)return o;return null}switch(o="RUS"===Z||"FJI"===Z?function(i){var o;if(null===doesCrossAntiMerdian(i))o=i;else for(F=0,o=Array(i.length);F<i.length;F++)o[F]=[i[F][0]<0?i[F][0]+360:i[F][0],i[F][1]];X.push(er.tester(o))}:"ATA"===Z?function(i){var o=doesCrossAntiMerdian(i);if(null===o)return X.push(er.tester(i));var s=Array(i.length+1),_=0;for(F=0;F<i.length;F++)F>o?s[_++]=[i[F][0]+360,i[F][1]]:F===o?(s[_++]=i[F],s[_++]=[i[F][0],-90]):s[_++]=i[F];var N=er.tester(s);N.pts.pop(),X.push(N)}:function(i){X.push(er.tester(i))},N.type){case"MultiPolygon":for(s=0;s<j.length;s++)for(_=0;_<j[s].length;_++)o(j[s][_]);break;case"Polygon":for(s=0;s<j.length;s++)o(j[s])}return X}function getTraceGeojson(i){var o=i.geojson,s=window.PlotlyGeoAssets||{},_="string"==typeof o?s[o]:o;return ee(_)?_:($.error("Oops ... something went wrong when fetching "+o),!1)}function extractTraceFeature(i){var o,s=i[0].trace,_=getTraceGeojson(s);if(!_)return!1;var F={},N=[];for(o=0;o<s._length;o++){var j=i[o];(j.loc||0===j.loc)&&(F[j.loc]=j)}function appendFeature(i){var o=et(i,s.featureidkey||"id").get(),_=F[o];if(_){var j=i.geometry;if("Polygon"===j.type||"MultiPolygon"===j.type){var Z={type:"Feature",id:o,geometry:j,properties:{}};Z.properties.ct=findCentroid(Z),_.fIn=i,_.fOut=Z,N.push(Z)}else $.log(["Location",_.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete F[o]}switch(_.type){case"FeatureCollection":var Z=_.features;for(o=0;o<Z.length;o++)appendFeature(Z[o]);break;case"Feature":appendFeature(_);break;default:return $.warn(["Invalid GeoJSON type",(_.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var X in F)$.log(["Location *"+X+"*","does not have a matching feature with id-key","*"+s.featureidkey+"*."].join(" "));return N}function findCentroid(i){var o,s=i.geometry;if("MultiPolygon"===s.type)for(var _=s.coordinates,F=0,Z=0;Z<_.length;Z++){var X={type:"Polygon",coordinates:_[Z]},$=N.default(X);$>F&&(F=$,o=X)}else o=s;return j.default(o).geometry.coordinates}function fetchTraceGeoData(i){var o=window.PlotlyGeoAssets||{},s=[];function fetch(i){return new Promise(function(s,F){_.json(i,function(_,N){return _?(delete o[i],F(Error(404===_.status?'GeoJSON at URL "'+i+'" does not exist.':"Unexpected error while fetching from "+i))):(o[i]=N,s(N))})})}function wait(i){return new Promise(function(s,_){var F=0,N=setInterval(function(){return o[i]&&"pending"!==o[i]?(clearInterval(N),s(o[i])):F>100?(clearInterval(N),_("Unexpected error while fetching from "+i)):void F++},50)})}for(var F=0;F<i.length;F++){var N=i[F][0].trace.geojson;"string"==typeof N&&(o[N]?"pending"===o[N]&&s.push(wait(N)):(o[N]="pending",s.push(fetch(N))))}return s}function computeBbox(i){return Z.default(i)}i.exports={locationToFeature:locationToFeature,feature2polygons:feature2polygons,getTraceGeojson:getTraceGeojson,extractTraceFeature:extractTraceFeature,fetchTraceGeoData:fetchTraceGeoData,computeBbox:computeBbox}},18214:function(i,o,s){"use strict";var _=s(50606).BADNUM;o.calcTraceToLineCoords=function(i){for(var o=i[0].trace.connectgaps,s=[],F=[],N=0;N<i.length;N++){var j=i[N].lonlat;j[0]!==_?F.push(j):!o&&F.length>0&&(s.push(F),F=[])}return F.length>0&&s.push(F),s},o.makeLine=function(i){return 1===i.length?{type:"LineString",coordinates:i[0]}:{type:"MultiLineString",coordinates:i}},o.makePolygon=function(i){if(1===i.length)return{type:"Polygon",coordinates:i};for(var o=Array(i.length),s=0;s<i.length;s++)o[s]=[i[s]];return{type:"MultiPolygon",coordinates:o}},o.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(i,o,s){"use strict";var _,F,N,j=s(64872).mod;function segmentsIntersect(i,o,s,_,F,N,j,Z){var X=s-i,$=F-i,ee=j-F,et=_-o,er=N-o,en=Z-N,ei=X*en-ee*et;if(0===ei)return null;var eo=($*en-ee*er)/ei,es=($*et-X*er)/ei;return es<0||es>1||eo<0||eo>1?null:{x:i+X*eo,y:o+et*eo}}function perpDistance2(i,o,s,_,F){var N=_*i+F*o;if(N<0)return _*_+F*F;if(N>s){var j=_-i,Z=F-o;return j*j+Z*Z}var X=_*o-F*i;return X*X/s}o.segmentsIntersect=segmentsIntersect,o.segmentDistance=function(i,o,s,_,F,N,j,Z){if(segmentsIntersect(i,o,s,_,F,N,j,Z))return 0;var X=s-i,$=_-o,ee=j-F,et=Z-N,er=X*X+$*$,en=ee*ee+et*et;return Math.sqrt(Math.min(perpDistance2(X,$,er,F-i,N-o),perpDistance2(X,$,er,j-i,Z-o),perpDistance2(ee,et,en,i-F,o-N),perpDistance2(ee,et,en,s-F,_-N)))},o.getTextLocation=function(i,o,s,Z){if((i!==F||Z!==N)&&(_={},F=i,N=Z),_[s])return _[s];var X=i.getPointAtLength(j(s-Z/2,o)),$=i.getPointAtLength(j(s+Z/2,o)),ee=Math.atan(($.y-X.y)/($.x-X.x)),et=i.getPointAtLength(j(s,o)),er={x:(4*et.x+X.x+$.x)/6,y:(4*et.y+X.y+$.y)/6,theta:ee};return _[s]=er,er},o.clearLocationCache=function(){F=null},o.getVisibleSegment=function(i,o,s){var _,F,N=o.left,j=o.right,Z=o.top,X=o.bottom,$=0,ee=i.getTotalLength(),et=ee;function getDistToPlot(o){var s=i.getPointAtLength(o);0===o?_=s:o===ee&&(F=s);var $=s.x<N?N-s.x:s.x>j?s.x-j:0,et=s.y<Z?Z-s.y:s.y>X?s.y-X:0;return Math.sqrt($*$+et*et)}for(var er=getDistToPlot($);er;){if(($+=er+s)>et)return;er=getDistToPlot($)}for(er=getDistToPlot(et);er;){if($>(et-=er+s))return;er=getDistToPlot(et)}return{min:$,max:et,len:et-$,total:ee,isClosed:0===$&&et===ee&&.1>Math.abs(_.x-F.x)&&.1>Math.abs(_.y-F.y)}},o.findPointOnPath=function(i,o,s,_){for(var F,N,j,Z=(_=_||{}).pathLength||i.getTotalLength(),X=_.tolerance||.001,$=_.iterationLimit||30,ee=i.getPointAtLength(0)[s]>i.getPointAtLength(Z)[s]?-1:1,et=0,er=0,en=Z;et<$&&(F=(er+en)/2,!(Math.abs(j=(N=i.getPointAtLength(F))[s]-o)<X));)ee*j>0?en=F:er=F,et++;return N}},81697:function(i,o,s){"use strict";var _=s(92770),F=s(84267),N=s(25075),j=s(21081),Z=s(22399).defaultLine,X=s(73627).isArrayOrTypedArray,$=N(Z);function validateColor(i){if(_(i))return $;var o=N(i);return o.length?o:$}function validateOpacity(i){return _(i)?i:1}function formatColor(i,o,s){var _,F,Z,ee,et,er,en=i.color,ei=X(en),eo=X(o),es=j.extractOpts(i),el=[];if(F=void 0!==es.colorscale?j.makeColorScaleFuncFromTrace(i):validateColor,Z=ei?function(i,o){return void 0===i[o]?$:N(F(i[o]))}:validateColor,ee=eo?function(i,o){return void 0===i[o]?1:validateOpacity(i[o])}:validateOpacity,ei||eo)for(var ec=0;ec<s;ec++)et=Z(en,ec),er=ee(o,ec),el[ec]=(et[3]*=er,et);else _=N(en),_[3]*=o,el=_;return el}function parseColorScale(i){var o=j.extractOpts(i),s=o.colorscale;return o.reversescale&&(s=j.flipScale(o.colorscale)),s.map(function(i){var o=i[0],s=F(i[1]).toRgb();return{index:o,rgb:[s.r,s.g,s.b,s.a]}})}i.exports={formatColor:formatColor,parseColorScale:parseColorScale}},28984:function(i,o,s){"use strict";var _=s(23389);function wrap(i){return[i]}i.exports={keyFun:function(i){return i.key},repeat:wrap,descend:_,wrap:wrap,unwrap:function(i){return i[0]}}},23389:function(i){"use strict";i.exports=function(i){return i}},39240:function(i){"use strict";i.exports=function(i,o){if(!o)return i;var s=1/Math.abs(o),_=s>1?(s*i+s*o)/s:i+o,F=String(_).length;if(F>16){var N=String(o).length;if(F>=String(i).length+N){var j=parseFloat(_).toPrecision(12);-1===j.indexOf("e+")&&(_=+j)}}return _}},71828:function(i,o,s){"use strict";var _=s(39898),F=s(84096).g0,N=s(60721).WU,j=s(92770),Z=s(50606),X=Z.FP_SAFE,$=-X,ee=Z.BADNUM,et=i.exports={};et.adjustFormat=function(i){return!i||/^\d[.]\df/.test(i)||/[.]\d%/.test(i)?i:"0.f"===i?"~f":/^\d%/.test(i)?"~%":/^\ds/.test(i)?"~s":!/^[~,.0$]/.test(i)&&/[&fps]/.test(i)?"~"+i:i};var er={};et.warnBadFormat=function(i){var o=String(i);er[o]||(er[o]=1,et.warn('encountered bad format: "'+o+'"'))},et.noFormat=function(i){return String(i)},et.numberFormat=function(i){var o;try{o=N(et.adjustFormat(i))}catch(o){return et.warnBadFormat(i),et.noFormat}return o},et.nestedProperty=s(65487),et.keyedContainer=s(66636),et.relativeAttr=s(6962),et.isPlainObject=s(41965),et.toLogRange=s(58163),et.relinkPrivateKeys=s(51332);var en=s(73627);et.isTypedArray=en.isTypedArray,et.isArrayOrTypedArray=en.isArrayOrTypedArray,et.isArray1D=en.isArray1D,et.ensureArray=en.ensureArray,et.concat=en.concat,et.maxRowLength=en.maxRowLength,et.minRowLength=en.minRowLength;var ei=s(64872);et.mod=ei.mod,et.modHalf=ei.modHalf;var eo=s(96554);et.valObjectMeta=eo.valObjectMeta,et.coerce=eo.coerce,et.coerce2=eo.coerce2,et.coerceFont=eo.coerceFont,et.coercePattern=eo.coercePattern,et.coerceHoverinfo=eo.coerceHoverinfo,et.coerceSelectionMarkerOpacity=eo.coerceSelectionMarkerOpacity,et.validate=eo.validate;var es=s(41631);et.dateTime2ms=es.dateTime2ms,et.isDateTime=es.isDateTime,et.ms2DateTime=es.ms2DateTime,et.ms2DateTimeLocal=es.ms2DateTimeLocal,et.cleanDate=es.cleanDate,et.isJSDate=es.isJSDate,et.formatDate=es.formatDate,et.incrementMonth=es.incrementMonth,et.dateTick0=es.dateTick0,et.dfltRange=es.dfltRange,et.findExactDates=es.findExactDates,et.MIN_MS=es.MIN_MS,et.MAX_MS=es.MAX_MS;var el=s(65888);et.findBin=el.findBin,et.sorterAsc=el.sorterAsc,et.sorterDes=el.sorterDes,et.distinctVals=el.distinctVals,et.roundUp=el.roundUp,et.sort=el.sort,et.findIndexOfMin=el.findIndexOfMin,et.sortObjectKeys=s(78607);var ec=s(80038);et.aggNums=ec.aggNums,et.len=ec.len,et.mean=ec.mean,et.median=ec.median,et.midRange=ec.midRange,et.variance=ec.variance,et.stdev=ec.stdev,et.interp=ec.interp;var eu=s(35657);et.init2dArray=eu.init2dArray,et.transposeRagged=eu.transposeRagged,et.dot=eu.dot,et.translationMatrix=eu.translationMatrix,et.rotationMatrix=eu.rotationMatrix,et.rotationXYMatrix=eu.rotationXYMatrix,et.apply3DTransform=eu.apply3DTransform,et.apply2DTransform=eu.apply2DTransform,et.apply2DTransform2=eu.apply2DTransform2,et.convertCssMatrix=eu.convertCssMatrix,et.inverseTransformMatrix=eu.inverseTransformMatrix;var ef=s(26348);et.deg2rad=ef.deg2rad,et.rad2deg=ef.rad2deg,et.angleDelta=ef.angleDelta,et.angleDist=ef.angleDist,et.isFullCircle=ef.isFullCircle,et.isAngleInsideSector=ef.isAngleInsideSector,et.isPtInsideSector=ef.isPtInsideSector,et.pathArc=ef.pathArc,et.pathSector=ef.pathSector,et.pathAnnulus=ef.pathAnnulus;var ed=s(99863);et.isLeftAnchor=ed.isLeftAnchor,et.isCenterAnchor=ed.isCenterAnchor,et.isRightAnchor=ed.isRightAnchor,et.isTopAnchor=ed.isTopAnchor,et.isMiddleAnchor=ed.isMiddleAnchor,et.isBottomAnchor=ed.isBottomAnchor;var eh=s(87642);et.segmentsIntersect=eh.segmentsIntersect,et.segmentDistance=eh.segmentDistance,et.getTextLocation=eh.getTextLocation,et.clearLocationCache=eh.clearLocationCache,et.getVisibleSegment=eh.getVisibleSegment,et.findPointOnPath=eh.findPointOnPath;var ep=s(1426);et.extendFlat=ep.extendFlat,et.extendDeep=ep.extendDeep,et.extendDeepAll=ep.extendDeepAll,et.extendDeepNoArrays=ep.extendDeepNoArrays;var eg=s(47769);et.log=eg.log,et.warn=eg.warn,et.error=eg.error;var em=s(30587);et.counterRegex=em.counter;var ey=s(79990);et.throttle=ey.throttle,et.throttleDone=ey.done,et.clearThrottle=ey.clear;var ev=s(24401);function makePtIndex2PtNumber(i){var o={};for(var s in i)for(var _=i[s],F=0;F<_.length;F++)o[_[F]]=+s;return o}function minExtend(i,o,s){var _,F,N,j={};"object"!=typeof o&&(o={});var Z="pieLike"===s?-1:3,X=Object.keys(i);for(_=0;_<X.length;_++)N=i[F=X[_]],"_"!==F.charAt(0)&&"function"!=typeof N&&("module"===F?j[F]=N:Array.isArray(N)?"colorscale"===F||-1===Z?j[F]=N.slice():j[F]=N.slice(0,Z):et.isTypedArray(N)?-1===Z?j[F]=N.subarray():j[F]=N.subarray(0,Z):N&&"object"==typeof N?j[F]=minExtend(i[F],o[F],s):j[F]=N);for(_=0,X=Object.keys(o);_<X.length;_++)"object"==typeof(N=o[F=X[_]])&&F in j&&"object"==typeof j[F]||(j[F]=N);return j}et.getGraphDiv=ev.getGraphDiv,et.isPlotDiv=ev.isPlotDiv,et.removeElement=ev.removeElement,et.addStyleRule=ev.addStyleRule,et.addRelatedStyleRule=ev.addRelatedStyleRule,et.deleteRelatedStyleRule=ev.deleteRelatedStyleRule,et.getFullTransformMatrix=ev.getFullTransformMatrix,et.getElementTransformMatrix=ev.getElementTransformMatrix,et.getElementAndAncestors=ev.getElementAndAncestors,et.equalDomRects=ev.equalDomRects,et.clearResponsive=s(86367),et.preserveDrawingBuffer=s(45142),et.makeTraceGroups=s(77310),et._=s(15867),et.notifier=s(75046),et.filterUnique=s(75744),et.filterVisible=s(76756),et.pushUnique=s(75138),et.increment=s(39240),et.cleanNumber=s(95218),et.ensureNumber=function(i){return j(i)?(i=Number(i))>X||i<$?ee:i:ee},et.isIndex=function(i,o){return(void 0===o||!(i>=o))&&j(i)&&i>=0&&i%1==0},et.noop=s(64213),et.identity=s(23389),et.repeat=function(i,o){for(var s=Array(o),_=0;_<o;_++)s[_]=i;return s},et.swapAttrs=function(i,o,s,_){s||(s="x"),_||(_="y");for(var F=0;F<o.length;F++){var N=o[F],j=et.nestedProperty(i,N.replace("?",s)),Z=et.nestedProperty(i,N.replace("?",_)),X=j.get();j.set(Z.get()),Z.set(X)}},et.raiseToTop=function(i){i.parentNode.appendChild(i)},et.cancelTransition=function(i){return i.transition().duration(0)},et.constrain=function(i,o,s){return o>s?Math.max(s,Math.min(o,i)):Math.max(o,Math.min(s,i))},et.bBoxIntersect=function(i,o,s){return s=s||0,i.left<=o.right+s&&o.left<=i.right+s&&i.top<=o.bottom+s&&o.top<=i.bottom+s},et.simpleMap=function(i,o,s,_,F){for(var N=i.length,j=Array(N),Z=0;Z<N;Z++)j[Z]=o(i[Z],s,_,F);return j},et.randstr=function randstr(i,o,s,_){if(s||(s=16),void 0===o&&(o=24),o<=0)return"0";var F,N=Math.log(Math.pow(2,o))/Math.log(s),j="";for(F=2;N===1/0;F*=2)N=Math.log(Math.pow(2,o/F))/Math.log(s)*F;var Z=N-Math.floor(N);for(F=0;F<Math.floor(N);F++)j=Math.floor(Math.random()*s).toString(s)+j;Z&&(j=Math.floor(Math.random()*Math.pow(s,Z)).toString(s)+j);var X=parseInt(j,s);return i&&i[j]||X!==1/0&&X>=Math.pow(2,o)?_>10?(et.warn("randstr failed uniqueness"),j):randstr(i,o,s,(_||0)+1):j},et.OptionControl=function(i,o){i||(i={}),o||(o="opt");var s={};return s.optionList=[],s._newoption=function(_){_[o]=i,s[_.name]=_,s.optionList.push(_)},s["_"+o]=i,s},et.smooth=function(i,o){if((o=Math.round(o)||0)<2)return i;var s,_,F,N,j=i.length,Z=2*j,X=2*o-1,$=Array(X),ee=Array(j);for(s=0;s<X;s++)$[s]=(1-Math.cos(Math.PI*(s+1)/o))/(2*o);for(s=0;s<j;s++){for(_=0,N=0;_<X;_++)(F=s+_+1-o)<-j?F-=Z*Math.round(F/Z):F>=Z&&(F-=Z*Math.floor(F/Z)),F<0?F=-1-F:F>=j&&(F=Z-1-F),N+=i[F]*$[_];ee[s]=N}return ee},et.syncOrAsync=function(i,o,s){var _;function continueAsync(){return et.syncOrAsync(i,o,s)}for(;i.length;)if((_=(0,i.splice(0,1)[0])(o))&&_.then)return _.then(continueAsync);return s&&s(o)},et.stripTrailingSlash=function(i){return"/"===i.substr(-1)?i.substr(0,i.length-1):i},et.noneOrAll=function(i,o,s){if(i){var _,F=!1,N=!0;for(_=0;_<s.length;_++)null!=i[s[_]]?F=!0:N=!1;if(F&&!N)for(_=0;_<s.length;_++)i[s[_]]=o[s[_]]}},et.mergeArray=function(i,o,s,_){var F="function"==typeof _;if(et.isArrayOrTypedArray(i))for(var N=Math.min(i.length,o.length),j=0;j<N;j++){var Z=i[j];o[j][s]=F?_(Z):Z}},et.mergeArrayCastPositive=function(i,o,s){return et.mergeArray(i,o,s,function(i){var o=+i;return isFinite(o)&&o>0?o:0})},et.fillArray=function(i,o,s,_){if(_=_||et.identity,et.isArrayOrTypedArray(i))for(var F=0;F<o.length;F++)o[F][s]=_(i[F])},et.castOption=function(i,o,s,_){_=_||et.identity;var F=et.nestedProperty(i,s).get();return et.isArrayOrTypedArray(F)?_(Array.isArray(o)&&et.isArrayOrTypedArray(F[o[0]])?F[o[0]][o[1]]:F[o]):F},et.extractOption=function(i,o,s,_){if(s in i)return i[s];var F=et.nestedProperty(o,_).get();if(!Array.isArray(F))return F},et.tagSelected=function(i,o,s){var _,F=o.selectedpoints,N=o._indexToPoints;function isCdIndexValid(o){return void 0!==o&&o<i.length}N&&(_=makePtIndex2PtNumber(N));for(var j=0;j<F.length;j++){var Z=F[j];if(et.isIndex(Z)||et.isArrayOrTypedArray(Z)&&et.isIndex(Z[0])&&et.isIndex(Z[1])){var X=_?_[Z]:Z,$=s?s[X]:X;isCdIndexValid($)&&(i[$].selected=1)}}},et.selIndices2selPoints=function(i){var o=i.selectedpoints,s=i._indexToPoints;if(!s)return o;for(var _=makePtIndex2PtNumber(s),F=[],N=0;N<o.length;N++){var j=o[N];if(et.isIndex(j)){var Z=_[j];et.isIndex(Z)&&F.push(Z)}}return F},et.getTargetArray=function(i,o){var s=o.target;if("string"==typeof s&&s){var _=et.nestedProperty(i,s).get();return!!Array.isArray(_)&&_}return!!Array.isArray(s)&&s},et.minExtend=minExtend,et.titleCase=function(i){return i.charAt(0).toUpperCase()+i.substr(1)},et.containsAny=function(i,o){for(var s=0;s<o.length;s++)if(-1!==i.indexOf(o[s]))return!0;return!1},et.isIE=function(){return void 0!==window.navigator.msSaveBlob};var ex=/Version\/[\d\.]+.*Safari/;et.isSafari=function(){return ex.test(window.navigator.userAgent)};var e_=/iPad|iPhone|iPod/;et.isIOS=function(){return e_.test(window.navigator.userAgent)};var ew=/Firefox\/(\d+)\.\d+/;et.getFirefoxVersion=function(){var i=ew.exec(window.navigator.userAgent);if(i&&2===i.length){var o=parseInt(i[1]);if(!isNaN(o))return o}return null},et.isD3Selection=function(i){return i instanceof _.selection},et.ensureSingle=function(i,o,s,_){var F=i.select(o+(s?"."+s:""));if(F.size())return F;var N=i.append(o);return s&&N.classed(s,!0),_&&N.call(_),N},et.ensureSingleById=function(i,o,s,_){var F=i.select(o+"#"+s);if(F.size())return F;var N=i.append(o).attr("id",s);return _&&N.call(_),N},et.objectFromPath=function(i,o){for(var s,_=i.split("."),F=s={},N=0;N<_.length;N++){var j=_[N],Z=null,X=_[N].match(/(.*)\[([0-9]+)\]/);X?(j=X[1],Z=X[2],s=s[j]=[],N===_.length-1?s[Z]=o:s[Z]={},s=s[Z]):(N===_.length-1?s[j]=o:s[j]={},s=s[j])}return F};var eT=/^([^\[\.]+)\.(.+)?/,ek=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function notValid(i){return"__"===i.slice(0,2)}et.expandObjectPaths=function(i){var o,s,_,F,N,j,Z;if("object"==typeof i&&!Array.isArray(i)){for(s in i)if(i.hasOwnProperty(s)){if(o=s.match(eT)){if(F=i[s],notValid(_=o[1]))continue;delete i[s],i[_]=et.extendDeepNoArrays(i[_]||{},et.objectFromPath(s,et.expandObjectPaths(F))[_])}else if(o=s.match(ek)){if(F=i[s],notValid(_=o[1]))continue;if(N=parseInt(o[2]),delete i[s],i[_]=i[_]||[],"."===o[3])Z=o[4],j=i[_][N]=i[_][N]||{},et.extendDeepNoArrays(j,et.objectFromPath(Z,et.expandObjectPaths(F)));else{if(notValid(_))continue;i[_][N]=et.expandObjectPaths(F)}}else{if(notValid(s))continue;i[s]=et.expandObjectPaths(i[s])}}}return i},et.numSeparate=function(i,o,s){if(s||(s=!1),"string"!=typeof o||0===o.length)throw Error("Separator string required for formatting!");"number"==typeof i&&(i=String(i));var _=/(\d+)(\d{3})/,F=o.charAt(0),N=o.charAt(1),j=i.split("."),Z=j[0],X=j.length>1?F+j[1]:"";if(N&&(j.length>1||Z.length>4||s))for(;_.test(Z);)Z=Z.replace(_,"$1"+N+"$2");return Z+X},et.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var eA=/^\w*$/;et.templateString=function(i,o){var s={};return i.replace(et.TEMPLATE_STRING_REGEX,function(i,_){var F;return eA.test(_)?F=o[_]:(s[_]=s[_]||et.nestedProperty(o,_).get,F=s[_]()),et.isValidTextValue(F)?F:""})};var eS={max:10,count:0,name:"hovertemplate"};et.hovertemplateString=function(){return templateFormatString.apply(eS,arguments)};var eM={max:10,count:0,name:"texttemplate"};et.texttemplateString=function(){return templateFormatString.apply(eM,arguments)};var eC=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function multDivParser(i){var o=i.match(eC);return o?{key:o[1],op:o[2],number:Number(o[3])}:{key:i,op:null,number:null}}var eE={max:10,count:0,name:"texttemplate",parseMultDiv:!0};et.texttemplateStringForShapes=function(){return templateFormatString.apply(eE,arguments)};var eL=/^[:|\|]/;function templateFormatString(i,o,s){var _=this,N=arguments;o||(o={});var j={};return i.replace(et.TEMPLATE_STRING_REGEX,function(i,Z,X){var $,ee,er,en,ei="_xother"===Z||"_yother"===Z,eo="_xother_"===Z||"_yother_"===Z,es="xother_"===Z||"yother_"===Z,el="xother"===Z||"yother"===Z||ei||es||eo,ec=Z;(ei||eo)&&(ec=ec.substring(1)),(es||eo)&&(ec=ec.substring(0,ec.length-1));var eu=null,ef=null;if(_.parseMultDiv){var ed=multDivParser(ec);ec=ed.key,eu=ed.op,ef=ed.number}if(el){if(void 0===($=o[ec]))return""}else for(er=3;er<N.length;er++)if(ee=N[er]){if(ee.hasOwnProperty(ec)){$=ee[ec];break}if(!eA.test(ec)&&($=et.nestedProperty(ee,ec).get(),($=j[ec]||et.nestedProperty(ee,ec).get())&&(j[ec]=$)),void 0!==$)break}if(void 0!==$&&("*"===eu&&($*=ef),"/"===eu&&($/=ef)),void 0===$&&_)return _.count<_.max&&(et.warn("Variable '"+ec+"' in "+_.name+" could not be found!"),$=i),_.count===_.max&&et.warn("Too many "+_.name+" warnings - additional warnings will be suppressed"),_.count++,i;if(X){if(":"===X[0]&&($=(en=s?s.numberFormat:et.numberFormat)(X.replace(eL,""))($)),"|"===X[0]){en=s?s.timeFormat:F;var eh=et.dateTime2ms($);$=et.formatDate(eh,X.replace(eL,""),!1,en)}}else{var ep=ec+"Label";o.hasOwnProperty(ep)&&($=o[ep])}return el&&($="("+$+")",(ei||eo)&&($=" "+$),(es||eo)&&($+=" ")),$})}et.subplotSort=function(i,o){for(var s=Math.min(i.length,o.length)+1,_=0,F=0,N=0;N<s;N++){var j=i.charCodeAt(N)||0,Z=o.charCodeAt(N)||0,X=j>=48&&j<=57,$=Z>=48&&Z<=57;if(X&&(_=10*_+j-48),$&&(F=10*F+Z-48),!X||!$){if(_!==F)return _-F;if(j!==Z)return j-Z}}return F-_};var eP=2e9;et.seedPseudoRandom=function(){eP=2e9},et.pseudoRandom=function(){var i=eP;return 429496729>Math.abs((eP=(69069*eP+1)%4294967296)-i)?et.pseudoRandom():eP/4294967296},et.fillText=function(i,o,s){var _=Array.isArray(s)?function(i){s.push(i)}:function(i){s.text=i},F=et.extractOption(i,o,"htx","hovertext");if(et.isValidTextValue(F))return _(F);var N=et.extractOption(i,o,"tx","text");if(et.isValidTextValue(N))return _(N)},et.isValidTextValue=function(i){return i||0===i},et.formatPercent=function(i,o){for(var s=(Math.round(100*i*Math.pow(10,o=o||0))*Math.pow(.1,o)).toFixed(o)+"%",_=0;_<o;_++)-1!==s.indexOf(".")&&(s=(s=s.replace("0%","%")).replace(".%","%"));return s},et.isHidden=function(i){var o=window.getComputedStyle(i).display;return!o||"none"===o},et.strTranslate=function(i,o){return i||o?"translate("+i+","+o+")":""},et.strRotate=function(i){return i?"rotate("+i+")":""},et.strScale=function(i){return 1!==i?"scale("+i+")":""},et.getTextTransform=function(i){var o=i.noCenter,s=i.textX,_=i.textY,F=i.targetX,N=i.targetY,j=i.anchorX||0,Z=i.anchorY||0,X=i.rotate,$=i.scale;return $?$>1&&($=1):$=0,et.strTranslate(F-$*(s+j),N-$*(_+Z))+et.strScale($)+(X?"rotate("+X+(o?"":" "+s+" "+_)+")":"")},et.setTransormAndDisplay=function(i,o){i.attr("transform",et.getTextTransform(o)),i.style("display",o.scale?null:"none")},et.ensureUniformFontSize=function(i,o){var s=et.extendFlat({},o);return s.size=Math.max(o.size,i._fullLayout.uniformtext.minsize||0),s},et.join2=function(i,o,s){var _=i.length;return _>1?i.slice(0,-1).join(o)+s+i[_-1]:i.join(o)},et.bigFont=function(i){return Math.round(1.2*i)};var eI=et.getFirefoxVersion(),eO=null!==eI&&eI<86;et.getPositionFromD3Event=function(){return eO?[_.event.layerX,_.event.layerY]:[_.event.offsetX,_.event.offsetY]}},41965:function(i){"use strict";i.exports=function(i){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(i):"[object Object]"===Object.prototype.toString.call(i)&&Object.getPrototypeOf(i).hasOwnProperty("hasOwnProperty")}},66636:function(i,o,s){"use strict";var _=s(65487),F=/^\w*$/;i.exports=function(i,o,s,N){s=s||"name",N=N||"value";var j,Z,X,$={};Z=o&&o.length?(X=_(i,o)).get():i,o=o||"";var ee={};if(Z)for(j=0;j<Z.length;j++)ee[Z[j][s]]=j;var et=F.test(N),er={set:function(i,o){var F=null===o?4:0;if(!Z){if(!X||4===F)return;Z=[],X.set(Z)}var j=ee[i];if(void 0===j){if(4===F)return;F|=3,j=Z.length,ee[i]=j}else o!==(et?Z[j][N]:_(Z[j],N).get())&&(F|=2);var en=Z[j]=Z[j]||{};return en[s]=i,et?en[N]=o:_(en,N).set(o),null!==o&&(F&=-5),$[j]=$[j]|F,er},get:function(i){if(Z){var o=ee[i];return void 0===o?void 0:et?Z[o][N]:_(Z[o],N).get()}},rename:function(i,o){var _=ee[i];return void 0===_||($[_]=1|$[_],ee[o]=_,delete ee[i],Z[_][s]=o),er},remove:function(i){var o=ee[i];if(void 0===o)return er;var F=Z[o];if(Object.keys(F).length>2)return $[o]=2|$[o],er.set(i,null);if(et){for(j=o;j<Z.length;j++)$[j]=3|$[j];for(j=o;j<Z.length;j++)ee[Z[j][s]]--;Z.splice(o,1),delete ee[i]}else _(F,N).set(null),$[o]=6|$[o];return er},constructUpdate:function(){for(var i,F,j={},X=Object.keys($),ee=0;ee<X.length;ee++)F=X[ee],i=o+"["+F+"]",Z[F]?(1&$[F]&&(j[i+"."+s]=Z[F][s]),2&$[F]&&(et?j[i+"."+N]=4&$[F]?null:Z[F][N]:j[i+"."+N]=4&$[F]?null:_(Z[F],N).get())):j[i]=null;return j}};return er}},15867:function(i,o,s){"use strict";var _=s(73972);i.exports=function(i,o){for(var s=i._context.locale,F=0;F<2;F++){for(var N=i._context.locales,j=0;j<2;j++){var Z=(N[s]||{}).dictionary;if(Z){var X=Z[o];if(X)return X}N=_.localeRegistry}var $=s.split("-")[0];if($===s)break;s=$}return o}},47769:function(i,o,s){"use strict";var _=s(72075).dfltConfig,F=s(75046),N=i.exports={};N.log=function(){var i;if(_.logging>1){var o=["LOG:"];for(i=0;i<arguments.length;i++)o.push(arguments[i]);console.trace.apply(console,o)}if(_.notifyOnLogging>1){var s=[];for(i=0;i<arguments.length;i++)s.push(arguments[i]);F(s.join("<br>"),"long")}},N.warn=function(){var i;if(_.logging>0){var o=["WARN:"];for(i=0;i<arguments.length;i++)o.push(arguments[i]);console.trace.apply(console,o)}if(_.notifyOnLogging>0){var s=[];for(i=0;i<arguments.length;i++)s.push(arguments[i]);F(s.join("<br>"),"stick")}},N.error=function(){var i;if(_.logging>0){var o=["ERROR:"];for(i=0;i<arguments.length;i++)o.push(arguments[i]);console.error.apply(console,o)}if(_.notifyOnLogging>0){var s=[];for(i=0;i<arguments.length;i++)s.push(arguments[i]);F(s.join("<br>"),"stick")}}},77310:function(i,o,s){"use strict";var _=s(39898);i.exports=function(i,o,s){var F=i.selectAll("g."+s.replace(/\s/g,".")).data(o,function(i){return i[0].trace.uid});F.exit().remove(),F.enter().append("g").attr("class",s),F.order();var N=i.classed("rangeplot")?"nodeRangePlot3":"node3";return F.each(function(i){i[0][N]=_.select(this)}),F}},35657:function(i,o,s){"use strict";var _=s(79576);o.init2dArray=function(i,o){for(var s=Array(i),_=0;_<i;_++)s[_]=Array(o);return s},o.transposeRagged=function(i){var o,s,_=0,F=i.length;for(o=0;o<F;o++)_=Math.max(_,i[o].length);var N=Array(_);for(o=0;o<_;o++)for(s=0,N[o]=Array(F);s<F;s++)N[o][s]=i[s][o];return N},o.dot=function(i,s){if(!(i.length&&s.length)||i.length!==s.length)return null;var _,F,N=i.length;if(i[0].length)for(F=0,_=Array(N);F<N;F++)_[F]=o.dot(i[F],s);else if(s[0].length){var j=o.transposeRagged(s);for(F=0,_=Array(j.length);F<j.length;F++)_[F]=o.dot(i,j[F])}else for(F=0,_=0;F<N;F++)_+=i[F]*s[F];return _},o.translationMatrix=function(i,o){return[[1,0,i],[0,1,o],[0,0,1]]},o.rotationMatrix=function(i){var o=i*Math.PI/180;return[[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]},o.rotationXYMatrix=function(i,s,_){return o.dot(o.dot(o.translationMatrix(s,_),o.rotationMatrix(i)),o.translationMatrix(-s,-_))},o.apply3DTransform=function(i){return function(){var s=arguments,_=1==arguments.length?s[0]:[s[0],s[1],s[2]||0];return o.dot(i,[_[0],_[1],_[2],1]).slice(0,3)}},o.apply2DTransform=function(i){return function(){var s=arguments;3===s.length&&(s=s[0]);var _=1==arguments.length?s[0]:[s[0],s[1]];return o.dot(i,[_[0],_[1],1]).slice(0,2)}},o.apply2DTransform2=function(i){var s=o.apply2DTransform(i);return function(i){return s(i.slice(0,2)).concat(s(i.slice(2,4)))}},o.convertCssMatrix=function(i){if(i){var o=i.length;if(16===o)return i;if(6===o)return[i[0],i[1],0,0,i[2],i[3],0,0,0,0,1,0,i[4],i[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},o.inverseTransformMatrix=function(i){var o=[];return _.invert(o,i),[[o[0],o[1],o[2],o[3]],[o[4],o[5],o[6],o[7]],[o[8],o[9],o[10],o[11]],[o[12],o[13],o[14],o[15]]]}},64872:function(i){"use strict";function mod(i,o){var s=i%o;return s<0?s+o:s}function modHalf(i,o){return Math.abs(i)>o/2?i-Math.round(i/o)*o:i}i.exports={mod:mod,modHalf:modHalf}},65487:function(i,o,s){"use strict";var _=s(92770),F=s(73627).isArrayOrTypedArray;function npGet(i,o){return function(){var s,_,N,j,Z,X=i;for(j=0;j<o.length-1;j++){if(-1===(s=o[j])){for(Z=0,_=!0,N=[];Z<X.length;Z++)N[Z]=npGet(X[Z],o.slice(j+1))(),N[Z]!==N[0]&&(_=!1);return _?N[0]:N}if("number"==typeof s&&!F(X)||"object"!=typeof(X=X[s])||null===X)return}if("object"==typeof X&&null!==X&&null!==(N=X[o[j]]))return N}}i.exports=function(i,o){if(_(o))o=String(o);else if("string"!=typeof o||"[-1]"===o.substr(o.length-4))throw"bad property string";var s,F,N,j,Z=o.split(".");for(j=0;j<Z.length;j++)if("__"===String(Z[j]).slice(0,2))throw"bad property string";for(j=0;j<Z.length;){if(s=String(Z[j]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(s[1])Z[j]=s[1];else if(0===j)Z.splice(0,1);else throw"bad property string";for(N=0,F=s[2].substr(1,s[2].length-2).split("][");N<F.length;N++)j++,Z.splice(j,0,Number(F[N]))}j++}return"object"!=typeof i?badContainer(i,o,Z):{set:npSet(i,Z,o),get:npGet(i,Z),astr:o,parts:Z,obj:i}};var N=/(^|\.)args\[/;function isDeletable(i,o){return void 0===i||null===i&&!o.match(N)}function npSet(i,o,s){return function(_){var N,j,Z=i,X="",$=[[i,X]],ee=isDeletable(_,s);for(j=0;j<o.length-1;j++){if("number"==typeof(N=o[j])&&!F(Z))throw"array index but container is not an array";if(-1===N){if(!(ee=!setArrayAll(Z,o.slice(j+1),_,s)))return;break}if(!checkNewContainer(Z,N,o[j+1],ee))break;if("object"!=typeof(Z=Z[N])||null===Z)throw"container is not an object";X=joinPropStr(X,N),$.push([Z,X])}if(ee){if(j===o.length-1&&(delete Z[o[j]],Array.isArray(Z)&&+o[j]==Z.length-1))for(;Z.length&&void 0===Z[Z.length-1];)Z.pop()}else Z[o[j]]=_}}function joinPropStr(i,o){var s=o;return _(o)?s="["+o+"]":i&&(s="."+o),i+s}function setArrayAll(i,o,s,_){var N,j=F(s),Z=!0,X=s,$=_.replace("-1",0),ee=!j&&isDeletable(s,$),et=o[0];for(N=0;N<i.length;N++)$=_.replace("-1",N),j&&(ee=isDeletable(X=s[N%s.length],$)),ee&&(Z=!1),checkNewContainer(i,N,et,ee)&&npSet(i[N],o,_.replace("-1",N))(X);return Z}function checkNewContainer(i,o,s,_){if(void 0===i[o]){if(_)return!1;"number"==typeof s?i[o]=[]:i[o]={}}return!0}function badContainer(i,o,s){return{set:function(){throw"bad container"},get:function(){},astr:o,parts:s,obj:i}}},64213:function(i){"use strict";i.exports=function(){}},75046:function(i,o,s){"use strict";var _=s(39898),F=s(92770),N=[];i.exports=function(i,o){if(-1===N.indexOf(i)){N.push(i);var s=1e3;F(o)?s=o:"long"===o&&(s=3e3);var j=_.select("body").selectAll(".plotly-notifier").data([0]);j.enter().append("div").classed("plotly-notifier",!0),j.selectAll(".notifier-note").data(N).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var F=_.select(this);F.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){F.transition().call(killNote)});for(var N=F.append("p"),j=i.split(/<br\s*\/?>/g),Z=0;Z<j.length;Z++)Z&&N.append("br"),N.append("span").text(j[Z]);"stick"===o?F.transition().duration(350).style("opacity",1):F.transition().duration(700).style("opacity",1).transition().delay(s).call(killNote)})}function killNote(i){i.duration(700).style("opacity",0).each("end",function(i){var o=N.indexOf(i);-1!==o&&N.splice(o,1),_.select(this).remove()})}}},39918:function(i,o,s){"use strict";var _=s(6964),F="data-savedcursor";i.exports=function(i,o){var s=i.attr(F);if(o){if(!s){for(var N=(i.attr("class")||"").split(" "),j=0;j<N.length;j++){var Z=N[j];0===Z.indexOf("cursor-")&&i.attr(F,Z.substr(7)).classed(Z,!1)}i.attr(F)||i.attr(F,"!!")}_(i,o)}else s&&(i.attr(F,null),"!!"===s?_(i):_(i,s))}},61082:function(i,o,s){"use strict";var _=s(35657).dot,F=s(50606).BADNUM,N=i.exports={};N.tester=function(i){var o,s,_=i.slice(),N=_[0][0],j=N,Z=_[0][1],X=Z;for((_[_.length-1][0]!==_[0][0]||_[_.length-1][1]!==_[0][1])&&_.push(_[0]),o=1;o<_.length;o++)N=Math.min(N,_[o][0]),j=Math.max(j,_[o][0]),Z=Math.min(Z,_[o][1]),X=Math.max(X,_[o][1]);var $=!1;function rectContains(i,o){var _=i[0],$=i[1];return!(_===F||_<N||_>j||$===F||$<Z||$>X||o&&s(i))}function contains(i,o){var s,$,ee,et,er,en=i[0],ei=i[1];if(en===F||en<N||en>j||ei===F||ei<Z||ei>X)return!1;var eo=_.length,es=_[0][0],el=_[0][1],ec=0;for(s=1;s<eo;s++)if($=es,ee=el,es=_[s][0],el=_[s][1],!(en<(et=Math.min($,es))||en>Math.max($,es)||ei>Math.max(ee,el))){if(ei<Math.min(ee,el))en!==et&&ec++;else{if(er=es===$?ei:ee+(en-$)*(el-ee)/(es-$),ei===er){if(1===s&&o)return!1;return!0}ei<=er&&en!==et&&ec++}}return ec%2==1}5===_.length&&(_[0][0]===_[1][0]?_[2][0]===_[3][0]&&_[0][1]===_[3][1]&&_[1][1]===_[2][1]&&($=!0,s=function(i){return i[0]===_[0][0]}):_[0][1]===_[1][1]&&_[2][1]===_[3][1]&&_[0][0]===_[3][0]&&_[1][0]===_[2][0]&&($=!0,s=function(i){return i[1]===_[0][1]}));var ee=!0,et=_[0];for(o=1;o<_.length;o++)if(et[0]!==_[o][0]||et[1]!==_[o][1]){ee=!1;break}return{xmin:N,xmax:j,ymin:Z,ymax:X,pts:_,contains:$?rectContains:contains,isRect:$,degenerate:ee}},N.isSegmentBent=function(i,o,s,F){var N,j,Z,X=i[o],$=[i[s][0]-X[0],i[s][1]-X[1]],ee=_($,$),et=Math.sqrt(ee),er=[-$[1]/et,$[0]/et];for(N=o+1;N<s;N++)if((Z=_(j=[i[N][0]-X[0],i[N][1]-X[1]],$))<0||Z>ee||Math.abs(_(j,er))>F)return!0;return!1},N.filter=function(i,o){var s=[i[0]],_=0,F=0;function addPt(j){i.push(j);var Z=s.length,X=_;s.splice(F+1);for(var $=X+1;$<i.length;$++)($===i.length-1||N.isSegmentBent(i,X,$+1,o))&&(s.push(i[$]),s.length<Z-2&&(_=$,F=s.length-1),X=$)}return i.length>1&&addPt(i.pop()),{addPt:addPt,raw:i,filtered:s}}},79749:function(i,o,s){"use strict";var _=s(58617),F=s(98580);i.exports=function(i,o,N){var j=i._fullLayout,Z=!0;return j._glcanvas.each(function(_){if(_.regl){_.regl.preloadCachedCode(N);return}if(!_.pick||j._has("parcoords")){try{_.regl=F({canvas:this,attributes:{antialias:!_.pick,preserveDrawingBuffer:!0},pixelRatio:i._context.plotGlPixelRatio||s.g.devicePixelRatio,extensions:o||[],cachedCode:N||{}})}catch(i){Z=!1}_.regl||(Z=!1),Z&&this.addEventListener("webglcontextlost",function(o){i&&i.emit&&i.emit("plotly_webglcontextlost",{event:o,layer:_.key})},!1)}}),Z||_({container:j._glcontainer.node()}),Z}},45142:function(i,o,s){"use strict";var _=s(92770),F=s(35791);function getUserAgent(){var i;return"undefined"!=typeof navigator&&(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),i}i.exports=function(i){if("string"!=typeof(o=i&&i.hasOwnProperty("userAgent")?i.userAgent:getUserAgent()))return!0;var o,s=F({ua:{headers:{"user-agent":o}},tablet:!0,featureDetect:!1});if(!s){for(var N=o.split(" "),j=1;j<N.length;j++)if(-1!==N[j].indexOf("Safari"))for(var Z=j-1;Z>-1;Z--){var X=N[Z];if("Version/"===X.substr(0,8)){var $=X.substr(8).split(".")[0];if(_($)&&($=+$),$>=13)return!0}}}return s}},75138:function(i){"use strict";i.exports=function(i,o){if(o instanceof RegExp){for(var s=o.toString(),_=0;_<i.length;_++)if(i[_]instanceof RegExp&&i[_].toString()===s)return i;i.push(o)}else(o||0===o)&&-1===i.indexOf(o)&&i.push(o);return i}},10847:function(i,o,s){"use strict";var _=s(71828),F=s(72075).dfltConfig;function copyArgArray(i,o){for(var s,F=[],N=0;N<o.length;N++)(s=o[N])===i?F[N]=s:"object"==typeof s?F[N]=Array.isArray(s)?_.extendDeep([],s):_.extendDeepAll({},s):F[N]=s;return F}var N={};N.add=function(i,o,s,_,N){var j,Z;if(i.undoQueue=i.undoQueue||{index:0,queue:[],sequence:!1},Z=i.undoQueue.index,i.autoplay){i.undoQueue.inSequence||(i.autoplay=!1);return}!i.undoQueue.sequence||i.undoQueue.beginSequence?(j={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},i.undoQueue.queue.splice(Z,i.undoQueue.queue.length-Z,j),i.undoQueue.index+=1):j=i.undoQueue.queue[Z-1],i.undoQueue.beginSequence=!1,j&&(j.undo.calls.unshift(o),j.undo.args.unshift(s),j.redo.calls.push(_),j.redo.args.push(N)),i.undoQueue.queue.length>F.queueLength&&(i.undoQueue.queue.shift(),i.undoQueue.index--)},N.startSequence=function(i){i.undoQueue=i.undoQueue||{index:0,queue:[],sequence:!1},i.undoQueue.sequence=!0,i.undoQueue.beginSequence=!0},N.stopSequence=function(i){i.undoQueue=i.undoQueue||{index:0,queue:[],sequence:!1},i.undoQueue.sequence=!1,i.undoQueue.beginSequence=!1},N.undo=function(i){var o,s;if(!(void 0===i.undoQueue||isNaN(i.undoQueue.index))&&!(i.undoQueue.index<=0)){for(i.undoQueue.index--,o=i.undoQueue.queue[i.undoQueue.index],i.undoQueue.inSequence=!0,s=0;s<o.undo.calls.length;s++)N.plotDo(i,o.undo.calls[s],o.undo.args[s]);i.undoQueue.inSequence=!1,i.autoplay=!1}},N.redo=function(i){var o,s;if(!(void 0===i.undoQueue||isNaN(i.undoQueue.index))&&!(i.undoQueue.index>=i.undoQueue.queue.length)){for(s=0,o=i.undoQueue.queue[i.undoQueue.index],i.undoQueue.inSequence=!0;s<o.redo.calls.length;s++)N.plotDo(i,o.redo.calls[s],o.redo.args[s]);i.undoQueue.inSequence=!1,i.autoplay=!1,i.undoQueue.index++}},N.plotDo=function(i,o,s){i.autoplay=!0,s=copyArgArray(i,s),o.apply(null,s)},i.exports=N},30587:function(i,o){"use strict";o.counter=function(i,o,s,_){var F=(o||"")+(s?"":"$"),N=!1===_?"":"^";return"xy"===i?RegExp(N+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+F):RegExp(N+i+"([2-9]|[1-9][0-9]+)?"+F)}},6962:function(i){"use strict";var o=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,s=/^[^\.\[\]]+$/;i.exports=function(i,_){for(;_;){var F=i.match(o);if(F)i=F[1];else if(i.match(s))i="";else throw Error("bad relativeAttr call:"+[i,_]);if("^"===_.charAt(0))_=_.slice(1);else break}return i&&"["!==_.charAt(0)?i+"."+_:i+_}},51332:function(i,o,s){"use strict";var _=s(73627).isArrayOrTypedArray,F=s(41965);i.exports=function relinkPrivateKeys(i,o){for(var s in o){var N=o[s],j=i[s];if(j!==N){if("_"===s.charAt(0)||"function"==typeof N){if(s in i)continue;i[s]=N}else if(_(N)&&_(j)&&F(N[0])){if("customdata"===s||"ids"===s)continue;for(var Z=Math.min(N.length,j.length),X=0;X<Z;X++)j[X]!==N[X]&&F(N[X])&&F(j[X])&&relinkPrivateKeys(j[X],N[X])}else F(N)&&F(j)&&(relinkPrivateKeys(j,N),Object.keys(j).length||delete i[s])}}}},65888:function(i,o,s){"use strict";var _=s(92770),F=s(47769),N=s(23389),j=s(50606).BADNUM;function lessThan(i,o){return i<o}function lessOrEqual(i,o){return i<=o}function greaterThan(i,o){return i>o}function greaterOrEqual(i,o){return i>=o}o.findBin=function(i,o,s){if(_(o.start))return s?Math.ceil((i-o.start)/o.size-1e-9)-1:Math.floor((i-o.start)/o.size+1e-9);var N,j,Z=0,X=o.length,$=0,ee=X>1?(o[X-1]-o[0])/(X-1):1;for(j=ee>=0?s?lessThan:lessOrEqual:s?greaterOrEqual:greaterThan,i+=1e-9*ee*(s?-1:1)*(ee>=0?1:-1);Z<X&&$++<100;)j(o[N=Math.floor((Z+X)/2)],i)?Z=N+1:X=N;return $>90&&F.log("Long binary search..."),Z-1},o.sorterAsc=function(i,o){return i-o},o.sorterDes=function(i,o){return o-i},o.distinctVals=function(i){var s,_,F=i.slice();for(F.sort(o.sorterAsc),s=F.length-1;s>-1&&F[s]===j;s--);for(var N=F[s]-F[0]||1,Z=N/(s||1)/1e4,X=[],$=0;$<=s;$++){var ee=F[$],et=ee-_;void 0===_?(X.push(ee),_=ee):et>Z&&(N=Math.min(N,et),X.push(ee),_=ee)}return{vals:X,minDiff:N}},o.roundUp=function(i,o,s){for(var _,F=0,N=o.length-1,j=0,Z=s?0:1,X=s?1:0,$=s?Math.ceil:Math.floor;F<N&&j++<100;)o[_=$((F+N)/2)]<=i?F=_+Z:N=_-X;return o[F]},o.sort=function(i,o){for(var s=0,_=0,F=1;F<i.length;F++){var N=o(i[F],i[F-1]);if(N<0?s=1:N>0&&(_=1),s&&_)return i.sort(o)}return _?i:i.reverse()},o.findIndexOfMin=function(i,o){o=o||N;for(var s,_=1/0,F=0;F<i.length;F++){var j=o(i[F]);j<_&&(_=j,s=F)}return s}},6964:function(i){"use strict";i.exports=function(i,o){(i.attr("class")||"").split(" ").forEach(function(o){0===o.indexOf("cursor-")&&i.classed(o,!1)}),o&&i.classed("cursor-"+o,!0)}},58617:function(i,o,s){"use strict";var _=s(7901),noop=function(){};i.exports=function(i){for(var o in i)"function"==typeof i[o]&&(i[o]=noop);i.destroy=function(){i.container.parentNode.removeChild(i.container)};var s=document.createElement("div");s.className="no-webgl",s.style.cursor="pointer",s.style.fontSize="24px",s.style.color=_.defaults[0],s.style.position="absolute",s.style.left=s.style.top="0px",s.style.width=s.style.height="100%",s.style["background-color"]=_.lightLine,s.style["z-index"]=30;var F=document.createElement("p");return F.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",F.style.position="relative",F.style.top="50%",F.style.left="50%",F.style.height="30%",F.style.width="50%",F.style.margin="-15% 0 0 -25%",s.appendChild(F),i.container.appendChild(s),i.container.style.background="#FFFFFF",i.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(i){"use strict";i.exports=function(i){return Object.keys(i).sort()}},80038:function(i,o,s){"use strict";var _=s(92770),F=s(73627).isArrayOrTypedArray;o.aggNums=function(i,s,N,j){var Z,X;if((!j||j>N.length)&&(j=N.length),_(s)||(s=!1),F(N[0])){for(Z=0,X=Array(j);Z<j;Z++)X[Z]=o.aggNums(i,s,N[Z]);N=X}for(Z=0;Z<j;Z++)_(s)?_(N[Z])&&(s=i(+s,+N[Z])):s=N[Z];return s},o.len=function(i){return o.aggNums(function(i){return i+1},0,i)},o.mean=function(i,s){return s||(s=o.len(i)),o.aggNums(function(i,o){return i+o},0,i)/s},o.midRange=function(i){if(void 0!==i&&0!==i.length)return(o.aggNums(Math.max,null,i)+o.aggNums(Math.min,null,i))/2},o.variance=function(i,s,F){return s||(s=o.len(i)),_(F)||(F=o.mean(i,s)),o.aggNums(function(i,o){return i+Math.pow(o-F,2)},0,i)/s},o.stdev=function(i,s,_){return Math.sqrt(o.variance(i,s,_))},o.median=function(i){var s=i.slice().sort();return o.interp(s,.5)},o.interp=function(i,o){if(!_(o))throw"n should be a finite number";if((o=o*i.length-.5)<0)return i[0];if(o>i.length-1)return i[i.length-1];var s=o%1;return s*i[Math.ceil(o)]+(1-s)*i[Math.floor(o)]}},78614:function(i,o,s){"use strict";var _=s(25075);function str2RgbaArray(i){return i?_(i):[0,0,0,1]}i.exports=str2RgbaArray},3883:function(i,o,s){"use strict";var _=s(32396),F=s(91424),N=s(71828),j=null;function supportsPixelatedImage(){if(null!==j)return j;j=!1;var i=N.isIE()||N.isSafari()||N.isIOS();if(window.navigator.userAgent&&!i){var o=Array.from(_.CSS_DECLARATIONS).reverse(),s=window.CSS&&window.CSS.supports||window.supportsCSS;if("function"==typeof s)j=o.some(function(i){return s.apply(null,i)});else{var Z=F.tester.append("image").attr("style",_.STYLE),X=window.getComputedStyle(Z.node()).imageRendering;j=o.some(function(i){var o=i[1];return X===o||X===o.toLowerCase()}),Z.remove()}}return j}i.exports=supportsPixelatedImage},63893:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=F.strTranslate,j=s(77922),Z=s(18783).LINE_SPACING,X=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;o.convertToTspans=function(i,s,F){var j=i.text(),Z=!i.attr("data-notex")&&s&&s._context.typesetMath&&"undefined"!=typeof MathJax&&j.match(X),$=_.select(i.node().parentNode);if(!$.empty()){var ee=i.attr("class")?i.attr("class").split(" ")[0]:"text";return ee+="-math",$.selectAll("svg."+ee).remove(),$.selectAll("g."+ee+"-group").remove(),i.style("display",null).attr({"data-unformatted":j,"data-math":"N"}),Z?(s&&s._promises||[]).push(new Promise(function(o){i.style("display","none");var s=parseInt(i.node().style.fontSize,10);texToSVG(Z[2],{fontSize:s},function(_,Z,X){$.selectAll("svg."+ee).remove(),$.selectAll("g."+ee+"-group").remove();var et=_&&_.select("svg");if(!et||!et.node()){showText(),o();return}var er=$.append("g").classed(ee+"-group",!0).attr({"pointer-events":"none","data-unformatted":j,"data-math":"Y"});er.node().appendChild(et.node()),Z&&Z.node()&&et.node().insertBefore(Z.node().cloneNode(!0),et.node().firstChild);var en=X.width,ei=X.height;et.attr({class:ee,height:ei,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var eo=i.node().style.fill||"black",es=et.select("g");es.attr({fill:eo,stroke:eo});var el=es.node().getBoundingClientRect(),ec=el.width,eu=el.height;(ec>en||eu>ei)&&(et.style("overflow","hidden"),ec=(el=et.node().getBoundingClientRect()).width,eu=el.height);var ef=+i.attr("x"),ed=+i.attr("y"),eh=-(s||i.node().getBoundingClientRect().height)/4;if("y"===ee[0])er.attr({transform:"rotate("+[-90,ef,ed]+")"+N(-ec/2,eh-eu/2)});else if("l"===ee[0])ed=eh-eu/2;else if("a"===ee[0]&&0!==ee.indexOf("atitle"))ef=0,ed=eh;else{var ep=i.attr("text-anchor");ef-=ec*("middle"===ep?.5:"end"===ep?1:0),ed=ed+eh-eu/2}et.attr({x:ef,y:ed}),F&&F.call(i,er),o(er)})})):showText(),i}function showText(){$.empty()||(ee=i.attr("class")+"-math",$.select("svg."+ee).remove()),i.text("").style("white-space","pre"),buildSVGText(i.node(),j)&&i.style("pointer-events","all"),o.positionText(i),F&&F.call(i)}};var $=/(<|&lt;|&#60;)/g,ee=/(>|&gt;|&#62;)/g;function cleanEscapesForTex(i){return i.replace($,"\\lt ").replace(ee,"\\gt ")}var et=[["$","$"],["\\(","\\)"]];function texToSVG(i,o,s){var N,j,Z,X,$=parseInt((MathJax.version||"").split(".")[0]);if(2!==$&&3!==$){F.warn("No MathJax version:",MathJax.version);return}var initiateMathJax=function(){var s="math-output-"+F.randstr({},64),N=(X=_.select("body").append("div").attr({id:s}).style({visibility:"hidden",position:"absolute","font-size":o.fontSize+"px"}).text(cleanEscapesForTex(i))).node();return 2===$?MathJax.Hub.Typeset(N):MathJax.typeset([N])},finalizeMathJax=function(){var o=X.select(2===$?".MathJax_SVG":".MathJax"),N=!o.empty()&&X.select("svg").node();if(N){var j,Z=N.getBoundingClientRect();j=2===$?_.select("body").select("#MathJax_SVG_glyphs"):o.select("defs"),s(o,j,Z)}else F.log("There was an error in the tex syntax.",i),s();X.remove()},resetRenderer3=function(){"svg"!==N&&(MathJax.config.startup.output=N)},resetConfig3=function(){MathJax.config=j};2===$?MathJax.Hub.Queue(function(){return j=F.extendDeepAll({},MathJax.Hub.config),Z=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:et},displayAlign:"left"})},function(){if("SVG"!==(N=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},initiateMathJax,finalizeMathJax,function(){if("SVG"!==N)return MathJax.Hub.setRenderer(N)},function(){return void 0!==Z&&(MathJax.Hub.processSectionDelay=Z),MathJax.Hub.Config(j)}):3===$&&(j=F.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=et,"svg"!==(N=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){initiateMathJax(),finalizeMathJax(),resetRenderer3(),resetConfig3()}))}var er={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},en={sub:"0.3em",sup:"-0.6em"},ei={sub:"-0.21em",sup:"0.42em"},eo=["http:","https:","mailto:","",void 0,":"],es=o.NEWLINES=/(\r\n?|\n)/g,el=/(<[^<>]*>)/,ec=/<(\/?)([^ >]*)(\s+(.*))?>/i,eu=/<br(\s+.*)?>/i;o.BR_TAG_ALL=/<br(\s+.*)?>/gi;var ef=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,ed=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,eh=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,ep=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function getQuotedMatch(i,o){if(!i)return null;var s=i.match(o),_=s&&(s[3]||s[4]);return _&&convertEntities(_)}var eg=/(^|;)\s*color:/;o.plainText=function(i,o){for(var s=void 0!==(o=o||{}).len&&-1!==o.len?o.len:1/0,_=void 0!==o.allowedTags?o.allowedTags:["br"],F=i.split(el),N=[],j="",Z=0,X=0;X<F.length;X++){var $=F[X],ee=$.match(ec),et=ee&&ee[2].toLowerCase();if(et)-1!==_.indexOf(et)&&(N.push($),j=et);else{var er=$.length;if(Z+er<s)N.push($),Z+=er;else if(Z<s){var en=s-Z;j&&("br"!==j||en<=3||er<=3)&&N.pop(),s>3?N.push($.substr(0,en-3)+"..."):N.push($.substr(0,en));break}j=""}}return N.join("")};var em={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},ey=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function convertEntities(i){return i.replace(ey,function(i,o){return("#"===o.charAt(0)?fromCodePoint("x"===o.charAt(1)?parseInt(o.substr(2),16):parseInt(o.substr(1),10)):em[o])||i})}function fromCodePoint(i){if(!(i>1114111)){var o=String.fromCodePoint;if(o)return o(i);var s=String.fromCharCode;return i<=65535?s(i):s((i>>10)+55232,i%1024+56320)}}function buildSVGText(i,o){o=o.replace(es," ");var s,N=!1,X=[],$=-1;function newLine(){$++;var o=document.createElementNS(j.svg,"tspan");_.select(o).attr({class:"line",dy:$*Z+"em"}),i.appendChild(o),s=o;var F=X;if(X=[{node:o}],F.length>1)for(var N=1;N<F.length;N++)enterNode(F[N])}function enterNode(i){var o,F=i.type,N={};if("a"===F){o="a";var Z=i.target,$=i.href,ee=i.popup;$&&(N={"xlink:xlink:show":"_blank"===Z||"_"!==Z.charAt(0)?"new":"replace",target:Z,"xlink:xlink:href":$},ee&&(N.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+ee+'");return false;'))}else o="tspan";i.style&&(N.style=i.style);var et=document.createElementNS(j.svg,o);if("sup"===F||"sub"===F){addTextNode(s,"​"),s.appendChild(et);var er=document.createElementNS(j.svg,"tspan");addTextNode(er,"​"),_.select(er).attr("dy",ei[F]),N.dy=en[F],s.appendChild(et),s.appendChild(er)}else s.appendChild(et);_.select(et).attr(N),s=i.node=et,X.push(i)}function addTextNode(i,o){i.appendChild(document.createTextNode(o))}function exitNode(i){if(1===X.length){F.log("Ignoring unexpected end tag </"+i+">.",o);return}var _=X.pop();i!==_.type&&F.log("Start tag <"+_.type+"> doesnt match end tag <"+i+">. Pretending it did match.",o),s=X[X.length-1].node}eu.test(o)?newLine():(s=i,X=[{node:i}]);for(var ee=o.split(el),et=0;et<ee.length;et++){var eo=ee[et],em=eo.match(ec),ey=em&&em[2].toLowerCase(),ev=er[ey];if("br"===ey)newLine();else if(void 0===ev)addTextNode(s,convertEntities(eo));else if(em[1])exitNode(ey);else{var ex=em[4],e_={type:ey},ew=getQuotedMatch(ex,ef);if(ew?(ew=ew.replace(eg,"$1 fill:"),ev&&(ew+=";"+ev)):ev&&(ew=ev),ew&&(e_.style=ew),"a"===ey){N=!0;var eT=getQuotedMatch(ex,ed);if(eT){var ek=sanitizeHref(eT);ek&&(e_.href=ek,e_.target=getQuotedMatch(ex,eh)||"_blank",e_.popup=getQuotedMatch(ex,ep))}}enterNode(e_)}}return N}function sanitizeHref(i){var o=encodeURI(decodeURI(i)),s=document.createElement("a"),_=document.createElement("a");s.href=i,_.href=o;var F=s.protocol,N=_.protocol;return -1!==eo.indexOf(F)&&-1!==eo.indexOf(N)?o:""}function alignHTMLWith(i,o,s){var _,N,j,Z=s.horizontalAlign,X=s.verticalAlign||"top",$=i.node().getBoundingClientRect(),ee=o.node().getBoundingClientRect();return N="bottom"===X?function(){return $.bottom-_.height}:"middle"===X?function(){return $.top+($.height-_.height)/2}:function(){return $.top},j="right"===Z?function(){return $.right-_.width}:"center"===Z?function(){return $.left+($.width-_.width)/2}:function(){return $.left},function(){_=this.node().getBoundingClientRect();var i=j()-ee.left,o=N()-ee.top,Z=s.gd||{};if(s.gd){Z._fullLayout._calcInverseTransform(Z);var X=F.apply3DTransform(Z._fullLayout._invTransform)(i,o);i=X[0],o=X[1]}return this.style({top:o+"px",left:i+"px","z-index":1e3}),this}}o.convertEntities=convertEntities,o.sanitizeHTML=function(i){i=i.replace(es," ");for(var o=document.createElement("p"),s=o,F=[],N=i.split(el),j=0;j<N.length;j++){var Z=N[j],X=Z.match(ec),$=X&&X[2].toLowerCase();if($ in er){if(X[1])F.length&&(s=F.pop());else{var ee=X[4],et=getQuotedMatch(ee,ef),en=et?{style:et}:{};if("a"===$){var ei=getQuotedMatch(ee,ed);if(ei){var eo=sanitizeHref(ei);if(eo){en.href=eo;var eu=getQuotedMatch(ee,eh);eu&&(en.target=eu)}}}var ep=document.createElement($);s.appendChild(ep),_.select(ep).attr(en),s=ep,F.push(ep)}}else s.appendChild(document.createTextNode(convertEntities(Z)))}return o.innerHTML},o.lineCount=function(i){return i.selectAll("tspan.line").size()||1},o.positionText=function(i,o,s){return i.each(function(){var i=_.select(this);function setOrGet(o,s){return void 0===s?null===(s=i.attr(o))&&(i.attr(o,0),s=0):i.attr(o,s),s}var F=setOrGet("x",o),N=setOrGet("y",s);"text"===this.nodeName&&i.selectAll("tspan.line").attr({x:F,y:N})})};var ev="1px ";o.makeTextShadow=function(i){return ev+ev+ev+i+", -"+ev+"-"+ev+ev+i+", "+ev+"-"+ev+ev+i+", -"+ev+ev+ev+i},o.makeEditable=function(i,o){var s=o.gd,F=o.delegate,N=_.dispatch("edit","input","cancel"),j=F||i;if(i.style({"pointer-events":F?"none":"all"}),1!==i.size())throw Error("boo");function handleClick(){appendEditable(),i.style({opacity:0});var o,s=j.attr("class");(o=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&_.select(i.node().parentNode).select(o).style({opacity:0})}function selectElementContents(i){var o=i.node(),s=document.createRange();s.selectNodeContents(o);var _=window.getSelection();_.removeAllRanges(),_.addRange(s),o.focus()}function appendEditable(){var F=_.select(s).select(".svg-container"),j=F.append("div"),Z=i.node().style,X=parseFloat(Z.fontSize||12),$=o.text;void 0===$&&($=i.attr("data-unformatted")),j.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Z.fontFamily||"Arial","font-size":X,color:o.fill||Z.fill||"black",opacity:1,"background-color":o.background||"transparent",outline:"#ffffff33 1px solid",margin:[-X/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text($).call(alignHTMLWith(i,F,o)).on("blur",function(){s._editing=!1,i.text(this.textContent).style({opacity:1});var o,F=_.select(this).attr("class");(o=F?"."+F.split(" ")[0]+"-math-group":"[class*=-math-group]")&&_.select(i.node().parentNode).select(o).style({opacity:0});var j=this.textContent;_.select(this).transition().duration(0).remove(),_.select(document).on("mouseup",null),N.edit.call(i,j)}).on("focus",function(){var i=this;s._editing=!0,_.select(document).on("mouseup",function(){if(_.event.target===i)return!1;document.activeElement===j.node()&&j.node().blur()})}).on("keyup",function(){27===_.event.which?(s._editing=!1,i.style({opacity:1}),_.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),N.cancel.call(i,this.textContent)):(N.input.call(i,this.textContent),_.select(this).call(alignHTMLWith(i,F,o)))}).on("keydown",function(){13===_.event.which&&this.blur()}).call(selectElementContents)}return o.immediate?handleClick():j.on("click",handleClick),_.rebind(i,N,"on")}},79990:function(i,o){"use strict";var s={};function _clearTimeout(i){i&&null!==i.timer&&(clearTimeout(i.timer),i.timer=null)}o.throttle=function(i,o,_){var F=s[i],N=Date.now();if(!F){for(var j in s)s[j].ts<N-6e4&&delete s[j];F=s[i]={ts:0,timer:null}}function exec(){_(),F.ts=Date.now(),F.onDone&&(F.onDone(),F.onDone=null)}if(_clearTimeout(F),N>F.ts+o){exec();return}F.timer=setTimeout(function(){exec(),F.timer=null},o)},o.done=function(i){var o=s[i];return o&&o.timer?new Promise(function(i){var s=o.onDone;o.onDone=function(){s&&s(),i(),o.onDone=null}}):Promise.resolve()},o.clear=function(i){if(i)_clearTimeout(s[i]),delete s[i];else for(var _ in s)o.clear(_)}},58163:function(i,o,s){"use strict";var _=s(92770);i.exports=function(i,o){if(i>0)return Math.log(i)/Math.LN10;var s=Math.log(Math.min(o[0],o[1]))/Math.LN10;return _(s)||(s=Math.log(Math.max(o[0],o[1]))/Math.LN10-6),s}},90973:function(i,o,s){"use strict";var _=i.exports={},F=s(78776).locationmodeToLayer,N=s(96892).zL;_.getTopojsonName=function(i){return[i.scope.replace(/ /g,"-"),"_",i.resolution.toString(),"m"].join("")},_.getTopojsonPath=function(i,o){return i+o+".json"},_.getTopojsonFeatures=function(i,o){var s=F[i.locationmode],_=o.objects[s];return N(o,_).features}},37815:function(i){"use strict";i.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(i){"use strict";i.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(i,o,s){"use strict";var _=s(73972);i.exports=function(i){for(var o,s,F=_.layoutArrayContainers,N=_.layoutArrayRegexes,j=i.split("[")[0],Z=0;Z<N.length;Z++)if((s=i.match(N[Z]))&&0===s.index){o=s[0];break}if(o||(o=F[F.indexOf(j)]),!o)return!1;var X=i.substr(o.length);return X?!!(s=X.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:o,index:Number(s[1]),property:s[3]||""}:{array:o,index:"",property:""}}},30962:function(i,o,s){"use strict";var _=s(1426).extendFlat,F=s(41965),N={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},j={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},Z=N.flags.slice().concat(["fullReplot"]),X=j.flags.slice().concat("layoutReplot");function falseObj(i){for(var o={},s=0;s<i.length;s++)o[i[s]]=!1;return o}function overrideAll(i,o,s){var N=_({},i);for(var j in N){var Z=N[j];F(Z)&&(N[j]=overrideOne(Z,o,s,j))}return"from-root"===s&&(N.editType=o),N}function overrideOne(i,o,s,F){if(!i.valType)return overrideAll(i,o,"_"===F.charAt(0)?"nested":"from-root");var N=_({},i);if(N.editType=o,Array.isArray(i.items)){N.items=Array(i.items.length);for(var j=0;j<i.items.length;j++)N.items[j]=overrideOne(i.items[j],o,"from-root")}return N}i.exports={traces:N,layout:j,traceFlags:function(){return falseObj(Z)},layoutFlags:function(){return falseObj(X)},update:function(i,o){var s=o.editType;if(s&&"none"!==s)for(var _=s.split("+"),F=0;F<_.length;F++)i[_[F]]=!0},overrideAll:overrideAll}},58377:function(i,o,s){"use strict";var _=s(92770),F=s(27812),N=s(73972),j=s(71828),Z=s(74875),X=s(41675),$=s(7901),ee=X.cleanId,et=X.getFromTrace,er=N.traceIs;function cleanAxRef(i,o){var s=i[o],_=o.charAt(0);s&&"paper"!==s&&(i[o]=ee(s,_,!0))}function cleanTitle(i){i&&(("string"==typeof i.title||"number"==typeof i.title)&&(i.title={text:i.title}),rewireAttr("titlefont","font"),rewireAttr("titleposition","position"),rewireAttr("titleside","side"),rewireAttr("titleoffset","offset"));function rewireAttr(o,s){var _=i[o],F=i.title&&i.title[s];_&&!F&&(i.title||(i.title={}),i.title[s]=i[o],delete i[o])}}function cleanFinanceDir(i){if(!j.isPlainObject(i))return!1;var o=i.name;return delete i.name,delete i.showlegend,("string"==typeof o||"number"==typeof o)&&String(o)}function commonPrefix(i,o,s,_){if(s&&!_)return i;if(_&&!s||!i.trim())return o;if(!o.trim())return i;var F,N=Math.min(i.length,o.length);for(F=0;F<N&&i.charAt(F)===o.charAt(F);F++);return i.substr(0,F).trim()}function cleanTextPosition(i){var o="middle",s="center";return"string"==typeof i&&(-1!==i.indexOf("top")?o="top":-1!==i.indexOf("bottom")&&(o="bottom"),-1!==i.indexOf("left")?s="left":-1!==i.indexOf("right")&&(s="right")),o+" "+s}function emptyContainer(i,o){return o in i&&"object"==typeof i[o]&&0===Object.keys(i[o]).length}o.clearPromiseQueue=function(i){Array.isArray(i._promises)&&i._promises.length>0&&j.log("Clearing previous rejected promises from queue."),i._promises=[]},o.cleanLayout=function(i){i||(i={}),i.xaxis1&&(i.xaxis||(i.xaxis=i.xaxis1),delete i.xaxis1),i.yaxis1&&(i.yaxis||(i.yaxis=i.yaxis1),delete i.yaxis1),i.scene1&&(i.scene||(i.scene=i.scene1),delete i.scene1);var s,_,N=(Z.subplotsRegistry.cartesian||{}).attrRegex,X=(Z.subplotsRegistry.polar||{}).attrRegex,et=(Z.subplotsRegistry.ternary||{}).attrRegex,er=(Z.subplotsRegistry.gl3d||{}).attrRegex,en=Object.keys(i);for(s=0;s<en.length;s++){var ei=en[s];if(N&&N.test(ei)){var eo=i[ei];eo.anchor&&"free"!==eo.anchor&&(eo.anchor=ee(eo.anchor)),eo.overlaying&&(eo.overlaying=ee(eo.overlaying)),eo.type||(eo.isdate?eo.type="date":eo.islog?eo.type="log":!1!==eo.isdate||!1!==eo.islog||(eo.type="linear")),("withzero"===eo.autorange||"tozero"===eo.autorange)&&(eo.autorange=!0,eo.rangemode="tozero"),eo.insiderange&&delete eo.range,delete eo.islog,delete eo.isdate,delete eo.categories,emptyContainer(eo,"domain")&&delete eo.domain,void 0!==eo.autotick&&(void 0===eo.tickmode&&(eo.tickmode=eo.autotick?"auto":"linear"),delete eo.autotick),cleanTitle(eo)}else if(X&&X.test(ei))cleanTitle(i[ei].radialaxis);else if(et&&et.test(ei)){var es=i[ei];cleanTitle(es.aaxis),cleanTitle(es.baxis),cleanTitle(es.caxis)}else if(er&&er.test(ei)){var el=i[ei],ec=el.cameraposition;if(Array.isArray(ec)&&4===ec[0].length){var eu=ec[0],ef=ec[1],ed=ec[2],eh=F([],eu),ep=[];for(_=0;_<3;++_)ep[_]=ef[_]+ed*eh[2+4*_];el.camera={eye:{x:ep[0],y:ep[1],z:ep[2]},center:{x:ef[0],y:ef[1],z:ef[2]},up:{x:0,y:0,z:1}},delete el.cameraposition}cleanTitle(el.xaxis),cleanTitle(el.yaxis),cleanTitle(el.zaxis)}}var eg=Array.isArray(i.annotations)?i.annotations.length:0;for(s=0;s<eg;s++){var em=i.annotations[s];j.isPlainObject(em)&&(em.ref&&("paper"===em.ref?(em.xref="paper",em.yref="paper"):"data"===em.ref&&(em.xref="x",em.yref="y"),delete em.ref),cleanAxRef(em,"xref"),cleanAxRef(em,"yref"))}var ey=Array.isArray(i.shapes)?i.shapes.length:0;for(s=0;s<ey;s++){var ev=i.shapes[s];j.isPlainObject(ev)&&(cleanAxRef(ev,"xref"),cleanAxRef(ev,"yref"))}var ex=Array.isArray(i.images)?i.images.length:0;for(s=0;s<ex;s++){var e_=i.images[s];j.isPlainObject(e_)&&(cleanAxRef(e_,"xref"),cleanAxRef(e_,"yref"))}var ew=i.legend;return ew&&(ew.x>3?(ew.x=1.02,ew.xanchor="left"):ew.x<-2&&(ew.x=-.02,ew.xanchor="right"),ew.y>3?(ew.y=1.02,ew.yanchor="bottom"):ew.y<-2&&(ew.y=-.02,ew.yanchor="top")),cleanTitle(i),"rotate"===i.dragmode&&(i.dragmode="orbit"),$.clean(i),i.template&&i.template.layout&&o.cleanLayout(i.template.layout),i},o.cleanData=function(i){for(var s=0;s<i.length;s++){var _,F=i[s];if("histogramy"===F.type&&"xbins"in F&&!("ybins"in F)&&(F.ybins=F.xbins,delete F.xbins),F.error_y&&"opacity"in F.error_y){var X=$.defaults,et=F.error_y.color||(er(F,"bar")?$.defaultLine:X[s%X.length]);F.error_y.color=$.addOpacity($.rgb(et),$.opacity(et)*F.error_y.opacity),delete F.error_y.opacity}if("bardir"in F&&("h"===F.bardir&&(er(F,"bar")||"histogram"===F.type.substr(0,9))&&(F.orientation="h",o.swapXYData(F)),delete F.bardir),"histogramy"===F.type&&o.swapXYData(F),("histogramx"===F.type||"histogramy"===F.type)&&(F.type="histogram"),"scl"in F&&!("colorscale"in F)&&(F.colorscale=F.scl,delete F.scl),"reversescl"in F&&!("reversescale"in F)&&(F.reversescale=F.reversescl,delete F.reversescl),F.xaxis&&(F.xaxis=ee(F.xaxis,"x")),F.yaxis&&(F.yaxis=ee(F.yaxis,"y")),er(F,"gl3d")&&F.scene&&(F.scene=Z.subplotsRegistry.gl3d.cleanId(F.scene)),!er(F,"pie-like")&&!er(F,"bar-like")){if(Array.isArray(F.textposition))for(_=0;_<F.textposition.length;_++)F.textposition[_]=cleanTextPosition(F.textposition[_]);else F.textposition&&(F.textposition=cleanTextPosition(F.textposition))}var en=N.getModule(F);if(en&&en.colorbar){var ei=en.colorbar.container,eo=ei?F[ei]:F;eo&&eo.colorscale&&("YIGnBu"===eo.colorscale&&(eo.colorscale="YlGnBu"),"YIOrRd"===eo.colorscale&&(eo.colorscale="YlOrRd"))}if("surface"===F.type&&j.isPlainObject(F.contours)){var es=["x","y","z"];for(_=0;_<es.length;_++){var el=F.contours[es[_]];j.isPlainObject(el)&&(el.highlightColor&&(el.highlightcolor=el.highlightColor,delete el.highlightColor),el.highlightWidth&&(el.highlightwidth=el.highlightWidth,delete el.highlightWidth))}}if("candlestick"===F.type||"ohlc"===F.type){var ec=!1!==(F.increasing||{}).showlegend,eu=!1!==(F.decreasing||{}).showlegend,ef=cleanFinanceDir(F.increasing),ed=cleanFinanceDir(F.decreasing);if(!1!==ef&&!1!==ed){var eh=commonPrefix(ef,ed,ec,eu);eh&&(F.name=eh)}else(ef||ed)&&!F.name&&(F.name=ef||ed)}if(Array.isArray(F.transforms)){var ep=F.transforms;for(_=0;_<ep.length;_++){var eg=ep[_];if(j.isPlainObject(eg))switch(eg.type){case"filter":eg.filtersrc&&(eg.target=eg.filtersrc,delete eg.filtersrc),eg.calendar&&(eg.valuecalendar||(eg.valuecalendar=eg.calendar),delete eg.calendar);break;case"groupby":if(eg.styles=eg.styles||eg.style,eg.styles&&!Array.isArray(eg.styles)){var em=eg.styles,ey=Object.keys(em);eg.styles=[];for(var ev=0;ev<ey.length;ev++)eg.styles.push({target:ey[ev],value:em[ey[ev]]})}}}}emptyContainer(F,"line")&&delete F.line,"marker"in F&&(emptyContainer(F.marker,"line")&&delete F.marker.line,emptyContainer(F,"marker")&&delete F.marker),$.clean(F),F.autobinx&&(delete F.autobinx,delete F.xbins),F.autobiny&&(delete F.autobiny,delete F.ybins),cleanTitle(F),F.colorbar&&cleanTitle(F.colorbar),F.marker&&F.marker.colorbar&&cleanTitle(F.marker.colorbar),F.line&&F.line.colorbar&&cleanTitle(F.line.colorbar),F.aaxis&&cleanTitle(F.aaxis),F.baxis&&cleanTitle(F.baxis)}},o.swapXYData=function(i){var o;if(j.swapAttrs(i,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(i.z)&&Array.isArray(i.z[0])&&(i.transpose?delete i.transpose:i.transpose=!0),i.error_x&&i.error_y){var s=i.error_y,_="copy_ystyle"in s?s.copy_ystyle:!(s.color||s.thickness||s.width);j.swapAttrs(i,["error_?.copy_ystyle"]),_&&j.swapAttrs(i,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof i.hoverinfo){var F=i.hoverinfo.split("+");for(o=0;o<F.length;o++)"x"===F[o]?F[o]="y":"y"===F[o]&&(F[o]="x");i.hoverinfo=F.join("+")}},o.coerceTraceIndices=function(i,o){if(_(o))return[o];if(!Array.isArray(o)||!o.length)return i.data.map(function(i,o){return o});if(Array.isArray(o)){for(var s=[],F=0;F<o.length;F++)j.isIndex(o[F],i.data.length)?s.push(o[F]):j.warn("trace index (",o[F],") is not a number or is out of bounds");return s}return o},o.manageArrayContainers=function(i,o,s){var F=i.obj,N=i.parts,Z=N.length,X=N[Z-1],$=_(X);if($&&null===o){var ee=N.slice(0,Z-1).join(".");j.nestedProperty(F,ee).get().splice(X,1)}else $&&void 0===i.get()&&void 0===i.get()&&(s[i.astr]=null),i.set(o)};var en=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function getParent(i){var o=i.search(en);if(o>0)return i.substr(0,o)}o.hasParent=function(i,o){for(var s=getParent(o);s;){if(s in i)return!0;s=getParent(s)}return!1};var ei=["x","y","z"];o.clearAxisTypes=function(i,o,s){for(var _=0;_<o.length;_++)for(var F=i._fullData[_],N=0;N<3;N++){var Z=et(i,F,ei[N]);if(Z&&"log"!==Z.type){var X=Z._name,$=Z._id.substr(1);if("scene"===$.substr(0,5)){if(void 0!==s[$])continue;X=$+"."+X}var ee=X+".type";void 0===s[X]&&void 0===s[ee]&&j.nestedProperty(i.layout,ee).set(null)}}}},10641:function(i,o,s){"use strict";var _=s(72391);o._doPlot=_._doPlot,o.newPlot=_.newPlot,o.restyle=_.restyle,o.relayout=_.relayout,o.redraw=_.redraw,o.update=_.update,o._guiRestyle=_._guiRestyle,o._guiRelayout=_._guiRelayout,o._guiUpdate=_._guiUpdate,o._storeDirectGUIEdit=_._storeDirectGUIEdit,o.react=_.react,o.extendTraces=_.extendTraces,o.prependTraces=_.prependTraces,o.addTraces=_.addTraces,o.deleteTraces=_.deleteTraces,o.moveTraces=_.moveTraces,o.purge=_.purge,o.addFrames=_.addFrames,o.deleteFrames=_.deleteFrames,o.animate=_.animate,o.setPlotConfig=_.setPlotConfig;var F=s(24401).getGraphDiv,N=s(34031).eraseActiveShape;o.deleteActiveShape=function(i){return N(F(i))},o.toImage=s(403),o.validate=s(84936),o.downloadImage=s(7239);var j=s(96318);o.makeTemplate=j.makeTemplate,o.validateTemplate=j.validateTemplate},6611:function(i,o,s){"use strict";var _=s(41965),F=s(64213),N=s(47769),j=s(65888).sorterAsc,Z=s(73972);o.containerArrayMatch=s(14458);var X=o.isAddVal=function(i){return"add"===i||_(i)},$=o.isRemoveVal=function(i){return null===i||"remove"===i};o.applyContainerArrayChanges=function(i,o,s,_,ee){var et,er,en,ei,eo,es,el,ec,eu,ef=o.astr,ed=Z.getComponentMethod(ef,"supplyLayoutDefaults"),eh=Z.getComponentMethod(ef,"draw"),ep=Z.getComponentMethod(ef,"drawOne"),eg=_.replot||_.recalc||ed===F||eh===F,em=i.layout,ey=i._fullLayout;if(s[""]){Object.keys(s).length>1&&N.warn("Full array edits are incompatible with other edits",ef);var ev=s[""][""];if($(ev))o.set(null);else{if(!Array.isArray(ev))return N.warn("Unrecognized full array edit value",ef,ev),!0;o.set(ev)}return!eg&&(ed(em,ey),eh(i),!0)}var ex=Object.keys(s).map(Number).sort(j),e_=o.get(),ew=e_||[],eT=ee(ey,ef).get(),ek=[],eA=-1,eS=ew.length;for(et=0;et<ex.length;et++){if(eo=Object.keys(ei=s[en=ex[et]]),el=X(es=ei[""]),en<0||en>ew.length-(el?0:1)){N.warn("index out of range",ef,en);continue}if(void 0!==es)eo.length>1&&N.warn("Insertion & removal are incompatible with edits to the same index.",ef,en),$(es)?ek.push(en):el?("add"===es&&(es={}),ew.splice(en,0,es),eT&&eT.splice(en,0,{})):N.warn("Unrecognized full object edit value",ef,en,es),-1===eA&&(eA=en);else for(er=0;er<eo.length;er++)ec=ef+"["+en+"].",ee(ew[en],eo[er],ec).set(ei[eo[er]])}for(et=ek.length-1;et>=0;et--)ew.splice(ek[et],1),eT&&eT.splice(ek[et],1);if(ew.length?e_||o.set(ew):o.set(null),eg)return!1;if(ed(em,ey),ep!==F){if(-1===eA)eu=ex;else{for(et=0,eS=Math.max(ew.length,eS),eu=[];et<ex.length&&!((en=ex[et])>=eA);et++)eu.push(en);for(et=eA;et<eS;et++)eu.push(et)}for(et=0;et<eu.length;et++)ep(i,eu[et])}else eh(i);return!0}},72391:function(i,o,s){"use strict";var _=s(39898),F=s(92770),N=s(57035),j=s(71828),Z=j.nestedProperty,X=s(11086),$=s(10847),ee=s(73972),et=s(86281),er=s(74875),en=s(89298),ei=s(23608),eo=s(13838),es=s(91424),el=s(7901),ec=s(4305).initInteractions,eu=s(77922),ef=s(47322).clearOutline,ed=s(72075).dfltConfig,eh=s(6611),ep=s(58377),eg=s(61549),em=s(30962),ey=s(85555).AX_NAME_PATTERN,ev=0;function _doPlot(i,s,F,N){if(i=j.getGraphDiv(i),X.init(i),j.isPlainObject(s)){var Z,$=s;s=$.data,F=$.layout,N=$.config,Z=$.frames}if(!1===X.triggerHandler(i,"plotly_beforeplot",[s,F,N]))return Promise.reject();function addFrames(){if(Z)return o.addFrames(i,Z)}s||F||j.isPlotDiv(i)||j.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",i),setPlotContext(i,N),F||(F={}),_.select(i).classed("js-plotly-plot",!0),es.makeTester(),Array.isArray(i._promises)||(i._promises=[]);var et=0===(i.data||[]).length&&Array.isArray(s);Array.isArray(s)&&(ep.cleanData(s),et?i.data=s:i.data.push.apply(i.data,s),i.empty=!1),(!i.layout||et)&&(i.layout=ep.cleanLayout(F)),er.supplyDefaults(i);var ei=i._fullLayout,eo=ei._has("cartesian");ei._replotting=!0,(et||ei._shouldCreateBgLayer)&&(makePlotFramework(i),ei._shouldCreateBgLayer&&delete ei._shouldCreateBgLayer),es.initGradients(i),es.initPatterns(i),et&&en.saveShowSpikeInitial(i);var el=!i.calcdata||i.calcdata.length!==(i._fullData||[]).length;el&&er.doCalcdata(i);for(var eu=0;eu<i.calcdata.length;eu++)i.calcdata[eu][0].trace=i._fullData[eu];i._context.responsive?i._responsiveChartHandler||(i._responsiveChartHandler=function(){j.isHidden(i)||er.resize(i)},window.addEventListener("resize",i._responsiveChartHandler)):j.clearResponsive(i);var ef=j.extendFlat({},ei._size),ed=0;function drawFramework(){for(var o=ei._basePlotModules,s=0;s<o.length;s++)o[s].drawFramework&&o[s].drawFramework(i);!ei._glcanvas&&ei._has("gl")&&(ei._glcanvas=ei._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(i){return i.key}),ei._glcanvas.enter().append("canvas").attr("class",function(i){return"gl-canvas gl-canvas-"+i.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var _=i._context.plotGlPixelRatio;if(ei._glcanvas){ei._glcanvas.attr("width",ei.width*_).attr("height",ei.height*_).style("width",ei.width+"px").style("height",ei.height+"px");var F=ei._glcanvas.data()[0].regl;if(F&&(Math.floor(ei.width*_)!==F._gl.drawingBufferWidth||Math.floor(ei.height*_)!==F._gl.drawingBufferHeight)){var N="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!ed)return j.log(N+" Clearing graph and plotting again."),er.cleanPlot([],{},i._fullData,ei),er.supplyDefaults(i),ei=i._fullLayout,er.doCalcdata(i),ed++,drawFramework();j.error(N)}}return"h"===ei.modebar.orientation?ei._modebardiv.style("height",null).style("width","100%"):ei._modebardiv.style("width",null).style("height",ei.height+"px"),er.previousPromises(i)}function marginPushers(){if(er.clearAutoMarginIds(i),eg.drawMarginPushers(i),en.allowAutoMargin(i),i._fullLayout.title.text&&i._fullLayout.title.automargin&&er.allowAutoMargin(i,"title.automargin"),ei._has("pie"))for(var o=i._fullData,s=0;s<o.length;s++){var _=o[s];"pie"===_.type&&_.automargin&&er.allowAutoMargin(i,"pie."+_.uid+".automargin")}return er.doAutoMargin(i),er.previousPromises(i)}function marginPushersAgain(){if(er.didMarginChange(ef,ei._size))return j.syncOrAsync([marginPushers,eg.layoutStyles],i)}function positionAndAutorange(){if(!el){doAutoRangeAndConstraints();return}return j.syncOrAsync([ee.getComponentMethod("shapes","calcAutorange"),ee.getComponentMethod("annotations","calcAutorange"),doAutoRangeAndConstraints],i)}function doAutoRangeAndConstraints(){i._transitioning||(eg.doAutoRangeAndConstraints(i),et&&en.saveRangeInitial(i),ee.getComponentMethod("rangeslider","calcAutorange")(i))}function drawAxes(){return en.draw(i,et?"":"redraw")}var eh=[er.previousPromises,addFrames,drawFramework,marginPushers,marginPushersAgain];eo&&eh.push(positionAndAutorange),eh.push(eg.layoutStyles),eo&&eh.push(drawAxes,function(i){var o=i._fullLayout._insideTickLabelsUpdaterange;if(o)return i._fullLayout._insideTickLabelsUpdaterange=void 0,relayout(i,o).then(function(){en.saveRangeInitial(i,!0)})}),eh.push(eg.drawData,eg.finalDraw,ec,er.addLinks,er.rehover,er.redrag,er.reselect,er.doAutoMargin,er.previousPromises);var em=j.syncOrAsync(eh,i);return em&&em.then||(em=Promise.resolve()),em.then(function(){return emitAfterPlot(i),i})}function emitAfterPlot(i){var o=i._fullLayout;o._redrawFromAutoMarginCount?o._redrawFromAutoMarginCount--:i.emit("plotly_afterplot")}function setPlotConfig(i){return j.extendFlat(ed,i)}function setBackground(i,o){try{i._fullLayout._paper.style("background",o)}catch(i){j.error(i)}}function opaqueSetBackground(i,o){setBackground(i,el.combine(o,"white"))}function setPlotContext(i,o){if(!i._context){i._context=j.extendDeep({},ed);var s,F,Z,X=_.select("base");i._context._baseUrl=X.size()&&X.attr("href")?window.location.href.split("#")[0]:""}var $=i._context;if(o){for(s=0,F=Object.keys(o);s<F.length;s++)"editable"!==(Z=F[s])&&"edits"!==Z&&Z in $&&("setBackground"===Z&&"opaque"===o[Z]?$[Z]=opaqueSetBackground:$[Z]=o[Z]);o.plot3dPixelRatio&&!$.plotGlPixelRatio&&($.plotGlPixelRatio=$.plot3dPixelRatio);var ee=o.editable;if(void 0!==ee)for(s=0,$.editable=ee,F=Object.keys($.edits);s<F.length;s++)$.edits[F[s]]=ee;if(o.edits)for(s=0,F=Object.keys(o.edits);s<F.length;s++)(Z=F[s])in $.edits&&($.edits[Z]=o.edits[Z]);$._exportedPlot=o._exportedPlot}$.staticPlot&&($.editable=!1,$.edits={},$.autosizable=!1,$.scrollZoom=!1,$.doubleClick=!1,$.showTips=!1,$.showLink=!1,$.displayModeBar=!1),"hover"!==$.displayModeBar||N||($.displayModeBar=!0),("transparent"===$.setBackground||"function"!=typeof $.setBackground)&&($.setBackground=setBackground),$._hasZeroHeight=$._hasZeroHeight||0===i.clientHeight,$._hasZeroWidth=$._hasZeroWidth||0===i.clientWidth;var et=$.scrollZoom,er=$._scrollZoom={};if(!0===et)er.cartesian=1,er.gl3d=1,er.geo=1,er.mapbox=1;else if("string"==typeof et){var en=et.split("+");for(s=0;s<en.length;s++)er[en[s]]=1}else!1!==et&&(er.gl3d=1,er.geo=1,er.mapbox=1)}function redraw(i){if(i=j.getGraphDiv(i),!j.isPlotDiv(i))throw Error("This element is not a Plotly plot: "+i);return ep.cleanData(i.data),ep.cleanLayout(i.layout),i.calcdata=void 0,o._doPlot(i).then(function(){return i.emit("plotly_redraw"),i})}function newPlot(i,s,_,F){return i=j.getGraphDiv(i),er.cleanPlot([],{},i._fullData||[],i._fullLayout||{}),er.purge(i),o._doPlot(i,s,_,F)}function positivifyIndices(i,o){var s,_,F=o+1,N=[];for(s=0;s<i.length;s++)(_=i[s])<0?N.push(F+_):N.push(_);return N}function assertIndexArray(i,o,s){var _,F;for(_=0;_<o.length;_++){if((F=o[_])!==parseInt(F,10))throw Error("all values in "+s+" must be integers");if(F>=i.data.length||F<-i.data.length)throw Error(s+" must be valid indices for gd.data.");if(o.indexOf(F,_+1)>-1||F>=0&&o.indexOf(-i.data.length+F)>-1||F<0&&o.indexOf(i.data.length+F)>-1)throw Error("each index in "+s+" must be unique.")}}function checkMoveTracesArgs(i,o,s){if(!Array.isArray(i.data))throw Error("gd.data must be an array.");if(void 0===o)throw Error("currentIndices is a required argument.");if(Array.isArray(o)||(o=[o]),assertIndexArray(i,o,"currentIndices"),void 0===s||Array.isArray(s)||(s=[s]),void 0!==s&&assertIndexArray(i,s,"newIndices"),void 0!==s&&o.length!==s.length)throw Error("current and new indices must be of equal length.")}function checkAddTracesArgs(i,o,s){var _,F;if(!Array.isArray(i.data))throw Error("gd.data must be an array.");if(void 0===o)throw Error("traces must be defined.");for(Array.isArray(o)||(o=[o]),_=0;_<o.length;_++)if("object"!=typeof(F=o[_])||Array.isArray(F)||null===F)throw Error("all values in traces array must be non-array objects");if(void 0===s||Array.isArray(s)||(s=[s]),void 0!==s&&s.length!==o.length)throw Error("if indices is specified, traces.length must equal indices.length")}function assertExtendTracesArgs(i,o,s,_){var F=j.isPlainObject(_);if(!Array.isArray(i.data))throw Error("gd.data must be an array");if(!j.isPlainObject(o))throw Error("update must be a key:value object");if(void 0===s)throw Error("indices must be an integer or array of integers");for(var N in assertIndexArray(i,s,"indices"),o){if(!Array.isArray(o[N])||o[N].length!==s.length)throw Error("attribute "+N+" must be an array of length equal to indices array length");if(F&&(!(N in _)||!Array.isArray(_[N])||_[N].length!==o[N].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function getExtendProperties(i,o,s,_){var N,X,$,ee,et=j.isPlainObject(_),er=[];for(var en in Array.isArray(s)||(s=[s]),s=positivifyIndices(s,i.data.length-1),o)for(var ei=0;ei<s.length;ei++){if(N=(X=Z(i.data[s[ei]],en)).get(),$=o[en][ei],!j.isArrayOrTypedArray($))throw Error("attribute: "+en+" index: "+ei+" must be an array");if(!j.isArrayOrTypedArray(N))throw Error("cannot extend missing or non-array attribute: "+en);if(N.constructor!==$.constructor)throw Error("cannot extend array with an array of a different type: "+en);F(ee=et?_[en][ei]:_)||(ee=-1),er.push({prop:X,target:N,insert:$,maxp:Math.floor(ee)})}return er}function spliceTraces(i,o,s,_,F){assertExtendTracesArgs(i,o,s,_);for(var N=getExtendProperties(i,o,s,_),j={},Z={},X=0;X<N.length;X++){var $=N[X].prop,ee=N[X].maxp,et=F(N[X].target,N[X].insert,ee);$.set(et[0]),Array.isArray(j[$.astr])||(j[$.astr]=[]),j[$.astr].push(et[1]),Array.isArray(Z[$.astr])||(Z[$.astr]=[]),Z[$.astr].push(N[X].target.length)}return{update:j,maxPoints:Z}}function concatTypedArray(i,o){var s=new i.constructor(i.length+o.length);return s.set(i),s.set(o,i.length),s}function extendTraces(i,s,_,F){function updateArray(i,o,s){var _,F;if(j.isTypedArray(i)){if(s<0){var N=new i.constructor(0),Z=concatTypedArray(i,o);s<0?(_=Z,F=N):(_=N,F=Z)}else if(_=new i.constructor(s),F=new i.constructor(i.length+o.length-s),s===o.length)_.set(o),F.set(i);else if(s<o.length){var X=o.length-s;_.set(o.subarray(X)),F.set(i),F.set(o.subarray(0,X),i.length)}else{var $=s-o.length,ee=i.length-$;_.set(i.subarray(ee)),_.set(o,$),F.set(i.subarray(0,ee))}}else _=i.concat(o),F=s>=0&&s<_.length?_.splice(0,_.length-s):[];return[_,F]}var N=spliceTraces(i=j.getGraphDiv(i),s,_,F,updateArray),Z=o.redraw(i),X=[i,N.update,_,N.maxPoints];return $.add(i,o.prependTraces,X,extendTraces,arguments),Z}function prependTraces(i,s,_,F){function updateArray(i,o,s){var _,F;if(j.isTypedArray(i)){if(s<=0){var N=new i.constructor(0),Z=concatTypedArray(o,i);s<0?(_=Z,F=N):(_=N,F=Z)}else if(_=new i.constructor(s),F=new i.constructor(i.length+o.length-s),s===o.length)_.set(o),F.set(i);else if(s<o.length){var X=o.length-s;_.set(o.subarray(0,X)),F.set(o.subarray(X)),F.set(i,X)}else{var $=s-o.length;_.set(o),_.set(i.subarray(0,$),o.length),F.set(i.subarray($))}}else _=o.concat(i),F=s>=0&&s<_.length?_.splice(s,_.length):[];return[_,F]}var N=spliceTraces(i=j.getGraphDiv(i),s,_,F,updateArray),Z=o.redraw(i),X=[i,N.update,_,N.maxPoints];return $.add(i,o.extendTraces,X,prependTraces,arguments),Z}function addTraces(i,s,_){i=j.getGraphDiv(i);var F,N,Z=[],X=o.deleteTraces,ee=addTraces,et=[i,Z],er=[i,s];for(checkAddTracesArgs(i,s,_),Array.isArray(s)||(s=[s]),s=s.map(function(i){return j.extendFlat({},i)}),ep.cleanData(s),F=0;F<s.length;F++)i.data.push(s[F]);for(F=0;F<s.length;F++)Z.push(-s.length+F);if(void 0===_)return N=o.redraw(i),$.add(i,X,et,ee,er),N;Array.isArray(_)||(_=[_]);try{checkMoveTracesArgs(i,Z,_)}catch(o){throw i.data.splice(i.data.length-s.length,s.length),o}return $.startSequence(i),$.add(i,X,et,ee,er),N=o.moveTraces(i,Z,_),$.stopSequence(i),N}function deleteTraces(i,s){i=j.getGraphDiv(i);var _,F,N=[],Z=o.addTraces,X=deleteTraces,ee=[i,N,s],et=[i,s];if(void 0===s)throw Error("indices must be an integer or array of integers.");for(Array.isArray(s)||(s=[s]),assertIndexArray(i,s,"indices"),(s=positivifyIndices(s,i.data.length-1)).sort(j.sorterDes),_=0;_<s.length;_+=1)F=i.data.splice(s[_],1)[0],N.push(F);var er=o.redraw(i);return $.add(i,Z,ee,X,et),er}function moveTraces(i,s,_){i=j.getGraphDiv(i);var F,N=[],Z=[],X=moveTraces,ee=moveTraces,et=[i,_,s],er=[i,s,_];if(checkMoveTracesArgs(i,s,_),s=Array.isArray(s)?s:[s],void 0===_)for(F=0,_=[];F<s.length;F++)_.push(-s.length+F);for(F=0,_=Array.isArray(_)?_:[_],s=positivifyIndices(s,i.data.length-1),_=positivifyIndices(_,i.data.length-1);F<i.data.length;F++)-1===s.indexOf(F)&&N.push(i.data[F]);for(F=0;F<s.length;F++)Z.push({newIndex:_[F],trace:i.data[s[F]]});for(Z.sort(function(i,o){return i.newIndex-o.newIndex}),F=0;F<Z.length;F+=1)N.splice(Z[F].newIndex,0,Z[F].trace);i.data=N;var en=o.redraw(i);return $.add(i,X,et,ee,er),en}function restyle(i,s,_,F){i=j.getGraphDiv(i),ep.clearPromiseQueue(i);var N={};if("string"==typeof s)N[s]=_;else{if(!j.isPlainObject(s))return j.warn("Restyle fail.",s,_,F),Promise.reject();N=j.extendFlat({},s),void 0===F&&(F=_)}Object.keys(N).length&&(i.changed=!0);var Z=ep.coerceTraceIndices(i,F),X=_restyle(i,N,Z),ee=X.flags;ee.calc&&(i.calcdata=void 0),ee.clearAxisTypes&&ep.clearAxisTypes(i,Z,{});var et=[];ee.fullReplot?et.push(o._doPlot):(et.push(er.previousPromises),er.supplyDefaults(i),ee.markerSize&&(er.doCalcdata(i),addAxRangeSequence(et)),ee.style&&et.push(eg.doTraceStyle),ee.colorbars&&et.push(eg.doColorBars),et.push(emitAfterPlot)),et.push(er.rehover,er.redrag,er.reselect),$.add(i,restyle,[i,X.undoit,X.traces],restyle,[i,X.redoit,X.traces]);var en=j.syncOrAsync(et,i);return en&&en.then||(en=Promise.resolve()),en.then(function(){return i.emit("plotly_restyle",X.eventData),i})}function undefinedToNull(i){return void 0===i?null:i}function makeNP(i,o){return o?function(o,s,_){var F=Z(o,s),N=F.set;return F.set=function(o){storeCurrent((_||"")+s,F.get(),o,i),N(o)},F}:Z}function storeCurrent(i,o,s,_){if(Array.isArray(o)||Array.isArray(s))for(var F=Array.isArray(o)?o:[],N=Array.isArray(s)?s:[],Z=Math.max(F.length,N.length),X=0;X<Z;X++)storeCurrent(i+"["+X+"]",F[X],N[X],_);else if(j.isPlainObject(o)||j.isPlainObject(s)){var $=j.isPlainObject(o)?o:{},ee=j.isPlainObject(s)?s:{},et=j.extendFlat({},$,ee);for(var er in et)storeCurrent(i+"."+er,$[er],ee[er],_)}else void 0===_[i]&&(_[i]=undefinedToNull(o))}function _storeDirectGUIEdit(i,o,s){for(var _ in s){var F=Z(i,_);storeCurrent(_,F.get(),s[_],o)}}function _restyle(i,o,s){var _=i._fullLayout,F=i._fullData,N=i.data,X=_._guiEditing,$=makeNP(_._preGUI,X),ei=j.extendDeepAll({},o);cleanDeprecatedAttributeKeys(o);var eo=em.traceFlags(),es={},el={};function a0(){return s.map(function(){})}function addToAxlist(i){var o=en.id2name(i);-1===ef.indexOf(o)&&ef.push(o)}function autorangeAttr(i){return"LAYOUT"+i+".autorange"}function rangeAttr(i){return"LAYOUT"+i+".range"}function getFullTrace(i){for(var o=i;o<F.length;o++)if(F[o]._input===N[i])return F[o]}function doextra(F,j,Z){if(Array.isArray(F)){F.forEach(function(i){doextra(i,j,Z)});return}if(!(F in o||ep.hasParent(o,F))){if("LAYOUT"===F.substr(0,6))ee=$(i.layout,F.replace("LAYOUT",""));else{var ee,et=s[Z];ee=makeNP(_._tracePreGUI[getFullTrace(et)._fullInput.uid],X)(N[et],F)}F in el||(el[F]=a0()),void 0===el[F][Z]&&(el[F][Z]=undefinedToNull(ee.get())),void 0!==j&&ee.set(j)}}function allBins(i){return function(o){return F[o][i]}}function arrayBins(i){return function(o,_){return!1===o?F[s[_]][i]:null}}for(var ec in o){if(ep.hasParent(o,ec))throw Error("cannot set "+ec+" and a parent attribute simultaneously");var eu,ef,ed,eh,eg,ey,ev,ex,e_=o[ec];if(("autobinx"===ec||"autobiny"===ec)&&(ec=ec.charAt(ec.length-1)+"bins",e_=Array.isArray(e_)?e_.map(arrayBins(ec)):!1===e_?s.map(allBins(ec)):null),es[ec]=e_,"LAYOUT"===ec.substr(0,6)){eg=$(i.layout,ec.replace("LAYOUT","")),el[ec]=[undefinedToNull(eg.get())],eg.set(Array.isArray(e_)?e_[0]:e_),eo.calc=!0;continue}for(eu=0,el[ec]=a0();eu<s.length;eu++)if(ed=N[s[eu]],eh=getFullTrace(s[eu]),ey=(eg=makeNP(_._tracePreGUI[eh._fullInput.uid],X)(ed,ec)).get(),void 0!==(ev=Array.isArray(e_)?e_[eu%e_.length]:e_)){var ew=eg.parts[eg.parts.length-1],eT=ec.substr(0,ec.length-ew.length-1),ek=eT?eT+".":"",eA=eT?Z(eh,eT).get():eh;if((ex=et.getTraceValObject(eh,eg.parts))&&ex.impliedEdits&&null!==ev)for(var eS in ex.impliedEdits)doextra(j.relativeAttr(ec,eS),ex.impliedEdits[eS],eu);else if(("thicknessmode"===ew||"lenmode"===ew)&&ey!==ev&&("fraction"===ev||"pixels"===ev)&&eA){var eM=_._size,eC=eA.orient,eE="top"===eC||"bottom"===eC;if("thicknessmode"===ew){var eL=eE?eM.h:eM.w;doextra(ek+"thickness",eA.thickness*("fraction"===ev?1/eL:eL),eu)}else{var eP=eE?eM.w:eM.h;doextra(ek+"len",eA.len*("fraction"===ev?1/eP:eP),eu)}}else if("type"===ec&&("pie"===ev!=("pie"===ey)||"funnelarea"===ev!=("funnelarea"===ey))){var eI="x",eO="y";("bar"===ev||"bar"===ey)&&"h"===ed.orientation&&(eI="y",eO="x"),j.swapAttrs(ed,["?","?src"],"labels",eI),j.swapAttrs(ed,["d?","?0"],"label",eI),j.swapAttrs(ed,["?","?src"],"values",eO),"pie"===ey||"funnelarea"===ey?(Z(ed,"marker.color").set(Z(ed,"marker.colors").get()),_._pielayer.selectAll("g.trace").remove()):ee.traceIs(ed,"cartesian")&&Z(ed,"marker.colors").set(Z(ed,"marker.color").get())}if(el[ec][eu]=undefinedToNull(ey),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(ec)){if("orientation"===ec){eg.set(ev);var eD=ed.x&&!ed.y?"h":"v";if((eg.get()||eD)===eh.orientation)continue}else"orientationaxes"===ec&&(ed.orientation=({v:"h",h:"v"})[eh.orientation]);ep.swapXYData(ed),eo.calc=eo.clearAxisTypes=!0}else -1!==er.dataArrayContainers.indexOf(eg.parts[0])?(ep.manageArrayContainers(eg,ev,el),eo.calc=!0):(ex?ex.arrayOk&&!ee.traceIs(eh,"regl")&&(j.isArrayOrTypedArray(ev)||j.isArrayOrTypedArray(ey))?eo.calc=!0:em.update(eo,ex):eo.calc=!0,eg.set(ev))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(ec)&&en.swap(i,s),"orientationaxes"===ec){var eR=Z(i.layout,"hovermode"),eB=eR.get();"x"===eB?eR.set("y"):"y"===eB?eR.set("x"):"x unified"===eB?eR.set("y unified"):"y unified"===eB&&eR.set("x unified")}if(-1!==["orientation","type"].indexOf(ec)){for(eu=0,ef=[];eu<s.length;eu++){var eF=N[s[eu]];ee.traceIs(eF,"cartesian")&&(addToAxlist(eF.xaxis||"x"),addToAxlist(eF.yaxis||"y"))}doextra(ef.map(autorangeAttr),!0,0),doextra(ef.map(rangeAttr),[0,1],0)}}return(eo.calc||eo.plot)&&(eo.fullReplot=!0),{flags:eo,undoit:el,redoit:es,traces:s,eventData:j.extendDeepNoArrays([],[ei,s])}}function cleanDeprecatedAttributeKeys(i){var o,s,_,F=j.counterRegex("axis",".title",!1,!1),N=/colorbar\.title$/,Z=Object.keys(i);for(o=0;o<Z.length;o++)_=i[s=Z[o]],("title"===s||F.test(s)||N.test(s))&&("string"==typeof _||"number"==typeof _)?replace(s,s.replace("title","title.text")):s.indexOf("titlefont")>-1&&-1===s.indexOf("grouptitlefont")?replace(s,s.replace("titlefont","title.font")):s.indexOf("titleposition")>-1?replace(s,s.replace("titleposition","title.position")):s.indexOf("titleside")>-1?replace(s,s.replace("titleside","title.side")):s.indexOf("titleoffset")>-1&&replace(s,s.replace("titleoffset","title.offset"));function replace(o,s){i[s]=i[o],delete i[o]}}function relayout(i,o,s){i=j.getGraphDiv(i),ep.clearPromiseQueue(i);var _={};if("string"==typeof o)_[o]=s;else{if(!j.isPlainObject(o))return j.warn("Relayout fail.",o,s),Promise.reject();_=j.extendFlat({},o)}Object.keys(_).length&&(i.changed=!0);var F=_relayout(i,_),N=F.flags;N.calc&&(i.calcdata=void 0);var Z=[er.previousPromises];N.layoutReplot?Z.push(eg.layoutReplot):Object.keys(_).length&&(axRangeSupplyDefaultsByPass(i,N,F)||er.supplyDefaults(i),N.legend&&Z.push(eg.doLegend),N.layoutstyle&&Z.push(eg.layoutStyles),N.axrange&&addAxRangeSequence(Z,F.rangesAltered),N.ticks&&Z.push(eg.doTicksRelayout),N.modebar&&Z.push(eg.doModeBar),N.camera&&Z.push(eg.doCamera),N.colorbars&&Z.push(eg.doColorBars),Z.push(emitAfterPlot)),Z.push(er.rehover,er.redrag,er.reselect),$.add(i,relayout,[i,F.undoit],relayout,[i,F.redoit]);var X=j.syncOrAsync(Z,i);return X&&X.then||(X=Promise.resolve(i)),X.then(function(){return i.emit("plotly_relayout",F.eventData),i})}function axRangeSupplyDefaultsByPass(i,o,s){var _,F,N=i._fullLayout;if(!o.axrange)return!1;for(var Z in o)if("axrange"!==Z&&o[Z])return!1;var coerce=function(i,o){return j.coerce(_,F,eo,i,o)},X={};for(var $ in s.rangesAltered){var ee=en.id2name($);if(_=i.layout[ee],F=N[ee],ei(_,F,coerce,X),F._matchGroup){for(var et in F._matchGroup)if(et!==$){var er=N[en.id2name(et)];er.autorange=F.autorange,er.range=F.range.slice(),er._input.range=F.range.slice()}}}return!0}function addAxRangeSequence(i,o){var s=o?function(i){var s=[];for(var _ in o){var F=en.getFromId(i,_);if(s.push(_),-1!==(F.ticklabelposition||"").indexOf("inside")&&F._anchorAxis&&s.push(F._anchorAxis._id),F._matchGroup)for(var N in F._matchGroup)o[N]||s.push(N)}return en.draw(i,s,{skipTitle:!0})}:function(i){return en.draw(i,"redraw")};i.push(ef,eg.doAutoRangeAndConstraints,s,eg.drawData,eg.finalDraw)}var ex=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,e_=/^[xyz]axis[0-9]*\.autorange$/,ew=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function _relayout(i,o){var s,_,F,N,X=i.layout,$=i._fullLayout,er=$._guiEditing,ei=makeNP($._preGUI,er),eo=Object.keys(o),es=en.list(i),el=j.extendDeepAll({},o),ec={};for(cleanDeprecatedAttributeKeys(o),eo=Object.keys(o),_=0;_<eo.length;_++)if(0===eo[_].indexOf("allaxes")){for(F=0;F<es.length;F++){var eu=es[F]._id.substr(1),ef=-1!==eu.indexOf("scene")?eu+".":"",ed=eo[_].replace("allaxes",ef+es[F]._name);o[ed]||(o[ed]=o[eo[_]])}delete o[eo[_]]}var eg=em.layoutFlags(),ev={},eT={};function doextra(i,s){if(Array.isArray(i)){i.forEach(function(i){doextra(i,s)});return}if(!(i in o||ep.hasParent(o,i))){var _=ei(X,i);i in eT||(eT[i]=undefinedToNull(_.get())),void 0!==s&&_.set(s)}}var ek={};function recordAlteredAxis(i){var o=en.name2id(i.split(".")[0]);return ek[o]=1,o}for(var eA in o){if(ep.hasParent(o,eA))throw Error("cannot set "+eA+" and a parent attribute simultaneously");for(var eS=ei(X,eA),eM=o[eA],eC=eS.parts.length-1;eC>0&&"string"!=typeof eS.parts[eC];)eC--;var eE=eS.parts[eC],eL=eS.parts[eC-1]+"."+eE,eP=eS.parts.slice(0,eC).join("."),eI=Z(i.layout,eP).get(),eO=Z($,eP).get(),eD=eS.get();if(void 0!==eM){ev[eA]=eM,eT[eA]="reverse"===eE?eM:undefinedToNull(eD);var eR=et.getLayoutValObject($,eS.parts);if(eR&&eR.impliedEdits&&null!==eM)for(var eB in eR.impliedEdits)doextra(j.relativeAttr(eA,eB),eR.impliedEdits[eB]);if(-1!==["width","height"].indexOf(eA)){if(eM){doextra("autosize",null);var eF="height"===eA?"width":"height";doextra(eF,$[eF])}else $[eA]=i._initialAutoSize[eA]}else if("autosize"===eA)doextra("width",eM?null:$.width),doextra("height",eM?null:$.height);else if(eL.match(ex))recordAlteredAxis(eL),Z($,eP+"._inputRange").set(null);else if(eL.match(e_)){recordAlteredAxis(eL),Z($,eP+"._inputRange").set(null);var ez=Z($,eP).get();ez._inputDomain&&(ez._input.domain=ez._inputDomain.slice())}else eL.match(ew)&&Z($,eP+"._inputDomain").set(null);if("type"===eE){N=eI;var eN="linear"===eO.type&&"log"===eM,ej="log"===eO.type&&"linear"===eM;if(eN||ej){if(N&&N.range){if(eO.autorange)eN&&(N.range=N.range[1]>N.range[0]?[1,2]:[2,1]);else{var eV=N.range[0],eU=N.range[1];eN?(eV<=0&&eU<=0&&doextra(eP+".autorange",!0),eV<=0?eV=eU/1e6:eU<=0&&(eU=eV/1e6),doextra(eP+".range[0]",Math.log(eV)/Math.LN10),doextra(eP+".range[1]",Math.log(eU)/Math.LN10)):(doextra(eP+".range[0]",Math.pow(10,eV)),doextra(eP+".range[1]",Math.pow(10,eU)))}}else doextra(eP+".autorange",!0);Array.isArray($._subplots.polar)&&$._subplots.polar.length&&$[eS.parts[0]]&&"radialaxis"===eS.parts[1]&&delete $[eS.parts[0]]._subplot.viewInitial["radialaxis.range"],ee.getComponentMethod("annotations","convertCoords")(i,eO,eM,doextra),ee.getComponentMethod("images","convertCoords")(i,eO,eM,doextra)}else doextra(eP+".autorange",!0),doextra(eP+".range",null);Z($,eP+"._inputRange").set(null)}else if(eE.match(ey)){var eH=Z($,eA).get(),eG=(eM||{}).type;eG&&"-"!==eG||(eG="linear"),ee.getComponentMethod("annotations","convertCoords")(i,eH,eG,doextra),ee.getComponentMethod("images","convertCoords")(i,eH,eG,doextra)}var eW=eh.containerArrayMatch(eA);if(eW){s=eW.array,_=eW.index;var eZ=eW.property,eY=eR||{editType:"calc"};""!==_&&""===eZ&&(eh.isAddVal(eM)?eT[eA]=null:eh.isRemoveVal(eM)?eT[eA]=(Z(X,s).get()||[])[_]:j.warn("unrecognized full object value",o)),em.update(eg,eY),ec[s]||(ec[s]={});var eX=ec[s][_];eX||(eX=ec[s][_]={}),eX[eZ]=eM,delete o[eA]}else"reverse"===eE?(eI.range?eI.range.reverse():(doextra(eP+".autorange",!0),eI.range=[1,0]),eO.autorange?eg.calc=!0:eg.plot=!0):("dragmode"===eA&&(!1===eM&&!1!==eD||!1!==eM&&!1===eD)?eg.plot=!0:$._has("scatter-like")&&$._has("regl")&&"dragmode"===eA&&("lasso"===eM||"select"===eM)&&!("lasso"===eD||"select"===eD)?eg.plot=!0:$._has("gl2d")?eg.plot=!0:eR?em.update(eg,eR):eg.calc=!0,eS.set(eM))}}for(s in ec)eh.applyContainerArrayChanges(i,ei(X,s),ec[s],eg,ei)||(eg.plot=!0);for(var eK in ek){var eJ=(N=en.getFromId(i,eK))&&N._constraintGroup;if(eJ)for(var e$ in eg.calc=!0,eJ)ek[e$]||(en.getFromId(i,e$)._constraintShrinkable=!0)}(updateAutosize(i)||o.height||o.width)&&(eg.plot=!0);var eQ=$.shapes;for(_=0;_<eQ.length;_++)if(eQ[_].showlegend){eg.calc=!0;break}return(eg.plot||eg.calc)&&(eg.layoutReplot=!0),{flags:eg,rangesAltered:ek,undoit:eT,redoit:ev,eventData:el}}function updateAutosize(i){var o=i._fullLayout,s=o.width,_=o.height;return i.layout.autosize&&er.plotAutoSize(i,i.layout,o),o.width!==s||o.height!==_}function update(i,s,_,F){i=j.getGraphDiv(i),ep.clearPromiseQueue(i),j.isPlainObject(s)||(s={}),j.isPlainObject(_)||(_={}),Object.keys(s).length&&(i.changed=!0),Object.keys(_).length&&(i.changed=!0);var N=ep.coerceTraceIndices(i,F),Z=_restyle(i,j.extendFlat({},s),N),X=Z.flags,ee=_relayout(i,j.extendFlat({},_)),et=ee.flags;(X.calc||et.calc)&&(i.calcdata=void 0),X.clearAxisTypes&&ep.clearAxisTypes(i,N,_);var en=[];et.layoutReplot?en.push(eg.layoutReplot):X.fullReplot?en.push(o._doPlot):(en.push(er.previousPromises),axRangeSupplyDefaultsByPass(i,et,ee)||er.supplyDefaults(i),X.style&&en.push(eg.doTraceStyle),(X.colorbars||et.colorbars)&&en.push(eg.doColorBars),et.legend&&en.push(eg.doLegend),et.layoutstyle&&en.push(eg.layoutStyles),et.axrange&&addAxRangeSequence(en,ee.rangesAltered),et.ticks&&en.push(eg.doTicksRelayout),et.modebar&&en.push(eg.doModeBar),et.camera&&en.push(eg.doCamera),en.push(emitAfterPlot)),en.push(er.rehover,er.redrag,er.reselect),$.add(i,update,[i,Z.undoit,ee.undoit,Z.traces],update,[i,Z.redoit,ee.redoit,Z.traces]);var ei=j.syncOrAsync(en,i);return ei&&ei.then||(ei=Promise.resolve(i)),ei.then(function(){return i.emit("plotly_update",{data:Z.eventData,layout:ee.eventData}),i})}function guiEdit(i){return function(o){o._fullLayout._guiEditing=!0;var s=i.apply(null,arguments);return o._fullLayout._guiEditing=!1,s}}var eT=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ek=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function findUIPattern(i,o){for(var s=0;s<o.length;s++){var _=o[s],F=i.match(_.pattern);if(F){var N=F[1]||"";return{head:N,tail:i.substr(N.length+1),attr:_.attr}}}}function getNewRev(i,o){var s=Z(o,i).get();if(void 0!==s)return s;var _=i.split(".");for(_.pop();_.length>1;)if(_.pop(),void 0!==(s=Z(o,_.join(".")+".uirevision").get()))return s;return o.uirevision}function getFullTraceIndexFromUid(i,o){for(var s=0;s<o.length;s++)if(o[s]._fullInput.uid===i)return s;return -1}function getTraceIndexFromUid(i,o,s){for(var _=0;_<o.length;_++)if(o[_].uid===i)return _;return!o[s]||o[s].uid?-1:s}function valsMatch(i,o){var s=j.isPlainObject(i),_=Array.isArray(i);return s||_?(s&&j.isPlainObject(o)||_&&Array.isArray(o))&&JSON.stringify(i)===JSON.stringify(o):i===o}function applyUIRevisions(i,o,s,_){var F=_._preGUI,N=[],X={},$={};for(eu in F){if(ep=findUIPattern(eu,eT)){if(ev=ep.head,ex=ep.tail,(eh=(ed=Z(_,ef=ep.attr||ev+".uirevision").get())&&getNewRev(ef,o))&&eh===ed){if(null===(eg=F[eu])&&(eg=void 0),valsMatch(ey=(em=Z(o,eu)).get(),eg)){void 0===ey&&"autorange"===ex&&N.push(ev),em.set(undefinedToNull(Z(_,eu).get()));continue}if("autorange"===ex||"range["===ex.substr(0,6)){var ee=F[ev+".range[0]"],et=F[ev+".range[1]"],er=F[ev+".autorange"];if(er||null===er&&null===ee&&null===et){if(!(ev in X)){var en=Z(o,ev).get();X[ev]=en&&(en.autorange||!1!==en.autorange&&(!en.range||2!==en.range.length))}if(X[ev]){em.set(undefinedToNull(Z(_,eu).get()));continue}}}}}else j.warn("unrecognized GUI edit: "+eu);delete F[eu],ep&&"range["===ep.tail.substr(0,6)&&($[ep.head]=1)}for(var ei=0;ei<N.length;ei++){var eo=N[ei];if($[eo]){var es=Z(o,eo).get();es&&delete es.autorange}}var el=_._tracePreGUI;for(var ec in el){var eu,ef,ed,eh,ep,eg,em,ey,ev,ex,e_,ew=el[ec],eA=null;for(eu in ew){if(!eA){var eS=getFullTraceIndexFromUid(ec,s);if(eS<0){delete el[ec];break}var eM=getTraceIndexFromUid(ec,i,(e_=s[eS]._fullInput).index);if(eM<0){delete el[ec];break}eA=i[eM]}if(ep=findUIPattern(eu,ek)){if(ep.attr?eh=(ed=Z(_,ep.attr).get())&&getNewRev(ep.attr,o):(ed=e_.uirevision,void 0===(eh=eA.uirevision)&&(eh=o.uirevision)),eh&&eh===ed&&(null===(eg=ew[eu])&&(eg=void 0),valsMatch(ey=(em=Z(eA,eu)).get(),eg))){em.set(undefinedToNull(Z(e_,eu).get()));continue}}else j.warn("unrecognized GUI edit: "+eu+" in trace uid "+ec);delete ew[eu]}}}function react(i,s,_,F){function addFrames(){return o.addFrames(i,N)}i=j.getGraphDiv(i),ep.clearPromiseQueue(i);var N,Z,X=i._fullData,$=i._fullLayout;if(j.isPlotDiv(i)&&X&&$){if(j.isPlainObject(s)){var et=s;s=et.data,_=et.layout,F=et.config,N=et.frames}var en=!1;if(F){var ei=j.extendDeep({},i._context);i._context=void 0,setPlotContext(i,F),en=diffConfig(ei,i._context)}i.data=s||[],ep.cleanData(i.data),i.layout=_||{},ep.cleanLayout(i.layout),applyUIRevisions(i.data,i.layout,X,$),er.supplyDefaults(i,{skipUpdateCalc:!0});var eo=i._fullData,es=i._fullLayout,el=void 0===es.datarevision,ec=es.transition,eu=diffLayout(i,$,es,el,ec),ef=eu.newDataRevision,ed=diffData(i,X,eo,el,ec,ef);if(updateAutosize(i)&&(eu.layoutReplot=!0),ed.calc||eu.calc){i.calcdata=void 0;for(var eh=Object.getOwnPropertyNames(es),em=0;em<eh.length;em++){var ey=eh[em],ev=ey.substring(0,5);if("xaxis"===ev||"yaxis"===ev){var ex=es[ey]._emptyCategories;ex&&ex()}}}else er.supplyDefaultsUpdateCalc(i.calcdata,eo);var e_=[];if(N&&(i._transitionData={},er.createTransitionData(i),e_.push(addFrames)),es.transition&&!en&&(ed.anim||eu.anim))eu.ticks&&e_.push(eg.doTicksRelayout),er.doCalcdata(i),eg.doAutoRangeAndConstraints(i),e_.push(function(){return er.transitionFromReact(i,ed,eu,$)});else if(ed.fullReplot||eu.layoutReplot||en)i._fullLayout._skipDefaults=!0,e_.push(o._doPlot);else{for(var ew in eu.arrays){var eT=eu.arrays[ew];if(eT.length){var ek=ee.getComponentMethod(ew,"drawOne");if(ek!==j.noop)for(var eA=0;eA<eT.length;eA++)ek(i,eT[eA]);else{var eS=ee.getComponentMethod(ew,"draw");if(eS===j.noop)throw Error("cannot draw components: "+ew);eS(i)}}}e_.push(er.previousPromises),ed.style&&e_.push(eg.doTraceStyle),(ed.colorbars||eu.colorbars)&&e_.push(eg.doColorBars),eu.legend&&e_.push(eg.doLegend),eu.layoutstyle&&e_.push(eg.layoutStyles),eu.axrange&&addAxRangeSequence(e_),eu.ticks&&e_.push(eg.doTicksRelayout),eu.modebar&&e_.push(eg.doModeBar),eu.camera&&e_.push(eg.doCamera),e_.push(emitAfterPlot)}e_.push(er.rehover,er.redrag,er.reselect),(Z=j.syncOrAsync(e_,i))&&Z.then||(Z=Promise.resolve(i))}else Z=o.newPlot(i,s,_,F);return Z.then(function(){return i.emit("plotly_react",{data:s,layout:_}),i})}function diffData(i,o,s,_,F,N){var j,Z,X=o.length===s.length;if(!F&&!X)return{fullReplot:!0,calc:!0};var $=em.traceFlags();$.arrays={},$.nChanges=0,$.nChangesAnim=0;var ee={getValObject:function(i){var o=et.getTraceValObject(Z,i);return!Z._module.animatable&&o.anim&&(o.anim=!1),o},flags:$,immutable:_,transition:F,newDataRevision:N,gd:i},en={};for(j=0;j<o.length;j++)if(s[j]){if(Z=s[j]._fullInput,er.hasMakesDataTransform(Z)&&(Z=s[j]),en[Z.uid])continue;en[Z.uid]=1,getDiffFlags(o[j]._fullInput,Z,[],ee)}return($.calc||$.plot)&&($.fullReplot=!0),F&&$.nChanges&&$.nChangesAnim&&($.anim=$.nChanges===$.nChangesAnim&&X?"all":"some"),$}function diffLayout(i,o,s,_,F){var N=em.layoutFlags();function getLayoutValObject(i){return et.getLayoutValObject(s,i)}return N.arrays={},N.rangesAltered={},N.nChanges=0,N.nChangesAnim=0,getDiffFlags(o,s,[],{getValObject:getLayoutValObject,flags:N,immutable:_,transition:F,gd:i}),(N.plot||N.calc)&&(N.layoutReplot=!0),F&&N.nChanges&&N.nChangesAnim&&(N.anim=N.nChanges===N.nChangesAnim?"all":"some"),N}function getDiffFlags(i,o,s,_){var F=_.getValObject,N=_.flags,X=_.immutable,$=_.inArray,ee=_.arrayIndex;function changed(){var i=et.editType;if($&&-1!==i.indexOf("arraydraw")){j.pushUnique(N.arrays[$],ee);return}em.update(N,et),"none"!==i&&N.nChanges++,_.transition&&et.anim&&N.nChangesAnim++,(ex.test(en)||e_.test(en))&&(N.rangesAltered[s[0]]=1),ew.test(en)&&Z(o,"_inputDomain").set(null),"datarevision"===er&&(N.newDataRevision=1)}function valObjectCanBeDataArray(i){return"data_array"===i.valType||i.arrayOk}for(er in i){if(N.calc&&!_.transition)return;var et,er,en,ei,eo=i[er],es=o[er],el=s.concat(er);if(en=el.join("."),"_"!==er.charAt(0)&&"function"!=typeof eo&&eo!==es){if(("tick0"===er||"dtick"===er)&&"geo"!==s[0]){var ec=o.tickmode;if("auto"===ec||"array"===ec||!ec)continue}if(("range"!==er||!o.autorange)&&("zmin"!==er&&"zmax"!==er||"contourcarpet"!==o.type)&&(et=F(el))&&(!et._compareAsJSON||JSON.stringify(eo)!==JSON.stringify(es))){var eu=et.valType,ef=valObjectCanBeDataArray(et),ed=Array.isArray(eo),eh=Array.isArray(es);if(ed&&eh){var ep="_input_"+er,eg=i[ep],ey=o[ep];if(Array.isArray(eg)&&eg===ey)continue}if(void 0===es)ef&&ed?N.calc=!0:changed();else if(et._isLinkedToArray){var ev=[],eT=!1;$||(N.arrays[er]=ev);var ek=Math.min(eo.length,es.length),eA=Math.max(eo.length,es.length);if(ek!==eA){if("arraydraw"===et.editType)eT=!0;else{changed();continue}}for(ei=0;ei<ek;ei++)getDiffFlags(eo[ei],es[ei],el.concat(ei),j.extendFlat({inArray:er,arrayIndex:ei},_));if(eT)for(ei=ek;ei<eA;ei++)ev.push(ei)}else!eu&&j.isPlainObject(eo)?getDiffFlags(eo,es,el,_):ef?ed&&eh?(X&&(N.calc=!0),(X||_.newDataRevision)&&changed()):ed!==eh?N.calc=!0:changed():ed&&eh?(eo.length!==es.length||String(eo)!==String(es))&&changed():changed()}}}for(er in o)if(!(er in i||"_"===er.charAt(0)||"function"==typeof o[er])){if(valObjectCanBeDataArray(et=F(s.concat(er)))&&Array.isArray(o[er])){N.calc=!0;return}changed()}}function diffConfig(i,o){var s;for(s in i)if("_"!==s.charAt(0)){var _=i[s],F=o[s];if(_!==F){if(j.isPlainObject(_)&&j.isPlainObject(F)){if(diffConfig(_,F))return!0}else{if(!(Array.isArray(_)&&Array.isArray(F))||_.length!==F.length)return!0;for(var N=0;N<_.length;N++)if(_[N]!==F[N]&&(!(j.isPlainObject(_[N])&&j.isPlainObject(F[N]))||diffConfig(_[N],F[N])))return!0}}}}function animate(i,o,s){if(i=j.getGraphDiv(i),!j.isPlotDiv(i))throw Error("This element is not a Plotly plot: "+i+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var _=i._transitionData;_._frameQueue||(_._frameQueue=[]);var F=(s=er.supplyAnimationDefaults(s)).transition,N=s.frame;function getTransitionOpts(i){return Array.isArray(F)?i>=F.length?F[0]:F[i]:F}function getFrameOpts(i){return Array.isArray(N)?i>=N.length?N[0]:N[i]:N}function callbackOnNthTime(i,o){var s=0;return function(){if(i&&++s===o)return i()}}return void 0===_._frameWaitingCnt&&(_._frameWaitingCnt=0),new Promise(function(N,Z){function discardExistingFrames(){if(0!==_._frameQueue.length){for(;_._frameQueue.length;){var o=_._frameQueue.pop();o.onInterrupt&&o.onInterrupt()}i.emit("plotly_animationinterrupted",[])}}function queueFrames(o){if(0!==o.length){for(var F=0;F<o.length;F++){j="byname"===o[F].type?er.computeFrame(i,o[F].name):o[F].data;var j,X=getFrameOpts(F),$=getTransitionOpts(F);$.duration=Math.min($.duration,X.duration);var ee={frame:j,name:o[F].name,frameOpts:X,transitionOpts:$};F===o.length-1&&(ee.onComplete=callbackOnNthTime(N,2),ee.onInterrupt=Z),_._frameQueue.push(ee)}"immediate"===s.mode&&(_._lastFrameAt=-1/0),_._animationRaf||beginAnimationLoop()}}function stopAnimationLoop(){i.emit("plotly_animated"),window.cancelAnimationFrame(_._animationRaf),_._animationRaf=null}function nextFrame(){_._currentFrame&&_._currentFrame.onComplete&&_._currentFrame.onComplete();var o=_._currentFrame=_._frameQueue.shift();if(o){var s=o.name?o.name.toString():null;i._fullLayout._currentFrame=s,_._lastFrameAt=Date.now(),_._timeToNext=o.frameOpts.duration,er.transition(i,o.frame.data,o.frame.layout,ep.coerceTraceIndices(i,o.frame.traces),o.frameOpts,o.transitionOpts).then(function(){o.onComplete&&o.onComplete()}),i.emit("plotly_animatingframe",{name:s,frame:o.frame,animation:{frame:o.frameOpts,transition:o.transitionOpts}})}else stopAnimationLoop()}function beginAnimationLoop(){i.emit("plotly_animating"),_._lastFrameAt=-1/0,_._timeToNext=0,_._runningTransitions=0,_._currentFrame=null;var doFrame=function(){_._animationRaf=window.requestAnimationFrame(doFrame),Date.now()-_._lastFrameAt>_._timeToNext&&nextFrame()};doFrame()}var X,$,ee=0;function setTransitionConfig(i){return Array.isArray(F)?ee>=F.length?i.transitionOpts=F[ee]:i.transitionOpts=F[0]:i.transitionOpts=F,ee++,i}var et=[],en=null==o,ei=Array.isArray(o);if(!en&&!ei&&j.isPlainObject(o))et.push({type:"object",data:setTransitionConfig(j.extendFlat({},o))});else if(en||-1!==["string","number"].indexOf(typeof o))for(X=0;X<_._frames.length;X++)($=_._frames[X])&&(en||String($.group)===String(o))&&et.push({type:"byname",name:String($.name),data:setTransitionConfig({name:$.name})});else if(ei)for(X=0;X<o.length;X++){var eo=o[X];-1!==["number","string"].indexOf(typeof eo)?(eo=String(eo),et.push({type:"byname",name:eo,data:setTransitionConfig({name:eo})})):j.isPlainObject(eo)&&et.push({type:"object",data:setTransitionConfig(j.extendFlat({},eo))})}for(X=0;X<et.length;X++)if("byname"===($=et[X]).type&&!_._frameHash[$.data.name]){j.warn('animate failure: frame not found: "'+$.data.name+'"'),Z();return}-1!==["next","immediate"].indexOf(s.mode)&&discardExistingFrames(),"reverse"===s.direction&&et.reverse();var es=i._fullLayout._currentFrame;if(es&&s.fromcurrent){var el=-1;for(X=0;X<et.length;X++)if("byname"===($=et[X]).type&&$.name===es){el=X;break}if(el>0&&el<et.length-1){var ec=[];for(X=0;X<et.length;X++)$=et[X],("byname"!==et[X].type||X>el)&&ec.push($);et=ec}}et.length>0?queueFrames(et):(i.emit("plotly_animated"),N())})}function addFrames(i,o,s){if(i=j.getGraphDiv(i),null==o)return Promise.resolve();if(!j.isPlotDiv(i))throw Error("This element is not a Plotly plot: "+i+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var _,F,N,Z,X=i._transitionData._frames,ee=i._transitionData._frameHash;if(!Array.isArray(o))throw Error("addFrames failure: frameList must be an Array of frame definitions"+o);var et=X.length+2*o.length,en=[],ei={};for(_=o.length-1;_>=0;_--)if(j.isPlainObject(o[_])){var eo=o[_].name,es=(ee[eo]||ei[eo]||{}).name,el=o[_].name,ec=ee[es]||ei[es];es&&el&&"number"==typeof el&&ec&&ev<5&&(ev++,j.warn('addFrames: overwriting frame "'+(ee[es]||ei[es]).name+'" with a frame whose name of type "number" also equates to "'+es+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===ev&&j.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),ei[eo]={name:eo},en.push({frame:er.supplyFrameDefaults(o[_]),index:s&&void 0!==s[_]&&null!==s[_]?s[_]:et+_})}en.sort(function(i,o){return i.index>o.index?-1:i.index<o.index?1:0});var eu=[],ef=[],ed=X.length;for(_=en.length-1;_>=0;_--){if("number"==typeof(F=en[_].frame).name&&j.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!F.name)for(;ee[F.name="frame "+i._transitionData._counter++];);if(ee[F.name]){for(N=0;N<X.length&&(X[N]||{}).name!==F.name;N++);eu.push({type:"replace",index:N,value:F}),ef.unshift({type:"replace",index:N,value:X[N]})}else Z=Math.max(0,Math.min(en[_].index,ed)),eu.push({type:"insert",index:Z,value:F}),ef.unshift({type:"delete",index:Z}),ed++}var eh=er.modifyFrames,ep=er.modifyFrames,eg=[i,ef],em=[i,eu];return $&&$.add(i,eh,eg,ep,em),er.modifyFrames(i,eu)}function deleteFrames(i,o){if(i=j.getGraphDiv(i),!j.isPlotDiv(i))throw Error("This element is not a Plotly plot: "+i);var s,_,F=i._transitionData._frames,N=[],Z=[];if(!o)for(s=0,o=[];s<F.length;s++)o.push(s);for((o=o.slice()).sort(),s=o.length-1;s>=0;s--)_=o[s],N.push({type:"delete",index:_}),Z.unshift({type:"insert",index:_,value:F[_]});var X=er.modifyFrames,ee=er.modifyFrames,et=[i,Z],en=[i,N];return $&&$.add(i,X,et,ee,en),er.modifyFrames(i,N)}function purge(i){var o=(i=j.getGraphDiv(i))._fullLayout||{},s=i._fullData||[];return er.cleanPlot([],{},s,o),er.purge(i),X.purge(i),o._container&&o._container.remove(),delete i._context,i}function calcInverseTransform(i){var o=i._fullLayout,s=i.getBoundingClientRect();if(!j.equalDomRects(s,o._lastBBox)){var _=o._invTransform=j.inverseTransformMatrix(j.getFullTransformMatrix(i));o._invScaleX=Math.sqrt(_[0][0]*_[0][0]+_[0][1]*_[0][1]+_[0][2]*_[0][2]),o._invScaleY=Math.sqrt(_[1][0]*_[1][0]+_[1][1]*_[1][1]+_[1][2]*_[1][2]),o._lastBBox=s}}function makePlotFramework(i){var o=_.select(i),s=i._fullLayout;if(s._calcInverseTransform=calcInverseTransform,s._calcInverseTransform(i),s._container=o.selectAll(".plot-container").data([0]),s._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),s._paperdiv=s._container.selectAll(".svg-container").data([0]),s._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),s._glcontainer=s._paperdiv.selectAll(".gl-container").data([{}]),s._glcontainer.enter().append("div").classed("gl-container",!0),s._paperdiv.selectAll(".main-svg").remove(),s._paperdiv.select(".modebar-container").remove(),s._paper=s._paperdiv.insert("svg",":first-child").classed("main-svg",!0),s._toppaper=s._paperdiv.append("svg").classed("main-svg",!0),s._modebardiv=s._paperdiv.append("div"),delete s._modeBar,s._hoverpaper=s._paperdiv.append("svg").classed("main-svg",!0),!s._uid){var F={};_.selectAll("defs").each(function(){this.id&&(F[this.id.split("-")[1]]=1)}),s._uid=j.randstr(F)}s._paperdiv.selectAll(".main-svg").attr(eu.svgAttrs),s._defs=s._paper.append("defs").attr("id","defs-"+s._uid),s._clips=s._defs.append("g").classed("clips",!0),s._topdefs=s._toppaper.append("defs").attr("id","topdefs-"+s._uid),s._topclips=s._topdefs.append("g").classed("clips",!0),s._bgLayer=s._paper.append("g").classed("bglayer",!0),s._draggers=s._paper.append("g").classed("draglayer",!0);var N=s._paper.append("g").classed("layer-below",!0);s._imageLowerLayer=N.append("g").classed("imagelayer",!0),s._shapeLowerLayer=N.append("g").classed("shapelayer",!0),s._cartesianlayer=s._paper.append("g").classed("cartesianlayer",!0),s._polarlayer=s._paper.append("g").classed("polarlayer",!0),s._smithlayer=s._paper.append("g").classed("smithlayer",!0),s._ternarylayer=s._paper.append("g").classed("ternarylayer",!0),s._geolayer=s._paper.append("g").classed("geolayer",!0),s._funnelarealayer=s._paper.append("g").classed("funnelarealayer",!0),s._pielayer=s._paper.append("g").classed("pielayer",!0),s._iciclelayer=s._paper.append("g").classed("iciclelayer",!0),s._treemaplayer=s._paper.append("g").classed("treemaplayer",!0),s._sunburstlayer=s._paper.append("g").classed("sunburstlayer",!0),s._indicatorlayer=s._toppaper.append("g").classed("indicatorlayer",!0),s._glimages=s._paper.append("g").classed("glimages",!0);var Z=s._toppaper.append("g").classed("layer-above",!0);s._imageUpperLayer=Z.append("g").classed("imagelayer",!0),s._shapeUpperLayer=Z.append("g").classed("shapelayer",!0),s._selectionLayer=s._toppaper.append("g").classed("selectionlayer",!0),s._infolayer=s._toppaper.append("g").classed("infolayer",!0),s._menulayer=s._toppaper.append("g").classed("menulayer",!0),s._zoomlayer=s._toppaper.append("g").classed("zoomlayer",!0),s._hoverlayer=s._hoverpaper.append("g").classed("hoverlayer",!0),s._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),i.emit("plotly_framework")}o.animate=animate,o.addFrames=addFrames,o.deleteFrames=deleteFrames,o.addTraces=addTraces,o.deleteTraces=deleteTraces,o.extendTraces=extendTraces,o.moveTraces=moveTraces,o.prependTraces=prependTraces,o.newPlot=newPlot,o._doPlot=_doPlot,o.purge=purge,o.react=react,o.redraw=redraw,o.relayout=relayout,o.restyle=restyle,o.setPlotConfig=setPlotConfig,o.update=update,o._guiRelayout=guiEdit(relayout),o._guiRestyle=guiEdit(restyle),o._guiUpdate=guiEdit(update),o._storeDirectGUIEdit=_storeDirectGUIEdit},72075:function(i){"use strict";var o={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},s={};function crawl(i,o){for(var s in i){var _=i[s];_.valType?o[s]=_.dflt:(o[s]||(o[s]={}),crawl(_,o[s]))}}crawl(o,s),i.exports={configAttributes:o,dfltConfig:s}},86281:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=s(9012),j=s(10820),Z=s(31391),X=s(85594),$=s(72075).configAttributes,ee=s(30962),et=F.extendDeepAll,er=F.isPlainObject,en=F.isArrayOrTypedArray,ei=F.nestedProperty,eo=F.valObjectMeta,es="_isSubplotObj",el="_isLinkedToArray",ec="_deprecated",eu=[es,el,"_arrayAttrRegexps",ec];function layoutHeadAttr(i,o){var s,F,N,Z,X,$=i._basePlotModules;if($){for(s=0;s<$.length;s++){if((N=$[s]).attrRegex&&N.attrRegex.test(o)){if(N.layoutAttrOverrides)return N.layoutAttrOverrides;!X&&N.layoutAttributes&&(X=N.layoutAttributes)}var ee=N.baseLayoutAttrOverrides;if(ee&&o in ee)return ee[o]}if(X)return X}var et=i._modules;if(et){for(s=0;s<et.length;s++)if((Z=et[s].layoutAttributes)&&o in Z)return Z[o]}for(F in _.componentsRegistry){if("colorscale"===(N=_.componentsRegistry[F]).name&&0===o.indexOf("coloraxis"))return N.layoutAttributes[o];if(!N.schema&&o===N.name)return N.layoutAttributes}return o in j&&j[o]}function recurseIntoValObject(i,o,s){if(!i)return!1;if(i._isLinkedToArray){if(isIndex(o[s]))s++;else if(s<o.length)return!1}for(;s<o.length;s++){var _=i[o[s]];if(er(_))i=_;else break;if(s===o.length-1)break;if(i._isLinkedToArray){if(!isIndex(o[++s]))return!1}else if("info_array"===i.valType){var F=o[++s];if(!isIndex(F))return!1;var N=i.items;if(Array.isArray(N)){if(F>=N.length)return!1;if(2===i.dimensions){if(s++,o.length===s)return i;var j=o[s];if(!isIndex(j))return!1;i=N[F][j]}else i=N[F]}else i=N}}return i}function isIndex(i){return i===Math.round(i)&&i>=0}function getTraceAttributes(i){F=(s=_.modules[i]._module).basePlotModule;var s,F,j={};j.type=null;var Z=et({},N),X=et({},s.attributes);o.crawl(X,function(i,o,s,_,F){ei(Z,F).set(void 0),void 0===i&&ei(X,F).set(void 0)}),et(j,Z),_.traceIs(i,"noOpacity")&&delete j.opacity,_.traceIs(i,"showLegend")||(delete j.showlegend,delete j.legendgroup),_.traceIs(i,"noHover")&&(delete j.hoverinfo,delete j.hoverlabel),s.selectPoints||delete j.selectedpoints,et(j,X),F.attributes&&et(j,F.attributes),j.type=i;var $={meta:s.meta||{},categories:s.categories||{},animatable:!!s.animatable,type:i,attributes:formatAttributes(j)};if(s.layoutAttributes){var ee={};et(ee,s.layoutAttributes),$.layoutAttributes=formatAttributes(ee)}return s.animatable||o.crawl($,function(i){o.isValObject(i)&&"anim"in i&&delete i.anim}),$}function getLayoutAttributes(){var i,o,s={};for(i in et(s,j),_.subplotsRegistry)if((o=_.subplotsRegistry[i]).layoutAttributes){if(Array.isArray(o.attr))for(var F=0;F<o.attr.length;F++)handleBasePlotModule(s,o,o.attr[F]);else{var N="subplot"===o.attr?o.name:o.attr;handleBasePlotModule(s,o,N)}}for(i in _.componentsRegistry){var Z=(o=_.componentsRegistry[i]).schema;if(Z&&(Z.subplots||Z.layout)){var X=Z.subplots;if(X&&X.xaxis&&!X.yaxis)for(var $ in X.xaxis)delete s.yaxis[$];delete s.xaxis.shift,delete s.xaxis.autoshift}else"colorscale"===o.name?et(s,o.layoutAttributes):o.layoutAttributes&&insertAttrs(s,o.layoutAttributes,o.name)}return{layoutAttributes:formatAttributes(s)}}function getTransformAttributes(i){var o=et({},_.transformsRegistry[i].attributes);return Object.keys(_.componentsRegistry).forEach(function(s){var F=_.componentsRegistry[s];F.schema&&F.schema.transforms&&F.schema.transforms[i]&&Object.keys(F.schema.transforms[i]).forEach(function(s){insertAttrs(o,F.schema.transforms[i][s],s)})}),{attributes:formatAttributes(o)}}function getFramesAttributes(){var i={frames:et({},Z)};return formatAttributes(i),i.frames}function formatAttributes(i){return mergeValTypeAndRole(i),formatArrayContainers(i),stringify(i),i}function mergeValTypeAndRole(i){function makeSrcAttr(i){return{valType:"string",editType:"none"}}function callback(i,s,_){o.isValObject(i)?(!0===i.arrayOk||"data_array"===i.valType)&&(_[s+"src"]=makeSrcAttr(s)):er(i)&&(i.role="object")}o.crawl(i,callback)}function formatArrayContainers(i){function callback(i,o,s){if(i){var _=i[el];_&&(delete i[el],s[o]={items:{}},s[o].items[_]=i,s[o].role="object")}}o.crawl(i,callback)}function stringify(i){function walk(i){for(var o in i)if(er(i[o]))walk(i[o]);else if(Array.isArray(i[o]))for(var s=0;s<i[o].length;s++)walk(i[o][s]);else i[o]instanceof RegExp&&(i[o]=i[o].toString())}walk(i)}function handleBasePlotModule(i,o,s){var _=ei(i,s),F=et({},o.layoutAttributes);F[es]=!0,_.set(F)}function insertAttrs(i,o,s){var _=ei(i,s);_.set(et(_.get()||{},o))}o.IS_SUBPLOT_OBJ=es,o.IS_LINKED_TO_ARRAY=el,o.DEPRECATED=ec,o.UNDERSCORE_ATTRS=eu,o.get=function(){var i={};_.allTypes.forEach(function(o){i[o]=getTraceAttributes(o)});var o={};return Object.keys(_.transformsRegistry).forEach(function(i){o[i]=getTransformAttributes(i)}),{defs:{valObjects:eo,metaKeys:eu.concat(["description","role","editType","impliedEdits"]),editType:{traces:ee.traces,layout:ee.layout},impliedEdits:{}},traces:i,layout:getLayoutAttributes(),transforms:o,frames:getFramesAttributes(),animation:formatAttributes(X),config:formatAttributes($)}},o.crawl=function(i,s,_,F){var N=_||0;F=F||"",Object.keys(i).forEach(function(_){var j=i[_];if(-1===eu.indexOf(_)){var Z=(F?F+".":"")+_;s(j,_,i,N,Z),!o.isValObject(j)&&er(j)&&"impliedEdits"!==_&&o.crawl(j,s,N+1,Z)}})},o.isValObject=function(i){return i&&void 0!==i.valType},o.findArrayAttributes=function(i){var s,_,F=[],j=[],Z=[];function callback(i,o,_,F){j=j.slice(0,F).concat([o]),Z=Z.slice(0,F).concat([i&&i._isLinkedToArray]),i&&("data_array"===i.valType||!0===i.arrayOk)&&!("colorbar"===j[F-1]&&("ticktext"===o||"tickvals"===o))&&crawlIntoTrace(s,0,"")}function crawlIntoTrace(i,o,s){var N=i[j[o]],X=s+j[o];if(o===j.length-1)en(N)&&F.push(_+X);else if(Z[o]){if(Array.isArray(N))for(var $=0;$<N.length;$++)er(N[$])&&crawlIntoTrace(N[$],o+1,X+"["+$+"].")}else er(N)&&crawlIntoTrace(N,o+1,X+".")}s=i,_="",o.crawl(N,callback),i._module&&i._module.attributes&&o.crawl(i._module.attributes,callback);var X=i.transforms;if(X)for(var $=0;$<X.length;$++){var ee=X[$],et=ee._module;et&&(_="transforms["+$+"].",s=ee,o.crawl(et.attributes,callback))}return F},o.getTraceValObject=function(i,o){var s,F,j=o[0],Z=1;if("transforms"===j){if(1===o.length)return N.transforms;var X=i.transforms;if(!Array.isArray(X)||!X.length)return!1;var $=o[1];if(!isIndex($)||$>=X.length)return!1;F=(s=(_.transformsRegistry[X[$].type]||{}).attributes)&&s[o[2]],Z=3}else{var ee=i._module;if(ee||(ee=(_.modules[i.type||N.type.dflt]||{})._module),!ee)return!1;if(!(F=(s=ee.attributes)&&s[j])){var et=ee.basePlotModule;et&&et.attributes&&(F=et.attributes[j])}F||(F=N[j])}return recurseIntoValObject(F,o,Z)},o.getLayoutValObject=function(i,o){return recurseIntoValObject(layoutHeadAttr(i,o[0]),o,1)}},44467:function(i,o,s){"use strict";var _=s(71828),F=s(9012),N="templateitemname",j={name:{valType:"string",editType:"none"}};function validItemName(i){return i&&"string"==typeof i}function arrayDefaultKey(i){var o=i.length-1;return"s"!==i.charAt(o)&&_.warn("bad argument to arrayDefaultKey: "+i),i.substr(0,i.length-1)+"defaults"}j[N]={valType:"string",editType:"calc"},o.templatedArray=function(i,o){return o._isLinkedToArray=i,o.name=j.name,o[N]=j[N],o},o.traceTemplater=function(i){var o,s,N={};for(o in i)Array.isArray(s=i[o])&&s.length&&(N[o]=0);return{newTrace:function(j){var Z={type:o=_.coerce(j,{},F,"type"),_template:null};if(o in N){s=i[o];var X=N[o]%s.length;N[o]++,Z._template=s[X]}return Z}}},o.newContainer=function(i,o,s){var F=i._template,N=F&&(F[o]||s&&F[s]);return _.isPlainObject(N)||(N=null),i[o]={_template:N}},o.arrayTemplater=function(i,o,s){var _=i._template,F=_&&_[arrayDefaultKey(o)],j=_&&_[o];Array.isArray(j)&&j.length||(j=[]);var Z={};return{newItem:function(i){var o={name:i.name,_input:i},_=o[N]=i[N];if(!validItemName(_))return o._template=F,o;for(var X=0;X<j.length;X++){var $=j[X];if($.name===_)return Z[_]=1,o._template=$,o}return o[s]=i[s]||!1,o._template=!1,o},defaultItems:function(){for(var i=[],o=0;o<j.length;o++){var s=j[o],_=s.name;if(validItemName(_)&&!Z[_]){var F={_template:s,name:_,_input:{_templateitemname:_}};F[N]=s[N],i.push(F),Z[_]=1}}return i}}},o.arrayDefaultKey=arrayDefaultKey,o.arrayEditor=function(i,o,s){var F,j=(_.nestedProperty(i,o).get()||[]).length,Z=s._index,X=Z>=j&&(s._input||{})._templateitemname;X&&(Z=j);var $=o+"["+Z+"]";function resetUpdate(){F={},X&&(F[$]={},F[$][N]=X)}function modifyItem(i,o){X?_.nestedProperty(F[$],i).set(o):F[$+"."+i]=o}function getUpdateObj(){var i=F;return resetUpdate(),i}function applyUpdate(o,s){o&&modifyItem(o,s);var F=getUpdateObj();for(var N in F)_.nestedProperty(i,N).set(F[N])}return resetUpdate(),{modifyBase:function(i,o){F[i]=o},modifyItem:modifyItem,getUpdateObj:getUpdateObj,applyUpdate:applyUpdate}}},61549:function(i,o,s){"use strict";var _=s(39898),F=s(73972),N=s(74875),j=s(71828),Z=s(63893),X=s(33306),$=s(7901),ee=s(91424),et=s(92998),er=s(64168),en=s(89298),ei=s(18783),eo=s(99082),es=eo.enforce,el=eo.clean,ec=s(71739).doAutoRange,eu="start";function overlappingDomain(i,o,s){for(var _=0;_<s.length;_++){var F=s[_][0],N=s[_][1];if(!(F[0]>=i[1])&&!(F[1]<=i[0])&&N[0]<o[1]&&N[1]>o[0])return!0}return!1}function lsInner(i){var s,F,Z,X,et,eo,es,el,ec,eu,ef,ed,eh,ep=i._fullLayout,eg=ep._size,em=eg.p,ey=en.list(i,"",!0);if(ep._paperdiv.style({width:i._context.responsive&&ep.autosize&&!i._context._hasZeroWidth&&!i.layout.width?"100%":ep.width+"px",height:i._context.responsive&&ep.autosize&&!i._context._hasZeroHeight&&!i.layout.height?"100%":ep.height+"px"}).selectAll(".main-svg").call(ee.setSize,ep.width,ep.height),i._context.setBackground(i,ep.paper_bgcolor),o.drawMainTitle(i),er.manage(i),!ep._has("cartesian"))return N.previousPromises(i);function getLinePosition(i,o,s){var _=i._lw/2;return"x"===i._id.charAt(0)?o?"top"===s?o._offset-em-_:o._offset+o._length+em+_:eg.t+eg.h*(1-(i.position||0))+_%1:o?"right"===s?o._offset+o._length+em+_:o._offset-em-_:eg.l+eg.w*(i.position||0)+_%1}for(eL=0;eL<ey.length;eL++){var ev=(eO=ey[eL])._anchorAxis;eO._linepositions={},eO._lw=ee.crispRound(i,eO.linewidth,1),eO._mainLinePosition=getLinePosition(eO,ev,eO.side),eO._mainMirrorPosition=eO.mirror&&ev?getLinePosition(eO,ev,ei.OPPOSITE_SIDE[eO.side]):null}var ex=[],e_=[],ew=[],eT=1===$.opacity(ep.paper_bgcolor)&&1===$.opacity(ep.plot_bgcolor)&&ep.paper_bgcolor===ep.plot_bgcolor;for(eP in ep._plots)if((eI=ep._plots[eP]).mainplot)eI.bg&&eI.bg.remove(),eI.bg=void 0;else{var ek=eI.xaxis.domain,eA=eI.yaxis.domain,eS=eI.plotgroup;if(overlappingDomain(ek,eA,ew)){var eM=eS.node(),eC=eI.bg=j.ensureSingle(eS,"rect","bg");eM.insertBefore(eC.node(),eM.childNodes[0]),e_.push(eP)}else eS.select("rect.bg").remove(),ew.push([ek,eA]),eT||(ex.push(eP),e_.push(eP))}var eE=ep._bgLayer.selectAll(".bg").data(ex);for(eE.enter().append("rect").classed("bg",!0),eE.exit().remove(),eE.each(function(i){ep._plots[i].bg=_.select(this)}),eL=0;eL<e_.length;eL++)eD=(eI=ep._plots[e_[eL]]).xaxis,eR=eI.yaxis,eI.bg&&void 0!==eD._offset&&void 0!==eR._offset&&eI.bg.call(ee.setRect,eD._offset-em,eR._offset-em,eD._length+2*em,eR._length+2*em).call($.fill,ep.plot_bgcolor).style("stroke-width",0);if(!ep._hasOnlyLargeSploms)for(eP in ep._plots){eD=(eI=ep._plots[eP]).xaxis,eR=eI.yaxis;var eL,eP,eI,eO,eD,eR,eB,eF,ez=eI.clipId="clip"+ep._uid+eP+"plot",eN=j.ensureSingleById(ep._clips,"clipPath",ez,function(i){i.classed("plotclip",!0).append("rect")});eI.clipRect=eN.select("rect").attr({width:eD._length,height:eR._length}),ee.setTranslate(eI.plot,eD._offset,eR._offset),eI._hasClipOnAxisFalse?(eB=null,eF=ez):(eB=ez,eF=null),ee.setClipUrl(eI.plot,eB,i),eI.layerClipId=eF}function xLinePath(i){return"M"+s+","+i+"H"+F}function xLinePathFree(i){return"M"+eD._offset+","+i+"h"+eD._length}function yLinePath(i){return"M"+i+","+el+"V"+es}function yLinePathFree(i){return void 0!==eR._shift&&(i+=eR._shift),"M"+i+","+eR._offset+"v"+eR._length}function mainPath(i,o,s){if(!i.showline||eP!==i._mainSubplot)return"";if(!i._anchorAxis)return s(i._mainLinePosition);var _=o(i._mainLinePosition);return i.mirror&&(_+=o(i._mainMirrorPosition)),_}for(eP in ep._plots){eD=(eI=ep._plots[eP]).xaxis,eR=eI.yaxis;var ej="M0,0";shouldShowLinesOrTicks(eD,eP)&&(et=findCounterAxisLineWidth(eD,"left",eR,ey),s=eD._offset-(et?em+et:0),eo=findCounterAxisLineWidth(eD,"right",eR,ey),F=eD._offset+eD._length+(eo?em+eo:0),Z=getLinePosition(eD,eR,"bottom"),X=getLinePosition(eD,eR,"top"),(eh=!eD._anchorAxis||eP!==eD._mainSubplot)&&("allticks"===eD.mirror||"all"===eD.mirror)&&(eD._linepositions[eP]=[Z,X]),ej=mainPath(eD,xLinePath,xLinePathFree),eh&&eD.showline&&("all"===eD.mirror||"allticks"===eD.mirror)&&(ej+=xLinePath(Z)+xLinePath(X)),eI.xlines.style("stroke-width",eD._lw+"px").call($.stroke,eD.showline?eD.linecolor:"rgba(0,0,0,0)")),eI.xlines.attr("d",ej);var eV="M0,0";shouldShowLinesOrTicks(eR,eP)&&(ef=findCounterAxisLineWidth(eR,"bottom",eD,ey),es=eR._offset+eR._length+(ef?em:0),ed=findCounterAxisLineWidth(eR,"top",eD,ey),el=eR._offset-(ed?em:0),ec=getLinePosition(eR,eD,"left"),eu=getLinePosition(eR,eD,"right"),(eh=!eR._anchorAxis||eP!==eR._mainSubplot)&&("allticks"===eR.mirror||"all"===eR.mirror)&&(eR._linepositions[eP]=[ec,eu]),eV=mainPath(eR,yLinePath,yLinePathFree),eh&&eR.showline&&("all"===eR.mirror||"allticks"===eR.mirror)&&(eV+=yLinePath(ec)+yLinePath(eu)),eI.ylines.style("stroke-width",eR._lw+"px").call($.stroke,eR.showline?eR.linecolor:"rgba(0,0,0,0)")),eI.ylines.attr("d",eV)}return en.makeClipPaths(i),N.previousPromises(i)}function shouldShowLinesOrTicks(i,o){return(i.ticks||i.showline)&&(o===i._mainSubplot||"all"===i.mirror||"allticks"===i.mirror)}function shouldShowLineThisSide(i,o,s){if(!s.showline||!s._lw)return!1;if("all"===s.mirror||"allticks"===s.mirror)return!0;var _=s._anchorAxis;if(!_)return!1;var F=ei.FROM_BL[o];return s.side===o?_.domain[F]===i.domain[F]:s.mirror&&_.domain[1-F]===i.domain[1-F]}function findCounterAxisLineWidth(i,o,s,_){if(shouldShowLineThisSide(i,o,s))return s._lw;for(var F=0;F<_.length;F++){var N=_[F];if(N._mainAxis===s._mainAxis&&shouldShowLineThisSide(i,o,N))return N._lw}return 0}function isOutsideContainer(i,o,s,_,F){var N="paper"===o.yref?i._fullLayout._size.h:i._fullLayout.height,Z=j.isTopAnchor(o)?_:_-F;return!(j.isTopAnchor(o)&&"t"===s||j.isBottomAnchor(o)&&"b"===s)&&("b"===s?N-Z:Z)<F}function containerPushVal(i,o,s,_,F){var N=0;return"middle"===s&&(N+=F/2),"t"===i?("top"===s&&(N+=F),N+=_-o*_):("bottom"===s&&(N+=F),N+=o*_),N}function needsMarginPush(i,o,s){var _=o.y,F=o.yanchor,N=_>.5?"t":"b",j=i._fullLayout.margin[N],Z=0;return("paper"===o.yref?Z=s+o.pad.t+o.pad.b:"container"===o.yref&&(Z=containerPushVal(N,_,F,i._fullLayout.height,s)+o.pad.t+o.pad.b),Z>j)?Z:0}function applyTitleAutoMargin(i,o,s,_){var F="title.automargin",j=i._fullLayout.title,Z=j.y>.5?"t":"b",X={x:j.x,y:j.y,t:0,b:0},$={};"paper"===j.yref&&isOutsideContainer(i,j,Z,o,_)?X[Z]=s:"container"===j.yref&&($[Z]=s,i._fullLayout._reservedMargin[F]=$),N.allowAutoMargin(i,F),N.autoMargin(i,F,X)}function getMainTitleX(i,o){var s=i.title,_=i._size,F=0;return(o===eu?F=s.pad.l:"end"===o&&(F=-s.pad.r),"paper"===s.xref)?_.l+_.w*s.x+F:i.width*s.x+F}function getMainTitleY(i,o){var s=i.title,_=i._size,F=0;return("0em"!==o&&o?o===ei.CAP_SHIFT+"em"&&(F=s.pad.t):F=-s.pad.b,"auto"===s.y)?_.t/2:"paper"===s.yref?_.t+_.h-_.h*s.y+F:i.height-i.height*s.y+F}function getMainTitleDyAdj(i){return"top"===i?ei.CAP_SHIFT+.3+"em":"bottom"===i?"-0.3em":ei.MID_SHIFT+"em"}function getMainTitleTextAnchor(i){var o=i.title,s="middle";return j.isRightAnchor(o)?s="end":j.isLeftAnchor(o)&&(s=eu),s}function getMainTitleDy(i){var o=i.title,s="0em";return j.isTopAnchor(o)?s=ei.CAP_SHIFT+"em":j.isMiddleAnchor(o)&&(s=ei.MID_SHIFT+"em"),s}o.layoutStyles=function(i){return j.syncOrAsync([N.doAutoMargin,lsInner],i)},o.drawMainTitle=function(i){var o=i._fullLayout.title,s=i._fullLayout,F=getMainTitleTextAnchor(s),N=getMainTitleDy(s),j=getMainTitleY(s,N),X=getMainTitleX(s,F);if(et.draw(i,"gtitle",{propContainer:s,propName:"title.text",placeholder:s._dfltTitle.plot,attributes:{x:X,y:j,"text-anchor":F,dy:N}}),o.text&&o.automargin){var $=_.selectAll(".gtitle"),er=ee.bBox($.node()).height,en=needsMarginPush(i,o,er);if(en>0){applyTitleAutoMargin(i,j,en,er),$.attr({x:X,y:j,"text-anchor":F,dy:getMainTitleDyAdj(o.yanchor)}).call(Z.positionText,X,j);var eo=(o.text.match(Z.BR_TAG_ALL)||[]).length;if(eo){var es=ei.LINE_SPACING*eo+ei.MID_SHIFT;0===o.y&&(es=-es),$.selectAll(".line").each(function(){var i=+this.getAttribute("dy").slice(0,-2)-es+"em";this.setAttribute("dy",i)})}}}},o.doTraceStyle=function(i){var s,_=i.calcdata,j=[];for(s=0;s<_.length;s++){var Z=_[s],$=Z[0]||{},ee=$.trace||{},et=ee._module||{},er=et.arraysToCalcdata;er&&er(Z,ee);var en=et.editStyle;en&&j.push({fn:en,cd0:$})}if(j.length){for(s=0;s<j.length;s++){var ei=j[s];ei.fn(i,ei.cd0)}X(i),o.redrawReglTraces(i)}return N.style(i),F.getComponentMethod("legend","draw")(i),N.previousPromises(i)},o.doColorBars=function(i){return F.getComponentMethod("colorbar","draw")(i),N.previousPromises(i)},o.layoutReplot=function(i){var o=i.layout;return i.layout=void 0,F.call("_doPlot",i,"",o)},o.doLegend=function(i){return F.getComponentMethod("legend","draw")(i),N.previousPromises(i)},o.doTicksRelayout=function(i){return en.draw(i,"redraw"),i._fullLayout._hasOnlyLargeSploms&&(F.subplotsRegistry.splom.updateGrid(i),X(i),o.redrawReglTraces(i)),o.drawMainTitle(i),N.previousPromises(i)},o.doModeBar=function(i){var o=i._fullLayout;er.manage(i);for(var s=0;s<o._basePlotModules.length;s++){var _=o._basePlotModules[s].updateFx;_&&_(i)}return N.previousPromises(i)},o.doCamera=function(i){for(var o=i._fullLayout,s=o._subplots.gl3d,_=0;_<s.length;_++){var F=o[s[_]];F._scene.setViewport(F)}},o.drawData=function(i){var s=i._fullLayout;X(i);for(var _=s._basePlotModules,j=0;j<_.length;j++)_[j].plot(i);return o.redrawReglTraces(i),N.style(i),F.getComponentMethod("selections","draw")(i),F.getComponentMethod("shapes","draw")(i),F.getComponentMethod("annotations","draw")(i),F.getComponentMethod("images","draw")(i),s._replotting=!1,N.previousPromises(i)},o.redrawReglTraces=function(i){var o=i._fullLayout;if(o._has("regl")){var s,_,F=i._fullData,N=[],Z=[];for(o._hasOnlyLargeSploms&&o._splomGrid.draw(),s=0;s<F.length;s++){var X=F[s];!0===X.visible&&0!==X._length&&("splom"===X.type?o._splomScenes[X.uid].draw():"scattergl"===X.type?j.pushUnique(N,X.xaxis+X.yaxis):"scatterpolargl"===X.type&&j.pushUnique(Z,X.subplot))}for(s=0;s<N.length;s++)(_=o._plots[N[s]])._scene&&_._scene.draw();for(s=0;s<Z.length;s++)(_=o[Z[s]]._subplot)._scene&&_._scene.draw()}},o.doAutoRangeAndConstraints=function(i){for(var o,s=en.list(i,"",!0),_={},F=0;F<s.length;F++)if(!_[(o=s[F])._id]){_[o._id]=1,el(i,o),ec(i,o);var N=o._matchGroup;if(N)for(var j in N){var Z=en.getFromId(i,j);ec(i,Z,o.range),_[j]=1}}es(i)},o.finalDraw=function(i){F.getComponentMethod("rangeslider","draw")(i),F.getComponentMethod("rangeselector","draw")(i)},o.drawMarginPushers=function(i){F.getComponentMethod("legend","draw")(i),F.getComponentMethod("rangeselector","draw")(i),F.getComponentMethod("sliders","draw")(i),F.getComponentMethod("updatemenus","draw")(i),F.getComponentMethod("colorbar","draw")(i)}},96318:function(i,o,s){"use strict";var _=s(71828),F=_.isPlainObject,N=s(86281),j=s(74875),Z=s(9012),X=s(44467),$=s(72075).dfltConfig;function mergeTemplates(i,o){var s,N,j=Object.keys(i=_.extendDeep({},i)).sort();function mergeOne(o,s,_){if(F(s)&&F(o))mergeTemplates(o,s);else if(Array.isArray(s)&&Array.isArray(o)){var j=X.arrayTemplater({_template:i},_);for(N=0;N<s.length;N++){var Z=s[N],$=j.newItem(Z)._template;$&&mergeTemplates($,Z)}var ee=j.defaultItems();for(N=0;N<ee.length;N++)s.push(ee[N]._template);for(N=0;N<s.length;N++)delete s[N].templateitemname}}for(s=0;s<j.length;s++){var Z=j[s],$=i[Z];if(Z in o?mergeOne($,o[Z],Z):o[Z]=$,getBaseKey(Z)===Z)for(var ee in o){var et=getBaseKey(ee);ee===et||et!==Z||ee in i||mergeOne($,o[ee],Z)}}}function getBaseKey(i){return i.replace(/[0-9]+$/,"")}function walkStyleKeys(i,o,s,N,j){var Z=j&&s(j);for(var $ in i){var ee=i[$],et=getNextPath(i,$,N),er=getNextPath(i,$,j),en=s(er);if(!en){var ei=getBaseKey($);ei!==$&&(en=s(er=getNextPath(i,ei,j)))}if(!Z||Z!==en){if(!en||en._noTemplating||"data_array"===en.valType||en.arrayOk&&Array.isArray(ee))continue;if(!en.valType&&F(ee))walkStyleKeys(ee,o,s,et,er);else if(en._isLinkedToArray&&Array.isArray(ee))for(var eo=!1,es=0,el={},ec=0;ec<ee.length;ec++){var eu=ee[ec];if(F(eu)){var ef=eu.name;if(ef)el[ef]||(walkStyleKeys(eu,o,s,getNextPath(ee,es,et),getNextPath(ee,es,er)),es++,el[ef]=1);else if(!eo){var ed=getNextPath(i,X.arrayDefaultKey($),N),eh=getNextPath(ee,es,et);walkStyleKeys(eu,o,s,eh,getNextPath(ee,es,er));var ep=_.nestedProperty(o,eh);_.nestedProperty(o,ed).set(ep.get()),ep.set(null),eo=!0}}}else _.nestedProperty(o,et).set(ee)}}}function getLayoutInfo(i,o){return N.getLayoutValObject(i,_.nestedProperty({},o).parts)}function getTraceInfo(i,o){return N.getTraceValObject(i,_.nestedProperty({},o).parts)}function getNextPath(i,o,s){return s?Array.isArray(i)?s+"["+o+"]":s+"."+o:o}function hasPlainObject(i){for(var o=0;o<i.length;o++)if(F(i[o]))return!0}function format(i){var o;switch(i.code){case"data":o="The template has no key data.";break;case"layout":o="The template has no key layout.";break;case"missing":o=i.path?"There are no templates for item "+i.path+" with name "+i.templateitemname:"There are no templates for trace "+i.index+", of type "+i.traceType+".";break;case"unused":o=i.path?"The template item at "+i.path+" was not used in constructing the plot.":i.dataCount?"Some of the templates of type "+i.traceType+" were not used. The template has "+i.templateCount+" traces, the data only has "+i.dataCount+" of this type.":"The template has "+i.templateCount+" traces of type "+i.traceType+" but there are none in the data.";break;case"reused":o="Some of the templates of type "+i.traceType+" were used more than once. The template has "+i.templateCount+" traces, the data has "+i.dataCount+" of this type."}return i.msg=o,i}o.makeTemplate=function(i){i=_.isPlainObject(i)?i:_.getGraphDiv(i),i=_.extendDeep({_context:$},{data:i.data,layout:i.layout}),j.supplyDefaults(i);var o=i.data||[],s=i.layout||{};s._basePlotModules=i._fullLayout._basePlotModules,s._modules=i._fullLayout._modules;var N={data:{},layout:{}};o.forEach(function(i){var o={};walkStyleKeys(i,o,getTraceInfo.bind(null,i));var s=_.coerce(i,{},Z,"type"),F=N.data[s];F||(F=N.data[s]=[]),F.push(o)}),walkStyleKeys(s,N.layout,getLayoutInfo.bind(null,s)),delete N.layout.template;var X=s.template;if(F(X)){var ee,et,er,en,ei,eo,es=X.layout;F(es)&&mergeTemplates(es,N.layout);var el=X.data;if(F(el)){for(et in N.data)if(Array.isArray(er=el[et])){for(ee=0,eo=(ei=N.data[et]).length,en=er.length;ee<eo;ee++)mergeTemplates(er[ee%en],ei[ee]);for(ee=eo;ee<en;ee++)ei.push(_.extendDeep({},er[ee]))}for(et in el)et in N.data||(N.data[et]=_.extendDeep([],el[et]))}}return N},o.validateTemplate=function(i,o){var s=_.extendDeep({},{_context:$,data:i.data,layout:i.layout}),N=s.layout||{};F(o)||(o=N.template||{});var Z=o.layout,X=o.data,ee=[];s.layout=N,s.layout.template=o,j.supplyDefaults(s);var et=s._fullLayout,er=s._fullData,en={};function crawlLayoutForContainers(i,o){for(var s in i)if("_"!==s.charAt(0)&&F(i[s])){var _,N=getBaseKey(s),j=[];for(_=0;_<o.length;_++)j.push(getNextPath(i,s,o[_])),N!==s&&j.push(getNextPath(i,N,o[_]));for(_=0;_<j.length;_++)en[j[_]]=1;crawlLayoutForContainers(i[s],j)}}function crawlLayoutTemplateForContainers(i,o){for(var s in i)if(-1===s.indexOf("defaults")&&F(i[s])){var _=getNextPath(i,s,o);en[_]?crawlLayoutTemplateForContainers(i[s],_):ee.push({code:"unused",path:_})}}if(F(Z)?(crawlLayoutForContainers(et,["layout"]),crawlLayoutTemplateForContainers(Z,"layout")):ee.push({code:"layout"}),F(X)){for(var ei,eo={},es=0;es<er.length;es++){var el=er[es];eo[ei=el.type]=(eo[ei]||0)+1,el._fullInput._template||ee.push({code:"missing",index:el._fullInput.index,traceType:ei})}for(ei in X){var ec=X[ei].length,eu=eo[ei]||0;ec>eu?ee.push({code:"unused",traceType:ei,templateCount:ec,dataCount:eu}):eu>ec&&ee.push({code:"reused",traceType:ei,templateCount:ec,dataCount:eu})}}else ee.push({code:"data"});function crawlForMissingTemplates(i,o){for(var s in i)if("_"!==s.charAt(0)){var _=i[s],N=getNextPath(i,s,o);F(_)?(Array.isArray(i)&&!1===_._template&&_.templateitemname&&ee.push({code:"missing",path:N,templateitemname:_.templateitemname}),crawlForMissingTemplates(_,N)):Array.isArray(_)&&hasPlainObject(_)&&crawlForMissingTemplates(_,N)}}if(crawlForMissingTemplates({data:er,layout:et},""),ee.length)return ee.map(format)}},403:function(i,o,s){"use strict";var _=s(92770),F=s(72391),N=s(74875),j=s(71828),Z=s(25095),X=s(5900),$=s(70942),ee=s(11506).version,et={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function toImage(i,o){function isImpliedOrValid(i){return!(i in o)||j.validate(o[i],et[i])}if(o=o||{},j.isPlainObject(i)?(s=i.data||[],er=i.layout||{},en=i.config||{},ei={}):(i=j.getGraphDiv(i),s=j.extendDeep([],i.data),er=j.extendDeep({},i.layout),en=i._context,ei=i._fullLayout||{}),!isImpliedOrValid("width")&&null!==o.width||!isImpliedOrValid("height")&&null!==o.height)throw Error("Height and width should be pixel values.");if(!isImpliedOrValid("format"))throw Error("Export format is not "+j.join2(et.format.values,", "," or ")+".");var s,er,en,ei,eo={};function coerce(i,s){return j.coerce(o,eo,et,i,s)}var es=coerce("format"),el=coerce("width"),ec=coerce("height"),eu=coerce("scale"),ef=coerce("setBackground"),ed=coerce("imageDataOnly"),eh=document.createElement("div");eh.style.position="absolute",eh.style.left="-5000px",document.body.appendChild(eh);var ep=j.extendFlat({},er);el?ep.width=el:null===o.width&&_(ei.width)&&(ep.width=ei.width),ec?ep.height=ec:null===o.height&&_(ei.height)&&(ep.height=ei.height);var eg=j.extendFlat({},en,{_exportedPlot:!0,staticPlot:!0,setBackground:ef}),em=Z.getRedrawFunc(eh);function wait(){return new Promise(function(i){setTimeout(i,Z.getDelay(eh._fullLayout))})}function convert(){return new Promise(function(i,o){var s=X(eh,es,eu),_=eh._fullLayout.width,et=eh._fullLayout.height;function cleanup(){F.purge(eh),document.body.removeChild(eh)}if("full-json"===es){var er=N.graphJson(eh,!1,"keepdata","object",!0,!0);return i((er.version=ee,er=JSON.stringify(er),cleanup(),ed)?er:Z.encodeJSON(er))}if(cleanup(),"svg"===es)return i(ed?s:Z.encodeSVG(s));var en=document.createElement("canvas");en.id=j.randstr(),$({format:es,width:_,height:et,scale:eu,canvas:en,svg:s,promise:!0}).then(i).catch(o)})}function urlToImageData(i){return ed?i.replace(Z.IMAGE_URL_PREFIX,""):i}return new Promise(function(i,o){F.newPlot(eh,s,ep,eg).then(em).then(wait).then(convert).then(function(o){i(urlToImageData(o))}).catch(function(i){o(i)})})}i.exports=toImage},84936:function(i,o,s){"use strict";var _=s(71828),F=s(74875),N=s(86281),j=s(72075).dfltConfig,Z=_.isPlainObject,X=Array.isArray,$=_.isArrayOrTypedArray;function crawl(i,o,s,F,N,j){j=j||[];for(var ee=Object.keys(i),et=0;et<ee.length;et++){var er=ee[et];if("transforms"!==er){var en=j.slice();en.push(er);var ei=i[er],eo=o[er],es=getNestedSchema(s,er),el=(es||{}).valType,ec="info_array"===el,eu="colorscale"===el,ef=(es||{}).items;if(isInSchema(s,er)){if(Z(ei)&&Z(eo)&&"any"!==el)crawl(ei,eo,es,F,N,en);else if(ec&&X(ei)){ei.length>eo.length&&F.push(format("unused",N,en.concat(eo.length)));var ed,eh,ep,eg,em,ey=eo.length,ev=Array.isArray(ef);if(ev&&(ey=Math.min(ey,ef.length)),2===es.dimensions)for(eh=0;eh<ey;eh++)if(X(ei[eh])){ei[eh].length>eo[eh].length&&F.push(format("unused",N,en.concat(eh,eo[eh].length)));var ex=eo[eh].length;for(ed=0;ed<(ev?Math.min(ex,ef[eh].length):ex);ed++)ep=ev?ef[eh][ed]:ef,eg=ei[eh][ed],em=eo[eh][ed],_.validate(eg,ep)?em!==eg&&em!==+eg&&F.push(format("dynamic",N,en.concat(eh,ed),eg,em)):F.push(format("value",N,en.concat(eh,ed),eg))}else F.push(format("array",N,en.concat(eh),ei[eh]));else for(eh=0;eh<ey;eh++)ep=ev?ef[eh]:ef,eg=ei[eh],em=eo[eh],_.validate(eg,ep)?em!==eg&&em!==+eg&&F.push(format("dynamic",N,en.concat(eh),eg,em)):F.push(format("value",N,en.concat(eh),eg))}else if(es.items&&!ec&&X(ei)){var e_,ew,eT=ef[Object.keys(ef)[0]],ek=[];for(e_=0;e_<eo.length;e_++){var eA=eo[e_]._index||e_;if((ew=en.slice()).push(eA),Z(ei[eA])&&Z(eo[e_])){ek.push(eA);var eS=ei[eA],eM=eo[e_];Z(eS)&&!1!==eS.visible&&!1===eM.visible?F.push(format("invisible",N,ew)):crawl(eS,eM,eT,F,N,ew)}}for(e_=0;e_<ei.length;e_++)(ew=en.slice()).push(e_),Z(ei[e_])?-1===ek.indexOf(e_)&&F.push(format("unused",N,ew)):F.push(format("object",N,ew,ei[e_]))}else!Z(ei)&&Z(eo)?F.push(format("object",N,en,ei)):!$(ei)&&$(eo)&&!ec&&!eu?F.push(format("array",N,en,ei)):er in o?_.validate(ei,es)?"enumerated"===es.valType&&(es.coerceNumber&&ei!==+eo||ei!==eo)&&F.push(format("dynamic",N,en,ei,eo)):F.push(format("value",N,en,ei)):F.push(format("unused",N,en,ei))}else F.push(format("schema",N,en))}}return F}function fillLayoutSchema(i,o){for(var s=i.layout.layoutAttributes,F=0;F<o.length;F++){var N=o[F],j=i.traces[N.type],Z=j.layoutAttributes;Z&&(N.subplot?_.extendFlat(s[j.attributes.subplot.dflt],Z):_.extendFlat(s,Z))}return s}i.exports=function(i,o){void 0===i&&(i=[]),void 0===o&&(o={});var s,$,ee=N.get(),et=[],er={_context:_.extendFlat({},j)};X(i)?(er.data=_.extendDeep([],i),s=i):(er.data=[],s=[],et.push(format("array","data"))),Z(o)?(er.layout=_.extendDeep({},o),$=o):(er.layout={},$={},arguments.length>1&&et.push(format("object","layout"))),F.supplyDefaults(er);for(var en=er._fullData,ei=s.length,eo=0;eo<ei;eo++){var es=s[eo],el=["data",eo];if(!Z(es)){et.push(format("object",el));continue}var ec=en[eo],eu=ec.type,ef=ee.traces[eu].attributes;ef.type={valType:"enumerated",values:[eu]},!1===ec.visible&&!1!==es.visible&&et.push(format("invisible",el)),crawl(es,ec,ef,et,el);var ed=es.transforms,eh=ec.transforms;if(ed){X(ed)||et.push(format("array",el,["transforms"])),el.push("transforms");for(var ep=0;ep<ed.length;ep++){var eg=["transforms",ep],em=ed[ep].type;if(!Z(ed[ep])){et.push(format("object",el,eg));continue}var ey=ee.transforms[em]?ee.transforms[em].attributes:{};ey.type={valType:"enumerated",values:Object.keys(ee.transforms)},crawl(ed[ep],eh[ep],ey,et,el,eg)}}}return crawl($,er._fullLayout,fillLayoutSchema(ee,en),et,"layout"),0===et.length?void 0:et};var ee={object:function(i,o){return("layout"===i&&""===o?"The layout argument":"data"===i[0]&&""===o?"Trace "+i[1]+" in the data argument":inBase(i)+"key "+o)+" must be linked to an object container"},array:function(i,o){return("data"===i?"The data argument":inBase(i)+"key "+o)+" must be linked to an array container"},schema:function(i,o){return inBase(i)+"key "+o+" is not part of the schema"},unused:function(i,o,s){var _=Z(s)?"container":"key";return inBase(i)+_+" "+o+" did not get coerced"},dynamic:function(i,o,s,_){return[inBase(i)+"key",o,"(set to '"+s+"')","got reset to","'"+_+"'","during defaults."].join(" ")},invisible:function(i,o){return(o?inBase(i)+"item "+o:"Trace "+i[1])+" got defaulted to be not visible"},value:function(i,o,s){return[inBase(i)+"key "+o,"is set to an invalid value ("+s+")"].join(" ")}};function inBase(i){return X(i)?"In data trace "+i[1]+", ":"In "+i+", "}function format(i,o,s,F,N){s=s||"",X(o)?(j=o[0],Z=o[1]):(j=o,Z=null);var j,Z,$=convertPathToAttributeString(s),et=ee[i](o,$,F,N);return _.log(et),{code:i,container:j,trace:Z,path:s,astr:$,msg:et}}function isInSchema(i,o){var s=splitKey(o),_=s.keyMinusId,F=s.id;return _ in i&&!!i[_]._isSubplotObj&&!!F||o in i}function getNestedSchema(i,o){return o in i?i[o]:i[splitKey(o).keyMinusId]}var et=_.counterRegex("([a-z]+)");function splitKey(i){var o=i.match(et);return{keyMinusId:o&&o[1],id:o&&o[2]}}function convertPathToAttributeString(i){if(!X(i))return String(i);for(var o="",s=0;s<i.length;s++){var _=i[s];"number"==typeof _?o=o.substr(0,o.length-1)+"["+_+"]":o+=_,s<i.length-1&&(o+=".")}return o}},85594:function(i){"use strict";i.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(i,o,s){"use strict";var _=s(71828),F=s(44467);i.exports=function(i,o,s){var N,j,Z=s.name,X=s.inclusionAttr||"visible",$=o[Z],ee=_.isArrayOrTypedArray(i[Z])?i[Z]:[],et=o[Z]=[],er=F.arrayTemplater(o,Z,X);for(N=0;N<ee.length;N++){var en=ee[N];_.isPlainObject(en)?j=er.newItem(en):(j=er.newItem({}))[X]=!1,j._index=N,!1!==j[X]&&s.handleItemDefaults(en,j,o,s),et.push(j)}var ei=er.defaultItems();for(N=0;N<ei.length;N++)(j=ei[N])._index=et.length,s.handleItemDefaults({},j,o,s,{}),et.push(j);if(_.isArrayOrTypedArray($)){var eo=Math.min($.length,et.length);for(N=0;N<eo;N++)_.relinkPrivateKeys(et[N],$[N])}return et}},9012:function(i,o,s){"use strict";var _=s(41940),F=s(77914);i.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:_({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:F.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=F.dateTime2ms,j=F.incrementMonth,Z=s(50606).ONEAVGMONTH;i.exports=function(i,o,s,F){if("date"!==o.type)return{vals:F};var X=i[s+"periodalignment"];if(!X)return{vals:F};var $=i[s+"period"];if(_($)){if(($=+$)<=0)return{vals:F}}else if("string"==typeof $&&"M"===$.charAt(0)){var ee=+$.substring(1);if(!(ee>0)||Math.round(ee)!==ee)return{vals:F};ef=ee}for(var et=o.calendar,er="start"===X,en="end"===X,ei=N(i[s+"period0"],et)||0,eo=[],es=[],el=[],ec=F.length,eu=0;eu<ec;eu++){var ef,ed,eh,ep,eg=F[eu];if(ef){for(ed=Math.round((eg-ei)/(ef*Z)),ep=j(ei,ef*ed,et);ep>eg;)ep=j(ep,-ef,et);for(;ep<=eg;)ep=j(ep,ef,et);eh=j(ep,-ef,et)}else{for(ed=Math.round((eg-ei)/$),ep=ei+ed*$;ep>eg;)ep-=$;for(;ep<=eg;)ep+=$;eh=ep-$}eo[eu]=er?eh:en?ep:(eh+ep)/2,es[eu]=eh,el[eu]=ep}return{vals:eo,starts:es,ends:el}}},89502:function(i){"use strict";i.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(i,o,s){"use strict";var _=s(39898),F=s(92770),N=s(71828),j=s(50606).FP_SAFE,Z=s(73972),X=s(91424),$=s(41675),ee=$.getFromId,et=$.isLinked;function getAutoRange(i,o){var s,_,F,j,Z,X,$,ee,et=[],er=i._fullLayout,en=makePadFn(er,o,0),ei=makePadFn(er,o,1),eo=concatExtremes(i,o),es=eo.min,el=eo.max;if(0===es.length||0===el.length)return N.simpleMap(o.range,o.r2l);var ec=es[0].val,eu=el[0].val;for(s=1;s<es.length&&ec===eu;s++)ec=Math.min(ec,es[s].val);for(s=1;s<el.length&&ec===eu;s++)eu=Math.max(eu,el[s].val);var ef=o.autorange,ed="reversed"===ef||"min reversed"===ef||"max reversed"===ef;if(!ed&&o.range){var eh=N.simpleMap(o.range,o.r2l);ed=eh[1]<eh[0]}"reversed"===o.autorange&&(o.autorange=!0);var ep=o.rangemode,eg="tozero"===ep,em="nonnegative"===ep,ey=o._length,ev=ey/10,ex=0;for(s=0;s<es.length;s++)for(_=0,F=es[s];_<el.length;_++)(ee=(j=el[_]).val-F.val-calcBreaksLength(o,F.val,j.val))>0&&(($=ey-en(F)-ei(j))>ev?ee/$>ex&&(Z=F,X=j,ex=ee/$):ee/ey>ex&&(Z={val:F.val,nopad:1},X={val:j.val,nopad:1},ex=ee/ey));function maximumPad(i,o){return Math.max(i,ei(o))}if(ec===eu){var e_=ec-1,ew=ec+1;if(eg){if(0===ec)et=[0,1];else{var eT=(ec>0?el:es).reduce(maximumPad,0),ek=ec/(1-Math.min(.5,eT/ey));et=ec>0?[0,ek]:[ek,0]}}else et=em?[Math.max(0,e_),Math.max(1,ew)]:[e_,ew]}else eg?(Z.val>=0&&(Z={val:0,nopad:1}),X.val<=0&&(X={val:0,nopad:1})):em&&(Z.val-ex*en(Z)<0&&(Z={val:0,nopad:1}),X.val<=0&&(X={val:1,nopad:1})),ex=(X.val-Z.val-calcBreaksLength(o,F.val,j.val))/(ey-en(Z)-ei(X)),et=[Z.val-ex*en(Z),X.val+ex*ei(X)];return et=applyAutorangeOptions(et,o),o.limitRange&&o.limitRange(),ed&&et.reverse(),N.simpleMap(et,o.l2r||Number)}function calcBreaksLength(i,o,s){var _=0;if(i.rangebreaks)for(var F=i.locateBreaks(o,s),N=0;N<F.length;N++){var j=F[N];_+=j.max-j.min}return _}function makePadFn(i,o,s){var _=.05*o._length,F=o._anchorAxis||{};if(-1!==(o.ticklabelposition||"").indexOf("inside")||-1!==(F.ticklabelposition||"").indexOf("inside")){var j=o.isReversed();if(!j){var Z=N.simpleMap(o.range,o.r2l);j=Z[1]<Z[0]}j&&(s=!s)}var X=0;return et(i,o._id)||(X=padInsideLabelsOnAnchorAxis(i,o,s)),_=Math.max(X,_),"domain"===o.constrain&&o._inputDomain&&(_*=(o._inputDomain[1]-o._inputDomain[0])/(o.domain[1]-o.domain[0])),function(i){return i.nopad?0:i.pad+(i.extrapad?_:X)}}function padInsideLabelsOnAnchorAxis(i,o,s){var F=0,j="x"===o._id.charAt(0);for(var Z in i._plots){var $=i._plots[Z];if(o._id===$.xaxis._id||o._id===$.yaxis._id){var ee=(j?$.yaxis:$.xaxis)||{};if(-1!==(ee.ticklabelposition||"").indexOf("inside")&&(!s&&("left"===ee.side||"bottom"===ee.side)||s&&("top"===ee.side||"right"===ee.side))){if(ee._vals){var et=N.deg2rad(ee._tickAngles[ee._id+"tick"]||0),er=Math.abs(Math.cos(et)),en=Math.abs(Math.sin(et));if(!ee._vals[0].bb){var ei=ee._id+"tick";ee._selections[ei].each(function(i){var o=_.select(this);o.select(".text-math-group").empty()&&(i.bb=X.bBox(o.node()))})}for(var eo=0;eo<ee._vals.length;eo++){var es=ee._vals[eo].bb;if(es){var el=6+es.width,ec=6+es.height;F=Math.max(F,j?Math.max(el*er,ec*en):Math.max(ec*er,el*en))}}}"inside"===ee.ticks&&"inside"===ee.ticklabelposition&&(F+=ee.ticklen||0)}}}return F}function concatExtremes(i,o,s){var _,F,N,j=o._id,Z=i._fullData,X=i._fullLayout,$=[],et=[];function _concat(i,o){for(_=0;_<o.length;_++){var s,Z,X,ee,er=i[o[_]],en=(er._extremes||{})[j];if(!0===er.visible&&en){for(F=0;F<en.min.length;F++)s=(N=en.min[F]).val,collapseArray($,s,N.pad,{extrapad:N.extrapad},lessOrEqual);for(F=0;F<en.max.length;F++)X=(N=en.max[F]).val,collapseArray(et,X,N.pad,{extrapad:N.extrapad},greaterOrEqual)}}}if(_concat(Z,o._traceIndices),_concat(X.annotations||[],o._annIndices||[]),_concat(X.shapes||[],o._shapeIndices||[]),o._matchGroup&&!s){for(var er in o._matchGroup)if(er!==o._id){var en,ei,eo,es,el=ee(i,er),ec=concatExtremes(i,el,!0),eu=o._length/el._length;for(F=0;F<ec.min.length;F++)en=(N=ec.min[F]).val,collapseArray($,en,N.pad*eu,{extrapad:N.extrapad},lessOrEqual);for(F=0;F<ec.max.length;F++)eo=(N=ec.max[F]).val,collapseArray(et,eo,N.pad*eu,{extrapad:N.extrapad},greaterOrEqual)}}return{min:$,max:et}}function doAutoRange(i,o,s){if(o.setScale(),o.autorange){o.range=s?s.slice():getAutoRange(i,o),o._r=o.range.slice(),o._rl=N.simpleMap(o._r,o.r2l);var _=o._input,F={};F[o._attr+".range"]=o.range,F[o._attr+".autorange"]=o.autorange,Z.call("_storeDirectGUIEdit",i.layout,i._fullLayout._preGUI,F),_.range=o.range.slice(),_.autorange=o.autorange}var j=o._anchorAxis;if(j&&j.rangeslider){var X=j.rangeslider[o._name];X&&"auto"===X.rangemode&&(X.range=getAutoRange(i,o)),j._input.rangeslider[o._name]=N.extendFlat({},X)}}function findExtremes(i,o,s){s||(s={}),i._m||i.setScale();var _,N,Z,X,$,ee,et,er,en,ei=[],eo=[],es=o.length,el=s.padded||!1,ec=s.tozero&&("linear"===i.type||"-"===i.type),eu="log"===i.type,ef=!1,ed=s.vpadLinearized||!1;function makePadAccessor(i){if(Array.isArray(i))return ef=!0,function(o){return Math.max(Number(i[o]||0),0)};var o=Math.max(Number(i||0),0);return function(){return o}}var eh=makePadAccessor((i._m>0?s.ppadplus:s.ppadminus)||s.ppad||0),ep=makePadAccessor((i._m>0?s.ppadminus:s.ppadplus)||s.ppad||0),eg=makePadAccessor(s.vpadplus||s.vpad),em=makePadAccessor(s.vpadminus||s.vpad);if(!ef){if(er=1/0,en=-1/0,eu)for(_=0;_<es;_++)(N=o[_])<er&&N>0&&(er=N),N>en&&N<j&&(en=N);else for(_=0;_<es;_++)(N=o[_])<er&&N>-j&&(er=N),N>en&&N<j&&(en=N);o=[er,en],es=2}var ey={tozero:ec,extrapad:el};function addItem(s){var _,N;F(Z=o[s])&&(ee=eh(s),et=ep(s),ed?(X=i.c2l(Z)-em(s),$=i.c2l(Z)+eg(s)):(er=Z-em(s),en=Z+eg(s),eu&&er<en/10&&(er=en/10),X=i.c2l(er),$=i.c2l(en)),ec&&(X=Math.min(0,X),$=Math.max(0,$)),goodNumber(X)&&collapseArray(ei,X,et,ey,lessOrEqual),goodNumber($)&&collapseArray(eo,$,ee,ey,greaterOrEqual))}var ev=Math.min(6,es);for(_=0;_<ev;_++)addItem(_);for(_=es-1;_>=ev;_--)addItem(_);return{min:ei,max:eo,opts:s}}function collapseArray(i,o,s,_,F){for(var N=_.tozero,j=_.extrapad,Z=!0,X=0;X<i.length&&Z;X++){var $=i[X];if(F($.val,o)&&$.pad>=s&&($.extrapad||!j)){Z=!1;break}F(o,$.val)&&$.pad<=s&&(j||!$.extrapad)&&(i.splice(X,1),X--)}if(Z){var ee=N&&0===o;i.push({val:o,pad:ee?0:s,extrapad:!ee&&j})}}function goodNumber(i){return F(i)&&Math.abs(i)<j}function lessOrEqual(i,o){return i<=o}function greaterOrEqual(i,o){return i>=o}function applyAutorangeMinOptions(i,o){var s=o.autorangeoptions;return s&&void 0!==s.minallowed&&hasValidMinAndMax(o,s.minallowed,s.maxallowed)?s.minallowed:s&&void 0!==s.clipmin&&hasValidMinAndMax(o,s.clipmin,s.clipmax)?Math.max(i,o.d2l(s.clipmin)):i}function applyAutorangeMaxOptions(i,o){var s=o.autorangeoptions;return s&&void 0!==s.maxallowed&&hasValidMinAndMax(o,s.minallowed,s.maxallowed)?s.maxallowed:s&&void 0!==s.clipmax&&hasValidMinAndMax(o,s.clipmin,s.clipmax)?Math.min(i,o.d2l(s.clipmax)):i}function hasValidMinAndMax(i,o,s){return void 0===o||void 0===s||(o=i.d2l(o))<(s=i.d2l(s))}function applyAutorangeOptions(i,o){if(!o||!o.autorangeoptions)return i;var s=i[0],_=i[1],F=o.autorangeoptions.include;if(void 0!==F){var j=o.d2l(s),Z=o.d2l(_);N.isArrayOrTypedArray(F)||(F=[F]);for(var X=0;X<F.length;X++){var $=o.d2l(F[X]);j>=$&&(j=$,s=$),Z<=$&&(Z=$,_=$)}}return[s=applyAutorangeMinOptions(s,o),_=applyAutorangeMaxOptions(_,o)]}i.exports={applyAutorangeOptions:applyAutorangeOptions,getAutoRange:getAutoRange,makePadFn:makePadFn,doAutoRange:doAutoRange,findExtremes:findExtremes,concatExtremes:concatExtremes}},23074:function(i){"use strict";i.exports=function(i,o,s){if(s){var _,F,N="reversed"===o||"min reversed"===o||"max reversed"===o;_=s[N?1:0],F=s[N?0:1]}var j=i("autorangeoptions.minallowed",null===F?_:void 0),Z=i("autorangeoptions.maxallowed",null===_?F:void 0);void 0===j&&i("autorangeoptions.clipmin"),void 0===Z&&i("autorangeoptions.clipmax"),i("autorangeoptions.include")}},89298:function(i,o,s){"use strict";var _=s(39898),F=s(92770),N=s(74875),j=s(73972),Z=s(71828),X=Z.strTranslate,$=s(63893),ee=s(92998),et=s(7901),er=s(91424),en=s(13838),ei=s(66287),eo=s(50606),es=eo.ONEMAXYEAR,el=eo.ONEAVGYEAR,ec=eo.ONEMINYEAR,eu=eo.ONEMAXQUARTER,ef=eo.ONEAVGQUARTER,ed=eo.ONEMINQUARTER,eh=eo.ONEMAXMONTH,ep=eo.ONEAVGMONTH,eg=eo.ONEMINMONTH,em=eo.ONEWEEK,ey=eo.ONEDAY,ev=ey/2,ex=eo.ONEHOUR,e_=eo.ONEMIN,ew=eo.ONESEC,eT=eo.MINUS_SIGN,ek=eo.BADNUM,eA={K:"zeroline"},eS={K:"gridline",L:"path"},eM={K:"minor-gridline",L:"path"},eC={K:"tick",L:"path"},eE={K:"tick",L:"text"},eL={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},eP=s(18783),eI=eP.MID_SHIFT,eO=eP.CAP_SHIFT,eD=eP.LINE_SPACING,eR=eP.OPPOSITE_SIDE,eB=i.exports={};eB.setConvert=s(21994);var eF=s(4322),ez=s(41675),eN=ez.idSort,ej=ez.isLinked;eB.id2name=ez.id2name,eB.name2id=ez.name2id,eB.cleanId=ez.cleanId,eB.list=ez.list,eB.listIds=ez.listIds,eB.getFromId=ez.getFromId,eB.getFromTrace=ez.getFromTrace;var eV=s(71739);function expandRange(i){var o=(i[1]-i[0])*1e-4;return[i[0]-o,i[1]+o]}eB.getAutoRange=eV.getAutoRange,eB.findExtremes=eV.findExtremes,eB.coerceRef=function(i,o,s,_,F,N){var j=_.charAt(_.length-1),X=s._fullLayout._subplots[j+"axis"],$=_+"ref",ee={};return F||(F=X[0]||("string"==typeof N?N:N[0])),N||(N=F),X=X.concat(X.map(function(i){return i+" domain"})),ee[$]={valType:"enumerated",values:X.concat(N?"string"==typeof N?[N]:N:[]),dflt:F},Z.coerce(i,o,ee,$)},eB.getRefType=function(i){return void 0===i?i:"paper"===i?"paper":"pixel"===i?"pixel":/( domain)$/.test(i)?"domain":"range"},eB.coercePosition=function(i,o,s,_,F,N){var j,X;if("range"!==eB.getRefType(_))j=Z.ensureNumber,X=s(F,N);else{var $=eB.getFromId(o,_);X=s(F,N=$.fraction2r(N)),j=$.cleanPos}i[F]=j(X)},eB.cleanPosition=function(i,o,s){return("paper"===s||"pixel"===s?Z.ensureNumber:eB.getFromId(o,s).cleanPos)(i)},eB.redrawComponents=function(i,o){o=o||eB.listIds(i);var s=i._fullLayout;function _redrawOneComp(_,F,N,Z){for(var X=j.getComponentMethod(_,F),$={},ee=0;ee<o.length;ee++)for(var et=s[eB.id2name(o[ee])][N],er=0;er<et.length;er++){var en=et[er];if(!$[en]&&(X(i,en),$[en]=1,Z))return}}_redrawOneComp("annotations","drawOne","_annIndices"),_redrawOneComp("shapes","drawOne","_shapeIndices"),_redrawOneComp("images","draw","_imgIndices",!0),_redrawOneComp("selections","drawOne","_selectionIndices")};var eU=eB.getDataConversions=function(i,o,s,_){var F,N="x"===s||"y"===s||"z"===s?s:_;if(Array.isArray(N)){if(F={type:eF(_,void 0,{autotypenumbers:i._fullLayout.autotypenumbers}),_categories:[]},eB.setConvert(F),"category"===F.type)for(var j=0;j<_.length;j++)F.d2c(_[j])}else F=eB.getFromTrace(i,o,N);return F?{d2c:F.d2c,c2d:F.c2d}:"ids"===N?{d2c:toString,c2d:toString}:{d2c:toNum,c2d:toNum}};function toNum(i){return+i}function toString(i){return String(i)}function autoShiftNumericBins(i,o,s,_,N){var j=0,Z=0,X=0,$=0;function nearEdge(o){return(1+(o-i)*100/s.dtick)%100<2}for(var ee=0;ee<o.length;ee++)o[ee]%1==0?X++:!F(o[ee])&&$++,nearEdge(o[ee])&&j++,nearEdge(o[ee]+s.dtick/2)&&Z++;var et=o.length-$;if(X===et&&"date"!==s.type)s.dtick<1?i=_-.5*s.dtick:(i-=.5)+s.dtick<_&&(i+=s.dtick);else if(Z<.1*et&&(j>.3*et||nearEdge(_)||nearEdge(N))){var er=s.dtick/2;i+=i+er<_?er:-er}return i}function autoShiftMonthBins(i,o,s,_,F){var N=Z.findExactDates(o,F);if(N.exactDays>.8){var j=Number(s.substr(1));N.exactYears>.8&&j%12==0?i=eB.tickIncrement(i,"M6","reverse")+1.5*ey:N.exactMonths>.8?i=eB.tickIncrement(i,"M1","reverse")+15.5*ey:i-=ev;var X=eB.tickIncrement(i,s);if(X<=_)return X}return i}function isMultiple(i,o){return .001>Math.abs((i/o+.5)%1-.5)}function isClose(i,o){return .001>Math.abs(i/o-1)}function nMonths(i){return+i.substring(1)}function adjustPeriodDelta(i){function mDate(){return!(F(i.dtick)||"M"!==i.dtick.charAt(0))}var o,s=mDate(),_=eB.getTickFormat(i);if(_){var N=i._dtickInit!==i.dtick;!/%[fLQsSMX]/.test(_)&&(/%[HI]/.test(_)?(o=ex,N&&!s&&i.dtick<ex&&(i.dtick=ex)):/%p/.test(_)?(o=ev,N&&!s&&i.dtick<ev&&(i.dtick=ev)):/%[Aadejuwx]/.test(_)?(o=ey,N&&!s&&i.dtick<ey&&(i.dtick=ey)):/%[UVW]/.test(_)?(o=em,N&&!s&&i.dtick<em&&(i.dtick=em)):/%[Bbm]/.test(_)?(o=ep,N&&(s?1>nMonths(i.dtick):i.dtick<eg)&&(i.dtick="M1")):/%[q]/.test(_)?(o=ef,N&&(s?3>nMonths(i.dtick):i.dtick<ed)&&(i.dtick="M3")):/%[Yy]/.test(_)&&(o=el,N&&(s?12>nMonths(i.dtick):i.dtick<ec)&&(i.dtick="M12")))}(s=mDate())&&i.tick0===i._dowTick0&&(i.tick0=i._rawTick0),i._definedDelta=o}function positionPeriodTicks(i,o,s){for(var _=0;_<i.length;_++){var F,N=i[_].value,j=_,Z=_+1;_<i.length-1?(j=_,Z=_+1):(j=_>0?_-1:_,Z=_);var X=i[j].value,$=Math.abs(i[Z].value-X),ee=s||$,et=0;ee>=ec?et=$>=ec&&$<=es?$:el:s===ef&&ee>=ed?et=$>=ed&&$<=eu?$:ef:ee>=eg?et=$>=eg&&$<=eh?$:ep:s===em&&ee>=em?et=em:ee>=ey?et=ey:s===ev&&ee>=ev?et=ev:s===ex&&ee>=ex&&(et=ex),et>=$&&(et=$,F=!0);var er=N+et;if(o.rangebreaks&&et>0){for(var en=0,ei=0;ei<84;ei++){var eo=(ei+.5)/84;o.maskBreaks(N*(1-eo)+eo*er)!==ek&&en++}(et*=en/84)||(i[_].drop=!0),F&&$>em&&(et=$)}(et>0||0===_)&&(i[_].periodX=N+et/2)}}function filterRangeBreaks(i,o){return i.rangebreaks&&(o=o.filter(function(o){return i.maskBreaks(o.x)!==ek})),o}function syncTicks(i){var o=i._mainAxis,s=[];if(o._vals){for(var _=0;_<o._vals.length;_++)if(!o._vals[_].noTick){var F=o.l2p(o._vals[_].x),N=i.p2l(F),j=eB.tickText(i,N);o._vals[_].minor&&(j.minor=!0,j.text=""),s.push(j)}}return filterRangeBreaks(i,s)}function arrayTicks(i){var o=expandRange(Z.simpleMap(i.range,i.r2l)),s=Math.min(o[0],o[1]),_=Math.max(o[0],o[1]),F="category"===i.type?i.d2l_noadd:i.d2l;"log"===i.type&&"L"!==String(i.dtick).charAt(0)&&(i.dtick="L"+Math.pow(10,Math.floor(Math.min(i.range[0],i.range[1]))-1));for(var N=[],j=0;j<=1;j++)if(!j||i.minor){var X=j?i.minor.tickvals:i.tickvals,$=j?[]:i.ticktext;if(X){Array.isArray($)||($=[]);for(var ee=0;ee<X.length;ee++){var et=F(X[ee]);if(et>s&&et<_){var er=void 0===$[ee]?eB.tickText(i,et):tickTextObj(i,et,String($[ee]));j&&(er.minor=!0,er.text=""),N.push(er)}}}}return filterRangeBreaks(i,N)}eB.getDataToCoordFunc=function(i,o,s,_){return eU(i,o,s,_).d2c},eB.counterLetter=function(i){var o=i.charAt(0);return"x"===o?"y":"y"===o?"x":void 0},eB.minDtick=function(i,o,s,_){-1===["log","category","multicategory"].indexOf(i.type)&&_?void 0===i._minDtick?(i._minDtick=o,i._forceTick0=s):i._minDtick&&((i._minDtick/o+1e-6)%1<2e-6&&((s-i._forceTick0)/o%1+1.000001)%1<2e-6?(i._minDtick=o,i._forceTick0=s):((o/i._minDtick+1e-6)%1>2e-6||((s-i._forceTick0)/i._minDtick%1+1.000001)%1>2e-6)&&(i._minDtick=0)):i._minDtick=0},eB.saveRangeInitial=function(i,o){for(var s=eB.list(i,"",!0),_=!1,F=0;F<s.length;F++){var N=s[F],j=void 0===N._rangeInitial0&&void 0===N._rangeInitial1,Z=j||N.range[0]!==N._rangeInitial0||N.range[1]!==N._rangeInitial1,X=N.autorange;(j&&!0!==X||o&&Z)&&(N._rangeInitial0="min"===X||"max reversed"===X?void 0:N.range[0],N._rangeInitial1="max"===X||"min reversed"===X?void 0:N.range[1],N._autorangeInitial=X,_=!0)}return _},eB.saveShowSpikeInitial=function(i,o){for(var s=eB.list(i,"",!0),_=!1,F="on",N=0;N<s.length;N++){var j=s[N],Z=void 0===j._showSpikeInitial,X=Z||j.showspikes!==j._showspikes;(Z||o&&X)&&(j._showSpikeInitial=j.showspikes,_=!0),"on"!==F||j.showspikes||(F="off")}return i._fullLayout._cartesianSpikesEnabled=F,_},eB.autoBin=function(i,o,s,_,N,j){var X,$,ee,et,er=Z.aggNums(Math.min,null,i),en=Z.aggNums(Math.max,null,i);if("category"===o.type||"multicategory"===o.type)return{start:er-.5,end:en+.5,size:Math.max(1,Math.round(j)||1),_dataSpan:en-er};if(N||(N=o.calendar),X="log"===o.type?{type:"linear",range:[er,en]}:{type:o.type,range:Z.simpleMap([er,en],o.c2r,0,N),calendar:N},eB.setConvert(X),j=j&&ei.dtick(j,X.type))X.dtick=j,X.tick0=ei.tick0(void 0,X.type,N);else{if(s)$=(en-er)/s;else{var eo=Z.distinctVals(i),es=Math.pow(10,Math.floor(Math.log(eo.minDiff)/Math.LN10));F($=Math.max(es*Z.roundUp(eo.minDiff/es,[.9,1.9,4.9,9.9],!0),2*Z.stdev(i)/Math.pow(i.length,_?.25:.4)))||($=1)}eB.autoTicks(X,$)}var el=X.dtick,ec=eB.tickIncrement(eB.tickFirst(X),el,"reverse",N);if("number"==typeof el)ec=autoShiftNumericBins(ec,i,X,er,en),et=1+Math.floor((en-ec)/el),ee=ec+et*el;else for("M"===X.dtick.charAt(0)&&(ec=autoShiftMonthBins(ec,i,el,er,N)),ee=ec,et=0;ee<=en;)ee=eB.tickIncrement(ee,el,!1,N),et++;return{start:o.c2r(ec,0,N),end:o.c2r(ee,0,N),size:el,_dataSpan:en-er}},eB.prepMinorTicks=function(i,o,s){if(!o.minor.dtick){delete i.dtick;var _,N=o.dtick&&F(o._tmin);if(N){var j=eB.tickIncrement(o._tmin,o.dtick,!0);_=[o._tmin,.99*j+.01*o._tmin]}else{var X=Z.simpleMap(o.range,o.r2l);_=[X[0],.8*X[0]+.2*X[1]]}if(i.range=Z.simpleMap(_,o.l2r),i._isMinor=!0,eB.prepTicks(i,s),N){var $=F(o.dtick),ee=F(i.dtick),et=$?o.dtick:+o.dtick.substring(1),er=ee?i.dtick:+i.dtick.substring(1);$&&ee?isMultiple(et,er)?et===2*em&&er===2*ey&&(i.dtick=em):et===2*em&&er===3*ey?i.dtick=em:et!==em||(o._input.minor||{}).nticks?isClose(et/er,2.5)?i.dtick=et/2:i.dtick=et:i.dtick=ey:"M"===String(o.dtick).charAt(0)?ee?i.dtick="M1":isMultiple(et,er)?et>=12&&2===er&&(i.dtick="M3"):i.dtick=o.dtick:"L"===String(i.dtick).charAt(0)?"L"===String(o.dtick).charAt(0)?isMultiple(et,er)||(i.dtick=isClose(et/er,2.5)?o.dtick/2:o.dtick):i.dtick="D1":"D2"===i.dtick&&+o.dtick>1&&(i.dtick=1)}i.range=o.range}void 0===o.minor._tick0Init&&(i.tick0=o.tick0)},eB.prepTicks=function(i,o){var s=Z.simpleMap(i.range,i.r2l,void 0,void 0,o);if("auto"===i.tickmode||!i.dtick){var _,F=i.nticks;F||("category"===i.type||"multicategory"===i.type?(_=i.tickfont?Z.bigFont(i.tickfont.size||12):15,F=i._length/_):(_="y"===i._id.charAt(0)?40:80,F=Z.constrain(i._length/_,4,9)+1),"radialaxis"!==i._name||(F*=2)),i.minor&&"array"!==i.minor.tickmode||"array"!==i.tickmode||(F*=100),i._roughDTick=Math.abs(s[1]-s[0])/F,eB.autoTicks(i,i._roughDTick),i._minDtick>0&&i.dtick<2*i._minDtick&&(i.dtick=i._minDtick,i.tick0=i.l2r(i._forceTick0))}"period"===i.ticklabelmode&&adjustPeriodDelta(i),i.tick0||(i.tick0="date"===i.type?"2000-01-01":0),"date"===i.type&&i.dtick<.1&&(i.dtick=.1),autoTickRound(i)},eB.calcTicks=function(i,o){for(var s,_,N,j,X=i.type,$=i.calendar,ee=i.ticklabelstep,et="period"===i.ticklabelmode,er=Z.simpleMap(i.range,i.r2l,void 0,void 0,o),en=er[1]<er[0],ei=Math.min(er[0],er[1]),eo=Math.max(er[0],er[1]),es=Math.max(1e3,i._length||0),el=[],ec=[],eu=[],ef=[],ed=i.minor&&(i.minor.ticks||i.minor.showgrid),eh=1;eh>=(ed?0:1);eh--){var eg,em,ey=!eh;eh?(i._dtickInit=i.dtick,i._tick0Init=i.tick0):(i.minor._dtickInit=i.minor.dtick,i.minor._tick0Init=i.minor.tick0);var ev=eh?i:Z.extendFlat({},i,i.minor);if(ey?eB.prepMinorTicks(ev,i,o):eB.prepTicks(ev,o),"array"===ev.tickmode){eh?(eu=[],el=arrayTicks(i)):(ef=[],ec=arrayTicks(i));continue}if("sync"===ev.tickmode){eu=[],el=syncTicks(i);continue}var ex=expandRange(er),e_=ex[0],ew=ex[1],eT=F(ev.dtick),eA="log"===X&&!(eT||"L"===ev.dtick.charAt(0)),eS=eB.tickFirst(ev,o);if(eh){if(i._tmin=eS,eS<e_!==en)break;("category"===X||"multicategory"===X)&&(ew=en?Math.max(-.5,ew):Math.min(i._categories.length-.5,ew))}var eM=null,eC=eS;eh&&(eT?em=i.dtick:"date"===X?"string"==typeof i.dtick&&"M"===i.dtick.charAt(0)&&(em=ep*i.dtick.substring(1)):em=i._roughDTick,eg=Math.round((i.r2l(eC)-i.r2l(i.tick0))/em)-1);var eE=ev.dtick;for(ev.rangebreaks&&ev._tick0Init!==ev.tick0&&(eC=moveOutsideBreak(eC,i),en||(eC=eB.tickIncrement(eC,eE,!en,$))),eh&&et&&(eC=eB.tickIncrement(eC,eE,!en,$),eg--);en?eC>=ew:eC<=ew;eC=eB.tickIncrement(eC,eE,en,$)){if(eh&&eg++,ev.rangebreaks&&!en){if(eC<e_)continue;if(ev.maskBreaks(eC)===ek&&moveOutsideBreak(eC,ev)>=eo)break}if(eu.length>es||eC===eM)break;eM=eC;var eL={value:eC};eh?(eA&&eC!==(0|eC)&&(eL.simpleLabel=!0),ee>1&&eg%ee&&(eL.skipLabel=!0),eu.push(eL)):(eL.minor=!0,ef.push(eL))}}if(ed&&!("inside"===i.minor.ticks&&"outside"===i.ticks||"outside"===i.minor.ticks&&"inside"===i.ticks)){for(var eP=eu.map(function(i){return i.value}),eI=[],eO=0;eO<ef.length;eO++){var eD=ef[eO],eR=eD.value;if(-1===eP.indexOf(eR)){for(var eF=!1,ez=0;!eF&&ez<eu.length;ez++)1e7+eu[ez].value===1e7+eR&&(eF=!0);eF||eI.push(eD)}}ef=eI}if(et&&positionPeriodTicks(eu,i,i._definedDelta),i.rangebreaks){var eN="y"===i._id.charAt(0),ej=1;"auto"===i.tickmode&&(ej=i.tickfont?i.tickfont.size:12);var eV=NaN;for(s=eu.length-1;s>-1;s--){if(eu[s].drop){eu.splice(s,1);continue}eu[s].value=moveOutsideBreak(eu[s].value,i);var eU=i.c2p(eu[s].value);(eN?eV>eU-ej:eV<eU+ej)?eu.splice(en?s+1:s,1):eV=eU}}isAngular(i)&&360===Math.abs(er[1]-er[0])&&eu.pop(),i._tmax=(eu[eu.length-1]||{}).value,i._prevDateHead="",i._inCalcTicks=!0;var hideLabel=function(o){o.text="",i._prevDateHead=_};for(s=0,eu=eu.concat(ef);s<eu.length;s++){var eH=eu[s].minor,eG=eu[s].value;eH?ec.push({x:eG,minor:!0}):(_=i._prevDateHead,N=eB.tickText(i,eG,!1,eu[s].simpleLabel),void 0!==(j=eu[s].periodX)&&(N.periodX=j,(j>eo||j<ei)&&(j>eo&&(N.periodX=eo),j<ei&&(N.periodX=ei),hideLabel(N))),eu[s].skipLabel&&hideLabel(N),el.push(N))}return el=el.concat(ec),i._inCalcTicks=!1,et&&el.length&&(el[0].noTick=!0),el};var eH=[2,5,10],eG=[1,2,3,6,12],eW=[1,2,5,10,15,30],eZ=[1,2,3,7,14],eY=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],eX=[-.301,0,.301,.699,1],eK=[15,30,45,90,180];function roundDTick(i,o,s){return o*Z.roundUp(i/o,s)}function autoTickRound(i){var o=i.dtick;if(i._tickexponent=0,F(o)||"string"==typeof o||(o=1),("category"===i.type||"multicategory"===i.type)&&(i._tickround=null),"date"===i.type){var s=i.r2l(i.tick0),_=i.l2r(s).replace(/(^-|i)/g,""),N=_.length;if("M"===String(o).charAt(0))N>10||"01-01"!==_.substr(5)?i._tickround="d":i._tickround=+o.substr(1)%12==0?"y":"m";else if(o>=ey&&N<=10||o>=15*ey)i._tickround="d";else if(o>=e_&&N<=16||o>=ex)i._tickround="M";else if(o>=ew&&N<=19||o>=e_)i._tickround="S";else{var j=i.l2r(s+o).replace(/^-/,"").length;i._tickround=Math.max(N,j)-20,i._tickround<0&&(i._tickround=4)}}else if(F(o)||"L"===o.charAt(0)){var Z=i.range.map(i.r2d||Number);F(o)||(o=Number(o.substr(1))),i._tickround=2-Math.floor(Math.log(o)/Math.LN10+.01);var X=Math.floor(Math.log(Math.max(Math.abs(Z[0]),Math.abs(Z[1])))/Math.LN10+.01);Math.abs(X)>(void 0===i.minexponent?3:i.minexponent)&&(isSIFormat(i.exponentformat)&&!beyondSI(X)?i._tickexponent=3*Math.round((X-1)/3):i._tickexponent=X)}else i._tickround=null}function tickTextObj(i,o,s){var _=i.tickfont||{};return{x:o,dx:0,dy:0,text:s||"",fontSize:_.size,font:_.family,fontColor:_.color}}function formatDate(i,o,s,_){var N,j=i._tickround,X=s&&i.hoverformat||eB.getTickFormat(i);(_=!X&&_)&&(j=F(j)?4:({y:"m",m:"d",d:"M",M:"S",S:4})[j]);var $=Z.formatDate(o.x,X,j,i._dateFormat,i.calendar,i._extraFormat),ee=$.indexOf("\n");if(-1!==ee&&(N=$.substr(ee+1),$=$.substr(0,ee)),_&&(void 0!==N&&("00:00:00"===$||"00:00"===$)?($=N,N=""):8===$.length&&($=$.replace(/:00$/,""))),N){if(s)"d"===j?$+=", "+N:$=N+($?", "+$:"");else if(i._inCalcTicks&&i._prevDateHead===N){var et=insideTicklabelposition(i),er=i._trueSide||i.side;(!et&&"top"===er||et&&"bottom"===er)&&($+="<br> ")}else i._prevDateHead=N,$+="<br>"+N}o.text=$}function formatLog(i,o,s,_,N){var j=i.dtick,X=o.x,$=i.tickformat,ee="string"==typeof j&&j.charAt(0);if("never"===N&&(N=""),_&&"L"!==ee&&(j="L3",ee="L"),$||"L"===ee)o.text=numFormat(Math.pow(10,X),i,N,_);else if(F(j)||"D"===ee&&.1>Z.mod(X+.01,1)){var et=Math.round(X),er=Math.abs(et),en=i.exponentformat;"power"===en||isSIFormat(en)&&beyondSI(et)?(0===et?o.text=1:1===et?o.text="10":o.text="10<sup>"+(et>1?"":eT)+er+"</sup>",o.fontSize*=1.25):("e"===en||"E"===en)&&er>2?o.text="1"+en+(et>0?"+":eT)+er:(o.text=numFormat(Math.pow(10,X),i,"","fakehover"),"D1"===j&&"y"===i._id.charAt(0)&&(o.dy-=o.fontSize/6))}else if("D"===ee)o.text=String(Math.round(Math.pow(10,Z.mod(X,1)))),o.fontSize*=.75;else throw"unrecognized dtick "+String(j);if("D1"===i.dtick){var ei=String(o.text).charAt(0);("0"===ei||"1"===ei)&&("y"===i._id.charAt(0)?o.dx-=o.fontSize/4:(o.dy+=o.fontSize/2,o.dx+=(i.range[1]>i.range[0]?1:-1)*o.fontSize*(X<0?.5:.25)))}}function formatCategory(i,o){var s=i._categories[Math.round(o.x)];void 0===s&&(s=""),o.text=String(s)}function formatMultiCategory(i,o,s){var _=Math.round(o.x),F=i._categories[_]||[],N=void 0===F[1]?"":String(F[1]),j=void 0===F[0]?"":String(F[0]);s?o.text=j+" - "+N:(o.text=N,o.text2=j)}function formatLinear(i,o,s,_,F){"never"===F?F="":"all"===i.showexponent&&1e-6>Math.abs(o.x/i.dtick)&&(F="hide"),o.text=numFormat(o.x,i,F,_)}function formatAngle(i,o,s,_,F){if("radians"!==i.thetaunit||s)o.text=numFormat(o.x,i,F,_);else{var N=o.x/180;if(0===N)o.text="0";else{var j=num2frac(N);if(j[1]>=100)o.text=numFormat(Z.deg2rad(o.x),i,F,_);else{var X=o.x<0;1===j[1]?1===j[0]?o.text="π":o.text=j[0]+"π":o.text=["<sup>",j[0],"</sup>","⁄","<sub>",j[1],"</sub>","π"].join(""),X&&(o.text=eT+o.text)}}}}function num2frac(i){function almostEq(i,o){return 1e-6>=Math.abs(i-o)}function findGCD(i,o){return almostEq(o,0)?i:findGCD(o,i%o)}var o=function(i){for(var o=1;!almostEq(Math.round(i*o)/o,i);)o*=10;return o}(i),s=i*o,_=Math.abs(findGCD(s,o));return[Math.round(s/_),Math.round(o/_)]}eB.autoTicks=function(i,o,s){var _;function getBase(i){return Math.pow(i,Math.floor(Math.log(o)/Math.LN10))}if("date"===i.type){i.tick0=Z.dateTick0(i.calendar,0);var N=2*o;if(N>el)o/=el,_=getBase(10),i.dtick="M"+12*roundDTick(o,_,eH);else if(N>ep)o/=ep,i.dtick="M"+roundDTick(o,1,eG);else if(N>ey){if(i.dtick=roundDTick(o,ey,i._hasDayOfWeekBreaks?[1,2,7,14]:eZ),!s){var j=eB.getTickFormat(i),X="period"===i.ticklabelmode;X&&(i._rawTick0=i.tick0),/%[uVW]/.test(j)?i.tick0=Z.dateTick0(i.calendar,2):i.tick0=Z.dateTick0(i.calendar,1),X&&(i._dowTick0=i.tick0)}}else N>ex?i.dtick=roundDTick(o,ex,eG):N>e_?i.dtick=roundDTick(o,e_,eW):N>ew?i.dtick=roundDTick(o,ew,eW):(_=getBase(10),i.dtick=roundDTick(o,_,eH))}else if("log"===i.type){i.tick0=0;var $=Z.simpleMap(i.range,i.r2l);if(i._isMinor&&(o*=1.5),o>.7)i.dtick=Math.ceil(o);else if(1>Math.abs($[1]-$[0])){var ee=1.5*Math.abs(($[1]-$[0])/o);o=Math.abs(Math.pow(10,$[1])-Math.pow(10,$[0]))/ee,_=getBase(10),i.dtick="L"+roundDTick(o,_,eH)}else i.dtick=o>.3?"D2":"D1"}else"category"===i.type||"multicategory"===i.type?(i.tick0=0,i.dtick=Math.ceil(Math.max(o,1))):isAngular(i)?(i.tick0=0,_=1,i.dtick=roundDTick(o,_,eK)):(i.tick0=0,_=getBase(10),i.dtick=roundDTick(o,_,eH));if(0===i.dtick&&(i.dtick=1),!F(i.dtick)&&"string"!=typeof i.dtick){var et=i.dtick;throw i.dtick=1,"ax.dtick error: "+String(et)}},eB.tickIncrement=function(i,o,s,N){var j=s?-1:1;if(F(o))return Z.increment(i,j*o);var X=o.charAt(0),$=j*Number(o.substr(1));if("M"===X)return Z.incrementMonth(i,$,N);if("L"===X)return Math.log(Math.pow(10,i)+$)/Math.LN10;if("D"===X){var ee="D2"===o?eX:eY,et=i+.01*j,er=Z.roundUp(Z.mod(et,1),ee,s);return Math.floor(et)+Math.log(_.round(Math.pow(10,er),1))/Math.LN10}throw"unrecognized dtick "+String(o)},eB.tickFirst=function(i,o){var s=i.r2l||Number,N=Z.simpleMap(i.range,s,void 0,void 0,o),j=N[1]<N[0],X=j?Math.floor:Math.ceil,$=expandRange(N)[0],ee=i.dtick,et=s(i.tick0);if(F(ee)){var er=X(($-et)/ee)*ee+et;return("category"===i.type||"multicategory"===i.type)&&(er=Z.constrain(er,0,i._categories.length-1)),er}var en=ee.charAt(0),ei=Number(ee.substr(1));if("M"===en){for(var eo,es,el,ec=0,eu=et;ec<10;){if(((eo=eB.tickIncrement(eu,ee,j,i.calendar))-$)*(eu-$)<=0){if(j)return Math.min(eu,eo);return Math.max(eu,eo)}el=en+(Math.abs(Math.round(es=($-(eu+eo)/2)/(eo-eu)))||1)*ei,eu=eB.tickIncrement(eu,el,es<0?!j:j,i.calendar),ec++}return Z.error("tickFirst did not converge",i),eu}if("L"===en)return Math.log(X((Math.pow(10,$)-et)/ei)*ei+et)/Math.LN10;if("D"===en){var ef="D2"===ee?eX:eY,ed=Z.roundUp(Z.mod($,1),ef,j);return Math.floor($)+Math.log(_.round(Math.pow(10,ed),1))/Math.LN10}throw"unrecognized dtick "+String(ee)},eB.tickText=function(i,o,s,_){var F,N=tickTextObj(i,o),j="array"===i.tickmode,X=s||j,$=i.type,ee="category"===$?i.d2l_noadd:i.d2l;if(j&&Array.isArray(i.ticktext)){var et=Z.simpleMap(i.range,i.r2l),er=(Math.abs(et[1]-et[0])-(i._lBreaks||0))/1e4;for(F=0;F<i.ticktext.length&&!(Math.abs(o-ee(i.tickvals[F]))<er);F++);if(F<i.ticktext.length)return N.text=String(i.ticktext[F]),N}function isHidden(_){if(void 0===_)return!0;if(s)return"none"===_;var F={first:i._tmin,last:i._tmax}[_];return"all"!==_&&o!==F}var en=s?"never":"none"!==i.exponentformat&&isHidden(i.showexponent)?"hide":"";if("date"===$?formatDate(i,N,s,X):"log"===$?formatLog(i,N,s,X,en):"category"===$?formatCategory(i,N):"multicategory"===$?formatMultiCategory(i,N,s):isAngular(i)?formatAngle(i,N,s,X,en):formatLinear(i,N,s,X,en),_||(i.tickprefix&&!isHidden(i.showtickprefix)&&(N.text=i.tickprefix+N.text),!i.ticksuffix||isHidden(i.showticksuffix)||(N.text+=i.ticksuffix)),i.labelalias&&i.labelalias.hasOwnProperty(N.text)){var ei=i.labelalias[N.text];"string"==typeof ei&&(N.text=ei)}if("boundaries"===i.tickson||i.showdividers){var inbounds=function(o){var s=i.l2p(o);return s>=0&&s<=i._length?o:null};N.xbnd=[inbounds(N.x-.5),inbounds(N.x+i.dtick-.5)]}return N},eB.hoverLabelText=function(i,o,s){s&&(i=Z.extendFlat({},i,{hoverformat:s}));var _=Array.isArray(o)?o[0]:o,F=Array.isArray(o)?o[1]:void 0;if(void 0!==F&&F!==_)return eB.hoverLabelText(i,_,s)+" - "+eB.hoverLabelText(i,F,s);var N="log"===i.type&&_<=0,j=eB.tickText(i,i.c2l(N?-_:_),"hover").text;return N?0===_?"0":eT+j:j};var eJ=["f","p","n","μ","m","","k","M","G","T"];function isSIFormat(i){return"SI"===i||"B"===i}function beyondSI(i){return i>14||i<-15}function numFormat(i,o,s,_){var N,j=i<0,X=o._tickround,$=s||o.exponentformat||"B",ee=o._tickexponent,et=eB.getTickFormat(o),er=o.separatethousands;if(_){var en={exponentformat:$,minexponent:o.minexponent,dtick:"none"===o.showexponent?o.dtick:F(i)&&Math.abs(i)||1,range:"none"===o.showexponent?o.range.map(o.r2d):[0,i||1]};autoTickRound(en),X=(Number(en._tickround)||0)+4,ee=en._tickexponent,o.hoverformat&&(et=o.hoverformat)}if(et)return o._numFormat(et)(i).replace(/-/g,eT);var ei=Math.pow(10,-X)/2;if("none"===$&&(ee=0),(i=Math.abs(i))<ei)i="0",j=!1;else{if(i+=ei,ee&&(i*=Math.pow(10,-ee),X+=ee),0===X)i=String(Math.floor(i));else if(X<0){i=(i=String(Math.round(i))).substr(0,i.length+X);for(var eo=X;eo<0;eo++)i+="0"}else{var es=(i=String(i)).indexOf(".")+1;es&&(i=i.substr(0,es+X).replace(/\.?0+$/,""))}i=Z.numSeparate(i,o._separators,er)}return(ee&&"hide"!==$&&(isSIFormat($)&&beyondSI(ee)&&($="power"),N=ee<0?eT+-ee:"power"!==$?"+"+ee:String(ee),"e"===$||"E"===$?i+=$+N:"power"===$?i+="\xd710<sup>"+N+"</sup>":"B"===$&&9===ee?i+="B":isSIFormat($)&&(i+=eJ[ee/3+5])),j)?eT+i:i}function filterPush(i,o){if(i){var s=Object.keys(eL).reduce(function(i,s){return -1!==o.indexOf(s)&&eL[s].forEach(function(o){i[o]=1}),i},{});Object.keys(i).forEach(function(o){s[o]||(1===o.length?i[o]=0:delete i[o])})}}function getBoundaryVals(i,o){var s,_=[],_push=function(i,o){var s=i.xbnd[o];null!==s&&_.push(Z.extendFlat({},i,{x:s}))};if(o.length){for(s=0;s<o.length;s++)_push(o[s],0);_push(o[s-1],1)}return _}function getSecondaryLabelVals(i,o){for(var s=[],_={},F=0;F<o.length;F++){var N=o[F];_[N.text2]?_[N.text2].push(N.x):_[N.text2]=[N.x]}for(var j in _)s.push(tickTextObj(i,Z.interp(_[j],.5),j));return s}function getDividerVals(i,o){var s,_,F=[],N=o.length&&o[o.length-1].x<o[0].x,_push=function(i,o){var s=i.xbnd[o];null!==s&&F.push(Z.extendFlat({},i,{x:s}))};if(i.showdividers&&o.length){for(s=0;s<o.length;s++){var j=o[s];j.text2!==_&&_push(j,N?1:0),_=j.text2}_push(o[s-1],N?0:1)}return F}function calcLabelLevelBbox(i,o){var s,_,F,N;return i._selections[o].size()?(s=1/0,_=-1/0,F=1/0,N=-1/0,i._selections[o].each(function(){var i=selectTickLabel(this),o=er.bBox(i.node().parentNode);s=Math.min(s,o.top),_=Math.max(_,o.bottom),F=Math.min(F,o.left),N=Math.max(N,o.right)})):(s=0,_=0,F=0,N=0),{top:s,bottom:_,left:F,right:N,height:_-s,width:N-F}}function getPosX(i){return void 0!==i.periodX?i.periodX:i.x}function getTickLabelUV(i){var o=i.ticklabelposition||"",has=function(i){return -1!==o.indexOf(i)},s=has("top"),_=has("left"),F=has("right"),N=has("bottom"),j=has("inside"),Z=N||_||s||F;if(!Z&&!j)return[0,0];var X=i.side,$=Z?(i.tickwidth||0)/2:0,ee=3,et=i.tickfont?i.tickfont.size:12;return(N||s)&&($+=et*eO,ee+=(i.linewidth||0)/2),(_||F)&&($+=(i.linewidth||0)/2,ee+=3),j&&"top"===X&&(ee-=et*(1-eO)),(_||s)&&($=-$),("bottom"===X||"right"===X)&&(ee=-ee),[Z?$:0,j?ee:0]}function tickDataFn(i){return[i.text,i.x,i.axInfo,i.font,i.fontSize,i.fontColor].join("_")}function drawDividers(i,o,s){var _=o._id+"divider",F=s.vals,N=s.layer.selectAll("path."+_).data(F,tickDataFn);N.exit().remove(),N.enter().insert("path",":first-child").classed(_,1).classed("crisp",1).call(et.stroke,o.dividercolor).style("stroke-width",er.crispRound(i,o.dividerwidth,1)+"px"),N.attr("transform",s.transFn).attr("d",s.path)}function approxTitleDepth(i){var o=i.title.font.size,s=(i.title.text.match($.BR_TAG_ALL)||[]).length;return i.title.hasOwnProperty("standoff")?s?o*(eO+s*eD):o*eO:s?o*(s+1)*eD:o}function drawTitle(i,o){var s,_,F,N,j,Z=i._fullLayout,X=o._id,$=X.charAt(0),et=o.title.font.size;if(o.title.hasOwnProperty("standoff"))s=o._depth+o.title.standoff+approxTitleDepth(o);else{var en=insideTicklabelposition(o);if("multicategory"===o.type)s=o._depth;else{var ei=1.5*et;en&&(ei=.5*et,"outside"===o.ticks&&(ei+=o.ticklen)),s=10+ei+(o.linewidth?o.linewidth-1:0)}en||("x"===$?s+="top"===o.side?et*(o.showticklabels?1:0):et*(o.showticklabels?1.5:.5):s+="right"===o.side?et*(o.showticklabels?1:.5):et*(o.showticklabels?.5:0))}var eo=eB.getPxPosition(i,o);if("x"===$?(F=o._offset+o._length/2,N="top"===o.side?eo-s:eo+s):(N=o._offset+o._length/2,F="right"===o.side?eo+s:eo-s,_={rotate:"-90",offset:0}),"multicategory"!==o.type){var es=o._selections[o._id+"tick"];if(j={selection:es,side:o.side},es&&es.node()&&es.node().parentNode){var el=er.getTranslate(es.node().parentNode);j.offsetLeft=el.x,j.offsetTop=el.y}o.title.hasOwnProperty("standoff")&&(j.pad=0)}return o._titleStandoff=s,ee.draw(i,X+"title",{propContainer:o,propName:o._name+".title.text",placeholder:Z._dfltTitle[$],avoid:j,transform:_,attributes:{x:F,y:N,"text-anchor":"middle"}})}function clipEnds(i,o){var s=i.l2p(o);return s>1&&s<i._length-1}function anyCounterAxLineAtZero(i,o,s,_){var F=s._mainAxis;if(F){var N=i._fullLayout,j=o._id.charAt(0),Z=eB.counterLetter(o._id),X=o._offset+(Math.abs(_[0])<Math.abs(_[1])==("x"===j)?0:o._length),$=N._plots[s._mainSubplot];if(!($.mainplotinfo||$).overlays.length)return lineNearZero(s,X);for(var ee=eB.list(i,Z),et=0;et<ee.length;et++){var er=ee[et];if(er._mainAxis===F&&lineNearZero(er,X))return!0}}function lineNearZero(i){if(!i.showline||!i.linewidth)return!1;var s=Math.max((i.linewidth+o.zerolinewidth)/2,1);function closeEnough(i){return"number"==typeof i&&Math.abs(i-X)<s}if(closeEnough(i._mainLinePosition)||closeEnough(i._mainMirrorPosition))return!0;var _=i._linepositions||{};for(var F in _)if(closeEnough(_[F][0])||closeEnough(_[F][1]))return!0}}function hasBarsOrFill(i,o){for(var s=i._fullData,_=o._mainSubplot,F=o._id.charAt(0),N=0;N<s.length;N++){var Z=s[N];if(!0===Z.visible&&Z.xaxis+Z.yaxis===_&&(j.traceIs(Z,"bar-like")&&Z.orientation===({x:"h",y:"v"})[F]||Z.fill&&Z.fill.charAt(Z.fill.length-1)===F))return!0}return!1}function selectTickLabel(i){var o=_.select(i),s=o.select(".text-math-group");return s.empty()?o.select("text"):s}function axAutoMarginID(i){return i._id+".automargin"}function axMirrorAutoMarginID(i){return axAutoMarginID(i)+".mirror"}function rangeSliderAutoMarginID(i){return i._id+".rangeslider"}function makeAxisGroups(i,o){var s=[];for(_=0;_<o.length;_++){var _,F,N,j=[],Z=i._fullData[o[_]].xaxis,X=i._fullData[o[_]].yaxis;if(Z&&X){for(F=0;F<s.length;F++)(-1!==s[F].x.indexOf(Z)||-1!==s[F].y.indexOf(X))&&j.push(F);if(!j.length){s.push({x:[Z],y:[X]});continue}var $=s[j[0]];if(j.length>1)for(F=1;F<j.length;F++)N=s[j[F]],mergeAxisGroups($.x,N.x),mergeAxisGroups($.y,N.y);mergeAxisGroups($.x,[Z]),mergeAxisGroups($.y,[X])}}return s}function mergeAxisGroups(i,o){for(var s=0;s<o.length;s++)-1===i.indexOf(o[s])&&i.push(o[s])}function swapAxisGroup(i,o,s){var _,F,N=[],j=[],X=i.layout;for(_=0;_<o.length;_++)N.push(eB.getFromId(i,o[_]));for(_=0;_<s.length;_++)j.push(eB.getFromId(i,s[_]));var $=Object.keys(en),ee=["anchor","domain","overlaying","position","side","tickangle","editType"],et=["linear","log"];for(_=0;_<$.length;_++){var er=$[_],ei=N[0][er],eo=j[0][er],es=!0,el=!1,ec=!1;if("_"!==er.charAt(0)&&"function"!=typeof ei&&-1===ee.indexOf(er)){for(F=1;F<N.length&&es;F++){var eu=N[F][er];"type"===er&&-1!==et.indexOf(ei)&&-1!==et.indexOf(eu)&&ei!==eu?el=!0:eu!==ei&&(es=!1)}for(F=1;F<j.length&&es;F++){var ef=j[F][er];"type"===er&&-1!==et.indexOf(eo)&&-1!==et.indexOf(ef)&&eo!==ef?ec=!0:j[F][er]!==eo&&(es=!1)}es&&(el&&(X[N[0]._name].type="linear"),ec&&(X[j[0]._name].type="linear"),swapAxisAttrs(X,er,N,j,i._fullLayout._dfltTitle))}}for(_=0;_<i._fullLayout.annotations.length;_++){var ed=i._fullLayout.annotations[_];-1!==o.indexOf(ed.xref)&&-1!==s.indexOf(ed.yref)&&Z.swapAttrs(X.annotations[_],["?"])}}function swapAxisAttrs(i,o,s,_,F){var N,j=Z.nestedProperty,X=j(i[s[0]._name],o).get(),$=j(i[_[0]._name],o).get();for("title"===o&&(X&&X.text===F.x&&(X.text=F.y),$&&$.text===F.y&&($.text=F.x)),N=0;N<s.length;N++)j(i,s[N]._name+"."+o).set($);for(N=0;N<_.length;N++)j(i,_[N]._name+"."+o).set(X)}function isAngular(i){return"angularaxis"===i._id}function moveOutsideBreak(i,o){for(var s=o._rangebreaks.length,_=0;_<s;_++){var F=o._rangebreaks[_];if(i>=F.min&&i<F.max)return F.max}return i}function insideTicklabelposition(i){return -1!==(i.ticklabelposition||"").indexOf("inside")}function hideCounterAxisInsideTickLabels(i,o){insideTicklabelposition(i._anchorAxis||{})&&i._hideCounterAxisInsideTickLabels&&i._hideCounterAxisInsideTickLabels(o)}function incrementShift(i,o,s,_){var F,N="free"!==i.anchor&&(void 0===i.overlaying||!1===i.overlaying)?i._id:i.overlaying;F=_?"right"===i.side?o:-o:o,N in s||(s[N]={}),i.side in s[N]||(s[N][i.side]=0),s[N][i.side]+=F}function setShiftVal(i,o){return i.autoshift?o[i.overlaying][i.side]:i.shift||0}eB.getTickFormat=function(i){var o,s,_;function convertToMs(i){return"string"!=typeof i?i:Number(i.replace("M",""))*ep}function compareLogTicks(i,o){var s=["L","D"];if(typeof i!=typeof o)return"number"==typeof i?1:-1;if("number"==typeof i)return i-o;var _=s.indexOf(i.charAt(0)),F=s.indexOf(o.charAt(0));return _===F?Number(i.replace(/(L|D)/g,""))-Number(o.replace(/(L|D)/g,"")):_-F}function isProperStop(i,o,s){var _=s||function(i){return i},F=o[0],N=o[1];return(!F&&"number"!=typeof F||_(F)<=_(i))&&(!N&&"number"!=typeof N||_(N)>=_(i))}function isProperLogStop(i,o){var s=null===o[0],_=null===o[1],F=compareLogTicks(i,o[0])>=0,N=0>=compareLogTicks(i,o[1]);return(s||F)&&(_||N)}if(i.tickformatstops&&i.tickformatstops.length>0)switch(i.type){case"date":case"linear":for(o=0;o<i.tickformatstops.length;o++)if((_=i.tickformatstops[o]).enabled&&isProperStop(i.dtick,_.dtickrange,convertToMs)){s=_;break}break;case"log":for(o=0;o<i.tickformatstops.length;o++)if((_=i.tickformatstops[o]).enabled&&isProperLogStop(i.dtick,_.dtickrange)){s=_;break}}return s?s.value:i.tickformat},eB.getSubplots=function(i,o){var s=i._fullLayout._subplots,_=s.cartesian.concat(s.gl2d||[]),F=o?eB.findSubplotsWithAxis(_,o):_;return F.sort(function(i,o){var s=i.substr(1).split("y"),_=o.substr(1).split("y");return s[0]===_[0]?+s[1]-+_[1]:+s[0]-+_[0]}),F},eB.findSubplotsWithAxis=function(i,o){for(var s=new RegExp("x"===o._id.charAt(0)?"^"+o._id+"y":o._id+"$"),_=[],F=0;F<i.length;F++){var N=i[F];s.test(N)&&_.push(N)}return _},eB.makeClipPaths=function(i){var o,s,F=i._fullLayout;if(!F._hasOnlyLargeSploms){var N={_offset:0,_length:F.width,_id:""},j={_offset:0,_length:F.height,_id:""},Z=eB.list(i,"x",!0),X=eB.list(i,"y",!0),$=[];for(o=0;o<Z.length;o++)for($.push({x:Z[o],y:j}),s=0;s<X.length;s++)0===o&&$.push({x:N,y:X[s]}),$.push({x:Z[o],y:X[s]});var ee=F._clips.selectAll(".axesclip").data($,function(i){return i.x._id+i.y._id});ee.enter().append("clipPath").classed("axesclip",!0).attr("id",function(i){return"clip"+F._uid+i.x._id+i.y._id}).append("rect"),ee.exit().remove(),ee.each(function(i){_.select(this).select("rect").attr({x:i.x._offset||0,y:i.y._offset||0,width:i.x._length||1,height:i.y._length||1})})}},eB.draw=function(i,o,s){var _=i._fullLayout;"redraw"===o&&_._paper.selectAll("g.subplot").each(function(i){var o=i[0],s=_._plots[o];if(s){var F=s.xaxis,N=s.yaxis;s.xaxislayer.selectAll("."+F._id+"tick").remove(),s.yaxislayer.selectAll("."+N._id+"tick").remove(),s.xaxislayer.selectAll("."+F._id+"tick2").remove(),s.yaxislayer.selectAll("."+N._id+"tick2").remove(),s.xaxislayer.selectAll("."+F._id+"divider").remove(),s.yaxislayer.selectAll("."+N._id+"divider").remove(),s.minorGridlayer&&s.minorGridlayer.selectAll("path").remove(),s.gridlayer&&s.gridlayer.selectAll("path").remove(),s.zerolinelayer&&s.zerolinelayer.selectAll("path").remove(),_._infolayer.select(".g-"+F._id+"title").remove(),_._infolayer.select(".g-"+N._id+"title").remove()}});var F=o&&"redraw"!==o?o:eB.listIds(i),N=eB.list(i).filter(function(i){return i.autoshift}).map(function(i){return i.overlaying});F.map(function(o){var s=eB.getFromId(i,o);if("sync"===s.tickmode&&s.overlaying){var _=F.findIndex(function(i){return i===s.overlaying});_>=0&&F.unshift(F.splice(_,1).shift())}});var j={false:{left:0,right:0}};return Z.syncOrAsync(F.map(function(o){return function(){if(o){var _=eB.getFromId(i,o);s||(s={}),s.axShifts=j,s.overlayingShiftedAx=N;var F=eB.drawOne(i,_,s);return _._shiftPusher&&incrementShift(_,_._fullDepth||0,j,!0),_._r=_.range.slice(),_._rl=Z.simpleMap(_._r,_.r2l),F}}}))},eB.drawOne=function(i,o,s){var _=(s=s||{}).axShifts||{},F=s.overlayingShiftedAx||[];o.setScale();var X=i._fullLayout,$=o._id,ee=$.charAt(0),et=eB.counterLetter($),er=X._plots[o._mainSubplot];if(er){if(o._shiftPusher=o.autoshift||-1!==F.indexOf(o._id)||-1!==F.indexOf(o.overlaying),o._shiftPusher&"free"===o.anchor){var en=o.linewidth/2||0;"inside"===o.ticks&&(en+=o.ticklen),incrementShift(o,en,_,!0),incrementShift(o,o.shift||0,_,!1)}(!0!==s.skipTitle||void 0===o._shift)&&(o._shift=setShiftVal(o,_));var ei=er[ee+"axislayer"],eo=o._mainLinePosition,es=eo+=o._shift,el=o._mainMirrorPosition,ec=o._vals=eB.calcTicks(o),eu=[o.mirror,es,el].join("_");for(eM=0;eM<ec.length;eM++)ec[eM].axInfo=eu;o._selections={},o._tickAngles&&(o._prevTickAngles=o._tickAngles),o._tickAngles={},o._depth=null;var ef={};if(o.visible){var ed=eB.makeTransTickFn(o),eh=eB.makeTransTickLabelFn(o),ep="inside"===o.ticks,eg="outside"===o.ticks;if("boundaries"===o.tickson){var em=getBoundaryVals(o,ec);eP=eB.clipEnds(o,em),eL=ep?eP:em}else eP=eB.clipEnds(o,ec),eL=ep&&"period"!==o.ticklabelmode?eP:ec;var ey=o._gridVals=eP,ev=getDividerVals(o,ec);if(!X._hasOnlyLargeSploms){var ex=o._subplotsWith,e_={};for(eM=0;eM<ex.length;eM++){eC=ex[eM];var ew=(eE=X._plots[eC])[et+"axis"],eT=ew._mainAxis._id;if(!e_[eT]){e_[eT]=1;var ek="x"===ee?"M0,"+ew._offset+"v"+ew._length:"M"+ew._offset+",0h"+ew._length;eB.drawGrid(i,o,{vals:ey,counterAxis:ew,layer:eE.gridlayer.select("."+$),minorLayer:eE.minorGridlayer.select("."+$),path:ek,transFn:ed}),eB.drawZeroLine(i,o,{counterAxis:ew,layer:eE.zerolinelayer,path:ek,transFn:ed})}}}var eA=eB.getTickSigns(o),eS=eB.getTickSigns(o,"minor");if(o.ticks||o.minor&&o.minor.ticks){var eM,eC,eE,eL,eP,eI,eO,eF,ez,eN,ej=eB.makeTickPath(o,es,eA[2]),eV=eB.makeTickPath(o,es,eS[2],{minor:!0});if(o._anchorAxis&&o.mirror&&!0!==o.mirror?(eO=eB.makeTickPath(o,el,eA[3]),eF=eB.makeTickPath(o,el,eS[3],{minor:!0}),ez=ej+eO,eN=eV+eF):(eO="",eF="",ez=ej,eN=eV),o.showdividers&&eg&&"boundaries"===o.tickson){var eU={};for(eM=0;eM<ev.length;eM++)eU[ev[eM].x]=1;eI=function(i){return eU[i.x]?eO:ez}}else eI=function(i){return i.minor?eN:ez}}if(eB.drawTicks(i,o,{vals:eL,layer:ei,path:eI,transFn:ed}),"allticks"===o.mirror){var eH=Object.keys(o._linepositions||{});for(eM=0;eM<eH.length;eM++){eC=eH[eM],eE=X._plots[eC];var eG=o._linepositions[eC]||[],eW=eG[0],eZ=eG[1],eY=eG[2],eX=eB.makeTickPath(o,eW,eY?eA[0]:eS[0],{minor:eY})+eB.makeTickPath(o,eZ,eY?eA[1]:eS[1],{minor:eY});eB.drawTicks(i,o,{vals:eL,layer:eE[ee+"axislayer"],path:eX,transFn:ed})}}var eK=[];if(eK.push(function(){return eB.drawLabels(i,o,{vals:ec,layer:ei,plotinfo:eE,transFn:eh,labelFns:eB.makeLabelFns(o,es)})}),"multicategory"===o.type){var eJ={x:2,y:10}[ee];eK.push(function(){var s=getLabelLevelBbox()[({x:"height",y:"width"})[ee]]+eJ+(o._tickAngles[$+"tick"]?o.tickfont.size*eD:0);return eB.drawLabels(i,o,{vals:getSecondaryLabelVals(o,ec),layer:ei,cls:$+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:ed,labelFns:eB.makeLabelFns(o,es+s*eA[4])})}),eK.push(function(){return o._depth=eA[4]*(getLabelLevelBbox("tick2")[o.side]-es),drawDividers(i,o,{vals:ev,layer:ei,path:eB.makeTickPath(o,es,eA[4],{len:o._depth}),transFn:ed})})}else o.title.hasOwnProperty("standoff")&&eK.push(function(){o._depth=eA[4]*(getLabelLevelBbox()[o.side]-es)});var e$=j.getComponentMethod("rangeslider","isVisible")(o);return s.skipTitle||e$&&"bottom"===o.side||eK.push(function(){return drawTitle(i,o)}),eK.push(function(){var s,_,F,Z,$=o.side.charAt(0),er=eR[o.side].charAt(0),en=eB.getPxPosition(i,o),ei=eg?o.ticklen:0;(o.automargin||e$||o._shiftPusher)&&("multicategory"===o.type?s=getLabelLevelBbox("tick2"):(s=getLabelLevelBbox(),"x"===ee&&"b"===$&&(o._depth=Math.max(s.width>0?s.bottom-en:0,ei))));var eo=0,es=0;if(o._shiftPusher&&(eo=Math.max(ei,s.height>0?"l"===$?en-s.left:s.right-en:0),o.title.text!==X._dfltTitle[ee]&&(es=(o._titleStandoff||0)+(o._titleScoot||0),"l"===$&&(es+=approxTitleDepth(o))),o._fullDepth=Math.max(eo,es)),o.automargin){_={x:0,y:0,r:0,l:0,t:0,b:0};var el=[0,1],ec="number"==typeof o._shift?o._shift:0;if("x"===ee){if("b"===$?_[$]=o._depth:(_[$]=o._depth=Math.max(s.width>0?en-s.top:0,ei),el.reverse()),s.width>0){var eu=s.right-(o._offset+o._length);eu>0&&(_.xr=1,_.r=eu);var ef=o._offset-s.left;ef>0&&(_.xl=0,_.l=ef)}}else if("l"===$?(o._depth=Math.max(s.height>0?en-s.left:0,ei),_[$]=o._depth-ec):(o._depth=Math.max(s.height>0?s.right-en:0,ei),_[$]=o._depth+ec,el.reverse()),s.height>0){var ed=s.bottom-(o._offset+o._length);ed>0&&(_.yb=0,_.b=ed);var eh=o._offset-s.top;eh>0&&(_.yt=1,_.t=eh)}_[et]="free"===o.anchor?o.position:o._anchorAxis.domain[el[0]],o.title.text!==X._dfltTitle[ee]&&(_[$]+=approxTitleDepth(o)+(o.title.standoff||0)),o.mirror&&"free"!==o.anchor&&((F={x:0,y:0,r:0,l:0,t:0,b:0})[er]=o.linewidth,o.mirror&&!0!==o.mirror&&(F[er]+=ei),!0===o.mirror||"ticks"===o.mirror?F[et]=o._anchorAxis.domain[el[1]]:("all"===o.mirror||"allticks"===o.mirror)&&(F[et]=[o._counterDomainMin,o._counterDomainMax][el[1]]))}e$&&(Z=j.getComponentMethod("rangeslider","autoMarginOpts")(i,o)),"string"==typeof o.automargin&&(filterPush(_,o.automargin),filterPush(F,o.automargin)),N.autoMargin(i,axAutoMarginID(o),_),N.autoMargin(i,axMirrorAutoMarginID(o),F),N.autoMargin(i,rangeSliderAutoMarginID(o),Z)}),Z.syncOrAsync(eK)}}function getLabelLevelBbox(i){var s=$+(i||"tick");return ef[s]||(ef[s]=calcLabelLevelBbox(o,s)),ef[s]}},eB.getTickSigns=function(i,o){var s=i._id.charAt(0),_=i.side===({x:"top",y:"right"})[s]?1:-1,F=[-1,1,_,-_];return"inside"!==(o?(i.minor||{}).ticks:i.ticks)==("x"===s)&&(F=F.map(function(i){return-i})),i.side&&F.push({l:-1,t:-1,r:1,b:1}[i.side.charAt(0)]),F},eB.makeTransTickFn=function(i){return"x"===i._id.charAt(0)?function(o){return X(i._offset+i.l2p(o.x),0)}:function(o){return X(0,i._offset+i.l2p(o.x))}},eB.makeTransTickLabelFn=function(i){var o=getTickLabelUV(i),s=o[0],_=o[1];return"x"===i._id.charAt(0)?function(o){return X(s+i._offset+i.l2p(getPosX(o)),_)}:function(o){return X(_,s+i._offset+i.l2p(getPosX(o)))}},eB.makeTickPath=function(i,o,s,_){_||(_={});var F=_.minor;if(F&&!i.minor)return"";var N=void 0!==_.len?_.len:F?i.minor.ticklen:i.ticklen,j=i._id.charAt(0),Z=(i.linewidth||1)/2;return"x"===j?"M0,"+(o+Z*s)+"v"+N*s:"M"+(o+Z*s)+",0h"+N*s},eB.makeLabelFns=function(i,o,s){var _,N,j,X,$,ee=i.ticklabelposition||"",has=function(i){return -1!==ee.indexOf(i)},et=has("top"),er=has("left"),en=has("right"),ei=has("bottom")||er||et||en,eo=has("inside"),es="inside"===ee&&"inside"===i.ticks||!eo&&"outside"===i.ticks&&"boundaries"!==i.tickson,el=0,ec=0,eu=es?i.ticklen:0;if(eo?eu*=-1:ei&&(eu=0),es&&(el+=eu,s)){var ef=Z.deg2rad(s);el=eu*Math.cos(ef)+1,ec=eu*Math.sin(ef)}i.showticklabels&&(es||i.showline)&&(el+=.2*i.tickfont.size);var ed={labelStandoff:el+=(i.linewidth||1)/2*(eo?-1:1),labelShift:ec},eh=0,ep=i.side,eg=i._id.charAt(0),em=i.tickangle;if("x"===eg)X=($=!eo&&"bottom"===ep||eo&&"top"===ep)?1:-1,eo&&(X*=-1),_=ec*X,N=o+el*X,j=$?1:-.2,90===Math.abs(em)&&(eo?j+=eI:j=-90===em&&"bottom"===ep?eO:90===em&&"top"===ep?eI:.5,eh=eI/2*(em/90)),ed.xFn=function(i){return i.dx+_+eh*i.fontSize},ed.yFn=function(i){return i.dy+N+i.fontSize*j},ed.anchorFn=function(i,o){if(ei){if(er)return"end";if(en)return"start"}return F(o)&&0!==o&&180!==o?o*X<0!==eo?"end":"start":"middle"},ed.heightFn=function(o,s,_){return s<-60||s>60?-.5*_:"top"===i.side!==eo?-_:0};else if("y"===eg){if(X=($=!eo&&"left"===ep||eo&&"right"===ep)?1:-1,eo&&(X*=-1),_=el,N=ec*X,j=0,eo||90!==Math.abs(em)||(j=-90===em&&"left"===ep||90===em&&"right"===ep?eO:.5),eo){var ey=F(em)?+em:0;0!==ey&&(eh=Math.abs(Math.sin(Z.deg2rad(ey)))*eO*X,j=0)}ed.xFn=function(i){return i.dx+o-(_+i.fontSize*j)*X+eh*i.fontSize},ed.yFn=function(i){return i.dy+N+i.fontSize*eI},ed.anchorFn=function(i,o){return F(o)&&90===Math.abs(o)?"middle":$?"end":"start"},ed.heightFn=function(o,s,_){return"right"===i.side&&(s*=-1),s<-30?-_:s<30?-.5*_:0}}return ed},eB.drawTicks=function(i,o,s){s=s||{};var F=o._id+"tick",N=[].concat(o.minor&&o.minor.ticks?s.vals.filter(function(i){return i.minor&&!i.noTick}):[]).concat(o.ticks?s.vals.filter(function(i){return!i.minor&&!i.noTick}):[]),j=s.layer.selectAll("path."+F).data(N,tickDataFn);j.exit().remove(),j.enter().append("path").classed(F,1).classed("ticks",1).classed("crisp",!1!==s.crisp).each(function(i){return et.stroke(_.select(this),i.minor?o.minor.tickcolor:o.tickcolor)}).style("stroke-width",function(s){return er.crispRound(i,s.minor?o.minor.tickwidth:o.tickwidth,1)+"px"}).attr("d",s.path).style("display",null),hideCounterAxisInsideTickLabels(o,[eC]),j.attr("transform",s.transFn)},eB.drawGrid=function(i,o,s){if(s=s||{},"sync"!==o.tickmode){var F=o._id+"grid",N=o.minor&&o.minor.showgrid,j=N?s.vals.filter(function(i){return i.minor}):[],Z=o.showgrid?s.vals.filter(function(i){return!i.minor}):[],X=s.counterAxis;if(X&&eB.shouldShowZeroLine(i,o,X))for(var $="array"===o.tickmode,ee=0;ee<Z.length;ee++){var en=Z[ee].x;if($?!en:Math.abs(en)<o.dtick/100){if(Z=Z.slice(0,ee).concat(Z.slice(ee+1)),$)ee--;else break}}o._gw=er.crispRound(i,o.gridwidth,1);for(var ei=N?er.crispRound(i,o.minor.gridwidth,1):0,eo=s.layer,es=s.minorLayer,el=1;el>=0;el--){var ec=el?eo:es;if(ec){var eu=ec.selectAll("path."+F).data(el?Z:j,tickDataFn);eu.exit().remove(),eu.enter().append("path").classed(F,1).classed("crisp",!1!==s.crisp),eu.attr("transform",s.transFn).attr("d",s.path).each(function(i){return et.stroke(_.select(this),i.minor?o.minor.gridcolor:o.gridcolor||"#ddd")}).style("stroke-dasharray",function(i){return er.dashStyle(i.minor?o.minor.griddash:o.griddash,i.minor?o.minor.gridwidth:o.gridwidth)}).style("stroke-width",function(i){return(i.minor?ei:o._gw)+"px"}).style("display",null),"function"==typeof s.path&&eu.attr("d",s.path)}}hideCounterAxisInsideTickLabels(o,[eS,eM])}},eB.drawZeroLine=function(i,o,s){s=s||s;var _=o._id+"zl",F=eB.shouldShowZeroLine(i,o,s.counterAxis),N=s.layer.selectAll("path."+_).data(F?[{x:0,id:o._id}]:[]);N.exit().remove(),N.enter().append("path").classed(_,1).classed("zl",1).classed("crisp",!1!==s.crisp).each(function(){s.layer.selectAll("path").sort(function(i,o){return eN(i.id,o.id)})}),N.attr("transform",s.transFn).attr("d",s.path).call(et.stroke,o.zerolinecolor||et.defaultLine).style("stroke-width",er.crispRound(i,o.zerolinewidth,o._gw||1)+"px").style("display",null),hideCounterAxisInsideTickLabels(o,[eA])},eB.drawLabels=function(i,o,s){s=s||{};var N=i._fullLayout,j=o._id,ee=j.charAt(0),et=s.cls||j+"tick",en=s.vals.filter(function(i){return i.text}),ei=s.labelFns,eo=s.secondary?0:o.tickangle,es=(o._prevTickAngles||{})[et],el=s.layer.selectAll("g."+et).data(o.showticklabels?en:[],tickDataFn),ec=[];function positionLabels(i,N){i.each(function(i){var j=_.select(this),Z=j.select(".text-math-group"),ee=ei.anchorFn(i,N),et=s.transFn.call(j.node(),i)+(F(N)&&0!=+N?" rotate("+N+","+ei.xFn(i)+","+(ei.yFn(i)-i.fontSize/2)+")":""),en=$.lineCount(j),eo=eD*i.fontSize,es=ei.heightFn(i,F(N)?+N:0,(en-1)*eo);if(es&&(et+=X(0,es)),Z.empty()){var el=j.select("text");el.attr({transform:et,"text-anchor":ee}),el.style("opacity",1),o._adjustTickLabelsOverflow&&o._adjustTickLabelsOverflow()}else{var ec=er.bBox(Z.node()).width;Z.attr("transform",et+X(ec*({end:-.5,start:.5})[ee],0))}})}function allLabelsReady(){return ec.length&&Promise.all(ec)}el.enter().append("g").classed(et,1).append("text").attr("text-anchor","middle").each(function(o){var s=_.select(this),F=i._promises.length;s.call($.positionText,ei.xFn(o),ei.yFn(o)).call(er.font,o.font,o.fontSize,o.fontColor).text(o.text).call($.convertToTspans,i),i._promises[F]?ec.push(i._promises.pop().then(function(){positionLabels(s,eo)})):positionLabels(s,eo)}),hideCounterAxisInsideTickLabels(o,[eE]),el.exit().remove(),s.repositionOnUpdate&&el.each(function(i){_.select(this).select("text").call($.positionText,ei.xFn(i),ei.yFn(i))}),o._adjustTickLabelsOverflow=function(){var s=o.ticklabeloverflow;if(s&&"allow"!==s){var F=-1!==s.indexOf("hide"),j="x"===o._id.charAt(0),X=0,$=j?i._fullLayout.width:i._fullLayout.height;if(-1!==s.indexOf("domain")){var ee=Z.simpleMap(o.range,o.r2l);X=o.l2p(ee[0])+o._offset,$=o.l2p(ee[1])+o._offset}var et=Math.min(X,$),en=Math.max(X,$),ei=o.side,eo=1/0,es=-1/0;for(var ec in el.each(function(i){var s=_.select(this);if(s.select(".text-math-group").empty()){var N=er.bBox(s.node()),Z=0;j?N.right>en?Z=1:N.left<et&&(Z=1):N.bottom>en?Z=1:N.top+(o.tickangle?0:i.fontSize/4)<et&&(Z=1);var X=s.select("text");Z?F&&X.style("opacity",0):(X.style("opacity",1),eo="bottom"===ei||"right"===ei?Math.min(eo,j?N.top:N.left):-1/0,es="top"===ei||"left"===ei?Math.max(es,j?N.bottom:N.right):1/0)}}),N._plots){var eu=N._plots[ec];if(o._id===eu.xaxis._id||o._id===eu.yaxis._id){var ef=j?eu.yaxis:eu.xaxis;ef&&(ef["_visibleLabelMin_"+o._id]=eo,ef["_visibleLabelMax_"+o._id]=es)}}}},o._hideCounterAxisInsideTickLabels=function(i){var s="x"===o._id.charAt(0),F=[];for(var j in N._plots){var Z=N._plots[j];(o._id===Z.xaxis._id||o._id===Z.yaxis._id)&&F.push(s?Z.yaxis:Z.xaxis)}F.forEach(function(s,F){s&&insideTicklabelposition(s)&&(i||[eA,eM,eS,eC,eE]).forEach(function(i){var j="tick"===i.K&&"text"===i.L&&"period"===o.ticklabelmode,Z=N._plots[o._mainSubplot];(i.K===eA.K?Z.zerolinelayer.selectAll("."+o._id+"zl"):i.K===eM.K?Z.minorGridlayer.selectAll("."+o._id):i.K===eS.K?Z.gridlayer.selectAll("."+o._id):Z[o._id.charAt(0)+"axislayer"]).each(function(){var N=_.select(this);i.L&&(N=N.selectAll(i.L)),N.each(function(N){var Z=o.l2p(j?getPosX(N):N.x)+o._offset,X=_.select(this);Z<o["_visibleLabelMax_"+s._id]&&Z>o["_visibleLabelMin_"+s._id]?X.style("display","none"):"tick"!==i.K||F||X.style("display",null)})})})})},positionLabels(el,es+1?es:eo);var eu=null;function fixLabelOverlaps(){if(positionLabels(el,eo),en.length&&"x"===ee&&!F(eo)&&("log"!==o.type||"D"!==String(o.dtick).charAt(0))){eu=0;var i,_=0,N=[];if(el.each(function(i){_=Math.max(_,i.fontSize);var s=o.l2p(i.x),F=selectTickLabel(this),j=er.bBox(F.node());N.push({top:0,bottom:10,height:10,left:s-j.width/2,right:s+j.width/2+2,width:j.width+2})}),("boundaries"===o.tickson||o.showdividers)&&!s.secondary){var j=2;for(o.ticks&&(j+=o.tickwidth/2),i=0;i<N.length;i++){var X=en[i].xbnd,$=N[i];if(null!==X[0]&&$.left-o.l2p(X[0])<j||null!==X[1]&&o.l2p(X[1])-$.right<j){eu=90;break}}}else{var et=en.length,ei=Math.abs((en[et-1].x-en[0].x)*o._m)/(et-1),es=o.ticklabelposition||"",has=function(i){return -1!==es.indexOf(i)},ec=has("top"),ef=has("left"),ed=has("right"),eh=has("bottom")||ef||ec||ed?(o.tickwidth||0)+6:0,ep=ei<2.5*_||"multicategory"===o.type||"realaxis"===o._name;for(i=0;i<N.length-1;i++)if(Z.bBoxIntersect(N[i],N[i+1],eh)){eu=ep?90:30;break}}eu&&positionLabels(el,eu)}}o._selections&&(o._selections[et]=el);var ef=[allLabelsReady];o.automargin&&N._redrawFromAutoMarginCount&&90===es?(eu=90,ef.push(function(){positionLabels(el,es)})):ef.push(fixLabelOverlaps),o._tickAngles&&ef.push(function(){o._tickAngles[et]=null===eu?F(eo)?eo:0:eu});var computeTickLabelBoundingBoxes=function(){var i=0,s=0;return el.each(function(_,F){var N,j=selectTickLabel(this);j.select(".text-math-group").empty()&&(o._vals[F]&&(N=o._vals[F].bb||er.bBox(j.node()),o._vals[F].bb=N),i=Math.max(i,N.width),s=Math.max(s,N.height))}),{labelsMaxW:i,labelsMaxH:s}},ed=o._anchorAxis;if(ed&&(ed.autorange||ed.insiderange)&&insideTicklabelposition(o)&&!ej(N,o._id)&&(N._insideTickLabelsUpdaterange||(N._insideTickLabelsUpdaterange={}),ed.autorange&&(N._insideTickLabelsUpdaterange[ed._name+".autorange"]=ed.autorange,ef.push(computeTickLabelBoundingBoxes)),ed.insiderange)){var eh=computeTickLabelBoundingBoxes(),ep="y"===o._id.charAt(0)?eh.labelsMaxW:eh.labelsMaxH;ep+=6,"inside"===o.ticklabelposition&&(ep+=o.ticklen||0);var eg="right"===o.side||"top"===o.side?1:-1,em=1===eg?1:0,ey=1===eg?0:1,ev=[];ev[ey]=ed.range[ey];var ex=ed.d2p(ed.range[em]),e_=Math.abs(ed.d2p(ed.range[ey])-ex);e_-ep>0?(e_-=ep,ep*=1+ep/e_):ep=0,"y"!==o._id.charAt(0)&&(ep=-ep),ev[em]=ed.p2d(ed.d2p(ed.range[em])+eg*ep),"min"===ed.autorange||"max reversed"===ed.autorange?(ev[0]=null,ed._rangeInitial0=void 0,ed._rangeInitial1=void 0):("max"===ed.autorange||"min reversed"===ed.autorange)&&(ev[1]=null,ed._rangeInitial0=void 0,ed._rangeInitial1=void 0),N._insideTickLabelsUpdaterange[ed._name+".range"]=ev}var ew=Z.syncOrAsync(ef);return ew&&ew.then&&i._promises.push(ew),ew},eB.getPxPosition=function(i,o){var s,_=i._fullLayout._size,F=o._id.charAt(0),N=o.side;return("free"!==o.anchor?s=o._anchorAxis:"x"===F?s={_offset:_.t+(1-(o.position||0))*_.h,_length:0}:"y"===F&&(s={_offset:_.l+(o.position||0)*_.w+o._shift,_length:0}),"top"===N||"left"===N)?s._offset:"bottom"===N||"right"===N?s._offset+s._length:void 0},eB.shouldShowZeroLine=function(i,o,s){var _=Z.simpleMap(o.range,o.r2l);return _[0]*_[1]<=0&&o.zeroline&&("linear"===o.type||"-"===o.type)&&!(o.rangebreaks&&o.maskBreaks(0)===ek)&&(clipEnds(o,0)||!anyCounterAxLineAtZero(i,o,s,_)||hasBarsOrFill(i,o))},eB.clipEnds=function(i,o){return o.filter(function(o){return clipEnds(i,o.x)})},eB.allowAutoMargin=function(i){for(var o=eB.list(i,"",!0),s=0;s<o.length;s++){var _=o[s];_.automargin&&(N.allowAutoMargin(i,axAutoMarginID(_)),_.mirror&&N.allowAutoMargin(i,axMirrorAutoMarginID(_))),j.getComponentMethod("rangeslider","isVisible")(_)&&N.allowAutoMargin(i,rangeSliderAutoMarginID(_))}},eB.swap=function(i,o){for(var s=makeAxisGroups(i,o),_=0;_<s.length;_++)swapAxisGroup(i,s[_].x,s[_].y)}},4322:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(50606).BADNUM,j=F.isArrayOrTypedArray,Z=F.isDateTime,X=F.cleanNumber,$=Math.round;function hasTypeNumber(i,o){return o?_(i):"number"==typeof i}function linearOK(i,o){for(var s=i.length,_=0;_<s;_++)if(hasTypeNumber(i[_],o))return!0;return!1}function moreDates(i,o){for(var s=i.length,F=getIncrement(s),N=0,j=0,X={},ee=0;ee<s;ee+=F){var et=i[$(ee)],er=String(et);!X[er]&&(X[er]=1,Z(et,o)&&N++,_(et)&&j++)}return N>2*j}function getIncrement(i){return Math.max(1,(i-1)/1e3)}function category(i,o){for(var s=i.length,_=getIncrement(s),F=0,j=0,Z={},ee=0;ee<s;ee+=_){var et=i[$(ee)],er=String(et);if(!Z[er]){Z[er]=1;var en=typeof et;"boolean"===en?j++:(o?X(et)!==N:"number"===en)?F++:"string"===en&&j++}}return j>2*F}function multiCategory(i){return j(i[0])&&j(i[1])}i.exports=function(i,o,s){var _=i,F=s.noMultiCategory;if(j(_)&&!_.length)return"-";if(!F&&multiCategory(_))return"multicategory";if(F&&Array.isArray(_[0])){for(var N=[],Z=0;Z<_.length;Z++)if(j(_[Z]))for(var X=0;X<_[Z].length;X++)N.push(_[Z][X]);_=N}if(moreDates(_,o))return"date";var $="strict"!==s.autotypenumbers;return category(_,$)?"category":linearOK(_,$)?"linear":"-"}},71453:function(i,o,s){"use strict";var _=s(92770),F=s(73972),N=s(71828),j=s(44467),Z=s(85501),X=s(13838),$=s(26218),ee=s(38701),et=s(96115),er=s(89426),en=s(15258),ei=s(92128),eo=s(23608),es=s(21994),el=s(85555).WEEKDAY_PATTERN,ec=s(85555).HOUR_PATTERN;function rangebreaksDefaults(i,o,s){function coerce(s,_){return N.coerce(i,o,X.rangebreaks,s,_)}if(coerce("enabled")){var F=coerce("bounds");if(F&&F.length>=2){var j,Z,$="";if(2===F.length){for(j=0;j<2;j++)if(Z=indexOfDay(F[j])){$=el;break}}var ee=coerce("pattern",$);if(ee===el)for(j=0;j<2;j++)(Z=indexOfDay(F[j]))&&(o.bounds[j]=F[j]=Z-1);if(ee)for(j=0;j<2;j++)switch(Z=F[j],ee){case el:if(!_(Z)||(Z=+Z)!==Math.floor(Z)||Z<0||Z>=7){o.enabled=!1;return}o.bounds[j]=F[j]=Z;break;case ec:if(!_(Z)||(Z=+Z)<0||Z>24){o.enabled=!1;return}o.bounds[j]=F[j]=Z}if(!1===s.autorange){var et=s.range;if(et[0]<et[1]){if(F[0]<et[0]&&F[1]>et[1]){o.enabled=!1;return}}else if(F[0]>et[0]&&F[1]<et[1]){o.enabled=!1;return}}}else{var er=coerce("values");if(er&&er.length)coerce("dvalue");else{o.enabled=!1;return}}}}i.exports=function(i,o,s,_,ec){var eu,ef,ed=_.letter,eh=_.font||{},ep=_.splomStash||{},eg=s("visible",!_.visibleDflt),em=o._template||{},ey=o.type||em.type||"-";"date"!==ey||(F.getComponentMethod("calendars","handleDefaults")(i,o,"calendar",_.calendar),_.noTicklabelmode||(eu=s("ticklabelmode")));var ev="";_.noTicklabelposition&&"multicategory"!==ey||(ev=N.coerce(i,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===eu?["outside","inside"]:"x"===ed?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||s("ticklabeloverflow",-1!==ev.indexOf("inside")?"hide past domain":"category"===ey||"multicategory"===ey?"allow":"hide past div"),es(o,ec),eo(i,o,s,_),en(i,o,s,_),"category"===ey||_.noHover||s("hoverformat");var ex=s("color"),e_=ex!==X.color.dflt?ex:eh.color,ew=ep.label||ec._dfltTitle[ed];if(er(i,o,s,ey,_),!eg)return o;s("title.text",ew),N.coerceFont(s,"title.font",{family:eh.family,size:N.bigFont(eh.size),color:e_}),$(i,o,s,ey);var eT=_.hasMinor;if(eT&&(j.newContainer(o,"minor"),$(i,o,s,ey,{isMinor:!0})),et(i,o,s,ey,_),ee(i,o,s,_),eT){var ek=_.isMinor;_.isMinor=!0,ee(i,o,s,_),_.isMinor=ek}ei(i,o,s,{dfltColor:ex,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:eT,attributes:X}),!eT||o.minor.ticks||o.minor.showgrid||delete o.minor,(o.showline||o.ticks)&&s("mirror");var eA="multicategory"===ey;if(!_.noTickson&&("category"===ey||eA)&&(o.ticks||o.showgrid)&&(eA&&(ef="boundaries"),"boundaries"===s("tickson",ef)&&delete o.ticklabelposition),eA&&s("showdividers")&&(s("dividercolor"),s("dividerwidth")),"date"===ey){if(Z(i,o,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:rangebreaksDefaults}),o.rangebreaks.length){for(var eS=0;eS<o.rangebreaks.length;eS++)if(o.rangebreaks[eS].pattern===el){o._hasDayOfWeekBreaks=!0;break}if(es(o,ec),ec._has("scattergl")||ec._has("splom"))for(var eM=0;eM<_.data.length;eM++){var eC=_.data[eM];("scattergl"===eC.type||"splom"===eC.type)&&(eC.visible=!1,N.warn(eC.type+" traces do not work on axes with rangebreaks. Setting trace "+eC.index+" to `visible: false`."))}}else delete o.rangebreaks}return o};var eu={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function indexOfDay(i){if("string"==typeof i)return eu[i.substr(0,3).toLowerCase()]}},12663:function(i,o,s){"use strict";var _=s(31562),F=_.FORMAT_LINK,N=_.DATE_FORMAT_LINK;function axisHoverFormat(i,o){return{valType:"string",dflt:"",editType:"none",description:(o?descriptionOnlyNumbers:descriptionWithDates)("hover text",i)+["By default the values are formatted using "+(o?"generic number format":"`"+i+"axis.hoverformat`")+"."].join(" ")}}function descriptionOnlyNumbers(i,o){return["Sets the "+i+" formatting rule"+(o?"for `"+o+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+F+"."].join(" ")}function descriptionWithDates(i,o){return descriptionOnlyNumbers(i,o)+[" And for dates see: "+N+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}i.exports={axisHoverFormat:axisHoverFormat,descriptionOnlyNumbers:descriptionOnlyNumbers,descriptionWithDates:descriptionWithDates}},41675:function(i,o,s){"use strict";var _=s(73972),F=s(85555);function isFound(i,o){if(o&&o.length){for(var s=0;s<o.length;s++)if(o[s][i])return!0}return!1}o.id2name=function(i){if("string"==typeof i&&i.match(F.AX_ID_PATTERN)){var o=i.split(" ")[0].substr(1);return"1"===o&&(o=""),i.charAt(0)+"axis"+o}},o.name2id=function(i){if(i.match(F.AX_NAME_PATTERN)){var o=i.substr(5);return"1"===o&&(o=""),i.charAt(0)+o}},o.cleanId=function(i,o,s){var _=/( domain)$/.test(i);if("string"==typeof i&&i.match(F.AX_ID_PATTERN)&&(!o||i.charAt(0)===o)&&(!_||s)){var N=i.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===N&&(N=""),i.charAt(0)+N+(_&&s?" domain":"")}},o.list=function(i,s,_){var F,N=i._fullLayout;if(!N)return[];var j=o.listIds(i,s),Z=Array(j.length);for(F=0;F<j.length;F++){var X=j[F];Z[F]=N[X.charAt(0)+"axis"+X.substr(1)]}if(!_){var $=N._subplots.gl3d||[];for(F=0;F<$.length;F++){var ee=N[$[F]];s?Z.push(ee[s+"axis"]):Z.push(ee.xaxis,ee.yaxis,ee.zaxis)}}return Z},o.listIds=function(i,o){var s=i._fullLayout;if(!s)return[];var _=s._subplots;return o?_[o+"axis"]:_.xaxis.concat(_.yaxis)},o.getFromId=function(i,s,_){var F=i._fullLayout;return s=void 0===s||"string"!=typeof s?s:s.replace(" domain",""),"x"===_?s=s.replace(/y[0-9]*/,""):"y"===_&&(s=s.replace(/x[0-9]*/,"")),F[o.id2name(s)]},o.getFromTrace=function(i,s,F){var N=i._fullLayout,j=null;if(_.traceIs(s,"gl3d")){var Z=s.scene;"scene"===Z.substr(0,5)&&(j=N[Z][F+"axis"])}else j=o.getFromId(i,s[F+"axis"]||F);return j},o.idSort=function(i,o){var s=i.charAt(0),_=o.charAt(0);return s!==_?s>_?1:-1:+(i.substr(1)||1)-+(o.substr(1)||1)},o.ref2id=function(i){return!!/^[xyz]/.test(i)&&i.split(" ")[0]},o.isLinked=function(i,o){return isFound(o,i._axisMatchGroups)||isFound(o,i._axisConstraintGroups)}},15258:function(i){"use strict";function findCategories(i,o){var s,_,F,N=o.dataAttr||i._id.charAt(0),j={};if(o.axData)s=o.axData;else for(_=0,s=[];_<o.data.length;_++){var Z=o.data[_];Z[N+"axis"]===i._id&&s.push(Z)}for(_=0;_<s.length;_++){var X=s[_][N];for(F=0;F<X.length;F++){var $=X[F];null!=$&&(j[$]=1)}}return Object.keys(j)}i.exports=function(i,o,s,_){if("category"===o.type){var F,N,j=i.categoryarray,Z=Array.isArray(j)&&j.length>0;Z&&(F="array");var X=s("categoryorder",F);"array"===X&&(N=s("categoryarray")),Z||"array"!==X||(X=o.categoryorder="trace"),"trace"===X?o._initialCategories=[]:"array"===X?o._initialCategories=N.slice():(N=findCategories(o,_).sort(),"category ascending"===X?o._initialCategories=N:"category descending"===X&&(o._initialCategories=N.reverse()))}}},66287:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(50606),j=N.ONEDAY,Z=N.ONEWEEK;o.dtick=function(i,o){var s="log"===o,F="date"===o,N=F?j:1;if(!i)return N;if(_(i))return(i=Number(i))<=0?N:"category"===o?Math.max(1,Math.round(i)):F?Math.max(.1,i):i;if("string"!=typeof i||!(F||s))return N;var Z=i.charAt(0),X=i.substr(1);return(X=_(X)?Number(X):0)<=0||!(F&&"M"===Z&&X===Math.round(X)||s&&"L"===Z||s&&"D"===Z&&(1===X||2===X))?N:i},o.tick0=function(i,o,s,N){return"date"===o?F.cleanDate(i,F.dateTick0(s,N%Z==0?1:0)):"D1"!==N&&"D2"!==N?_(i)?Number(i):0:void 0}},85555:function(i,o,s){"use strict";var _=s(30587).counter;i.exports={idRegex:{x:_("x","( domain)?"),y:_("y","( domain)?")},attrRegex:_("[xy]axis"),xAxisMatch:_("xaxis"),yAxisMatch:_("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(i,o,s){"use strict";var _=s(71828),F=s(71739),N=s(41675).id2name,j=s(13838),Z=s(42449),X=s(21994),$=s(50606).ALMOST_EQUAL,ee=s(18783).FROM_BL;function handleOneAxDefaults(i,o,s){var F,Z,X,$,ee=s.axIds,et=s.layoutOut,er=s.hasImage,en=et._axisConstraintGroups,ei=et._axisMatchGroups,eo=o._id,es=eo.charAt(0),el=((et._splomAxes||{})[es]||{})[eo]||{},ec=o._id,eu="x"===ec.charAt(0);function coerce(s,F){return _.coerce(i,o,j,s,F)}o._matchGroup=null,o._constraintGroup=null,coerce("constrain",er?"domain":"range"),_.coerce(i,o,{constraintoward:{valType:"enumerated",values:eu?["left","center","right"]:["bottom","middle","top"],dflt:eu?"center":"middle"}},"constraintoward");var ef=o.type,ed=[];for(F=0;F<ee.length;F++)(Z=ee[F])!==ec&&et[N(Z)].type===ef&&ed.push(Z);var eh=getConstraintGroup(en,ec);if(eh){var ep=[];for(F=0;F<ed.length;F++)eh[Z=ed[F]]||ep.push(Z);ed=ep}var eg=ed.length;eg&&(i.matches||el.matches)&&(X=_.coerce(i,o,{matches:{valType:"enumerated",values:ed,dflt:-1!==ed.indexOf(el.matches)?el.matches:void 0}},"matches"));var em=er&&!eu?o.anchor:void 0;if(eg&&!X&&(i.scaleanchor||em)&&($=_.coerce(i,o,{scaleanchor:{valType:"enumerated",values:ed.concat([!1])}},"scaleanchor",em)),X){o._matchGroup=updateConstraintGroups(ei,ec,X,1);var ey=et[N(X)],ev=extent(et,o)/extent(et,ey);eu!==("x"===X.charAt(0))&&(ev=(eu?"x":"y")+ev),updateConstraintGroups(en,ec,X,ev)}else i.matches&&-1!==ee.indexOf(i.matches)&&_.warn("ignored "+o._name+'.matches: "'+i.matches+'" to avoid an infinite loop');if($){var ex=coerce("scaleratio");ex||(ex=o.scaleratio=1),updateConstraintGroups(en,ec,$,ex)}else i.scaleanchor&&-1!==ee.indexOf(i.scaleanchor)&&_.warn("ignored "+o._name+'.scaleanchor: "'+i.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function extent(i,o){var s=o.domain;return s||(s=i[N(o.overlaying)].domain),s[1]-s[0]}function getConstraintGroup(i,o){for(var s=0;s<i.length;s++)if(i[s][o])return i[s];return null}function updateConstraintGroups(i,o,s,_){var F,N,j,Z,X,$=getConstraintGroup(i,o);null===$?(($={})[o]=1,X=i.length,i.push($)):X=i.indexOf($);var ee=Object.keys($);for(F=0;F<i.length;F++)if(j=i[F],F!==X&&j[s]){var et=j[s];for(N=0;N<ee.length;N++)j[Z=ee[N]]=multiplyScales(et,multiplyScales(_,$[Z]));i.splice(X,1);return}if(1!==_)for(N=0;N<ee.length;N++){var er=ee[N];$[er]=multiplyScales(_,$[er])}$[s]=1}function multiplyScales(i,o){var s,_,F="",N="";"string"==typeof i&&(s=(F=i.match(/^[xy]*/)[0]).length,i=+i.substr(s)),"string"==typeof o&&(_=(N=o.match(/^[xy]*/)[0]).length,o=+o.substr(_));var j=i*o;return s||_?s&&_&&F.charAt(0)!==N.charAt(0)?s===_?j:(s>_?F.substr(_):N.substr(s))+j:F+N+i*o:j}function finalRatios(i,o){for(var s=o._size,_=s.h/s.w,F={},N=Object.keys(i),j=0;j<N.length;j++){var Z=N[j],X=i[Z];if("string"==typeof X){var $=X.match(/^[xy]*/)[0],ee=$.length;X=+X.substr(ee);for(var et="y"===$.charAt(0)?_:1/_,er=0;er<ee;er++)X*=et}F[Z]=X}return F}function updateDomain(i,o){var s=i._inputDomain,_=ee[i.constraintoward],F=s[0]+(s[1]-s[0])*_;i.domain=i._input.domain=[F+(s[0]-F)/o,F+(s[1]-F)/o],i.setScale()}o.handleDefaults=function(i,o,s){var F=s.axIds,j=s.axHasImage,Z=o._axisConstraintGroups=[],$=o._axisMatchGroups=[];for(eo=0;eo<F.length;eo++)handleOneAxDefaults(eu=i[ec=N(F[eo])],ef=o[ec],{axIds:F,layoutOut:o,hasImage:j[ec]});function stash(i,s){for(eo=0;eo<i.length;eo++)for(el in es=i[eo])o[N(el)][s]=es}for(stash($,"_matchGroup"),eo=0;eo<Z.length;eo++)for(el in es=Z[eo])if((ef=o[N(el)]).fixedrange){for(var ee in es){var et=N(ee);!1===(i[et]||{}).fixedrange&&_.warn("fixedrange was specified as false for axis "+et+" but was overridden because another axis in its constraint group has fixedrange true"),o[et].fixedrange=!0}break}for(eo=0;eo<Z.length;){for(el in es=Z[eo]){(ef=o[N(el)])._matchGroup&&Object.keys(ef._matchGroup).length===Object.keys(es).length&&(Z.splice(eo,1),eo--);break}eo++}stash(Z,"_constraintGroup");var er=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],en=!1,ei=!1;function setAttrVal(){eh=ef[ed],"rangebreaks"===ed&&(ei=ef._hasDayOfWeekBreaks)}for(eo=0;eo<$.length;eo++){es=$[eo];for(var eo,es,el,ec,eu,ef,ed,eh,ep,eg=0;eg<er.length;eg++){for(el in ed=er[eg],eh=null,es)if(eu=i[ec=N(el)],ef=o[ec],ed in ef){if(!ef.matches&&(ep=ef,ed in eu)){setAttrVal();break}null===eh&&ed in eu&&setAttrVal()}if("range"===ed&&eh&&eu.range&&2===eu.range.length&&null!==eu.range[0]&&null!==eu.range[1]&&(en=!0),"autorange"===ed&&null===eh&&en&&(eh=!1),null===eh&&ed in ep&&(eh=ep[ed]),null!==eh)for(el in es)(ef=o[N(el)])[ed]="range"===ed?eh.slice():eh,"rangebreaks"===ed&&(ef._hasDayOfWeekBreaks=ei,X(ef,o))}}},o.enforce=function(i){var o=i._fullLayout,s=o._axisConstraintGroups||[];for(el=0;el<s.length;el++){var _=Object.keys(eu=finalRatios(s[el],o)),j=1/0,X=0,ee=1/0,et={},er={},en=!1;for(ec=0;ec<_.length;ec++)er[ef=_[ec]]=ed=o[N(ef)],ed._inputDomain?ed.domain=ed._inputDomain.slice():ed._inputDomain=ed.domain.slice(),ed._inputRange||(ed._inputRange=ed.range.slice()),ed.setScale(),et[ef]=eh=Math.abs(ed._m)/eu[ef],j=Math.min(j,eh),"domain"!==ed.constrain&&ed._constraintShrinkable||(ee=Math.min(ee,eh)),delete ed._constraintShrinkable,X=Math.max(X,eh),"domain"===ed.constrain&&(en=!0);if(!(j>$*X)||en){for(ec=0;ec<_.length;ec++)if(eh=et[ef=_[ec]],ep=(ed=er[ef]).constrain,eh!==ee||"domain"===ep){if(eg=eh/ee,"range"===ep)Z(ed,eg);else{var ei=ed._inputDomain,eo=(ed.domain[1]-ed.domain[0])/(ei[1]-ei[0]),es=(ed.r2l(ed.range[1])-ed.r2l(ed.range[0]))/(ed.r2l(ed._inputRange[1])-ed.r2l(ed._inputRange[0]));if((eg/=eo)*es<1){ed.domain=ed._input.domain=ei.slice(),Z(ed,eg);continue}if(es<1&&(ed.range=ed._input.range=ed._inputRange.slice(),eg*=es),ed.autorange){var el,ec,eu,ef,ed,eh,ep,eg,em,ey,ev=ed.r2l(ed.range[0]),ex=ed.r2l(ed.range[1]),e_=(ev+ex)/2,ew=e_,eT=e_,ek=Math.abs(ex-e_),eA=e_-ek*eg*1.0001,eS=e_+ek*eg*1.0001,eM=F.makePadFn(o,ed,0),eC=F.makePadFn(o,ed,1);updateDomain(ed,eg);var eE=Math.abs(ed._m),eL=F.concatExtremes(i,ed),eP=eL.min,eI=eL.max;for(ey=0;ey<eP.length;ey++)(em=eP[ey].val-eM(eP[ey])/eE)>eA&&em<ew&&(ew=em);for(ey=0;ey<eI.length;ey++)(em=eI[ey].val+eC(eI[ey])/eE)<eS&&em>eT&&(eT=em);eg/=(eT-ew)/(2*ek),ew=ed.l2r(ew),eT=ed.l2r(eT),ed.range=ed._input.range=ev<ex?[ew,eT]:[eT,ew]}updateDomain(ed,eg)}}}}},o.getAxisGroup=function(i,o){for(var s=i._axisMatchGroups,_=0;_<s.length;_++)if(s[_][o])return"g"+_;return o},o.clean=function(i,o){if(o._inputDomain){for(var s=!1,_=o._id,F=i._fullLayout._axisConstraintGroups,N=0;N<F.length;N++)if(F[N][_]){s=!0;break}s&&"domain"===o.constrain||(o._input.domain=o.domain=o._inputDomain,delete o._inputDomain)}}},29323:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=F.numberFormat,j=s(84267),Z=s(38520),X=s(73972),$=F.strTranslate,ee=s(63893),et=s(7901),er=s(91424),en=s(30211),ei=s(89298),eo=s(6964),es=s(28569),el=s(64505),ec=el.selectingOrDrawing,eu=el.freeMode,ef=s(18783).FROM_TL,ed=s(33306),eh=s(61549).redrawReglTraces,ep=s(74875),eg=s(41675).getFromId,em=s(47322).prepSelect,ey=s(47322).clearOutline,ev=s(47322).selectOnClick,ex=s(42449),e_=s(85555),ew=e_.MINDRAG,eT=e_.MINZOOM,ek=!0;function makeDragBox(i,o,s,N,Z,$,et,eo){var el,ek,eA,eS,eM,eC,eE,eL,eP,eI,eO,eD,eR,eB,eF,ez,eN,ej,eV,eU,eH,eG,eW,eZ,eY,eX,eK,eJ,e$,eQ,e0,e1,e2,e3=i._fullLayout._zoomlayer,e5=et+eo==="nsew",e4=1===(et+eo).length;function recomputeAxisLists(){if(el=o.xaxis,ek=o.yaxis,eP=el._length,eI=ek._length,eE=el._offset,eL=ek._offset,(eA={})[el._id]=el,(eS={})[ek._id]=ek,et&&eo)for(var s=o.overlays,_=0;_<s.length;_++){var F=s[_].xaxis;eA[F._id]=F;var N=s[_].yaxis;eS[N._id]=N}eM=hashValues(eA),eC=hashValues(eS),eR=isDirectionActive(eM,eo),eF=!(eB=isDirectionActive(eC,et))&&!eR,eD=calcLinks(i,i._fullLayout._axisMatchGroups,eA,eS);var j=(eO=calcLinks(i,i._fullLayout._axisConstraintGroups,eA,eS,eD)).isSubplotConstrained||eD.isSubplotConstrained;ez=eo||j,eN=et||j;var Z=i._fullLayout;ej=Z._has("scattergl"),eV=Z._has("splom"),eU=Z._has("svg")}s+=o.yaxis._shift,recomputeAxisLists();var e6=makeRectDragger(o,et+eo+"drag",getDragCursor(eB+eR,i._fullLayout.dragmode,e5),s,N,Z,$);if(eF&&!e5)return e6.onmousedown=null,e6.style.pointerEvents="none",e6;var e8={element:e6,gd:i,plotinfo:o};function clearAndResetSelect(){e8.plotinfo.selection=!1,ey(i)}function clickFn(i,s){var F=e8.gd;if(F._fullLayout._activeShapeIndex>=0){F._fullLayout._deactivateShape(F);return}var N=F._fullLayout.clickmode;if(removeZoombox(F),2!==i||e4||doubleClick(),e5)N.indexOf("select")>-1&&ev(s,F,eM,eC,o.id,e8),N.indexOf("event")>-1&&en.click(F,s,o.id);else if(1===i&&e4){var j=et?ek:el,Z="s"===et||"w"===eo?0:1,$=j._name+".range["+Z+"]",er=getEndText(j,Z),ei="left",es="middle";if(j.fixedrange)return;et?(es="n"===et?"top":"bottom","right"===j.side&&(ei="right")):"e"===eo&&(ei="right"),F._context.showAxisRangeEntryBoxes&&_.select(e6).call(ee.makeEditable,{gd:F,immediate:!0,background:F._fullLayout.paper_bgcolor,text:String(er),fill:j.tickfont?j.tickfont.color:"#444",horizontalAlign:ei,verticalAlign:es}).on("edit",function(i){var o=j.d2r(i);void 0!==o&&X.call("_guiRelayout",F,$,o)})}}function zoomPrep(o,s,_){var N=e6.getBoundingClientRect();eZ=s-N.left,eY=_-N.top,i._fullLayout._calcInverseTransform(i);var Z=F.apply3DTransform(i._fullLayout._invTransform)(eZ,eY);eZ=Z[0],eY=Z[1],eX={l:eZ,r:eZ,w:0,t:eY,b:eY,h:0},eK=i._hmpixcount?i._hmlumcount/i._hmpixcount:j(i._fullLayout.plot_bgcolor).getLuminance(),e$=!1,eQ="xy",e2=!1,e0=makeZoombox(e3,eK,eE,eL,eJ="M0,0H"+eP+"V"+eI+"H0V0"),e1=makeCorners(e3,eE,eL)}function zoomMove(o,s){if(i._transitioningWithDuration)return!1;var _=Math.max(0,Math.min(eP,eG*o+eZ)),F=Math.max(0,Math.min(eI,eW*s+eY)),N=Math.abs(_-eZ),j=Math.abs(F-eY);function noZoom(){eQ="",eX.r=eX.l,eX.t=eX.b,e1.attr("d","M0,0Z")}if(eX.l=Math.min(eZ,_),eX.r=Math.max(eZ,_),eX.t=Math.min(eY,F),eX.b=Math.max(eY,F),eO.isSubplotConstrained)N>eT||j>eT?(eQ="xy",N/eP>j/eI?(j=N*eI/eP,eY>F?eX.t=eY-j:eX.b=eY+j):(N=j*eP/eI,eZ>_?eX.l=eZ-N:eX.r=eZ+N),e1.attr("d",xyCorners(eX))):noZoom();else if(eD.isSubplotConstrained){if(N>eT||j>eT){eQ="xy";var Z=Math.min(eX.l/eP,(eI-eX.b)/eI),X=Math.max(eX.r/eP,(eI-eX.t)/eI);eX.l=Z*eP,eX.r=X*eP,eX.b=(1-Z)*eI,eX.t=(1-X)*eI,e1.attr("d",xyCorners(eX))}else noZoom()}else!eB||j<Math.min(Math.max(.6*N,ew),eT)?N<ew||!eR?noZoom():(eX.t=0,eX.b=eI,eQ="x",e1.attr("d",xCorners(eX,eY))):!eR||N<Math.min(.6*j,eT)?(eX.l=0,eX.r=eP,eQ="y",e1.attr("d",yCorners(eX,eZ))):(eQ="xy",e1.attr("d",xyCorners(eX)));eX.w=eX.r-eX.l,eX.h=eX.b-eX.t,eQ&&(e2=!0),i._dragged=e2,updateZoombox(e0,e1,eX,eJ,e$,eK),computeZoomUpdates(),i.emit("plotly_relayouting",eH),e$=!0}function computeZoomUpdates(){eH={},("xy"===eQ||"x"===eQ)&&(zoomAxRanges(eM,eX.l/eP,eX.r/eP,eH,eO.xaxes),updateMatchedAxRange("x",eH)),("xy"===eQ||"y"===eQ)&&(zoomAxRanges(eC,(eI-eX.b)/eI,(eI-eX.t)/eI,eH,eO.yaxes),updateMatchedAxRange("y",eH))}function zoomDone(){computeZoomUpdates(),removeZoombox(i),dragTail(),showDoubleClickNotifier(i)}e8.prepFn=function(o,s,_){var F=e8.dragmode,N=i._fullLayout.dragmode;N!==F&&(e8.dragmode=N),recomputeAxisLists(),eG=i._fullLayout._invScaleX,eW=i._fullLayout._invScaleY,eF||(e5?o.shiftKey?"pan"===N?N="zoom":ec(N)||(N="pan"):o.ctrlKey&&(N="pan"):N="pan"),eu(N)?e8.minDrag=1:e8.minDrag=void 0,ec(N)?(e8.xaxes=eM,e8.yaxes=eC,em(o,s,_,e8,N)):(e8.clickFn=clickFn,ec(F)&&clearAndResetSelect(),eF||("zoom"===N?(e8.moveFn=zoomMove,e8.doneFn=zoomDone,e8.minDrag=1,zoomPrep(o,s,_)):"pan"!==N||(e8.moveFn=plotDrag,e8.doneFn=dragTail))),i._fullLayout._redrag=function(){var o=i._dragdata;o&&o.element===e6&&!ec(i._fullLayout.dragmode)&&(recomputeAxisLists(),updateSubplots([0,0,eP,eI]),e8.moveFn(o.dx,o.dy))}},es.init(e8);var e7=[0,0,eP,eI],e9=null,te=e_.REDRAWDELAY,tt=o.mainplot?i._fullLayout._plots[o.mainplot]:o;function zoomWheel(o){if(i._context._scrollZoom.cartesian||i._fullLayout._enablescrollzoom){if(clearAndResetSelect(),i._transitioningWithDuration){o.preventDefault(),o.stopPropagation();return}recomputeAxisLists(),clearTimeout(e9);var s,_=-o.deltaY;if(isFinite(_)||(_=o.wheelDelta/10),!isFinite(_)){F.log("Did not find wheel motion attributes: ",o);return}var N=Math.exp(-Math.min(Math.max(_,-20),20)/200),j=tt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Z=(o.clientX-j.left)/j.width,X=(j.bottom-o.clientY)/j.height;if(ez){for(eo||(Z=.5),s=0;s<eM.length;s++)zoomWheelOneAxis(eM[s],Z,N);updateMatchedAxRange("x"),e7[2]*=N,e7[0]+=e7[2]*Z*(1/N-1)}if(eN){for(et||(X=.5),s=0;s<eC.length;s++)zoomWheelOneAxis(eC[s],X,N);updateMatchedAxRange("y"),e7[3]*=N,e7[1]+=e7[3]*(1-X)*(1/N-1)}updateSubplots(e7),ticksAndAnnotations(),i.emit("plotly_relayouting",eH),e9=setTimeout(function(){i._fullLayout&&(e7=[0,0,eP,eI],dragTail())},te),o.preventDefault()}function zoomWheelOneAxis(i,o,s){if(!i.fixedrange){var _=F.simpleMap(i.range,i.r2l),N=_[0]+(_[1]-_[0])*o;i.range=_.map(doZoom)}function doZoom(o){return i.l2r(N+(o-N)*s)}}}function plotDrag(o,s){if(o*=eG,s*=eW,!i._transitioningWithDuration){if(i._fullLayout._replotting=!0,"ew"===eR||"ns"===eB){var _,F,N,j=eR?-o:0,Z=eB?-s:0;if(eD.isSubplotConstrained){if(eR&&eB){var X=(o/eP-s/eI)/2;o=X*eP,s=-X*eI,j=-o,Z=-s}eB?j=-Z*eP/eI:Z=-j*eI/eP}eR&&(dragAxList(eM,o),updateMatchedAxRange("x")),eB&&(dragAxList(eC,s),updateMatchedAxRange("y")),updateSubplots([j,Z,eP,eI]),ticksAndAnnotations(),i.emit("plotly_relayouting",eH);return}var $="w"===eR==("n"===eB)?1:-1;if(eR&&eB&&(eO.isSubplotConstrained||eD.isSubplotConstrained)){var ee=(o/eP+$*s/eI)/2;o=ee*eP,s=$*ee*eI}if("w"===eR?o=dz(eM,0,o):"e"===eR?o=dz(eM,1,-o):eR||(o=0),"n"===eB?s=dz(eC,1,s):"s"===eB?s=dz(eC,0,-s):eB||(s=0),_="w"===eR?o:0,F="n"===eB?s:0,eO.isSubplotConstrained&&!eD.isSubplotConstrained||eD.isSubplotConstrained&&eR&&eB&&$>0){if(eD.isSubplotConstrained||!eR&&1===eB.length){for(N=0;N<eM.length;N++)eM[N].range=eM[N]._r.slice(),ex(eM[N],1-s/eI);_=(o=s*eP/eI)/2}if(eD.isSubplotConstrained||!eB&&1===eR.length){for(N=0;N<eC.length;N++)eC[N].range=eC[N]._r.slice(),ex(eC[N],1-o/eP);F=(s=o*eI/eP)/2}}eD.isSubplotConstrained&&eB||updateMatchedAxRange("x"),eD.isSubplotConstrained&&eR||updateMatchedAxRange("y");var et=eP-o,er=eI-s;eD.isSubplotConstrained&&!(eR&&eB)&&(eR?(F=_?0:o*eI/eP,er=et*eI/eP):(_=F?0:s*eP/eI,et=er*eP/eI)),updateSubplots([_,F,et,er]),ticksAndAnnotations(),i.emit("plotly_relayouting",eH)}function dz(i,o,s){for(var _,F,N=1-o,j=0;j<i.length;j++){var Z=i[j];if(!Z.fixedrange){_=Z,F=Z._rl[N]+(Z._rl[o]-Z._rl[N])/dZoom(s/Z._length);var X=Z.l2r(F);!1!==X&&void 0!==X&&(Z.range[o]=X)}}return _._length*(_._rl[o]-F)/(_._rl[o]-_._rl[N])}}function updateMatchedAxRange(i,o){for(var s=eD.isSubplotConstrained?({x:eC,y:eM})[i]:eD[i+"axes"],_=eD.isSubplotConstrained?({x:eM,y:eC})[i]:[],F=0;F<s.length;F++){var N=s[F],j=N._id,Z=eD.xLinks[j]||eD.yLinks[j],X=_[0]||eA[Z]||eS[Z];X&&(o?(o[N._name+".range[0]"]=o[X._name+".range[0]"],o[N._name+".range[1]"]=o[X._name+".range[1]"]):N.range=X.range.slice())}}function ticksAndAnnotations(){var s,_=[];function pushActiveAxIds(i){for(s=0;s<i.length;s++)i[s].fixedrange||_.push(i[s]._id)}function pushActiveAxIdsSynced(i,o){for(s=0;s<i.length;s++){var F=i[s],N=F[o];F.fixedrange||"sync"!==N.tickmode||_.push(N._id)}}for(ez&&(pushActiveAxIds(eM),pushActiveAxIds(eO.xaxes),pushActiveAxIds(eD.xaxes),pushActiveAxIdsSynced(o.overlays,"xaxis")),eN&&(pushActiveAxIds(eC),pushActiveAxIds(eO.yaxes),pushActiveAxIds(eD.yaxes),pushActiveAxIdsSynced(o.overlays,"yaxis")),eH={},s=0;s<_.length;s++){var F=eg(i,_[s]);ei.drawOne(i,F,{skipTitle:!0}),eH[F._name+".range[0]"]=F.range[0],eH[F._name+".range[1]"]=F.range[1]}ei.redrawComponents(i,_)}function doubleClick(){if(!i._transitioningWithDuration){var o,s,_=i._context.doubleClick,F=[];eR&&(F=F.concat(eM)),eB&&(F=F.concat(eC)),eD.xaxes&&(F=F.concat(eD.xaxes)),eD.yaxes&&(F=F.concat(eD.yaxes));var N={};if("reset+autosize"===_)for(s=0,_="autosize";s<F.length;s++){var j=(o=F[s])._rangeInitial0,Z=o._rangeInitial1,$=void 0!==j||void 0!==Z;if($&&(void 0!==j&&j!==o.range[0]||void 0!==Z&&Z!==o.range[1])||!$&&!0!==o.autorange){_="reset";break}}if("autosize"===_)for(s=0;s<F.length;s++)(o=F[s]).fixedrange||(N[o._name+".autorange"]=!0);else if("reset"===_){for((eR||eO.isSubplotConstrained)&&(F=F.concat(eO.xaxes)),eB&&!eO.isSubplotConstrained&&(F=F.concat(eO.yaxes)),eO.isSubplotConstrained&&(eR?eB||(F=F.concat(eC)):F=F.concat(eM)),s=0;s<F.length;s++)if(!(o=F[s]).fixedrange){var ee=o._name,et=o._autorangeInitial;void 0===o._rangeInitial0&&void 0===o._rangeInitial1?N[ee+".autorange"]=!0:void 0===o._rangeInitial0?(N[ee+".autorange"]=et,N[ee+".range"]=[null,o._rangeInitial1]):void 0===o._rangeInitial1?(N[ee+".range"]=[o._rangeInitial0,null],N[ee+".autorange"]=et):N[ee+".range"]=[o._rangeInitial0,o._rangeInitial1]}}i.emit("plotly_doubleclick",null),X.call("_guiRelayout",i,N)}}function dragTail(){updateSubplots([0,0,eP,eI]),F.syncOrAsync([ep.previousPromises,function(){i._fullLayout._replotting=!1,X.call("_guiRelayout",i,eH)}],i)}function updateSubplots(o){var s=i._fullLayout,_=s._plots,N=s._subplots.cartesian;if(eV&&X.subplotsRegistry.splom.drag(i),ej){for(en=0;en<N.length;en++)if(es=(ei=_[N[en]]).xaxis,ec=ei.yaxis,ei._scene){var j=F.simpleMap(es.range,es.r2l),Z=F.simpleMap(ec.range,ec.r2l);es.limitRange&&es.limitRange(),ec.limitRange&&ec.limitRange(),j=es.range,Z=ec.range,ei._scene.update({range:[j[0],Z[0],j[1],Z[1]]})}}if((eV||ej)&&(ed(i),eh(i)),eU){var $=o[2]/el._length,ee=o[3]/ek._length;for(en=0;en<N.length;en++){es=(ei=_[N[en]]).xaxis,ec=ei.yaxis;var en,ei,es,ec,eu,ef,ep,eg,em=(ez||eD.isSubplotConstrained)&&!es.fixedrange&&eA[es._id],ey=(eN||eD.isSubplotConstrained)&&!ec.fixedrange&&eS[ec._id];if(em?(eu=$,ep=eo||eD.isSubplotConstrained?o[0]:getShift(es,eu)):eD.xaHash[es._id]?(eu=$,ep=o[0]*es._length/el._length):eD.yaHash[es._id]?(eu=ee,ep="ns"===eB?-o[1]*es._length/ek._length:getShift(es,eu,{n:"top",s:"bottom"}[eB])):(eu=getLinkedScaleFactor(es,$,ee),ep=scaleAndGetShift(es,eu)),eu>1&&(void 0!==es.maxallowed&&ez===(es.range[0]<es.range[1]?"e":"w")||void 0!==es.minallowed&&ez===(es.range[0]<es.range[1]?"w":"e"))&&(eu=1,ep=0),ey?(ef=ee,eg=et||eD.isSubplotConstrained?o[1]:getShift(ec,ef)):eD.yaHash[ec._id]?(ef=ee,eg=o[1]*ec._length/ek._length):eD.xaHash[ec._id]?(ef=$,eg="ew"===eR?-o[0]*ec._length/el._length:getShift(ec,ef,{e:"right",w:"left"}[eR])):(ef=getLinkedScaleFactor(ec,$,ee),eg=scaleAndGetShift(ec,ef)),ef>1&&(void 0!==ec.maxallowed&&eN===(ec.range[0]<ec.range[1]?"n":"s")||void 0!==ec.minallowed&&eN===(ec.range[0]<ec.range[1]?"s":"n"))&&(ef=1,eg=0),eu||ef){eu||(eu=1),ef||(ef=1);var ev=es._offset-ep/eu,ex=ec._offset-eg/ef;ei.clipRect.call(er.setTranslate,ep,eg).call(er.setScale,eu,ef),ei.plot.call(er.setTranslate,ev,ex).call(er.setScale,1/eu,1/ef),(eu!==ei.xScaleFactor||ef!==ei.yScaleFactor)&&(er.setPointGroupScale(ei.zoomScalePts,eu,ef),er.setTextPointsScale(ei.zoomScaleTxt,eu,ef)),er.hideOutsideRangePoints(ei.clipOnAxisFalseTraces,ei),ei.xScaleFactor=eu,ei.yScaleFactor=ef}}}}function getLinkedScaleFactor(i,o,s){return i.fixedrange?0:ez&&eO.xaHash[i._id]?o:eN&&(eO.isSubplotConstrained?eO.xaHash:eO.yaHash)[i._id]?s:0}function scaleAndGetShift(i,o){return o?(i.range=i._r.slice(),ex(i,o),getShift(i,o)):0}function getShift(i,o,s){return i._length*(1-o)*ef[s||i.constraintoward||"middle"]}return et.length*eo.length!=1&&attachWheelEventHandler(e6,zoomWheel),e6}function makeDragger(i,o,s,_){var N=F.ensureSingle(i.draglayer,o,s,function(o){o.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",i.id)});return N.call(eo,_),N.node()}function makeRectDragger(i,o,s,F,N,j,Z){var X=makeDragger(i,"rect",o,s);return _.select(X).call(er.setRect,F,N,j,Z),X}function isDirectionActive(i,o){for(var s=0;s<i.length;s++)if(!i[s].fixedrange)return o;return""}function getEndText(i,o){var s=i.range[o],_=Math.abs(s-i.range[1-o]);return"date"===i.type?s:"log"===i.type?N("."+(Math.ceil(Math.max(0,-Math.log(_)/Math.LN10))+3)+"g")(Math.pow(10,s)):N("."+String(Math.floor(Math.log(Math.abs(s))/Math.LN10)-Math.floor(Math.log(_)/Math.LN10)+4)+"g")(s)}function zoomAxRanges(i,o,s,_,F){for(var N=0;N<i.length;N++){var j=i[N];if(!j.fixedrange){if(j.rangebreaks){var Z="y"===j._id.charAt(0),X=Z?1-o:o,$=Z?1-s:s;_[j._name+".range[0]"]=j.l2r(j.p2l(X*j._length)),_[j._name+".range[1]"]=j.l2r(j.p2l($*j._length))}else{var ee=j._rl[0],et=j._rl[1]-ee;_[j._name+".range[0]"]=j.l2r(ee+et*o),_[j._name+".range[1]"]=j.l2r(ee+et*s)}}}if(F&&F.length){var er=(o+(1-s))/2;zoomAxRanges(F,er,1-er,_,[])}}function dragAxList(i,o){for(var s=0;s<i.length;s++){var _=i[s];if(!_.fixedrange){if(_.rangebreaks){var F=_._length,N=(_.p2l(0+o)-_.p2l(0)+(_.p2l(F+o)-_.p2l(F)))/2;_.range=[_.l2r(_._rl[0]-N),_.l2r(_._rl[1]-N)]}else _.range=[_.l2r(_._rl[0]-o/_._m),_.l2r(_._rl[1]-o/_._m)];_.limitRange&&_.limitRange()}}}function dZoom(i){return 1-(i>=0?Math.min(i,.9):1/(1/Math.max(i,-.3)+3.222))}function getDragCursor(i,o,s){return i?"nsew"===i?s?"":"pan"===o?"move":"crosshair":i.toLowerCase()+"-resize":"pointer"}function makeZoombox(i,o,s,_,F){return i.append("path").attr("class","zoombox").style({fill:o>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",$(s,_)).attr("d",F+"Z")}function makeCorners(i,o,s){return i.append("path").attr("class","zoombox-corners").style({fill:et.background,stroke:et.defaultLine,"stroke-width":1,opacity:0}).attr("transform",$(o,s)).attr("d","M0,0Z")}function updateZoombox(i,o,s,_,F,N){i.attr("d",_+"M"+s.l+","+s.t+"v"+s.h+"h"+s.w+"v-"+s.h+"h-"+s.w+"Z"),transitionZoombox(i,o,F,N)}function transitionZoombox(i,o,s,_){s||(i.transition().style("fill",_>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),o.transition().style("opacity",1).duration(200))}function removeZoombox(i){_.select(i).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function showDoubleClickNotifier(i){ek&&i.data&&i._context.showTips&&(F.notifier(F._(i,"Double-click to zoom back out"),"long"),ek=!1)}function xCorners(i,o){return"M"+(i.l-.5)+","+(o-eT-.5)+"h-3v"+(2*eT+1)+"h3ZM"+(i.r+.5)+","+(o-eT-.5)+"h3v"+(2*eT+1)+"h-3Z"}function yCorners(i,o){return"M"+(o-eT-.5)+","+(i.t-.5)+"v-3h"+(2*eT+1)+"v3ZM"+(o-eT-.5)+","+(i.b+.5)+"v3h"+(2*eT+1)+"v-3Z"}function xyCorners(i){var o=Math.floor(Math.min(i.b-i.t,i.r-i.l,eT)/2);return"M"+(i.l-3.5)+","+(i.t-.5+o)+"h3v"+-o+"h"+o+"v-3h-"+(o+3)+"ZM"+(i.r+3.5)+","+(i.t-.5+o)+"h-3v"+-o+"h"+-o+"v-3h"+(o+3)+"ZM"+(i.r+3.5)+","+(i.b+.5-o)+"h-3v"+o+"h"+-o+"v3h"+(o+3)+"ZM"+(i.l-3.5)+","+(i.b+.5-o)+"h3v"+o+"h"+o+"v3h-"+(o+3)+"Z"}function calcLinks(i,o,s,_,N){for(var j,Z,X,$,ee=!1,et={},er={},en=(N||{}).xaHash,ei=(N||{}).yaHash,eo=0;eo<o.length;eo++){var es=o[eo];for(j in s)if(es[j]){for(X in es)N&&(en[X]||ei[X])||("x"===X.charAt(0)?s:_)[X]||(et[X]=j);for(Z in _)!(N&&(en[Z]||ei[Z]))&&es[Z]&&(ee=!0)}for(Z in _)if(es[Z])for($ in es)N&&(en[$]||ei[$])||("x"===$.charAt(0)?s:_)[$]||(er[$]=Z)}ee&&(F.extendFlat(et,er),er={});var el={},ec=[];for(X in et){var eu=eg(i,X);ec.push(eu),el[eu._id]=eu}var ef={},ed=[];for($ in er){var eh=eg(i,$);ed.push(eh),ef[eh._id]=eh}return{xaHash:el,yaHash:ef,xaxes:ec,yaxes:ed,xLinks:et,yLinks:er,isSubplotConstrained:ee}}function attachWheelEventHandler(i,o){if(Z){var s=void 0!==i.onwheel?"wheel":"mousewheel";i._onwheel&&i.removeEventListener(s,i._onwheel),i._onwheel=o,i.addEventListener(s,o,{passive:!1})}else void 0!==i.onwheel?i.onwheel=o:void 0!==i.onmousewheel?i.onmousewheel=o:i.isAddedWheelEvent||(i.isAddedWheelEvent=!0,i.addEventListener("wheel",o,{passive:!1}))}function hashValues(i){var o=[];for(var s in i)o.push(i[s]);return o}i.exports={makeDragBox:makeDragBox,makeDragger:makeDragger,makeRectDragger:makeRectDragger,makeZoombox:makeZoombox,makeCorners:makeCorners,updateZoombox:updateZoombox,xyCorners:xyCorners,transitionZoombox:transitionZoombox,removeZoombox:removeZoombox,showDoubleClickNotifier:showDoubleClickNotifier,attachWheelEventHandler:attachWheelEventHandler}},4305:function(i,o,s){"use strict";var _=s(39898),F=s(30211),N=s(28569),j=s(6964),Z=s(29323).makeDragBox,X=s(85555).DRAGGERSIZE;o.initInteractions=function(i){var s=i._fullLayout;if(i._context.staticPlot){_.select(i).selectAll(".drag").remove();return}if(s._has("cartesian")||s._has("splom")){Object.keys(s._plots||{}).sort(function(i,o){if((s._plots[i].mainplot&&!0)===(s._plots[o].mainplot&&!0)){var _=i.split("y"),F=o.split("y");return _[0]===F[0]?Number(_[1]||1)-Number(F[1]||1):Number(_[0]||1)-Number(F[0]||1)}return s._plots[i].mainplot?1:-1}).forEach(function(o){var _=s._plots[o],j=_.xaxis,$=_.yaxis;if(!_.mainplot){var ee=Z(i,_,j._offset,$._offset,j._length,$._length,"ns","ew");ee.onmousemove=function(s){i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===o&&i._fullLayout._plots[o]&&F.hover(i,s,o)},F.hover(i,s,o),i._fullLayout._lasthover=ee,i._fullLayout._hoversubplot=o},ee.onmouseout=function(o){i._dragging||(i._fullLayout._hoversubplot=null,N.unhover(i,o))},i._context.showAxisDragHandles&&(Z(i,_,j._offset-X,$._offset-X,X,X,"n","w"),Z(i,_,j._offset+j._length,$._offset-X,X,X,"n","e"),Z(i,_,j._offset-X,$._offset+$._length,X,X,"s","w"),Z(i,_,j._offset+j._length,$._offset+$._length,X,X,"s","e"))}if(i._context.showAxisDragHandles){if(o===j._mainSubplot){var et=j._mainLinePosition;"top"===j.side&&(et-=X),Z(i,_,j._offset+.1*j._length,et,.8*j._length,X,"","ew"),Z(i,_,j._offset,et,.1*j._length,X,"","w"),Z(i,_,j._offset+.9*j._length,et,.1*j._length,X,"","e")}if(o===$._mainSubplot){var er=$._mainLinePosition;"right"!==$.side&&(er-=X),Z(i,_,er,$._offset+.1*$._length,X,.8*$._length,"ns",""),Z(i,_,er,$._offset+.9*$._length,X,.1*$._length,"s",""),Z(i,_,er,$._offset,X,.1*$._length,"n","")}}});var j=s._hoverlayer.node();j.onmousemove=function(o){o.target=i._fullLayout._lasthover,F.hover(i,o,s._hoversubplot)},j.onclick=function(o){o.target=i._fullLayout._lasthover,F.click(i,o)},j.onmousedown=function(o){i._fullLayout._lasthover.onmousedown(o)},o.updateFx(i)}},o.updateFx=function(i){var o=i._fullLayout,s="pan"===o.dragmode?"move":"crosshair";j(o._draggers,s)}},76325:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=s(41675);i.exports=function(i){return function(o,s){var j=o[i];if(Array.isArray(j))for(var Z=_.subplotsRegistry.cartesian,X=Z.idRegex,$=s._subplots,ee=$.xaxis,et=$.yaxis,er=$.cartesian,en=s._has("cartesian")||s._has("gl2d"),ei=0;ei<j.length;ei++){var eo=j[ei];if(F.isPlainObject(eo)){var es=N.cleanId(eo.xref,"x",!1),el=N.cleanId(eo.yref,"y",!1),ec=X.x.test(es),eu=X.y.test(el);if(ec||eu){en||F.pushUnique(s._basePlotModules,Z);var ef=!1;ec&&-1===ee.indexOf(es)&&(ee.push(es),ef=!0),eu&&-1===et.indexOf(el)&&(et.push(el),ef=!0),ef&&ec&&eu&&er.push(es+el)}}}}}},93612:function(i,o,s){"use strict";var _=s(39898),F=s(73972),N=s(71828),j=s(74875),Z=s(91424),X=s(27659).a0,$=s(41675),ee=s(85555),et=s(77922),er=N.ensureSingle;function ensureSingleAndAddDatum(i,o,s){return N.ensureSingle(i,o,s,function(i){i.datum(s)})}function plotOne(i,o,s,N,j){for(var $,et,er,en=ee.traceLayerClasses,ei=i._fullLayout,eo=ei._modules,es=[],el=[],ec=0;ec<eo.length;ec++){var eu=($=eo[ec]).name,ef=F.modules[eu].categories;if(ef.svg){var ed=$.layerName||eu+"layer",eh=$.plot;er=(et=X(s,eh))[0],s=et[1],er.length&&es.push({i:en.indexOf(ed),className:ed,plotMethod:eh,cdModule:er}),ef.zoomScale&&el.push("."+ed)}}es.sort(function(i,o){return i.i-o.i});var ep=o.plot.selectAll("g.mlayer").data(es,function(i){return i.className});if(ep.enter().append("g").attr("class",function(i){return i.className}).classed("mlayer",!0).classed("rangeplot",o.isRangePlot),ep.exit().remove(),ep.order(),ep.each(function(s){var F=_.select(this),X=s.className;s.plotMethod(i,o,s.cdModule,F,N,j),-1===ee.clipOnAxisFalseQuery.indexOf("."+X)&&Z.setClipUrl(F,o.layerClipId,i)}),ei._has("scattergl")&&(er=X(s,$=F.getModule("scattergl"))[0],$.plot(i,o,er)),!i._context.staticPlot&&(o._hasClipOnAxisFalse&&(o.clipOnAxisFalseTraces=o.plot.selectAll(ee.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),el.length)){var eg=o.plot.selectAll(el.join(",")).selectAll(".trace");o.zoomScalePts=eg.selectAll("path.point"),o.zoomScaleTxt=eg.selectAll(".textpoint")}}function makeSubplotData(i){var o,s,_,F,N,j,Z=i._fullLayout,X=Z._subplots.cartesian,$=X.length,ee=[],et=[];for(o=0;o<$;o++){_=X[o],N=(F=Z._plots[_]).xaxis,j=F.yaxis;var er=N._mainAxis,en=j._mainAxis,ei=er._id+en._id,eo=Z._plots[ei];F.overlays=[],ei!==_&&eo?(F.mainplot=ei,F.mainplotinfo=eo,et.push(_)):(F.mainplot=void 0,F.mainplotinfo=void 0,ee.push(_))}for(o=0;o<et.length;o++)_=et[o],(F=Z._plots[_]).mainplotinfo.overlays.push(F);var es=ee.concat(et),el=Array($);for(o=0;o<$;o++){_=es[o],N=(F=Z._plots[_]).xaxis,j=F.yaxis;var ec=[_,N.layer,j.layer,N.overlaying||"",j.overlaying||""];for(s=0;s<F.overlays.length;s++)ec.push(F.overlays[s].id);el[o]=ec}return el}function makeSubplotLayer(i,o){var s=o.plotgroup,_=o.id,F=ee.layerValue2layerClass[o.xaxis.layer],N=ee.layerValue2layerClass[o.yaxis.layer],j=i._fullLayout._hasOnlyLargeSploms;if(o.mainplot){var Z=o.mainplotinfo,X=Z.plotgroup,et=_+"-x",en=_+"-y";o.minorGridlayer=Z.minorGridlayer,o.gridlayer=Z.gridlayer,o.zerolinelayer=Z.zerolinelayer,er(Z.overlinesBelow,"path",et),er(Z.overlinesBelow,"path",en),er(Z.overaxesBelow,"g",et),er(Z.overaxesBelow,"g",en),o.plot=er(Z.overplot,"g",_),er(Z.overlinesAbove,"path",et),er(Z.overlinesAbove,"path",en),er(Z.overaxesAbove,"g",et),er(Z.overaxesAbove,"g",en),o.xlines=X.select(".overlines-"+F).select("."+et),o.ylines=X.select(".overlines-"+N).select("."+en),o.xaxislayer=X.select(".overaxes-"+F).select("."+et),o.yaxislayer=X.select(".overaxes-"+N).select("."+en)}else if(j)o.xlines=er(s,"path","xlines-above"),o.ylines=er(s,"path","ylines-above"),o.xaxislayer=er(s,"g","xaxislayer-above"),o.yaxislayer=er(s,"g","yaxislayer-above");else{var ei=er(s,"g","layer-subplot");o.shapelayer=er(ei,"g","shapelayer"),o.imagelayer=er(ei,"g","imagelayer"),o.minorGridlayer=er(s,"g","minor-gridlayer"),o.gridlayer=er(s,"g","gridlayer"),o.zerolinelayer=er(s,"g","zerolinelayer"),er(s,"path","xlines-below"),er(s,"path","ylines-below"),o.overlinesBelow=er(s,"g","overlines-below"),er(s,"g","xaxislayer-below"),er(s,"g","yaxislayer-below"),o.overaxesBelow=er(s,"g","overaxes-below"),o.plot=er(s,"g","plot"),o.overplot=er(s,"g","overplot"),o.xlines=er(s,"path","xlines-above"),o.ylines=er(s,"path","ylines-above"),o.overlinesAbove=er(s,"g","overlines-above"),er(s,"g","xaxislayer-above"),er(s,"g","yaxislayer-above"),o.overaxesAbove=er(s,"g","overaxes-above"),o.xlines=s.select(".xlines-"+F),o.ylines=s.select(".ylines-"+N),o.xaxislayer=s.select(".xaxislayer-"+F),o.yaxislayer=s.select(".yaxislayer-"+N)}j||(ensureSingleAndAddDatum(o.minorGridlayer,"g",o.xaxis._id),ensureSingleAndAddDatum(o.minorGridlayer,"g",o.yaxis._id),o.minorGridlayer.selectAll("g").map(function(i){return i[0]}).sort($.idSort),ensureSingleAndAddDatum(o.gridlayer,"g",o.xaxis._id),ensureSingleAndAddDatum(o.gridlayer,"g",o.yaxis._id),o.gridlayer.selectAll("g").map(function(i){return i[0]}).sort($.idSort)),o.xlines.style("fill","none").classed("crisp",!0),o.ylines.style("fill","none").classed("crisp",!0)}function purgeSubplotLayers(i,o){if(i){var s={};for(var F in i.each(function(i){var F=i[0];_.select(this).remove(),removeSubplotExtras(F,o),s[F]=!0}),o._plots)for(var N=o._plots[F].overlays||[],j=0;j<N.length;j++){var Z=N[j];s[Z.id]&&Z.plot.selectAll(".trace").remove()}}}function removeSubplotExtras(i,o){o._draggers.selectAll("g."+i).remove(),o._defs.select("#clip"+o._uid+i+"plot").remove()}o.name="cartesian",o.attr=["xaxis","yaxis"],o.idRoot=["x","y"],o.idRegex=ee.idRegex,o.attrRegex=ee.attrRegex,o.attributes=s(89502),o.layoutAttributes=s(13838),o.supplyLayoutDefaults=s(86763),o.transitionAxes=s(66847),o.finalizeSubplots=function(i,o){var s,_,F,j=o._subplots,Z=j.xaxis,X=j.yaxis,et=j.cartesian,er=et.concat(j.gl2d||[]),en={},ei={};for(s=0;s<er.length;s++){var eo=er[s].split("y");en[eo[0]]=1,ei["y"+eo[1]]=1}for(s=0;s<Z.length;s++)en[_=Z[s]]||(F=(i[$.id2name(_)]||{}).anchor,ee.idRegex.y.test(F)||(F="y"),et.push(_+F),er.push(_+F),ei[F]||(ei[F]=1,N.pushUnique(X,F)));for(s=0;s<X.length;s++)ei[F=X[s]]||(_=(i[$.id2name(F)]||{}).anchor,ee.idRegex.x.test(_)||(_="x"),et.push(_+F),er.push(_+F),en[_]||(en[_]=1,N.pushUnique(Z,_)));if(!er.length){for(var es in _="",F="",i)ee.attrRegex.test(es)&&("x"===es.charAt(0)?(!_||+es.substr(5)<+_.substr(5))&&(_=es):(!F||+es.substr(5)<+F.substr(5))&&(F=es));_=_?$.name2id(_):"x",F=F?$.name2id(F):"y",Z.push(_),X.push(F),et.push(_+F)}},o.plot=function(i,o,s,_){var F=i._fullLayout,N=F._subplots.cartesian,j=i.calcdata;if(!Array.isArray(o))for(Z=0,o=[];Z<j.length;Z++)o.push(Z);for(Z=0;Z<N.length;Z++){for(var Z,X,$=N[Z],ee=F._plots[$],et=[],er=0;er<j.length;er++){var en=j[er],ei=en[0].trace;ei.xaxis+ei.yaxis===$&&((-1!==o.indexOf(ei.index)||ei.carpet)&&(X&&X[0].trace.xaxis+X[0].trace.yaxis===$&&-1!==["tonextx","tonexty","tonext"].indexOf(ei.fill)&&-1===et.indexOf(X)&&et.push(X),et.push(en)),X=en)}plotOne(i,ee,et,s,_)}},o.clean=function(i,o,s,_){var F,N,j,Z=_._plots||{},X=o._plots||{},ee=_._subplots||{};if(_._hasOnlyLargeSploms&&!o._hasOnlyLargeSploms)for(j in Z)(F=Z[j]).plotgroup&&F.plotgroup.remove();var et=_._has&&_._has("gl"),er=o._has&&o._has("gl");if(et&&!er)for(j in Z)(F=Z[j])._scene&&F._scene.destroy();if(ee.xaxis&&ee.yaxis){var en=$.listIds({_fullLayout:_});for(N=0;N<en.length;N++){var ei=en[N];o[$.id2name(ei)]||_._infolayer.selectAll(".g-"+ei+"title").remove()}}var eo=_._has&&_._has("cartesian"),es=o._has&&o._has("cartesian");if(eo&&!es)purgeSubplotLayers(_._cartesianlayer.selectAll(".subplot"),_),_._defs.selectAll(".axesclip").remove(),delete _._axisConstraintGroups,delete _._axisMatchGroups;else if(ee.cartesian)for(N=0;N<ee.cartesian.length;N++){var el=ee.cartesian[N];if(!X[el]){var ec="."+el+",."+el+"-x,."+el+"-y";_._cartesianlayer.selectAll(ec).remove(),removeSubplotExtras(el,_)}}},o.drawFramework=function(i){var o=i._fullLayout,s=makeSubplotData(i),F=o._cartesianlayer.selectAll(".subplot").data(s,String);F.enter().append("g").attr("class",function(i){return"subplot "+i[0]}),F.order(),F.exit().call(purgeSubplotLayers,o),F.each(function(s){var F=s[0],N=o._plots[F];N.plotgroup=_.select(this),makeSubplotLayer(i,N),N.draglayer=er(o._draggers,"g",F)})},o.rangePlot=function(i,o,s){makeSubplotLayer(i,o),plotOne(i,o,s),j.style(i)},o.toSVG=function(i){var o=i._fullLayout._glimages,s=_.select(i).selectAll(".svg-container");function canvasToImage(){var i=this.toDataURL("image/png");o.append("svg:image").attr({xmlns:et.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}s.filter(function(i,o){return o===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(canvasToImage)},o.updateFx=s(4305).updateFx},13838:function(i,o,s){"use strict";var _=s(41940),F=s(22399),N=s(79952).P,j=s(1426).extendFlat,Z=s(44467).templatedArray,X=s(12663).descriptionWithDates,$=s(50606).ONEDAY,ee=s(85555),et=ee.HOUR_PATTERN,er=ee.WEEKDAY_PATTERN,en={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},ei=j({},en,{values:en.values.slice().concat(["sync"])});function makeNticks(i){return{valType:"integer",min:0,dflt:i?5:0,editType:"ticks"}}var eo={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},es={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},el={valType:"data_array",editType:"ticks"},ec={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function makeTicklen(i){var o={valType:"number",min:0,editType:"ticks"};return i||(o.dflt=5),o}function makeTickwidth(i){var o={valType:"number",min:0,editType:"ticks"};return i||(o.dflt=1),o}var eu={valType:"color",dflt:F.defaultLine,editType:"ticks"},ef={valType:"color",dflt:F.lightLine,editType:"ticks"};function makeGridwidth(i){var o={valType:"number",min:0,editType:"ticks"};return i||(o.dflt=1),o}var ed=j({},N,{editType:"ticks"}),eh={valType:"boolean",editType:"ticks"};i.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:F.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:_({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[ee.idRegex.x.toString(),ee.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[ee.idRegex.x.toString(),ee.idRegex.y.toString()],editType:"calc"},rangebreaks:Z("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[er,et,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:$},editType:"calc"}),tickmode:ei,nticks:makeNticks(),tick0:eo,dtick:es,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:el,ticktext:{valType:"data_array",editType:"ticks"},ticks:ec,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:makeTicklen(),tickwidth:makeTickwidth(),tickcolor:eu,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:j({},N,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:_({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:X("tick label")},tickformatstops:Z("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:X("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:F.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:eh,gridcolor:ef,gridwidth:makeGridwidth(),griddash:ed,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:F.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:F.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",ee.idRegex.x.toString(),ee.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",ee.idRegex.x.toString(),ee.idRegex.y.toString()],editType:"plot"},minor:{tickmode:en,nticks:makeNticks("minor"),tick0:eo,dtick:es,tickvals:el,ticks:ec,ticklen:makeTicklen("minor"),tickwidth:makeTickwidth("minor"),tickcolor:eu,gridcolor:ef,gridwidth:makeGridwidth("minor"),griddash:ed,showgrid:eh,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:_({editType:"ticks"})}}},86763:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(23469).isUnifiedHover,j=s(98212),Z=s(44467),X=s(10820),$=s(13838),ee=s(951),et=s(71453),er=s(99082),en=s(52830),ei=s(41675),eo=ei.id2name,es=ei.name2id,el=s(85555).AX_ID_PATTERN,ec=s(73972),eu=ec.traceIs,ef=ec.getComponentMethod;function appendList(i,o,s){Array.isArray(i[o])?i[o].push(s):i[o]=[s]}i.exports=function(i,o,s){var ec,ed,eh,ep,eg,em=o.autotypenumbers,ey={},ev={},ex={},e_={},ew={},eT={},ek={},eA={},eS={},eM={};for(eC=0;eC<s.length;eC++){var eC,eE,eL,eP,eI=s[eC];if(eu(eI,"cartesian")||eu(eI,"gl2d")){if(eI.xaxis)appendList(ey,eL=eo(eI.xaxis),eI);else if(eI.xaxes)for(eE=0;eE<eI.xaxes.length;eE++)appendList(ey,eo(eI.xaxes[eE]),eI);if(eI.yaxis)appendList(ey,eP=eo(eI.yaxis),eI);else if(eI.yaxes)for(eE=0;eE<eI.yaxes.length;eE++)appendList(ey,eo(eI.yaxes[eE]),eI);"funnel"===eI.type?"h"===eI.orientation?(eL&&(ev[eL]=!0),eP&&(ek[eP]=!0)):eP&&(ex[eP]=!0):"image"===eI.type?(eP&&(eA[eP]=!0),eL&&(eA[eL]=!0)):(eP&&(ew[eP]=!0,eT[eP]=!0),eu(eI,"carpet")&&("carpet"!==eI.type||eI._cheater)||!eL||(e_[eL]=!0)),"carpet"===eI.type&&eI._cheater&&eL&&(ev[eL]=!0),eu(eI,"2dMap")&&(eS[eL]=!0,eS[eP]=!0),eu(eI,"oriented")&&(eM["h"===eI.orientation?eP:eL]=!0)}}var eO=o._subplots,eD=eO.xaxis,eR=eO.yaxis,eB=_.simpleMap(eD,eo),eF=_.simpleMap(eR,eo),ez=eB.concat(eF),eN=F.background;eD.length&&eR.length&&(eN=_.coerce(i,o,X,"plot_bgcolor"));var ej=F.combine(eN,o.paper_bgcolor);function newAxLayoutOut(){var i=ey[ec]||[];eg._traceIndices=i.map(function(i){return i._expandedIndex}),eg._annIndices=[],eg._shapeIndices=[],eg._selectionIndices=[],eg._imgIndices=[],eg._subplotsWith=[],eg._counterAxes=[],eg._name=eg._attr=ec,eg._id=ed}function coerce(i,o){return _.coerce(ep,eg,$,i,o)}function coerce2(i,o){return _.coerce2(ep,eg,$,i,o)}function getOverlayableAxes(o,s){for(var _="x"===o?eB:eF,F=[],N=0;N<_.length;N++){var j=_[N];j===s||(i[j]||{}).overlaying||F.push(es(j))}return F}var eV={x:eR,y:eD},eU=eV.x.concat(eV.y),eH={},eG=[];function addMissingMatchedAxis(){var i=ep.matches;el.test(i)&&-1===eU.indexOf(i)&&(eH[i]=ep.type,eG=Object.keys(eH))}var eW=j(i,o),eZ=N(eW);for(eC=0;eC<ez.length;eC++){ed=es(ec=ez[eC]),eh=ec.charAt(0),_.isPlainObject(i[ec])||(i[ec]={}),ep=i[ec],eg=Z.newContainer(o,ec,eh+"axis"),newAxLayoutOut();var eY="x"===eh&&!e_[ec]&&ev[ec]||"y"===eh&&!ew[ec]&&ex[ec],eX="y"===eh&&(!eT[ec]&&ek[ec]||eA[ec]),eK={hasMinor:!0,letter:eh,font:o.font,outerTicks:eS[ec],showGrid:!eM[ec],data:ey[ec]||[],bgColor:ej,calendar:o.calendar,automargin:!0,visibleDflt:eY,reverseDflt:eX,autotypenumbersDflt:em,splomStash:((o._splomAxes||{})[eh]||{})[ed]};coerce("uirevision",o.uirevision),ee(ep,eg,coerce,eK),et(ep,eg,coerce,eK,o);var eJ=eZ&&eh===eW.charAt(0),e$=coerce2("spikecolor",eZ?eg.color:void 0),eQ=coerce2("spikethickness",eZ?1.5:void 0),e0=coerce2("spikedash",eZ?"dot":void 0),e1=coerce2("spikemode",eZ?"across":void 0),e2=coerce2("spikesnap");coerce("showspikes",!!eJ||!!e$||!!eQ||!!e0||!!e1||!!e2)||(delete eg.spikecolor,delete eg.spikethickness,delete eg.spikedash,delete eg.spikemode,delete eg.spikesnap);var e3=eo(ep.overlaying),e5=[0,1];if(void 0!==o[e3]){var e4=eo(o[e3].anchor);void 0!==o[e4]&&(e5=o[e4].domain)}en(ep,eg,coerce,{letter:eh,counterAxes:eV[eh],overlayableAxes:getOverlayableAxes(eh,ec),grid:o.grid,overlayingDomain:e5}),coerce("title.standoff"),addMissingMatchedAxis(),eg._input=ep}for(eC=0;eC<eG.length;){eh=(ec=eo(ed=eG[eC++])).charAt(0),_.isPlainObject(i[ec])||(i[ec]={}),ep=i[ec],eg=Z.newContainer(o,ec,eh+"axis"),newAxLayoutOut();var e6={letter:eh,font:o.font,outerTicks:eS[ec],showGrid:!eM[ec],data:[],bgColor:ej,calendar:o.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:em,splomStash:((o._splomAxes||{})[eh]||{})[ed]};coerce("uirevision",o.uirevision),eg.type=eH[ed]||"linear",et(ep,eg,coerce,e6,o),en(ep,eg,coerce,{letter:eh,counterAxes:eV[eh],overlayableAxes:getOverlayableAxes(eh,ec),grid:o.grid}),coerce("fixedrange"),addMissingMatchedAxis(),eg._input=ep}var e8=ef("rangeslider","handleDefaults"),e7=ef("rangeselector","handleDefaults");for(eC=0;eC<eB.length;eC++)ep=i[ec=eB[eC]],eg=o[ec],e8(i,o,ec),"date"===eg.type&&e7(ep,eg,o,eF,eg.calendar),coerce("fixedrange");for(eC=0;eC<eF.length;eC++){ep=i[ec=eF[eC]],eg=o[ec];var e9=o[eo(eg.anchor)];coerce("fixedrange",ef("rangeslider","isVisible")(e9))}er.handleDefaults(i,o,{axIds:eU.concat(eG).sort(ei.idSort),axHasImage:eA})}},92128:function(i,o,s){"use strict";var _=s(84267).mix,F=s(22399),N=s(71828);i.exports=function(i,o,s,j){var Z=(j=j||{}).dfltColor;function coerce2(s,_){return N.coerce2(i,o,j.attributes,s,_)}var X=coerce2("linecolor",Z),$=coerce2("linewidth");s("showline",j.showLine||!!X||!!$)||(delete o.linecolor,delete o.linewidth);var ee=coerce2("gridcolor",_(Z,j.bgColor,j.blend||F.lightFraction).toRgbString()),et=coerce2("gridwidth"),er=coerce2("griddash");if(s("showgrid",j.showGrid||!!ee||!!et||!!er)||(delete o.gridcolor,delete o.gridwidth,delete o.griddash),j.hasMinor){var en=coerce2("minor.gridcolor",_(o.gridcolor,j.bgColor,67).toRgbString()),ei=coerce2("minor.gridwidth",o.gridwidth||1),eo=coerce2("minor.griddash",o.griddash||"solid");s("minor.showgrid",!!en||!!ei||!!eo)||(delete o.minor.gridcolor,delete o.minor.gridwidth,delete o.minor.griddash)}if(!j.noZeroLine){var es=coerce2("zerolinecolor",Z),el=coerce2("zerolinewidth");s("zeroline",j.showGrid||!!es||!!el)||(delete o.zerolinecolor,delete o.zerolinewidth)}}},52830:function(i,o,s){"use strict";var _=s(92770),F=s(71828);i.exports=function(i,o,s,N){var j,Z,X,$,ee,et,er=N.counterAxes||[],en=N.overlayableAxes||[],ei=N.letter,eo=N.grid,es=N.overlayingDomain;eo&&(Z=eo._domains[ei][eo._axisMap[o._id]],j=eo._anchors[o._id],Z&&(X=eo[ei+"side"].split(" ")[0],$=eo.domain[ei]["right"===X||"top"===X?1:0])),Z=Z||[0,1],j=j||(_(i.position)?"free":er[0]||"free"),X=X||("x"===ei?"bottom":"left"),$=$||0,ee=0,et=!1;var el=F.coerce(i,o,{anchor:{valType:"enumerated",values:["free"].concat(er),dflt:j}},"anchor"),ec=F.coerce(i,o,{side:{valType:"enumerated",values:"x"===ei?["bottom","top"]:["left","right"],dflt:X}},"side");"free"===el&&("y"===ei&&(s("autoshift")&&($="left"===ec?es[0]:es[1],et=!o.automargin||o.automargin,ee="left"===ec?-3:3),s("shift",ee)),s("position",$)),s("automargin",et);var eu=!1;if(en.length&&(eu=F.coerce(i,o,{overlaying:{valType:"enumerated",values:[!1].concat(en),dflt:!1}},"overlaying")),!eu){var ef=s("domain",Z);ef[0]>ef[1]-1/4096&&(o.domain=Z),F.noneOrAll(i.domain,o.domain,Z),"sync"===o.tickmode&&(o.tickmode="auto")}return s("layer"),o}},89426:function(i,o,s){"use strict";var _=s(59652);i.exports=function(i,o,s,F,N){N||(N={});var j=N.tickSuffixDflt,Z=_(i);s("tickprefix")&&s("showtickprefix",Z),s("ticksuffix",j)&&s("showticksuffix",Z)}},23608:function(i,o,s){"use strict";var _=s(23074);i.exports=function(i,o,s,F){var N,j,Z=o._template||{},X=o.type||Z.type||"-";s("minallowed"),s("maxallowed");var $=s("range");$||F.noInsiderange||"log"===X||((N=s("insiderange"))&&(null===N[0]||null===N[1])&&(o.insiderange=!1,N=void 0),N&&($=s("range",N)));var ee=o.getAutorangeDflt($,F),et=s("autorange",ee);$&&(null===$[0]&&null===$[1]||(null===$[0]||null===$[1])&&("reversed"===et||!0===et)||null!==$[0]&&("min"===et||"max reversed"===et)||null!==$[1]&&("max"===et||"min reversed"===et))&&($=void 0,delete o.range,o.autorange=!0,j=!0),j||(et=s("autorange",ee=o.getAutorangeDflt($,F))),et&&(_(s,et,$),("linear"===X||"-"===X)&&s("rangemode")),o.cleanRange()}},42449:function(i,o,s){"use strict";var _=s(18783).FROM_BL;i.exports=function(i,o,s){void 0===s&&(s=_[i.constraintoward||"center"]);var F=[i.r2l(i.range[0]),i.r2l(i.range[1])],N=F[0]+(F[1]-F[0])*s;i.range=i._input.range=[i.l2r(N+(F[0]-N)*o),i.l2r(N+(F[1]-N)*o)],i.setScale()}},21994:function(i,o,s){"use strict";var _=s(39898),F=s(84096).g0,N=s(71828),j=N.numberFormat,Z=s(92770),X=N.cleanNumber,$=N.ms2DateTime,ee=N.dateTime2ms,et=N.ensureNumber,er=N.isArrayOrTypedArray,en=s(50606),ei=en.FP_SAFE,eo=en.BADNUM,es=en.LOG_CLIP,el=en.ONEWEEK,ec=en.ONEDAY,eu=en.ONEHOUR,ef=en.ONEMIN,ed=en.ONESEC,eh=s(41675),ep=s(85555),eg=ep.HOUR_PATTERN,em=ep.WEEKDAY_PATTERN;function fromLog(i){return Math.pow(10,i)}i.exports=function(i,o){o=o||{};var s=i._id||"x",en=s.charAt(0);function toLog(o,s){if(o>0)return Math.log(o)/Math.LN10;if(!(o<=0)||!s||!i.range||2!==i.range.length)return eo;var _=i.range[0],F=i.range[1];return .5*(_+F-2*es*Math.abs(_-F))}function dt2ms(o,s,_,F){if((F||{}).msUTC&&Z(o))return+o;var j=ee(o,_||i.calendar);if(j===eo){if(!Z(o))return eo;o=+o;var X=Math.floor(10*N.mod(o+.05,1));j=ee(new Date(Math.round(o-X/10)))+X/10}return j}function ms2dt(o,s,_){return $(o,s,_||i.calendar)}function getCategoryName(o){return i._categories[Math.round(o)]}function setCategoryIndex(o){if(null!=o){if(void 0===i._categoriesMap&&(i._categoriesMap={}),void 0!==i._categoriesMap[o])return i._categoriesMap[o];i._categories.push("number"==typeof o?String(o):o);var s=i._categories.length-1;return i._categoriesMap[o]=s,s}return eo}function setMultiCategoryIndex(i,o){for(var s=Array(o),_=0;_<o;_++){var F=(i[0]||[])[_],N=(i[1]||[])[_];s[_]=getCategoryIndex([F,N])}return s}function getCategoryIndex(o){if(i._categoriesMap)return i._categoriesMap[o]}function getCategoryPosition(i){var o=getCategoryIndex(i);return void 0!==o?o:Z(i)?+i:void 0}function getRangePosition(i){return Z(i)?+i:getCategoryIndex(i)}function _l2p(i,o,s){return _.round(s+o*i,2)}var l2p=function(o){return Z(o)?_l2p(o,i._m,i._b):eo},p2l=function(o){var s;return s=i._m,(o-i._b)/s};if(i.rangebreaks){var ey="y"===en;l2p=function(o){if(!Z(o))return eo;var s=i._rangebreaks.length;if(!s)return _l2p(o,i._m,i._b);var _=ey;i.range[0]>i.range[1]&&(_=!_);for(var F=_?-1:1,N=F*o,j=0,X=0;X<s;X++){var $=F*i._rangebreaks[X].min,ee=F*i._rangebreaks[X].max;if(N<$)break;if(N>ee)j=X+1;else{j=N<($+ee)/2?X:X+1;break}}var et=i._B[j]||0;return isFinite(et)?_l2p(o,i._m2,et):0},p2l=function(o){var s,_,F=i._rangebreaks.length;if(!F)return s=i._m,(o-i._b)/s;for(var N=0,j=0;j<F&&!(o<i._rangebreaks[j].pmin);j++)o>i._rangebreaks[j].pmax&&(N=j+1);return _=i._m2,(o-i._B[N])/_}}i.c2l="log"===i.type?toLog:et,i.l2c="log"===i.type?fromLog:et,i.l2p=l2p,i.p2l=p2l,i.c2p="log"===i.type?function(i,o){return l2p(toLog(i,o))}:l2p,i.p2c="log"===i.type?function(i){return fromLog(p2l(i))}:p2l,-1!==["linear","-"].indexOf(i.type)?(i.d2r=i.r2d=i.d2c=i.r2c=i.d2l=i.r2l=X,i.c2d=i.c2r=i.l2d=i.l2r=et,i.d2p=i.r2p=function(o){return i.l2p(X(o))},i.p2d=i.p2r=p2l,i.cleanPos=et):"log"===i.type?(i.d2r=i.d2l=function(i,o){return toLog(X(i),o)},i.r2d=i.r2c=function(i){return fromLog(X(i))},i.d2c=i.r2l=X,i.c2d=i.l2r=et,i.c2r=toLog,i.l2d=fromLog,i.d2p=function(o,s){return i.l2p(i.d2r(o,s))},i.p2d=function(i){return fromLog(p2l(i))},i.r2p=function(o){return i.l2p(X(o))},i.p2r=p2l,i.cleanPos=et):"date"===i.type?(i.d2r=i.r2d=N.identity,i.d2c=i.r2c=i.d2l=i.r2l=dt2ms,i.c2d=i.c2r=i.l2d=i.l2r=ms2dt,i.d2p=i.r2p=function(o,s,_){return i.l2p(dt2ms(o,0,_))},i.p2d=i.p2r=function(i,o,s){return ms2dt(p2l(i),o,s)},i.cleanPos=function(o){return N.cleanDate(o,eo,i.calendar)}):"category"===i.type?(i.d2c=i.d2l=setCategoryIndex,i.r2d=i.c2d=i.l2d=getCategoryName,i.d2r=i.d2l_noadd=getCategoryPosition,i.r2c=function(o){var s=getRangePosition(o);return void 0!==s?s:i.fraction2r(.5)},i.l2r=i.c2r=et,i.r2l=getRangePosition,i.d2p=function(o){return i.l2p(i.r2c(o))},i.p2d=function(i){return getCategoryName(p2l(i))},i.r2p=i.d2p,i.p2r=p2l,i.cleanPos=function(i){return"string"==typeof i&&""!==i?i:et(i)}):"multicategory"===i.type&&(i.r2d=i.c2d=i.l2d=getCategoryName,i.d2r=i.d2l_noadd=getCategoryPosition,i.r2c=function(o){var s=getCategoryPosition(o);return void 0!==s?s:i.fraction2r(.5)},i.r2c_just_indices=getCategoryIndex,i.l2r=i.c2r=et,i.r2l=getCategoryPosition,i.d2p=function(o){return i.l2p(i.r2c(o))},i.p2d=function(i){return getCategoryName(p2l(i))},i.r2p=i.d2p,i.p2r=p2l,i.cleanPos=function(i){return Array.isArray(i)||"string"==typeof i&&""!==i?i:et(i)},i.setupMultiCategory=function(_){var F,j,Z=i._traceIndices,X=i._matchGroup;if(X&&0===i._categories.length){for(var $ in X)if($!==s){var ee=o[eh.id2name($)];Z=Z.concat(ee._traceIndices)}}var et=[[0,{}],[0,{}]],ei=[];for(F=0;F<Z.length;F++){var eo=_[Z[F]];if(en in eo){var es=eo[en],el=eo._length||N.minRowLength(es);if(er(es[0])&&er(es[1]))for(j=0;j<el;j++){var ec=es[0][j],eu=es[1][j];null!=ec&&null!=eu&&(ei.push([ec,eu]),ec in et[0][1]||(et[0][1][ec]=et[0][0]++),eu in et[1][1]||(et[1][1][eu]=et[1][0]++))}}}for(ei.sort(function(i,o){var s=et[0][1],_=s[i[0]]-s[o[0]];if(_)return _;var F=et[1][1];return F[i[1]]-F[o[1]]}),F=0;F<ei.length;F++)setCategoryIndex(ei[F])}),i.fraction2r=function(o){var s=i.r2l(i.range[0]),_=i.r2l(i.range[1]);return i.l2r(s+o*(_-s))},i.r2fraction=function(o){var s=i.r2l(i.range[0]),_=i.r2l(i.range[1]);return(i.r2l(o)-s)/(_-s)},i.limitRange=function(o){var s=i.minallowed,_=i.maxallowed;if(void 0!==s||void 0!==_){o||(o="range");var F=N.nestedProperty(i,o).get(),j=N.simpleMap(F,i.r2l),Z=j[1]<j[0];Z&&j.reverse();var X=N.simpleMap([s,_],i.r2l);void 0!==s&&j[0]<X[0]&&(F[Z?1:0]=s),void 0!==_&&j[1]>X[1]&&(F[Z?0:1]=_)}},i.cleanRange=function(o,s){i._cleanRange(o,s),i.limitRange(o)},i._cleanRange=function(o,s){s||(s={}),o||(o="range");var _,F,j=N.nestedProperty(i,o).get();if(F=(F="date"===i.type?N.dfltRange(i.calendar):"y"===en?ep.DFLTRANGEY:"realaxis"===i._name?[0,1]:s.dfltRange||ep.DFLTRANGEX).slice(),("tozero"===i.rangemode||"nonnegative"===i.rangemode)&&(F[0]=0),!j||2!==j.length){N.nestedProperty(i,o).set(F);return}var X=null===j[0],$=null===j[1];for("date"!==i.type||i.autorange||(j[0]=N.cleanDate(j[0],eo,i.calendar),j[1]=N.cleanDate(j[1],eo,i.calendar)),_=0;_<2;_++)if("date"===i.type){if(!N.isDateTime(j[_],i.calendar)){i[o]=F;break}if(i.r2l(j[0])===i.r2l(j[1])){var ee=N.constrain(i.r2l(j[0]),N.MIN_MS+1e3,N.MAX_MS-1e3);j[0]=i.l2r(ee-1e3),j[1]=i.l2r(ee+1e3);break}}else{if(!Z(j[_])){if(!(X||$)&&Z(j[1-_]))j[_]=j[1-_]*(_?10:.1);else{i[o]=F;break}}if(j[_]<-ei?j[_]=-ei:j[_]>ei&&(j[_]=ei),j[0]===j[1]){var et=Math.max(1,Math.abs(1e-6*j[0]));j[0]-=et,j[1]+=et}}},i.setScale=function(s){var _,F,N=o._size;if(i.overlaying){var j=eh.getFromId({_fullLayout:o},i.overlaying);i.domain=j.domain}var Z=s&&i._r?"_r":"range",X=i.calendar;i.cleanRange(Z);var $=i.r2l(i[Z][0],X),ee=i.r2l(i[Z][1],X),et="y"===en;if(et?(i._offset=N.t+(1-i.domain[1])*N.h,i._length=N.h*(i.domain[1]-i.domain[0]),i._m=i._length/($-ee),i._b=-i._m*ee):(i._offset=N.l+i.domain[0]*N.w,i._length=N.w*(i.domain[1]-i.domain[0]),i._m=i._length/(ee-$),i._b=-i._m*$),i._rangebreaks=[],i._lBreaks=0,i._m2=0,i._B=[],i.rangebreaks&&(i._rangebreaks=i.locateBreaks(Math.min($,ee),Math.max($,ee)),i._rangebreaks.length)){for(_=0;_<i._rangebreaks.length;_++)F=i._rangebreaks[_],i._lBreaks+=Math.abs(F.max-F.min);var er=et;$>ee&&(er=!er),er&&i._rangebreaks.reverse();var ei=er?-1:1;for(i._m2=ei*i._length/(Math.abs(ee-$)-i._lBreaks),i._B.push(-i._m2*(et?ee:$)),_=0;_<i._rangebreaks.length;_++)F=i._rangebreaks[_],i._B.push(i._B[i._B.length-1]-ei*i._m2*(F.max-F.min));for(_=0;_<i._rangebreaks.length;_++)(F=i._rangebreaks[_]).pmin=l2p(F.min),F.pmax=l2p(F.max)}if(!isFinite(i._m)||!isFinite(i._b)||i._length<0)throw o._replotting=!1,Error("Something went wrong with axis scaling")},i.maskBreaks=function(o){var s,_,F,j,Z,$=i.rangebreaks||[];$._cachedPatterns||($._cachedPatterns=$.map(function(o){return o.enabled&&o.bounds?N.simpleMap(o.bounds,o.pattern?X:i.d2c):null})),$._cachedValues||($._cachedValues=$.map(function(o){return o.enabled&&o.values?N.simpleMap(o.values,i.d2c).sort(N.sorterAsc):null}));for(var ee=0;ee<$.length;ee++){var et=$[ee];if(et.enabled){if(et.bounds){var er=et.pattern;switch(_=(s=$._cachedPatterns[ee])[0],F=s[1],er){case em:j=(Z=new Date(o)).getUTCDay(),_>F&&(F+=7,j<_&&(j+=7));break;case eg:j=(Z=new Date(o)).getUTCHours()+(Z.getUTCMinutes()/60+Z.getUTCSeconds()/3600+Z.getUTCMilliseconds()/36e5),_>F&&(F+=24,j<_&&(j+=24));break;case"":j=o}if(j>=_&&j<F)return eo}else for(var en=$._cachedValues[ee],ei=0;ei<en.length;ei++)if(F=(_=en[ei])+et.dvalue,o>=_&&o<F)return eo}}return o},i.locateBreaks=function(o,s){var _=[];if(!i.rangebreaks)return _;var F=i.rangebreaks.slice().sort(function(i,o){return i.pattern===em&&o.pattern===eg?-1:o.pattern===em&&i.pattern===eg?1:0}),addBreak=function(i,F){if((i=N.constrain(i,o,s))!==(F=N.constrain(F,o,s))){for(var j=!0,Z=0;Z<_.length;Z++){var X=_[Z];i<X.max&&F>=X.min&&(i<X.min&&(X.min=i),F>X.max&&(X.max=F),j=!1)}j&&_.push({min:i,max:F})}};for(Z=0;Z<F.length;Z++){var j=F[Z];if(j.enabled){if(j.bounds){var Z,$,ee,et,er,en,ei=o,eo=s;j.pattern&&(ei=Math.floor(ei)),ee=($=N.simpleMap(j.bounds,j.pattern?X:i.r2l))[0],et=$[1];var es=new Date(ei);switch(j.pattern){case em:en=el,er=((et<ee?7:0)+(et-ee))*ec,ei+=ee*ec-(es.getUTCDay()*ec+es.getUTCHours()*eu+es.getUTCMinutes()*ef+es.getUTCSeconds()*ed+es.getUTCMilliseconds());break;case eg:en=ec,er=((et<ee?24:0)+(et-ee))*eu,ei+=ee*eu-(es.getUTCHours()*eu+es.getUTCMinutes()*ef+es.getUTCSeconds()*ed+es.getUTCMilliseconds());break;default:ei=Math.min($[0],$[1]),er=en=(eo=Math.max($[0],$[1]))-ei}for(var eh=ei;eh<eo;eh+=en)addBreak(eh,eh+er)}else for(var ep=N.simpleMap(j.values,i.d2c),ey=0;ey<ep.length;ey++)et=(ee=ep[ey])+j.dvalue,addBreak(ee,et)}}return _.sort(function(i,o){return i.min-o.min}),_},i.makeCalcdata=function(o,s,_){var F,j,Z,X,$=i.type,ee="date"===$&&o[s+"calendar"];if(s in o){if(F=o[s],X=o._length||N.minRowLength(F),N.isTypedArray(F)&&("linear"===$||"log"===$)){if(X===F.length)return F;if(F.subarray)return F.subarray(0,X)}if("multicategory"===$)return setMultiCategoryIndex(F,X);for(Z=0,j=Array(X);Z<X;Z++)j[Z]=i.d2c(F[Z],0,ee,_)}else{var et=s+"0" in o?i.d2c(o[s+"0"],0,ee):0,er=o["d"+s]?Number(o["d"+s]):1;for(Z=0,F=o[({x:"y",y:"x"})[s]],j=Array(X=o._length||F.length);Z<X;Z++)j[Z]=et+Z*er}if(i.rangebreaks)for(Z=0;Z<X;Z++)j[Z]=i.maskBreaks(j[Z]);return j},i.isValidRange=function(o,s){return Array.isArray(o)&&2===o.length&&(s&&null===o[0]||Z(i.r2l(o[0])))&&(s&&null===o[1]||Z(i.r2l(o[1])))},i.getAutorangeDflt=function(o,s){var _=!i.isValidRange(o,"nullOk");return _&&s&&s.reverseDflt?_="reversed":o&&(null===o[0]&&null===o[1]?_=!0:null===o[0]&&null!==o[1]?_="min":null!==o[0]&&null===o[1]&&(_="max")),_},i.isReversed=function(){var o=i.autorange;return"reversed"===o||"min reversed"===o||"max reversed"===o},i.isPtWithinRange=function(o,s){var _=i.c2l(o[en],null,s),F=i.r2l(i.range[0]),N=i.r2l(i.range[1]);return F<N?F<=_&&_<=N:N<=_&&_<=F},i._emptyCategories=function(){i._categories=[],i._categoriesMap={}},i.clearCalc=function(){var s=i._matchGroup;if(s){var _=null,F=null;for(var N in s){var j=o[eh.id2name(N)];if(j._categories){_=j._categories,F=j._categoriesMap;break}}_&&F?(i._categories=_,i._categoriesMap=F):i._emptyCategories()}else i._emptyCategories();if(i._initialCategories)for(var Z=0;Z<i._initialCategories.length;Z++)setCategoryIndex(i._initialCategories[Z])},i.sortByInitialCategories=function(){var _=[];if(i._emptyCategories(),i._initialCategories)for(var F=0;F<i._initialCategories.length;F++)setCategoryIndex(i._initialCategories[F]);_=_.concat(i._traceIndices);var N=i._matchGroup;for(var j in N)if(s!==j){var Z=o[eh.id2name(j)];Z._categories=i._categories,Z._categoriesMap=i._categoriesMap,_=_.concat(Z._traceIndices)}return _};var ev=o._d3locale;"date"===i.type&&(i._dateFormat=ev?ev.timeFormat:F,i._extraFormat=o._extraFormat),i._separators=o.separators,i._numFormat=ev?ev.numberFormat:j,delete i._minDtick,delete i._forceTick0}},59652:function(i){"use strict";i.exports=function(i){var o=["showexponent","showtickprefix","showticksuffix"].filter(function(o){return void 0!==i[o]});if(o.every(function(s){return i[s]===i[o[0]]})||1===o.length)return i[o[0]]}},96115:function(i,o,s){"use strict";var _=s(71828),F=s(7901).contrast,N=s(13838),j=s(59652),Z=s(85501);function tickformatstopDefaults(i,o){function coerce(s,F){return _.coerce(i,o,N.tickformatstops,s,F)}coerce("enabled")&&(coerce("dtickrange"),coerce("value"))}i.exports=function(i,o,s,X,$){$||($={});var ee=s("labelalias");_.isPlainObject(ee)||delete o.labelalias;var et=j(i);if(s("showticklabels")){var er=$.font||{},en=o.color,ei=-1!==(o.ticklabelposition||"").indexOf("inside")?F($.bgColor):en&&en!==N.color.dflt?en:er.color;if(_.coerceFont(s,"tickfont",{family:er.family,size:er.size,color:ei}),$.noTicklabelstep||"multicategory"===X||"log"===X||s("ticklabelstep"),$.noAng||s("tickangle"),"category"!==X){var eo=s("tickformat");Z(i,o,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:tickformatstopDefaults}),o.tickformatstops.length||delete o.tickformatstops,$.noExp||eo||"date"===X||(s("showexponent",et),s("exponentformat"),s("minexponent"),s("separatethousands"))}}}},38701:function(i,o,s){"use strict";var _=s(71828),F=s(13838);i.exports=function(i,o,s,N){var j=N.isMinor,Z=j?i.minor||{}:i,X=j?o.minor:o,$=j?F.minor:F,ee=j?"minor.":"",et=_.coerce2(Z,X,$,"ticklen",j?.6*(o.ticklen||5):void 0),er=_.coerce2(Z,X,$,"tickwidth",j?o.tickwidth||1:void 0),en=_.coerce2(Z,X,$,"tickcolor",(j?o.tickcolor:void 0)||X.color);s(ee+"ticks",!j&&N.outerTicks||et||er||en?"outside":"")||(delete X.ticklen,delete X.tickwidth,delete X.tickcolor)}},26218:function(i,o,s){"use strict";var _=s(66287),F=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s,N,j){j||(j={});var Z=j.isMinor,X=Z?i.minor||{}:i,$=Z?o.minor:o,ee=Z?"minor.":"";function readInput(i){var o=X[i];return void 0!==o?o:($._template||{})[i]}var et=readInput("tick0"),er=readInput("dtick"),en=s(ee+"tickmode",F(readInput("tickvals"))?"array":er?"linear":"auto");if("auto"===en||"sync"===en)s(ee+"nticks");else if("linear"===en){var ei=$.dtick=_.dtick(er,N);$.tick0=_.tick0(et,N,o.calendar,ei)}else"multicategory"===N||(void 0===s(ee+"tickvals")?$.tickmode="auto":Z||s("ticktext"))}},66847:function(i,o,s){"use strict";var _=s(39898),F=s(73972),N=s(71828),j=s(91424),Z=s(89298);i.exports=function(i,o,s,X){var $,ee,et,er,en=i._fullLayout;if(0===o.length){Z.redrawComponents(i);return}function unsetSubplotTransform(i){var o=i.xaxis,s=i.yaxis;en._defs.select("#"+i.clipId+"> rect").call(j.setTranslate,0,0).call(j.setScale,1,1),i.plot.call(j.setTranslate,o._offset,s._offset).call(j.setScale,1,1);var _=i.plot.selectAll(".scatterlayer .trace");_.selectAll(".point").call(j.setPointGroupScale,1,1),_.selectAll(".textpoint").call(j.setTextPointsScale,1,1),_.call(j.hideOutsideRangePoints,i)}function updateSubplot(o,s){var _=o.plotinfo,F=_.xaxis,X=_.yaxis,$=F._length,ee=X._length,et=!!o.xr1,er=!!o.yr1,en=[];if(et){var ei=N.simpleMap(o.xr0,F.r2l),eo=N.simpleMap(o.xr1,F.r2l),es=ei[1]-ei[0],el=eo[1]-eo[0];en[0]=(ei[0]*(1-s)+s*eo[0]-ei[0])/(ei[1]-ei[0])*$,en[2]=$*(1-s+s*el/es),F.range[0]=F.l2r(ei[0]*(1-s)+s*eo[0]),F.range[1]=F.l2r(ei[1]*(1-s)+s*eo[1])}else en[0]=0,en[2]=$;if(er){var ec=N.simpleMap(o.yr0,X.r2l),eu=N.simpleMap(o.yr1,X.r2l),ef=ec[1]-ec[0],ed=eu[1]-eu[0];en[1]=(ec[1]*(1-s)+s*eu[1]-ec[1])/(ec[0]-ec[1])*ee,en[3]=ee*(1-s+s*ed/ef),X.range[0]=F.l2r(ec[0]*(1-s)+s*eu[0]),X.range[1]=X.l2r(ec[1]*(1-s)+s*eu[1])}else en[1]=0,en[3]=ee;Z.drawOne(i,F,{skipTitle:!0}),Z.drawOne(i,X,{skipTitle:!0}),Z.redrawComponents(i,[F._id,X._id]);var eh=et?$/en[2]:1,ep=er?ee/en[3]:1,eg=et?en[0]:0,em=er?en[1]:0,ey=et?en[0]/en[2]*$:0,ev=er?en[1]/en[3]*ee:0,ex=F._offset-ey,e_=X._offset-ev;_.clipRect.call(j.setTranslate,eg,em).call(j.setScale,1/eh,1/ep),_.plot.call(j.setTranslate,ex,e_).call(j.setScale,eh,ep),j.setPointGroupScale(_.zoomScalePts,1/eh,1/ep),j.setTextPointsScale(_.zoomScaleTxt,1/eh,1/ep)}function transitionComplete(){for(var s={},_=0;_<o.length;_++){var N=o[_],j=N.plotinfo.xaxis,Z=N.plotinfo.yaxis;N.xr1&&(s[j._name+".range"]=N.xr1.slice()),N.yr1&&(s[Z._name+".range"]=N.yr1.slice())}return $&&$(),F.call("relayout",i,s).then(function(){for(var i=0;i<o.length;i++)unsetSubplotTransform(o[i].plotinfo)})}function transitionInterrupt(){for(var s={},_=0;_<o.length;_++){var N=o[_],j=N.plotinfo.xaxis,Z=N.plotinfo.yaxis;N.xr0&&(s[j._name+".range"]=N.xr0.slice()),N.yr0&&(s[Z._name+".range"]=N.yr0.slice())}return F.call("relayout",i,s).then(function(){for(var i=0;i<o.length;i++)unsetSubplotTransform(o[i].plotinfo)})}X&&($=X());var ei=_.ease(s.easing);function doFrame(){for(var i=ei(Math.min(1,((et=Date.now())-ee)/s.duration)),_=0;_<o.length;_++)updateSubplot(o[_],i);et-ee>s.duration?(transitionComplete(),er=window.cancelAnimationFrame(doFrame)):er=window.requestAnimationFrame(doFrame)}return i._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(er),er=null,transitionInterrupt()}),ee=Date.now(),er=window.requestAnimationFrame(doFrame),Promise.resolve()}},951:function(i,o,s){"use strict";var _=s(73972).traceIs,F=s(4322);function setAutoType(i,o){if("-"===i.type){var s,N=i._id,j=N.charAt(0);-1!==N.indexOf("scene")&&(N=j);var Z=getFirstNonEmptyTrace(o,N,j);if(Z){if("histogram"===Z.type&&j===({v:"y",h:"x"})[Z.orientation||"v"]){i.type="linear";return}var X=j+"calendar",$=Z[X],ee={noMultiCategory:!_(Z,"cartesian")||_(Z,"noMultiCategory")};if("box"===Z.type&&Z._hasPreCompStats&&j===({h:"x",v:"y"})[Z.orientation||"v"]&&(ee.noMultiCategory=!0),ee.autotypenumbers=i.autotypenumbers,isBoxWithoutPositionCoords(Z,j)){var et=getBoxPosLetter(Z),er=[];for(s=0;s<o.length;s++){var en=o[s];_(en,"box-violin")&&(en[j+"axis"]||j)===N&&(void 0!==en[et]?er.push(en[et][0]):void 0!==en.name?er.push(en.name):er.push("text"),en[X]!==$&&($=void 0))}i.type=F(er,$,ee)}else if("splom"===Z.type){var ei=Z.dimensions[Z._axesDim[N]];ei.visible&&(i.type=F(ei.values,$,ee))}else i.type=F(Z[j]||[Z[j+"0"]],$,ee)}}}function getFirstNonEmptyTrace(i,o,s){for(var _=0;_<i.length;_++){var F=i[_];if("splom"===F.type&&F._length>0&&(F["_"+s+"axes"]||{})[o]||(F[s+"axis"]||s)===o&&(isBoxWithoutPositionCoords(F,s)||(F[s]||[]).length||F[s+"0"]))return F}}function getBoxPosLetter(i){return({v:"x",h:"y"})[i.orientation||"v"]}function isBoxWithoutPositionCoords(i,o){var s=getBoxPosLetter(i),F=_(i,"box-violin"),N=_(i._fullInput||{},"candlestick");return F&&!N&&o===s&&void 0===i[s]&&void 0===i[s+"0"]}i.exports=function(i,o,s,_){s("autotypenumbers",_.autotypenumbersDflt),"-"===s("type",(_.splomStash||{}).type)&&(setAutoType(o,_.data),"-"===o.type?o.type="linear":i.type=o.type)}},31137:function(i,o,s){"use strict";var _=s(73972),F=s(71828);function bindingValueHasChanged(i,o,s){var _,N,j,Z=!1;if("data"===o.type)_=i._fullData[null!==o.traces?o.traces[0]:0];else{if("layout"!==o.type)return!1;_=i._fullLayout}return N=F.nestedProperty(_,o.prop).get(),(j=s[o.type]=s[o.type]||{}).hasOwnProperty(o.prop)&&j[o.prop]!==N&&(Z=!0),j[o.prop]=N,{changed:Z,value:N}}function computeAnimateBindings(i,o){return Array.isArray(o[0])&&1===o[0].length&&-1!==["string","number"].indexOf(typeof o[0][0])?[{type:"layout",prop:"_currentFrame",value:o[0][0].toString()}]:[]}function computeLayoutBindings(i,o){var s=[],_=o[0],N={};if("string"==typeof _)N[_]=o[1];else{if(!F.isPlainObject(_))return s;N=_}return crawl(N,function(i,o,_){s.push({type:"layout",prop:i,value:_})},"",0),s}function computeDataBindings(i,o){var s,_,N,j,Z=[];if(_=o[0],N=o[1],s=o[2],j={},"string"==typeof _)j[_]=N;else{if(!F.isPlainObject(_))return Z;j=_,void 0===s&&(s=N)}return void 0===s&&(s=null),crawl(j,function(o,_,F){if(Array.isArray(F)){var N,j,X=Math.min((j=F.slice()).length,i.data.length);s&&(X=Math.min(X,s.length)),N=[];for(var $=0;$<X;$++)N[$]=s?s[$]:$}else j=F,N=s?s.slice():null;if(null===N)Array.isArray(j)&&(j=j[0]);else if(Array.isArray(N)){if(!Array.isArray(j)){var ee=j;j=[];for(var et=0;et<N.length;et++)j[et]=ee}j.length=Math.min(N.length,j.length)}Z.push({type:"data",prop:o,traces:N,value:j})},"",0),Z}function crawl(i,o,s,_){Object.keys(i).forEach(function(N){var j=i[N];if("_"!==N[0]){var Z=s+(_>0?".":"")+N;F.isPlainObject(j)?crawl(j,o,Z,_+1):o(Z,N,j)}})}o.manageCommandObserver=function(i,s,_,N){var j={},Z=!0;s&&s._commandObserver&&(j=s._commandObserver),j.cache||(j.cache={}),j.lookupTable={};var X=o.hasSimpleAPICommandBindings(i,_,j.lookupTable);if(s&&s._commandObserver){if(X)return j;if(s._commandObserver.remove)return s._commandObserver.remove(),s._commandObserver=null,j}if(X){bindingValueHasChanged(i,X,j.cache),j.check=function(){if(Z){var o=bindingValueHasChanged(i,X,j.cache);return o.changed&&N&&void 0!==j.lookupTable[o.value]&&(j.disable(),Promise.resolve(N({value:o.value,type:X.type,prop:X.prop,traces:X.traces,index:j.lookupTable[o.value]})).then(j.enable,j.enable)),o.changed}};for(var $=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],ee=0;ee<$.length;ee++)i._internalOn($[ee],j.check);j.remove=function(){for(var o=0;o<$.length;o++)i._removeInternalListener($[o],j.check)}}else F.log("Unable to automatically bind plot updates to API command"),j.lookupTable={},j.remove=function(){};return j.disable=function(){Z=!1},j.enable=function(){Z=!0},s&&(s._commandObserver=j),j},o.hasSimpleAPICommandBindings=function(i,s,_){var F=s.length;for(N=0;N<F;N++){var N,j,Z,X=s[N],$=X.method,ee=X.args;if(Array.isArray(ee)||(ee=[]),!$)return!1;var et=o.computeAPICommandBindings(i,$,ee);if(1!==et.length)return!1;if(j){if((Z=et[0]).type!==j.type||Z.prop!==j.prop)return!1;if(Array.isArray(j.traces)){if(!Array.isArray(Z.traces))return!1;Z.traces.sort();for(var er=0;er<j.traces.length;er++)if(j.traces[er]!==Z.traces[er])return!1}else if(Z.prop!==j.prop)return!1}else Array.isArray((j=et[0]).traces)&&j.traces.sort();var en=(Z=et[0]).value;if(Array.isArray(en)){if(1!==en.length)return!1;en=en[0]}_&&(_[en]=N)}return j},o.executeAPICommand=function(i,o,s){if("skip"===o)return Promise.resolve();var N=_.apiMethodRegistry[o],j=[i];Array.isArray(s)||(s=[]);for(var Z=0;Z<s.length;Z++)j.push(s[Z]);return N.apply(null,j).catch(function(i){return F.warn("API call to Plotly."+o+" rejected.",i),Promise.reject(i)})},o.computeAPICommandBindings=function(i,o,s){var _;switch(Array.isArray(s)||(s=[]),o){case"restyle":_=computeDataBindings(i,s);break;case"relayout":_=computeLayoutBindings(i,s);break;case"update":_=computeDataBindings(i,[s[0],s[2]]).concat(computeLayoutBindings(i,[s[1]]));break;case"animate":_=computeAnimateBindings(i,s);break;default:_=[]}return _}},27670:function(i,o,s){"use strict";var _=s(1426).extendFlat;o.Y=function(i,o){o=o||{};var s={valType:"info_array",editType:(i=i||{}).editType,items:[{valType:"number",min:0,max:1,editType:i.editType},{valType:"number",min:0,max:1,editType:i.editType}],dflt:[0,1]};i.name&&i.name,i.trace,o.description&&o.description;var F={x:_({},s,{}),y:_({},s,{}),editType:i.editType};return i.noGridCell||(F.row={valType:"integer",min:0,dflt:0,editType:i.editType},F.column={valType:"integer",min:0,dflt:0,editType:i.editType}),F},o.c=function(i,o,s,_){var F=_&&_.x||[0,1],N=_&&_.y||[0,1],j=o.grid;if(j){var Z=s("domain.column");void 0!==Z&&(Z<j.columns?F=j._domains.x[Z]:delete i.domain.column);var X=s("domain.row");void 0!==X&&(X<j.rows?N=j._domains.y[X]:delete i.domain.row)}var $=s("domain.x",F),ee=s("domain.y",N);$[0]<$[1]||(i.domain.x=F.slice()),ee[0]<ee[1]||(i.domain.y=N.slice())}},41940:function(i){"use strict";i.exports=function(i){var o=i.editType,s=i.colorEditType;void 0===s&&(s=o);var _={family:{valType:"string",noBlank:!0,strict:!0,editType:o},size:{valType:"number",min:1,editType:o},color:{valType:"color",editType:s},editType:o};return i.autoSize&&(_.size.dflt="auto"),i.autoColor&&(_.color.dflt="auto"),i.arrayOk&&(_.family.arrayOk=!0,_.size.arrayOk=!0,_.color.arrayOk=!0),_}},31391:function(i){"use strict";i.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(i,o){"use strict";o.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},o.axesNames=["lonaxis","lataxis"],o.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},o.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},o.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},o.clipPad=.001,o.precision=.1,o.landColor="#F0DC82",o.waterColor="#3399FF",o.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},o.sphereSVG={type:"Sphere"},o.fillLayers={ocean:1,land:1,lakes:1},o.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},o.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],o.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],o.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(i,o,s){"use strict";var _=s(39898),F=s(27362),N=F.geoPath,j=F.geoDistance,Z=s(65704),X=s(73972),$=s(71828),ee=$.strTranslate,et=s(7901),er=s(91424),en=s(30211),ei=s(74875),eo=s(89298),es=s(71739).getAutoRange,el=s(28569),ec=s(47322).prepSelect,eu=s(47322).clearOutline,ef=s(47322).selectOnClick,ed=s(74455),eh=s(78776),ep=s(41327),eg=s(90973),em=s(96892).zL;function Geo(i){this.id=i.id,this.graphDiv=i.graphDiv,this.container=i.container,this.topojsonURL=i.topojsonURL,this.isStatic=i.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var ey=Geo.prototype;function getProjection(i){for(var o=i.projection,s=o.type,_=eh.projNames[s],X=(F[_="geo"+$.titleCase(_)]||Z[_])(),ee=i._isSatellite?180*Math.acos(1/o.distance)/Math.PI:i._isClipped?eh.lonaxisSpan[s]/2:null,et=["center","rotate","parallels","clipExtent"],dummyFn=function(i){return i?X:[]},er=0;er<et.length;er++){var en=et[er];"function"!=typeof X[en]&&(X[en]=dummyFn)}return X.isLonLatOverEdges=function(i){if(null===X(i))return!0;if(!ee)return!1;var o=X.rotate();return j(i,[-o[0],-o[1]])>ee*Math.PI/180},X.getPath=function(){return N().projection(X)},X.getBounds=function(i){return X.getPath().bounds(i)},X.precision(eh.precision),i._isSatellite&&X.tilt(o.tilt).distance(o.distance),ee&&X.clipAngle(ee-eh.clipPad),X}function makeGraticule(i,o,s){var _,F,N,j=o[i],Z=eh.scopeDefaults[o.scope];"lonaxis"===i?(_=Z.lonaxisRange,F=Z.lataxisRange,N=function(i,o){return[i,o]}):"lataxis"===i&&(_=Z.lataxisRange,F=Z.lonaxisRange,N=function(i,o){return[o,i]});var X={type:"linear",range:[_[0],_[1]-1e-6],tick0:j.tick0,dtick:j.dtick};eo.setConvert(X,s);var $=eo.calcTicks(X);o.isScoped||"lonaxis"!==i||$.pop();for(var ee=$.length,et=Array(ee),er=0;er<ee;er++)for(var en=$[er].x,ei=et[er]=[],es=F[0];es<F[1]+2.5;es+=2.5)ei.push(N(en,es));return{type:"MultiLineString",coordinates:et}}function makeRangeBox(i,o){var s=eh.clipPad,_=i[0]+s,F=i[1]-s,N=o[0]+s,j=o[1]-s;_>0&&F<0&&(F+=360);var Z=(F-_)/4;return{type:"Polygon",coordinates:[[[_,N],[_,j],[_+Z,j],[_+2*Z,j],[_+3*Z,j],[F,j],[F,N],[F-Z,N],[F-2*Z,N],[F-3*Z,N],[_,N]]]}}i.exports=function(i){return new Geo(i)},ey.plot=function(i,o,s,_){var F=this;if(_)return F.update(i,o,!0);F._geoCalcData=i,F._fullLayout=o;var N=o[this.id],j=[],Z=!1;for(var X in eh.layerNameToAdjective)if("frame"!==X&&N["show"+X]){Z=!0;break}for(var $=!1,ee=0;ee<i.length;ee++){var et=i[0][0].trace;et._geo=F,et.locationmode&&(Z=!0);var er=et.marker;if(er){var en=er.angle,ei=er.angleref;(en||"north"===ei||"previous"===ei)&&($=!0)}}if(this._hasMarkerAngles=$,Z){var eo=eg.getTopojsonName(N);(null===F.topojson||eo!==F.topojsonName)&&(F.topojsonName=eo,void 0===PlotlyGeoAssets.topojson[F.topojsonName]&&j.push(F.fetchTopojson()))}j=j.concat(ep.fetchTraceGeoData(i)),s.push(new Promise(function(s,_){Promise.all(j).then(function(){F.topojson=PlotlyGeoAssets.topojson[F.topojsonName],F.update(i,o),s()}).catch(_)}))},ey.fetchTopojson=function(){var i=this,o=eg.getTopojsonPath(i.topojsonURL,i.topojsonName);return new Promise(function(s,F){_.json(o,function(_,N){if(_)return 404===_.status?F(Error(["plotly.js could not find topojson file at",o+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):F(Error(["unexpected error while fetching topojson file at",o].join(" ")));PlotlyGeoAssets.topojson[i.topojsonName]=N,s()})})},ey.update=function(i,o,s){var _=o[this.id];this.hasChoropleth=!1;for(var F=0;F<i.length;F++){var N=i[F],j=N[0].trace;"choropleth"===j.type&&(this.hasChoropleth=!0),!0===j.visible&&j._length>0&&j._module.calcGeoJSON(N,o)}if(!s){if(this.updateProjection(i,o))return;this.viewInitial&&this.scope===_.scope||this.saveViewInitial(_)}this.scope=_.scope,this.updateBaseLayers(o,_),this.updateDims(o,_),this.updateFx(o,_),ei.generalUpdatePerTraceModule(this.graphDiv,this,i,_);var Z=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Z.selectAll(".point"),this.dataPoints.text=Z.selectAll("text"),this.dataPaths.line=Z.selectAll(".js-line");var X=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=X.selectAll("path"),this._render()},ey.updateProjection=function(i,o){var s=this.graphDiv,_=o[this.id],F=o._size,N=_.domain,j=_.projection,Z=_.lonaxis,X=_.lataxis,ee=Z._ax,et=X._ax,er=this.projection=getProjection(_),en=[[F.l+F.w*N.x[0],F.t+F.h*(1-N.y[1])],[F.l+F.w*N.x[1],F.t+F.h*(1-N.y[0])]],ei=_.center||{},eo=j.rotation||{},el=Z.range||[],ec=X.range||[];if(_.fitbounds){ee._length=en[1][0]-en[0][0],et._length=en[1][1]-en[0][1],ee.range=es(s,ee),et.range=es(s,et);var eu=(ee.range[0]+ee.range[1])/2,ef=(et.range[0]+et.range[1])/2;if(_._isScoped)ei={lon:eu,lat:ef};else if(_._isClipped){ei={lon:eu,lat:ef},eo={lon:eu,lat:ef,roll:eo.roll};var ed=j.type,ep=eh.lonaxisSpan[ed]/2||180,eg=eh.lataxisSpan[ed]/2||90;el=[eu-ep,eu+ep],ec=[ef-eg,ef+eg]}else ei={lon:eu,lat:ef},eo={lon:eu,lat:eo.lat,roll:eo.roll}}er.center([ei.lon-eo.lon,ei.lat-eo.lat]).rotate([-eo.lon,-eo.lat,eo.roll]).parallels(j.parallels);var em=makeRangeBox(el,ec);er.fitExtent(en,em);var ey=this.bounds=er.getBounds(em),ev=this.fitScale=er.scale(),ex=er.translate();if(_.fitbounds){var e_=er.getBounds(makeRangeBox(ee.range,et.range)),ew=Math.min((ey[1][0]-ey[0][0])/(e_[1][0]-e_[0][0]),(ey[1][1]-ey[0][1])/(e_[1][1]-e_[0][1]));isFinite(ew)?er.scale(ew*ev):$.warn("Something went wrong during"+this.id+"fitbounds computations.")}else er.scale(j.scale*ev);var eT=this.midPt=[(ey[0][0]+ey[1][0])/2,(ey[0][1]+ey[1][1])/2];if(er.translate([ex[0]+(eT[0]-ex[0]),ex[1]+(eT[1]-ex[1])]).clipExtent(ey),_._isAlbersUsa){var ek=er([ei.lon,ei.lat]),eA=er.translate();er.translate([eA[0]-(ek[0]-eA[0]),eA[1]-(ek[1]-eA[1])])}},ey.updateBaseLayers=function(i,o){var s=this,F=s.topojson,N=s.layers,j=s.basePaths;function isAxisLayer(i){return"lonaxis"===i||"lataxis"===i}function isLineLayer(i){return!!eh.lineLayers[i]}function isFillLayer(i){return!!eh.fillLayers[i]}var Z=(this.hasChoropleth?eh.layersForChoropleth:eh.layers).filter(function(i){return isLineLayer(i)||isFillLayer(i)?o["show"+i]:!isAxisLayer(i)||o[i].showgrid}),X=s.framework.selectAll(".layer").data(Z,String);X.exit().each(function(i){delete N[i],delete j[i],_.select(this).remove()}),X.enter().append("g").attr("class",function(i){return"layer "+i}).each(function(i){var o=N[i]=_.select(this);"bg"===i?s.bgRect=o.append("rect").style("pointer-events","all"):isAxisLayer(i)?j[i]=o.append("path").style("fill","none"):"backplot"===i?o.append("g").classed("choroplethlayer",!0):"frontplot"===i?o.append("g").classed("scatterlayer",!0):isLineLayer(i)?j[i]=o.append("path").style("fill","none").style("stroke-miterlimit",2):isFillLayer(i)&&(j[i]=o.append("path").style("stroke","none"))}),X.order(),X.each(function(s){var _=j[s],N=eh.layerNameToAdjective[s];"frame"===s?_.datum(eh.sphereSVG):isLineLayer(s)||isFillLayer(s)?_.datum(em(F,F.objects[s])):isAxisLayer(s)&&_.datum(makeGraticule(s,o,i)).call(et.stroke,o[s].gridcolor).call(er.dashLine,o[s].griddash,o[s].gridwidth),isLineLayer(s)?_.call(et.stroke,o[N+"color"]).call(er.dashLine,"",o[N+"width"]):isFillLayer(s)&&_.call(et.fill,o[N+"color"])})},ey.updateDims=function(i,o){var s=this.bounds,_=(o.framewidth||0)/2,F=s[0][0]-_,N=s[0][1]-_,j=s[1][0]-F+_,Z=s[1][1]-N+_;er.setRect(this.clipRect,F,N,j,Z),this.bgRect.call(er.setRect,F,N,j,Z).call(et.fill,o.bgcolor),this.xaxis._offset=F,this.xaxis._length=j,this.yaxis._offset=N,this.yaxis._length=Z},ey.updateFx=function(i,o){var s=this,F=s.graphDiv,N=s.bgRect,j=i.dragmode,Z=i.clickmode;if(!s.isStatic){var ee={element:s.bgRect.node(),gd:F,plotinfo:{id:s.id,xaxis:s.xaxis,yaxis:s.yaxis,fillRangeItems:function(i,o){o.isRect?(i.range={})[s.id]=[invert([o.xmin,o.ymin]),invert([o.xmax,o.ymax])]:(i.lassoPoints={})[s.id]=o.map(invert)}},xaxes:[s.xaxis],yaxes:[s.yaxis],subplot:s.id,clickFn:function(i){2===i&&eu(F)}};"pan"===j?(N.node().onmousedown=null,N.call(ed(s,o)),N.on("dblclick.zoom",zoomReset),F._context._scrollZoom.geo||N.on("wheel.zoom",null)):("select"===j||"lasso"===j)&&(N.on(".zoom",null),ee.prepFn=function(i,o,s){ec(i,o,s,ee,j)},el.init(ee)),N.on("mousemove",function(){var i=s.projection.invert($.getPositionFromD3Event());if(!i)return el.unhover(F,_.event);s.xaxis.p2c=function(){return i[0]},s.yaxis.p2c=function(){return i[1]},en.hover(F,_.event,s.id)}),N.on("mouseout",function(){F._dragging||el.unhover(F,_.event)}),N.on("click",function(){"select"!==j&&"lasso"!==j&&(Z.indexOf("select")>-1&&ef(_.event,F,[s.xaxis],[s.yaxis],s.id,ee),Z.indexOf("event")>-1&&en.click(F,_.event))})}function zoomReset(){var i=s.viewInitial,o={};for(var _ in i)o[s.id+"."+_]=i[_];X.call("_guiRelayout",F,o),F.emit("plotly_doubleclick",null)}function invert(i){return s.projection.invert([i[0]+s.xaxis._offset,i[1]+s.yaxis._offset])}},ey.makeFramework=function(){var i=this,o=i.graphDiv,s=o._fullLayout,F="clip"+s._uid+i.id;i.clipDef=s._clips.append("clipPath").attr("id",F),i.clipRect=i.clipDef.append("rect"),i.framework=_.select(i.container).append("g").attr("class","geo "+i.id).call(er.setClipUrl,F,o),i.project=function(o){var s=i.projection(o);return s?[s[0]-i.xaxis._offset,s[1]-i.yaxis._offset]:[null,null]},i.xaxis={_id:"x",c2p:function(o){return i.project(o)[0]}},i.yaxis={_id:"y",c2p:function(o){return i.project(o)[1]}},i.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},eo.setConvert(i.mockAxis,s)},ey.saveViewInitial=function(i){var o,s=i.center||{},_=i.projection,F=_.rotation||{};this.viewInitial={fitbounds:i.fitbounds,"projection.scale":_.scale},o=i._isScoped?{"center.lon":s.lon,"center.lat":s.lat}:i._isClipped?{"projection.rotation.lon":F.lon,"projection.rotation.lat":F.lat}:{"center.lon":s.lon,"center.lat":s.lat,"projection.rotation.lon":F.lon},$.extendFlat(this.viewInitial,o)},ey.render=function(i){this._hasMarkerAngles&&i?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},ey._render=function(){var i,o=this.projection,s=o.getPath();function translatePoints(i){var s=o(i.lonlat);return s?ee(s[0],s[1]):null}function hideShowPoints(i){return o.isLonLatOverEdges(i.lonlat)?"none":null}for(i in this.basePaths)this.basePaths[i].attr("d",s);for(i in this.dataPaths)this.dataPaths[i].attr("d",function(i){return s(i.geojson)});for(i in this.dataPoints)this.dataPoints[i].attr("display",hideShowPoints).attr("transform",translatePoints)}},44622:function(i,o,s){"use strict";var _=s(27659).AU,F=s(71828).counterRegex,N=s(69082),j=F("geo"),Z={};function plotGeo(i){for(var o=i._fullLayout,s=i.calcdata,F=o._subplots.geo,j=0;j<F.length;j++){var Z=F[j],X=_(s,"geo",Z),$=o[Z]._subplot;$||($=N({id:Z,graphDiv:i,container:o._geolayer.node(),topojsonURL:i._context.topojsonURL,staticPlot:i._context.staticPlot}),o[Z]._subplot=$),$.plot(X,o,i._promises)}}function clean(i,o,s,_){for(var F=_._subplots.geo||[],N=0;N<F.length;N++){var j=F[N],Z=_[j]._subplot;!o[j]&&Z&&(Z.framework.remove(),Z.clipDef.remove())}}function updateFx(i){for(var o=i._fullLayout,s=o._subplots.geo,_=0;_<s.length;_++){var F=o[s[_]];F._subplot.updateFx(o,F)}}Z.geo={valType:"subplotid",dflt:"geo",editType:"calc"},i.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:j,attrRegex:j,attributes:Z,layoutAttributes:s(77519),supplyLayoutDefaults:s(82161),plot:plotGeo,updateFx:updateFx,clean:clean}},77519:function(i,o,s){"use strict";var _=s(22399),F=s(27670).Y,N=s(79952).P,j=s(78776),Z=s(30962).overrideAll,X=s(78607),$={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:_.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:N};(i.exports=Z({domain:F({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:X(j.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:X(j.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:_.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:j.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:j.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:j.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:j.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:_.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:_.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:_.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:_.background},lonaxis:$,lataxis:$},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(i,o,s){"use strict";var _=s(71828),F=s(49119),N=s(27659).NG,j=s(78776),Z=s(77519),X=j.axesNames;function handleGeoDefaults(i,o,s,F){var Z=N(F.fullData,"geo",F.id).map(function(i){return i._expandedIndex}),$=s("resolution"),ee=s("scope"),et=j.scopeDefaults[ee],er=s("projection.type",et.projType),en=o._isAlbersUsa="albers usa"===er;en&&(ee=o.scope="usa");var ei=o._isScoped="world"!==ee,eo=o._isSatellite="satellite"===er,es=o._isConic=-1!==er.indexOf("conic")||"albers"===er,el=o._isClipped=!!j.lonaxisSpan[er];if(!1===i.visible){var ec=_.extendDeep({},o._template);ec.showcoastlines=!1,ec.showcountries=!1,ec.showframe=!1,ec.showlakes=!1,ec.showland=!1,ec.showocean=!1,ec.showrivers=!1,ec.showsubunits=!1,ec.lonaxis&&(ec.lonaxis.showgrid=!1),ec.lataxis&&(ec.lataxis.showgrid=!1),o._template=ec}for(var eu=s("visible"),ef=0;ef<X.length;ef++){var ed,eh,ep,eg,em=X[ef],ey=[30,10][ef];if(ei)eg=et[em+"Range"];else{var ev=j[em+"Span"],ex=(ev[er]||ev["*"])/2,e_=s("projection.rotation."+em.substr(0,3),et.projRotate[ef]);eg=[e_-ex,e_+ex]}var ew=s(em+".range",eg);s(em+".tick0"),s(em+".dtick",ey),s(em+".showgrid",!!eu&&void 0)&&(s(em+".gridcolor"),s(em+".gridwidth"),s(em+".griddash")),o[em]._ax={type:"linear",_id:em.slice(0,3),_traceIndices:Z,setScale:_.identity,c2l:_.identity,r2l:_.identity,autorange:!0,range:ew.slice(),_m:1,_input:{}}}var eT=o.lonaxis.range,ek=o.lataxis.range,eA=eT[0],eS=eT[1];eA>0&&eS<0&&(eS+=360);var eM=(eA+eS)/2;if(!en){var eC=ei?et.projRotate:[eM,0,0];ed=s("projection.rotation.lon",eC[0]),s("projection.rotation.lat",eC[1]),s("projection.rotation.roll",eC[2]),s("showcoastlines",!ei&&eu)&&(s("coastlinecolor"),s("coastlinewidth")),s("showocean",!!eu&&void 0)&&s("oceancolor")}en?(eh=-96.6,ep=38.7):(eh=ei?eM:ed,ep=(ek[0]+ek[1])/2),s("center.lon",eh),s("center.lat",ep),eo&&(s("projection.tilt"),s("projection.distance")),es&&s("projection.parallels",et.projParallels||[0,60]),s("projection.scale"),s("showland",!!eu&&void 0)&&s("landcolor"),s("showlakes",!!eu&&void 0)&&s("lakecolor"),s("showrivers",!!eu&&void 0)&&(s("rivercolor"),s("riverwidth")),s("showcountries",ei&&"usa"!==ee&&eu)&&(s("countrycolor"),s("countrywidth")),("usa"===ee||"north america"===ee&&50===$)&&(s("showsubunits",eu),s("subunitcolor"),s("subunitwidth")),!ei&&s("showframe",eu)&&(s("framecolor"),s("framewidth")),s("bgcolor"),s("fitbounds")&&(delete o.projection.scale,ei?(delete o.center.lon,delete o.center.lat):el?(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon,delete o.projection.rotation.lat,delete o.lonaxis.range,delete o.lataxis.range):(delete o.center.lon,delete o.center.lat,delete o.projection.rotation.lon))}i.exports=function(i,o,s){F(i,o,s,{type:"geo",attributes:Z,handleDefaults:handleGeoDefaults,fullData:s,partition:"y"})}},74455:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(73972),j=Math.PI/180,Z=180/Math.PI,X={cursor:"pointer"},$={cursor:"auto"};function createGeoZoom(i,o){var s=i.projection;return(o._isScoped?zoomScoped:o._isClipped?zoomClipped:zoomNonClipped)(i,s)}function initZoom(i,o){return _.behavior.zoom().translate(o.translate()).scale(o.scale())}function sync(i,o,s){var _=i.id,j=i.graphDiv,Z=j.layout,X=Z[_],$=j._fullLayout,ee=$[_],et={},er={};function set(i,o){et[_+"."+i]=F.nestedProperty(X,i).get(),N.call("_storeDirectGUIEdit",Z,$._preGUI,et);var s=F.nestedProperty(ee,i);s.get()!==o&&(s.set(o),F.nestedProperty(X,i).set(o),er[_+"."+i]=o)}s(set),set("projection.scale",o.scale()/i.fitScale),set("fitbounds",!1),j.emit("plotly_relayout",er)}function zoomScoped(i,o){var s=initZoom(i,o);function handleZoomstart(){_.select(this).style(X)}function handleZoom(){o.scale(_.event.scale).translate(_.event.translate),i.render(!0);var s=o.invert(i.midPt);i.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":o.scale()/i.fitScale,"geo.center.lon":s[0],"geo.center.lat":s[1]})}function syncCb(s){var _=o.invert(i.midPt);s("center.lon",_[0]),s("center.lat",_[1])}function handleZoomend(){_.select(this).style($),sync(i,o,syncCb)}return s.on("zoomstart",handleZoomstart).on("zoom",handleZoom).on("zoomend",handleZoomend),s}function zoomNonClipped(i,o){var s,F,N,j,Z,ee,et,er,en,ei=initZoom(i,o);function position(i){return o.invert(i)}function outside(i){var s=position(i);if(!s)return!0;var _=o(s);return Math.abs(_[0]-i[0])>2||Math.abs(_[1]-i[1])>2}function handleZoomstart(){_.select(this).style(X),s=_.mouse(this),F=o.rotate(),N=o.translate(),j=F,Z=position(s)}function handleZoom(){if(ee=_.mouse(this),outside(s)){ei.scale(o.scale()),ei.translate(o.translate());return}o.scale(_.event.scale),o.translate([N[0],_.event.translate[1]]),Z?position(ee)&&(er=position(ee),et=[j[0]+(er[0]-Z[0]),F[1],F[2]],o.rotate(et),j=et):Z=position(s=ee),en=!0,i.render(!0);var X=o.rotate(),$=o.invert(i.midPt);i.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":o.scale()/i.fitScale,"geo.center.lon":$[0],"geo.center.lat":$[1],"geo.projection.rotation.lon":-X[0]})}function handleZoomend(){_.select(this).style($),en&&sync(i,o,syncCb)}function syncCb(s){var _=o.rotate(),F=o.invert(i.midPt);s("projection.rotation.lon",-_[0]),s("center.lon",F[0]),s("center.lat",F[1])}return ei.on("zoomstart",handleZoomstart).on("zoom",handleZoom).on("zoomend",handleZoomend),ei}function zoomClipped(i,o){var s,F={r:o.rotate(),k:o.scale()},N=initZoom(i,o),j=d3eventDispatch(N,"zoomstart","zoom","zoomend"),Z=0,ee=N.on;function zoomstarted(i){Z++||i({type:"zoomstart"})}function zoomed(i){i({type:"zoom"})}function zoomended(i){--Z||i({type:"zoomend"})}function syncCb(i){var s=o.rotate();i("projection.rotation.lon",-s[0]),i("projection.rotation.lat",-s[1])}return N.on("zoomstart",function(){_.select(this).style(X);var i=_.mouse(this),Z=o.rotate(),$=Z,et=o.translate(),er=quaternionFromEuler(Z);s=position(o,i),ee.call(N,"zoom",function(){var N=_.mouse(this);if(o.scale(F.k=_.event.scale),s){if(position(o,N)){o.rotate(Z).translate(et);var X=position(o,N),ee=eulerFromQuaternion(multiply(er,rotateBetween(s,X))),en=F.r=unRoll(ee,s,$);isFinite(en[0])&&isFinite(en[1])&&isFinite(en[2])||(en=$),o.rotate(en),$=en}}else s=position(o,i=N);zoomed(j.of(this,arguments))}),zoomstarted(j.of(this,arguments))}).on("zoomend",function(){_.select(this).style($),ee.call(N,"zoom",null),zoomended(j.of(this,arguments)),sync(i,o,syncCb)}).on("zoom.redraw",function(){i.render(!0);var s=o.rotate();i.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":o.scale()/i.fitScale,"geo.projection.rotation.lon":-s[0],"geo.projection.rotation.lat":-s[1]})}),_.rebind(N,j,"on")}function position(i,o){var s=i.invert(o);return s&&isFinite(s[0])&&isFinite(s[1])&&cartesian(s)}function quaternionFromEuler(i){var o=.5*i[0]*j,s=.5*i[1]*j,_=.5*i[2]*j,F=Math.sin(o),N=Math.cos(o),Z=Math.sin(s),X=Math.cos(s),$=Math.sin(_),ee=Math.cos(_);return[N*X*ee+F*Z*$,F*X*ee-N*Z*$,N*Z*ee+F*X*$,N*X*$-F*Z*ee]}function multiply(i,o){var s=i[0],_=i[1],F=i[2],N=i[3],j=o[0],Z=o[1],X=o[2],$=o[3];return[s*j-_*Z-F*X-N*$,s*Z+_*j+F*$-N*X,s*X-_*$+F*j+N*Z,s*$+_*X-F*Z+N*j]}function rotateBetween(i,o){if(i&&o){var s=cross(i,o),_=Math.sqrt(dot(s,s)),F=.5*Math.acos(Math.max(-1,Math.min(1,dot(i,o)))),N=Math.sin(F)/_;return _&&[Math.cos(F),s[2]*N,-s[1]*N,s[0]*N]}}function unRoll(i,o,s){var _,F,N=rotateCartesian(o,2,i[0]);N=rotateCartesian(N,1,i[1]),N=rotateCartesian(N,0,i[2]-s[2]);var j=o[0],X=o[1],$=o[2],ee=N[0],et=N[1],er=N[2],en=Math.atan2(X,j)*Z,ei=Math.sqrt(j*j+X*X);Math.abs(et)>ei?(F=(et>0?90:-90)-en,_=0):(F=Math.asin(et/ei)*Z-en,_=Math.sqrt(ei*ei-et*et));var eo=180-F-2*en,es=(Math.atan2(er,ee)-Math.atan2($,_))*Z,el=(Math.atan2(er,ee)-Math.atan2($,-_))*Z;return angleDistance(s[0],s[1],F,es)<=angleDistance(s[0],s[1],eo,el)?[F,es,s[2]]:[eo,el,s[2]]}function angleDistance(i,o,s,_){var F=angleMod(s-i),N=angleMod(_-o);return Math.sqrt(F*F+N*N)}function angleMod(i){return(i%360+540)%360-180}function rotateCartesian(i,o,s){var _=s*j,F=i.slice(),N=0===o?1:0,Z=2===o?1:2,X=Math.cos(_),$=Math.sin(_);return F[N]=i[N]*X-i[Z]*$,F[Z]=i[Z]*X+i[N]*$,F}function eulerFromQuaternion(i){return[Math.atan2(2*(i[0]*i[1]+i[2]*i[3]),1-2*(i[1]*i[1]+i[2]*i[2]))*Z,Math.asin(Math.max(-1,Math.min(1,2*(i[0]*i[2]-i[3]*i[1]))))*Z,Math.atan2(2*(i[0]*i[3]+i[1]*i[2]),1-2*(i[2]*i[2]+i[3]*i[3]))*Z]}function cartesian(i){var o=i[0]*j,s=i[1]*j,_=Math.cos(s);return[_*Math.cos(o),_*Math.sin(o),Math.sin(s)]}function dot(i,o){for(var s=0,_=0,F=i.length;_<F;++_)s+=i[_]*o[_];return s}function cross(i,o){return[i[1]*o[2]-i[2]*o[1],i[2]*o[0]-i[0]*o[2],i[0]*o[1]-i[1]*o[0]]}function d3eventDispatch(i){for(var o=0,s=arguments.length,F=[];++o<s;)F.push(arguments[o]);var N=_.dispatch.apply(null,F);return N.of=function(o,s){return function(F){var j;try{j=F.sourceEvent=_.event,F.target=i,_.event=F,N[F.type].apply(o,s)}finally{_.event=j}}},N}i.exports=createGeoZoom},27659:function(i,o,s){"use strict";var _=s(73972),F=s(85555).SUBPLOT_PATTERN;o.AU=function(i,o,s){var F=_.subplotsRegistry[o];if(!F)return[];for(var N=F.attr,j=[],Z=0;Z<i.length;Z++){var X=i[Z];X[0].trace[N]===s&&j.push(X)}return j},o.a0=function(i,o){var s,F=[],N=[];if(!(s="string"==typeof o?_.getModule(o).plot:"function"==typeof o?o:o.plot))return[F,i];for(var j=0;j<i.length;j++){var Z=i[j],X=Z[0].trace;!0===X.visible&&0!==X._length&&(X._module&&X._module.plot===s?F.push(Z):N.push(Z))}return[F,N]},o.NG=function(i,o,s){if(!_.subplotsRegistry[o])return[];var N,j,Z,X=_.subplotsRegistry[o].attr,$=[];if("gl2d"===o){var ee=s.match(F);j="x"+ee[1],Z="y"+ee[2]}for(var et=0;et<i.length;et++)N=i[et],"gl2d"===o&&_.traceIs(N,"gl2d")?N[X[0]]===j&&N[X[1]]===Z&&$.push(N):N[X]===s&&$.push(N);return $}},75071:function(i,o,s){"use strict";var _=s(16825),F=s(1195),N=s(48956),j=s(85555),Z=s(38520);function Camera2D(i,o){this.element=i,this.plot=o,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function createCamera(i){var o=i.mouseContainer,s=i.glplot,X=new Camera2D(o,s);function unSetAutoRange(){i.xaxis.autorange=!1,i.yaxis.autorange=!1}function getSubplotConstraint(){for(var o=i.graphDiv._fullLayout._axisConstraintGroups,s=i.xaxis._id,_=i.yaxis._id,F=0;F<o.length;F++)if(-1!==o[F][s]){if(-1!==o[F][_])return!0;break}return!1}function handleInteraction(o,_,F){var N,Z,$=i.calcDataBox(),ee=s.viewBox,et=X.lastPos[0],er=X.lastPos[1],en=j.MINDRAG*s.pixelRatio,ei=j.MINZOOM*s.pixelRatio;function updateRange(o,s,_){var F=Math.min(s,_),N=Math.max(s,_);F!==N?($[o]=F,$[o+2]=N,X.dataBox=$,i.setRanges($)):(i.selectBox.selectBox=[0,0,1,1],i.glplot.setDirty())}switch(_*=s.pixelRatio,F*=s.pixelRatio,F=ee[3]-ee[1]-F,i.fullLayout.dragmode){case"zoom":if(o){var eo=_/(ee[2]-ee[0])*($[2]-$[0])+$[0],es=F/(ee[3]-ee[1])*($[3]-$[1])+$[1];X.boxInited||(X.boxStart[0]=eo,X.boxStart[1]=es,X.dragStart[0]=_,X.dragStart[1]=F),X.boxEnd[0]=eo,X.boxEnd[1]=es,X.boxInited=!0,X.boxEnabled||X.boxStart[0]===X.boxEnd[0]&&X.boxStart[1]===X.boxEnd[1]||(X.boxEnabled=!0);var el=Math.abs(X.dragStart[0]-_)<ei,ec=Math.abs(X.dragStart[1]-F)<ei;if(getSubplotConstraint()&&!(el&&ec)){N=X.boxEnd[0]-X.boxStart[0],Z=X.boxEnd[1]-X.boxStart[1];var eu=($[3]-$[1])/($[2]-$[0]);Math.abs(N*eu)>Math.abs(Z)?(X.boxEnd[1]=X.boxStart[1]+Math.abs(N)*eu*(Z>=0?1:-1),X.boxEnd[1]<$[1]?(X.boxEnd[1]=$[1],X.boxEnd[0]=X.boxStart[0]+($[1]-X.boxStart[1])/Math.abs(eu)):X.boxEnd[1]>$[3]&&(X.boxEnd[1]=$[3],X.boxEnd[0]=X.boxStart[0]+($[3]-X.boxStart[1])/Math.abs(eu))):(X.boxEnd[0]=X.boxStart[0]+Math.abs(Z)/eu*(N>=0?1:-1),X.boxEnd[0]<$[0]?(X.boxEnd[0]=$[0],X.boxEnd[1]=X.boxStart[1]+($[0]-X.boxStart[0])*Math.abs(eu)):X.boxEnd[0]>$[2]&&(X.boxEnd[0]=$[2],X.boxEnd[1]=X.boxStart[1]+($[2]-X.boxStart[0])*Math.abs(eu)))}else el&&(X.boxEnd[0]=X.boxStart[0]),ec&&(X.boxEnd[1]=X.boxStart[1])}else X.boxEnabled?(N=X.boxStart[0]!==X.boxEnd[0],Z=X.boxStart[1]!==X.boxEnd[1],N||Z?(N&&(updateRange(0,X.boxStart[0],X.boxEnd[0]),i.xaxis.autorange=!1),Z&&(updateRange(1,X.boxStart[1],X.boxEnd[1]),i.yaxis.autorange=!1),i.relayoutCallback()):i.glplot.setDirty(),X.boxEnabled=!1,X.boxInited=!1):X.boxInited&&(X.boxInited=!1);break;case"pan":X.boxEnabled=!1,X.boxInited=!1,o?(X.panning||(X.dragStart[0]=_,X.dragStart[1]=F),Math.abs(X.dragStart[0]-_)<en&&(_=X.dragStart[0]),Math.abs(X.dragStart[1]-F)<en&&(F=X.dragStart[1]),N=(et-_)*($[2]-$[0])/(s.viewBox[2]-s.viewBox[0]),Z=(er-F)*($[3]-$[1])/(s.viewBox[3]-s.viewBox[1]),$[0]+=N,$[2]+=N,$[1]+=Z,$[3]+=Z,i.setRanges($),X.panning=!0,X.lastInputTime=Date.now(),unSetAutoRange(),i.cameraChanged(),i.handleAnnotations()):X.panning&&(X.panning=!1,i.relayoutCallback())}X.lastPos[0]=_,X.lastPos[1]=F}return X.mouseListener=_(o,handleInteraction),o.addEventListener("touchstart",function(i){var s=N(i.changedTouches[0],o);handleInteraction(0,s[0],s[1]),handleInteraction(1,s[0],s[1]),i.preventDefault()},!!Z&&{passive:!1}),o.addEventListener("touchmove",function(i){i.preventDefault();var s=N(i.changedTouches[0],o);handleInteraction(1,s[0],s[1]),i.preventDefault()},!!Z&&{passive:!1}),o.addEventListener("touchend",function(i){handleInteraction(0,X.lastPos[0],X.lastPos[1]),i.preventDefault()},!!Z&&{passive:!1}),X.wheelListener=F(o,function(o,_){if(!i.scrollZoom)return!1;var F=i.calcDataBox(),N=s.viewBox,j=X.lastPos[0],Z=X.lastPos[1],$=Math.exp(5*_/(N[3]-N[1])),ee=j/(N[2]-N[0])*(F[2]-F[0])+F[0],et=Z/(N[3]-N[1])*(F[3]-F[1])+F[1];return F[0]=(F[0]-ee)*$+ee,F[2]=(F[2]-ee)*$+ee,F[1]=(F[1]-et)*$+et,F[3]=(F[3]-et)*$+et,i.setRanges(F),X.lastInputTime=Date.now(),unSetAutoRange(),i.cameraChanged(),i.handleAnnotations(),i.relayoutCallback(),!0},!0),X}i.exports=createCamera},82961:function(i,o,s){"use strict";var _=s(89298),F=s(78614);function Axes2DOptions(i){this.scene=i,this.gl=i.gl,this.pixelRatio=i.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var N=Axes2DOptions.prototype,j=["xaxis","yaxis"];function createAxes2D(i){return new Axes2DOptions(i)}N.merge=function(i){for(er=0,this.titleEnable=!1,this.backgroundColor=F(i.plot_bgcolor);er<2;++er){var o,s,_,N,Z,X,$,ee,et,er,en,ei=(o=j[er]).charAt(0);for(en=0,_=(s=i[this.scene[o]._name]).title.text===this.scene.fullLayout._dfltTitle[ei]?"":s.title.text;en<=2;en+=2)this.labelEnable[er+en]=!1,this.labels[er+en]=_,this.labelColor[er+en]=F(s.title.font.color),this.labelFont[er+en]=s.title.font.family,this.labelSize[er+en]=s.title.font.size,this.labelPad[er+en]=this.getLabelPad(o,s),this.tickEnable[er+en]=!1,this.tickColor[er+en]=F((s.tickfont||{}).color),this.tickAngle[er+en]="auto"===s.tickangle?0:-(Math.PI*s.tickangle)/180,this.tickPad[er+en]=this.getTickPad(s),this.tickMarkLength[er+en]=0,this.tickMarkWidth[er+en]=s.tickwidth||0,this.tickMarkColor[er+en]=F(s.tickcolor),this.borderLineEnable[er+en]=!1,this.borderLineColor[er+en]=F(s.linecolor),this.borderLineWidth[er+en]=s.linewidth||0;$=this.hasSharedAxis(s),Z=this.hasAxisInDfltPos(o,s)&&!$,X=this.hasAxisInAltrPos(o,s)&&!$,N=s.mirror||!1,ee=$?-1!==String(N).indexOf("all"):!!N,et=$?"allticks"===N:-1!==String(N).indexOf("ticks"),Z?this.labelEnable[er]=!0:X&&(this.labelEnable[er+2]=!0),Z?this.tickEnable[er]=s.showticklabels:X&&(this.tickEnable[er+2]=s.showticklabels),(Z||ee)&&(this.borderLineEnable[er]=s.showline),(X||ee)&&(this.borderLineEnable[er+2]=s.showline),(Z||et)&&(this.tickMarkLength[er]=this.getTickMarkLength(s)),(X||et)&&(this.tickMarkLength[er+2]=this.getTickMarkLength(s)),this.gridLineEnable[er]=s.showgrid,this.gridLineColor[er]=F(s.gridcolor),this.gridLineWidth[er]=s.gridwidth,this.zeroLineEnable[er]=s.zeroline,this.zeroLineColor[er]=F(s.zerolinecolor),this.zeroLineWidth[er]=s.zerolinewidth}},N.hasSharedAxis=function(i){var o=this.scene,s=o.fullLayout._subplots.gl2d;return 0!==_.findSubplotsWithAxis(s,i).indexOf(o.id)},N.hasAxisInDfltPos=function(i,o){var s=o.side;return"xaxis"===i?"bottom"===s:"yaxis"===i?"left"===s:void 0},N.hasAxisInAltrPos=function(i,o){var s=o.side;return"xaxis"===i?"top"===s:"yaxis"===i?"right"===s:void 0},N.getLabelPad=function(i,o){var s=o.title.font.size,_=o.showticklabels;return"xaxis"===i?"top"===o.side?-10+s*(1.5+(_?1:0)):-10+s*(1.5+(_?.5:0)):"yaxis"===i?"right"===o.side?10+s*(1.5+(_?1:.5)):10+s*(1.5+(_?.5:0)):void 0},N.getTickPad=function(i){return"outside"===i.ticks?10+i.ticklen:15},N.getTickMarkLength=function(i){if(!i.ticks)return 0;var o=i.ticklen;return"inside"===i.ticks?-o:o},i.exports=createAxes2D},4796:function(i,o,s){"use strict";var _=s(30962).overrideAll,F=s(92918),N=s(10820),j=s(77922),Z=s(85555),X=s(93612),$=s(528),ee=s(27659).NG;o.name="gl2d",o.attr=["xaxis","yaxis"],o.idRoot=["x","y"],o.idRegex=Z.idRegex,o.attrRegex=Z.attrRegex,o.attributes=s(89502),o.supplyLayoutDefaults=function(i,o,s){o._has("cartesian")||X.supplyLayoutDefaults(i,o,s)},o.layoutAttrOverrides=_(X.layoutAttributes,"plot","from-root"),o.baseLayoutAttrOverrides=_({plot_bgcolor:N.plot_bgcolor,hoverlabel:$.hoverlabel},"plot","nested"),o.plot=function(i){for(var o=i._fullLayout,s=i._fullData,_=o._subplots.gl2d,N=0;N<_.length;N++){var j=_[N],Z=o._plots[j],X=ee(s,"gl2d",j),$=Z._scene2d;void 0===$&&($=new F({id:j,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},o),Z._scene2d=$),$.plot(X,i.calcdata,o,i.layout)}},o.clean=function(i,o,s,_){for(var F=_._subplots.gl2d||[],N=0;N<F.length;N++){var j=F[N],Z=_._plots[j];Z._scene2d&&0===ee(i,"gl2d",j).length&&(Z._scene2d.destroy(),delete _._plots[j])}X.clean.apply(this,arguments)},o.drawFramework=function(i){i._context.staticPlot||X.drawFramework(i)},o.toSVG=function(i){for(var o=i._fullLayout,s=o._subplots.gl2d,_=0;_<s.length;_++){var F=o._plots[s[_]]._scene2d,N=F.toImage("png");o._glimages.append("svg:image").attr({xmlns:j.svg,"xlink:href":N,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),F.destroy()}},o.updateFx=function(i){for(var o=i._fullLayout,s=o._subplots.gl2d,_=0;_<s.length;_++)o._plots[s[_]]._scene2d.updateFx(o.dragmode)}},92918:function(i,o,s){"use strict";var _,F,N=s(73972),j=s(89298),Z=s(30211),X=s(9330).gl_plot2d,$=s(9330).gl_spikes2d,ee=s(9330).gl_select_box,et=s(40372),er=s(82961),en=s(75071),ei=s(58617),eo=s(99082),es=eo.enforce,el=eo.clean,ec=s(71739).doAutoRange,eu=s(64505),ef=eu.drawMode,ed=eu.selectMode,eh=["xaxis","yaxis"],ep=s(85555).SUBPLOT_PATTERN;function Scene2D(i,o){this.container=i.container,this.graphDiv=i.graphDiv,this.pixelRatio=i.plotGlPixelRatio||window.devicePixelRatio,this.id=i.id,this.staticPlot=!!i.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(o),this.makeFramework(),this.stopped||(this.glplotOptions=er(this),this.glplotOptions.merge(o),this.glplot=X(this.glplotOptions),this.camera=en(this),this.traces={},this.spikes=$(this.glplot),this.selectBox=ee(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}i.exports=Scene2D;var eg=Scene2D.prototype;function compareTicks(i,o){for(var s=0;s<2;++s){var _=i[s],F=o[s];if(_.length!==F.length)return!0;for(var N=0;N<_.length;++N)if(_[N].x!==F[N].x)return!0}return!1}eg.makeFramework=function(){if(this.staticPlot){if(!F&&!(F=et({canvas:_=document.createElement("canvas"),preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0})))throw Error("Error creating static canvas/context for image server");this.canvas=_,this.gl=F}else{var i=this.container.querySelector(".gl-canvas-focus"),o=et({canvas:i,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!o){ei(this),this.stopped=!0;return}this.canvas=i,this.gl=o}var s=this.canvas;s.style.width="100%",s.style.height="100%",s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style["pointer-events"]="none",this.updateSize(s);var N=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");N.style.position="absolute",N.style.top=N.style.left="0px",N.style.width=N.style.height="100%",N.style["z-index"]=20,N.style["pointer-events"]="none";var j=this.mouseContainer=document.createElement("div");j.style.position="absolute",j.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var Z=this.container;Z.appendChild(N),Z.appendChild(j);var X=this;j.addEventListener("mouseout",function(){X.isMouseOver=!1,X.unhover()}),j.addEventListener("mouseover",function(){X.isMouseOver=!0})},eg.toImage=function(i){i||(i="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(_),this.updateSize(this.canvas);var o,s=this.glplot.gl,F=s.drawingBufferWidth,N=s.drawingBufferHeight;s.clearColor(1,1,1,0),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),s.bindFramebuffer(s.FRAMEBUFFER,null);var j=new Uint8Array(F*N*4);s.readPixels(0,0,F,N,s.RGBA,s.UNSIGNED_BYTE,j);for(var Z=0,X=N-1;Z<X;++Z,--X)for(var $=0;$<F;++$)for(var ee=0;ee<4;++ee){var et=j[4*(F*Z+$)+ee];j[4*(F*Z+$)+ee]=j[4*(F*X+$)+ee],j[4*(F*X+$)+ee]=et}var er=document.createElement("canvas");er.width=F,er.height=N;var en=er.getContext("2d",{willReadFrequently:!0}),ei=en.createImageData(F,N);switch(ei.data.set(j),en.putImageData(ei,0,0),i){case"jpeg":o=er.toDataURL("image/jpeg");break;case"webp":o=er.toDataURL("image/webp");break;default:o=er.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(_),o},eg.updateSize=function(i){i||(i=this.canvas);var o=this.pixelRatio,s=this.fullLayout,_=s.width,F=s.height,N=0|Math.ceil(o*_),j=0|Math.ceil(o*F);return(i.width!==N||i.height!==j)&&(i.width=N,i.height=j),i},eg.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var i=[j.calcTicks(this.xaxis),j.calcTicks(this.yaxis)],o=0;o<2;++o)for(var s=0;s<i[o].length;++s)i[o][s].text=i[o][s].text+"";return i},eg.updateRefs=function(i){this.fullLayout=i;var o=this.id.match(ep),s="xaxis"+o[1],_="yaxis"+o[2];this.xaxis=this.fullLayout[s],this.yaxis=this.fullLayout[_]},eg.relayoutCallback=function(){var i=this.graphDiv,o=this.xaxis,s=this.yaxis,_=i.layout,F={},j=F[o._name+".range"]=o.range.slice(),Z=F[s._name+".range"]=s.range.slice();F[o._name+".autorange"]=o.autorange,F[s._name+".autorange"]=s.autorange,N.call("_storeDirectGUIEdit",i.layout,i._fullLayout._preGUI,F);var X=_[o._name];X.range=j,X.autorange=o.autorange;var $=_[s._name];$.range=Z,$.autorange=s.autorange,F.lastInputTime=this.camera.lastInputTime,i.emit("plotly_relayout",F)},eg.cameraChanged=function(){var i=this.camera;this.glplot.setDataBox(this.calcDataBox());var o=this.computeTickMarks();compareTicks(o,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=o,this.glplotOptions.dataBox=i.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},eg.handleAnnotations=function(){for(var i=this.graphDiv,o=this.fullLayout.annotations,s=0;s<o.length;s++){var _=o[s];_.xref===this.xaxis._id&&_.yref===this.yaxis._id&&N.getComponentMethod("annotations","drawOne")(i,s)}},eg.destroy=function(){if(this.glplot){var i=this.traces;i&&Object.keys(i).map(function(o){i[o].dispose(),delete i[o]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},eg.plot=function(i,o,s){var _,F,N=this.glplot;this.updateRefs(s),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(i,o),this.updateFx(s.dragmode);var j=s.width,Z=s.height;this.updateSize(this.canvas);var X=this.glplotOptions;X.merge(s),X.screenBox=[0,0,j,Z];var $={_fullLayout:{_axisConstraintGroups:s._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:s._size}};el($,this.xaxis),el($,this.yaxis);var ee=s._size,et=this.xaxis.domain,er=this.yaxis.domain;for(F=0,X.viewBox=[ee.l+et[0]*ee.w,ee.b+er[0]*ee.h,j-ee.r-(1-et[1])*ee.w,Z-ee.t-(1-er[1])*ee.h],this.mouseContainer.style.width=ee.w*(et[1]-et[0])+"px",this.mouseContainer.style.height=ee.h*(er[1]-er[0])+"px",this.mouseContainer.height=ee.h*(er[1]-er[0]),this.mouseContainer.style.left=ee.l+et[0]*ee.w+"px",this.mouseContainer.style.top=ee.t+(1-er[1])*ee.h+"px";F<2;++F)(_=this[eh[F]])._length=X.viewBox[F+2]-X.viewBox[F],ec(this.graphDiv,_),_.setScale();es($),X.ticks=this.computeTickMarks(),X.dataBox=this.calcDataBox(),X.merge(s),N.update(X),this.glplot.draw()},eg.calcDataBox=function(){var i=this.xaxis,o=this.yaxis,s=i.range,_=o.range,F=i.r2l,N=o.r2l;return[F(s[0]),N(_[0]),F(s[1]),N(_[1])]},eg.setRanges=function(i){var o=this.xaxis,s=this.yaxis,_=o.l2r,F=s.l2r;o.range=[_(i[0]),_(i[2])],s.range=[F(i[1]),F(i[3])]},eg.updateTraces=function(i,o){var s,_,F,N=Object.keys(this.traces);this.fullData=i;e:for(s=0;s<N.length;s++){var j=N[s],Z=this.traces[j];for(_=0;_<i.length;_++)if((F=i[_]).uid===j&&F.type===Z.type)continue e;Z.dispose(),delete this.traces[j]}for(s=0;s<i.length;s++){F=i[s];var X=o[s],$=this.traces[F.uid];$?$.update(F,X):($=F._module.plot(this,F,X),this.traces[F.uid]=$)}this.glplot.objects.sort(function(i,o){return i._trace.index-o._trace.index})},eg.updateFx=function(i){ed(i)||ef(i)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),"pan"===i?this.mouseContainer.style.cursor="move":"zoom"===i?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},eg.emitPointAction=function(i,o){for(var s,_=i.trace.uid,F=i.pointIndex,N=0;N<this.fullData.length;N++)this.fullData[N].uid===_&&(s=this.fullData[N]);var j={x:i.traceCoord[0],y:i.traceCoord[1],curveNumber:s.index,pointNumber:F,data:s._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};Z.appendArrayPointValue(j,s,F),this.graphDiv.emit(o,{points:[j]})},eg.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var i,o=this.glplot,s=this.camera,_=s.mouseListener,F=1===this.lastButtonState&&0===_.buttons,N=this.fullLayout;this.lastButtonState=_.buttons,this.cameraChanged();var j=_.x*o.pixelRatio,X=this.canvas.height-o.pixelRatio*_.y;if(s.boxEnabled&&"zoom"===N.dragmode){this.selectBox.enabled=!0;for(var $=this.selectBox.selectBox=[Math.min(s.boxStart[0],s.boxEnd[0]),Math.min(s.boxStart[1],s.boxEnd[1]),Math.max(s.boxStart[0],s.boxEnd[0]),Math.max(s.boxStart[1],s.boxEnd[1])],ee=0;ee<2;ee++)s.boxStart[ee]===s.boxEnd[ee]&&($[ee]=o.dataBox[ee],$[ee+2]=o.dataBox[ee+2]);o.setDirty()}else if(!s.panning&&this.isMouseOver){this.selectBox.enabled=!1;var et=N._size,er=this.xaxis.domain,en=this.yaxis.domain,ei=(i=o.pick(j/o.pixelRatio+et.l+er[0]*et.w,X/o.pixelRatio-(et.t+(1-en[1])*et.h)))&&i.object._trace.handlePick(i);if(ei&&F&&this.emitPointAction(ei,"plotly_click"),i&&"skip"!==i.object._trace.hoverinfo&&N.hovermode&&ei&&(!this.lastPickResult||this.lastPickResult.traceUid!==ei.trace.uid||this.lastPickResult.dataCoord[0]!==ei.dataCoord[0]||this.lastPickResult.dataCoord[1]!==ei.dataCoord[1])){this.lastPickResult={traceUid:ei.trace?ei.trace.uid:null,dataCoord:ei.dataCoord.slice()},this.spikes.update({center:i.dataCoord}),ei.screenCoord=[((o.viewBox[2]-o.viewBox[0])*(i.dataCoord[0]-o.dataBox[0])/(o.dataBox[2]-o.dataBox[0])+o.viewBox[0])/o.pixelRatio,(this.canvas.height-(o.viewBox[3]-o.viewBox[1])*(i.dataCoord[1]-o.dataBox[1])/(o.dataBox[3]-o.dataBox[1])-o.viewBox[1])/o.pixelRatio],this.emitPointAction(ei,"plotly_hover");var eo=this.fullData[ei.trace.index]||{},es=ei.pointIndex,el=Z.castHoverinfo(eo,N,es);if(el&&"all"!==el){var ec=el.split("+");-1===ec.indexOf("x")&&(ei.traceCoord[0]=void 0),-1===ec.indexOf("y")&&(ei.traceCoord[1]=void 0),-1===ec.indexOf("z")&&(ei.traceCoord[2]=void 0),-1===ec.indexOf("text")&&(ei.textLabel=void 0),-1===ec.indexOf("name")&&(ei.name=void 0)}Z.loneHover({x:ei.screenCoord[0],y:ei.screenCoord[1],xLabel:this.hoverFormatter("xaxis",ei.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",ei.traceCoord[1]),zLabel:ei.traceCoord[2],text:ei.textLabel,name:ei.name,color:Z.castHoverOption(eo,es,"bgcolor")||ei.color,borderColor:Z.castHoverOption(eo,es,"bordercolor"),fontFamily:Z.castHoverOption(eo,es,"font.family"),fontSize:Z.castHoverOption(eo,es,"font.size"),fontColor:Z.castHoverOption(eo,es,"font.color"),nameLength:Z.castHoverOption(eo,es,"namelength"),textAlign:Z.castHoverOption(eo,es,"align")},{container:this.svgContainer,gd:this.graphDiv})}}i||this.unhover(),o.draw()}},eg.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),Z.loneUnhover(this.svgContainer))},eg.hoverFormatter=function(i,o){if(void 0!==o){var s=this[i];return j.tickText(s,s.c2l(o),"hover").text}}},58547:function(i,o,s){"use strict";var _=s(30962).overrideAll,F=s(528),N=s(33539),j=s(27659).NG,Z=s(71828),X=s(77922),$="gl3d",ee="scene";o.name=$,o.attr=ee,o.idRoot=ee,o.idRegex=o.attrRegex=Z.counterRegex("scene"),o.attributes=s(59084),o.layoutAttributes=s(65500),o.baseLayoutAttrOverrides=_({hoverlabel:F.hoverlabel},"plot","nested"),o.supplyLayoutDefaults=s(24682),o.plot=function(i){for(var o=i._fullLayout,s=i._fullData,_=o._subplots[$],F=0;F<_.length;F++){var Z=_[F],X=j(s,$,Z),ee=o[Z],et=ee.camera,er=ee._scene;er||(er=new N({id:Z,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:et},o),ee._scene=er),er.viewInitial||(er.viewInitial={up:{x:et.up.x,y:et.up.y,z:et.up.z},eye:{x:et.eye.x,y:et.eye.y,z:et.eye.z},center:{x:et.center.x,y:et.center.y,z:et.center.z}}),er.plot(X,o,i.layout)}},o.clean=function(i,o,s,_){for(var F=_._subplots[$]||[],N=0;N<F.length;N++){var j=F[N];!o[j]&&_[j]._scene&&(_[j]._scene.destroy(),_._infolayer&&_._infolayer.selectAll(".annotation-"+j).remove())}},o.toSVG=function(i){for(var o=i._fullLayout,s=o._subplots[$],_=o._size,F=0;F<s.length;F++){var N=o[s[F]],j=N.domain,Z=N._scene,ee=Z.toImage("png");o._glimages.append("svg:image").attr({xmlns:X.svg,"xlink:href":ee,x:_.l+_.w*j.x[0],y:_.t+_.h*(1-j.y[1]),width:_.w*(j.x[1]-j.x[0]),height:_.h*(j.y[1]-j.y[0]),preserveAspectRatio:"none"}),Z.destroy()}},o.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var o=i.substr(5);return"1"===o&&(o=""),ee+o}},o.updateFx=function(i){for(var o=i._fullLayout,s=o._subplots[$],_=0;_<s.length;_++)o[s[_]]._scene.updateFx(o.dragmode,o.hovermode)}},59084:function(i){"use strict";i.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(i,o,s){"use strict";var _=s(7901),F=s(13838),N=s(1426).extendFlat,j=s(30962).overrideAll;i.exports=j({visible:F.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:_.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:F.color,categoryorder:F.categoryorder,categoryarray:F.categoryarray,title:{text:F.title.text,font:F.title.font},type:N({},F.type,{values:["-","linear","log","date","category"]}),autotypenumbers:F.autotypenumbers,autorange:F.autorange,autorangeoptions:{minallowed:F.autorangeoptions.minallowed,maxallowed:F.autorangeoptions.maxallowed,clipmin:F.autorangeoptions.clipmin,clipmax:F.autorangeoptions.clipmax,include:F.autorangeoptions.include,editType:"plot"},rangemode:F.rangemode,minallowed:F.minallowed,maxallowed:F.maxallowed,range:N({},F.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:F.minor.tickmode,nticks:F.nticks,tick0:F.tick0,dtick:F.dtick,tickvals:F.tickvals,ticktext:F.ticktext,ticks:F.ticks,mirror:F.mirror,ticklen:F.ticklen,tickwidth:F.tickwidth,tickcolor:F.tickcolor,showticklabels:F.showticklabels,labelalias:F.labelalias,tickfont:F.tickfont,tickangle:F.tickangle,tickprefix:F.tickprefix,showtickprefix:F.showtickprefix,ticksuffix:F.ticksuffix,showticksuffix:F.showticksuffix,showexponent:F.showexponent,exponentformat:F.exponentformat,minexponent:F.minexponent,separatethousands:F.separatethousands,tickformat:F.tickformat,tickformatstops:F.tickformatstops,hoverformat:F.hoverformat,showline:F.showline,linecolor:F.linecolor,linewidth:F.linewidth,showgrid:F.showgrid,gridcolor:N({},F.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:F.gridwidth,zeroline:F.zeroline,zerolinecolor:F.zerolinecolor,zerolinewidth:F.zerolinewidth,_deprecated:{title:F._deprecated.title,titlefont:F._deprecated.titlefont}},"plot","from-root")},3277:function(i,o,s){"use strict";var _=s(84267).mix,F=s(71828),N=s(44467),j=s(77894),Z=s(951),X=s(71453),$=["xaxis","yaxis","zaxis"];i.exports=function(i,o,s){var ee,et;function coerce(i,o){return F.coerce(ee,et,j,i,o)}for(var er=0;er<$.length;er++){var en=$[er];ee=i[en]||{},(et=N.newContainer(o,en))._id=en[0]+s.scene,et._name=en,Z(ee,et,coerce,s),X(ee,et,coerce,{font:s.font,letter:en[0],data:s.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:s.bgColor,calendar:s.calendar},s.fullLayout),coerce("gridcolor",_(et.color,s.bgColor,72.72727272727273).toRgbString()),coerce("title.text",en[0]),et.setScale=F.noop,coerce("showspikes")&&(coerce("spikesides"),coerce("spikethickness"),coerce("spikecolor",et.color)),coerce("showaxeslabels"),coerce("showbackground")&&coerce("backgroundcolor")}}},30422:function(i,o,s){"use strict";var _=s(78614),F=s(71828),N=["xaxis","yaxis","zaxis"];function AxesOptions(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}function createAxesOptions(i,o){var s=new AxesOptions;return s.merge(i,o),s}AxesOptions.prototype.merge=function(i,o){for(var s=0;s<3;++s){var j=o[N[s]];if(!j.visible){this.tickEnable[s]=!1,this.labelEnable[s]=!1,this.lineEnable[s]=!1,this.lineTickEnable[s]=!1,this.gridEnable[s]=!1,this.zeroEnable[s]=!1,this.backgroundEnable[s]=!1;continue}this.labels[s]=i._meta?F.templateString(j.title.text,i._meta):j.title.text,"font"in j.title&&(j.title.font.color&&(this.labelColor[s]=_(j.title.font.color)),j.title.font.family&&(this.labelFont[s]=j.title.font.family),j.title.font.size&&(this.labelSize[s]=j.title.font.size)),"showline"in j&&(this.lineEnable[s]=j.showline),"linecolor"in j&&(this.lineColor[s]=_(j.linecolor)),"linewidth"in j&&(this.lineWidth[s]=j.linewidth),"showgrid"in j&&(this.gridEnable[s]=j.showgrid),"gridcolor"in j&&(this.gridColor[s]=_(j.gridcolor)),"gridwidth"in j&&(this.gridWidth[s]=j.gridwidth),"log"===j.type?this.zeroEnable[s]=!1:"zeroline"in j&&(this.zeroEnable[s]=j.zeroline),"zerolinecolor"in j&&(this.zeroLineColor[s]=_(j.zerolinecolor)),"zerolinewidth"in j&&(this.zeroLineWidth[s]=j.zerolinewidth),"ticks"in j&&j.ticks?this.lineTickEnable[s]=!0:this.lineTickEnable[s]=!1,"ticklen"in j&&(this.lineTickLength[s]=this._defaultLineTickLength[s]=j.ticklen),"tickcolor"in j&&(this.lineTickColor[s]=_(j.tickcolor)),"tickwidth"in j&&(this.lineTickWidth[s]=j.tickwidth),"tickangle"in j&&(this.tickAngle[s]="auto"===j.tickangle?-3600:-(Math.PI*j.tickangle)/180),"showticklabels"in j&&(this.tickEnable[s]=j.showticklabels),"tickfont"in j&&(j.tickfont.color&&(this.tickColor[s]=_(j.tickfont.color)),j.tickfont.family&&(this.tickFont[s]=j.tickfont.family),j.tickfont.size&&(this.tickSize[s]=j.tickfont.size)),"mirror"in j?-1!==["ticks","all","allticks"].indexOf(j.mirror)?(this.lineTickMirror[s]=!0,this.lineMirror[s]=!0):!0===j.mirror?(this.lineTickMirror[s]=!1,this.lineMirror[s]=!0):(this.lineTickMirror[s]=!1,this.lineMirror[s]=!1):this.lineMirror[s]=!1,"showbackground"in j&&!1!==j.showbackground?(this.backgroundEnable[s]=!0,this.backgroundColor[s]=_(j.backgroundcolor)):this.backgroundEnable[s]=!1}},i.exports=createAxesOptions},24682:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(73972),j=s(49119),Z=s(3277),X=s(65500),$=s(27659).NG,ee="gl3d";function handleGl3dDefaults(i,o,s,_){for(var j=s("bgcolor"),X=F.combine(j,_.paper_bgcolor),et=["up","center","eye"],er=0;er<et.length;er++)s("camera."+et[er]+".x"),s("camera."+et[er]+".y"),s("camera."+et[er]+".z");s("camera.projection.type");var en=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),ei=s("aspectmode",en?"manual":"auto");en||(i.aspectratio=o.aspectratio={x:1,y:1,z:1},"manual"===ei&&(o.aspectmode="auto"),i.aspectmode=o.aspectmode);var eo=$(_.fullData,ee,_.id);Z(i,o,{font:_.font,scene:_.id,data:eo,bgColor:X,calendar:_.calendar,autotypenumbersDflt:_.autotypenumbersDflt,fullLayout:_.fullLayout}),N.getComponentMethod("annotations3d","handleDefaults")(i,o,_);var es=_.getDfltFromLayout("dragmode");if(!1!==es&&!es){if(es="orbit",i.camera&&i.camera.up){var el=i.camera.up.x,ec=i.camera.up.y,eu=i.camera.up.z;0!==eu&&(el&&ec&&eu?eu/Math.sqrt(el*el+ec*ec+eu*eu)>.999&&(es="turntable"):es="turntable")}else es="turntable"}s("dragmode",es),s("hovermode",_.getDfltFromLayout("hovermode"))}i.exports=function(i,o,s){var F=o._basePlotModules.length>1;function getDfltFromLayout(o){if(!F&&_.validate(i[o],X[o]))return i[o]}j(i,o,s,{type:ee,attributes:X,handleDefaults:handleGl3dDefaults,fullLayout:o,font:o.font,fullData:s,getDfltFromLayout:getDfltFromLayout,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})}},65500:function(i,o,s){"use strict";var _=s(77894),F=s(27670).Y,N=s(1426).extendFlat,j=s(71828).counterRegex;function makeCameraVector(i,o,s){return{x:{valType:"number",dflt:i,editType:"camera"},y:{valType:"number",dflt:o,editType:"camera"},z:{valType:"number",dflt:s,editType:"camera"},editType:"camera"}}i.exports={_arrayAttrRegexps:[j("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:N(makeCameraVector(0,0,1),{}),center:N(makeCameraVector(0,0,0),{}),eye:N(makeCameraVector(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:F({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:_,yaxis:_,zaxis:_,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(i,o,s){"use strict";var _=s(78614),F=["xaxis","yaxis","zaxis"];function SpikeOptions(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}function createSpikeOptions(i){var o=new SpikeOptions;return o.merge(i),o}SpikeOptions.prototype.merge=function(i){for(var o=0;o<3;++o){var s=i[F[o]];if(!s.visible){this.enabled[o]=!1,this.drawSides[o]=!1;continue}this.enabled[o]=s.showspikes,this.colors[o]=_(s.spikecolor),this.drawSides[o]=s.spikesides,this.lineWidth[o]=s.spikethickness}},i.exports=createSpikeOptions},96085:function(i,o,s){"use strict";i.exports=computeTickMarks;var _=s(89298),F=s(71828),N=["xaxis","yaxis","zaxis"],j=[0,0,0];function contourLevelsFromTicks(i){for(var o=[,,,],s=0;s<3;++s){for(var _=i[s],F=Array(_.length),N=0;N<_.length;++N)F[N]=_[N].x;o[s]=F}return o}function computeTickMarks(i){for(var o=i.axesOptions,s=i.glplot.axesPixels,Z=i.fullSceneLayout,X=[[],[],[]],$=0;$<3;++$){var ee=Z[N[$]];if(ee._length=(s[$].hi-s[$].lo)*s[$].pixelsPerDataUnit/i.dataScale[$],Math.abs(ee._length)===1/0||isNaN(ee._length))X[$]=[];else{ee._input_range=ee.range.slice(),ee.range[0]=s[$].lo/i.dataScale[$],ee.range[1]=s[$].hi/i.dataScale[$],ee._m=1/(i.dataScale[$]*s[$].pixelsPerDataUnit),ee.range[0]===ee.range[1]&&(ee.range[0]-=1,ee.range[1]+=1);var et=ee.tickmode;if("auto"===ee.tickmode){ee.tickmode="linear";var er=ee.nticks||F.constrain(ee._length/40,4,9);_.autoTicks(ee,Math.abs(ee.range[1]-ee.range[0])/er)}for(var en=_.calcTicks(ee,{msUTC:!0}),ei=0;ei<en.length;++ei)en[ei].x=en[ei].x*i.dataScale[$],"date"===ee.type&&(en[ei].text=en[ei].text.replace(/\<br\>/g," "));X[$]=en,ee.tickmode=et}}o.ticks=X;for(var $=0;$<3;++$){j[$]=.5*(i.glplot.bounds[0][$]+i.glplot.bounds[1][$]);for(var ei=0;ei<2;++ei)o.bounds[ei][$]=i.glplot.bounds[ei][$]}i.contourLevels=contourLevelsFromTicks(X)}},63538:function(i){"use strict";function xformMatrix(i,o){var s,_,F=[0,0,0,0];for(s=0;s<4;++s)for(_=0;_<4;++_)F[_]+=i[4*s+_]*o[s];return F}function project(i,o){return xformMatrix(i.projection,xformMatrix(i.view,xformMatrix(i.model,[o[0],o[1],o[2],1])))}i.exports=project},33539:function(i,o,s){"use strict";var _,F,N=s(9330).gl_plot3d,j=N.createCamera,Z=N.createScene,X=s(40372),$=s(38520),ee=s(73972),et=s(71828),er=et.preserveDrawingBuffer(),en=s(89298),ei=s(30211),eo=s(78614),es=s(58617),el=s(63538),ec=s(30422),eu=s(13133),ef=s(96085),ed=s(71739).applyAutorangeOptions,eh=!1;function Scene(i,o){var s=document.createElement("div"),_=i.container;this.graphDiv=i.graphDiv;var F=document.createElementNS("http://www.w3.org/2000/svg","svg");F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",F.style["z-index"]=20,F.style["pointer-events"]="none",s.appendChild(F),this.svgContainer=F,s.id=i.id,s.style.position="absolute",s.style.top=s.style.left="0px",s.style.width=s.style.height="100%",_.appendChild(s),this.fullLayout=o,this.id=i.id||"scene",this.fullSceneLayout=o[this.id],this.plotArgs=[[],{},{}],this.axesOptions=ec(o,o[this.id]),this.spikeOptions=eu(o[this.id]),this.container=s,this.staticMode=!!i.staticPlot,this.pixelRatio=this.pixelRatio||i.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=ee.getComponentMethod("annotations3d","convert"),this.drawAnnotations=ee.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var ep=Scene.prototype;ep.prepareOptions=function(){var i={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:er,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!F&&!(F=X({canvas:_=document.createElement("canvas"),preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0})))throw Error("error creating static canvas/context for image server");i.gl=F,i.canvas=_}return i};var eg=!0;ep.tryCreatePlot=function(){var i=this.prepareOptions(),o=!0;try{this.glplot=Z(i)}catch(s){if(this.staticMode||!eg||er)o=!1;else{et.warn("webgl setup failed possibly due to false preserveDrawingBuffer config. The mobile/tablet device may not be detected by is-mobile module. Enabling preserveDrawingBuffer in second attempt to create webgl scene...");try{er=i.glOptions.preserveDrawingBuffer=!0,this.glplot=Z(i)}catch(s){er=i.glOptions.preserveDrawingBuffer=!1,o=!1}}}return eg=!1,o},ep.initializeGLCamera=function(){var i=this.fullSceneLayout.camera,o="orthographic"===i.projection.type;this.camera=j(this.container,{center:[i.center.x,i.center.y,i.center.z],eye:[i.eye.x,i.eye.y,i.eye.z],up:[i.up.x,i.up.y,i.up.z],_ortho:o,zoomMin:.01,zoomMax:100,mode:"orbit"})},ep.initializeGLPlot=function(){var i=this;if(i.initializeGLCamera(),!i.tryCreatePlot())return es(i);i.traces={},i.make4thDimension();var o=i.graphDiv,s=o.layout,makeUpdate=function(){var o={};return i.isCameraChanged(s)&&(o[i.id+".camera"]=i.getCamera()),i.isAspectChanged(s)&&(o[i.id+".aspectratio"]=i.glplot.getAspectratio(),"manual"!==s[i.id].aspectmode&&(i.fullSceneLayout.aspectmode=s[i.id].aspectmode=o[i.id+".aspectmode"]="manual")),o},relayoutCallback=function(i){if(!1!==i.fullSceneLayout.dragmode){var o=makeUpdate();i.saveLayout(s),i.graphDiv.emit("plotly_relayout",o)}};return i.glplot.canvas&&(i.glplot.canvas.addEventListener("mouseup",function(){relayoutCallback(i)}),i.glplot.canvas.addEventListener("touchstart",function(){eh=!0}),i.glplot.canvas.addEventListener("wheel",function(s){if(o._context._scrollZoom.gl3d){if(i.camera._ortho){var _=s.deltaX>s.deltaY?1.1:1/1.1,F=i.glplot.getAspectratio();i.glplot.setAspectratio({x:_*F.x,y:_*F.y,z:_*F.z})}relayoutCallback(i)}},!!$&&{passive:!1}),i.glplot.canvas.addEventListener("mousemove",function(){if(!1!==i.fullSceneLayout.dragmode&&0!==i.camera.mouseListener.buttons){var o=makeUpdate();i.graphDiv.emit("plotly_relayouting",o)}}),i.staticMode||i.glplot.canvas.addEventListener("webglcontextlost",function(s){o&&o.emit&&o.emit("plotly_webglcontextlost",{event:s,layer:i.id})},!1)),i.glplot.oncontextloss=function(){i.recoverContext()},i.glplot.onrender=function(){i.render()},!0},ep.render=function(){var i=this,o=i.graphDiv,s=i.svgContainer,_=i.container.getBoundingClientRect();o._fullLayout._calcInverseTransform(o);var F=o._fullLayout._invScaleX,N=o._fullLayout._invScaleY,j=_.width*F,Z=_.height*N;s.setAttributeNS(null,"viewBox","0 0 "+j+" "+Z),s.setAttributeNS(null,"width",j),s.setAttributeNS(null,"height",Z),ef(i),i.glplot.axes.update(i.axesOptions);for(var X=Object.keys(i.traces),$=null,ee=i.glplot.selection,er=0;er<X.length;++er)"skip"!==(eo=i.traces[X[er]]).data.hoverinfo&&eo.handlePick(ee)&&($=eo),eo.setContourLevels&&eo.setContourLevels();function formatter(o,s,_){var F=i.fullSceneLayout[o+"axis"];return"log"!==F.type&&(s=F.d2l(s)),en.hoverLabelText(F,s,_)}if(null!==$){var eo,es,ec=el(i.glplot.cameraParams,ee.dataCoordinate);eo=$.data;var eu=o._fullData[eo.index],ed=ee.index,ep={xLabel:formatter("x",ee.traceCoordinate[0],eo.xhoverformat),yLabel:formatter("y",ee.traceCoordinate[1],eo.yhoverformat),zLabel:formatter("z",ee.traceCoordinate[2],eo.zhoverformat)},eg=ei.castHoverinfo(eu,i.fullLayout,ed),em=(eg||"").split("+"),ey=eg&&"all"===eg;eu.hovertemplate||ey||(-1===em.indexOf("x")&&(ep.xLabel=void 0),-1===em.indexOf("y")&&(ep.yLabel=void 0),-1===em.indexOf("z")&&(ep.zLabel=void 0),-1===em.indexOf("text")&&(ee.textLabel=void 0),-1!==em.indexOf("name")||($.name=void 0));var ev=[];"cone"===eo.type||"streamtube"===eo.type?(ep.uLabel=formatter("x",ee.traceCoordinate[3],eo.uhoverformat),(ey||-1!==em.indexOf("u"))&&ev.push("u: "+ep.uLabel),ep.vLabel=formatter("y",ee.traceCoordinate[4],eo.vhoverformat),(ey||-1!==em.indexOf("v"))&&ev.push("v: "+ep.vLabel),ep.wLabel=formatter("z",ee.traceCoordinate[5],eo.whoverformat),(ey||-1!==em.indexOf("w"))&&ev.push("w: "+ep.wLabel),ep.normLabel=ee.traceCoordinate[6].toPrecision(3),(ey||-1!==em.indexOf("norm"))&&ev.push("norm: "+ep.normLabel),"streamtube"===eo.type&&(ep.divergenceLabel=ee.traceCoordinate[7].toPrecision(3),(ey||-1!==em.indexOf("divergence"))&&ev.push("divergence: "+ep.divergenceLabel)),ee.textLabel&&ev.push(ee.textLabel),es=ev.join("<br>")):"isosurface"===eo.type||"volume"===eo.type?(ep.valueLabel=en.hoverLabelText(i._mockAxis,i._mockAxis.d2l(ee.traceCoordinate[3]),eo.valuehoverformat),ev.push("value: "+ep.valueLabel),ee.textLabel&&ev.push(ee.textLabel),es=ev.join("<br>")):es=ee.textLabel;var ex={x:ee.traceCoordinate[0],y:ee.traceCoordinate[1],z:ee.traceCoordinate[2],data:eu._input,fullData:eu,curveNumber:eu.index,pointNumber:ed};ei.appendArrayPointValue(ex,eu,ed),eo._module.eventData&&(ex=eu._module.eventData(ex,ee,eu,{},ed));var e_={points:[ex]};i.fullSceneLayout.hovermode&&(ei.loneHover({trace:eu,x:(.5+.5*ec[0]/ec[3])*j,y:(.5-.5*ec[1]/ec[3])*Z,xLabel:ep.xLabel,yLabel:ep.yLabel,zLabel:ep.zLabel,text:es,name:$.name,color:ei.castHoverOption(eu,ed,"bgcolor")||$.color,borderColor:ei.castHoverOption(eu,ed,"bordercolor"),fontFamily:ei.castHoverOption(eu,ed,"font.family"),fontSize:ei.castHoverOption(eu,ed,"font.size"),fontColor:ei.castHoverOption(eu,ed,"font.color"),nameLength:ei.castHoverOption(eu,ed,"namelength"),textAlign:ei.castHoverOption(eu,ed,"align"),hovertemplate:et.castOption(eu,ed,"hovertemplate"),hovertemplateLabels:et.extendFlat({},ex,ep),eventData:[ex]},{container:s,gd:o,inOut_bbox:[]}),ex.bbox=[][0]),ee.distance<5&&(ee.buttons||eh)?o.emit("plotly_click",e_):o.emit("plotly_hover",e_),this.oldEventData=e_}else ei.loneUnhover(s),this.oldEventData&&o.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;i.drawAnnotations(i)},ep.recoverContext=function(){var i=this;i.glplot.dispose();var tryRecover=function(){if(i.glplot.gl.isContextLost()){requestAnimationFrame(tryRecover);return}if(!i.initializeGLPlot()){et.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}i.plot.apply(i,i.plotArgs)};requestAnimationFrame(tryRecover)};var em=["xaxis","yaxis","zaxis"];function computeTraceBounds(i,o,s){for(var _=i.fullSceneLayout,F=0;F<3;F++){var N,j=em[F],Z=j.charAt(0),X=_[j],$=o[Z],ee=o[Z+"calendar"],er=o["_"+Z+"length"];if(et.isArrayOrTypedArray($))for(var en=0;en<(er||$.length);en++)if(et.isArrayOrTypedArray($[en]))for(var ei=0;ei<$[en].length;++ei)!isNaN(N=X.d2l($[en][ei],0,ee))&&isFinite(N)&&(s[0][F]=Math.min(s[0][F],N),s[1][F]=Math.max(s[1][F],N));else!isNaN(N=X.d2l($[en],0,ee))&&isFinite(N)&&(s[0][F]=Math.min(s[0][F],N),s[1][F]=Math.max(s[1][F],N));else s[0][F]=Math.min(s[0][F],0),s[1][F]=Math.max(s[1][F],er-1)}}function computeAnnotationBounds(i,o){for(var s=i.fullSceneLayout,_=s.annotations||[],F=0;F<3;F++)for(var N=em[F],j=N.charAt(0),Z=s[N],X=0;X<_.length;X++){var $=_[X];if($.visible){var ee=Z.r2l($[j]);!isNaN(ee)&&isFinite(ee)&&(o[0][F]=Math.min(o[0][F],ee),o[1][F]=Math.max(o[1][F],ee))}}}function getCameraArrays(i){return[[i.eye.x,i.eye.y,i.eye.z],[i.center.x,i.center.y,i.center.z],[i.up.x,i.up.y,i.up.z]]}function getLayoutCamera(i){return{up:{x:i.up[0],y:i.up[1],z:i.up[2]},center:{x:i.center[0],y:i.center[1],z:i.center[2]},eye:{x:i.eye[0],y:i.eye[1],z:i.eye[2]},projection:{type:!0===i._ortho?"orthographic":"perspective"}}}function flipPixels(i,o,s){for(var _=0,F=s-1;_<F;++_,--F)for(var N=0;N<o;++N)for(var j=0;j<4;++j){var Z=4*(o*_+N)+j,X=4*(o*F+N)+j,$=i[Z];i[Z]=i[X],i[X]=$}}function correctRGB(i,o,s){for(var _=0;_<s;++_)for(var F=0;F<o;++F){var N=4*(o*_+F),j=i[N+3];if(j>0)for(var Z=255/j,X=0;X<3;++X)i[N+X]=Math.min(Z*i[N+X],255)}}ep.plot=function(i,o,s){var _;if(this.plotArgs=[i,o,s],!this.glplot.contextLost){var F=o[this.id],N=s[this.id];this.fullLayout=o,this.fullSceneLayout=F,this.axesOptions.merge(o,F),this.spikeOptions.merge(F),this.setViewport(F),this.updateFx(F.dragmode,F.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(eo(F.bgcolor)),this.setConvert(el),i?Array.isArray(i)||(i=[i]):i=[];var j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(ei=0;ei<i.length;++ei)!0===(er=i[ei]).visible&&0!==er._length&&computeTraceBounds(this,er,j);computeAnnotationBounds(this,j);var Z=[1,1,1];for(es=0;es<3;++es)j[1][es]===j[0][es]?Z[es]=1:Z[es]=1/(j[1][es]-j[0][es]);for(this.dataScale=Z,this.convertAnnotations(this),ei=0;ei<i.length;++ei)!0===(er=i[ei]).visible&&0!==er._length&&((en=this.traces[er.uid])?en.data.type===er.type?en.update(er):(en.dispose(),en=er._module.plot(this,er),this.traces[er.uid]=en):(en=er._module.plot(this,er),this.traces[er.uid]=en),en.name=er.name);var X=Object.keys(this.traces);e:for(ei=0;ei<X.length;++ei){for(es=0;es<i.length;++es)if(i[es].uid===X[ei]&&!0===i[es].visible&&0!==i[es]._length)continue e;(en=this.traces[X[ei]]).dispose(),delete this.traces[X[ei]]}this.glplot.objects.sort(function(i,o){return i._trace.data.index-o._trace.data.index});var $=[[0,0,0],[0,0,0]],ee=[],et={};for(ei=0;ei<3;++ei){if((ec=(el=F[em[ei]]).type)in et?(et[ec].acc*=Z[ei],et[ec].count+=1):et[ec]={acc:Z[ei],count:1},el.autorange){$[0][ei]=1/0,$[1][ei]=-1/0;var er,en,ei,es,el,ec,eu,ef=this.glplot.objects,eh=this.fullSceneLayout.annotations||[],ep=el._name.charAt(0);for(es=0;es<ef.length;es++){var eg=ef[es],ey=eg.bounds,ev=eg._trace.data._pad||0;"ErrorBars"===eg.constructor.name&&el._lowerLogErrorBound?$[0][ei]=Math.min($[0][ei],el._lowerLogErrorBound):$[0][ei]=Math.min($[0][ei],ey[0][ei]/Z[ei]-ev),$[1][ei]=Math.max($[1][ei],ey[1][ei]/Z[ei]+ev)}for(es=0;es<eh.length;es++){var ex=eh[es];if(ex.visible){var e_=el.r2l(ex[ep]);$[0][ei]=Math.min($[0][ei],e_),$[1][ei]=Math.max($[1][ei],e_)}}if("rangemode"in el&&"tozero"===el.rangemode&&($[0][ei]=Math.min($[0][ei],0),$[1][ei]=Math.max($[1][ei],0)),$[0][ei]>$[1][ei])$[0][ei]=-1,$[1][ei]=1;else{var ew=$[1][ei]-$[0][ei];$[0][ei]-=ew/32,$[1][ei]+=ew/32}if(eu=ed(eu=[$[0][ei],$[1][ei]],el),$[0][ei]=eu[0],$[1][ei]=eu[1],el.isReversed()){var eT=$[0][ei];$[0][ei]=$[1][ei],$[1][ei]=eT}}else eu=el.range,$[0][ei]=el.r2l(eu[0]),$[1][ei]=el.r2l(eu[1]);$[0][ei]===$[1][ei]&&($[0][ei]-=1,$[1][ei]+=1),ee[ei]=$[1][ei]-$[0][ei],el.range=[$[0][ei],$[1][ei]],el.limitRange(),this.glplot.setBounds(ei,{min:el.range[0]*Z[ei],max:el.range[1]*Z[ei]})}var ek=F.aspectmode;if("cube"===ek)_=[1,1,1];else if("manual"===ek){var eA=F.aspectratio;_=[eA.x,eA.y,eA.z]}else if("auto"===ek||"data"===ek){var eS=[1,1,1];for(ei=0;ei<3;++ei){var eM=et[ec=(el=F[em[ei]]).type];eS[ei]=Math.pow(eM.acc,1/eM.count)/Z[ei]}_="data"===ek?eS:Math.max.apply(null,eS)/Math.min.apply(null,eS)<=4?eS:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");F.aspectratio.x=N.aspectratio.x=_[0],F.aspectratio.y=N.aspectratio.y=_[1],F.aspectratio.z=N.aspectratio.z=_[2],this.glplot.setAspectratio(F.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:F.aspectratio.x,y:F.aspectratio.y,z:F.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=F.aspectmode);var eC=F.domain||null,eE=o._size||null;if(eC&&eE){var eL=this.container.style;eL.position="absolute",eL.left=eE.l+eC.x[0]*eE.w+"px",eL.top=eE.t+(1-eC.y[1])*eE.h+"px",eL.width=eE.w*(eC.x[1]-eC.x[0])+"px",eL.height=eE.h*(eC.y[1]-eC.y[0])+"px"}this.glplot.redraw()}},ep.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},ep.getCamera=function(){return this.camera.view.recalcMatrix(this.camera.view.lastT()),getLayoutCamera(this.camera)},ep.setViewport=function(i){var o=i.camera;this.camera.lookAt.apply(this,getCameraArrays(o)),this.glplot.setAspectratio(i.aspectratio),"orthographic"===o.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},ep.isCameraChanged=function(i){var o=this.getCamera(),s=et.nestedProperty(i,this.id+".camera").get();function same(i,o,s,_){var F=["up","center","eye"],N=["x","y","z"];return o[F[s]]&&i[F[s]][N[_]]===o[F[s]][N[_]]}var _=!1;if(void 0===s)_=!0;else{for(var F=0;F<3;F++)for(var N=0;N<3;N++)if(!same(o,s,F,N)){_=!0;break}(!s.projection||o.projection&&o.projection.type!==s.projection.type)&&(_=!0)}return _},ep.isAspectChanged=function(i){var o=this.glplot.getAspectratio(),s=et.nestedProperty(i,this.id+".aspectratio").get();return void 0===s||s.x!==o.x||s.y!==o.y||s.z!==o.z},ep.saveLayout=function(i){var o,s,_,F,N,j,Z=this.fullLayout,X=this.isCameraChanged(i),$=this.isAspectChanged(i),er=X||$;if(er){var en={};X&&(o=this.getCamera(),_=(s=et.nestedProperty(i,this.id+".camera")).get(),en[this.id+".camera"]=_),$&&(F=this.glplot.getAspectratio(),j=(N=et.nestedProperty(i,this.id+".aspectratio")).get(),en[this.id+".aspectratio"]=j),ee.call("_storeDirectGUIEdit",i,Z._preGUI,en),X&&(s.set(o),et.nestedProperty(Z,this.id+".camera").set(o)),$&&(N.set(F),et.nestedProperty(Z,this.id+".aspectratio").set(F),this.glplot.redraw())}return er},ep.updateFx=function(i,o){var s=this.camera;if(s){if("orbit"===i)s.mode="orbit",s.keyBindingMode="rotate";else if("turntable"===i){s.up=[0,0,1],s.mode="turntable",s.keyBindingMode="rotate";var _=this.graphDiv,F=_._fullLayout,N=this.fullSceneLayout.camera,j=N.up.x,Z=N.up.y,X=N.up.z;if(X/Math.sqrt(j*j+Z*Z+X*X)<.999){var $=this.id+".camera.up",er={x:0,y:0,z:1},en={};en[$]=er;var ei=_.layout;ee.call("_storeDirectGUIEdit",ei,F._preGUI,en),N.up=er,et.nestedProperty(ei,$).set(er)}}else s.keyBindingMode=i}this.fullSceneLayout.hovermode=o},ep.toImage=function(i){i||(i="png"),this.staticMode&&this.container.appendChild(_),this.glplot.redraw();var o,s=this.glplot.gl,F=s.drawingBufferWidth,N=s.drawingBufferHeight;s.bindFramebuffer(s.FRAMEBUFFER,null);var j=new Uint8Array(F*N*4);s.readPixels(0,0,F,N,s.RGBA,s.UNSIGNED_BYTE,j),flipPixels(j,F,N),correctRGB(j,F,N);var Z=document.createElement("canvas");Z.width=F,Z.height=N;var X=Z.getContext("2d",{willReadFrequently:!0}),$=X.createImageData(F,N);switch($.data.set(j),X.putImageData($,0,0),i){case"jpeg":o=Z.toDataURL("image/jpeg");break;case"webp":o=Z.toDataURL("image/webp");break;default:o=Z.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(_),o},ep.setConvert=function(){for(var i=0;i<3;i++){var o=this.fullSceneLayout[em[i]];en.setConvert(o,this.fullLayout),o.setScale=et.noop}},ep.make4thDimension=function(){var i=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},en.setConvert(this._mockAxis,i)},i.exports=Scene},90060:function(i){"use strict";i.exports=function(i,o,s,_){for(var F=Array(_=_||i.length),N=0;N<_;N++)F[N]=[i[N],o[N],s[N]];return F}},10820:function(i,o,s){"use strict";var _=s(41940),F=s(85594),N=s(22399),j=s(29241),Z=s(53777),X=s(35025),$=s(1426).extendFlat,ee=_({editType:"calc"});ee.family.dflt='"Open Sans", verdana, arial, sans-serif',ee.size.dflt=12,ee.color.dflt=N.defaultLine,i.exports={font:ee,title:{text:{valType:"string",editType:"layoutstyle"},font:_({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:$(X({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:N.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:N.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:N.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:j.newshape,activeshape:j.activeshape,newselection:Z.newselection,activeselection:Z.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:$({},F.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:_({editType:"layoutstyle"})}}},77734:function(i,o,s){"use strict";var _=s(78607),F="1.10.1",N='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',j=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',N].join(" "),Z='Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a> under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>',X={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:N,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:j,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:j,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:Z,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:Z,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a> under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> | Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>',tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},$=_(X);i.exports={requiredVersion:F,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:X,styleValuesNonMapbox:$,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+F+"."].join("\n"),noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",$.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},13056:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o){var s=i.split(" "),F=s[0],N=s[1],j=_.isArrayOrTypedArray(o)?_.mean(o):o,Z=.5+j/100,X=1.5+j/100,$=["",""],ee=[0,0];switch(F){case"top":$[0]="top",ee[1]=-X;break;case"bottom":$[0]="bottom",ee[1]=X}switch(N){case"left":$[1]="right",ee[0]=-Z;break;case"right":$[1]="left",ee[0]=Z}return{anchor:$[0]&&$[1]?$.join("-"):$[0]?$[0]:$[1]?$[1]:"center",offset:ee}}},50101:function(i,o,s){"use strict";var _=s(44517),F=s(71828),N=F.strTranslate,j=F.strScale,Z=s(27659).AU,X=s(77922),$=s(39898),ee=s(91424),et=s(63893),er=s(10481),en="mapbox",ei=o.constants=s(77734);function findAccessToken(i,o){var s=i._fullLayout;if(""===i._context.mapboxAccessToken)return"";for(var _=[],N=[],j=!1,Z=!1,X=0;X<o.length;X++){var $=s[o[X]],ee=$.accesstoken;isStyleRequireAccessToken($.style)&&(ee?F.pushUnique(_,ee):(isStyleRequireAccessToken($._input.style)&&(F.error("Uses Mapbox map style, but did not set an access token."),j=!0),Z=!0)),ee&&F.pushUnique(N,ee)}if(Z){var et=j?ei.noAccessTokenErrorMsg:ei.missingStyleErrorMsg;throw F.error(et),Error(et)}return _.length?(_.length>1&&F.warn(ei.multipleTokensErrorMsg),_[0]):(N.length&&F.log(["Listed mapbox access token(s)",N.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function isStyleRequireAccessToken(i){return"string"==typeof i&&(-1!==ei.styleValuesMapbox.indexOf(i)||0===i.indexOf("mapbox://")||0===i.indexOf("stamen"))}o.name=en,o.attr="subplot",o.idRoot=en,o.idRegex=o.attrRegex=F.counterRegex(en),o.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},o.layoutAttributes=s(23585),o.supplyLayoutDefaults=s(77882),o.plot=function(i){var o=i._fullLayout,s=i.calcdata,N=o._subplots[en];if(_.version!==ei.requiredVersion)throw Error(ei.wrongVersionErrorMsg);var j=findAccessToken(i,N);_.accessToken=j;for(var X=0;X<N.length;X++){var $=N[X],ee=Z(s,en,$),et=o[$],eo=et._subplot;eo||(eo=new er(i,$),o[$]._subplot=eo),eo.viewInitial||(eo.viewInitial={center:F.extendFlat({},et.center),zoom:et.zoom,bearing:et.bearing,pitch:et.pitch}),eo.plot(ee,o,i._promises)}},o.clean=function(i,o,s,_){for(var F=_._subplots[en]||[],N=0;N<F.length;N++){var j=F[N];!o[j]&&_[j]._subplot&&_[j]._subplot.destroy()}},o.toSVG=function(i){for(var o=i._fullLayout,s=o._subplots[en],_=o._size,F=0;F<s.length;F++){var Z=o[s[F]],er=Z.domain,eo=Z._subplot.toImage("png");o._glimages.append("svg:image").attr({xmlns:X.svg,"xlink:href":eo,x:_.l+_.w*er.x[0],y:_.t+_.h*(1-er.y[1]),width:_.w*(er.x[1]-er.x[0]),height:_.h*(er.y[1]-er.y[0]),preserveAspectRatio:"none"});var es=$.select(Z._subplot.div);if(null!==es.select(".mapboxgl-ctrl-logo").node().offsetParent){var el=o._glimages.append("g");el.attr("transform",N(_.l+_.w*er.x[0]+10,_.t+_.h*(1-er.y[0])-31)),el.append("path").attr("d",ei.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),el.append("path").attr("d",ei.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),el.append("path").attr("d",ei.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),el.append("polygon").attr("points",ei.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var ec=es.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),eu=o._glimages.append("g"),ef=eu.append("text");ef.text(ec).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":ec});var ed=ee.bBox(ef.node()),eh=_.w*(er.x[1]-er.x[0]);if(ed.width>eh/2){var ep=ec.split("|").join("<br>");ef.text(ep).attr("data-unformatted",ep).call(et.convertToTspans,i),ed=ee.bBox(ef.node())}ef.attr("transform",N(-3,-ed.height+8)),eu.insert("rect",".static-attribution").attr({x:-ed.width-6,y:-ed.height-3,width:ed.width+6,height:ed.height+3,fill:"rgba(255, 255, 255, 0.75)"});var eg=1;ed.width+6>eh&&(eg=eh/(ed.width+6));var em=[_.l+_.w*er.x[1],_.t+_.h*(1-er.y[0])];eu.attr("transform",N(em[0],em[1])+j(eg))}},o.updateFx=function(i){for(var o=i._fullLayout,s=o._subplots[en],_=0;_<s.length;_++)o[s[_]]._subplot.updateFx(o)}},67911:function(i,o,s){"use strict";var _=s(71828),F=s(63893).sanitizeHTML,N=s(13056),j=s(77734);function MapboxLayer(i,o){this.subplot=i,this.uid=i.uid+"-"+o,this.index=o,this.idSource="source-"+this.uid,this.idLayer=j.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var Z=MapboxLayer.prototype;function isVisible(i){if(!i.visible)return!1;var o=i.source;if(Array.isArray(o)&&o.length>0){for(var s=0;s<o.length;s++)if("string"!=typeof o[s]||0===o[s].length)return!1;return!0}return _.isPlainObject(o)||"string"==typeof o&&o.length>0}function convertOpts(i){var o={},s={};switch(i.type){case"circle":_.extendFlat(s,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":_.extendFlat(s,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":_.extendFlat(s,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var F=i.symbol,j=N(F.textposition,F.iconsize);_.extendFlat(o,{"icon-image":F.icon+"-15","icon-size":F.iconsize/10,"text-field":F.text,"text-size":F.textfont.size,"text-anchor":j.anchor,"text-offset":j.offset,"symbol-placement":F.placement}),_.extendFlat(s,{"icon-color":i.color,"text-color":F.textfont.color,"text-opacity":i.opacity});break;case"raster":_.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:o,paint:s}}function convertSourceOpts(i){var o,s=i.sourcetype,_=i.source,N={type:s};return"geojson"===s?o="data":"vector"===s?o="string"==typeof _?"url":"tiles":"raster"===s?(o="tiles",N.tileSize=256):"image"===s&&(o="url",N.coordinates=i.coordinates),N[o]=_,i.sourceattribution&&(N.attribution=F(i.sourceattribution)),N}Z.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=isVisible(i)},Z.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===i.sourcetype&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},Z.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},Z.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},Z.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},Z.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var o=this.findFollowingMapboxLayerId(this.lookupBelow());null!==o&&this.subplot.map.moveLayer(this.idLayer,o)},Z.updateSource=function(i){var o=this.subplot.map;if(o.getSource(this.idSource)&&o.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,isVisible(i)){var s=convertSourceOpts(i);o.addSource(this.idSource,s)}},Z.findFollowingMapboxLayerId=function(i){if("traces"===i)for(var o=this.subplot.getMapLayers(),s=0;s<o.length;s++){var _=o[s].id;if("string"==typeof _&&0===_.indexOf(j.traceLayerPrefix)){i=_;break}}return i},Z.updateLayer=function(i){var o=this.subplot,s=convertOpts(i),_=this.lookupBelow(),F=this.findFollowingMapboxLayerId(_);this.removeLayer(),isVisible(i)&&o.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:s.layout,paint:s.paint},F),this.layerType=i.type,this.below=_},Z.updateStyle=function(i){if(isVisible(i)){var o=convertOpts(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",o.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",o.paint)}},Z.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},Z.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},i.exports=function(i,o,s){var _=new MapboxLayer(i,o);return _.update(s),_}},23585:function(i,o,s){"use strict";var _=s(71828),F=s(7901).defaultLine,N=s(27670).Y,j=s(41940),Z=s(82196).textposition,X=s(30962).overrideAll,$=s(44467).templatedArray,ee=s(77734),et=j({});et.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(i.exports=X({_arrayAttrRegexps:[_.counterRegex("mapbox",".layers",!0)],domain:N({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:ee.styleValuesMapbox.concat(ee.styleValuesNonMapbox),dflt:ee.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:$("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:F},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:F}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:et,textposition:_.extendFlat({},Z,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(i,o,s){"use strict";var _=s(71828),F=s(49119),N=s(85501),j=s(23585);function handleDefaults(i,o,s,_){s("accesstoken",_.accessToken),s("style"),s("center.lon"),s("center.lat"),s("zoom"),s("bearing"),s("pitch");var F=s("bounds.west"),j=s("bounds.east"),Z=s("bounds.south"),X=s("bounds.north");(void 0===F||void 0===j||void 0===Z||void 0===X)&&delete o.bounds,N(i,o,{name:"layers",handleItemDefaults:handleLayerDefaults}),o._input=i}function handleLayerDefaults(i,o){function coerce(s,F){return _.coerce(i,o,j.layers,s,F)}if(coerce("visible")){var s,F=coerce("sourcetype"),N="raster"===F||"image"===F;coerce("source"),coerce("sourceattribution"),"vector"===F&&coerce("sourcelayer"),"image"===F&&coerce("coordinates"),N&&(s="raster");var Z=coerce("type",s);N&&"raster"!==Z&&(Z=o.type="raster",_.log("Source types *raster* and *image* must drawn *raster* layer type.")),coerce("below"),coerce("color"),coerce("opacity"),coerce("minzoom"),coerce("maxzoom"),"circle"===Z&&coerce("circle.radius"),"line"===Z&&(coerce("line.width"),coerce("line.dash")),"fill"===Z&&coerce("fill.outlinecolor"),"symbol"===Z&&(coerce("symbol.icon"),coerce("symbol.iconsize"),coerce("symbol.text"),_.coerceFont(coerce,"symbol.textfont"),coerce("symbol.textposition"),coerce("symbol.placement"))}}i.exports=function(i,o,s){F(i,o,s,{type:"mapbox",attributes:j,handleDefaults:handleDefaults,partition:"y",accessToken:o._mapboxAccessToken})}},10481:function(i,o,s){"use strict";var _=s(44517),F=s(71828),N=s(41327),j=s(73972),Z=s(89298),X=s(28569),$=s(30211),ee=s(64505),et=ee.drawMode,er=ee.selectMode,en=s(47322).prepSelect,ei=s(47322).clearOutline,eo=s(47322).clearSelectionsCache,es=s(47322).selectOnClick,el=s(77734),ec=s(67911);function Mapbox(i,o){this.id=o,this.gd=i;var s=i._fullLayout,_=i._context;this.container=s._glcontainer.node(),this.isStatic=_.staticPlot,this.uid=s._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(s),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var eu=Mapbox.prototype;eu.plot=function(i,o,s){var _,F=this,N=o[F.id];F.map&&N.accesstoken!==F.accessToken&&(F.map.remove(),F.map=null,F.styleObj=null,F.traceHash={},F.layerList=[]),_=new Promise(F.map?function(s,_){F.updateMap(i,o,s,_)}:function(s,_){F.createMap(i,o,s,_)}),s.push(_)},eu.createMap=function(i,o,s,F){var j=this,Z=o[j.id],X=j.styleObj=getStyleObj(Z.style,o);j.accessToken=Z.accesstoken;var $=Z.bounds,ee=$?[[$.west,$.south],[$.east,$.north]]:null,et=j.map=new _.Map({container:j.div,style:X.style,center:convertCenter(Z.center),zoom:Z.zoom,bearing:Z.bearing,pitch:Z.pitch,maxBounds:ee,interactive:!j.isStatic,preserveDrawingBuffer:j.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new _.AttributionControl({compact:!0}));et._canvas.style.left="0px",et._canvas.style.top="0px",j.rejectOnError(F),j.isStatic||j.initFx(i,o);var er=[];er.push(new Promise(function(i){et.once("load",i)})),Promise.all(er=er.concat(N.fetchTraceGeoData(i))).then(function(){j.fillBelowLookup(i,o),j.updateData(i),j.updateLayout(o),j.resolveOnRender(s)}).catch(F)},eu.updateMap=function(i,o,s,_){var F=this,j=F.map,Z=o[this.id];F.rejectOnError(_);var X=[],$=getStyleObj(Z.style,o);JSON.stringify(F.styleObj)!==JSON.stringify($)&&(F.styleObj=$,j.setStyle($.style),F.traceHash={},X.push(new Promise(function(i){j.once("styledata",i)}))),Promise.all(X=X.concat(N.fetchTraceGeoData(i))).then(function(){F.fillBelowLookup(i,o),F.updateData(i),F.updateLayout(o),F.resolveOnRender(s)}).catch(_)},eu.fillBelowLookup=function(i,o){var s,_,F,N,j=o[this.id].layers,Z=this.belowLookup={},X=!1;for(s=0;s<i.length;s++){var $=i[s][0].trace,ee=$._module;"string"==typeof $.below?_=$.below:ee.getBelow&&(_=ee.getBelow($,this)),""===_&&(X=!0),Z["trace-"+$.uid]=_||""}for(s=0;s<j.length;s++){var et=j[s];_="string"==typeof et.below?et.below:X?"traces":"",Z["layout-"+s]=_}var er={};for(F in Z)er[_=Z[F]]?er[_].push(F):er[_]=[F];for(_ in er){var en=er[_];if(en.length>1)for(s=0;s<en.length;s++)0===(F=en[s]).indexOf("trace-")?(N=F.split("trace-")[1],this.traceHash[N]&&(this.traceHash[N].below=null)):0===F.indexOf("layout-")&&(N=F.split("layout-")[1],this.layerList[N]&&(this.layerList[N].below=null))}};var ef={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function getStyleObj(i,o){var s={};if(F.isPlainObject(i))s.id=i.id,s.style=i;else if("string"==typeof i){if(s.id=i,-1!==el.styleValuesMapbox.indexOf(i))s.style=convertStyleVal(i);else if(el.stylesNonMapbox[i]){s.style=el.stylesNonMapbox[i];var _=s.style.sources["plotly-"+i],N=_?_.tiles:void 0;N&&N[0]&&"?api_key="===N[0].slice(-9)&&(N[0]+=o._mapboxAccessToken)}else s.style=i}else s.id=el.styleValueDflt,s.style=convertStyleVal(el.styleValueDflt);return s.transition={duration:0,delay:0},s}function convertStyleVal(i){return el.styleUrlPrefix+i+"-"+el.styleUrlSuffix}function convertCenter(i){return[i.lon,i.lat]}eu.updateData=function(i){var o,s,_,F,N=this.traceHash,j=i.slice().sort(function(i,o){return ef[i[0].trace.type]-ef[o[0].trace.type]});for(_=0;_<j.length;_++){var Z=j[_];o=N[(s=Z[0].trace).uid];var X=!1;o&&(o.type===s.type?(o.update(Z),X=!0):o.dispose()),!X&&s._module&&(N[s.uid]=s._module.plot(this,Z))}var $=Object.keys(N);t:for(_=0;_<$.length;_++){var ee=$[_];for(F=0;F<i.length;F++)if(ee===(s=i[F][0].trace).uid)continue t;(o=N[ee]).dispose(),delete N[ee]}},eu.updateLayout=function(i){var o=this.map,s=i[this.id];this.dragging||this.wheeling||(o.setCenter(convertCenter(s.center)),o.setZoom(s.zoom),o.setBearing(s.bearing),o.setPitch(s.pitch)),this.updateLayers(i),this.updateFramework(i),this.updateFx(i),this.map.resize(),this.gd._context._scrollZoom.mapbox?o.scrollZoom.enable():o.scrollZoom.disable()},eu.resolveOnRender=function(i){var o=this.map;o.on("render",function onRender(){o.loaded()&&(o.off("render",onRender),setTimeout(i,10))})},eu.rejectOnError=function(i){var o=this.map;function handler(){i(Error(el.mapOnErrorMsg))}o.once("error",handler),o.once("style.error",handler),o.once("source.error",handler),o.once("tile.error",handler),o.once("layer.error",handler)},eu.createFramework=function(i){var o=this,s=o.div=document.createElement("div");s.id=o.uid,s.style.position="absolute",o.container.appendChild(s),o.xaxis={_id:"x",c2p:function(i){return o.project(i).x}},o.yaxis={_id:"y",c2p:function(i){return o.project(i).y}},o.updateFramework(i),o.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},Z.setConvert(o.mockAxis,i)},eu.initFx=function(i,o){var s=this,_=s.gd,F=s.map;function unhover(){$.loneUnhover(o._hoverlayer)}function emitUpdate(){var i=s.getView();_.emit("plotly_relayouting",s.getViewEditsWithDerived(i))}F.on("moveend",function(i){if(s.map){var o=_._fullLayout;if(i.originalEvent||s.wheeling){var F=o[s.id];j.call("_storeDirectGUIEdit",_.layout,o._preGUI,s.getViewEdits(F));var N=s.getView();F._input.center=F.center=N.center,F._input.zoom=F.zoom=N.zoom,F._input.bearing=F.bearing=N.bearing,F._input.pitch=F.pitch=N.pitch,_.emit("plotly_relayout",s.getViewEditsWithDerived(N))}i.originalEvent&&"mouseup"===i.originalEvent.type?s.dragging=!1:s.wheeling&&(s.wheeling=!1),o._rehover&&o._rehover()}}),F.on("wheel",function(){s.wheeling=!0}),F.on("mousemove",function(i){var o=s.div.getBoundingClientRect(),N=[i.originalEvent.offsetX,i.originalEvent.offsetY];i.target.getBoundingClientRect=function(){return o},s.xaxis.p2c=function(){return F.unproject(N).lng},s.yaxis.p2c=function(){return F.unproject(N).lat},_._fullLayout._rehover=function(){_._fullLayout._hoversubplot===s.id&&_._fullLayout[s.id]&&$.hover(_,i,s.id)},$.hover(_,i,s.id),_._fullLayout._hoversubplot=s.id}),F.on("dragstart",function(){s.dragging=!0,unhover()}),F.on("zoomstart",unhover),F.on("mouseout",function(){_._fullLayout._hoversubplot=null}),F.on("drag",emitUpdate),F.on("zoom",emitUpdate),F.on("dblclick",function(){var i=_._fullLayout[s.id];j.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,s.getViewEdits(i));var o=s.viewInitial;F.setCenter(convertCenter(o.center)),F.setZoom(o.zoom),F.setBearing(o.bearing),F.setPitch(o.pitch);var N=s.getView();i._input.center=i.center=N.center,i._input.zoom=i.zoom=N.zoom,i._input.bearing=i.bearing=N.bearing,i._input.pitch=i.pitch=N.pitch,_.emit("plotly_doubleclick",null),_.emit("plotly_relayout",s.getViewEditsWithDerived(N))}),s.clearOutline=function(){eo(s.dragOptions),ei(s.dragOptions.gd)},s.onClickInPanFn=function(i){return function(o){var F=_._fullLayout.clickmode;F.indexOf("select")>-1&&es(o.originalEvent,_,[s.xaxis],[s.yaxis],s.id,i),F.indexOf("event")>-1&&$.click(_,o.originalEvent)}}},eu.updateFx=function(i){var o=this,s=o.map,_=o.gd;if(!o.isStatic){var N=i.dragmode,j=o.dragOptions;o.dragOptions=F.extendDeep(j||{},{dragmode:i.dragmode,element:o.div,gd:_,plotinfo:{id:o.id,domain:i[o.id].domain,xaxis:o.xaxis,yaxis:o.yaxis,fillRangeItems:function(i,s){s.isRect?(i.range={})[o.id]=[invert([s.xmin,s.ymin]),invert([s.xmax,s.ymax])]:(i.lassoPoints={})[o.id]=s.map(invert)}},xaxes:[o.xaxis],yaxes:[o.yaxis],subplot:o.id}),s.off("click",o.onClickInPanHandler),er(N)||et(N)?(s.dragPan.disable(),s.on("zoomstart",o.clearOutline),o.dragOptions.prepFn=function(i,s,_){en(i,s,_,o.dragOptions,N)},X.init(o.dragOptions)):(s.dragPan.enable(),s.off("zoomstart",o.clearOutline),o.div.onmousedown=null,o.div.ontouchstart=null,o.div.removeEventListener("touchstart",o.div._ontouchstart),o.onClickInPanHandler=o.onClickInPanFn(o.dragOptions),s.on("click",o.onClickInPanHandler))}function invert(i){var s=o.map.unproject(i);return[s.lng,s.lat]}},eu.updateFramework=function(i){var o=i[this.id].domain,s=i._size,_=this.div.style;_.width=s.w*(o.x[1]-o.x[0])+"px",_.height=s.h*(o.y[1]-o.y[0])+"px",_.left=s.l+o.x[0]*s.w+"px",_.top=s.t+(1-o.y[1])*s.h+"px",this.xaxis._offset=s.l+o.x[0]*s.w,this.xaxis._length=s.w*(o.x[1]-o.x[0]),this.yaxis._offset=s.t+(1-o.y[1])*s.h,this.yaxis._length=s.h*(o.y[1]-o.y[0])},eu.updateLayers=function(i){var o,s=i[this.id].layers,_=this.layerList;if(s.length!==_.length){for(o=0;o<_.length;o++)_[o].dispose();for(o=0,_=this.layerList=[];o<s.length;o++)_.push(ec(this,o,s[o]))}else for(o=0;o<s.length;o++)_[o].update(s[o])},eu.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},eu.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},eu.setOptions=function(i,o,s){for(var _ in s)this.map[o](i,_,s[_])},eu.getMapLayers=function(){return this.map.getStyle().layers},eu.addLayer=function(i,o){var s=this.map;if("string"==typeof o){if(""===o){s.addLayer(i,o);return}for(var _=this.getMapLayers(),N=0;N<_.length;N++)if(o===_[N].id){s.addLayer(i,o);return}F.warn(["Trying to add layer with *below* value",o,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}s.addLayer(i)},eu.project=function(i){return this.map.project(new _.LngLat(i[0],i[1]))},eu.getView=function(){var i=this.map,o=i.getCenter(),s=o.lng,_=o.lat,F=i.getCanvas(),N=parseInt(F.style.width),j=parseInt(F.style.height);return{center:{lon:s,lat:_},zoom:i.getZoom(),bearing:i.getBearing(),pitch:i.getPitch(),_derived:{coordinates:[i.unproject([0,0]).toArray(),i.unproject([N,0]).toArray(),i.unproject([N,j]).toArray(),i.unproject([0,j]).toArray()]}}},eu.getViewEdits=function(i){for(var o=this.id,s=["center","zoom","bearing","pitch"],_={},F=0;F<s.length;F++){var N=s[F];_[o+"."+N]=i[N]}return _},eu.getViewEditsWithDerived=function(i){var o=this.id,s=this.getViewEdits(i);return s[o+"._derived"]=i._derived,s},i.exports=Mapbox},35025:function(i){"use strict";i.exports=function(i){var o=i.editType;return{t:{valType:"number",dflt:0,editType:o},r:{valType:"number",dflt:0,editType:o},b:{valType:"number",dflt:0,editType:o},l:{valType:"number",dflt:0,editType:o},editType:o}}},74875:function(i,o,s){"use strict";var _=s(39898),F=s(84096).Dq,N=s(60721).FF,j=s(92770),Z=s(73972),X=s(86281),$=s(44467),ee=s(71828),et=s(7901),er=s(50606).BADNUM,en=s(41675),ei=s(51873).clearOutline,eo=s(21479),es=s(85594),el=s(31391),ec=s(27659).a0,eu=ee.relinkPrivateKeys,ef=ee._,ed=i.exports={};ee.extendFlat(ed,Z),ed.attributes=s(9012),ed.attributes.type.values=ed.allTypes,ed.fontAttrs=s(41940),ed.layoutAttributes=s(10820),ed.fontWeight="normal";var eh=ed.transformsRegistry,ep=s(31137);function positionPlayWithData(i,o){o.text("");var s=o.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(i._context.linkText+" "+String.fromCharCode(187));if(i._context.sendData)s.on("click",function(){ed.sendDataToCloud(i)});else{var _=window.location.pathname.split("/"),F=window.location.search;s.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+_[2].split(".")[0]+"/"+_[1]+F})}}ed.executeAPICommand=ep.executeAPICommand,ed.computeAPICommandBindings=ep.computeAPICommandBindings,ed.manageCommandObserver=ep.manageCommandObserver,ed.hasSimpleAPICommandBindings=ep.hasSimpleAPICommandBindings,ed.redrawText=function(i){return i=ee.getGraphDiv(i),new Promise(function(o){setTimeout(function(){i._fullLayout&&(Z.getComponentMethod("annotations","draw")(i),Z.getComponentMethod("legend","draw")(i),Z.getComponentMethod("colorbar","draw")(i),o(ed.previousPromises(i)))},300)})},ed.resize=function(i){i=ee.getGraphDiv(i);var o,s=new Promise(function(s,_){(!i||ee.isHidden(i))&&_(Error("Resize must be passed a displayed plot div element.")),i._redrawTimer&&clearTimeout(i._redrawTimer),i._resolveResize&&(o=i._resolveResize),i._resolveResize=s,i._redrawTimer=setTimeout(function(){if(!i.layout||i.layout.width&&i.layout.height||ee.isHidden(i)){s(i);return}delete i.layout.width,delete i.layout.height;var o=i.changed;i.autoplay=!0,Z.call("relayout",i,{autosize:!0}).then(function(){i.changed=o,i._resolveResize===s&&(delete i._resolveResize,s(i))})},100)});return o&&o(s),s},ed.previousPromises=function(i){if((i._promises||[]).length)return Promise.all(i._promises).then(function(){i._promises=[]})},ed.addLinks=function(i){if(i._context.showLink||i._context.showSources){var o=i._fullLayout,s=ee.ensureSingle(o._paper,"text","js-plot-link-container",function(i){i.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:et.defaultLine,"pointer-events":"all"}).each(function(){var i=_.select(this);i.append("tspan").classed("js-link-to-tool",!0),i.append("tspan").classed("js-link-spacer",!0),i.append("tspan").classed("js-sourcelinks",!0)})}),F=s.node(),N={y:o._paper.attr("height")-9};document.body.contains(F)&&F.getComputedTextLength()>=o.width-20?(N["text-anchor"]="start",N.x=5):(N["text-anchor"]="end",N.x=o._paper.attr("width")-7),s.attr(N);var j=s.select(".js-link-to-tool"),Z=s.select(".js-link-spacer"),X=s.select(".js-sourcelinks");i._context.showSources&&i._context.showSources(i),i._context.showLink&&positionPlayWithData(i,j),Z.text(j.text()&&X.text()?" - ":"")}},ed.sendDataToCloud=function(i){var o=(window.PLOTLYENV||{}).BASE_URL||i._context.plotlyServerURL;if(o){i.emit("plotly_beforeexport");var s=_.select(i).append("div").attr("id","hiddenform").style("display","none"),F=s.append("form").attr({action:o+"/external",method:"post",target:"_blank"});return F.append("input").attr({type:"text",name:"data"}).node().value=ed.graphJson(i,!1,"keepdata"),F.node().submit(),s.remove(),i.emit("plotly_afterexport"),!1}};var eg=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],em=["year","month","dayMonth","dayMonthYear"];function getTraceUids(i,o){var s,_,F=o.length,N=[];for(s=0;s<i.length;s++){var j=i[s]._fullInput;j!==_&&N.push(j),_=j}var Z=N.length,X=Array(F),$={};function tryUid(i,o){if(i&&"string"==typeof i&&!$[i])return X[o]=i,$[i]=1,!0}for(s=0;s<F;s++){var et,er=o[s].uid;"number"==typeof er&&(er=String(er)),tryUid(er,s)||s<Z&&tryUid(N[s].uid,s)||(et=ee.randstr($),X[s]=et,$[et]=1)}return X}function emptySubplotLists(){var i,o,s=Z.collectableSubplotTypes,_={};if(!s){s=[];var F=Z.subplotsRegistry;for(var N in F){var j=F[N].attr;if(j&&(s.push(N),Array.isArray(j)))for(o=0;o<j.length;o++)ee.pushUnique(s,j[o])}}for(i=0;i<s.length;i++)_[s[i]]=[];return _}function getFormatObj(i,o){var s=i._context.locale;s||(s="en-US");var _=!1,F={};function includeFormat(i){for(var s=!0,N=0;N<o.length;N++){var j=o[N];F[j]||(i[j]?F[j]=i[j]:s=!1)}s&&(_=!0)}for(var N=0;N<2;N++){for(var j=i._context.locales,X=0;X<2;X++){var $=(j[s]||{}).format;if($&&(includeFormat($),_))break;j=Z.localeRegistry}var ee=s.split("-")[0];if(_||ee===s)break;s=ee}return _||includeFormat(Z.localeRegistry.en.format),F}function getFormatter(i,o){return i.decimal=o.charAt(0),i.thousands=o.charAt(1),{numberFormat:function(o){try{o=N(i).format(ee.adjustFormat(o))}catch(i){return ee.warnBadFormat(o),ee.noFormat}return o},timeFormat:F(i).utcFormat}}function fillMetaTextHelpers(i,o){var s,_=[];o.meta&&(s=o._meta={meta:o.meta,layout:{meta:o.meta}});for(var F=0;F<i.length;F++){var N=i[F];N.meta?_[N.index]=N._meta={meta:N.meta}:o.meta&&(N._meta={meta:o.meta}),o.meta&&(N._meta.layout={meta:o.meta})}_.length&&(s||(s=o._meta={}),s.data=_)}function findMainSubplot(i,o){var s={_fullLayout:o},_="x"===i._id.charAt(0),F=i._mainAxis._anchorAxis,N="",j="",Z="";if(F&&(Z=F._mainAxis._id,N=_?i._id+Z:Z+i._id),!N||!o._plots[N]){N="";for(var X=i._counterAxes,$=0;$<X.length;$++){var ee=X[$],et=_?i._id+ee:ee+i._id;j||(j=et);var er=en.getFromId(s,ee);if(Z&&er.overlaying===Z){N=et;break}}}return N||j}function hasMakesDataTransform(i){var o=i.transforms;if(Array.isArray(o)&&o.length)for(var s=0;s<o.length;s++){var _=o[s],F=_._module||eh[_.type];if(F&&F.makesData)return!0}return!1}function applyTransforms(i,o,s,_){for(var F=i.transforms,N=[i],j=0;j<F.length;j++){var Z=F[j],X=eh[Z.type];X&&X.transform&&(N=X.transform(N,{transform:Z,fullTrace:i,fullData:o,layout:s,fullLayout:_,transformIndex:j}))}return N}function getComputedSize(i){return"string"==typeof i&&"px"===i.substr(i.length-2)&&parseFloat(i)}function initMargins(i){var o=i.margin;if(!i._size){var s=i._size={l:Math.round(o.l),r:Math.round(o.r),t:Math.round(o.t),b:Math.round(o.b),p:Math.round(o.pad)};s.w=Math.round(i.width)-s.l-s.r,s.h=Math.round(i.height)-s.t-s.b}i._pushmargin||(i._pushmargin={}),i._pushmarginIds||(i._pushmarginIds={}),i._reservedMargin||(i._reservedMargin={})}function needsRedrawForShift(i){if("_redrawFromAutoMarginCount"in i._fullLayout)return!1;var o=en.list(i,"",!0);for(var s in o)if(o[s].autoshift||o[s].shift)return!0;return!1}function refineTicks(i){var o=en.list(i,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(i){for(var s=0;s<o.length;s++){var _=o[s][i];_&&_()}})}ed.supplyDefaults=function(i,o){var s,_,F=o&&o.skipUpdateCalc,N=i._fullLayout||{};if(N._skipDefaults){delete N._skipDefaults;return}var j=i._fullLayout={},X=i.layout||{},$=i._fullData||[],et=i._fullData=[],er=i.data||[],en=i.calcdata||[],eo=i._context||{};i._transitionData||ed.createTransitionData(i),j._dfltTitle={plot:ef(i,"Click to enter Plot title"),x:ef(i,"Click to enter X axis title"),y:ef(i,"Click to enter Y axis title"),colorbar:ef(i,"Click to enter Colorscale title"),annotation:ef(i,"new text")},j._traceWord=ef(i,"trace");var es=getFormatObj(i,eg);if(j._mapboxAccessToken=eo.mapboxAccessToken,N._initialAutoSizeIsDone){var el=N.width,ec=N.height;ed.supplyLayoutGlobalDefaults(X,j,es),X.width||(j.width=el),X.height||(j.height=ec),ed.sanitizeMargins(j)}else{ed.supplyLayoutGlobalDefaults(X,j,es);var eh=!X.width||!X.height,ep=j.autosize,ey=eo.autosizable;eh&&(ep||ey)?ed.plotAutoSize(i,X,j):eh&&ed.sanitizeMargins(j),!ep&&eh&&(X.width=j.width,X.height=j.height)}j._d3locale=getFormatter(es,j.separators),j._extraFormat=getFormatObj(i,em),j._initialAutoSizeIsDone=!0,j._dataLength=er.length,j._modules=[],j._visibleModules=[],j._basePlotModules=[];var ev=j._subplots=emptySubplotLists(),ex=j._splomAxes={x:{},y:{}},e_=j._splomSubplots={};j._splomGridDflt={},j._scatterStackOpts={},j._firstScatter={},j._alignmentOpts={},j._colorAxes={},j._requestRangeslider={},j._traceUids=getTraceUids($,er),j._globalTransforms=(i._context||{}).globalTransforms,ed.supplyDataDefaults(er,et,X,j);var ew=Object.keys(ex.x),eT=Object.keys(ex.y);if(ew.length>1&&eT.length>1){for(Z.getComponentMethod("grid","sizeDefaults")(X,j),s=0;s<ew.length;s++)ee.pushUnique(ev.xaxis,ew[s]);for(s=0;s<eT.length;s++)ee.pushUnique(ev.yaxis,eT[s]);for(var ek in e_)ee.pushUnique(ev.cartesian,ek)}if(j._has=ed._hasPlotType.bind(j),$.length===et.length)for(s=0;s<et.length;s++)eu(et[s],$[s]);ed.supplyLayoutModuleDefaults(X,j,et,i._transitionData);var eA=j._visibleModules,eS=[];for(s=0;s<eA.length;s++){var eM=eA[s].crossTraceDefaults;eM&&ee.pushUnique(eS,eM)}for(s=0;s<eS.length;s++)eS[s](et,j);j._hasOnlyLargeSploms=1===j._basePlotModules.length&&"splom"===j._basePlotModules[0].name&&ew.length>15&&eT.length>15&&0===j.shapes.length&&0===j.images.length,ed.linkSubplots(et,j,$,N),ed.cleanPlot(et,j,$,N);var eC=!!(N._has&&N._has("gl2d")),eE=!!(j._has&&j._has("gl2d")),eL=!!(N._has&&N._has("cartesian")),eP=!!(j._has&&j._has("cartesian")),eI=eL||eC,eO=eP||eE;eI&&!eO?N._bgLayer.remove():eO&&!eI&&(j._shouldCreateBgLayer=!0),N._zoomlayer&&!i._dragging&&ei({_fullLayout:N}),fillMetaTextHelpers(et,j),eu(j,N),Z.getComponentMethod("colorscale","crossTraceDefaults")(et,j),j._preGUI||(j._preGUI={}),j._tracePreGUI||(j._tracePreGUI={});var eD=j._tracePreGUI,eR={};for(_ in eD)eR[_]="old";for(s=0;s<et.length;s++)eR[_=et[s]._fullInput.uid]||(eD[_]={}),eR[_]="new";for(_ in eR)"old"===eR[_]&&delete eD[_];initMargins(j),Z.getComponentMethod("rangeslider","makeData")(j),F||en.length!==et.length||ed.supplyDefaultsUpdateCalc(en,et)},ed.supplyDefaultsUpdateCalc=function(i,o){for(var s=0;s<o.length;s++){var _=o[s],F=(i[s]||[])[0];if(F&&F.trace){var N=F.trace;if(N._hasCalcTransform){var j,Z,X,$=N._arrayAttrs;for(j=0;j<$.length;j++)Z=$[j],X=ee.nestedProperty(N,Z).get().slice(),ee.nestedProperty(_,Z).set(X)}F.trace=_}}},ed.createTransitionData=function(i){i._transitionData||(i._transitionData={}),i._transitionData._frames||(i._transitionData._frames=[]),i._transitionData._frameHash||(i._transitionData._frameHash={}),i._transitionData._counter||(i._transitionData._counter=0),i._transitionData._interruptCallbacks||(i._transitionData._interruptCallbacks=[])},ed._hasPlotType=function(i){var o,s=this._basePlotModules||[];for(o=0;o<s.length;o++)if(s[o].name===i)return!0;var _=this._modules||[];for(o=0;o<_.length;o++){var F=_[o].name;if(F===i)return!0;var N=Z.modules[F];if(N&&N.categories[i])return!0}return!1},ed.cleanPlot=function(i,o,s,_){var F,N,j=_._basePlotModules||[];for(F=0;F<j.length;F++){var Z=j[F];Z.clean&&Z.clean(i,o,s,_)}var X=_._has&&_._has("gl"),$=o._has&&o._has("gl");X&&!$&&void 0!==_._glcontainer&&(_._glcontainer.selectAll(".gl-canvas").remove(),_._glcontainer.selectAll(".no-webgl").remove(),_._glcanvas=null);var ee=!!_._infolayer;r:for(F=0;F<s.length;F++){var et=s[F].uid;for(N=0;N<i.length;N++)if(et===i[N].uid)continue r;ee&&_._infolayer.select(".cb"+et).remove()}},ed.linkSubplots=function(i,o,s,_){var F,N=_._plots||{},j=o._plots={},X=o._subplots,$={_fullData:i,_fullLayout:o},et=X.cartesian.concat(X.gl2d||[]);for(er=0;er<et.length;er++){var er,ei,eo,es=et[er],el=N[es],ec=en.getFromId($,es,"x"),eu=en.getFromId($,es,"y");for(el?eo=j[es]=el:(eo=j[es]={}).id=es,ec._counterAxes.push(eu._id),eu._counterAxes.push(ec._id),ec._subplotsWith.push(es),eu._subplotsWith.push(es),eo.xaxis=ec,eo.yaxis=eu,eo._hasClipOnAxisFalse=!1,ei=0;ei<i.length;ei++){var ef=i[ei];if(ef.xaxis===eo.xaxis._id&&ef.yaxis===eo.yaxis._id&&!1===ef.cliponaxis){eo._hasClipOnAxisFalse=!0;break}}}var ed=en.list($,null,!0);for(er=0;er<ed.length;er++){F=ed[er];var eh=null;F.overlaying&&(eh=en.getFromId($,F.overlaying))&&eh.overlaying&&(F.overlaying=!1,eh=null),F._mainAxis=eh||F,eh&&(F.domain=eh.domain.slice()),F._anchorAxis="free"===F.anchor?null:en.getFromId($,F.anchor)}for(er=0;er<ed.length;er++)if((F=ed[er])._counterAxes.sort(en.idSort),F._subplotsWith.sort(ee.subplotSort),F._mainSubplot=findMainSubplot(F,o),F._counterAxes.length&&(F.spikemode&&-1!==F.spikemode.indexOf("across")||F.automargin&&F.mirror&&"free"!==F.anchor||Z.getComponentMethod("rangeslider","isVisible")(F))){var ep=1,eg=0;for(ei=0;ei<F._counterAxes.length;ei++){var em=en.getFromId($,F._counterAxes[ei]);ep=Math.min(ep,em.domain[0]),eg=Math.max(eg,em.domain[1])}ep<eg&&(F._counterDomainMin=ep,F._counterDomainMax=eg)}},ed.clearExpandedTraceDefaultColors=function(i){var o,s,_;function locateColorAttrs(i,_,F,N){s[N]=_,s.length=N+1,"color"===i.valType&&void 0===i.dflt&&o.push(s.join("."))}for(s=[],(o=i._module._colorAttrs)||(i._module._colorAttrs=o=[],X.crawl(i._module.attributes,locateColorAttrs)),_=0;_<o.length;_++)ee.nestedProperty(i,"_input."+o[_]).get()||ee.nestedProperty(i,o[_]).set(null)},ed.supplyDataDefaults=function(i,o,s,_){var F,N,j,X=_._modules,et=_._visibleModules,er=_._basePlotModules,en=0,ei=0;function pushModule(i){o.push(i);var s=i._module;s&&(ee.pushUnique(X,s),!0===i.visible&&ee.pushUnique(et,s),ee.pushUnique(er,i._module.basePlotModule),en++,!1!==i._input.visible&&ei++)}_._transformModules=[];var eo={},es=[],el=(s.template||{}).data||{},ec=$.traceTemplater(el);for(F=0;F<i.length;F++){if(j=i[F],(N=ec.newTrace(j)).uid=_._traceUids[F],ed.supplyTraceDefaults(j,N,ei,_,F),N.index=F,N._input=j,N._expandedIndex=en,N.transforms&&N.transforms.length)for(var ef=!1!==j.visible&&!1===N.visible,eh=applyTransforms(N,o,s,_),ep=0;ep<eh.length;ep++){var eg=eh[ep],em={_template:N._template,type:N.type,uid:N.uid+ep};ef&&!1===eg.visible&&delete eg.visible,ed.supplyTraceDefaults(eg,em,en,_,F),eu(em,eg),em.index=F,em._input=j,em._fullInput=N,em._expandedIndex=en,em._expandedInput=eg,pushModule(em)}else N._fullInput=N,N._expandedInput=N,pushModule(N);Z.traceIs(N,"carpetAxis")&&(eo[N.carpet]=N),Z.traceIs(N,"carpetDependent")&&es.push(F)}for(F=0;F<es.length;F++)if((N=o[es[F]]).visible){var ey=eo[N.carpet];if(N._carpet=ey,!ey||!ey.visible){N.visible=!1;continue}N.xaxis=ey.xaxis,N.yaxis=ey.yaxis}},ed.supplyAnimationDefaults=function(i){i=i||{};var o,s={};function coerce(o,_){return ee.coerce(i||{},s,es,o,_)}if(coerce("mode"),coerce("direction"),coerce("fromcurrent"),Array.isArray(i.frame))for(o=0,s.frame=[];o<i.frame.length;o++)s.frame[o]=ed.supplyAnimationFrameDefaults(i.frame[o]||{});else s.frame=ed.supplyAnimationFrameDefaults(i.frame||{});if(Array.isArray(i.transition))for(o=0,s.transition=[];o<i.transition.length;o++)s.transition[o]=ed.supplyAnimationTransitionDefaults(i.transition[o]||{});else s.transition=ed.supplyAnimationTransitionDefaults(i.transition||{});return s},ed.supplyAnimationFrameDefaults=function(i){var o={};function coerce(s,_){return ee.coerce(i||{},o,es.frame,s,_)}return coerce("duration"),coerce("redraw"),o},ed.supplyAnimationTransitionDefaults=function(i){var o={};function coerce(s,_){return ee.coerce(i||{},o,es.transition,s,_)}return coerce("duration"),coerce("easing"),o},ed.supplyFrameDefaults=function(i){var o={};function coerce(s,_){return ee.coerce(i,o,el,s,_)}return coerce("group"),coerce("name"),coerce("traces"),coerce("baseframe"),coerce("data"),coerce("layout"),o},ed.supplyTraceDefaults=function(i,o,s,_,F){var N,j=_.colorway||et.defaults,X=j[s%j.length];function coerce(s,_){return ee.coerce(i,o,ed.attributes,s,_)}var $=coerce("visible");coerce("type"),coerce("name",_._traceWord+" "+F),coerce("uirevision",_.uirevision);var er=ed.getModule(o);if(o._module=er,er){var en=er.basePlotModule,ei=en.attr,eo=en.attributes;if(ei&&eo){var es=_._subplots,el="";if($||"gl2d"!==en.name){if(Array.isArray(ei))for(N=0;N<ei.length;N++){var ec=ei[N],eu=ee.coerce(i,o,eo,ec);es[ec]&&ee.pushUnique(es[ec],eu),el+=eu}else el=ee.coerce(i,o,eo,ei);es[en.name]&&ee.pushUnique(es[en.name],el)}}}return $&&(coerce("customdata"),coerce("ids"),coerce("meta"),Z.traceIs(o,"showLegend")?(ee.coerce(i,o,er.attributes.showlegend?er.attributes:ed.attributes,"showlegend"),coerce("legend"),coerce("legendwidth"),coerce("legendgroup"),coerce("legendgrouptitle.text"),coerce("legendrank"),o._dfltShowLegend=!0):o._dfltShowLegend=!1,er&&er.supplyDefaults(i,o,X,_),Z.traceIs(o,"noOpacity")||coerce("opacity"),Z.traceIs(o,"notLegendIsolatable")&&(o.visible=!!o.visible),Z.traceIs(o,"noHover")||(o.hovertemplate||ee.coerceHoverinfo(i,o,_),"parcats"!==o.type&&Z.getComponentMethod("fx","supplyDefaults")(i,o,X,_)),er&&er.selectPoints&&coerce("selectedpoints"),ed.supplyTransformDefaults(i,o,_)),o},ed.hasMakesDataTransform=hasMakesDataTransform,ed.supplyTransformDefaults=function(i,o,s){if(o._length||hasMakesDataTransform(i)){var _=s._globalTransforms||[],F=s._transformModules||[];if(Array.isArray(i.transforms)||0!==_.length)for(var N=i.transforms||[],j=_.concat(N),Z=o.transforms=[],X=0;X<j.length;X++){var $,et=j[X],er=et.type,en=eh[er],ei=!(et._module&&et._module===en),eo=en&&"function"==typeof en.transform;en||ee.warn("Unrecognized transform type "+er+"."),en&&en.supplyDefaults&&(ei||eo)?(($=en.supplyDefaults(et,o,s,i)).type=er,$._module=en,ee.pushUnique(F,en)):$=ee.extendFlat({},et),Z.push($)}}},ed.supplyLayoutGlobalDefaults=function(i,o,s){function coerce(s,_){return ee.coerce(i,o,ed.layoutAttributes,s,_)}var _=i.template;ee.isPlainObject(_)&&(o.template=_,o._template=_.layout,o._dataTemplate=_.data),coerce("autotypenumbers");var F=ee.coerceFont(coerce,"font"),N=F.size;ee.coerceFont(coerce,"title.font",ee.extendFlat({},F,{size:Math.round(1.4*N)})),coerce("title.text",o._dfltTitle.plot),coerce("title.xref");var j=coerce("title.yref");coerce("title.pad.t"),coerce("title.pad.r"),coerce("title.pad.b"),coerce("title.pad.l");var X=coerce("title.automargin");coerce("title.x"),coerce("title.xanchor"),coerce("title.y"),coerce("title.yanchor"),X&&("paper"===j&&(0!==o.title.y&&(o.title.y=1),"auto"===o.title.yanchor&&(o.title.yanchor=0===o.title.y?"top":"bottom")),"container"===j&&("auto"===o.title.y&&(o.title.y=1),"auto"===o.title.yanchor&&(o.title.yanchor=o.title.y<.5?"bottom":"top"))),coerce("uniformtext.mode")&&coerce("uniformtext.minsize"),coerce("autosize",!(i.width&&i.height)),coerce("width"),coerce("height"),coerce("minreducedwidth"),coerce("minreducedheight"),coerce("margin.l"),coerce("margin.r"),coerce("margin.t"),coerce("margin.b"),coerce("margin.pad"),coerce("margin.autoexpand"),i.width&&i.height&&ed.sanitizeMargins(o),Z.getComponentMethod("grid","sizeDefaults")(i,o),coerce("paper_bgcolor"),coerce("separators",s.decimal+s.thousands),coerce("hidesources"),coerce("colorway"),coerce("datarevision");var $=coerce("uirevision");coerce("editrevision",$),coerce("selectionrevision",$),Z.getComponentMethod("modebar","supplyLayoutDefaults")(i,o),Z.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(i,o,coerce),Z.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(i,o,coerce),coerce("meta"),ee.isPlainObject(i.transition)&&(coerce("transition.duration"),coerce("transition.easing"),coerce("transition.ordering")),Z.getComponentMethod("calendars","handleDefaults")(i,o,"calendar"),Z.getComponentMethod("fx","supplyLayoutGlobalDefaults")(i,o,coerce),ee.coerce(i,o,eo,"scattermode")},ed.plotAutoSize=function(i,o,s){var _,F,N=i._context||{},Z=N.frameMargins,X=ee.isPlotDiv(i);if(X&&i.emit("plotly_autosize"),N.fillFrame)_=window.innerWidth,F=window.innerHeight,document.body.style.overflow="hidden";else{var $=X?window.getComputedStyle(i):{};if(_=getComputedSize($.width)||getComputedSize($.maxWidth)||s.width,F=getComputedSize($.height)||getComputedSize($.maxHeight)||s.height,j(Z)&&Z>0){var et=1-2*Z;_=Math.round(et*_),F=Math.round(et*F)}}var er=ed.layoutAttributes.width.min,en=ed.layoutAttributes.height.min;_<er&&(_=er),F<en&&(F=en);var ei=!o.width&&Math.abs(s.width-_)>1,eo=!o.height&&Math.abs(s.height-F)>1;(eo||ei)&&(ei&&(s.width=_),eo&&(s.height=F)),i._initialAutoSize||(i._initialAutoSize={width:_,height:F}),ed.sanitizeMargins(s)},ed.supplyLayoutModuleDefaults=function(i,o,s,_){var F,N,j,X=Z.componentsRegistry,$=o._basePlotModules,et=Z.subplotsRegistry.cartesian;for(F in X)(j=X[F]).includeBasePlot&&j.includeBasePlot(i,o);for(var er in $.length||$.push(et),o._has("cartesian")&&(Z.getComponentMethod("grid","contentDefaults")(i,o),et.finalizeSubplots(i,o)),o._subplots)o._subplots[er].sort(ee.subplotSort);for(N=0;N<$.length;N++)(j=$[N]).supplyLayoutDefaults&&j.supplyLayoutDefaults(i,o,s);var en=o._modules;for(N=0;N<en.length;N++)(j=en[N]).supplyLayoutDefaults&&j.supplyLayoutDefaults(i,o,s);var ei=o._transformModules;for(N=0;N<ei.length;N++)(j=ei[N]).supplyLayoutDefaults&&j.supplyLayoutDefaults(i,o,s,_);for(F in X)(j=X[F]).supplyLayoutDefaults&&j.supplyLayoutDefaults(i,o,s)},ed.purge=function(i){var o=i._fullLayout||{};void 0!==o._glcontainer&&(o._glcontainer.selectAll(".gl-canvas").remove(),o._glcontainer.remove(),o._glcanvas=null),o._modeBar&&o._modeBar.destroy(),i._transitionData&&(i._transitionData._interruptCallbacks&&(i._transitionData._interruptCallbacks.length=0),i._transitionData._animationRaf&&window.cancelAnimationFrame(i._transitionData._animationRaf)),ee.clearThrottle(),ee.clearResponsive(i),delete i.data,delete i.layout,delete i._fullData,delete i._fullLayout,delete i.calcdata,delete i.empty,delete i.fid,delete i.undoqueue,delete i.undonum,delete i.autoplay,delete i.changed,delete i._promises,delete i._redrawTimer,delete i._hmlumcount,delete i._hmpixcount,delete i._transitionData,delete i._transitioning,delete i._initialAutoSize,delete i._transitioningWithDuration,delete i._dragging,delete i._dragged,delete i._dragdata,delete i._hoverdata,delete i._snapshotInProgress,delete i._editing,delete i._mouseDownTime,delete i._legendMouseDownTime,i.removeAllListeners&&i.removeAllListeners()},ed.style=function(i){var o,s=i._fullLayout._visibleModules,_=[];for(o=0;o<s.length;o++){var F=s[o];F.style&&ee.pushUnique(_,F.style)}for(o=0;o<_.length;o++)_[o](i)},ed.sanitizeMargins=function(i){if(i&&i.margin){var o,s=i.width,_=i.height,F=i.margin,N=s-(F.l+F.r),j=_-(F.t+F.b);N<0&&(o=(s-1)/(F.l+F.r),F.l=Math.floor(o*F.l),F.r=Math.floor(o*F.r)),j<0&&(o=(_-1)/(F.t+F.b),F.t=Math.floor(o*F.t),F.b=Math.floor(o*F.b))}},ed.clearAutoMarginIds=function(i){i._fullLayout._pushmarginIds={}},ed.allowAutoMargin=function(i,o){i._fullLayout._pushmarginIds[o]=1},ed.autoMargin=function(i,o,s){var _=i._fullLayout,F=_.width,N=_.height,j=_.margin,Z=_.minreducedwidth,X=_.minreducedheight,$=ee.constrain(F-j.l-j.r,2,Z),et=ee.constrain(N-j.t-j.b,2,X),er=Math.max(0,F-$),en=Math.max(0,N-et),ei=_._pushmargin,eo=_._pushmarginIds;if(!1!==j.autoexpand){if(s){var es=s.pad;if(void 0===es&&(es=Math.min(12,j.l,j.r,j.t,j.b)),er){var el=(s.l+s.r)/er;el>1&&(s.l/=el,s.r/=el)}if(en){var ec=(s.t+s.b)/en;ec>1&&(s.t/=ec,s.b/=ec)}var eu=void 0!==s.xl?s.xl:s.x,ef=void 0!==s.xr?s.xr:s.x,eh=void 0!==s.yt?s.yt:s.y,ep=void 0!==s.yb?s.yb:s.y;ei[o]={l:{val:eu,size:s.l+es},r:{val:ef,size:s.r+es},b:{val:ep,size:s.b+es},t:{val:eh,size:s.t+es}},eo[o]=1}else delete ei[o],delete eo[o];if(!_._replotting)return ed.doAutoMargin(i)}},ed.doAutoMargin=function(i){var o=i._fullLayout,s=o.width,_=o.height;o._size||(o._size={}),initMargins(o);var F=o._size,N=o.margin,X={t:0,b:0,l:0,r:0},$=ee.extendFlat({},F),et=N.l,er=N.r,en=N.t,ei=N.b,eo=o._pushmargin,es=o._pushmarginIds,el=o.minreducedwidth,ec=o.minreducedheight;if(!1!==N.autoexpand){for(var eu in eo)es[eu]||delete eo[eu];var ef=i._fullLayout._reservedMargin;for(var eh in ef)for(var ep in ef[eh]){var eg=ef[eh][ep];X[ep]=Math.max(X[ep],eg)}for(var em in eo.base={l:{val:0,size:et},r:{val:1,size:er},t:{val:1,size:en},b:{val:0,size:ei}},X){var ey=0;for(var ev in eo)"base"!==ev&&j(eo[ev][em].size)&&(ey=eo[ev][em].size>ey?eo[ev][em].size:ey);var ex=Math.max(0,N[em]-ey);X[em]=Math.max(0,X[em]-ex)}for(var e_ in eo){var ew=eo[e_].l||{},eT=eo[e_].b||{},ek=ew.val,eA=ew.size,eS=eT.val,eM=eT.size,eC=s-X.r-X.l,eE=_-X.t-X.b;for(var eL in eo){if(j(eA)&&eo[eL].r){var eP=eo[eL].r.val,eI=eo[eL].r.size;if(eP>ek){var eO=(eA*eP+(eI-eC)*ek)/(eP-ek),eD=(eI*(1-ek)+(eA-eC)*(1-eP))/(eP-ek);eO+eD>et+er&&(et=eO,er=eD)}}if(j(eM)&&eo[eL].t){var eR=eo[eL].t.val,eB=eo[eL].t.size;if(eR>eS){var eF=(eM*eR+(eB-eE)*eS)/(eR-eS),ez=(eB*(1-eS)+(eM-eE)*(1-eR))/(eR-eS);eF+ez>ei+en&&(ei=eF,en=ez)}}}}}var eN=ee.constrain(s-N.l-N.r,2,el),ej=ee.constrain(_-N.t-N.b,2,ec),eV=Math.max(0,s-eN),eU=Math.max(0,_-ej);if(eV){var eH=(et+er)/eV;eH>1&&(et/=eH,er/=eH)}if(eU){var eG=(ei+en)/eU;eG>1&&(ei/=eG,en/=eG)}if(F.l=Math.round(et)+X.l,F.r=Math.round(er)+X.r,F.t=Math.round(en)+X.t,F.b=Math.round(ei)+X.b,F.p=Math.round(N.pad),F.w=Math.round(s)-F.l-F.r,F.h=Math.round(_)-F.t-F.b,!o._replotting&&(ed.didMarginChange($,F)||needsRedrawForShift(i))){"_redrawFromAutoMarginCount"in o?o._redrawFromAutoMarginCount++:o._redrawFromAutoMarginCount=1;var eW=3*(1+Object.keys(es).length);if(o._redrawFromAutoMarginCount<eW)return Z.call("_doPlot",i);o._size=$,ee.warn("Too many auto-margin redraws.")}refineTicks(i)};var ey=["l","r","t","b","p","w","h"];function _transition(i,o,s){var _=!1;function executeCallbacks(i){var o=Promise.resolve();if(!i)return o;for(;i.length;)o=o.then(i.shift());return o}function flushCallbacks(i){if(i)for(;i.length;)i.shift()}function executeTransitions(){return i.emit("plotly_transitioning",[]),new Promise(function(F){i._transitioning=!0,o.duration>0&&(i._transitioningWithDuration=!0),i._transitionData._interruptCallbacks.push(function(){_=!0}),s.redraw&&i._transitionData._interruptCallbacks.push(function(){return Z.call("redraw",i)}),i._transitionData._interruptCallbacks.push(function(){i.emit("plotly_transitioninterrupted",[])});var N=0,j=0;function makeCallback(){return N++,function(){j++,_||j!==N||completeTransition(F)}}s.runFn(makeCallback),setTimeout(makeCallback())})}function completeTransition(o){if(i._transitionData)return flushCallbacks(i._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(s.redraw)return Z.call("redraw",i)}).then(function(){i._transitioning=!1,i._transitioningWithDuration=!1,i.emit("plotly_transitioned",[])}).then(o)}function interruptPreviousTransitions(){if(i._transitionData)return i._transitioning=!1,executeCallbacks(i._transitionData._interruptCallbacks)}var F=[ed.previousPromises,interruptPreviousTransitions,s.prepareFn,ed.rehover,ed.reselect,executeTransitions],N=ee.syncOrAsync(F,i);return N&&N.then||(N=Promise.resolve()),N.then(function(){return i})}ed.didMarginChange=function(i,o){for(var s=0;s<ey.length;s++){var _=ey[s],F=i[_],N=o[_];if(!j(F)||Math.abs(N-F)>1)return!0}return!1},ed.graphJson=function(i,o,s,_,F,N){(F&&o&&!i._fullData||F&&!o&&!i._fullLayout)&&ed.supplyDefaults(i);var j=F?i._fullData:i.data,Z=F?i._fullLayout:i.layout,X=(i._transitionData||{})._frames;function stripObj(i,o){if("function"==typeof i)return o?"_function_":null;if(ee.isPlainObject(i)){var _,F={};return Object.keys(i).sort().forEach(function(N){if(-1===["_","["].indexOf(N.charAt(0))){if("function"==typeof i[N]){o&&(F[N]="_function");return}if("keepdata"===s){if("src"===N.substr(N.length-3))return}else if("keepstream"===s){if("string"==typeof(_=i[N+"src"])&&_.indexOf(":")>0&&!ee.isPlainObject(i.stream))return}else if("keepall"!==s&&"string"==typeof(_=i[N+"src"])&&_.indexOf(":")>0)return;F[N]=stripObj(i[N],o)}}),F}return Array.isArray(i)?i.map(function(i){return stripObj(i,o)}):ee.isTypedArray(i)?ee.simpleMap(i,ee.identity):ee.isJSDate(i)?ee.ms2DateTimeLocal(+i):i}var $={data:(j||[]).map(function(i){var s=stripObj(i);return o&&delete s.fit,s})};if(!o&&($.layout=stripObj(Z),F)){var et=Z._size;$.layout.computed={margin:{b:et.b,l:et.l,r:et.r,t:et.t}}}return X&&($.frames=stripObj(X)),N&&($.config=stripObj(i._context,!0)),"object"===_?$:JSON.stringify($)},ed.modifyFrames=function(i,o){var s,_,F,N=i._transitionData._frames,j=i._transitionData._frameHash;for(s=0;s<o.length;s++)switch((_=o[s]).type){case"replace":F=_.value;var Z=(N[_.index]||{}).name,X=F.name;N[_.index]=j[X]=F,X!==Z&&(delete j[Z],j[X]=F);break;case"insert":j[(F=_.value).name]=F,N.splice(_.index,0,F);break;case"delete":F=N[_.index],delete j[F.name],N.splice(_.index,1)}return Promise.resolve()},ed.computeFrame=function(i,o){var s,_,F,N,j=i._transitionData._frameHash;if(!o)throw Error("computeFrame must be given a string frame name");var Z=j[o.toString()];if(!Z)return!1;for(var X=[Z],$=[Z.name];Z.baseframe&&(Z=j[Z.baseframe.toString()])&&-1===$.indexOf(Z.name);)X.push(Z),$.push(Z.name);for(var ee={};Z=X.pop();)if(Z.layout&&(ee.layout=ed.extendLayout(ee.layout,Z.layout)),Z.data){if(ee.data||(ee.data=[]),!(_=Z.traces))for(s=0,_=[];s<Z.data.length;s++)_[s]=s;for(ee.traces||(ee.traces=[]),s=0;s<Z.data.length;s++)null!=(F=_[s])&&(-1===(N=ee.traces.indexOf(F))&&(N=ee.data.length,ee.traces[N]=F),ee.data[N]=ed.extendTrace(ee.data[N],Z.data[s]))}return ee},ed.recomputeFrameHash=function(i){for(var o=i._transitionData._frameHash={},s=i._transitionData._frames,_=0;_<s.length;_++){var F=s[_];F&&F.name&&(o[F.name]=F)}},ed.extendObjectWithContainers=function(i,o,s){var _,F,N,j,Z,X,$,et=ee.extendDeepNoArrays({},o||{}),er=ee.expandObjectPaths(et),en={};if(s&&s.length)for(N=0;N<s.length;N++)void 0===(F=(_=ee.nestedProperty(er,s[N])).get())?ee.nestedProperty(en,s[N]).set(null):(_.set(null),ee.nestedProperty(en,s[N]).set(F));if(i=ee.extendDeepNoArrays(i||{},er),s&&s.length){for(N=0;N<s.length;N++)if(X=ee.nestedProperty(en,s[N]).get()){for(Array.isArray($=(Z=ee.nestedProperty(i,s[N])).get())||($=[],Z.set($)),j=0;j<X.length;j++){var ei=X[j];null===ei?$[j]=null:$[j]=ed.extendObjectWithContainers($[j],ei)}Z.set($)}}return i},ed.dataArrayContainers=["transforms","dimensions"],ed.layoutArrayContainers=Z.layoutArrayContainers,ed.extendTrace=function(i,o){return ed.extendObjectWithContainers(i,o,ed.dataArrayContainers)},ed.extendLayout=function(i,o){return ed.extendObjectWithContainers(i,o,ed.layoutArrayContainers)},ed.transition=function(i,o,s,_,F,N){var j={redraw:F.redraw},Z={},X=[];return j.prepareFn=function(){for(var F=Array.isArray(o)?o.length:0,N=_.slice(0,F),j=0;j<N.length;j++){var $=N[j],et=i._fullData[$]._module;if(et){if(et.animatable){var er=et.basePlotModule.name;Z[er]||(Z[er]=[]),Z[er].push($)}i.data[N[j]]=ed.extendTrace(i.data[N[j]],o[j])}}var en=ee.expandObjectPaths(ee.extendDeepNoArrays({},s)),ei=/^[xy]axis[0-9]*$/;for(var eo in en)ei.test(eo)&&delete en[eo].range;ed.extendLayout(i.layout,en),delete i.calcdata,ed.supplyDefaults(i),ed.doCalcdata(i);var es=ee.expandObjectPaths(s);if(es){var el=i._fullLayout._plots;for(var ec in el){var eu=el[ec],ef=eu.xaxis,eh=eu.yaxis,ep=ef.range.slice(),eg=eh.range.slice(),em=null,ey=null,ev=null,ex=null;Array.isArray(es[ef._name+".range"])?em=es[ef._name+".range"].slice():Array.isArray((es[ef._name]||{}).range)&&(em=es[ef._name].range.slice()),Array.isArray(es[eh._name+".range"])?ey=es[eh._name+".range"].slice():Array.isArray((es[eh._name]||{}).range)&&(ey=es[eh._name].range.slice()),ep&&em&&(ef.r2l(ep[0])!==ef.r2l(em[0])||ef.r2l(ep[1])!==ef.r2l(em[1]))&&(ev={xr0:ep,xr1:em}),eg&&ey&&(eh.r2l(eg[0])!==eh.r2l(ey[0])||eh.r2l(eg[1])!==eh.r2l(ey[1]))&&(ex={yr0:eg,yr1:ey}),(ev||ex)&&X.push(ee.extendFlat({plotinfo:eu},ev,ex))}}return Promise.resolve()},j.runFn=function(o){var _,F,j=i._fullLayout._basePlotModules,$=X.length;if(s)for(F=0;F<j.length;F++)j[F].transitionAxes&&j[F].transitionAxes(i,X,N,o);for(var et in $?((_=ee.extendFlat({},N)).duration=0,delete Z.cartesian):_=N,Z){var er=Z[et];i._fullData[er[0]]._module.basePlotModule.plot(i,er,_,o)}},_transition(i,N,j)},ed.transitionFromReact=function(i,o,s,_){var F=i._fullLayout,N=F.transition,j={},Z=[];return j.prepareFn=function(){var i=F._plots;for(var N in j.redraw=!1,"some"===o.anim&&(j.redraw=!0),"some"===s.anim&&(j.redraw=!0),i){var X=i[N],$=X.xaxis,et=X.yaxis,er=_[$._name].range.slice(),en=_[et._name].range.slice(),ei=$.range.slice(),eo=et.range.slice();$.setScale(),et.setScale();var es=null,el=null;($.r2l(er[0])!==$.r2l(ei[0])||$.r2l(er[1])!==$.r2l(ei[1]))&&(es={xr0:er,xr1:ei}),(et.r2l(en[0])!==et.r2l(eo[0])||et.r2l(en[1])!==et.r2l(eo[1]))&&(el={yr0:en,yr1:eo}),(es||el)&&Z.push(ee.extendFlat({plotinfo:X},es,el))}return Promise.resolve()},j.runFn=function(s){for(var _,F,j,X=i._fullData,$=i._fullLayout._basePlotModules,et=[],er=0;er<X.length;er++)et.push(er);function transitionAxes(){if(i._fullLayout)for(var o=0;o<$.length;o++)$[o].transitionAxes&&$[o].transitionAxes(i,Z,_,s)}function transitionTraces(){if(i._fullLayout)for(var o=0;o<$.length;o++)$[o].plot(i,j,F,s)}Z.length&&o.anim?"traces first"===N.ordering?(_=ee.extendFlat({},N,{duration:0}),j=et,F=N,setTimeout(transitionAxes,N.duration),transitionTraces()):(_=N,j=null,F=ee.extendFlat({},N,{duration:0}),setTimeout(transitionTraces,_.duration),transitionAxes()):Z.length?(_=N,transitionAxes()):o.anim&&(j=et,F=N,transitionTraces())},_transition(i,N,j)},ed.doCalcdata=function(i,o){var s,_,F,N,j=en.list(i),$=i._fullData,ee=i._fullLayout,et=Array($.length),ei=(i.calcdata||[]).slice();for(F=0,i.calcdata=et,ee._numBoxes=0,ee._numViolins=0,ee._violinScaleGroupStats={},i._hmpixcount=0,i._hmlumcount=0,ee._piecolormap={},ee._sunburstcolormap={},ee._treemapcolormap={},ee._iciclecolormap={},ee._funnelareacolormap={};F<$.length;F++)if(Array.isArray(o)&&-1===o.indexOf(F)){et[F]=ei[F];continue}for(F=0;F<$.length;F++)(s=$[F])._arrayAttrs=X.findArrayAttributes(s),s._extremes={};var eo=ee._subplots.polar||[];for(F=0;F<eo.length;F++)j.push(ee[eo[F]].radialaxis,ee[eo[F]].angularaxis);for(var es in ee._colorAxes){var el=ee[es];!1!==el.cauto&&(delete el.cmin,delete el.cmax)}var ec=!1;function transformCalci(o){if(_=(s=$[o])._module,!0===s.visible&&s.transforms){if(_&&_.calc){var F=_.calc(i,s);F[0]&&F[0].t&&F[0].t._scene&&delete F[0].t._scene.dirty}for(N=0;N<s.transforms.length;N++){var j=s.transforms[N];(_=eh[j.type])&&_.calcTransform&&(s._hasCalcTransform=!0,ec=!0,_.calcTransform(i,s,j))}}}function calci(o,F){if(!!(_=(s=$[o])._module).isContainer===F){var j=[];if(!0===s.visible&&0!==s._length){delete s._indexToPoints;var Z=s.transforms||[];for(N=Z.length-1;N>=0;N--)if(Z[N].enabled){s._indexToPoints=Z[N]._indexToPoints;break}_&&_.calc&&(j=_.calc(i,s))}Array.isArray(j)&&j[0]||(j=[{x:er,y:er}]),j[0].t||(j[0].t={}),j[0].trace=s,et[o]=j}}for(setupAxisCategories(j,$,ee),F=0;F<$.length;F++)calci(F,!0);for(F=0;F<$.length;F++)transformCalci(F);for(ec&&setupAxisCategories(j,$,ee),F=0;F<$.length;F++)calci(F,!0);for(F=0;F<$.length;F++)calci(F,!1);doCrossTraceCalc(i);var eu=sortAxisCategoriesByValue(j,i);if(eu.length){for(F=0,ee._numBoxes=0,ee._numViolins=0;F<eu.length;F++)calci(eu[F],!0);for(F=0;F<eu.length;F++)calci(eu[F],!1);doCrossTraceCalc(i)}Z.getComponentMethod("fx","calc")(i),Z.getComponentMethod("errorbars","calc")(i)};var ev=/(total|sum|min|max|mean|median) (ascending|descending)/;function sortAxisCategoriesByValue(i,o){var s=[];function zMapCategory(i,s,_){var F=s._id.charAt(0);if("histogram2dcontour"!==i)return function(i,o){return"y"===F?o:i};var N=s._counterAxes[0],j=en.getFromId(o,N),Z="x"===F||"x"===N&&"category"===j.type,X="y"===F||"y"===N&&"category"===j.type;return function(i,o){return 0===i||0===o||Z&&i===_[o].length-1||X&&o===_.length-1?-1:("y"===F?o:i)-1}}var _={min:function(i){return ee.aggNums(Math.min,null,i)},max:function(i){return ee.aggNums(Math.max,null,i)},sum:function(i){return ee.aggNums(function(i,o){return i+o},null,i)},total:function(i){return ee.aggNums(function(i,o){return i+o},null,i)},mean:function(i){return ee.mean(i)},median:function(i){return ee.median(i)}};function sortAscending(i,o){return i[1]-o[1]}function sortDescending(i,o){return o[1]-i[1]}for(ef=0;ef<i.length;ef++){var F=i[ef];if("category"===F.type){var N=F.categoryorder.match(ev);if(N){var j=N[1],X=N[2],$=F._id.charAt(0),et="x"===$,er=[];for(ed=0;ed<F._categories.length;ed++)er.push([F._categories[ed],[]]);for(ed=0;ed<F._traceIndices.length;ed++){var ei=F._traceIndices[ed],eo=o._fullData[ei];if(!0===eo.visible){var es=eo.type;Z.traceIs(eo,"histogram")&&(delete eo._xautoBinFinished,delete eo._yautoBinFinished);var el="splom"===es,ec="scattergl"===es,eu=o.calcdata[ei];for(eh=0;eh<eu.length;eh++){var ef,ed,eh,ep,eg,em,ey,ex=eu[eh];if(el){var e_=eo._axesDim[F._id];if(!et){var ew=eo._diag[e_][0];ew&&(F=o._fullLayout[en.id2name(ew)])}var eT=ex.trace.dimensions[e_].values;for(ep=0;ep<eT.length;ep++)for(eg=0,em=F._categoriesMap[eT[ep]];eg<ex.trace.dimensions.length;eg++)if(eg!==e_){var ek=ex.trace.dimensions[eg];er[em][1].push(ek.values[ep])}}else if(ec){for(ep=0;ep<ex.t.x.length;ep++)et?(em=ex.t.x[ep],ey=ex.t.y[ep]):(em=ex.t.y[ep],ey=ex.t.x[ep]),er[em][1].push(ey);ex.t&&ex.t._scene&&delete ex.t._scene.dirty}else if(ex.hasOwnProperty("z")){ey=ex.z;var eA=zMapCategory(eo.type,F,ey);for(ep=0;ep<ey.length;ep++)for(eg=0;eg<ey[ep].length;eg++)(em=eA(eg,ep))+1&&er[em][1].push(ey[ep][eg])}else for(void 0===(em=ex.p)&&(em=ex[$]),void 0===(ey=ex.s)&&(ey=ex.v),void 0===ey&&(ey=et?ex.y:ex.x),Array.isArray(ey)||(ey=void 0===ey?[]:[ey]),ep=0;ep<ey.length;ep++)er[em][1].push(ey[ep])}}}F._categoriesValue=er;var eS=[];for(ed=0;ed<er.length;ed++)eS.push([er[ed][0],_[j](er[ed][1])]);eS.sort("descending"===X?sortDescending:sortAscending),F._categoriesAggregatedValue=eS,F._initialCategories=eS.map(function(i){return i[0]}),s=s.concat(F.sortByInitialCategories())}}}return s}function setupAxisCategories(i,o,s){var _={};function setupOne(i){i.clearCalc(),"multicategory"===i.type&&i.setupMultiCategory(o),_[i._id]=1}ee.simpleMap(i,setupOne);for(var F=s._axisMatchGroups||[],N=0;N<F.length;N++)for(var j in F[N])_[j]||setupOne(s[en.id2name(j)])}function doCrossTraceCalc(i){var o,s,_,F=i._fullLayout,N=F._visibleModules,j={};for(s=0;s<N.length;s++){var Z=N[s],X=Z.crossTraceCalc;if(X){var $=Z.basePlotModule.name;j[$]?ee.pushUnique(j[$],X):j[$]=[X]}}for(_ in j){var et=j[_],er=F._subplots[_];if(Array.isArray(er))for(o=0;o<er.length;o++){var en=er[o],ei="cartesian"===_?F._plots[en]:F[en];for(s=0;s<et.length;s++)et[s](i,ei,en)}else for(s=0;s<et.length;s++)et[s](i)}}ed.rehover=function(i){i._fullLayout._rehover&&i._fullLayout._rehover()},ed.redrag=function(i){i._fullLayout._redrag&&i._fullLayout._redrag()},ed.reselect=function(i){var o=i._fullLayout,s=(i.layout||{}).selections,_=o._previousSelections;o._previousSelections=s;var F=o._reselect||JSON.stringify(s)!==JSON.stringify(_);Z.getComponentMethod("selections","reselect")(i,F)},ed.generalUpdatePerTraceModule=function(i,o,s,_){var F,N=o.traceHash,j={};for(F=0;F<s.length;F++){var Z=s[F],X=Z[0].trace;X.visible&&(j[X.type]=j[X.type]||[],j[X.type].push(Z))}for(var $ in N)if(!j[$]){var et=N[$][0];et[0].trace.visible=!1,j[$]=[et]}for(var er in j){var en=j[er];en[0][0].trace._module.plot(i,o,ee.filterVisible(en),_)}o.traceHash=j},ed.plotBasePlot=function(i,o,s,_,F){var N=Z.getModule(i),j=ec(o.calcdata,N)[0];N.plot(o,j,_,F)},ed.cleanBasePlot=function(i,o,s,_,F){var N=F._has&&F._has(i),j=s._has&&s._has(i);N&&!j&&F["_"+i+"layer"].selectAll("g.trace").remove()}},9813:function(i){"use strict";i.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(i,o,s){"use strict";var _=s(71828),F=s(61082).tester,N=_.findIndexOfMin,j=_.isAngleInsideSector,Z=_.angleDelta,X=_.angleDist;function isPtInsidePolygon(i,o,s,_,N){if(!j(o,_))return!1;s[0]<s[1]?(Z=s[0],X=s[1]):(Z=s[1],X=s[0]);var Z,X,$=F(makePolygon(Z,_[0],_[1],N)),ee=F(makePolygon(X,_[0],_[1],N)),et=[i*Math.cos(o),i*Math.sin(o)];return ee.contains(et)&&!$.contains(et)}function findIntersectionXY(i,o,s,_){var F,N,j=_[0],Z=_[1],X=clampTiny(Math.sin(o)-Math.sin(i)),$=clampTiny(Math.cos(o)-Math.cos(i)),ee=Math.tan(s),et=clampTiny(1/ee),er=X/$,en=Z-er*j;return et?X&&$?(F=en/(ee-er),N=ee*F):$?(F=Z*et,N=Z):(F=j,N=j*ee):X&&$?(F=0,N=en):$?(F=0,N=Z):F=N=NaN,[F,N]}function findXYatLength(i,o,s,_){var F=-o*s,N=o*o+1,j=2*(o*F-s),Z=Math.sqrt(j*j-4*N*(F*F+s*s-i*i)),X=(-j+Z)/(2*N),$=(-j-Z)/(2*N);return[[X,o*X+F+_],[$,o*$+F+_]]}function makeRegularPolygon(i,o){var s,_=o.length,F=Array(_+1);for(s=0;s<_;s++){var N=o[s];F[s]=[i*Math.cos(N),i*Math.sin(N)]}return F[s]=F[0].slice(),F}function makeClippedPolygon(i,o,s,F){var Z,$,ee,et,er=F.length,en=[];function a2xy(o){return[i*Math.cos(o),i*Math.sin(o)]}function cycleIndex(i){return _.mod(i,er)}function isInside(i){return j(i,[o,s])}var ei=N(F,function(i){return isInside(i)?X(i,o):1/0}),eo=findIntersectionXY(Z=F[ei],F[cycleIndex(ei-1)],o,a2xy(Z));for(en.push(eo),ee=ei,et=0;et<er;ee++,et++){var es=F[cycleIndex(ee)];if(!isInside(es))break;en.push(a2xy(es))}var el=N(F,function(i){return isInside(i)?X(i,s):1/0}),ec=findIntersectionXY($=F[el],F[cycleIndex(el+1)],s,a2xy($));return en.push(ec),en.push([0,0]),en.push(en[0].slice()),en}function makePolygon(i,o,s,F){return _.isFullCircle([o,s])?makeRegularPolygon(i,F):makeClippedPolygon(i,o,s,F)}function findPolygonOffset(i,o,s,_){for(var F=1/0,N=1/0,j=makePolygon(i,o,s,_),Z=0;Z<j.length;Z++){var X=j[Z];F=Math.min(F,X[0]),N=Math.min(N,-X[1])}return[F,N]}function findEnclosingVertexAngles(i,o){var s=N(o,function(o){var s=Z(o,i);return s>0?s:1/0}),F=_.mod(s+1,o.length);return[o[s],o[F]]}function clampTiny(i){return Math.abs(i)>1e-10?i:0}function transformForSVG(i,o,s){o=o||0,s=s||0;for(var _=i.length,F=Array(_),N=0;N<_;N++){var j=i[N];F[N]=[o+j[0],s-j[1]]}return F}function pathPolygon(i,o,s,_,F,N){return"M"+transformForSVG(makePolygon(i,o,s,_),F,N).join("L")}function pathPolygonAnnulus(i,o,s,_,F,N,j){i<o?(Z=i,X=o):(Z=o,X=i);var Z,X,$=transformForSVG(makePolygon(Z,s,_,F),N,j);return"M"+transformForSVG(makePolygon(X,s,_,F),N,j).reverse().join("L")+"M"+$.join("L")}i.exports={isPtInsidePolygon:isPtInsidePolygon,findPolygonOffset:findPolygonOffset,findEnclosingVertexAngles:findEnclosingVertexAngles,findIntersectionXY:findIntersectionXY,findXYatLength:findXYatLength,clampTiny:clampTiny,pathPolygon:pathPolygon,pathPolygonAnnulus:pathPolygonAnnulus}},23580:function(i,o,s){"use strict";var _=s(27659).AU,F=s(71828).counterRegex,N=s(77997),j=s(9813),Z=j.attr,X=j.name,$=F(X),ee={};function plot(i){for(var o=i._fullLayout,s=i.calcdata,F=o._subplots[X],j=0;j<F.length;j++){var Z=F[j],$=_(s,X,Z),ee=o[Z]._subplot;ee||(ee=N(i,Z),o[Z]._subplot=ee),ee.plot($,o,i._promises)}}function clean(i,o,s,_){for(var F=_._subplots[X]||[],N=_._has&&_._has("gl"),j=o._has&&o._has("gl"),Z=N&&!j,$=0;$<F.length;$++){var ee=F[$],et=_[ee]._subplot;if(!o[ee]&&et)for(var er in et.framework.remove(),et.layers["radial-axis-title"].remove(),et.clipPaths)et.clipPaths[er].remove();Z&&et._scene&&(et._scene.destroy(),et._scene=null)}}ee[Z]={valType:"subplotid",dflt:X,editType:"calc"},i.exports={attr:Z,name:X,idRoot:X,idRegex:$,attrRegex:$,attributes:ee,layoutAttributes:s(73812),supplyLayoutDefaults:s(68993),plot:plot,clean:clean,toSVG:s(93612).toSVG}},73812:function(i,o,s){"use strict";var _=s(22399),F=s(13838),N=s(27670).Y,j=s(71828).extendFlat,Z=s(30962).overrideAll,X=Z({color:F.color,showline:j({},F.showline,{dflt:!0}),linecolor:F.linecolor,linewidth:F.linewidth,showgrid:j({},F.showgrid,{dflt:!0}),gridcolor:F.gridcolor,gridwidth:F.gridwidth,griddash:F.griddash},"plot","from-root"),$=Z({tickmode:F.minor.tickmode,nticks:F.nticks,tick0:F.tick0,dtick:F.dtick,tickvals:F.tickvals,ticktext:F.ticktext,ticks:F.ticks,ticklen:F.ticklen,tickwidth:F.tickwidth,tickcolor:F.tickcolor,ticklabelstep:F.ticklabelstep,showticklabels:F.showticklabels,labelalias:F.labelalias,showtickprefix:F.showtickprefix,tickprefix:F.tickprefix,showticksuffix:F.showticksuffix,ticksuffix:F.ticksuffix,showexponent:F.showexponent,exponentformat:F.exponentformat,minexponent:F.minexponent,separatethousands:F.separatethousands,tickfont:F.tickfont,tickangle:F.tickangle,tickformat:F.tickformat,tickformatstops:F.tickformatstops,layer:F.layer},"plot","from-root"),ee={visible:j({},F.visible,{dflt:!0}),type:j({},F.type,{values:["-","linear","log","date","category"]}),autotypenumbers:F.autotypenumbers,autorangeoptions:{minallowed:F.autorangeoptions.minallowed,maxallowed:F.autorangeoptions.maxallowed,clipmin:F.autorangeoptions.clipmin,clipmax:F.autorangeoptions.clipmax,include:F.autorangeoptions.include,editType:"plot"},autorange:j({},F.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:j({},F.minallowed,{editType:"plot"}),maxallowed:j({},F.maxallowed,{editType:"plot"}),range:j({},F.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:F.categoryorder,categoryarray:F.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:j({},F.title.text,{editType:"plot",dflt:""}),font:j({},F.title.font,{editType:"plot"}),editType:"plot"},hoverformat:F.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:F._deprecated.title,titlefont:F._deprecated.titlefont}};j(ee,X,$);var et={visible:j({},F.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:F.autotypenumbers,categoryorder:F.categoryorder,categoryarray:F.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:F.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};j(et,X,$),i.exports={domain:N({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:_.background},radialaxis:ee,angularaxis:et,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(44467),j=s(49119),Z=s(27659).NG,X=s(26218),$=s(38701),ee=s(96115),et=s(89426),er=s(15258),en=s(92128),ei=s(23074),eo=s(4322),es=s(73812),el=s(12101),ec=s(9813),eu=ec.axisNames;function handleDefaults(i,o,s,j){var eo=s("bgcolor");j.bgColor=F.combine(eo,j.paper_bgcolor);var ef=s("sector");s("hole");var ed=Z(j.fullData,ec.name,j.id),eh=j.layoutOut;function coerceAxis(i,o){return s(e_+"."+i,o)}for(var ep=0;ep<eu.length;ep++){e_=eu[ep],_.isPlainObject(i[e_])||(i[e_]={});var eg=i[e_],em=N.newContainer(o,e_);em._id=em._name=e_,em._attr=j.id+"."+e_,em._traceIndices=ed.map(function(i){return i._expandedIndex});var ey=ec.axisName2dataArray[e_],ev=handleAxisTypeDefaults(eg,em,coerceAxis,ed,ey,j);er(eg,em,coerceAxis,{axData:ed,dataAttr:ey});var ex=coerceAxis("visible");switch(el(em,o,eh),coerceAxis("uirevision",o.uirevision),em._m=1,e_){case"radialaxis":coerceAxis("minallowed"),coerceAxis("maxallowed");var e_,ew,eT=coerceAxis("range"),ek=em.getAutorangeDflt(eT),eA=coerceAxis("autorange",ek);eT&&(null===eT[0]&&null===eT[1]||(null===eT[0]||null===eT[1])&&("reversed"===eA||!0===eA)||null!==eT[0]&&("min"===eA||"max reversed"===eA)||null!==eT[1]&&("max"===eA||"min reversed"===eA))&&(eT=void 0,delete em.range,em.autorange=!0,ew=!0),ew||(eA=coerceAxis("autorange",ek=em.getAutorangeDflt(eT))),eg.autorange=eA,eA&&(ei(coerceAxis,eA,eT),("linear"===ev||"-"===ev)&&coerceAxis("rangemode"),em.isReversed()&&(em._m=-1)),em.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===ev){_.log("Polar plots do not support date angular axes yet.");for(var eS=0;eS<ed.length;eS++)ed[eS].visible=!1;ev=eg.type=em.type="linear"}coerceAxis("linear"===ev?"thetaunit":"period");var eM=coerceAxis("direction");coerceAxis("rotation",{counterclockwise:0,clockwise:90}[eM])}if(et(eg,em,coerceAxis,em.type,{tickSuffixDflt:"degrees"===em.thetaunit?"\xb0":void 0}),ex){var eC,eE,eL,eP,eI=j.font||{};eE=(eC=coerceAxis("color"))===eg.color?eC:eI.color,eL=eI.size,eP=eI.family,X(eg,em,coerceAxis,em.type),ee(eg,em,coerceAxis,em.type,{font:{color:eE,size:eL,family:eP}}),$(eg,em,coerceAxis,{outerTicks:!0}),en(eg,em,coerceAxis,{dfltColor:eC,bgColor:j.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:es[e_]}),coerceAxis("layer"),"radialaxis"===e_&&(coerceAxis("side"),coerceAxis("angle",ef[0]),coerceAxis("title.text"),_.coerceFont(coerceAxis,"title.font",{color:eE,size:_.bigFont(eL),family:eP}))}"category"!==ev&&coerceAxis("hoverformat"),em._input=eg}"category"===o.angularaxis.type&&s("gridshape")}function handleAxisTypeDefaults(i,o,s,_,F,N){var j,Z=s("autotypenumbers",N.autotypenumbersDflt);if("-"===s("type")){for(var X=0;X<_.length;X++)if(_[X].visible){j=_[X];break}j&&j[F]&&(o.type=eo(j[F],"gregorian",{noMultiCategory:!0,autotypenumbers:Z})),"-"===o.type?o.type="linear":i.type=o.type}return o.type}i.exports=function(i,o,s){j(i,o,s,{type:ec.name,attributes:es,handleDefaults:handleDefaults,font:o.font,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,fullData:s,layoutOut:o})}},77997:function(i,o,s){"use strict";var _=s(39898),F=s(84267),N=s(73972),j=s(71828),Z=j.strRotate,X=j.strTranslate,$=s(7901),ee=s(91424),et=s(74875),er=s(89298),en=s(21994),ei=s(12101),eo=s(71739).doAutoRange,es=s(29323),el=s(28569),ec=s(30211),eu=s(92998),ef=s(47322).prepSelect,ed=s(47322).selectOnClick,eh=s(47322).clearOutline,ep=s(6964),eg=s(33306),em=s(61549).redrawReglTraces,ey=s(18783).MID_SHIFT,ev=s(9813),ex=s(10869),e_=s(23893),ew=e_.smith,eT=e_.reactanceArc,ek=e_.resistanceArc,eA=e_.smithTransform,eS=j._,eM=j.mod,eC=j.deg2rad,eE=j.rad2deg;function Polar(i,o,s){this.isSmith=s||!1,this.id=o,this.gd=i,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var _=i._fullLayout,F="clip"+_._uid+o;this.clipIds.forTraces=F+"-for-traces",this.clipPaths.forTraces=_._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=_["_"+(s?"smith":"polar")+"layer"].append("g").attr("class",o),this.getHole=function(i){return this.isSmith?0:i.hole},this.getSector=function(i){return this.isSmith?[0,360]:i.sector},this.getRadial=function(i){return this.isSmith?i.realaxis:i.radialaxis},this.getAngular=function(i){return this.isSmith?i.imaginaryaxis:i.angularaxis},s||(this.radialTickLayout=null,this.angularTickLayout=null)}var eL=Polar.prototype;function strTickLayout(i){var o=i.ticks+String(i.ticklen)+String(i.showticklabels);return"side"in i&&(o+=i.side),o}function computeSectorBBox(i){var o,s=i[0],_=i[1]-s,F=eM(s,360),N=F+_,j=Math.cos(eC(F)),Z=Math.sin(eC(F)),X=Math.cos(eC(N)),$=Math.sin(eC(N));return o=F<=90&&N>=90||F>90&&N>=450?1:Z<=0&&$<=0?0:Math.max(Z,$),[F<=180&&N>=180||F>180&&N>=540?-1:j>=0&&X>=0?0:Math.min(j,X),F<=270&&N>=270||F>270&&N>=630?-1:Z>=0&&$>=0?0:Math.min(Z,$),N>=360?1:j<=0&&X<=0?0:Math.max(j,X),o]}function snapToVertexAngle(i,o){var s=j.findIndexOfMin(o,function(o){return j.angleDist(i,o)});return o[s]}function updateElement(i,o,s){return o?(i.attr("display",null),i.attr(s)):i&&i.attr("display","none"),i}i.exports=function(i,o,s){return new Polar(i,o,s)},eL.plot=function(i,o){for(var s=o[this.id],_=!1,F=0;F<i.length;F++)if(!1===i[F][0].trace.cliponaxis){_=!0;break}this._hasClipOnAxisFalse=_,this.updateLayers(o,s),this.updateLayout(o,s),et.generalUpdatePerTraceModule(this.gd,this,i,s),this.updateFx(o,s),this.isSmith&&(delete s.realaxis.range,delete s.imaginaryaxis.range)},eL.updateLayers=function(i,o){var s=this.isSmith,F=this.layers,N=this.getRadial(o),j=this.getAngular(o),Z=ev.layerNames,X=Z.indexOf("frontplot"),$=Z.slice(0,X),ee="below traces"===j.layer,et="below traces"===N.layer;ee&&$.push("angular-line"),et&&$.push("radial-line"),ee&&$.push("angular-axis"),et&&$.push("radial-axis"),$.push("frontplot"),ee||$.push("angular-line"),et||$.push("radial-line"),ee||$.push("angular-axis"),et||$.push("radial-axis");var er=(s?"smith":"polar")+"sublayer",en=this.framework.selectAll("."+er).data($,String);en.enter().append("g").attr("class",function(i){return er+" "+i}).each(function(i){var o=F[i]=_.select(this);switch(i){case"frontplot":s||o.append("g").classed("barlayer",!0),o.append("g").classed("scatterlayer",!0);break;case"backplot":o.append("g").classed("maplayer",!0);break;case"plotbg":F.bg=o.append("path");break;case"radial-grid":case"angular-grid":o.style("fill","none");break;case"radial-line":o.append("line").style("fill","none");break;case"angular-line":o.append("path").style("fill","none")}}),en.order()},eL.updateLayout=function(i,o){var s,_,F,N,j,Z,et=this.layers,er=i._size,en=this.getRadial(o),ei=this.getAngular(o),eo=o.domain.x,es=o.domain.y;this.xOffset=er.l+er.w*eo[0],this.yOffset=er.t+er.h*(1-es[1]);var el=this.xLength=er.w*(eo[1]-eo[0]),ec=this.yLength=er.h*(es[1]-es[0]),eu=this.getSector(o);this.sectorInRad=eu.map(eC);var ef=this.sectorBBox=computeSectorBBox(eu),ed=ef[2]-ef[0],eh=Math.abs((ef[3]-ef[1])/ed);ec/el>eh?(s=el,j=(ec-(_=el*eh))/er.h/2,F=[eo[0],eo[1]],N=[es[0]+j,es[1]-j]):(s=ec/eh,_=ec,j=(el-s)/er.w/2,F=[eo[0]+j,eo[1]-j],N=[es[0],es[1]]),this.xLength2=s,this.yLength2=_,this.xDomain2=F,this.yDomain2=N;var ep=this.xOffset2=er.l+er.w*F[0],eg=this.yOffset2=er.t+er.h*(1-N[1]),em=this.radius=s/ed,ey=this.innerRadius=this.getHole(o)*em,ev=this.cx=ep-em*ef[0],ex=this.cy=eg+em*ef[3],e_=this.cxx=ev-ep,ew=this.cyy=ex-eg,eT=en.side;"counterclockwise"===eT?(Z=eT,eT="top"):"clockwise"===eT&&(Z=eT,eT="bottom"),this.radialAxis=this.mockAxis(i,o,en,{_id:"x",side:eT,_trueSide:Z,domain:[ey/er.w,em/er.w]}),this.angularAxis=this.mockAxis(i,o,ei,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(i,o),this.updateAngularAxis(i,o),this.updateRadialAxis(i,o),this.updateRadialAxisTitle(i,o),this.xaxis=this.mockCartesianAxis(i,o,{_id:"x",domain:F}),this.yaxis=this.mockCartesianAxis(i,o,{_id:"y",domain:N});var ek=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",ek).attr("transform",X(e_,ew)),et.frontplot.attr("transform",X(ep,eg)).call(ee.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),et.bg.attr("d",ek).attr("transform",X(ev,ex)).call($.fill,o.bgcolor)},eL.mockAxis=function(i,o,s,_){var F=j.extendFlat({},s,_);return ei(F,o,i),F},eL.mockCartesianAxis=function(i,o,s){var _=this,F=_.isSmith,N=s._id,Z=j.extendFlat({type:"linear"},s);en(Z,i);var X={x:[0,2],y:[1,3]};return Z.setRange=function(){var i=_.sectorBBox,s=X[N],F=_.radialAxis._rl,j=(F[1]-F[0])/(1-_.getHole(o));Z.range=[i[s[0]]*j,i[s[1]]*j]},Z.isPtWithinRange="x"!==N||F?function(){return!0}:function(i){return _.isPtInside(i)},Z.setRange(),Z.setScale(),Z},eL.doAutoRange=function(i,o){var s=this.gd,_=this.radialAxis,F=this.getRadial(o);eo(s,_);var N=_.range;F.range=N.slice(),F._input.range=N.slice(),_._rl=[_.r2l(N[0],null,"gregorian"),_.r2l(N[1],null,"gregorian")]},eL.updateRadialAxis=function(i,o){var s=this,_=s.gd,F=s.layers,N=s.radius,ee=s.innerRadius,et=s.cx,en=s.cy,ei=s.getRadial(o),eo=eM(s.getSector(o)[0],360),es=s.radialAxis,el=ee<N,ec=s.isSmith;ec||(s.fillViewInitialKey("radialaxis.angle",ei.angle),s.fillViewInitialKey("radialaxis.range",es.range.slice()),es.setGeometry()),"auto"===es.tickangle&&eo>90&&eo<=270&&(es.tickangle=180);var eu=ec?function(i){var o=eA(s,ew([i.x,0]));return X(o[0]-et,o[1]-en)}:function(i){return X(es.l2p(i.x)+ee,0)},ef=ec?function(i){return ek(s,i.x,-1/0,1/0)}:function(i){return s.pathArc(es.r2p(i.x)+ee)},ed=strTickLayout(ei);if(s.radialTickLayout!==ed&&(F["radial-axis"].selectAll(".xtick").remove(),s.radialTickLayout=ed),el){es.setScale();var eh=0,ep=ec?(es.tickvals||[]).filter(function(i){return i>=0}).map(function(i){return er.tickText(es,i,!0,!1)}):er.calcTicks(es),eg=ec?ep:er.clipEnds(es,ep),em=er.getTickSigns(es)[2];ec&&(("top"===es.ticks&&"bottom"===es.side||"bottom"===es.ticks&&"top"===es.side)&&(em=-em),"top"===es.ticks&&"top"===es.side&&(eh=-es.ticklen),"bottom"===es.ticks&&"bottom"===es.side&&(eh=es.ticklen)),er.drawTicks(_,es,{vals:ep,layer:F["radial-axis"],path:er.makeTickPath(es,0,em),transFn:eu,crisp:!1}),er.drawGrid(_,es,{vals:eg,layer:F["radial-grid"],path:ef,transFn:j.noop,crisp:!1}),er.drawLabels(_,es,{vals:ep,layer:F["radial-axis"],transFn:eu,labelFns:er.makeLabelFns(es,eh)})}var ey=s.radialAxisAngle=s.vangles?eE(snapToVertexAngle(eC(ei.angle),s.vangles)):ei.angle,ev=X(et,en),ex=ev+Z(-ey);updateElement(F["radial-axis"],el&&(ei.showticklabels||ei.ticks),{transform:ex}),updateElement(F["radial-grid"],el&&ei.showgrid,{transform:ec?"":ev}),updateElement(F["radial-line"].select("line"),el&&ei.showline,{x1:ec?-N:ee,y1:0,x2:N,y2:0,transform:ex}).attr("stroke-width",ei.linewidth).call($.stroke,ei.linecolor)},eL.updateRadialAxisTitle=function(i,o,s){if(!this.isSmith){var _=this.gd,F=this.radius,N=this.cx,j=this.cy,Z=this.getRadial(o),X=this.id+"title",$=0;if(Z.title){var et=ee.bBox(this.layers["radial-axis"].node()).height,er=Z.title.font.size,en=Z.side;$="top"===en?er:"counterclockwise"===en?-(et+.4*er):et+.8*er}var ei=void 0!==s?s:this.radialAxisAngle,eo=eC(ei),es=Math.cos(eo),el=Math.sin(eo),ec=N+F/2*es+$*el,ef=j-F/2*el+$*es;this.layers["radial-axis-title"]=eu.draw(_,X,{propContainer:Z,propName:this.id+".radialaxis.title",placeholder:eS(_,"Click to enter radial axis title"),attributes:{x:ec,y:ef,"text-anchor":"middle"},transform:{rotate:-ei}})}},eL.updateAngularAxis=function(i,o){var s,_=this,F=_.gd,N=_.layers,ee=_.radius,et=_.innerRadius,en=_.cx,ei=_.cy,eo=_.getAngular(o),es=_.angularAxis,el=_.isSmith;el||(_.fillViewInitialKey("angularaxis.rotation",eo.rotation),es.setGeometry(),es.setScale());var ec=el?function(i){var o=eA(_,ew([0,i.x]));return Math.atan2(o[0]-en,o[1]-ei)-Math.PI/2}:function(i){return es.t2g(i.x)};"linear"===es.type&&"radians"===es.thetaunit&&(es.tick0=eE(es.tick0),es.dtick=eE(es.dtick));var _transFn=function(i){return X(en+ee*Math.cos(i),ei-ee*Math.sin(i))},eu=el?function(i){var o=eA(_,ew([0,i.x]));return X(o[0],o[1])}:function(i){return _transFn(ec(i))},ef=el?function(i){var o=eA(_,ew([0,i.x])),s=Math.atan2(o[0]-en,o[1]-ei)-Math.PI/2;return X(o[0],o[1])+Z(-eE(s))}:function(i){var o=ec(i);return _transFn(o)+Z(-eE(o))},ed=el?function(i){return eT(_,i.x,0,1/0)}:function(i){var o=ec(i),s=Math.cos(o),_=Math.sin(o);return"M"+[en+et*s,ei-et*_]+"L"+[en+ee*s,ei-ee*_]},eh=er.makeLabelFns(es,0).labelStandoff,ep={};ep.xFn=function(i){return Math.cos(ec(i))*eh},ep.yFn=function(i){var o=ec(i),s=Math.sin(o)>0?.2:1;return-Math.sin(o)*(eh+i.fontSize*s)+Math.abs(Math.cos(o))*(i.fontSize*ey)},ep.anchorFn=function(i){var o=Math.cos(ec(i));return .1>Math.abs(o)?"middle":o>0?"start":"end"},ep.heightFn=function(i,o,s){return -.5*(1+Math.sin(ec(i)))*s};var eg=strTickLayout(eo);_.angularTickLayout!==eg&&(N["angular-axis"].selectAll("."+es._id+"tick").remove(),_.angularTickLayout=eg);var em=el?[1/0].concat(es.tickvals||[]).map(function(i){return er.tickText(es,i,!0,!1)}):er.calcTicks(es);if(el&&(em[0].text="∞",em[0].fontSize*=1.75),"linear"===o.gridshape?(s=em.map(ec),0>j.angleDelta(s[0],s[1])&&(s=s.slice().reverse())):s=null,_.vangles=s,"category"===es.type&&(em=em.filter(function(i){return j.isAngleInsideSector(ec(i),_.sectorInRad)})),es.visible){var ev="inside"===es.ticks?-1:1,ex=(es.linewidth||1)/2;er.drawTicks(F,es,{vals:em,layer:N["angular-axis"],path:"M"+ev*ex+",0h"+ev*es.ticklen,transFn:ef,crisp:!1}),er.drawGrid(F,es,{vals:em,layer:N["angular-grid"],path:ed,transFn:j.noop,crisp:!1}),er.drawLabels(F,es,{vals:em,layer:N["angular-axis"],repositionOnUpdate:!0,transFn:eu,labelFns:ep})}updateElement(N["angular-line"].select("path"),eo.showline,{d:_.pathSubplot(),transform:X(en,ei)}).attr("stroke-width",eo.linewidth).call($.stroke,eo.linecolor)},eL.updateFx=function(i,o){this.gd._context.staticPlot||(this.isSmith||(this.updateAngularDrag(i),this.updateRadialDrag(i,o,0),this.updateRadialDrag(i,o,1)),this.updateHoverAndMainDrag(i))},eL.updateHoverAndMainDrag=function(i){var o,s,Z,$,ee,et,er,en,ei,eo,eu,ep=this,eg=ep.isSmith,em=ep.gd,ey=ep.layers,e_=i._zoomlayer,ew=ev.MINZOOM,eT=ev.OFFEDGE,ek=ep.radius,eA=ep.innerRadius,eS=ep.cx,eM=ep.cy,eC=ep.cxx,eE=ep.cyy,eL=ep.sectorInRad,eP=ep.vangles,eI=ep.radialAxis,eO=ex.clampTiny,eD=ex.findXYatLength,eR=ex.findEnclosingVertexAngles,eB=ev.cornerHalfWidth,eF=ev.cornerLen/2,ez=es.makeDragger(ey,"path","maindrag",!1===i.dragmode?"none":"crosshair");_.select(ez).attr("d",ep.pathSubplot()).attr("transform",X(eS,eM)),ez.onmousemove=function(i){ec.hover(em,i,ep.id),em._fullLayout._lasthover=ez,em._fullLayout._hoversubplot=ep.id},ez.onmouseout=function(i){em._dragging||el.unhover(em,i)};var eN={element:ez,gd:em,subplot:ep.id,plotinfo:{id:ep.id,xaxis:ep.xaxis,yaxis:ep.yaxis},xaxes:[ep.xaxis],yaxes:[ep.yaxis]};function norm(i,o){return Math.sqrt(i*i+o*o)}function xy2a(i,o){return Math.atan2(eE-o,i-eC)}function ra2xy(i,o){return[i*Math.cos(o),i*Math.sin(-o)]}function pathCorner(i,o){if(0===i)return ep.pathSector(2*eB);var s=eF/i,_=o-s,F=o+s,N=Math.max(0,Math.min(i,ek)),j=N-eB,Z=N+eB;return"M"+ra2xy(j,_)+"A"+[j,j]+" 0,0,0 "+ra2xy(j,F)+"L"+ra2xy(Z,F)+"A"+[Z,Z]+" 0,0,1 "+ra2xy(Z,_)+"Z"}function pathCornerForPolygons(i,o,s){if(0===i)return ep.pathSector(2*eB);var _,F,N,j,Z=ra2xy(i,o),X=ra2xy(i,s),$=eO((Z[0]+X[0])/2),ee=eO((Z[1]+X[1])/2);if($&&ee){var et=ee/$,er=-1/et,en=eD(eB,et,$,ee);_=eD(eF,er,en[0][0],en[0][1]),F=eD(eF,er,en[1][0],en[1][1])}else ee?(N=eF,j=eB):(N=eB,j=eF),_=[[$-N,ee-j],[$+N,ee-j]],F=[[$-N,ee+j],[$+N,ee+j]];return"M"+_.join("L")+"L"+F.reverse().join("L")+"Z"}function zoomPrep(){ee=null,et=null,er=ep.pathSubplot(),en=!1,ei=F(em._fullLayout[ep.id].bgcolor).getLuminance(),(eo=es.makeZoombox(e_,ei,eS,eM,er)).attr("fill-rule","evenodd"),eu=es.makeCorners(e_,eS,eM),eh(em)}function clampAndSetR0R1(i,o){return(o=Math.max(Math.min(o,ek),eA),i<eT?i=0:ek-i<eT?i=ek:o<eT?o=0:ek-o<eT&&(o=ek),Math.abs(o-i)>ew)?(i<o?(ee=i,et=o):(ee=o,et=i),!0):(ee=null,et=null,!1)}function applyZoomMove(i,o){i=i||er,o=o||"M0,0Z",eo.attr("d",i),eu.attr("d",o),es.transitionZoombox(eo,eu,en,ei),en=!0;var s={};computeZoomUpdates(s),em.emit("plotly_relayouting",s)}function zoomMove(i,_){i*=o,_*=s;var F,N,j=Z+i,X=$+_,en=norm(Z-eC,$-eE),ei=Math.min(norm(j-eC,X-eE),ek),eo=xy2a(Z,$);clampAndSetR0R1(en,ei)&&(F=er+ep.pathSector(et),ee&&(F+=ep.pathSector(ee)),N=pathCorner(ee,eo)+pathCorner(et,eo)),applyZoomMove(F,N)}function findPolygonRadius(i,o,s,_){var F=ex.findIntersectionXY(s,_,s,[i-eC,eE-o]);return norm(F[0],F[1])}function zoomMoveForPolygons(i,o){var s,_,F=Z+i,N=$+o,j=xy2a(Z,$),X=xy2a(F,N),en=eR(j,eP),ei=eR(X,eP);clampAndSetR0R1(findPolygonRadius(Z,$,en[0],en[1]),Math.min(findPolygonRadius(F,N,ei[0],ei[1]),ek))&&(s=er+ep.pathSector(et),ee&&(s+=ep.pathSector(ee)),_=[pathCornerForPolygons(ee,en[0],en[1]),pathCornerForPolygons(et,en[0],en[1])].join(" ")),applyZoomMove(s,_)}function zoomDone(){if(es.removeZoombox(em),null!==ee&&null!==et){var i={};computeZoomUpdates(i),es.showDoubleClickNotifier(em),N.call("_guiRelayout",em,i)}}function computeZoomUpdates(i){var o=eI._rl,s=(o[1]-o[0])/(1-eA/ek)/ek,_=[o[0]+(ee-eA)*s,o[0]+(et-eA)*s];i[ep.id+".radialaxis.range"]=_}function zoomClick(i,o){var s=em._fullLayout.clickmode;if(es.removeZoombox(em),2===i){var _={};for(var F in ep.viewInitial)_[ep.id+"."+F]=ep.viewInitial[F];em.emit("plotly_doubleclick",null),N.call("_guiRelayout",em,_)}s.indexOf("select")>-1&&1===i&&ed(o,em,[ep.xaxis],[ep.yaxis],ep.id,eN),s.indexOf("event")>-1&&ec.click(em,o,ep.id)}eN.prepFn=function(i,_,F){var N=em._fullLayout.dragmode,X=ez.getBoundingClientRect();em._fullLayout._calcInverseTransform(em);var ee=em._fullLayout._invTransform;o=em._fullLayout._invScaleX,s=em._fullLayout._invScaleY;var et=j.apply3DTransform(ee)(_-X.left,F-X.top);if(Z=et[0],$=et[1],eP){var er=ex.findPolygonOffset(ek,eL[0],eL[1],eP);Z+=eC+er[0],$+=eE+er[1]}switch(N){case"zoom":eN.clickFn=zoomClick,eg||(eP?eN.moveFn=zoomMoveForPolygons:eN.moveFn=zoomMove,eN.doneFn=zoomDone,zoomPrep(i,_,F));break;case"select":case"lasso":ef(i,_,F,eN,N)}},el.init(eN)},eL.updateRadialDrag=function(i,o,s){var F,$,ee,et,er,en,ei=this,eo=ei.gd,ec=ei.layers,eu=ei.radius,ef=ei.innerRadius,ed=ei.cx,ep=ei.cy,ey=ei.radialAxis,ex=ev.radialDragBoxSize,e_=ex/2;if(ey.visible){var ew=eC(ei.radialAxisAngle),eT=ey._rl,ek=eT[0],eA=eT[1],eS=eT[s],eM=.75*(eT[1]-eT[0])/(1-ei.getHole(o))/eu;s?(F=ed+(eu+e_)*Math.cos(ew),$=ep-(eu+e_)*Math.sin(ew),ee="radialdrag"):(F=ed+(ef-e_)*Math.cos(ew),$=ep-(ef-e_)*Math.sin(ew),ee="radialdrag-inner");var eL=es.makeRectDragger(ec,ee,"crosshair",-e_,-e_,ex,ex),eP={element:eL,gd:eo};!1===i.dragmode&&(eP.dragmode=!1),updateElement(_.select(eL),ey.visible&&ef<eu,{transform:X(F,$)}),eP.prepFn=function(){et=null,er=null,en=null,eP.moveFn=moveFn,eP.doneFn=doneFn,eh(eo)},eP.clampFn=function(i,o){return Math.sqrt(i*i+o*o)<ev.MINDRAG&&(i=0,o=0),[i,o]},el.init(eP)}function moveFn(i,o){if(et)et(i,o);else{var s=[i,-o],_=[Math.cos(ew),Math.sin(ew)],F=Math.abs(j.dot(s,_)/Math.sqrt(j.dot(s,s)));isNaN(F)||(et=F<.5?rotateMove:rerangeMove)}var N={};computeRadialAxisUpdates(N),eo.emit("plotly_relayouting",N)}function computeRadialAxisUpdates(i){null!==er?i[ei.id+".radialaxis.angle"]=er:null!==en&&(i[ei.id+".radialaxis.range["+s+"]"]=en)}function doneFn(){null!==er?N.call("_guiRelayout",eo,ei.id+".radialaxis.angle",er):null!==en&&N.call("_guiRelayout",eo,ei.id+".radialaxis.range["+s+"]",en)}function rotateMove(i,o){if(0!==s){er=Math.atan2(ep-($+o),F+i-ed),ei.vangles&&(er=snapToVertexAngle(er,ei.vangles)),er=eE(er);var _=X(ed,ep)+Z(-er);ec["radial-axis"].attr("transform",_),ec["radial-line"].select("line").attr("transform",_);var N=ei.gd._fullLayout,j=N[ei.id];ei.updateRadialAxisTitle(N,j,er)}}function rerangeMove(i,o){var _=j.dot([i,-o],[Math.cos(ew),Math.sin(ew)]);if(en=eS-eM*_,eM>0!=(s?en>ek:en<eA)){en=null;return}var F=eo._fullLayout,Z=F[ei.id];ey.range[s]=en,ey._rl[s]=en,ei.updateRadialAxis(F,Z),ei.xaxis.setRange(),ei.xaxis.setScale(),ei.yaxis.setRange(),ei.yaxis.setScale();var X=!1;for(var $ in ei.traceHash){var ee=ei.traceHash[$],et=j.filterVisible(ee);ee[0][0].trace._module.plot(eo,ei,et,Z),N.traceIs($,"gl")&&et.length&&(X=!0)}X&&(eg(eo),em(eo))}},eL.updateAngularDrag=function(i){var o,s,F,$,et,er,en=this,ei=en.gd,eo=en.layers,ec=en.radius,eu=en.angularAxis,ef=en.cx,ed=en.cy,ey=en.cxx,ex=en.cyy,e_=ev.angularDragBoxSize,ew=es.makeDragger(eo,"path","angulardrag",!1===i.dragmode?"none":"move"),eT={element:ew,gd:ei};function xy2a(i,o){return Math.atan2(ex+e_-o,i-ey-e_)}!1===i.dragmode?eT.dragmode=!1:_.select(ew).attr("d",en.pathAnnulus(ec,ec+e_)).attr("transform",X(ef,ed)).call(ep,"move");var ek=eo.frontplot.select(".scatterlayer").selectAll(".trace"),eA=ek.selectAll(".point"),eS=ek.selectAll(".textpoint");function moveFn(es,el){var ec=en.gd._fullLayout,eh=ec[en.id],ep=eE(xy2a(o+es*i._invScaleX,s+el*i._invScaleY)-er);if($=F+ep,eo.frontplot.attr("transform",X(en.xOffset2,en.yOffset2)+Z([-ep,ey,ex])),en.vangles){et=en.radialAxisAngle+ep;var ev=X(ef,ed)+Z(-ep),e_=X(ef,ed)+Z(-et);eo.bg.attr("transform",ev),eo["radial-grid"].attr("transform",ev),eo["radial-axis"].attr("transform",e_),eo["radial-line"].select("line").attr("transform",e_),en.updateRadialAxisTitle(ec,eh,et)}else en.clipPaths.forTraces.select("path").attr("transform",X(ey,ex)+Z(ep));eA.each(function(){var i=_.select(this),o=ee.getTranslate(i);i.attr("transform",X(o.x,o.y)+Z([ep]))}),eS.each(function(){var i=_.select(this),o=i.select("text"),s=ee.getTranslate(i);i.attr("transform",Z([ep,o.attr("x"),o.attr("y")])+X(s.x,s.y))}),eu.rotation=j.modHalf($,360),en.updateAngularAxis(ec,eh),en._hasClipOnAxisFalse&&!j.isFullCircle(en.sectorInRad)&&ek.call(ee.hideOutsideRangePoints,en);var ew=!1;for(var eT in en.traceHash)if(N.traceIs(eT,"gl")){var eM=en.traceHash[eT],eC=j.filterVisible(eM);eM[0][0].trace._module.plot(ei,en,eC,eh),eC.length&&(ew=!0)}ew&&(eg(ei),em(ei));var eL={};computeRotationUpdates(eL),ei.emit("plotly_relayouting",eL)}function computeRotationUpdates(i){i[en.id+".angularaxis.rotation"]=$,en.vangles&&(i[en.id+".radialaxis.angle"]=et)}function doneFn(){eS.select("text").attr("transform",null);var i={};computeRotationUpdates(i),N.call("_guiRelayout",ei,i)}eT.prepFn=function(_,N,Z){F=i[en.id].angularaxis.rotation;var X=ew.getBoundingClientRect();o=N-X.left,s=Z-X.top,ei._fullLayout._calcInverseTransform(ei);var $=j.apply3DTransform(i._invTransform)(o,s);o=$[0],s=$[1],er=xy2a(o,s),eT.moveFn=moveFn,eT.doneFn=doneFn,eh(ei)},en.vangles&&!j.isFullCircle(en.sectorInRad)&&(eT.prepFn=j.noop,ep(_.select(ew),null)),el.init(eT)},eL.isPtInside=function(i){if(this.isSmith)return!0;var o=this.sectorInRad,s=this.vangles,_=this.angularAxis.c2g(i.theta),F=this.radialAxis,N=F.c2l(i.r),Z=F._rl;return(s?ex.isPtInsidePolygon:j.isPtInsideSector)(N,_,Z,o,s)},eL.pathArc=function(i){var o=this.sectorInRad,s=this.vangles;return(s?ex.pathPolygon:j.pathArc)(i,o[0],o[1],s)},eL.pathSector=function(i){var o=this.sectorInRad,s=this.vangles;return(s?ex.pathPolygon:j.pathSector)(i,o[0],o[1],s)},eL.pathAnnulus=function(i,o){var s=this.sectorInRad,_=this.vangles;return(_?ex.pathPolygonAnnulus:j.pathAnnulus)(i,o,s[0],s[1],_)},eL.pathSubplot=function(){var i=this.innerRadius,o=this.radius;return i?this.pathAnnulus(i,o):this.pathSector(o)},eL.fillViewInitialKey=function(i,o){i in this.viewInitial||(this.viewInitial[i]=o)}},12101:function(i,o,s){"use strict";var _=s(71828),F=s(21994),N=_.deg2rad,j=_.rad2deg;function setConvertRadial(i,o){var s=o._subplot;i.setGeometry=function(){var o=i._rl[0],_=i._rl[1],F=s.innerRadius,N=(s.radius-F)/(_-o),j=F/N,Z=o>_?function(i){return i<=0}:function(i){return i>=0};i.c2g=function(s){var _=i.c2l(s)-o;return(Z(_)?_:0)+j},i.g2c=function(s){return i.l2c(s+o-j)},i.g2p=function(i){return i*N},i.c2p=function(o){return i.g2p(i.c2g(o))}}}function toRadians(i,o){return"degrees"===o?N(i):i}function fromRadians(i,o){return"degrees"===o?j(i):i}function setConvertAngular(i,o){var s=i.type;if("linear"===s){var F=i.d2c,Z=i.c2d;i.d2c=function(i,o){return toRadians(F(i),o)},i.c2d=function(i,o){return Z(fromRadians(i,o))}}i.makeCalcdata=function(o,F){var N,j,Z=o[F],X=o._length,_d2c=function(s){return i.d2c(s,o.thetaunit)};if(Z){if(_.isTypedArray(Z)&&"linear"===s){if(X===Z.length)return Z;if(Z.subarray)return Z.subarray(0,X)}for(j=0,N=Array(X);j<X;j++)N[j]=_d2c(Z[j])}else{var $=F+"0",ee="d"+F,et=$ in o?_d2c(o[$]):0,er=o[ee]?_d2c(o[ee]):(i.period||2*Math.PI)/X;for(j=0,N=Array(X);j<X;j++)N[j]=et+j*er}return N},i.setGeometry=function(){var F,Z,X,$,ee=o.sector,et=ee.map(N),er={clockwise:-1,counterclockwise:1}[i.direction],en=N(i.rotation),rad2g=function(i){return er*i+en},g2rad=function(i){return(i-en)/er};switch(s){case"linear":Z=F=_.identity,$=N,X=j,i.range=_.isFullCircle(et)?[ee[0],ee[0]+360]:et.map(g2rad).map(j);break;case"category":var ei=i._categories.length,eo=i.period?Math.max(i.period,ei):ei;0===eo&&(eo=1),Z=$=function(i){return 2*i*Math.PI/eo},F=X=function(i){return i*eo/Math.PI/2},i.range=[0,eo]}i.c2g=function(i){return rad2g(Z(i))},i.g2c=function(i){return F(g2rad(i))},i.t2g=function(i){return rad2g($(i))},i.g2t=function(i){return X(g2rad(i))}}}i.exports=function(i,o,s){switch(F(i,s),i._id){case"x":case"radialaxis":setConvertRadial(i,o);break;case"angularaxis":setConvertAngular(i,o)}}},39779:function(i){"use strict";i.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(i){"use strict";function sign(i){return i<0?-1:i>0?1:0}function smith(i){var o=i[0],s=i[1];if(!isFinite(o)||!isFinite(s))return[1,0];var _=(o+1)*(o+1)+s*s;return[(o*o+s*s-1)/_,2*s/_]}function transform(i,o){var s=o[0],_=o[1];return[s*i.radius+i.cx,-_*i.radius+i.cy]}function reactanceArc(i,o,s,_){var F=transform(i,smith([s,o])),N=F[0],j=F[1],Z=transform(i,smith([_,o])),X=Z[0],$=Z[1];if(0===o)return["M"+N+","+j,"L"+X+","+$].join(" ");var ee=1/Math.abs(o)*i.radius;return["M"+N+","+j,"A"+ee+","+ee+" 0 0,"+(o<0?1:0)+" "+X+","+$].join(" ")}function resistanceArc(i,o,s,_){var F=1/(o+1)*i.radius,N=transform(i,smith([o,s])),j=N[0],Z=N[1],X=transform(i,smith([o,_])),$=X[0],ee=X[1];if(sign(s)!==sign(_)){var et=transform(i,smith([o,0]));return["M"+j+","+Z,"A"+F+","+F+" 0 0,"+(0<s?0:1)+" "+et[0]+","+et[1],"A"+F+","+F+" 0 0,"+(_<0?0:1)+$+","+ee].join(" ")}return["M"+j+","+Z,"A"+F+","+F+" 0 0,"+(_<s?0:1)+" "+$+","+ee].join(" ")}i.exports={smith:smith,reactanceArc:reactanceArc,resistanceArc:resistanceArc,smithTransform:transform}},7504:function(i,o,s){"use strict";var _=s(27659).AU,F=s(71828).counterRegex,N=s(77997),j=s(39779),Z=j.attr,X=j.name,$=F(X),ee={};function plot(i){for(var o=i._fullLayout,s=i.calcdata,F=o._subplots[X],j=0;j<F.length;j++){var Z=F[j],$=_(s,X,Z),ee=o[Z]._subplot;ee||(ee=N(i,Z,!0),o[Z]._subplot=ee),ee.plot($,o,i._promises)}}function clean(i,o,s,_){for(var F=_._subplots[X]||[],N=0;N<F.length;N++){var j=F[N],Z=_[j]._subplot;if(!o[j]&&Z)for(var $ in Z.framework.remove(),Z.clipPaths)Z.clipPaths[$].remove()}}ee[Z]={valType:"subplotid",dflt:X,editType:"calc"},i.exports={attr:Z,name:X,idRoot:X,idRegex:$,attrRegex:$,attributes:ee,layoutAttributes:s(33419),supplyLayoutDefaults:s(9558),plot:plot,clean:clean,toSVG:s(93612).toSVG}},33419:function(i,o,s){"use strict";var _=s(22399),F=s(13838),N=s(27670).Y,j=s(71828).extendFlat,Z=s(30962).overrideAll,X=Z({color:F.color,showline:j({},F.showline,{dflt:!0}),linecolor:F.linecolor,linewidth:F.linewidth,showgrid:j({},F.showgrid,{dflt:!0}),gridcolor:F.gridcolor,gridwidth:F.gridwidth,griddash:F.griddash},"plot","from-root"),$=Z({ticklen:F.ticklen,tickwidth:j({},F.tickwidth,{dflt:2}),tickcolor:F.tickcolor,showticklabels:F.showticklabels,labelalias:F.labelalias,showtickprefix:F.showtickprefix,tickprefix:F.tickprefix,showticksuffix:F.showticksuffix,ticksuffix:F.ticksuffix,tickfont:F.tickfont,tickformat:F.tickformat,hoverformat:F.hoverformat,layer:F.layer},"plot","from-root"),ee=j({visible:j({},F.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:j({},F.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},X,$),et=j({visible:j({},F.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:F.ticks,editType:"calc"},X,$);i.exports={domain:N({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:_.background},realaxis:ee,imaginaryaxis:et,editType:"calc"}},9558:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(44467),j=s(49119),Z=s(27659).NG,X=s(89426),$=s(96115),ee=s(92128),et=s(21994),er=s(33419),en=s(39779),ei=en.axisNames,eo=memoize(function(i){return i.slice().reverse().map(function(i){return-i}).concat([0]).concat(i)},String);function handleDefaults(i,o,s,j){var es=s("bgcolor");j.bgColor=F.combine(es,j.paper_bgcolor);var el=Z(j.fullData,en.name,j.id),ec=j.layoutOut;function coerceAxis(i,o){return s(ep+"."+i,o)}for(var eu=0;eu<ei.length;eu++){ep=ei[eu],_.isPlainObject(i[ep])||(i[ep]={});var ef=i[ep],ed=N.newContainer(o,ep);ed._id=ed._name=ep,ed._attr=j.id+"."+ep,ed._traceIndices=el.map(function(i){return i._expandedIndex});var eh=coerceAxis("visible");if(ed.type="linear",et(ed,ec),X(ef,ed,coerceAxis,ed.type),eh){var ep,eg,em,ey,ev,ex="realaxis"===ep;ex&&coerceAxis("side"),ex?coerceAxis("tickvals"):coerceAxis("tickvals",eo(o.realaxis.tickvals||er.realaxis.tickvals.dflt));var e_=j.font||{};eh&&(em=(eg=coerceAxis("color"))===ef.color?eg:e_.color,ey=e_.size,ev=e_.family),$(ef,ed,coerceAxis,ed.type,{noTicklabelstep:!0,noAng:!ex,noExp:!0,font:{color:em,size:ey,family:ev}}),_.coerce2(i,o,er,ep+".ticklen"),_.coerce2(i,o,er,ep+".tickwidth"),_.coerce2(i,o,er,ep+".tickcolor",o.color),coerceAxis("ticks")||(delete o[ep].ticklen,delete o[ep].tickwidth,delete o[ep].tickcolor),ee(ef,ed,coerceAxis,{dfltColor:eg,bgColor:j.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:er[ep]}),coerceAxis("layer")}coerceAxis("hoverformat"),delete ed.type,ed._input=ef}}function memoize(i,o){var s={};return function(_){var F=o?o(_):_;if(F in s)return s[F];var N=i(_);return s[F]=N,N}}i.exports=function(i,o,s){j(i,o,s,{noUirevision:!0,type:en.name,attributes:er,handleDefaults:handleDefaults,font:o.font,paper_bgcolor:o.paper_bgcolor,fullData:s,layoutOut:o})}},49119:function(i,o,s){"use strict";var _=s(71828),F=s(44467),N=s(27670).c;i.exports=function(i,o,s,j){var Z,X,$=j.type,ee=j.attributes,et=j.handleDefaults,er=j.partition||"x",en=o._subplots[$],ei=en.length,eo=ei&&en[0].replace(/\d+$/,"");function coerce(i,o){return _.coerce(Z,X,ee,i,o)}for(var es=0;es<ei;es++){var el=en[es];Z=i[el]?i[el]:i[el]={},X=F.newContainer(o,el,eo),j.noUirevision||coerce("uirevision",o.uirevision);var ec={};ec[er]=[es/ei,(es+1)/ei],N(X,o,coerce,ec),j.id=el,et(Z,X,coerce,j)}}},5386:function(i,o,s){"use strict";var _=s(31562);function describeVariables(i){var o=i.description?" "+i.description:"",s=i.keys||[];if(s.length>0){for(var _=[],F=0;F<s.length;F++)_[F]="`"+s[F]+"`";o+="Finally, the template string has access to ",o=1===s.length?o+"variable "+_[0]:o+"variables "+_.slice(0,-1).join(", ")+" and "+_.slice(-1)+"."}return o}_.FORMAT_LINK,_.DATE_FORMAT_LINK,o.fF=function(i,o){i=i||{},describeVariables(o=o||{});var s={valType:"string",dflt:"",editType:i.editType||"none"};return!1!==i.arrayOk&&(s.arrayOk=!0),s},o.si=function(i,o){i=i||{},describeVariables(o=o||{});var s={valType:"string",dflt:"",editType:i.editType||"calc"};return!1!==i.arrayOk&&(s.arrayOk=!0),s},o.R=function(i,o){return o=o||{},(i=i||{}).newshape,describeVariables(o),{valType:"string",dflt:"",editType:i.editType||"arraydraw"}}},61639:function(i,o,s){"use strict";var _=s(64380),F=s(27659).AU,N=s(71828).counterRegex,j="ternary";o.name=j;var Z=o.attr="subplot";o.idRoot=j,o.idRegex=o.attrRegex=N(j),(o.attributes={})[Z]={valType:"subplotid",dflt:"ternary",editType:"calc"},o.layoutAttributes=s(81367),o.supplyLayoutDefaults=s(25369),o.plot=function(i){for(var o=i._fullLayout,s=i.calcdata,N=o._subplots[j],Z=0;Z<N.length;Z++){var X=N[Z],$=F(s,j,X),ee=o[X]._subplot;ee||(ee=new _({id:X,graphDiv:i,container:o._ternarylayer.node()},o),o[X]._subplot=ee),ee.plot($,o,i._promises)}},o.clean=function(i,o,s,_){for(var F=_._subplots[j]||[],N=0;N<F.length;N++){var Z=F[N],X=_[Z]._subplot;!o[Z]&&X&&(X.plotContainer.remove(),X.clipDef.remove(),X.clipDefRelative.remove(),X.layers["a-title"].remove(),X.layers["b-title"].remove(),X.layers["c-title"].remove())}}},81367:function(i,o,s){"use strict";var _=s(22399),F=s(27670).Y,N=s(13838),j=s(30962).overrideAll,Z=s(1426).extendFlat,X={title:{text:N.title.text,font:N.title.font},color:N.color,tickmode:N.minor.tickmode,nticks:Z({},N.nticks,{dflt:6,min:1}),tick0:N.tick0,dtick:N.dtick,tickvals:N.tickvals,ticktext:N.ticktext,ticks:N.ticks,ticklen:N.ticklen,tickwidth:N.tickwidth,tickcolor:N.tickcolor,ticklabelstep:N.ticklabelstep,showticklabels:N.showticklabels,labelalias:N.labelalias,showtickprefix:N.showtickprefix,tickprefix:N.tickprefix,showticksuffix:N.showticksuffix,ticksuffix:N.ticksuffix,showexponent:N.showexponent,exponentformat:N.exponentformat,minexponent:N.minexponent,separatethousands:N.separatethousands,tickfont:N.tickfont,tickangle:N.tickangle,tickformat:N.tickformat,tickformatstops:N.tickformatstops,hoverformat:N.hoverformat,showline:Z({},N.showline,{dflt:!0}),linecolor:N.linecolor,linewidth:N.linewidth,showgrid:Z({},N.showgrid,{dflt:!0}),gridcolor:N.gridcolor,gridwidth:N.gridwidth,griddash:N.griddash,layer:N.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:N._deprecated.title,titlefont:N._deprecated.titlefont}},$=i.exports=j({domain:F({name:"ternary"}),bgcolor:{valType:"color",dflt:_.background},sum:{valType:"number",dflt:1,min:0},aaxis:X,baxis:X,caxis:X},"plot","from-root");$.uirevision={valType:"any",editType:"none"},$.aaxis.uirevision=$.baxis.uirevision=$.caxis.uirevision={valType:"any",editType:"none"}},25369:function(i,o,s){"use strict";var _=s(7901),F=s(44467),N=s(71828),j=s(49119),Z=s(96115),X=s(89426),$=s(38701),ee=s(26218),et=s(92128),er=s(81367),en=["aaxis","baxis","caxis"];function handleTernaryDefaults(i,o,s,N){var j,Z,X,$=s("bgcolor"),ee=s("sum");N.bgColor=_.combine($,N.paper_bgcolor);for(var et=0;et<en.length;et++)Z=i[j=en[et]]||{},(X=F.newContainer(o,j))._name=j,handleAxisDefaults(Z,X,N,o);var er=o.aaxis,ei=o.baxis,eo=o.caxis;er.min+ei.min+eo.min>=ee&&(er.min=0,ei.min=0,eo.min=0,i.aaxis&&delete i.aaxis.min,i.baxis&&delete i.baxis.min,i.caxis&&delete i.caxis.min)}function handleAxisDefaults(i,o,s,_){var F=er[o._name];function coerce(s,_){return N.coerce(i,o,F,s,_)}coerce("uirevision",_.uirevision),o.type="linear";var j=coerce("color"),en=j!==F.color.dflt?j:s.font.color,ei=o._name.charAt(0).toUpperCase(),eo="Component "+ei,es=coerce("title.text",eo);o._hovertitle=es===eo?es:ei,N.coerceFont(coerce,"title.font",{family:s.font.family,size:N.bigFont(s.font.size),color:en}),coerce("min"),ee(i,o,coerce,"linear"),X(i,o,coerce,"linear"),Z(i,o,coerce,"linear"),$(i,o,coerce,{outerTicks:!0}),coerce("showticklabels")&&(N.coerceFont(coerce,"tickfont",{family:s.font.family,size:s.font.size,color:en}),coerce("tickangle"),coerce("tickformat")),et(i,o,coerce,{dfltColor:j,bgColor:s.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:F}),coerce("hoverformat"),coerce("layer")}i.exports=function(i,o,s){j(i,o,s,{type:"ternary",attributes:er,handleDefaults:handleTernaryDefaults,font:o.font,paper_bgcolor:o.paper_bgcolor})}},64380:function(i,o,s){"use strict";var _=s(39898),F=s(84267),N=s(73972),j=s(71828),Z=j.strTranslate,X=j._,$=s(7901),ee=s(91424),et=s(21994),er=s(1426).extendFlat,en=s(74875),ei=s(89298),eo=s(28569),es=s(30211),el=s(64505),ec=el.freeMode,eu=el.rectMode,ef=s(92998),ed=s(47322).prepSelect,eh=s(47322).selectOnClick,ep=s(47322).clearOutline,eg=s(47322).clearSelectionsCache,em=s(85555);function Ternary(i,o){this.id=i.id,this.graphDiv=i.graphDiv,this.init(o),this.makeFramework(o),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}i.exports=Ternary;var ey=Ternary.prototype;ey.init=function(i){this.container=i._ternarylayer,this.defs=i._defs,this.layoutId=i._uid,this.traceHash={},this.layers={}},ey.plot=function(i,o){var s=o[this.id],_=o._size;this._hasClipOnAxisFalse=!1;for(var F=0;F<i.length;F++)if(!1===i[F][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(s),this.adjustLayout(s,_),en.generalUpdatePerTraceModule(this.graphDiv,this,i,s),this.layers.plotbg.select("path").call($.fill,s.bgcolor)},ey.makeFramework=function(i){var o=this.graphDiv,s=i[this.id],_=this.clipId="clip"+this.layoutId+this.id,F=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=j.ensureSingleById(i._clips,"clipPath",_,function(i){i.append("path").attr("d","M0,0Z")}),this.clipDefRelative=j.ensureSingleById(i._clips,"clipPath",F,function(i){i.append("path").attr("d","M0,0Z")}),this.plotContainer=j.ensureSingle(this.container,"g",this.id),this.updateLayers(s),ee.setClipUrl(this.layers.backplot,_,o),ee.setClipUrl(this.layers.grids,_,o)},ey.updateLayers=function(i){var o=this.layers,s=["draglayer","plotbg","backplot","grids"];"below traces"===i.aaxis.layer&&s.push("aaxis","aline"),"below traces"===i.baxis.layer&&s.push("baxis","bline"),"below traces"===i.caxis.layer&&s.push("caxis","cline"),s.push("frontplot"),"above traces"===i.aaxis.layer&&s.push("aaxis","aline"),"above traces"===i.baxis.layer&&s.push("baxis","bline"),"above traces"===i.caxis.layer&&s.push("caxis","cline");var F=this.plotContainer.selectAll("g.toplevel").data(s,String),N=["agrid","bgrid","cgrid"];F.enter().append("g").attr("class",function(i){return"toplevel "+i}).each(function(i){var s=_.select(this);o[i]=s,"frontplot"===i?s.append("g").classed("scatterlayer",!0):"backplot"===i?s.append("g").classed("maplayer",!0):"plotbg"===i?s.append("path").attr("d","M0,0Z"):"aline"===i||"bline"===i||"cline"===i?s.append("path"):"grids"===i&&N.forEach(function(i){o[i]=s.append("g").classed("grid "+i,!0)})}),F.order()};var ev=Math.sqrt(4/3);function strTickLayout(i){return i.ticks+String(i.ticklen)+String(i.showticklabels)}ey.adjustLayout=function(i,o){var s,_,F,N,j,X,en=this,ei=i.domain,eo=(ei.x[0]+ei.x[1])/2,es=(ei.y[0]+ei.y[1])/2,el=ei.x[1]-ei.x[0],ec=ei.y[1]-ei.y[0],eu=el*o.w,ef=ec*o.h,ed=i.sum,eh=i.aaxis.min,ep=i.baxis.min,eg=i.caxis.min;eu>ev*ef?F=(N=ef)*ev:N=(F=eu)/ev,j=el*F/eu,X=ec*N/ef,s=o.l+o.w*eo-F/2,_=o.t+o.h*(1-es)-N/2,en.x0=s,en.y0=_,en.w=F,en.h=N,en.sum=ed,en.xaxis={type:"linear",range:[eh+2*eg-ed,ed-eh-2*ep],domain:[eo-j/2,eo+j/2],_id:"x"},et(en.xaxis,en.graphDiv._fullLayout),en.xaxis.setScale(),en.xaxis.isPtWithinRange=function(i){return i.a>=en.aaxis.range[0]&&i.a<=en.aaxis.range[1]&&i.b>=en.baxis.range[1]&&i.b<=en.baxis.range[0]&&i.c>=en.caxis.range[1]&&i.c<=en.caxis.range[0]},en.yaxis={type:"linear",range:[eh,ed-ep-eg],domain:[es-X/2,es+X/2],_id:"y"},et(en.yaxis,en.graphDiv._fullLayout),en.yaxis.setScale(),en.yaxis.isPtWithinRange=function(){return!0};var em=en.yaxis.domain[0],ey=en.aaxis=er({},i.aaxis,{range:[eh,ed-ep-eg],side:"left",tickangle:(+i.aaxis.tickangle||0)-30,domain:[em,em+X*ev],anchor:"free",position:0,_id:"y",_length:F});et(ey,en.graphDiv._fullLayout),ey.setScale();var ex=en.baxis=er({},i.baxis,{range:[ed-eh-eg,ep],side:"bottom",domain:en.xaxis.domain,anchor:"free",position:0,_id:"x",_length:F});et(ex,en.graphDiv._fullLayout),ex.setScale();var e_=en.caxis=er({},i.caxis,{range:[ed-eh-ep,eg],side:"right",tickangle:(+i.caxis.tickangle||0)+30,domain:[em,em+X*ev],anchor:"free",position:0,_id:"y",_length:F});et(e_,en.graphDiv._fullLayout),e_.setScale();var ew="M"+s+","+(_+N)+"h"+F+"l-"+F/2+",-"+N+"Z";en.clipDef.select("path").attr("d",ew),en.layers.plotbg.select("path").attr("d",ew);var eT="M0,"+N+"h"+F+"l-"+F/2+",-"+N+"Z";en.clipDefRelative.select("path").attr("d",eT);var ek=Z(s,_);en.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ek),en.clipDefRelative.select("path").attr("transform",null);var eA=Z(s-ex._offset,_+N);en.layers.baxis.attr("transform",eA),en.layers.bgrid.attr("transform",eA);var eS=Z(s+F/2,_)+"rotate(30)"+Z(0,-ey._offset);en.layers.aaxis.attr("transform",eS),en.layers.agrid.attr("transform",eS);var eM=Z(s+F/2,_)+"rotate(-30)"+Z(0,-e_._offset);en.layers.caxis.attr("transform",eM),en.layers.cgrid.attr("transform",eM),en.drawAxes(!0),en.layers.aline.select("path").attr("d",ey.showline?"M"+s+","+(_+N)+"l"+F/2+",-"+N:"M0,0").call($.stroke,ey.linecolor||"#000").style("stroke-width",(ey.linewidth||0)+"px"),en.layers.bline.select("path").attr("d",ex.showline?"M"+s+","+(_+N)+"h"+F:"M0,0").call($.stroke,ex.linecolor||"#000").style("stroke-width",(ex.linewidth||0)+"px"),en.layers.cline.select("path").attr("d",e_.showline?"M"+(s+F/2)+","+_+"l"+F/2+","+N:"M0,0").call($.stroke,e_.linecolor||"#000").style("stroke-width",(e_.linewidth||0)+"px"),en.graphDiv._context.staticPlot||en.initInteractions(),ee.setClipUrl(en.layers.frontplot,en._hasClipOnAxisFalse?null:en.clipId,en.graphDiv)},ey.drawAxes=function(i){var o=this.graphDiv,s=this.id.substr(7)+"title",_=this.layers,F=this.aaxis,N=this.baxis,j=this.caxis;if(this.drawAx(F),this.drawAx(N),this.drawAx(j),i){var Z=Math.max(F.showticklabels?F.tickfont.size/2:0,(j.showticklabels?.75*j.tickfont.size:0)+("outside"===j.ticks?.87*j.ticklen:0)),$=(N.showticklabels?N.tickfont.size:0)+("outside"===N.ticks?N.ticklen:0)+3;_["a-title"]=ef.draw(o,"a"+s,{propContainer:F,propName:this.id+".aaxis.title",placeholder:X(o,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-F.title.font.size/3-Z,"text-anchor":"middle"}}),_["b-title"]=ef.draw(o,"b"+s,{propContainer:N,propName:this.id+".baxis.title",placeholder:X(o,"Click to enter Component B title"),attributes:{x:this.x0-$,y:this.y0+this.h+.83*N.title.font.size+$,"text-anchor":"middle"}}),_["c-title"]=ef.draw(o,"c"+s,{propContainer:j,propName:this.id+".caxis.title",placeholder:X(o,"Click to enter Component C title"),attributes:{x:this.x0+this.w+$,y:this.y0+this.h+.83*j.title.font.size+$,"text-anchor":"middle"}})}},ey.drawAx=function(i){var o=this.graphDiv,s=i._name,_=s.charAt(0),F=i._id,N=this.layers[s],Z=_+"tickLayout",X=strTickLayout(i);this[Z]!==X&&(N.selectAll("."+F+"tick").remove(),this[Z]=X),i.setScale();var $=ei.calcTicks(i),ee=ei.clipEnds(i,$),et=ei.makeTransTickFn(i),er=ei.getTickSigns(i)[2],en=j.deg2rad(30),eo=er*(i.linewidth||1)/2,es=er*i.ticklen,el=this.w,ec=this.h,eu="b"===_?"M0,"+eo+"l"+Math.sin(en)*es+","+Math.cos(en)*es:"M"+eo+",0l"+Math.cos(en)*es+","+-Math.sin(en)*es;ei.drawTicks(o,i,{vals:"inside"===i.ticks?ee:$,layer:N,path:eu,transFn:et,crisp:!1}),ei.drawGrid(o,i,{vals:ee,layer:this.layers[_+"grid"],path:{a:"M0,0l"+ec+",-"+el/2,b:"M0,0l-"+el/2+",-"+ec,c:"M0,0l-"+ec+","+el/2}[_],transFn:et,crisp:!1}),ei.drawLabels(o,i,{vals:$,layer:N,transFn:et,labelFns:ei.makeLabelFns(i,0,30)})};var ex=em.MINZOOM/2+.87,e_="m-0.87,.5h"+ex+"v3h-"+(ex+5.2)+"l"+(ex/2+2.6)+",-"+(.87*ex+4.5)+"l2.6,1.5l-"+ex/2+","+.87*ex+"Z",ew="m0.87,.5h-"+ex+"v3h"+(ex+5.2)+"l-"+(ex/2+2.6)+",-"+(.87*ex+4.5)+"l-2.6,1.5l"+ex/2+","+.87*ex+"Z",eT="m0,1l"+ex/2+","+.87*ex+"l2.6,-1.5l-"+(ex/2+2.6)+",-"+(.87*ex+4.5)+"l-"+(ex/2+2.6)+","+(.87*ex+4.5)+"l2.6,1.5l"+ex/2+",-"+.87*ex+"Z",ek=!0;function removeZoombox(i){_.select(i).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}ey.clearOutline=function(){eg(this.dragOptions),ep(this.dragOptions.gd)},ey.initInteractions=function(){var i,o,s,_,et,er,en,ei,el,ef,ep,eg,ey=this,ex=ey.layers.plotbg.select("path").node(),eA=ey.graphDiv,eS=eA._fullLayout._zoomlayer;function makeUpdate(i){var o={};return o[ey.id+".aaxis.min"]=i.a,o[ey.id+".baxis.min"]=i.b,o[ey.id+".caxis.min"]=i.c,o}function clickZoomPan(i,o){var s=eA._fullLayout.clickmode;removeZoombox(eA),2===i&&(eA.emit("plotly_doubleclick",null),N.call("_guiRelayout",eA,makeUpdate({a:0,b:0,c:0}))),s.indexOf("select")>-1&&1===i&&eh(o,eA,[ey.xaxis],[ey.yaxis],ey.id,ey.dragOptions),s.indexOf("event")>-1&&es.click(eA,o,ey.id)}function zoomPrep(i,o,N){var X=ex.getBoundingClientRect();s=o-X.left,_=N-X.top,eA._fullLayout._calcInverseTransform(eA);var ee=eA._fullLayout._invTransform,eo=j.apply3DTransform(ee)(s,_);s=eo[0],_=eo[1],en=et={a:ey.aaxis.range[0],b:ey.baxis.range[1],c:ey.caxis.range[1]},er=ey.aaxis.range[1]-et.a,ei=F(ey.graphDiv._fullLayout[ey.id].bgcolor).getLuminance(),el="M0,"+ey.h+"L"+ey.w/2+", 0L"+ey.w+","+ey.h+"Z",ef=!1,ep=eS.append("path").attr("class","zoombox").attr("transform",Z(ey.x0,ey.y0)).style({fill:ei>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",el),eg=eS.append("path").attr("class","zoombox-corners").attr("transform",Z(ey.x0,ey.y0)).style({fill:$.background,stroke:$.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ey.clearOutline(eA)}function getBFrac(i,o){return 1-(i+(ey.h-o)/Math.sqrt(3))/ey.w}function getCFrac(i,o){return(i-(ey.h-o)/Math.sqrt(3))/ey.w}function zoomMove(F,N){var j=s+F*i,Z=_+N*o,X=Math.max(0,Math.min(1,1-_/ey.h,1-Z/ey.h)),$=Math.max(0,Math.min(1,getBFrac(s,_),getBFrac(j,Z))),ee=Math.max(0,Math.min(1,getCFrac(s,_),getCFrac(j,Z))),eo=(X/2+ee)*ey.w,es=(1-X/2-$)*ey.w,ec=(eo+es)/2,eu=es-eo,ed=(1-X)*ey.h,eh=ed-eu/ev;eu<em.MINZOOM?(en=et,ep.attr("d",el),eg.attr("d","M0,0Z")):(en={a:et.a+X*er,b:et.b+$*er,c:et.c+ee*er},ep.attr("d",el+"M"+eo+","+ed+"H"+es+"L"+ec+","+eh+"L"+eo+","+ed+"Z"),eg.attr("d","M"+s+","+_+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+eo+","+ed+e_+"M"+es+","+ed+ew+"M"+ec+","+eh+eT)),ef||(ep.transition().style("fill",ei>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),eg.transition().style("opacity",1).duration(200),ef=!0),eA.emit("plotly_relayouting",makeUpdate(en))}function zoomDone(){removeZoombox(eA),en!==et&&(N.call("_guiRelayout",eA,makeUpdate(en)),ek&&eA.data&&eA._context.showTips&&(j.notifier(X(eA,"Double-click to zoom back out"),"long"),ek=!1))}function panPrep(){en=et={a:ey.aaxis.range[0],b:ey.baxis.range[1],c:ey.caxis.range[1]}}function plotDrag(i,o){var s=i/ey.xaxis._m,_=o/ey.yaxis._m,F=[(en={a:et.a-_,b:et.b+(s+_)/2,c:et.c-(s-_)/2}).a,en.b,en.c].sort(j.sorterAsc),N={a:F.indexOf(en.a),b:F.indexOf(en.b),c:F.indexOf(en.c)};F[0]<0&&(F[1]+F[0]/2<0?(F[2]+=F[0]+F[1],F[0]=F[1]=0):(F[2]+=F[0]/2,F[1]+=F[0]/2,F[0]=0),en={a:F[N.a],b:F[N.b],c:F[N.c]},o=(et.a-en.a)*ey.yaxis._m,i=(et.c-en.c-et.b+en.b)*ey.xaxis._m);var X=Z(ey.x0+i,ey.y0+o);ey.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",X);var $=Z(-i,-o);ey.clipDefRelative.select("path").attr("transform",$),ey.aaxis.range=[en.a,ey.sum-en.b-en.c],ey.baxis.range=[ey.sum-en.a-en.c,en.b],ey.caxis.range=[ey.sum-en.a-en.b,en.c],ey.drawAxes(!1),ey._hasClipOnAxisFalse&&ey.plotContainer.select(".scatterlayer").selectAll(".trace").call(ee.hideOutsideRangePoints,ey),eA.emit("plotly_relayouting",makeUpdate(en))}function dragDone(){N.call("_guiRelayout",eA,makeUpdate(en))}this.dragOptions={element:ex,gd:eA,plotinfo:{id:ey.id,domain:eA._fullLayout[ey.id].domain,xaxis:ey.xaxis,yaxis:ey.yaxis},subplot:ey.id,prepFn:function(s,_,F){ey.dragOptions.xaxes=[ey.xaxis],ey.dragOptions.yaxes=[ey.yaxis],i=eA._fullLayout._invScaleX,o=eA._fullLayout._invScaleY;var N=ey.dragOptions.dragmode=eA._fullLayout.dragmode;ec(N)?ey.dragOptions.minDrag=1:ey.dragOptions.minDrag=void 0,"zoom"===N?(ey.dragOptions.moveFn=zoomMove,ey.dragOptions.clickFn=clickZoomPan,ey.dragOptions.doneFn=zoomDone,zoomPrep(s,_,F)):"pan"===N?(ey.dragOptions.moveFn=plotDrag,ey.dragOptions.clickFn=clickZoomPan,ey.dragOptions.doneFn=dragDone,panPrep(),ey.clearOutline(eA)):(eu(N)||ec(N))&&ed(s,_,F,ey.dragOptions,N)}},ex.onmousemove=function(i){es.hover(eA,i,ey.id),eA._fullLayout._lasthover=ex,eA._fullLayout._hoversubplot=ey.id},ex.onmouseout=function(i){eA._dragging||eo.unhover(eA,i)},eo.init(this.dragOptions)}},73972:function(i,o,s){"use strict";var _=s(47769),F=s(64213),N=s(75138),j=s(41965),Z=s(24401).addStyleRule,X=s(1426),$=s(9012),ee=s(10820),et=X.extendFlat,er=X.extendDeepAll;function registerTraceModule(i){var s=i.name,F=i.categories,N=i.meta;if(o.modules[s]){_.log("Type "+s+" already registered");return}o.subplotsRegistry[i.basePlotModule.name]||registerSubplot(i.basePlotModule);for(var j={},X=0;X<F.length;X++)j[F[X]]=!0,o.allCategories[F[X]]=!0;for(var $ in o.modules[s]={_module:i,categories:j},N&&Object.keys(N).length&&(o.modules[s].meta=N),o.allTypes.push(s),o.componentsRegistry)mergeComponentAttrsToTrace($,s);i.layoutAttributes&&et(o.traceLayoutAttributes,i.layoutAttributes);var ee=i.basePlotModule,er=ee.name;if("mapbox"===er){var en=ee.constants.styleRules;for(var ei in en)Z(".js-plotly-plot .plotly .mapboxgl-"+ei,en[ei])}("geo"===er||"mapbox"===er)&&void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}})}function registerSubplot(i){var s=i.name;if(o.subplotsRegistry[s]){_.log("Plot type "+s+" already registered.");return}for(var F in findArrayRegexps(i),o.subplotsRegistry[s]=i,o.componentsRegistry)mergeComponentAttrsToSubplot(F,i.name)}function registerComponentModule(i){if("string"!=typeof i.name)throw Error("Component module *name* must be a string.");var s=i.name;for(var _ in o.componentsRegistry[s]=i,i.layoutAttributes&&(i.layoutAttributes._isLinkedToArray&&N(o.layoutArrayContainers,s),findArrayRegexps(i)),o.modules)mergeComponentAttrsToTrace(s,_);for(var F in o.subplotsRegistry)mergeComponentAttrsToSubplot(s,F);for(var j in o.transformsRegistry)mergeComponentAttrsToTransform(s,j);i.schema&&i.schema.layout&&er(ee,i.schema.layout)}function registerTransformModule(i){if("string"!=typeof i.name)throw Error("Transform module *name* must be a string.");var s="Transform module "+i.name,F="function"==typeof i.transform,N="function"==typeof i.calcTransform;if(!F&&!N)throw Error(s+" is missing a *transform* or *calcTransform* method.");for(var Z in F&&N&&_.log([s+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),j(i.attributes)||_.log(s+" registered without an *attributes* object."),"function"!=typeof i.supplyDefaults&&_.log(s+" registered without a *supplyDefaults* method."),o.transformsRegistry[i.name]=i,o.componentsRegistry)mergeComponentAttrsToTransform(Z,i.name)}function registerLocale(i){var s=i.name,_=s.split("-")[0],F=i.dictionary,N=i.format,j=F&&Object.keys(F).length,Z=N&&Object.keys(N).length,X=o.localeRegistry,$=X[s];if($||(X[s]=$={}),_!==s){var ee=X[_];ee||(X[_]=ee={}),j&&ee.dictionary===$.dictionary&&(ee.dictionary=F),Z&&ee.format===$.format&&(ee.format=N)}j&&($.dictionary=F),Z&&($.format=N)}function findArrayRegexps(i){if(i.layoutAttributes){var s=i.layoutAttributes._arrayAttrRegexps;if(s)for(var _=0;_<s.length;_++)N(o.layoutArrayRegexes,s[_])}}function mergeComponentAttrsToTrace(i,s){var _=o.componentsRegistry[i].schema;if(_&&_.traces){var F=_.traces[s];F&&er(o.modules[s]._module.attributes,F)}}function mergeComponentAttrsToTransform(i,s){var _=o.componentsRegistry[i].schema;if(_&&_.transforms){var F=_.transforms[s];F&&er(o.transformsRegistry[s].attributes,F)}}function mergeComponentAttrsToSubplot(i,s){var _=o.componentsRegistry[i].schema;if(_&&_.subplots){var F=o.subplotsRegistry[s],N=F.layoutAttributes,j="subplot"===F.attr?F.name:F.attr;Array.isArray(j)&&(j=j[0]);var Z=_.subplots[j];N&&Z&&er(N,Z)}}function getTraceType(i){return"object"==typeof i&&(i=i.type),i}o.modules={},o.allCategories={},o.allTypes=[],o.subplotsRegistry={},o.transformsRegistry={},o.componentsRegistry={},o.layoutArrayContainers=[],o.layoutArrayRegexes=[],o.traceLayoutAttributes={},o.localeRegistry={},o.apiMethodRegistry={},o.collectableSubplotTypes=null,o.register=function(i){if(o.collectableSubplotTypes=null,i)i&&!Array.isArray(i)&&(i=[i]);else throw Error("No argument passed to Plotly.register.");for(var s=0;s<i.length;s++){var _=i[s];if(!_)throw Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":registerTraceModule(_);break;case"transform":registerTransformModule(_);break;case"component":registerComponentModule(_);break;case"locale":registerLocale(_);break;case"apiMethod":var F=_.name;o.apiMethodRegistry[F]=_.fn;break;default:throw Error("Invalid module was attempted to be registered!")}}},o.getModule=function(i){var s=o.modules[getTraceType(i)];return!!s&&s._module},o.traceIs=function(i,s){if("various"===(i=getTraceType(i)))return!1;var F=o.modules[i];return F||(i&&_.log("Unrecognized trace type "+i+"."),F=o.modules[$.type.dflt]),!!F.categories[s]},o.getTransformIndices=function(i,o){for(var s=[],_=i.transforms||[],F=0;F<_.length;F++)_[F].type===o&&s.push(F);return s},o.hasTransform=function(i,o){for(var s=i.transforms||[],_=0;_<s.length;_++)if(s[_].type===o)return!0;return!1},o.getComponentMethod=function(i,s){var _=o.componentsRegistry[i];return _&&_[s]||F},o.call=function(){var i=arguments[0],s=[].slice.call(arguments,1);return o.apiMethodRegistry[i].apply(null,s)}},61914:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=F.extendFlat,j=F.extendDeep;function cloneLayoutOverride(i){var o;switch(i){case"themes__thumb":o={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":o={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:o={}}return o}function keyIsAxis(i){return["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1}i.exports=function(i,o){var s,F=i.data,Z=i.layout,X=j([],F),$=j({},Z,cloneLayoutOverride(o.tileClass)),ee=i._context||{};if(o.width&&($.width=o.width),o.height&&($.height=o.height),"thumbnail"===o.tileClass||"themes__thumb"===o.tileClass){$.annotations=[];var et=Object.keys($);for(s=0;s<et.length;s++)keyIsAxis(et[s])&&($[et[s]].title={text:""});for(s=0;s<X.length;s++){var er=X[s];er.showscale=!1,er.marker&&(er.marker.showscale=!1),_.traceIs(er,"pie-like")&&(er.textposition="none")}}if(Array.isArray(o.annotations))for(s=0;s<o.annotations.length;s++)$.annotations.push(o.annotations[s]);var en=Object.keys($).filter(function(i){return i.match(/^scene\d*$/)});if(en.length){var ei={};for("thumbnail"===o.tileClass&&(ei={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),s=0;s<en.length;s++){var eo=$[en[s]];eo.xaxis||(eo.xaxis={}),eo.yaxis||(eo.yaxis={}),eo.zaxis||(eo.zaxis={}),N(eo.xaxis,ei),N(eo.yaxis,ei),N(eo.zaxis,ei),eo._scene=null}}var es=document.createElement("div");o.tileClass&&(es.className=o.tileClass);var el={gd:es,td:es,layout:$,data:X,config:{staticPlot:void 0===o.staticPlot||o.staticPlot,plotGlPixelRatio:void 0===o.plotGlPixelRatio?2:o.plotGlPixelRatio,displaylogo:o.displaylogo||!1,showLink:o.showLink||!1,showTips:o.showTips||!1,mapboxAccessToken:ee.mapboxAccessToken}};return"transparent"!==o.setBackground&&(el.config.setBackground=o.setBackground||"opaque"),el.gd.defaultLayout=cloneLayoutOverride(o.tileClass),el}},7239:function(i,o,s){"use strict";var _=s(71828),F=s(403),N=s(22435),j=s(25095);function downloadImage(i,o){var s;return _.isPlainObject(i)||(s=_.getGraphDiv(i)),(o=o||{}).format=o.format||"png",o.width=o.width||null,o.height=o.height||null,o.imageDataOnly=!0,new Promise(function(Z,X){s&&s._snapshotInProgress&&X(Error("Snapshotting already in progress.")),_.isIE()&&"svg"!==o.format&&X(Error(j.MSG_IE_BAD_FORMAT)),s&&(s._snapshotInProgress=!0);var $=F(i,o),ee=o.filename||i.fn||"newplot";ee+="."+o.format.replace("-","."),$.then(function(i){return s&&(s._snapshotInProgress=!1),N(i,ee,o.format)}).then(function(i){Z(i)}).catch(function(i){s&&(s._snapshotInProgress=!1),X(i)})})}i.exports=downloadImage},22435:function(i,o,s){"use strict";var _=s(71828),F=s(25095);function fileSaver(i,o,s){var N=document.createElement("a"),j="download"in N;return new Promise(function(Z,X){if(_.isIE())return $=F.createBlob(i,"svg"),window.navigator.msSaveBlob($,o),$=null,Z(o);if(j)return $=F.createBlob(i,s),ee=F.createObjectURL($),N.href=ee,N.download=o,document.body.appendChild(N),N.click(),document.body.removeChild(N),F.revokeObjectURL(ee),$=null,Z(o);if(_.isSafari()){var $,ee,et="svg"===s?",":";base64,";return F.octetStream(et+encodeURIComponent(i)),Z(o)}X(Error("download error"))})}i.exports=fileSaver},25095:function(i,o,s){"use strict";var _=s(73972);o.getDelay=function(i){return i._has&&(i._has("gl3d")||i._has("gl2d")||i._has("mapbox"))?500:0},o.getRedrawFunc=function(i){return function(){_.getComponentMethod("colorbar","draw")(i)}},o.encodeSVG=function(i){return"data:image/svg+xml,"+encodeURIComponent(i)},o.encodeJSON=function(i){return"data:application/json,"+encodeURIComponent(i)};var F=window.URL||window.webkitURL;function fixBinary(i){for(var o=i.length,s=new ArrayBuffer(o),_=new Uint8Array(s),F=0;F<o;F++)_[F]=i.charCodeAt(F);return s}o.createObjectURL=function(i){return F.createObjectURL(i)},o.revokeObjectURL=function(i){return F.revokeObjectURL(i)},o.createBlob=function(i,o){if("svg"===o)return new window.Blob([i],{type:"image/svg+xml;charset=utf-8"});if("full-json"===o)return new window.Blob([i],{type:"application/json;charset=utf-8"});var s=fixBinary(window.atob(i));return new window.Blob([s],{type:"image/"+o})},o.octetStream=function(i){document.location.href="data:application/octet-stream"+i},o.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,o.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(i,o,s){"use strict";var _=s(25095),F={getDelay:_.getDelay,getRedrawFunc:_.getRedrawFunc,clone:s(61914),toSVG:s(5900),svgToImg:s(70942),toImage:s(56395),downloadImage:s(7239)};i.exports=F},70942:function(i,o,s){"use strict";var _=s(71828),F=s(15398).EventEmitter,N=s(25095);function svgToImg(i){var o=i.emitter||new F,s=new Promise(function(F,j){var Z,X,$=window.Image,ee=i.svg,et=i.format||"png";if(_.isIE()&&"svg"!==et){var er=Error(N.MSG_IE_BAD_FORMAT);return(j(er),i.promise)?s:o.emit("error",er)}var en=i.canvas,ei=i.scale||1,eo=i.width||300,es=i.height||150,el=ei*eo,ec=ei*es,eu=en.getContext("2d",{willReadFrequently:!0}),ef=new $;"svg"===et||_.isSafari()?X=N.encodeSVG(ee):(Z=N.createBlob(ee,"svg"),X=N.createObjectURL(Z)),en.width=el,en.height=ec,ef.onload=function(){var s;switch(Z=null,N.revokeObjectURL(X),"svg"!==et&&eu.drawImage(ef,0,0,el,ec),et){case"jpeg":s=en.toDataURL("image/jpeg");break;case"png":s=en.toDataURL("image/png");break;case"webp":s=en.toDataURL("image/webp");break;case"svg":s=X;break;default:var _="Image format is not jpeg, png, svg or webp.";if(j(Error(_)),!i.promise)return o.emit("error",_)}F(s),i.promise||o.emit("success",s)},ef.onerror=function(s){if(Z=null,N.revokeObjectURL(X),j(s),!i.promise)return o.emit("error",s)},ef.src=X});return i.promise?s:o}i.exports=svgToImg},56395:function(i,o,s){"use strict";var _=s(15398).EventEmitter,F=s(73972),N=s(71828),j=s(25095),Z=s(61914),X=s(5900),$=s(70942);function toImage(i,o){var s=new _,ee=Z(i,{format:"png"}),et=ee.gd;function wait(){setTimeout(function(){var i=X(et),_=document.createElement("canvas");_.id=N.randstr(),(s=$({format:o.format,width:et._fullLayout.width,height:et._fullLayout.height,canvas:_,emitter:s,svg:i})).clean=function(){et&&document.body.removeChild(et)}},j.getDelay(et._fullLayout))}et.style.position="absolute",et.style.left="-5000px",document.body.appendChild(et);var er=j.getRedrawFunc(et);return F.call("_doPlot",et,ee.data,ee.layout,ee.config).then(er).then(wait).catch(function(i){s.emit("error",i)}),s}i.exports=toImage},5900:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(91424),j=s(7901),Z=s(77922),X=/"/g,$="TOBESTRIPPED",ee=RegExp('("'+$+")|("+$+'")',"g");function htmlEntityDecode(i){var o=_.select("body").append("div").style({display:"none"}).html(""),s=i.replace(/(&[^;]*;)/gi,function(i){return"&lt;"===i?"&#60;":"&rt;"===i?"&#62;":-1!==i.indexOf("<")||-1!==i.indexOf(">")?"":o.html(i).text()});return o.remove(),s}function xmlEntityEncode(i){return i.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}i.exports=function(i,o,s){var et,er=i._fullLayout,en=er._paper,ei=er._toppaper,eo=er.width,es=er.height;en.insert("rect",":first-child").call(N.setRect,0,0,eo,es).call(j.fill,er.paper_bgcolor);var el=er._basePlotModules||[];for(et=0;et<el.length;et++){var ec=el[et];ec.toSVG&&ec.toSVG(i)}if(ei){var eu=ei.node().childNodes,ef=Array.prototype.slice.call(eu);for(et=0;et<ef.length;et++){var ed=ef[et];ed.childNodes.length&&en.node().appendChild(ed)}}er._draggers&&er._draggers.remove(),en.node().style.background="",en.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var i=_.select(this);if("hidden"===this.style.visibility||"none"===this.style.display){i.remove();return}i.style({visibility:null,display:null});var o=this.style.fontFamily;o&&-1!==o.indexOf('"')&&i.style("font-family",o.replace(X,$))}),en.selectAll(".gradient_filled,.pattern_filled").each(function(){var i=_.select(this),o=this.style.fill;o&&-1!==o.indexOf("url(")&&i.style("fill",o.replace(X,$));var s=this.style.stroke;s&&-1!==s.indexOf("url(")&&i.style("stroke",s.replace(X,$))}),("pdf"===o||"eps"===o)&&en.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),en.node().setAttributeNS(Z.xmlns,"xmlns",Z.svg),en.node().setAttributeNS(Z.xmlns,"xmlns:xlink",Z.xlink),"svg"===o&&s&&(en.attr("width",s*eo),en.attr("height",s*es),en.attr("viewBox","0 0 "+eo+" "+es));var eh=new window.XMLSerializer().serializeToString(en.node());return eh=(eh=xmlEntityEncode(eh=htmlEntityDecode(eh))).replace(ee,"'"),F.isIE()&&(eh=(eh=(eh=eh.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),eh}},75341:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o){for(var s=0;s<i.length;s++)i[s].i=s;_.mergeArray(o.text,i,"tx"),_.mergeArray(o.hovertext,i,"htx");var F=o.marker;if(F){_.mergeArray(F.opacity,i,"mo",!0),_.mergeArray(F.color,i,"mc");var N=F.line;N&&(_.mergeArray(N.color,i,"mlc"),_.mergeArrayCastPositive(N.width,i,"mlw"))}}},1486:function(i,o,s){"use strict";var _=s(82196),F=s(12663).axisHoverFormat,N=s(5386).fF,j=s(5386).si,Z=s(50693),X=s(41940),$=s(97313),ee=s(79952).u,et=s(1426).extendFlat,er=X({editType:"calc",arrayOk:!0,colorEditType:"style"}),en=et({},_.marker.line.width,{dflt:0}),ei=et({width:en,editType:"calc"},Z("marker.line")),eo=et({line:ei,editType:"calc"},Z("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:ee});i.exports={x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:F("x"),yhoverformat:F("y"),text:_.text,texttemplate:j({editType:"plot"},{keys:$.eventDataKeys}),hovertext:_.hovertext,hovertemplate:N({},{keys:$.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:et({},er,{}),insidetextfont:et({},er,{}),outsidetextfont:et({},er,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:et({},_.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:eo,offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,selected:{marker:{opacity:_.selected.marker.opacity,color:_.selected.marker.color,editType:"style"},textfont:_.selected.textfont,editType:"style"},unselected:{marker:{opacity:_.unselected.marker.opacity,color:_.unselected.marker.color,editType:"style"},textfont:_.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(i,o,s){"use strict";var _=s(89298),F=s(42973),N=s(52075).hasColorscale,j=s(78803),Z=s(75341),X=s(66279);i.exports=function(i,o){var s,$,ee,et,er,en,ei=_.getFromId(i,o.xaxis||"x"),eo=_.getFromId(i,o.yaxis||"y"),es={msUTC:!!(o.base||0===o.base)};"h"===o.orientation?(s=ei.makeCalcdata(o,"x",es),ee=eo.makeCalcdata(o,"y"),et=F(o,eo,"y",ee),er=!!o.yperiodalignment,en="y"):(s=eo.makeCalcdata(o,"y",es),ee=ei.makeCalcdata(o,"x"),et=F(o,ei,"x",ee),er=!!o.xperiodalignment,en="x");for(var el=Math.min(($=et.vals).length,s.length),ec=Array(el),eu=0;eu<el;eu++)ec[eu]={p:$[eu],s:s[eu]},er&&(ec[eu].orig_p=ee[eu],ec[eu][en+"End"]=et.ends[eu],ec[eu][en+"Start"]=et.starts[eu]),o.ids&&(ec[eu].id=String(o.ids[eu]));return N(o,"marker")&&j(i,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),N(o,"marker.line")&&j(i,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),Z(ec,o),X(ec,o),ec}},97313:function(i){"use strict";i.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(i,o,s){"use strict";var _=s(92770),F=s(71828).isArrayOrTypedArray,N=s(50606).BADNUM,j=s(73972),Z=s(89298),X=s(99082).getAxisGroup,$=s(61546);function crossTraceCalc(i,o){for(var s=o.xaxis,_=o.yaxis,F=i._fullLayout,N=i._fullData,Z=i.calcdata,X=[],$=[],ee=0;ee<N.length;ee++){var et=N[ee];if(!0===et.visible&&j.traceIs(et,"bar")&&et.xaxis===s._id&&et.yaxis===_._id&&("h"===et.orientation?X.push(Z[ee]):$.push(Z[ee]),et._computePh))for(var er=i.calcdata[ee],en=0;en<er.length;en++)"function"==typeof er[en].ph0&&(er[en].ph0=er[en].ph0()),"function"==typeof er[en].ph1&&(er[en].ph1=er[en].ph1())}var ei={xCat:"category"===s.type||"multicategory"===s.type,yCat:"category"===_.type||"multicategory"===_.type,mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};setGroupPositions(i,s,_,$,ei),setGroupPositions(i,_,s,X,ei)}function setGroupPositions(i,o,s,_,F){var N,j,Z,X;if(_.length){switch(initBase(s,_),F.mode){case"overlay":setGroupPositionsInOverlayMode(o,s,_,F);break;case"group":for(Z=0,N=[],j=[];Z<_.length;Z++)void 0===(X=_[Z])[0].trace.offset?j.push(X):N.push(X);j.length&&setGroupPositionsInGroupMode(i,o,s,j,F),N.length&&setGroupPositionsInOverlayMode(o,s,N,F);break;case"stack":case"relative":for(Z=0,N=[],j=[];Z<_.length;Z++)void 0===(X=_[Z])[0].trace.base?j.push(X):N.push(X);j.length&&setGroupPositionsInStackOrRelativeMode(i,o,s,j,F),N.length&&setGroupPositionsInOverlayMode(o,s,N,F)}collectExtents(_,o)}}function initBase(i,o){var s,N;for(s=0;s<o.length;s++){var j,Z=o[s],X=Z[0].trace,$="funnel"===X.type?X._base:X.base,ee="h"===X.orientation?X.xcalendar:X.ycalendar,et="category"===i.type||"multicategory"===i.type?function(){return null}:i.d2c;if(F($)){for(N=0;N<Math.min($.length,Z.length);N++)_(j=et($[N],0,ee))?(Z[N].b=+j,Z[N].hasB=1):Z[N].b=0;for(;N<Z.length;N++)Z[N].b=0}else{var er=_(j=et($,0,ee));for(N=0,j=er?j:0;N<Z.length;N++)Z[N].b=j,er&&(Z[N].hasB=1)}}}function setGroupPositionsInOverlayMode(i,o,s,_){for(var F=0;F<s.length;F++){var N=new $([s[F]],{posAxis:i,sepNegVal:!1,overlapNoMerge:!_.norm});setOffsetAndWidth(i,N,_),_.norm?(sieveBars(N),normalizeBars(o,N,_)):setBaseAndTop(o,N)}}function setGroupPositionsInGroupMode(i,o,s,_,F){var N=new $(_,{posAxis:o,sepNegVal:!1,overlapNoMerge:!F.norm});setOffsetAndWidthInGroupMode(i,o,N,F),unhideBarsWithinTrace(N,o),F.norm?(sieveBars(N),normalizeBars(s,N,F)):setBaseAndTop(s,N)}function setGroupPositionsInStackOrRelativeMode(i,o,s,_,F){var j=new $(_,{posAxis:o,sepNegVal:"relative"===F.mode,overlapNoMerge:!(F.norm||"stack"===F.mode||"relative"===F.mode)});setOffsetAndWidth(o,j,F),stackBars(s,j,F);for(var Z=0;Z<_.length;Z++)for(var X=_[Z],ee=0;ee<X.length;ee++){var et=X[ee];et.s!==N&&et.b+et.s===j.get(et.p,et.s)&&(et._outmost=!0)}F.norm&&normalizeBars(s,j,F)}function setOffsetAndWidth(i,o,s){for(var _=o.minDiff,F=o.traces,N=_*(1-s.gap),j=N*(1-(s.groupgap||0)),Z=-j/2,X=0;X<F.length;X++){var $=F[X][0].t;$.barwidth=j,$.poffset=Z,$.bargroupwidth=N,$.bardelta=_}o.binWidth=F[0][0].t.barwidth/100,applyAttributes(o),setBarCenterAndWidth(i,o),updatePositionAxis(i,o)}function setOffsetAndWidthInGroupMode(i,o,s,_){for(var F=i._fullLayout,N=s.positions,j=s.distinctPositions,Z=s.minDiff,$=s.traces,ee=$.length,et=N.length!==j.length,er=Z*(1-_.gap),en=X(F,o._id)+$[0][0].trace.orientation,ei=F._alignmentOpts[en]||{},eo=0;eo<ee;eo++){var es,el,ec=$[eo],eu=ec[0].trace,ef=Object.keys((ei[eu.alignmentgroup]||{}).offsetGroups||{}).length,ed=(es=ef?er/ef:et?er/ee:er)*(1-(_.groupgap||0));el=ef?((2*eu._offsetIndex+1-ef)*es-ed)/2:et?((2*eo+1-ee)*es-ed)/2:-ed/2;var eh=ec[0].t;eh.barwidth=ed,eh.poffset=el,eh.bargroupwidth=er,eh.bardelta=Z}s.binWidth=$[0][0].t.barwidth/100,applyAttributes(s),setBarCenterAndWidth(o,s),updatePositionAxis(o,s,et)}function applyAttributes(i){var o=i.traces;for(s=0;s<o.length;s++){var s,N,j,Z=o[s],X=Z[0],$=X.trace,ee=X.t,et=$._offset||$.offset,er=ee.poffset;if(F(et)){for(N=0,j=Array.prototype.slice.call(et,0,Z.length);N<j.length;N++)_(j[N])||(j[N]=er);for(N=j.length;N<Z.length;N++)j.push(er);ee.poffset=j}else void 0!==et&&(ee.poffset=et);var en=$._width||$.width,ei=ee.barwidth;if(F(en)){var eo=Array.prototype.slice.call(en,0,Z.length);for(N=0;N<eo.length;N++)_(eo[N])||(eo[N]=ei);for(N=eo.length;N<Z.length;N++)eo.push(ei);if(ee.barwidth=eo,void 0===et){for(N=0,j=[];N<Z.length;N++)j.push(er+(ei-eo[N])/2);ee.poffset=j}}else void 0!==en&&(ee.barwidth=en,void 0===et&&(ee.poffset=er+(ei-en)/2))}}function setBarCenterAndWidth(i,o){for(var s=o.traces,_=getAxisLetter(i),F=0;F<s.length;F++)for(var N=s[F],j=N[0].t,Z=j.poffset,X=Array.isArray(Z),$=j.barwidth,ee=Array.isArray($),et=0;et<N.length;et++){var er=N[et],en=er.w=ee?$[et]:$;void 0===er.p&&(er.p=er[_],er["orig_"+_]=er[_]);var ei=(X?Z[et]:Z)+en/2;er[_]=er.p+ei}}function updatePositionAxis(i,o,s){var _=o.traces,F=o.minDiff/2;Z.minDtick(i,o.minDiff,o.distinctPositions[0],s);for(var N=0;N<_.length;N++){var j,X,$,ee,et=_[N],er=et[0],en=er.trace,ei=[];for(ee=0;ee<et.length;ee++)X=(j=et[ee]).p-F,$=j.p+F,ei.push(X,$);if(en.width||en.offset){var eo=er.t,es=eo.poffset,el=eo.barwidth,ec=Array.isArray(es),eu=Array.isArray(el);for(ee=0;ee<et.length;ee++){j=et[ee];var ef=ec?es[ee]:es,ed=eu?el[ee]:el;$=(X=j.p+ef)+ed,ei.push(X,$)}}en._extremes[i._id]=Z.findExtremes(i,ei,{padded:!1})}}function setBaseAndTop(i,o){for(var s=o.traces,_=getAxisLetter(i),F=0;F<s.length;F++){for(var N=s[F],j=N[0].trace,X="scatter"===j.type,$="v"===j.orientation,ee=[],et=!1,er=0;er<N.length;er++){var en=N[er],ei=X?0:en.b,eo=X?$?en.y:en.x:ei+en.s;en[_]=eo,ee.push(eo),en.hasB&&ee.push(ei),en.hasB&&en.b||(et=!0)}j._extremes[i._id]=Z.findExtremes(i,ee,{tozero:et,padded:!0})}}function stackBars(i,o,s){var _=getAxisLetter(i),F=o.traces;for(et=0;et<F.length;et++)if("funnel"===($=(X=F[et])[0].trace).type)for(er=0;er<X.length;er++)(en=X[er]).s!==N&&o.put(en.p,-.5*en.s);for(et=0;et<F.length;et++){ee="funnel"===($=(X=F[et])[0].trace).type;var j=[];for(er=0;er<X.length;er++)if((en=X[er]).s!==N){ei=ee?en.s:en.s+en.b;var X,$,ee,et,er,en,ei,eo=o.put(en.p,ei),es=eo+ei;en.b=eo,en[_]=es,!s.norm&&(j.push(es),en.hasB&&j.push(eo))}s.norm||($._extremes[i._id]=Z.findExtremes(i,j,{tozero:!0,padded:!0}))}}function sieveBars(i){for(var o=i.traces,s=0;s<o.length;s++)for(var _=o[s],F=0;F<_.length;F++){var j=_[F];j.s!==N&&i.put(j.p,j.b+j.s)}}function unhideBarsWithinTrace(i,o){for(var s=i.traces,_=0;_<s.length;_++){var F=s[_];if(void 0===F[0].trace.base)for(var j=new $([F],{posAxis:o,sepNegVal:!0,overlapNoMerge:!0}),Z=0;Z<F.length;Z++){var X=F[Z];if(X.p!==N){var ee=j.put(X.p,X.b+X.s);ee&&(X.b=ee)}}}}function normalizeBars(i,o,s){var F=o.traces,j=getAxisLetter(i),X="fraction"===s.norm?1:100,$=X/1e9,ee=i.l2c(i.c2l(0)),et="stack"===s.mode?X:ee;function needsPadding(o){return _(i.c2l(o))&&(o<ee-$||o>et+$||!_(ee))}for(var er=0;er<F.length;er++){for(var en=F[er],ei=en[0].trace,eo=[],es=!1,el=!1,ec=0;ec<en.length;ec++){var eu=en[ec];if(eu.s!==N){var ef=Math.abs(X/o.get(eu.p,eu.s));eu.b*=ef,eu.s*=ef;var ed=eu.b,eh=ed+eu.s;eu[j]=eh,eo.push(eh),el=el||needsPadding(eh),eu.hasB&&(eo.push(ed),el=el||needsPadding(ed)),eu.hasB&&eu.b||(es=!0)}}ei._extremes[i._id]=Z.findExtremes(i,eo,{tozero:es,padded:el})}}function collectExtents(i,o){var s,F,N,j=getAxisLetter(o),Z={},X=1/0,$=-1/0;for(s=0;s<i.length;s++)for(F=0,N=i[s];F<N.length;F++){var ee=N[F].p;_(ee)&&(X=Math.min(X,ee),$=Math.max($,ee))}var et=1e4/($-X),er=Z.round=function(i){return String(Math.round(et*(i-X)))};for(s=0;s<i.length;s++){(N=i[s])[0].t.extents=Z;var en=N[0].t.poffset,ei=Array.isArray(en);for(F=0;F<N.length;F++){var eo=N[F],es=eo[j]-eo.w/2;if(_(es)){var el=eo[j]+eo.w/2,ec=er(eo.p);Z[ec]?Z[ec]=[Math.min(es,Z[ec][0]),Math.max(el,Z[ec][1])]:Z[ec]=[es,el]}eo.p0=eo.p+(ei?en[F]:en),eo.p1=eo.p0+eo.w,eo.s0=eo.b,eo.s1=eo.s0+eo.s}}}function getAxisLetter(i){return i._id.charAt(0)}i.exports={crossTraceCalc:crossTraceCalc,setGroupPositions:setGroupPositions}},90769:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(73972),j=s(67513),Z=s(73927),X=s(98340),$=s(26125),ee=s(1486),et=_.coerceFont;function supplyDefaults(i,o,s,$){function coerce(s,F){return _.coerce(i,o,ee,s,F)}if(!j(i,o,$,coerce)){o.visible=!1;return}Z(i,o,$,coerce),coerce("xhoverformat"),coerce("yhoverformat"),coerce("orientation",o.x&&!o.y?"h":"v"),coerce("base"),coerce("offset"),coerce("width"),coerce("text"),coerce("hovertext"),coerce("hovertemplate");var et=coerce("textposition");handleText(i,o,$,coerce,et,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),X(i,o,coerce,s,$);var er=(o.marker.line||{}).color,en=N.getComponentMethod("errorbars","supplyDefaults");en(i,o,er||F.defaultLine,{axis:"y"}),en(i,o,er||F.defaultLine,{axis:"x",inherit:"y"}),_.coerceSelectionMarkerOpacity(o,coerce)}function crossTraceDefaults(i,o){var s;function coerce(i){return _.coerce(s._input,s,ee,i)}if("group"===o.barmode)for(var F=0;F<i.length;F++)"bar"===(s=i[F]).type&&$(s._input,s,o,coerce)}function handleText(i,o,s,F,N,j){var Z=!1!==(j=j||{}).moduleHasSelected,X=!1!==j.moduleHasUnselected,$=!1!==j.moduleHasConstrain,ee=!1!==j.moduleHasCliponaxis,er=!1!==j.moduleHasTextangle,en=!1!==j.moduleHasInsideanchor,ei=!!j.hasPathbar,eo=Array.isArray(N)||"auto"===N,es=eo||"inside"===N,el=eo||"outside"===N;if(es||el){var ec=et(F,"textfont",s.font),eu=_.extendFlat({},ec),ef=!(i.textfont&&i.textfont.color);if(ef&&delete eu.color,et(F,"insidetextfont",eu),ei){var ed=_.extendFlat({},ec);ef&&delete ed.color,et(F,"pathbar.textfont",ed)}el&&et(F,"outsidetextfont",ec),Z&&F("selected.textfont.color"),X&&F("unselected.textfont.color"),$&&F("constraintext"),ee&&F("cliponaxis"),er&&F("textangle"),F("texttemplate")}es&&en&&F("insidetextanchor")}i.exports={supplyDefaults:supplyDefaults,crossTraceDefaults:crossTraceDefaults,handleText:handleText}},58065:function(i){"use strict";i.exports=function(i,o,s){return i.x="xVal"in o?o.xVal:o.x,i.y="yVal"in o?o.yVal:o.y,o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),"h"===s.orientation?(i.label=i.y,i.value=i.x):(i.label=i.x,i.value=i.y),i}},69383:function(i,o,s){"use strict";var _=s(92770),F=s(84267),N=s(71828).isArrayOrTypedArray;o.coerceString=function(i,o,s){if("string"==typeof o){if(o||!i.noBlank)return o}else if(("number"==typeof o||!0===o)&&!i.strict)return String(o);return void 0!==s?s:i.dflt},o.coerceNumber=function(i,o,s){if(_(o)){o=+o;var F=i.min,N=i.max;if(!(void 0!==F&&o<F||void 0!==N&&o>N))return o}return void 0!==s?s:i.dflt},o.coerceColor=function(i,o,s){return F(o).isValid()?o:void 0!==s?s:i.dflt},o.coerceEnumerated=function(i,o,s){return(i.coerceNumber&&(o=+o),-1!==i.values.indexOf(o))?o:void 0!==s?s:i.dflt},o.getValue=function(i,o){var s;return Array.isArray(i)?o<i.length&&(s=i[o]):s=i,s},o.getLineWidth=function(i,o){return 0<o.mlw?o.mlw:N(i.marker.line.width)?0:i.marker.line.width}},95423:function(i,o,s){"use strict";var _=s(30211),F=s(73972),N=s(7901),j=s(71828).fillText,Z=s(69383).getLineWidth,X=s(89298).hoverLabelText,$=s(50606).BADNUM;function hoverPoints(i,o,s,_,N){var j=hoverOnBars(i,o,s,_,N);if(j){var Z=j.cd,X=Z[0].trace,$=Z[j.index];return j.color=getTraceColor(X,$),F.getComponentMethod("errorbars","hoverInfo")($,X,j),[j]}}function hoverOnBars(i,o,s,F,N){var Z,ee,et,er,en,ei,eo,es=i.cd,el=es[0].trace,ec=es[0].t,eu="closest"===F,ef="waterfall"===el.type,ed=i.maxHoverDistance,eh=i.maxSpikeDistance;"h"===el.orientation?(Z=s,ee=o,et="y",er="x",en=sizeFn,ei=positionFn):(Z=o,ee=s,et="x",er="y",ei=sizeFn,en=positionFn);var ep=el[et+"period"],eg=eu||ep;function thisBarMinPos(i){return thisBarExtPos(i,-1)}function thisBarMaxPos(i){return thisBarExtPos(i,1)}function thisBarExtPos(i,o){var s=i.w;return i[et]+o*s/2}function periodLength(i){return i[et+"End"]-i[et+"Start"]}var em=eu?thisBarMinPos:ep?function(i){return i.p-periodLength(i)/2}:function(i){return Math.min(thisBarMinPos(i),i.p-ec.bardelta/2)},ey=eu?thisBarMaxPos:ep?function(i){return i.p+periodLength(i)/2}:function(i){return Math.max(thisBarMaxPos(i),i.p+ec.bardelta/2)};function inbox(i,o,s){return N.finiteRange&&(s=0),_.inbox(i-Z,o-Z,s+Math.min(1,Math.abs(o-i)/eo)-1)}function positionFn(i){return inbox(em(i),ey(i),ed)}function thisBarPositionFn(i){return inbox(thisBarMinPos(i),thisBarMaxPos(i),eh)}function getSize(i){var o=i[er];if(ef){var s=Math.abs(i.rawS)||0;ee>0?o+=s:ee<0&&(o-=s)}return o}function sizeFn(i){var o=ee,s=i.b,F=getSize(i);return _.inbox(s-o,F-o,ed+(F-o)/(F-s)-1)}function thisBarSizeFn(i){var o=ee,s=i.b,F=getSize(i);return _.inbox(s-o,F-o,eh+(F-o)/(F-s)-1)}var ev=i[et+"a"],ex=i[er+"a"];function dxy(i){return(en(i)+ei(i))/2}eo=Math.abs(ev.r2c(ev.range[1])-ev.r2c(ev.range[0]));var e_=_.getDistanceFunction(F,en,ei,dxy);if(_.getClosest(es,e_,i),!1!==i.index&&es[i.index].p!==$){eg||(em=function(i){return Math.min(thisBarMinPos(i),i.p-ec.bargroupwidth/2)},ey=function(i){return Math.max(thisBarMaxPos(i),i.p+ec.bargroupwidth/2)});var ew=es[i.index],eT=el.base?ew.b+ew.s:ew.s;i[er+"0"]=i[er+"1"]=ex.c2p(ew[er],!0),i[er+"LabelVal"]=eT;var ek=ec.extents[ec.extents.round(ew.p)];i[et+"0"]=ev.c2p(eu?em(ew):ek[0],!0),i[et+"1"]=ev.c2p(eu?ey(ew):ek[1],!0);var eA=void 0!==ew.orig_p;return i[et+"LabelVal"]=eA?ew.orig_p:ew.p,i.labelLabel=X(ev,i[et+"LabelVal"],el[et+"hoverformat"]),i.valueLabel=X(ex,i[er+"LabelVal"],el[er+"hoverformat"]),i.baseLabel=X(ex,ew.b,el[er+"hoverformat"]),i.spikeDistance=(thisBarSizeFn(ew)+thisBarPositionFn(ew))/2,i[et+"Spike"]=ev.c2p(ew.p,!0),j(ew,el,i),i.hovertemplate=el.hovertemplate,i}}function getTraceColor(i,o){var s=o.mcc||i.marker.color,_=o.mlcc||i.marker.line.color,F=Z(i,o);return N.opacity(s)?s:N.opacity(_)&&F?_:void 0}i.exports={hoverPoints:hoverPoints,hoverOnBars:hoverOnBars,getTraceColor:getTraceColor}},60822:function(i,o,s){"use strict";i.exports={attributes:s(1486),layoutAttributes:s(43641),supplyDefaults:s(90769).supplyDefaults,crossTraceDefaults:s(90769).crossTraceDefaults,supplyLayoutDefaults:s(13957),calc:s(92290),crossTraceCalc:s(11661).crossTraceCalc,colorbar:s(4898),arraysToCalcdata:s(75341),plot:s(17295).plot,style:s(16688).style,styleOnSelect:s(16688).styleOnSelect,hoverPoints:s(95423).hoverPoints,eventData:s(58065),selectPoints:s(81974),moduleType:"trace",name:"bar",basePlotModule:s(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(i){"use strict";i.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(i,o,s){"use strict";var _=s(73972),F=s(89298),N=s(71828),j=s(43641);i.exports=function(i,o,s){function coerce(s,_){return N.coerce(i,o,j,s,_)}for(var Z=!1,X=!1,$=!1,ee={},et=coerce("barmode"),er=0;er<s.length;er++){var en=s[er];if(_.traceIs(en,"bar")&&en.visible){if(Z=!0,"group"===et){var ei=en.xaxis+en.yaxis;ee[ei]&&($=!0),ee[ei]=!0}en.visible&&"histogram"===en.type&&"category"!==F.getFromId({_fullLayout:o},en["v"===en.orientation?"xaxis":"yaxis"]).type&&(X=!0)}}if(!Z){delete o.barmode;return}"overlay"!==et&&coerce("barnorm"),coerce("bargap",X&&!$?0:.2),coerce("bargroupgap")}},17295:function(i,o,s){"use strict";var _=s(39898),F=s(92770),N=s(71828),j=s(63893),Z=s(7901),X=s(91424),$=s(73972),ee=s(89298).tickText,et=s(72597),er=et.recordMinTextSize,en=et.clearMinTextSize,ei=s(16688),eo=s(69383),es=s(97313),el=s(1486),ec=el.text,eu=el.textposition,ef=s(23469).appendArrayPointValue,ed=es.TEXTPAD;function keyFunc(i){return i.id}function getKeyFunc(i){if(i.ids)return keyFunc}function getXY(i,o,s,_){var F=[],N=[],j=_?o:s,Z=_?s:o;return F[0]=j.c2p(i.s0,!0),N[0]=Z.c2p(i.p0,!0),F[1]=j.c2p(i.s1,!0),N[1]=Z.c2p(i.p1,!0),_?[F,N]:[N,F]}function transition(i,o,s,_){var F;return!o.uniformtext.mode&&hasTransition(s)?(_&&(F=_()),i.transition().duration(s.duration).ease(s.easing).each("end",function(){F&&F()}).each("interrupt",function(){F&&F()})):i}function hasTransition(i){return i&&i.duration>0}function plot(i,o,s,j,ee,et){var er=o.xaxis,ei=o.yaxis,es=i._fullLayout,el=i._context.staticPlot;ee||(ee={mode:es.barmode,norm:es.barmode,gap:es.bargap,groupgap:es.bargroupgap},en("bar",es));var ec=N.makeTraceGroups(j,s,"trace bars").each(function(s){var j=_.select(this),$=s[0].trace,en="waterfall"===$.type,ec="funnel"===$.type,eu="bar"===$.type||ec,ef=0;en&&$.connector.visible&&"between"===$.connector.mode&&(ef=$.connector.line.width/2);var ed="h"===$.orientation,eh=hasTransition(ee),ep=N.ensureSingle(j,"g","points"),eg=getKeyFunc($),em=ep.selectAll("g.point").data(N.identity,eg);em.enter().append("g").classed("point",!0),em.exit().remove(),em.each(function(j,en){var ec,ep,eg=_.select(this),em=getXY(j,er,ei,ed),ey=em[0][0],ev=em[0][1],ex=em[1][0],e_=em[1][1],ew=(ed?ev-ey:e_-ex)==0;if(ew&&eu&&eo.getLineWidth($,j)&&(ew=!1),ew||(ew=!F(ey)||!F(ev)||!F(ex)||!F(e_)),j.isBlank=ew,ew&&(ed?ev=ey:e_=ex),ef&&!ew&&(ed?(ey-=(ey<ev?1:-1)*ef,ev+=(ey<ev?1:-1)*ef):(ex-=(ex<e_?1:-1)*ef,e_+=(ex<e_?1:-1)*ef)),"waterfall"===$.type){if(!ew){var eT=$[j.dir].marker;ec=eT.line.width,ep=eT.color}}else ec=eo.getLineWidth($,j),ep=j.mc||$.marker.color;function roundWithLine(i){var o=_.round(ec/2%1,2);return 0===ee.gap&&0===ee.groupgap?_.round(Math.round(i)-o,2):i}function expandToVisible(i,o,s){return s&&i===o?i:Math.abs(i-o)>=2?roundWithLine(i):i>o?Math.ceil(i):Math.floor(i)}if(!i._context.staticPlot){var ek=1>Z.opacity(ep)||ec>.01?roundWithLine:expandToVisible;ey=ek(ey,ev,ed),ev=ek(ev,ey,ed),ex=ek(ex,e_,!ed),e_=ek(e_,ex,!ed)}var eA=transition(N.ensureSingle(eg,"path"),es,ee,et);if(eA.style("vector-effect",el?"none":"non-scaling-stroke").attr("d",isNaN((ev-ey)*(e_-ex))||ew&&i._context.staticPlot?"M0,0Z":"M"+ey+","+ex+"V"+e_+"H"+ev+"V"+ex+"Z").call(X.setClipUrl,o.layerClipId,i),!es.uniformtext.mode&&eh){var eS=X.makePointStyleFns($);X.singlePointStyle(j,eA,$,eS,i)}appendBarText(i,o,eg,s,en,ey,ev,ex,e_,ee,et),o.layerClipId&&X.hideOutsideRangePoint(j,eg.select("text"),er,ei,$.xcalendar,$.ycalendar)});var ey=!1===$.cliponaxis;X.setClipUrl(j,ey?null:o.layerClipId,i)});$.getComponentMethod("errorbars","plot")(i,ec,o,ee)}function appendBarText(i,o,s,_,F,Z,$,ee,et,en,eo){var es,el,ec,eu,ef,eh,ep,eg=o.xaxis,em=o.yaxis,ey=i._fullLayout;function appendTextNode(o,s,_){return N.ensureSingle(o,"text").text(s).attr({class:"bartext bartext-"+es,"text-anchor":"middle","data-notex":1}).call(X.font,_).call(j.convertToTspans,i)}var ev=_[0].trace,ex="h"===ev.orientation,e_=getText(ey,_,F,eg,em);es=getTextPosition(ev,F);var ew="stack"===en.mode||"relative"===en.mode,eT=_[F],ek=!ew||eT._outmost;if(!e_||"none"===es||(eT.isBlank||Z===$||ee===et)&&("auto"===es||"inside"===es)){s.select("text").remove();return}var eA=ey.font,eS=ei.getBarColor(_[F],ev),eM=ei.getInsideTextFont(ev,F,eA,eS),eC=ei.getOutsideTextFont(ev,F,eA),eE=s.datum();ex?"log"===eg.type&&eE.s0<=0&&(Z=eg.range[0]<eg.range[1]?0:eg._length):"log"===em.type&&eE.s0<=0&&(ee=em.range[0]<em.range[1]?em._length:0);var eL=Math.abs($-Z)-2*ed,eP=Math.abs(et-ee)-2*ed;if("outside"!==es||ek||eT.hasB||(es="inside"),"auto"===es){if(ek){es="inside",el=appendTextNode(s,e_,eh=N.ensureUniformFontSize(i,eM)),eu=(ec=X.bBox(el.node())).width,ef=ec.height;var eI=eu>0&&ef>0,eO=eu<=eL&&ef<=eP,eD=eu<=eP&&ef<=eL,eR=ex?eL>=eu*(eP/ef):eP>=ef*(eL/eu);eI&&(eO||eD||eR)?es="inside":(es="outside",el.remove(),el=null)}else es="inside"}if(!el){var eB=(el=appendTextNode(s,e_,eh=N.ensureUniformFontSize(i,"outside"===es?eC:eM))).attr("transform");if(el.attr("transform",""),eu=(ec=X.bBox(el.node())).width,ef=ec.height,el.attr("transform",eB),eu<=0||ef<=0){el.remove();return}}var eF=ev.textangle;(ep="outside"===es?toMoveOutsideBar(Z,$,ee,et,ec,{isHorizontal:ex,constrained:"both"===ev.constraintext||"outside"===ev.constraintext,angle:eF}):toMoveInsideBar(Z,$,ee,et,ec,{isHorizontal:ex,constrained:"both"===ev.constraintext||"inside"===ev.constraintext,angle:eF,anchor:ev.insidetextanchor})).fontSize=eh.size,er("histogram"===ev.type?"bar":ev.type,ep,ey),eT.transform=ep;var ez=transition(el,ey,en,eo);N.setTransormAndDisplay(ez,ep)}function getRotateFromAngle(i){return"auto"===i?0:i}function getRotatedTextSize(i,o){var s=Math.PI/180*o,_=Math.abs(Math.sin(s)),F=Math.abs(Math.cos(s));return{x:i.width*F+i.height*_,y:i.width*_+i.height*F}}function toMoveInsideBar(i,o,s,_,F,N){var j=!!N.isHorizontal,Z=!!N.constrained,X=N.angle||0,$=N.anchor||"end",ee="start"===$,et=((N.leftToRight||0)+1)/2,er=1-et,en=F.width,ei=F.height,eo=Math.abs(o-i),es=Math.abs(_-s),el=eo>2*ed&&es>2*ed?ed:0;eo-=2*el,es-=2*el;var ec=getRotateFromAngle(X);"auto"===X&&!(en<=eo&&ei<=es)&&(en>eo||ei>es)&&(!(en>es||ei>eo)||en<ei!=eo<es)&&(ec+=90);var eu=getRotatedTextSize(F,ec),ef=1;Z&&(ef=Math.min(1,eo/eu.x,es/eu.y));var eh=F.left*er+F.right*et,ep=(F.top+F.bottom)/2,eg=(i+ed)*er+(o-ed)*et,em=(s+_)/2,ey=0,ev=0;if(ee||"end"===$){var ex=(j?eu.x:eu.y)/2,e_=j?i<o?1:-1:s<_?1:-1;j?ee?(eg=i+e_*el,ey=-e_*ex):(eg=o-e_*el,ey=e_*ex):ee?(em=s+e_*el,ev=-e_*ex):(em=_-e_*el,ev=e_*ex)}return{textX:eh,textY:ep,targetX:eg,targetY:em,anchorX:ey,anchorY:ev,scale:ef,rotate:ec}}function toMoveOutsideBar(i,o,s,_,F,N){var j,Z=!!N.isHorizontal,X=!!N.constrained,$=N.angle||0,ee=F.width,et=F.height,er=Math.abs(o-i),en=Math.abs(_-s);j=Z?en>2*ed?ed:0:er>2*ed?ed:0;var ei=1;X&&(ei=Z?Math.min(1,en/et):Math.min(1,er/ee));var eo=getRotateFromAngle($),es=getRotatedTextSize(F,eo),el=(Z?es.x:es.y)/2,ec=(F.left+F.right)/2,eu=(F.top+F.bottom)/2,ef=(i+o)/2,eh=(s+_)/2,ep=0,eg=0,em=Z?o<i?1:-1:s<_?1:-1;return Z?(ef=o-em*j,ep=em*el):(eh=_+em*j,eg=-em*el),{textX:ec,textY:eu,targetX:ef,targetY:eh,anchorX:ep,anchorY:eg,scale:ei,rotate:eo}}function getText(i,o,s,_,F){var N,j=o[0].trace;return N=j.texttemplate?calcTexttemplate(i,o,s,_,F):j.textinfo?calcTextinfo(o,s,_,F):eo.getValue(j.text,s),eo.coerceString(ec,N)}function getTextPosition(i,o){var s=eo.getValue(i.textposition,o);return eo.coerceEnumerated(eu,s)}function calcTexttemplate(i,o,s,_,F){var j,Z,X,$,et=o[0].trace,er=N.castOption(et,s,"texttemplate");if(!er)return"";var en="histogram"===et.type,ei="waterfall"===et.type,eo="funnel"===et.type,es="h"===et.orientation;function formatLabel(i){return ee(Z,Z.c2l(i),!0).text}function formatNumber(i){return ee($,$.c2l(i),!0).text}es?(j="y",Z=F,X="x",$=_):(j="x",Z=_,X="y",$=F);var el=o[s],ec={};ec.label=el.p,ec.labelLabel=ec[j+"Label"]=formatLabel(el.p);var eu=N.castOption(et,el.i,"text");(0===eu||eu)&&(ec.text=eu),ec.value=el.s,ec.valueLabel=ec[X+"Label"]=formatNumber(el.s);var ed={};ef(ed,et,el.i),(en||void 0===ed.x)&&(ed.x=es?ec.value:ec.label),(en||void 0===ed.y)&&(ed.y=es?ec.label:ec.value),(en||void 0===ed.xLabel)&&(ed.xLabel=es?ec.valueLabel:ec.labelLabel),(en||void 0===ed.yLabel)&&(ed.yLabel=es?ec.labelLabel:ec.valueLabel),ei&&(ec.delta=+el.rawS||el.s,ec.deltaLabel=formatNumber(ec.delta),ec.final=el.v,ec.finalLabel=formatNumber(ec.final),ec.initial=ec.final-ec.delta,ec.initialLabel=formatNumber(ec.initial)),eo&&(ec.value=el.s,ec.valueLabel=formatNumber(ec.value),ec.percentInitial=el.begR,ec.percentInitialLabel=N.formatPercent(el.begR),ec.percentPrevious=el.difR,ec.percentPreviousLabel=N.formatPercent(el.difR),ec.percentTotal=el.sumR,ec.percenTotalLabel=N.formatPercent(el.sumR));var eh=N.castOption(et,el.i,"customdata");return eh&&(ec.customdata=eh),N.texttemplateString(er,ec,i._d3locale,ed,ec,et._meta||{})}function calcTextinfo(i,o,s,_){var F,j=i[0].trace,Z="h"===j.orientation,X="waterfall"===j.type,$="funnel"===j.type;function formatLabel(i){return ee(Z?_:s,i,!0).text}function formatNumber(i){return ee(Z?s:_,+i,!0).text}var et=j.textinfo,er=i[o],en=et.split("+"),ei=[],hasFlag=function(i){return -1!==en.indexOf(i)};if(hasFlag("label")&&ei.push(formatLabel(i[o].p)),hasFlag("text")&&(0===(F=N.castOption(j,er.i,"text"))||F)&&ei.push(F),X){var eo=+er.rawS||er.s,es=er.v,el=es-eo;hasFlag("initial")&&ei.push(formatNumber(el)),hasFlag("delta")&&ei.push(formatNumber(eo)),hasFlag("final")&&ei.push(formatNumber(es))}if($){hasFlag("value")&&ei.push(formatNumber(er.s));var ec=0;hasFlag("percent initial")&&ec++,hasFlag("percent previous")&&ec++,hasFlag("percent total")&&ec++;var eu=ec>1;hasFlag("percent initial")&&(F=N.formatPercent(er.begR),eu&&(F+=" of initial"),ei.push(F)),hasFlag("percent previous")&&(F=N.formatPercent(er.difR),eu&&(F+=" of previous"),ei.push(F)),hasFlag("percent total")&&(F=N.formatPercent(er.sumR),eu&&(F+=" of total"),ei.push(F))}return ei.join("<br>")}i.exports={plot:plot,toMoveInsideBar:toMoveInsideBar}},81974:function(i){"use strict";function getCentroid(i,o,s,_,F){var N=o.c2p(_?i.s0:i.p0,!0),j=o.c2p(_?i.s1:i.p1,!0),Z=s.c2p(_?i.p0:i.s0,!0),X=s.c2p(_?i.p1:i.s1,!0);return F?[(N+j)/2,(Z+X)/2]:_?[j,(Z+X)/2]:[(N+j)/2,X]}i.exports=function(i,o){var s,_=i.cd,F=i.xaxis,N=i.yaxis,j=_[0].trace,Z="funnel"===j.type,X="h"===j.orientation,$=[];if(!1===o)for(s=0;s<_.length;s++)_[s].selected=0;else for(s=0;s<_.length;s++){var ee=_[s],et="ct"in ee?ee.ct:getCentroid(ee,F,N,X,Z);o.contains(et,!1,s,i)?($.push({pointNumber:s,x:F.c2d(ee.x),y:N.c2d(ee.y)}),ee.selected=1):ee.selected=0}return $}},61546:function(i,o,s){"use strict";i.exports=Sieve;var _=s(71828).distinctVals;function Sieve(i,o){this.traces=i,this.sepNegVal=o.sepNegVal,this.overlapNoMerge=o.overlapNoMerge;for(var s=1/0,F=o.posAxis._id.charAt(0),N=[],j=0;j<i.length;j++){for(var Z=i[j],X=0;X<Z.length;X++){var $=Z[X],ee=$.p;void 0===ee&&(ee=$[F]),void 0!==ee&&N.push(ee)}Z[0]&&Z[0].width1&&(s=Math.min(Z[0].width1,s))}this.positions=N;var et=_(N);this.distinctPositions=et.vals,1===et.vals.length&&s!==1/0?this.minDiff=s:this.minDiff=Math.min(et.minDiff,s);var er=(o.posAxis||{}).type;("category"===er||"multicategory"===er)&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}Sieve.prototype.put=function(i,o){var s=this.getLabel(i,o),_=this.bins[s]||0;return this.bins[s]=_+o,_},Sieve.prototype.get=function(i,o){var s=this.getLabel(i,o);return this.bins[s]||0},Sieve.prototype.getLabel=function(i,o){return(o<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?i:Math.round(i/this.binWidth))}},16688:function(i,o,s){"use strict";var _=s(39898),F=s(7901),N=s(91424),j=s(71828),Z=s(73972),X=s(72597).resizeText,$=s(1486),ee=$.textfont,et=$.insidetextfont,er=$.outsidetextfont,en=s(69383);function style(i){var o=_.select(i).selectAll("g.barlayer").selectAll("g.trace");X(i,o,"bar");var s=o.size(),F=i._fullLayout;o.style("opacity",function(i){return i[0].trace.opacity}).each(function(i){("stack"===F.barmode&&s>1||0===F.bargap&&0===F.bargroupgap&&!i[0].trace.marker.line.width)&&_.select(this).attr("shape-rendering","crispEdges")}),o.selectAll("g.points").each(function(o){stylePoints(_.select(this),o[0].trace,i)}),Z.getComponentMethod("errorbars","style")(o)}function stylePoints(i,o,s){N.pointStyle(i.selectAll("path"),o,s),styleTextPoints(i,o,s)}function styleTextPoints(i,o,s){i.selectAll("text").each(function(i){var F=_.select(this),Z=j.ensureUniformFontSize(s,determineFont(F,i,o,s));N.font(F,Z)})}function styleOnSelect(i,o,s){var _=o[0].trace;_.selectedpoints?stylePointsInSelectionMode(s,_,i):(stylePoints(s,_,i),Z.getComponentMethod("errorbars","style")(s))}function stylePointsInSelectionMode(i,o,s){N.selectedPointStyle(i.selectAll("path"),o),styleTextInSelectionMode(i.selectAll("text"),o,s)}function styleTextInSelectionMode(i,o,s){i.each(function(i){var F,Z=_.select(this);if(i.selected){F=j.ensureUniformFontSize(s,determineFont(Z,i,o,s));var X=o.selected.textfont&&o.selected.textfont.color;X&&(F.color=X),N.font(Z,F)}else N.selectedTextStyle(Z,o)})}function determineFont(i,o,s,_){var F=_._fullLayout.font,N=s.textfont;if(i.classed("bartext-inside")){var j=getBarColor(o,s);N=getInsideTextFont(s,o.i,F,j)}else i.classed("bartext-outside")&&(N=getOutsideTextFont(s,o.i,F));return N}function getTextFont(i,o,s){return getFontValue(ee,i.textfont,o,s)}function getInsideTextFont(i,o,s,_){var N=getTextFont(i,o,s);return(void 0===i._input.textfont||void 0===i._input.textfont.color||Array.isArray(i.textfont.color)&&void 0===i.textfont.color[o])&&(N={color:F.contrast(_),family:N.family,size:N.size}),getFontValue(et,i.insidetextfont,o,N)}function getOutsideTextFont(i,o,s){var _=getTextFont(i,o,s);return getFontValue(er,i.outsidetextfont,o,_)}function getFontValue(i,o,s,_){o=o||{};var F=en.getValue(o.family,s),N=en.getValue(o.size,s),j=en.getValue(o.color,s);return{family:en.coerceString(i.family,F,_.family),size:en.coerceNumber(i.size,N,_.size),color:en.coerceColor(i.color,j,_.color)}}function getBarColor(i,o){return"waterfall"===o.type?o[i.dir].marker.color:i.mcc||i.mc||o.marker.color}i.exports={style:style,styleTextPoints:styleTextPoints,styleOnSelect:styleOnSelect,getInsideTextFont:getInsideTextFont,getOutsideTextFont:getOutsideTextFont,getBarColor:getBarColor,resizeText:X}},98340:function(i,o,s){"use strict";var _=s(7901),F=s(52075).hasColorscale,N=s(1586),j=s(71828).coercePattern;i.exports=function(i,o,s,Z,X){var $=s("marker.color",Z),ee=F(i,"marker");ee&&N(i,o,X,s,{prefix:"marker.",cLetter:"c"}),s("marker.line.color",_.defaultLine),F(i,"marker.line")&&N(i,o,X,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width"),s("marker.opacity"),j(s,"marker.pattern",$,ee),s("selected.marker.color"),s("unselected.marker.color")}},72597:function(i,o,s){"use strict";var _=s(39898),F=s(71828);function resizeText(i,o,s){var N=i._fullLayout,j=N["_"+s+"Text_minsize"];if(j){var Z,X="hide"===N.uniformtext.mode;switch(s){case"funnelarea":case"pie":case"sunburst":Z="g.slice";break;case"treemap":case"icicle":Z="g.slice, g.pathbar";break;default:Z="g.points > g.point"}o.selectAll(Z).each(function(i){var o=i.transform;if(o){o.scale=X&&o.hide?0:j/o.fontSize;var s=_.select(this).select("text");F.setTransormAndDisplay(s,o)}})}}function recordMinTextSize(i,o,s){if(s.uniformtext.mode){var _=getMinKey(i),F=s.uniformtext.minsize,N=o.scale*o.fontSize;o.hide=N<F,s[_]=s[_]||1/0,o.hide||(s[_]=Math.min(s[_],Math.max(N,F)))}}function clearMinTextSize(i,o){o[getMinKey(i)]=void 0}function getMinKey(i){return"_"+i+"Text_minsize"}i.exports={recordMinTextSize:recordMinTextSize,clearMinTextSize:clearMinTextSize,resizeText:resizeText}},55023:function(i,o,s){"use strict";var _=s(5386).fF,F=s(1426).extendFlat,N=s(81245),j=s(1486);i.exports={r:N.r,theta:N.theta,r0:N.r0,dr:N.dr,theta0:N.theta0,dtheta:N.dtheta,thetaunit:N.thetaunit,base:F({},j.base,{}),offset:F({},j.offset,{}),width:F({},j.width,{}),text:F({},j.text,{}),hovertext:F({},j.hovertext,{}),marker:j.marker,hoverinfo:N.hoverinfo,hovertemplate:_(),selected:j.selected,unselected:j.unselected}},74692:function(i,o,s){"use strict";var _=s(52075).hasColorscale,F=s(78803),N=s(75341),j=s(11661).setGroupPositions,Z=s(66279),X=s(73972).traceIs,$=s(71828).extendFlat;function calc(i,o){for(var s=i._fullLayout,j=o.subplot,X=s[j].radialaxis,$=s[j].angularaxis,ee=X.makeCalcdata(o,"r"),et=$.makeCalcdata(o,"theta"),er=o._length,en=Array(er),ei=0;ei<er;ei++)en[ei]={p:et[ei],s:ee[ei]};function d2c(i){var s=o[i];void 0!==s&&(o["_"+i]=Array.isArray(s)?$.makeCalcdata(o,i):$.d2c(s,o.thetaunit))}return"linear"===$.type&&(d2c("width"),d2c("offset")),_(o,"marker")&&F(i,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),_(o,"marker.line")&&F(i,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),N(en,o),Z(en,o),en}function crossTraceCalc(i,o,s){for(var _=i.calcdata,F=[],N=0;N<_.length;N++){var Z=_[N],ee=Z[0].trace;!0===ee.visible&&X(ee,"bar")&&ee.subplot===s&&F.push(Z)}var et=$({},o.radialaxis,{_id:"x"});j(i,o.angularaxis,et,F,{mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap})}i.exports={calc:calc,crossTraceCalc:crossTraceCalc}},6135:function(i,o,s){"use strict";var _=s(71828),F=s(22184).handleRThetaDefaults,N=s(98340),j=s(55023);i.exports=function(i,o,s,Z){function coerce(s,F){return _.coerce(i,o,j,s,F)}if(!F(i,o,Z,coerce)){o.visible=!1;return}coerce("thetaunit"),coerce("base"),coerce("offset"),coerce("width"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),N(i,o,coerce,s,Z),_.coerceSelectionMarkerOpacity(o,coerce)}},27379:function(i,o,s){"use strict";var _=s(30211),F=s(71828),N=s(95423).getTraceColor,j=F.fillText,Z=s(59150).makeHoverPointText,X=s(10869).isPtInsidePolygon;i.exports=function(i,o,s){var $=i.cd,ee=$[0].trace,et=i.subplot,er=et.radialAxis,en=et.angularAxis,ei=et.vangles,eo=ei?X:F.isPtInsideSector,es=i.maxHoverDistance,el=en._period||2*Math.PI,ec=Math.abs(er.g2p(Math.sqrt(o*o+s*s))),eu=Math.atan2(s,o);if(er.range[0]>er.range[1]&&(eu+=Math.PI),_.getClosest($,function(i){return eo(ec,eu,[i.rp0,i.rp1],[i.thetag0,i.thetag1],ei)?es+Math.min(1,Math.abs(i.thetag1-i.thetag0)/el)-1+(i.rp1-ec)/(i.rp1-i.rp0)-1:1/0},i),!1!==i.index){var ef=$[i.index];i.x0=i.x1=ef.ct[0],i.y0=i.y1=ef.ct[1];var ed=F.extendFlat({},ef,{r:ef.s,theta:ef.p});return j(ef,ee,i),Z(ed,ee,et,i),i.hovertemplate=ee.hovertemplate,i.color=N(ee,ef),i.xLabelVal=i.yLabelVal=void 0,ef.s<0&&(i.idealAlign="left"),[i]}}},23381:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"barpolar",basePlotModule:s(23580),categories:["polar","bar","showLegend"],attributes:s(55023),layoutAttributes:s(40151),supplyDefaults:s(6135),supplyLayoutDefaults:s(19860),calc:s(74692).calc,crossTraceCalc:s(74692).crossTraceCalc,plot:s(60173),colorbar:s(4898),formatLabels:s(98608),style:s(16688).style,styleOnSelect:s(16688).styleOnSelect,hoverPoints:s(27379),selectPoints:s(81974),meta:{}}},40151:function(i){"use strict";i.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(i,o,s){"use strict";var _=s(71828),F=s(40151);i.exports=function(i,o,s){var N,j={};function coerce(s,j){return _.coerce(i[N]||{},o[N],F,s,j)}for(var Z=0;Z<s.length;Z++){var X=s[Z];"barpolar"!==X.type||!0!==X.visible||j[N=X.subplot]||(coerce("barmode"),coerce("bargap"),j[N]=1)}}},60173:function(i,o,s){"use strict";var _=s(39898),F=s(92770),N=s(71828),j=s(91424),Z=s(10869);function makePathFn(i){var o=i.cxx,s=i.cyy;return i.vangles?function(_,F,j,X){N.angleDelta(j,X)>0?($=j,ee=X):($=X,ee=j);var $,ee,et=Z.findEnclosingVertexAngles($,i.vangles)[0],er=Z.findEnclosingVertexAngles(ee,i.vangles)[1],en=[et,($+ee)/2,er];return Z.pathPolygonAnnulus(_,F,$,ee,en,o,s)}:function(i,_,F,j){return N.pathAnnulus(i,_,F,j,o,s)}}i.exports=function(i,o,s){var Z=i._context.staticPlot,X=o.xaxis,$=o.yaxis,ee=o.radialAxis,et=o.angularAxis,er=makePathFn(o),en=o.layers.frontplot.select("g.barlayer");N.makeTraceGroups(en,s,"trace bars").each(function(){var s=_.select(this),en=N.ensureSingle(s,"g","points").selectAll("g.point").data(N.identity);en.enter().append("g").style("vector-effect",Z?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),en.exit().remove(),en.each(function(i){var o,s=_.select(this),j=i.rp0=ee.c2p(i.s0),Z=i.rp1=ee.c2p(i.s1),en=i.thetag0=et.c2g(i.p0),ei=i.thetag1=et.c2g(i.p1);if(F(j)&&F(Z)&&F(en)&&F(ei)&&j!==Z&&en!==ei){var eo=ee.c2g(i.s1),es=(en+ei)/2;i.ct=[X.c2p(eo*Math.cos(es)),$.c2p(eo*Math.sin(es))],o=er(j,Z,en,ei)}else o="M0,0Z";N.ensureSingle(s,"path").attr("d",o)}),j.setClipUrl(s,o._hasClipOnAxisFalse?o.clipIds.forTraces:null,i)})}},53522:function(i,o,s){"use strict";var _=s(82196),F=s(1486),N=s(22399),j=s(12663).axisHoverFormat,Z=s(5386).fF,X=s(1426).extendFlat,$=_.marker,ee=$.line;i.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:j("x"),yhoverformat:j("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:X({},$.symbol,{arrayOk:!1,editType:"plot"}),opacity:X({},$.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:X({},$.angle,{arrayOk:!1,editType:"calc"}),size:X({},$.size,{arrayOk:!1,editType:"calc"}),color:X({},$.color,{arrayOk:!1,editType:"style"}),line:{color:X({},ee.color,{arrayOk:!1,dflt:N.defaultLine,editType:"style"}),width:X({},ee.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:_.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:F.offsetgroup,alignmentgroup:F.alignmentgroup,selected:{marker:_.selected.marker,editType:"style"},unselected:{marker:_.unselected.marker,editType:"style"},text:X({},_.text,{}),hovertext:X({},_.hovertext,{}),hovertemplate:Z({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(i,o,s){"use strict";var _=s(92770),F=s(89298),N=s(42973),j=s(71828),Z=s(50606).BADNUM,X=j._;function getPosArrays(i,o,s,F){var Z,X=o in i,$=o+"0" in i,ee="d"+o in i;if(X||$&&ee){var et=s.makeCalcdata(i,o);return[N(i,s,o,et).vals,et]}Z=$?i[o+"0"]:"name"in i&&("category"===s.type||_(i.name)&&-1!==["linear","log"].indexOf(s.type)||j.isDateTime(i.name)&&"date"===s.type)?i.name:F;for(var er="multicategory"===s.type?s.r2c_just_indices(Z):s.d2c(Z,0,i[o+"calendar"]),en=i._length,ei=Array(en),eo=0;eo<en;eo++)ei[eo]=er;return[ei]}function makeBins(i,o){for(var s=i.length,_=Array(s+1),F=0;F<s;F++)_[F]=i[F]-o;return _[s]=i[s-1]+o,_}function initNestedArray(i){for(var o=Array(i),s=0;s<i;s++)o[s]=[];return o}i.exports=function(i,o){var s=i._fullLayout,N=F.getFromId(i,o.xaxis||"x"),$=F.getFromId(i,o.yaxis||"y"),ee=[],et="violin"===o.type?"_numViolins":"_numBoxes";"h"===o.orientation?(eg=N,em="x",ey=$,ev="y",ex=!!o.yperiodalignment):(eg=$,em="y",ey=N,ev="x",ex=!!o.xperiodalignment);var er=getPosArrays(o,ev,ey,s[et]),en=er[0],ei=er[1],eo=j.distinctVals(en,ey),es=eo.vals,el=eo.minDiff/2,ec="all"===(o.boxpoints||o.points)?j.identity:function(i){return i.v<e_.lf||i.v>e_.uf};if(o._hasPreCompStats){var eu=o[em],d2c=function(i){return eg.d2c((o[i]||[])[eh])},ef=1/0,ed=-1/0;for(eh=0;eh<o._length;eh++){var eh,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA,eS,eM,eC=en[eh];if(_(eC)){if((e_={}).pos=e_[ev]=eC,ex&&ei&&(e_.orig_p=ei[eh]),e_.q1=d2c("q1"),e_.med=d2c("median"),e_.q3=d2c("q3"),ew=[],eu&&j.isArrayOrTypedArray(eu[eh]))for(ep=0;ep<eu[eh].length;ep++)(eS=eg.d2c(eu[eh][ep]))!==Z&&(arraysToCalcdata(eA={v:eS,i:[eh,ep]},o,[eh,ep]),ew.push(eA));if(e_.pts=ew.sort(sortByVal),ek=(eT=e_[em]=ew.map(extractVal)).length,e_.med!==Z&&e_.q1!==Z&&e_.q3!==Z&&e_.med>=e_.q1&&e_.q3>=e_.med){var eE=d2c("lowerfence");e_.lf=eE!==Z&&eE<=e_.q1?eE:computeLowerFence(e_,eT,ek);var eL=d2c("upperfence");e_.uf=eL!==Z&&eL>=e_.q3?eL:computeUpperFence(e_,eT,ek);var eP=d2c("mean");e_.mean=eP!==Z?eP:ek?j.mean(eT,ek):(e_.q1+e_.q3)/2;var eI=d2c("sd");e_.sd=eP!==Z&&eI>=0?eI:ek?j.stdev(eT,ek,e_.mean):e_.q3-e_.q1,e_.lo=computeLowerOutlierBound(e_),e_.uo=computeUpperOutlierBound(e_);var eO=d2c("notchspan");eO=eO!==Z&&eO>0?eO:computeNotchSpan(e_,ek),e_.ln=e_.med-eO,e_.un=e_.med+eO;var eD=e_.lf,eR=e_.uf;o.boxpoints&&eT.length&&(eD=Math.min(eD,eT[0]),eR=Math.max(eR,eT[ek-1])),o.notched&&(eD=Math.min(eD,e_.ln),eR=Math.max(eR,e_.un)),e_.min=eD,e_.max=eR}else j.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+e_.q1,"median = "+e_.med,"q3 = "+e_.q3].join("\n")),eM=e_.med!==Z?e_.med:e_.q1!==Z?e_.q3!==Z?(e_.q1+e_.q3)/2:e_.q1:e_.q3!==Z?e_.q3:0,e_.med=eM,e_.q1=e_.q3=eM,e_.lf=e_.uf=eM,e_.mean=e_.sd=eM,e_.ln=e_.un=eM,e_.min=e_.max=eM;ef=Math.min(ef,e_.min),ed=Math.max(ed,e_.max),e_.pts2=ew.filter(ec),ee.push(e_)}}o._extremes[eg._id]=F.findExtremes(eg,[ef,ed],{padded:!0})}else{var eB,eF,ez=eg.makeCalcdata(o,em),eN=makeBins(es,el),ej=es.length,eV=initNestedArray(ej);for(eh=0;eh<o._length;eh++)if(_(eS=ez[eh])){var eU=j.findBin(en[eh],eN);eU>=0&&eU<ej&&(arraysToCalcdata(eA={v:eS,i:eh},o,eh),eV[eU].push(eA))}var eH=1/0,eG=-1/0,eW=o.quartilemethod,eZ="exclusive"===eW,eY="inclusive"===eW;for(eh=0;eh<ej;eh++)if(eV[eh].length>0){(e_={}).pos=e_[ev]=es[eh],ew=e_.pts=eV[eh].sort(sortByVal),ek=(eT=e_[em]=ew.map(extractVal)).length,e_.min=eT[0],e_.max=eT[ek-1],e_.mean=j.mean(eT,ek),e_.sd=j.stdev(eT,ek,e_.mean)*o.sdmultiple,e_.med=j.interp(eT,.5),ek%2&&(eZ||eY)?(eZ?(eB=eT.slice(0,ek/2),eF=eT.slice(ek/2+1)):eY&&(eB=eT.slice(0,ek/2+1),eF=eT.slice(ek/2)),e_.q1=j.interp(eB,.5),e_.q3=j.interp(eF,.5)):(e_.q1=j.interp(eT,.25),e_.q3=j.interp(eT,.75)),e_.lf=computeLowerFence(e_,eT,ek),e_.uf=computeUpperFence(e_,eT,ek),e_.lo=computeLowerOutlierBound(e_),e_.uo=computeUpperOutlierBound(e_);var eX=computeNotchSpan(e_,ek);e_.ln=e_.med-eX,e_.un=e_.med+eX,eH=Math.min(eH,e_.ln),eG=Math.max(eG,e_.un),e_.pts2=ew.filter(ec),ee.push(e_)}o._extremes[eg._id]=F.findExtremes(eg,o.notched?ez.concat([eH,eG]):ez,{padded:!0})}return(calcSelection(ee,o),ee.length>0)?(ee[0].t={num:s[et],dPos:el,posLetter:ev,valLetter:em,labels:{med:X(i,"median:"),min:X(i,"min:"),q1:X(i,"q1:"),q3:X(i,"q3:"),max:X(i,"max:"),mean:"sd"===o.boxmean||"sd"===o.sizemode?X(i,"mean \xb1 σ:").replace("σ",1===o.sdmultiple?"σ":o.sdmultiple+"σ"):X(i,"mean:"),lf:X(i,"lower fence:"),uf:X(i,"upper fence:")}},s[et]++,ee):[{t:{empty:!0}}]};var $={text:"tx",hovertext:"htx"};function arraysToCalcdata(i,o,s){for(var _ in $)j.isArrayOrTypedArray(o[_])&&(Array.isArray(s)?j.isArrayOrTypedArray(o[_][s[0]])&&(i[$[_]]=o[_][s[0]][s[1]]):i[$[_]]=o[_][s])}function calcSelection(i,o){if(j.isArrayOrTypedArray(o.selectedpoints))for(var s=0;s<i.length;s++){for(var _=i[s].pts||[],F={},N=0;N<_.length;N++)F[_[N].i]=N;j.tagSelected(_,o,F)}}function sortByVal(i,o){return i.v-o.v}function extractVal(i){return i.v}function computeLowerFence(i,o,s){return 0===s?i.q1:Math.min(i.q1,o[Math.min(j.findBin(2.5*i.q1-1.5*i.q3,o,!0)+1,s-1)])}function computeUpperFence(i,o,s){return 0===s?i.q3:Math.max(i.q3,o[Math.max(j.findBin(2.5*i.q3-1.5*i.q1,o),0)])}function computeLowerOutlierBound(i){return 4*i.q1-3*i.q3}function computeUpperOutlierBound(i){return 4*i.q3-3*i.q1}function computeNotchSpan(i,o){return 0===o?0:1.57*(i.q3-i.q1)/Math.sqrt(o)}},37188:function(i,o,s){"use strict";var _=s(89298),F=s(71828),N=s(99082).getAxisGroup,j=["v","h"];function crossTraceCalc(i,o){for(var s=i.calcdata,_=o.xaxis,F=o.yaxis,N=0;N<j.length;N++){for(var Z=j[N],X="h"===Z?F:_,$=[],ee=0;ee<s.length;ee++){var et=s[ee],er=et[0].t,en=et[0].trace;!0!==en.visible||"box"!==en.type&&"candlestick"!==en.type||er.empty||(en.orientation||"v")!==Z||en.xaxis!==_._id||en.yaxis!==F._id||$.push(ee)}setPositionOffset("box",i,$,X)}}function setPositionOffset(i,o,s,j){var Z=o.calcdata,X=o._fullLayout,$=j._id,ee=$.charAt(0),et=[],er=0;for(eu=0;eu<s.length;eu++)for(ef=0,ed=Z[s[eu]];ef<ed.length;ef++)et.push(j.c2l(ed[ef].pos,!0)),er+=(ed[ef].pts2||[]).length;if(et.length){var en=F.distinctVals(et);("category"===j.type||"multicategory"===j.type)&&(en.minDiff=1);var ei=en.minDiff/2;_.minDtick(j,en.minDiff,en.vals[0],!0);var eo=X["violin"===i?"_numViolins":"_numBoxes"],es="group"===X[i+"mode"]&&eo>1,el=1-X[i+"gap"],ec=1-X[i+"groupgap"];for(eu=0;eu<s.length;eu++){var eu,ef,ed,eh,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA,eS=(ed=Z[s[eu]])[0].trace,eM=ed[0].t,eC=eS.width,eE=eS.side;if(eC)eh=ep=em=eC/2,eg=0;else if(eh=ei,es){var eL=N(X,j._id)+eS.orientation,eP=Object.keys(((X._alignmentOpts[eL]||{})[eS.alignmentgroup]||{}).offsetGroups||{}).length,eI=eP||eo,eO=eP?eS._offsetIndex:eM.num;ep=eh*el*ec/eI,eg=2*eh*(-.5+(eO+.5)/eI)*el,em=eh*el/eI}else ep=eh*el*ec,eg=0,em=eh;eM.dPos=eh,eM.bPos=eg,eM.bdPos=ep,eM.wHover=em;var eD=eg+ep,eR=!!eC,eB=(eS.boxpoints||eS.points)&&er>0;if("positive"===eE?(ey=eh*(eC?1:.5),ex=eD,ev=ex=eg):"negative"===eE?(ey=ex=eg,ev=eh*(eC?1:.5),e_=eD):(ey=ev=eh,ex=e_=eD),eB){var eF=eS.pointpos,ez=eS.jitter,eN=eS.marker.size/2,ej=0;eF+ez>=0&&((ej=eD*(eF+ez))>ey?(eR=!0,ek=eN,ew=ej):ej>ex&&(ek=eN,ew=ey)),ej<=ey&&(ew=ey);var eV=0;eF-ez<=0&&((eV=-eD*(eF-ez))>ev?(eR=!0,eA=eN,eT=eV):eV>e_&&(eA=eN,eT=ev)),eV<=ev&&(eT=ev)}else ew=ey,eT=ev;var eU=Array(ed.length);for(ef=0;ef<ed.length;ef++)eU[ef]=ed[ef].pos;eS._extremes[$]=_.findExtremes(j,eU,{padded:eR,vpadminus:eT,vpadplus:ew,vpadLinearized:!0,ppadminus:{x:eA,y:ek}[ee],ppadplus:{x:ek,y:eA}[ee]})}}}i.exports={crossTraceCalc:crossTraceCalc,setPositionOffset:setPositionOffset}},36411:function(i,o,s){"use strict";var _=s(71828),F=s(73972),N=s(7901),j=s(73927),Z=s(26125),X=s(4322),$=s(53522);function supplyDefaults(i,o,s,F){function coerce(s,F){return _.coerce(i,o,$,s,F)}if(handleSampleDefaults(i,o,coerce,F),!1!==o.visible){j(i,o,F,coerce),coerce("xhoverformat"),coerce("yhoverformat");var Z,X=o._hasPreCompStats;X&&(coerce("lowerfence"),coerce("upperfence")),coerce("line.color",(i.marker||{}).color||s),coerce("line.width"),coerce("fillcolor",N.addOpacity(o.line.color,.5));var ee=!1;if(X){var et=coerce("mean"),er=coerce("sd");et&&et.length&&(ee=!0,er&&er.length&&(ee="sd"))}coerce("whiskerwidth");var en=coerce("sizemode");"quartiles"===en&&(Z=coerce("boxmean",ee)),coerce("showwhiskers","quartiles"===en),("sd"===en||"sd"===Z)&&coerce("sdmultiple"),coerce("width"),coerce("quartilemethod");var ei=!1;if(X){var eo=coerce("notchspan");eo&&eo.length&&(ei=!0)}else _.validate(i.notchwidth,$.notchwidth)&&(ei=!0);coerce("notched",ei)&&coerce("notchwidth"),handlePointsDefaults(i,o,coerce,{prefix:"box"})}}function handleSampleDefaults(i,o,s,N){function getDims(i){var o=0;return i&&i.length&&(o+=1,_.isArrayOrTypedArray(i[0])&&i[0].length&&(o+=1)),o}function valid(o){return _.validate(i[o],$[o])}var j=s("y"),Z=s("x");if("box"===o.type){var ee=s("q1"),et=s("median"),er=s("q3");o._hasPreCompStats=ee&&ee.length&&et&&et.length&&er&&er.length,ef=Math.min(_.minRowLength(ee),_.minRowLength(et),_.minRowLength(er))}var en=getDims(j),ei=getDims(Z),eo=en&&_.minRowLength(j),es=ei&&_.minRowLength(Z),el=N.calendar,ec={autotypenumbers:N.autotypenumbers};if(o._hasPreCompStats)switch(String(ei)+String(en)){case"00":var eu=valid("x0")||valid("dx");ed=(valid("y0")||valid("dy"))&&!eu?"h":"v",eh=ef;break;case"10":ed="v",eh=Math.min(ef,es);break;case"20":ed="h",eh=Math.min(ef,Z.length);break;case"01":ed="h",eh=Math.min(ef,eo);break;case"02":ed="v",eh=Math.min(ef,j.length);break;case"12":ed="v",eh=Math.min(ef,es,j.length);break;case"21":ed="h",eh=Math.min(ef,Z.length,eo);break;case"11":eh=0;break;case"22":var ef,ed,eh,ep,eg=!1;for(ep=0;ep<Z.length;ep++)if("category"===X(Z[ep],el,ec)){eg=!0;break}if(eg)ed="v",eh=Math.min(ef,es,j.length);else{for(ep=0;ep<j.length;ep++)if("category"===X(j[ep],el,ec)){eg=!0;break}eg?(ed="h",eh=Math.min(ef,Z.length,eo)):(ed="v",eh=Math.min(ef,es,j.length))}}else en>0?(ed="v",eh=ei>0?Math.min(es,eo):Math.min(eo)):ei>0?(ed="h",eh=Math.min(es)):eh=0;if(!eh){o.visible=!1;return}o._length=eh;var em=s("orientation",ed);o._hasPreCompStats?"v"===em&&0===ei?(s("x0",0),s("dx",1)):"h"===em&&0===en&&(s("y0",0),s("dy",1)):"v"===em&&0===ei?s("x0"):"h"===em&&0===en&&s("y0"),F.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y"],N)}function handlePointsDefaults(i,o,s,F){var N=F.prefix,j=_.coerce2(i,o,$,"marker.outliercolor"),Z=s("marker.line.outliercolor"),X="outliers";o._hasPreCompStats?X="all":(j||Z)&&(X="suspectedoutliers");var ee=s(N+"points",X);ee?(s("jitter","all"===ee?.3:0),s("pointpos","all"===ee?-1.5:0),s("marker.symbol"),s("marker.opacity"),s("marker.size"),s("marker.angle"),s("marker.color",o.line.color),s("marker.line.color"),s("marker.line.width"),"suspectedoutliers"===ee&&(s("marker.line.outliercolor",o.marker.color),s("marker.line.outlierwidth")),s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size"),s("text"),s("hovertext")):delete o.marker;var et=s("hoveron");("all"===et||-1!==et.indexOf("points"))&&s("hovertemplate"),_.coerceSelectionMarkerOpacity(o,s)}function crossTraceDefaults(i,o){var s,F;function coerce(i){return _.coerce(F._input,F,$,i)}for(var N=0;N<i.length;N++){var j=(F=i[N]).type;("box"===j||"violin"===j)&&(s=F._input,"group"===o[j+"mode"]&&Z(s,F,o,coerce))}}i.exports={supplyDefaults:supplyDefaults,crossTraceDefaults:crossTraceDefaults,handleSampleDefaults:handleSampleDefaults,handlePointsDefaults:handlePointsDefaults}},74907:function(i){"use strict";i.exports=function(i,o){return o.hoverOnBox&&(i.hoverOnBox=o.hoverOnBox),"xVal"in o&&(i.x=o.xVal),"yVal"in o&&(i.y=o.yVal),o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),i}},41868:function(i,o,s){"use strict";var _=s(89298),F=s(71828),N=s(30211),j=s(7901),Z=F.fillText;function hoverPoints(i,o,s,_){var F,N=i.cd[0].trace.hoveron,j=[];return(-1!==N.indexOf("boxes")&&(j=j.concat(hoverOnBoxes(i,o,s,_))),-1!==N.indexOf("points")&&(F=hoverOnPoints(i,o,s)),"closest"===_)?F?[F]:j:(F&&j.push(F),j)}function hoverOnBoxes(i,o,s,Z){var X,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,ed,eh=i.cd,ep=i.xa,eg=i.ya,em=eh[0].trace,ey=eh[0].t,ev="violin"===em.type,ex=ey.bdPos,e_=ey.wHover,shiftPos=function(i){return ee.c2l(i.pos)+ey.bPos-ee.c2l(en)};ev&&"both"!==em.side?("positive"===em.side&&(es=function(i){var o=shiftPos(i);return N.inbox(o,o+e_,el)},eu=ex,ef=0),"negative"===em.side&&(es=function(i){var o=shiftPos(i);return N.inbox(o-e_,o,el)},eu=0,ef=ex)):(es=function(i){var o=shiftPos(i);return N.inbox(o-e_,o+e_,el)},eu=ef=ex),ed=ev?function(i){return N.inbox(i.span[0]-er,i.span[1]-er,el)}:function(i){return N.inbox(i.min-er,i.max-er,el)},"h"===em.orientation?(er=o,en=s,ei=ed,eo=es,X="y",ee=eg,$="x",et=ep):(er=s,en=o,ei=es,eo=ed,X="x",ee=ep,$="y",et=eg);var ew=Math.min(1,ex/Math.abs(ee.r2c(ee.range[1])-ee.r2c(ee.range[0])));function dxy(i){return(ei(i)+eo(i))/2}el=i.maxHoverDistance-ew,ec=i.maxSpikeDistance-ew;var eT=N.getDistanceFunction(Z,ei,eo,dxy);if(N.getClosest(eh,eT,i),!1===i.index)return[];var ek=eh[i.index],eA=em.line.color,eS=(em.marker||{}).color;j.opacity(eA)&&em.line.width?i.color=eA:j.opacity(eS)&&em.boxpoints?i.color=eS:i.color=em.fillcolor,i[X+"0"]=ee.c2p(ek.pos+ey.bPos-ef,!0),i[X+"1"]=ee.c2p(ek.pos+ey.bPos+eu,!0),i[X+"LabelVal"]=void 0!==ek.orig_p?ek.orig_p:ek.pos;var eM=X+"Spike";i.spikeDistance=dxy(ek)*ec/el,i[eM]=ee.c2p(ek.pos,!0);var eC=em.boxmean||"sd"===em.sizemode||(em.meanline||{}).visible,eE=em.boxpoints||em.points,eL=eE&&eC?["max","uf","q3","med","mean","q1","lf","min"]:eE&&!eC?["max","uf","q3","med","q1","lf","min"]:!eE&&eC?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],eP=et.range[1]<et.range[0];em.orientation===(eP?"v":"h")&&eL.reverse();for(var eI=i.spikeDistance,eO=i[eM],eD=[],eR=0;eR<eL.length;eR++){var eB=eL[eR];if(eB in ek){var eF=ek[eB],ez=et.c2p(eF,!0),eN=F.extendFlat({},i);eN.attr=eB,eN[$+"0"]=eN[$+"1"]=ez,eN[$+"LabelVal"]=eF,eN[$+"Label"]=(ey.labels?ey.labels[eB]+" ":"")+_.hoverLabelText(et,eF,em[$+"hoverformat"]),eN.hoverOnBox=!0,"mean"===eB&&"sd"in ek&&("sd"===em.boxmean||"sd"===em.sizemode)&&(eN[$+"err"]=ek.sd),eN.hovertemplate=!1,eD.push(eN)}}i.name="",i.spikeDistance=void 0,i[eM]=void 0;for(var ej=0;ej<eD.length;ej++)"med"!==eD[ej].attr?(eD[ej].name="",eD[ej].spikeDistance=void 0,eD[ej][eM]=void 0):(eD[ej].spikeDistance=eI,eD[ej][eM]=eO);return eD}function hoverOnPoints(i,o,s){for(var _,j,X,$,ee=i.cd,et=i.xa,er=i.ya,en=ee[0].trace,ei=et.c2p(o),eo=er.c2p(s),es=N.quadrature(function(i){var o=Math.max(3,i.mrc||0);return Math.max(Math.abs(et.c2p(i.x)-ei)-o,1-3/o)},function(i){var o=Math.max(3,i.mrc||0);return Math.max(Math.abs(er.c2p(i.y)-eo)-o,1-3/o)}),el=!1,ec=0;ec<ee.length;ec++){j=ee[ec];for(var eu=0;eu<(j.pts||[]).length;eu++){var ef=es(X=j.pts[eu]);ef<=i.distance&&(i.distance=ef,el=[ec,eu])}}if(!el)return!1;X=(j=ee[el[0]]).pts[el[1]];var ed=et.c2p(X.x,!0),eh=er.c2p(X.y,!0),ep=X.mrc||1;_=F.extendFlat({},i,{index:X.i,color:(en.marker||{}).color,name:en.name,x0:ed-ep,x1:ed+ep,y0:eh-ep,y1:eh+ep,spikeDistance:i.distance,hovertemplate:en.hovertemplate});var eg=j.orig_p,em=void 0!==eg?eg:j.pos;return"h"===en.orientation?($=er,_.xLabelVal=X.x,_.yLabelVal=em):($=et,_.xLabelVal=em,_.yLabelVal=X.y),_[$._id.charAt(0)+"Spike"]=$.c2p(j.pos,!0),Z(X,en,_),_}i.exports={hoverPoints:hoverPoints,hoverOnBoxes:hoverOnBoxes,hoverOnPoints:hoverOnPoints}},83832:function(i,o,s){"use strict";i.exports={attributes:s(53522),layoutAttributes:s(40094),supplyDefaults:s(36411).supplyDefaults,crossTraceDefaults:s(36411).crossTraceDefaults,supplyLayoutDefaults:s(4199).supplyLayoutDefaults,calc:s(48518),crossTraceCalc:s(37188).crossTraceCalc,plot:s(86047).plot,style:s(58063).style,styleOnSelect:s(58063).styleOnSelect,hoverPoints:s(41868).hoverPoints,eventData:s(74907),selectPoints:s(24626),moduleType:"trace",name:"box",basePlotModule:s(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(i){"use strict";i.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=s(40094);function _supply(i,o,s,F,N){for(var j=N+"Layout",Z=!1,X=0;X<s.length;X++){var $=s[X];if(_.traceIs($,j)){Z=!0;break}}Z&&(F(N+"mode"),F(N+"gap"),F(N+"groupgap"))}function supplyLayoutDefaults(i,o,s){function coerce(s,_){return F.coerce(i,o,N,s,_)}_supply(i,o,s,coerce,"box")}i.exports={supplyLayoutDefaults:supplyLayoutDefaults,_supply:_supply}},86047:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(91424);function plot(i,o,s,N){var j=i._context.staticPlot,Z=o.xaxis,X=o.yaxis;F.makeTraceGroups(N,s,"trace boxes").each(function(i){var o,s,F=_.select(this),N=i[0],$=N.t,ee=N.trace;if($.wdPos=$.bdPos*ee.whiskerwidth,!0!==ee.visible||$.empty){F.remove();return}"h"===ee.orientation?(o=X,s=Z):(o=Z,s=X),plotBoxAndWhiskers(F,{pos:o,val:s},ee,$,j),plotPoints(F,{x:Z,y:X},ee,$),plotBoxMean(F,{pos:o,val:s},ee,$)})}function plotBoxAndWhiskers(i,o,s,N,j){var Z,X,$="h"===s.orientation,ee=o.val,et=o.pos,er=!!et.rangebreaks,en=N.bPos,ei=N.wdPos||0,eo=N.bPosPxOffset||0,es=s.whiskerwidth||0,el=!1!==s.showwhiskers,ec=s.notched||!1,eu=ec?1-2*s.notchwidth:1;Array.isArray(N.bdPos)?(Z=N.bdPos[0],X=N.bdPos[1]):(Z=N.bdPos,X=N.bdPos);var ef=i.selectAll("path.box").data("violin"!==s.type||s.box.visible?F.identity:[]);ef.enter().append("path").style("vector-effect",j?"none":"non-scaling-stroke").attr("class","box"),ef.exit().remove(),ef.each(function(i){if(i.empty)return _.select(this).attr("d","M0,0Z");var o=et.c2l(i.pos+en,!0),N=et.l2p(o-Z)+eo,j=et.l2p(o+X)+eo,ef=er?(N+j)/2:et.l2p(o)+eo,ed=s.whiskerwidth,eh=er?N*ed+(1-ed)*ef:et.l2p(o-ei)+eo,ep=er?j*ed+(1-ed)*ef:et.l2p(o+ei)+eo,eg=et.l2p(o-Z*eu)+eo,em=et.l2p(o+X*eu)+eo,ey="sd"===s.sizemode,ev=ee.c2p(ey?i.mean-i.sd:i.q1,!0),ex=ey?ee.c2p(i.mean+i.sd,!0):ee.c2p(i.q3,!0),e_=F.constrain(ey?ee.c2p(i.mean,!0):ee.c2p(i.med,!0),Math.min(ev,ex)+1,Math.max(ev,ex)-1),ew=void 0===i.lf||!1===s.boxpoints||ey,eT=ee.c2p(ew?i.min:i.lf,!0),ek=ee.c2p(ew?i.max:i.uf,!0),eA=ee.c2p(i.ln,!0),eS=ee.c2p(i.un,!0);$?_.select(this).attr("d","M"+e_+","+eg+"V"+em+"M"+ev+","+N+"V"+j+(ec?"H"+eA+"L"+e_+","+em+"L"+eS+","+j:"")+"H"+ex+"V"+N+(ec?"H"+eS+"L"+e_+","+eg+"L"+eA+","+N:"")+"Z"+(el?"M"+ev+","+ef+"H"+eT+"M"+ex+","+ef+"H"+ek+(0===es?"":"M"+eT+","+eh+"V"+ep+"M"+ek+","+eh+"V"+ep):"")):_.select(this).attr("d","M"+eg+","+e_+"H"+em+"M"+N+","+ev+"H"+j+(ec?"V"+eA+"L"+em+","+e_+"L"+j+","+eS:"")+"V"+ex+"H"+N+(ec?"V"+eS+"L"+eg+","+e_+"L"+N+","+eA:"")+"Z"+(el?"M"+ef+","+ev+"V"+eT+"M"+ef+","+ex+"V"+ek+(0===es?"":"M"+eh+","+eT+"H"+ep+"M"+eh+","+ek+"H"+ep):""))})}function plotPoints(i,o,s,_){var j=o.x,Z=o.y,X=_.bdPos,$=_.bPos,ee=s.boxpoints||s.points;F.seedPseudoRandom();var et=i.selectAll("g.points").data(ee?function(i){return i.forEach(function(i){i.t=_,i.trace=s}),i}:[]);et.enter().append("g").attr("class","points"),et.exit().remove();var er=et.selectAll("path").data(function(i){var o,_,N=i.pts2,j=Math.max((i.max-i.min)/10,i.q3-i.q1),Z=1e-9*j,et=.01*j,er=[],en=0;if(s.jitter){if(0===j)for(o=0,en=1,er=Array(N.length);o<N.length;o++)er[o]=1;else for(o=0;o<N.length;o++){var ei=Math.max(0,o-5),eo=N[ei].v,es=Math.min(N.length-1,o+5),el=N[es].v;"all"!==ee&&(N[o].v<i.lf?el=Math.min(el,i.lf):eo=Math.max(eo,i.uf));var ec=Math.sqrt(et*(es-ei)/(el-eo+Z))||0;ec=F.constrain(Math.abs(ec),0,1),er.push(ec),en=Math.max(ec,en)}_=2*s.jitter/(en||1)}for(o=0;o<N.length;o++){var eu=N[o],ef=eu.v,ed=s.jitter?_*er[o]*(F.pseudoRandom()-.5):0,eh=i.pos+$+X*(s.pointpos+ed);"h"===s.orientation?(eu.y=eh,eu.x=ef):(eu.x=eh,eu.y=ef),"suspectedoutliers"===ee&&ef<i.uo&&ef>i.lo&&(eu.so=!0)}return N});er.enter().append("path").classed("point",!0),er.exit().remove(),er.call(N.translatePoints,j,Z)}function plotBoxMean(i,o,s,N){var j,Z,X=o.val,$=o.pos,ee=!!$.rangebreaks,et=N.bPos,er=N.bPosPxOffset||0,en=s.boxmean||(s.meanline||{}).visible;Array.isArray(N.bdPos)?(j=N.bdPos[0],Z=N.bdPos[1]):(j=N.bdPos,Z=N.bdPos);var ei=i.selectAll("path.mean").data("box"===s.type&&s.boxmean||"violin"===s.type&&s.box.visible&&s.meanline.visible?F.identity:[]);ei.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),ei.exit().remove(),ei.each(function(i){var o=$.c2l(i.pos+et,!0),F=$.l2p(o-j)+er,N=$.l2p(o+Z)+er,ei=ee?(F+N)/2:$.l2p(o)+er,eo=X.c2p(i.mean,!0),es=X.c2p(i.mean-i.sd,!0),el=X.c2p(i.mean+i.sd,!0);"h"===s.orientation?_.select(this).attr("d","M"+eo+","+F+"V"+N+("sd"===en?"m0,0L"+es+","+ei+"L"+eo+","+F+"L"+el+","+ei+"Z":"")):_.select(this).attr("d","M"+F+","+eo+"H"+N+("sd"===en?"m0,0L"+ei+","+es+"L"+F+","+eo+"L"+ei+","+el+"Z":""))})}i.exports={plot:plot,plotBoxAndWhiskers:plotBoxAndWhiskers,plotPoints:plotPoints,plotBoxMean:plotBoxMean}},24626:function(i){"use strict";i.exports=function(i,o){var s,_,F=i.cd,N=i.xaxis,j=i.yaxis,Z=[];if(!1===o)for(s=0;s<F.length;s++)for(_=0;_<(F[s].pts||[]).length;_++)F[s].pts[_].selected=0;else for(s=0;s<F.length;s++)for(_=0;_<(F[s].pts||[]).length;_++){var X=F[s].pts[_],$=N.c2p(X.x),ee=j.c2p(X.y);o.contains([$,ee],null,X.i,i)?(Z.push({pointNumber:X.i,x:N.c2d(X.x),y:j.c2d(X.y)}),X.selected=1):X.selected=0}return Z}},58063:function(i,o,s){"use strict";var _=s(39898),F=s(7901),N=s(91424);function style(i,o,s){var j=s||_.select(i).selectAll("g.trace.boxes");j.style("opacity",function(i){return i[0].trace.opacity}),j.each(function(o){var s=_.select(this),j=o[0].trace,Z=j.line.width;function styleBox(i,o,s,_){i.style("stroke-width",o+"px").call(F.stroke,s).call(F.fill,_)}var X=s.selectAll("path.box");if("candlestick"===j.type)X.each(function(i){if(!i.empty){var o=_.select(this),s=j[i.dir];styleBox(o,s.line.width,s.line.color,s.fillcolor),o.style("opacity",j.selectedpoints&&!i.selected?.3:1)}});else{styleBox(X,Z,j.line.color,j.fillcolor),s.selectAll("path.mean").style({"stroke-width":Z,"stroke-dasharray":2*Z+"px,"+Z+"px"}).call(F.stroke,j.line.color);var $=s.selectAll("path.point");N.pointStyle($,j,i)}})}function styleOnSelect(i,o,s){var _=o[0].trace,F=s.selectAll("path.point");_.selectedpoints?N.selectedPointStyle(F,_):N.pointStyle(F,_,i)}i.exports={style:style,styleOnSelect:styleOnSelect}},75343:function(i,o,s){"use strict";var _=s(71828).extendFlat,F=s(12663).axisHoverFormat,N=s(2522),j=s(53522);function directionAttrs(i){return{line:{color:_({},j.line.color,{dflt:i}),width:j.line.width,editType:"style"},fillcolor:j.fillcolor,editType:"style"}}i.exports={xperiod:N.xperiod,xperiod0:N.xperiod0,xperiodalignment:N.xperiodalignment,xhoverformat:F("x"),yhoverformat:F("y"),x:N.x,open:N.open,high:N.high,low:N.low,close:N.close,line:{width:_({},j.line.width,{}),editType:"style"},increasing:directionAttrs(N.increasing.line.color.dflt),decreasing:directionAttrs(N.decreasing.line.color.dflt),text:N.text,hovertext:N.hovertext,whiskerwidth:_({},j.whiskerwidth,{dflt:0}),hoverlabel:N.hoverlabel}},41197:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(42973),j=s(3485).calcCommon;function ptFunc(i,o,s,_){return{min:s,q1:Math.min(i,_),med:_,q3:Math.max(i,_),max:o}}i.exports=function(i,o){var s=i._fullLayout,Z=F.getFromId(i,o.xaxis),X=F.getFromId(i,o.yaxis),$=Z.makeCalcdata(o,"x"),ee=N(o,Z,"x",$).vals,et=j(i,o,$,ee,X,ptFunc);return et.length?(_.extendFlat(et[0].t,{num:s._numBoxes,dPos:_.distinctVals(ee).minDiff/2,posLetter:"x",valLetter:"y"}),s._numBoxes++,et):[{t:{empty:!0}}]}},1026:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(14555),j=s(73927),Z=s(75343);function handleDirection(i,o,s,_){var N=s(_+".line.color");s(_+".line.width",o.line.width),s(_+".fillcolor",F.addOpacity(N,.5))}i.exports=function(i,o,s,F){function coerce(s,F){return _.coerce(i,o,Z,s,F)}if(!N(i,o,coerce,F)){o.visible=!1;return}j(i,o,F,coerce,{x:!0}),coerce("xhoverformat"),coerce("yhoverformat"),coerce("line.width"),handleDirection(i,o,coerce,"increasing"),handleDirection(i,o,coerce,"decreasing"),coerce("text"),coerce("hovertext"),coerce("whiskerwidth"),F._requestRangeslider[o.xaxis]=!0}},91815:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"candlestick",basePlotModule:s(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:s(75343),layoutAttributes:s(40094),supplyLayoutDefaults:s(4199).supplyLayoutDefaults,crossTraceCalc:s(37188).crossTraceCalc,supplyDefaults:s(1026),calc:s(41197),plot:s(86047).plot,layerName:"boxlayer",style:s(58063).style,hoverPoints:s(66449).hoverPoints,selectPoints:s(67324)}},13145:function(i,o,s){"use strict";var _=s(11500),F=s(44467);function mimickAxisDefaults(i,o,s,N){["aaxis","baxis"].forEach(function(j){var Z=j.charAt(0),X=i[j]||{},$=F.newContainer(o,j);_(X,$,{noTicklabelstep:!0,tickfont:"x",id:Z+"axis",letter:Z,font:o.font,name:j,data:i[Z],calendar:o.calendar,dfltColor:N,bgColor:s.paper_bgcolor,autotypenumbersDflt:s.autotypenumbers,fullLayout:s}),$._categories=$._categories||[],i[j]||"-"===X.type||(i[j]={type:X.type})})}i.exports=function(i,o,s,_,F){_("a")||(_("da"),_("a0")),_("b")||(_("db"),_("b0")),mimickAxisDefaults(i,o,s,F)}},402:function(i,o,s){"use strict";var _=s(71828).isArrayOrTypedArray;function minMax(i,o){if(!_(i)||o>=10)return null;for(var s=1/0,F=-1/0,N=i.length,j=0;j<N;j++){var Z=i[j];if(_(Z)){var X=minMax(Z,o+1);X&&(s=Math.min(X[0],s),F=Math.max(X[1],F))}else s=Math.min(Z,s),F=Math.max(Z,F)}return[s,F]}i.exports=function(i){return minMax(i,0)}},99798:function(i,o,s){"use strict";var _=s(41940),F=s(1928),N=s(22399),j=_({editType:"calc"});j.family.dflt='"Open Sans", verdana, arial, sans-serif',j.size.dflt=12,j.color.dflt=N.defaultLine,i.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:F,baxis:F,font:j,color:{valType:"color",dflt:N.defaultLine,editType:"plot"},transforms:void 0}},4536:function(i,o,s){"use strict";var _=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s,F){var N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec=_(s)?"a":"b",eu=("a"===ec?i.aaxis:i.baxis).smoothing,ef="a"===ec?i.a2i:i.b2j,ed="a"===ec?s:F,eh="a"===ec?F:s,ep="a"===ec?o.a.length:o.b.length,eg="a"===ec?o.b.length:o.a.length,em=Math.floor("a"===ec?i.b2j(eh):i.a2i(eh)),ey="a"===ec?function(o){return i.evalxy([],o,em)}:function(o){return i.evalxy([],em,o)};eu&&(Z=Math.max(0,Math.min(eg-2,em)),X=em-Z,j="a"===ec?function(o,s){return i.dxydi([],o,Z,s,X)}:function(o,s){return i.dxydj([],Z,o,X,s)});var ev=ef(ed[0]),ex=ef(ed[1]),e_=ev<ex?1:-1,ew=(ex-ev)*1e-8,eT=e_>0?Math.floor:Math.ceil,ek=e_>0?Math.ceil:Math.floor,eA=e_>0?Math.min:Math.max,eS=e_>0?Math.max:Math.min,eM=eT(ev+ew),eC=ek(ex-ew),eE=[[et=ey(ev)]];for(N=eM;N*e_<eC*e_;N+=e_)$=[],eo=eS(ev,N),el=(es=eA(ex,N+e_))-eo,ee=Math.max(0,Math.min(ep-2,Math.floor(.5*(eo+es)))),er=ey(es),eu&&(en=j(ee,eo-ee),ei=j(ee,es-ee),$.push([et[0]+en[0]/3*el,et[1]+en[1]/3*el]),$.push([er[0]-ei[0]/3*el,er[1]-ei[1]/3*el])),$.push(er),eE.push($),et=er;return eE}},1928:function(i,o,s){"use strict";var _=s(41940),F=s(22399),N=s(13838),j=s(12663).descriptionWithDates,Z=s(30962).overrideAll,X=s(79952).P,$=s(1426).extendFlat;i.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:_({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:N.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:$({},N.labelalias,{editType:"calc"}),tickfont:_({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:j("tick label")},tickformatstops:Z(N.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:F.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:$({},X,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:$({},X,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:F.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:_({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(i,o,s){"use strict";var _=s(99798),F=s(7901).addOpacity,N=s(73972),j=s(71828),Z=s(26218),X=s(96115),$=s(89426),ee=s(15258),et=s(21994),er=s(4322);function setAutoType(i,o){if("-"===i.type){var s=i._id.charAt(0),_=i[s+"calendar"];i.type=er(o,_,{autotypenumbers:i.autotypenumbers})}}i.exports=function(i,o,s){var er=s.letter,en=s.font||{},ei=_[er+"axis"];function coerce(s,_){return j.coerce(i,o,ei,s,_)}function coerce2(s,_){return j.coerce2(i,o,ei,s,_)}s.name&&(o._name=s.name,o._id=s.name),coerce("autotypenumbers",s.autotypenumbersDflt);var eo=coerce("type");"-"===eo&&(s.data&&setAutoType(o,s.data),"-"===o.type?o.type="linear":eo=i.type=o.type),coerce("smoothing"),coerce("cheatertype"),coerce("showticklabels"),coerce("labelprefix",er+" = "),coerce("labelsuffix"),coerce("showtickprefix"),coerce("showticksuffix"),coerce("separatethousands"),coerce("tickformat"),coerce("exponentformat"),coerce("minexponent"),coerce("showexponent"),coerce("categoryorder"),coerce("tickmode"),coerce("tickvals"),coerce("ticktext"),coerce("tick0"),coerce("dtick"),"array"===o.tickmode&&(coerce("arraytick0"),coerce("arraydtick")),coerce("labelpadding"),o._hovertitle=er,"date"===eo&&N.getComponentMethod("calendars","handleDefaults")(i,o,"calendar",s.calendar),et(o,s.fullLayout),o.c2p=j.identity;var es=coerce("color",s.dfltColor),el=es===i.color?es:en.color;coerce("title.text")&&(j.coerceFont(coerce,"title.font",{family:en.family,size:j.bigFont(en.size),color:el}),coerce("title.offset")),coerce("tickangle"),coerce("autorange",!o.isValidRange(i.range))&&coerce("rangemode"),coerce("range"),o.cleanRange(),coerce("fixedrange"),Z(i,o,coerce,eo),$(i,o,coerce,eo,s),X(i,o,coerce,eo,s),ee(i,o,coerce,{data:s.data,dataAttr:er});var ec=coerce2("gridcolor",F(es,.3)),eu=coerce2("gridwidth"),ef=coerce2("griddash"),ed=coerce("showgrid");ed||(delete o.gridcolor,delete o.gridwidth,delete o.griddash);var eh=coerce2("startlinecolor",es),ep=coerce2("startlinewidth",eu);coerce("startline",o.showgrid||!!eh||!!ep)||(delete o.startlinecolor,delete o.startlinewidth);var eg=coerce2("endlinecolor",es),em=coerce2("endlinewidth",eu);return coerce("endline",o.showgrid||!!eg||!!em)||(delete o.endlinecolor,delete o.endlinewidth),ed?(coerce("minorgridcount"),coerce("minorgridwidth",eu),coerce("minorgriddash",ef),coerce("minorgridcolor",F(ec,.06)),o.minorgridcount||(delete o.minorgridwidth,delete o.minorgriddash,delete o.minorgridcolor)):(delete o.gridcolor,delete o.gridwidth,delete o.griddash),"none"===o.showticklabels&&(delete o.tickfont,delete o.tickangle,delete o.showexponent,delete o.exponentformat,delete o.minexponent,delete o.tickformat,delete o.showticksuffix,delete o.showtickprefix),o.showticksuffix||delete o.ticksuffix,o.showtickprefix||delete o.tickprefix,coerce("tickmode"),o}},25281:function(i,o,s){"use strict";var _=s(89298),F=s(71828).isArray1D,N=s(53824),j=s(402),Z=s(20347),X=s(83311),$=s(44807),ee=s(4742),et=s(72505),er=s(68296),en=s(11435);i.exports=function(i,o){var s=_.getFromId(i,o.xaxis),ei=_.getFromId(i,o.yaxis),eo=o.aaxis,es=o.baxis,el=o.x,ec=o.y,eu=[];el&&F(el)&&eu.push("x"),ec&&F(ec)&&eu.push("y"),eu.length&&er(o,eo,es,"a","b",eu);var ef=o._a=o._a||o.a,ed=o._b=o._b||o.b;el=o._x||o.x,ec=o._y||o.y;var eh={};o._cheater&&(el=N("index"===eo.cheatertype?ef.length:ef,"index"===es.cheatertype?ed.length:ed,o.cheaterslope)),o._x=el=ee(el),o._y=ec=ee(ec),et(el,ef,ed),et(ec,ef,ed),en(o),o.setScale();var ep=j(el),eg=j(ec),em=.5*(ep[1]-ep[0]),ey=.5*(ep[1]+ep[0]),ev=.5*(eg[1]-eg[0]),ex=.5*(eg[1]+eg[0]);return ep=[ey-1.3*em,ey+1.3*em],eg=[ex-1.3*ev,ex+1.3*ev],o._extremes[s._id]=_.findExtremes(s,ep,{padded:!0}),o._extremes[ei._id]=_.findExtremes(ei,eg,{padded:!0}),Z(o,"a","b"),Z(o,"b","a"),X(o,eo),X(o,es),eh.clipsegments=$(o._xctrl,o._yctrl,eo,es),eh.x=el,eh.y=ec,eh.a=ef,eh.b=ed,[eh]}},44807:function(i){"use strict";i.exports=function(i,o,s,_){var F,N,j,Z=[],X=!!s.smoothing,$=!!_.smoothing,ee=i[0].length-1,et=i.length-1;for(F=0,N=[],j=[];F<=ee;F++)N[F]=i[0][F],j[F]=o[0][F];for(Z.push({x:N,y:j,bicubic:X}),F=0,N=[],j=[];F<=et;F++)N[F]=i[F][ee],j[F]=o[F][ee];for(Z.push({x:N,y:j,bicubic:$}),F=ee,N=[],j=[];F>=0;F--)N[ee-F]=i[et][F],j[ee-F]=o[et][F];for(Z.push({x:N,y:j,bicubic:X}),F=et,N=[],j=[];F>=0;F--)N[et-F]=i[F][0],j[et-F]=o[F][0];return Z.push({x:N,y:j,bicubic:$}),Z}},20347:function(i,o,s){"use strict";var _=s(89298),F=s(1426).extendFlat;i.exports=function(i,o,s){var N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec,eu=i["_"+o],ef=i[o+"axis"],ed=ef._gridlines=[],eh=ef._minorgridlines=[],ep=ef._boundarylines=[],eg=i["_"+s],em=i[s+"axis"];"array"===ef.tickmode&&(ef.tickvals=eu.slice());var ey=i._xctrl,ev=i._yctrl,ex=ey[0].length,e_=ey.length,ew=i._a.length,eT=i._b.length;_.prepTicks(ef),"array"===ef.tickmode&&delete ef.tickvals;var ek=ef.smoothing?3:1;function constructValueGridline(_){var F,N,j,Z,X,$,ee,et,en,ei,eo,es,el=[],ec=[],eu={};if("b"===o)for(F=0,j=Math.floor(Math.max(0,Math.min(eT-2,N=i.b2j(_)))),Z=N-j,eu.length=eT,eu.crossLength=ew,eu.xy=function(o){return i.evalxy([],o,N)},eu.dxy=function(o,s){return i.dxydi([],o,j,s,Z)};F<ew;F++)$=Math.min(ew-2,F),ee=F-$,et=i.evalxy([],F,N),em.smoothing&&F>0&&(en=i.dxydi([],F-1,j,0,Z),el.push(X[0]+en[0]/3),ec.push(X[1]+en[1]/3),ei=i.dxydi([],F-1,j,1,Z),el.push(et[0]-ei[0]/3),ec.push(et[1]-ei[1]/3)),el.push(et[0]),ec.push(et[1]),X=et;else for(N=0,$=Math.floor(Math.max(0,Math.min(ew-2,F=i.a2i(_)))),ee=F-$,eu.length=ew,eu.crossLength=eT,eu.xy=function(o){return i.evalxy([],F,o)},eu.dxy=function(o,s){return i.dxydj([],$,o,ee,s)};N<eT;N++)j=Math.min(eT-2,N),Z=N-j,et=i.evalxy([],F,N),em.smoothing&&N>0&&(eo=i.dxydj([],$,N-1,ee,0),el.push(X[0]+eo[0]/3),ec.push(X[1]+eo[1]/3),es=i.dxydj([],$,N-1,ee,1),el.push(et[0]-es[0]/3),ec.push(et[1]-es[1]/3)),el.push(et[0]),ec.push(et[1]),X=et;return eu.axisLetter=o,eu.axis=ef,eu.crossAxis=em,eu.value=_,eu.constvar=s,eu.index=er,eu.x=el,eu.y=ec,eu.smoothing=em.smoothing,eu}function constructArrayGridline(_){var F,N,j,Z,X,$=[],ee=[],et={};if(et.length=eu.length,et.crossLength=eg.length,"b"===o)for(F=0,j=Math.max(0,Math.min(eT-2,_)),X=Math.min(1,Math.max(0,_-j)),et.xy=function(o){return i.evalxy([],o,_)},et.dxy=function(o,s){return i.dxydi([],o,j,s,X)};F<ex;F++)$[F]=ey[_*ek][F],ee[F]=ev[_*ek][F];else for(F=0,N=Math.max(0,Math.min(ew-2,_)),Z=Math.min(1,Math.max(0,_-N)),et.xy=function(o){return i.evalxy([],_,o)},et.dxy=function(o,s){return i.dxydj([],N,o,Z,s)};F<e_;F++)$[F]=ey[F][_*ek],ee[F]=ev[F][_*ek];return et.axisLetter=o,et.axis=ef,et.crossAxis=em,et.value=eu[_],et.constvar=s,et.index=_,et.x=$,et.y=ee,et.smoothing=em.smoothing,et}if("array"===ef.tickmode){for(X=5e-15,ee=($=[Math.floor((eu.length-1-ef.arraytick0)/ef.arraydtick*(1+X)),Math.ceil(-ef.arraytick0/ef.arraydtick/(1+X))].sort(function(i,o){return i-o}))[0]-1,et=$[1]+1,er=ee;er<et;er++)(j=ef.arraytick0+ef.arraydtick*er)<0||j>eu.length-1||ed.push(F(constructArrayGridline(j),{color:ef.gridcolor,width:ef.gridwidth,dash:ef.griddash}));for(er=ee;er<et;er++)if(eo=Math.min((Z=ef.arraytick0+ef.arraydtick*er)+ef.arraydtick,eu.length-1),!(Z<0)&&!(Z>eu.length-1)&&!(eo<0)&&!(eo>eu.length-1))for(N=0,es=eu[Z],el=eu[eo];N<ef.minorgridcount;N++)!((ec=eo-Z)<=0)&&((ei=es+(el-es)*(N+1)/(ef.minorgridcount+1)*(ef.arraydtick/ec))<eu[0]||ei>eu[eu.length-1]||eh.push(F(constructValueGridline(ei),{color:ef.minorgridcolor,width:ef.minorgridwidth,dash:ef.minorgriddash})));ef.startline&&ep.push(F(constructArrayGridline(0),{color:ef.startlinecolor,width:ef.startlinewidth})),ef.endline&&ep.push(F(constructArrayGridline(eu.length-1),{color:ef.endlinecolor,width:ef.endlinewidth}))}else{for(X=5e-15,ee=($=[Math.floor((eu[eu.length-1]-ef.tick0)/ef.dtick*(1+X)),Math.ceil((eu[0]-ef.tick0)/ef.dtick/(1+X))].sort(function(i,o){return i-o}))[0],et=$[1],er=ee;er<=et;er++)en=ef.tick0+ef.dtick*er,ed.push(F(constructValueGridline(en),{color:ef.gridcolor,width:ef.gridwidth,dash:ef.griddash}));for(er=ee-1;er<et+1;er++)for(N=0,en=ef.tick0+ef.dtick*er;N<ef.minorgridcount;N++)(ei=en+ef.dtick*(N+1)/(ef.minorgridcount+1))<eu[0]||ei>eu[eu.length-1]||eh.push(F(constructValueGridline(ei),{color:ef.minorgridcolor,width:ef.minorgridwidth,dash:ef.minorgriddash}));ef.startline&&ep.push(F(constructValueGridline(eu[0]),{color:ef.startlinecolor,width:ef.startlinewidth})),ef.endline&&ep.push(F(constructValueGridline(eu[eu.length-1]),{color:ef.endlinecolor,width:ef.endlinewidth}))}}},83311:function(i,o,s){"use strict";var _=s(89298),F=s(1426).extendFlat;i.exports=function(i,o){var s,N,j,Z,X,$=o._labels=[],ee=o._gridlines;for(s=0;s<ee.length;s++)X=ee[s],-1!==["start","both"].indexOf(o.showticklabels)&&(F(N=_.tickText(o,X.value),{prefix:j,suffix:Z,endAnchor:!0,xy:X.xy(0),dxy:X.dxy(0,0),axis:X.axis,length:X.crossAxis.length,font:X.axis.tickfont,isFirst:0===s,isLast:s===ee.length-1}),$.push(N)),-1!==["end","both"].indexOf(o.showticklabels)&&(F(N=_.tickText(o,X.value),{endAnchor:!1,xy:X.xy(X.crossLength-1),dxy:X.dxy(X.crossLength-2,1),axis:X.axis,length:X.crossAxis.length,font:X.axis.tickfont,isFirst:0===s,isLast:s===ee.length-1}),$.push(N))}},42048:function(i){"use strict";i.exports=function(i,o,s,_){var F=i[0]-o[0],N=i[1]-o[1],j=s[0]-o[0],Z=s[1]-o[1],X=Math.pow(F*F+N*N,.25),$=Math.pow(j*j+Z*Z,.25),ee=($*$*F-X*X*j)*_,et=($*$*N-X*X*Z)*_,er=$*(X+$)*3,en=X*(X+$)*3;return[[o[0]+(er&&ee/er),o[1]+(er&&et/er)],[o[0]-(en&&ee/en),o[1]-(en&&et/en)]]}},53824:function(i,o,s){"use strict";var _=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s){var F,N,j,Z,X,$,ee=[],et=_(i)?i.length:i,er=_(o)?o.length:o,en=_(i)?i:null,ei=_(o)?o:null;en&&(j=(en.length-1)/(en[en.length-1]-en[0])/(et-1)),ei&&(Z=(ei.length-1)/(ei[ei.length-1]-ei[0])/(er-1));var eo=1/0,es=-1/0;for(N=0;N<er;N++)for(F=0,ee[N]=[],X=ei?(ei[N]-ei[0])*Z:N/(er-1);F<et;F++)eo=Math.min($=(en?(en[F]-en[0])*j:F/(et-1))-X*s,eo),es=Math.max($,es),ee[N][F]=$;var el=1/(es-eo),ec=-eo*el;for(N=0;N<er;N++)for(F=0;F<et;F++)ee[N][F]=el*ee[N][F]+ec;return ee}},45664:function(i,o,s){"use strict";var _=s(42048),F=s(71828).ensureArray;function inferCubicControlPoint(i,o,s){var _=-.5*s[0]+1.5*o[0],F=-.5*s[1]+1.5*o[1];return[(2*_+i[0])/3,(2*F+i[1])/3]}i.exports=function(i,o,s,N,j,Z){var X,$,ee,et,er,en,ei,eo,es,el,ec=s[0].length,eu=s.length,ef=j?3*ec-2:ec,ed=Z?3*eu-2:eu;for(ee=0,i=F(i,ed),o=F(o,ed);ee<ed;ee++)i[ee]=F(i[ee],ef),o[ee]=F(o[ee],ef);for($=0,et=0;$<eu;$++,et+=Z?3:1)for(X=0,er=i[et],en=o[et],ei=s[$],eo=N[$],ee=0;X<ec;X++,ee+=j?3:1)er[ee]=ei[X],en[ee]=eo[X];if(j)for($=0,et=0;$<eu;$++,et+=Z?3:1){for(X=1,ee=3;X<ec-1;X++,ee+=3)es=_([s[$][X-1],N[$][X-1]],[s[$][X],N[$][X]],[s[$][X+1],N[$][X+1]],j),i[et][ee-1]=es[0][0],o[et][ee-1]=es[0][1],i[et][ee+1]=es[1][0],o[et][ee+1]=es[1][1];el=inferCubicControlPoint([i[et][0],o[et][0]],[i[et][2],o[et][2]],[i[et][3],o[et][3]]),i[et][1]=el[0],o[et][1]=el[1],el=inferCubicControlPoint([i[et][ef-1],o[et][ef-1]],[i[et][ef-3],o[et][ef-3]],[i[et][ef-4],o[et][ef-4]]),i[et][ef-2]=el[0],o[et][ef-2]=el[1]}if(Z)for(ee=0;ee<ef;ee++){for(et=3;et<ed-3;et+=3)es=_([i[et-3][ee],o[et-3][ee]],[i[et][ee],o[et][ee]],[i[et+3][ee],o[et+3][ee]],Z),i[et-1][ee]=es[0][0],o[et-1][ee]=es[0][1],i[et+1][ee]=es[1][0],o[et+1][ee]=es[1][1];el=inferCubicControlPoint([i[0][ee],o[0][ee]],[i[2][ee],o[2][ee]],[i[3][ee],o[3][ee]]),i[1][ee]=el[0],o[1][ee]=el[1],el=inferCubicControlPoint([i[ed-1][ee],o[ed-1][ee]],[i[ed-3][ee],o[ed-3][ee]],[i[ed-4][ee],o[ed-4][ee]]),i[ed-2][ee]=el[0],o[ed-2][ee]=el[1]}if(j&&Z)for(et=1;et<ed;et+=(et+1)%3==0?2:1){for(ee=3;ee<ef-3;ee+=3)es=_([i[et][ee-3],o[et][ee-3]],[i[et][ee],o[et][ee]],[i[et][ee+3],o[et][ee+3]],j),i[et][ee-1]=.5*(i[et][ee-1]+es[0][0]),o[et][ee-1]=.5*(o[et][ee-1]+es[0][1]),i[et][ee+1]=.5*(i[et][ee+1]+es[1][0]),o[et][ee+1]=.5*(o[et][ee+1]+es[1][1]);el=inferCubicControlPoint([i[et][0],o[et][0]],[i[et][2],o[et][2]],[i[et][3],o[et][3]]),i[et][1]=.5*(i[et][1]+el[0]),o[et][1]=.5*(o[et][1]+el[1]),el=inferCubicControlPoint([i[et][ef-1],o[et][ef-1]],[i[et][ef-3],o[et][ef-3]],[i[et][ef-4],o[et][ef-4]]),i[et][ef-2]=.5*(i[et][ef-2]+el[0]),o[et][ef-2]=.5*(o[et][ef-2]+el[1])}return[i,o]}},35509:function(i){"use strict";i.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(i){"use strict";i.exports=function(i,o,s){return o&&s?function(o,s,_,F,N){o||(o=[]),s*=3,_*=3;var j,Z,X,$,ee,et,er=F*F,en=1-F,ei=en*en,eo=en*F*2,es=-3*ei,el=3*(ei-eo),ec=3*(eo-er),eu=3*er,ef=N*N,ed=ef*N,eh=1-N,ep=eh*eh,eg=ep*eh;for(et=0;et<i.length;et++)j=es*(ee=i[et])[_][s]+el*ee[_][s+1]+ec*ee[_][s+2]+eu*ee[_][s+3],Z=es*ee[_+1][s]+el*ee[_+1][s+1]+ec*ee[_+1][s+2]+eu*ee[_+1][s+3],X=es*ee[_+2][s]+el*ee[_+2][s+1]+ec*ee[_+2][s+2]+eu*ee[_+2][s+3],$=es*ee[_+3][s]+el*ee[_+3][s+1]+ec*ee[_+3][s+2]+eu*ee[_+3][s+3],o[et]=eg*j+3*(ep*N*Z+eh*ef*X)+ed*$;return o}:o?function(o,s,_,F,N){o||(o=[]),s*=3;var j,Z,X,$,ee=F*F,et=1-F,er=et*et,en=et*F*2,ei=-3*er,eo=3*(er-en),es=3*(en-ee),el=3*ee,ec=1-N;for(X=0;X<i.length;X++)j=ei*($=i[X])[_][s]+eo*$[_][s+1]+es*$[_][s+2]+el*$[_][s+3],Z=ei*$[_+1][s]+eo*$[_+1][s+1]+es*$[_+1][s+2]+el*$[_+1][s+3],o[X]=ec*j+N*Z;return o}:s?function(o,s,_,F,N){o||(o=[]),_*=3;var j,Z,X,$,ee,et,er=N*N,en=er*N,ei=1-N,eo=ei*ei,es=eo*ei;for(ee=0;ee<i.length;ee++)j=(et=i[ee])[_][s+1]-et[_][s],Z=et[_+1][s+1]-et[_+1][s],X=et[_+2][s+1]-et[_+2][s],$=et[_+3][s+1]-et[_+3][s],o[ee]=es*j+3*(eo*N*Z+ei*er*X)+en*$;return o}:function(o,s,_,F,N){o||(o=[]);var j,Z,X,$,ee=1-N;for(X=0;X<i.length;X++)j=($=i[X])[_][s+1]-$[_][s],Z=$[_+1][s+1]-$[_+1][s],o[X]=ee*j+N*Z;return o}}},73057:function(i){"use strict";i.exports=function(i,o,s){return o&&s?function(o,s,_,F,N){o||(o=[]),s*=3,_*=3;var j,Z,X,$,ee,et,er=F*F,en=er*F,ei=1-F,eo=ei*ei,es=eo*ei,el=N*N,ec=1-N,eu=ec*ec,ef=ec*N*2,ed=-3*eu,eh=3*(eu-ef),ep=3*(ef-el),eg=3*el;for(et=0;et<i.length;et++)j=ed*(ee=i[et])[_][s]+eh*ee[_+1][s]+ep*ee[_+2][s]+eg*ee[_+3][s],Z=ed*ee[_][s+1]+eh*ee[_+1][s+1]+ep*ee[_+2][s+1]+eg*ee[_+3][s+1],X=ed*ee[_][s+2]+eh*ee[_+1][s+2]+ep*ee[_+2][s+2]+eg*ee[_+3][s+2],$=ed*ee[_][s+3]+eh*ee[_+1][s+3]+ep*ee[_+2][s+3]+eg*ee[_+3][s+3],o[et]=es*j+3*(eo*F*Z+ei*er*X)+en*$;return o}:o?function(o,s,_,F,N){o||(o=[]),s*=3;var j,Z,X,$,ee,et,er=N*N,en=er*N,ei=1-N,eo=ei*ei,es=eo*ei;for(ee=0;ee<i.length;ee++)j=(et=i[ee])[_+1][s]-et[_][s],Z=et[_+1][s+1]-et[_][s+1],X=et[_+1][s+2]-et[_][s+2],$=et[_+1][s+3]-et[_][s+3],o[ee]=es*j+3*(eo*N*Z+ei*er*X)+en*$;return o}:s?function(o,s,_,F,N){o||(o=[]),_*=3;var j,Z,X,$,ee=1-F,et=N*N,er=1-N,en=er*er,ei=er*N*2,eo=-3*en,es=3*(en-ei),el=3*(ei-et),ec=3*et;for(X=0;X<i.length;X++)j=eo*($=i[X])[_][s]+es*$[_+1][s]+el*$[_+2][s]+ec*$[_+3][s],Z=eo*$[_][s+1]+es*$[_+1][s+1]+el*$[_+2][s+1]+ec*$[_+3][s+1],o[X]=ee*j+F*Z;return o}:function(o,s,_,F,N){o||(o=[]);var j,Z,X,$,ee=1-F;for(X=0;X<i.length;X++)j=($=i[X])[_+1][s]-$[_][s],Z=$[_+1][s+1]-$[_][s+1],o[X]=ee*j+F*Z;return o}}},20349:function(i){"use strict";i.exports=function(i,o,s,_,F){var N=o-2,j=s-2;return _&&F?function(o,s,_){o||(o=[]);var F,Z,X,$,ee,et,er=Math.max(0,Math.min(Math.floor(s),N)),en=Math.max(0,Math.min(Math.floor(_),j)),ei=Math.max(0,Math.min(1,s-er)),eo=Math.max(0,Math.min(1,_-en));er*=3,en*=3;var es=ei*ei,el=es*ei,ec=1-ei,eu=ec*ec,ef=eu*ec,ed=eo*eo,eh=ed*eo,ep=1-eo,eg=ep*ep,em=eg*ep;for(et=0;et<i.length;et++)F=ef*(ee=i[et])[en][er]+3*(eu*ei*ee[en][er+1]+ec*es*ee[en][er+2])+el*ee[en][er+3],Z=ef*ee[en+1][er]+3*(eu*ei*ee[en+1][er+1]+ec*es*ee[en+1][er+2])+el*ee[en+1][er+3],X=ef*ee[en+2][er]+3*(eu*ei*ee[en+2][er+1]+ec*es*ee[en+2][er+2])+el*ee[en+2][er+3],$=ef*ee[en+3][er]+3*(eu*ei*ee[en+3][er+1]+ec*es*ee[en+3][er+2])+el*ee[en+3][er+3],o[et]=em*F+3*(eg*eo*Z+ep*ed*X)+eh*$;return o}:_?function(o,s,_){o||(o=[]);var F,Z,X,$,ee,et,er=Math.max(0,Math.min(Math.floor(s),N)),en=Math.max(0,Math.min(Math.floor(_),j)),ei=Math.max(0,Math.min(1,s-er)),eo=Math.max(0,Math.min(1,_-en));er*=3;var es=ei*ei,el=es*ei,ec=1-ei,eu=ec*ec,ef=eu*ec,ed=1-eo;for(ee=0;ee<i.length;ee++)F=ed*(et=i[ee])[en][er]+eo*et[en+1][er],Z=ed*et[en][er+1]+eo*et[en+1][er+1],X=ed*et[en][er+2]+eo*et[en+1][er+1],$=ed*et[en][er+3]+eo*et[en+1][er+1],o[ee]=ef*F+3*(eu*ei*Z+ec*es*X)+el*$;return o}:F?function(o,s,_){o||(o=[]);var F,Z,X,$,ee,et,er=Math.max(0,Math.min(Math.floor(s),N)),en=Math.max(0,Math.min(Math.floor(_),j)),ei=Math.max(0,Math.min(1,s-er)),eo=Math.max(0,Math.min(1,_-en));en*=3;var es=eo*eo,el=es*eo,ec=1-eo,eu=ec*ec,ef=eu*ec,ed=1-ei;for(ee=0;ee<i.length;ee++)F=ed*(et=i[ee])[en][er]+ei*et[en][er+1],Z=ed*et[en+1][er]+ei*et[en+1][er+1],X=ed*et[en+2][er]+ei*et[en+2][er+1],$=ed*et[en+3][er]+ei*et[en+3][er+1],o[ee]=ef*F+3*(eu*eo*Z+ec*es*X)+el*$;return o}:function(o,s,_){o||(o=[]);var F,Z,X,$,ee=Math.max(0,Math.min(Math.floor(s),N)),et=Math.max(0,Math.min(Math.floor(_),j)),er=Math.max(0,Math.min(1,s-ee)),en=Math.max(0,Math.min(1,_-et)),ei=1-en,eo=1-er;for(X=0;X<i.length;X++)F=eo*($=i[X])[et][ee]+er*$[et][ee+1],Z=eo*$[et+1][ee]+er*$[et+1][ee+1],o[X]=ei*F+en*Z;return o}}},92087:function(i,o,s){"use strict";var _=s(71828),F=s(19237),N=s(13145),j=s(99798),Z=s(22399);i.exports=function(i,o,s,X){function coerce(s,F){return _.coerce(i,o,j,s,F)}o._clipPathId="clip"+o.uid+"carpet";var $=coerce("color",Z.defaultLine);if(_.coerceFont(coerce,"font"),coerce("carpet"),N(i,o,X,coerce,$),!o.a||!o.b){o.visible=!1;return}o.a.length<3&&(o.aaxis.smoothing=0),o.b.length<3&&(o.baxis.smoothing=0),F(i,o,coerce)||(o.visible=!1),o._cheater&&coerce("cheaterslope")}},21462:function(i,o,s){"use strict";i.exports={attributes:s(99798),supplyDefaults:s(92087),plot:s(89740),calc:s(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:s(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(i){"use strict";i.exports=function(i,o){for(var s,_=i._fullData.length,F=0;F<_;F++){var N=i._fullData[F];if(N.index!==o.index&&"carpet"===N.type&&(s||(s=N),N.carpet===o.carpet))return N}return s}},67961:function(i){"use strict";i.exports=function(i,o,s){if(0===i.length)return"";var _,F=[],N=s?3:1;for(_=0;_<i.length;_+=N)F.push(i[_]+","+o[_]),s&&_<i.length-N&&(F.push("C"),F.push([i[_+1]+","+o[_+1],i[_+2]+","+o[_+2]+" "].join(" ")));return F.join(s?"":"L")}},27669:function(i,o,s){"use strict";var _=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s){var F;for(_(i)?i.length>o.length&&(i=i.slice(0,o.length)):i=[],F=0;F<o.length;F++)i[F]=s(o[F]);return i}},11651:function(i){"use strict";i.exports=function(i,o,s,_,F,N){var j=F[0]*i.dpdx(o),Z=F[1]*i.dpdy(s),X=1,$=1;if(N){var ee=Math.sqrt(F[0]*F[0]+F[1]*F[1]),et=Math.sqrt(N[0]*N[0]+N[1]*N[1]);$=Math.max(0,(F[0]*N[0]+F[1]*N[1])/ee/et)}var er=180*Math.atan2(Z,j)/Math.PI;return er<-90?(er+=180,X=-X):er>90&&(er-=180,X=-X),{angle:er,flip:X,p:i.c2p(_,o,s),offsetMultplier:$}}},89740:function(i,o,s){"use strict";var _=s(39898),F=s(91424),N=s(27669),j=s(67961),Z=s(11651),X=s(63893),$=s(71828),ee=$.strRotate,et=$.strTranslate,er=s(18783);function drawClipPath(i,o,s,_,F){var Z,X,ee=s.select("#"+i._clipPathId);ee.size()||(ee=s.append("clipPath").classed("carpetclip",!0));var et=$.ensureSingle(ee,"path","carpetboundary"),er=o.clipsegments,en=[];for(X=0;X<er.length;X++)en.push(j(N([],(Z=er[X]).x,_.c2p),N([],Z.y,F.c2p),Z.bicubic));var ei="M"+en.join("L")+"Z";ee.attr("id",i._clipPathId),et.attr("d",ei)}function drawGridLines(i,o,s,Z,X,$,ee){var et="const-"+X+"-lines",er=s.selectAll("."+et).data($);er.enter().append("path").classed(et,!0).style("vector-effect",ee?"none":"non-scaling-stroke"),er.each(function(s){var Z=s.x,X=s.y,$="M"+j(N([],Z,i.c2p),N([],X,o.c2p),s.smoothing);_.select(this).attr("d",$).style("stroke-width",s.width).style("stroke",s.color).style("stroke-dasharray",F.dashStyle(s.dash,s.width)).style("fill","none")}),er.exit().remove()}function drawAxisLabels(i,o,s,N,j,$,er,en){var ei=$.selectAll("text."+en).data(er);ei.enter().append("text").classed(en,!0);var eo=0,es={};return ei.each(function(j,$){if("auto"===j.axis.tickangle)er=Z(N,o,s,j.xy,j.dxy);else{var er,en=(j.axis.tickangle+180)*Math.PI/180;er=Z(N,o,s,j.xy,[Math.cos(en),Math.sin(en)])}$||(es={angle:er.angle,flip:er.flip});var ei=(j.endAnchor?-1:1)*er.flip,el=_.select(this).attr({"text-anchor":ei>0?"start":"end","data-notex":1}).call(F.font,j.font).text(j.text).call(X.convertToTspans,i),ec=F.bBox(this);el.attr("transform",et(er.p[0],er.p[1])+ee(er.angle)+et(j.axis.labelpadding*ei,.3*ec.height)),eo=Math.max(eo,ec.width+j.axis.labelpadding)}),ei.exit().remove(),es.maxExtent=eo,es}function drawAxisTitles(i,o,s,_,F,N,j,X){var ee,et,er,en,ei=$.aggNums(Math.min,null,s.a),eo=$.aggNums(Math.max,null,s.a),es=$.aggNums(Math.min,null,s.b),el=$.aggNums(Math.max,null,s.b);ee=.5*(ei+eo),et=es,er=s.ab2xy(ee,et,!0),en=s.dxyda_rough(ee,et),void 0===j.angle&&$.extendFlat(j,Z(s,F,N,er,s.dxydb_rough(ee,et))),drawAxisTitle(i,o,s,_,er,en,s.aaxis,F,N,j,"a-title"),ee=ei,et=.5*(es+el),er=s.ab2xy(ee,et,!0),en=s.dxydb_rough(ee,et),void 0===X.angle&&$.extendFlat(X,Z(s,F,N,er,s.dxyda_rough(ee,et))),drawAxisTitle(i,o,s,_,er,en,s.baxis,F,N,X,"b-title")}i.exports=function(i,o,s,F){var N=i._context.staticPlot,j=o.xaxis,Z=o.yaxis,X=i._fullLayout._clips;$.makeTraceGroups(F,s,"trace").each(function(o){var s=_.select(this),F=o[0],ee=F.trace,et=ee.aaxis,er=ee.baxis,en=$.ensureSingle(s,"g","minorlayer"),ei=$.ensureSingle(s,"g","majorlayer"),eo=$.ensureSingle(s,"g","boundarylayer"),es=$.ensureSingle(s,"g","labellayer");s.style("opacity",ee.opacity),drawGridLines(j,Z,ei,et,"a",et._gridlines,!0,N),drawGridLines(j,Z,ei,er,"b",er._gridlines,!0,N),drawGridLines(j,Z,en,et,"a",et._minorgridlines,!0,N),drawGridLines(j,Z,en,er,"b",er._minorgridlines,!0,N),drawGridLines(j,Z,eo,et,"a-boundary",et._boundarylines,N),drawGridLines(j,Z,eo,er,"b-boundary",er._boundarylines,N);var el=drawAxisLabels(i,j,Z,ee,F,es,et._labels,"a-label"),ec=drawAxisLabels(i,j,Z,ee,F,es,er._labels,"b-label");drawAxisTitles(i,es,ee,F,j,Z,el,ec),drawClipPath(ee,F,X,j,Z)})};var en=er.LINE_SPACING,ei=(1-er.MID_SHIFT)/en+1;function drawAxisTitle(i,o,s,N,j,$,er,eo,es,el,ec){var eu=[];er.title.text&&eu.push(er.title.text);var ef=o.selectAll("text."+ec).data(eu),ed=el.maxExtent;ef.enter().append("text").classed(ec,!0),ef.each(function(){var o=Z(s,eo,es,j,$);-1===["start","both"].indexOf(er.showticklabels)&&(ed=0);var N=er.title.font.size;ed+=N+er.title.offset;var ec=(el.angle+(el.flip<0?180:0)-o.angle+450)%360,eu=_.select(this);eu.text(er.title.text).call(X.convertToTspans,i),ec>90&&ec<270&&(ed=(-X.lineCount(eu)+ei)*en*N-ed),eu.attr("transform",et(o.p[0],o.p[1])+ee(o.angle)+et(0,ed)).attr("text-anchor","middle").call(F.font,er.title.font)}),ef.exit().remove()}},11435:function(i,o,s){"use strict";var _=s(35509),F=s(65888).findBin,N=s(45664),j=s(20349),Z=s(54495),X=s(73057);i.exports=function(i){var o=i._a,s=i._b,$=o.length,ee=s.length,et=i.aaxis,er=i.baxis,en=o[0],ei=o[$-1],eo=s[0],es=s[ee-1],el=o[o.length-1]-o[0],ec=s[s.length-1]-s[0],eu=el*_.RELATIVE_CULL_TOLERANCE,ef=ec*_.RELATIVE_CULL_TOLERANCE;en-=eu,ei+=eu,eo-=ef,es+=ef,i.isVisible=function(i,o){return i>en&&i<ei&&o>eo&&o<es},i.isOccluded=function(i,o){return i<en||i>ei||o<eo||o>es},i.setScale=function(){var o=i._x,s=i._y,_=N(i._xctrl,i._yctrl,o,s,et.smoothing,er.smoothing);i._xctrl=_[0],i._yctrl=_[1],i.evalxy=j([i._xctrl,i._yctrl],$,ee,et.smoothing,er.smoothing),i.dxydi=Z([i._xctrl,i._yctrl],et.smoothing,er.smoothing),i.dxydj=X([i._xctrl,i._yctrl],et.smoothing,er.smoothing)},i.i2a=function(i){var s=Math.max(0,Math.floor(i[0]),$-2),_=i[0]-s;return(1-_)*o[s]+_*o[s+1]},i.j2b=function(i){var o=Math.max(0,Math.floor(i[1]),$-2),_=i[1]-o;return(1-_)*s[o]+_*s[o+1]},i.ij2ab=function(o){return[i.i2a(o[0]),i.j2b(o[1])]},i.a2i=function(i){var s=Math.max(0,Math.min(F(i,o),$-2)),_=o[s],N=o[s+1];return Math.max(0,Math.min($-1,s+(i-_)/(N-_)))},i.b2j=function(i){var o=Math.max(0,Math.min(F(i,s),ee-2)),_=s[o],N=s[o+1];return Math.max(0,Math.min(ee-1,o+(i-_)/(N-_)))},i.ab2ij=function(o){return[i.a2i(o[0]),i.b2j(o[1])]},i.i2c=function(o,s){return i.evalxy([],o,s)},i.ab2xy=function(_,F,N){if(!N&&(_<o[0]||_>o[$-1]|F<s[0]||F>s[ee-1]))return[!1,!1];var j=i.a2i(_),Z=i.b2j(F),X=i.evalxy([],j,Z);if(N){var et,er,en,ei,eo=0,es=0,el=[];_<o[0]?(et=0,er=0,eo=(_-o[0])/(o[1]-o[0])):_>o[$-1]?(et=$-2,er=1,eo=(_-o[$-1])/(o[$-1]-o[$-2])):(et=Math.max(0,Math.min($-2,Math.floor(j))),er=j-et),F<s[0]?(en=0,ei=0,es=(F-s[0])/(s[1]-s[0])):F>s[ee-1]?(en=ee-2,ei=1,es=(F-s[ee-1])/(s[ee-1]-s[ee-2])):(en=Math.max(0,Math.min(ee-2,Math.floor(Z))),ei=Z-en),eo&&(i.dxydi(el,et,en,er,ei),X[0]+=el[0]*eo,X[1]+=el[1]*eo),es&&(i.dxydj(el,et,en,er,ei),X[0]+=el[0]*es,X[1]+=el[1]*es)}return X},i.c2p=function(i,o,s){return[o.c2p(i[0]),s.c2p(i[1])]},i.p2x=function(i,o,s){return[o.p2c(i[0]),s.p2c(i[1])]},i.dadi=function(i){var s=Math.max(0,Math.min(o.length-2,i));return o[s+1]-o[s]},i.dbdj=function(i){var o=Math.max(0,Math.min(s.length-2,i));return s[o+1]-s[o]},i.dxyda=function(o,s,_,F){var N=i.dxydi(null,o,s,_,F),j=i.dadi(o,_);return[N[0]/j,N[1]/j]},i.dxydb=function(o,s,_,F){var N=i.dxydj(null,o,s,_,F),j=i.dbdj(s,F);return[N[0]/j,N[1]/j]},i.dxyda_rough=function(o,s,_){var F=el*(_||.1),N=i.ab2xy(o+F,s,!0),j=i.ab2xy(o-F,s,!0);return[(N[0]-j[0])*.5/F,(N[1]-j[1])*.5/F]},i.dxydb_rough=function(o,s,_){var F=ec*(_||.1),N=i.ab2xy(o,s+F,!0),j=i.ab2xy(o,s-F,!0);return[(N[0]-j[0])*.5/F,(N[1]-j[1])*.5/F]},i.dpdx=function(i){return i._m},i.dpdy=function(i){return i._m}}},72505:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o,s){var F=[],N=[],j=i[0].length,Z=i.length;function avgSurrounding(o,s){var _,F=0,N=0;return o>0&&void 0!==(_=i[s][o-1])&&(N++,F+=_),o<j-1&&void 0!==(_=i[s][o+1])&&(N++,F+=_),s>0&&void 0!==(_=i[s-1][o])&&(N++,F+=_),s<Z-1&&void 0!==(_=i[s+1][o])&&(N++,F+=_),F/Math.max(1,N)}var X=0;for(er=0;er<j;er++)for(en=0;en<Z;en++)void 0===i[en][er]&&(F.push(er),N.push(en),i[en][er]=avgSurrounding(er,en)),X=Math.max(X,Math.abs(i[en][er]));if(!F.length)return i;var $=0,ee=0,et=F.length;do{for(ei=0,$=0;ei<et;ei++){er=F[ei],en=N[ei];var er,en,ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg,em,ey,ev,ex,e_,ew,eT,ek=0,eA=0;0===er?(ex=o[ew=Math.min(j-1,2)],e_=o[1],ey=i[en][ew],eA+=(ev=i[en][1])+(ev-ey)*(o[0]-e_)/(e_-ex),ek++):er===j-1&&(ex=o[ew=Math.max(0,j-3)],e_=o[j-2],ey=i[en][ew],eA+=(ev=i[en][j-2])+(ev-ey)*(o[j-1]-e_)/(e_-ex),ek++),(0===er||er===j-1)&&en>0&&en<Z-1&&(eo=s[en+1]-s[en],eA+=((es=s[en]-s[en-1])*i[en+1][er]+eo*i[en-1][er])/(es+eo),ek++),0===en?(ex=s[eT=Math.min(Z-1,2)],e_=s[1],ey=i[eT][er],eA+=(ev=i[1][er])+(ev-ey)*(s[0]-e_)/(e_-ex),ek++):en===Z-1&&(ex=s[eT=Math.max(0,Z-3)],e_=s[Z-2],ey=i[eT][er],eA+=(ev=i[Z-2][er])+(ev-ey)*(s[Z-1]-e_)/(e_-ex),ek++),(0===en||en===Z-1)&&er>0&&er<j-1&&(eo=o[er+1]-o[er],eA+=((es=o[er]-o[er-1])*i[en][er+1]+eo*i[en][er-1])/(es+eo),ek++),ek?eA/=ek:(el=o[er+1]-o[er],ec=o[er]-o[er-1],eu=s[en+1]-s[en],ef=s[en]-s[en-1],ed=el*ec*(el+ec),eh=eu*ef*(eu+ef),eA=(ed*(ef*i[en+1][er]+eu*i[en-1][er])+eh*(ec*i[en][er+1]+el*i[en][er-1]))/(eh*(ec+el)+ed*(ef+eu))),$+=(eg=(ep=eA-i[en][er])/X)*eg,em=ek?0:.85,i[en][er]+=ep*(1+em)}$=Math.sqrt($)}while(ee++<100&&$>1e-5);return _.log("Smoother converged to",$,"after",ee,"iterations"),i}},19237:function(i,o,s){"use strict";var _=s(71828).isArray1D;i.exports=function(i,o,s){var F=s("x"),N=F&&F.length,j=s("y"),Z=j&&j.length;if(!N&&!Z)return!1;if(o._cheater=!F,(!N||_(F))&&(!Z||_(j))){var X=N?F.length:1/0;Z&&(X=Math.min(X,j.length)),o.a&&o.a.length&&(X=Math.min(X,o.a.length)),o.b&&o.b.length&&(X=Math.min(X,o.b.length)),o._length=X}else o._length=null;return!0}},69568:function(i,o,s){"use strict";var _=s(5386).fF,F=s(19316),N=s(50693),j=s(9012),Z=s(22399).defaultLine,X=s(1426).extendFlat,$=F.marker.line;i.exports=X({locations:{valType:"data_array",editType:"calc"},locationmode:F.locationmode,z:{valType:"data_array",editType:"calc"},geojson:X({},F.geojson,{}),featureidkey:F.featureidkey,text:X({},F.text,{}),hovertext:X({},F.hovertext,{}),marker:{line:{color:X({},$.color,{dflt:Z}),width:X({},$.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:F.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:F.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:X({},j.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:_(),showlegend:X({},j.showlegend,{dflt:!1})},N("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(i,o,s){"use strict";var _=s(92770),F=s(50606).BADNUM,N=s(78803),j=s(75225),Z=s(66279);function isNonBlankString(i){return i&&"string"==typeof i}i.exports=function(i,o){var s,X=o._length,$=Array(X);s=o.geojson?function(i){return isNonBlankString(i)||_(i)}:isNonBlankString;for(var ee=0;ee<X;ee++){var et=$[ee]={},er=o.locations[ee],en=o.z[ee];s(er)&&_(en)?(et.loc=er,et.z=en):(et.loc=null,et.z=F),et.index=ee}return j($,o),N(i,o,{vals:o.z,containerStr:"",cLetter:"z"}),Z($,o),$}},61869:function(i,o,s){"use strict";var _=s(71828),F=s(1586),N=s(69568);i.exports=function(i,o,s,j){function coerce(s,F){return _.coerce(i,o,N,s,F)}var Z,X=coerce("locations"),$=coerce("z");if(!(X&&X.length&&_.isArrayOrTypedArray($)&&$.length)){o.visible=!1;return}o._length=Math.min(X.length,$.length);var ee=coerce("geojson");("string"==typeof ee&&""!==ee||_.isPlainObject(ee))&&(Z="geojson-id"),"geojson-id"===coerce("locationmode",Z)&&coerce("featureidkey"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("marker.line.width")&&coerce("marker.line.color"),coerce("marker.opacity"),F(i,o,j,coerce,{prefix:"",cLetter:"z"}),_.coerceSelectionMarkerOpacity(o,coerce)}},92069:function(i){"use strict";i.exports=function(i,o,s,_,F){i.location=o.location,i.z=o.z;var N=_[F];return N.fIn&&N.fIn.properties&&(i.properties=N.fIn.properties),i.ct=N.ct,i}},42300:function(i,o,s){"use strict";var _=s(89298),F=s(69568),N=s(71828).fillText;function makeHoverInfo(i,o,s){if(!o.hovertemplate){var _=s.hi||o.hoverinfo,j=String(s.loc),Z="all"===_?F.hoverinfo.flags:_.split("+"),X=-1!==Z.indexOf("name"),$=-1!==Z.indexOf("location"),ee=-1!==Z.indexOf("z"),et=-1!==Z.indexOf("text"),er=[];!X&&$?i.nameOverride=j:(X&&(i.nameOverride=o.name),$&&er.push(j)),ee&&er.push(i.zLabel),et&&N(s,o,er),i.extraText=er.join("<br>")}}i.exports=function(i,o,s){var F,N,j,Z,X=i.cd,$=X[0].trace,ee=i.subplot,et=[o,s],er=[o+360,s];for(N=0;N<X.length;N++)if(F=X[N],Z=!1,F._polygons){for(j=0;j<F._polygons.length;j++)F._polygons[j].contains(et)&&(Z=!Z),F._polygons[j].contains(er)&&(Z=!Z);if(Z)break}if(Z&&F)return i.x0=i.x1=i.xa.c2p(F.ct),i.y0=i.y1=i.ya.c2p(F.ct),i.index=F.index,i.location=F.loc,i.z=F.z,i.zLabel=_.tickText(ee.mockAxis,ee.mockAxis.c2l(F.z),"hover").text,i.hovertemplate=F.hovertemplate,makeHoverInfo(i,$,F),[i]}},51319:function(i,o,s){"use strict";i.exports={attributes:s(69568),supplyDefaults:s(61869),colorbar:s(61243),calc:s(38675),calcGeoJSON:s(99841).calcGeoJSON,plot:s(99841).plot,style:s(99636).style,styleOnSelect:s(99636).styleOnSelect,hoverPoints:s(42300),eventData:s(92069),selectPoints:s(81253),moduleType:"trace",name:"choropleth",basePlotModule:s(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(41327),j=s(90973).getTopojsonFeatures,Z=s(71739).findExtremes,X=s(99636).style;function plot(i,o,s){var N=o.layers.backplot.select(".choroplethlayer");F.makeTraceGroups(N,s,"trace choropleth").each(function(o){var s=_.select(this).selectAll("path.choroplethlocation").data(F.identity);s.enter().append("path").classed("choroplethlocation",!0),s.exit().remove(),X(i,o)})}function calcGeoJSON(i,o){for(var s=i[0].trace,_=o[s.geo],F=_._subplot,X=s.locationmode,$=s._length,ee="geojson-id"===X?N.extractTraceFeature(i):j(s,F.topojson),et=[],er=[],en=0;en<$;en++){var ei=i[en],eo="geojson-id"===X?ei.fOut:N.locationToFeature(X,ei.loc,ee);if(eo){ei.geojson=eo,ei.ct=eo.properties.ct,ei._polygons=N.feature2polygons(eo);var es=N.computeBbox(eo);et.push(es[0],es[2]),er.push(es[1],es[3])}else ei.geojson=null}if("geojson"===_.fitbounds&&"geojson-id"===X){var el=N.computeBbox(N.getTraceGeojson(s));et=[el[0],el[2]],er=[el[1],el[3]]}var ec={padded:!0};s._extremes.lon=Z(_.lonaxis._ax,et,ec),s._extremes.lat=Z(_.lataxis._ax,er,ec)}i.exports={calcGeoJSON:calcGeoJSON,plot:plot}},81253:function(i){"use strict";i.exports=function(i,o){var s,_,F,N,j,Z=i.cd,X=i.xaxis,$=i.yaxis,ee=[];if(!1===o)for(s=0;s<Z.length;s++)Z[s].selected=0;else for(s=0;s<Z.length;s++)(F=(_=Z[s]).ct)&&(N=X.c2p(F),j=$.c2p(F),o.contains([N,j],null,s,i)?(ee.push({pointNumber:s,lon:F[0],lat:F[1]}),_.selected=1):_.selected=0);return ee}},99636:function(i,o,s){"use strict";var _=s(39898),F=s(7901),N=s(91424),j=s(21081);function style(i,o){o&&styleTrace(i,o)}function styleTrace(i,o){var s=o[0].trace,Z=o[0].node3.selectAll(".choroplethlocation"),X=s.marker||{},$=X.line||{},ee=j.makeColorScaleFuncFromTrace(s);Z.each(function(i){_.select(this).attr("fill",ee(i.z)).call(F.stroke,i.mlc||$.color).call(N.dashLine,"",i.mlw||$.width||0).style("opacity",X.opacity)}),N.selectedPointStyle(Z,s)}function styleOnSelect(i,o){var s=o[0].node3,_=o[0].trace;_.selectedpoints?N.selectedPointStyle(s.selectAll(".choroplethlocation"),_):styleTrace(i,o)}i.exports={style:style,styleOnSelect:styleOnSelect}},64496:function(i,o,s){"use strict";var _=s(69568),F=s(50693),N=s(5386).fF,j=s(9012),Z=s(1426).extendFlat;i.exports=Z({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:Z({},_.featureidkey,{}),below:{valType:"string",editType:"plot"},text:_.text,hovertext:_.hovertext,marker:{line:{color:Z({},_.marker.line.color,{editType:"plot"}),width:Z({},_.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:Z({},_.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:Z({},_.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:Z({},_.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:_.hoverinfo,hovertemplate:N({},{keys:["properties"]}),showlegend:Z({},j.showlegend,{dflt:!1})},F("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(21081),j=s(91424),Z=s(18214).makeBlank,X=s(41327);function convert(i){var o,s,j,$=i[0].trace,ee=!0===$.visible&&0!==$._length,et={layout:{visibility:"none"},paint:{}},er={layout:{visibility:"none"},paint:{}},en=$._opts={fill:et,line:er,geojson:Z()};if(!ee)return en;var ei=X.extractTraceFeature(i);if(!ei)return en;var eo=N.makeColorScaleFuncFromTrace($),es=$.marker,el=es.line||{};F.isArrayOrTypedArray(es.opacity)&&(o=function(i){var o=i.mo;return _(o)?+F.constrain(o,0,1):0}),F.isArrayOrTypedArray(el.color)&&(s=function(i){return i.mlc}),F.isArrayOrTypedArray(el.width)&&(j=function(i){return i.mlw});for(var ec=0;ec<i.length;ec++){var eu=i[ec],ef=eu.fOut;if(ef){var ed=ef.properties;ed.fc=eo(eu.z),o&&(ed.mo=o(eu)),s&&(ed.mlc=s(eu)),j&&(ed.mlw=j(eu)),eu.ct=ed.ct,eu._polygons=X.feature2polygons(ef)}}var eh=o?{type:"identity",property:"mo"}:es.opacity;return F.extendFlat(et.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":eh}),F.extendFlat(er.paint,{"line-color":s?{type:"identity",property:"mlc"}:el.color,"line-width":j?{type:"identity",property:"mlw"}:el.width,"line-opacity":eh}),et.layout.visibility="visible",er.layout.visibility="visible",en.geojson={type:"FeatureCollection",features:ei},convertOnSelect(i),en}function convertOnSelect(i){var o,s=i[0].trace,_=s._opts;if(s.selectedpoints){for(var N=j.makeSelectedPointStyleFns(s),Z=0;Z<i.length;Z++){var X=i[Z];X.fOut&&(X.fOut.properties.mo2=N.selectedOpacityFn(X))}o={type:"identity",property:"mo2"}}else o=F.isArrayOrTypedArray(s.marker.opacity)?{type:"identity",property:"mo"}:s.marker.opacity;return F.extendFlat(_.fill.paint,{"fill-opacity":o}),F.extendFlat(_.line.paint,{"line-opacity":o}),_}i.exports={convert:convert,convertOnSelect:convertOnSelect}},22654:function(i,o,s){"use strict";var _=s(71828),F=s(1586),N=s(64496);i.exports=function(i,o,s,j){function coerce(s,F){return _.coerce(i,o,N,s,F)}var Z=coerce("locations"),X=coerce("z"),$=coerce("geojson");if(!_.isArrayOrTypedArray(Z)||!Z.length||!_.isArrayOrTypedArray(X)||!X.length||!("string"==typeof $&&""!==$||_.isPlainObject($))){o.visible=!1;return}coerce("featureidkey"),o._length=Math.min(Z.length,X.length),coerce("below"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("marker.line.width")&&coerce("marker.line.color"),coerce("marker.opacity"),F(i,o,j,coerce,{prefix:"",cLetter:"z"}),_.coerceSelectionMarkerOpacity(o,coerce)}},57516:function(i,o,s){"use strict";i.exports={attributes:s(64496),supplyDefaults:s(22654),colorbar:s(61243),calc:s(38675),plot:s(7852),hoverPoints:s(42300),eventData:s(92069),selectPoints:s(81253),styleOnSelect:function(i,o){o&&o[0].trace._glTrace.updateOnSelect(o)},getBelow:function(i,o){for(var s=o.getMapLayers(),_=s.length-2;_>=0;_--){var F=s[_].id;if("string"==typeof F&&0===F.indexOf("water")){for(var N=_+1;N<s.length;N++)if("string"==typeof(F=s[N].id)&&-1===F.indexOf("plotly-"))return F}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:s(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(i,o,s){"use strict";var _=s(82004).convert,F=s(82004).convertOnSelect,N=s(77734).traceLayerPrefix;function ChoroplethMapbox(i,o){this.type="choroplethmapbox",this.subplot=i,this.uid=o,this.sourceId="source-"+o,this.layerList=[["fill",N+o+"-fill"],["line",N+o+"-line"]],this.below=null}var j=ChoroplethMapbox.prototype;j.update=function(i){this._update(_(i)),i[0].trace._glTrace=this},j.updateOnSelect=function(i){this._update(F(i))},j._update=function(i){var o=this.subplot,s=this.layerList,_=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(i.geojson),_!==this.below&&(this._removeLayers(),this._addLayers(i,_),this.below=_);for(var F=0;F<s.length;F++){var N=s[F],j=N[0],Z=N[1],X=i[j];o.setOptions(Z,"setLayoutProperty",X.layout),"visible"===X.layout.visibility&&o.setOptions(Z,"setPaintProperty",X.paint)}},j._addLayers=function(i,o){for(var s=this.subplot,_=this.layerList,F=this.sourceId,N=0;N<_.length;N++){var j=_[N],Z=j[0],X=i[Z];s.addLayer({type:Z,id:j[1],source:F,layout:X.layout,paint:X.paint},o)}},j._removeLayers=function(){for(var i=this.subplot.map,o=this.layerList,s=o.length-1;s>=0;s--)i.removeLayer(o[s][1])},j.dispose=function(){var i=this.subplot.map;this._removeLayers(),i.removeSource(this.sourceId)},i.exports=function(i,o){var s=o[0].trace,F=new ChoroplethMapbox(i,s.uid),N=F.sourceId,j=_(o),Z=F.below=i.belowLookup["trace-"+s.uid];return i.map.addSource(N,{type:"geojson",data:j.geojson}),F._addLayers(j,Z),o[0].trace._glTrace=F,F}},12674:function(i,o,s){"use strict";var _=s(50693),F=s(12663).axisHoverFormat,N=s(5386).fF,j=s(2418),Z=s(9012),X=s(1426).extendFlat,$={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:N({editType:"calc"},{keys:["norm"]}),uhoverformat:F("u",1),vhoverformat:F("v",1),whoverformat:F("w",1),xhoverformat:F("x"),yhoverformat:F("y"),zhoverformat:F("z"),showlegend:X({},Z.showlegend,{dflt:!1})};X($,_("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(i){$[i]=j[i]}),$.hoverinfo=X({},Z.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),$.transforms=void 0,i.exports=$},31371:function(i,o,s){"use strict";var _=s(78803);i.exports=function(i,o){for(var s=o.u,F=o.v,N=o.w,j=Math.min(o.x.length,o.y.length,o.z.length,s.length,F.length,N.length),Z=-1/0,X=1/0,$=0;$<j;$++){var ee=s[$],et=F[$],er=N[$],en=Math.sqrt(ee*ee+et*et+er*er);Z=Math.max(Z,en),X=Math.min(X,en)}o._len=j,o._normMax=Z,_(i,o,{vals:[X,Z],containerStr:"",cLetter:"c"})}},5453:function(i,o,s){"use strict";var _=s(9330).gl_cone3d,F=s(9330).gl_cone3d.createConeMesh,N=s(71828).simpleMap,j=s(81697).parseColorScale,Z=s(21081).extractOpts,X=s(90060);function Cone(i,o){this.scene=i,this.uid=o,this.mesh=null,this.data=null}var $=Cone.prototype;$.handlePick=function(i){if(i.object===this.mesh){var o=i.index=i.data.index,s=this.data.x[o],_=this.data.y[o],F=this.data.z[o],N=this.data.u[o],j=this.data.v[o],Z=this.data.w[o];i.traceCoordinate=[s,_,F,N,j,Z,Math.sqrt(N*N+j*j+Z*Z)];var X=this.data.hovertext||this.data.text;return Array.isArray(X)&&void 0!==X[o]?i.textLabel=X[o]:X&&(i.textLabel=X),!0}};var ee={xaxis:0,yaxis:1,zaxis:2},et={tip:1,tail:0,cm:.25,center:.5},er={tip:1,tail:1,cm:.75,center:.5};function convert(i,o){var s=i.fullSceneLayout,F=i.dataScale,$={};function toDataCoords(i,o){var _=s[o],j=F[ee[o]];return N(i,function(i){return _.d2l(i)*j})}$.vectors=X(toDataCoords(o.u,"xaxis"),toDataCoords(o.v,"yaxis"),toDataCoords(o.w,"zaxis"),o._len),$.positions=X(toDataCoords(o.x,"xaxis"),toDataCoords(o.y,"yaxis"),toDataCoords(o.z,"zaxis"),o._len);var en=Z(o);$.colormap=j(o),$.vertexIntensityBounds=[en.min/o._normMax,en.max/o._normMax],$.coneOffset=et[o.anchor],"scaled"===o.sizemode?$.coneSize=o.sizeref||.5:$.coneSize=o.sizeref&&o._normMax?o.sizeref/o._normMax:.5;var ei=_($),eo=o.lightposition;return ei.lightPosition=[eo.x,eo.y,eo.z],ei.ambient=o.lighting.ambient,ei.diffuse=o.lighting.diffuse,ei.specular=o.lighting.specular,ei.roughness=o.lighting.roughness,ei.fresnel=o.lighting.fresnel,ei.opacity=o.opacity,o._pad=er[o.anchor]*ei.vectorScale*ei.coneScale*o._normMax,ei}function createConeTrace(i,o){var s=F(i.glplot.gl,convert(i,o)),_=new Cone(i,o.uid);return _.mesh=s,_.data=o,s._trace=_,i.glplot.add(s),_}$.update=function(i){this.data=i;var o=convert(this.scene,i);this.mesh.update(o)},$.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},i.exports=createConeTrace},91750:function(i,o,s){"use strict";var _=s(71828),F=s(1586),N=s(12674);i.exports=function(i,o,s,j){function coerce(s,F){return _.coerce(i,o,N,s,F)}var Z=coerce("u"),X=coerce("v"),$=coerce("w"),ee=coerce("x"),et=coerce("y"),er=coerce("z");if(!Z||!Z.length||!X||!X.length||!$||!$.length||!ee||!ee.length||!et||!et.length||!er||!er.length){o.visible=!1;return}coerce("sizeref"),coerce("sizemode"),coerce("anchor"),coerce("lighting.ambient"),coerce("lighting.diffuse"),coerce("lighting.specular"),coerce("lighting.roughness"),coerce("lighting.fresnel"),coerce("lightposition.x"),coerce("lightposition.y"),coerce("lightposition.z"),F(i,o,j,coerce,{prefix:"",cLetter:"c"}),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("uhoverformat"),coerce("vhoverformat"),coerce("whoverformat"),coerce("xhoverformat"),coerce("yhoverformat"),coerce("zhoverformat"),o._length=null}},98128:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"cone",basePlotModule:s(58547),categories:["gl3d","showLegend"],attributes:s(12674),supplyDefaults:s(91750),colorbar:{min:"cmin",max:"cmax"},calc:s(31371),plot:s(5453),eventData:function(i,o){return i.norm=o.traceCoordinate[6],i},meta:{}}},70600:function(i,o,s){"use strict";var _=s(21606),F=s(82196),N=s(12663),j=N.axisHoverFormat,Z=N.descriptionOnlyNumbers,X=s(50693),$=s(79952).P,ee=s(41940),et=s(1426).extendFlat,er=s(74808),en=er.COMPARISON_OPS2,ei=er.INTERVAL_OPS,eo=F.line;i.exports=et({z:_.z,x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:F.xperiod0,yperiod0:F.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,text:_.text,hovertext:_.hovertext,transpose:_.transpose,xtype:_.xtype,ytype:_.ytype,xhoverformat:j("x"),yhoverformat:j("y"),zhoverformat:j("z",1),hovertemplate:_.hovertemplate,texttemplate:et({},_.texttemplate,{}),textfont:et({},_.textfont,{}),hoverongaps:_.hoverongaps,connectgaps:et({},_.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:ee({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:Z("contour label")},operation:{valType:"enumerated",values:[].concat(en).concat(ei),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:et({},eo.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:$,smoothing:et({},eo.smoothing,{}),editType:"plot"}},X("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(i,o,s){"use strict";var _=s(21081),F=s(90757),N=s(18670),j=s(53572);i.exports=function(i,o){var s,Z=F(i,o),X=Z[0].z;N(o,X);var $=o.contours,ee=_.extractOpts(o);if("heatmap"===$.coloring&&ee.auto&&!1===o.autocontour){var et=$.start,er=j($),en=$.size||1,ei=Math.floor((er-et)/en)+1;isFinite(en)||(en=1,ei=1);var eo=et-en/2,es=eo+ei*en;s=[eo,es]}else s=X;return _.calc(i,o,{vals:s,cLetter:"z"}),Z}},20083:function(i){"use strict";i.exports=function(i,o){var s=i[0],_=s.z;switch(o.type){case"levels":var F=Math.min(_[0][0],_[0][1]);for(j=0;j<i.length;j++){var N=i[j];N.prefixBoundary=!N.edgepaths.length&&(F>N.level||N.starts.length&&F===N.level)}break;case"constraint":if(s.prefixBoundary=!1,s.edgepaths.length)return;var j,Z,X,$=s.x.length,ee=s.y.length,et=-1/0,er=1/0;for(j=0;j<ee;j++)er=Math.min(er=Math.min(er,_[j][0]),_[j][$-1]),et=Math.max(et=Math.max(et,_[j][0]),_[j][$-1]);for(j=1;j<$-1;j++)er=Math.min(er=Math.min(er,_[0][j]),_[ee-1][j]),et=Math.max(et=Math.max(et,_[0][j]),_[ee-1][j]);var en=o.value;switch(o._operation){case">":en>et&&(s.prefixBoundary=!0);break;case"<":(en<er||s.starts.length&&en===er)&&(s.prefixBoundary=!0);break;case"[]":Z=Math.min(en[0],en[1]),((X=Math.max(en[0],en[1]))<er||Z>et||s.starts.length&&X===er)&&(s.prefixBoundary=!0);break;case"][":Z=Math.min(en[0],en[1]),X=Math.max(en[0],en[1]),Z<er&&X>et&&(s.prefixBoundary=!0)}}}},90654:function(i,o,s){"use strict";var _=s(21081),F=s(86068),N=s(53572);function calc(i,o,s){var j=o.contours,Z=o.line,X=j.size||1,$=j.coloring,ee=F(o,{isColorbar:!0});if("heatmap"===$){var et=_.extractOpts(o);s._fillgradient=et.reversescale?_.flipScale(et.colorscale):et.colorscale,s._zrange=[et.min,et.max]}else"fill"===$&&(s._fillcolor=ee);s._line={color:"lines"===$?ee:Z.color,width:!1!==j.showlines?Z.width:0,dash:Z.dash},s._levels={start:j.start,end:N(j),size:X}}i.exports={min:"zmin",max:"zmax",calc:calc}},36914:function(i){"use strict";i.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(i,o,s){"use strict";var _=s(92770),F=s(14523),N=s(7901),j=N.addOpacity,Z=N.opacity,X=s(74808),$=X.CONSTRAINT_REDUCTION,ee=X.COMPARISON_OPS2;function handleConstraintValueDefaults(i,o){var s;-1===ee.indexOf(o.operation)?(i("contours.value",[0,1]),Array.isArray(o.value)?o.value.length>2?o.value=o.value.slice(2):0===o.length?o.value=[0,1]:o.length<2?(s=parseFloat(o.value[0]),o.value=[s,s+1]):o.value=[parseFloat(o.value[0]),parseFloat(o.value[1])]:_(o.value)&&(s=parseFloat(o.value),o.value=[s,s+1])):(i("contours.value",0),_(o.value)||(Array.isArray(o.value)?o.value=parseFloat(o.value[0]):o.value=0))}i.exports=function(i,o,s,_,N,X){var ee,et,er,en=o.contours,ei=s("contours.operation");en._operation=$[ei],handleConstraintValueDefaults(s,en),"="===ei?ee=en.showlines=!0:(ee=s("contours.showlines"),er=s("fillcolor",j((i.line||{}).color||N,.5))),ee&&(et=s("line.color",er&&Z(er)?j(o.fillcolor,1):N),s("line.width",2),s("line.dash")),s("line.smoothing"),F(s,_,et,X)}},64237:function(i,o,s){"use strict";var _=s(74808),F=s(92770);function coerceValue(i,o){var s,N=Array.isArray(o);function coerce(i){return F(i)?+i:null}return -1!==_.COMPARISON_OPS2.indexOf(i)?s=coerce(N?o[0]:o):-1!==_.INTERVAL_OPS.indexOf(i)?s=N?[coerce(o[0]),coerce(o[1])]:[coerce(o),coerce(o)]:-1!==_.SET_OPS.indexOf(i)&&(s=N?o.map(coerce):[coerce(o)]),s}function makeRangeSettings(i){return function(o){var s=Math.min((o=coerceValue(i,o))[0],o[1]),_=Math.max(o[0],o[1]);return{start:s,end:_,size:_-s}}}function makeInequalitySettings(i){return function(o){return{start:o=coerceValue(i,o),end:1/0,size:1/0}}}i.exports={"[]":makeRangeSettings("[]"),"][":makeRangeSettings("]["),">":makeInequalitySettings(">"),"<":makeInequalitySettings("<"),"=":makeInequalitySettings("=")}},67217:function(i){"use strict";i.exports=function(i,o,s,_){var F=_("contours.start"),N=_("contours.end"),j=s("contours.size");((!1===F||!1===N?o.autocontour=!0:s("autocontour",!1))||!j)&&s("ncontours")}},84857:function(i,o,s){"use strict";var _=s(71828);function copyPathinfo(i){return _.extendFlat({},i,{edgepaths:_.extendDeep([],i.edgepaths),paths:_.extendDeep([],i.paths),starts:_.extendDeep([],i.starts)})}i.exports=function(i,o){var s,F,N,op0=function(i){return i.reverse()},op1=function(i){return i};switch(o){case"=":case"<":return i;case">":for(1!==i.length&&_.warn("Contour data invalid for the specified inequality operation."),F=i[0],s=0;s<F.edgepaths.length;s++)F.edgepaths[s]=op0(F.edgepaths[s]);for(s=0;s<F.paths.length;s++)F.paths[s]=op0(F.paths[s]);for(s=0;s<F.starts.length;s++)F.starts[s]=op0(F.starts[s]);return i;case"][":var j=op0;op0=op1,op1=j;case"[]":for(2!==i.length&&_.warn("Contour data invalid for the specified inequality range operation."),F=copyPathinfo(i[0]),N=copyPathinfo(i[1]),s=0;s<F.edgepaths.length;s++)F.edgepaths[s]=op0(F.edgepaths[s]);for(s=0;s<F.paths.length;s++)F.paths[s]=op0(F.paths[s]);for(s=0;s<F.starts.length;s++)F.starts[s]=op0(F.starts[s]);for(;N.edgepaths.length;)F.edgepaths.push(op1(N.edgepaths.shift()));for(;N.paths.length;)F.paths.push(op1(N.paths.shift()));for(;N.starts.length;)F.starts.push(op1(N.starts.shift()));return[F]}}},13031:function(i,o,s){"use strict";var _=s(71828),F=s(67684),N=s(73927),j=s(83179),Z=s(67217),X=s(8724),$=s(58623),ee=s(70600);i.exports=function(i,o,s,et){function coerce(s,F){return _.coerce(i,o,ee,s,F)}function coerce2(s){return _.coerce2(i,o,ee,s)}if(!F(i,o,coerce,et)){o.visible=!1;return}N(i,o,et,coerce),coerce("xhoverformat"),coerce("yhoverformat"),coerce("text"),coerce("hovertext"),coerce("hoverongaps"),coerce("hovertemplate");var er="constraint"===coerce("contours.type");coerce("connectgaps",_.isArray1D(o.z)),er?j(i,o,coerce,et,s):(Z(i,o,coerce,coerce2),X(i,o,coerce,et)),o.contours&&"heatmap"===o.contours.coloring&&$(coerce,et)}},87558:function(i,o,s){"use strict";var _=s(71828),F=s(64237),N=s(53572);i.exports=function(i,o,s){for(var j="constraint"===i.type?F[i._operation](i.value):i,Z=j.size,X=[],$=N(j),ee=s.trace._carpetTrace,et=ee?{xaxis:ee.aaxis,yaxis:ee.baxis,x:s.a,y:s.b}:{xaxis:o.xaxis,yaxis:o.yaxis,x:s.x,y:s.y},er=j.start;er<$;er+=Z)if(X.push(_.extendFlat({level:er,crossings:{},starts:[],edgepaths:[],paths:[],z:s.z,smoothing:s.trace.line.smoothing},et)),X.length>1e3){_.warn("Too many contours, clipping at 1000",i);break}return X}},53572:function(i){"use strict";i.exports=function(i){return i.end+i.size/1e6}},81696:function(i,o,s){"use strict";var _=s(71828),F=s(36914);function equalPts(i,o,s,_){return Math.abs(i[0]-o[0])<s&&Math.abs(i[1]-o[1])<_}function ptDist(i,o){var s=i[2]-o[2],_=i[3]-o[3];return Math.sqrt(s*s+_*_)}function makePath(i,o,s,N,j){var Z,X,$,ee,et,er,en,ei,eo,es,el,ec,eu=o.join(","),ef=i.crossings[eu],ed=getStartStep(ef,s,o),eh=[getInterpPx(i,o,[-ed[0],-ed[1]])],ep=i.z.length,eg=i.z[0].length,em=o.slice(),ey=ed.slice();for(Z=0;Z<1e4;Z++){if(ef>20?(ef=F.CHOOSESADDLE[ef][0>(ed[0]||ed[1])?0:1],i.crossings[eu]=F.SADDLEREMAINDER[ef]):delete i.crossings[eu],!(ed=F.NEWDELTA[ef])){_.log("Found bad marching index:",ef,o,i.level);break}eh.push(getInterpPx(i,o,ed)),o[0]+=ed[0],o[1]+=ed[1],eu=o.join(","),equalPts(eh[eh.length-1],eh[eh.length-2],N,j)&&eh.pop();var ev=ed[0]&&(o[0]<0||o[0]>eg-2)||ed[1]&&(o[1]<0||o[1]>ep-2);if(o[0]===em[0]&&o[1]===em[1]&&ed[0]===ey[0]&&ed[1]===ey[1]||s&&ev)break;ef=i.crossings[eu]}1e4===Z&&_.log("Infinite loop in contour?");var ex=equalPts(eh[0],eh[eh.length-1],N,j),e_=0,ew=.2*i.smoothing,eT=[],ek=0;for(Z=1;Z<eh.length;Z++)e_+=ei=ptDist(eh[Z],eh[Z-1]),eT.push(ei);var eA=e_/eT.length*ew;function getpt(i){return eh[i%eh.length]}for(Z=eh.length-2;Z>=ek;Z--)if((X=eT[Z])<eA){for(ee=0,$=Z-1;$>=ek&&X+eT[$]<eA;$--)X+=eT[$];if(ex&&Z===eh.length-2)for(ee=0;ee<$&&X+eT[ee]<eA;ee++)X+=eT[ee];er=Z-$+ee+1,en=Math.floor((Z+$+ee+2)/2),et=ex||Z!==eh.length-2?ex||-1!==$?er%2?getpt(en):[(getpt(en)[0]+getpt(en+1)[0])/2,(getpt(en)[1]+getpt(en+1)[1])/2]:eh[0]:eh[eh.length-1],eh.splice($+1,Z-$+1,et),Z=$+1,ee&&(ek=ee),ex&&(Z===eh.length-2?eh[ee]=eh[eh.length-1]:0===Z&&(eh[eh.length-1]=eh[0]))}for(eh.splice(0,ek),Z=0;Z<eh.length;Z++)eh[Z].length=2;if(!(eh.length<2)){if(ex)eh.pop(),i.paths.push(eh);else{s||_.log("Unclosed interior contour?",i.level,em.join(","),eh.join("L"));var eS=!1;for(eo=0;eo<i.edgepaths.length;eo++)if(el=i.edgepaths[eo],!eS&&equalPts(el[0],eh[eh.length-1],N,j)){eh.pop(),eS=!0;var eM=!1;for(es=0;es<i.edgepaths.length;es++)if(equalPts((ec=i.edgepaths[es])[ec.length-1],eh[0],N,j)){eM=!0,eh.shift(),i.edgepaths.splice(eo,1),es===eo?i.paths.push(eh.concat(ec)):(es>eo&&es--,i.edgepaths[es]=ec.concat(eh,el));break}eM||(i.edgepaths[eo]=eh.concat(el))}for(eo=0;eo<i.edgepaths.length&&!eS;eo++)equalPts((el=i.edgepaths[eo])[el.length-1],eh[0],N,j)&&(eh.shift(),i.edgepaths[eo]=el.concat(eh),eS=!0);eS||i.edgepaths.push(eh)}}}function getStartStep(i,o,s){var _=0,N=0;return i>20&&o?208===i||1114===i?_=0===s[0]?1:-1:N=0===s[1]?1:-1:-1!==F.BOTTOMSTART.indexOf(i)?N=1:-1!==F.LEFTSTART.indexOf(i)?_=1:-1!==F.TOPSTART.indexOf(i)?N=-1:_=-1,[_,N]}function getInterpPx(i,o,s){var _=o[0]+Math.max(s[0],0),F=o[1]+Math.max(s[1],0),N=i.z[F][_],j=i.xaxis,Z=i.yaxis;if(s[1]){var X=(i.level-N)/(i.z[F][_+1]-N),$=(1!==X?(1-X)*j.c2l(i.x[_]):0)+(0!==X?X*j.c2l(i.x[_+1]):0);return[j.c2p(j.l2c($),!0),Z.c2p(i.y[F],!0),_+X,F]}var ee=(i.level-N)/(i.z[F+1][_]-N),et=(1!==ee?(1-ee)*Z.c2l(i.y[F]):0)+(0!==ee?ee*Z.c2l(i.y[F+1]):0);return[j.c2p(i.x[_],!0),Z.c2p(Z.l2c(et),!0),_,F+ee]}i.exports=function(i,o,s){var F,N,j,Z,X;for(j=0,o=o||.01,s=s||.01;j<i.length;j++){for(X=0,Z=i[j];X<Z.starts.length;X++)N=Z.starts[X],makePath(Z,N,"edge",o,s);for(F=0;Object.keys(Z.crossings).length&&F<1e4;)F++,N=Object.keys(Z.crossings)[0].split(",").map(Number),makePath(Z,N,void 0,o,s);1e4===F&&_.log("Infinite loop in contour?")}}},52421:function(i,o,s){"use strict";var _=s(7901),F=s(46248);i.exports=function(i,o,s,N,j){j||(j={}),j.isContour=!0;var Z=F(i,o,s,N,j);return Z&&Z.forEach(function(i){var o=i.trace;"constraint"===o.contours.type&&(o.fillcolor&&_.opacity(o.fillcolor)?i.color=_.addOpacity(o.fillcolor,1):o.contours.showlines&&_.opacity(o.line.color)&&(i.color=_.addOpacity(o.line.color,1)))}),Z}},99442:function(i,o,s){"use strict";i.exports={attributes:s(70600),supplyDefaults:s(13031),calc:s(27529),plot:s(29854).plot,style:s(84426),colorbar:s(90654),hoverPoints:s(52421),moduleType:"trace",name:"contour",basePlotModule:s(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o,s,F){if(F||(F={}),i("contours.showlabels")){var N=o.font;_.coerceFont(i,"contours.labelfont",{family:N.family,size:N.size,color:s}),i("contours.labelformat")}!1!==F.hasHover&&i("zhoverformat")}},86068:function(i,o,s){"use strict";var _=s(39898),F=s(21081),N=s(53572);i.exports=function(i){var o,s,j=i.contours,Z=j.start,X=N(j),$=j.size||1,ee=Math.floor((X-Z)/$)+1,et="lines"===j.coloring?0:1,er=F.extractOpts(i);isFinite($)||($=1,ee=1);var en=er.reversescale?F.flipScale(er.colorscale):er.colorscale,ei=en.length,eo=Array(ei),es=Array(ei),el=er.min,ec=er.max;if("heatmap"===j.coloring){for(s=0;s<ei;s++)o=en[s],eo[s]=o[0]*(ec-el)+el,es[s]=o[1];var eu=_.extent([el,ec,j.start,j.start+$*(ee-1)]),ef=eu[el<ec?0:1],ed=eu[el<ec?1:0];ef!==el&&(eo.splice(0,0,ef),es.splice(0,0,es[0])),ed!==ec&&(eo.push(ed),es.push(es[es.length-1]))}else{var eh=i._input&&"number"==typeof i._input.zmin&&"number"==typeof i._input.zmax;for(eh&&(Z<=el||X>=ec)&&(Z<=el&&(Z=el),X>=ec&&(X=ec),ee=Math.floor((X-Z)/$)+1,et=0),s=0;s<ei;s++)o=en[s],eo[s]=(o[0]*(ee+et-1)-et/2)*$+Z,es[s]=o[1];(eh||i.autocontour)&&(eo[0]>el&&(eo.unshift(el),es.unshift(es[0])),eo[eo.length-1]<ec&&(eo.push(ec),es.push(es[es.length-1])))}return F.makeColorScaleFunc({domain:eo,range:es},{noNumericCheck:!0})}},87678:function(i,o,s){"use strict";var _=s(36914);function getMarchingIndex(i,o){var s=(o[0][0]>i?0:1)+(o[0][1]>i?0:2)+(o[1][1]>i?0:4)+(o[1][0]>i?0:8);return 5===s||10===s?i>(o[0][0]+o[0][1]+o[1][0]+o[1][1])/4?5===s?713:1114:5===s?104:208:15===s?0:s}i.exports=function(i){var o,s,F,N,j,Z,X,$,ee,et=i[0].z,er=et.length,en=et[0].length,ei=2===er||2===en;for(s=0;s<er-1;s++)for(N=[],0===s&&(N=N.concat(_.BOTTOMSTART)),s===er-2&&(N=N.concat(_.TOPSTART)),o=0;o<en-1;o++)for(F=N.slice(),0===o&&(F=F.concat(_.LEFTSTART)),o===en-2&&(F=F.concat(_.RIGHTSTART)),j=o+","+s,Z=[[et[s][o],et[s][o+1]],[et[s+1][o],et[s+1][o+1]]],ee=0;ee<i.length;ee++)(X=getMarchingIndex(($=i[ee]).level,Z))&&($.crossings[j]=X,-1!==F.indexOf(X)&&($.starts.push([o,s]),ei&&-1!==F.indexOf(X,F.indexOf(X)+1)&&$.starts.push([o,s])))}},29854:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(91424),j=s(21081),Z=s(63893),X=s(89298),$=s(21994),ee=s(50347),et=s(87678),er=s(81696),en=s(87558),ei=s(84857),eo=s(20083),es=s(36914),el=es.LABELOPTIMIZER;function makeBackground(i,o,s){var _=F.ensureSingle(i,"g","contourbg").selectAll("path").data("fill"===s.coloring?[0]:[]);_.enter().append("path"),_.exit().remove(),_.attr("d","M"+o.join("L")+"Z").style("stroke","none")}function makeFills(i,o,s,N){var j="fill"===N.coloring||"constraint"===N.type&&"="!==N._operation,Z="M"+s.join("L")+"Z";j&&eo(o,N);var X=F.ensureSingle(i,"g","contourfill").selectAll("path").data(j?o:[]);X.enter().append("path"),X.exit().remove(),X.each(function(i){var o=(i.prefixBoundary?Z:"")+joinAllPaths(i,s);o?_.select(this).attr("d",o).style("stroke","none"):_.select(this).remove()})}function joinAllPaths(i,o){var s,_,j,Z,X,$,ee="",et=0,er=i.edgepaths.map(function(i,o){return o}),en=!0;function istop(i){return .01>Math.abs(i[1]-o[0][1])}function isbottom(i){return .01>Math.abs(i[1]-o[2][1])}function isleft(i){return .01>Math.abs(i[0]-o[0][0])}function isright(i){return .01>Math.abs(i[0]-o[2][0])}for(;er.length;){for($=N.smoothopen(i.edgepaths[et],i.smoothing),ee+=en?$:$.replace(/^M/,"L"),er.splice(er.indexOf(et),1),s=i.edgepaths[et][i.edgepaths[et].length-1],Z=-1,j=0;j<4;j++){if(!s){F.log("Missing end?",et,i);break}for(istop(s)&&!isright(s)?_=o[1]:isleft(s)?_=o[0]:isbottom(s)?_=o[3]:isright(s)&&(_=o[2]),X=0;X<i.edgepaths.length;X++){var ei=i.edgepaths[X][0];.01>Math.abs(s[0]-_[0])?.01>Math.abs(s[0]-ei[0])&&(ei[1]-s[1])*(_[1]-ei[1])>=0&&(_=ei,Z=X):.01>Math.abs(s[1]-_[1])?.01>Math.abs(s[1]-ei[1])&&(ei[0]-s[0])*(_[0]-ei[0])>=0&&(_=ei,Z=X):F.log("endpt to newendpt is not vert. or horz.",s,_,ei)}if(s=_,Z>=0)break;ee+="L"+_}if(Z===i.edgepaths.length){F.log("unclosed perimeter path");break}et=Z,(en=-1===er.indexOf(et))&&(et=er[0],ee+="Z")}for(et=0;et<i.paths.length;et++)ee+=N.smoothclosed(i.paths[et],i.smoothing);return ee}function makeLinesAndLabels(i,s,j,Z,X){var $=j._context.staticPlot,ee=F.ensureSingle(i,"g","contourlines"),et=!1!==X.showlines,er=X.showlabels,en=et&&er,ei=o.createLines(ee,et||er,s,$),eo=o.createLineClip(ee,en,j,Z.trace.uid),el=i.selectAll("g.contourlabels").data(er?[0]:[]);if(el.exit().remove(),el.enter().append("g").classed("contourlabels",!0),er){var ec=[],eu=[];F.clearLocationCache();var ef=o.labelFormatter(j,Z),ed=N.tester.append("text").attr("data-notex",1).call(N.font,X.labelfont),eh=s[0].xaxis,ep=s[0].yaxis,eg=eh._length,em=ep._length,ey=eh.range,ev=ep.range,ex=F.aggNums(Math.min,null,Z.x),e_=F.aggNums(Math.max,null,Z.x),ew=F.aggNums(Math.min,null,Z.y),eT=F.aggNums(Math.max,null,Z.y),ek=Math.max(eh.c2p(ex,!0),0),eA=Math.min(eh.c2p(e_,!0),eg),eS=Math.max(ep.c2p(eT,!0),0),eM=Math.min(ep.c2p(ew,!0),em),eC={};ey[0]<ey[1]?(eC.left=ek,eC.right=eA):(eC.left=eA,eC.right=ek),ev[0]<ev[1]?(eC.top=eS,eC.bottom=eM):(eC.top=eM,eC.bottom=eS),eC.middle=(eC.top+eC.bottom)/2,eC.center=(eC.left+eC.right)/2,ec.push([[eC.left,eC.top],[eC.right,eC.top],[eC.right,eC.bottom],[eC.left,eC.bottom]]);var eE=Math.sqrt(eg*eg+em*em),eL=es.LABELDISTANCE*eE/Math.max(1,s.length/es.LABELINCREASE);ei.each(function(i){var s=o.calcTextOpts(i.level,ef,ed,j);_.select(this).selectAll("path").each(function(){var i=F.getVisibleSegment(this,eC,s.height/2);if(i&&!(i.len<(s.width+s.height)*es.LABELMIN))for(var _=Math.min(Math.ceil(i.len/eL),es.LABELMAX),N=0;N<_;N++){var j=o.findBestTextLocation(this,i,s,eu,eC);if(!j)break;o.addLabelData(j,s,eu,ec)}})}),ed.remove(),o.drawLabels(el,eu,j,eo,en?ec:null)}er&&!et&&ei.remove()}function locationCost(i,o,s,_){var N=o.width/2,j=o.height/2,Z=i.x,X=i.y,$=i.theta,ee=Math.cos($)*N,et=Math.sin($)*N,er=(Z>_.center?_.right-Z:Z-_.left)/(ee+Math.abs(Math.sin($)*j)),en=(X>_.middle?_.bottom-X:X-_.top)/(Math.abs(et)+Math.cos($)*j);if(er<1||en<1)return 1/0;var ei=el.EDGECOST*(1/(er-1)+1/(en-1));ei+=el.ANGLECOST*$*$;for(var eo=Z-ee,es=X-et,ec=Z+ee,eu=X+et,ef=0;ef<s.length;ef++){var ed=s[ef],eh=Math.cos(ed.theta)*ed.width/2,ep=Math.sin(ed.theta)*ed.width/2,eg=2*F.segmentDistance(eo,es,ec,eu,ed.x-eh,ed.y-ep,ed.x+eh,ed.y+ep)/(o.height+ed.height),em=ed.level===o.level,ey=em?el.SAMELEVELDISTANCE:1;if(eg<=ey)return 1/0;ei+=el.NEIGHBORCOST*(em?el.SAMELEVELFACTOR:1)/(eg-ey)}return ei}function clipGaps(i,o,s,_,j){var Z=_.trace,X=s._fullLayout._clips,$="clip"+Z.uid,ee=X.selectAll("#"+$).data(Z.connectgaps?[]:[0]);if(ee.enter().append("clipPath").classed("contourclip",!0).attr("id",$),ee.exit().remove(),!1===Z.connectgaps){var en={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:o.xaxis,yaxis:o.yaxis,x:_.x,y:_.y,z:makeClipMask(_),smoothing:0};et([en]),er([en]),eo([en],{type:"levels"}),F.ensureSingle(ee,"path","").attr("d",(en.prefixBoundary?"M"+j.join("L")+"Z":"")+joinAllPaths(en,j))}else $=null;N.setClipUrl(i,$,s)}function makeClipMask(i){var o,s,_=i.trace._emptypoints,F=[],N=i.z.length,j=i.z[0].length,Z=[];for(o=0;o<j;o++)Z.push(1);for(o=0;o<N;o++)F.push(Z.slice());for(o=0;o<_.length;o++)F[(s=_[o])[0]][s[1]]=0;return i.zmask=F,F}o.plot=function(i,o,s,N){var j=o.xaxis,Z=o.yaxis;F.makeTraceGroups(N,s,"contour").each(function(s){var N=_.select(this),X=s[0],$=X.trace,eo=X.x,es=X.y,el=$.contours,ec=en(el,o,X),eu=F.ensureSingle(N,"g","heatmapcoloring"),ef=[];"heatmap"===el.coloring&&(ef=[s]),ee(i,o,ef,eu),et(ec),er(ec);var ed=j.c2p(eo[0],!0),eh=j.c2p(eo[eo.length-1],!0),ep=Z.c2p(es[0],!0),eg=Z.c2p(es[es.length-1],!0),em=[[ed,eg],[eh,eg],[eh,ep],[ed,ep]],ey=ec;"constraint"===el.type&&(ey=ei(ec,el._operation)),makeBackground(N,em,el),makeFills(N,ey,em,el),makeLinesAndLabels(N,ec,i,X,el),clipGaps(N,o,i,X,em)})},o.createLines=function(i,o,s,_){var F=s[0].smoothing,j=i.selectAll("g.contourlevel").data(o?s:[]);if(j.exit().remove(),j.enter().append("g").classed("contourlevel",!0),o){var Z=j.selectAll("path.openline").data(function(i){return i.pedgepaths||i.edgepaths});Z.exit().remove(),Z.enter().append("path").classed("openline",!0),Z.attr("d",function(i){return N.smoothopen(i,F)}).style("stroke-miterlimit",1).style("vector-effect",_?"none":"non-scaling-stroke");var X=j.selectAll("path.closedline").data(function(i){return i.ppaths||i.paths});X.exit().remove(),X.enter().append("path").classed("closedline",!0),X.attr("d",function(i){return N.smoothclosed(i,F)}).style("stroke-miterlimit",1).style("vector-effect",_?"none":"non-scaling-stroke")}return j},o.createLineClip=function(i,o,s,_){var F=s._fullLayout._clips,j=o?"clipline"+_:null,Z=F.selectAll("#"+j).data(o?[0]:[]);return Z.exit().remove(),Z.enter().append("clipPath").classed("contourlineclip",!0).attr("id",j),N.setClipUrl(i,j,s),Z},o.labelFormatter=function(i,o){var s=i._fullLayout,_=o.trace,F=_.contours,N={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(F.labelformat)N.tickformat=F.labelformat,$(N,s);else{var Z=j.extractOpts(_);if(Z&&Z.colorbar&&Z.colorbar._axis)N=Z.colorbar._axis;else{if("constraint"===F.type){var ee=F.value;Array.isArray(ee)?N.range=[ee[0],ee[ee.length-1]]:N.range=[ee,ee]}else N.range=[F.start,F.end],N.nticks=(F.end-F.start)/F.size;N.range[0]===N.range[1]&&(N.range[1]+=N.range[0]||1),N.nticks||(N.nticks=1e3),$(N,s),X.prepTicks(N),N._tmin=null,N._tmax=null}}return function(i){return X.tickText(N,i).text}},o.calcTextOpts=function(i,o,s,_){var F=o(i);s.text(F).call(Z.convertToTspans,_);var j=s.node(),X=N.bBox(j,!0);return{text:F,width:X.width,height:X.height,fontSize:+j.style["font-size"].replace("px",""),level:i,dy:(X.top+X.bottom)/2}},o.findBestTextLocation=function(i,o,s,_,N){var j,Z,X,$,ee,et=s.width;o.isClosed?(Z=o.len/el.INITIALSEARCHPOINTS,j=o.min+Z/2,X=o.max):(Z=(o.len-et)/(el.INITIALSEARCHPOINTS+1),j=o.min+Z+et/2,X=o.max-(Z+et)/2);for(var er=1/0,en=0;en<el.ITERATIONS;en++){for(var ei=j;ei<X;ei+=Z){var eo=F.getTextLocation(i,o.total,ei,et),es=locationCost(eo,s,_,N);es<er&&(er=es,ee=eo,$=ei)}if(er>2*el.MAXCOST)break;en&&(Z/=2),X=(j=$-Z/2)+1.5*Z}if(er<=el.MAXCOST)return ee},o.addLabelData=function(i,o,s,_){var F=o.fontSize,N=o.width+F/3,j=Math.max(0,o.height-F/3),Z=i.x,X=i.y,$=i.theta,ee=Math.sin($),et=Math.cos($),rotateXY=function(i,o){return[Z+i*et-o*ee,X+i*ee+o*et]},er=[rotateXY(-N/2,-j/2),rotateXY(-N/2,j/2),rotateXY(N/2,j/2),rotateXY(N/2,-j/2)];s.push({text:o.text,x:Z,y:X,dy:o.dy,theta:$,level:o.level,width:N,height:j}),_.push(er)},o.drawLabels=function(i,o,s,N,j){var X=i.selectAll("text").data(o,function(i){return i.text+","+i.x+","+i.y+","+i.theta});if(X.exit().remove(),X.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(i){var o=i.x+Math.sin(i.theta)*i.dy,F=i.y-Math.cos(i.theta)*i.dy;_.select(this).text(i.text).attr({x:o,y:F,transform:"rotate("+180*i.theta/Math.PI+" "+o+" "+F+")"}).call(Z.convertToTspans,s)}),j){for(var $="",ee=0;ee<j.length;ee++)$+="M"+j[ee].join("L")+"Z";F.ensureSingle(N,"path","").attr("d",$)}}},18670:function(i,o,s){"use strict";var _=s(89298),F=s(71828);function autoContours(i,o,s){var F={type:"linear",range:[i,o]};return _.autoTicks(F,(o-i)/(s||15)),F}i.exports=function(i,o){var s=i.contours;if(i.autocontour){var N=i.zmin,j=i.zmax;(i.zauto||void 0===N)&&(N=F.aggNums(Math.min,null,o)),(i.zauto||void 0===j)&&(j=F.aggNums(Math.max,null,o));var Z=autoContours(N,j,i.ncontours);s.size=Z.dtick,s.start=_.tickFirst(Z),Z.range.reverse(),s.end=_.tickFirst(Z),s.start===N&&(s.start+=s.size),s.end===j&&(s.end-=s.size),s.start>s.end&&(s.start=s.end=(s.start+s.end)/2),i._input.contours||(i._input.contours={}),F.extendFlat(i._input.contours,{start:s.start,end:s.end,size:s.size}),i._input.autocontour=!0}else if("constraint"!==s.type){var X,$=s.start,ee=s.end,et=i._input.contours;$>ee&&(s.start=et.start=ee,ee=s.end=et.end=$,$=s.start),s.size>0||(X=$===ee?1:autoContours($,ee,i.ncontours).dtick,et.size=s.size=X)}}},84426:function(i,o,s){"use strict";var _=s(39898),F=s(91424),N=s(70035),j=s(86068);i.exports=function(i){var o=_.select(i).selectAll("g.contour");o.style("opacity",function(i){return i[0].trace.opacity}),o.each(function(i){var o,s=_.select(this),N=i[0].trace,Z=N.contours,X=N.line,$=Z.size||1,ee=Z.start,et="constraint"===Z.type,er=!et&&"lines"===Z.coloring,en=!et&&"fill"===Z.coloring,ei=er||en?j(N):null;s.selectAll("g.contourlevel").each(function(i){_.select(this).selectAll("path").call(F.lineGroupStyle,X.width,er?ei(i.level):X.color,X.dash)});var eo=Z.labelfont;s.selectAll("g.contourlabels text").each(function(i){F.font(_.select(this),{family:eo.family,size:eo.size,color:eo.color||(er?ei(i.level):X.color)})}),et?s.selectAll("g.contourfill path").style("fill",N.fillcolor):en&&(s.selectAll("g.contourfill path").style("fill",function(i){return void 0===o&&(o=i.level),ei(i.level+.5*$)}),void 0===o&&(o=ee),s.selectAll("g.contourbg path").style("fill",ei(o-.5*$)))}),N(i)}},8724:function(i,o,s){"use strict";var _=s(1586),F=s(14523);i.exports=function(i,o,s,N,j){var Z,X=s("contours.coloring"),$="";"fill"===X&&(Z=s("contours.showlines")),!1!==Z&&("lines"!==X&&($=s("line.color","#000")),s("line.width",.5),s("line.dash")),"none"!==X&&(!0!==i.showlegend&&(o.showlegend=!1),o._dfltShowLegend=!1,_(i,o,N,s,{prefix:"",cLetter:"z"})),s("line.smoothing"),F(s,N,$,j)}},88085:function(i,o,s){"use strict";var _=s(21606),F=s(70600),N=s(50693),j=s(1426).extendFlat,Z=F.contours;i.exports=j({carpet:{valType:"string",editType:"calc"},z:_.z,a:_.x,a0:_.x0,da:_.dx,b:_.y,b0:_.y0,db:_.dy,text:_.text,hovertext:_.hovertext,transpose:_.transpose,atype:_.xtype,btype:_.ytype,fillcolor:F.fillcolor,autocontour:F.autocontour,ncontours:F.ncontours,contours:{type:Z.type,start:Z.start,end:Z.end,size:Z.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:Z.showlines,showlabels:Z.showlabels,labelfont:Z.labelfont,labelformat:Z.labelformat,operation:Z.operation,value:Z.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:F.line.color,width:F.line.width,dash:F.line.dash,smoothing:F.line.smoothing,editType:"plot"},transforms:void 0},N("",{cLetter:"z",autoColorDflt:!1}))},59885:function(i,o,s){"use strict";var _=s(78803),F=s(71828),N=s(68296),j=s(4742),Z=s(824),X=s(43907),$=s(70769),ee=s(75005),et=s(22882),er=s(18670);function heatmappishCalc(i,o){var s,ee,et,er,en,ei,eo,es=o._carpetTrace,el=es.aaxis,ec=es.baxis;el._minDtick=0,ec._minDtick=0,F.isArray1D(o.z)&&N(o,el,ec,"a","b",["z"]),s=o._a=o._a||o.a,er=o._b=o._b||o.b,s=s?el.makeCalcdata(o,"_a"):[],er=er?ec.makeCalcdata(o,"_b"):[],ee=o.a0||0,et=o.da||1,en=o.b0||0,ei=o.db||1,eo=o._z=j(o._z||o.z,o.transpose),o._emptypoints=X(eo),Z(eo,o._emptypoints);var eu=F.maxRowLength(eo),ef="scaled"===o.xtype?"":s,ed=$(o,ef,ee,et,eu,el),eh="scaled"===o.ytype?"":er,ep=$(o,eh,en,ei,eo.length,ec);return"levels"===o.contours.type&&"none"!==o.contours.coloring&&_(i,o,{vals:eo,containerStr:"",cLetter:"z"}),[{a:ed,b:ep,z:eo}]}i.exports=function(i,o){var s=o._carpetTrace=et(i,o);if(s&&s.visible&&"legendonly"!==s.visible){if(!o.a||!o.b){var _=i.data[s.index],F=i.data[o.index];F.a||(F.a=_.a),F.b||(F.b=_.b),ee(F,o,o._defaultColor,i._fullLayout)}var N=heatmappishCalc(i,o);return er(o,o._z),N}}},75005:function(i,o,s){"use strict";var _=s(71828),F=s(67684),N=s(88085),j=s(83179),Z=s(67217),X=s(8724);i.exports=function(i,o,s,$){function coerce(s,F){return _.coerce(i,o,N,s,F)}function coerce2(s){return _.coerce2(i,o,N,s)}if(coerce("carpet"),i.a&&i.b){if(!F(i,o,coerce,$,"a","b")){o.visible=!1;return}coerce("text"),"constraint"===coerce("contours.type")?j(i,o,coerce,$,s,{hasHover:!1}):(Z(i,o,coerce,coerce2),X(i,o,coerce,$,{hasHover:!1}))}else o._defaultColor=s,o._length=null}},93740:function(i,o,s){"use strict";i.exports={attributes:s(88085),supplyDefaults:s(75005),colorbar:s(90654),calc:s(59885),plot:s(51048),style:s(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:s(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(i,o,s){"use strict";var _=s(39898),F=s(27669),N=s(67961),j=s(91424),Z=s(71828),X=s(87678),$=s(81696),ee=s(29854),et=s(36914),er=s(84857),en=s(87558),ei=s(20083),eo=s(22882),es=s(4536);function mapPathinfo(i,o){var s,_,F,N,j,Z,X,$,ee;for(s=0;s<i.length;s++){for(_=0,j=(N=i[s]).pedgepaths=[],Z=N.ppaths=[];_<N.edgepaths.length;_++){for(F=0,ee=N.edgepaths[_],X=[];F<ee.length;F++)X[F]=o(ee[F]);j.push(X)}for(_=0;_<N.paths.length;_++){for(F=0,ee=N.paths[_],$=[];F<ee.length;F++)$[F]=o(ee[F]);Z.push($)}}}function makeLinesAndLabels(i,o,s,F,N,X,$){var er=s._context.staticPlot,en=Z.ensureSingle(i,"g","contourlines"),ei=!1!==N.showlines,eo=N.showlabels,es=ei&&eo,el=ee.createLines(en,ei||eo,o,er),ec=ee.createLineClip(en,es,s,F.trace.uid),eu=i.selectAll("g.contourlabels").data(eo?[0]:[]);if(eu.exit().remove(),eu.enter().append("g").classed("contourlabels",!0),eo){var ef=X.xaxis,ed=X.yaxis,eh=ef._length,ep=ed._length,eg=[[[0,0],[eh,0],[eh,ep],[0,ep]]],em=[];Z.clearLocationCache();var ey=ee.labelFormatter(s,F),ev=j.tester.append("text").attr("data-notex",1).call(j.font,N.labelfont),ex={left:0,right:eh,center:eh/2,top:0,bottom:ep,middle:ep/2},e_=Math.sqrt(eh*eh+ep*ep),ew=et.LABELDISTANCE*e_/Math.max(1,o.length/et.LABELINCREASE);el.each(function(i){var o=ee.calcTextOpts(i.level,ey,ev,s);_.select(this).selectAll("path").each(function(s){var _=Z.getVisibleSegment(this,ex,o.height/2);if(_&&(constrainToCarpet(this,s,i,_,$,o.height),!(_.len<(o.width+o.height)*et.LABELMIN)))for(var F=Math.min(Math.ceil(_.len/ew),et.LABELMAX),N=0;N<F;N++){var j=ee.findBestTextLocation(this,_,o,em,ex);if(!j)break;ee.addLabelData(j,o,em,eg)}})}),ev.remove(),ee.drawLabels(eu,em,s,ec,es?eg:null)}eo&&!ei&&el.remove()}function constrainToCarpet(i,o,s,_,F,N){for(var j,Z=0;Z<s.pedgepaths.length;Z++)o===s.pedgepaths[Z]&&(j=s.edgepaths[Z]);if(j){var X=F.a[0],$=F.a[F.a.length-1],ee=F.b[0],et=F.b[F.b.length-1],er=getUnitVector(i,0,1),en=getUnitVector(i,_.total,_.total-1),ei=getOffset(j[0],er),eo=_.total-getOffset(j[j.length-1],en);_.min<ei&&(_.min=ei),_.max>eo&&(_.max=eo),_.len=_.max-_.min}function getOffset(i,o){var s=0;return(.1>Math.abs(i[0]-X)||.1>Math.abs(i[0]-$))&&(s=Math.max(s,N*vectorTan(o,normalizeVector(F.dxydb_rough(i[0],i[1],.1)))/2)),(.1>Math.abs(i[1]-ee)||.1>Math.abs(i[1]-et))&&(s=Math.max(s,N*vectorTan(o,normalizeVector(F.dxyda_rough(i[0],i[1],.1)))/2)),s}}function getUnitVector(i,o,s){var _=i.getPointAtLength(o),F=i.getPointAtLength(s),N=F.x-_.x,j=F.y-_.y,Z=Math.sqrt(N*N+j*j);return[N/Z,j/Z]}function normalizeVector(i){var o=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return[i[0]/o,i[1]/o]}function vectorTan(i,o){var s=Math.abs(i[0]*o[0]+i[1]*o[1]);return Math.sqrt(1-s*s)/s}function makeBackground(i,o,s,_,j,X){var $,ee,et=Z.ensureSingle(i,"g","contourbg").selectAll("path").data("fill"!==X||j?[]:[0]);et.enter().append("path"),et.exit().remove();var er=[];for(ee=0;ee<o.length;ee++)er.push(N(F([],($=o[ee]).x,s.c2p),F([],$.y,_.c2p),$.bicubic));et.attr("d","M"+er.join("L")+"Z").style("stroke","none")}function makeFills(i,o,s,F,N,j,X,$,ee,et,er){var en="fill"===et;en&&ei(N,i.contours);var eo=Z.ensureSingle(o,"g","contourfill").selectAll("path").data(en?N:[]);eo.enter().append("path"),eo.exit().remove(),eo.each(function(o){var N=(o.prefixBoundary?er:"")+joinAllPaths(i,o,j,X,$,ee,s,F);N?_.select(this).attr("d",N).style("stroke","none"):_.select(this).remove()})}function joinAllPaths(i,o,s,_,F,N,X,$){var ee,et,er,en,ei,eo,el,ec="",eu=o.edgepaths.map(function(i,o){return o}),ef=!0,ed=1e-4*Math.abs(s[0][0]-s[2][0]),eh=1e-4*Math.abs(s[0][1]-s[2][1]);function istop(i){return Math.abs(i[1]-s[0][1])<eh}function isbottom(i){return Math.abs(i[1]-s[2][1])<eh}function isleft(i){return Math.abs(i[0]-s[0][0])<ed}function isright(i){return Math.abs(i[0]-s[2][0])<ed}function pathto(i,o){var s,_,j,Z,ee="";for(istop(i)&&!isright(i)||isbottom(i)&&!isleft(i)?(Z=F.aaxis,j=es(F,N,[i[0],o[0]],.5*(i[1]+o[1]))):(Z=F.baxis,j=es(F,N,.5*(i[0]+o[0]),[i[1],o[1]])),s=1;s<j.length;s++)for(ee+=Z.smoothing?"C":"L",_=0;_<j[s].length;_++){var et=j[s][_];ee+=[X.c2p(et[0]),$.c2p(et[1])]+" "}return ee}for(ee=0,et=null;eu.length;){var ep=o.edgepaths[ee][0];for(et&&(ec+=pathto(et,ep)),el=j.smoothopen(o.edgepaths[ee].map(_),o.smoothing),ec+=ef?el:el.replace(/^M/,"L"),eu.splice(eu.indexOf(ee),1),et=o.edgepaths[ee][o.edgepaths[ee].length-1],ei=-1,en=0;en<4;en++){if(!et){Z.log("Missing end?",ee,o);break}for(istop(et)&&!isright(et)?er=s[1]:isleft(et)?er=s[0]:isbottom(et)?er=s[3]:isright(et)&&(er=s[2]),eo=0;eo<o.edgepaths.length;eo++){var eg=o.edgepaths[eo][0];Math.abs(et[0]-er[0])<ed?Math.abs(et[0]-eg[0])<ed&&(eg[1]-et[1])*(er[1]-eg[1])>=0&&(er=eg,ei=eo):Math.abs(et[1]-er[1])<eh?Math.abs(et[1]-eg[1])<eh&&(eg[0]-et[0])*(er[0]-eg[0])>=0&&(er=eg,ei=eo):Z.log("endpt to newendpt is not vert. or horz.",et,er,eg)}if(ei>=0)break;ec+=pathto(et,er),et=er}if(ei===o.edgepaths.length){Z.log("unclosed perimeter path");break}ee=ei,(ef=-1===eu.indexOf(ee))&&(ee=eu[0],ec+=pathto(et,er)+"Z",et=null)}for(ee=0;ee<o.paths.length;ee++)ec+=j.smoothclosed(o.paths[ee].map(_),o.smoothing);return ec}i.exports=function(i,o,s,ee){var et=o.xaxis,ei=o.yaxis;Z.makeTraceGroups(ee,s,"contour").each(function(s){var Z,ee,es,el,ec=_.select(this),eu=s[0],ef=eu.trace,ed=ef._carpetTrace=eo(i,ef),eh=i.calcdata[ed.index][0];if(ed.visible&&"legendonly"!==ed.visible){var ep=eu.a,eg=eu.b,em=ef.contours,ey=en(em,o,eu),ev="constraint"===em.type,ex=em._operation,e_=ev?"="===ex?"lines":"fill":em.coloring,ew=[[ep[0],eg[eg.length-1]],[ep[ep.length-1],eg[eg.length-1]],[ep[ep.length-1],eg[0]],[ep[0],eg[0]]];X(ey),$(ey,(ep[ep.length-1]-ep[0])*1e-8,(eg[eg.length-1]-eg[0])*1e-8);var eT=ey;"constraint"===em.type&&(eT=er(ey,ex)),mapPathinfo(ey,ab2p);var ek=[];for(el=eh.clipsegments.length-1;el>=0;el--)ee=F([],(Z=eh.clipsegments[el]).x,et.c2p),es=F([],Z.y,ei.c2p),ee.reverse(),es.reverse(),ek.push(N(ee,es,Z.bicubic));var eA="M"+ek.join("L")+"Z";makeBackground(ec,eh.clipsegments,et,ei,ev,e_),makeFills(ef,ec,et,ei,eT,ew,ab2p,ed,eh,e_,eA),makeLinesAndLabels(ec,ey,i,eu,em,o,ed),j.setClipUrl(ec,ed._clipPathId,i)}function ab2p(i){var o=ed.ab2xy(i[0],i[1],!0);return[et.c2p(o[0]),ei.c2p(o[1])]}})}},64096:function(i,o,s){"use strict";var _=s(50693),F=s(5386).fF,N=s(9012),j=s(99181),Z=s(1426).extendFlat;i.exports=Z({lon:j.lon,lat:j.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:j.text,hovertext:j.hovertext,hoverinfo:Z({},N.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:F(),showlegend:Z({},N.showlegend,{dflt:!1})},_("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(i,o,s){"use strict";var _=s(92770),F=s(71828).isArrayOrTypedArray,N=s(50606).BADNUM,j=s(78803),Z=s(71828)._;i.exports=function(i,o){for(var s=o._length,X=Array(s),$=o.z,ee=F($)&&$.length,et=0;et<s;et++){var er=X[et]={},en=o.lon[et],ei=o.lat[et];if(er.lonlat=_(en)&&_(ei)?[+en,+ei]:[N,N],ee){var eo=$[et];er.z=_(eo)?eo:N}}return j(i,o,{vals:ee?$:[0,1],containerStr:"",cLetter:"z"}),s&&(X[0].t={labels:{lat:Z(i,"lat:")+" ",lon:Z(i,"lon:")+" "}}),X}},52414:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(7901),j=s(21081),Z=s(50606).BADNUM,X=s(18214).makeBlank;i.exports=function(i){var o,s=i[0].trace,$=!0===s.visible&&0!==s._length,ee=s._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:X()};if(!$)return ee;var et=[],er=s.z,en=s.radius,ei=F.isArrayOrTypedArray(er)&&er.length,eo=F.isArrayOrTypedArray(en);for(o=0;o<i.length;o++){var es=i[o],el=es.lonlat;if(el[0]!==Z){var ec={};if(ei){var eu=es.z;ec.z=eu!==Z?eu:0}eo&&(ec.r=_(en[o])&&en[o]>0?+en[o]:0),et.push({type:"Feature",geometry:{type:"Point",coordinates:el},properties:ec})}}var ef=j.extractOpts(s),ed=ef.reversescale?j.flipScale(ef.colorscale):ef.colorscale,eh=ed[0][1],ep=["interpolate",["linear"],["heatmap-density"],0,1>N.opacity(eh)?eh:N.addOpacity(eh,0)];for(o=1;o<ed.length;o++)ep.push(ed[o][0],ed[o][1]);var eg=["interpolate",["linear"],["get","z"],ef.min,0,ef.max,1];return F.extendFlat(ee.heatmap.paint,{"heatmap-weight":ei?eg:1/(ef.max-ef.min),"heatmap-color":ep,"heatmap-radius":eo?{type:"identity",property:"r"}:s.radius,"heatmap-opacity":s.opacity}),ee.geojson={type:"FeatureCollection",features:et},ee.heatmap.layout.visibility="visible",ee}},79429:function(i,o,s){"use strict";var _=s(71828),F=s(1586),N=s(64096);i.exports=function(i,o,s,j){function coerce(s,F){return _.coerce(i,o,N,s,F)}var Z=coerce("lon")||[],X=coerce("lat")||[],$=Math.min(Z.length,X.length);if(!$){o.visible=!1;return}o._length=$,coerce("z"),coerce("radius"),coerce("below"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),F(i,o,j,coerce,{prefix:"",cLetter:"z"})}},62474:function(i){"use strict";i.exports=function(i,o){return i.lon=o.lon,i.lat=o.lat,i.z=o.z,i}},84684:function(i,o,s){"use strict";var _=s(89298),F=s(28178).hoverPoints,N=s(28178).getExtraText;i.exports=function(i,o,s){var j=F(i,o,s);if(j){var Z=j[0],X=Z.cd,$=X[0].trace,ee=X[Z.index];if(delete Z.color,"z"in ee){var et=Z.subplot.mockAxis;Z.z=ee.z,Z.zLabel=_.tickText(et,et.c2l(ee.z),"hover").text}return Z.extraText=N($,ee,X[0].t.labels),[Z]}}},93814:function(i,o,s){"use strict";i.exports={attributes:s(64096),supplyDefaults:s(79429),colorbar:s(61243),formatLabels:s(15636),calc:s(85070),plot:s(7336),hoverPoints:s(84684),eventData:s(62474),getBelow:function(i,o){for(var s=o.getMapLayers(),_=0;_<s.length;_++){var F=s[_],N=F.id;if("symbol"===F.type&&"string"==typeof N&&-1===N.indexOf("plotly-"))return N}},moduleType:"trace",name:"densitymapbox",basePlotModule:s(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(i,o,s){"use strict";var _=s(52414),F=s(77734).traceLayerPrefix;function DensityMapbox(i,o){this.type="densitymapbox",this.subplot=i,this.uid=o,this.sourceId="source-"+o,this.layerList=[["heatmap",F+o+"-heatmap"]],this.below=null}var N=DensityMapbox.prototype;N.update=function(i){var o=this.subplot,s=this.layerList,F=_(i),N=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(F.geojson),N!==this.below&&(this._removeLayers(),this._addLayers(F,N),this.below=N);for(var j=0;j<s.length;j++){var Z=s[j],X=Z[0],$=Z[1],ee=F[X];o.setOptions($,"setLayoutProperty",ee.layout),"visible"===ee.layout.visibility&&o.setOptions($,"setPaintProperty",ee.paint)}},N._addLayers=function(i,o){for(var s=this.subplot,_=this.layerList,F=this.sourceId,N=0;N<_.length;N++){var j=_[N],Z=j[0],X=i[Z];s.addLayer({type:Z,id:j[1],source:F,layout:X.layout,paint:X.paint},o)}},N._removeLayers=function(){for(var i=this.subplot.map,o=this.layerList,s=o.length-1;s>=0;s--)i.removeLayer(o[s][1])},N.dispose=function(){var i=this.subplot.map;this._removeLayers(),i.removeSource(this.sourceId)},i.exports=function(i,o){var s=o[0].trace,F=new DensityMapbox(i,s.uid),N=F.sourceId,j=_(o),Z=F.below=i.belowLookup["trace-"+s.uid];return i.map.addSource(N,{type:"geojson",data:j.geojson}),F._addLayers(j,Z),F}},49789:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o){for(var s=0;s<i.length;s++)i[s].i=s;_.mergeArray(o.text,i,"tx"),_.mergeArray(o.hovertext,i,"htx");var F=o.marker;if(F){_.mergeArray(F.opacity,i,"mo"),_.mergeArray(F.color,i,"mc");var N=F.line;N&&(_.mergeArray(N.color,i,"mlc"),_.mergeArrayCastPositive(N.width,i,"mlw"))}}},1285:function(i,o,s){"use strict";var _=s(1486),F=s(82196).line,N=s(9012),j=s(12663).axisHoverFormat,Z=s(5386).fF,X=s(5386).si,$=s(18517),ee=s(1426).extendFlat,et=s(7901);function funnelMarker(){var i=ee({},_.marker);return delete i.pattern,i}i.exports={x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:j("x"),yhoverformat:j("y"),hovertext:_.hovertext,hovertemplate:Z({},{keys:$.eventDataKeys}),hoverinfo:ee({},N.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:X({editType:"plot"},{keys:$.eventDataKeys.concat(["label","value"])}),text:_.text,textposition:_.textposition,insidetextanchor:ee({},_.insidetextanchor,{dflt:"middle"}),textangle:ee({},_.textangle,{dflt:0}),textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:_.outsidetextfont,constraintext:_.constraintext,cliponaxis:_.cliponaxis,orientation:ee({},_.orientation,{}),offset:ee({},_.offset,{arrayOk:!1}),width:ee({},_.width,{arrayOk:!1}),marker:funnelMarker(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:ee({},F.color,{dflt:et.defaultLine}),width:ee({},F.width,{dflt:0,editType:"plot"}),dash:F.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup}},9532:function(i,o,s){"use strict";var _=s(89298),F=s(42973),N=s(49789),j=s(66279),Z=s(50606).BADNUM;function fixNum(i){return i===Z?0:i}i.exports=function(i,o){var s,X,$,ee,et,er,en,ei,eo,es=_.getFromId(i,o.xaxis||"x"),el=_.getFromId(i,o.yaxis||"y");"h"===o.orientation?(s=es.makeCalcdata(o,"x"),$=el.makeCalcdata(o,"y"),ee=F(o,el,"y",$),et=!!o.yperiodalignment,er="y"):(s=el.makeCalcdata(o,"y"),$=es.makeCalcdata(o,"x"),ee=F(o,es,"x",$),et=!!o.xperiodalignment,er="x");var ec=Math.min((X=ee.vals).length,s.length),eu=Array(ec);for(en=0,o._base=[];en<ec;en++){s[en]<0&&(s[en]=Z);var ef=!1;s[en]!==Z&&en+1<ec&&s[en+1]!==Z&&(ef=!0),ei=eu[en]={p:X[en],s:s[en],cNext:ef},o._base[en]=-.5*ei.s,et&&(eu[en].orig_p=$[en],eu[en][er+"End"]=ee.ends[en],eu[en][er+"Start"]=ee.starts[en]),o.ids&&(ei.id=String(o.ids[en])),0===en&&(eu[0].vTotal=0),eu[0].vTotal+=fixNum(ei.s),ei.begR=fixNum(ei.s)/fixNum(eu[0].s)}for(en=0;en<ec;en++)(ei=eu[en]).s!==Z&&(ei.sumR=ei.s/eu[0].vTotal,ei.difR=void 0!==eo?ei.s/eo:1,eo=ei.s);return N(eu,o),j(eu,o),eu}},18517:function(i){"use strict";i.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(i,o,s){"use strict";var _=s(11661).setGroupPositions;i.exports=function(i,o){var s,F,N=i._fullLayout,j=i._fullData,Z=i.calcdata,X=o.xaxis,$=o.yaxis,ee=[],et=[],er=[];for(F=0;F<j.length;F++){var en=j[F],ei="h"===en.orientation;!0===en.visible&&en.xaxis===X._id&&en.yaxis===$._id&&"funnel"===en.type&&(s=Z[F],ei?er.push(s):et.push(s),ee.push(s))}var eo={mode:N.funnelmode,norm:N.funnelnorm,gap:N.funnelgap,groupgap:N.funnelgroupgap};for(_(i,X,$,et,eo),_(i,$,X,er,eo),F=0;F<ee.length;F++){s=ee[F];for(var es=0;es<s.length;es++)es+1<s.length&&(s[es].nextP0=s[es+1].p0,s[es].nextS0=s[es+1].s0,s[es].nextP1=s[es+1].p1,s[es].nextS1=s[es+1].s1)}}},26199:function(i,o,s){"use strict";var _=s(71828),F=s(26125),N=s(90769).handleText,j=s(67513),Z=s(73927),X=s(1285),$=s(7901);function supplyDefaults(i,o,s,F){function coerce(s,F){return _.coerce(i,o,X,s,F)}if(!j(i,o,F,coerce)){o.visible=!1;return}Z(i,o,F,coerce),coerce("xhoverformat"),coerce("yhoverformat"),coerce("orientation",o.y&&!o.x?"v":"h"),coerce("offset"),coerce("width");var ee=coerce("text");coerce("hovertext"),coerce("hovertemplate");var et=coerce("textposition");N(i,o,F,coerce,et,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===o.textposition||o.texttemplate||coerce("textinfo",Array.isArray(ee)?"text+value":"value");var er=coerce("marker.color",s);coerce("marker.line.color",$.defaultLine),coerce("marker.line.width"),coerce("connector.visible")&&(coerce("connector.fillcolor",defaultFillColor(er)),coerce("connector.line.width")&&(coerce("connector.line.color"),coerce("connector.line.dash")))}function defaultFillColor(i){var o=_.isArrayOrTypedArray(i)?"#000":i;return $.addOpacity(o,.5*$.opacity(o))}function crossTraceDefaults(i,o){var s;function coerce(i){return _.coerce(s._input,s,X,i)}if("group"===o.funnelmode)for(var N=0;N<i.length;N++)F((s=i[N])._input,s,o,coerce)}i.exports={supplyDefaults:supplyDefaults,crossTraceDefaults:crossTraceDefaults}},34598:function(i){"use strict";i.exports=function(i,o){return i.x="xVal"in o?o.xVal:o.x,i.y="yVal"in o?o.yVal:o.y,"percentInitial"in o&&(i.percentInitial=o.percentInitial),"percentPrevious"in o&&(i.percentPrevious=o.percentPrevious),"percentTotal"in o&&(i.percentTotal=o.percentTotal),o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),i}},63341:function(i,o,s){"use strict";var _=s(7901).opacity,F=s(95423).hoverOnBars,N=s(71828).formatPercent;function getTraceColor(i,o){var s=i.marker,F=o.mc||s.color,N=o.mlc||s.line.color,j=o.mlw||s.line.width;return _(F)?F:_(N)&&j?N:void 0}i.exports=function(i,o,s,_,j){var Z=F(i,o,s,_,j);if(Z){var X=Z.cd,$=X[0].trace,ee="h"===$.orientation,et=X[Z.index];Z[(ee?"x":"y")+"LabelVal"]=et.s,Z.percentInitial=et.begR,Z.percentInitialLabel=N(et.begR,1),Z.percentPrevious=et.difR,Z.percentPreviousLabel=N(et.difR,1),Z.percentTotal=et.sumR,Z.percentTotalLabel=N(et.sumR,1);var er=et.hi||$.hoverinfo,en=[];if(er&&"none"!==er&&"skip"!==er){var ei="all"===er,eo=er.split("+"),hasFlag=function(i){return ei||-1!==eo.indexOf(i)};hasFlag("percent initial")&&en.push(Z.percentInitialLabel+" of initial"),hasFlag("percent previous")&&en.push(Z.percentPreviousLabel+" of previous"),hasFlag("percent total")&&en.push(Z.percentTotalLabel+" of total")}return Z.extraText=en.join("<br>"),Z.color=getTraceColor($,et),[Z]}}},51759:function(i,o,s){"use strict";i.exports={attributes:s(1285),layoutAttributes:s(10440),supplyDefaults:s(26199).supplyDefaults,crossTraceDefaults:s(26199).crossTraceDefaults,supplyLayoutDefaults:s(93138),calc:s(9532),crossTraceCalc:s(8984),plot:s(80461),style:s(68266).style,hoverPoints:s(63341),eventData:s(34598),selectPoints:s(81974),moduleType:"trace",name:"funnel",basePlotModule:s(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(i){"use strict";i.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(i,o,s){"use strict";var _=s(71828),F=s(10440);i.exports=function(i,o,s){var N=!1;function coerce(s,N){return _.coerce(i,o,F,s,N)}for(var j=0;j<s.length;j++){var Z=s[j];if(Z.visible&&"funnel"===Z.type){N=!0;break}}N&&(coerce("funnelmode"),coerce("funnelgap",.2),coerce("funnelgroupgap"))}},80461:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(91424),j=s(50606).BADNUM,Z=s(17295),X=s(72597).clearMinTextSize;function plotConnectorRegions(i,o,s,Z){var X=o.xaxis,$=o.yaxis;F.makeTraceGroups(Z,s,"trace bars").each(function(s){var Z=_.select(this),ee=s[0].trace,et=F.ensureSingle(Z,"g","regions");if(!ee.connector||!ee.connector.visible){et.remove();return}var er="h"===ee.orientation,en=et.selectAll("g.region").data(F.identity);en.enter().append("g").classed("region",!0),en.exit().remove();var ei=en.size();en.each(function(s,Z){if(Z===ei-1||s.cNext){var ee=getXY(s,X,$,er),et=ee[0],en=ee[1],eo="";et[0]!==j&&en[0]!==j&&et[1]!==j&&en[1]!==j&&et[2]!==j&&en[2]!==j&&et[3]!==j&&en[3]!==j&&(er?eo+="M"+et[0]+","+en[1]+"L"+et[2]+","+en[2]+"H"+et[3]+"L"+et[1]+","+en[1]+"Z":eo+="M"+et[1]+","+en[1]+"L"+et[2]+","+en[3]+"V"+en[2]+"L"+et[1]+","+en[0]+"Z"),""===eo&&(eo="M0,0Z"),F.ensureSingle(_.select(this),"path").attr("d",eo).call(N.setClipUrl,o.layerClipId,i)}})})}function plotConnectorLines(i,o,s,j){var Z=o.xaxis,X=o.yaxis;F.makeTraceGroups(j,s,"trace bars").each(function(s){var j=_.select(this),$=s[0].trace,ee=F.ensureSingle(j,"g","lines");if(!$.connector||!$.connector.visible||!$.connector.line.width){ee.remove();return}var et="h"===$.orientation,er=ee.selectAll("g.line").data(F.identity);er.enter().append("g").classed("line",!0),er.exit().remove();var en=er.size();er.each(function(s,j){if(j===en-1||s.cNext){var $=getXY(s,Z,X,et),ee=$[0],er=$[1],ei="";void 0!==ee[3]&&void 0!==er[3]&&(et?ei+="M"+ee[0]+","+er[1]+"L"+ee[2]+","+er[2]+("M"+ee[1]+","+er[1]+"L"+ee[3])+","+er[2]:ei+="M"+ee[1]+","+er[1]+"L"+ee[2]+","+er[3]+("M"+ee[1]+","+er[0]+"L"+ee[2])+","+er[2]),""===ei&&(ei="M0,0Z"),F.ensureSingle(_.select(this),"path").attr("d",ei).call(N.setClipUrl,o.layerClipId,i)}})})}function getXY(i,o,s,_){var F=[],N=[],j=_?o:s,Z=_?s:o;return F[0]=j.c2p(i.s0,!0),N[0]=Z.c2p(i.p0,!0),F[1]=j.c2p(i.s1,!0),N[1]=Z.c2p(i.p1,!0),F[2]=j.c2p(i.nextS0,!0),N[2]=Z.c2p(i.nextP0,!0),F[3]=j.c2p(i.nextS1,!0),N[3]=Z.c2p(i.nextP1,!0),_?[F,N]:[N,F]}i.exports=function(i,o,s,_){var F=i._fullLayout;X("funnel",F),plotConnectorRegions(i,o,s,_),plotConnectorLines(i,o,s,_),Z.plot(i,o,s,_,{mode:F.funnelmode,norm:F.funnelmode,gap:F.funnelgap,groupgap:F.funnelgroupgap})}},68266:function(i,o,s){"use strict";var _=s(39898),F=s(91424),N=s(7901),j=s(37822).DESELECTDIM,Z=s(16688),X=s(72597).resizeText,$=Z.styleTextPoints;function style(i,o,s){var Z=s||_.select(i).selectAll("g.funnellayer").selectAll("g.trace");X(i,Z,"funnel"),Z.style("opacity",function(i){return i[0].trace.opacity}),Z.each(function(o){var s=_.select(this),Z=o[0].trace;s.selectAll(".point > path").each(function(i){if(!i.isBlank){var o=Z.marker;_.select(this).call(N.fill,i.mc||o.color).call(N.stroke,i.mlc||o.line.color).call(F.dashLine,o.line.dash,i.mlw||o.line.width).style("opacity",Z.selectedpoints&&!i.selected?j:1)}}),$(s,Z,i),s.selectAll(".regions").each(function(){_.select(this).selectAll("path").style("stroke-width",0).call(N.fill,Z.connector.fillcolor)}),s.selectAll(".lines").each(function(){var i=Z.connector.line;F.lineGroupStyle(_.select(this).selectAll("path"),i.width,i.color,i.dash)})})}i.exports={style:style}},86807:function(i,o,s){"use strict";var _=s(34e3),F=s(9012),N=s(27670).Y,j=s(5386).fF,Z=s(5386).si,X=s(1426).extendFlat;i.exports={labels:_.labels,label0:_.label0,dlabel:_.dlabel,values:_.values,marker:{colors:_.marker.colors,line:{color:X({},_.marker.line.color,{dflt:null}),width:X({},_.marker.line.width,{dflt:1}),editType:"calc"},pattern:_.marker.pattern,editType:"calc"},text:_.text,hovertext:_.hovertext,scalegroup:X({},_.scalegroup,{}),textinfo:X({},_.textinfo,{flags:["label","text","value","percent"]}),texttemplate:Z({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:X({},F.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:j({},{keys:["label","color","value","text","percent"]}),textposition:X({},_.textposition,{values:["inside","none"],dflt:"inside"}),textfont:_.textfont,insidetextfont:_.insidetextfont,title:{text:_.title.text,font:_.title.font,position:X({},_.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:N({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(i,o,s){"use strict";var _=s(74875);o.name="funnelarea",o.plot=function(i,s,F,N){_.plotBasePlot(o.name,i,s,F,N)},o.clean=function(i,s,F,N){_.cleanBasePlot(o.name,i,s,F,N)}},89574:function(i,o,s){"use strict";var _=s(32354);function calc(i,o){return _.calc(i,o)}function crossTraceCalc(i){_.crossTraceCalc(i,{type:"funnelarea"})}i.exports={calc:calc,crossTraceCalc:crossTraceCalc}},86282:function(i,o,s){"use strict";var _=s(71828),F=s(86807),N=s(27670).c,j=s(90769).handleText,Z=s(37434).handleLabelsAndValues,X=s(37434).handleMarkerDefaults;i.exports=function(i,o,s,$){function coerce(s,N){return _.coerce(i,o,F,s,N)}var ee,et=Z(coerce("labels"),coerce("values")),er=et.len;if(o._hasLabels=et.hasLabels,o._hasValues=et.hasValues,!o._hasLabels&&o._hasValues&&(coerce("label0"),coerce("dlabel")),!er){o.visible=!1;return}o._length=er,X(i,o,$,coerce),coerce("scalegroup");var en=coerce("text"),ei=coerce("texttemplate");if(ei||(ee=coerce("textinfo",Array.isArray(en)?"text+percent":"percent")),coerce("hovertext"),coerce("hovertemplate"),ei||ee&&"none"!==ee){var eo=coerce("textposition");j(i,o,$,coerce,eo,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}N(o,$,coerce),coerce("title.text")&&(coerce("title.position"),_.coerceFont(coerce,"title.font",$.font)),coerce("aspectratio"),coerce("baseratio")}},10421:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"funnelarea",basePlotModule:s(6452),categories:["pie-like","funnelarea","showLegend"],attributes:s(86807),layoutAttributes:s(80097),supplyDefaults:s(86282),supplyLayoutDefaults:s(57402),calc:s(89574).calc,crossTraceCalc:s(89574).crossTraceCalc,plot:s(79187),style:s(71858),styleOne:s(63463),meta:{}}},80097:function(i,o,s){"use strict";var _=s(92774).hiddenlabels;i.exports={hiddenlabels:_,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(i,o,s){"use strict";var _=s(71828),F=s(80097);i.exports=function(i,o){function coerce(s,N){return _.coerce(i,o,F,s,N)}coerce("hiddenlabels"),coerce("funnelareacolorway",o.colorway),coerce("extendfunnelareacolors")}},79187:function(i,o,s){"use strict";var _=s(39898),F=s(91424),N=s(71828),j=N.strScale,Z=N.strTranslate,X=s(63893),$=s(17295).toMoveInsideBar,ee=s(72597),et=ee.recordMinTextSize,er=ee.clearMinTextSize,en=s(53581),ei=s(14575),eo=ei.attachFxHandlers,es=ei.determineInsideTextFont,el=ei.layoutAreas,ec=ei.prerenderTitles,eu=ei.positionTitleOutside,ef=ei.formatSliceLabel;function line(i,o){return"l"+(o[0]-i[0])+","+(o[1]-i[1])}function getBetween(i,o){return[.5*(i[0]+o[0]),.5*(i[1]+o[1])]}function setCoords(i){if(i.length){var o,s,_,F=i[0],N=F.trace,j=N.aspectratio,Z=N.baseratio;Z>.999&&(Z=.999);var X=Math.pow(Z,2),$=F.vTotal,ee=$*X/(1-X)/$,et=[];for(et.push(getPoint()),s=i.length-1;s>-1;s--)if(!(_=i[s]).hidden){var er=_.v/$;ee+=er,et.push(getPoint())}var en=1/0,ei=-1/0;for(s=0;s<et.length;s++)en=Math.min(en,(o=et[s])[1]),ei=Math.max(ei,o[1]);for(s=0;s<et.length;s++)et[s][1]-=(ei+en)/2;var eo=et[et.length-1][0],es=F.r,el=(ei-en)/2,ec=es/eo,eu=es/el*j;for(s=0,F.r=eu*el;s<et.length;s++)et[s][0]*=ec,et[s][1]*=eu;var ef=[-(o=et[0])[0],o[1]],ed=[o[0],o[1]],eh=0;for(s=i.length-1;s>-1;s--)if(!(_=i[s]).hidden){var ep=et[eh+=1][0],eg=et[eh][1];_.TL=[-ep,eg],_.TR=[ep,eg],_.BL=ef,_.BR=ed,_.pxmid=getBetween(_.TR,_.BR),ef=_.TL,ed=_.TR}}function calcPos(){var i=Math.sqrt(ee);return{x:i,y:-i}}function getPoint(){var i=calcPos();return[i.x,i.y]}}i.exports=function(i,o){var s=i._context.staticPlot,ee=i._fullLayout;er("funnelarea",ee),ec(o,i),el(o,ee._size),N.makeTraceGroups(ee._funnelarealayer,o,"trace").each(function(o){var er=_.select(this),ei=o[0],el=ei.trace;setCoords(o),er.each(function(){var er=_.select(this).selectAll("g.slice").data(o);er.enter().append("g").classed("slice",!0),er.exit().remove(),er.each(function(j,Z){if(j.hidden){_.select(this).selectAll("path,g").remove();return}j.pointNumber=j.i,j.curveNumber=el.index;var er=ei.cx,ec=ei.cy,eu=_.select(this),ed=eu.selectAll("path.surface").data([j]);ed.enter().append("path").classed("surface",!0).style({"pointer-events":s?"none":"all"}),eu.call(eo,i,o);var eh="M"+(er+j.TR[0])+","+(ec+j.TR[1])+line(j.TR,j.BR)+line(j.BR,j.BL)+line(j.BL,j.TL)+"Z";ed.attr("d",eh),ef(i,j,ei);var ep=en.castOption(el.textposition,j.pts),eg=eu.selectAll("g.slicetext").data(j.text&&"none"!==ep?[0]:[]);eg.enter().append("g").classed("slicetext",!0),eg.exit().remove(),eg.each(function(){var s,en=N.ensureSingle(_.select(this),"text","",function(i){i.attr("data-notex",1)}),ei=N.ensureUniformFontSize(i,es(el,j,ee.font));en.text(j.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(F.font,ei).call(X.convertToTspans,i);var eo=F.bBox(en.node()),eu=Math.min(j.BL[1],j.BR[1])+ec,ef=Math.max(j.TL[1],j.TR[1])+ec;(s=$(Math.max(j.TL[0],j.BL[0])+er,Math.min(j.TR[0],j.BR[0])+er,eu,ef,eo,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=ei.size,et(el.type,s,ee),o[Z].transform=s,N.setTransormAndDisplay(en,s)})});var ec=_.select(this).selectAll("g.titletext").data(el.title.text?[0]:[]);ec.enter().append("g").classed("titletext",!0),ec.exit().remove(),ec.each(function(){var o=N.ensureSingle(_.select(this),"text","",function(i){i.attr("data-notex",1)}),s=el.title.text;el._meta&&(s=N.templateString(s,el._meta)),o.text(s).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(F.font,el.title.font).call(X.convertToTspans,i);var $=eu(ei,ee._size);o.attr("transform",Z($.x,$.y)+j(Math.min(1,$.scale))+Z($.tx,$.ty))})})})}},71858:function(i,o,s){"use strict";var _=s(39898),F=s(63463),N=s(72597).resizeText;i.exports=function(i){var o=i._fullLayout._funnelarealayer.selectAll(".trace");N(i,o,"funnelarea"),o.each(function(o){var s=o[0].trace,N=_.select(this);N.style({opacity:s.opacity}),N.selectAll("path.surface").each(function(o){_.select(this).call(F,o,s,i)})})}},21606:function(i,o,s){"use strict";var _=s(82196),F=s(9012),N=s(41940),j=s(12663).axisHoverFormat,Z=s(5386).fF,X=s(5386).si,$=s(50693),ee=s(1426).extendFlat;i.exports=ee({z:{valType:"data_array",editType:"calc"},x:ee({},_.x,{impliedEdits:{xtype:"array"}}),x0:ee({},_.x0,{impliedEdits:{xtype:"scaled"}}),dx:ee({},_.dx,{impliedEdits:{xtype:"scaled"}}),y:ee({},_.y,{impliedEdits:{ytype:"array"}}),y0:ee({},_.y0,{impliedEdits:{ytype:"scaled"}}),dy:ee({},_.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:ee({},_.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:ee({},_.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:ee({},_.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:ee({},_.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:ee({},_.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:ee({},_.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:j("x"),yhoverformat:j("y"),zhoverformat:j("z",1),hovertemplate:Z(),texttemplate:X({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:N({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:ee({},F.showlegend,{dflt:!1})},{transforms:void 0},$("",{cLetter:"z",autoColorDflt:!1}))},90757:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=s(89298),j=s(42973),Z=s(17562),X=s(78803),$=s(68296),ee=s(4742),et=s(824),er=s(43907),en=s(70769),ei=s(50606).BADNUM;function skipBreaks(i){for(var o=[],s=i.length,_=0;_<s;_++){var F=i[_];F!==ei&&o.push(F)}return o}function dropZonBreaks(i,o,s){for(var _=[],F=-1,N=0;N<s.length;N++)if(o[N]!==ei){_[++F]=[];for(var j=0;j<s[N].length;j++)i[j]!==ei&&_[F].push(s[N][j])}return _}i.exports=function(i,o){var s,ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg=N.getFromId(i,o.xaxis||"x"),em=N.getFromId(i,o.yaxis||"y"),ey=_.traceIs(o,"contour"),ev=_.traceIs(o,"histogram"),ex=_.traceIs(o,"gl2d"),e_=ey?"best":o.zsmooth;if(eg._minDtick=0,em._minDtick=0,ev)es=(ep=Z(i,o)).orig_x,s=ep.x,ei=ep.x0,eo=ep.dx,ef=ep.orig_y,el=ep.y,ec=ep.y0,eu=ep.dy,ed=ep.z;else{var ew=o.z;F.isArray1D(ew)?($(o,eg,em,"x","y",["z"]),s=o._x,el=o._y,ew=o._z):(es=o.x?eg.makeCalcdata(o,"x"):[],ef=o.y?em.makeCalcdata(o,"y"):[],s=j(o,eg,"x",es).vals,el=j(o,em,"y",ef).vals,o._x=s,o._y=el),ei=o.x0,eo=o.dx,ec=o.y0,eu=o.dy,ed=ee(ew,o,eg,em)}function noZsmooth(i){e_=o._input.zsmooth=o.zsmooth=!1,F.warn('cannot use zsmooth: "fast": '+i)}function scaleIsLinear(i){if(i.length>1){var o=(i[i.length-1]-i[0])/(i.length-1),s=Math.abs(o/100);for(eh=0;eh<i.length-1;eh++)if(Math.abs(i[eh+1]-i[eh]-o)>s)return!1}return!0}(eg.rangebreaks||em.rangebreaks)&&(ed=dropZonBreaks(s,el,ed),ev||(s=skipBreaks(s),el=skipBreaks(el),o._x=s,o._y=el)),!ev&&(ey||o.connectgaps)&&(o._emptypoints=er(ed),et(ed,o._emptypoints)),o._islinear=!1,"log"===eg.type||"log"===em.type?"fast"===e_&&noZsmooth("log axis found"):scaleIsLinear(s)?scaleIsLinear(el)?o._islinear=!0:"fast"===e_&&noZsmooth("y scale is not linear"):"fast"===e_&&noZsmooth("x scale is not linear");var eT=F.maxRowLength(ed),ek="scaled"===o.xtype?"":s,eA=en(o,ek,ei,eo,eT,eg),eS="scaled"===o.ytype?"":el,eM=en(o,eS,ec,eu,ed.length,em);ex||(o._extremes[eg._id]=N.findExtremes(eg,eA),o._extremes[em._id]=N.findExtremes(em,eM));var eC={x:eA,y:eM,z:ed,text:o._text||o.text,hovertext:o._hovertext||o.hovertext};if(o.xperiodalignment&&es&&(eC.orig_x=es),o.yperiodalignment&&ef&&(eC.orig_y=ef),ek&&ek.length===eA.length-1&&(eC.xCenter=ek),eS&&eS.length===eM.length-1&&(eC.yCenter=eS),ev&&(eC.xRanges=ep.xRanges,eC.yRanges=ep.yRanges,eC.pts=ep.pts),ey||X(i,o,{vals:ed,cLetter:"z"}),ey&&o.contours&&"heatmap"===o.contours.coloring){var eE={type:"contour"===o.type?"heatmap":"histogram2d",xcalendar:o.xcalendar,ycalendar:o.ycalendar};eC.xfill=en(eE,ek,ei,eo,eT,eg),eC.yfill=en(eE,eS,ec,eu,ed.length,em)}return[eC]}},4742:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(50606).BADNUM;i.exports=function(i,o,s,j){function cleanZvalue(i){if(_(i))return+i}if(o&&o.transpose){for(et=0,Z=0;et<i.length;et++)Z=Math.max(Z,i[et].length);if(0===Z)return!1;$=function(i){return i.length},ee=function(i,o,s){return(i[s]||[])[o]}}else Z=i.length,$=function(i,o){return i[o].length},ee=function(i,o,s){return(i[o]||[])[s]};function axisMapping(i){if(!o||"carpet"===o.type||"contourcarpet"===o.type||!i||"category"!==i.type||!o["_"+i._id.charAt(0)].length)return F.identity;var s=i._id.charAt(0),_={},j=o["_"+s+"CategoryMap"]||o[s];for(et=0;et<j.length;et++)_[j[et]]=et;return function(o){var s=_[i._categories[o]];return s+1?s:N}}var Z,X,$,ee,et,er,en,ei,eo=axisMapping(s),es=axisMapping(j);j&&"category"===j.type&&(Z=j._categories.length);var el=Array(Z);for(et=0;et<Z;et++)for(er=0,X=s&&"category"===s.type?s._categories.length:$(i,et),el[et]=Array(X);er<X;er++)el[et][er]=cleanZvalue((en=es(et),ei=eo(er),en===N||ei===N?N:ee(i,en,ei)));return el}},61243:function(i){"use strict";i.exports={min:"zmin",max:"zmax"}},68296:function(i,o,s){"use strict";var _=s(71828),F=s(50606).BADNUM,N=s(42973);i.exports=function(i,o,s,j,Z,X){var $,ee,et,er,en=i._length,ei=o.makeCalcdata(i,j),eo=s.makeCalcdata(i,Z);ei=N(i,o,j,ei).vals,eo=N(i,s,Z,eo).vals;var es=i.text,el=void 0!==es&&_.isArray1D(es),ec=i.hovertext,eu=void 0!==ec&&_.isArray1D(ec),ef=_.distinctVals(ei),ed=ef.vals,eh=_.distinctVals(eo),ep=eh.vals,eg=[],em=ep.length,ey=ed.length;for($=0;$<X.length;$++)eg[$]=_.init2dArray(em,ey);el&&(et=_.init2dArray(em,ey)),eu&&(er=_.init2dArray(em,ey));var ev=_.init2dArray(em,ey);for($=0;$<en;$++)if(ei[$]!==F&&eo[$]!==F){var ex=_.findBin(ei[$]+ef.minDiff/2,ed),e_=_.findBin(eo[$]+eh.minDiff/2,ep);for(ee=0;ee<X.length;ee++){var ew=i[X[ee]];eg[ee][e_][ex]=ew[$],ev[e_][ex]=$}el&&(et[e_][ex]=es[$]),eu&&(er[e_][ex]=ec[$])}for(ee=0,i["_"+j]=ed,i["_"+Z]=ep;ee<X.length;ee++)i["_"+X[ee]]=eg[ee];el&&(i._text=et),eu&&(i._hovertext=er),o&&"category"===o.type&&(i["_"+j+"CategoryMap"]=ed.map(function(i){return o._categories[i]})),s&&"category"===s.type&&(i["_"+Z+"CategoryMap"]=ep.map(function(i){return s._categories[i]})),i._after2before=ev}},76382:function(i,o,s){"use strict";var _=s(71828),F=s(67684),N=s(58623),j=s(73927),Z=s(49901),X=s(1586),$=s(21606);i.exports=function(i,o,s,ee){function coerce(s,F){return _.coerce(i,o,$,s,F)}if(!F(i,o,coerce,ee)){o.visible=!1;return}j(i,o,ee,coerce),coerce("xhoverformat"),coerce("yhoverformat"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),N(coerce,ee),Z(i,o,coerce,ee),coerce("hoverongaps"),coerce("connectgaps",_.isArray1D(o.z)&&!1!==o.zsmooth),X(i,o,ee,coerce,{prefix:"",cLetter:"z"})}},43907:function(i,o,s){"use strict";var _=s(71828).maxRowLength;i.exports=function(i){var o,s,F,N,j,Z,X,$,ee=[],et={},er=[],en=i[0],ei=[],eo=[0,0,0],es=_(i);for(s=0;s<i.length;s++)for(F=0,o=ei,ei=en,en=i[s+1]||[];F<es;F++)void 0===ei[F]&&((Z=(void 0!==ei[F-1]?1:0)+(void 0!==ei[F+1]?1:0)+(void 0!==o[F]?1:0)+(void 0!==en[F]?1:0))?(0===s&&Z++,0===F&&Z++,s===i.length-1&&Z++,F===ei.length-1&&Z++,Z<4&&(et[[s,F]]=[s,F,Z]),ee.push([s,F,Z])):er.push([s,F]));for(;er.length;){for(X={},$=!1,j=er.length-1;j>=0;j--)(Z=((et[[(s=(N=er[j])[0])-1,F=N[1]]]||eo)[2]+(et[[s+1,F]]||eo)[2]+(et[[s,F-1]]||eo)[2]+(et[[s,F+1]]||eo)[2])/20)&&(X[N]=[s,F,Z],er.splice(j,1),$=!0);if(!$)throw"findEmpties iterated with no new neighbors";for(N in X)et[N]=X[N],ee.push(X[N])}return ee.sort(function(i,o){return o[2]-i[2]})}},46248:function(i,o,s){"use strict";var _=s(30211),F=s(71828),N=s(89298),j=s(21081).extractOpts;i.exports=function(i,o,s,Z,X){X||(X={});var $,ee,et,er,en,ei,eo,es,el=X.isContour,ec=i.cd[0],eu=ec.trace,ef=i.xa,ed=i.ya,eh=ec.x,ep=ec.y,eg=ec.z,em=ec.xCenter,ey=ec.yCenter,ev=ec.zmask,ex=eu.zhoverformat,e_=eh,ew=ep;if(!1!==i.index){try{et=Math.round(i.index[1]),er=Math.round(i.index[0])}catch(o){F.error("Error hovering on heatmap, pointNumber must be [row,col], found:",i.index);return}if(et<0||et>=eg[0].length||er<0||er>eg.length)return}else{if(_.inbox(o-eh[0],o-eh[eh.length-1],0)>0||_.inbox(s-ep[0],s-ep[ep.length-1],0)>0)return;if(el){for(en=1,e_=[2*eh[0]-eh[1]];en<eh.length;en++)e_.push((eh[en]+eh[en-1])/2);for(e_.push([2*eh[eh.length-1]-eh[eh.length-2]]),ew=[2*ep[0]-ep[1]],en=1;en<ep.length;en++)ew.push((ep[en]+ep[en-1])/2);ew.push([2*ep[ep.length-1]-ep[ep.length-2]])}et=Math.max(0,Math.min(e_.length-2,F.findBin(o,e_))),er=Math.max(0,Math.min(ew.length-2,F.findBin(s,ew)))}var eT=ef.c2p(eh[et]),ek=ef.c2p(eh[et+1]),eA=ed.c2p(ep[er]),eS=ed.c2p(ep[er+1]);el?(ei=ec.orig_x||eh,eo=ec.orig_y||ep,ek=eT,$=ei[et],eS=eA,ee=eo[er]):(ei=ec.orig_x||em||eh,eo=ec.orig_y||ey||ep,$=em?ei[et]:(ei[et]+ei[et+1])/2,ee=ey?eo[er]:(eo[er]+eo[er+1])/2,ef&&"category"===ef.type&&($=eh[et]),ed&&"category"===ed.type&&(ee=ep[er]),eu.zsmooth&&(eT=ek=ef.c2p($),eA=eS=ed.c2p(ee)));var eM=eg[er][et];if(ev&&!ev[er][et]&&(eM=void 0),void 0!==eM||eu.hoverongaps){Array.isArray(ec.hovertext)&&Array.isArray(ec.hovertext[er])?es=ec.hovertext[er][et]:Array.isArray(ec.text)&&Array.isArray(ec.text[er])&&(es=ec.text[er][et]);var eC=j(eu),eE={type:"linear",range:[eC.min,eC.max],hoverformat:ex,_separators:ef._separators,_numFormat:ef._numFormat},eL=N.tickText(eE,eM,"hover").text;return[F.extendFlat(i,{index:eu._after2before?eu._after2before[er][et]:[er,et],distance:i.maxHoverDistance,spikeDistance:i.maxSpikeDistance,x0:eT,x1:ek,y0:eA,y1:eS,xLabelVal:$,yLabelVal:ee,zLabelVal:eM,zLabel:eL,text:es})]}}},92165:function(i,o,s){"use strict";i.exports={attributes:s(21606),supplyDefaults:s(76382),calc:s(90757),plot:s(50347),colorbar:s(61243),style:s(70035),hoverPoints:s(46248),moduleType:"trace",name:"heatmap",basePlotModule:s(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(i,o,s){"use strict";var _=s(71828),F=[[-1,0],[1,0],[0,-1],[0,1]];function correctionOvershoot(i){return .5-.25*Math.min(1,.5*i)}function iterateInterp2d(i,o,s){var _,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el=0;for(Z=0;Z<o.length;Z++){for(X=0,N=(_=o[Z])[0],j=_[1],ei=i[N][j],en=0,er=0;X<4;X++)(ee=i[N+($=F[X])[0]])&&void 0!==(et=ee[j+$[1]])&&(0===en?eo=es=et:(eo=Math.min(eo,et),es=Math.max(es,et)),er++,en+=et);if(0===er)throw"iterateInterp2d order is wrong: no defined neighbors";i[N][j]=en/er,void 0===ei?er<4&&(el=1):(i[N][j]=(1+s)*i[N][j]-s*ei,es>eo&&(el=Math.max(el,Math.abs(i[N][j]-ei)/(es-eo))))}return el}i.exports=function(i,o){var s,F=1;for(iterateInterp2d(i,o),s=0;s<o.length&&!(o[s][2]<4);s++);for(o=o.slice(s),s=0;s<100&&F>.01;s++)F=iterateInterp2d(i,o,correctionOvershoot(F));return F>.01&&_.log("interp2d didn't converge quickly",F),i}},58623:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o){i("texttemplate");var s=_.extendFlat({},o.font,{color:"auto",size:"auto"});_.coerceFont(i,"textfont",s)}},70769:function(i,o,s){"use strict";var _=s(73972),F=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s,N,j,Z){var X,$,ee,et=[],er=_.traceIs(i,"contour"),en=_.traceIs(i,"histogram"),ei=_.traceIs(i,"gl2d");if(F(o)&&o.length>1&&!en&&"category"!==Z.type){var eo=o.length;if(!(eo<=j))return er?o.slice(0,j):o.slice(0,j+1);if(er||ei)et=o.slice(0,j);else if(1===j)et=[o[0]-.5,o[0]+.5];else{for(ee=1,et=[1.5*o[0]-.5*o[1]];ee<eo;ee++)et.push((o[ee-1]+o[ee])*.5);et.push(1.5*o[eo-1]-.5*o[eo-2])}if(eo<j){var es=et[et.length-1],el=es-et[et.length-2];for(ee=eo;ee<j;ee++)es+=el,et.push(es)}}else{var ec=i[Z._id.charAt(0)+"calendar"];for(X=en?Z.r2c(s,0,ec):F(o)&&1===o.length?o[0]:void 0===s?0:("log"===Z.type?Z.d2c:Z.r2c)(s,0,ec),$=N||1,ee=er||ei?0:-.5;ee<j;ee++)et.push(X+$*ee)}return et}},50347:function(i,o,s){"use strict";var _=s(39898),F=s(84267),N=s(73972),j=s(91424),Z=s(89298),X=s(71828),$=s(63893),ee=s(8225),et=s(7901),er=s(21081).extractOpts,en=s(21081).makeColorScaleFuncFromTrace,ei=s(77922),eo=s(18783).LINE_SPACING,es=s(3883),el=s(32396).STYLE,ec="heatmap-label";function selectLabels(i){return i.selectAll("g."+ec)}function removeLabels(i){selectLabels(i).remove()}function findInterp(i,o){var s=o.length-2,_=X.constrain(X.findBin(i,o),0,s),F=o[_],N=o[_+1],j=X.constrain(_+(i-F)/(N-F)-.5,0,s),Z=Math.round(j),$=Math.abs(j-Z);return j&&j!==s&&$?{bin0:Z,frac:$,bin1:Math.round(Z+$/(j-Z))}:{bin0:Z,bin1:Z,frac:0}}function findInterpFromCenters(i,o){var s=o.length-1,_=X.constrain(X.findBin(i,o),0,s),F=o[_],N=(i-F)/(o[_+1]-F)||0;return N<=0?{bin0:_,bin1:_,frac:0}:N<.5?{bin0:_,bin1:_+1,frac:N}:{bin0:_+1,bin1:_,frac:1-N}}function putColor(i,o,s){i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2],i[o+3]=Math.round(255*s[3])}i.exports=function(i,o,s,eu){var ef=o.xaxis,ed=o.yaxis;X.makeTraceGroups(eu,s,"hm").each(function(o){var s=_.select(this),eu=o[0],eh=eu.trace,ep=eh.xgap||0,eg=eh.ygap||0,em=eu.z,ey=eu.x,ev=eu.y,ex=eu.xCenter,e_=eu.yCenter,ew=N.traceIs(eh,"contour"),eT=ew?"best":eh.zsmooth,ek=em.length,eA=X.maxRowLength(em),eS=!1,eM=!1;for(eK=0;void 0===eG&&eK<ey.length-1;)eG=ef.c2p(ey[eK]),eK++;for(eK=ey.length-1;void 0===eW&&eK>0;)eW=ef.c2p(ey[eK]),eK--;for(eW<eG&&(eZ=eW,eW=eG,eG=eZ,eS=!0),eK=0;void 0===eY&&eK<ev.length-1;)eY=ed.c2p(ev[eK]),eK++;for(eK=ev.length-1;void 0===eX&&eK>0;)eX=ed.c2p(ev[eK]),eK--;eX<eY&&(eZ=eY,eY=eX,eX=eZ,eM=!0),ew&&(ex=ey,e_=ev,ey=eu.xfill,ev=eu.yfill);var eC="default";if(eT?eC="best"===eT?"smooth":"fast":eh._islinear&&0===ep&&0===eg&&es()&&(eC="fast"),"fast"!==eC){var eE="best"===eT?0:.5;eG=Math.max(-eE*ef._length,eG),eW=Math.min((1+eE)*ef._length,eW),eY=Math.max(-eE*ed._length,eY),eX=Math.min((1+eE)*ed._length,eX)}var eL=Math.round(eW-eG),eP=Math.round(eX-eY);if(eG>=ef._length||eW<=0||eY>=ed._length||eX<=0){s.selectAll("image").data([]).exit().remove(),removeLabels(s);return}"fast"===eC?(eQ=eA,e0=ek):(eQ=eL,e0=eP);var eI=document.createElement("canvas");eI.width=eQ,eI.height=e0;var eO=eI.getContext("2d",{willReadFrequently:!0}),eD=en(eh,{noNumericCheck:!0,returnArray:!0});"fast"===eC?(e1=eS?function(i){return eA-1-i}:X.identity,e2=eM?function(i){return ek-1-i}:X.identity):(e1=function(i){return X.constrain(Math.round(ef.c2p(ey[i])-eG),0,eL)},e2=function(i){return X.constrain(Math.round(ed.c2p(ev[i])-eY),0,eP)});var eR=e2(0),eB=[eR,eR],eF=eS?0:1,ez=eM?0:1,eN=0,ej=0,eV=0,eU=0;function setColor(i,o){if(void 0!==i){var s=eD(i);return s[0]=Math.round(s[0]),s[1]=Math.round(s[1]),s[2]=Math.round(s[2]),eN+=o,ej+=s[0]*o,eV+=s[1]*o,eU+=s[2]*o,s}return[0,0,0,0]}function interpColor(i,o,s,_){var F,N=i[s.bin0];if(void 0===N)return setColor(void 0,1);var j=i[s.bin1],Z=o[s.bin0],X=o[s.bin1],$=j-N||0,ee=Z-N||0;return F=void 0===j?void 0===X?0:void 0===Z?2*(X-N):(2*X-Z-N)*2/3:void 0===X?void 0===Z?0:(2*N-j-Z)*2/3:void 0===Z?(2*X-j-N)*2/3:X+N-j-Z,setColor(N+s.frac*$+_.frac*(ee+s.frac*F))}if("default"!==eC){var eH=0;try{e8=new Uint8Array(eQ*e0*4)}catch(i){e8=Array(eQ*e0*4)}if("smooth"===eC){var eG,eW,eZ,eY,eX,eK,eJ,e$,eQ,e0,e1,e2,e3,e5,e4,e6,e8,e7,e9,te,tt=ex||ey,tr=e_||ev,tn=Array(tt.length),ta=Array(tr.length),ti=Array(eL),to=ex?findInterpFromCenters:findInterp,ts=e_?findInterpFromCenters:findInterp;for(eK=0;eK<tt.length;eK++)tn[eK]=Math.round(ef.c2p(tt[eK])-eG);for(eK=0;eK<tr.length;eK++)ta[eK]=Math.round(ed.c2p(tr[eK])-eY);for(eK=0;eK<eL;eK++)ti[eK]=to(eK,tn);for(eJ=0;eJ<eP;eJ++)for(eK=0,e9=em[(e7=ts(eJ,ta)).bin0],te=em[e7.bin1];eK<eL;eK++,eH+=4)putColor(e8,eH,e6=interpColor(e9,te,ti[eK],e7))}else for(eJ=0;eJ<ek;eJ++)for(eK=0,e4=em[eJ],eB=e2(eJ);eK<eA;eK++)e6=setColor(e4[eK],1),putColor(e8,eH=(eB*eA+e1(eK))*4,e6);var tl=eO.createImageData(eQ,e0);try{tl.data.set(e8)}catch(i){var tc=tl.data,tu=tc.length;for(eJ=0;eJ<tu;eJ++)tc[eJ]=e8[eJ]}eO.putImageData(tl,0,0)}else{var tf=Math.floor(ep/2),td=Math.floor(eg/2);for(eJ=0;eJ<ek;eJ++)if(e4=em[eJ],eB.reverse(),eB[ez]=e2(eJ+1),eB[0]!==eB[1]&&void 0!==eB[0]&&void 0!==eB[1])for(eK=0,e3=[e5=e1(0),e5];eK<eA;eK++)e3.reverse(),e3[eF]=e1(eK+1),e3[0]!==e3[1]&&void 0!==e3[0]&&void 0!==e3[1]&&(e6=setColor(e4[eK],(e3[1]-e3[0])*(eB[1]-eB[0])),eO.fillStyle="rgba("+e6.join(",")+")",eO.fillRect(e3[0]+tf,eB[0]+td,e3[1]-e3[0]-ep,eB[1]-eB[0]-eg))}var th=F("rgb("+(ej=Math.round(ej/eN))+","+(eV=Math.round(eV/eN))+","+(eU=Math.round(eU/eN))+")");i._hmpixcount=(i._hmpixcount||0)+eN,i._hmlumcount=(i._hmlumcount||0)+eN*th.getLuminance();var tp=s.selectAll("image").data(o);tp.enter().append("svg:image").attr({xmlns:ei.svg,preserveAspectRatio:"none"}),tp.attr({height:eP,width:eL,x:eG,y:eY,"xlink:href":eI.toDataURL("image/png")}),"fast"!==eC||eT||tp.attr("style",el),removeLabels(s);var tg=eh.texttemplate;if(tg){var tm=er(eh),ty={type:"linear",range:[tm.min,tm.max],_separators:ef._separators,_numFormat:ef._numFormat},tv="histogram2dcontour"===eh.type,tx="contour"===eh.type,tb=tx?1:0,t_=tx?ek-1:ek,tw=tx?1:0,tT=tx?eA-1:eA,tk=[];for(eK=tb;eK<t_;eK++){if(tx)tS=eu.y[eK];else if(tv){if(0===eK||eK===ek-1)continue;tS=eu.y[eK]}else if(eu.yCenter)tS=eu.yCenter[eK];else{if(eK+1===ek&&void 0===eu.y[eK+1])continue;tS=(eu.y[eK]+eu.y[eK+1])/2}var tA=Math.round(ed.c2p(tS));if(!(0>tA)&&!(tA>ed._length))for(eJ=tw;eJ<tT;eJ++){if(tx)tM=eu.x[eJ];else if(tv){if(0===eJ||eJ===eA-1)continue;tM=eu.x[eJ]}else if(eu.xCenter)tM=eu.xCenter[eJ];else{if(eJ+1===eA&&void 0===eu.x[eJ+1])continue;tM=(eu.x[eJ]+eu.x[eJ+1])/2}var tS,tM,tC=Math.round(ef.c2p(tM));if(!(0>tC)&&!(tC>ef._length)){var tE=ee({x:tM,y:tS},eh,i._fullLayout);tE.x=tM,tE.y=tS;var tL=eu.z[eK][eJ];void 0===tL?(tE.z="",tE.zLabel=""):(tE.z=tL,tE.zLabel=Z.tickText(ty,tL,"hover").text);var tP=eu.text&&eu.text[eK]&&eu.text[eK][eJ];(void 0===tP||!1===tP)&&(tP=""),tE.text=tP;var tI=X.texttemplateString(tg,tE,i._fullLayout._d3locale,tE,eh._meta||{});if(tI){var tO=tI.split("<br>"),tD=tO.length,tR=0;for(e$=0;e$<tD;e$++)tR=Math.max(tR,tO[e$].length);tk.push({l:tD,c:tR,t:tI,x:tC,y:tA,z:tL})}}}}var tB=eh.textfont,tF=tB.family,tz=tB.size,tN=i._fullLayout.font.size;if(!tz||"auto"===tz){var tj=1/0,tV=1/0,tU=0,tH=0;for(e$=0;e$<tk.length;e$++){var tq=tk[e$];if(tU=Math.max(tU,tq.l),tH=Math.max(tH,tq.c),e$<tk.length-1){var tG=tk[e$+1],tW=Math.abs(tG.x-tq.x),tZ=Math.abs(tG.y-tq.y);tW&&(tj=Math.min(tj,tW)),tZ&&(tV=Math.min(tV,tZ))}}isFinite(tj)&&isFinite(tV)?(tj-=ep,tV-=eg,tj/=tH,tV/=tU,tj/=eo/2,tV/=eo,tz=Math.min(Math.floor(tj),Math.floor(tV),tN)):tz=tN}if(tz<=0||!isFinite(tz))return;selectLabels(s).data(tk).enter().append("g").classed(ec,1).append("text").attr("text-anchor","middle").each(function(o){var s=_.select(this),F=tB.color;F&&"auto"!==F||(F=et.contrast("rgba("+eD(o.z).join()+")")),s.attr("data-notex",1).call($.positionText,o.x,o.y-tz*(o.l*eo/2-1)).call(j.font,tF,tz,F).text(o.t).call($.convertToTspans,i)})}})}},70035:function(i,o,s){"use strict";var _=s(39898);i.exports=function(i){_.select(i).selectAll(".hm image").style("opacity",function(i){return i.trace.opacity})}},49901:function(i){"use strict";i.exports=function(i,o,s){!1===s("zsmooth")&&(s("xgap"),s("ygap")),s("zhoverformat")}},67684:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(73972);function coordDefaults(i,o){var s=o(i);return"scaled"===(s?o(i+"type","array"):"scaled")&&(o(i+"0"),o("d"+i)),s}function isValidZ(i){for(var o,s=!0,N=!1,j=!1,Z=0;Z<i.length;Z++){if(o=i[Z],!F.isArrayOrTypedArray(o)){s=!1;break}o.length>0&&(N=!0);for(var X=0;X<o.length;X++)if(_(o[X])){j=!0;break}}return s&&N&&j}i.exports=function(i,o,s,_,j,Z){var X,$,ee=s("z");if(j=j||"x",Z=Z||"y",void 0===ee||!ee.length)return 0;if(F.isArray1D(i.z)){X=s(j),$=s(Z);var et=F.minRowLength(X),er=F.minRowLength($);if(0===et||0===er)return 0;o._length=Math.min(et,er,ee.length)}else{if(X=coordDefaults(j,s),$=coordDefaults(Z,s),!isValidZ(ee))return 0;s("transpose"),o._length=null}return"heatmapgl"===i.type||(N.getComponentMethod("calendars","handleTraceDefaults")(i,o,[j,Z],_),!0)}},16063:function(i,o,s){"use strict";for(var _=s(21606),F=s(50693),N=s(1426).extendFlat,j=s(30962).overrideAll,Z=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],X={},$=0;$<Z.length;$++){var ee=Z[$];X[ee]=_[ee]}X.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},N(X,F("",{cLetter:"z",autoColorDflt:!1})),i.exports=j(X,"calc","nested")},59560:function(i,o,s){"use strict";var _=s(9330).gl_heatmap2d,F=s(89298),N=s(78614);function Heatmap(i,o){this.scene=i,this.uid=o,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=_(i.glplot,this.options),this.heatmap._trace=this}var j=Heatmap.prototype;function convertColorscale(i){for(var o=i.colorscale,s=i.zmin,_=i.zmax,F=o.length,j=Array(F),Z=Array(4*F),X=0;X<F;X++){var $=o[X],ee=N($[1]);j[X]=s+$[0]*(_-s);for(var et=0;et<4;et++)Z[4*X+et]=ee[et]}return{colorLevels:j,colorValues:Z}}function createHeatmap(i,o,s){var _=new Heatmap(i,o.uid);return _.update(o,s),_}j.handlePick=function(i){var o=this.options,s=o.shape,_=i.pointId,F=_%s[0],N=Math.floor(_/s[0]);return{trace:this,dataCoord:i.dataCoord,traceCoord:[o.x[F],o.y[N],o.z[_]],textLabel:this.textLabels[_],name:this.name,pointIndex:[N,F],hoverinfo:this.hoverinfo}},j.update=function(i,o){var s,_,N=o[0];this.index=i.index,this.name=i.name,this.hoverinfo=i.hoverinfo;var j=N.z;this.options.z=[].concat.apply([],j);var Z=j[0].length,X=j.length;this.options.shape=[Z,X],this.options.x=N.x,this.options.y=N.y,this.options.zsmooth=i.zsmooth;var $=convertColorscale(i);this.options.colorLevels=$.colorLevels,this.options.colorValues=$.colorValues,this.textLabels=[].concat.apply([],i.text),this.heatmap.update(this.options);var ee=this.scene.xaxis,et=this.scene.yaxis;!1===i.zsmooth&&(s={ppad:N.x[1]-N.x[0]},_={ppad:N.y[1]-N.y[0]}),i._extremes[ee._id]=F.findExtremes(ee,N.x,s),i._extremes[et._id]=F.findExtremes(et,N.y,_)},j.dispose=function(){this.heatmap.dispose()},i.exports=createHeatmap},19600:function(i,o,s){"use strict";var _=s(71828),F=s(67684),N=s(1586),j=s(16063);i.exports=function(i,o,s,Z){function coerce(s,F){return _.coerce(i,o,j,s,F)}if(!F(i,o,coerce,Z)){o.visible=!1;return}coerce("text"),coerce("zsmooth"),N(i,o,Z,coerce,{prefix:"",cLetter:"z"})}},3325:function(i,o,s){"use strict";i.exports={attributes:s(16063),supplyDefaults:s(19600),colorbar:s(61243),calc:s(90757),plot:s(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:s(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(i,o,s){"use strict";var _=s(1486),F=s(12663).axisHoverFormat,N=s(5386).fF,j=s(5386).si,Z=s(41940),X=s(17656),$=s(72406),ee=s(1426).extendFlat;i.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:F("x"),yhoverformat:F("y"),text:ee({},_.text,{}),hovertext:ee({},_.hovertext,{}),orientation:_.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:X("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:X("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:N({},{keys:$.eventDataKeys}),texttemplate:j({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:ee({},_.textposition,{arrayOk:!1}),textfont:Z({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:Z({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:Z({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:_.insidetextanchor,textangle:_.textangle,cliponaxis:_.cliponaxis,constraintext:_.constraintext,marker:_.marker,offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,selected:_.selected,unselected:_.unselected,_deprecated:{bardir:_._deprecated.bardir}}},42174:function(i){"use strict";i.exports=function(i,o){for(var s=i.length,_=0,F=0;F<s;F++)o[F]?(i[F]/=o[F],_+=i[F]):i[F]=null;return _}},17656:function(i){"use strict";i.exports=function(i,o){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(i,o,s){"use strict";var _=s(92770);i.exports={count:function(i,o,s){return s[i]++,1},sum:function(i,o,s,F){var N=F[o];return _(N)?(N=Number(N),s[i]+=N,N):0},avg:function(i,o,s,F,N){var j=F[o];return _(j)&&(j=Number(j),s[i]+=j,N[i]++),0},min:function(i,o,s,F){var N=F[o];if(_(N)){if(N=Number(N),!_(s[i]))return s[i]=N,N;if(s[i]>N){var j=N-s[i];return s[i]=N,j}}return 0},max:function(i,o,s,F){var N=F[o];if(_(N)){if(N=Number(N),!_(s[i]))return s[i]=N,N;if(s[i]<N){var j=N-s[i];return s[i]=N,j}}return 0}}},40965:function(i,o,s){"use strict";var _=s(50606),F=_.ONEAVGYEAR,N=_.ONEAVGMONTH,j=_.ONEDAY,Z=_.ONEHOUR,X=_.ONEMIN,$=_.ONESEC,ee=s(89298).tickIncrement;function biggestDigitChanged(i,o,s,_){if(i*o<=0)return 1/0;for(var F=Math.abs(o-i),N="date"===s.type,j=biggestGuaranteedDigitChanged(F,N),Z=0;Z<10;Z++){var X=biggestGuaranteedDigitChanged(80*j,N);if(j===X)break;if(didDigitChange(X,i,o,N,s,_))j=X;else break}return j}function biggestGuaranteedDigitChanged(i,o){return o&&i>$?i>j?i>1.1*F?F:i>1.1*N?N:j:i>Z?Z:i>X?X:$:Math.pow(10,Math.floor(Math.log(i)/Math.LN10))}function didDigitChange(i,o,s,_,N,Z){if(_&&i>j){var X=dateParts(o,N,Z),$=dateParts(s,N,Z),ee=i===F?0:1;return X[ee]!==$[ee]}return Math.floor(s/i)-Math.floor(o/i)>.1}function dateParts(i,o,s){var _=o.c2d(i,F,s).split("-");return""===_[0]&&(_.unshift(),_[0]="-"+_[0]),_}i.exports=function(i,o,s,_,N){var Z,X,$=-1.1*o,et=-.1*o,er=i-et,en=s[0],ei=s[1],eo=Math.min(biggestDigitChanged(en+et,en+er,_,N),biggestDigitChanged(ei+et,ei+er,_,N)),es=Math.min(biggestDigitChanged(en+$,en+et,_,N),biggestDigitChanged(ei+$,ei+et,_,N));if(eo>es&&es<Math.abs(ei-en)/4e3?(Z=eo,X=!1):(Z=Math.min(eo,es),X=!0),"date"===_.type&&Z>j){var el=Z===F?1:6,ec=Z===F?"M12":"M1";return function(o,s){var j=_.c2d(o,F,N),Z=j.indexOf("-",el);Z>0&&(j=j.substr(0,Z));var $=_.d2c(j,0,N);if($<o){var et=ee($,ec,!1,N);($+et)/2<o+i&&($=et)}return s&&X?ee($,ec,!0,N):$}}return function(o,s){var _=Z*Math.round(o/Z);return _+Z/10<o&&_+.9*Z<o+i&&(_+=Z),s&&X&&(_-=Z),_}}},72138:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(73972),j=s(89298),Z=s(75341),X=s(59575),$=s(36362),ee=s(42174),et=s(40965);function calc(i,o){var s,N,er,en,ei,eo,es=[],el=[],ec="h"===o.orientation,eu=j.getFromId(i,ec?o.yaxis:o.xaxis),ef=ec?"y":"x",ed={x:"y",y:"x"}[ef],eh=o[ef+"calendar"],ep=o.cumulative,eg=calcAllAutoBins(i,o,eu,ef),em=eg[0],ey=eg[1],ev="string"==typeof em.size,ex=[],e_=ev?ex:em,ew=[],eT=[],ek=[],eA=0,eS=o.histnorm,eM=o.histfunc,eC=-1!==eS.indexOf("density");ep.enabled&&eC&&(eS=eS.replace(/ ?density$/,""),eC=!1);var eE="max"===eM||"min"===eM?null:0,eL=X.count,eP=$[eS],eI=!1,pr2c=function(i){return eu.r2c(i,0,eh)};for(F.isArrayOrTypedArray(o[ed])&&"count"!==eM&&(ei=o[ed],eI="avg"===eM,eL=X[eM]),s=pr2c(em.start),er=pr2c(em.end)+(s-j.tickIncrement(s,em.size,!1,eh))/1e6;s<er&&es.length<1e6&&(N=j.tickIncrement(s,em.size,!1,eh),es.push((s+N)/2),el.push(eE),ek.push([]),ex.push(s),eC&&ew.push(1/(N-s)),eI&&eT.push(0),!(N<=s));)s=N;ex.push(s),ev||"date"!==eu.type||(e_={start:pr2c(e_.start),end:pr2c(e_.end),size:e_.size}),i._fullLayout._roundFnOpts||(i._fullLayout._roundFnOpts={});var eO=o["_"+ef+"bingroup"],eD={leftGap:1/0,rightGap:1/0};eO&&(i._fullLayout._roundFnOpts[eO]||(i._fullLayout._roundFnOpts[eO]=eD),eD=i._fullLayout._roundFnOpts[eO]);var eR=el.length,eB=!0,eF=eD.leftGap,ez=eD.rightGap,eN={};for(s=0;s<ey.length;s++){var ej=ey[s];(en=F.findBin(ej,e_))>=0&&en<eR&&(eA+=eL(en,s,el,ei,eT),eB&&ek[en].length&&ej!==ey[ek[en][0]]&&(eB=!1),ek[en].push(s),eN[s]=en,eF=Math.min(eF,ej-ex[en]),ez=Math.min(ez,ex[en+1]-ej))}eD.leftGap=eF,eD.rightGap=ez,eB||(eo=function(o,s){return function(){var _=i._fullLayout._roundFnOpts[eO];return et(_.leftGap,_.rightGap,ex,eu,eh)(o,s)}}),eI&&(eA=ee(el,eT)),eP&&eP(el,eA,ew),ep.enabled&&cdf(el,ep.direction,ep.currentbin);var eV=Math.min(es.length,el.length),eU=[],eH=0,eG=eV-1;for(s=0;s<eV;s++)if(el[s]){eH=s;break}for(s=eV-1;s>=eH;s--)if(el[s]){eG=s;break}for(s=eH;s<=eG;s++)if(_(es[s])&&_(el[s])){var eW={p:es[s],s:el[s],b:0};ep.enabled||(eW.pts=ek[s],eB?eW.ph0=eW.ph1=ek[s].length?ey[ek[s][0]]:es[s]:(o._computePh=!0,eW.ph0=eo(ex[s]),eW.ph1=eo(ex[s+1],!0))),eU.push(eW)}return 1===eU.length&&(eU[0].width1=j.tickIncrement(eU[0].p,em.size,!1,eh)-eU[0].p),Z(eU,o),F.isArrayOrTypedArray(o.selectedpoints)&&F.tagSelected(eU,o,eN),eU}function calcAllAutoBins(i,o,s,Z,X){var $,ee,et,er,en,ei,eo,es=Z+"bins",el=i._fullLayout,ec=o["_"+Z+"bingroup"],eu=el._histogramBinOpts[ec],ef="overlay"===el.barmode,r2c=function(i){return s.r2c(i,0,er)},c2r=function(i){return s.c2r(i,0,er)},ed="date"===s.type?function(i){return i||0===i?F.cleanDate(i,null,er):null}:function(i){return _(i)?Number(i):null};function setBound(i,o,s){o[i+"Found"]?(o[i]=ed(o[i]),null===o[i]&&(o[i]=s[i])):(ei[i]=o[i]=s[i],F.nestedProperty(ee[0],es+"."+i).set(s[i]))}if(o["_"+Z+"autoBinFinished"])delete o["_"+Z+"autoBinFinished"];else{ee=eu.traces;var eh=[],ep=!0,eg=!1,em=!1;for($=0;$<ee.length;$++)if((et=ee[$]).visible){var ey=eu.dirs[$];en=et["_"+ey+"pos0"]=s.makeCalcdata(et,ey),eh=F.concat(eh,en),delete et["_"+Z+"autoBinFinished"],!0===o.visible&&(ep?ep=!1:(delete et._autoBin,et["_"+Z+"autoBinFinished"]=1),N.traceIs(et,"2dMap")&&(eg=!0),"histogram2dcontour"===et.type&&(em=!0))}er=ee[0][Z+"calendar"];var ev=j.autoBin(eh,s,eu.nbins,eg,er,eu.sizeFound&&eu.size);if(ei=(ee[0]._autoBin={})[eu.dirs[0]]={},em&&(eu.size||(ev.start=c2r(j.tickIncrement(r2c(ev.start),ev.size,!0,er))),void 0===eu.end&&(ev.end=c2r(j.tickIncrement(r2c(ev.end),ev.size,!1,er)))),ef&&!N.traceIs(o,"2dMap")&&0===ev._dataSpan&&"category"!==s.type&&"multicategory"!==s.type&&""===o.bingroup&&void 0===o.xbins){if(X)return[ev,en,!0];ev=handleSingleValueOverlays(i,o,s,Z,es)}(eo=et.cumulative||{}).enabled&&"include"!==eo.currentbin&&("decreasing"===eo.direction?ev.start=c2r(j.tickIncrement(r2c(ev.start),ev.size,!0,er)):ev.end=c2r(j.tickIncrement(r2c(ev.end),ev.size,!1,er))),eu.size=ev.size,eu.sizeFound||(ei.size=ev.size,F.nestedProperty(ee[0],es+".size").set(ev.size)),setBound("start",eu,ev),setBound("end",eu,ev)}en=o["_"+Z+"pos0"],delete o["_"+Z+"pos0"];var ex=o._input[es]||{},e_=F.extendFlat({},eu),ew=eu.start,eT=s.r2l(ex.start),ek=void 0!==eT;if((eu.startFound||ek)&&eT!==s.r2l(ew)){var eA=ek?eT:F.aggNums(Math.min,null,en),eS={type:"category"===s.type||"multicategory"===s.type?"linear":s.type,r2l:s.r2l,dtick:eu.size,tick0:ew,calendar:er,range:[eA,j.tickIncrement(eA,eu.size,!1,er)].map(s.l2r)},eM=j.tickFirst(eS);eM>s.r2l(eA)&&(eM=j.tickIncrement(eM,eu.size,!0,er)),e_.start=s.l2r(eM),ek||F.nestedProperty(o,es+".start").set(e_.start)}var eC=eu.end,eE=s.r2l(ex.end),eL=void 0!==eE;if((eu.endFound||eL)&&eE!==s.r2l(eC)){var eP=eL?eE:F.aggNums(Math.max,null,en);e_.end=s.l2r(eP),eL||F.nestedProperty(o,es+".start").set(e_.end)}var eI="autobin"+Z;return!1===o._input[eI]&&(o._input[es]=F.extendFlat({},o[es]||{}),delete o._input[eI],delete o[eI]),[e_,en]}function handleSingleValueOverlays(i,o,s,_,N){var j,Z,X,$=i._fullLayout,ee=getConnectedHistograms(i,o),et=!1,er=1/0,en=[o];for(j=0;j<ee.length;j++)if((Z=ee[j])===o)et=!0;else if(et){var ei=calcAllAutoBins(i,Z,s,_,!0),eo=ei[0],es=ei[2];Z["_"+_+"autoBinFinished"]=1,Z["_"+_+"pos0"]=ei[1],es?en.push(Z):er=Math.min(er,eo.size)}else er=Math.min(er,(X=$._histogramBinOpts[Z["_"+_+"bingroup"]]).size||Z[N].size);var el=Array(en.length);for(j=0;j<en.length;j++)for(var ec=en[j]["_"+_+"pos0"],eu=0;eu<ec.length;eu++)if(void 0!==ec[eu]){el[j]=ec[eu];break}for(isFinite(er)||(er=F.distinctVals(el).minDiff),j=0;j<en.length;j++){var ef=(Z=en[j])[_+"calendar"],ed={start:s.c2r(el[j]-er/2,0,ef),end:s.c2r(el[j]+er/2,0,ef),size:er};Z._input[N]=Z[N]=ed,(X=$._histogramBinOpts[Z["_"+_+"bingroup"]])&&F.extendFlat(X,ed)}return o[N]}function getConnectedHistograms(i,o){for(var s=o.xaxis,_=o.yaxis,F=o.orientation,N=[],j=i._fullData,Z=0;Z<j.length;Z++){var X=j[Z];"histogram"===X.type&&!0===X.visible&&X.orientation===F&&X.xaxis===s&&X.yaxis===_&&N.push(X)}return N}function cdf(i,o,s){var _,F,N;function firstHalfPoint(o){N=i[o],i[o]/=2}function nextHalfPoint(o){F=i[o],i[o]=N+F/2,N+=F}if("half"===s){if("increasing"===o)for(firstHalfPoint(0),_=1;_<i.length;_++)nextHalfPoint(_);else for(firstHalfPoint(i.length-1),_=i.length-2;_>=0;_--)nextHalfPoint(_)}else if("increasing"===o){for(_=1;_<i.length;_++)i[_]+=i[_-1];"exclude"===s&&(i.unshift(0),i.pop())}else{for(_=i.length-2;_>=0;_--)i[_]+=i[_+1];"exclude"===s&&(i.push(0),i.shift())}}i.exports={calc:calc,calcAllAutoBins:calcAllAutoBins}},72406:function(i){"use strict";i.exports={eventDataKeys:["binNumber"]}},82222:function(i,o,s){"use strict";var _=s(71828),F=s(41675),N=s(73972).traceIs,j=s(26125),Z=_.nestedProperty,X=s(99082).getAxisGroup,$=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],ee=["x","y"];i.exports=function(i,o){var s=o._histogramBinOpts={},et=[],er={},en=[];function coerce(i,o){return _.coerce(ed._input,ed,ed._module.attributes,i,o)}function orientation2binDir(i){return"v"===i.orientation?"x":"y"}function getAxisType(i,s){return F.getFromTrace({_fullLayout:o},i,s).type}function fillBinOpts(i,o,F){var N=i.uid+"__"+F;o||(o=N);var j=getAxisType(i,F),Z=i[F+"calendar"]||"",X=s[o],$=!0;X&&(j===X.axType&&Z===X.calendar?($=!1,X.traces.push(i),X.dirs.push(F)):(o=N,j!==X.axType&&_.warn(["Attempted to group the bins of trace",i.index,"set on a","type:"+j,"axis","with bins on","type:"+X.axType,"axis."].join(" ")),Z!==X.calendar&&_.warn(["Attempted to group the bins of trace",i.index,"set with a",Z,"calendar","with bins",X.calendar?"on a "+X.calendar+" calendar":"w/o a set calendar"].join(" ")))),$&&(s[o]={traces:[i],dirs:[F],axType:j,calendar:i[F+"calendar"]||""}),i["_"+F+"bingroup"]=o}for(em=0;em<i.length;em++)N(ed=i[em],"histogram")&&(et.push(ed),delete ed._xautoBinFinished,delete ed._yautoBinFinished,N(ed,"2dMap")||j(ed._input,ed,o,coerce));var ei=o._alignmentOpts||{};for(em=0;em<et.length;em++){if(ed=et[em],ep="",!N(ed,"2dMap")){if(eg=orientation2binDir(ed),"group"===o.barmode&&ed.alignmentgroup){var eo=X(o,ed[eg+"axis"])+ed.orientation;(ei[eo]||{})[ed.alignmentgroup]&&(ep=eo)}ep||"overlay"===o.barmode||(ep=X(o,ed.xaxis)+X(o,ed.yaxis)+orientation2binDir(ed))}ep?(er[ep]||(er[ep]=[]),er[ep].push(ed)):en.push(ed)}for(ep in er){if(1===(eh=er[ep]).length){en.push(eh[0]);continue}var es=!1;for(eh.length&&(ed=eh[0],es=coerce("bingroup")),ep=es||ep,em=0;em<eh.length;em++){var el=(ed=eh[em])._input.bingroup;el&&el!==ep&&_.warn(["Trace",ed.index,"must match","within bingroup",ep+".","Ignoring its bingroup:",el,"setting."].join(" ")),ed.bingroup=ep,fillBinOpts(ed,ep,orientation2binDir(ed))}}for(em=0;em<en.length;em++){ed=en[em];var ec=coerce("bingroup");if(N(ed,"2dMap"))for(ev=0;ev<2;ev++){var eu=coerce((eg=ee[ev])+"bingroup",ec?ec+"__"+eg:null);fillBinOpts(ed,eu,eg)}else fillBinOpts(ed,ec,orientation2binDir(ed))}for(ep in s){var ef=s[ep];for(ey=0,eh=ef.traces;ey<$.length;ey++){var ed,eh,ep,eg,em,ey,ev,ex,e_,ew=$[ey],eT=ew.name;if("nbins"!==eT||!ef.sizeFound){for(em=0;em<eh.length;em++){if(ed=eh[em],eg=ef.dirs[em],ex=ew.aStr[eg],void 0!==Z(ed._input,ex).get()){ef[eT]=coerce(ex),ef[eT+"Found"]=!0;break}(e_=(ed._autoBin||{})[eg]||{})[eT]&&Z(ed,ex).set(e_[eT])}if("start"===eT||"end"===eT)for(;em<eh.length;em++)(ed=eh[em])["_"+eg+"bingroup"]&&coerce(ex,(e_=(ed._autoBin||{})[eg]||{})[eT]);"nbins"!==eT||ef.sizeFound||ef.nbinsFound||(ed=eh[0],ef[eT]=coerce(ex))}}}}},11385:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=s(7901),j=s(90769).handleText,Z=s(98340),X=s(7745);i.exports=function(i,o,s,$){function coerce(s,_){return F.coerce(i,o,X,s,_)}var ee=coerce("x"),et=coerce("y");coerce("cumulative.enabled")&&(coerce("cumulative.direction"),coerce("cumulative.currentbin")),coerce("text");var er=coerce("textposition");j(i,o,$,coerce,er,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),coerce("hovertext"),coerce("hovertemplate"),coerce("xhoverformat"),coerce("yhoverformat");var en=coerce("orientation",et&&!ee?"h":"v"),ei="v"===en?"x":"y",eo=ee&&et?Math.min(F.minRowLength(ee)&&F.minRowLength(et)):F.minRowLength(o[ei]||[]);if(!eo){o.visible=!1;return}o._length=eo,_.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y"],$),o["v"===en?"y":"x"]&&coerce("histfunc"),coerce("histnorm"),coerce("autobin"+ei),Z(i,o,coerce,s,$),F.coerceSelectionMarkerOpacity(o,coerce);var es=(o.marker.line||{}).color,el=_.getComponentMethod("errorbars","supplyDefaults");el(i,o,es||N.defaultLine,{axis:"y"}),el(i,o,es||N.defaultLine,{axis:"x",inherit:"y"})}},84402:function(i){"use strict";i.exports=function(i,o,s,_,F){if(i.x="xVal"in o?o.xVal:o.x,i.y="yVal"in o?o.yVal:o.y,"zLabelVal"in o&&(i.z=o.zLabelVal),o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),!(s.cumulative||{}).enabled){var N,j=Array.isArray(F)?_[0].pts[F[0]][F[1]]:_[F].pts;if(i.pointNumbers=j,i.binNumber=i.pointNumber,delete i.pointNumber,delete i.pointIndex,s._indexToPoints){N=[];for(var Z=0;Z<j.length;Z++)N=N.concat(s._indexToPoints[j[Z]])}else N=j;i.pointIndices=N}return i}},76440:function(i,o,s){"use strict";var _=s(95423).hoverPoints,F=s(89298).hoverLabelText;i.exports=function(i,o,s,N,j){var Z=_(i,o,s,N,j);if(Z){var X=(i=Z[0]).cd[i.index],$=i.cd[0].trace;if(!$.cumulative.enabled){var ee="h"===$.orientation?"y":"x";i[ee+"Label"]=F(i[ee+"a"],[X.ph0,X.ph1],$[ee+"hoverformat"])}return Z}}},36071:function(i,o,s){"use strict";i.exports={attributes:s(7745),layoutAttributes:s(43641),supplyDefaults:s(11385),crossTraceDefaults:s(82222),supplyLayoutDefaults:s(13957),calc:s(72138).calc,crossTraceCalc:s(11661).crossTraceCalc,plot:s(17295).plot,layerName:"barlayer",style:s(16688).style,styleOnSelect:s(16688).styleOnSelect,colorbar:s(4898),hoverPoints:s(76440),selectPoints:s(81974),eventData:s(84402),moduleType:"trace",name:"histogram",basePlotModule:s(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(i){"use strict";i.exports={percent:function(i,o){for(var s=i.length,_=100/o,F=0;F<s;F++)i[F]*=_},probability:function(i,o){for(var s=i.length,_=0;_<s;_++)i[_]/=o},density:function(i,o,s,_){var F=i.length;_=_||1;for(var N=0;N<F;N++)i[N]*=s[N]*_},"probability density":function(i,o,s,_){var F=i.length;_&&(o/=_);for(var N=0;N<F;N++)i[N]*=s[N]/o}}},35361:function(i,o,s){"use strict";var _=s(7745),F=s(17656),N=s(21606),j=s(9012),Z=s(12663).axisHoverFormat,X=s(5386).fF,$=s(5386).si,ee=s(50693),et=s(1426).extendFlat;i.exports=et({x:_.x,y:_.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:_.histnorm,histfunc:_.histfunc,nbinsx:_.nbinsx,xbins:F("x"),nbinsy:_.nbinsy,ybins:F("y"),autobinx:_.autobinx,autobiny:_.autobiny,bingroup:et({},_.bingroup,{}),xbingroup:et({},_.bingroup,{}),ybingroup:et({},_.bingroup,{}),xgap:N.xgap,ygap:N.ygap,zsmooth:N.zsmooth,xhoverformat:Z("x"),yhoverformat:Z("y"),zhoverformat:Z("z",1),hovertemplate:X({},{keys:"z"}),texttemplate:$({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:N.textfont,showlegend:et({},j.showlegend,{dflt:!1})},ee("",{cLetter:"z",autoColorDflt:!1}))},17562:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(59575),j=s(36362),Z=s(42174),X=s(40965),$=s(72138).calcAllAutoBins;function makeIncrements(i,o,s,_){var F,N=Array(i);if(_)for(F=0;F<i;F++)N[F]=1/(o[F+1]-o[F]);else{var j=1/s;for(F=0;F<i;F++)N[F]=j}return N}function binsToCalc(i,o){return{start:i(o.start),end:i(o.end),size:o.size}}function getRanges(i,o,s,_,F,N){var j,Z=i.length-1,$=Array(Z),ee=X(s,_,i,F,N);for(j=0;j<Z;j++){var et=(o||[])[j];$[j]=void 0===et?[ee(i[j]),ee(i[j+1],!0)]:[et,et]}return $}i.exports=function(i,o){var s,X,ee,et,er,en,ei=F.getFromId(i,o.xaxis),eo=F.getFromId(i,o.yaxis),es=o.xcalendar,el=o.ycalendar,xr2c=function(i){return ei.r2c(i,0,es)},yr2c=function(i){return eo.r2c(i,0,el)},ec=$(i,o,ei,"x"),eu=ec[0],ef=ec[1],ed=$(i,o,eo,"y"),eh=ed[0],ep=ed[1],eg=o._length;ef.length>eg&&ef.splice(eg,ef.length-eg),ep.length>eg&&ep.splice(eg,ep.length-eg);var em=[],ey=[],ev=[],ex="string"==typeof eu.size,e_="string"==typeof eh.size,ew=[],eT=[],ek=ex?ew:eu,eA=e_?eT:eh,eS=0,eM=[],eC=[],eE=o.histnorm,eL=o.histfunc,eP=-1!==eE.indexOf("density"),eI="max"===eL||"min"===eL?null:0,eO=N.count,eD=j[eE],eR=!1,eB=[],eF=[],ez="z"in o?o.z:"marker"in o&&Array.isArray(o.marker.color)?o.marker.color:"";ez&&"count"!==eL&&(eR="avg"===eL,eO=N[eL]);var eN=eu.size,ej=xr2c(eu.start),eV=xr2c(eu.end)+(ej-F.tickIncrement(ej,eN,!1,es))/1e6;for(ee=ej;ee<eV;ee=F.tickIncrement(ee,eN,!1,es))ey.push(eI),ew.push(ee),eR&&ev.push(0);ew.push(ee);var eU=ey.length,eH=(ee-ej)/eU,eG=(s=ej+eH/2,ei.c2r(s,0,es)),eW=eh.size,eZ=yr2c(eh.start),eY=yr2c(eh.end)+(eZ-F.tickIncrement(eZ,eW,!1,el))/1e6;for(ee=eZ;ee<eY;ee=F.tickIncrement(ee,eW,!1,el)){em.push(ey.slice()),eT.push(ee);var eX=Array(eU);for(et=0;et<eU;et++)eX[et]=[];eC.push(eX),eR&&eM.push(ev.slice())}eT.push(ee);var eK=em.length,eJ=(ee-eZ)/eK,e$=(X=eZ+eJ/2,eo.c2r(X,0,el));eP&&(eB=makeIncrements(ey.length,ek,eH,ex),eF=makeIncrements(em.length,eA,eJ,e_)),ex||"date"!==ei.type||(ek=binsToCalc(xr2c,ek)),e_||"date"!==eo.type||(eA=binsToCalc(yr2c,eA));var eQ=!0,e0=!0,e1=Array(eU),e2=Array(eK),e3=1/0,e5=1/0,e4=1/0,e6=1/0;for(ee=0;ee<eg;ee++){var e8=ef[ee],e7=ep[ee];er=_.findBin(e8,ek),en=_.findBin(e7,eA),er>=0&&er<eU&&en>=0&&en<eK&&(eS+=eO(er,ee,em[en],ez,eM[en]),eC[en][er].push(ee),eQ&&(void 0===e1[er]?e1[er]=e8:e1[er]!==e8&&(eQ=!1)),e0&&(void 0===e2[en]?e2[en]=e7:e2[en]!==e7&&(e0=!1)),e3=Math.min(e3,e8-ew[er]),e5=Math.min(e5,ew[er+1]-e8),e4=Math.min(e4,e7-eT[en]),e6=Math.min(e6,eT[en+1]-e7))}if(eR)for(en=0;en<eK;en++)eS+=Z(em[en],eM[en]);if(eD)for(en=0;en<eK;en++)eD(em[en],eS,eB,eF[en]);return{x:ef,xRanges:getRanges(ew,eQ&&e1,e3,e5,ei,es),x0:eG,dx:eH,y:ep,yRanges:getRanges(eT,e0&&e2,e4,e6,eo,el),y0:e$,dy:eJ,z:em,pts:eC}}},93888:function(i,o,s){"use strict";var _=s(71828),F=s(75238),N=s(49901),j=s(1586),Z=s(58623),X=s(35361);i.exports=function(i,o,s,$){function coerce(s,F){return _.coerce(i,o,X,s,F)}F(i,o,coerce,$),!1!==o.visible&&(N(i,o,coerce,$),j(i,o,$,coerce,{prefix:"",cLetter:"z"}),coerce("hovertemplate"),Z(coerce,$),coerce("xhoverformat"),coerce("yhoverformat"))}},76128:function(i,o,s){"use strict";var _=s(46248),F=s(89298).hoverLabelText;i.exports=function(i,o,s,N,j){var Z=_(i,o,s,N,j);if(Z){var X=(i=Z[0]).index,$=X[0],ee=X[1],et=i.cd[0],er=et.trace,en=et.xRanges[ee],ei=et.yRanges[$];return i.xLabel=F(i.xa,[en[0],en[1]],er.xhoverformat),i.yLabel=F(i.ya,[ei[0],ei[1]],er.yhoverformat),Z}}},43905:function(i,o,s){"use strict";i.exports={attributes:s(35361),supplyDefaults:s(93888),crossTraceDefaults:s(82222),calc:s(90757),plot:s(50347),layerName:"heatmaplayer",colorbar:s(61243),style:s(70035),hoverPoints:s(76128),eventData:s(84402),moduleType:"trace",name:"histogram2d",basePlotModule:s(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(i,o,s){"use strict";var _=s(73972),F=s(71828);i.exports=function(i,o,s,N){var j=s("x"),Z=s("y"),X=F.minRowLength(j),$=F.minRowLength(Z);if(!X||!$){o.visible=!1;return}o._length=Math.min(X,$),_.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y"],N),(s("z")||s("marker.color"))&&s("histfunc"),s("histnorm"),s("autobinx"),s("autobiny")}},99066:function(i,o,s){"use strict";var _=s(35361),F=s(70600),N=s(50693),j=s(12663).axisHoverFormat,Z=s(1426).extendFlat;i.exports=Z({x:_.x,y:_.y,z:_.z,marker:_.marker,histnorm:_.histnorm,histfunc:_.histfunc,nbinsx:_.nbinsx,xbins:_.xbins,nbinsy:_.nbinsy,ybins:_.ybins,autobinx:_.autobinx,autobiny:_.autobiny,bingroup:_.bingroup,xbingroup:_.xbingroup,ybingroup:_.ybingroup,autocontour:F.autocontour,ncontours:F.ncontours,contours:F.contours,line:{color:F.line.color,width:Z({},F.line.width,{dflt:.5}),dash:F.line.dash,smoothing:F.line.smoothing,editType:"plot"},xhoverformat:j("x"),yhoverformat:j("y"),zhoverformat:j("z",1),hovertemplate:_.hovertemplate,texttemplate:F.texttemplate,textfont:F.textfont},N("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(i,o,s){"use strict";var _=s(71828),F=s(75238),N=s(67217),j=s(8724),Z=s(58623),X=s(99066);i.exports=function(i,o,s,$){function coerce(s,F){return _.coerce(i,o,X,s,F)}function coerce2(s){return _.coerce2(i,o,X,s)}F(i,o,coerce,$),!1!==o.visible&&(N(i,o,coerce,coerce2),j(i,o,coerce,$),coerce("xhoverformat"),coerce("yhoverformat"),coerce("hovertemplate"),o.contours&&"heatmap"===o.contours.coloring&&Z(coerce,$))}},35902:function(i,o,s){"use strict";i.exports={attributes:s(99066),supplyDefaults:s(62654),crossTraceDefaults:s(82222),calc:s(27529),plot:s(29854).plot,layerName:"contourlayer",style:s(84426),colorbar:s(90654),hoverPoints:s(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:s(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(i,o,s){"use strict";var _=s(5386).fF,F=s(5386).si,N=s(50693),j=s(27670).Y,Z=s(34e3),X=s(57564),$=s(45802),ee=s(43473),et=s(1426).extendFlat,er=s(79952).u;i.exports={labels:X.labels,parents:X.parents,values:X.values,branchvalues:X.branchvalues,count:X.count,level:X.level,maxdepth:X.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:$.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:et({colors:X.marker.colors,line:X.marker.line,pattern:er,editType:"calc"},N("marker",{colorAttr:"colors",anim:!1})),leaf:X.leaf,pathbar:$.pathbar,text:Z.text,textinfo:X.textinfo,texttemplate:F({editType:"plot"},{keys:ee.eventDataKeys.concat(["label","value"])}),hovertext:Z.hovertext,hoverinfo:X.hoverinfo,hovertemplate:_({},{keys:ee.eventDataKeys}),textfont:Z.textfont,insidetextfont:Z.insidetextfont,outsidetextfont:$.outsidetextfont,textposition:$.textposition,sort:Z.sort,root:X.root,domain:j({name:"icicle",trace:!0,editType:"calc"})}},96346:function(i,o,s){"use strict";var _=s(74875);o.name="icicle",o.plot=function(i,s,F,N){_.plotBasePlot(o.name,i,s,F,N)},o.clean=function(i,s,F,N){_.cleanBasePlot(o.name,i,s,F,N)}},46584:function(i,o,s){"use strict";var _=s(52147);o.y=function(i,o){return _.calc(i,o)},o.T=function(i){return _._runCrossTraceCalc("icicle",i)}},56524:function(i,o,s){"use strict";var _=s(71828),F=s(46291),N=s(7901),j=s(27670).c,Z=s(90769).handleText,X=s(97313).TEXTPAD,$=s(37434).handleMarkerDefaults,ee=s(21081),et=ee.hasColorscale,er=ee.handleDefaults;i.exports=function(i,o,s,ee){function coerce(s,N){return _.coerce(i,o,F,s,N)}var en=coerce("labels"),ei=coerce("parents");if(!en||!en.length||!ei||!ei.length){o.visible=!1;return}var eo=coerce("values");coerce(eo&&eo.length?"branchvalues":"count"),coerce("level"),coerce("maxdepth"),coerce("tiling.orientation"),coerce("tiling.flip"),coerce("tiling.pad");var es=coerce("text");coerce("texttemplate"),o.texttemplate||coerce("textinfo",Array.isArray(es)?"text+label":"label"),coerce("hovertext"),coerce("hovertemplate");var el=coerce("pathbar.visible");Z(i,o,ee,coerce,"auto",{hasPathbar:el,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),coerce("textposition"),$(i,o,ee,coerce);var ec=o._hasColorscale=et(i,"marker","colors")||(i.marker||{}).coloraxis;ec&&er(i,o,ee,coerce,{prefix:"marker.",cLetter:"c"}),coerce("leaf.opacity",ec?1:.7),o._hovered={marker:{line:{width:2,color:N.contrast(ee.paper_bgcolor)}}},el&&(coerce("pathbar.thickness",o.pathbar.textfont.size+2*X),coerce("pathbar.side"),coerce("pathbar.edgeshape")),coerce("sort"),coerce("root.color"),j(o,ee,coerce),o._length=null}},90666:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(91424),j=s(63893),Z=s(21538),X=s(82454).styleOne,$=s(43473),ee=s(2791),et=s(83523),er=s(24714).formatSliceLabel;i.exports=function(i,o,s,en,ei){var eo=ei.width,es=ei.height,el=ei.viewX,ec=ei.viewY,eu=ei.pathSlice,ef=ei.toMoveInsideSlice,ed=ei.strTransform,eh=ei.hasTransition,ep=ei.handleSlicesExit,eg=ei.makeUpdateSliceInterpolator,em=ei.makeUpdateTextInterpolator,ey=ei.prevEntry,ev=i._context.staticPlot,ex=i._fullLayout,e_=o[0].trace,ew=-1!==e_.textposition.indexOf("left"),eT=-1!==e_.textposition.indexOf("right"),ek=-1!==e_.textposition.indexOf("bottom"),eA=Z(s,[eo,es],{flipX:e_.tiling.flip.indexOf("x")>-1,flipY:e_.tiling.flip.indexOf("y")>-1,orientation:e_.tiling.orientation,pad:{inner:e_.tiling.pad},maxDepth:e_._maxDepth}).descendants(),eS=1/0,eM=-1/0;eA.forEach(function(i){var o=i.depth;o>=e_._maxDepth?(i.x0=i.x1=(i.x0+i.x1)/2,i.y0=i.y1=(i.y0+i.y1)/2):(eS=Math.min(eS,o),eM=Math.max(eM,o))}),en=en.data(eA,ee.getPtId),e_._maxVisibleLayers=isFinite(eM)?eM-eS+1:0,en.enter().append("g").classed("slice",!0),ep(en,!1,{},[eo,es],eu),en.order();var eC=null;if(eh&&ey){var eE=ee.getPtId(ey);en.each(function(i){null===eC&&ee.getPtId(i)===eE&&(eC={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1})})}var getRefRect=function(){return eC||{x0:0,x1:eo,y0:0,y1:es}},eL=en;return eh&&(eL=eL.transition().each("end",function(){var o=_.select(this);ee.setSliceCursor(o,i,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),eL.each(function(Z){Z._x0=el(Z.x0),Z._x1=el(Z.x1),Z._y0=ec(Z.y0),Z._y1=ec(Z.y1),Z._hoverX=el(Z.x1-e_.tiling.pad),Z._hoverY=ek?ec(Z.y1-e_.tiling.pad/2):ec(Z.y0+e_.tiling.pad/2);var en=_.select(this),ei=F.ensureSingle(en,"path","surface",function(i){i.style("pointer-events",ev?"none":"all")});eh?ei.transition().attrTween("d",function(i){var o=eg(i,!1,getRefRect(),[eo,es],{orientation:e_.tiling.orientation,flipX:e_.tiling.flip.indexOf("x")>-1,flipY:e_.tiling.flip.indexOf("y")>-1});return function(i){return eu(o(i))}}):ei.attr("d",eu),en.call(et,s,i,o,{styleOne:X,eventDataKeys:$.eventDataKeys,transitionTime:$.CLICK_TRANSITION_TIME,transitionEasing:$.CLICK_TRANSITION_EASING}).call(ee.setSliceCursor,i,{isTransitioning:i._transitioning}),ei.call(X,Z,e_,i,{hovered:!1}),Z.x0===Z.x1||Z.y0===Z.y1?Z._text="":Z._text=er(Z,s,e_,o,ex)||"";var ep=F.ensureSingle(en,"g","slicetext"),ey=F.ensureSingle(ep,"text","",function(i){i.attr("data-notex",1)}),eA=F.ensureUniformFontSize(i,ee.determineTextFont(e_,Z,ex.font));ey.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor",eT?"end":ew?"start":"middle").call(N.font,eA).call(j.convertToTspans,i),Z.textBB=N.bBox(ey.node()),Z.transform=ef(Z,{fontSize:eA.size}),Z.transform.fontSize=eA.size,eh?ey.transition().attrTween("transform",function(i){var o=em(i,!1,getRefRect(),[eo,es]);return function(i){return ed(o(i))}}):ey.attr("transform",ed(Z))}),eC}},69816:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"icicle",basePlotModule:s(96346),categories:[],animatable:!0,attributes:s(46291),layoutAttributes:s(92894),supplyDefaults:s(56524),supplyLayoutDefaults:s(21070),calc:s(46584).y,crossTraceCalc:s(46584).T,plot:s(85596),style:s(82454).style,colorbar:s(4898),meta:{}}},92894:function(i){"use strict";i.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(i,o,s){"use strict";var _=s(71828),F=s(92894);i.exports=function(i,o){function coerce(s,N){return _.coerce(i,o,F,s,N)}coerce("iciclecolorway",o.colorway),coerce("extendiciclecolors")}},21538:function(i,o,s){"use strict";var _=s(674),F=s(14102);i.exports=function(i,o,s){var N=s.flipX,j=s.flipY,Z="h"===s.orientation,X=s.maxDepth,$=o[0],ee=o[1];X&&($=(i.height+1)*o[0]/Math.min(i.height+1,X),ee=(i.height+1)*o[1]/Math.min(i.height+1,X));var et=_.partition().padding(s.pad.inner).size(Z?[o[1],$]:[o[0],ee])(i);return(Z||N||j)&&F(et,o,{swapXY:Z,flipX:N,flipY:j}),et}},85596:function(i,o,s){"use strict";var _=s(80694),F=s(90666);i.exports=function(i,o,s,N){return _(i,o,s,N,{type:"icicle",drawDescendants:F})}},82454:function(i,o,s){"use strict";var _=s(39898),F=s(7901),N=s(71828),j=s(72597).resizeText,Z=s(43467);function style(i){var o=i._fullLayout._iciclelayer.selectAll(".trace");j(i,o,"icicle"),o.each(function(o){var s=_.select(this),F=o[0].trace;s.style("opacity",F.opacity),s.selectAll("path.surface").each(function(o){_.select(this).call(styleOne,o,F,i)})})}function styleOne(i,o,s,_){var j=o.data.data,X=!o.children,$=j.i,ee=N.castOption(s,$,"marker.line.color")||F.defaultLine,et=N.castOption(s,$,"marker.line.width")||0;i.call(Z,o,s,_).style("stroke-width",et).call(F.stroke,ee).style("opacity",X?s.leaf.opacity:null)}i.exports={style:style,styleOne:styleOne}},17230:function(i,o,s){"use strict";for(var _=s(9012),F=s(5386).fF,N=s(1426).extendFlat,j=s(51877).colormodel,Z=["rgb","rgba","rgba256","hsl","hsla"],X=[],$=[],ee=0;ee<Z.length;ee++){var et=j[Z[ee]];X.push("For the `"+Z[ee]+"` colormodel, it is ["+(et.zminDflt||et.min).join(", ")+"]."),$.push("For the `"+Z[ee]+"` colormodel, it is ["+(et.zmaxDflt||et.max).join(", ")+"].")}i.exports=N({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:Z,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:N({},_.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:F({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(i,o,s){"use strict";var _=s(71828),F=s(51877),N=s(92770),j=s(89298),Z=s(71828).maxRowLength,X=s(67395).A;function scale(i,o,s,F){return function(N){return _.constrain((N-i)*o,s,F)}}function constrain(i,o){return function(s){return _.constrain(s,i,o)}}function makeScaler(i){var o=F.colormodel[i.colormodel],s=(o.colormodel||i.colormodel).length;i._sArray=[];for(var _=0;_<s;_++)o.min[_]!==i.zmin[_]||o.max[_]!==i.zmax[_]?i._sArray.push(scale(i.zmin[_],(o.max[_]-o.min[_])/(i.zmax[_]-i.zmin[_]),o.min[_],o.max[_])):i._sArray.push(constrain(o.min[_],o.max[_]));return function(o){for(var _=o.slice(0,s),F=0;F<s;F++){var j=_[F];if(!N(j))return!1;_[F]=i._sArray[F](j)}return _}}i.exports=function(i,o){if(o._hasZ)s=o.z.length,_=Z(o.z);else if(o._hasSource){var s,_,F,N=X(o.source);s=N.height,_=N.width}var $=j.getFromId(i,o.xaxis||"x"),ee=j.getFromId(i,o.yaxis||"y"),et=$.d2c(o.x0)-o.dx/2,er=ee.d2c(o.y0)-o.dy/2,en=[et,et+_*o.dx],ei=[er,er+s*o.dy];if($&&"log"===$.type)for(F=0;F<_;F++)en.push(et+F*o.dx);if(ee&&"log"===ee.type)for(F=0;F<s;F++)ei.push(er+F*o.dy);return o._extremes[$._id]=j.findExtremes($,en),o._extremes[ee._id]=j.findExtremes(ee,ei),o._scaler=makeScaler(o),[{x0:et,y0:er,z:o.z,w:_,h:s}]}},51877:function(i){"use strict";i.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(i){return i.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(i){return i.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(i){return i.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(i){var o=i.slice(0,3);return o[1]=o[1]+"%",o[2]=o[2]+"%",o},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(i){var o=i.slice(0,4);return o[1]=o[1]+"%",o[2]=o[2]+"%",o},suffix:["\xb0","%","%",""]}}}},13245:function(i,o,s){"use strict";var _=s(71828),F=s(17230),N=s(51877),j=s(25095).IMAGE_URL_PREFIX;i.exports=function(i,o){function coerce(s,N){return _.coerce(i,o,F,s,N)}coerce("source"),o.source&&!o.source.match(j)&&delete o.source,o._hasSource=!!o.source;var s,Z=coerce("z");if(o._hasZ=!(void 0===Z||!Z.length||!Z[0]||!Z[0].length),!o._hasZ&&!o._hasSource){o.visible=!1;return}coerce("x0"),coerce("y0"),coerce("dx"),coerce("dy"),o._hasZ?(coerce("colormodel","rgb"),coerce("zmin",(s=N.colormodel[o.colormodel]).zminDflt||s.min),coerce("zmax",s.zmaxDflt||s.max)):o._hasSource&&(o.colormodel="rgba256",s=N.colormodel[o.colormodel],o.zmin=s.zminDflt,o.zmax=s.zmaxDflt),coerce("zsmooth"),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),o._length=null}},30835:function(i){"use strict";i.exports=function(i,o){return"xVal"in o&&(i.x=o.xVal),"yVal"in o&&(i.y=o.yVal),o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),i.color=o.color,i.colormodel=o.trace.colormodel,i.z||(i.z=o.color),i}},67395:function(i,o,s){"use strict";var _=s(33575),F=s(25095).IMAGE_URL_PREFIX,N=s(12856).Buffer;o.A=function(i){return _(new N(i.replace(F,""),"base64"))}},28749:function(i,o,s){"use strict";var _=s(30211),F=s(71828),N=s(51877);i.exports=function(i,o,s){var j,Z,X,$=i.cd[0],ee=$.trace,et=i.xa,er=i.ya;if(!(_.inbox(o-$.x0,o-($.x0+$.w*ee.dx),0)>0||_.inbox(s-$.y0,s-($.y0+$.h*ee.dy),0)>0)){var en=Math.floor((o-$.x0)/ee.dx),ei=Math.floor(Math.abs(s-$.y0)/ee.dy);if(ee._hasZ?j=$.z[ei][en]:ee._hasSource&&(j=ee._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(en,ei,1,1).data),j){var eo=$.hi||ee.hoverinfo;if(eo){var es=eo.split("+");-1!==es.indexOf("all")&&(es=["color"]),-1!==es.indexOf("color")&&(Z=!0)}var el=N.colormodel[ee.colormodel],ec=el.colormodel||ee.colormodel,eu=ec.length,ef=ee._scaler(j),ed=el.suffix,eh=[];(ee.hovertemplate||Z)&&(eh.push("["+[ef[0]+ed[0],ef[1]+ed[1],ef[2]+ed[2]].join(", ")),4===eu&&eh.push(", "+ef[3]+ed[3]),eh.push("]"),eh=eh.join(""),i.extraText=ec.toUpperCase()+": "+eh),Array.isArray(ee.hovertext)&&Array.isArray(ee.hovertext[ei])?X=ee.hovertext[ei][en]:Array.isArray(ee.text)&&Array.isArray(ee.text[ei])&&(X=ee.text[ei][en]);var ep=er.c2p($.y0+(ei+.5)*ee.dy),eg=$.x0+(en+.5)*ee.dx,em=$.y0+(ei+.5)*ee.dy,ey="["+j.slice(0,ee.colormodel.length).join(", ")+"]";return[F.extendFlat(i,{index:[ei,en],x0:et.c2p($.x0+en*ee.dx),x1:et.c2p($.x0+(en+1)*ee.dx),y0:ep,y1:ep,color:ef,xVal:eg,xLabelVal:eg,yVal:em,yLabelVal:em,zLabelVal:ey,text:X,hovertemplateLabels:{zLabel:ey,colorLabel:eh,"color[0]Label":ef[0]+ed[0],"color[1]Label":ef[1]+ed[1],"color[2]Label":ef[2]+ed[2],"color[3]Label":ef[3]+ed[3]}})]}}}},94507:function(i,o,s){"use strict";i.exports={attributes:s(17230),supplyDefaults:s(13245),calc:s(71113),plot:s(60775),style:s(12826),hoverPoints:s(28749),eventData:s(30835),moduleType:"trace",name:"image",basePlotModule:s(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=F.strTranslate,j=s(77922),Z=s(51877),X=s(3883),$=s(32396).STYLE;i.exports=function(i,o,s,ee){var et=o.xaxis,er=o.yaxis,en=!i._context._exportedPlot&&X();F.makeTraceGroups(ee,s,"im").each(function(o){var s,X,ee,ei,eo,es,el=_.select(this),ec=o[0],eu=ec.trace,ef=("fast"===eu.zsmooth||!1===eu.zsmooth&&en)&&!eu._hasZ&&eu._hasSource&&"linear"===et.type&&"linear"===er.type;eu._realImage=ef;var ed=ec.z,eh=ec.x0,ep=ec.y0,eg=ec.w,em=ec.h,ey=eu.dx,ev=eu.dy;for(es=0;void 0===s&&es<eg;)s=et.c2p(eh+es*ey),es++;for(es=eg;void 0===X&&es>0;)X=et.c2p(eh+es*ey),es--;for(es=0;void 0===ei&&es<em;)ei=er.c2p(ep+es*ev),es++;for(es=em;void 0===eo&&es>0;)eo=er.c2p(ep+es*ev),es--;X<s&&(ee=X,X=s,s=ee),eo<ei&&(ee=ei,ei=eo,eo=ee),ef||(s=Math.max(-.5*et._length,s),X=Math.min(1.5*et._length,X),ei=Math.max(-.5*er._length,ei),eo=Math.min(1.5*er._length,eo));var ex=Math.round(X-s),e_=Math.round(eo-ei);if(ex<=0||e_<=0){el.selectAll("image").data([]).exit().remove();return}function drawMagnifiedPixelsOnCanvas(i){var o,_=document.createElement("canvas");_.width=ex,_.height=e_;var N=_.getContext("2d",{willReadFrequently:!0}),ipx=function(i){return F.constrain(Math.round(et.c2p(eh+i*ey)-s),0,ex)},jpx=function(i){return F.constrain(Math.round(er.c2p(ep+i*ev)-ei),0,e_)},j=Z.colormodel[eu.colormodel],X=j.colormodel||eu.colormodel,$=j.fmt;for(es=0;es<ec.w;es++){var ee=ipx(es),en=ipx(es+1);if(!(en===ee||isNaN(en)||isNaN(ee)))for(var eo=0;eo<ec.h;eo++){var el=jpx(eo),ef=jpx(eo+1);!(ef===el||isNaN(ef)||isNaN(el))&&i(es,eo)&&((o=eu._scaler(i(es,eo)))?N.fillStyle=X+"("+$(o).join(",")+")":N.fillStyle="rgba(0,0,0,0)",N.fillRect(ee,el,en-ee,ef-el))}}return _}var ew=el.selectAll("image").data([o]);ew.enter().append("svg:image").attr({xmlns:j.svg,preserveAspectRatio:"none"}),ew.exit().remove();var eT=!1===eu.zsmooth?$:"";if(ef){var ek=F.simpleMap(et.range,et.r2l),eA=F.simpleMap(er.range,er.r2l),eS=ek[1]<ek[0],eM=eA[1]>eA[0];if(eS||eM){var eC=s+ex/2,eE=ei+e_/2;eT+="transform:"+N(eC+"px",eE+"px")+"scale("+(eS?-1:1)+","+(eM?-1:1)+")"+N(-eC+"px",-eE+"px")+";"}}ew.attr("style",eT);var eL=new Promise(function(i){if(eu._hasZ)i();else if(eu._hasSource){if(eu._canvas&&eu._canvas.el.width===eg&&eu._canvas.el.height===em&&eu._canvas.source===eu.source)i();else{var o=document.createElement("canvas");o.width=eg,o.height=em;var s=o.getContext("2d",{willReadFrequently:!0});eu._image=eu._image||new Image;var _=eu._image;_.onload=function(){s.drawImage(_,0,0),eu._canvas={el:o,source:eu.source},i()},_.setAttribute("src",eu.source)}}}).then(function(){var i;if(eu._hasZ)i=drawMagnifiedPixelsOnCanvas(function(i,o){return ed[o][i]}).toDataURL("image/png");else if(eu._hasSource){if(ef)i=eu.source;else{var o=eu._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,eg,em).data;i=drawMagnifiedPixelsOnCanvas(function(i,s){var _=4*(s*eg+i);return[o[_],o[_+1],o[_+2],o[_+3]]}).toDataURL("image/png")}}ew.attr({"xlink:href":i,height:e_,width:ex,x:s,y:ei})});i._promises.push(eL)})}},12826:function(i,o,s){"use strict";var _=s(39898);i.exports=function(i){_.select(i).selectAll(".im image").style("opacity",function(i){return i[0].trace.opacity})}},54846:function(i,o,s){"use strict";var _=s(1426).extendFlat,F=s(1426).extendDeep,N=s(30962).overrideAll,j=s(41940),Z=s(22399),X=s(27670).Y,$=s(13838),ee=s(44467).templatedArray,et=s(22372),er=s(12663).descriptionOnlyNumbers,en=j({editType:"plot",colorEditType:"plot"}),ei={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:Z.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},eo={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},es=ee("step",F({},ei,{range:eo}));i.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:X({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:_({},en,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:er("value")},font:_({},en,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:er("value")},increasing:{symbol:{valType:"string",dflt:et.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:et.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:et.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:et.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:_({},en,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:F({},ei,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:Z.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:N({range:eo,visible:_({},$.visible,{dflt:!0}),tickmode:$.minor.tickmode,nticks:$.nticks,tick0:$.tick0,dtick:$.dtick,tickvals:$.tickvals,ticktext:$.ticktext,ticks:_({},$.ticks,{dflt:"outside"}),ticklen:$.ticklen,tickwidth:$.tickwidth,tickcolor:$.tickcolor,ticklabelstep:$.ticklabelstep,showticklabels:$.showticklabels,labelalias:$.labelalias,tickfont:j({}),tickangle:$.tickangle,tickformat:$.tickformat,tickformatstops:$.tickformatstops,tickprefix:$.tickprefix,showtickprefix:$.showtickprefix,ticksuffix:$.ticksuffix,showticksuffix:$.showticksuffix,separatethousands:$.separatethousands,exponentformat:$.exponentformat,minexponent:$.minexponent,showexponent:$.showexponent,editType:"plot"},"plot"),steps:es,threshold:{line:{color:_({},ei.line.color,{}),width:_({},ei.line.width,{dflt:1}),editType:"plot"},thickness:_({},ei.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(i,o,s){"use strict";var _=s(74875);o.name="indicator",o.plot=function(i,s,F,N){_.plotBasePlot(o.name,i,s,F,N)},o.clean=function(i,s,F,N){_.cleanBasePlot(o.name,i,s,F,N)}},24667:function(i){"use strict";function calc(i,o){var s=[],_=o.value;"number"!=typeof o._lastValue&&(o._lastValue=o.value);var F=o._lastValue,N=F;return o._hasDelta&&"number"==typeof o.delta.reference&&(N=o.delta.reference),s[0]={y:_,lastY:F,delta:_-N,relativeDelta:(_-N)/N},s}i.exports={calc:calc}},84577:function(i){"use strict";i.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(i,o,s){"use strict";var _=s(71828),F=s(54846),N=s(27670).c,j=s(44467),Z=s(85501),X=s(84577),$=s(26218),ee=s(38701),et=s(96115),er=s(89426);function supplyDefaults(i,o,s,en){function coerce(s,N){return _.coerce(i,o,F,s,N)}N(o,en,coerce),coerce("mode"),o._hasNumber=-1!==o.mode.indexOf("number"),o._hasDelta=-1!==o.mode.indexOf("delta"),o._hasGauge=-1!==o.mode.indexOf("gauge");var ei,eo,es,el,ec,eu,ef=coerce("value");o._range=[0,"number"==typeof ef?1.5*ef:1];var ed=[,,];function coerceGauge(i,o){return _.coerce(es,el,F.gauge,i,o)}function coerceGaugeAxis(i,o){return _.coerce(ec,eu,F.gauge.axis,i,o)}if(o._hasNumber&&(coerce("number.valueformat"),coerce("number.font.color",en.font.color),coerce("number.font.family",en.font.family),coerce("number.font.size"),void 0===o.number.font.size&&(o.number.font.size=X.defaultNumberFontSize,ed[0]=!0),coerce("number.prefix"),coerce("number.suffix"),ei=o.number.font.size),o._hasDelta&&(coerce("delta.font.color",en.font.color),coerce("delta.font.family",en.font.family),coerce("delta.font.size"),void 0===o.delta.font.size&&(o.delta.font.size=(o._hasNumber?.5:1)*(ei||X.defaultNumberFontSize),ed[1]=!0),coerce("delta.reference",o.value),coerce("delta.relative"),coerce("delta.valueformat",o.delta.relative?"2%":""),coerce("delta.increasing.symbol"),coerce("delta.increasing.color"),coerce("delta.decreasing.symbol"),coerce("delta.decreasing.color"),coerce("delta.position"),coerce("delta.prefix"),coerce("delta.suffix"),eo=o.delta.font.size),o._scaleNumbers=(!o._hasNumber||ed[0])&&(!o._hasDelta||ed[1])||!1,coerce("title.font.color",en.font.color),coerce("title.font.family",en.font.family),coerce("title.font.size",.25*(ei||eo||X.defaultNumberFontSize)),coerce("title.text"),o._hasGauge){(es=i.gauge)||(es={}),el=j.newContainer(o,"gauge"),coerceGauge("shape"),(o._isBullet="bullet"===o.gauge.shape)||coerce("title.align","center"),(o._isAngular="angular"===o.gauge.shape)||coerce("align","center"),coerceGauge("bgcolor",en.paper_bgcolor),coerceGauge("borderwidth"),coerceGauge("bordercolor"),coerceGauge("bar.color"),coerceGauge("bar.line.color"),coerceGauge("bar.line.width"),coerceGauge("bar.thickness",X.valueThickness*("bullet"===o.gauge.shape?.5:1)),Z(es,el,{name:"steps",handleItemDefaults:stepDefaults}),coerceGauge("threshold.value"),coerceGauge("threshold.thickness"),coerceGauge("threshold.line.width"),coerceGauge("threshold.line.color"),ec={},es&&(ec=es.axis||{}),eu=j.newContainer(el,"axis"),coerceGaugeAxis("visible"),o._range=coerceGaugeAxis("range",o._range);var eh={outerTicks:!0};$(ec,eu,coerceGaugeAxis,"linear"),er(ec,eu,coerceGaugeAxis,"linear",eh),et(ec,eu,coerceGaugeAxis,"linear",eh),ee(ec,eu,coerceGaugeAxis,eh)}else coerce("title.align","center"),coerce("align","center"),o._isAngular=o._isBullet=!1;o._length=null}function stepDefaults(i,o){function coerce(s,N){return _.coerce(i,o,F.gauge.steps,s,N)}coerce("color"),coerce("line.color"),coerce("line.width"),coerce("range"),coerce("thickness")}i.exports={supplyDefaults:supplyDefaults}},15154:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"indicator",basePlotModule:s(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:s(54846),supplyDefaults:s(94425).supplyDefaults,calc:s(24667).calc,plot:s(75634),meta:{}}},75634:function(i,o,s){"use strict";var _=s(39898),F=s(81684).sX,N=s(81684).k4,j=s(71828),Z=j.strScale,X=j.strTranslate,$=j.rad2deg,ee=s(18783).MID_SHIFT,et=s(91424),er=s(84577),en=s(63893),ei=s(89298),eo=s(71453),es=s(52830),el=s(13838),ec=s(7901),eu={left:"start",center:"middle",right:"end"},ef={left:0,center:.5,right:1},ed=/[yzafpnµmkMGTPEZY]/;function hasTransition(i){return i&&i.duration>0}function drawBulletGauge(i,o,s,_){var F,N,j,Z,$,ee=s[0].trace,et=_.gauge,en=_.layer,eo=_.gaugeBg,es=_.gaugeOutline,el=_.size,eu=ee.domain,ef=_.transitionOpts,ed=_.onComplete;et.enter().append("g").classed("bullet",!0),et.attr("transform",X(el.l,el.t)),en.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),en.selectAll("g.xbulletaxistick,path,text").remove();var eh=el.h,ep=ee.gauge.bar.thickness*eh,eg=eu.x[0],em=eu.x[0]+(eu.x[1]-eu.x[0])*(ee._hasNumber||ee._hasDelta?1-er.bulletNumberDomainSize:1);function drawRect(i){i.attr("width",function(i){return Math.max(0,F.c2p(i.range[1])-F.c2p(i.range[0]))}).attr("x",function(i){return F.c2p(i.range[0])}).attr("y",function(i){return .5*(1-i.thickness)*eh}).attr("height",function(i){return i.thickness*eh})}(F=mockAxis(i,ee.gauge.axis))._id="xbulletaxis",F.domain=[eg,em],F.setScale(),N=ei.calcTicks(F),j=ei.makeTransTickFn(F),Z=ei.getTickSigns(F)[2],$=el.t+el.h,F.visible&&(ei.drawTicks(i,F,{vals:"inside"===F.ticks?ei.clipEnds(F,N):N,layer:en,path:ei.makeTickPath(F,$,Z),transFn:j}),ei.drawLabels(i,F,{vals:N,layer:en,transFn:j,labelFns:ei.makeLabelFns(F,$)}));var ey=[eo].concat(ee.gauge.steps),ev=et.selectAll("g.bg-bullet").data(ey);ev.enter().append("g").classed("bg-bullet",!0).append("rect"),ev.select("rect").call(drawRect).call(styleShape),ev.exit().remove();var ex=et.selectAll("g.value-bullet").data([ee.gauge.bar]);ex.enter().append("g").classed("value-bullet",!0).append("rect"),ex.select("rect").attr("height",ep).attr("y",(eh-ep)/2).call(styleShape),hasTransition(ef)?ex.select("rect").transition().duration(ef.duration).ease(ef.easing).each("end",function(){ed&&ed()}).each("interrupt",function(){ed&&ed()}).attr("width",Math.max(0,F.c2p(Math.min(ee.gauge.axis.range[1],s[0].y)))):ex.select("rect").attr("width","number"==typeof s[0].y?Math.max(0,F.c2p(Math.min(ee.gauge.axis.range[1],s[0].y))):0),ex.exit().remove();var e_=s.filter(function(){return ee.gauge.threshold.value||0===ee.gauge.threshold.value}),ew=et.selectAll("g.threshold-bullet").data(e_);ew.enter().append("g").classed("threshold-bullet",!0).append("line"),ew.select("line").attr("x1",F.c2p(ee.gauge.threshold.value)).attr("x2",F.c2p(ee.gauge.threshold.value)).attr("y1",(1-ee.gauge.threshold.thickness)/2*eh).attr("y2",(1-(1-ee.gauge.threshold.thickness)/2)*eh).call(ec.stroke,ee.gauge.threshold.line.color).style("stroke-width",ee.gauge.threshold.line.width),ew.exit().remove();var eT=et.selectAll("g.gauge-outline").data([es]);eT.enter().append("g").classed("gauge-outline",!0).append("rect"),eT.select("rect").call(drawRect).call(styleShape),eT.exit().remove()}function drawAngularGauge(i,o,s,F){var N,j,Z,et=s[0].trace,er=F.size,en=F.radius,eo=F.innerRadius,es=F.gaugeBg,el=F.gaugeOutline,ec=[er.l+er.w/2,er.t+er.h/2+en/2],eu=F.gauge,ef=F.layer,ed=F.transitionOpts,eh=F.onComplete,ep=Math.PI/2;function valueToAngle(i){var o=et.gauge.axis.range[0],s=(i-o)/(et.gauge.axis.range[1]-o)*Math.PI-ep;return s<-ep?-ep:s>ep?ep:s}function arcPathGenerator(i){return _.svg.arc().innerRadius((eo+en)/2-i/2*(en-eo)).outerRadius((eo+en)/2+i/2*(en-eo)).startAngle(-ep)}function drawArc(i){i.attr("d",function(i){return arcPathGenerator(i.thickness).startAngle(valueToAngle(i.range[0])).endAngle(valueToAngle(i.range[1]))()})}eu.enter().append("g").classed("angular",!0),eu.attr("transform",X(ec[0],ec[1])),ef.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),ef.selectAll("g.xangularaxistick,path,text").remove(),(N=mockAxis(i,et.gauge.axis)).type="linear",N.range=et.gauge.axis.range,N._id="xangularaxis",N.ticklabeloverflow="allow",N.setScale();var t2g=function(i){return(N.range[0]-i.x)/(N.range[1]-N.range[0])*Math.PI+Math.PI},eg={},em=ei.makeLabelFns(N,0).labelStandoff;eg.xFn=function(i){return Math.cos(t2g(i))*em},eg.yFn=function(i){var o=t2g(i),s=Math.sin(o)>0?.2:1;return-Math.sin(o)*(em+i.fontSize*s)+Math.abs(Math.cos(o))*(i.fontSize*ee)},eg.anchorFn=function(i){var o=Math.cos(t2g(i));return .1>Math.abs(o)?"middle":o>0?"start":"end"},eg.heightFn=function(i,o,s){return -.5*(1+Math.sin(t2g(i)))*s};var _transFn=function(i){return X(ec[0]+en*Math.cos(i),ec[1]-en*Math.sin(i))};if(j=ei.calcTicks(N),Z=ei.getTickSigns(N)[2],N.visible){Z="inside"===N.ticks?-1:1;var ey=(N.linewidth||1)/2;ei.drawTicks(i,N,{vals:j,layer:ef,path:"M"+Z*ey+",0h"+Z*N.ticklen,transFn:function(i){var o=t2g(i);return _transFn(o)+"rotate("+-$(o)+")"}}),ei.drawLabels(i,N,{vals:j,layer:ef,transFn:function(i){return _transFn(t2g(i))},labelFns:eg})}var ev=[es].concat(et.gauge.steps),ex=eu.selectAll("g.bg-arc").data(ev);ex.enter().append("g").classed("bg-arc",!0).append("path"),ex.select("path").call(drawArc).call(styleShape),ex.exit().remove();var e_=arcPathGenerator(et.gauge.bar.thickness),ew=eu.selectAll("g.value-arc").data([et.gauge.bar]);ew.enter().append("g").classed("value-arc",!0).append("path");var eT=ew.select("path");hasTransition(ed)?(eT.transition().duration(ed.duration).ease(ed.easing).each("end",function(){eh&&eh()}).each("interrupt",function(){eh&&eh()}).attrTween("d",arcTween(e_,valueToAngle(s[0].lastY),valueToAngle(s[0].y))),et._lastValue=s[0].y):eT.attr("d","number"==typeof s[0].y?e_.endAngle(valueToAngle(s[0].y)):"M0,0Z"),eT.call(styleShape),ew.exit().remove(),ev=[];var ek=et.gauge.threshold.value;(ek||0===ek)&&ev.push({range:[ek,ek],color:et.gauge.threshold.color,line:{color:et.gauge.threshold.line.color,width:et.gauge.threshold.line.width},thickness:et.gauge.threshold.thickness});var eA=eu.selectAll("g.threshold-arc").data(ev);eA.enter().append("g").classed("threshold-arc",!0).append("path"),eA.select("path").call(drawArc).call(styleShape),eA.exit().remove();var eS=eu.selectAll("g.gauge-outline").data([el]);eS.enter().append("g").classed("gauge-outline",!0).append("path"),eS.select("path").call(drawArc).call(styleShape),eS.exit().remove()}function drawNumbers(i,o,s,F){var $=s[0].trace,ee=F.numbersX,er=F.numbersY,eo=$.align||"center",es=eu[eo],el=F.transitionOpts,eh=F.onComplete,ep=j.ensureSingle(o,"g","numbers"),eg=[];$._hasNumber&&eg.push("number"),$._hasDelta&&(eg.push("delta"),"left"===$.delta.position&&eg.reverse());var em=ep.selectAll("text").data(eg);function transitionFormat(o,s,_,F){if(!o.match("s")||_>=0==F>=0||s(_).slice(-1).match(ed)||s(F).slice(-1).match(ed))return s;var N=mockAxis(i,{tickformat:o.slice().replace("s","f").replace(/\d+/,function(i){return parseInt(i)-1})});return function(i){return 1>Math.abs(i)?ei.tickText(N,i).text:s(i)}}function drawBignumber(){var o=mockAxis(i,{tickformat:$.number.valueformat},$._range);o.setScale(),ei.prepTicks(o);var bignumberFmt=function(i){return ei.tickText(o,i).text},F=$.number.suffix,j=$.number.prefix,Z=ep.select("text.number");function writeNumber(){var o="number"==typeof s[0].y?j+bignumberFmt(s[0].y)+F:"-";Z.text(o).call(et.font,$.number.font).call(en.convertToTspans,i)}return hasTransition(el)?Z.transition().duration(el.duration).ease(el.easing).each("end",function(){writeNumber(),eh&&eh()}).each("interrupt",function(){writeNumber(),eh&&eh()}).attrTween("text",function(){var i=_.select(this),o=N(s[0].lastY,s[0].y);$._lastValue=s[0].y;var Z=transitionFormat($.number.valueformat,bignumberFmt,s[0].lastY,s[0].y);return function(s){i.text(j+Z(o(s))+F)}}):writeNumber(),ev=measureText(j+bignumberFmt(s[0].y)+F,$.number.font,es,i),Z}function drawDelta(){var o=mockAxis(i,{tickformat:$.delta.valueformat},$._range);o.setScale(),ei.prepTicks(o);var deltaFmt=function(i){return ei.tickText(o,i).text},F=$.delta.suffix,j=$.delta.prefix,deltaValue=function(i){return $.delta.relative?i.relativeDelta:i.delta},deltaFormatText=function(i,o){return 0===i||"number"!=typeof i||isNaN(i)?"-":(i>0?$.delta.increasing.symbol:$.delta.decreasing.symbol)+j+o(i)+F},deltaFill=function(i){return i.delta>=0?$.delta.increasing.color:$.delta.decreasing.color};void 0===$._deltaLastValue&&($._deltaLastValue=deltaValue(s[0]));var Z=ep.select("text.delta");function writeDelta(){Z.text(deltaFormatText(deltaValue(s[0]),deltaFmt)).call(ec.fill,deltaFill(s[0])).call(en.convertToTspans,i)}return Z.call(et.font,$.delta.font).call(ec.fill,deltaFill({delta:$._deltaLastValue})),hasTransition(el)?Z.transition().duration(el.duration).ease(el.easing).tween("text",function(){var i=_.select(this),o=deltaValue(s[0]),F=$._deltaLastValue,j=transitionFormat($.delta.valueformat,deltaFmt,F,o),Z=N(F,o);return $._deltaLastValue=o,function(o){i.text(deltaFormatText(Z(o),j)),i.call(ec.fill,deltaFill({delta:Z(o)}))}}).each("end",function(){writeDelta(),eh&&eh()}).each("interrupt",function(){writeDelta(),eh&&eh()}):writeDelta(),ex=measureText(deltaFormatText(deltaValue(s[0]),deltaFmt),$.delta.font,es,i),Z}em.enter().append("text"),em.attr("text-anchor",function(){return es}).attr("class",function(i){return i}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),em.exit().remove();var ey=$.mode+$.align;if($._hasDelta&&(ew=drawDelta(),ey+=$.delta.position+$.delta.font.size+$.delta.font.family+$.delta.valueformat+($.delta.increasing.symbol+$.delta.decreasing.symbol),e_=ex),$._hasNumber&&(drawBignumber(),ey+=$.number.font.size+$.number.font.family+$.number.valueformat+$.number.suffix+$.number.prefix,e_=ev),$._hasDelta&&$._hasNumber){var ev,ex,e_,ew,eT,ek,eA=[(ev.left+ev.right)/2,(ev.top+ev.bottom)/2],eS=[(ex.left+ex.right)/2,(ex.top+ex.bottom)/2],eM=.75*$.delta.font.size;"left"===$.delta.position&&(eT=cache($,"deltaPos",0,-1*(ev.width*ef[$.align]+ex.width*(1-ef[$.align])+eM),ey,Math.min),ek=eA[1]-eS[1],e_={width:ev.width+ex.width+eM,height:Math.max(ev.height,ex.height),left:ex.left+eT,right:ev.right,top:Math.min(ev.top,ex.top+ek),bottom:Math.max(ev.bottom,ex.bottom+ek)}),"right"===$.delta.position&&(eT=cache($,"deltaPos",0,ev.width*(1-ef[$.align])+ex.width*ef[$.align]+eM,ey,Math.max),ek=eA[1]-eS[1],e_={width:ev.width+ex.width+eM,height:Math.max(ev.height,ex.height),left:ev.left,right:ex.right+eT,top:Math.min(ev.top,ex.top+ek),bottom:Math.max(ev.bottom,ex.bottom+ek)}),"bottom"===$.delta.position&&(eT=null,ek=ex.height,e_={width:Math.max(ev.width,ex.width),height:ev.height+ex.height,left:Math.min(ev.left,ex.left),right:Math.max(ev.right,ex.right),top:ev.bottom-ev.height,bottom:ev.bottom+ex.height}),"top"===$.delta.position&&(eT=null,ek=ev.top,e_={width:Math.max(ev.width,ex.width),height:ev.height+ex.height,left:Math.min(ev.left,ex.left),right:Math.max(ev.right,ex.right),top:ev.bottom-ev.height-ex.height,bottom:ev.bottom}),ew.attr({dx:eT,dy:ek})}($._hasNumber||$._hasDelta)&&ep.attr("transform",function(){var i,o=F.numbersScaler(e_);ey+=o[2];var s=cache($,"numbersScale",1,o[0],ey,Math.min);$._scaleNumbers||(s=1),i=$._isAngular?er-s*e_.bottom:er-s*(e_.top+e_.bottom)/2,$._numbersTop=s*e_.top+i;var _=e_[eo];"center"===eo&&(_=(e_.left+e_.right)/2);var N=ee-s*_;return X(N=cache($,"numbersTranslate",0,N,ey,Math.max),i)+Z(s)})}function styleShape(i){i.each(function(i){ec.stroke(_.select(this),i.line.color)}).each(function(i){ec.fill(_.select(this),i.color)}).style("stroke-width",function(i){return i.line.width})}function arcTween(i,o,s){return function(){var _=F(o,s);return function(o){return i.endAngle(_(o))()}}}function mockAxis(i,o,s){var _=i._fullLayout,F=j.extendFlat({type:"linear",ticks:"outside",range:s,showline:!0},o),N={type:"linear",_id:"x"+o._id},Z={letter:"x",font:_.font,noHover:!0,noTickson:!0};function coerce(i,o){return j.coerce(F,N,el,i,o)}return eo(F,N,coerce,Z,_),es(F,N,coerce,Z),N}function fitTextInsideBox(i,o,s){return[Math.min(o/i.width,s/i.height),i,o+"x"+s]}function fitTextInsideCircle(i,o){return[o/Math.sqrt(i.width/2*(i.width/2)+i.height*i.height),i,o]}function measureText(i,o,s,F){var N=document.createElementNS("http://www.w3.org/2000/svg","text"),j=_.select(N);return j.text(i).attr("x",0).attr("y",0).attr("text-anchor",s).attr("data-unformatted",i).call(en.convertToTspans,F).call(et.font,o),et.bBox(j.node())}function cache(i,o,s,_,F,N){var Z="_cache"+o;i[Z]&&i[Z].key===F||(i[Z]={key:F,value:s});var X=j.aggNums(N,null,[i[Z].value,_],2);return i[Z].value=X,X}i.exports=function(i,o,s,F){var N,Z=i._fullLayout;hasTransition(s)&&F&&(N=F()),j.makeTraceGroups(Z._indicatorlayer,o,"trace").each(function(o){var F,j,$,ee,ei,eo=o[0].trace,es=_.select(this),el=eo._hasGauge,ec=eo._isAngular,ed=eo._isBullet,eh=eo.domain,ep={w:Z._size.w*(eh.x[1]-eh.x[0]),h:Z._size.h*(eh.y[1]-eh.y[0]),l:Z._size.l+Z._size.w*eh.x[0],r:Z._size.r+Z._size.w*(1-eh.x[1]),t:Z._size.t+Z._size.h*(1-eh.y[1]),b:Z._size.b+Z._size.h*eh.y[0]},eg=ep.l+ep.w/2,em=ep.t+ep.h/2,ey=Math.min(ep.w/2,ep.h),ev=er.innerRadius*ey,ex=eo.align||"center";if(j=em,el){if(ec&&(F=eg,j=em+ey/2,$=function(i){return fitTextInsideCircle(i,.9*ev)}),ed){var e_=er.bulletPadding,ew=1-er.bulletNumberDomainSize+e_;F=ep.l+(ew+(1-ew)*ef[ex])*ep.w,$=function(i){return fitTextInsideBox(i,(er.bulletNumberDomainSize-e_)*ep.w,ep.h)}}}else F=ep.l+ef[ex]*ep.w,$=function(i){return fitTextInsideBox(i,ep.w,ep.h)};drawNumbers(i,es,o,{numbersX:F,numbersY:j,numbersScaler:$,transitionOpts:s,onComplete:N}),el&&(ee={range:eo.gauge.axis.range,color:eo.gauge.bgcolor,line:{color:eo.gauge.bordercolor,width:0},thickness:1},ei={range:eo.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:eo.gauge.bordercolor,width:eo.gauge.borderwidth},thickness:1});var eT=es.selectAll("g.angular").data(ec?o:[]);eT.exit().remove();var ek=es.selectAll("g.angularaxis").data(ec?o:[]);ek.exit().remove(),ec&&drawAngularGauge(i,es,o,{radius:ey,innerRadius:ev,gauge:eT,layer:ek,size:ep,gaugeBg:ee,gaugeOutline:ei,transitionOpts:s,onComplete:N});var eA=es.selectAll("g.bullet").data(ed?o:[]);eA.exit().remove();var eS=es.selectAll("g.bulletaxis").data(ed?o:[]);eS.exit().remove(),ed&&drawBulletGauge(i,es,o,{gauge:eA,layer:eS,size:ep,gaugeBg:ee,gaugeOutline:ei,transitionOpts:s,onComplete:N});var eM=es.selectAll("text.title").data(o);eM.exit().remove(),eM.enter().append("text").classed("title",!0),eM.attr("text-anchor",function(){return ed?eu.right:eu[eo.title.align]}).text(eo.title.text).call(et.font,eo.title.font).call(en.convertToTspans,i),eM.attr("transform",function(){var i,o=ep.l+ep.w*ef[eo.title.align],s=er.titlePadding,_=et.bBox(eM.node());return el?(ec&&(i=eo.gauge.axis.visible?et.bBox(ek.node()).top-s-_.bottom:ep.t+ep.h/2-ey/2-_.bottom-s),ed&&(i=j-(_.top+_.bottom)/2,o=ep.l-er.bulletPadding*ep.w)):i=eo._numbersTop-s-_.bottom,X(o,i)})})}},16249:function(i,o,s){"use strict";var _=s(50693),F=s(12663).axisHoverFormat,N=s(5386).fF,j=s(2418),Z=s(9012),X=s(1426).extendFlat,$=s(30962).overrideAll;function makeSliceAttr(i){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function makeCapAttr(i){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var ee=i.exports=$(X({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:makeSliceAttr("x"),y:makeSliceAttr("y"),z:makeSliceAttr("z")},caps:{x:makeCapAttr("x"),y:makeCapAttr("y"),z:makeCapAttr("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:N(),xhoverformat:F("x"),yhoverformat:F("y"),zhoverformat:F("z"),valuehoverformat:F("value",1),showlegend:X({},Z.showlegend,{dflt:!1})},_("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:j.opacity,lightposition:j.lightposition,lighting:j.lighting,flatshading:j.flatshading,contour:j.contour,hoverinfo:X({},Z.hoverinfo)}),"calc","nested");ee.flatshading.dflt=!0,ee.lighting.facenormalsepsilon.dflt=0,ee.x.editType=ee.y.editType=ee.z.editType=ee.value.editType="calc+clearAxisTypes",ee.transforms=void 0},56959:function(i,o,s){"use strict";var _=s(78803),F=s(88489).processGrid,N=s(88489).filter;i.exports=function(i,o){o._len=Math.min(o.x.length,o.y.length,o.z.length,o.value.length),o._x=N(o.x,o._len),o._y=N(o.y,o._len),o._z=N(o.z,o._len),o._value=N(o.value,o._len);var s=F(o);o._gridFill=s.fill,o._Xs=s.Xs,o._Ys=s.Ys,o._Zs=s.Zs,o._len=s.len;for(var j=1/0,Z=-1/0,X=0;X<o._len;X++){var $=o._value[X];j=Math.min(j,$),Z=Math.max(Z,$)}o._minValues=j,o._maxValues=Z,o._vMin=void 0===o.isomin||null===o.isomin?j:o.isomin,o._vMax=void 0===o.isomax||null===o.isomin?Z:o.isomax,_(i,o,{vals:[o._vMin,o._vMax],containerStr:"",cLetter:"c"})}},22674:function(i,o,s){"use strict";var _=s(9330).gl_mesh3d,F=s(81697).parseColorScale,N=s(78614),j=s(21081).extractOpts,Z=s(90060),findNearestOnAxis=function(i,o){for(var s=o.length-1;s>0;s--){var _=Math.min(o[s],o[s-1]),F=Math.max(o[s],o[s-1]);if(F>_&&_<i&&i<=F)return{id:s,distRatio:(F-i)/(F-_)}}return{id:0,distRatio:0}};function IsosurfaceTrace(i,o,s){this.scene=i,this.uid=s,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var X=IsosurfaceTrace.prototype;X.handlePick=function(i){if(i.object===this.mesh){var o=i.data.index,s=this.data._meshX[o],_=this.data._meshY[o],F=this.data._meshZ[o],N=this.data._Ys.length,j=this.data._Zs.length,Z=findNearestOnAxis(s,this.data._Xs).id,X=findNearestOnAxis(_,this.data._Ys).id,$=findNearestOnAxis(F,this.data._Zs).id,ee=i.index=$+j*X+j*N*Z;i.traceCoordinate=[this.data._meshX[ee],this.data._meshY[ee],this.data._meshZ[ee],this.data._value[ee]];var et=this.data.hovertext||this.data.text;return Array.isArray(et)&&void 0!==et[ee]?i.textLabel=et[ee]:et&&(i.textLabel=et),!0}},X.update=function(i){var o=this.scene,s=o.fullSceneLayout;function toDataCoords(i,o,s,_){return o.map(function(o){return i.d2l(o,0,_)*s})}this.data=generateIsoMeshes(i);var _={positions:Z(toDataCoords(s.xaxis,i._meshX,o.dataScale[0],i.xcalendar),toDataCoords(s.yaxis,i._meshY,o.dataScale[1],i.ycalendar),toDataCoords(s.zaxis,i._meshZ,o.dataScale[2],i.zcalendar)),cells:Z(i._meshI,i._meshJ,i._meshK),lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,contourEnable:i.contour.show,contourColor:N(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},X=j(i);_.vertexIntensity=i._meshIntensity,_.vertexIntensityBounds=[X.min,X.max],_.colormap=F(i),this.mesh.update(_)},X.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var $=["xyz","xzy","yxz","yzx","zxy","zyx"];function generateIsoMeshes(i){i._meshI=[],i._meshJ=[],i._meshK=[];var o,s,_,F,N,j,Z,X=i.surface.show,ee=i.spaceframe.show,et=i.surface.fill,er=i.spaceframe.fill,en=!1,ei=!1,eo=0,es=i._Xs,el=i._Ys,ec=i._Zs,eu=es.length,ef=el.length,ed=ec.length,eh=$.indexOf(i._gridFill.replace(/-/g,"").replace(/\+/g,"")),getIndex=function(i,o,s){switch(eh){case 5:return s+ed*o+ed*ef*i;case 4:return s+ed*i+ed*eu*o;case 3:return o+ef*s+ef*ed*i;case 2:return o+ef*i+ef*eu*s;case 1:return i+eu*s+eu*ed*o;default:return i+eu*o+eu*ef*s}},ep=i._minValues,eg=i._maxValues,em=i._vMin,ey=i._vMax;function findVertexId(i,o,Z){for(var X=j.length,$=s;$<X;$++)if(i===_[$]&&o===F[$]&&Z===N[$])return $;return -1}function emptyVertices(){_=[],F=[],N=[],j=[],s=o=0}function addVertex(i,s,Z,X){return _.push(i),F.push(s),N.push(Z),j.push(X),++o-1}function addFace(o,s,_){return i._meshI.push(o),i._meshJ.push(s),i._meshK.push(_),++eo-1}function getCenter(i,o,s){for(var _=[],F=0;F<i.length;F++)_[F]=(i[F]+o[F]+s[F])/3;return _}function getBetween(i,o,s){for(var _=[],F=0;F<i.length;F++)_[F]=i[F]*(1-s)+s*o[F];return _}function createOpenTri(i,o){var s=i[0],_=i[1],F=i[2],N=getCenter(s,_,F),j=Math.sqrt(1-Z),X=getBetween(N,s,j),$=getBetween(N,_,j),ee=getBetween(N,F,j),et=o[0],er=o[1],en=o[2];return{xyzv:[[s,_,$],[$,X,s],[_,F,ee],[ee,$,_],[F,s,X],[X,ee,F]],abc:[[et,er,-1],[-1,-1,et],[er,en,-1],[-1,-1,er],[en,et,-1],[-1,-1,en]]}}function styleIncludes(i,o){return"all"===i||null===i||i.indexOf(o)>-1}function mapValue(i,o){return null===i?o:i}function drawTri(i,_,F){s=o;var N=[_],j=[F];if(Z>=1)N=[_],j=[F];else if(Z>0){var X=createOpenTri(_,F);N=X.xyzv,j=X.abc}for(var $=0;$<N.length;$++){_=N[$],F=j[$];for(var ee=[],et=0;et<3;et++){var er=_[et][0],en=_[et][1],ei=_[et][2],eo=_[et][3],es=F[et]>-1?F[et]:findVertexId(er,en,ei);es>-1?ee[et]=es:ee[et]=addVertex(er,en,ei,mapValue(i,eo))}addFace(ee[0],ee[1],ee[2])}}function drawQuad(i,o,s){var makeTri=function(_,F,N){drawTri(i,[o[_],o[F],o[N]],[s[_],s[F],s[N]])};makeTri(0,1,2),makeTri(2,3,0)}function drawTetra(i,o,s){var makeTri=function(_,F,N){drawTri(i,[o[_],o[F],o[N]],[s[_],s[F],s[N]])};makeTri(0,1,2),makeTri(3,0,1),makeTri(2,3,0),makeTri(1,2,3)}function calcIntersection(i,o,s,_){var F=i[3];F<s&&(F=s),F>_&&(F=_);for(var N=(i[3]-F)/(i[3]-o[3]+1e-9),j=[],Z=0;Z<4;Z++)j[Z]=(1-N)*i[Z]+N*o[Z];return j}function almostInFinalRange(i){var o=.001*(ey-em);return i>=em-o&&i<=ey+o}function getXYZV(o){for(var s=[],_=0;_<4;_++){var F=o[_];s.push([i._x[F],i._y[F],i._z[F],i._value[F]])}return s}function tryCreateTri(i,o,s,_,F,N){N||(N=1),s=[-1,-1,-1];var j,Z,X,$=!1,ee=[(j=o[0][3])>=_&&j<=F,(Z=o[1][3])>=_&&Z<=F,(X=o[2][3])>=_&&X<=F];if(!ee[0]&&!ee[1]&&!ee[2])return!1;var tryDrawTri=function(i,o,s){return almostInFinalRange(o[0][3])&&almostInFinalRange(o[1][3])&&almostInFinalRange(o[2][3])?(drawTri(i,o,s),!0):N<3&&tryCreateTri(i,o,s,em,ey,++N)};if(ee[0]&&ee[1]&&ee[2])return tryDrawTri(i,o,s)||$;var et=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(N){if(ee[N[0]]&&ee[N[1]]&&!ee[N[2]]){var j=o[N[0]],Z=o[N[1]],X=o[N[2]],er=calcIntersection(X,j,_,F),en=calcIntersection(X,Z,_,F);$=tryDrawTri(i,[en,er,j],[-1,-1,s[N[0]]])||$,$=tryDrawTri(i,[j,Z,en],[s[N[0]],s[N[1]],-1])||$,et=!0}}),et||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(N){if(ee[N[0]]&&!ee[N[1]]&&!ee[N[2]]){var j=o[N[0]],Z=o[N[1]],X=o[N[2]],er=calcIntersection(Z,j,_,F);$=tryDrawTri(i,[calcIntersection(X,j,_,F),er,j],[-1,-1,s[N[0]]])||$,et=!0}}),$}function tryCreateTetra(i,o,s,_){var F,N,j,Z,X=!1,$=getXYZV(o),ee=[(F=$[0][3])>=s&&F<=_,(N=$[1][3])>=s&&N<=_,(j=$[2][3])>=s&&j<=_,(Z=$[3][3])>=s&&Z<=_];if(!ee[0]&&!ee[1]&&!ee[2]&&!ee[3])return X;if(ee[0]&&ee[1]&&ee[2]&&ee[3])return ei&&(X=drawTetra(i,$,o)||X),X;var et=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(F){if(ee[F[0]]&&ee[F[1]]&&ee[F[2]]&&!ee[F[3]]){var N=$[F[0]],j=$[F[1]],Z=$[F[2]],er=$[F[3]];X=ei?drawTri(i,[N,j,Z],[o[F[0]],o[F[1]],o[F[2]]])||X:drawTri(null,[calcIntersection(er,N,s,_),calcIntersection(er,j,s,_),calcIntersection(er,Z,s,_)],[-1,-1,-1])||X,et=!0}}),et||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(F){if(ee[F[0]]&&ee[F[1]]&&!ee[F[2]]&&!ee[F[3]]){var N=$[F[0]],j=$[F[1]],Z=$[F[2]],er=$[F[3]],en=calcIntersection(Z,N,s,_),eo=calcIntersection(Z,j,s,_),es=calcIntersection(er,j,s,_),el=calcIntersection(er,N,s,_);ei?(X=drawTri(i,[N,el,en],[o[F[0]],-1,-1])||X,X=drawTri(i,[j,eo,es],[o[F[1]],-1,-1])||X):X=drawQuad(null,[en,eo,es,el],[-1,-1,-1,-1])||X,et=!0}}),et||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(F){if(ee[F[0]]&&!ee[F[1]]&&!ee[F[2]]&&!ee[F[3]]){var N=$[F[0]],j=$[F[1]],Z=$[F[2]],er=$[F[3]],en=calcIntersection(j,N,s,_),eo=calcIntersection(Z,N,s,_),es=calcIntersection(er,N,s,_);ei?(X=drawTri(i,[N,en,eo],[o[F[0]],-1,-1])||X,X=drawTri(i,[N,eo,es],[o[F[0]],-1,-1])||X,X=drawTri(i,[N,es,en],[o[F[0]],-1,-1])||X):X=drawTri(null,[en,eo,es],[-1,-1,-1])||X,et=!0}})),X}function addCube(i,o,s,_,F,N,j,Z,X,$,ee){var et=!1;return en&&(styleIncludes(i,"A")&&(et=tryCreateTetra(null,[o,s,_,N],$,ee)||et),styleIncludes(i,"B")&&(et=tryCreateTetra(null,[s,_,F,X],$,ee)||et),styleIncludes(i,"C")&&(et=tryCreateTetra(null,[s,N,j,X],$,ee)||et),styleIncludes(i,"D")&&(et=tryCreateTetra(null,[_,N,Z,X],$,ee)||et),styleIncludes(i,"E")&&(et=tryCreateTetra(null,[s,_,N,X],$,ee)||et)),ei&&(et=tryCreateTetra(i,[s,_,N,X],$,ee)||et),et}function addRect(i,o,s,_,F,N,j,Z){return[!0===Z[0]||tryCreateTri(i,getXYZV([o,s,_]),[o,s,_],N,j),!0===Z[1]||tryCreateTri(i,getXYZV([_,F,o]),[_,F,o],N,j)]}function begin2dCell(i,o,s,_,F,N,j,Z,X){return Z?addRect(i,o,s,F,_,N,j,X):addRect(i,s,F,_,o,N,j,X)}function beginSection(i,o,s,_,F,N,j){var Z,X,$,ee,et=!1,makeSection=function(){et=tryCreateTri(i,[Z,X,$],[-1,-1,-1],F,N)||et,et=tryCreateTri(i,[$,ee,Z],[-1,-1,-1],F,N)||et},er=j[0],en=j[1],ei=j[2];return er&&(Z=getBetween(getXYZV([getIndex(o,s-0,_-0)])[0],getXYZV([getIndex(o-1,s-0,_-0)])[0],er),X=getBetween(getXYZV([getIndex(o,s-0,_-1)])[0],getXYZV([getIndex(o-1,s-0,_-1)])[0],er),$=getBetween(getXYZV([getIndex(o,s-1,_-1)])[0],getXYZV([getIndex(o-1,s-1,_-1)])[0],er),ee=getBetween(getXYZV([getIndex(o,s-1,_-0)])[0],getXYZV([getIndex(o-1,s-1,_-0)])[0],er),makeSection()),en&&(Z=getBetween(getXYZV([getIndex(o-0,s,_-0)])[0],getXYZV([getIndex(o-0,s-1,_-0)])[0],en),X=getBetween(getXYZV([getIndex(o-0,s,_-1)])[0],getXYZV([getIndex(o-0,s-1,_-1)])[0],en),$=getBetween(getXYZV([getIndex(o-1,s,_-1)])[0],getXYZV([getIndex(o-1,s-1,_-1)])[0],en),ee=getBetween(getXYZV([getIndex(o-1,s,_-0)])[0],getXYZV([getIndex(o-1,s-1,_-0)])[0],en),makeSection()),ei&&(Z=getBetween(getXYZV([getIndex(o-0,s-0,_)])[0],getXYZV([getIndex(o-0,s-0,_-1)])[0],ei),X=getBetween(getXYZV([getIndex(o-0,s-1,_)])[0],getXYZV([getIndex(o-0,s-1,_-1)])[0],ei),$=getBetween(getXYZV([getIndex(o-1,s-1,_)])[0],getXYZV([getIndex(o-1,s-1,_-1)])[0],ei),ee=getBetween(getXYZV([getIndex(o-1,s-0,_)])[0],getXYZV([getIndex(o-1,s-0,_-1)])[0],ei),makeSection()),et}function begin3dCell(i,o,s,_,F,N,j,Z,X,$,ee,et){var er=i;return et?(en&&"even"===i&&(er=null),addCube(er,o,s,_,F,N,j,Z,X,$,ee)):(en&&"odd"===i&&(er=null),addCube(er,X,Z,j,N,F,_,s,o,$,ee))}function draw2dX(i,o,s,_,F){for(var N=[],j=0,Z=0;Z<o.length;Z++)for(var X=o[Z],$=1;$<ed;$++)for(var ee=1;ee<ef;ee++)N.push(begin2dCell(i,getIndex(X,ee-1,$-1),getIndex(X,ee-1,$),getIndex(X,ee,$-1),getIndex(X,ee,$),s,_,(X+ee+$)%2,F&&F[j]?F[j]:[])),j++;return N}function draw2dY(i,o,s,_,F){for(var N=[],j=0,Z=0;Z<o.length;Z++)for(var X=o[Z],$=1;$<eu;$++)for(var ee=1;ee<ed;ee++)N.push(begin2dCell(i,getIndex($-1,X,ee-1),getIndex($,X,ee-1),getIndex($-1,X,ee),getIndex($,X,ee),s,_,($+X+ee)%2,F&&F[j]?F[j]:[])),j++;return N}function draw2dZ(i,o,s,_,F){for(var N=[],j=0,Z=0;Z<o.length;Z++)for(var X=o[Z],$=1;$<ef;$++)for(var ee=1;ee<eu;ee++)N.push(begin2dCell(i,getIndex(ee-1,$-1,X),getIndex(ee-1,$,X),getIndex(ee,$-1,X),getIndex(ee,$,X),s,_,(ee+$+X)%2,F&&F[j]?F[j]:[])),j++;return N}function draw3d(i,o,s){for(var _=1;_<ed;_++)for(var F=1;F<ef;F++)for(var N=1;N<eu;N++)begin3dCell(i,getIndex(N-1,F-1,_-1),getIndex(N-1,F-1,_),getIndex(N-1,F,_-1),getIndex(N-1,F,_),getIndex(N,F-1,_-1),getIndex(N,F-1,_),getIndex(N,F,_-1),getIndex(N,F,_),o,s,(N+F+_)%2)}function drawSpaceframe(i,o,s){ei=!0,draw3d(i,o,s),ei=!1}function drawSurface(i,o,s){en=!0,draw3d(i,o,s),en=!1}function drawSectionX(i,o,s,_,F,N){for(var j=[],Z=0,X=0;X<o.length;X++)for(var $=o[X],ee=1;ee<ed;ee++)for(var et=1;et<ef;et++)j.push(beginSection(i,$,et,ee,s,_,F[X],N&&N[Z]?N[Z]:[])),Z++;return j}function drawSectionY(i,o,s,_,F,N){for(var j=[],Z=0,X=0;X<o.length;X++)for(var $=o[X],ee=1;ee<eu;ee++)for(var et=1;et<ed;et++)j.push(beginSection(i,ee,$,et,s,_,F[X],N&&N[Z]?N[Z]:[])),Z++;return j}function drawSectionZ(i,o,s,_,F,N){for(var j=[],Z=0,X=0;X<o.length;X++)for(var $=o[X],ee=1;ee<ef;ee++)for(var et=1;et<eu;et++)j.push(beginSection(i,et,ee,$,s,_,F[X],N&&N[Z]?N[Z]:[])),Z++;return j}function createRange(i,o){for(var s=[],_=i;_<o;_++)s.push(_);return s}function insertGridPoints(){for(var o=0;o<eu;o++)for(var s=0;s<ef;s++)for(var _=0;_<ed;_++){var F=getIndex(o,s,_);addVertex(i._x[F],i._y[F],i._z[F],i._value[F])}}return function(){if(emptyVertices(),insertGridPoints(),ee&&er&&(Z=er,drawSpaceframe(null,em,ey)),X&&et){Z=et;for(var o=i.surface.pattern,s=i.surface.count,$=0;$<s;$++){var en=1===s?.5:$/(s-1),ei=(1-en)*em+en*ey,eh=Math.abs(ei-ep)>Math.abs(ei-eg)?[ep,ei]:[ei,eg];drawSurface(o,eh[0],eh[1])}}var ev=[[Math.min(em,eg),Math.max(em,eg)],[Math.min(ep,ey),Math.max(ep,ey)]];["x","y","z"].forEach(function(o){for(var s=[],_=0;_<ev.length;_++){var F=0,N=ev[_][0],j=ev[_][1],X=i.slices[o];if(X.show&&X.fill){Z=X.fill;var $=[],ee=[],et=[];if(X.locations.length)for(var er=0;er<X.locations.length;er++){var en=findNearestOnAxis(X.locations[er],"x"===o?es:"y"===o?el:ec);0===en.distRatio?$.push(en.id):en.id>0&&(ee.push(en.id),"x"===o?et.push([en.distRatio,0,0]):"y"===o?et.push([0,en.distRatio,0]):et.push([0,0,en.distRatio]))}else $="x"===o?createRange(1,eu-1):"y"===o?createRange(1,ef-1):createRange(1,ed-1);ee.length>0&&("x"===o?s[F]=drawSectionX(null,ee,N,j,et,s[F]):"y"===o?s[F]=drawSectionY(null,ee,N,j,et,s[F]):s[F]=drawSectionZ(null,ee,N,j,et,s[F]),F++),$.length>0&&("x"===o?s[F]=draw2dX(null,$,N,j,s[F]):"y"===o?s[F]=draw2dY(null,$,N,j,s[F]):s[F]=draw2dZ(null,$,N,j,s[F]),F++)}var ei=i.caps[o];ei.show&&ei.fill&&(Z=ei.fill,"x"===o?s[F]=draw2dX(null,[0,eu-1],N,j,s[F]):"y"===o?s[F]=draw2dY(null,[0,ef-1],N,j,s[F]):s[F]=draw2dZ(null,[0,ed-1],N,j,s[F]),F++)}}),0===eo&&emptyVertices(),i._meshX=_,i._meshY=F,i._meshZ=N,i._meshIntensity=j,i._Xs=es,i._Ys=el,i._Zs=ec}(),i}function createIsosurfaceTrace(i,o){var s=_({gl:i.glplot.gl}),F=new IsosurfaceTrace(i,s,o.uid);return s._trace=F,F.update(o),i.glplot.add(s),F}i.exports={findNearestOnAxis:findNearestOnAxis,generateIsoMeshes:generateIsoMeshes,createIsosurfaceTrace:createIsosurfaceTrace}},82738:function(i,o,s){"use strict";var _=s(71828),F=s(73972),N=s(16249),j=s(1586);function supplyDefaults(i,o,s,F){function coerce(s,F){return _.coerce(i,o,N,s,F)}supplyIsoDefaults(i,o,s,F,coerce)}function supplyIsoDefaults(i,o,s,_,N){var Z=N("isomin"),X=N("isomax");null!=X&&null!=Z&&Z>X&&(o.isomin=null,o.isomax=null);var $=N("x"),ee=N("y"),et=N("z"),er=N("value");if(!$||!$.length||!ee||!ee.length||!et||!et.length||!er||!er.length){o.visible=!1;return}F.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y","z"],_),N("valuehoverformat"),["x","y","z"].forEach(function(i){N(i+"hoverformat");var o="caps."+i;N(o+".show")&&N(o+".fill");var s="slices."+i;N(s+".show")&&(N(s+".fill"),N(s+".locations"))}),N("spaceframe.show")&&N("spaceframe.fill"),N("surface.show")&&(N("surface.count"),N("surface.fill"),N("surface.pattern")),N("contour.show")&&(N("contour.color"),N("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(i){N(i)}),j(i,o,_,N,{prefix:"",cLetter:"c"}),o._length=null}i.exports={supplyDefaults:supplyDefaults,supplyIsoDefaults:supplyIsoDefaults}},64943:function(i,o,s){"use strict";i.exports={attributes:s(16249),supplyDefaults:s(82738).supplyDefaults,calc:s(56959),colorbar:{min:"cmin",max:"cmax"},plot:s(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:s(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(i,o,s){"use strict";var _=s(50693),F=s(12663).axisHoverFormat,N=s(5386).fF,j=s(54532),Z=s(9012),X=s(1426).extendFlat;i.exports=X({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:N({editType:"calc"}),xhoverformat:F("x"),yhoverformat:F("y"),zhoverformat:F("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},_("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:j.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:X({},j.contours.x.show,{}),color:j.contours.x.color,width:j.contours.x.width,editType:"calc"},lightposition:{x:X({},j.lightposition.x,{dflt:1e5}),y:X({},j.lightposition.y,{dflt:1e5}),z:X({},j.lightposition.z,{dflt:0}),editType:"calc"},lighting:X({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},j.lighting),hoverinfo:X({},Z.hoverinfo,{editType:"calc"}),showlegend:X({},Z.showlegend,{dflt:!1})})},82932:function(i,o,s){"use strict";var _=s(78803);i.exports=function(i,o){o.intensity&&_(i,o,{vals:o.intensity,containerStr:"",cLetter:"c"})}},91134:function(i,o,s){"use strict";var _=s(9330).gl_mesh3d,F=s(9330).delaunay_triangulate,N=s(9330).alpha_shape,j=s(9330).convex_hull,Z=s(81697).parseColorScale,X=s(78614),$=s(21081).extractOpts,ee=s(90060);function Mesh3DTrace(i,o,s){this.scene=i,this.uid=s,this.mesh=o,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var et=Mesh3DTrace.prototype;function parseColorArray(i){for(var o=[],s=i.length,_=0;_<s;_++)o[_]=X(i[_]);return o}function toDataCoords(i,o,s,_){for(var F=[],N=o.length,j=0;j<N;j++)F[j]=i.d2l(o[j],0,_)*s;return F}function toRoundIndex(i){for(var o=[],s=i.length,_=0;_<s;_++)o[_]=Math.round(i[_]);return o}function delaunayCells(i,o){for(var s=["x","y","z"].indexOf(i),_=[],N=o.length,j=0;j<N;j++)_[j]=[o[j][(s+1)%3],o[j][(s+2)%3]];return F(_)}function hasValidIndices(i,o){for(var s=i.length,_=0;_<s;_++)if(i[_]<=-.5||i[_]>=o-.5)return!1;return!0}function createMesh3DTrace(i,o){var s=_({gl:i.glplot.gl}),F=new Mesh3DTrace(i,s,o.uid);return s._trace=F,F.update(o),i.glplot.add(s),F}et.handlePick=function(i){if(i.object===this.mesh){var o=i.index=i.data.index;i.data._cellCenter?i.traceCoordinate=i.data.dataCoordinate:i.traceCoordinate=[this.data.x[o],this.data.y[o],this.data.z[o]];var s=this.data.hovertext||this.data.text;return Array.isArray(s)&&void 0!==s[o]?i.textLabel=s[o]:s&&(i.textLabel=s),!0}},et.update=function(i){var o,s=this.scene,_=s.fullSceneLayout;this.data=i;var F=i.x.length,et=ee(toDataCoords(_.xaxis,i.x,s.dataScale[0],i.xcalendar),toDataCoords(_.yaxis,i.y,s.dataScale[1],i.ycalendar),toDataCoords(_.zaxis,i.z,s.dataScale[2],i.zcalendar));if(i.i&&i.j&&i.k){if(i.i.length!==i.j.length||i.j.length!==i.k.length||!hasValidIndices(i.i,F)||!hasValidIndices(i.j,F)||!hasValidIndices(i.k,F))return;o=ee(toRoundIndex(i.i),toRoundIndex(i.j),toRoundIndex(i.k))}else o=0===i.alphahull?j(et):i.alphahull>0?N(i.alphahull,et):delaunayCells(i.delaunayaxis,et);var er={positions:et,cells:o,lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,contourEnable:i.contour.show,contourColor:X(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading};if(i.intensity){var en=$(i);this.color="#fff";var ei=i.intensitymode;er[ei+"Intensity"]=i.intensity,er[ei+"IntensityBounds"]=[en.min,en.max],er.colormap=Z(i)}else i.vertexcolor?(this.color=i.vertexcolor[0],er.vertexColors=parseColorArray(i.vertexcolor)):i.facecolor?(this.color=i.facecolor[0],er.cellColors=parseColorArray(i.facecolor)):(this.color=i.color,er.meshColor=X(i.color));this.mesh.update(er)},et.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},i.exports=createMesh3DTrace},58669:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=s(1586),j=s(2418);i.exports=function(i,o,s,Z){function coerce(s,_){return F.coerce(i,o,j,s,_)}function readComponents(i){var o=i.map(function(i){var o=coerce(i);return o&&F.isArrayOrTypedArray(o)?o:null});return o.every(function(i){return i&&i.length===o[0].length})&&o}if(!readComponents(["x","y","z"])||(readComponents(["i","j","k"]),o.i&&(!o.j||!o.k)||o.j&&(!o.k||!o.i)||o.k&&(!o.i||!o.j))){o.visible=!1;return}_.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y","z"],Z),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(i){coerce(i)}),coerce("contour.show")&&(coerce("contour.color"),coerce("contour.width")),"intensity"in i?(coerce("intensity"),coerce("intensitymode"),N(i,o,Z,coerce,{prefix:"",cLetter:"c"})):(o.showscale=!1,"facecolor"in i?coerce("facecolor"):"vertexcolor"in i?coerce("vertexcolor"):coerce("color",s)),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("xhoverformat"),coerce("yhoverformat"),coerce("zhoverformat"),o._length=null}},21164:function(i,o,s){"use strict";i.exports={attributes:s(2418),supplyDefaults:s(58669),calc:s(82932),colorbar:{min:"cmin",max:"cmax"},plot:s(91134),moduleType:"trace",name:"mesh3d",basePlotModule:s(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(i,o,s){"use strict";var _=s(71828).extendFlat,F=s(82196),N=s(12663).axisHoverFormat,j=s(79952).P,Z=s(77914),X=s(22372),$=X.INCREASING.COLOR,ee=X.DECREASING.COLOR,et=F.line;function directionAttrs(i){return{line:{color:_({},et.color,{dflt:i}),width:et.width,dash:j,editType:"style"},editType:"style"}}i.exports={xperiod:F.xperiod,xperiod0:F.xperiod0,xperiodalignment:F.xperiodalignment,xhoverformat:N("x"),yhoverformat:N("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:_({},et.width,{}),dash:_({},j,{}),editType:"style"},increasing:directionAttrs($),decreasing:directionAttrs(ee),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:_({},Z.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(i,o,s){"use strict";var _=s(71828),F=_._,N=s(89298),j=s(42973),Z=s(50606).BADNUM;function calc(i,o){var s=N.getFromId(i,o.xaxis),F=N.getFromId(i,o.yaxis),j=convertTickWidth(i,s,o),Z=o._minDiff;o._minDiff=null;var X=o._origX;o._origX=null;var $=o._xcalc;o._xcalc=null;var ee=calcCommon(i,o,X,$,F,ptFunc);return(o._extremes[s._id]=N.findExtremes(s,$,{vpad:Z/2}),ee.length)?(_.extendFlat(ee[0].t,{wHover:Z/2,tickLen:j}),ee):[{t:{empty:!0}}]}function ptFunc(i,o,s,_){return{o:i,h:o,l:s,c:_}}function calcCommon(i,o,s,j,X,$){for(var ee=X.makeCalcdata(o,"open"),et=X.makeCalcdata(o,"high"),er=X.makeCalcdata(o,"low"),en=X.makeCalcdata(o,"close"),ei=Array.isArray(o.text),eo=Array.isArray(o.hovertext),es=!0,el=null,ec=!!o.xperiodalignment,eu=[],ef=0;ef<j.length;ef++){var ed=j[ef],eh=ee[ef],ep=et[ef],eg=er[ef],em=en[ef];if(ed!==Z&&eh!==Z&&ep!==Z&&eg!==Z&&em!==Z){em===eh?null!==el&&em!==el&&(es=em>el):es=em>eh,el=em;var ey=$(eh,ep,eg,em);ey.pos=ed,ey.yc=(eh+em)/2,ey.i=ef,ey.dir=es?"increasing":"decreasing",ey.x=ey.pos,ey.y=[eg,ep],ec&&(ey.orig_p=s[ef]),ei&&(ey.tx=o.text[ef]),eo&&(ey.htx=o.hovertext[ef]),eu.push(ey)}else eu.push({pos:ed,empty:!0})}return o._extremes[X._id]=N.findExtremes(X,_.concat(er,et),{padded:!0}),eu.length&&(eu[0].t={labels:{open:F(i,"open:")+" ",high:F(i,"high:")+" ",low:F(i,"low:")+" ",close:F(i,"close:")+" "}}),eu}function convertTickWidth(i,o,s){var F=s._minDiff;if(!F){var N,Z=i._fullData,X=[];for(N=0,F=1/0;N<Z.length;N++){var $=Z[N];if("ohlc"===$.type&&!0===$.visible&&$.xaxis===o._id){X.push($);var ee=o.makeCalcdata($,"x");$._origX=ee;var et=j(s,o,"x",ee).vals;$._xcalc=et;var er=_.distinctVals(et).minDiff;er&&isFinite(er)&&(F=Math.min(F,er))}}for(F===1/0&&(F=1),N=0;N<X.length;N++)X[N]._minDiff=F}return F*s.tickwidth}i.exports={calc:calc,calcCommon:calcCommon}},16169:function(i,o,s){"use strict";var _=s(71828),F=s(14555),N=s(73927),j=s(2522);function handleDirection(i,o,s,_){s(_+".line.color"),s(_+".line.width",o.line.width),s(_+".line.dash",o.line.dash)}i.exports=function(i,o,s,Z){function coerce(s,F){return _.coerce(i,o,j,s,F)}if(!F(i,o,coerce,Z)){o.visible=!1;return}N(i,o,Z,coerce,{x:!0}),coerce("xhoverformat"),coerce("yhoverformat"),coerce("line.width"),coerce("line.dash"),handleDirection(i,o,coerce,"increasing"),handleDirection(i,o,coerce,"decreasing"),coerce("text"),coerce("hovertext"),coerce("tickwidth"),Z._requestRangeslider[o.xaxis]=!0}},66449:function(i,o,s){"use strict";var _=s(89298),F=s(71828),N=s(30211),j=s(7901),Z=s(71828).fillText,X=s(22372),$={increasing:X.INCREASING.SYMBOL,decreasing:X.DECREASING.SYMBOL};function hoverPoints(i,o,s,_){return i.cd[0].trace.hoverlabel.split?hoverSplit(i,o,s,_):hoverOnPoints(i,o,s,_)}function _getClosestPoint(i,o,s,_){var F,Z,X=i.cd,$=i.xa,ee=X[0].trace,et=X[0].t,er=ee.type,en="ohlc"===er?"l":"min",ei="ohlc"===er?"h":"max",eo=et.bPos||0,es=et.bdPos||et.tickLen,el=et.wHover,ec=Math.min(1,es/Math.abs($.r2c($.range[1])-$.r2c($.range[0])));function dx(i){var s=i.pos+eo-o;return N.inbox(s-el,s+el,F)}function dy(i){var o=i[en],_=i[ei];return o===_||N.inbox(o-s,_-s,F)}function dxy(i){return(dx(i)+dy(i))/2}F=i.maxHoverDistance-ec,Z=i.maxSpikeDistance-ec;var eu=N.getDistanceFunction(_,dx,dy,dxy);if(N.getClosest(X,eu,i),!1===i.index)return null;var ef=X[i.index];if(ef.empty)return null;var ed=ee[ef.dir],eh=ed.line.color;return j.opacity(eh)&&ed.line.width?i.color=eh:i.color=ed.fillcolor,i.x0=$.c2p(ef.pos+eo-es,!0),i.x1=$.c2p(ef.pos+eo+es,!0),i.xLabelVal=void 0!==ef.orig_p?ef.orig_p:ef.pos,i.spikeDistance=dxy(ef)*Z/F,i.xSpike=$.c2p(ef.pos,!0),i}function hoverSplit(i,o,s,N){var j=i.cd,Z=i.ya,X=j[0].trace,$=j[0].t,ee=[],et=_getClosestPoint(i,o,s,N);if(!et)return[];var er=j[et.index].hi||X.hoverinfo,en=er.split("+");if(!("all"===er||-1!==en.indexOf("y")))return[];for(var ei=["high","open","close","low"],eo={},es=0;es<ei.length;es++){var el,ec=ei[es],eu=X[ec][et.index],ef=Z.c2p(eu,!0);eu in eo?(el=eo[eu],el.yLabel+="<br>"+$.labels[ec]+_.hoverLabelText(Z,eu,X.yhoverformat)):((el=F.extendFlat({},et)).y0=el.y1=ef,el.yLabelVal=eu,el.yLabel=$.labels[ec]+_.hoverLabelText(Z,eu,X.yhoverformat),el.name="",ee.push(el),eo[eu]=el)}return ee}function hoverOnPoints(i,o,s,F){var N=i.cd,j=i.ya,X=N[0].trace,ee=N[0].t,et=_getClosestPoint(i,o,s,F);if(!et)return[];var er=N[et.index],en=et.index=er.i,ei=er.dir;function getLabelLine(i){return ee.labels[i]+_.hoverLabelText(j,X[i][en],X.yhoverformat)}var eo=er.hi||X.hoverinfo,es=eo.split("+"),el="all"===eo,ec=el||-1!==es.indexOf("y"),eu=el||-1!==es.indexOf("text"),ef=ec?[getLabelLine("open"),getLabelLine("high"),getLabelLine("low"),getLabelLine("close")+"  "+$[ei]]:[];return eu&&Z(er,X,ef),et.extraText=ef.join("<br>"),et.y0=et.y1=j.c2p(er.yc,!0),[et]}i.exports={hoverPoints:hoverPoints,hoverSplit:hoverSplit,hoverOnPoints:hoverOnPoints}},54186:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"ohlc",basePlotModule:s(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:s(2522),supplyDefaults:s(16169),calc:s(3485).calc,plot:s(72314),style:s(53101),hoverPoints:s(66449).hoverPoints,selectPoints:s(67324)}},14555:function(i,o,s){"use strict";var _=s(73972),F=s(71828);i.exports=function(i,o,s,N){var j=s("x"),Z=s("open"),X=s("high"),$=s("low"),ee=s("close");if(s("hoverlabel.split"),_.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x"],N),Z&&X&&$&&ee){var et=Math.min(Z.length,X.length,$.length,ee.length);return j&&(et=Math.min(et,F.minRowLength(j))),o._length=et,et}}},72314:function(i,o,s){"use strict";var _=s(39898),F=s(71828);i.exports=function(i,o,s,N){var j=o.yaxis,Z=o.xaxis,X=!!Z.rangebreaks;F.makeTraceGroups(N,s,"trace ohlc").each(function(i){var o=_.select(this),s=i[0],N=s.t;if(!0!==s.trace.visible||N.empty){o.remove();return}var $=N.tickLen,ee=o.selectAll("path").data(F.identity);ee.enter().append("path"),ee.exit().remove(),ee.attr("d",function(i){if(i.empty)return"M0,0Z";var o=Z.c2p(i.pos-$,!0),s=Z.c2p(i.pos+$,!0),_=X?(o+s)/2:Z.c2p(i.pos,!0);return"M"+o+","+j.c2p(i.o,!0)+"H"+_+"M"+_+","+j.c2p(i.h,!0)+"V"+j.c2p(i.l,!0)+"M"+s+","+j.c2p(i.c,!0)+"H"+_})})}},67324:function(i){"use strict";i.exports=function(i,o){var s,_=i.cd,F=i.xaxis,N=i.yaxis,j=[],Z=_[0].t.bPos||0;if(!1===o)for(s=0;s<_.length;s++)_[s].selected=0;else for(s=0;s<_.length;s++){var X=_[s];o.contains([F.c2p(X.pos+Z),N.c2p(X.yc)],null,X.i,i)?(j.push({pointNumber:X.i,x:F.c2d(X.pos),y:N.c2d(X.yc)}),X.selected=1):X.selected=0}return j}},53101:function(i,o,s){"use strict";var _=s(39898),F=s(91424),N=s(7901);i.exports=function(i,o,s){var j=s||_.select(i).selectAll("g.ohlclayer").selectAll("g.trace");j.style("opacity",function(i){return i[0].trace.opacity}),j.each(function(i){var o=i[0].trace;_.select(this).selectAll("path").each(function(i){if(!i.empty){var s=o[i.dir].line;_.select(this).style("fill","none").call(N.stroke,s.color).call(F.dashLine,s.dash,s.width).style("opacity",o.selectedpoints&&!i.selected?.3:1)}})})}},99506:function(i,o,s){"use strict";var _=s(1426).extendFlat,F=s(9012),N=s(41940),j=s(50693),Z=s(5386).fF,X=s(27670).Y,$=_({editType:"calc"},j("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:Z({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});i.exports={domain:X({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:_({},F.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:Z({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:N({editType:"calc"}),tickfont:N({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:$,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(i,o,s){"use strict";var _=s(27659).a0,F=s(45784),N="parcats";o.name=N,o.plot=function(i,o,s,j){var Z=_(i.calcdata,N);Z.length&&F(i,Z[0],s,j)},o.clean=function(i,o,s,_){var F=_._has&&_._has("parcats"),N=o._has&&o._has("parcats");F&&!N&&_._paperdiv.selectAll(".parcats").remove()}},28699:function(i,o,s){"use strict";var _=s(28984).wrap,F=s(52075).hasColorscale,N=s(78803),j=s(75744),Z=s(91424),X=s(71828),$=s(92770);function createParcatsModel(i,o,s){var _=i.map(function(i){return i.categories.length}).reduce(function(i,o){return Math.max(i,o)});return{dimensions:i,paths:o,trace:void 0,maxCats:_,count:s}}function createDimensionModel(i,o,s,_,F){return{dimensionInd:i,containerInd:o,displayInd:s,dimensionLabel:_,count:F,categories:[],dragX:null}}function createCategoryModel(i,o,s,_){return{dimensionInd:i,categoryInd:o,categoryValue:s,displayInd:o,categoryLabel:_,valueInds:[],count:0,dragY:null}}function updateCategoryModel(i,o,s){i.valueInds.push(o),i.count+=s}function createPathModel(i,o,s){return{categoryInds:i,color:o,rawColor:s,valueInds:[],count:0}}function updatePathModel(i,o,s){i.valueInds.push(o),i.count+=s}function getUniqueInfo(i,o){o=null==o?[]:o.map(function(i){return i});var s={},_={},F=[];o.forEach(function(i,o){s[i]=0,_[i]=o});for(var N=0;N<i.length;N++){var j,Z=i[N];void 0===s[Z]?(s[Z]=1,j=o.push(Z)-1,_[Z]=j):(s[Z]++,j=_[Z]),F.push(j)}var X=o.map(function(i){return s[i]});return{uniqueValues:o,uniqueCounts:X,inds:F}}function validateDimensionDisplayInds(i){var o;if(isRangePermutation(i.map(function(i){return i.displayindex})))for(o=0;o<i.length;o++)i[o]._displayindex=i[o].displayindex;else for(o=0;o<i.length;o++)i[o]._displayindex=o}function validateCategoryProperties(i,o){i._categoryarray=o.uniqueValues,null===i.ticktext||void 0===i.ticktext?i._ticktext=[]:i._ticktext=i.ticktext.slice();for(var s=i._ticktext.length;s<o.uniqueValues.length;s++)i._ticktext.push(o.uniqueValues[s])}function isRangePermutation(i){for(var o=Array(i.length),s=0;s<i.length;s++){if(i[s]<0||i[s]>=i.length||void 0!==o[i[s]])return!1;o[i[s]]=!0}return!0}i.exports=function(i,o){var s,ee,et,er,en,ei,eo=X.filterVisible(o.dimensions);if(0===eo.length)return[];var es=eo.map(function(i){var o;if("trace"===i.categoryorder)o=null;else if("array"===i.categoryorder)o=i.categoryarray;else{o=j(i.values);for(var s=!0,_=0;_<o.length;_++)if(!$(o[_])){s=!1;break}o.sort(s?X.sorterAsc:void 0),"category descending"===i.categoryorder&&(o=o.reverse())}return getUniqueInfo(i.values,o)});s=X.isArrayOrTypedArray(o.counts)?o.counts:[o.counts],validateDimensionDisplayInds(eo),eo.forEach(function(i,o){validateCategoryProperties(i,es[o])});var el=o.line;function getMarkerColorInfo(i){var o,s;return X.isArrayOrTypedArray(el.color)?s=o=el.color[i%el.color.length]:o=el.color,{color:er(o),rawColor:s}}el?(F(o,"line")&&N(i,o,{vals:o.line.color,containerStr:"line",cLetter:"c"}),er=Z.tryColorscale(el)):er=X.identity;var ec=eo[0].values.length,eu={},ef=es.map(function(i){return i.inds});for(en=0,et=0;en<ec;en++){var ed=[];for(ei=0;ei<ef.length;ei++)ed.push(ef[ei][en]);ee=s[en%s.length],et+=ee;var eh=getMarkerColorInfo(en),ep=ed+"-"+eh.rawColor;void 0===eu[ep]&&(eu[ep]=createPathModel(ed,eh.color,eh.rawColor)),updatePathModel(eu[ep],en,ee)}var eg=eo.map(function(i,o){return createDimensionModel(o,i._index,i._displayindex,i.label,et)});for(en=0;en<ec;en++)for(ei=0,ee=s[en%s.length];ei<eg.length;ei++){var em=eg[ei].containerInd,ey=es[ei].inds[en],ev=eg[ei].categories;if(void 0===ev[ey]){var ex=o.dimensions[em]._categoryarray[ey],e_=o.dimensions[em]._ticktext[ey];ev[ey]=createCategoryModel(ei,ey,ex,e_)}updateCategoryModel(ev[ey],en,ee)}return _(createParcatsModel(eg,eu,et))}},14647:function(i,o,s){"use strict";var _=s(71828),F=s(52075).hasColorscale,N=s(1586),j=s(27670).c,Z=s(85501),X=s(99506),$=s(94397);function handleLineDefaults(i,o,s,j,Z){Z("line.shape"),Z("line.hovertemplate");var X=Z("line.color",j.colorway[0]);if(F(i,"line")&&_.isArrayOrTypedArray(X)){if(X.length)return Z("line.colorscale"),N(i,o,j,Z,{prefix:"line.",cLetter:"c"}),X.length;o.line.color=s}return 1/0}function dimensionDefaults(i,o){function coerce(s,F){return _.coerce(i,o,X.dimensions,s,F)}var s=coerce("values"),F=coerce("visible");if(s&&s.length||(F=o.visible=!1),F){coerce("label"),coerce("displayindex",o._index);var N,j=i.categoryarray,Z=Array.isArray(j)&&j.length>0;Z&&(N="array");var $=coerce("categoryorder",N);"array"===$?(coerce("categoryarray"),coerce("ticktext")):(delete i.categoryarray,delete i.ticktext),Z||"array"!==$||(o.categoryorder="trace")}}i.exports=function(i,o,s,F){function coerce(s,F){return _.coerce(i,o,X,s,F)}var N=Z(i,o,{name:"dimensions",handleItemDefaults:dimensionDefaults}),ee=handleLineDefaults(i,o,s,F,coerce);j(o,F,coerce),Array.isArray(N)&&N.length||(o.visible=!1),$(o,N,"values",ee),coerce("hoveron"),coerce("hovertemplate"),coerce("arrangement"),coerce("bundlecolors"),coerce("sortpaths"),coerce("counts");var et={family:F.font.family,size:Math.round(F.font.size),color:F.font.color};_.coerceFont(coerce,"labelfont",et);var er={family:F.font.family,size:Math.round(F.font.size/1.2),color:F.font.color};_.coerceFont(coerce,"tickfont",er)}},94873:function(i,o,s){"use strict";i.exports={attributes:s(99506),supplyDefaults:s(14647),calc:s(28699),plot:s(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:s(27677),categories:["noOpacity"],meta:{}}},45460:function(i,o,s){"use strict";var _=s(39898),F=s(81684).k4,N=s(72391),j=s(30211),Z=s(71828),X=Z.strTranslate,$=s(91424),ee=s(84267),et=s(63893);function performPlot(i,o,s,F){var N=o._context.staticPlot,j=i.map(createParcatsViewModel.bind(0,o,s)),ee=F.selectAll("g.parcatslayer").data([null]);ee.enter().append("g").attr("class","parcatslayer").style("pointer-events",N?"none":"all");var er=ee.selectAll("g.trace.parcats").data(j,key),en=er.enter().append("g").attr("class","trace parcats");er.attr("transform",function(i){return X(i.x,i.y)}),en.append("g").attr("class","paths");var ei=er.select("g.paths").selectAll("path.path").data(function(i){return i.paths},key);ei.attr("fill",function(i){return i.model.color});var eo=ei.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(i){return i.model.color}).attr("fill-opacity",0);stylePathsNoHover(eo),ei.attr("d",function(i){return i.svgD}),eo.empty()||ei.sort(compareRawColor),ei.exit().remove(),ei.on("mouseover",mouseoverPath).on("mouseout",mouseoutPath).on("click",clickPath),en.append("g").attr("class","dimensions");var es=er.select("g.dimensions").selectAll("g.dimension").data(function(i){return i.dimensions},key);es.enter().append("g").attr("class","dimension"),es.attr("transform",function(i){return X(i.x,0)}),es.exit().remove();var el=es.selectAll("g.category").data(function(i){return i.categories},key),ec=el.enter().append("g").attr("class","category");el.attr("transform",function(i){return X(0,i.y)}),ec.append("rect").attr("class","catrect").attr("pointer-events","none"),el.select("rect.catrect").attr("fill","none").attr("width",function(i){return i.width}).attr("height",function(i){return i.height}),styleCategoriesNoHover(ec);var eu=el.selectAll("rect.bandrect").data(function(i){return i.bands},key);eu.each(function(){Z.raiseToTop(this)}),eu.attr("fill",function(i){return i.color});var ef=eu.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(i){return i.color}).attr("fill-opacity",0);eu.attr("fill",function(i){return i.color}).attr("width",function(i){return i.width}).attr("height",function(i){return i.height}).attr("y",function(i){return i.y}).attr("cursor",function(i){return"fixed"===i.parcatsViewModel.arrangement?"default":"perpendicular"===i.parcatsViewModel.arrangement?"ns-resize":"move"}),styleBandsNoHover(ef),eu.exit().remove(),ec.append("text").attr("class","catlabel").attr("pointer-events","none");var ed=o._fullLayout.paper_bgcolor;el.select("text.catlabel").attr("text-anchor",function(i){return catInRightDim(i)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",et.makeTextShadow(ed)).style("fill","rgb(0, 0, 0)").attr("x",function(i){return catInRightDim(i)?i.width+5:-5}).attr("y",function(i){return i.height/2}).text(function(i){return i.model.categoryLabel}).each(function(i){$.font(_.select(this),i.parcatsViewModel.categorylabelfont),et.convertToTspans(_.select(this),o)}),ec.append("text").attr("class","dimlabel"),el.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(i){return"fixed"===i.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(i){return i.width/2}).attr("y",-5).text(function(i,o){return 0===o?i.parcatsViewModel.model.dimensions[i.model.dimensionInd].dimensionLabel:null}).each(function(i){$.font(_.select(this),i.parcatsViewModel.labelfont)}),el.selectAll("rect.bandrect").on("mouseover",mouseoverCategoryBand).on("mouseout",mouseoutCategory),el.exit().remove(),es.call(_.behavior.drag().origin(function(i){return{x:i.x,y:0}}).on("dragstart",dragDimensionStart).on("drag",dragDimension).on("dragend",dragDimensionEnd)),er.each(function(i){i.traceSelection=_.select(this),i.pathSelection=_.select(this).selectAll("g.paths").selectAll("path.path"),i.dimensionSelection=_.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),er.exit().remove()}function key(i){return i.key}function catInRightDim(i){var o=i.parcatsViewModel.dimensions.length,s=i.parcatsViewModel.dimensions[o-1].model.dimensionInd;return i.model.dimensionInd===s}function compareRawColor(i,o){return i.model.rawColor>o.model.rawColor?1:i.model.rawColor<o.model.rawColor?-1:0}function mouseoverPath(i){if(!i.parcatsViewModel.dragDimension&&-1===i.parcatsViewModel.hoverinfoItems.indexOf("skip")){Z.raiseToTop(this),stylePathsHover(_.select(this));var o=buildPointsArrayForPath(i),s=buildConstraintsForPath(i);if(i.parcatsViewModel.graphDiv.emit("plotly_hover",{points:o,event:_.event,constraints:s}),-1===i.parcatsViewModel.hoverinfoItems.indexOf("none")){var F,N,X,$=_.mouse(this)[0],et=i.parcatsViewModel.graphDiv,er=i.parcatsViewModel.trace,en=et._fullLayout,ei=en._paperdiv.node().getBoundingClientRect(),eo=i.parcatsViewModel.graphDiv.getBoundingClientRect();for(X=0;X<i.leftXs.length-1;X++)if(i.leftXs[X]+i.dimWidths[X]-2<=$&&$<=i.leftXs[X+1]+2){var es=i.parcatsViewModel.dimensions[X],el=i.parcatsViewModel.dimensions[X+1];F=(es.x+es.width+el.x)/2,N=(i.topYs[X]+i.topYs[X+1]+i.height)/2;break}var ec=i.parcatsViewModel.x+F,eu=i.parcatsViewModel.y+N,ef=ee.mostReadable(i.model.color,["black","white"]),ed=i.model.count,eh=ed/i.parcatsViewModel.model.count,ep={countLabel:ed,probabilityLabel:eh.toFixed(3)},eg=[];-1!==i.parcatsViewModel.hoverinfoItems.indexOf("count")&&eg.push(["Count:",ep.countLabel].join(" ")),-1!==i.parcatsViewModel.hoverinfoItems.indexOf("probability")&&eg.push(["P:",ep.probabilityLabel].join(" "));var em=eg.join("<br>"),ey=_.mouse(et)[0];j.loneHover({trace:er,x:ec-ei.left+eo.left,y:eu-ei.top+eo.top,text:em,color:i.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ef,idealAlign:ey<ec?"right":"left",hovertemplate:(er.line||{}).hovertemplate,hovertemplateLabels:ep,eventData:[{data:er._input,fullData:er,count:ed,probability:eh}]},{container:en._hoverlayer.node(),outerContainer:en._paper.node(),gd:et})}}}function mouseoutPath(i){if(!i.parcatsViewModel.dragDimension&&(stylePathsNoHover(_.select(this)),j.loneUnhover(i.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),i.parcatsViewModel.pathSelection.sort(compareRawColor),-1===i.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var o=buildPointsArrayForPath(i),s=buildConstraintsForPath(i);i.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:o,event:_.event,constraints:s})}}function buildPointsArrayForPath(i){for(var o=[],s=getTraceIndex(i.parcatsViewModel),_=0;_<i.model.valueInds.length;_++){var F=i.model.valueInds[_];o.push({curveNumber:s,pointNumber:F})}return o}function buildConstraintsForPath(i){for(var o={},s=i.parcatsViewModel.model.dimensions,_=0;_<s.length;_++){var F=s[_],N=F.categories[i.model.categoryInds[_]];o[F.containerInd]=N.categoryValue}return void 0!==i.model.rawColor&&(o.color=i.model.rawColor),o}function clickPath(i){if(-1===i.parcatsViewModel.hoverinfoItems.indexOf("skip")){var o=buildPointsArrayForPath(i),s=buildConstraintsForPath(i);i.parcatsViewModel.graphDiv.emit("plotly_click",{points:o,event:_.event,constraints:s})}}function stylePathsNoHover(i){i.attr("fill",function(i){return i.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function stylePathsHover(i){i.attr("fill-opacity",.8).attr("stroke",function(i){return ee.mostReadable(i.model.color,["black","white"])}).attr("stroke-width",.3)}function styleCategoryHover(i){i.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function styleCategoriesNoHover(i){i.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function styleBandsHover(i){i.attr("stroke","black").attr("stroke-width",1.5)}function styleBandsNoHover(i){i.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function selectPathsThroughCategoryBandColor(i){var o=i.parcatsViewModel.pathSelection,s=i.categoryViewModel.model.dimensionInd,_=i.categoryViewModel.model.categoryInd;return o.filter(function(o){return o.model.categoryInds[s]===_&&o.model.color===i.color})}function styleForCategoryHovermode(i){_.select(i.parentNode).selectAll("rect.bandrect").each(function(i){var o=selectPathsThroughCategoryBandColor(i);stylePathsHover(o),o.each(function(){Z.raiseToTop(this)})}),styleCategoryHover(_.select(i.parentNode))}function styleForColorHovermode(i){var o=_.select(i).datum(),s=selectPathsThroughCategoryBandColor(o);stylePathsHover(s),s.each(function(){Z.raiseToTop(this)}),_.select(i.parentNode).selectAll("rect.bandrect").filter(function(i){return i.color===o.color}).each(function(){Z.raiseToTop(this),styleBandsHover(_.select(this))})}function emitPointsEventCategoryHovermode(i,o,s){var F=_.select(i).datum(),N=F.categoryViewModel.model,j=F.parcatsViewModel.graphDiv,Z=_.select(i.parentNode).selectAll("rect.bandrect"),X=[];Z.each(function(i){selectPathsThroughCategoryBandColor(i).each(function(i){Array.prototype.push.apply(X,buildPointsArrayForPath(i))})});var $={};$[N.dimensionInd]=N.categoryValue,j.emit(o,{points:X,event:s,constraints:$})}function emitPointsEventColorHovermode(i,o,s){var F=_.select(i).datum(),N=F.categoryViewModel.model,j=F.parcatsViewModel.graphDiv,Z=selectPathsThroughCategoryBandColor(F),X=[];Z.each(function(i){Array.prototype.push.apply(X,buildPointsArrayForPath(i))});var $={};$[N.dimensionInd]=N.categoryValue,void 0!==F.rawColor&&($.color=F.rawColor),j.emit(o,{points:X,event:s,constraints:$})}function createHoverLabelForCategoryHovermode(i,o,s){i._fullLayout._calcInverseTransform(i);var F,N,j=i._fullLayout._invScaleX,Z=i._fullLayout._invScaleY,X=_.select(s.parentNode).select("rect.catrect"),$=X.node().getBoundingClientRect(),ee=X.datum(),et=ee.parcatsViewModel,er=et.model.dimensions[ee.model.dimensionInd],en=et.trace,ei=$.top+$.height/2;et.dimensions.length>1&&er.displayInd===et.dimensions.length-1?(F=$.left,N="left"):(F=$.left+$.width,N="right");var eo=ee.model.count,es=ee.model.categoryLabel,el=eo/ee.parcatsViewModel.model.count,ec={countLabel:eo,categoryLabel:es,probabilityLabel:el.toFixed(3)},eu=[];-1!==ee.parcatsViewModel.hoverinfoItems.indexOf("count")&&eu.push(["Count:",ec.countLabel].join(" ")),-1!==ee.parcatsViewModel.hoverinfoItems.indexOf("probability")&&eu.push(["P("+ec.categoryLabel+"):",ec.probabilityLabel].join(" "));var ef=eu.join("<br>");return{trace:en,x:j*(F-o.left),y:Z*(ei-o.top),text:ef,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:N,hovertemplate:en.hovertemplate,hovertemplateLabels:ec,eventData:[{data:en._input,fullData:en,count:eo,category:es,probability:el}]}}function createHoverLabelForDimensionHovermode(i,o,s){var F=[];return _.select(s.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){F.push(createHoverLabelForCategoryHovermode(i,o,this))}),F}function createHoverLabelForColorHovermode(i,o,s){i._fullLayout._calcInverseTransform(i);var F,N,j=i._fullLayout._invScaleX,Z=i._fullLayout._invScaleY,X=s.getBoundingClientRect(),$=_.select(s).datum(),et=$.categoryViewModel,er=et.parcatsViewModel,en=er.model.dimensions[et.model.dimensionInd],ei=er.trace,eo=X.y+X.height/2;er.dimensions.length>1&&en.displayInd===er.dimensions.length-1?(F=X.left,N="left"):(F=X.left+X.width,N="right");var es=et.model.categoryLabel,el=$.parcatsViewModel.model.count,ec=0;$.categoryViewModel.bands.forEach(function(i){i.color===$.color&&(ec+=i.count)});var eu=et.model.count,ef=0;er.pathSelection.each(function(i){i.model.color===$.color&&(ef+=i.model.count)});var ed=ec/el,eh=ec/ef,ep=ec/eu,eg={countLabel:el,categoryLabel:es,probabilityLabel:ed.toFixed(3)},em=[];-1!==et.parcatsViewModel.hoverinfoItems.indexOf("count")&&em.push(["Count:",eg.countLabel].join(" ")),-1!==et.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(em.push("P(color ∩ "+es+"): "+eg.probabilityLabel),em.push("P("+es+" | color): "+eh.toFixed(3)),em.push("P(color | "+es+"): "+ep.toFixed(3)));var ey=em.join("<br>"),ev=ee.mostReadable($.color,["black","white"]);return{trace:ei,x:j*(F-o.left),y:Z*(eo-o.top),text:ey,color:$.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ev,fontSize:10,idealAlign:N,hovertemplate:ei.hovertemplate,hovertemplateLabels:eg,eventData:[{data:ei._input,fullData:ei,category:es,count:el,probability:ed,categorycount:eu,colorcount:ef,bandcolorcount:ec}]}}function mouseoverCategoryBand(i){if(!i.parcatsViewModel.dragDimension&&-1===i.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!(_.mouse(this)[1]<-1)){var o,s=i.parcatsViewModel.graphDiv,F=s._fullLayout,N=F._paperdiv.node().getBoundingClientRect(),Z=i.parcatsViewModel.hoveron;"color"===Z?(styleForColorHovermode(this),emitPointsEventColorHovermode(this,"plotly_hover",_.event)):(styleForCategoryHovermode(this),emitPointsEventCategoryHovermode(this,"plotly_hover",_.event)),-1===i.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===Z?o=createHoverLabelForCategoryHovermode(s,N,this):"color"===Z?o=createHoverLabelForColorHovermode(s,N,this):"dimension"===Z&&(o=createHoverLabelForDimensionHovermode(s,N,this)),o&&j.loneHover(o,{container:F._hoverlayer.node(),outerContainer:F._paper.node(),gd:s}))}}function mouseoutCategory(i){var o=i.parcatsViewModel;o.dragDimension||(stylePathsNoHover(o.pathSelection),styleCategoriesNoHover(o.dimensionSelection.selectAll("g.category")),styleBandsNoHover(o.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),j.loneUnhover(o.graphDiv._fullLayout._hoverlayer.node()),o.pathSelection.sort(compareRawColor),-1!==o.hoverinfoItems.indexOf("skip"))||("color"===i.parcatsViewModel.hoveron?emitPointsEventColorHovermode(this,"plotly_unhover",_.event):emitPointsEventCategoryHovermode(this,"plotly_unhover",_.event))}function dragDimensionStart(i){"fixed"!==i.parcatsViewModel.arrangement&&(i.dragDimensionDisplayInd=i.model.displayInd,i.initialDragDimensionDisplayInds=i.parcatsViewModel.model.dimensions.map(function(i){return i.displayInd}),i.dragHasMoved=!1,i.dragCategoryDisplayInd=null,_.select(this).selectAll("g.category").select("rect.catrect").each(function(o){var s=_.mouse(this)[0],F=_.mouse(this)[1];-2<=s&&s<=o.width+2&&-2<=F&&F<=o.height+2&&(i.dragCategoryDisplayInd=o.model.displayInd,i.initialDragCategoryDisplayInds=i.model.categories.map(function(i){return i.displayInd}),o.model.dragY=o.y,Z.raiseToTop(this.parentNode),_.select(this.parentNode).selectAll("rect.bandrect").each(function(o){o.y<F&&F<=o.y+o.height&&(i.potentialClickBand=this)}))}),i.parcatsViewModel.dragDimension=i,j.loneUnhover(i.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function dragDimension(i){if("fixed"!==i.parcatsViewModel.arrangement&&(i.dragHasMoved=!0,null!==i.dragDimensionDisplayInd)){var o=i.dragDimensionDisplayInd,s=i.parcatsViewModel.dimensions[o];if(null!==i.dragCategoryDisplayInd){var F=s.categories[i.dragCategoryDisplayInd];F.model.dragY+=_.event.dy;var N=F.model.dragY,j=F.model.displayInd,Z=s.categories,X=Z[j-1],$=Z[j+1];void 0!==X&&N<X.y+X.height/2&&(F.model.displayInd=X.model.displayInd,X.model.displayInd=j),void 0!==$&&N+F.height>$.y+$.height/2&&(F.model.displayInd=$.model.displayInd,$.model.displayInd=j),i.dragCategoryDisplayInd=F.model.displayInd}if(null===i.dragCategoryDisplayInd||"freeform"===i.parcatsViewModel.arrangement){s.model.dragX=_.event.x;var ee=i.parcatsViewModel.dimensions[o-1],et=i.parcatsViewModel.dimensions[o+1];void 0!==ee&&s.model.dragX<ee.x+ee.width&&(s.model.displayInd=ee.model.displayInd,ee.model.displayInd=o),void 0!==et&&s.model.dragX+s.width>et.x&&(s.model.displayInd=et.model.displayInd,et.model.displayInd=i.dragDimensionDisplayInd),i.dragDimensionDisplayInd=s.model.displayInd}updateDimensionViewModels(i.parcatsViewModel),updatePathViewModels(i.parcatsViewModel),updateSvgCategories(i.parcatsViewModel),updateSvgPaths(i.parcatsViewModel)}}function dragDimensionEnd(i){if("fixed"!==i.parcatsViewModel.arrangement&&null!==i.dragDimensionDisplayInd){_.select(this).selectAll("text").attr("font-weight","normal");var o={},s=getTraceIndex(i.parcatsViewModel),F=i.parcatsViewModel.model.dimensions.map(function(i){return i.displayInd}),j=i.initialDragDimensionDisplayInds.some(function(i,o){return i!==F[o]});j&&F.forEach(function(s,_){o["dimensions["+i.parcatsViewModel.model.dimensions[_].containerInd+"].displayindex"]=s});var Z=!1;if(null!==i.dragCategoryDisplayInd){var X=i.model.categories.map(function(i){return i.displayInd});if(Z=i.initialDragCategoryDisplayInds.some(function(i,o){return i!==X[o]})){var $=i.model.categories.slice().sort(function(i,o){return i.displayInd-o.displayInd}),ee=$.map(function(i){return i.categoryValue}),et=$.map(function(i){return i.categoryLabel});o["dimensions["+i.model.containerInd+"].categoryarray"]=[ee],o["dimensions["+i.model.containerInd+"].ticktext"]=[et],o["dimensions["+i.model.containerInd+"].categoryorder"]="array"}}-1===i.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!i.dragHasMoved&&i.potentialClickBand&&("color"===i.parcatsViewModel.hoveron?emitPointsEventColorHovermode(i.potentialClickBand,"plotly_click",_.event.sourceEvent):emitPointsEventCategoryHovermode(i.potentialClickBand,"plotly_click",_.event.sourceEvent)),i.model.dragX=null,null!==i.dragCategoryDisplayInd&&(i.parcatsViewModel.dimensions[i.dragDimensionDisplayInd].categories[i.dragCategoryDisplayInd].model.dragY=null,i.dragCategoryDisplayInd=null),i.dragDimensionDisplayInd=null,i.parcatsViewModel.dragDimension=null,i.dragHasMoved=null,i.potentialClickBand=null,updateDimensionViewModels(i.parcatsViewModel),updatePathViewModels(i.parcatsViewModel),_.transition().duration(300).ease("cubic-in-out").each(function(){updateSvgCategories(i.parcatsViewModel,!0),updateSvgPaths(i.parcatsViewModel,!0)}).each("end",function(){(j||Z)&&N.restyle(i.parcatsViewModel.graphDiv,o,[s])})}}function getTraceIndex(i){for(var o,s=i.graphDiv._fullData,_=0;_<s.length;_++)if(i.key===s[_].uid){o=_;break}return o}function updateSvgPaths(i,o){function transition(i){return o?i.transition():i}void 0===o&&(o=!1),i.pathSelection.data(function(i){return i.paths},key),transition(i.pathSelection).attr("d",function(i){return i.svgD})}function updateSvgCategories(i,o){function transition(i){return o?i.transition():i}void 0===o&&(o=!1),i.dimensionSelection.data(function(i){return i.dimensions},key);var s=i.dimensionSelection.selectAll("g.category").data(function(i){return i.categories},key);transition(i.dimensionSelection).attr("transform",function(i){return X(i.x,0)}),transition(s).attr("transform",function(i){return X(0,i.y)}),s.select(".dimlabel").text(function(i,o){return 0===o?i.parcatsViewModel.model.dimensions[i.model.dimensionInd].dimensionLabel:null}),s.select(".catlabel").attr("text-anchor",function(i){return catInRightDim(i)?"start":"end"}).attr("x",function(i){return catInRightDim(i)?i.width+5:-5}).each(function(i){var o,s;catInRightDim(i)?(o=i.width+5,s="start"):(o=-5,s="end"),_.select(this).selectAll("tspan").attr("x",o).attr("text-anchor",s)});var F=s.selectAll("rect.bandrect").data(function(i){return i.bands},key),N=F.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(i){return i.color}).attr("fill-opacity",0);F.attr("fill",function(i){return i.color}).attr("width",function(i){return i.width}).attr("height",function(i){return i.height}).attr("y",function(i){return i.y}),styleBandsNoHover(N),F.each(function(){Z.raiseToTop(this)}),F.exit().remove()}function createParcatsViewModel(i,o,s){var _,F=s[0],N=o.margin||{l:80,r:80,t:100,b:80},j=F.trace,Z=j.domain,X=o.width,$=o.height,ee=Math.floor(X*(Z.x[1]-Z.x[0])),et=Math.floor($*(Z.y[1]-Z.y[0])),er=Z.x[0]*X+N.l,en=o.height-Z.y[1]*o.height+N.t,ei=j.line.shape;_="all"===j.hoverinfo?["count","probability"]:(j.hoverinfo||"").split("+");var eo={trace:j,key:j.uid,model:F,x:er,y:en,width:ee,height:et,hoveron:j.hoveron,hoverinfoItems:_,arrangement:j.arrangement,bundlecolors:j.bundlecolors,sortpaths:j.sortpaths,labelfont:j.labelfont,categorylabelfont:j.tickfont,pathShape:ei,dragDimension:null,margin:N,paths:[],dimensions:[],graphDiv:i,traceSelection:null,pathSelection:null,dimensionSelection:null};return F.dimensions&&(updateDimensionViewModels(eo),updatePathViewModels(eo)),eo}function buildSvgPath(i,o,s,_,N){var j,Z,X=[],$=[];for(Z=0;Z<s.length-1;Z++)X.push((j=F(s[Z]+i[Z],i[Z+1]))(N)),$.push(j(1-N));var ee="M "+i[0]+","+o[0];for(ee+="l"+s[0]+",0 ",Z=1;Z<s.length;Z++)ee+="C"+X[Z-1]+","+o[Z-1]+" "+$[Z-1]+","+o[Z]+" "+i[Z]+","+o[Z]+"l"+s[Z]+",0 ";for(ee+="l0,"+_+" l -"+s[s.length-1]+",0 ",Z=s.length-2;Z>=0;Z--)ee+="C"+$[Z]+","+(o[Z+1]+_)+" "+X[Z]+","+(o[Z]+_)+" "+(i[Z]+s[Z])+","+(o[Z]+_)+"l-"+s[Z]+",0 ";return ee+"Z"}function updatePathViewModels(i){var o=i.dimensions,s=i.model,_=o.map(function(i){return i.categories.map(function(i){return i.y})}),F=i.model.dimensions.map(function(i){return i.categories.map(function(i){return i.displayInd})}),N=i.model.dimensions.map(function(i){return i.displayInd}),j=i.dimensions.map(function(i){return i.model.dimensionInd}),Z=o.map(function(i){return i.x}),X=o.map(function(i){return i.width}),$=[];for(var ee in s.paths)s.paths.hasOwnProperty(ee)&&$.push(s.paths[ee]);function pathDisplayCategoryInds(i){var o=i.categoryInds.map(function(i,o){return F[o][i]});return j.map(function(i){return o[i]})}$.sort(function(o,s){var _=pathDisplayCategoryInds(o),F=pathDisplayCategoryInds(s);return("backward"===i.sortpaths&&(_.reverse(),F.reverse()),_.push(o.valueInds[0]),F.push(s.valueInds[0]),i.bundlecolors&&(_.unshift(o.rawColor),F.unshift(s.rawColor)),_<F)?-1:_>F?1:0});for(var et=Array($.length),er=o[0].model.count,en=o[0].categories.map(function(i){return i.height}).reduce(function(i,o){return i+o}),ei=0;ei<$.length;ei++){var eo,es,el=$[ei];eo=er>0?en*(el.count/er):0;for(var ec=Array(_.length),eu=0;eu<el.categoryInds.length;eu++){var ef=el.categoryInds[eu],ed=F[eu][ef],eh=N[eu];ec[eh]=_[eh][ed],_[eh][ed]+=eo;var ep=i.dimensions[eh].categories[ed],eg=ep.bands.length,em=ep.bands[eg-1];if(void 0===em||el.rawColor!==em.rawColor){var ey=void 0===em?0:em.y+em.height;ep.bands.push({key:ey,color:el.color,rawColor:el.rawColor,height:eo,width:ep.width,count:el.count,y:ey,categoryViewModel:ep,parcatsViewModel:i})}else{var ev=ep.bands[eg-1];ev.height+=eo,ev.count+=el.count}}es="hspline"===i.pathShape?buildSvgPath(Z,ec,X,eo,.5):buildSvgPath(Z,ec,X,eo,0),et[ei]={key:el.valueInds[0],model:el,height:eo,leftXs:Z,topYs:ec,dimWidths:X,svgD:es,parcatsViewModel:i}}i.paths=et}function updateDimensionViewModels(i){var o=i.model.dimensions.map(function(i){return{displayInd:i.displayInd,dimensionInd:i.dimensionInd}});o.sort(function(i,o){return i.displayInd-o.displayInd});var s=[];for(var _ in o){var F=o[_].dimensionInd,N=i.model.dimensions[F];s.push(createDimensionViewModel(i,N))}i.dimensions=s}function createDimensionViewModel(i,o){var s,_,F,N,j,Z,X=i.model.dimensions.length,$=o.displayInd;s=X>1?(i.width-80-16)/(X-1):0;var ee=[],et=i.model.maxCats,er=o.categories.length,en=o.count,ei=i.height-8*(et-1),eo=(et-er)*8/2,es=o.categories.map(function(i){return{displayInd:i.displayInd,categoryInd:i.categoryInd}});for(es.sort(function(i,o){return i.displayInd-o.displayInd}),Z=0;Z<er;Z++)j=es[Z].categoryInd,F=o.categories[j],_=en>0?F.count/en*ei:0,N={key:F.valueInds[0],model:F,width:16,height:_,y:null!==F.dragY?F.dragY:eo,bands:[],parcatsViewModel:i},eo=eo+_+8,ee.push(N);return{key:o.dimensionInd,x:null!==o.dragX?o.dragX:40+s*$,y:0,width:16,model:o,categories:ee,parcatsViewModel:i,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}i.exports=function(i,o,s,_){performPlot(s,i,_,o)}},45784:function(i,o,s){"use strict";var _=s(45460);i.exports=function(i,o,s,F){var N=i._fullLayout,j=N._paper,Z=N._size;_(i,j,o,{width:Z.w,height:Z.h,margin:{t:Z.t,r:Z.r,b:Z.b,l:Z.l}},s,F)}},73362:function(i,o,s){"use strict";var _=s(50693),F=s(13838),N=s(41940),j=s(27670).Y,Z=s(1426).extendFlat,X=s(44467).templatedArray;i.exports={domain:j({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:N({editType:"plot"}),tickfont:N({editType:"plot"}),rangefont:N({editType:"plot"}),dimensions:X("dimension",{label:{valType:"string",editType:"plot"},tickvals:Z({},F.tickvals,{editType:"plot"}),ticktext:Z({},F.ticktext,{editType:"plot"}),tickformat:Z({},F.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:Z({editType:"calc"},_("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(i,o,s){"use strict";var _=s(25706),F=s(39898),N=s(28984).keyFun,j=s(28984).repeat,Z=s(71828).sorterAsc,X=s(71828).strTranslate,$=_.bar.snapRatio,ee=_.bar.snapClose;function closeToCovering(i,o){return i*(1-ee)+o*ee}function ordinalScaleSnap(i,o,s,_){if(overlappingExisting(s,_))return s;var F=i?-1:1,N=0,j=o.length-1;if(F<0){var Z=N;N=j,j=Z}for(var X=o[N],ee=X,et=N;F*et<F*j;et+=F){var er=et+F,en=o[er];if(F*s<F*closeToCovering(X,en))return X*(1-$)+ee*$;if(F*s<F*en||er===j)return en*(1-$)+X*$;ee=X,X=en}}function overlappingExisting(i,o){for(var s=0;s<o.length;s++)if(i>=o[s][0]&&i<=o[s][1])return!0;return!1}function barHorizontalSetup(i){i.attr("x",-_.bar.captureWidth/2).attr("width",_.bar.captureWidth)}function backgroundBarHorizontalSetup(i){i.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function setHighlight(i){if(!i.brush.filterSpecified)return"0,"+i.height;for(var o,s,_,F=unitToPx(i.brush.filter.getConsolidated(),i.height),N=[0],j=F.length?F[0][0]:null,Z=0;Z<F.length;Z++)s=(o=F[Z])[1]-o[0],N.push(j),N.push(s),(_=Z+1)<F.length&&(j=F[_][0]-o[1]);return N.push(i.height),N}function unitToPx(i,o){return i.map(function(i){return i.map(function(i){return Math.max(0,i*o)}).sort(Z)})}function getRegion(i,o){var s=_.bar.handleHeight;if(!(o>i[1]+s)&&!(o<i[0]-s))return o>=.9*i[1]+.1*i[0]?"n":o<=.9*i[0]+.1*i[1]?"s":"ns"}function clearCursor(){F.select(document.body).style("cursor",null)}function styleHighlight(i){i.attr("stroke-dasharray",setHighlight)}function renderHighlight(i,o){var s=F.select(i).selectAll(".highlight, .highlight-shadow");styleHighlight(o?s.transition().duration(_.bar.snapDuration).each("end",o):s)}function getInterval(i,o){var s,_=i.brush,F=_.filterSpecified,N=NaN,j={};if(F){var Z=i.height,X=_.filter.getConsolidated(),$=unitToPx(X,Z),ee=NaN,et=NaN,er=NaN;for(s=0;s<=$.length;s++){var en=$[s];if(en&&en[0]<=o&&o<=en[1]){ee=s;break}if(et=s?s-1:NaN,en&&en[0]>o){er=s;break}}if(isNaN(N=ee)&&(N=isNaN(et)||isNaN(er)?isNaN(et)?er:et:o-$[et][1]<$[er][0]-o?et:er),!isNaN(N)){var ei=$[N],eo=getRegion(ei,o);eo&&(j.interval=X[N],j.intervalPix=ei,j.region=eo)}}if(i.ordinal&&!j.region){var es=i.unitTickvals,el=i.unitToPaddedPx.invert(o);for(s=0;s<es.length;s++){var ec=[.25*es[Math.max(s-1,0)]+.75*es[s],.25*es[Math.min(s+1,es.length-1)]+.75*es[s]];if(el>=ec[0]&&el<=ec[1]){j.clickableOrdinalRange=ec;break}}}return j}function dragstart(i,o){F.event.sourceEvent.stopPropagation();var s=o.height-F.mouse(i)[1]-2*_.verticalPadding,N=o.unitToPaddedPx.invert(s),j=o.brush,Z=getInterval(o,s),X=Z.interval,$=j.svgBrush;if($.wasDragged=!1,$.grabbingBar="ns"===Z.region,$.grabbingBar){var ee=X.map(o.unitToPaddedPx);$.grabPoint=s-ee[0]-_.verticalPadding,$.barLength=ee[1]-ee[0]}$.clickableOrdinalRange=Z.clickableOrdinalRange,$.stayingIntervals=o.multiselect&&j.filterSpecified?j.filter.getConsolidated():[],X&&($.stayingIntervals=$.stayingIntervals.filter(function(i){return i[0]!==X[0]&&i[1]!==X[1]})),$.startExtent=Z.region?X["s"===Z.region?1:0]:N,o.parent.inBrushDrag=!0,$.brushStartCallback()}function drag(i,o){F.event.sourceEvent.stopPropagation();var s=o.height-F.mouse(i)[1]-2*_.verticalPadding,N=o.brush.svgBrush;N.wasDragged=!0,N._dragging=!0,N.grabbingBar?N.newExtent=[s-N.grabPoint,s+N.barLength-N.grabPoint].map(o.unitToPaddedPx.invert):N.newExtent=[N.startExtent,o.unitToPaddedPx.invert(s)].sort(Z),o.brush.filterSpecified=!0,N.extent=N.stayingIntervals.concat([N.newExtent]),N.brushCallback(o),renderHighlight(i.parentNode)}function dragend(i,o){var s=o.brush,_=s.filter,N=s.svgBrush;N._dragging||(mousemove(i,o),drag(i,o),o.brush.svgBrush.wasDragged=!1),N._dragging=!1,F.event.sourceEvent.stopPropagation();var j=N.grabbingBar;if(N.grabbingBar=!1,N.grabLocation=void 0,o.parent.inBrushDrag=!1,clearCursor(),!N.wasDragged){N.wasDragged=void 0,N.clickableOrdinalRange?s.filterSpecified&&o.multiselect?N.extent.push(N.clickableOrdinalRange):(N.extent=[N.clickableOrdinalRange],s.filterSpecified=!0):j?(N.extent=N.stayingIntervals,0===N.extent.length&&brushClear(s)):brushClear(s),N.brushCallback(o),renderHighlight(i.parentNode),N.brushEndCallback(s.filterSpecified?_.getConsolidated():[]);return}var mergeIntervals=function(){_.set(_.getConsolidated())};if(o.ordinal){var Z=o.unitTickvals;Z[Z.length-1]<Z[0]&&Z.reverse(),N.newExtent=[ordinalScaleSnap(0,Z,N.newExtent[0],N.stayingIntervals),ordinalScaleSnap(1,Z,N.newExtent[1],N.stayingIntervals)];var X=N.newExtent[1]>N.newExtent[0];N.extent=N.stayingIntervals.concat(X?[N.newExtent]:[]),N.extent.length||brushClear(s),N.brushCallback(o),X?renderHighlight(i.parentNode,mergeIntervals):(mergeIntervals(),renderHighlight(i.parentNode))}else mergeIntervals();N.brushEndCallback(s.filterSpecified?_.getConsolidated():[])}function mousemove(i,o){var s=o.height-F.mouse(i)[1]-2*_.verticalPadding,N=getInterval(o,s),j="crosshair";N.clickableOrdinalRange?j="pointer":N.region&&(j=N.region+"-resize"),F.select(document.body).style("cursor",j)}function attachDragBehavior(i){i.on("mousemove",function(i){F.event.preventDefault(),i.parent.inBrushDrag||mousemove(this,i)}).on("mouseleave",function(i){i.parent.inBrushDrag||clearCursor()}).call(F.behavior.drag().on("dragstart",function(i){dragstart(this,i)}).on("drag",function(i){drag(this,i)}).on("dragend",function(i){dragend(this,i)}))}function startAsc(i,o){return i[0]-o[0]}function renderAxisBrush(i,o,s){var F=s._context.staticPlot,N=i.selectAll(".background").data(j);N.enter().append("rect").classed("background",!0).call(barHorizontalSetup).call(backgroundBarHorizontalSetup).style("pointer-events",F?"none":"auto").attr("transform",X(0,_.verticalPadding)),N.call(attachDragBehavior).attr("height",function(i){return i.height-_.verticalPadding});var Z=i.selectAll(".highlight-shadow").data(j);Z.enter().append("line").classed("highlight-shadow",!0).attr("x",-_.bar.width/2).attr("stroke-width",_.bar.width+_.bar.strokeWidth).attr("stroke",o).attr("opacity",_.bar.strokeOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(i){return i.height}).call(styleHighlight);var $=i.selectAll(".highlight").data(j);$.enter().append("line").classed("highlight",!0).attr("x",-_.bar.width/2).attr("stroke-width",_.bar.width-_.bar.strokeWidth).attr("stroke",_.bar.fillColor).attr("opacity",_.bar.fillOpacity).attr("stroke-linecap","butt"),$.attr("y1",function(i){return i.height}).call(styleHighlight)}function ensureAxisBrush(i,o,s){var F=i.selectAll("."+_.cn.axisBrush).data(j,N);F.enter().append("g").classed(_.cn.axisBrush,!0),renderAxisBrush(F,o,s)}function getBrushExtent(i){return i.svgBrush.extent.map(function(i){return i.slice()})}function brushClear(i){i.filterSpecified=!1,i.svgBrush.extent=[[-1/0,1/0]]}function axisBrushMoved(i){return function(o){var s=o.brush,_=getBrushExtent(s).slice();s.filter.set(_),i()}}function dedupeRealRanges(i){for(var o,s=i.slice(),_=[],F=s.shift();F;){for(o=F.slice();(F=s.shift())&&F[0]<=o[1];)o[1]=Math.max(o[1],F[1]);_.push(o)}return 1===_.length&&_[0][0]>_[0][1]&&(_=[]),_}function makeFilter(){var i,o,s=[];return{set:function(_){1===(s=_.map(function(i){return i.slice().sort(Z)}).sort(startAsc)).length&&s[0][0]===-1/0&&s[0][1]===1/0&&(s=[[0,-1]]),i=dedupeRealRanges(s),o=s.reduce(function(i,o){return[Math.min(i[0],o[0]),Math.max(i[1],o[1])]},[1/0,-1/0])},get:function(){return s.slice()},getConsolidated:function(){return i},getBounds:function(){return o}}}function makeBrush(i,o,s,_,F,N){var j=makeFilter();return j.set(s),{filter:j,filterSpecified:o,svgBrush:{extent:[],brushStartCallback:_,brushCallback:axisBrushMoved(F),brushEndCallback:N}}}function cleanRanges(i,o){if(Array.isArray(i[0])?(i=i.map(function(i){return i.sort(Z)}),i=o.multiselect?dedupeRealRanges(i.sort(startAsc)):[i[0]]):i=[i.sort(Z)],o.tickvals){var s=o.tickvals.slice().sort(Z);if(!(i=i.map(function(i){var o=[ordinalScaleSnap(0,s,i[0],[]),ordinalScaleSnap(1,s,i[1],[])];if(o[1]>o[0])return o}).filter(function(i){return i})).length)return}return i.length>1?i:i[0]}i.exports={makeBrush:makeBrush,ensureAxisBrush:ensureAxisBrush,cleanRanges:cleanRanges}},71791:function(i,o,s){"use strict";i.exports={attributes:s(73362),supplyDefaults:s(3633),calc:s(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:s(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(i,o,s){"use strict";var _=s(39898),F=s(27659).a0,N=s(21341),j=s(77922);o.name="parcoords",o.plot=function(i){var o=F(i.calcdata,"parcoords")[0];o.length&&N(i,o)},o.clean=function(i,o,s,_){var F=_._has&&_._has("parcoords"),N=o._has&&o._has("parcoords");F&&!N&&(_._paperdiv.selectAll(".parcoords").remove(),_._glimages.selectAll("*").remove())},o.toSVG=function(i){var o=i._fullLayout._glimages,s=_.select(i).selectAll(".svg-container");function canvasToImage(){var i=this.toDataURL("image/png");o.append("svg:image").attr({xmlns:j.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}s.filter(function(i,o){return o===s.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(canvasToImage),window.setTimeout(function(){_.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(i,o,s){"use strict";var _=s(71828).isArrayOrTypedArray,F=s(21081),N=s(28984).wrap;function constHalf(i){for(var o=Array(i),s=0;s<i;s++)o[s]=.5;return o}i.exports=function(i,o){var s,j;return F.hasColorscale(o,"line")&&_(o.line.color)?(s=o.line.color,j=F.extractOpts(o.line).colorscale,F.calc(i,o,{vals:s,containerStr:"line",cLetter:"c"})):(s=constHalf(o._length),j=[[0,o.line.color],[1,o.line.color]]),N({lineColor:s,cscale:j})}},25706:function(i){"use strict";i.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(i,o,s){"use strict";var _=s(71828),F=s(52075).hasColorscale,N=s(1586),j=s(27670).c,Z=s(85501),X=s(89298),$=s(73362),ee=s(57920),et=s(25706).maxDimensionCount,er=s(94397);function handleLineDefaults(i,o,s,j,Z){var X=Z("line.color",s);if(F(i,"line")&&_.isArrayOrTypedArray(X)){if(X.length)return Z("line.colorscale"),N(i,o,j,Z,{prefix:"line.",cLetter:"c"}),X.length;o.line.color=s}return 1/0}function dimensionDefaults(i,o,s,F){function coerce(s,F){return _.coerce(i,o,$.dimensions,s,F)}var N=coerce("values"),j=coerce("visible");if(N&&N.length||(j=o.visible=!1),j){coerce("label"),coerce("tickvals"),coerce("ticktext"),coerce("tickformat");var Z=coerce("range");o._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:Z},X.setConvert(o._ax,F.layout),coerce("multiselect");var et=coerce("constraintrange");et&&(o.constraintrange=ee.cleanRanges(et,o))}}i.exports=function(i,o,s,F){function coerce(s,F){return _.coerce(i,o,$,s,F)}var N=i.dimensions;Array.isArray(N)&&N.length>et&&(_.log("parcoords traces support up to "+et+" dimensions at the moment"),N.splice(et));var X=Z(i,o,{name:"dimensions",layout:F,handleItemDefaults:dimensionDefaults}),ee=handleLineDefaults(i,o,s,F,coerce);j(o,F,coerce),Array.isArray(X)&&X.length||(o.visible=!1),er(o,X,"values",ee);var en={family:F.font.family,size:Math.round(F.font.size/1.2),color:F.font.color};_.coerceFont(coerce,"labelfont",en),_.coerceFont(coerce,"tickfont",en),_.coerceFont(coerce,"rangefont",en),coerce("labelangle"),coerce("labelside"),coerce("unselected.line.color"),coerce("unselected.line.opacity")}},1602:function(i,o,s){"use strict";var _=s(71828).isTypedArray;o.convertTypedArray=function(i){return _(i)?Array.prototype.slice.call(i):i},o.isOrdinal=function(i){return!!i.tickvals},o.isVisible=function(i){return i.visible||!("visible"in i)}},67618:function(i,o,s){"use strict";var _=s(71791);_.plot=s(21341),i.exports=_},83398:function(i,o,s){"use strict";var _=s(56068),F=_(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),N=_(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),j=s(25706).maxDimensionCount,Z=s(71828),X=new Uint8Array(4),$=new Uint8Array(4),ee={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function ensureDraw(i){i.read({x:0,y:0,width:1,height:1,data:X})}function clear(i,o,s,_,F){var N=i._gl;N.enable(N.SCISSOR_TEST),N.scissor(o,s,_,F),i.clear({color:[0,0,0,0],depth:1})}function renderBlock(i,o,s,_,F,N){var j=N.key;function render(Z){var X=Math.min(_,F-Z*_);0===Z&&(window.cancelAnimationFrame(s.currentRafs[j]),delete s.currentRafs[j],clear(i,N.scissorX,N.scissorY,N.scissorWidth,N.viewBoxSize[1])),s.clearOnly||(N.count=2*X,N.offset=2*Z*_,o(N),Z*_+X<F&&(s.currentRafs[j]=window.requestAnimationFrame(function(){render(Z+1)})),s.drawCompleted=!1)}s.drawCompleted||(ensureDraw(i),s.drawCompleted=!0),render(0)}function adjustDepth(i){return Math.max(1e-6,Math.min(.999999,i))}function palette(i,o){for(var s=Array(256),_=0;_<256;_++)s[_]=i(_/255).concat(o);return s}function calcPickColor(i,o){return(i>>>8*o)%256/255}function makePoints(i,o,s){for(var _=Array(i*(j+4)),F=0,N=0;N<i;N++){for(var Z=0;Z<j;Z++)_[F++]=Z<o.length?o[Z].paddedUnitValues[N]:.5;_[F++]=calcPickColor(N,2),_[F++]=calcPickColor(N,1),_[F++]=calcPickColor(N,0),_[F++]=adjustDepth(s[N])}return _}function makeVecAttr(i,o,s){for(var _=Array(8*o),F=0,N=0;N<o;N++)for(var j=0;j<2;j++)for(var Z=0;Z<4;Z++){var X=4*i+Z,$=s[64*N+X];63===X&&0===j&&($*=-1),_[F++]=$}return _}function pad2(i){var o="0"+i;return o.substr(o.length-2)}function getAttrName(i){return i<j?"p"+pad2(i+1)+"_"+pad2(i+4):"colors"}function setAttributes(i,o,s){for(var _=0;_<=j;_+=4)i[getAttrName(_)](makeVecAttr(_/4,o,s))}function emptyAttributes(i){for(var o={},s=0;s<=j;s+=4)o[getAttrName(s)]=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return o}function makeItem(i,o,s,_,F,N,j,X,$,ee,et,er,en,ei){for(var eo=[[],[]],es=0;es<64;es++)eo[0][es]=es===F?1:0,eo[1][es]=es===N?1:0;j*=ei,X*=ei,$*=ei,ee*=ei;var el=i.lines.canvasOverdrag*ei,ec=i.domain,eu=i.canvasWidth*ei,ef=i.canvasHeight*ei,ed=i.pad.l*ei,eh=i.pad.b*ei,ep=i.layoutHeight*ei,eg=i.layoutWidth*ei,em=i.deselectedLines.color,ey=i.deselectedLines.opacity;return Z.extendFlat({key:et,resolution:[eu,ef],viewBoxPos:[j+el,X],viewBoxSize:[$,ee],i0:F,i1:N,dim0A:eo[0].slice(0,16),dim0B:eo[0].slice(16,32),dim0C:eo[0].slice(32,48),dim0D:eo[0].slice(48,64),dim1A:eo[1].slice(0,16),dim1B:eo[1].slice(16,32),dim1C:eo[1].slice(32,48),dim1D:eo[1].slice(48,64),drwLayer:er,contextColor:[em[0]/255,em[1]/255,em[2]/255,"auto"!==ey?em[3]*ey:Math.max(1/255,Math.pow(1/i.lines.color.length,1/3))],scissorX:(_===o?0:j+el)+(ed-el)+eg*ec.x[0],scissorWidth:(_===s?eu-j+el:$+.5)+(_===o?j+el:0),scissorY:X+eh+ep*ec.y[0],scissorHeight:ee,viewportX:ed-el+eg*ec.x[0],viewportY:eh+ep*ec.y[0],viewportWidth:eu,viewportHeight:ef},en)}function expandedPixelRange(i){var o=Math.max(0,Math.floor(2047*i[0]),0),s=Math.min(2047,Math.ceil(2047*i[1]),2047);return[Math.min(o,s),Math.max(o,s)]}i.exports=function(i,o){var s,_,j,X,et=o.context,er=o.pick,en=o.regl,ei=en._gl,eo=ei.getParameter(ei.ALIASED_LINE_WIDTH_RANGE),es=Math.max(eo[0],Math.min(eo[1],o.viewModel.plotGlPixelRatio)),el={currentRafs:{},drawCompleted:!0,clearOnly:!1},ec=emptyAttributes(en),eu=en.texture(ee),ef=[];update(o);var ed=en({profile:!1,blend:{enable:et,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!et,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:en.prop("scissorX"),y:en.prop("scissorY"),width:en.prop("scissorWidth"),height:en.prop("scissorHeight")}},viewport:{x:en.prop("viewportX"),y:en.prop("viewportY"),width:en.prop("viewportWidth"),height:en.prop("viewportHeight")},dither:!1,vert:F,frag:N,primitive:"lines",lineWidth:es,attributes:ec,uniforms:{resolution:en.prop("resolution"),viewBoxPos:en.prop("viewBoxPos"),viewBoxSize:en.prop("viewBoxSize"),dim0A:en.prop("dim0A"),dim1A:en.prop("dim1A"),dim0B:en.prop("dim0B"),dim1B:en.prop("dim1B"),dim0C:en.prop("dim0C"),dim1C:en.prop("dim1C"),dim0D:en.prop("dim0D"),dim1D:en.prop("dim1D"),loA:en.prop("loA"),hiA:en.prop("hiA"),loB:en.prop("loB"),hiB:en.prop("hiB"),loC:en.prop("loC"),hiC:en.prop("hiC"),loD:en.prop("loD"),hiD:en.prop("hiD"),palette:eu,contextColor:en.prop("contextColor"),maskTexture:en.prop("maskTexture"),drwLayer:en.prop("drwLayer"),maskHeight:en.prop("maskHeight")},offset:en.prop("offset"),count:en.prop("count")});function update(i){s=i.model,j=(_=i.viewModel.dimensions.slice())[0]?_[0].values.length:0;var o=s.lines,F=er?o.color.map(function(i,s){return s/o.color.length}):o.color,N=makePoints(j,_,F);setAttributes(ec,j,N),et||er||(eu=en.texture(Z.extendFlat({data:palette(s.unitToColor,255)},ee)))}function makeConstraints(i){var o,s,F,N=[[],[]];for(F=0;F<64;F++){var j=!i&&F<_.length?_[F].brush.filter.getBounds():[-1/0,1/0];N[0][F]=j[0],N[1][F]=j[1]}var Z=Array(16384);for(o=0;o<16384;o++)Z[o]=255;if(!i)for(o=0;o<_.length;o++){var $=o%8,ee=(o-$)/8,et=Math.pow(2,$),er=_[o].brush.filter.get();if(!(er.length<2)){var ei=expandedPixelRange(er[0])[1];for(s=1;s<er.length;s++){var eo=expandedPixelRange(er[s]);for(F=ei+1;F<eo[0];F++)Z[8*F+ee]&=~et;ei=Math.max(ei,eo[1])}}}var es={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Z};return X?X(es):X=en.texture(es),{maskTexture:X,maskHeight:2048,loA:N[0].slice(0,16),loB:N[0].slice(16,32),loC:N[0].slice(32,48),loD:N[0].slice(48,64),hiA:N[1].slice(0,16),hiB:N[1].slice(16,32),hiC:N[1].slice(32,48),hiD:N[1].slice(48,64)}}return{render:function(i,o,_){var F,N,Z,X=i.length,$=1/0,ee=-1/0;for(F=0;F<X;F++)i[F].dim0.canvasX<$&&($=i[F].dim0.canvasX,N=F),i[F].dim1.canvasX>ee&&(ee=i[F].dim1.canvasX,Z=F);0===X&&clear(en,0,0,s.canvasWidth,s.canvasHeight);var ei=makeConstraints(et);for(F=0;F<X;F++){var eo=i[F],es=eo.dim0.crossfilterDimensionIndex,ec=eo.dim1.crossfilterDimensionIndex,eu=eo.canvasX,eh=eo.canvasY,ep=eu+eo.panelSizeX,eg=eo.plotGlPixelRatio;if(o||!ef[es]||ef[es][0]!==eu||ef[es][1]!==ep){ef[es]=[eu,ep];var em=makeItem(s,N,Z,F,es,ec,eu,eh,eo.panelSizeX,eo.panelSizeY,eo.dim0.crossfilterDimensionIndex,et?0:er?2:1,ei,eg);el.clearOnly=_,renderBlock(en,ed,el,o?s.lines.blockLineCount:j,j,em)}}},readPixel:function(i,o){return en.read({x:i,y:o,width:1,height:1,data:$}),$},readPixels:function(i,o,s,_){var F=new Uint8Array(4*s*_);return en.read({x:i,y:o,width:s,height:_,data:F}),F},destroy:function(){for(var o in i.style["pointer-events"]="none",eu.destroy(),X&&X.destroy(),ec)ec[o].destroy()},update:update}}},94397:function(i){"use strict";i.exports=function(i,o,s,_){var F,N;for(_||(_=1/0),F=0;F<o.length;F++)(N=o[F]).visible&&(_=Math.min(_,N[s].length));for(_===1/0&&(_=0),i._length=_,F=0;F<o.length;F++)(N=o[F]).visible&&(N._length=_);return _}},17171:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=F.numberFormat,j=s(36652),Z=s(89298),X=F.strRotate,$=F.strTranslate,ee=s(63893),et=s(91424),er=s(21081),en=s(28984),ei=en.keyFun,eo=en.repeat,es=en.unwrap,el=s(1602),ec=s(25706),eu=s(57920),ef=s(83398);function findExtreme(i,o,s){return F.aggNums(i,null,o,s)}function findExtremes(i,o){return fixExtremes(findExtreme(Math.min,i,o),findExtreme(Math.max,i,o))}function dimensionExtent(i){var o=i.range;return o?fixExtremes(o[0],o[1]):findExtremes(i.values,i._length)}function fixExtremes(i,o){return(isNaN(i)||!isFinite(i))&&(i=0),(isNaN(o)||!isFinite(o))&&(o=0),i===o&&(0===i?(i-=1,o+=1):(i*=.9,o*=1.1)),[i,o]}function toText(i,o){return o?function(s,_){var F=o[_];return null==F?i(s):F}:i}function domainScale(i,o,s,F,j){var Z=dimensionExtent(s);return F?_.scale.ordinal().domain(F.map(toText(N(s.tickformat),j))).range(F.map(function(s){return i-o+(s-Z[0])/(Z[1]-Z[0])*(2*o-i)})):_.scale.linear().domain(Z).range([i-o,o])}function unitToPaddedPx(i,o){return _.scale.linear().range([o,i-o])}function domainToPaddedUnitScale(i,o){return _.scale.linear().domain(dimensionExtent(i)).range([o,1-o])}function ordinalScale(i){if(i.tickvals){var o=dimensionExtent(i);return _.scale.ordinal().domain(i.tickvals).range(i.tickvals.map(function(i){return(i-o[0])/(o[1]-o[0])}))}}function unitToColorScale(i){var o=i.map(function(i){return i[0]}),s=i.map(function(i){var o=j(i[1]);return _.rgb("rgb("+o[0]+","+o[1]+","+o[2]+")")}),F="rgb".split("").map(function(i){return _.scale.linear().clamp(!0).domain(o).range(s.map(function(o){return o[i]}))});return function(i){return F.map(function(o){return o(i)})}}function someFiltersActive(i){return i.dimensions.some(function(i){return i.brush.filterSpecified})}function model(i,o,s){var N=es(o),Z=N.trace,X=el.convertTypedArray(N.lineColor),$=Z.line,ee={color:j(Z.unselected.line.color),opacity:Z.unselected.line.opacity},et=er.extractOpts($),en=et.reversescale?er.flipScale(N.cscale):N.cscale,ei=Z.domain,eo=Z.dimensions,eu=i.width,ef=Z.labelangle,ed=Z.labelside,eh=Z.labelfont,ep=Z.tickfont,eg=Z.rangefont,em=F.extendDeepNoArrays({},$,{color:X.map(_.scale.linear().domain(dimensionExtent({values:X,range:[et.min,et.max],_length:Z._length}))),blockLineCount:ec.blockLineCount,canvasOverdrag:ec.overdrag*ec.canvasPixelRatio}),ey=Math.floor(eu*(ei.x[1]-ei.x[0])),ev=Math.floor(i.height*(ei.y[1]-ei.y[0])),ex=i.margin||{l:80,r:80,t:100,b:80};return{key:s,colCount:eo.filter(el.isVisible).length,dimensions:eo,tickDistance:ec.tickDistance,unitToColor:unitToColorScale(en),lines:em,deselectedLines:ee,labelAngle:ef,labelSide:ed,labelFont:eh,tickFont:ep,rangeFont:eg,layoutWidth:eu,layoutHeight:i.height,domain:ei,translateX:ei.x[0]*eu,translateY:i.height-ei.y[1]*i.height,pad:ex,canvasWidth:ey*ec.canvasPixelRatio+2*em.canvasOverdrag,canvasHeight:ev*ec.canvasPixelRatio,width:ey,height:ev,canvasPixelRatio:ec.canvasPixelRatio}}function viewModel(i,o,s){var _=s.width,j=s.height,Z=s.dimensions,X=s.canvasPixelRatio,xScale=function(i){return _*i/Math.max(1,s.colCount-1)},$=ec.verticalPadding/j,ee=unitToPaddedPx(j,ec.verticalPadding),et={key:s.key,xScale:xScale,model:s,inBrushDrag:!1},er={};return et.dimensions=Z.filter(el.isVisible).map(function(_,Z){var en,ei=domainToPaddedUnitScale(_,$),eo=er[_.label];er[_.label]=(eo||0)+1;var es=_.label+(eo?"__"+eo:""),ef=_.constraintrange,ed=ef&&ef.length;ed&&!Array.isArray(ef[0])&&(ef=[ef]);var eh=ed?ef.map(function(i){return i.map(ei)}):[[-1/0,1/0]],ep=_.values;ep.length>_._length&&(ep=ep.slice(0,_._length));var eg=_.tickvals;function makeTickItem(i,o){return{val:i,text:en[o]}}function sortTickItem(i,o){return i.val-o.val}if(Array.isArray(eg)&&eg.length){Array.isArray(en=_.ticktext)&&en.length?en.length>eg.length?en=en.slice(0,eg.length):eg.length>en.length&&(eg=eg.slice(0,en.length)):en=eg.map(N(_.tickformat));for(var em=1;em<eg.length;em++)if(eg[em]<eg[em-1]){for(var ey=eg.map(makeTickItem).sort(sortTickItem),ev=0;ev<eg.length;ev++)eg[ev]=ey[ev].val,en[ev]=ey[ev].text;break}}else eg=void 0;return ep=el.convertTypedArray(ep),{key:es,label:_.label,tickFormat:_.tickformat,tickvals:eg,ticktext:en,ordinal:el.isOrdinal(_),multiselect:_.multiselect,xIndex:Z,crossfilterDimensionIndex:Z,visibleIndex:_._index,height:j,values:ep,paddedUnitValues:ep.map(ei),unitTickvals:eg&&eg.map(ei),xScale:xScale,x:xScale(Z),canvasX:xScale(Z)*X,unitToPaddedPx:ee,domainScale:domainScale(j,ec.verticalPadding,_,eg,en),ordinalScale:ordinalScale(_),parent:et,model:s,brush:eu.makeBrush(i,ed,eh,function(){i.linePickActive(!1)},function(){et.focusLayer&&et.focusLayer.render(et.panels,!0);var o=someFiltersActive(et);!i.contextShown()&&o?(et.contextLayer&&et.contextLayer.render(et.panels,!0),i.contextShown(!0)):i.contextShown()&&!o&&(et.contextLayer&&et.contextLayer.render(et.panels,!0,!0),i.contextShown(!1))},function(s){if(et.focusLayer.render(et.panels,!0),et.pickLayer&&et.pickLayer.render(et.panels,!0),i.linePickActive(!0),o&&o.filterChanged){var N=ei.invert,j=s.map(function(i){return i.map(N).sort(F.sorterAsc)}).sort(function(i,o){return i[0]-o[0]});o.filterChanged(et.key,_._index,j)}})}}),et}function styleExtentTexts(i){i.classed(ec.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function parcoordsInteractionState(){var i=!0,o=!1;return{linePickActive:function(o){return arguments.length?i=!!o:i},contextShown:function(i){return arguments.length?o=!!i:o}}}function calcTilt(i,o){var s=i*Math.PI/180;return{dir:"top"===o?1:-1,dx:Math.sin(s),dy:Math.cos(s),degrees:i}}function updatePanelLayout(i,o,s){for(var _=o.panels||(o.panels=[]),F=i.data(),N=0;N<F.length-1;N++){var j=_[N]||(_[N]={}),Z=F[N],X=F[N+1];j.dim0=Z,j.dim1=X,j.canvasX=Z.canvasX,j.panelSizeX=X.canvasX-Z.canvasX,j.panelSizeY=o.model.canvasHeight,j.y=0,j.canvasY=0,j.plotGlPixelRatio=s}}function calcAllTicks(i){for(var o=0;o<i.length;o++)for(var s=0;s<i[o].length;s++)for(var _=i[o][s].trace,F=_.dimensions,N=0;N<F.length;N++){var j=F[N].values,X=F[N]._ax;X&&(X.range?X.range=fixExtremes(X.range[0],X.range[1]):X.range=findExtremes(j,_._length),X.dtick||(X.dtick=.01*(Math.abs(X.range[1]-X.range[0])||1)),X.tickformat=F[N].tickformat,Z.calcTicks(X),X.cleanRange())}}function linearFormat(i,o){return Z.tickText(i._ax,o,!1).text}function extremeText(i,o){if(i.ordinal)return"";var s=i.domainScale.domain(),_=s[o?s.length-1:0];return linearFormat(i.model.dimensions[i.visibleIndex],_)}i.exports=function(i,o,s,N){var j=i._context.staticPlot,Z=i._fullLayout,er=Z._toppaper,en=Z._glcontainer,ed=i._context.plotGlPixelRatio,eh=i._fullLayout.paper_bgcolor;calcAllTicks(o);var ep=parcoordsInteractionState(),eg=o.filter(function(i){return es(i).trace.visible}).map(model.bind(0,s)).map(viewModel.bind(0,ep,N));en.each(function(i,o){return F.extendFlat(i,eg[o])});var em=en.selectAll(".gl-canvas").each(function(i){i.viewModel=eg[0],i.viewModel.plotGlPixelRatio=ed,i.viewModel.paperColor=eh,i.model=i.viewModel?i.viewModel.model:null}),ey=null;em.filter(function(i){return i.pick}).style("pointer-events",j?"none":"auto").on("mousemove",function(i){if(ep.linePickActive()&&i.lineLayer&&N&&N.hover){var o=_.event,s=this.width,F=this.height,j=_.mouse(this),Z=j[0],X=j[1];if(!(Z<0)&&!(X<0)&&!(Z>=s)&&!(X>=F)){var $=i.lineLayer.readPixel(Z,F-1-X),ee=0!==$[3],et=ee?$[2]+256*($[1]+256*$[0]):null,er={x:Z,y:X,clientX:o.clientX,clientY:o.clientY,dataIndex:i.model.key,curveNumber:et};et!==ey&&(ee?N.hover(er):N.unhover&&N.unhover(er),ey=et)}}}),em.style("opacity",function(i){return i.pick?0:1}),er.style("background","rgba(255, 255, 255, 0)");var ev=er.selectAll("."+ec.cn.parcoords).data(eg,ei);ev.exit().remove(),ev.enter().append("g").classed(ec.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ev.attr("transform",function(i){return $(i.model.translateX,i.model.translateY)});var ex=ev.selectAll("."+ec.cn.parcoordsControlView).data(eo,ei);ex.enter().append("g").classed(ec.cn.parcoordsControlView,!0),ex.attr("transform",function(i){return $(i.model.pad.l,i.model.pad.t)});var e_=ex.selectAll("."+ec.cn.yAxis).data(function(i){return i.dimensions},ei);e_.enter().append("g").classed(ec.cn.yAxis,!0),ex.each(function(i){updatePanelLayout(e_,i,ed)}),em.each(function(i){if(i.viewModel){!i.lineLayer||N?i.lineLayer=ef(this,i):i.lineLayer.update(i),(i.key||0===i.key)&&(i.viewModel[i.key]=i.lineLayer);var o=!i.context||N;i.lineLayer.render(i.viewModel.panels,o)}}),e_.attr("transform",function(i){return $(i.xScale(i.xIndex),0)}),e_.call(_.behavior.drag().origin(function(i){return i}).on("drag",function(i){var o=i.parent;ep.linePickActive(!1),i.x=Math.max(-ec.overdrag,Math.min(i.model.width+ec.overdrag,_.event.x)),i.canvasX=i.x*i.model.canvasPixelRatio,e_.sort(function(i,o){return i.x-o.x}).each(function(o,s){o.xIndex=s,o.x=i===o?o.x:o.xScale(o.xIndex),o.canvasX=o.x*o.model.canvasPixelRatio}),updatePanelLayout(e_,o,ed),e_.filter(function(o){return 0!==Math.abs(i.xIndex-o.xIndex)}).attr("transform",function(i){return $(i.xScale(i.xIndex),0)}),_.select(this).attr("transform",$(i.x,0)),e_.each(function(s,_,F){F===i.parent.key&&(o.dimensions[_]=s)}),o.contextLayer&&o.contextLayer.render(o.panels,!1,!someFiltersActive(o)),o.focusLayer.render&&o.focusLayer.render(o.panels)}).on("dragend",function(i){var o=i.parent;i.x=i.xScale(i.xIndex),i.canvasX=i.x*i.model.canvasPixelRatio,updatePanelLayout(e_,o,ed),_.select(this).attr("transform",function(i){return $(i.x,0)}),o.contextLayer&&o.contextLayer.render(o.panels,!1,!someFiltersActive(o)),o.focusLayer&&o.focusLayer.render(o.panels),o.pickLayer&&o.pickLayer.render(o.panels,!0),ep.linePickActive(!0),N&&N.axesMoved&&N.axesMoved(o.key,o.dimensions.map(function(i){return i.crossfilterDimensionIndex}))})),e_.exit().remove();var ew=e_.selectAll("."+ec.cn.axisOverlays).data(eo,ei);ew.enter().append("g").classed(ec.cn.axisOverlays,!0),ew.selectAll("."+ec.cn.axis).remove();var eT=ew.selectAll("."+ec.cn.axis).data(eo,ei);eT.enter().append("g").classed(ec.cn.axis,!0),eT.each(function(i){var o=i.model.height/i.model.tickDistance,s=i.domainScale,F=s.domain();_.select(this).call(_.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(o,i.tickFormat).tickValues(i.ordinal?F:null).tickFormat(function(o){return el.isOrdinal(i)?o:linearFormat(i.model.dimensions[i.visibleIndex],o)}).scale(s)),et.font(eT.selectAll("text"),i.model.tickFont)}),eT.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),eT.selectAll("text").style("text-shadow",ee.makeTextShadow(eh)).style("cursor","default");var ek=ew.selectAll("."+ec.cn.axisHeading).data(eo,ei);ek.enter().append("g").classed(ec.cn.axisHeading,!0);var eA=ek.selectAll("."+ec.cn.axisTitle).data(eo,ei);eA.enter().append("text").classed(ec.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",j?"none":"auto"),eA.text(function(i){return i.label}).each(function(o){var s=_.select(this);et.font(s,o.model.labelFont),ee.convertToTspans(s,i)}).attr("transform",function(i){var o=calcTilt(i.model.labelAngle,i.model.labelSide),s=ec.axisTitleOffset;return(o.dir>0?"":$(0,2*s+i.model.height))+X(o.degrees)+$(-s*o.dx,-s*o.dy)}).attr("text-anchor",function(i){var o=calcTilt(i.model.labelAngle,i.model.labelSide);return 2*Math.abs(o.dx)>Math.abs(o.dy)?o.dir*o.dx<0?"start":"end":"middle"});var eS=ew.selectAll("."+ec.cn.axisExtent).data(eo,ei);eS.enter().append("g").classed(ec.cn.axisExtent,!0);var eM=eS.selectAll("."+ec.cn.axisExtentTop).data(eo,ei);eM.enter().append("g").classed(ec.cn.axisExtentTop,!0),eM.attr("transform",$(0,-ec.axisExtentOffset));var eC=eM.selectAll("."+ec.cn.axisExtentTopText).data(eo,ei);eC.enter().append("text").classed(ec.cn.axisExtentTopText,!0).call(styleExtentTexts),eC.text(function(i){return extremeText(i,!0)}).each(function(i){et.font(_.select(this),i.model.rangeFont)});var eE=eS.selectAll("."+ec.cn.axisExtentBottom).data(eo,ei);eE.enter().append("g").classed(ec.cn.axisExtentBottom,!0),eE.attr("transform",function(i){return $(0,i.model.height+ec.axisExtentOffset)});var eL=eE.selectAll("."+ec.cn.axisExtentBottomText).data(eo,ei);eL.enter().append("text").classed(ec.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(styleExtentTexts),eL.text(function(i){return extremeText(i,!1)}).each(function(i){et.font(_.select(this),i.model.rangeFont)}),eu.ensureAxisBrush(ew,eh,i)}},21341:function(i,o,s){"use strict";var _=s(17171),F=s(79749),N=s(1602).isVisible,j={};function newIndex(i,o,s){var _=o.indexOf(s),F=i.indexOf(_);return -1===F&&(F+=o.length),F}function sorter(i,o){return function(s,_){return newIndex(i,o,s)-newIndex(i,o,_)}}(i.exports=function(i,o){var s=i._fullLayout;if(F(i,[],j)){var Z={},X={},$={},ee={},et=s._size;o.forEach(function(o,s){var _=o[0].trace;$[s]=_.index;var F=ee[s]=_._fullInput.index;Z[s]=i.data[F].dimensions,X[s]=i.data[F].dimensions.slice()}),_(i,o,{width:et.w,height:et.h,margin:{t:et.t,r:et.r,b:et.b,l:et.l}},{filterChanged:function(o,_,F){var N=X[o][_],j=F.map(function(i){return i.slice()}),Z="dimensions["+_+"].constraintrange",et=s._tracePreGUI[i._fullData[$[o]]._fullInput.uid];if(void 0===et[Z]){var er=N.constraintrange;et[Z]=er||null}var en=i._fullData[$[o]].dimensions[_];j.length?(1===j.length&&(j=j[0]),N.constraintrange=j,en.constraintrange=j.slice(),j=[j]):(delete N.constraintrange,delete en.constraintrange,j=null);var ei={};ei[Z]=j,i.emit("plotly_restyle",[ei,[ee[o]]])},hover:function(o){i.emit("plotly_hover",o)},unhover:function(o){i.emit("plotly_unhover",o)},axesMoved:function(o,s){var _=sorter(s,X[o].filter(N));Z[o].sort(_),X[o].filter(function(i){return!N(i)}).sort(function(i){return X[o].indexOf(i)}).forEach(function(i){Z[o].splice(Z[o].indexOf(i),1),Z[o].splice(X[o].indexOf(i),0,i)}),i.emit("plotly_restyle",[{dimensions:[Z[o]]},[ee[o]]])}})}}).reglPrecompiled=j},34e3:function(i,o,s){"use strict";var _=s(9012),F=s(27670).Y,N=s(41940),j=s(22399),Z=s(5386).fF,X=s(5386).si,$=s(1426).extendFlat,ee=s(79952).u,et=N({editType:"plot",arrayOk:!0,colorEditType:"plot"});i.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:j.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:ee,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:$({},_.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:Z({},{keys:["label","color","value","percent","text"]}),texttemplate:X({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:$({},et,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:$({},et,{}),outsidetextfont:$({},et,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:$({},et,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:F({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:$({},et,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(i,o,s){"use strict";var _=s(74875);o.name="pie",o.plot=function(i,s,F,N){_.plotBasePlot(o.name,i,s,F,N)},o.clean=function(i,s,F,N){_.cleanBasePlot(o.name,i,s,F,N)}},32354:function(i,o,s){"use strict";var _=s(92770),F=s(84267),N=s(7901),j={};function calc(i,o){var s=[],F=i._fullLayout,N=F.hiddenlabels||[],j=o.labels,Z=o.marker.colors||[],X=o.values,$=o._length,ee=o._hasValues&&$;if(o.dlabel)for(eo=0,j=Array($);eo<$;eo++)j[eo]=String(o.label0+eo*o.dlabel);var et={},er=makePullColorFn(F["_"+o.type+"colormap"]),en=0,ei=!1;for(eo=0;eo<$;eo++){if(ee){if(!_(el=X[eo]))continue;el=+el}else el=1;(void 0===(ec=j[eo])||""===ec)&&(ec=eo);var eo,es,el,ec,eu,ef=et[ec=String(ec)];void 0===ef?(et[ec]=s.length,(eu=-1!==N.indexOf(ec))||(en+=el),s.push({v:el,label:ec,color:er(Z[eo],ec),i:eo,pts:[eo],hidden:eu})):(ei=!0,es=s[ef],es.v+=el,es.pts.push(eo),es.hidden||(en+=el),!1===es.color&&Z[eo]&&(es.color=er(Z[eo],ec)))}return s=s.filter(function(i){return i.v>=0}),("funnelarea"===o.type?ei:o.sort)&&s.sort(function(i,o){return o.v-i.v}),s[0]&&(s[0].vTotal=en),s}function makePullColorFn(i){return function(o,s){return!!(o&&(o=F(o)).isValid())&&(o=N.addOpacity(o,o.getAlpha()),i[s]||(i[s]=o),o)}}function crossTraceCalc(i,o){var s=(o||{}).type;s||(s="pie");var _=i._fullLayout,F=i.calcdata,N=_[s+"colorway"],Z=_["_"+s+"colormap"];_["extend"+s+"colors"]&&(N=generateExtendedColors(N,j));for(var X=0,$=0;$<F.length;$++){var ee=F[$];if(ee[0].trace.type===s)for(var et=0;et<ee.length;et++){var er=ee[et];!1===er.color&&(Z[er.label]?er.color=Z[er.label]:(Z[er.label]=er.color=N[X%N.length],X++))}}}function generateExtendedColors(i,o){var s,_=JSON.stringify(i),N=o[_];if(!N){for(s=0,N=i.slice();s<i.length;s++)N.push(F(i[s]).lighten(20).toHexString());for(s=0;s<i.length;s++)N.push(F(i[s]).darken(20).toHexString());o[_]=N}return N}i.exports={calc:calc,crossTraceCalc:crossTraceCalc,makePullColorFn:makePullColorFn,generateExtendedColors:generateExtendedColors}},37434:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(34e3),j=s(27670).c,Z=s(90769).handleText,X=s(71828).coercePattern;function handleLabelsAndValues(i,o){var s,N=Array.isArray(i),j=F.isArrayOrTypedArray(o),Z=Math.min(N?i.length:1/0,j?o.length:1/0);if(isFinite(Z)||(Z=0),Z&&j){for(var X=0;X<Z;X++){var $=o[X];if(_($)&&$>0){s=!0;break}}s||(Z=0)}return{hasLabels:N,hasValues:j,len:Z}}function handleMarkerDefaults(i,o,s,_,F){_("marker.line.width")&&_("marker.line.color",F?void 0:s.paper_bgcolor);var N=_("marker.colors");X(_,"marker.pattern",N),i.marker&&!o.marker.pattern.fgcolor&&(o.marker.pattern.fgcolor=i.marker.colors),o.marker.pattern.bgcolor||(o.marker.pattern.bgcolor=s.paper_bgcolor)}function supplyDefaults(i,o,s,_){function coerce(s,_){return F.coerce(i,o,N,s,_)}var X,$=handleLabelsAndValues(coerce("labels"),coerce("values")),ee=$.len;if(o._hasLabels=$.hasLabels,o._hasValues=$.hasValues,!o._hasLabels&&o._hasValues&&(coerce("label0"),coerce("dlabel")),!ee){o.visible=!1;return}o._length=ee,handleMarkerDefaults(i,o,_,coerce,!0),coerce("scalegroup");var et=coerce("text"),er=coerce("texttemplate");if(er||(X=coerce("textinfo",Array.isArray(et)?"text+percent":"percent")),coerce("hovertext"),coerce("hovertemplate"),er||X&&"none"!==X){var en=coerce("textposition");Z(i,o,_,coerce,en,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(en)||"auto"===en||"outside"===en)&&coerce("automargin"),("inside"===en||"auto"===en||Array.isArray(en))&&coerce("insidetextorientation")}j(o,_,coerce);var ei=coerce("hole");if(coerce("title.text")){var eo=coerce("title.position",ei?"middle center":"top center");ei||"middle center"!==eo||(o.title.position="top center"),F.coerceFont(coerce,"title.font",_.font)}coerce("sort"),coerce("direction"),coerce("rotation"),coerce("pull")}i.exports={handleLabelsAndValues:handleLabelsAndValues,handleMarkerDefaults:handleMarkerDefaults,supplyDefaults:supplyDefaults}},20007:function(i,o,s){"use strict";var _=s(23469).appendArrayMultiPointValues;i.exports=function(i,o){var s={curveNumber:o.index,pointNumbers:i.pts,data:o._input,fullData:o,label:i.label,color:i.color,value:i.v,percent:i.percent,text:i.text,bbox:i.bbox,v:i.v};return 1===i.pts.length&&(s.pointNumber=s.i=i.pts[0]),_(s,o,i.pts),"funnelarea"===o.type&&(delete s.v,delete s.i),s}},22209:function(i,o,s){"use strict";var _=s(91424),F=s(7901);i.exports=function(i,o,s,N){var j=s.marker.pattern;j&&j.shape?_.pointStyle(i,s,N,o):F.fill(i,o.color)}},53581:function(i,o,s){"use strict";var _=s(71828);function format(i){return -1!==i.indexOf("e")?i.replace(/[.]?0+e/,"e"):-1!==i.indexOf(".")?i.replace(/[.]?0+$/,""):i}o.formatPiePercent=function(i,o){var s=format((100*i).toPrecision(3));return _.numSeparate(s,o)+"%"},o.formatPieValue=function(i,o){var s=format(i.toPrecision(10));return _.numSeparate(s,o)},o.getFirstFilled=function(i,o){if(Array.isArray(i))for(var s=0;s<o.length;s++){var _=i[o[s]];if(_||0===_||""===_)return _}},o.castOption=function(i,s){return Array.isArray(i)?o.getFirstFilled(i,s):i||void 0},o.getRotationAngle=function(i){return("auto"===i?0:i)*Math.PI/180}},58810:function(i,o,s){"use strict";i.exports={attributes:s(34e3),supplyDefaults:s(37434).supplyDefaults,supplyLayoutDefaults:s(92097),layoutAttributes:s(92774),calc:s(32354).calc,crossTraceCalc:s(32354).crossTraceCalc,plot:s(14575).plot,style:s(68357),styleOne:s(63463),moduleType:"trace",name:"pie",basePlotModule:s(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(i){"use strict";i.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(i,o,s){"use strict";var _=s(71828),F=s(92774);i.exports=function(i,o){function coerce(s,N){return _.coerce(i,o,F,s,N)}coerce("hiddenlabels"),coerce("piecolorway",o.colorway),coerce("extendpiecolors")}},14575:function(i,o,s){"use strict";var _=s(39898),F=s(74875),N=s(30211),j=s(7901),Z=s(91424),X=s(71828),$=X.strScale,ee=X.strTranslate,et=s(63893),er=s(72597),en=er.recordMinTextSize,ei=er.clearMinTextSize,eo=s(97313).TEXTPAD,es=s(53581),el=s(20007),ec=s(71828).isValidTextValue;function plot(i,o){var s=i._context.staticPlot,N=i._fullLayout,j=N._size;ei("pie",N),prerenderTitles(o,i),layoutAreas(o,j);var er=X.makeTraceGroups(N._pielayer,o,"trace").each(function(o){var er=_.select(this),ei=o[0],eo=ei.trace;setCoords(o),er.attr("stroke-linejoin","round"),er.each(function(){var el=_.select(this).selectAll("g.slice").data(o);el.enter().append("g").classed("slice",!0),el.exit().remove();var ec=[[[],[]],[[],[]]],eu=!1;el.each(function(F,j){if(F.hidden){_.select(this).selectAll("path,g").remove();return}F.pointNumber=F.i,F.curveNumber=eo.index,ec[F.pxmid[1]<0?0:1][F.pxmid[0]<0?0:1].push(F);var $=ei.cx,ee=ei.cy,er=_.select(this),el=er.selectAll("path.surface").data([F]);if(el.enter().append("path").classed("surface",!0).style({"pointer-events":s?"none":"all"}),er.call(attachFxHandlers,i,o),eo.pull){var ef=+es.castOption(eo.pull,F.pts)||0;ef>0&&($+=ef*F.pxmid[0],ee+=ef*F.pxmid[1])}function arc(i,o,s,_){var N=_*(o[0]-i[0]),j=_*(o[1]-i[1]);return"a"+_*ei.r+","+_*ei.r+" 0 "+F.largeArc+(s?" 1 ":" 0 ")+N+","+j}F.cxFinal=$,F.cyFinal=ee;var ed=eo.hole;if(F.v===ei.vTotal){var eh="M"+($+F.px0[0])+","+(ee+F.px0[1])+arc(F.px0,F.pxmid,!0,1)+arc(F.pxmid,F.px0,!0,1)+"Z";ed?el.attr("d","M"+($+ed*F.px0[0])+","+(ee+ed*F.px0[1])+arc(F.px0,F.pxmid,!1,ed)+arc(F.pxmid,F.px0,!1,ed)+"Z"+eh):el.attr("d",eh)}else{var ep=arc(F.px0,F.px1,!0,1);if(ed){var eg=1-ed;el.attr("d","M"+($+ed*F.px1[0])+","+(ee+ed*F.px1[1])+arc(F.px1,F.px0,!1,ed)+"l"+eg*F.px0[0]+","+eg*F.px0[1]+ep+"Z")}else el.attr("d","M"+$+","+ee+"l"+F.px0[0]+","+F.px0[1]+ep+"Z")}formatSliceLabel(i,F,ei);var em=es.castOption(eo.textposition,F.pts),ey=er.selectAll("g.slicetext").data(F.text&&"none"!==em?[0]:[]);ey.enter().append("g").classed("slicetext",!0),ey.exit().remove(),ey.each(function(){var s,er=X.ensureSingle(_.select(this),"text","",function(i){i.attr("data-notex",1)}),es=X.ensureUniformFontSize(i,"outside"===em?determineOutsideTextFont(eo,F,N.font):determineInsideTextFont(eo,F,N.font));er.text(F.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(Z.font,es).call(et.convertToTspans,i);var el=Z.bBox(er.node());if("outside"===em)s=transformOutsideText(el,F);else if(s=transformInsideText(el,F,ei),"auto"===em&&s.scale<1){var ec=X.ensureUniformFontSize(i,eo.outsidetextfont);er.call(Z.font,ec),s=transformOutsideText(el=Z.bBox(er.node()),F)}var ef=s.textPosAngle,ed=void 0===ef?F.pxmid:getCoords(ei.r,ef);if(s.targetX=$+ed[0]*s.rCenter+(s.x||0),s.targetY=ee+ed[1]*s.rCenter+(s.y||0),computeTransform(s,el),s.outside){var eh=s.targetY;F.yLabelMin=eh-el.height/2,F.yLabelMid=eh,F.yLabelMax=eh+el.height/2,F.labelExtraX=0,F.labelExtraY=0,eu=!0}s.fontSize=es.size,en(eo.type,s,N),o[j].transform=s,X.setTransormAndDisplay(er,s)})});var ef=_.select(this).selectAll("g.titletext").data(eo.title.text?[0]:[]);if(ef.enter().append("g").classed("titletext",!0),ef.exit().remove(),ef.each(function(){var o,s=X.ensureSingle(_.select(this),"text","",function(i){i.attr("data-notex",1)}),F=eo.title.text;eo._meta&&(F=X.templateString(F,eo._meta)),s.text(F).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(Z.font,eo.title.font).call(et.convertToTspans,i),o="middle center"===eo.title.position?positionTitleInside(ei):positionTitleOutside(ei,j),s.attr("transform",ee(o.x,o.y)+$(Math.min(1,o.scale))+ee(o.tx,o.ty))}),eu&&scootLabels(ec,eo),plotTextLines(el,eo),eu&&eo.automargin){var ed=Z.bBox(er.node()),eh=eo.domain,ep=j.w*(eh.x[1]-eh.x[0]),eg=j.h*(eh.y[1]-eh.y[0]),em=(.5*ep-ei.r)/j.w,ey=(.5*eg-ei.r)/j.h;F.autoMargin(i,"pie."+eo.uid+".automargin",{xl:eh.x[0]-em,xr:eh.x[1]+em,yb:eh.y[0]-ey,yt:eh.y[1]+ey,l:Math.max(ei.cx-ei.r-ed.left,0),r:Math.max(ed.right-(ei.cx+ei.r),0),b:Math.max(ed.bottom-(ei.cy+ei.r),0),t:Math.max(ei.cy-ei.r-ed.top,0),pad:5})}})});setTimeout(function(){er.selectAll("tspan").each(function(){var i=_.select(this);i.attr("dy")&&i.attr("dy",i.attr("dy"))})},0)}function plotTextLines(i,o){i.each(function(i){var s=_.select(this);if(!i.labelExtraX&&!i.labelExtraY){s.select("path.textline").remove();return}var F=s.select("g.slicetext text");i.transform.targetX+=i.labelExtraX,i.transform.targetY+=i.labelExtraY,X.setTransormAndDisplay(F,i.transform);var N=i.cxFinal+i.pxmid[0],Z="M"+N+","+(i.cyFinal+i.pxmid[1]),$=(i.yLabelMax-i.yLabelMin)*(i.pxmid[0]<0?-1:1)/4;if(i.labelExtraX){var ee=i.labelExtraX*i.pxmid[1]/i.pxmid[0],et=i.yLabelMid+i.labelExtraY-(i.cyFinal+i.pxmid[1]);Math.abs(ee)>Math.abs(et)?Z+="l"+et*i.pxmid[0]/i.pxmid[1]+","+et+"H"+(N+i.labelExtraX+$):Z+="l"+i.labelExtraX+","+ee+"v"+(et-ee)+"h"+$}else Z+="V"+(i.yLabelMid+i.labelExtraY)+"h"+$;X.ensureSingle(s,"path","textline").call(j.stroke,o.outsidetextfont.color).attr({"stroke-width":Math.min(2,o.outsidetextfont.size/8),d:Z,fill:"none"})})}function attachFxHandlers(i,o,s){var F=s[0],j=F.cx,Z=F.cy,$=F.trace,ee="funnelarea"===$.type;"_hasHoverLabel"in $||($._hasHoverLabel=!1),"_hasHoverEvent"in $||($._hasHoverEvent=!1),i.on("mouseover",function(i){var s=o._fullLayout,et=o._fullData[$.index];if(!o._dragging&&!1!==s.hovermode){var er=et.hoverinfo;if(Array.isArray(er)&&(er=N.castHoverinfo({hoverinfo:[es.castOption(er,i.pts)],_module:$._module},s,0)),"all"===er&&(er="label+text+value+percent+name"),et.hovertemplate||"none"!==er&&"skip"!==er&&er){var en=i.rInscribed||0,ei=j+i.pxmid[0]*(1-en),eo=Z+i.pxmid[1]*(1-en),ec=s.separators,eu=[];if(er&&-1!==er.indexOf("label")&&eu.push(i.label),i.text=es.castOption(et.hovertext||et.text,i.pts),er&&-1!==er.indexOf("text")){var ef=i.text;X.isValidTextValue(ef)&&eu.push(ef)}i.value=i.v,i.valueLabel=es.formatPieValue(i.v,ec),er&&-1!==er.indexOf("value")&&eu.push(i.valueLabel),i.percent=i.v/F.vTotal,i.percentLabel=es.formatPiePercent(i.percent,ec),er&&-1!==er.indexOf("percent")&&eu.push(i.percentLabel);var ed=et.hoverlabel,eh=ed.font;N.loneHover({trace:$,x0:ei-en*F.r,x1:ei+en*F.r,y:eo,_x0:ee?j+i.TL[0]:ei-en*F.r,_x1:ee?j+i.TR[0]:ei+en*F.r,_y0:ee?Z+i.TL[1]:eo-en*F.r,_y1:ee?Z+i.BL[1]:eo+en*F.r,text:eu.join("<br>"),name:et.hovertemplate||-1!==er.indexOf("name")?et.name:void 0,idealAlign:i.pxmid[0]<0?"left":"right",color:es.castOption(ed.bgcolor,i.pts)||i.color,borderColor:es.castOption(ed.bordercolor,i.pts),fontFamily:es.castOption(eh.family,i.pts),fontSize:es.castOption(eh.size,i.pts),fontColor:es.castOption(eh.color,i.pts),nameLength:es.castOption(ed.namelength,i.pts),textAlign:es.castOption(ed.align,i.pts),hovertemplate:es.castOption(et.hovertemplate,i.pts),hovertemplateLabels:i,eventData:[el(i,et)]},{container:s._hoverlayer.node(),outerContainer:s._paper.node(),gd:o,inOut_bbox:[]}),i.bbox=[][0],$._hasHoverLabel=!0}$._hasHoverEvent=!0,o.emit("plotly_hover",{points:[el(i,et)],event:_.event})}}),i.on("mouseout",function(i){var s=o._fullLayout,F=o._fullData[$.index],j=_.select(this).datum();$._hasHoverEvent&&(i.originalEvent=_.event,o.emit("plotly_unhover",{points:[el(j,F)],event:_.event}),$._hasHoverEvent=!1),$._hasHoverLabel&&(N.loneUnhover(s._hoverlayer.node()),$._hasHoverLabel=!1)}),i.on("click",function(i){var s=o._fullLayout,F=o._fullData[$.index];o._dragging||!1===s.hovermode||(o._hoverdata=[el(i,F)],N.click(o,_.event))})}function determineOutsideTextFont(i,o,s){return{color:es.castOption(i.outsidetextfont.color,o.pts)||es.castOption(i.textfont.color,o.pts)||s.color,family:es.castOption(i.outsidetextfont.family,o.pts)||es.castOption(i.textfont.family,o.pts)||s.family,size:es.castOption(i.outsidetextfont.size,o.pts)||es.castOption(i.textfont.size,o.pts)||s.size}}function determineInsideTextFont(i,o,s){var _=es.castOption(i.insidetextfont.color,o.pts);!_&&i._input.textfont&&(_=es.castOption(i._input.textfont.color,o.pts));var F=es.castOption(i.insidetextfont.family,o.pts)||es.castOption(i.textfont.family,o.pts)||s.family,N=es.castOption(i.insidetextfont.size,o.pts)||es.castOption(i.textfont.size,o.pts)||s.size;return{color:_||j.contrast(o.color),family:F,size:N}}function prerenderTitles(i,o){for(var s,_,F=0;F<i.length;F++)if((_=(s=i[F][0]).trace).title.text){var N=_.title.text;_._meta&&(N=X.templateString(N,_._meta));var j=Z.tester.append("text").attr("data-notex",1).text(N).call(Z.font,_.title.font).call(et.convertToTspans,o),$=Z.bBox(j.node(),!0);s.titleBox={width:$.width,height:$.height},j.remove()}}function transformInsideText(i,o,s){var _=s.r||o.rpx1,F=o.rInscribed;if(o.startangle===o.stopangle)return{rCenter:1-F,scale:0,rotate:0,textPosAngle:0};var N=o.ring,j=1===N&&Math.abs(o.startangle-o.stopangle)===2*Math.PI,Z=o.halfangle,X=o.midangle,$=s.trace.insidetextorientation,ee="horizontal"===$,et="tangential"===$,er="radial"===$,en="auto"===$,ei=[];if(!en){var eo,es,considerCrossing=function(s,F){if(isCrossing(o,s)){var j=Math.abs(s-o.startangle),Z=Math.abs(s-o.stopangle),X=j<Z?j:Z;(eo="tan"===F?calcTanTransform(i,_,N,X,0):calcRadTransform(i,_,N,X,Math.PI/2)).textPosAngle=s,ei.push(eo)}};if(ee||et){for(es=4;es>=-4;es-=2)considerCrossing(Math.PI*es,"tan");for(es=4;es>=-4;es-=2)considerCrossing(Math.PI*(es+1),"tan")}if(ee||er){for(es=4;es>=-4;es-=2)considerCrossing(Math.PI*(es+1.5),"rad");for(es=4;es>=-4;es-=2)considerCrossing(Math.PI*(es+.5),"rad")}}if(j||en||ee){if((eo={scale:F*_*2/Math.sqrt(i.width*i.width+i.height*i.height),rCenter:1-F,rotate:0}).textPosAngle=(o.startangle+o.stopangle)/2,eo.scale>=1)return eo;ei.push(eo)}(en||er)&&((eo=calcRadTransform(i,_,N,Z,X)).textPosAngle=(o.startangle+o.stopangle)/2,ei.push(eo)),(en||et)&&((eo=calcTanTransform(i,_,N,Z,X)).textPosAngle=(o.startangle+o.stopangle)/2,ei.push(eo));for(var el=0,ec=0,eu=0;eu<ei.length;eu++){var ef=ei[eu].scale;if(ec<ef&&(ec=ef,el=eu),!en&&ec>=1)break}return ei[el]}function isCrossing(i,o){var s=i.startangle,_=i.stopangle;return s>o&&o>_||s<o&&o<_}function calcRadTransform(i,o,s,_,F){o=Math.max(0,o-2*eo);var N=i.width/i.height,j=calcMaxHalfSize(N,_,o,s);return{scale:2*j/i.height,rCenter:calcRCenter(N,j/o),rotate:calcRotate(F)}}function calcTanTransform(i,o,s,_,F){o=Math.max(0,o-2*eo);var N=i.height/i.width,j=calcMaxHalfSize(N,_,o,s);return{scale:2*j/i.width,rCenter:calcRCenter(N,j/o),rotate:calcRotate(F+Math.PI/2)}}function calcRCenter(i,o){return Math.cos(o)-i*o}function calcRotate(i){return(180/Math.PI*i+720)%180-90}function calcMaxHalfSize(i,o,s,_){var F=i+1/(2*Math.tan(o));return s*Math.min(1/(Math.sqrt(F*F+.5)+F),_/(Math.sqrt(i*i+_/2)+i))}function getInscribedRadiusFraction(i,o){return i.v!==o.vTotal||o.trace.hole?Math.min(1/(1+1/Math.sin(i.halfangle)),i.ring/2):1}function transformOutsideText(i,o){var s=o.pxmid[0],_=o.pxmid[1],F=i.width/2,N=i.height/2;return s<0&&(F*=-1),_<0&&(N*=-1),{scale:1,rCenter:1,rotate:0,x:F+Math.abs(N)*(F>0?1:-1)/2,y:N/(1+s*s/(_*_)),outside:!0}}function positionTitleInside(i){var o=Math.sqrt(i.titleBox.width*i.titleBox.width+i.titleBox.height*i.titleBox.height);return{x:i.cx,y:i.cy,scale:i.trace.hole*i.r*2/o,tx:0,ty:-i.titleBox.height/2+i.trace.title.font.size}}function positionTitleOutside(i,o){var s,_=1,F=1,N=i.trace,j={x:i.cx,y:i.cy},Z={tx:0,ty:0};Z.ty+=N.title.font.size,s=getMaxPull(N),-1!==N.title.position.indexOf("top")?(j.y-=(1+s)*i.r,Z.ty-=i.titleBox.height):-1!==N.title.position.indexOf("bottom")&&(j.y+=(1+s)*i.r);var X=applyAspectRatio(i.r,i.trace.aspectratio),$=o.w*(N.domain.x[1]-N.domain.x[0])/2;return -1!==N.title.position.indexOf("left")?($+=X,j.x-=(1+s)*X,Z.tx+=i.titleBox.width/2):-1!==N.title.position.indexOf("center")?$*=2:-1!==N.title.position.indexOf("right")&&($+=X,j.x+=(1+s)*X,Z.tx-=i.titleBox.width/2),_=$/i.titleBox.width,F=getTitleSpace(i,o)/i.titleBox.height,{x:j.x,y:j.y,scale:Math.min(_,F),tx:Z.tx,ty:Z.ty}}function applyAspectRatio(i,o){return i/(void 0===o?1:o)}function getTitleSpace(i,o){var s=i.trace,_=o.h*(s.domain.y[1]-s.domain.y[0]);return Math.min(i.titleBox.height,_/2)}function getMaxPull(i){var o,s=i.pull;if(!s)return 0;if(Array.isArray(s))for(o=0,s=0;o<i.pull.length;o++)i.pull[o]>s&&(s=i.pull[o]);return s}function scootLabels(i,o){var s,_,F,N,j,Z,X,$,ee,et,er,en,ei;function topFirst(i,o){return i.pxmid[1]-o.pxmid[1]}function bottomFirst(i,o){return o.pxmid[1]-i.pxmid[1]}function scootOneLabel(i,s){s||(s={});var F,$,ee,er,en=s.labelExtraY+(_?s.yLabelMax:s.yLabelMin),ei=_?i.yLabelMin:i.yLabelMax,eo=_?i.yLabelMax:i.yLabelMin,el=i.cyFinal+j(i.px0[1],i.px1[1]),ec=en-ei;if(ec*X>0&&(i.labelExtraY=ec),Array.isArray(o.pull))for($=0;$<et.length;$++)!((ee=et[$])===i||(es.castOption(o.pull,i.pts)||0)>=(es.castOption(o.pull,ee.pts)||0))&&((i.pxmid[1]-ee.pxmid[1])*X>0?(ec=ee.cyFinal+j(ee.px0[1],ee.px1[1])-ei-i.labelExtraY)*X>0&&(i.labelExtraY+=ec):(eo+i.labelExtraY-el)*X>0&&(F=3*Z*Math.abs($-et.indexOf(i)),(er=ee.cxFinal+N(ee.px0[0],ee.px1[0])+F-(i.cxFinal+i.pxmid[0])-i.labelExtraX)*Z>0&&(i.labelExtraX+=er)))}for(_=0;_<2;_++)for(s=0,F=_?topFirst:bottomFirst,j=_?Math.max:Math.min,X=_?1:-1;s<2;s++){for(N=s?Math.max:Math.min,Z=s?1:-1,($=i[_][s]).sort(F),et=(ee=i[1-_][s]).concat($),en=[],er=0;er<$.length;er++)void 0!==$[er].yLabelMid&&en.push($[er]);for(er=0,ei=!1;_&&er<ee.length;er++)if(void 0!==ee[er].yLabelMid){ei=ee[er];break}for(er=0;er<en.length;er++){var eo=er&&en[er-1];ei&&!er&&(eo=ei),scootOneLabel(en[er],eo)}}}function layoutAreas(i,o){for(var s=[],_=0;_<i.length;_++){var F=i[_][0],N=F.trace,j=N.domain,Z=o.w*(j.x[1]-j.x[0]),X=o.h*(j.y[1]-j.y[0]);N.title.text&&"middle center"!==N.title.position&&(X-=getTitleSpace(F,o));var $=Z/2,ee=X/2;"funnelarea"!==N.type||N.scalegroup||(ee/=N.aspectratio),F.r=Math.min($,ee)/(1+getMaxPull(N)),F.cx=o.l+o.w*(N.domain.x[1]+N.domain.x[0])/2,F.cy=o.t+o.h*(1-N.domain.y[0])-X/2,N.title.text&&-1!==N.title.position.indexOf("bottom")&&(F.cy-=getTitleSpace(F,o)),N.scalegroup&&-1===s.indexOf(N.scalegroup)&&s.push(N.scalegroup)}groupScale(i,s)}function groupScale(i,o){for(var s,_,F,N=0;N<o.length;N++){var j,Z,X,$=1/0,ee=o[N];for(_=0;_<i.length;_++)(F=(s=i[_][0]).trace).scalegroup===ee&&("pie"===F.type?j=s.r*s.r:"funnelarea"===F.type&&(F.aspectratio>1?X=(Z=s.r)/F.aspectratio:Z=(X=s.r)*F.aspectratio,Z*=(1+F.baseratio)/2,j=Z*X),$=Math.min($,j/s.vTotal));for(_=0;_<i.length;_++)if((F=(s=i[_][0]).trace).scalegroup===ee){var et=$*s.vTotal;"funnelarea"===F.type&&(et/=(1+F.baseratio)/2,et/=F.aspectratio),s.r=Math.sqrt(et)}}}function setCoords(i){var o,s,_,F=i[0],N=F.r,j=F.trace,Z=es.getRotationAngle(j.rotation),X=2*Math.PI/F.vTotal,$="px0",ee="px1";if("counterclockwise"===j.direction){for(o=0;o<i.length&&i[o].hidden;o++);if(o===i.length)return;Z+=X*i[o].v,X*=-1,$="px1",ee="px0"}for(o=0,_=getCoords(N,Z);o<i.length;o++)(s=i[o]).hidden||(s[$]=_,s.startangle=Z,Z+=X*s.v/2,s.pxmid=getCoords(N,Z),s.midangle=Z,Z+=X*s.v/2,_=getCoords(N,Z),s.stopangle=Z,s[ee]=_,s.largeArc=s.v>F.vTotal/2?1:0,s.halfangle=Math.PI*Math.min(s.v/F.vTotal,.5),s.ring=1-j.hole,s.rInscribed=getInscribedRadiusFraction(s,F))}function getCoords(i,o){return[i*Math.sin(o),-i*Math.cos(o)]}function formatSliceLabel(i,o,s){var _=i._fullLayout,F=s.trace,N=F.texttemplate,j=F.textinfo;if(!N&&j&&"none"!==j){var Z,$=j.split("+"),hasFlag=function(i){return -1!==$.indexOf(i)},ee=hasFlag("label"),et=hasFlag("text"),er=hasFlag("value"),en=hasFlag("percent"),ei=_.separators;if(Z=ee?[o.label]:[],et){var eo=es.getFirstFilled(F.text,o.pts);ec(eo)&&Z.push(eo)}er&&Z.push(es.formatPieValue(o.v,ei)),en&&Z.push(es.formatPiePercent(o.v/s.vTotal,ei)),o.text=Z.join("<br>")}function makeTemplateVariables(i){return{label:i.label,value:i.v,valueLabel:es.formatPieValue(i.v,_.separators),percent:i.v/s.vTotal,percentLabel:es.formatPiePercent(i.v/s.vTotal,_.separators),color:i.color,text:i.text,customdata:X.castOption(F,i.i,"customdata")}}if(N){var el=X.castOption(F,o.i,"texttemplate");if(el){var eu=makeTemplateVariables(o),ef=es.getFirstFilled(F.text,o.pts);(ec(ef)||""===ef)&&(eu.text=ef),o.text=X.texttemplateString(el,eu,i._fullLayout._d3locale,eu,F._meta||{})}else o.text=""}}function computeTransform(i,o){var s=i.rotate*Math.PI/180,_=Math.cos(s),F=Math.sin(s),N=(o.left+o.right)/2,j=(o.top+o.bottom)/2;i.textX=N*_-j*F,i.textY=N*F+j*_,i.noCenter=!0}i.exports={plot:plot,formatSliceLabel:formatSliceLabel,transformInsideText:transformInsideText,determineInsideTextFont:determineInsideTextFont,positionTitleOutside:positionTitleOutside,prerenderTitles:prerenderTitles,layoutAreas:layoutAreas,attachFxHandlers:attachFxHandlers,computeTransform:computeTransform}},68357:function(i,o,s){"use strict";var _=s(39898),F=s(63463),N=s(72597).resizeText;i.exports=function(i){var o=i._fullLayout._pielayer.selectAll(".trace");N(i,o,"pie"),o.each(function(o){var s=o[0].trace,N=_.select(this);N.style({opacity:s.opacity}),N.selectAll("path.surface").each(function(o){_.select(this).call(F,o,s,i)})})}},63463:function(i,o,s){"use strict";var _=s(7901),F=s(53581).castOption,N=s(22209);i.exports=function(i,o,s,j){var Z=s.marker.line,X=F(Z.color,o.pts)||_.defaultLine,$=F(Z.width,o.pts)||0;i.call(N,o,s,j).style("stroke-width",$).call(_.stroke,X)}},10959:function(i,o,s){"use strict";var _=s(82196);i.exports={x:_.x,y:_.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:_.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(i,o,s){"use strict";var _=s(9330).gl_pointcloud2d,F=s(78614),N=s(71739).findExtremes,j=s(34603);function Pointcloud(i,o){this.scene=i,this.uid=o,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=_(i.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var Z=Pointcloud.prototype;function createPointcloud(i,o){var s=new Pointcloud(i,o.uid);return s.update(o),s}Z.handlePick=function(i){var o=this.idToIndex[i.pointId];return{trace:this,dataCoord:i.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*o],this.pickXYData[2*o+1]]:[this.pickXData[o],this.pickYData[o]],textLabel:Array.isArray(this.textLabels)?this.textLabels[o]:this.textLabels,color:this.color,name:this.name,pointIndex:o,hoverinfo:this.hoverinfo}},Z.update=function(i){this.index=i.index,this.textLabels=i.text,this.name=i.name,this.hoverinfo=i.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(i),this.color=j(i,{})},Z.updateFast=function(i){var o,s,_,j,Z,X,$=this.xData=this.pickXData=i.x,ee=this.yData=this.pickYData=i.y,et=this.pickXYData=i.xy,er=i.xbounds&&i.ybounds,en=i.indices,ei=this.bounds;if(et){if(_=et,o=et.length>>>1,er)ei[0]=i.xbounds[0],ei[2]=i.xbounds[1],ei[1]=i.ybounds[0],ei[3]=i.ybounds[1];else for(X=0;X<o;X++)j=_[2*X],Z=_[2*X+1],j<ei[0]&&(ei[0]=j),j>ei[2]&&(ei[2]=j),Z<ei[1]&&(ei[1]=Z),Z>ei[3]&&(ei[3]=Z);if(en)s=en;else for(X=0,s=new Int32Array(o);X<o;X++)s[X]=X}else for(X=0,o=$.length,_=new Float32Array(2*o),s=new Int32Array(o);X<o;X++)j=$[X],Z=ee[X],s[X]=X,_[2*X]=j,_[2*X+1]=Z,j<ei[0]&&(ei[0]=j),j>ei[2]&&(ei[2]=j),Z<ei[1]&&(ei[1]=Z),Z>ei[3]&&(ei[3]=Z);this.idToIndex=s,this.pointcloudOptions.idToIndex=s,this.pointcloudOptions.positions=_;var eo=F(i.marker.color),es=F(i.marker.border.color),el=i.opacity*i.marker.opacity;eo[3]*=el,this.pointcloudOptions.color=eo;var ec=i.marker.blend;null===ec&&(ec=$.length<100||ee.length<100),this.pointcloudOptions.blend=ec,es[3]*=el,this.pointcloudOptions.borderColor=es;var eu=i.marker.sizemin,ef=Math.max(i.marker.sizemax,i.marker.sizemin);this.pointcloudOptions.sizeMin=eu,this.pointcloudOptions.sizeMax=ef,this.pointcloudOptions.areaRatio=i.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var ed=this.scene.xaxis,eh=this.scene.yaxis,ep=ef/2||.5;i._extremes[ed._id]=N(ed,[ei[0],ei[2]],{ppad:ep}),i._extremes[eh._id]=N(eh,[ei[1],ei[3]],{ppad:ep})},Z.dispose=function(){this.pointcloud.dispose()},i.exports=createPointcloud},33876:function(i,o,s){"use strict";var _=s(71828),F=s(10959);i.exports=function(i,o,s){function coerce(s,N){return _.coerce(i,o,F,s,N)}coerce("x"),coerce("y"),coerce("xbounds"),coerce("ybounds"),i.xy&&i.xy instanceof Float32Array&&(o.xy=i.xy),i.indices&&i.indices instanceof Int32Array&&(o.indices=i.indices),coerce("text"),coerce("marker.color",s),coerce("marker.opacity"),coerce("marker.blend"),coerce("marker.sizemin"),coerce("marker.sizemax"),coerce("marker.border.color",s),coerce("marker.border.arearatio"),o._length=null}},20593:function(i,o,s){"use strict";i.exports={attributes:s(10959),supplyDefaults:s(33876),calc:s(36563),plot:s(42743),moduleType:"trace",name:"pointcloud",basePlotModule:s(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(i,o,s){"use strict";var _=s(41940),F=s(9012),N=s(22399),j=s(77914),Z=s(27670).Y,X=s(5386).fF,$=s(50693),ee=s(44467).templatedArray,et=s(12663).descriptionOnlyNumbers,er=s(1426).extendFlat,en=s(30962).overrideAll;(i.exports=en({hoverinfo:er({},F.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:j.hoverlabel,domain:Z({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:et("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:_({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:N.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:j.hoverlabel,hovertemplate:X({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:N.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:j.hoverlabel,hovertemplate:X({},{keys:["value","label"]}),colorscales:ee("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:er($().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(i,o,s){"use strict";var _=s(30962).overrideAll,F=s(27659).a0,N=s(60436),j=s(528),Z=s(6964),X=s(28569),$=s(47322).prepSelect,ee=s(71828),et=s(73972),er="sankey";function subplotUpdateFx(i,o){var s=i._fullData[o],_=i._fullLayout,F=_.dragmode,N="pan"===_.dragmode?"move":"crosshair",j=s._bgRect;if(j&&"pan"!==F&&"zoom"!==F){Z(j,N);var er={_id:"x",c2p:ee.identity,_offset:s._sankey.translateX,_length:s._sankey.width},en={_id:"y",c2p:ee.identity,_offset:s._sankey.translateY,_length:s._sankey.height},ei={gd:i,element:j.node(),plotinfo:{id:o,xaxis:er,yaxis:en,fillRangeItems:ee.noop},subplot:o,xaxes:[er],yaxes:[en],doneFnCompleted:function(s){var _,F=i._fullData[o],N=F.node.groups.slice(),j=[];function findNode(i){for(var o=F._sankey.graph.nodes,s=0;s<o.length;s++)if(o[s].pointNumber===i)return o[s]}for(var Z=0;Z<s.length;Z++){var X=findNode(s[Z].pointNumber);if(X){if(X.group){for(var $=0;$<X.childrenNodes.length;$++)j.push(X.childrenNodes[$].pointNumber);N[X.pointNumber-F.node._count]=!1}else j.push(X.pointNumber)}}_=N.filter(Boolean).concat([j]),et.call("_guiRestyle",i,{"node.groups":[_]},o)}};ei.prepFn=function(i,o,s){$(i,o,s,ei,F)},X.init(ei)}}o.name=er,o.baseLayoutAttrOverrides=_({hoverlabel:j.hoverlabel},"plot","nested"),o.plot=function(i){var s=F(i.calcdata,er)[0];N(i,s),o.updateFx(i)},o.clean=function(i,o,s,_){var F=_._has&&_._has(er),N=o._has&&o._has(er);F&&!N&&(_._paperdiv.selectAll(".sankey").remove(),_._paperdiv.selectAll(".bgsankey").remove())},o.updateFx=function(i){for(var o=0;o<i._fullData.length;o++)subplotUpdateFx(i,o)}},92930:function(i,o,s){"use strict";var _=s(68664),F=s(71828),N=s(28984).wrap,j=F.isArrayOrTypedArray,Z=F.isIndex,X=s(21081);function convertToD3Sankey(i){var o,s,_=i.node,N=i.link,$=[],ee=j(N.color),et=j(N.customdata),er={},en={},ei=N.colorscales.length;for(o=0;o<ei;o++){var eo=N.colorscales[o],es=X.extractScale(eo,{cLetter:"c"}),el=X.makeColorScaleFunc(es);en[eo.label]=el}var ec=0;for(o=0;o<N.value.length;o++)N.source[o]>ec&&(ec=N.source[o]),N.target[o]>ec&&(ec=N.target[o]);var eu=ec+1;i.node._count=eu;var ef=i.node.groups,ed={};for(o=0;o<ef.length;o++){var eh=ef[o];for(s=0;s<eh.length;s++){var ep=eh[s],eg=eu+o;ed.hasOwnProperty(ep)?F.warn("Node "+ep+" is already part of a group."):ed[ep]=eg}}var em={source:[],target:[]};for(o=0;o<N.value.length;o++){var ey=N.value[o],ev=N.source[o],ex=N.target[o];if(!(!(ey>0&&Z(ev,eu)&&Z(ex,eu))||ed.hasOwnProperty(ev)&&ed.hasOwnProperty(ex)&&ed[ev]===ed[ex])){ed.hasOwnProperty(ex)&&(ex=ed[ex]),ed.hasOwnProperty(ev)&&(ev=ed[ev]),ex=+ex,er[ev=+ev]=er[ex]=!0;var e_="";N.label&&N.label[o]&&(e_=N.label[o]);var ew=null;e_&&en.hasOwnProperty(e_)&&(ew=en[e_]),$.push({pointNumber:o,label:e_,color:ee?N.color[o]:N.color,customdata:et?N.customdata[o]:N.customdata,concentrationscale:ew,source:ev,target:ex,value:+ey}),em.source.push(ev),em.target.push(ex)}}var eT=eu+ef.length,ek=j(_.color),eA=j(_.customdata),eS=[];for(o=0;o<eT;o++)if(er[o]){var eM=_.label[o];eS.push({group:o>eu-1,childrenNodes:[],pointNumber:o,label:eM,color:ek?_.color[o]:_.color,customdata:eA?_.customdata[o]:_.customdata})}var eC=!1;return circularityPresent(eT,em.source,em.target)&&(eC=!0),{circular:eC,links:$,nodes:eS,groups:ef,groupLookup:ed}}function circularityPresent(i,o,s){for(var N=F.init2dArray(i,0),j=0;j<Math.min(o.length,s.length);j++)if(F.isIndex(o[j],i)&&F.isIndex(s[j],i)){if(o[j]===s[j])return!0;N[o[j]].push(s[j])}return _(N).components.some(function(i){return i.length>1})}i.exports=function(i,o){var s=convertToD3Sankey(o);return N({circular:s.circular,_nodes:s.nodes,_links:s.links,_groups:s.groups,_groupLookup:s.groupLookup})}},85247:function(i){"use strict";i.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(i,o,s){"use strict";var _=s(71828),F=s(39953),N=s(7901),j=s(84267),Z=s(27670).c,X=s(38048),$=s(44467),ee=s(85501);function concentrationscalesDefaults(i,o){function coerce(s,N){return _.coerce(i,o,F.link.colorscales,s,N)}coerce("label"),coerce("cmin"),coerce("cmax"),coerce("colorscale")}i.exports=function(i,o,s,et){function coerce(s,N){return _.coerce(i,o,F,s,N)}var er,en=_.extendDeep(et.hoverlabel,i.hoverlabel),ei=i.node,eo=$.newContainer(o,"node");function coerceNode(i,o){return _.coerce(ei,eo,F.node,i,o)}coerceNode("label"),coerceNode("groups"),coerceNode("x"),coerceNode("y"),coerceNode("pad"),coerceNode("thickness"),coerceNode("line.color"),coerceNode("line.width"),coerceNode("hoverinfo",i.hoverinfo),X(ei,eo,coerceNode,en),coerceNode("hovertemplate");var es=et.colorway;coerceNode("color",eo.label.map(function(i,o){return N.addOpacity(es[o%es.length],.8)})),coerceNode("customdata");var el=i.link||{},ec=$.newContainer(o,"link");function coerceLink(i,o){return _.coerce(el,ec,F.link,i,o)}coerceLink("label"),coerceLink("arrowlen"),coerceLink("source"),coerceLink("target"),coerceLink("value"),coerceLink("line.color"),coerceLink("line.width"),coerceLink("hoverinfo",i.hoverinfo),X(el,ec,coerceLink,en),coerceLink("hovertemplate");var eu=.333>j(et.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";coerceLink("color",_.repeat(eu,ec.value.length)),coerceLink("customdata"),ee(el,ec,{name:"colorscales",handleItemDefaults:concentrationscalesDefaults}),Z(o,et,coerce),coerce("orientation"),coerce("valueformat"),coerce("valuesuffix"),eo.x.length&&eo.y.length&&(er="freeform"),coerce("arrangement",er),_.coerceFont(coerce,"textfont",_.extendFlat({},et.font)),o._length=null}},29396:function(i,o,s){"use strict";i.exports={attributes:s(39953),supplyDefaults:s(26857),calc:s(92930),plot:s(60436),moduleType:"trace",name:"sankey",basePlotModule:s(75536),selectPoints:s(84564),categories:["noOpacity"],meta:{}}},60436:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=F.numberFormat,j=s(3393),Z=s(30211),X=s(7901),$=s(85247).cn,ee=F._;function renderableValuePresent(i){return""!==i}function ownTrace(i,o){return i.filter(function(i){return i.key===o.traceId})}function makeTranslucent(i,o){_.select(i).select("path").style("fill-opacity",o),_.select(i).select("rect").style("fill-opacity",o)}function makeTextContrasty(i){_.select(i).select("text.name").style("fill","black")}function relatedLinks(i){return function(o){return -1!==i.node.sourceLinks.indexOf(o.link)||-1!==i.node.targetLinks.indexOf(o.link)}}function relatedNodes(i){return function(o){return -1!==o.node.sourceLinks.indexOf(i.link)||-1!==o.node.targetLinks.indexOf(i.link)}}function nodeHoveredStyle(i,o,s){o&&s&&ownTrace(s,o).selectAll("."+$.sankeyLink).filter(relatedLinks(o)).call(linkHoveredStyle.bind(0,o,s,!1))}function nodeNonHoveredStyle(i,o,s){o&&s&&ownTrace(s,o).selectAll("."+$.sankeyLink).filter(relatedLinks(o)).call(linkNonHoveredStyle.bind(0,o,s,!1))}function linkHoveredStyle(i,o,s,_){var F=_.datum().link.label;_.style("fill-opacity",function(i){if(!i.link.concentrationscale)return .4}),F&&ownTrace(o,i).selectAll("."+$.sankeyLink).filter(function(i){return i.link.label===F}).style("fill-opacity",function(i){if(!i.link.concentrationscale)return .4}),s&&ownTrace(o,i).selectAll("."+$.sankeyNode).filter(relatedNodes(i)).call(nodeHoveredStyle)}function linkNonHoveredStyle(i,o,s,_){var F=_.datum().link.label;_.style("fill-opacity",function(i){return i.tinyColorAlpha}),F&&ownTrace(o,i).selectAll("."+$.sankeyLink).filter(function(i){return i.link.label===F}).style("fill-opacity",function(i){return i.tinyColorAlpha}),s&&ownTrace(o,i).selectAll($.sankeyNode).filter(relatedNodes(i)).call(nodeNonHoveredStyle)}function castHoverOption(i,o){var s=i.hoverlabel||{},_=F.nestedProperty(s,o).get();return!Array.isArray(_)&&_}i.exports=function(i,o){for(var s=i._fullLayout,F=s._paper,et=s._size,er=0;er<i._fullData.length;er++)if(i._fullData[er].visible&&i._fullData[er].type===$.sankey&&!i._fullData[er]._viewInitial){var en=i._fullData[er].node;i._fullData[er]._viewInitial={node:{groups:en.groups.slice(),x:en.x.slice(),y:en.y.slice()}}}var ei=ee(i,"source:")+" ",eo=ee(i,"target:")+" ",es=ee(i,"concentration:")+" ",el=ee(i,"incoming flow count:")+" ",ec=ee(i,"outgoing flow count:")+" ";j(i,F,o,{width:et.w,height:et.h,margin:{t:et.t,r:et.r,b:et.b,l:et.l}},{linkEvents:{hover:function(o,s,F){!1!==i._fullLayout.hovermode&&(_.select(o).call(linkHoveredStyle.bind(0,s,F,!0)),"skip"!==s.link.trace.link.hoverinfo&&(s.link.fullData=s.link.trace,i.emit("plotly_hover",{event:_.event,points:[s.link]})))},follow:function(o,F){if(!1!==i._fullLayout.hovermode){var j=F.link.trace.link;if("none"!==j.hoverinfo&&"skip"!==j.hoverinfo){for(var $=[],ee=0,et=0;et<F.flow.links.length;et++){var er=F.flow.links[et];if("closest"!==i._fullLayout.hovermode||F.link.pointNumber===er.pointNumber){F.link.pointNumber===er.pointNumber&&(ee=et),er.fullData=er.trace,j=F.link.trace.link;var en=hoverCenterPosition(er),el={valueLabel:N(F.valueFormat)(er.value)+F.valueSuffix};$.push({x:en[0],y:en[1],name:el.valueLabel,text:[er.label||"",ei+er.source.label,eo+er.target.label,er.concentrationscale?es+N("%0.2f")(er.flow.labelConcentration):""].filter(renderableValuePresent).join("<br>"),color:castHoverOption(j,"bgcolor")||X.addOpacity(er.color,1),borderColor:castHoverOption(j,"bordercolor"),fontFamily:castHoverOption(j,"font.family"),fontSize:castHoverOption(j,"font.size"),fontColor:castHoverOption(j,"font.color"),nameLength:castHoverOption(j,"namelength"),textAlign:castHoverOption(j,"align"),idealAlign:_.event.x<en[0]?"right":"left",hovertemplate:j.hovertemplate,hovertemplateLabels:el,eventData:[er]})}}Z.loneHover($,{container:s._hoverlayer.node(),outerContainer:s._paper.node(),gd:i,anchorIndex:ee}).each(function(){F.link.concentrationscale||makeTranslucent(this,.65),makeTextContrasty(this)})}}function hoverCenterPosition(i){i.circular?(o=(i.circularPathData.leftInnerExtent+i.circularPathData.rightInnerExtent)/2,s=i.circularPathData.verticalFullExtent):(o=(i.source.x1+i.target.x0)/2,s=(i.y0+i.y1)/2);var o,s,_=[o,s];return"v"===i.trace.orientation&&_.reverse(),_[0]+=F.parent.translateX,_[1]+=F.parent.translateY,_}},unhover:function(o,F,N){!1!==i._fullLayout.hovermode&&(_.select(o).call(linkNonHoveredStyle.bind(0,F,N,!0)),"skip"!==F.link.trace.link.hoverinfo&&(F.link.fullData=F.link.trace,i.emit("plotly_unhover",{event:_.event,points:[F.link]})),Z.loneUnhover(s._hoverlayer.node()))},select:function(o,s){var F=s.link;F.originalEvent=_.event,i._hoverdata=[F],Z.click(i,{target:!0})}},nodeEvents:{hover:function(o,s,F){!1!==i._fullLayout.hovermode&&(_.select(o).call(nodeHoveredStyle,s,F),"skip"!==s.node.trace.node.hoverinfo&&(s.node.fullData=s.node.trace,i.emit("plotly_hover",{event:_.event,points:[s.node]})))},follow:function(o,F){if(!1!==i._fullLayout.hovermode){var j=F.node.trace.node;if("none"!==j.hoverinfo&&"skip"!==j.hoverinfo){var X=_.select(o).select("."+$.nodeRect),ee=i._fullLayout._paperdiv.node().getBoundingClientRect(),et=X.node().getBoundingClientRect(),er=et.left-2-ee.left,en=et.right+2-ee.left,ei=et.top+et.height/4-ee.top,eo={valueLabel:N(F.valueFormat)(F.node.value)+F.valueSuffix};F.node.fullData=F.node.trace,i._fullLayout._calcInverseTransform(i);var es=i._fullLayout._invScaleX,eu=i._fullLayout._invScaleY,ef=Z.loneHover({x0:es*er,x1:es*en,y:eu*ei,name:N(F.valueFormat)(F.node.value)+F.valueSuffix,text:[F.node.label,el+F.node.targetLinks.length,ec+F.node.sourceLinks.length].filter(renderableValuePresent).join("<br>"),color:castHoverOption(j,"bgcolor")||F.tinyColorHue,borderColor:castHoverOption(j,"bordercolor"),fontFamily:castHoverOption(j,"font.family"),fontSize:castHoverOption(j,"font.size"),fontColor:castHoverOption(j,"font.color"),nameLength:castHoverOption(j,"namelength"),textAlign:castHoverOption(j,"align"),idealAlign:"left",hovertemplate:j.hovertemplate,hovertemplateLabels:eo,eventData:[F.node]},{container:s._hoverlayer.node(),outerContainer:s._paper.node(),gd:i});makeTranslucent(ef,.85),makeTextContrasty(ef)}}},unhover:function(o,F,N){!1!==i._fullLayout.hovermode&&(_.select(o).call(nodeNonHoveredStyle,F,N),"skip"!==F.node.trace.node.hoverinfo&&(F.node.fullData=F.node.trace,i.emit("plotly_unhover",{event:_.event,points:[F.node]})),Z.loneUnhover(s._hoverlayer.node()))},select:function(o,s,F){var N=s.node;N.originalEvent=_.event,i._hoverdata=[N],_.select(o).call(nodeNonHoveredStyle,s,F),Z.click(i,{target:!0})}}})}},3393:function(i,o,s){"use strict";var _=s(49887),F=s(81684).k4,N=s(39898),j=s(30838),Z=s(86781),X=s(85247),$=s(84267),ee=s(7901),et=s(91424),er=s(71828),en=er.strTranslate,ei=er.strRotate,eo=s(28984),es=eo.keyFun,el=eo.repeat,ec=eo.unwrap,eu=s(63893),ef=s(73972),ed=s(18783),eh=ed.CAP_SHIFT,ep=ed.LINE_SPACING;function sankeyModel(i,o,s){var _=ec(o),F=_.trace,N=F.domain,ee="h"===F.orientation,et=F.node.pad,en=F.node.thickness,ei=i.width*(N.x[1]-N.x[0]),eo=i.height*(N.y[1]-N.y[0]),es=_._nodes,el=_._links,eu=_.circular;(eh=eu?Z.sankeyCircular().circularLinkGap(0):j.sankey()).iterations(X.sankeyIterations).size(ee?[ei,eo]:[eo,ei]).nodeWidth(en).nodePadding(et).nodeId(function(i){return i.pointNumber}).nodes(es).links(el);var ef=eh();for(var ed in eh.nodePadding()<et&&er.warn("node.pad was reduced to ",eh.nodePadding()," to fit within the figure."),_._groupLookup){var eh,ep,eg,em,ey,ev=parseInt(_._groupLookup[ed]);for(ep=0;ep<ef.nodes.length;ep++)if(ef.nodes[ep].pointNumber===ev){ey=ef.nodes[ep];break}if(ey){var ex={pointNumber:parseInt(ed),x0:ey.x0,x1:ey.x1,y0:ey.y0,y1:ey.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};ef.nodes.unshift(ex),ey.childrenNodes.unshift(ex)}}function resolveCollisionsTopToBottom(i){i.forEach(function(i){var o,s,_,F=0,N=i.length;for(i.sort(function(i,o){return i.y0-o.y0}),_=0;_<N;++_)(o=i[_]).y0>=F||(s=F-o.y0)>1e-6&&(o.y0+=s,o.y1+=s),F=o.y1+et})}function snapToColumns(i){var o,s,_=i.map(function(i,o){return{x0:i.x0,index:o}}).sort(function(i,o){return i.x0-o.x0}),F=[],N=-1,j=-1/0;for(ep=0;ep<_.length;ep++){var Z=i[_[ep].index];Z.x0>j+en&&(N+=1,o=Z.x0),j=Z.x0,F[N]||(F[N]=[]),F[N].push(Z),s=o-Z.x0,Z.x0+=s,Z.x1+=s}return F}if(function(){for(ep=0;ep<ef.nodes.length;ep++){var i,o,s=ef.nodes[ep],_={};for(eg=0;eg<s.targetLinks.length;eg++)i=(o=s.targetLinks[eg]).source.pointNumber+":"+o.target.pointNumber,_.hasOwnProperty(i)||(_[i]=[]),_[i].push(o);var F=Object.keys(_);for(eg=0;eg<F.length;eg++){var N=_[i=F[eg]],j=0,Z={};for(em=0;em<N.length;em++)Z[(o=N[em]).label]||(Z[o.label]=0),Z[o.label]+=o.value,j+=o.value;for(em=0;em<N.length;em++)(o=N[em]).flow={value:j,labelConcentration:Z[o.label]/j,concentration:o.value/j,links:N},o.concentrationscale&&(o.color=$(o.concentrationscale(o.flow.labelConcentration)))}var X=0;for(eg=0;eg<s.sourceLinks.length;eg++)X+=s.sourceLinks[eg].value;for(eg=0;eg<s.sourceLinks.length;eg++)(o=s.sourceLinks[eg]).concentrationOut=o.value/X;var ee=0;for(eg=0;eg<s.targetLinks.length;eg++)ee+=s.targetLinks[eg].value;for(eg=0;eg<s.targetLinks.length;eg++)(o=s.targetLinks[eg]).concenrationIn=o.value/ee}}(),F.node.x.length&&F.node.y.length){for(ep=0;ep<Math.min(F.node.x.length,F.node.y.length,ef.nodes.length);ep++)if(F.node.x[ep]&&F.node.y[ep]){var e_=[F.node.x[ep]*ei,F.node.y[ep]*eo];ef.nodes[ep].x0=e_[0]-en/2,ef.nodes[ep].x1=e_[0]+en/2;var ew=ef.nodes[ep].y1-ef.nodes[ep].y0;ef.nodes[ep].y0=e_[1]-ew/2,ef.nodes[ep].y1=e_[1]+ew/2}"snap"===F.arrangement&&resolveCollisionsTopToBottom(snapToColumns(es=ef.nodes)),eh.update(ef)}return{circular:eu,key:s,trace:F,guid:er.randstr(),horizontal:ee,width:ei,height:eo,nodePad:F.node.pad,nodeLineColor:F.node.line.color,nodeLineWidth:F.node.line.width,linkLineColor:F.link.line.color,linkLineWidth:F.link.line.width,linkArrowLength:F.link.arrowlen,valueFormat:F.valueformat,valueSuffix:F.valuesuffix,textFont:F.textfont,translateX:N.x[0]*i.width+i.margin.l,translateY:i.height-N.y[1]*i.height+i.margin.t,dragParallel:ee?eo:ei,dragPerpendicular:ee?ei:eo,arrangement:F.arrangement,sankey:eh,graph:ef,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function linkModel(i,o,s){var _=$(o.color),F=o.source.label+"|"+o.target.label;return o.trace=i.trace,o.curveNumber=i.trace.index,{circular:i.circular,key:F+"__"+s,traceId:i.key,pointNumber:o.pointNumber,link:o,tinyColorHue:ee.tinyRGB(_),tinyColorAlpha:_.getAlpha(),linkPath:linkPath,linkLineColor:i.linkLineColor,linkLineWidth:i.linkLineWidth,linkArrowLength:i.linkArrowLength,valueFormat:i.valueFormat,valueSuffix:i.valueSuffix,sankey:i.sankey,parent:i,interactionState:i.interactionState,flow:o.flow}}function createCircularClosedPathString(i,o){var s=i.width/2,_=i.circularPathData;return"top"===i.circularLinkType?"M "+(_.targetX-o)+" "+(_.targetY+s)+" L"+(_.rightInnerExtent-o)+" "+(_.targetY+s)+"A"+(_.rightLargeArcRadius+s)+" "+(_.rightSmallArcRadius+s)+" 0 0 1 "+(_.rightFullExtent-s-o)+" "+(_.targetY-_.rightSmallArcRadius)+"L"+(_.rightFullExtent-s-o)+" "+_.verticalRightInnerExtent+"A"+(_.rightLargeArcRadius+s)+" "+(_.rightLargeArcRadius+s)+" 0 0 1 "+(_.rightInnerExtent-o)+" "+(_.verticalFullExtent-s)+"L"+_.leftInnerExtent+" "+(_.verticalFullExtent-s)+"A"+(_.leftLargeArcRadius+s)+" "+(_.leftLargeArcRadius+s)+" 0 0 1 "+(_.leftFullExtent+s)+" "+_.verticalLeftInnerExtent+"L"+(_.leftFullExtent+s)+" "+(_.sourceY-_.leftSmallArcRadius)+"A"+(_.leftLargeArcRadius+s)+" "+(_.leftSmallArcRadius+s)+" 0 0 1 "+_.leftInnerExtent+" "+(_.sourceY+s)+"L"+_.sourceX+" "+(_.sourceY+s)+"L"+_.sourceX+" "+(_.sourceY-s)+"L"+_.leftInnerExtent+" "+(_.sourceY-s)+"A"+(_.leftLargeArcRadius-s)+" "+(_.leftSmallArcRadius-s)+" 0 0 0 "+(_.leftFullExtent-s)+" "+(_.sourceY-_.leftSmallArcRadius)+"L"+(_.leftFullExtent-s)+" "+_.verticalLeftInnerExtent+"A"+(_.leftLargeArcRadius-s)+" "+(_.leftLargeArcRadius-s)+" 0 0 0 "+_.leftInnerExtent+" "+(_.verticalFullExtent+s)+"L"+(_.rightInnerExtent-o)+" "+(_.verticalFullExtent+s)+"A"+(_.rightLargeArcRadius-s)+" "+(_.rightLargeArcRadius-s)+" 0 0 0 "+(_.rightFullExtent+s-o)+" "+_.verticalRightInnerExtent+"L"+(_.rightFullExtent+s-o)+" "+(_.targetY-_.rightSmallArcRadius)+"A"+(_.rightLargeArcRadius-s)+" "+(_.rightSmallArcRadius-s)+" 0 0 0 "+(_.rightInnerExtent-o)+" "+(_.targetY-s)+"L"+(_.targetX-o)+" "+(_.targetY-s)+(o>0?"L"+_.targetX+" "+_.targetY:"")+"Z":"M "+(_.targetX-o)+" "+(_.targetY-s)+" L"+(_.rightInnerExtent-o)+" "+(_.targetY-s)+"A"+(_.rightLargeArcRadius+s)+" "+(_.rightSmallArcRadius+s)+" 0 0 0 "+(_.rightFullExtent-s-o)+" "+(_.targetY+_.rightSmallArcRadius)+"L"+(_.rightFullExtent-s-o)+" "+_.verticalRightInnerExtent+"A"+(_.rightLargeArcRadius+s)+" "+(_.rightLargeArcRadius+s)+" 0 0 0 "+(_.rightInnerExtent-o)+" "+(_.verticalFullExtent+s)+"L"+_.leftInnerExtent+" "+(_.verticalFullExtent+s)+"A"+(_.leftLargeArcRadius+s)+" "+(_.leftLargeArcRadius+s)+" 0 0 0 "+(_.leftFullExtent+s)+" "+_.verticalLeftInnerExtent+"L"+(_.leftFullExtent+s)+" "+(_.sourceY+_.leftSmallArcRadius)+"A"+(_.leftLargeArcRadius+s)+" "+(_.leftSmallArcRadius+s)+" 0 0 0 "+_.leftInnerExtent+" "+(_.sourceY-s)+"L"+_.sourceX+" "+(_.sourceY-s)+"L"+_.sourceX+" "+(_.sourceY+s)+"L"+_.leftInnerExtent+" "+(_.sourceY+s)+"A"+(_.leftLargeArcRadius-s)+" "+(_.leftSmallArcRadius-s)+" 0 0 1 "+(_.leftFullExtent-s)+" "+(_.sourceY+_.leftSmallArcRadius)+"L"+(_.leftFullExtent-s)+" "+_.verticalLeftInnerExtent+"A"+(_.leftLargeArcRadius-s)+" "+(_.leftLargeArcRadius-s)+" 0 0 1 "+_.leftInnerExtent+" "+(_.verticalFullExtent-s)+"L"+(_.rightInnerExtent-o)+" "+(_.verticalFullExtent-s)+"A"+(_.rightLargeArcRadius-s)+" "+(_.rightLargeArcRadius-s)+" 0 0 1 "+(_.rightFullExtent+s-o)+" "+_.verticalRightInnerExtent+"L"+(_.rightFullExtent+s-o)+" "+(_.targetY+_.rightSmallArcRadius)+"A"+(_.rightLargeArcRadius-s)+" "+(_.rightSmallArcRadius-s)+" 0 0 1 "+(_.rightInnerExtent-o)+" "+(_.targetY+s)+"L"+(_.targetX-o)+" "+(_.targetY+s)+(o>0?"L"+_.targetX+" "+_.targetY:"")+"Z"}function linkPath(){return function(i){var o=i.linkArrowLength;if(i.link.circular)return createCircularClosedPathString(i.link,o);var s=Math.abs((i.link.target.x0-i.link.source.x1)/2);o>s&&(o=s);var _=i.link.source.x1,N=i.link.target.x0-o,j=F(_,N),Z=j(.5),X=j(.5),$=i.link.y0-i.link.width/2,ee=i.link.y0+i.link.width/2,et=i.link.y1-i.link.width/2,er=i.link.y1+i.link.width/2,en="M"+_+","+$,ei="C"+Z+","+$+" "+X+","+et+" "+N+","+et,eo="C"+X+","+er+" "+Z+","+ee+" "+_+","+ee,es=o>0?"L"+(N+o)+","+(et+i.link.width/2):"";return en+ei+(es+="L"+N+","+er)+eo+"Z"}}function nodeModel(i,o){var s=$(o.color),_=X.nodePadAcross,F=i.nodePad/2;o.dx=o.x1-o.x0,o.dy=o.y1-o.y0;var N=o.dx,j=Math.max(.5,o.dy),Z="node_"+o.pointNumber;return o.group&&(Z=er.randstr()),o.trace=i.trace,o.curveNumber=i.trace.index,{index:o.pointNumber,key:Z,partOfGroup:o.partOfGroup||!1,group:o.group,traceId:i.key,trace:i.trace,node:o,nodePad:i.nodePad,nodeLineColor:i.nodeLineColor,nodeLineWidth:i.nodeLineWidth,textFont:i.textFont,size:i.horizontal?i.height:i.width,visibleWidth:Math.ceil(N),visibleHeight:j,zoneX:-_,zoneY:-F,zoneWidth:N+2*_,zoneHeight:j+2*F,labelY:i.horizontal?o.dy/2+1:o.dx/2+1,left:1===o.originalLayer,sizeAcross:i.width,forceLayouts:i.forceLayouts,horizontal:i.horizontal,darkBackground:128>=s.getBrightness(),tinyColorHue:ee.tinyRGB(s),tinyColorAlpha:s.getAlpha(),valueFormat:i.valueFormat,valueSuffix:i.valueSuffix,sankey:i.sankey,graph:i.graph,arrangement:i.arrangement,uniqueNodeLabelPathId:[i.guid,i.key,Z].join("_"),interactionState:i.interactionState,figure:i}}function updateNodePositions(i){i.attr("transform",function(i){return en(i.node.x0.toFixed(3),i.node.y0.toFixed(3))})}function updateNodeShapes(i){i.call(updateNodePositions)}function updateShapes(i,o){i.call(updateNodeShapes),o.attr("d",linkPath())}function sizeNode(i){i.attr("width",function(i){return i.node.x1-i.node.x0}).attr("height",function(i){return i.visibleHeight})}function salientEnough(i){return i.link.width>1||i.linkLineWidth>0}function sankeyTransform(i){return en(i.translateX,i.translateY)+(i.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function attachPointerEvents(i,o,s){i.on(".basic",null).on("mouseover.basic",function(i){i.interactionState.dragInProgress||i.partOfGroup||(s.hover(this,i,o),i.interactionState.hovered=[this,i])}).on("mousemove.basic",function(i){i.interactionState.dragInProgress||i.partOfGroup||(s.follow(this,i),i.interactionState.hovered=[this,i])}).on("mouseout.basic",function(i){i.interactionState.dragInProgress||i.partOfGroup||(s.unhover(this,i,o),i.interactionState.hovered=!1)}).on("click.basic",function(i){i.interactionState.hovered&&(s.unhover(this,i,o),i.interactionState.hovered=!1),i.interactionState.dragInProgress||i.partOfGroup||s.select(this,i,o)})}function attachDragHandler(i,o,s,_){var F=N.behavior.drag().origin(function(i){return{x:i.node.x0+i.visibleWidth/2,y:i.node.y0+i.visibleHeight/2}}).on("dragstart",function(F){if("fixed"!==F.arrangement&&(er.ensureSingle(_._fullLayout._infolayer,"g","dragcover",function(i){_._fullLayout._dragCover=i}),er.raiseToTop(this),F.interactionState.dragInProgress=F.node,saveCurrentDragPosition(F.node),F.interactionState.hovered&&(s.nodeEvents.unhover.apply(0,F.interactionState.hovered),F.interactionState.hovered=!1),"snap"===F.arrangement)){var N=F.traceId+"|"+F.key;F.forceLayouts[N]?F.forceLayouts[N].alpha(1):attachForce(i,N,F,_),startForce(i,o,F,N,_)}}).on("drag",function(s){if("fixed"!==s.arrangement){var _=N.event.x,F=N.event.y;"snap"===s.arrangement?(s.node.x0=_-s.visibleWidth/2,s.node.x1=_+s.visibleWidth/2):("freeform"===s.arrangement&&(s.node.x0=_-s.visibleWidth/2,s.node.x1=_+s.visibleWidth/2),F=Math.max(0,Math.min(s.size-s.visibleHeight/2,F))),s.node.y0=F-s.visibleHeight/2,s.node.y1=F+s.visibleHeight/2,saveCurrentDragPosition(s.node),"snap"!==s.arrangement&&(s.sankey.update(s.graph),updateShapes(i.filter(sameLayer(s)),o))}}).on("dragend",function(i){if("fixed"!==i.arrangement){i.interactionState.dragInProgress=!1;for(var o=0;o<i.node.childrenNodes.length;o++)i.node.childrenNodes[o].x=i.node.x,i.node.childrenNodes[o].y=i.node.y;"snap"!==i.arrangement&&persistFinalNodePositions(i,_)}});i.on(".drag",null).call(F)}function attachForce(i,o,s,F){switchToForceFormat(s.graph.nodes);var N=s.graph.nodes.filter(function(i){return i.originalX===s.node.originalX}).filter(function(i){return!i.partOfGroup});s.forceLayouts[o]=_.forceSimulation(N).alphaDecay(0).force("collide",_.forceCollide().radius(function(i){return i.dy/2+s.nodePad/2}).strength(1).iterations(X.forceIterations)).force("constrain",snappingForce(i,o,N,s,F)).stop()}function startForce(i,o,s,_,F){window.requestAnimationFrame(function faster(){for(N=0;N<X.forceTicksPerFrame;N++)s.forceLayouts[_].tick();if(switchToSankeyFormat(s.graph.nodes),s.sankey.update(s.graph),updateShapes(i.filter(sameLayer(s)),o),s.forceLayouts[_].alpha()>0)window.requestAnimationFrame(faster);else{var N,j=s.node.originalX;s.node.x0=j-s.visibleWidth/2,s.node.x1=j+s.visibleWidth/2,persistFinalNodePositions(s,F)}})}function snappingForce(i,o,s,_){return function(){for(var i=0,F=0;F<s.length;F++){var N=s[F];N===_.interactionState.dragInProgress?(N.x=N.lastDraggedX,N.y=N.lastDraggedY):(N.vx=(N.originalX-N.x)/X.forceTicksPerFrame,N.y=Math.min(_.size-N.dy/2,Math.max(N.dy/2,N.y))),i=Math.max(i,Math.abs(N.vx),Math.abs(N.vy))}!_.interactionState.dragInProgress&&i<.1&&_.forceLayouts[o].alpha()>0&&_.forceLayouts[o].alpha(0)}}function persistFinalNodePositions(i,o){for(var s=[],_=[],F=0;F<i.graph.nodes.length;F++){var N=(i.graph.nodes[F].x0+i.graph.nodes[F].x1)/2,j=(i.graph.nodes[F].y0+i.graph.nodes[F].y1)/2;s.push(N/i.figure.width),_.push(j/i.figure.height)}ef.call("_guiRestyle",o,{"node.x":[s],"node.y":[_]},i.trace.index).then(function(){o._fullLayout._dragCover&&o._fullLayout._dragCover.remove()})}function persistOriginalPlace(i){var o,s=[];for(o=0;o<i.length;o++)i[o].originalX=(i[o].x0+i[o].x1)/2,i[o].originalY=(i[o].y0+i[o].y1)/2,-1===s.indexOf(i[o].originalX)&&s.push(i[o].originalX);for(s.sort(function(i,o){return i-o}),o=0;o<i.length;o++)i[o].originalLayerIndex=s.indexOf(i[o].originalX),i[o].originalLayer=i[o].originalLayerIndex/(s.length-1)}function saveCurrentDragPosition(i){i.lastDraggedX=i.x0+i.dx/2,i.lastDraggedY=i.y0+i.dy/2}function sameLayer(i){return function(o){return o.node.originalX===i.node.originalX}}function switchToForceFormat(i){for(var o=0;o<i.length;o++)i[o].y=(i[o].y0+i[o].y1)/2,i[o].x=(i[o].x0+i[o].x1)/2}function switchToSankeyFormat(i){for(var o=0;o<i.length;o++)i[o].y0=i[o].y-i[o].dy/2,i[o].y1=i[o].y0+i[o].dy,i[o].x0=i[o].x-i[o].dx/2,i[o].x1=i[o].x0+i[o].dx}i.exports=function(i,o,s,_,F){var j=i._context.staticPlot,Z=!1;er.ensureSingle(i._fullLayout._infolayer,"g","first-render",function(){Z=!0});var eo=i._fullLayout._dragCover,ef=s.filter(function(i){return ec(i).trace.visible}).map(sankeyModel.bind(null,_)),ed=o.selectAll("."+X.cn.sankey).data(ef,es);ed.exit().remove(),ed.enter().append("g").classed(X.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",j?"none":"auto").attr("transform",sankeyTransform),ed.each(function(o,s){i._fullData[s]._sankey=o;var _="bgsankey-"+o.trace.uid+"-"+s;er.ensureSingle(i._fullLayout._draggers,"rect",_),i._fullData[s]._bgRect=N.select("."+_),i._fullData[s]._bgRect.style("pointer-events",j?"none":"all").attr("width",o.width).attr("height",o.height).attr("x",o.translateX).attr("y",o.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ed.transition().ease(X.ease).duration(X.duration).attr("transform",sankeyTransform);var eg=ed.selectAll("."+X.cn.sankeyLinks).data(el,es);eg.enter().append("g").classed(X.cn.sankeyLinks,!0).style("fill","none");var em=eg.selectAll("."+X.cn.sankeyLink).data(function(i){return i.graph.links.filter(function(i){return i.value}).map(linkModel.bind(null,i))},es);em.enter().append("path").classed(X.cn.sankeyLink,!0).call(attachPointerEvents,ed,F.linkEvents),em.style("stroke",function(i){return salientEnough(i)?ee.tinyRGB($(i.linkLineColor)):i.tinyColorHue}).style("stroke-opacity",function(i){return salientEnough(i)?ee.opacity(i.linkLineColor):i.tinyColorAlpha}).style("fill",function(i){return i.tinyColorHue}).style("fill-opacity",function(i){return i.tinyColorAlpha}).style("stroke-width",function(i){return salientEnough(i)?i.linkLineWidth:1}).attr("d",linkPath()),em.style("opacity",function(){return i._context.staticPlot||Z||eo?1:0}).transition().ease(X.ease).duration(X.duration).style("opacity",1),em.exit().transition().ease(X.ease).duration(X.duration).style("opacity",0).remove();var ey=ed.selectAll("."+X.cn.sankeyNodeSet).data(el,es);ey.enter().append("g").classed(X.cn.sankeyNodeSet,!0),ey.style("cursor",function(i){switch(i.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ev=ey.selectAll("."+X.cn.sankeyNode).data(function(i){var o=i.graph.nodes;return persistOriginalPlace(o),o.map(nodeModel.bind(null,i))},es);ev.enter().append("g").classed(X.cn.sankeyNode,!0).call(updateNodePositions).style("opacity",function(o){return(i._context.staticPlot||Z)&&!o.partOfGroup?1:0}),ev.call(attachPointerEvents,ed,F.nodeEvents).call(attachDragHandler,em,F,i),ev.transition().ease(X.ease).duration(X.duration).call(updateNodePositions).style("opacity",function(i){return i.partOfGroup?0:1}),ev.exit().transition().ease(X.ease).duration(X.duration).style("opacity",0).remove();var ex=ev.selectAll("."+X.cn.nodeRect).data(el);ex.enter().append("rect").classed(X.cn.nodeRect,!0).call(sizeNode),ex.style("stroke-width",function(i){return i.nodeLineWidth}).style("stroke",function(i){return ee.tinyRGB($(i.nodeLineColor))}).style("stroke-opacity",function(i){return ee.opacity(i.nodeLineColor)}).style("fill",function(i){return i.tinyColorHue}).style("fill-opacity",function(i){return i.tinyColorAlpha}),ex.transition().ease(X.ease).duration(X.duration).call(sizeNode);var e_=ev.selectAll("."+X.cn.nodeLabel).data(el);e_.enter().append("text").classed(X.cn.nodeLabel,!0).style("cursor","default"),e_.attr("data-notex",1).text(function(i){return i.node.label}).each(function(o){var s=N.select(this);et.font(s,o.textFont),eu.convertToTspans(s,i)}).style("text-shadow",eu.makeTextShadow(i._fullLayout.paper_bgcolor)).attr("text-anchor",function(i){return i.horizontal&&i.left?"end":"start"}).attr("transform",function(i){var o=N.select(this),s=eu.lineCount(o),_=i.textFont.size*((s-1)*ep-eh),F=i.nodeLineWidth/2+3,j=((i.horizontal?i.visibleHeight:i.visibleWidth)-_)/2;i.horizontal&&(i.left?F=-F:F+=i.visibleWidth);var Z=i.horizontal?"":"scale(-1,1)"+ei(90);return en(i.horizontal?F:j,i.horizontal?j:F)+Z}),e_.transition().ease(X.ease).duration(X.duration)}},84564:function(i){"use strict";i.exports=function(i,o){for(var s=i.cd,_=[],F=s[0].trace,N=F._sankey.graph.nodes,j=0;j<N.length;j++){var Z=N[j];if(!Z.partOfGroup){var X=[(Z.x0+Z.x1)/2,(Z.y0+Z.y1)/2];"v"===F.orientation&&X.reverse(),o&&o.contains(X,!1,j,i)&&_.push({pointNumber:Z.pointNumber})}}return _}},75225:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o){for(var s=0;s<i.length;s++)i[s].i=s;_.mergeArray(o.text,i,"tx"),_.mergeArray(o.texttemplate,i,"txt"),_.mergeArray(o.hovertext,i,"htx"),_.mergeArray(o.customdata,i,"data"),_.mergeArray(o.textposition,i,"tp"),o.textfont&&(_.mergeArrayCastPositive(o.textfont.size,i,"ts"),_.mergeArray(o.textfont.color,i,"tc"),_.mergeArray(o.textfont.family,i,"tf"));var F=o.marker;if(F){_.mergeArrayCastPositive(F.size,i,"ms"),_.mergeArrayCastPositive(F.opacity,i,"mo"),_.mergeArray(F.symbol,i,"mx"),_.mergeArray(F.angle,i,"ma"),_.mergeArray(F.standoff,i,"mf"),_.mergeArray(F.color,i,"mc");var N=F.line;F.line&&(_.mergeArray(N.color,i,"mlc"),_.mergeArrayCastPositive(N.width,i,"mlw"));var j=F.gradient;j&&"none"!==j.type&&(_.mergeArray(j.type,i,"mgt"),_.mergeArray(j.color,i,"mgc"))}}},82196:function(i,o,s){"use strict";var _=s(12663).axisHoverFormat,F=s(5386).si,N=s(5386).fF,j=s(50693),Z=s(41940),X=s(79952).P,$=s(79952).u,ee=s(91424),et=s(47581),er=s(1426).extendFlat;function axisPeriod(i){return{valType:"any",dflt:0,editType:"calc"}}function axisPeriod0(i){return{valType:"any",editType:"calc"}}function axisPeriodAlignment(i){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}i.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:axisPeriod("x"),yperiod:axisPeriod("y"),xperiod0:axisPeriod0("x0"),yperiod0:axisPeriod0("y0"),xperiodalignment:axisPeriodAlignment("x"),yperiodalignment:axisPeriodAlignment("y"),xhoverformat:_("x"),yhoverformat:_("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:F({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:N({},{keys:et.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:er({},X,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:$,marker:er({symbol:{valType:"enumerated",values:ee.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:er({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},j("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},j("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:Z({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(89298),j=s(42973),Z=s(50606).BADNUM,X=s(34098),$=s(36922),ee=s(75225),et=s(66279);function calc(i,o){var s,X,er,en,ei,eo,es,el=i._fullLayout,ec=o._xA=N.getFromId(i,o.xaxis||"x","x"),eu=o._yA=N.getFromId(i,o.yaxis||"y","y"),ef=ec.makeCalcdata(o,"x"),ed=eu.makeCalcdata(o,"y"),eh=j(o,ec,"x",ef),ep=j(o,eu,"y",ed),eg=eh.vals,em=ep.vals,ey=o._length,ev=Array(ey),ex=o.ids,e_=getStackOpts(o,el,ec,eu),ew=!1;setFirstScatter(el,o);var eT="x",ek="y";if(e_)F.pushUnique(e_.traceIndices,o._expandedIndex),(s="v"===e_.orientation)?(ek="s",es="x"):(eT="s",es="y"),ei="interpolate"===e_.stackgaps;else{var eA=calcMarkerSize(o,ey);calcAxisExpansion(i,o,ec,eu,eg,em,eA)}var eS=!!o.xperiodalignment,eM=!!o.yperiodalignment;for(X=0;X<ey;X++){var eC=ev[X]={},eE=_(eg[X]),eL=_(em[X]);eE&&eL?(eC[eT]=eg[X],eC[ek]=em[X],eS&&(eC.orig_x=ef[X],eC.xEnd=eh.ends[X],eC.xStart=eh.starts[X]),eM&&(eC.orig_y=ed[X],eC.yEnd=ep.ends[X],eC.yStart=ep.starts[X])):e_&&(s?eE:eL)?(eC[es]=s?eg[X]:em[X],eC.gap=!0,ei?(eC.s=Z,ew=!0):eC.s=0):eC[eT]=eC[ek]=Z,ex&&(eC.id=String(ex[X]))}if(ee(ev,o),$(i,o),et(ev,o),e_){for(X=0;X<ev.length;)ev[X][es]===Z?ev.splice(X,1):X++;if(F.sort(ev,function(i,o){return i[es]-o[es]||i.i-o.i}),ew){for(X=0;X<ev.length-1&&ev[X].gap;)X++;for((eo=ev[X].s)||(eo=ev[X].s=0),er=0;er<X;er++)ev[er].s=eo;for(en=ev.length-1;en>X&&ev[en].gap;)en--;for(eo=ev[en].s,er=ev.length-1;er>en;er--)ev[er].s=eo;for(;X<en;)if(ev[++X].gap){for(er=X+1;ev[er].gap;)er++;for(var eP=ev[X-1][es],eI=ev[X-1].s,eO=(ev[er].s-eI)/(ev[er][es]-eP);X<er;)ev[X].s=eI+(ev[X][es]-eP)*eO,X++}}}return ev}function calcAxisExpansion(i,o,s,_,F,j,Z){var $=o._length,ee=i._fullLayout,et=s._id,er=_._id,en=ee._firstScatter[firstScatterGroup(o)]===o.uid,ei=(getStackOpts(o,ee,s,_)||{}).orientation,eo=o.fill;s._minDtick=0,_._minDtick=0;var es={padded:!0},el={padded:!0};Z&&(es.ppad=el.ppad=Z);var ec=$<2||F[0]!==F[$-1]||j[0]!==j[$-1];ec&&("tozerox"===eo||"tonextx"===eo&&(en||"h"===ei))?es.tozero=!0:(o.error_y||{}).visible||"tonexty"!==eo&&"tozeroy"!==eo&&(X.hasMarkers(o)||X.hasText(o))||(es.padded=!1,es.ppad=0),ec&&("tozeroy"===eo||"tonexty"===eo&&(en||"v"===ei))?el.tozero=!0:("tonextx"===eo||"tozerox"===eo)&&(el.padded=!1),et&&(o._extremes[et]=N.findExtremes(s,F,es)),er&&(o._extremes[er]=N.findExtremes(_,j,el))}function calcMarkerSize(i,o){if(X.hasMarkers(i)){var s,_=i.marker,j=1.6*(i.marker.sizeref||1);if(s="area"===i.marker.sizemode?function(i){return Math.max(Math.sqrt((i||0)/j),3)}:function(i){return Math.max((i||0)/j,3)},!F.isArrayOrTypedArray(_.size))return s(_.size);var Z={type:"linear"};N.setConvert(Z);for(var $=Z.makeCalcdata(i.marker,"size"),ee=Array(o),et=0;et<o;et++)ee[et]=s($[et]);return ee}}function setFirstScatter(i,o){var s=firstScatterGroup(o),_=i._firstScatter;_[s]||(_[s]=o.uid)}function firstScatterGroup(i){var o=i.stackgroup;return i.xaxis+i.yaxis+i.type+(o?"-"+o:"")}function getStackOpts(i,o,s,_){var F=i.stackgroup;if(F){var N=o._scatterStackOpts[s._id+_._id][F],j="v"===N.orientation?_:s;if("linear"===j.type||"log"===j.type)return N}}i.exports={calc:calc,calcMarkerSize:calcMarkerSize,calcAxisExpansion:calcAxisExpansion,setFirstScatter:setFirstScatter,getStackOpts:getStackOpts}},66279:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o){_.isArrayOrTypedArray(o.selectedpoints)&&_.tagSelected(i,o)}},36922:function(i,o,s){"use strict";var _=s(52075).hasColorscale,F=s(78803),N=s(34098);i.exports=function(i,o){N.hasLines(o)&&_(o,"line")&&F(i,o,{vals:o.line.color,containerStr:"line",cLetter:"c"}),N.hasMarkers(o)&&(_(o,"marker")&&F(i,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),_(o,"marker.line")&&F(i,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(i){"use strict";i.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(i,o,s){"use strict";var _=s(47761),F=s(11661).setGroupPositions;function groupCrossTraceCalc(i,o){for(var s=o.xaxis,_=o.yaxis,N=i._fullLayout,j=i._fullData,Z=i.calcdata,X=[],$=[],ee=0;ee<j.length;ee++){var et=j[ee];!0===et.visible&&"scatter"===et.type&&et.xaxis===s._id&&et.yaxis===_._id&&("h"===et.orientation?X.push(Z[ee]):"v"===et.orientation&&$.push(Z[ee]))}var er={mode:N.scattermode,gap:N.scattergap};F(i,s,_,$,er),F(i,_,s,X,er)}function insertBlank(i,o,s,_,F,N,j){F[_]=!0;var Z={i:null,gap:!0,s:0};if(Z[j]=s,i.splice(o,0,Z),o&&s===i[o-1][j]){var X=i[o-1];Z.s=X.s,Z.i=X.i,Z.gap=X.gap}else N&&(Z.s=getInterp(i,o,s,j));o||(i[0].t=i[1].t,i[0].trace=i[1].trace,delete i[1].t,delete i[1].trace)}function getInterp(i,o,s,_){var F=i[o-1],N=i[o+1];return N?F?F.s+(N.s-F.s)*(s-F[_])/(N[_]-F[_]):N.s:F.s}i.exports=function(i,o){"group"===i._fullLayout.scattermode&&groupCrossTraceCalc(i,o);var s,F,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec=o.xaxis,eu=o.yaxis,ef=ec._id+eu._id,ed=i._fullLayout._scatterStackOpts[ef];if(ed){var eh=i.calcdata;for(var ep in ed){var eg=(er=ed[ep]).traceIndices;if(eg.length){for(en="interpolate"===er.stackgaps,ei=er.groupnorm,"v"===er.orientation?(eo="x",es="y"):(eo="y",es="x"),el=Array(eg.length),s=0;s<el.length;s++)el[s]=!1;var em=Array((X=eh[eg[0]]).length);for(s=0;s<X.length;s++)em[s]=X[s][eo];for(s=1;s<eg.length;s++){for(Z=eh[eg[s]],F=N=0;F<Z.length;F++){for($=Z[F][eo];$>em[N]&&N<em.length;N++)insertBlank(Z,F,em[N],s,el,en,eo),F++;if($!==em[N]){for(j=0;j<s;j++)insertBlank(eh[eg[j]],N,$,j,el,en,eo);em.splice(N,0,$)}N++}for(;N<em.length;N++)insertBlank(Z,F,em[N],s,el,en,eo),F++}var ey=em.length;for(F=0;F<X.length;F++){for(s=1,ee=X[F][es]=X[F].s;s<eg.length;s++)(Z=eh[eg[s]])[0].trace._rawLength=Z[0].trace._length,Z[0].trace._length=ey,ee+=Z[F].s,Z[F][es]=ee;if(ei)for(s=0,et=("fraction"===ei?ee:ee/100)||1;s<eg.length;s++){var ev=eh[eg[s]][F];ev[es]/=et,ev.sNorm=ev.s/et}}for(s=0;s<eg.length;s++){var ex=(Z=eh[eg[s]])[0].trace,e_=_.calcMarkerSize(ex,ex._rawLength),ew=Array.isArray(e_);if(e_&&el[s]||ew){var eT=e_;for(F=0,e_=Array(ey);F<ey;F++)e_[F]=Z[F].gap?0:ew?eT[Z[F].i]:eT}var ek=Array(ey),eA=Array(ey);for(F=0;F<ey;F++)ek[F]=Z[F].x,eA[F]=Z[F].y;_.calcAxisExpansion(i,ex,ec,eu,ek,eA,e_),Z[0].t.orientation=er.orientation}}}}}},34936:function(i,o,s){"use strict";var _=s(71828),F=s(26125),N=s(82196);i.exports=function(i,o){var s,j;function coerce(i){return _.coerce(s._input,s,N,i)}if("group"===o.scattermode)for(j=0;j<i.length;j++)"scatter"===(s=i[j]).type&&F(s._input,s,o,coerce);for(j=0;j<i.length;j++){var Z=i[j];if("scatter"===Z.type){var X=Z.fill;if("none"!==X&&"toself"!==X&&(Z.opacity=void 0,"tonexty"===X||"tonextx"===X))for(var $=j-1;$>=0;$--){var ee=i[$];if("scatter"===ee.type&&ee.xaxis===Z.xaxis&&ee.yaxis===Z.yaxis){ee.opacity=void 0;break}}}}}},17438:function(i,o,s){"use strict";var _=s(71828),F=s(73972),N=s(82196),j=s(47581),Z=s(34098),X=s(67513),$=s(73927),ee=s(565),et=s(49508),er=s(11058),en=s(94039),ei=s(82410),eo=s(28908),es=s(71828).coercePattern;i.exports=function(i,o,s,el){function coerce(s,F){return _.coerce(i,o,N,s,F)}var ec=X(i,o,el,coerce);if(ec||(o.visible=!1),o.visible){$(i,o,el,coerce),coerce("xhoverformat"),coerce("yhoverformat");var eu=ee(i,o,el,coerce);"group"===el.scattermode&&void 0===o.orientation&&coerce("orientation","v");var ef=!eu&&ec<j.PTS_LINESONLY?"lines+markers":"lines";coerce("text"),coerce("hovertext"),coerce("mode",ef),Z.hasLines(o)&&(er(i,o,s,el,coerce,{backoff:!0}),en(i,o,coerce),coerce("connectgaps"),coerce("line.simplify")),Z.hasMarkers(o)&&et(i,o,s,el,coerce,{gradient:!0}),Z.hasText(o)&&(coerce("texttemplate"),ei(i,o,el,coerce));var ed=[];(Z.hasMarkers(o)||Z.hasText(o))&&(coerce("cliponaxis"),coerce("marker.maxdisplayed"),ed.push("points")),coerce("fill",eu?eu.fillDflt:"none"),"none"!==o.fill&&(eo(i,o,s,coerce),Z.hasLines(o)||en(i,o,coerce),es(coerce,"fillpattern",o.fillcolor,!1));var eh=(o.line||{}).color,ep=(o.marker||{}).color;("tonext"===o.fill||"toself"===o.fill)&&ed.push("fills"),coerce("hoveron",ed.join("+")||"points"),"fills"!==o.hoveron&&coerce("hovertemplate");var eg=F.getComponentMethod("errorbars","supplyDefaults");eg(i,o,eh||ep||s,{axis:"y"}),eg(i,o,eh||ep||s,{axis:"x",inherit:"y"}),_.coerceSelectionMarkerOpacity(o,coerce)}}},28908:function(i,o,s){"use strict";var _=s(7901),F=s(71828).isArrayOrTypedArray;i.exports=function(i,o,s,N){var j=!1;if(o.marker){var Z=o.marker.color,X=(o.marker.line||{}).color;Z&&!F(Z)?j=Z:X&&!F(X)&&(j=X)}N("fillcolor",_.addOpacity((o.line||{}).color||j||s,.5))}},8225:function(i,o,s){"use strict";var _=s(89298);i.exports=function(i,o,s){var F={},N={_fullLayout:s},j=_.getFromTrace(N,o,"x"),Z=_.getFromTrace(N,o,"y"),X=i.orig_x;void 0===X&&(X=i.x);var $=i.orig_y;return void 0===$&&($=i.y),F.xLabel=_.tickText(j,j.c2l(X),!0).text,F.yLabel=_.tickText(Z,Z.c2l($),!0).text,F}},34603:function(i,o,s){"use strict";var _=s(7901),F=s(34098);i.exports=function(i,o){if("lines"===i.mode)return(s=i.line.color)&&_.opacity(s)?s:i.fillcolor;if("none"===i.mode)return i.fill?i.fillcolor:"";var s,N,j=o.mcc||(i.marker||{}).color,Z=o.mlcc||((i.marker||{}).line||{}).color;return(N=j&&_.opacity(j)?j:Z&&_.opacity(Z)&&(o.mlw||((i.marker||{}).line||{}).width)?Z:"")?.3>_.opacity(N)?_.addOpacity(N,.3):N:(s=(i.line||{}).color)&&_.opacity(s)&&F.hasLines(i)&&i.line.width?s:i.fillcolor}},26125:function(i,o,s){"use strict";var _=s(99082).getAxisGroup;i.exports=function(i,o,s,F){var N=o.orientation,j=_(s,o[({v:"x",h:"y"})[N]+"axis"])+N,Z=s._alignmentOpts||{},X=F("alignmentgroup"),$=Z[j];$||($=Z[j]={});var ee=$[X];ee?ee.traces.push(o):ee=$[X]={traces:[o],alignmentIndex:Object.keys($).length,offsetGroups:{}};var et=F("offsetgroup"),er=ee.offsetGroups,en=er[et];et&&(en||(en=er[et]={offsetIndex:Object.keys(er).length}),o._offsetIndex=en.offsetIndex)}},33720:function(i,o,s){"use strict";var _=s(71828),F=s(30211),N=s(73972),j=s(34603),Z=s(7901),X=_.fillText;i.exports=function(i,o,s,$){var ee=i.cd,et=ee[0].trace,er=i.xa,en=i.ya,ei=er.c2p(o),eo=en.c2p(s),es=[ei,eo],el=et.hoveron||"",ec=-1!==et.mode.indexOf("markers")?3:.5,eu=!!et.xperiodalignment,ef=!!et.yperiodalignment;if(-1!==el.indexOf("points")){var dxy=function(i){var o=Math.max(ec,i.mrc||0),s=er.c2p(i.x)-ei,_=en.c2p(i.y)-eo;return Math.max(Math.sqrt(s*s+_*_)-o,1-ec/o)},ed=F.getDistanceFunction($,function(i){if(eu){var o=er.c2p(i.xStart),s=er.c2p(i.xEnd);return ei>=Math.min(o,s)&&ei<=Math.max(o,s)?0:1/0}var _=Math.max(3,i.mrc||0),F=1-1/_,N=Math.abs(er.c2p(i.x)-ei);return N<_?F*N/_:N-_+F},function(i){if(ef){var o=en.c2p(i.yStart),s=en.c2p(i.yEnd);return eo>=Math.min(o,s)&&eo<=Math.max(o,s)?0:1/0}var _=Math.max(3,i.mrc||0),F=1-1/_,N=Math.abs(en.c2p(i.y)-eo);return N<_?F*N/_:N-_+F},dxy);if(F.getClosest(ee,ed,i),!1!==i.index){var eh=ee[i.index],ep=er.c2p(eh.x,!0),eg=en.c2p(eh.y,!0),em=eh.mrc||1;i.index=eh.i;var ey=ee[0].t.orientation,ev=ey&&(eh.sNorm||eh.s),ex="h"===ey?ev:void 0!==eh.orig_x?eh.orig_x:eh.x,e_="v"===ey?ev:void 0!==eh.orig_y?eh.orig_y:eh.y;return _.extendFlat(i,{color:j(et,eh),x0:ep-em,x1:ep+em,xLabelVal:ex,y0:eg-em,y1:eg+em,yLabelVal:e_,spikeDistance:dxy(eh),hovertemplate:et.hovertemplate}),X(eh,et,i),N.getComponentMethod("errorbars","hoverInfo")(eh,et,i),[i]}}if(-1!==el.indexOf("fills")&&et._polygons){var ew,eT,ek,eA,eS,eM,eC,eE,eL,eP=et._polygons,eI=[],eO=!1,eD=1/0,eR=-1/0,eB=1/0,eF=-1/0;for(ew=0;ew<eP.length;ew++)(ek=eP[ew]).contains(es)&&(eO=!eO,eI.push(ek),eB=Math.min(eB,ek.ymin),eF=Math.max(eF,ek.ymax));if(eO){var ez=((eB=Math.max(eB,0))+(eF=Math.min(eF,en._length)))/2;for(ew=0;ew<eI.length;ew++)for(eT=1,eA=eI[ew].pts;eT<eA.length;eT++)(eE=eA[eT-1][1])>ez!=(eL=eA[eT][1])>=ez&&(eM=eA[eT-1][0],eC=eA[eT][0],eL-eE&&(eD=Math.min(eD,eS=eM+(eC-eM)*(ez-eE)/(eL-eE)),eR=Math.max(eR,eS)));eD=Math.max(eD,0),eR=Math.min(eR,er._length);var eN=Z.defaultLine;return Z.opacity(et.fillcolor)?eN=et.fillcolor:Z.opacity((et.line||{}).color)&&(eN=et.line.color),_.extendFlat(i,{distance:i.maxHoverDistance,x0:eD,x1:eR,y0:ez,y1:ez,color:eN,hovertemplate:!1}),delete i.index,et.text&&!Array.isArray(et.text)?i.text=String(et.text):i.text=et.name,[i]}}}},67368:function(i,o,s){"use strict";var _=s(34098);i.exports={hasLines:_.hasLines,hasMarkers:_.hasMarkers,hasText:_.hasText,isBubble:_.isBubble,attributes:s(82196),layoutAttributes:s(21479),supplyDefaults:s(17438),crossTraceDefaults:s(34936),supplyLayoutDefaults:s(79334),calc:s(47761).calc,crossTraceCalc:s(72626),arraysToCalcdata:s(75225),plot:s(32663),colorbar:s(4898),formatLabels:s(8225),style:s(16296).style,styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(33720),selectPoints:s(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:s(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(i){"use strict";i.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(i,o,s){"use strict";var _=s(71828),F=s(21479);i.exports=function(i,o){function coerce(s,N){return _.coerce(i,o,F,s,N)}var s="group"===o.barmode;"group"===o.scattermode&&coerce("scattergap",s?o.bargap:.2)}},11058:function(i,o,s){"use strict";var _=s(71828).isArrayOrTypedArray,F=s(52075).hasColorscale,N=s(1586);i.exports=function(i,o,s,j,Z,X){X||(X={});var $=(i.marker||{}).color;Z("line.color",s),F(i,"line")?N(i,o,j,Z,{prefix:"line.",cLetter:"c"}):Z("line.color",!_($)&&$||s),Z("line.width"),X.noDash||Z("line.dash"),X.backoff&&Z("line.backoff")}},34621:function(i,o,s){"use strict";var _=s(91424),F=s(50606),N=F.BADNUM,j=F.LOG_CLIP,Z=j+.5,X=j-.5,$=s(71828),ee=$.segmentsIntersect,et=$.constrain,er=s(47581);i.exports=function(i,o){var s,F,j,en,ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA,eS,eM=o.trace||{},eC=o.xaxis,eE=o.yaxis,eL="log"===eC.type,eP="log"===eE.type,eI=eC._length,eO=eE._length,eD=o.backoff,eR=eM.marker,eB=o.connectGaps,eF=o.baseTolerance,ez=o.shape,eN="linear"===ez,ej=eM.fill&&"none"!==eM.fill,eV=[],eU=er.minTolerance,eH=i.length,eG=Array(eH),eW=0;function getPt(s){var _=i[s];if(!_)return!1;var F=o.linearized?eC.l2p(_.x):eC.c2p(_.x),j=o.linearized?eE.l2p(_.y):eE.c2p(_.y);if(F===N){if(eL&&(F=eC.c2p(_.x,!0)),F===N)return!1;eP&&j===N&&(F*=Math.abs(eC._m*eO*(eC._m>0?Z:X)/(eE._m*eI*(eE._m>0?Z:X)))),F*=1e3}if(j===N){if(eP&&(j=eE.c2p(_.y,!0)),j===N)return!1;j*=1e3}return[F,j]}function crossesViewport(i,o,s,_){var F=s-i,N=_-o,j=.5-i,Z=.5-o,X=F*F+N*N,$=F*j+N*Z;if($>0&&$<X){var ee=j*N-Z*F;if(ee*ee<X)return!0}}function getTolerance(i,o){var s=i[0]/eI,_=i[1]/eO,F=Math.max(0,-s,s-1,-_,_-1);return F&&void 0!==ey&&crossesViewport(s,_,ey,ev)&&(F=0),F&&o&&crossesViewport(s,_,o[0]/eI,o[1]/eO)&&(F=0),(1+er.toleranceGrowth*F)*eF}function ptDist(i,o){var s=i[0]-o[0],_=i[1]-o[1];return Math.sqrt(s*s+_*_)}var eZ=er.maxScreensAway,eY=-eI*eZ,eX=eI*(1+eZ),eK=-eO*eZ,eJ=eO*(1+eZ),e$=[[eY,eK,eX,eK],[eX,eK,eX,eJ],[eX,eJ,eY,eJ],[eY,eJ,eY,eK]];function getLinearEdgeIntersections(i,o){for(var s=[],_=0,F=0;F<4;F++){var N=e$[F],j=ee(i[0],i[1],o[0],o[1],N[0],N[1],N[2],N[3]);j&&(!_||Math.abs(j.x-s[0][0])>1||Math.abs(j.y-s[0][1])>1)&&(j=[j.x,j.y],_&&ptDist(j,i)<ptDist(s[0],i)?s.unshift(j):s.push(j),_++)}return s}function onlyConstrainedPoint(i){if(i[0]<eY||i[0]>eX||i[1]<eK||i[1]>eJ)return[et(i[0],eY,eX),et(i[1],eK,eJ)]}function sameEdge(i,o){if(i[0]===o[0]&&(i[0]===eY||i[0]===eX)||i[1]===o[1]&&(i[1]===eK||i[1]===eJ))return!0}function getHVEdgeIntersections(i,o){var s=[],_=onlyConstrainedPoint(i),F=onlyConstrainedPoint(o);return _&&F&&sameEdge(_,F)||(_&&s.push(_),F&&s.push(F)),s}function getABAEdgeIntersections(i,o,s){return function(_,F){var N,j=onlyConstrainedPoint(_),Z=onlyConstrainedPoint(F),X=[];if(j&&Z&&sameEdge(j,Z))return X;j&&X.push(j),Z&&X.push(Z);var ee=2*$.constrain((_[i]+F[i])/2,o,s)-((j||_)[i]+(Z||F)[i]);return ee&&(N=j&&Z?ee>0==j[i]>Z[i]?j:Z:j||Z,N[i]+=ee),X}}function getClosestCorner(i,o){var s=o[0]-i[0],_=(o[1]-i[1])/s;return(i[1]*o[0]-o[1]*i[0])/s>0?[_>0?eY:eX,eJ]:[_>0?eX:eY,eK]}function updateEdge(i){var o=i[0],s=i[1],_=o===eG[eW-1][0],F=s===eG[eW-1][1];if(!_||!F){if(eW>1){var N=o===eG[eW-2][0],j=s===eG[eW-2][1];_&&(o===eY||o===eX)&&N?j?eW--:eG[eW-1]=i:F&&(s===eK||s===eJ)&&j?N?eW--:eG[eW-1]=i:eG[eW++]=i}else eG[eW++]=i}}function updateEdgesForReentry(i){eG[eW-1][0]!==i[0]&&eG[eW-1][1]!==i[1]&&updateEdge([ew,eT]),updateEdge(i),ek=null,ew=eT=0}"linear"===ez||"spline"===ez?eS=getLinearEdgeIntersections:"hv"===ez||"vh"===ez?eS=getHVEdgeIntersections:"hvh"===ez?eS=getABAEdgeIntersections(0,eY,eX):"vhv"===ez&&(eS=getABAEdgeIntersections(1,eK,eJ));var eQ=$.isArrayOrTypedArray(eR);function addPt(o){if(o&&eD&&(o.i=s,o.d=i,o.trace=eM,o.marker=eQ?eR[o.i]:eR,o.backoff=eD),ey=o[0]/eI,ev=o[1]/eO,ex=o[0]<eY?eY:o[0]>eX?eX:0,e_=o[1]<eK?eK:o[1]>eJ?eJ:0,ex||e_){if(eW){if(ek){var _=eS(ek,o);_.length>1&&(updateEdgesForReentry(_[0]),eG[eW++]=_[1])}else eA=eS(eG[eW-1],o)[0],eG[eW++]=eA}else eG[eW++]=[ex||o[0],e_||o[1]];var F=eG[eW-1];ex&&e_&&(F[0]!==ex||F[1]!==e_)?(ek&&(ew!==ex&&eT!==e_?ew&&eT?updateEdge(getClosestCorner(ek,o)):updateEdge([ew||ex,eT||e_]):ew&&eT&&updateEdge([ew,eT])),updateEdge([ex,e_])):ew-ex&&eT-e_&&updateEdge([ex||ew,e_||eT]),ek=o,ew=ex,eT=e_}else ek&&updateEdgesForReentry(eS(ek,o)[0]),eG[eW++]=o}for(s=0;s<eH;s++)if(F=getPt(s)){for(eW=0,ek=null,addPt(F),s++;s<eH;s++){if(!(en=getPt(s))){if(eB)continue;break}if(!eN||!o.simplify){addPt(en);continue}var e0=getPt(s+1);if(eu=ptDist(en,F),!(!(ej&&(0===eW||eW===eH-1))&&eu<getTolerance(en,e0)*eU)){for(el=[(en[0]-F[0])/eu,(en[1]-F[1])/eu],ei=F,ef=eu,ed=ep=eg=0,es=!1,j=en,s++;s<i.length;s++){if(eo=e0,e0=getPt(s+1),!eo){if(eB)continue;break}if(ep=Math.min(ep,em=(ec=[eo[0]-F[0],eo[1]-F[1]])[0]*el[1]-ec[1]*el[0]),(eg=Math.max(eg,em))-ep>getTolerance(eo,e0))break;j=eo,(eh=ec[0]*el[0]+ec[1]*el[1])>ef?(ef=eh,en=eo,es=!1):eh<ed&&(ed=eh,ei=eo,es=!0)}if(es?(addPt(en),j!==ei&&addPt(ei)):(ei!==F&&addPt(ei),j!==en&&addPt(en)),addPt(j),s>=i.length||!eo)break;addPt(eo),F=eo}}ek&&updateEdge([ew||ek[0],eT||ek[1]]),eV.push(eG.slice(0,eW))}var e1=ez.slice(ez.length-1);if(eD&&"h"!==e1&&"v"!==e1){for(var e2=!1,e3=-1,e5=[],e4=0;e4<eV.length;e4++)for(var e6=0;e6<eV[e4].length-1;e6++){var e8=eV[e4][e6],e7=eV[e4][e6+1],e9=_.applyBackoff(e7,e8);(e9[0]!==e7[0]||e9[1]!==e7[1])&&(e2=!0),e5[e3+1]||(e5[++e3]=[e8,[e9[0],e9[1]]])}return e2?e5:eV}return eV}},94039:function(i){"use strict";i.exports=function(i,o,s){"spline"===s("line.shape")&&s("line.smoothing")}},68687:function(i){"use strict";var o={tonextx:1,tonexty:1,tonext:1};i.exports=function(i,s,_){var F,N,j,Z,X,$={},ee=!1,et=-1,er=0,en=-1;for(N=0;N<_.length;N++)(j=(F=_[N][0].trace).stackgroup||"")?j in $?X=$[j]:(X=$[j]=er,er++):F.fill in o&&en>=0?X=en:(X=en=er,er++),X<et&&(ee=!0),F._groupIndex=et=X;var ei=_.slice();ee&&ei.sort(function(i,o){var s=i[0].trace,_=o[0].trace;return s._groupIndex-_._groupIndex||s.index-_.index});var eo={};for(N=0;N<ei.length;N++)j=(F=ei[N][0].trace).stackgroup||"",!0===F.visible?(F._nexttrace=null,F.fill in o&&(Z=eo[j],F._prevtrace=Z||null,Z&&(Z._nexttrace=F)),F._ownfill=F.fill&&("tozero"===F.fill.substr(0,6)||"toself"===F.fill||"to"===F.fill.substr(0,2)&&!F._prevtrace),eo[j]=F):F._prevtrace=F._nexttrace=F._ownfill=null;return ei}},39984:function(i,o,s){"use strict";var _=s(92770);i.exports=function(i,o){o||(o=2);var s=i.marker,F=s.sizeref||1,N=s.sizemin||0,j="area"===s.sizemode?function(i){return Math.sqrt(i/F)}:function(i){return i/F};return function(i){var s=j(i/o);return _(s)&&s>0?Math.max(s,N):0}}},4898:function(i){"use strict";i.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(i,o,s){"use strict";var _=s(7901),F=s(52075).hasColorscale,N=s(1586),j=s(34098);i.exports=function(i,o,s,Z,X,$){var ee=j.isBubble(i),et=(i.line||{}).color;$=$||{},et&&(s=et),X("marker.symbol"),X("marker.opacity",ee?.7:1),X("marker.size"),$.noAngle||(X("marker.angle"),$.noAngleRef||X("marker.angleref"),$.noStandOff||X("marker.standoff")),X("marker.color",s),F(i,"marker")&&N(i,o,Z,X,{prefix:"marker.",cLetter:"c"}),$.noSelect||(X("selected.marker.color"),X("unselected.marker.color"),X("selected.marker.size"),X("unselected.marker.size")),$.noLine||(X("marker.line.color",et&&!Array.isArray(et)&&o.marker.color!==et?et:ee?_.background:_.defaultLine),F(i,"marker.line")&&N(i,o,Z,X,{prefix:"marker.line.",cLetter:"c"}),X("marker.line.width",ee?1:0)),ee&&(X("marker.sizeref"),X("marker.sizemin"),X("marker.sizemode")),$.gradient&&"none"!==X("marker.gradient.type")&&X("marker.gradient.color")}},73927:function(i,o,s){"use strict";var _=s(71828).dateTick0,F=s(50606).ONEWEEK;function getPeriod0Dflt(i,o){return i%F==0?_(o,1):_(o,0)}i.exports=function(i,o,s,_,F){if(F||(F={x:!0,y:!0}),F.x){var N=_("xperiod");N&&(_("xperiod0",getPeriod0Dflt(N,o.xcalendar)),_("xperiodalignment"))}if(F.y){var j=_("yperiod");j&&(_("yperiod0",getPeriod0Dflt(j,o.ycalendar)),_("yperiodalignment"))}}},32663:function(i,o,s){"use strict";var _=s(39898),F=s(73972),N=s(71828),j=N.ensureSingle,Z=N.identity,X=s(91424),$=s(34098),ee=s(34621),et=s(68687),er=s(61082).tester;function createFills(i,o,s){o.each(function(o){var F=j(_.select(this),"g","fills");X.setClipUrl(F,s.layerClipId,i);var N=o[0].trace,$=[];N._ownfill&&$.push("_ownFill"),N._nexttrace&&$.push("_nextFill");var ee=F.selectAll("g").data($,Z);ee.enter().append("g"),ee.exit().each(function(i){N[i]=null}).remove(),ee.order().each(function(i){N[i]=j(_.select(this),"path","js-fill")})})}function plotOne(i,o,s,et,en,ei,eo){var es,el,ec,eu,ef,ed,eh,ep,eg,em,ey,ev=i._context.staticPlot;selectMarkers(i,o,s,et,en);var ex=!!eo&&eo.duration>0;function transition(i){return ex?i.transition():i}var e_=s.xaxis,ew=s.yaxis,eT=et[0].trace,ek=eT.line,eA=_.select(ei),eS=j(eA,"g","errorbars"),eM=j(eA,"g","lines"),eC=j(eA,"g","points"),eE=j(eA,"g","text");if(F.getComponentMethod("errorbars","plot")(i,eS,s,eo),!0===eT.visible){transition(eA).style("opacity",eT.opacity);var eL=eT.fill.charAt(eT.fill.length-1);"x"!==eL&&"y"!==eL&&(eL=""),et[0][s.isRangePlot?"nodeRangePlot3":"node3"]=eA;var eP="",eI=[],eO=eT._prevtrace;eO&&(eP=eO._prevRevpath||"",ec=eO._nextFill,eI=eO._polygons);var eD="",eR="",eB=[],eF=N.noop;if(el=eT._ownFill,$.hasLines(eT)||"none"!==eT.fill){for(ec&&ec.datum(et),-1!==["hv","vh","hvh","vhv"].indexOf(ek.shape)?(ed=X.steps(ek.shape),eh=X.steps(ek.shape.split("").reverse().join(""))):ed=eh="spline"===ek.shape?function(i){var o=i[i.length-1];return i.length>1&&i[0][0]===o[0]&&i[0][1]===o[1]?X.smoothclosed(i.slice(1),ek.smoothing):X.smoothopen(i,ek.smoothing)}:function(i){return"M"+i.join("L")},es=0,eB=ee(et,{xaxis:e_,yaxis:ew,trace:eT,connectGaps:eT.connectgaps,baseTolerance:Math.max(ek.width||1,3)/4,shape:ek.shape,backoff:ek.backoff,simplify:ek.simplify,fill:eT.fill}),ey=eT._polygons=Array(eB.length);es<eB.length;es++)eT._polygons[es]=er(eB[es]);eB.length&&(ep=eB[0][0],em=(eg=eB[eB.length-1])[eg.length-1]),eF=function(i){return function(o){if(eu=ed(o),ef=eh(o.reverse()),eD?eL?(eD+="L"+eu.substr(1),eR=ef+"L"+eR.substr(1)):(eD+="Z"+eu,eR=ef+"Z"+eR):(eD=eu,eR=ef),$.hasLines(eT)){var s=_.select(this);if(s.datum(et),i)transition(s.style("opacity",0).attr("d",eu).call(X.lineGroupStyle)).style("opacity",1);else{var F=transition(s);F.attr("d",eu),X.singleLineStyle(et,F)}}}}}var ez=eM.selectAll(".js-line").data(eB);transition(ez.exit()).style("opacity",0).remove(),ez.each(eF(!1)),ez.enter().append("path").classed("js-line",!0).style("vector-effect",ev?"none":"non-scaling-stroke").call(X.lineGroupStyle).each(eF(!0)),X.setClipUrl(ez,s.layerClipId,i),eB.length?(el?(el.datum(et),ep&&em&&(eL?("y"===eL?ep[1]=em[1]=ew.c2p(0,!0):"x"===eL&&(ep[0]=em[0]=e_.c2p(0,!0)),transition(el).attr("d","M"+em+"L"+ep+"L"+eD.substr(1)).call(X.singleFillStyle,i)):transition(el).attr("d",eD+"Z").call(X.singleFillStyle,i))):ec&&("tonext"===eT.fill.substr(0,6)&&eD&&eP?("tonext"===eT.fill?transition(ec).attr("d",eD+"Z"+eP+"Z").call(X.singleFillStyle,i):transition(ec).attr("d",eD+"L"+eP.substr(1)+"Z").call(X.singleFillStyle,i),eT._polygons=eT._polygons.concat(eI)):(clearFill(ec),eT._polygons=null)),eT._prevRevpath=eR,eT._prevPolygons=ey):(el?clearFill(el):ec&&clearFill(ec),eT._polygons=eT._prevRevpath=eT._prevPolygons=null),eC.datum(et),eE.datum(et),makePoints(eC,eE,et);var eN=!1===eT.cliponaxis?null:s.layerClipId;X.setClipUrl(eC,eN,i),X.setClipUrl(eE,eN,i)}function clearFill(i){transition(i).attr("d","M0,0Z")}function visFilter(i){return i.filter(function(i){return!i.gap&&i.vis})}function visFilterWithGaps(i){return i.filter(function(i){return i.vis})}function gapFilter(i){return i.filter(function(i){return!i.gap})}function keyFunc(i){return i.id}function getKeyFunc(i){if(i.ids)return keyFunc}function hideFilter(){return!1}function makePoints(o,F,N){var j,ee,et=N[0].trace,er=$.hasMarkers(et),en=$.hasText(et),ei=getKeyFunc(et),eo=hideFilter,es=hideFilter;if(er||en){var el=Z,ec=et.stackgroup,eu=ec&&"infer zero"===i._fullLayout._scatterStackOpts[e_._id+ew._id][ec].stackgaps;et.marker.maxdisplayed||et._needsCull?el=eu?visFilterWithGaps:visFilter:ec&&!eu&&(el=gapFilter),er&&(eo=el),en&&(es=el)}var ef=(j=o.selectAll("path.point").data(eo,ei)).enter().append("path").classed("point",!0);ex&&ef.call(X.pointStyle,et,i).call(X.translatePoints,e_,ew).style("opacity",0).transition().style("opacity",1),j.order(),er&&(ee=X.makePointStyleFns(et)),j.each(function(o){var F=_.select(this),N=transition(F);X.translatePoint(o,N,e_,ew)?(X.singlePointStyle(o,N,et,ee,i),s.layerClipId&&X.hideOutsideRangePoint(o,N,e_,ew,et.xcalendar,et.ycalendar),et.customdata&&F.classed("plotly-customdata",null!==o.data&&void 0!==o.data)):N.remove()}),ex?j.exit().transition().style("opacity",0).remove():j.exit().remove(),(j=F.selectAll("g").data(es,ei)).enter().append("g").classed("textpoint",!0).append("text"),j.order(),j.each(function(i){var o=_.select(this),F=transition(o.select("text"));X.translatePoint(i,F,e_,ew)?s.layerClipId&&X.hideOutsideRangePoint(i,o,e_,ew,et.xcalendar,et.ycalendar):o.remove()}),j.selectAll("text").call(X.textPointStyle,et,i).each(function(i){var o=e_.c2p(i.x),s=ew.c2p(i.y);_.select(this).selectAll("tspan.line").each(function(){transition(_.select(this)).attr({x:o,y:s})})}),j.exit().remove()}}function selectMarkers(i,o,s,F,j){var Z=s.xaxis,X=s.yaxis,ee=_.extent(N.simpleMap(Z.range,Z.r2c)),et=_.extent(N.simpleMap(X.range,X.r2c)),er=F[0].trace;if($.hasMarkers(er)){var en=er.marker.maxdisplayed;if(0!==en){var ei=F.filter(function(i){return i.x>=ee[0]&&i.x<=ee[1]&&i.y>=et[0]&&i.y<=et[1]}),eo=Math.ceil(ei.length/en),es=0;j.forEach(function(i,s){var _=i[0].trace;$.hasMarkers(_)&&_.marker.maxdisplayed>0&&s<o&&es++});var el=Math.round(es*eo/3+Math.floor(es/3)*eo/7.1);F.forEach(function(i){delete i.vis}),ei.forEach(function(i,o){0===Math.round((o+el)%eo)&&(i.vis=!0)})}}}i.exports=function(i,o,s,F,N,j){var Z,X,$=!N,ee=!!N&&N.duration>0,er=et(i,o,s);(Z=F.selectAll("g.trace").data(er,function(i){return i[0].trace.uid})).enter().append("g").attr("class",function(i){return"trace scatter trace"+i[0].trace.uid}).style("stroke-miterlimit",2),Z.order(),createFills(i,Z,o),ee?(j&&(X=j()),_.transition().duration(N.duration).ease(N.easing).each("end",function(){X&&X()}).each("interrupt",function(){X&&X()}).each(function(){F.selectAll("g.trace").each(function(s,_){plotOne(i,_,o,s,er,this,N)})})):Z.each(function(s,_){plotOne(i,_,o,s,er,this,N)}),$&&Z.exit().remove(),F.selectAll("path:not([d])").remove()}},98002:function(i,o,s){"use strict";var _=s(34098);i.exports=function(i,o){var s,F,N,j,Z=i.cd,X=i.xaxis,$=i.yaxis,ee=[],et=Z[0].trace;if(!_.hasMarkers(et)&&!_.hasText(et))return[];if(!1===o)for(s=0;s<Z.length;s++)Z[s].selected=0;else for(s=0;s<Z.length;s++)F=Z[s],N=X.c2p(F.x),j=$.c2p(F.y),null!==F.i&&o.contains([N,j],!1,s,i)?(ee.push({pointNumber:F.i,x:X.c2d(F.x),y:$.c2d(F.y)}),F.selected=1):F.selected=0;return ee}},565:function(i){"use strict";var o=["orientation","groupnorm","stackgaps"];i.exports=function(i,s,_,F){var N=_._scatterStackOpts,j=F("stackgroup");if(j){var Z=s.xaxis+s.yaxis,X=N[Z];X||(X=N[Z]={});var $=X[j],ee=!1;$?$.traces.push(s):($=X[j]={traceIndices:[],traces:[s]},ee=!0);for(var et={orientation:s.x&&!s.y?"h":"v"},er=0;er<o.length;er++){var en=o[er],ei=en+"Found";if(!$[ei]){var eo=void 0!==i[en],es="orientation"===en;if((eo||ee)&&($[en]=F(en,et[en]),es&&($.fillDflt="h"===$[en]?"tonextx":"tonexty"),eo&&($[ei]=!0,!ee&&(delete $.traces[0][en],es))))for(var el=0;el<$.traces.length-1;el++){var ec=$.traces[el];ec._input.fill!==ec.fill&&(ec.fill=$.fillDflt)}}}return $}}},16296:function(i,o,s){"use strict";var _=s(39898),F=s(91424),N=s(73972);function style(i){var o=_.select(i).selectAll("g.trace.scatter");o.style("opacity",function(i){return i[0].trace.opacity}),o.selectAll("g.points").each(function(o){stylePoints(_.select(this),o.trace||o[0].trace,i)}),o.selectAll("g.text").each(function(o){styleText(_.select(this),o.trace||o[0].trace,i)}),o.selectAll("g.trace path.js-line").call(F.lineGroupStyle),o.selectAll("g.trace path.js-fill").call(F.fillGroupStyle,i),N.getComponentMethod("errorbars","style")(o)}function stylePoints(i,o,s){F.pointStyle(i.selectAll("path.point"),o,s)}function styleText(i,o,s){F.textPointStyle(i.selectAll("text"),o,s)}function styleOnSelect(i,o,s){var _=o[0].trace;_.selectedpoints?(F.selectedPointStyle(s.selectAll("path.point"),_),F.selectedTextStyle(s.selectAll("text"),_)):(stylePoints(s,_,i),styleText(s,_,i))}i.exports={style:style,stylePoints:stylePoints,styleText:styleText,styleOnSelect:styleOnSelect}},34098:function(i,o,s){"use strict";var _=s(71828);i.exports={hasLines:function(i){return i.visible&&i.mode&&-1!==i.mode.indexOf("lines")},hasMarkers:function(i){return i.visible&&(i.mode&&-1!==i.mode.indexOf("markers")||"splom"===i.type)},hasText:function(i){return i.visible&&i.mode&&-1!==i.mode.indexOf("text")},isBubble:function(i){return _.isPlainObject(i.marker)&&_.isArrayOrTypedArray(i.marker.size)}}},82410:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o,s,F,N){N=N||{},F("textposition"),_.coerceFont(F,"textfont",N.font||s.font),N.noSelect||(F("selected.textfont.color"),F("unselected.textfont.color"))}},67513:function(i,o,s){"use strict";var _=s(71828),F=s(73972);i.exports=function(i,o,s,N){var j,Z=N("x"),X=N("y");if(F.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y"],s),Z){var $=_.minRowLength(Z);X?j=Math.min($,_.minRowLength(X)):(j=$,N("y0"),N("dy"))}else{if(!X)return 0;j=_.minRowLength(X),N("x0"),N("dx")}return o._length=j,j}},44542:function(i,o,s){"use strict";var _=s(82196),F=s(50693),N=s(12663).axisHoverFormat,j=s(5386).fF,Z=s(5386).si,X=s(9012),$=s(29659),ee=s(87381),et=s(1426).extendFlat,er=s(30962).overrideAll,en=s(78607),ei=_.line,eo=_.marker,es=eo.line,el=et({width:ei.width,dash:{valType:"enumerated",values:en($),dflt:"solid"}},F("line"));function makeProjectionAttr(i){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var ec=i.exports=er({x:_.x,y:_.y,z:{valType:"data_array"},text:et({},_.text,{}),texttemplate:Z({},{}),hovertext:et({},_.hovertext,{}),hovertemplate:j(),xhoverformat:N("x"),yhoverformat:N("y"),zhoverformat:N("z"),mode:et({},_.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:makeProjectionAttr("x"),y:makeProjectionAttr("y"),z:makeProjectionAttr("z")},connectgaps:_.connectgaps,line:el,marker:et({symbol:{valType:"enumerated",values:en(ee),dflt:"circle",arrayOk:!0},size:et({},eo.size,{dflt:8}),sizeref:eo.sizeref,sizemin:eo.sizemin,sizemode:eo.sizemode,opacity:et({},eo.opacity,{arrayOk:!1}),colorbar:eo.colorbar,line:et({width:et({},es.width,{arrayOk:!1})},F("marker.line"))},F("marker")),textposition:et({},_.textposition,{dflt:"top center"}),textfont:{color:_.textfont.color,size:_.textfont.size,family:et({},_.textfont.family,{arrayOk:!1})},opacity:X.opacity,hoverinfo:et({},X.hoverinfo)},"calc","nested");ec.x.editType=ec.y.editType=ec.z.editType="calc+clearAxisTypes"},36563:function(i,o,s){"use strict";var _=s(75225),F=s(36922);i.exports=function(i,o){var s=[{x:!1,y:!1,trace:o,t:{}}];return _(s,o),F(i,o),s}},67336:function(i,o,s){"use strict";var _=s(73972);function calculateAxisErrors(i,o,s,F){if(!o||!o.visible)return null;for(var N=_.getComponentMethod("errorbars","makeComputeError")(o),j=Array(i.length),Z=0;Z<i.length;Z++){var X=N(+i[Z],Z);if("log"===F.type){var $=F.c2l(i[Z]),ee=i[Z]-X[0],et=i[Z]+X[1];if(j[Z]=[(F.c2l(ee,!0)-$)*s,(F.c2l(et,!0)-$)*s],ee>0){var er=F.c2l(ee);F._lowerLogErrorBound||(F._lowerLogErrorBound=er),F._lowerErrorBound=Math.min(F._lowerLogErrorBound,er)}}else j[Z]=[-X[0]*s,X[1]*s]}return j}function dataLength(i){for(var o=0;o<i.length;o++)if(i[o])return i[o].length;return 0}function calculateErrors(i,o,s){var _=[calculateAxisErrors(i.x,i.error_x,o[0],s.xaxis),calculateAxisErrors(i.y,i.error_y,o[1],s.yaxis),calculateAxisErrors(i.z,i.error_z,o[2],s.zaxis)],F=dataLength(_);if(0===F)return null;for(var N=Array(F),j=0;j<F;j++){for(var Z=[[0,0,0],[0,0,0]],X=0;X<3;X++)if(_[X])for(var $=0;$<2;$++)Z[$][X]=_[X][j][$];N[j]=Z}return N}i.exports=calculateErrors},58925:function(i,o,s){"use strict";var _=s(9330).gl_line3d,F=s(9330).gl_scatter3d,N=s(9330).gl_error3d,j=s(9330).gl_mesh3d,Z=s(9330).delaunay_triangulate,X=s(71828),$=s(78614),ee=s(81697).formatColor,et=s(39984),er=s(29659),en=s(87381),ei=s(89298),eo=s(23469).appendArrayPointValue,es=s(67336);function LineWithMarkers(i,o){this.scene=i,this.uid=o,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var el=LineWithMarkers.prototype;function constructDelaunay(i,o,s){var _,F=(s+1)%3,N=(s+2)%3,j=[],X=[];for(_=0;_<i.length;++_){var $=i[_];!(isNaN($[F])||!isFinite($[F])||isNaN($[N]))&&isFinite($[N])&&(j.push([$[F],$[N]]),X.push(_))}var ee=Z(j);for(_=0;_<ee.length;++_)for(var et=ee[_],er=0;er<et.length;++er)et[er]=X[et[er]];return{positions:i,cells:ee,meshColor:o}}function calculateErrorParams(i){for(var o=[0,0,0],s=[[0,0,0],[0,0,0],[0,0,0]],_=[1,1,1],F=0;F<3;F++){var N=i[F];N&&!1!==N.copy_zstyle&&!1!==i[2].visible&&(N=i[2]),N&&N.visible&&(o[F]=N.width/2,s[F]=$(N.color),_[F]=N.thickness)}return{capSize:o,color:s,lineWidth:_}}function parseAlignmentX(i){return null==i?0:i.indexOf("left")>-1?-1:i.indexOf("right")>-1?1:0}function parseAlignmentY(i){return null==i?0:i.indexOf("top")>-1?-1:i.indexOf("bottom")>-1?1:0}function calculateTextOffset(i){var o=[0,0];if(Array.isArray(i))for(var s=0;s<i.length;s++)o[s]=[0,0],i[s]&&(o[s][0]=parseAlignmentX(i[s]),o[s][1]=parseAlignmentY(i[s]));else o[0]=parseAlignmentX(i),o[1]=parseAlignmentY(i);return o}function calculateSize(i,o){return o(4*i)}function calculateSymbol(i){return en[i]}function formatParam(i,o,s,_,F){var N=null;if(X.isArrayOrTypedArray(i)){N=[];for(var j=0;j<o;j++)void 0===i[j]?N[j]=_:N[j]=s(i[j],F)}else N=s(i,X.identity);return N}function convertPlotlyOptions(i,o){var s,_,F,N,j,Z,er=[],en=i.fullSceneLayout,el=i.dataScale,ec=en.xaxis,eu=en.yaxis,ef=en.zaxis,ed=o.marker,eh=o.line,ep=o.x||[],eg=o.y||[],em=o.z||[],ey=ep.length,ev=o.xcalendar,ex=o.ycalendar,e_=o.zcalendar;for(j=0;j<ey;j++)s=ec.d2l(ep[j],0,ev)*el[0],_=eu.d2l(eg[j],0,ex)*el[1],F=ef.d2l(em[j],0,e_)*el[2],er[j]=[s,_,F];if(Array.isArray(o.text))Z=o.text;else if(void 0!==o.text)for(j=0,Z=Array(ey);j<ey;j++)Z[j]=o.text;function formatter(i,o){var s=en[i];return ei.tickText(s,s.d2l(o),!0).text}var ew=o.texttemplate;if(ew){var eT=i.fullLayout._d3locale,ek=Array.isArray(ew),eA=ek?Math.min(ew.length,ey):ey,eS=ek?function(i){return ew[i]}:function(){return ew};for(j=0,Z=Array(eA);j<eA;j++){var eM={x:ep[j],y:eg[j],z:em[j]},eC={xLabel:formatter("xaxis",ep[j]),yLabel:formatter("yaxis",eg[j]),zLabel:formatter("zaxis",em[j])},eE={};eo(eE,o,j);var eL=o._meta||{};Z[j]=X.texttemplateString(eS(j),eC,eT,eE,eM,eL)}}if(N={position:er,mode:o.mode,text:Z},"line"in o&&(N.lineColor=ee(eh,1,ey),N.lineWidth=eh.width,N.lineDashes=eh.dash),"marker"in o){var eP=et(o);N.scatterColor=ee(ed,1,ey),N.scatterSize=formatParam(ed.size,ey,calculateSize,20,eP),N.scatterMarker=formatParam(ed.symbol,ey,calculateSymbol,"●"),N.scatterLineWidth=ed.line.width,N.scatterLineColor=ee(ed.line,1,ey),N.scatterAngle=0}"textposition"in o&&(N.textOffset=calculateTextOffset(o.textposition),N.textColor=ee(o.textfont,1,ey),N.textSize=formatParam(o.textfont.size,ey,X.identity,12),N.textFont=o.textfont.family,N.textAngle=0);var eI=["x","y","z"];for(j=0,N.project=[!1,!1,!1],N.projectScale=[1,1,1],N.projectOpacity=[1,1,1];j<3;++j){var eO=o.projection[eI[j]];(N.project[j]=eO.show)&&(N.projectOpacity[j]=eO.opacity,N.projectScale[j]=eO.scale)}N.errorBounds=es(o,el,en);var eD=calculateErrorParams([o.error_x,o.error_y,o.error_z]);return N.errorColor=eD.color,N.errorLineWidth=eD.lineWidth,N.errorCapSize=eD.capSize,N.delaunayAxis=o.surfaceaxis,N.delaunayColor=$(o.surfacecolor),N}function _arrayToColor(i){if(X.isArrayOrTypedArray(i)){var o=i[0];return X.isArrayOrTypedArray(o)&&(i=o),"rgb("+i.slice(0,3).map(function(i){return Math.round(255*i)})+")"}return null}function arrayToColor(i){return X.isArrayOrTypedArray(i)?4===i.length&&"number"==typeof i[0]?_arrayToColor(i):i.map(_arrayToColor):null}function createLineWithMarkers(i,o){var s=new LineWithMarkers(i,o.uid);return s.update(o),s}el.handlePick=function(i){if(i.object&&(i.object===this.linePlot||i.object===this.delaunayMesh||i.object===this.textMarkers||i.object===this.scatterPlot)){var o=i.index=i.data.index;return i.object.highlight&&i.object.highlight(null),this.scatterPlot&&(i.object=this.scatterPlot,this.scatterPlot.highlight(i.data)),i.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[o]||0===this.textLabels[o])&&(i.textLabel=this.textLabels[o]):i.textLabel=this.textLabels),i.traceCoordinate=[this.data.x[o],this.data.y[o],this.data.z[o]],!0}},el.update=function(i){var o,s,Z,X,$=this.scene.glplot.gl,ee=er.solid;this.data=i;var et=convertPlotlyOptions(this.scene,i);"mode"in et&&(this.mode=et.mode),"lineDashes"in et&&et.lineDashes in er&&(ee=er[et.lineDashes]),this.color=arrayToColor(et.scatterColor)||arrayToColor(et.lineColor),this.dataPoints=et.position,o={gl:this.scene.glplot.gl,position:et.position,color:et.lineColor,lineWidth:et.lineWidth||1,dashes:ee[0],dashScale:ee[1],opacity:i.opacity,connectGaps:i.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(o):(this.linePlot=_(o),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var en=i.opacity;if(i.marker&&void 0!==i.marker.opacity&&(en*=i.marker.opacity),s={gl:this.scene.glplot.gl,position:et.position,color:et.scatterColor,size:et.scatterSize,glyph:et.scatterMarker,opacity:en,orthographic:!0,lineWidth:et.scatterLineWidth,lineColor:et.scatterLineColor,project:et.project,projectScale:et.projectScale,projectOpacity:et.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(s):(this.scatterPlot=F(s),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),X={gl:this.scene.glplot.gl,position:et.position,glyph:et.text,color:et.textColor,size:et.textSize,angle:et.textAngle,alignment:et.textOffset,font:et.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:i.opacity},this.textLabels=i.hovertext||i.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(X):(this.textMarkers=F(X),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),Z={gl:this.scene.glplot.gl,position:et.position,color:et.errorColor,error:et.errorBounds,lineWidth:et.errorLineWidth,capSize:et.errorCapSize,opacity:i.opacity},this.errorBars?et.errorBounds?this.errorBars.update(Z):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):et.errorBounds&&(this.errorBars=N(Z),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),et.delaunayAxis>=0){var ei=constructDelaunay(et.position,et.delaunayColor,et.delaunayAxis);ei.opacity=i.opacity,this.delaunayMesh?this.delaunayMesh.update(ei):(ei.gl=$,this.delaunayMesh=j(ei),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},el.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},i.exports=createLineWithMarkers},21428:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=s(34098),j=s(49508),Z=s(11058),X=s(82410),$=s(44542);function handleXYZDefaults(i,o,s,F){var N=0,j=s("x"),Z=s("y"),X=s("z");return _.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y","z"],F),j&&Z&&X&&(N=Math.min(j.length,Z.length,X.length),o._length=o._xlength=o._ylength=o._zlength=N),N}i.exports=function(i,o,s,ee){function coerce(s,_){return F.coerce(i,o,$,s,_)}if(!handleXYZDefaults(i,o,coerce,ee)){o.visible=!1;return}coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("xhoverformat"),coerce("yhoverformat"),coerce("zhoverformat"),coerce("mode"),N.hasLines(o)&&(coerce("connectgaps"),Z(i,o,s,ee,coerce)),N.hasMarkers(o)&&j(i,o,s,ee,coerce,{noSelect:!0,noAngle:!0}),N.hasText(o)&&(coerce("texttemplate"),X(i,o,ee,coerce,{noSelect:!0}));var et=(o.line||{}).color,er=(o.marker||{}).color;coerce("surfaceaxis")>=0&&coerce("surfacecolor",et||er);for(var en=["x","y","z"],ei=0;ei<3;++ei){var eo="projection."+en[ei];coerce(eo+".show")&&(coerce(eo+".opacity"),coerce(eo+".scale"))}var es=_.getComponentMethod("errorbars","supplyDefaults");es(i,o,et||er||s,{axis:"z"}),es(i,o,et||er||s,{axis:"y",inherit:"z"}),es(i,o,et||er||s,{axis:"x",inherit:"z"})}},13551:function(i,o,s){"use strict";i.exports={plot:s(58925),attributes:s(44542),markerSymbols:s(87381),supplyDefaults:s(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:s(36563),moduleType:"trace",name:"scatter3d",basePlotModule:s(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(i,o,s){"use strict";var _=s(82196),F=s(9012),N=s(5386).fF,j=s(5386).si,Z=s(50693),X=s(1426).extendFlat,$=_.marker,ee=_.line,et=$.line;i.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:X({},_.mode,{dflt:"markers"}),text:X({},_.text,{}),texttemplate:j({editType:"plot"},{keys:["a","b","text"]}),hovertext:X({},_.hovertext,{}),line:{color:ee.color,width:ee.width,dash:ee.dash,backoff:ee.backoff,shape:X({},ee.shape,{values:["linear","spline"]}),smoothing:ee.smoothing,editType:"calc"},connectgaps:_.connectgaps,fill:X({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,marker:X({symbol:$.symbol,opacity:$.opacity,maxdisplayed:$.maxdisplayed,angle:$.angle,angleref:$.angleref,standoff:$.standoff,size:$.size,sizeref:$.sizeref,sizemin:$.sizemin,sizemode:$.sizemode,line:X({width:et.width,editType:"calc"},Z("marker.line")),gradient:$.gradient,editType:"calc"},Z("marker")),textfont:_.textfont,textposition:_.textposition,selected:_.selected,unselected:_.unselected,hoverinfo:X({},F.hoverinfo,{flags:["a","b","text","name"]}),hoveron:_.hoveron,hovertemplate:N()}},34618:function(i,o,s){"use strict";var _=s(92770),F=s(36922),N=s(75225),j=s(66279),Z=s(47761).calcMarkerSize,X=s(22882);i.exports=function(i,o){var s,$,ee,et=o._carpetTrace=X(i,o);if(et&&et.visible&&"legendonly"!==et.visible){o.xaxis=et.xaxis,o.yaxis=et.yaxis;var er=o._length,en=Array(er),ei=!1;for(s=0;s<er;s++)if($=o.a[s],ee=o.b[s],_($)&&_(ee)){var eo=et.ab2xy(+$,+ee,!0),es=et.isVisible(+$,+ee);es||(ei=!0),en[s]={x:eo[0],y:eo[1],a:$,b:ee,vis:es}}else en[s]={x:!1,y:!1};return o._needsCull=ei,en[0].carpet=et,en[0].trace=o,Z(o,er),F(i,o),N(en,o),j(en,o),en}}},98965:function(i,o,s){"use strict";var _=s(71828),F=s(47581),N=s(34098),j=s(49508),Z=s(11058),X=s(94039),$=s(82410),ee=s(28908),et=s(97001);i.exports=function(i,o,s,er){function coerce(s,F){return _.coerce(i,o,et,s,F)}coerce("carpet"),o.xaxis="x",o.yaxis="y";var en=coerce("a"),ei=coerce("b"),eo=Math.min(en.length,ei.length);if(!eo){o.visible=!1;return}o._length=eo,coerce("text"),coerce("texttemplate"),coerce("hovertext"),coerce("mode",eo<F.PTS_LINESONLY?"lines+markers":"lines"),N.hasLines(o)&&(Z(i,o,s,er,coerce,{backoff:!0}),X(i,o,coerce),coerce("connectgaps")),N.hasMarkers(o)&&j(i,o,s,er,coerce,{gradient:!0}),N.hasText(o)&&$(i,o,er,coerce);var es=[];(N.hasMarkers(o)||N.hasText(o))&&(coerce("marker.maxdisplayed"),es.push("points")),coerce("fill"),"none"===o.fill||(ee(i,o,s,coerce),N.hasLines(o)||X(i,o,coerce)),("tonext"===o.fill||"toself"===o.fill)&&es.push("fills"),"fills"!==coerce("hoveron",es.join("+")||"points")&&coerce("hovertemplate"),_.coerceSelectionMarkerOpacity(o,coerce)}},16165:function(i){"use strict";i.exports=function(i,o,s,_,F){var N=_[F];return i.a=N.a,i.b=N.b,i.y=N.y,i}},48953:function(i){"use strict";i.exports=function(i,o){var s={},_=o._carpet,F=_.ab2ij([i.a,i.b]),N=Math.floor(F[0]),j=F[0]-N,Z=Math.floor(F[1]),X=F[1]-Z,$=_.evalxy([],N,Z,j,X);return s.yLabel=$[1].toFixed(3),s}},22931:function(i,o,s){"use strict";var _=s(33720),F=s(71828).fillText;i.exports=function(i,o,s,N){var j=_(i,o,s,N);if(j&&!1!==j[0].index){var Z=j[0];if(void 0===Z.index){var X=1-Z.y0/i.ya._length,$=i.xa._length,ee=$*X/2,et=$-ee;return Z.x0=Math.max(Math.min(Z.x0,et),ee),Z.x1=Math.max(Math.min(Z.x1,et),ee),j}var er=Z.cd[Z.index];Z.a=er.a,Z.b=er.b,Z.xLabelVal=void 0,Z.yLabelVal=void 0;var en=Z.trace,ei=en._carpet,eo=en._module.formatLabels(er,en);Z.yLabel=eo.yLabel,delete Z.text;var es=[];if(!en.hovertemplate){var el=(er.hi||en.hoverinfo).split("+");-1!==el.indexOf("all")&&(el=["a","b","text"]),-1!==el.indexOf("a")&&textPart(ei.aaxis,er.a),-1!==el.indexOf("b")&&textPart(ei.baxis,er.b),es.push("y: "+Z.yLabel),-1!==el.indexOf("text")&&F(er,en,es),Z.extraText=es.join("<br>")}return j}function textPart(i,o){var s;s=i.labelprefix&&i.labelprefix.length>0?i.labelprefix.replace(/ = $/,""):i._hovertitle,es.push(s+": "+o.toFixed(3)+i.labelsuffix)}}},46858:function(i,o,s){"use strict";i.exports={attributes:s(97001),supplyDefaults:s(98965),colorbar:s(4898),formatLabels:s(48953),calc:s(34618),plot:s(1913),style:s(16296).style,styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(22931),selectPoints:s(98002),eventData:s(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:s(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(i,o,s){"use strict";var _=s(32663),F=s(89298),N=s(91424);i.exports=function(i,o,s,j){var Z,X,$,ee=s[0][0].carpet,et=F.getFromId(i,ee.xaxis||"x"),er=F.getFromId(i,ee.yaxis||"y"),en={xaxis:et,yaxis:er,plot:o.plot};for(Z=0;Z<s.length;Z++)(X=s[Z][0].trace)._xA=et,X._yA=er;for(_(i,en,s,j),Z=0;Z<s.length;Z++)X=s[Z][0].trace,$=j.selectAll("g.trace"+X.uid+" .js-line"),N.setClipUrl($,s[Z][0].carpet._clipPathId,i)}},19316:function(i,o,s){"use strict";var _=s(5386).fF,F=s(5386).si,N=s(82196),j=s(9012),Z=s(50693),X=s(79952).P,$=s(1426).extendFlat,ee=s(30962).overrideAll,et=N.marker,er=N.line,en=et.line;i.exports=ee({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:$({},N.mode,{dflt:"markers"}),text:$({},N.text,{}),texttemplate:F({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:$({},N.hovertext,{}),textfont:N.textfont,textposition:N.textposition,line:{color:er.color,width:er.width,dash:X},connectgaps:N.connectgaps,marker:$({symbol:et.symbol,opacity:et.opacity,angle:et.angle,angleref:$({},et.angleref,{values:["previous","up","north"]}),standoff:et.standoff,size:et.size,sizeref:et.sizeref,sizemin:et.sizemin,sizemode:et.sizemode,colorbar:et.colorbar,line:$({width:en.width},Z("marker.line")),gradient:et.gradient},Z("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:N.fillcolor,selected:N.selected,unselected:N.unselected,hoverinfo:$({},j.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:_()},"calc","nested")},84622:function(i,o,s){"use strict";var _=s(92770),F=s(50606).BADNUM,N=s(36922),j=s(75225),Z=s(66279),X=s(71828)._;function isNonBlankString(i){return i&&"string"==typeof i}i.exports=function(i,o){var s,$=Array.isArray(o.locations),ee=$?o.locations.length:o._length,et=Array(ee);s=o.geojson?function(i){return isNonBlankString(i)||_(i)}:isNonBlankString;for(var er=0;er<ee;er++){var en=et[er]={};if($){var ei=o.locations[er];en.loc=s(ei)?ei:null}else{var eo=o.lon[er],es=o.lat[er];_(eo)&&_(es)?en.lonlat=[+eo,+es]:en.lonlat=[F,F]}}return j(et,o),N(i,o),Z(et,o),ee&&(et[0].t={labels:{lat:X(i,"lat:")+" ",lon:X(i,"lon:")+" "}}),et}},10659:function(i,o,s){"use strict";var _=s(71828),F=s(34098),N=s(49508),j=s(11058),Z=s(82410),X=s(28908),$=s(19316);i.exports=function(i,o,s,ee){function coerce(s,F){return _.coerce(i,o,$,s,F)}var et=coerce("locations");if(et&&et.length){var er,en,ei=coerce("geojson");("string"==typeof ei&&""!==ei||_.isPlainObject(ei))&&(en="geojson-id"),"geojson-id"===coerce("locationmode",en)&&coerce("featureidkey"),er=et.length}else{var eo=coerce("lon")||[],es=coerce("lat")||[];er=Math.min(eo.length,es.length)}if(!er){o.visible=!1;return}o._length=er,coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("mode"),F.hasLines(o)&&(j(i,o,s,ee,coerce),coerce("connectgaps")),F.hasMarkers(o)&&N(i,o,s,ee,coerce,{gradient:!0}),F.hasText(o)&&(coerce("texttemplate"),Z(i,o,ee,coerce)),coerce("fill"),"none"!==o.fill&&X(i,o,s,coerce),_.coerceSelectionMarkerOpacity(o,coerce)}},84084:function(i){"use strict";i.exports=function(i,o,s,_,F){i.lon=o.lon,i.lat=o.lat,i.location=o.loc?o.loc:null;var N=_[F];return N.fIn&&N.fIn.properties&&(i.properties=N.fIn.properties),i}},82719:function(i,o,s){"use strict";var _=s(89298);i.exports=function(i,o,s){var F={},N=s[o.geo]._subplot.mockAxis,j=i.lonlat;return F.lonLabel=_.tickText(N,N.c2l(j[0]),!0).text,F.latLabel=_.tickText(N,N.c2l(j[1]),!0).text,F}},14977:function(i,o,s){"use strict";var _=s(30211),F=s(50606).BADNUM,N=s(34603),j=s(71828).fillText,Z=s(19316);function getExtraText(i,o,s,_){if(!i.hovertemplate){var F,N,X,$,ee=o.hi||i.hoverinfo,et="all"===ee?Z.hoverinfo.flags:ee.split("+"),er=-1!==et.indexOf("location")&&Array.isArray(i.locations),en=-1!==et.indexOf("lon"),ei=-1!==et.indexOf("lat"),eo=-1!==et.indexOf("text"),es=[];return er?es.push(o.loc):en&&ei?es.push("("+s.latLabel+"\xb0, "+s.lonLabel+"\xb0)"):en?es.push(_.lon+(s.lonLabel+"\xb0")):ei&&es.push(_.lat+(s.latLabel+"\xb0")),eo&&j(o,i,es),es.join("<br>")}}i.exports=function(i,o,s){var j=i.cd,Z=j[0].trace,X=i.xa,$=i.ya,ee=i.subplot,et=ee.projection.isLonLatOverEdges,er=ee.project;function distFn(i){var _=i.lonlat;if(_[0]===F||et(_))return 1/0;var N=er(_),j=er([o,s]),Z=Math.abs(N[0]-j[0]),X=Math.abs(N[1]-j[1]),$=Math.max(3,i.mrc||0);return Math.max(Math.sqrt(Z*Z+X*X)-$,1-3/$)}if(_.getClosest(j,distFn,i),!1!==i.index){var en=j[i.index],ei=en.lonlat,eo=[X.c2p(ei),$.c2p(ei)],es=en.mrc||1;i.x0=eo[0]-es,i.x1=eo[0]+es,i.y0=eo[1]-es,i.y1=eo[1]+es,i.loc=en.loc,i.lon=ei[0],i.lat=ei[1];var el={};el[Z.geo]={_subplot:ee};var ec=Z._module.formatLabels(en,Z,el);return i.lonLabel=ec.lonLabel,i.latLabel=ec.latLabel,i.color=N(Z,en),i.extraText=getExtraText(Z,en,i,j[0].t.labels),i.hovertemplate=Z.hovertemplate,[i]}}},17988:function(i,o,s){"use strict";i.exports={attributes:s(19316),supplyDefaults:s(10659),colorbar:s(4898),formatLabels:s(82719),calc:s(84622),calcGeoJSON:s(89171).calcGeoJSON,plot:s(89171).plot,style:s(33095),styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(14977),eventData:s(84084),selectPoints:s(20548),moduleType:"trace",name:"scattergeo",basePlotModule:s(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(90973).getTopojsonFeatures,j=s(18214),Z=s(41327),X=s(71739).findExtremes,$=s(50606).BADNUM,ee=s(47761).calcMarkerSize,et=s(34098),er=s(33095);function plot(i,o,s){var N=o.layers.frontplot.select(".scatterlayer"),Z=F.makeTraceGroups(N,s,"trace scattergeo");function removeBADNUM(i,o){i.lonlat[0]===$&&_.select(o).remove()}Z.selectAll("*").remove(),Z.each(function(o){var s=_.select(this),N=o[0].trace;if(et.hasLines(N)||"none"!==N.fill){var Z=j.calcTraceToLineCoords(o),X="none"!==N.fill?j.makePolygon(Z):j.makeLine(Z);s.selectAll("path.js-line").data([{geojson:X,trace:N}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}et.hasMarkers(N)&&s.selectAll("path.point").data(F.identity).enter().append("path").classed("point",!0).each(function(i){removeBADNUM(i,this)}),et.hasText(N)&&s.selectAll("g").data(F.identity).enter().append("g").append("text").each(function(i){removeBADNUM(i,this)}),er(i,o)})}function calcGeoJSON(i,o){var s,_,F,j,et=i[0].trace,er=o[et.geo],en=er._subplot,ei=et._length;if(Array.isArray(et.locations)){var eo=et.locationmode,es="geojson-id"===eo?Z.extractTraceFeature(i):N(et,en.topojson);for(s=0;s<ei;s++){_=i[s];var el="geojson-id"===eo?_.fOut:Z.locationToFeature(eo,_.loc,es);_.lonlat=el?el.properties.ct:[$,$]}}var ec={padded:!0};if("geojson"===er.fitbounds&&"geojson-id"===et.locationmode){var eu=Z.computeBbox(Z.getTraceGeojson(et));F=[eu[0],eu[2]],j=[eu[1],eu[3]]}else{for(s=0,F=Array(ei),j=Array(ei);s<ei;s++)_=i[s],F[s]=_.lonlat[0],j[s]=_.lonlat[1];ec.ppad=ee(et,ei)}et._extremes.lon=X(er.lonaxis._ax,F,ec),et._extremes.lat=X(er.lataxis._ax,j,ec)}i.exports={calcGeoJSON:calcGeoJSON,plot:plot}},20548:function(i,o,s){"use strict";var _=s(34098),F=s(50606).BADNUM;i.exports=function(i,o){var s,N,j,Z,X,$=i.cd,ee=i.xaxis,et=i.yaxis,er=[],en=$[0].trace;if(!_.hasMarkers(en)&&!_.hasText(en))return[];if(!1===o)for(X=0;X<$.length;X++)$[X].selected=0;else for(X=0;X<$.length;X++)(N=(s=$[X]).lonlat)[0]!==F&&(j=ee.c2p(N),Z=et.c2p(N),o.contains([j,Z],null,X,i)?(er.push({pointNumber:X,lon:N[0],lat:N[1]}),s.selected=1):s.selected=0);return er}},33095:function(i,o,s){"use strict";var _=s(39898),F=s(91424),N=s(7901),j=s(16296),Z=j.stylePoints,X=j.styleText;function styleTrace(i,o){var s=o[0].trace,j=o[0].node3;j.style("opacity",o[0].trace.opacity),Z(j,s,i),X(j,s,i),j.selectAll("path.js-line").style("fill","none").each(function(i){var o=_.select(this),s=i.trace,j=s.line||{};o.call(N.stroke,j.color).call(F.dashLine,j.dash||"",j.width||0),"none"!==s.fill&&o.call(N.fill,s.fillcolor)})}i.exports=function(i,o){o&&styleTrace(i,o)}},42341:function(i,o,s){"use strict";var _=s(9012),F=s(82196),N=s(12663).axisHoverFormat,j=s(50693),Z=s(78607),X=s(1426).extendFlat,$=s(30962).overrideAll,ee=s(78232).DASHES,et=F.line,er=F.marker,en=er.line,ei=i.exports=$({x:F.x,x0:F.x0,dx:F.dx,y:F.y,y0:F.y0,dy:F.dy,xperiod:F.xperiod,yperiod:F.yperiod,xperiod0:F.xperiod0,yperiod0:F.yperiod0,xperiodalignment:F.xperiodalignment,yperiodalignment:F.yperiodalignment,xhoverformat:N("x"),yhoverformat:N("y"),text:F.text,hovertext:F.hovertext,textposition:F.textposition,textfont:F.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:et.color,width:et.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Z(ee),dflt:"solid"}},marker:X({},j("marker"),{symbol:er.symbol,angle:er.angle,size:er.size,sizeref:er.sizeref,sizemin:er.sizemin,sizemode:er.sizemode,opacity:er.opacity,colorbar:er.colorbar,line:X({},j("marker.line"),{width:en.width})}),connectgaps:F.connectgaps,fill:X({},F.fill,{dflt:"none"}),fillcolor:F.fillcolor,selected:{marker:F.selected.marker,textfont:F.selected.textfont},unselected:{marker:F.unselected.marker,textfont:F.unselected.textfont},opacity:_.opacity},"calc","nested");ei.x.editType=ei.y.editType=ei.x0.editType=ei.y0.editType="calc+clearAxisTypes",ei.hovertemplate=F.hovertemplate,ei.texttemplate=F.texttemplate},72156:function(i,o,s){"use strict";var _=s(20794);i.exports={moduleType:"trace",name:"scattergl",basePlotModule:s(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:s(42341),supplyDefaults:s(47148),crossTraceDefaults:s(34936),colorbar:s(4898),formatLabels:s(68101),calc:s(45032),hoverPoints:_.hoverPoints,selectPoints:s(58147),meta:{}}},45032:function(i,o,s){"use strict";var _=s(88294),F=s(71828),N=s(41675),j=s(71739).findExtremes,Z=s(42973),X=s(47761),$=X.calcMarkerSize,ee=X.calcAxisExpansion,et=X.setFirstScatter,er=s(36922),en=s(19635),ei=s(38967),eo=s(50606).BADNUM,es=s(78232).TOO_MANY_POINTS;function expandForErrorBars(i,o,s){var _=i._extremes[o._id],F=j(o,s._bnds,{padded:!0});_.min=_.min.concat(F.min),_.max=_.max.concat(F.max)}function sceneOptions(i,o,s,_,N,j){var Z=en.style(i,s);if(Z.marker&&(Z.marker.positions=_),Z.line&&_.length>1&&F.extendFlat(Z.line,en.linePositions(i,s,_)),Z.errorX||Z.errorY){var X=en.errorBarPositions(i,s,_,N,j);Z.errorX&&F.extendFlat(Z.errorX,X.x),Z.errorY&&F.extendFlat(Z.errorY,X.y)}return Z.text&&(F.extendFlat(Z.text,{positions:_},en.textPosition(i,s,Z.text,Z.marker)),F.extendFlat(Z.textSel,{positions:_},en.textPosition(i,s,Z.text,Z.markerSel)),F.extendFlat(Z.textUnsel,{positions:_},en.textPosition(i,s,Z.text,Z.markerUnsel))),Z}i.exports=function(i,o){var s,F,j=i._fullLayout,X=o._xA=N.getFromId(i,o.xaxis,"x"),en=o._yA=N.getFromId(i,o.yaxis,"y"),el=j._plots[o.xaxis+o.yaxis],ec=o._length,eu=ec>=es,ef=2*ec,ed={},eh=X.makeCalcdata(o,"x"),ep=en.makeCalcdata(o,"y"),eg=Z(o,X,"x",eh),em=Z(o,en,"y",ep),ey=eg.vals,ev=em.vals;o._x=ey,o._y=ev,o.xperiodalignment&&(o._origX=eh,o._xStarts=eg.starts,o._xEnds=eg.ends),o.yperiodalignment&&(o._origY=ep,o._yStarts=em.starts,o._yEnds=em.ends);var ex=Array(ef),e_=Array(ec);for(s=0;s<ec;s++)ex[2*s]=ey[s]===eo?NaN:ey[s],ex[2*s+1]=ev[s]===eo?NaN:ev[s],e_[s]=s;if("log"===X.type)for(s=0;s<ef;s+=2)ex[s]=X.c2l(ex[s]);if("log"===en.type)for(s=1;s<ef;s+=2)ex[s]=en.c2l(ex[s]);eu&&"log"!==X.type&&"log"!==en.type?ed.tree=_(ex):ed.ids=e_,er(i,o);var ew=sceneOptions(i,el,o,ex,ey,ev),eT=ei(i,el);return et(j,o),eu?ew.marker&&(F=ew.marker.sizeAvg||Math.max(ew.marker.size,3)):F=$(o,ec),ee(i,o,X,en,ey,ev,F),ew.errorX&&expandForErrorBars(o,X,ew.errorX),ew.errorY&&expandForErrorBars(o,en,ew.errorY),ew.fill&&!eT.fill2d&&(eT.fill2d=!0),ew.marker&&!eT.scatter2d&&(eT.scatter2d=!0),ew.line&&!eT.line2d&&(eT.line2d=!0),(ew.errorX||ew.errorY)&&!eT.error2d&&(eT.error2d=!0),ew.text&&!eT.glText&&(eT.glText=!0),ew.marker&&(ew.marker.snap=ec),eT.lineOptions.push(ew.line),eT.errorXOptions.push(ew.errorX),eT.errorYOptions.push(ew.errorY),eT.fillOptions.push(ew.fill),eT.markerOptions.push(ew.marker),eT.markerSelectedOptions.push(ew.markerSel),eT.markerUnselectedOptions.push(ew.markerUnsel),eT.textOptions.push(ew.text),eT.textSelectedOptions.push(ew.textSel),eT.textUnselectedOptions.push(ew.textUnsel),eT.selectBatch.push([]),eT.unselectBatch.push([]),ed._scene=eT,ed.index=eT.count,ed.x=ey,ed.y=ev,ed.positions=ex,eT.count++,[{x:!1,y:!1,t:ed,trace:o}]}},78232:function(i){"use strict";i.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(i,o,s){"use strict";var _=s(92770),F=s(82019),N=s(25075),j=s(73972),Z=s(71828),X=s(91424),$=s(41675),ee=s(81697).formatColor,et=s(34098),er=s(39984),en=s(68645),ei=s(78232),eo=s(37822).DESELECTDIM,es={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},el=s(23469).appendArrayPointValue;function convertStyle(i,o){var s,_={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},F=i._context.plotGlPixelRatio;if(!0!==o.visible)return _;if(et.hasText(o)&&(_.text=convertTextStyle(i,o),_.textSel=convertTextSelection(i,o,o.selected),_.textUnsel=convertTextSelection(i,o,o.unselected)),et.hasMarkers(o)&&(_.marker=convertMarkerStyle(i,o),_.markerSel=convertMarkerSelection(i,o,o.selected),_.markerUnsel=convertMarkerSelection(i,o,o.unselected),!o.unselected&&Z.isArrayOrTypedArray(o.marker.opacity))){var N=o.marker.opacity;for(s=0,_.markerUnsel.opacity=Array(N.length);s<N.length;s++)_.markerUnsel.opacity[s]=eo*N[s]}if(et.hasLines(o)){_.line={overlay:!0,thickness:o.line.width*F,color:o.line.color,opacity:o.opacity};var j=(ei.DASHES[o.line.dash]||[1]).slice();for(s=0;s<j.length;++s)j[s]*=o.line.width*F;_.line.dashes=j}return o.error_x&&o.error_x.visible&&(_.errorX=convertErrorBarStyle(o,o.error_x,F)),o.error_y&&o.error_y.visible&&(_.errorY=convertErrorBarStyle(o,o.error_y,F)),o.fill&&"none"!==o.fill&&(_.fill={closed:!0,fill:o.fillcolor,thickness:0}),_}function convertTextStyle(i,o){var s,F=i._fullLayout,N=o._length,j=o.textfont,X=o.textposition,$=Array.isArray(X)?X:[X],ee=j.color,et=j.size,er=j.family,en={},ei=i._context.plotGlPixelRatio,eo=o.texttemplate;if(eo){en.text=[];var es=F._d3locale,ec=Array.isArray(eo),eu=ec?Math.min(eo.length,N):N,ef=ec?function(i){return eo[i]}:function(){return eo};for(s=0;s<eu;s++){var ed={i:s},eh=o._module.formatLabels(ed,o,F),ep={};el(ep,o,s);var eg=o._meta||{};en.text.push(Z.texttemplateString(ef(s),eh,es,ep,ed,eg))}}else Array.isArray(o.text)&&o.text.length<N?en.text=o.text.slice():en.text=o.text;if(Array.isArray(en.text))for(s=en.text.length;s<N;s++)en.text[s]="";for(s=0,en.opacity=o.opacity,en.font={},en.align=[],en.baseline=[];s<$.length;s++){var em=$[s].split(/\s+/);switch(em[1]){case"left":en.align.push("right");break;case"right":en.align.push("left");break;default:en.align.push(em[1])}switch(em[0]){case"top":en.baseline.push("bottom");break;case"bottom":en.baseline.push("top");break;default:en.baseline.push(em[0])}}if(Array.isArray(ee))for(s=0,en.color=Array(N);s<N;s++)en.color[s]=ee[s];else en.color=ee;if(Z.isArrayOrTypedArray(et)||Array.isArray(er))for(s=0,en.font=Array(N);s<N;s++){var ey=en.font[s]={};ey.size=(Z.isTypedArray(et)?et[s]:Array.isArray(et)?_(et[s])?et[s]:0:et)*ei,ey.family=Array.isArray(er)?er[s]:er}else en.font={size:et*ei,family:er};return en}function convertMarkerStyle(i,o){var s=o._length,_=o.marker,F={},j=Z.isArrayOrTypedArray(_.symbol),X=Z.isArrayOrTypedArray(_.angle),$=Z.isArrayOrTypedArray(_.color),et=Z.isArrayOrTypedArray(_.line.color),ei=Z.isArrayOrTypedArray(_.opacity),eo=Z.isArrayOrTypedArray(_.size),es=Z.isArrayOrTypedArray(_.line.width);if(j||(ev=en.isOpenSymbol(_.symbol)),j||$||et||ei||X){F.symbols=Array(s),F.angles=Array(s),F.colors=Array(s),F.borderColors=Array(s);var el=_.symbol,ec=_.angle,eu=ee(_,_.opacity,s),ef=ee(_.line,_.opacity,s);if(!Array.isArray(ef[0])){var ed=ef;for(ey=0,ef=Array(s);ey<s;ey++)ef[ey]=ed}if(!Array.isArray(eu[0])){var eh=eu;for(ey=0,eu=Array(s);ey<s;ey++)eu[ey]=eh}if(!Array.isArray(el)){var ep=el;for(ey=0,el=Array(s);ey<s;ey++)el[ey]=ep}if(!Array.isArray(ec)){var eg=ec;for(ey=0,ec=Array(s);ey<s;ey++)ec[ey]=eg}for(ey=0,F.symbols=el,F.angles=ec,F.colors=eu,F.borderColors=ef;ey<s;ey++)j&&(ev=en.isOpenSymbol(_.symbol[ey])),ev&&(ef[ey]=eu[ey].slice(),eu[ey]=eu[ey].slice(),eu[ey][3]=0);for(ey=0,F.opacity=o.opacity,F.markers=Array(s);ey<s;ey++)F.markers[ey]=getSymbolSdf({mx:F.symbols[ey],ma:F.angles[ey]},o)}else ev?(F.color=N(_.color,"uint8"),F.color[3]=0,F.borderColor=N(_.color,"uint8")):(F.color=N(_.color,"uint8"),F.borderColor=N(_.line.color,"uint8")),F.opacity=o.opacity*_.opacity,F.marker=getSymbolSdf({mx:_.symbol,ma:_.angle},o);var em=er(o,1);if(eo||es){var ey,ev,ex,e_,ew=F.sizes=Array(s),eT=F.borderSizes=Array(s),ek=0;if(eo){for(ey=0;ey<s;ey++)ew[ey]=em(_.size[ey]),ek+=ew[ey];e_=ek/s}else for(ey=0,ex=em(_.size);ey<s;ey++)ew[ey]=ex;if(es)for(ey=0;ey<s;ey++)eT[ey]=_.line.width[ey];else for(ey=0,ex=_.line.width;ey<s;ey++)eT[ey]=ex;F.sizeAvg=e_}else F.size=em(_&&_.size||10),F.borderSizes=em(_.line.width);return F}function convertMarkerSelection(i,o,s){var _=o.marker,F={};return s&&(s.marker&&s.marker.symbol?F=convertMarkerStyle(i,Z.extendFlat({},_,s.marker)):s.marker&&(s.marker.size&&(F.size=s.marker.size),s.marker.color&&(F.colors=s.marker.color),void 0!==s.marker.opacity&&(F.opacity=s.marker.opacity))),F}function convertTextSelection(i,o,s){var _={};if(!s)return _;if(s.textfont){var F={opacity:1,text:o.text,texttemplate:o.texttemplate,textposition:o.textposition,textfont:Z.extendFlat({},o.textfont)};s.textfont&&Z.extendFlat(F.textfont,s.textfont),_=convertTextStyle(i,F)}return _}function convertErrorBarStyle(i,o,s){var _={capSize:2*o.width*s,lineWidth:o.thickness*s,color:o.color};return o.copy_ystyle&&(_=i.error_y),_}var ec=ei.SYMBOL_SDF_SIZE,eu=ei.SYMBOL_SIZE,ef=ei.SYMBOL_STROKE,ed={},eh=X.symbolFuncs[0](.05*eu);function getSymbolSdf(i,o){var s,_=i.mx;if("circle"===_)return null;var N=X.symbolNumber(_),j=X.symbolFuncs[N%100],Z=!!X.symbolNoDot[N%100],$=!!X.symbolNoFill[N%100],ee=en.isDotSymbol(_);if(i.ma&&(_+="_"+i.ma),ed[_])return ed[_];var et=X.getMarkerAngle(i,o);return s=F(ee&&!Z?j(1.1*eu,et)+eh:j(eu,et),{w:ec,h:ec,viewBox:[-eu,-eu,eu,eu],stroke:$?ef:-ef}),ed[_]=s,s||null}function convertLinePositions(i,o,s){var _,F,N=s.length,j=N/2;if(et.hasLines(o)&&j){if("hv"===o.line.shape){for(F=0,_=[];F<j-1;F++)isNaN(s[2*F])||isNaN(s[2*F+1])?_.push(NaN,NaN,NaN,NaN):(_.push(s[2*F],s[2*F+1]),isNaN(s[2*F+2])||isNaN(s[2*F+3])?_.push(NaN,NaN):_.push(s[2*F+2],s[2*F+1]));_.push(s[N-2],s[N-1])}else if("hvh"===o.line.shape){for(F=0,_=[];F<j-1;F++)if(isNaN(s[2*F])||isNaN(s[2*F+1])||isNaN(s[2*F+2])||isNaN(s[2*F+3]))isNaN(s[2*F])||isNaN(s[2*F+1])?_.push(NaN,NaN):_.push(s[2*F],s[2*F+1]),_.push(NaN,NaN);else{var Z=(s[2*F]+s[2*F+2])/2;_.push(s[2*F],s[2*F+1],Z,s[2*F+1],Z,s[2*F+3])}_.push(s[N-2],s[N-1])}else if("vhv"===o.line.shape){for(F=0,_=[];F<j-1;F++)if(isNaN(s[2*F])||isNaN(s[2*F+1])||isNaN(s[2*F+2])||isNaN(s[2*F+3]))isNaN(s[2*F])||isNaN(s[2*F+1])?_.push(NaN,NaN):_.push(s[2*F],s[2*F+1]),_.push(NaN,NaN);else{var X=(s[2*F+1]+s[2*F+3])/2;_.push(s[2*F],s[2*F+1],s[2*F],X,s[2*F+2],X)}_.push(s[N-2],s[N-1])}else if("vh"===o.line.shape){for(F=0,_=[];F<j-1;F++)isNaN(s[2*F])||isNaN(s[2*F+1])?_.push(NaN,NaN,NaN,NaN):(_.push(s[2*F],s[2*F+1]),isNaN(s[2*F+2])||isNaN(s[2*F+3])?_.push(NaN,NaN):_.push(s[2*F],s[2*F+3]));_.push(s[N-2],s[N-1])}else _=s}var $=!1;for(F=0;F<_.length;F++)if(isNaN(_[F])){$=!0;break}var ee=$||_.length>ei.TOO_MANY_POINTS?"rect":et.hasMarkers(o)?"rect":"round";if($&&o.connectgaps){var er=_[0],en=_[1];for(F=0;F<_.length;F+=2)isNaN(_[F])||isNaN(_[F+1])?(_[F]=er,_[F+1]=en):(er=_[F],en=_[F+1])}return{join:ee,positions:_}}function convertErrorBarPositions(i,o,s,F,N){var Z=j.getComponentMethod("errorbars","makeComputeError"),X=$.getFromId(i,o.xaxis,"x"),ee=$.getFromId(i,o.yaxis,"y"),et=s.length/2,er={};function convertOneAxis(i,F){var N=F._id.charAt(0),j=o["error_"+N];if(j&&j.visible&&("linear"===F.type||"log"===F.type)){for(var X=Z(j),$={x:0,y:1}[N],ee={x:[0,1,2,3],y:[2,3,0,1]}[N],en=new Float64Array(4*et),ei=1/0,eo=-1/0,es=0,el=0;es<et;es++,el+=4){var ec=i[es];if(_(ec)){var eu=s[2*es+$],ef=X(ec,es),ed=ef[0],eh=ef[1];if(_(ed)&&_(eh)){var ep=ec-ed,eg=ec+eh;en[el+ee[0]]=eu-F.c2l(ep),en[el+ee[1]]=F.c2l(eg)-eu,en[el+ee[2]]=0,en[el+ee[3]]=0,ei=Math.min(ei,ec-ed),eo=Math.max(eo,ec+eh)}}}er[N]={positions:s,errors:en,_bnds:[ei,eo]}}}return convertOneAxis(F,X),convertOneAxis(N,ee),er}function convertTextPosition(i,o,s,_){var F,N=o._length,j={};if(et.hasMarkers(o)){var Z=s.font,X=s.align,$=s.baseline;for(F=0,j.offset=Array(N);F<N;F++){var ee=_.sizes?_.sizes[F]:_.size,er=Array.isArray(Z)?Z[F].size:Z.size,en=Array.isArray(X)?X.length>1?X[F]:X[0]:X,ei=Array.isArray($)?$.length>1?$[F]:$[0]:$,eo=es[en],el=es[ei],ec=ee?ee/.8+1:0,eu=-el*ec-.5*el;j.offset[F]=[eo*ec/er,eu/er]}}return j}i.exports={style:convertStyle,markerStyle:convertMarkerStyle,markerSelection:convertMarkerSelection,linePositions:convertLinePositions,errorBarPositions:convertErrorBarPositions,textPosition:convertTextPosition}},47148:function(i,o,s){"use strict";var _=s(71828),F=s(73972),N=s(68645),j=s(42341),Z=s(47581),X=s(34098),$=s(67513),ee=s(73927),et=s(49508),er=s(11058),en=s(28908),ei=s(82410);i.exports=function(i,o,s,eo){function coerce(s,F){return _.coerce(i,o,j,s,F)}var es=!!i.marker&&N.isOpenSymbol(i.marker.symbol),el=X.isBubble(i),ec=$(i,o,eo,coerce);if(!ec){o.visible=!1;return}ee(i,o,eo,coerce),coerce("xhoverformat"),coerce("yhoverformat");var eu=ec<Z.PTS_LINESONLY?"lines+markers":"lines";coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("mode",eu),X.hasLines(o)&&(coerce("connectgaps"),er(i,o,s,eo,coerce),coerce("line.shape")),X.hasMarkers(o)&&(et(i,o,s,eo,coerce,{noAngleRef:!0,noStandOff:!0}),coerce("marker.line.width",es||el?1:0)),X.hasText(o)&&(coerce("texttemplate"),ei(i,o,eo,coerce));var ef=(o.line||{}).color,ed=(o.marker||{}).color;coerce("fill"),"none"!==o.fill&&en(i,o,s,coerce);var eh=F.getComponentMethod("errorbars","supplyDefaults");eh(i,o,ef||ed||s,{axis:"y"}),eh(i,o,ef||ed||s,{axis:"x",inherit:"y"}),_.coerceSelectionMarkerOpacity(o,coerce)}},5345:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(37822).DESELECTDIM;function styleTextSelection(i){var o,s,j=i[0],Z=j.trace,X=j.t,$=X._scene,ee=X.index,et=$.selectBatch[ee],er=$.unselectBatch[ee],en=$.textOptions[ee],ei=$.textSelectedOptions[ee]||{},eo=$.textUnselectedOptions[ee]||{},es=_.extendFlat({},en);if(et.length||er.length){var el=ei.color,ec=eo.color,eu=en.color,ef=Array.isArray(eu);for(o=0,es.color=Array(Z._length);o<et.length;o++)s=et[o],es.color[s]=el||(ef?eu[s]:eu);for(o=0;o<er.length;o++){s=er[o];var ed=ef?eu[s]:eu;es.color[s]=ec||(el?ed:F.addOpacity(ed,N))}}$.glText[ee].update(es)}i.exports={styleTextSelection:styleTextSelection}},68101:function(i,o,s){"use strict";var _=s(8225);i.exports=function(i,o,s){var F=i.i;return"x"in i||(i.x=o._x[F]),"y"in i||(i.y=o._y[F]),_(i,o,s)}},68645:function(i,o,s){"use strict";var _=s(78232);o.isOpenSymbol=function(i){return"string"==typeof i?_.OPEN_RE.test(i):i%200>100},o.isDotSymbol=function(i){return"string"==typeof i?_.DOT_RE.test(i):i>200}},20794:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=s(34603);function hoverPoints(i,o,s,_){var F,N,j,Z,X,$,ee,et,er,en,ei=i.cd,eo=ei[0].t,es=ei[0].trace,el=i.xa,ec=i.ya,eu=eo.x,ef=eo.y,ed=el.c2p(o),eh=ec.c2p(s),ep=i.distance;if(eo.tree){var eg=el.p2c(ed-ep),em=el.p2c(ed+ep),ey=ec.p2c(eh-ep),ev=ec.p2c(eh+ep);F="x"===_?eo.tree.range(Math.min(eg,em),Math.min(ec._rl[0],ec._rl[1]),Math.max(eg,em),Math.max(ec._rl[0],ec._rl[1])):eo.tree.range(Math.min(eg,em),Math.min(ey,ev),Math.max(eg,em),Math.max(ey,ev))}else F=eo.ids;var ex=ep;if("x"===_){var e_=!!es.xperiodalignment,ew=!!es.yperiodalignment;for($=0;$<F.length;$++){if(Z=eu[N=F[$]],ee=Math.abs(el.c2p(Z)-ed),e_){var eT=el.c2p(es._xStarts[N]),ek=el.c2p(es._xEnds[N]);ee=ed>=Math.min(eT,ek)&&ed<=Math.max(eT,ek)?0:1/0}if(ee<ex){if(ex=ee,X=ef[N],et=ec.c2p(X)-eh,ew){var eA=ec.c2p(es._yStarts[N]),eS=ec.c2p(es._yEnds[N]);et=eh>=Math.min(eA,eS)&&eh<=Math.max(eA,eS)?0:1/0}en=Math.sqrt(ee*ee+et*et),j=F[$]}}}else for($=F.length-1;$>-1;$--)Z=eu[N=F[$]],X=ef[N],(er=Math.sqrt((ee=el.c2p(Z)-ed)*ee+(et=ec.c2p(X)-eh)*et))<ex&&(ex=en=er,j=N);return(i.index=j,i.distance=ex,i.dxy=en,void 0===j)?[i]:[calcHover(i,eu,ef,es)]}function calcHover(i,o,s,j){var Z=i.xa,X=i.ya,$=i.distance,ee=i.dxy,et=i.index,er={pointNumber:et,x:o[et],y:s[et]};er.tx=Array.isArray(j.text)?j.text[et]:j.text,er.htx=Array.isArray(j.hovertext)?j.hovertext[et]:j.hovertext,er.data=Array.isArray(j.customdata)?j.customdata[et]:j.customdata,er.tp=Array.isArray(j.textposition)?j.textposition[et]:j.textposition;var en=j.textfont;en&&(er.ts=F.isArrayOrTypedArray(en.size)?en.size[et]:en.size,er.tc=Array.isArray(en.color)?en.color[et]:en.color,er.tf=Array.isArray(en.family)?en.family[et]:en.family);var ei=j.marker;ei&&(er.ms=F.isArrayOrTypedArray(ei.size)?ei.size[et]:ei.size,er.mo=F.isArrayOrTypedArray(ei.opacity)?ei.opacity[et]:ei.opacity,er.mx=F.isArrayOrTypedArray(ei.symbol)?ei.symbol[et]:ei.symbol,er.ma=F.isArrayOrTypedArray(ei.angle)?ei.angle[et]:ei.angle,er.mc=F.isArrayOrTypedArray(ei.color)?ei.color[et]:ei.color);var eo=ei&&ei.line;eo&&(er.mlc=Array.isArray(eo.color)?eo.color[et]:eo.color,er.mlw=F.isArrayOrTypedArray(eo.width)?eo.width[et]:eo.width);var es=ei&&ei.gradient;es&&"none"!==es.type&&(er.mgt=Array.isArray(es.type)?es.type[et]:es.type,er.mgc=Array.isArray(es.color)?es.color[et]:es.color);var el=Z.c2p(er.x,!0),ec=X.c2p(er.y,!0),eu=er.mrc||1,ef=j.hoverlabel;ef&&(er.hbg=Array.isArray(ef.bgcolor)?ef.bgcolor[et]:ef.bgcolor,er.hbc=Array.isArray(ef.bordercolor)?ef.bordercolor[et]:ef.bordercolor,er.hts=F.isArrayOrTypedArray(ef.font.size)?ef.font.size[et]:ef.font.size,er.htc=Array.isArray(ef.font.color)?ef.font.color[et]:ef.font.color,er.htf=Array.isArray(ef.font.family)?ef.font.family[et]:ef.font.family,er.hnl=F.isArrayOrTypedArray(ef.namelength)?ef.namelength[et]:ef.namelength);var ed=j.hoverinfo;ed&&(er.hi=Array.isArray(ed)?ed[et]:ed);var eh=j.hovertemplate;eh&&(er.ht=Array.isArray(eh)?eh[et]:eh);var ep={};ep[i.index]=er;var eg=j._origX,em=j._origY,ey=F.extendFlat({},i,{color:N(j,er),x0:el-eu,x1:el+eu,xLabelVal:eg?eg[et]:er.x,y0:ec-eu,y1:ec+eu,yLabelVal:em?em[et]:er.y,cd:ep,distance:$,spikeDistance:ee,hovertemplate:er.ht});return er.htx?ey.text=er.htx:er.tx?ey.text=er.tx:j.text&&(ey.text=j.text),F.fillText(er,j,ey),_.getComponentMethod("errorbars","hoverInfo")(er,j,ey),ey}i.exports={hoverPoints:hoverPoints,calcHover:calcHover}},68868:function(i,o,s){"use strict";var _=s(72156);_.plot=s(26787),i.exports=_},26787:function(i,o,s){"use strict";var _=s(11870),F=s(46075),N=s(3593),j=s(42505),Z=s(71828),X=s(64505).selectMode,$=s(79749),ee=s(34098),et=s(68687),er=s(5345).styleTextSelection,en={};function getViewport(i,o,s,_){var F=i._size,N=i.width*_,j=i.height*_,Z=F.l*_,X=F.b*_,$=F.r*_,ee=F.t*_,et=F.w*_,er=F.h*_;return[Z+o.domain[0]*et,X+s.domain[0]*er,N-$-(1-o.domain[1])*et,j-ee-(1-s.domain[1])*er]}(i.exports=function(i,o,s){if(s.length){var ei,eo,es=i._fullLayout,el=o._scene,ec=o.xaxis,eu=o.yaxis;if(el){if(!$(i,["ANGLE_instanced_arrays","OES_element_index_uint"],en)){el.init();return}var ef=el.count,ed=es._glcanvas.data()[0].regl;if(et(i,o,s),el.dirty){if(!0===el.error2d&&(el.error2d=N(ed)),!0===el.line2d&&(el.line2d=F(ed)),!0===el.scatter2d&&(el.scatter2d=_(ed)),!0===el.fill2d&&(el.fill2d=F(ed)),!0===el.glText)for(ei=0,el.glText=Array(ef);ei<ef;ei++)el.glText[ei]=new j(ed);if(el.glText){if(ef>el.glText.length){var eh=ef-el.glText.length;for(ei=0;ei<eh;ei++)el.glText.push(new j(ed))}else if(ef<el.glText.length){var ep=el.glText.length-ef;el.glText.splice(ef,ep).forEach(function(i){i.destroy()})}for(ei=0;ei<ef;ei++)el.glText[ei].update(el.textOptions[ei])}if(el.line2d&&(el.line2d.update(el.lineOptions),el.lineOptions=el.lineOptions.map(function(i){if(i&&i.positions){for(var o=i.positions,s=0;s<o.length&&(isNaN(o[s])||isNaN(o[s+1]));)s+=2;for(var _=o.length-2;_>s&&(isNaN(o[_])||isNaN(o[_+1]));)_-=2;i.positions=o.slice(s,_+2)}return i}),el.line2d.update(el.lineOptions)),el.error2d){var eg=(el.errorXOptions||[]).concat(el.errorYOptions||[]);el.error2d.update(eg)}el.scatter2d&&el.scatter2d.update(el.markerOptions),el.fillOrder=Z.repeat(null,ef),el.fill2d&&(el.fillOptions=el.fillOptions.map(function(i,o){var _,F,N,j,Z=s[o];if(i&&Z&&Z[0]&&Z[0].trace){var X=Z[0],$=X.trace,ee=X.t,et=el.lineOptions[o],er=[];$._ownfill&&er.push(o),$._nexttrace&&er.push(o+1),er.length&&(el.fillOrder[o]=er);var en=[],ei=et&&et.positions||ee.positions;if("tozeroy"===$.fill){for(N=0;N<ei.length&&isNaN(ei[N+1]);)N+=2;for(j=ei.length-2;j>N&&isNaN(ei[j+1]);)j-=2;0!==ei[N+1]&&(en=[ei[N],0]),en=en.concat(ei.slice(N,j+2)),0!==ei[j+1]&&(en=en.concat([ei[j],0]))}else if("tozerox"===$.fill){for(N=0;N<ei.length&&isNaN(ei[N]);)N+=2;for(j=ei.length-2;j>N&&isNaN(ei[j]);)j-=2;0!==ei[N]&&(en=[0,ei[N+1]]),en=en.concat(ei.slice(N,j+2)),0!==ei[j]&&(en=en.concat([0,ei[j+1]]))}else if("toself"===$.fill||"tonext"===$.fill){for(F=0,en=[],_=0,i.splitNull=!0;F<ei.length;F+=2)(isNaN(ei[F])||isNaN(ei[F+1]))&&((en=en.concat(ei.slice(_,F))).push(ei[_],ei[_+1]),en.push(null,null),_=F+2);en=en.concat(ei.slice(_)),_&&en.push(ei[_],ei[_+1])}else{var eo=$._nexttrace;if(eo){var es=el.lineOptions[o+1];if(es){var ec=es.positions;if("tonexty"===$.fill){for(en=ei.slice(),o=Math.floor(ec.length/2);o--;){var eu=ec[2*o],ef=ec[2*o+1];isNaN(eu)||isNaN(ef)||en.push(eu,ef)}i.fill=eo.fillcolor}}}}if($._prevtrace&&"tonext"===$._prevtrace.fill){var ed=el.lineOptions[o-1].positions,eh=en.length/2,ep=[_=eh];for(F=0;F<ed.length;F+=2)(isNaN(ed[F])||isNaN(ed[F+1]))&&(ep.push(F/2+eh+1),_=F+2);en=en.concat(ed),i.hole=ep}return i.fillmode=$.fill,i.opacity=$.opacity,i.positions=en,i}}),el.fill2d.update(el.fillOptions))}var em=X(es.dragmode),ey=es.clickmode.indexOf("select")>-1;for(ei=0;ei<ef;ei++){var ev=s[ei][0],ex=ev.trace,e_=ev.t,ew=e_.index,eT=ex._length,ek=e_.x,eA=e_.y;if(ex.selectedpoints||em||ey){if(em||(em=!0),ex.selectedpoints){var eS=el.selectBatch[ew]=Z.selIndices2selPoints(ex),eM={};for(eo=0;eo<eS.length;eo++)eM[eS[eo]]=1;var eC=[];for(eo=0;eo<eT;eo++)eM[eo]||eC.push(eo);el.unselectBatch[ew]=eC}var eE=e_.xpx=Array(eT),eL=e_.ypx=Array(eT);for(eo=0;eo<eT;eo++)eE[eo]=ec.c2p(ek[eo]),eL[eo]=eu.c2p(eA[eo])}else e_.xpx=e_.ypx=null}if(em){if(el.select2d||(el.select2d=_(es._glcanvas.data()[1].regl)),el.scatter2d){var eP=Array(ef);for(ei=0;ei<ef;ei++)eP[ei]=el.selectBatch[ei].length||el.unselectBatch[ei].length?el.markerUnselectedOptions[ei]:{};el.scatter2d.update(eP)}el.select2d&&(el.select2d.update(el.markerOptions),el.select2d.update(el.markerSelectedOptions)),el.glText&&s.forEach(function(i){var o=((i||[])[0]||{}).trace||{};ee.hasText(o)&&er(i)})}else el.scatter2d&&el.scatter2d.update(el.markerOptions);var eI={viewport:getViewport(es,ec,eu,i._context.plotGlPixelRatio),range:[(ec._rl||ec.range)[0],(eu._rl||eu.range)[0],(ec._rl||ec.range)[1],(eu._rl||eu.range)[1]]},eO=Z.repeat(eI,el.count);el.fill2d&&el.fill2d.update(eO),el.line2d&&el.line2d.update(eO),el.error2d&&el.error2d.update(eO.concat(eO)),el.scatter2d&&el.scatter2d.update(eO),el.select2d&&el.select2d.update(eO),el.glText&&el.glText.forEach(function(i){i.update(eI)})}}}).reglPrecompiled=en},38967:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o){var s=o._scene,F={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},N={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return o._scene||((s=o._scene={}).init=function(){_.extendFlat(s,N,F)},s.init(),s.update=function(i){var o=_.repeat(i,s.count);if(s.fill2d&&s.fill2d.update(o),s.scatter2d&&s.scatter2d.update(o),s.line2d&&s.line2d.update(o),s.error2d&&s.error2d.update(o.concat(o)),s.select2d&&s.select2d.update(o),s.glText)for(var F=0;F<s.count;F++)s.glText[F].update(i)},s.draw=function(){for(var i=s.count,o=s.fill2d,F=s.error2d,N=s.line2d,j=s.scatter2d,Z=s.glText,X=s.select2d,$=s.selectBatch,ee=s.unselectBatch,et=0;et<i;et++){if(o&&s.fillOrder[et]&&o.draw(s.fillOrder[et]),N&&s.lineOptions[et]&&N.draw(et),F&&(s.errorXOptions[et]&&F.draw(et),s.errorYOptions[et]&&F.draw(et+i)),j&&s.markerOptions[et]){if(ee[et].length){var er=_.repeat([],s.count);er[et]=ee[et],j.draw(er)}else $[et].length||j.draw(et)}Z[et]&&s.textOptions[et]&&Z[et].render()}X&&X.draw($),s.dirty=!1},s.destroy=function(){s.fill2d&&s.fill2d.destroy&&s.fill2d.destroy(),s.scatter2d&&s.scatter2d.destroy&&s.scatter2d.destroy(),s.error2d&&s.error2d.destroy&&s.error2d.destroy(),s.line2d&&s.line2d.destroy&&s.line2d.destroy(),s.select2d&&s.select2d.destroy&&s.select2d.destroy(),s.glText&&s.glText.forEach(function(i){i.destroy&&i.destroy()}),s.lineOptions=null,s.fillOptions=null,s.markerOptions=null,s.markerSelectedOptions=null,s.markerUnselectedOptions=null,s.errorXOptions=null,s.errorYOptions=null,s.textOptions=null,s.textSelectedOptions=null,s.textUnselectedOptions=null,s.selectBatch=null,s.unselectBatch=null,o._scene=null}),s.dirty||_.extendFlat(s,F),s}},58147:function(i,o,s){"use strict";var _=s(34098),F=s(5345).styleTextSelection;i.exports=function(i,o){var s=i.cd,N=i.xaxis,j=i.yaxis,Z=[],X=s[0].trace,$=s[0].t,ee=X._length,et=$.x,er=$.y,en=$._scene,ei=$.index;if(!en)return Z;var eo=_.hasText(X),es=_.hasMarkers(X);if(!0!==X.visible||!es&&!eo)return Z;var el=[],ec=[];if(!1!==o&&!o.degenerate)for(var eu=0;eu<ee;eu++)o.contains([$.xpx[eu],$.ypx[eu]],!1,eu,i)?(el.push(eu),Z.push({pointNumber:eu,x:N.c2d(et[eu]),y:j.c2d(er[eu])})):ec.push(eu);if(es){var ef=en.scatter2d;if(el.length||ec.length){if(!en.selectBatch[ei].length&&!en.unselectBatch[ei].length){var ed=Array(en.count);ed[ei]=en.markerUnselectedOptions[ei],ef.update.apply(ef,ed)}}else{var eh=Array(en.count);eh[ei]=en.markerOptions[ei],ef.update.apply(ef,eh)}}return en.selectBatch[ei]=el,en.unselectBatch[ei]=ec,eo&&F(s),Z}},99181:function(i,o,s){"use strict";var _=s(5386).fF,F=s(5386).si,N=s(19316),j=s(82196),Z=s(23585),X=s(9012),$=s(50693),ee=s(1426).extendFlat,et=s(30962).overrideAll,er=s(23585),en=N.line,ei=N.marker;i.exports=et({lon:N.lon,lat:N.lat,cluster:{enabled:{valType:"boolean"},maxzoom:ee({},er.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:ee({},ei.opacity,{dflt:1})},mode:ee({},j.mode,{dflt:"markers"}),text:ee({},j.text,{}),texttemplate:F({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:ee({},j.hovertext,{}),line:{color:en.color,width:en.width},connectgaps:j.connectgaps,marker:ee({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:ei.opacity,size:ei.size,sizeref:ei.sizeref,sizemin:ei.sizemin,sizemode:ei.sizemode},$("marker")),fill:N.fill,fillcolor:j.fillcolor,textfont:Z.layers.symbol.textfont,textposition:Z.layers.symbol.textposition,below:{valType:"string"},selected:{marker:j.selected.marker},unselected:{marker:j.unselected.marker},hoverinfo:ee({},X.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:_()},"calc","nested")},15790:function(i,o,s){"use strict";var _=s(92770),F=s(71828),N=s(50606).BADNUM,j=s(18214),Z=s(21081),X=s(91424),$=s(39984),ee=s(34098),et=s(13056),er=s(23469).appendArrayPointValue,en=s(63893).NEWLINES,ei=s(63893).BR_TAG_ALL;function initContainer(i){return{type:i,geojson:j.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function makeCircleOpts(i){var o,s,j,ee,et,er=i[0].trace,en=er.marker,ei=er.selectedpoints,eo=F.isArrayOrTypedArray(en.color),es=F.isArrayOrTypedArray(en.size),el=F.isArrayOrTypedArray(en.opacity);function addTraceOpacity(i){return er.opacity*i}function size2radius(i){return i/2}eo&&(s=Z.hasColorscale(er,"marker")?Z.makeColorScaleFuncFromTrace(en):F.identity),es&&(j=$(er)),el&&(ee=function(i){return addTraceOpacity(_(i)?+F.constrain(i,0,1):0)});var ec=[];for(o=0;o<i.length;o++){var eu=i[o],ef=eu.lonlat;if(ef[0]!==N){var ed={};s&&(ed.mcc=eu.mcc=s(eu.mc)),j&&(ed.mrc=eu.mrc=j(eu.ms)),ee&&(ed.mo=ee(eu.mo)),ei&&(ed.selected=eu.selected||0),ec.push({type:"Feature",id:o+1,geometry:{type:"Point",coordinates:ef},properties:ed})}}if(ei)for(o=0,et=X.makeSelectedPointStyleFns(er);o<ec.length;o++){var eh=ec[o].properties;et.selectedOpacityFn&&(eh.mo=addTraceOpacity(et.selectedOpacityFn(eh))),et.selectedColorFn&&(eh.mcc=et.selectedColorFn(eh)),et.selectedSizeFn&&(eh.mrc=et.selectedSizeFn(eh))}return{geojson:{type:"FeatureCollection",features:ec},mcc:eo||et&&et.selectedColorFn?{type:"identity",property:"mcc"}:en.color,mrc:es||et&&et.selectedSizeFn?{type:"identity",property:"mrc"}:size2radius(en.size),mo:el||et&&et.selectedOpacityFn?{type:"identity",property:"mo"}:addTraceOpacity(en.opacity)}}function makeSymbolGeoJSON(i,o){for(var s=o._fullLayout,_=i[0].trace,j=_.marker||{},Z=j.symbol,X=j.angle,$="circle"!==Z?getFillFunc(Z):blankFillFunc,et="auto"!==X?getFillFunc(X,!0):blankFillFunc,eo=ee.hasText(_)?getFillFunc(_.text):blankFillFunc,es=[],el=0;el<i.length;el++){var ec,eu,ef=i[el];if(ef.lonlat[0]!==N){var ed=_.texttemplate;if(ed){var eh=Array.isArray(ed)?ed[el]||"":ed,ep=_._module.formatLabels(ef,_,s),eg={};er(eg,_,ef.i);var em=_._meta||{};eu=F.texttemplateString(eh,ep,s._d3locale,eg,ef,em)}else eu=eo(el);eu&&(eu=eu.replace(en,"").replace(ei,"\n")),es.push({type:"Feature",geometry:{type:"Point",coordinates:ef.lonlat},properties:{symbol:$(el),angle:et(el),text:eu}})}}return{type:"FeatureCollection",features:es}}function getFillFunc(i,o){return F.isArrayOrTypedArray(i)?o?function(o){return _(i[o])?+i[o]:0}:function(o){return i[o]}:i?function(){return i}:blankFillFunc}function blankFillFunc(){return""}function arrayifyAttribute(i,o){var s;if(F.isArrayOrTypedArray(i)&&F.isArrayOrTypedArray(o)){s=["step",["get","point_count"],i[0]];for(var _=1;_<i.length;_++)s.push(o[_-1],i[_])}else s=i;return s}i.exports=function(i,o){var s,_=o[0].trace,N=!0===_.visible&&0!==_._length,Z="none"!==_.fill,X=ee.hasLines(_),$=ee.hasMarkers(_),er=ee.hasText(_),en=$&&"circle"===_.marker.symbol,ei=$&&"circle"!==_.marker.symbol,eo=_.cluster&&_.cluster.enabled,es=initContainer("fill"),el=initContainer("line"),ec=initContainer("circle"),eu=initContainer("symbol"),ef={fill:es,line:el,circle:ec,symbol:eu};if(!N)return ef;if((Z||X)&&(s=j.calcTraceToLineCoords(o)),Z&&(es.geojson=j.makePolygon(s),es.layout.visibility="visible",F.extendFlat(es.paint,{"fill-color":_.fillcolor})),X&&(el.geojson=j.makeLine(s),el.layout.visibility="visible",F.extendFlat(el.paint,{"line-width":_.line.width,"line-color":_.line.color,"line-opacity":_.opacity})),en){var ed=makeCircleOpts(o);ec.geojson=ed.geojson,ec.layout.visibility="visible",eo&&(ec.filter=["!",["has","point_count"]],ef.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":arrayifyAttribute(_.cluster.color,_.cluster.step),"circle-radius":arrayifyAttribute(_.cluster.size,_.cluster.step),"circle-opacity":arrayifyAttribute(_.cluster.opacity,_.cluster.step)}},ef.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),F.extendFlat(ec.paint,{"circle-color":ed.mcc,"circle-radius":ed.mrc,"circle-opacity":ed.mo})}if(en&&eo&&(ec.filter=["!",["has","point_count"]]),(ei||er)&&(eu.geojson=makeSymbolGeoJSON(o,i),F.extendFlat(eu.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),ei&&(F.extendFlat(eu.layout,{"icon-size":_.marker.size/10}),"angle"in _.marker&&"auto"!==_.marker.angle&&F.extendFlat(eu.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),eu.layout["icon-allow-overlap"]=_.marker.allowoverlap,F.extendFlat(eu.paint,{"icon-opacity":_.opacity*_.marker.opacity,"icon-color":_.marker.color})),er)){var eh=(_.marker||{}).size,ep=et(_.textposition,eh);F.extendFlat(eu.layout,{"text-size":_.textfont.size,"text-anchor":ep.anchor,"text-offset":ep.offset,"text-font":_.textfont.family.split(", ")}),F.extendFlat(eu.paint,{"text-color":_.textfont.color,"text-opacity":_.opacity})}return ef}},76645:function(i,o,s){"use strict";var _=s(71828),F=s(34098),N=s(49508),j=s(11058),Z=s(82410),X=s(28908),$=s(99181),ee=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];function handleLonLatDefaults(i,o,s){var _=s("lon")||[],F=s("lat")||[],N=Math.min(_.length,F.length);return o._length=N,N}i.exports=function(i,o,s,et){function coerce(s,F){return _.coerce(i,o,$,s,F)}function coerce2(s,F){return _.coerce2(i,o,$,s,F)}if(!handleLonLatDefaults(i,o,coerce)){o.visible=!1;return}if(coerce("text"),coerce("texttemplate"),coerce("hovertext"),coerce("hovertemplate"),coerce("mode"),coerce("below"),F.hasLines(o)&&(j(i,o,s,et,coerce,{noDash:!0}),coerce("connectgaps")),F.hasMarkers(o)){N(i,o,s,et,coerce,{noLine:!0,noAngle:!0}),coerce("marker.allowoverlap"),coerce("marker.angle");var er=o.marker;"circle"!==er.symbol&&(_.isArrayOrTypedArray(er.size)&&(er.size=er.size[0]),_.isArrayOrTypedArray(er.color)&&(er.color=er.color[0]))}var en=coerce2("cluster.maxzoom"),ei=coerce2("cluster.step"),eo=coerce2("cluster.color",o.marker&&o.marker.color||s),es=coerce2("cluster.size"),el=coerce2("cluster.opacity");coerce("cluster.enabled",!1!==en||!1!==ei||!1!==eo||!1!==es||!1!==el),F.hasText(o)&&Z(i,o,et,coerce,{noSelect:!0,font:{family:-1!==ee.indexOf(et.font.family)?et.font.family:"Open Sans Regular",size:et.font.size,color:et.font.color}}),coerce("fill"),"none"!==o.fill&&X(i,o,s,coerce),_.coerceSelectionMarkerOpacity(o,coerce)}},53353:function(i){"use strict";i.exports=function(i,o){return i.lon=o.lon,i.lat=o.lat,i}},15636:function(i,o,s){"use strict";var _=s(89298);i.exports=function(i,o,s){var F={},N=s[o.subplot]._subplot.mockAxis,j=i.lonlat;return F.lonLabel=_.tickText(N,N.c2l(j[0]),!0).text,F.latLabel=_.tickText(N,N.c2l(j[1]),!0).text,F}},28178:function(i,o,s){"use strict";var _=s(30211),F=s(71828),N=s(34603),j=F.fillText,Z=s(50606).BADNUM,X=s(77734).traceLayerPrefix;function hoverPoints(i,o,s){var j=i.cd,$=j[0].trace,ee=i.xa,et=i.ya,er=i.subplot,en=[],ei=X+$.uid+"-circle",eo=$.cluster&&$.cluster.enabled;eo&&(en=er.map.queryRenderedFeatures(null,{layers:[ei]}).map(function(i){return i.id}));var es=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),el=o-es;function distFn(i){var o=i.lonlat;if(o[0]===Z||eo&&-1===en.indexOf(i.i+1))return 1/0;var _=F.modHalf(o[0],360),N=o[1],j=er.project([_,N]),X=j.x-ee.c2p([el,N]),$=j.y-et.c2p([_,s]),ei=Math.max(3,i.mrc||0);return Math.max(Math.sqrt(X*X+$*$)-ei,1-3/ei)}if(_.getClosest(j,distFn,i),!1!==i.index){var ec=j[i.index],eu=ec.lonlat,ef=[F.modHalf(eu[0],360)+es,eu[1]],ed=ee.c2p(ef),eh=et.c2p(ef),ep=ec.mrc||1;i.x0=ed-ep,i.x1=ed+ep,i.y0=eh-ep,i.y1=eh+ep;var eg={};eg[$.subplot]={_subplot:er};var em=$._module.formatLabels(ec,$,eg);return i.lonLabel=em.lonLabel,i.latLabel=em.latLabel,i.color=N($,ec),i.extraText=getExtraText($,ec,j[0].t.labels),i.hovertemplate=$.hovertemplate,[i]}}function getExtraText(i,o,s){if(!i.hovertemplate){var _,F,N,Z,X=(o.hi||i.hoverinfo).split("+"),$=-1!==X.indexOf("all"),ee=-1!==X.indexOf("lon"),et=-1!==X.indexOf("lat"),er=o.lonlat,en=[];return $||ee&&et?en.push("("+er[1]+"\xb0, "+er[0]+"\xb0)"):ee?en.push(s.lon+(er[0]+"\xb0")):et&&en.push(s.lat+(er[1]+"\xb0")),($||-1!==X.indexOf("text"))&&j(o,i,en),en.join("<br>")}}i.exports={hoverPoints:hoverPoints,getExtraText:getExtraText}},20467:function(i,o,s){"use strict";i.exports={attributes:s(99181),supplyDefaults:s(76645),colorbar:s(4898),formatLabels:s(15636),calc:s(84622),plot:s(86951),hoverPoints:s(28178).hoverPoints,eventData:s(53353),selectPoints:s(86387),styleOnSelect:function(i,o){o&&o[0].trace._glTrace.update(o)},moduleType:"trace",name:"scattermapbox",basePlotModule:s(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(i,o,s){"use strict";var _=s(71828),F=s(15790),N=s(77734).traceLayerPrefix,j={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function ScatterMapbox(i,o,s,_){this.type="scattermapbox",this.subplot=i,this.uid=o,this.clusterEnabled=s,this.isHidden=_,this.sourceIds={fill:"source-"+o+"-fill",line:"source-"+o+"-line",circle:"source-"+o+"-circle",symbol:"source-"+o+"-symbol",cluster:"source-"+o+"-circle",clusterCount:"source-"+o+"-circle"},this.layerIds={fill:N+o+"-fill",line:N+o+"-line",circle:N+o+"-circle",symbol:N+o+"-symbol",cluster:N+o+"-cluster",clusterCount:N+o+"-cluster-count"},this.below=null}var Z=ScatterMapbox.prototype;Z.addSource=function(i,o,s){var F={type:"geojson",data:o.geojson};s&&s.enabled&&_.extendFlat(F,{cluster:!0,clusterMaxZoom:s.maxzoom});var N=this.subplot.map.getSource(this.sourceIds[i]);N?N.setData(o.geojson):this.subplot.map.addSource(this.sourceIds[i],F)},Z.setSourceData=function(i,o){this.subplot.map.getSource(this.sourceIds[i]).setData(o.geojson)},Z.addLayer=function(i,o,s){var _,F={type:o.type,id:this.layerIds[i],source:this.sourceIds[i],layout:o.layout,paint:o.paint};o.filter&&(F.filter=o.filter);for(var N=this.layerIds[i],j=this.subplot.getMapLayers(),Z=0;Z<j.length;Z++)if(j[Z].id===N){_=!0;break}_?(this.subplot.setOptions(N,"setLayoutProperty",F.layout),"visible"===F.layout.visibility&&this.subplot.setOptions(N,"setPaintProperty",F.paint)):this.subplot.addLayer(F,s)},Z.update=function(i){var o=i[0].trace,s=this.subplot,_=s.map,N=F(s.gd,i),Z=s.belowLookup["trace-"+this.uid],X=!!(o.cluster&&o.cluster.enabled),$=!!this.clusterEnabled,ee=this;function addCluster(i){i||ee.addSource("circle",N.circle,o.cluster);for(var s=j.cluster,_=0;_<s.length;_++){var F=s[_],X=N[F];ee.addLayer(F,X,Z)}}function removeCluster(i){for(var o=j.cluster,s=o.length-1;s>=0;s--){var F=o[s];_.removeLayer(ee.layerIds[F])}i||_.removeSource(ee.sourceIds.circle)}function addNonCluster(i){for(var o=j.nonCluster,s=0;s<o.length;s++){var _=o[s],F=N[_];i||ee.addSource(_,F),ee.addLayer(_,F,Z)}}function removeNonCluster(i){for(var o=j.nonCluster,s=o.length-1;s>=0;s--){var F=o[s];_.removeLayer(ee.layerIds[F]),i||_.removeSource(ee.sourceIds[F])}}function remove(i){$?removeCluster(i):removeNonCluster(i)}function add(i){X?addCluster(i):addNonCluster(i)}function repaint(){for(var i=X?j.cluster:j.nonCluster,o=0;o<i.length;o++){var _=i[o],F=N[_];F&&(s.setOptions(ee.layerIds[_],"setLayoutProperty",F.layout),"visible"===F.layout.visibility&&("cluster"!==_&&ee.setSourceData(_,F),s.setOptions(ee.layerIds[_],"setPaintProperty",F.paint)))}}var et=this.isHidden,er=!0!==o.visible;er?et||remove():et?er||add():$!==X?(remove(),add()):(this.below!==Z&&(remove(!0),add(!0)),repaint()),this.clusterEnabled=X,this.isHidden=er,this.below=Z,i[0].trace._glTrace=this},Z.dispose=function(){for(var i=this.subplot.map,o=this.clusterEnabled?j.cluster:j.nonCluster,s=o.length-1;s>=0;s--){var _=o[s];i.removeLayer(this.layerIds[_]),i.removeSource(this.sourceIds[_])}},i.exports=function(i,o){var s,_,N,Z=o[0].trace,X=Z.cluster&&Z.cluster.enabled,$=!0!==Z.visible,ee=new ScatterMapbox(i,Z.uid,X,$),et=F(i.gd,o),er=ee.below=i.belowLookup["trace-"+Z.uid];if(X)for(ee.addSource("circle",et.circle,Z.cluster),s=0;s<j.cluster.length;s++)N=et[_=j.cluster[s]],ee.addLayer(_,N,er);else for(s=0;s<j.nonCluster.length;s++)N=et[_=j.nonCluster[s]],ee.addSource(_,N,Z.cluster),ee.addLayer(_,N,er);return o[0].trace._glTrace=ee,ee}},86387:function(i,o,s){"use strict";var _=s(71828),F=s(34098),N=s(50606).BADNUM;i.exports=function(i,o){var s,j=i.cd,Z=i.xaxis,X=i.yaxis,$=[],ee=j[0].trace;if(!F.hasMarkers(ee))return[];if(!1===o)for(s=0;s<j.length;s++)j[s].selected=0;else for(s=0;s<j.length;s++){var et=j[s],er=et.lonlat;if(er[0]!==N){var en=[_.modHalf(er[0],360),er[1]],ei=[Z.c2p(en),X.c2p(en)];o.contains(ei,null,s,i)?($.push({pointNumber:s,lon:er[0],lat:er[1]}),et.selected=1):et.selected=0}}return $}},81245:function(i,o,s){"use strict";var _=s(5386).fF,F=s(5386).si,N=s(1426).extendFlat,j=s(82196),Z=s(9012),X=j.line;i.exports={mode:j.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:j.text,texttemplate:F({editType:"plot"},{keys:["r","theta","text"]}),hovertext:j.hovertext,line:{color:X.color,width:X.width,dash:X.dash,backoff:X.backoff,shape:N({},X.shape,{values:["linear","spline"]}),smoothing:X.smoothing,editType:"calc"},connectgaps:j.connectgaps,marker:j.marker,cliponaxis:N({},j.cliponaxis,{dflt:!1}),textposition:j.textposition,textfont:j.textfont,fill:N({},j.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:j.fillcolor,hoverinfo:N({},Z.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:j.hoveron,hovertemplate:_(),selected:j.selected,unselected:j.unselected}},26442:function(i,o,s){"use strict";var _=s(92770),F=s(50606).BADNUM,N=s(89298),j=s(36922),Z=s(75225),X=s(66279),$=s(47761).calcMarkerSize;i.exports=function(i,o){for(var s=i._fullLayout,ee=o.subplot,et=s[ee].radialaxis,er=s[ee].angularaxis,en=et.makeCalcdata(o,"r"),ei=er.makeCalcdata(o,"theta"),eo=o._length,es=Array(eo),el=0;el<eo;el++){var ec=en[el],eu=ei[el],ef=es[el]={};_(ec)&&_(eu)?(ef.r=ec,ef.theta=eu):ef.r=F}var ed=$(o,eo);return o._extremes.x=N.findExtremes(et,en,{ppad:ed}),j(i,o),Z(es,o),X(es,o),es}},22184:function(i,o,s){"use strict";var _=s(71828),F=s(34098),N=s(49508),j=s(11058),Z=s(94039),X=s(82410),$=s(28908),ee=s(47581).PTS_LINESONLY,et=s(81245);function supplyDefaults(i,o,s,er){function coerce(s,F){return _.coerce(i,o,et,s,F)}var en=handleRThetaDefaults(i,o,er,coerce);if(!en){o.visible=!1;return}coerce("thetaunit"),coerce("mode",en<ee?"lines+markers":"lines"),coerce("text"),coerce("hovertext"),"fills"!==o.hoveron&&coerce("hovertemplate"),F.hasLines(o)&&(j(i,o,s,er,coerce,{backoff:!0}),Z(i,o,coerce),coerce("connectgaps")),F.hasMarkers(o)&&N(i,o,s,er,coerce,{gradient:!0}),F.hasText(o)&&(coerce("texttemplate"),X(i,o,er,coerce));var ei=[];(F.hasMarkers(o)||F.hasText(o))&&(coerce("cliponaxis"),coerce("marker.maxdisplayed"),ei.push("points")),coerce("fill"),"none"===o.fill||($(i,o,s,coerce),F.hasLines(o)||Z(i,o,coerce)),("tonext"===o.fill||"toself"===o.fill)&&ei.push("fills"),coerce("hoveron",ei.join("+")||"points"),_.coerceSelectionMarkerOpacity(o,coerce)}function handleRThetaDefaults(i,o,s,_){var F,N=_("r"),j=_("theta");if(N)j?F=Math.min(N.length,j.length):(F=N.length,_("theta0"),_("dtheta"));else{if(!j)return 0;F=o.theta.length,_("r0"),_("dr")}return o._length=F,F}i.exports={handleRThetaDefaults:handleRThetaDefaults,supplyDefaults:supplyDefaults}},98608:function(i,o,s){"use strict";var _=s(71828),F=s(89298);i.exports=function(i,o,s){var N,j,Z={},X=s[o.subplot]._subplot;X?(N=X.radialAxis,j=X.angularAxis):(N=(X=s[o.subplot]).radialaxis,j=X.angularaxis);var $=N.c2l(i.r);Z.rLabel=F.tickText(N,$,!0).text;var ee="degrees"===j.thetaunit?_.rad2deg(i.theta):i.theta;return Z.thetaLabel=F.tickText(j,ee,!0).text,Z}},59150:function(i,o,s){"use strict";var _=s(33720);function hoverPoints(i,o,s,F){var N=_(i,o,s,F);if(N&&!1!==N[0].index){var j=N[0];if(void 0===j.index)return N;var Z=i.subplot,X=j.cd[j.index],$=j.trace;if(Z.isPtInside(X))return j.xLabelVal=void 0,j.yLabelVal=void 0,makeHoverPointText(X,$,Z,j),j.hovertemplate=$.hovertemplate,N}}function makeHoverPointText(i,o,s,_){var F=s.radialAxis,N=s.angularAxis;F._hovertitle="r",N._hovertitle="θ";var j={};j[o.subplot]={_subplot:s};var Z=o._module.formatLabels(i,o,j);_.rLabel=Z.rLabel,_.thetaLabel=Z.thetaLabel;var X=i.hi||o.hoverinfo,$=[];function textPart(i,o){$.push(i._hovertitle+": "+o)}if(!o.hovertemplate){var ee=X.split("+");-1!==ee.indexOf("all")&&(ee=["r","theta","text"]),-1!==ee.indexOf("r")&&textPart(F,_.rLabel),-1!==ee.indexOf("theta")&&textPart(N,_.thetaLabel),-1!==ee.indexOf("text")&&_.text&&($.push(_.text),delete _.text),_.extraText=$.join("<br>")}}i.exports={hoverPoints:hoverPoints,makeHoverPointText:makeHoverPointText}},91271:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:s(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:s(81245),supplyDefaults:s(22184).supplyDefaults,colorbar:s(4898),formatLabels:s(98608),calc:s(26442),plot:s(45162),style:s(16296).style,styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(59150).hoverPoints,selectPoints:s(98002),meta:{}}},45162:function(i,o,s){"use strict";var _=s(32663),F=s(50606).BADNUM;i.exports=function(i,o,s){for(var N=o.layers.frontplot.select("g.scatterlayer"),j=o.xaxis,Z=o.yaxis,X={xaxis:j,yaxis:Z,plot:o.framework,layerClipId:o._hasClipOnAxisFalse?o.clipIds.forTraces:null},$=o.radialAxis,ee=o.angularAxis,et=0;et<s.length;et++)for(var er=s[et],en=0;en<er.length;en++){0===en&&(er[0].trace._xA=j,er[0].trace._yA=Z);var ei=er[en],eo=ei.r;if(eo===F)ei.x=ei.y=F;else{var es=$.c2g(eo),el=ee.c2g(ei.theta);ei.x=es*Math.cos(el),ei.y=es*Math.sin(el)}}_(i,X,s,N)}},53286:function(i,o,s){"use strict";var _=s(81245),F=s(42341),N=s(5386).si;i.exports={mode:_.mode,r:_.r,theta:_.theta,r0:_.r0,dr:_.dr,theta0:_.theta0,dtheta:_.dtheta,thetaunit:_.thetaunit,text:_.text,texttemplate:N({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_.hovertext,hovertemplate:_.hovertemplate,line:F.line,connectgaps:F.connectgaps,marker:F.marker,fill:F.fill,fillcolor:F.fillcolor,textposition:F.textposition,textfont:F.textfont,hoverinfo:_.hoverinfo,selected:_.selected,unselected:_.unselected}},65746:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:s(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:s(53286),supplyDefaults:s(75485),colorbar:s(4898),formatLabels:s(46255),calc:s(37499),hoverPoints:s(29347).hoverPoints,selectPoints:s(58147),meta:{}}},37499:function(i,o,s){"use strict";var _=s(36922),F=s(47761).calcMarkerSize,N=s(19635),j=s(89298),Z=s(78232).TOO_MANY_POINTS;i.exports=function(i,o){var s,X=i._fullLayout,$=o.subplot,ee=X[$].radialaxis,et=X[$].angularaxis,er=o._r=ee.makeCalcdata(o,"r"),en=o._theta=et.makeCalcdata(o,"theta"),ei=o._length,eo={};ei<er.length&&(er=er.slice(0,ei)),ei<en.length&&(en=en.slice(0,ei)),eo.r=er,eo.theta=en,_(i,o);var es=eo.opts=N.style(i,o);return ei<Z?s=F(o,ei):es.marker&&(s=2*(es.marker.sizeAvg||Math.max(es.marker.size,3))),o._extremes.x=j.findExtremes(ee,er,{ppad:s}),[{x:!1,y:!1,t:eo,trace:o}]}},75485:function(i,o,s){"use strict";var _=s(71828),F=s(34098),N=s(22184).handleRThetaDefaults,j=s(49508),Z=s(11058),X=s(82410),$=s(28908),ee=s(47581).PTS_LINESONLY,et=s(53286);i.exports=function(i,o,s,er){function coerce(s,F){return _.coerce(i,o,et,s,F)}var en=N(i,o,er,coerce);if(!en){o.visible=!1;return}coerce("thetaunit"),coerce("mode",en<ee?"lines+markers":"lines"),coerce("text"),coerce("hovertext"),"fills"!==o.hoveron&&coerce("hovertemplate"),F.hasLines(o)&&(Z(i,o,s,er,coerce),coerce("connectgaps")),F.hasMarkers(o)&&j(i,o,s,er,coerce,{noAngleRef:!0,noStandOff:!0}),F.hasText(o)&&(coerce("texttemplate"),X(i,o,er,coerce)),coerce("fill"),"none"!==o.fill&&$(i,o,s,coerce),_.coerceSelectionMarkerOpacity(o,coerce)}},46255:function(i,o,s){"use strict";var _=s(98608);i.exports=function(i,o,s){var F=i.i;return"r"in i||(i.r=o._r[F]),"theta"in i||(i.theta=o._theta[F]),_(i,o,s)}},29347:function(i,o,s){"use strict";var _=s(20794),F=s(59150).makeHoverPointText;function hoverPoints(i,o,s,N){var j=i.cd[0].t,Z=j.r,X=j.theta,$=_.hoverPoints(i,o,s,N);if($&&!1!==$[0].index){var ee=$[0];if(void 0===ee.index)return $;var et=i.subplot,er=ee.cd[ee.index],en=ee.trace;if(er.r=Z[ee.index],er.theta=X[ee.index],et.isPtInside(er))return ee.xLabelVal=void 0,ee.yLabelVal=void 0,F(er,en,et,ee),$}}i.exports={hoverPoints:hoverPoints}},21461:function(i,o,s){"use strict";var _=s(65746);_.plot=s(49741),i.exports=_},49741:function(i,o,s){"use strict";var _=s(88294),F=s(92770),N=s(26787),j=s(38967),Z=s(19635),X=s(71828),$=s(78232).TOO_MANY_POINTS;i.exports=function(i,o,s){if(s.length){var ee=o.radialAxis,et=o.angularAxis,er=j(i,o);return s.forEach(function(s){if(s&&s[0]&&s[0].trace){var N=s[0],j=N.trace,en=N.t,ei=j._length,eo=en.r,es=en.theta,el=en.opts,ec=eo.slice(),eu=es.slice();for(ep=0;ep<eo.length;ep++)o.isPtInside({r:eo[ep],theta:es[ep]})||(ec[ep]=NaN,eu[ep]=NaN);var ef=Array(2*ei),ed=Array(ei),eh=Array(ei);for(ep=0;ep<ei;ep++){var ep,eg,em,ey=ec[ep];if(F(ey)){var ev=ee.c2g(ey),ex=et.c2g(eu[ep],j.thetaunit);eg=ev*Math.cos(ex),em=ev*Math.sin(ex)}else eg=em=NaN;ed[ep]=ef[2*ep]=eg,eh[ep]=ef[2*ep+1]=em}en.tree=_(ef),el.marker&&ei>=$&&(el.marker.cluster=en.tree),el.marker&&(el.markerSel.positions=el.markerUnsel.positions=el.marker.positions=ef),el.line&&ef.length>1&&X.extendFlat(el.line,Z.linePositions(i,j,ef)),el.text&&(X.extendFlat(el.text,{positions:ef},Z.textPosition(i,j,el.text,el.marker)),X.extendFlat(el.textSel,{positions:ef},Z.textPosition(i,j,el.text,el.markerSel)),X.extendFlat(el.textUnsel,{positions:ef},Z.textPosition(i,j,el.text,el.markerUnsel))),el.fill&&!er.fill2d&&(er.fill2d=!0),el.marker&&!er.scatter2d&&(er.scatter2d=!0),el.line&&!er.line2d&&(er.line2d=!0),el.text&&!er.glText&&(er.glText=!0),er.lineOptions.push(el.line),er.fillOptions.push(el.fill),er.markerOptions.push(el.marker),er.markerSelectedOptions.push(el.markerSel),er.markerUnselectedOptions.push(el.markerUnsel),er.textOptions.push(el.text),er.textSelectedOptions.push(el.textSel),er.textUnselectedOptions.push(el.textUnsel),er.selectBatch.push([]),er.unselectBatch.push([]),en.x=ed,en.y=eh,en.rawx=ed,en.rawy=eh,en.r=eo,en.theta=es,en.positions=ef,en._scene=er,en.index=er.count,er.count++}}),N(i,o,s)}},i.exports.reglPrecompiled={}},48300:function(i,o,s){"use strict";var _=s(5386).fF,F=s(5386).si,N=s(1426).extendFlat,j=s(82196),Z=s(9012),X=j.line;i.exports={mode:j.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:j.text,texttemplate:F({editType:"plot"},{keys:["real","imag","text"]}),hovertext:j.hovertext,line:{color:X.color,width:X.width,dash:X.dash,backoff:X.backoff,shape:N({},X.shape,{values:["linear","spline"]}),smoothing:X.smoothing,editType:"calc"},connectgaps:j.connectgaps,marker:j.marker,cliponaxis:N({},j.cliponaxis,{dflt:!1}),textposition:j.textposition,textfont:j.textfont,fill:N({},j.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:j.fillcolor,hoverinfo:N({},Z.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:j.hoveron,hovertemplate:_(),selected:j.selected,unselected:j.unselected}},30621:function(i,o,s){"use strict";var _=s(92770),F=s(50606).BADNUM,N=s(36922),j=s(75225),Z=s(66279),X=s(47761).calcMarkerSize;i.exports=function(i,o){for(var s=i._fullLayout,$=o.subplot,ee=s[$].realaxis,et=s[$].imaginaryaxis,er=ee.makeCalcdata(o,"real"),en=et.makeCalcdata(o,"imag"),ei=o._length,eo=Array(ei),es=0;es<ei;es++){var el=er[es],ec=en[es],eu=eo[es]={};_(el)&&_(ec)?(eu.real=el,eu.imag=ec):eu.real=F}return X(o,ei),N(i,o),j(eo,o),Z(eo,o),eo}},65269:function(i,o,s){"use strict";var _=s(71828),F=s(34098),N=s(49508),j=s(11058),Z=s(94039),X=s(82410),$=s(28908),ee=s(47581).PTS_LINESONLY,et=s(48300);function handleRealImagDefaults(i,o,s,_){var F,N=_("real"),j=_("imag");return N&&j&&(F=Math.min(N.length,j.length)),o._length=F,F}i.exports=function(i,o,s,er){function coerce(s,F){return _.coerce(i,o,et,s,F)}var en=handleRealImagDefaults(i,o,er,coerce);if(!en){o.visible=!1;return}coerce("mode",en<ee?"lines+markers":"lines"),coerce("text"),coerce("hovertext"),"fills"!==o.hoveron&&coerce("hovertemplate"),F.hasLines(o)&&(j(i,o,s,er,coerce,{backoff:!0}),Z(i,o,coerce),coerce("connectgaps")),F.hasMarkers(o)&&N(i,o,s,er,coerce,{gradient:!0}),F.hasText(o)&&(coerce("texttemplate"),X(i,o,er,coerce));var ei=[];(F.hasMarkers(o)||F.hasText(o))&&(coerce("cliponaxis"),coerce("marker.maxdisplayed"),ei.push("points")),coerce("fill"),"none"===o.fill||($(i,o,s,coerce),F.hasLines(o)||Z(i,o,coerce)),("tonext"===o.fill||"toself"===o.fill)&&ei.push("fills"),coerce("hoveron",ei.join("+")||"points"),_.coerceSelectionMarkerOpacity(o,coerce)}},62047:function(i,o,s){"use strict";var _=s(89298);i.exports=function(i,o,s){var F={},N=s[o.subplot]._subplot;return F.realLabel=_.tickText(N.radialAxis,i.real,!0).text,F.imagLabel=_.tickText(N.angularAxis,i.imag,!0).text,F}},11350:function(i,o,s){"use strict";var _=s(33720);function hoverPoints(i,o,s,F){var N=_(i,o,s,F);if(N&&!1!==N[0].index){var j=N[0];if(void 0===j.index)return N;var Z=i.subplot,X=j.cd[j.index],$=j.trace;if(Z.isPtInside(X))return j.xLabelVal=void 0,j.yLabelVal=void 0,makeHoverPointText(X,$,Z,j),j.hovertemplate=$.hovertemplate,N}}function makeHoverPointText(i,o,s,_){var F=s.radialAxis,N=s.angularAxis;F._hovertitle="real",N._hovertitle="imag";var j={};j[o.subplot]={_subplot:s};var Z=o._module.formatLabels(i,o,j);_.realLabel=Z.realLabel,_.imagLabel=Z.imagLabel;var X=i.hi||o.hoverinfo,$=[];function textPart(i,o){$.push(i._hovertitle+": "+o)}if(!o.hovertemplate){var ee=X.split("+");-1!==ee.indexOf("all")&&(ee=["real","imag","text"]),-1!==ee.indexOf("real")&&textPart(F,_.realLabel),-1!==ee.indexOf("imag")&&textPart(N,_.imagLabel),-1!==ee.indexOf("text")&&_.text&&($.push(_.text),delete _.text),_.extraText=$.join("<br>")}}i.exports={hoverPoints:hoverPoints,makeHoverPointText:makeHoverPointText}},85956:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"scattersmith",basePlotModule:s(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:s(48300),supplyDefaults:s(65269),colorbar:s(4898),formatLabels:s(62047),calc:s(30621),plot:s(12480),style:s(16296).style,styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(11350).hoverPoints,selectPoints:s(98002),meta:{}}},12480:function(i,o,s){"use strict";var _=s(32663),F=s(50606).BADNUM,N=s(23893).smith;i.exports=function(i,o,s){for(var j=o.layers.frontplot.select("g.scatterlayer"),Z=o.xaxis,X=o.yaxis,$={xaxis:Z,yaxis:X,plot:o.framework,layerClipId:o._hasClipOnAxisFalse?o.clipIds.forTraces:null},ee=0;ee<s.length;ee++)for(var et=s[ee],er=0;er<et.length;er++){0===er&&(et[0].trace._xA=Z,et[0].trace._yA=X);var en=et[er],ei=en.real;if(ei===F)en.x=en.y=F;else{var eo=N([ei,en.imag]);en.x=eo[0],en.y=eo[1]}}_(i,$,s,j)}},50413:function(i,o,s){"use strict";var _=s(5386).fF,F=s(5386).si,N=s(82196),j=s(9012),Z=s(50693),X=s(79952).P,$=s(1426).extendFlat,ee=N.marker,et=N.line,er=ee.line;i.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:$({},N.mode,{dflt:"markers"}),text:$({},N.text,{}),texttemplate:F({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:$({},N.hovertext,{}),line:{color:et.color,width:et.width,dash:X,backoff:et.backoff,shape:$({},et.shape,{values:["linear","spline"]}),smoothing:et.smoothing,editType:"calc"},connectgaps:N.connectgaps,cliponaxis:N.cliponaxis,fill:$({},N.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:N.fillcolor,marker:$({symbol:ee.symbol,opacity:ee.opacity,angle:ee.angle,angleref:ee.angleref,standoff:ee.standoff,maxdisplayed:ee.maxdisplayed,size:ee.size,sizeref:ee.sizeref,sizemin:ee.sizemin,sizemode:ee.sizemode,line:$({width:er.width,editType:"calc"},Z("marker.line")),gradient:ee.gradient,editType:"calc"},Z("marker")),textfont:N.textfont,textposition:N.textposition,selected:N.selected,unselected:N.unselected,hoverinfo:$({},j.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:N.hoveron,hovertemplate:_()}},54337:function(i,o,s){"use strict";var _=s(92770),F=s(36922),N=s(75225),j=s(66279),Z=s(47761).calcMarkerSize,X=["a","b","c"],$={a:["b","c"],b:["a","c"],c:["a","b"]};i.exports=function(i,o){var s,ee,et,er,en,ei,eo,es,el,ec,eu,ef,ed=i._fullLayout[o.subplot].sum,eh=o.sum||ed,ep={a:o.a,b:o.b,c:o.c};for(s=0;s<X.length;s++)if(!ep[et=X[s]]){for(ee=0,en=ep[$[et][0]],ei=ep[$[et][1]],er=Array(en.length);ee<en.length;ee++)er[ee]=eh-en[ee]-ei[ee];ep[et]=er}var eg=o._length,em=Array(eg);for(s=0;s<eg;s++)eo=ep.a[s],es=ep.b[s],el=ep.c[s],_(eo)&&_(es)&&_(el)?(1!=(ec=ed/((eo=+eo)+(es=+es)+(el=+el)))&&(eo*=ec,es*=ec,el*=ec),ef=eo,eu=el-es,em[s]={x:eu,y:ef,a:eo,b:es,c:el}):em[s]={x:!1,y:!1};return Z(o,eg),F(i,o),N(em,o),j(em,o),em}},46008:function(i,o,s){"use strict";var _=s(71828),F=s(47581),N=s(34098),j=s(49508),Z=s(11058),X=s(94039),$=s(82410),ee=s(28908),et=s(50413);i.exports=function(i,o,s,er){function coerce(s,F){return _.coerce(i,o,et,s,F)}var en,ei=coerce("a"),eo=coerce("b"),es=coerce("c");if(ei?(en=ei.length,eo?(en=Math.min(en,eo.length),es&&(en=Math.min(en,es.length))):en=es?Math.min(en,es.length):0):eo&&es&&(en=Math.min(eo.length,es.length)),!en){o.visible=!1;return}o._length=en,coerce("sum"),coerce("text"),coerce("hovertext"),"fills"!==o.hoveron&&coerce("hovertemplate"),coerce("mode",en<F.PTS_LINESONLY?"lines+markers":"lines"),N.hasLines(o)&&(Z(i,o,s,er,coerce,{backoff:!0}),X(i,o,coerce),coerce("connectgaps")),N.hasMarkers(o)&&j(i,o,s,er,coerce,{gradient:!0}),N.hasText(o)&&(coerce("texttemplate"),$(i,o,er,coerce));var el=[];(N.hasMarkers(o)||N.hasText(o))&&(coerce("cliponaxis"),coerce("marker.maxdisplayed"),el.push("points")),coerce("fill"),"none"===o.fill||(ee(i,o,s,coerce),N.hasLines(o)||X(i,o,coerce)),("tonext"===o.fill||"toself"===o.fill)&&el.push("fills"),coerce("hoveron",el.join("+")||"points"),_.coerceSelectionMarkerOpacity(o,coerce)}},4524:function(i){"use strict";i.exports=function(i,o,s,_,F){if(o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),_[F]){var N=_[F];i.a=N.a,i.b=N.b,i.c=N.c}else i.a=o.a,i.b=o.b,i.c=o.c;return i}},93645:function(i,o,s){"use strict";var _=s(89298);i.exports=function(i,o,s){var F={},N=s[o.subplot]._subplot;return F.aLabel=_.tickText(N.aaxis,i.a,!0).text,F.bLabel=_.tickText(N.baxis,i.b,!0).text,F.cLabel=_.tickText(N.caxis,i.c,!0).text,F}},47250:function(i,o,s){"use strict";var _=s(33720);i.exports=function(i,o,s,F){var N=_(i,o,s,F);if(N&&!1!==N[0].index){var j=N[0];if(void 0===j.index){var Z=1-j.y0/i.ya._length,X=i.xa._length,$=X*Z/2,ee=X-$;return j.x0=Math.max(Math.min(j.x0,ee),$),j.x1=Math.max(Math.min(j.x1,ee),$),N}var et=j.cd[j.index],er=j.trace,en=j.subplot;j.a=et.a,j.b=et.b,j.c=et.c,j.xLabelVal=void 0,j.yLabelVal=void 0;var ei={};ei[er.subplot]={_subplot:en};var eo=er._module.formatLabels(et,er,ei);j.aLabel=eo.aLabel,j.bLabel=eo.bLabel,j.cLabel=eo.cLabel;var es=et.hi||er.hoverinfo,el=[];if(!er.hovertemplate){var ec=es.split("+");-1!==ec.indexOf("all")&&(ec=["a","b","c"]),-1!==ec.indexOf("a")&&textPart(en.aaxis,j.aLabel),-1!==ec.indexOf("b")&&textPart(en.baxis,j.bLabel),-1!==ec.indexOf("c")&&textPart(en.caxis,j.cLabel)}return j.extraText=el.join("<br>"),j.hovertemplate=er.hovertemplate,N}function textPart(i,o){el.push(i._hovertitle+": "+o)}}},52979:function(i,o,s){"use strict";i.exports={attributes:s(50413),supplyDefaults:s(46008),colorbar:s(4898),formatLabels:s(93645),calc:s(54337),plot:s(7507),style:s(16296).style,styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(47250),selectPoints:s(98002),eventData:s(4524),moduleType:"trace",name:"scatterternary",basePlotModule:s(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(i,o,s){"use strict";var _=s(32663);i.exports=function(i,o,s){var F=o.plotContainer;F.select(".scatterlayer").selectAll("*").remove();for(var N=o.xaxis,j=o.yaxis,Z={xaxis:N,yaxis:j,plot:F,layerClipId:o._hasClipOnAxisFalse?o.clipIdRelative:null},X=o.layers.frontplot.select("g.scatterlayer"),$=0;$<s.length;$++){var ee=s[$];ee.length&&(ee[0].trace._xA=N,ee[0].trace._yA=j)}_(i,Z,s,X)}},46880:function(i,o,s){"use strict";var _=s(82196),F=s(50693),N=s(12663).axisHoverFormat,j=s(5386).fF,Z=s(42341),X=s(85555).idRegex,$=s(44467).templatedArray,ee=s(1426).extendFlat,et=_.marker,er=et.line,en=ee(F("marker.line",{editTypeOverride:"calc"}),{width:ee({},er.width,{editType:"calc"}),editType:"calc"}),ei=ee(F("marker"),{symbol:et.symbol,angle:et.angle,size:ee({},et.size,{editType:"markerSize"}),sizeref:et.sizeref,sizemin:et.sizemin,sizemode:et.sizemode,opacity:et.opacity,colorbar:et.colorbar,line:en,editType:"calc"});function makeAxesValObject(i){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:X[i],editType:"plot"}}}ei.color.editType=ei.cmin.editType=ei.cmax.editType="style",i.exports={dimensions:$("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:ee({},Z.text,{}),hovertext:ee({},Z.hovertext,{}),hovertemplate:j(),xhoverformat:N("x"),yhoverformat:N("y"),marker:ei,xaxes:makeAxesValObject("x"),yaxes:makeAxesValObject("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:Z.selected.marker,editType:"calc"},unselected:{marker:Z.unselected.marker,editType:"calc"},opacity:Z.opacity}},65017:function(i,o,s){"use strict";var _=s(73972),F=s(83312);i.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:s(46880),supplyDefaults:s(25784),colorbar:s(4898),calc:s(87625),plot:s(79410),hoverPoints:s(8567).hoverPoints,selectPoints:s(8689),editStyle:s(28801),meta:{}},_.register(F)},16947:function(i,o,s){"use strict";var _=s(46075),F=s(73972),N=s(79749),j=s(27659).a0,Z=s(93612),X=s(41675).getFromId,$=s(89298).shouldShowZeroLine,ee="splom",et={};function plot(i){var o=i._fullLayout,s=F.getModule(ee),_=j(i.calcdata,s)[0];N(i,["ANGLE_instanced_arrays","OES_element_index_uint"],et)&&(o._hasOnlyLargeSploms&&updateGrid(i),s.plot(i,{},_))}function drag(i){var o=i.calcdata,s=i._fullLayout;s._hasOnlyLargeSploms&&updateGrid(i);for(var _=0;_<o.length;_++){var F=o[_][0].trace,N=s._splomScenes[F.uid];"splom"===F.type&&N&&N.matrix&&dragOne(i,F,N)}}function dragOne(i,o,s){for(var _=s.matrixOptions.data.length,F=o._visibleDims,N=s.viewOpts.ranges=Array(_),j=0;j<F.length;j++){var Z=F[j],$=N[j]=[,,,,],ee=X(i,o._diag[Z][0]);ee&&($[0]=ee.r2l(ee.range[0]),$[2]=ee.r2l(ee.range[1]));var et=X(i,o._diag[Z][1]);et&&($[1]=et.r2l(et.range[0]),$[3]=et.r2l(et.range[1]))}s.selectBatch.length||s.unselectBatch.length?s.matrix.update({ranges:N},{ranges:N}):s.matrix.update({ranges:N})}function updateGrid(i){var o=i._fullLayout,s=o._glcanvas.data()[0].regl,F=o._splomGrid;F||(F=o._splomGrid=_(s)),F.update(makeGridData(i))}function makeGridData(i){var o=i._context.plotGlPixelRatio,s=i._fullLayout,_=s._size,F=[0,0,s.width*o,s.height*o],N={};function push(i,s,_,j,Z,X){_*=o,j*=o,Z*=o,X*=o;var $=s[i+"color"],ee=s[i+"width"],et=String($+ee);et in N?N[et].data.push(NaN,NaN,_,j,Z,X):N[et]={data:[_,j,Z,X],join:"rect",thickness:ee*o,color:$,viewport:F,range:F,overlay:!1}}for(j in s._splomSubplots){var j,Z,X,ee=s._plots[j],et=ee.xaxis,er=ee.yaxis,en=et._gridVals,ei=er._gridVals,eo=et._offset,es=et._length,el=er._length,ec=_.b+er.domain[0]*_.h,eu=-er._m,ef=-eu*er.r2l(er.range[0],er.calendar);if(et.showgrid)for(j=0;j<en.length;j++)Z=eo+et.l2p(en[j].x),push("grid",et,Z,ec,Z,ec+el);if(er.showgrid)for(j=0;j<ei.length;j++)push("grid",er,eo,X=ec+ef+eu*ei[j].x,eo+es,X);$(i,et,er)&&(Z=eo+et.l2p(0),push("zeroline",et,Z,ec,Z,ec+el)),$(i,er,et)&&push("zeroline",er,eo,X=ec+ef+0,eo+es,X)}var ed=[];for(j in N)ed.push(N[j]);return ed}function clean(i,o,s,_){var F,N={};if(_._splomScenes){for(F=0;F<i.length;F++){var j=i[F];"splom"===j.type&&(N[j.uid]=1)}for(F=0;F<s.length;F++){var X=s[F];if(!N[X.uid]){var $=_._splomScenes[X.uid];$&&$.destroy&&$.destroy(),_._splomScenes[X.uid]=null,delete _._splomScenes[X.uid]}}}0===Object.keys(_._splomScenes||{}).length&&delete _._splomScenes,_._splomGrid&&!o._hasOnlyLargeSploms&&_._hasOnlyLargeSploms&&(_._splomGrid.destroy(),_._splomGrid=null,delete _._splomGrid),Z.clean(i,o,s,_)}i.exports={name:ee,attr:Z.attr,attrRegex:Z.attrRegex,layoutAttributes:Z.layoutAttributes,supplyLayoutDefaults:Z.supplyLayoutDefaults,drawFramework:Z.drawFramework,plot:plot,drag:drag,updateGrid:updateGrid,clean:clean,updateFx:Z.updateFx,toSVG:Z.toSVG,reglPrecompiled:et}},87625:function(i,o,s){"use strict";var _=s(71828),F=s(41675),N=s(47761).calcMarkerSize,j=s(47761).calcAxisExpansion,Z=s(36922),X=s(19635).markerSelection,$=s(19635).markerStyle,ee=s(10164),et=s(50606).BADNUM,er=s(78232).TOO_MANY_POINTS;i.exports=function(i,o){var s,en,ei,eo,es,el,ec=o.dimensions,eu=o._length,ef={},ed=ef.cdata=[],eh=ef.data=[],ep=o._visibleDims=[];function makeCalcdata(i,s){for(var F=i.makeCalcdata({v:s.values,vcalendar:o.calendar},"v"),N=0;N<F.length;N++)F[N]=F[N]===et?NaN:F[N];ed.push(F),eh.push("log"===i.type?_.simpleMap(F,i.c2l):F)}for(s=0;s<ec.length;s++)if((ei=ec[s]).visible){if(eo=F.getFromId(i,o._diag[s][0]),es=F.getFromId(i,o._diag[s][1]),eo&&es&&eo.type!==es.type){_.log("Skipping splom dimension "+s+" with conflicting axis types");continue}eo?(makeCalcdata(eo,ei),es&&"category"===es.type&&(es._categories=eo._categories.slice())):makeCalcdata(es,ei),ep.push(s)}for(Z(i,o),_.extendFlat(ef,$(i,o)),el=ed.length*eu>er?ef.sizeAvg||Math.max(ef.size,3):N(o,eu),en=0;en<ep.length;en++)ei=ec[s=ep[en]],eo=F.getFromId(i,o._diag[s][0])||{},es=F.getFromId(i,o._diag[s][1])||{},j(i,o,eo,es,ed[en],ed[en],el);var eg=ee(i,o);return eg.matrix||(eg.matrix=!0),eg.matrixOptions=ef,eg.selectedOptions=X(i,o,o.selected),eg.unselectedOptions=X(i,o,o.unselected),[{x:!1,y:!1,t:{},trace:o}]}},25784:function(i,o,s){"use strict";var _=s(71828),F=s(85501),N=s(46880),j=s(34098),Z=s(49508),X=s(94397),$=s(68645).isOpenSymbol;function dimensionDefaults(i,o){function coerce(s,F){return _.coerce(i,o,N.dimensions,s,F)}coerce("label");var s=coerce("values");s&&s.length?coerce("visible"):o.visible=!1,coerce("axis.type"),coerce("axis.matches")}function handleAxisDefaults(i,o,s,_){var F,N,j=o.dimensions,Z=j.length,X=o.showupperhalf,$=o.showlowerhalf,ee=o.diagonal.visible,et=Array(Z),er=Array(Z);for(F=0;F<Z;F++){var en=F?F+1:"";et[F]="x"+en,er[F]="y"+en}var ei=_("xaxes",et),eo=_("yaxes",er),es=o._diag=Array(Z);o._xaxes={},o._yaxes={};var el=[],ec=[];function fillAxisStashes(i,_,F,N){if(i){var j=i.charAt(0),Z=s._splomAxes[j];if(o["_"+j+"axes"][i]=1,N.push(i),!(i in Z)){var X=Z[i]={};F&&(X.label=F.label||"",F.visible&&F.axis&&(F.axis.type&&(X.type=F.axis.type),F.axis.matches&&(X.matches=_)))}}}var eu=!ee&&!$,ef=!ee&&!X;for(F=0,o._axesDim={};F<Z;F++){var ed=j[F],eh=0===F,ep=F===Z-1,eg=eh&&eu||ep&&ef?void 0:ei[F],em=eh&&ef||ep&&eu?void 0:eo[F];fillAxisStashes(eg,em,ed,el),fillAxisStashes(em,eg,ed,ec),es[F]=[eg,em],o._axesDim[eg]=F,o._axesDim[em]=F}for(F=0;F<el.length;F++)for(N=0;N<ec.length;N++){var ey=el[F]+ec[N];F>N&&X?s._splomSubplots[ey]=1:F<N&&$?s._splomSubplots[ey]=1:F!==N||!ee&&$&&X||(s._splomSubplots[ey]=1)}(!$||!ee&&X&&$)&&(s._splomGridDflt.xside="bottom",s._splomGridDflt.yside="left")}i.exports=function(i,o,s,ee){function coerce(s,F){return _.coerce(i,o,N,s,F)}var et=F(i,o,{name:"dimensions",handleItemDefaults:dimensionDefaults}),er=coerce("diagonal.visible"),en=coerce("showupperhalf"),ei=coerce("showlowerhalf");if(!X(o,et,"values")||!er&&!en&&!ei){o.visible=!1;return}coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("xhoverformat"),coerce("yhoverformat"),Z(i,o,s,ee,coerce,{noAngleRef:!0,noStandOff:!0});var eo=$(o.marker.symbol),es=j.isBubble(o);coerce("marker.line.width",eo||es?1:0),handleAxisDefaults(i,o,ee,coerce),_.coerceSelectionMarkerOpacity(o,coerce)}},28801:function(i,o,s){"use strict";var _=s(71828),F=s(36922),N=s(19635).markerStyle;i.exports=function(i,o){var s=o.trace,j=i._fullLayout._splomScenes[s.uid];if(j){F(i,s),_.extendFlat(j.matrixOptions,N(i,s));var Z=_.extendFlat({},j.matrixOptions,j.viewOpts);j.matrix.update(Z,null)}}},35948:function(i,o){"use strict";o.getDimIndex=function(i,o){for(var s=o._id,_={x:0,y:1}[s.charAt(0)],F=i._visibleDims,N=0;N<F.length;N++){var j=F[N];if(i._diag[j][_]===s)return N}return!1}},8567:function(i,o,s){"use strict";var _=s(35948),F=s(20794).calcHover;function hoverPoints(i,o,s){var N,j,Z=i.cd[0].trace,X=i.scene.matrixOptions.cdata,$=i.xa,ee=i.ya,et=$.c2p(o),er=ee.c2p(s),en=i.distance,ei=_.getDimIndex(Z,$),eo=_.getDimIndex(Z,ee);if(!1===ei||!1===eo)return[i];for(var es=X[ei],el=X[eo],ec=en,eu=0;eu<es.length;eu++){var ef=es[eu],ed=el[eu],eh=$.c2p(ef)-et,ep=ee.c2p(ed)-er,eg=Math.sqrt(eh*eh+ep*ep);eg<ec&&(ec=j=eg,N=eu)}return(i.index=N,i.distance=ec,i.dxy=j,void 0===N)?[i]:[F(i,es,el,Z)]}i.exports={hoverPoints:hoverPoints}},6419:function(i,o,s){"use strict";var _=s(65017);_.basePlotModule=s(16947),i.exports=_},79410:function(i,o,s){"use strict";var _=s(60487),F=s(71828),N=s(41675),j=s(64505).selectMode;function plotOne(i,o){var s,Z,X,$,ee,et=i._fullLayout,er=et._size,en=o.trace,ei=o.t,eo=et._splomScenes[en.uid],es=eo.matrixOptions,el=es.cdata,ec=et._glcanvas.data()[0].regl,eu=et.dragmode;if(0!==el.length){es.lower=en.showupperhalf,es.upper=en.showlowerhalf,es.diagonal=en.diagonal.visible;var ef=en._visibleDims,ed=el.length,eh=eo.viewOpts={};for(ee=0,eh.ranges=Array(ed),eh.domains=Array(ed);ee<ef.length;ee++){X=ef[ee];var ep=eh.ranges[ee]=[,,,,],eg=eh.domains[ee]=[,,,,];(s=N.getFromId(i,en._diag[X][0]))&&(ep[0]=s._rl[0],ep[2]=s._rl[1],eg[0]=s.domain[0],eg[2]=s.domain[1]),(Z=N.getFromId(i,en._diag[X][1]))&&(ep[1]=Z._rl[0],ep[3]=Z._rl[1],eg[1]=Z.domain[0],eg[3]=Z.domain[1])}var em=i._context.plotGlPixelRatio,ey=er.l*em,ev=er.b*em,ex=er.w*em,e_=er.h*em;eh.viewport=[ey,ev,ex+ey,e_+ev],!0===eo.matrix&&(eo.matrix=_(ec));var ew=et.clickmode.indexOf("select")>-1,eT=j(eu)||!!en.selectedpoints||ew,ek=!0;if(eT){var eA=en._length;if(en.selectedpoints){eo.selectBatch=en.selectedpoints;var eS=en.selectedpoints,eM={};for(X=0;X<eS.length;X++)eM[eS[X]]=!0;var eC=[];for(X=0;X<eA;X++)eM[X]||eC.push(X);eo.unselectBatch=eC}var eE=ei.xpx=Array(ed),eL=ei.ypx=Array(ed);for(ee=0;ee<ef.length;ee++){if(X=ef[ee],s=N.getFromId(i,en._diag[X][0]))for($=0,eE[ee]=Array(eA);$<eA;$++)eE[ee][$]=s.c2p(el[ee][$]);if(Z=N.getFromId(i,en._diag[X][1]))for($=0,eL[ee]=Array(eA);$<eA;$++)eL[ee][$]=Z.c2p(el[ee][$])}if(eo.selectBatch.length||eo.unselectBatch.length){var eP=F.extendFlat({},es,eo.unselectedOptions,eh),eI=F.extendFlat({},es,eo.selectedOptions,eh);eo.matrix.update(eP,eI),ek=!1}}else ei.xpx=ei.ypx=null;if(ek){var eO=F.extendFlat({},es,eh);eo.matrix.update(eO,null)}}}i.exports=function(i,o,s){if(s.length)for(var _=0;_<s.length;_++)plotOne(i,s[_][0])}},10164:function(i,o,s){"use strict";var _=s(71828);i.exports=function(i,o){var s=i._fullLayout,F=o.uid,N=s._splomScenes;N||(N=s._splomScenes={});var j={dirty:!0,selectBatch:[],unselectBatch:[]},Z=N[o.uid];return Z||((Z=N[F]=_.extendFlat({},j,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){Z.matrix&&Z.matrix.draw&&(Z.selectBatch.length||Z.unselectBatch.length?Z.matrix.draw(Z.unselectBatch,Z.selectBatch):Z.matrix.draw()),Z.dirty=!1},Z.destroy=function(){Z.matrix&&Z.matrix.destroy&&Z.matrix.destroy(),Z.matrixOptions=null,Z.selectBatch=null,Z.unselectBatch=null,Z=null}),Z.dirty||_.extendFlat(Z,j),Z}},8689:function(i,o,s){"use strict";var _=s(71828),F=_.pushUnique,N=s(34098),j=s(35948);i.exports=function(i,o){var s=i.cd,Z=s[0].trace,X=s[0].t,$=i.scene,ee=$.matrixOptions.cdata,et=i.xaxis,er=i.yaxis,en=[];if(!$)return en;var ei=!N.hasMarkers(Z)&&!N.hasText(Z);if(!0!==Z.visible||ei)return en;var eo=j.getDimIndex(Z,et),es=j.getDimIndex(Z,er);if(!1===eo||!1===es)return en;var el=X.xpx[eo],ec=X.ypx[es],eu=ee[eo],ef=ee[es],ed=(i.scene.selectBatch||[]).slice(),eh=[];if(!1!==o&&!o.degenerate)for(var ep=0;ep<eu.length;ep++)o.contains([el[ep],ec[ep]],null,ep,i)?(en.push({pointNumber:ep,x:eu[ep],y:ef[ep]}),F(ed,ep)):-1!==ed.indexOf(ep)?F(ed,ep):eh.push(ep);var eg=$.matrixOptions;return ed.length||eh.length?$.selectBatch.length||$.unselectBatch.length||$.matrix.update($.unselectedOptions,_.extendFlat({},eg,$.selectedOptions,$.viewOpts)):$.matrix.update(eg,null),$.selectBatch=ed,$.unselectBatch=eh,en}},21850:function(i,o,s){"use strict";var _=s(50693),F=s(12663).axisHoverFormat,N=s(5386).fF,j=s(2418),Z=s(9012),X=s(1426).extendFlat,$={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:N({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:F("u",1),vhoverformat:F("v",1),whoverformat:F("w",1),xhoverformat:F("x"),yhoverformat:F("y"),zhoverformat:F("z"),showlegend:X({},Z.showlegend,{dflt:!1})};X($,_("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(i){$[i]=j[i]}),$.hoverinfo=X({},Z.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),$.transforms=void 0,i.exports=$},88489:function(i,o,s){"use strict";var _=s(71828),F=s(78803);function calc(i,o){o._len=Math.min(o.u.length,o.v.length,o.w.length,o.x.length,o.y.length,o.z.length),o._u=filter(o.u,o._len),o._v=filter(o.v,o._len),o._w=filter(o.w,o._len),o._x=filter(o.x,o._len),o._y=filter(o.y,o._len),o._z=filter(o.z,o._len);var s,_,N,j,Z=processGrid(o);o._gridFill=Z.fill,o._Xs=Z.Xs,o._Ys=Z.Ys,o._Zs=Z.Zs,o._len=Z.len;var X=0;o.starts&&(s=filter(o.starts.x||[]),_=filter(o.starts.y||[]),N=filter(o.starts.z||[]),X=Math.min(s.length,_.length,N.length)),o._startsX=s||[],o._startsY=_||[],o._startsZ=N||[];var $=0,ee=1/0;for(j=0;j<o._len;j++){var et=o._u[j],er=o._v[j],en=o._w[j],ei=Math.sqrt(et*et+er*er+en*en);$=Math.max($,ei),ee=Math.min(ee,ei)}for(F(i,o,{vals:[ee,$],containerStr:"",cLetter:"c"}),j=0;j<X;j++){var eo=s[j];Z.xMax=Math.max(Z.xMax,eo),Z.xMin=Math.min(Z.xMin,eo);var es=_[j];Z.yMax=Math.max(Z.yMax,es),Z.yMin=Math.min(Z.yMin,es);var el=N[j];Z.zMax=Math.max(Z.zMax,el),Z.zMin=Math.min(Z.zMin,el)}o._slen=X,o._normMax=$,o._xbnds=[Z.xMin,Z.xMax],o._ybnds=[Z.yMin,Z.yMax],o._zbnds=[Z.zMin,Z.zMax]}function processGrid(i){var o,s,F,N,j,Z,X,$,ee,et,er,en,ei=i._x,eo=i._y,es=i._z,el=i._len,ec=-1/0,eu=1/0,ef=-1/0,ed=1/0,eh=-1/0,ep=1/0,eg="";for(el&&(X=ei[0],ee=eo[0],er=es[0]),el>1&&($=ei[el-1],et=eo[el-1],en=es[el-1]),o=0;o<el;o++)ec=Math.max(ec,ei[o]),eu=Math.min(eu,ei[o]),ef=Math.max(ef,eo[o]),ed=Math.min(ed,eo[o]),eh=Math.max(eh,es[o]),ep=Math.min(ep,es[o]),N||ei[o]===X||(N=!0,eg+="x"),j||eo[o]===ee||(j=!0,eg+="y"),Z||es[o]===er||(Z=!0,eg+="z");N||(eg+="x"),j||(eg+="y"),Z||(eg+="z");var em=distinctVals(i._x),ey=distinctVals(i._y),ev=distinctVals(i._z);eg=(eg=(eg=eg.replace("x",(X>$?"-":"+")+"x")).replace("y",(ee>et?"-":"+")+"y")).replace("z",(er>en?"-":"+")+"z");var empty=function(){el=0,em=[],ey=[],ev=[]};(!el||el<em.length*ey.length*ev.length)&&empty();var getArray=function(i){return"x"===i?ei:"y"===i?eo:es},getVals=function(i){return"x"===i?em:"y"===i?ey:ev},getDir=function(i){return i[el-1]<i[0]?-1:1},ex=getArray(eg[1]),e_=getArray(eg[3]),ew=getArray(eg[5]),eT=getVals(eg[1]).length,ek=getVals(eg[3]).length,eA=getVals(eg[5]).length,eS=!1,getIndex=function(i,o,s){return eT*(ek*i+o)+s},eM=getDir(getArray(eg[1])),eC=getDir(getArray(eg[3])),eE=getDir(getArray(eg[5]));for(o=0;o<eA-1;o++){for(s=0;s<ek-1;s++){for(F=0;F<eT-1;F++){var eL=getIndex(o,s,F),eP=getIndex(o,s,F+1),eI=getIndex(o,s+1,F),eO=getIndex(o+1,s,F);if(ex[eL]*eM<ex[eP]*eM&&e_[eL]*eC<e_[eI]*eC&&ew[eL]*eE<ew[eO]*eE||(eS=!0),eS)break}if(eS)break}if(eS)break}return eS&&(_.warn("Encountered arbitrary coordinates! Unable to input data grid."),empty()),{xMin:eu,yMin:ed,zMin:ep,xMax:ec,yMax:ef,zMax:eh,Xs:em,Ys:ey,Zs:ev,len:el,fill:eg}}function distinctVals(i){return _.distinctVals(i).vals}function filter(i,o){if(void 0===o&&(o=i.length),_.isTypedArray(i))return i.subarray(0,o);for(var s=[],F=0;F<o;F++)s[F]=+i[F];return s}i.exports={calc:calc,filter:filter,processGrid:processGrid}},90154:function(i,o,s){"use strict";var _=s(9330).gl_streamtube3d,F=_.createTubeMesh,N=s(71828),j=s(81697).parseColorScale,Z=s(21081).extractOpts,X=s(90060),$={xaxis:0,yaxis:1,zaxis:2};function Streamtube(i,o){this.scene=i,this.uid=o,this.mesh=null,this.data=null}var ee=Streamtube.prototype;function getDfltStartingPositions(i){var o=i.length;return o>2?i.slice(1,o-1):2===o?[(i[0]+i[1])/2]:i}function getBoundPads(i){var o=i.length;return 1===o?[.5,.5]:[i[1]-i[0],i[o-1]-i[o-2]]}function convert(i,o){var s=i.fullSceneLayout,F=i.dataScale,ee=o._len,et={};function toDataCoords(i,o){var _=s[o],j=F[$[o]];return N.simpleMap(i,function(i){return _.d2l(i)*j})}if(et.vectors=X(toDataCoords(o._u,"xaxis"),toDataCoords(o._v,"yaxis"),toDataCoords(o._w,"zaxis"),ee),!ee)return{positions:[],cells:[]};var er=toDataCoords(o._Xs,"xaxis"),en=toDataCoords(o._Ys,"yaxis"),ei=toDataCoords(o._Zs,"zaxis");if(et.meshgrid=[er,en,ei],et.gridFill=o._gridFill,o._slen)et.startingPositions=X(toDataCoords(o._startsX,"xaxis"),toDataCoords(o._startsY,"yaxis"),toDataCoords(o._startsZ,"zaxis"));else{for(var eo=en[0],es=getDfltStartingPositions(er),el=getDfltStartingPositions(ei),ec=Array(es.length*el.length),eu=0,ef=0;ef<es.length;ef++)for(var ed=0;ed<el.length;ed++)ec[eu++]=[es[ef],eo,el[ed]];et.startingPositions=ec}et.colormap=j(o),et.tubeSize=o.sizeref,et.maxLength=o.maxdisplayed;var eh=toDataCoords(o._xbnds,"xaxis"),ep=toDataCoords(o._ybnds,"yaxis"),eg=toDataCoords(o._zbnds,"zaxis"),em=getBoundPads(er),ey=getBoundPads(en),ev=getBoundPads(ei),ex=_(et,[[eh[0]-em[0],ep[0]-ey[0],eg[0]-ev[0]],[eh[1]+em[1],ep[1]+ey[1],eg[1]+ev[1]]]),e_=Z(o);ex.vertexIntensityBounds=[e_.min/o._normMax,e_.max/o._normMax];var ew=o.lightposition;return ex.lightPosition=[ew.x,ew.y,ew.z],ex.ambient=o.lighting.ambient,ex.diffuse=o.lighting.diffuse,ex.specular=o.lighting.specular,ex.roughness=o.lighting.roughness,ex.fresnel=o.lighting.fresnel,ex.opacity=o.opacity,o._pad=ex.tubeScale*o.sizeref*2,ex}function createStreamtubeTrace(i,o){var s=F(i.glplot.gl,convert(i,o)),_=new Streamtube(i,o.uid);return _.mesh=s,_.data=o,s._trace=_,i.glplot.add(s),_}ee.handlePick=function(i){var o=this.scene.fullSceneLayout,s=this.scene.dataScale;function fromDataScale(i,_){var F=o[_],N=s[$[_]];return F.l2c(i)/N}if(i.object===this.mesh){var _=i.data.position,F=i.data.velocity;return i.traceCoordinate=[fromDataScale(_[0],"xaxis"),fromDataScale(_[1],"yaxis"),fromDataScale(_[2],"zaxis"),fromDataScale(F[0],"xaxis"),fromDataScale(F[1],"yaxis"),fromDataScale(F[2],"zaxis"),i.data.intensity*this.data._normMax,i.data.divergence],i.textLabel=this.data.hovertext||this.data.text,!0}},ee.update=function(i){this.data=i;var o=convert(this.scene,i);this.mesh.update(o)},ee.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},i.exports=createStreamtubeTrace},22459:function(i,o,s){"use strict";var _=s(71828),F=s(1586),N=s(21850);i.exports=function(i,o,s,j){function coerce(s,F){return _.coerce(i,o,N,s,F)}var Z=coerce("u"),X=coerce("v"),$=coerce("w"),ee=coerce("x"),et=coerce("y"),er=coerce("z");if(!Z||!Z.length||!X||!X.length||!$||!$.length||!ee||!ee.length||!et||!et.length||!er||!er.length){o.visible=!1;return}coerce("starts.x"),coerce("starts.y"),coerce("starts.z"),coerce("maxdisplayed"),coerce("sizeref"),coerce("lighting.ambient"),coerce("lighting.diffuse"),coerce("lighting.specular"),coerce("lighting.roughness"),coerce("lighting.fresnel"),coerce("lightposition.x"),coerce("lightposition.y"),coerce("lightposition.z"),F(i,o,j,coerce,{prefix:"",cLetter:"c"}),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("uhoverformat"),coerce("vhoverformat"),coerce("whoverformat"),coerce("xhoverformat"),coerce("yhoverformat"),coerce("zhoverformat"),o._length=null}},61510:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"streamtube",basePlotModule:s(58547),categories:["gl3d","showLegend"],attributes:s(21850),supplyDefaults:s(22459),colorbar:{min:"cmin",max:"cmax"},calc:s(88489).calc,plot:s(90154),eventData:function(i,o){return i.tubex=i.x,i.tubey=i.y,i.tubez=i.z,i.tubeu=o.traceCoordinate[3],i.tubev=o.traceCoordinate[4],i.tubew=o.traceCoordinate[5],i.norm=o.traceCoordinate[6],i.divergence=o.traceCoordinate[7],delete i.x,delete i.y,delete i.z,i},meta:{}}},57564:function(i,o,s){"use strict";var _=s(9012),F=s(5386).fF,N=s(5386).si,j=s(50693),Z=s(27670).Y,X=s(34e3),$=s(7055),ee=s(1426).extendFlat,et=s(79952).u;i.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:ee({colors:{valType:"data_array",editType:"calc"},line:{color:ee({},X.marker.line.color,{dflt:null}),width:ee({},X.marker.line.width,{dflt:1}),editType:"calc"},pattern:et,editType:"calc"},j("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:X.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:N({editType:"plot"},{keys:$.eventDataKeys.concat(["label","value"])}),hovertext:X.hovertext,hoverinfo:ee({},_.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:F({},{keys:$.eventDataKeys}),textfont:X.textfont,insidetextorientation:X.insidetextorientation,insidetextfont:X.insidetextfont,outsidetextfont:ee({},X.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:X.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:Z({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(i,o,s){"use strict";var _=s(74875);o.name="sunburst",o.plot=function(i,s,F,N){_.plotBasePlot(o.name,i,s,F,N)},o.clean=function(i,s,F,N){_.cleanBasePlot(o.name,i,s,F,N)}},52147:function(i,o,s){"use strict";var _=s(674),F=s(92770),N=s(71828),j=s(21081).makeColorScaleFuncFromTrace,Z=s(32354).makePullColorFn,X=s(32354).generateExtendedColors,$=s(21081).calc,ee=s(50606).ALMOST_EQUAL,et={},er={},en={};function countDescendants(i,o,s){var _=0,F=i.children;if(F){for(var N=F.length,j=0;j<N;j++)_+=countDescendants(F[j],o,s);s.branches&&_++}else s.leaves&&_++;return i.value=i.data.data.value=_,o._values||(o._values=[]),o._values[i.data.data.i]=_,_}o.calc=function(i,o){var s,X,et,er=i._fullLayout,en=o.ids,ei=N.isArrayOrTypedArray(en),eo=o.labels,es=o.parents,el=o.values,ec=N.isArrayOrTypedArray(el),eu=[],ef={},ed={},isValidKey=function(i){return i||"number"==typeof i},isValidVal=function(i){return!ec||F(el[i])&&el[i]>=0};ei?(ex=Math.min(en.length,es.length),e_=function(i){return isValidKey(en[i])&&isValidVal(i)},ew=function(i){return String(en[i])}):(ex=Math.min(eo.length,es.length),e_=function(i){return isValidKey(eo[i])&&isValidVal(i)},ew=function(i){return String(eo[i])}),ec&&(ex=Math.min(ex,el.length));for(var eh=0;eh<ex;eh++)if(e_(eh)){var ep=ew(eh),eg=isValidKey(es[eh])?String(es[eh]):"",em={i:eh,id:ep,pid:eg,label:isValidKey(eo[eh])?String(eo[eh]):""};ec&&(em.v=+el[eh]),eu.push(em),ef[eg]?ef[eg].push(ep):ef[eg]=[ep],ed[ep]=1}if(ef[""]){if(ef[""].length>1){for(var ey=N.randstr(),ev=0;ev<eu.length;ev++)""===eu[ev].pid&&(eu[ev].pid=ey);eu.unshift({hasMultipleRoots:!0,id:ey,pid:"",label:""})}}else{var ex,e_,ew,eT,ek=[];for(eT in ef)ed[eT]||ek.push(eT);if(1!==ek.length)return N.warn(["Multiple implied roots, cannot build",o.type,"hierarchy of",o.name+".","These roots include:",ek.join(", ")].join(" "));eT=ek[0],eu.unshift({hasImpliedRoot:!0,id:eT,pid:"",label:eT})}try{s=_.stratify().id(function(i){return i.id}).parentId(function(i){return i.pid})(eu)}catch(i){return N.warn(["Failed to build",o.type,"hierarchy of",o.name+".","Error:",i.message].join(" "))}var eA=_.hierarchy(s),eS=!1;if(ec)switch(o.branchvalues){case"remainder":eA.sum(function(i){return i.data.v});break;case"total":eA.each(function(i){var s=i.data.data,_=s.v;if(i.children){var F=i.children.reduce(function(i,o){return i+o.data.data.v},0);if((s.hasImpliedRoot||s.hasMultipleRoots)&&(_=F),_<F*ee)return eS=!0,N.warn(["Total value for node",i.data.data.id,"of",o.name,"is smaller than the sum of its children.","\nparent value =",_,"\nchildren sum =",F].join(" "))}i.value=_})}else countDescendants(eA,o,{branches:-1!==o.count.indexOf("branches"),leaves:-1!==o.count.indexOf("leaves")});if(!eS){o.sort&&eA.sort(function(i,o){return o.value-i.value});var eM=o.marker.colors||[],eC=!!eM.length;return o._hasColorscale?(eC||(eM=ec?o.values:o._values),$(i,o,{vals:eM,containerStr:"marker",cLetter:"c"}),et=j(o.marker)):X=Z(er["_"+o.type+"colormap"]),eA.each(function(i){var s=i.data.data;s.color=o._hasColorscale?et(eM[s.i]):X(eM[s.i],s.id)}),eu[0].hierarchy=eA,eu}},o._runCrossTraceCalc=function(i,o){var s,_=o._fullLayout,F=o.calcdata,N=_[i+"colorway"],j=_["_"+i+"colormap"];_["extend"+i+"colors"]&&(N=X(N,"icicle"===i?en:"treemap"===i?er:et));var Z=0;function pickColor(i){var o=i.data.data,_=o.id;!1===o.color&&(j[_]?o.color=j[_]:i.parent?i.parent.parent?o.color=i.parent.data.data.color:(j[_]=o.color=N[Z%N.length],Z++):o.color=s)}for(var $=0;$<F.length;$++){var ee=F[$][0];ee.trace.type===i&&ee.hierarchy&&(s=ee.trace.root.color,ee.hierarchy.each(pickColor))}},o.crossTraceCalc=function(i){return o._runCrossTraceCalc("sunburst",i)}},7055:function(i){"use strict";i.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(i,o,s){"use strict";var _=s(71828),F=s(57564),N=s(27670).c,j=s(90769).handleText,Z=s(37434).handleMarkerDefaults,X=s(21081),$=X.hasColorscale,ee=X.handleDefaults;i.exports=function(i,o,s,X){function coerce(s,N){return _.coerce(i,o,F,s,N)}var et=coerce("labels"),er=coerce("parents");if(!et||!et.length||!er||!er.length){o.visible=!1;return}var en=coerce("values");coerce(en&&en.length?"branchvalues":"count"),coerce("level"),coerce("maxdepth"),Z(i,o,X,coerce);var ei=o._hasColorscale=$(i,"marker","colors")||(i.marker||{}).coloraxis;ei&&ee(i,o,X,coerce,{prefix:"marker.",cLetter:"c"}),coerce("leaf.opacity",ei?1:.7);var eo=coerce("text");coerce("texttemplate"),o.texttemplate||coerce("textinfo",Array.isArray(eo)?"text+label":"label"),coerce("hovertext"),coerce("hovertemplate"),j(i,o,X,coerce,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),coerce("insidetextorientation"),coerce("sort"),coerce("rotation"),coerce("root.color"),N(o,X,coerce),o._length=null}},43467:function(i,o,s){"use strict";var _=s(91424),F=s(7901);i.exports=function(i,o,s,N,j){var Z=o.data.data,X=Z.i,$=j||Z.color;if(X>=0){o.i=Z.i;var ee=s.marker;ee.pattern&&ee.colors&&ee.pattern.shape||(ee.color=$,o.color=$),_.pointStyle(i,s,N,o)}else F.fill(i,$)}},83523:function(i,o,s){"use strict";var _=s(39898),F=s(73972),N=s(23469).appendArrayPointValue,j=s(30211),Z=s(71828),X=s(11086),$=s(2791),ee=s(53581).formatPieValue;function makeEventData(i,o,s){for(var _=i.data.data,F={curveNumber:o.index,pointNumber:_.i,data:o._input,fullData:o},j=0;j<s.length;j++){var Z=s[j];Z in i&&(F[Z]=i[Z])}return"parentString"in i&&!$.isHierarchyRoot(i)&&(F.parent=i.parentString),N(F,o,_.i),F}i.exports=function(i,o,s,N,et){var er=N[0],en=er.trace,ei=er.hierarchy,eo="sunburst"===en.type,es="treemap"===en.type||"icicle"===en.type;"_hasHoverLabel"in en||(en._hasHoverLabel=!1),"_hasHoverEvent"in en||(en._hasHoverEvent=!1),i.on("mouseover",function(F){var N=s._fullLayout;if(!s._dragging&&!1!==N.hovermode){var X=s._fullData[en.index],el=F.data.data,ec=el.i,eu=$.isHierarchyRoot(F),ef=$.getParent(ei,F),ed=$.getValue(F),_cast=function(i){return Z.castOption(X,ec,i)},eh=_cast("hovertemplate"),ep=j.castHoverinfo(X,N,ec),eg=N.separators;if(eh||ep&&"none"!==ep&&"skip"!==ep){eo&&(ey=er.cx+F.pxmid[0]*(1-F.rInscribed),ev=er.cy+F.pxmid[1]*(1-F.rInscribed)),es&&(ey=F._hoverX,ev=F._hoverY);var em,ey,ev,ex,e_={},ew=[],eT=[],hasFlag=function(i){return -1!==ew.indexOf(i)};ep&&(ew="all"===ep?X._module.attributes.hoverinfo.flags:ep.split("+")),e_.label=el.label,hasFlag("label")&&e_.label&&eT.push(e_.label),el.hasOwnProperty("v")&&(e_.value=el.v,e_.valueLabel=ee(e_.value,eg),hasFlag("value")&&eT.push(e_.valueLabel)),e_.currentPath=F.currentPath=$.getPath(F.data),hasFlag("current path")&&!eu&&eT.push(e_.currentPath);var ek=[],insertPercent=function(){-1===ek.indexOf(ex)&&(eT.push(ex),ek.push(ex))};e_.percentParent=F.percentParent=ed/$.getValue(ef),e_.parent=F.parentString=$.getPtLabel(ef),hasFlag("percent parent")&&(ex=$.formatPercent(e_.percentParent,eg)+" of "+e_.parent,insertPercent()),e_.percentEntry=F.percentEntry=ed/$.getValue(o),e_.entry=F.entry=$.getPtLabel(o),!hasFlag("percent entry")||eu||F.onPathbar||(ex=$.formatPercent(e_.percentEntry,eg)+" of "+e_.entry,insertPercent()),e_.percentRoot=F.percentRoot=ed/$.getValue(ei),e_.root=F.root=$.getPtLabel(ei),hasFlag("percent root")&&!eu&&(ex=$.formatPercent(e_.percentRoot,eg)+" of "+e_.root,insertPercent()),e_.text=_cast("hovertext")||_cast("text"),hasFlag("text")&&(ex=e_.text,Z.isValidTextValue(ex)&&eT.push(ex)),em=[makeEventData(F,X,et.eventDataKeys)];var eA={trace:X,y:ev,_x0:F._x0,_x1:F._x1,_y0:F._y0,_y1:F._y1,text:eT.join("<br>"),name:eh||hasFlag("name")?X.name:void 0,color:_cast("hoverlabel.bgcolor")||el.color,borderColor:_cast("hoverlabel.bordercolor"),fontFamily:_cast("hoverlabel.font.family"),fontSize:_cast("hoverlabel.font.size"),fontColor:_cast("hoverlabel.font.color"),nameLength:_cast("hoverlabel.namelength"),textAlign:_cast("hoverlabel.align"),hovertemplate:eh,hovertemplateLabels:e_,eventData:em};eo&&(eA.x0=ey-F.rInscribed*F.rpx1,eA.x1=ey+F.rInscribed*F.rpx1,eA.idealAlign=F.pxmid[0]<0?"left":"right"),es&&(eA.x=ey,eA.idealAlign=ey<0?"left":"right"),j.loneHover(eA,{container:N._hoverlayer.node(),outerContainer:N._paper.node(),gd:s,inOut_bbox:[]}),em[0].bbox=[][0],en._hasHoverLabel=!0}if(es){var eS=i.select("path.surface");et.styleOne(eS,F,X,s,{hovered:!0})}en._hasHoverEvent=!0,s.emit("plotly_hover",{points:em||[makeEventData(F,X,et.eventDataKeys)],event:_.event})}}),i.on("mouseout",function(o){var F=s._fullLayout,N=s._fullData[en.index],Z=_.select(this).datum();if(en._hasHoverEvent&&(o.originalEvent=_.event,s.emit("plotly_unhover",{points:[makeEventData(Z,N,et.eventDataKeys)],event:_.event}),en._hasHoverEvent=!1),en._hasHoverLabel&&(j.loneUnhover(F._hoverlayer.node()),en._hasHoverLabel=!1),es){var X=i.select("path.surface");et.styleOne(X,Z,N,s,{hovered:!1})}}),i.on("click",function(i){var o=s._fullLayout,N=s._fullData[en.index],Z=eo&&($.isHierarchyRoot(i)||$.isLeaf(i)),ee=$.getPtId(i),er=$.isEntry(i)?$.findEntryWithChild(ei,ee):$.findEntryWithLevel(ei,ee),es=$.getPtId(er),el={points:[makeEventData(i,N,et.eventDataKeys)],event:_.event};Z||(el.nextLevel=es);var ec=X.triggerHandler(s,"plotly_"+en.type+"click",el);if(!1!==ec&&o.hovermode&&(s._hoverdata=[makeEventData(i,N,et.eventDataKeys)],j.click(s,_.event)),!Z&&!1!==ec&&!s._dragging&&!s._transitioning){F.call("_storeDirectGUIEdit",N,o._tracePreGUI[N.uid],{level:N.level});var eu={data:[{level:es}],traces:[en.index]},ef={frame:{redraw:!1,duration:et.transitionTime},transition:{duration:et.transitionTime,easing:et.transitionEasing},mode:"immediate",fromcurrent:!0};j.loneUnhover(o._hoverlayer.node()),F.call("animate",s,eu,ef)}})}},2791:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(6964),j=s(53581);function determineOutsideTextFont(i,s,_){return{color:o.getOutsideTextFontKey("color",i,s,_),family:o.getOutsideTextFontKey("family",i,s,_),size:o.getOutsideTextFontKey("size",i,s,_)}}function determineInsideTextFont(i,s,N,j){var Z=(j||{}).onPathbar,X=s.data.data,$=X.i,ee=_.castOption(i,$,(Z?"pathbar.textfont":"insidetextfont")+".color");return!ee&&i._input.textfont&&(ee=_.castOption(i._input,$,"textfont.color")),{color:ee||F.contrast(X.color),family:o.getInsideTextFontKey("family",i,s,N,j),size:o.getInsideTextFontKey("size",i,s,N,j)}}function getParentId(i){return i.data.data.pid}o.findEntryWithLevel=function(i,s){var _;return s&&i.eachAfter(function(i){if(o.getPtId(i)===s)return _=i.copy()}),_||i},o.findEntryWithChild=function(i,s){var _;return i.eachAfter(function(i){for(var F=i.children||[],N=0;N<F.length;N++){var j=F[N];if(o.getPtId(j)===s)return _=i.copy()}}),_||i},o.isEntry=function(i){return!i.parent},o.isLeaf=function(i){return!i.children},o.getPtId=function(i){return i.data.data.id},o.getPtLabel=function(i){return i.data.data.label},o.getValue=function(i){return i.value},o.isHierarchyRoot=function(i){return""===getParentId(i)},o.setSliceCursor=function(i,s,_){var F=_.isTransitioning;if(!F){var j=i.datum();F=_.hideOnRoot&&o.isHierarchyRoot(j)||_.hideOnLeaves&&o.isLeaf(j)}N(i,F?null:"pointer")},o.getInsideTextFontKey=function(i,o,s,F,N){var j=(N||{}).onPathbar,Z=s.data.data.i;return _.castOption(o,Z,(j?"pathbar.textfont":"insidetextfont")+"."+i)||_.castOption(o,Z,"textfont."+i)||F.size},o.getOutsideTextFontKey=function(i,o,s,F){var N=s.data.data.i;return _.castOption(o,N,"outsidetextfont."+i)||_.castOption(o,N,"textfont."+i)||F.size},o.isOutsideText=function(i,s){return!i._hasColorscale&&o.isHierarchyRoot(s)},o.determineTextFont=function(i,s,_,F){return o.isOutsideText(i,s)?determineOutsideTextFont(i,s,_):determineInsideTextFont(i,s,_,F)},o.hasTransition=function(i){return!!(i&&i.duration>0)},o.getMaxDepth=function(i){return i.maxdepth>=0?i.maxdepth:1/0},o.isHeader=function(i,s){return!(o.isLeaf(i)||i.depth===s._maxDepth-1)},o.getParent=function(i,s){return o.findEntryWithLevel(i,getParentId(s))},o.listPath=function(i,s){var _=i.parent;if(!_)return[];var F=s?[_.data[s]]:[_];return o.listPath(_,s).concat(F)},o.getPath=function(i){return o.listPath(i,"label").join("/")+"/"},o.formatValue=j.formatPieValue,o.formatPercent=function(i,o){var s=_.formatPercent(i,0);return"0%"===s&&(s=j.formatPiePercent(i,o)),s}},87619:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"sunburst",basePlotModule:s(66888),categories:[],animatable:!0,attributes:s(57564),layoutAttributes:s(2654),supplyDefaults:s(17094),supplyLayoutDefaults:s(57034),calc:s(52147).calc,crossTraceCalc:s(52147).crossTraceCalc,plot:s(24714).plot,style:s(29969).style,colorbar:s(4898),meta:{}}},2654:function(i){"use strict";i.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(i,o,s){"use strict";var _=s(71828),F=s(2654);i.exports=function(i,o){function coerce(s,N){return _.coerce(i,o,F,s,N)}coerce("sunburstcolorway",o.colorway),coerce("extendsunburstcolors")}},24714:function(i,o,s){"use strict";var _=s(39898),F=s(674),N=s(81684).sX,j=s(91424),Z=s(71828),X=s(63893),$=s(72597),ee=$.recordMinTextSize,et=$.clearMinTextSize,er=s(14575),en=s(53581).getRotationAngle,ei=er.computeTransform,eo=er.transformInsideText,es=s(29969).styleOne,el=s(16688).resizeText,ec=s(83523),eu=s(7055),ef=s(2791);function plotOne(i,s,F,$){var et=i._context.staticPlot,er=i._fullLayout,el=!er.uniformtext.mode&&ef.hasTransition($),ed=_.select(F).selectAll("g.slice"),eh=s[0],ep=eh.trace,eg=eh.hierarchy,em=ef.findEntryWithLevel(eg,ep.level),ey=ef.getMaxDepth(ep),ev=er._size,ex=ep.domain,e_=ev.w*(ex.x[1]-ex.x[0]),ew=ev.h*(ex.y[1]-ex.y[0]),eT=.5*Math.min(e_,ew),ek=eh.cx=ev.l+ev.w*(ex.x[1]+ex.x[0])/2,eA=eh.cy=ev.t+ev.h*(1-ex.y[0])-ew/2;if(!em)return ed.remove();var eS=null,eM={};el&&ed.each(function(i){eM[ef.getPtId(i)]={rpx0:i.rpx0,rpx1:i.rpx1,x0:i.x0,x1:i.x1,transform:i.transform},!eS&&ef.isEntry(i)&&(eS=i)});var eC=partition(em).descendants(),eE=em.height+1,eL=0,eP=ey;eh.hasMultipleRoots&&ef.isHierarchyRoot(em)&&(eC=eC.slice(1),eE-=1,eL=1,eP+=1),eC=eC.filter(function(i){return i.y1<=eP});var eI=en(ep.rotation);eI&&eC.forEach(function(i){i.x0+=eI,i.x1+=eI});var eO=Math.min(eE,ey),y2rpx=function(i){return(i-eL)/eO*eT},rx2px=function(i,o){return[i*Math.cos(o),-i*Math.sin(o)]},pathSlice=function(i){return Z.pathAnnulus(i.rpx0,i.rpx1,i.x0,i.x1,ek,eA)},getTargetX=function(i){return ek+getTextXY(i)[0]*(i.transform.rCenter||0)+(i.transform.x||0)},getTargetY=function(i){return eA+getTextXY(i)[1]*(i.transform.rCenter||0)+(i.transform.y||0)};(ed=ed.data(eC,ef.getPtId)).enter().append("g").classed("slice",!0),el?ed.exit().transition().each(function(){var i=_.select(this);i.select("path.surface").transition().attrTween("d",function(i){var o=makeExitSliceInterpolator(i);return function(i){return pathSlice(o(i))}}),i.select("g.slicetext").attr("opacity",0)}).remove():ed.exit().remove(),ed.order();var eD=null;if(el&&eS){var eR=ef.getPtId(eS);ed.each(function(i){null===eD&&ef.getPtId(i)===eR&&(eD=i.x1)})}var eB=ed;function makeExitSliceInterpolator(i){var o=ef.getPtId(i),s=eM[o],_=eM[ef.getPtId(em)];if(_){var F=(i.x1>_.x1?2*Math.PI:0)+eI;j=i.rpx1<_.rpx1?{x0:i.x0,x1:i.x1,rpx0:0,rpx1:0}:{x0:F,x1:F,rpx0:i.rpx0,rpx1:i.rpx1}}else{var j,Z,X,$=ef.getPtId(i.parent);ed.each(function(i){if(ef.getPtId(i)===$)return Z=i});var ee=Z.children;ee.forEach(function(i,s){if(ef.getPtId(i)===o)return X=s});var et=ee.length,er=N(Z.x0,Z.x1);j={rpx0:eT,rpx1:eT,x0:er(X/et),x1:er((X+1)/et)}}return N(s,j)}function makeUpdateSliceInterpolator(i){var o,s=eM[ef.getPtId(i)],_={x0:i.x0,x1:i.x1,rpx0:i.rpx0,rpx1:i.rpx1};if(s)o=s;else if(eS){if(i.parent){if(eD){var F=(i.x1>eD?2*Math.PI:0)+eI;o={x0:F,x1:F}}else o={rpx0:eT,rpx1:eT},Z.extendFlat(o,interpX0X1FromParent(i))}else o={rpx0:0,rpx1:0}}else o={x0:eI,x1:eI};return N(o,_)}function makeUpdateTextInterpolator(i){var o,s=eM[ef.getPtId(i)],_=i.transform;if(s)o=s;else if(o={rpx1:i.rpx1,transform:{textPosAngle:_.textPosAngle,scale:0,rotate:_.rotate,rCenter:_.rCenter,x:_.x,y:_.y}},eS){if(i.parent){if(eD){var F=i.x1>eD?2*Math.PI:0;o.x0=o.x1=F}else Z.extendFlat(o,interpX0X1FromParent(i))}else o.x0=o.x1=eI}else o.x0=o.x1=eI;var j=N(o.transform.textPosAngle,i.transform.textPosAngle),X=N(o.rpx1,i.rpx1),$=N(o.x0,i.x0),et=N(o.x1,i.x1),en=N(o.transform.scale,_.scale),ei=N(o.transform.rotate,_.rotate),eo=0===_.rCenter?3:0===o.transform.rCenter?1/3:1,es=N(o.transform.rCenter,_.rCenter);return function(i){var o=X(i),s=$(i),F=et(i),N=es(Math.pow(i,eo)),Z={pxmid:rx2px(o,(s+F)/2),rpx1:o,transform:{textPosAngle:j(i),rCenter:N,x:_.x,y:_.y}};return ee(ep.type,_,er),{transform:{targetX:getTargetX(Z),targetY:getTargetY(Z),scale:en(i),rotate:ei(i),rCenter:N}}}}function interpX0X1FromParent(i){var o=i.parent,s=eM[ef.getPtId(o)],_={};if(s){var F=o.children,j=F.indexOf(i),Z=F.length,X=N(s.x0,s.x1);_.x0=X(j/Z),_.x1=X(j/Z)}else _.x0=_.x1=0;return _}el&&(eB=eB.transition().each("end",function(){var o=_.select(this);ef.setSliceCursor(o,i,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),eB.each(function(F){var N=_.select(this),$=Z.ensureSingle(N,"path","surface",function(i){i.style("pointer-events",et?"none":"all")});F.rpx0=y2rpx(F.y0),F.rpx1=y2rpx(F.y1),F.xmid=(F.x0+F.x1)/2,F.pxmid=rx2px(F.rpx1,F.xmid),F.midangle=-(F.xmid-Math.PI/2),F.startangle=-(F.x0-Math.PI/2),F.stopangle=-(F.x1-Math.PI/2),F.halfangle=.5*Math.min(Z.angleDelta(F.x0,F.x1)||Math.PI,Math.PI),F.ring=1-F.rpx0/F.rpx1,F.rInscribed=getInscribedRadiusFraction(F,ep),el?$.transition().attrTween("d",function(i){var o=makeUpdateSliceInterpolator(i);return function(i){return pathSlice(o(i))}}):$.attr("d",pathSlice),N.call(ec,em,i,s,{eventDataKeys:eu.eventDataKeys,transitionTime:eu.CLICK_TRANSITION_TIME,transitionEasing:eu.CLICK_TRANSITION_EASING}).call(ef.setSliceCursor,i,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:i._transitioning}),$.call(es,F,ep,i);var en=Z.ensureSingle(N,"g","slicetext"),ed=Z.ensureSingle(en,"text","",function(i){i.attr("data-notex",1)}),eg=Z.ensureUniformFontSize(i,ef.determineTextFont(ep,F,er.font));ed.text(o.formatSliceLabel(F,em,ep,s,er)).classed("slicetext",!0).attr("text-anchor","middle").call(j.font,eg).call(X.convertToTspans,i);var ey=j.bBox(ed.node());F.transform=eo(ey,F,eh),F.transform.targetX=getTargetX(F),F.transform.targetY=getTargetY(F);var strTransform=function(i,o){var s=i.transform;return ei(s,o),s.fontSize=eg.size,ee(ep.type,s,er),Z.getTextTransform(s)};el?ed.transition().attrTween("transform",function(i){var o=makeUpdateTextInterpolator(i);return function(i){return strTransform(o(i),ey)}}):ed.attr("transform",strTransform(F,ey))})}function partition(i){return F.partition().size([2*Math.PI,i.height+1])(i)}function getInscribedRadiusFraction(i){return 0===i.rpx0&&Z.isFullCircle([i.x0,i.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(i.halfangle)),i.ring/2))}function getTextXY(i){return getCoords(i.rpx1,i.transform.textPosAngle)}function getCoords(i,o){return[i*Math.sin(o),-i*Math.cos(o)]}o.plot=function(i,o,s,F){var N,j,Z=i._fullLayout,X=Z._sunburstlayer,$=!s,ee=!Z.uniformtext.mode&&ef.hasTransition(s);et("sunburst",Z),(N=X.selectAll("g.trace.sunburst").data(o,function(i){return i[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),N.order(),ee?(F&&(j=F()),_.transition().duration(s.duration).ease(s.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()}).each(function(){X.selectAll("g.trace").each(function(o){plotOne(i,o,this,s)})})):(N.each(function(o){plotOne(i,o,this,s)}),Z.uniformtext.mode&&el(i,Z._sunburstlayer.selectAll(".trace"),"sunburst")),$&&N.exit().remove()},o.formatSliceLabel=function(i,o,s,_,F){var N=s.texttemplate,j=s.textinfo;if(!N&&(!j||"none"===j))return"";var X=F.separators,$=_[0],ee=i.data.data,et=$.hierarchy,er=ef.isHierarchyRoot(i),en=ef.getParent(et,i),ei=ef.getValue(i);if(!N){var eo=j.split("+"),hasFlag=function(i){return -1!==eo.indexOf(i)},es=[];if(hasFlag("label")&&ee.label&&es.push(ee.label),ee.hasOwnProperty("v")&&hasFlag("value")&&es.push(ef.formatValue(ee.v,X)),!er){hasFlag("current path")&&es.push(ef.getPath(i.data));var el=0;hasFlag("percent parent")&&el++,hasFlag("percent entry")&&el++,hasFlag("percent root")&&el++;var ec=el>1;if(el){var eu,ed,addPercent=function(i){eu=ef.formatPercent(ed,X),ec&&(eu+=" of "+i),es.push(eu)};hasFlag("percent parent")&&!er&&(ed=ei/ef.getValue(en),addPercent("parent")),hasFlag("percent entry")&&(ed=ei/ef.getValue(o),addPercent("entry")),hasFlag("percent root")&&(ed=ei/ef.getValue(et),addPercent("root"))}}return hasFlag("text")&&(eu=Z.castOption(s,ee.i,"text"),Z.isValidTextValue(eu)&&es.push(eu)),es.join("<br>")}var eh=Z.castOption(s,ee.i,"texttemplate");if(!eh)return"";var ep={};ee.label&&(ep.label=ee.label),ee.hasOwnProperty("v")&&(ep.value=ee.v,ep.valueLabel=ef.formatValue(ee.v,X)),ep.currentPath=ef.getPath(i.data),er||(ep.percentParent=ei/ef.getValue(en),ep.percentParentLabel=ef.formatPercent(ep.percentParent,X),ep.parent=ef.getPtLabel(en)),ep.percentEntry=ei/ef.getValue(o),ep.percentEntryLabel=ef.formatPercent(ep.percentEntry,X),ep.entry=ef.getPtLabel(o),ep.percentRoot=ei/ef.getValue(et),ep.percentRootLabel=ef.formatPercent(ep.percentRoot,X),ep.root=ef.getPtLabel(et),ee.hasOwnProperty("color")&&(ep.color=ee.color);var eg=Z.castOption(s,ee.i,"text");return(Z.isValidTextValue(eg)||""===eg)&&(ep.text=eg),ep.customdata=Z.castOption(s,ee.i,"customdata"),Z.texttemplateString(eh,ep,F._d3locale,ep,s._meta||{})}},29969:function(i,o,s){"use strict";var _=s(39898),F=s(7901),N=s(71828),j=s(72597).resizeText,Z=s(43467);function style(i){var o=i._fullLayout._sunburstlayer.selectAll(".trace");j(i,o,"sunburst"),o.each(function(o){var s=_.select(this),F=o[0].trace;s.style("opacity",F.opacity),s.selectAll("path.surface").each(function(o){_.select(this).call(styleOne,o,F,i)})})}function styleOne(i,o,s,_){var j=o.data.data,X=!o.children,$=j.i,ee=N.castOption(s,$,"marker.line.color")||F.defaultLine,et=N.castOption(s,$,"marker.line.width")||0;i.call(Z,o,s,_).style("stroke-width",et).call(F.stroke,ee).style("opacity",X?s.leaf.opacity:null)}i.exports={style:style,styleOne:styleOne}},54532:function(i,o,s){"use strict";var _=s(7901),F=s(50693),N=s(12663).axisHoverFormat,j=s(5386).fF,Z=s(9012),X=s(1426).extendFlat,$=s(30962).overrideAll;function makeContourProjAttr(i){return{valType:"boolean",dflt:!1}}function makeContourAttr(i){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:makeContourProjAttr("x"),y:makeContourProjAttr("y"),z:makeContourProjAttr("z")},color:{valType:"color",dflt:_.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:_.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var ee=i.exports=$(X({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:j(),xhoverformat:N("x"),yhoverformat:N("y"),zhoverformat:N("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},F("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:makeContourAttr("x"),y:makeContourAttr("y"),z:makeContourAttr("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:X({},F.zauto,{}),zmin:X({},F.zmin,{}),zmax:X({},F.zmax,{})},hoverinfo:X({},Z.hoverinfo),showlegend:X({},Z.showlegend,{dflt:!1})}),"calc","nested");ee.x.editType=ee.y.editType=ee.z.editType="calc+clearAxisTypes",ee.transforms=void 0},18396:function(i,o,s){"use strict";var _=s(78803);i.exports=function(i,o){o.surfacecolor?_(i,o,{vals:o.surfacecolor,containerStr:"",cLetter:"c"}):_(i,o,{vals:o.z,containerStr:"",cLetter:"c"})}},43768:function(i,o,s){"use strict";var _=s(9330).gl_surface3d,F=s(9330).ndarray,N=s(9330).ndarray_linear_interpolate.d2,j=s(824),Z=s(43907),X=s(71828).isArrayOrTypedArray,$=s(81697).parseColorScale,ee=s(78614),et=s(21081).extractOpts;function SurfaceTrace(i,o,s){this.scene=i,this.uid=s,this.surface=o,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var er=SurfaceTrace.prototype;function isColormapCircular(i){var o=i[0].rgb,s=i[i.length-1].rgb;return o[0]===s[0]&&o[1]===s[1]&&o[2]===s[2]&&o[3]===s[3]}er.getXat=function(i,o,s,_){var F=X(this.data.x)?X(this.data.x[0])?this.data.x[o][i]:this.data.x[i]:i;return void 0===s?F:_.d2l(F,0,s)},er.getYat=function(i,o,s,_){var F=X(this.data.y)?X(this.data.y[0])?this.data.y[o][i]:this.data.y[o]:o;return void 0===s?F:_.d2l(F,0,s)},er.getZat=function(i,o,s,_){var F=this.data.z[o][i];return null===F&&this.data.connectgaps&&this.data._interpolatedZ&&(F=this.data._interpolatedZ[o][i]),void 0===s?F:_.d2l(F,0,s)},er.handlePick=function(i){if(i.object===this.surface){var o=(i.data.index[0]-1)/this.dataScaleX-1,s=(i.data.index[1]-1)/this.dataScaleY-1,_=Math.max(Math.min(Math.round(o),this.data.z[0].length-1),0),F=Math.max(Math.min(Math.round(s),this.data._ylength-1),0);i.index=[_,F],i.traceCoordinate=[this.getXat(_,F),this.getYat(_,F),this.getZat(_,F)],i.dataCoordinate=[this.getXat(_,F,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(_,F,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(_,F,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var N=0;N<3;N++)null!=i.dataCoordinate[N]&&(i.dataCoordinate[N]*=this.scene.dataScale[N]);var j=this.data.hovertext||this.data.text;return Array.isArray(j)&&j[F]&&void 0!==j[F][_]?i.textLabel=j[F][_]:j?i.textLabel=j:i.textLabel="",i.data.dataCoordinate=i.dataCoordinate.slice(),this.surface.highlight(i.data),this.scene.glplot.spikes.position=i.dataCoordinate,!0}};var en=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function getPow(i,o){if(i<o)return 0;for(var s=0;0===Math.floor(i%o);)i/=o,s++;return s}function getFactors(i){for(var o=[],s=0;s<en.length;s++){var _=en[s];o.push(getPow(i,_))}return o}function smallestDivisor(i){for(var o=getFactors(i),s=i,_=0;_<en.length;_++)if(o[_]>0){s=en[_];break}return s}function leastCommonMultiple(i,o){if(!(i<1)&&!(o<1)){for(var s=getFactors(i),_=getFactors(o),F=1,N=0;N<en.length;N++)F*=Math.pow(en[N],Math.max(s[N],_[N]));return F}}function arrayLCM(i){if(0!==i.length){for(var o=1,s=0;s<i.length;s++)o=leastCommonMultiple(o,i[s]);return o}}function fnHomography(i,o,s){var _=s[8]+s[2]*o[0]+s[5]*o[1];return i[0]=(s[6]+s[0]*o[0]+s[3]*o[1])/_,i[1]=(s[7]+s[1]*o[0]+s[4]*o[1])/_,i}function homography(i,o,s){return warp(i,o,fnHomography,s),i}function warp(i,o,s,_){for(var F=[0,0],j=i.shape[0],Z=i.shape[1],X=0;X<j;X++)for(var $=0;$<Z;$++)s(F,[X,$],_),i.set(X,$,N(o,F[0],F[1]));return i}function insertIfNewLevel(i,o){for(var s=!1,_=0;_<i.length;_++)if(o===i[_]){s=!0;break}!1===s&&i.push(o)}function createSurfaceTrace(i,o){var s=_({gl:i.glplot.gl}),F=new SurfaceTrace(i,s,o.uid);return s._trace=F,F.update(o),i.glplot.add(s),F}er.calcXnums=function(i){var o,s=[];for(o=1;o<i;o++){var _=this.getXat(o-1,0),F=this.getXat(o,0);F!==_&&null!=_&&null!=F?s[o-1]=Math.abs(F-_):s[o-1]=0}var N=0;for(o=1;o<i;o++)N+=s[o-1];for(o=1;o<i;o++)0===s[o-1]?s[o-1]=1:s[o-1]=Math.round(N/s[o-1]);return s},er.calcYnums=function(i){var o,s=[];for(o=1;o<i;o++){var _=this.getYat(0,o-1),F=this.getYat(0,o);F!==_&&null!=_&&null!=F?s[o-1]=Math.abs(F-_):s[o-1]=0}var N=0;for(o=1;o<i;o++)N+=s[o-1];for(o=1;o<i;o++)0===s[o-1]?s[o-1]=1:s[o-1]=Math.round(N/s[o-1]);return s},er.estimateScale=function(i,o){for(var s=1+arrayLCM(0===o?this.calcXnums(i):this.calcYnums(i));s<120;)s*=2;for(;s>720;)s--,s/=smallestDivisor(s),++s<120&&(s=720);var _=Math.round(s/i);return _>1?_:1},er.refineCoords=function(i){for(var o=this.dataScaleX,s=this.dataScaleY,_=i[0].shape[0],N=i[0].shape[1],j=0|Math.floor(i[0].shape[0]*o+1),Z=0|Math.floor(i[0].shape[1]*s+1),X=1+_+1,$=1+N+1,ee=F(new Float32Array(X*$),[X,$]),et=[1/o,0,0,0,1/s,0,0,0,1],er=0;er<i.length;++er){this.surface.padField(ee,i[er]);var en=F(new Float32Array(j*Z),[j,Z]);homography(en,ee,et),i[er]=en}},er.setContourLevels=function(){var i,o,s,_=[[],[],[]],F=[!1,!1,!1],N=!1;for(i=0;i<3;++i)if(this.showContour[i]&&(N=!0,this.contourSize[i]>0&&null!==this.contourStart[i]&&null!==this.contourEnd[i]&&this.contourEnd[i]>this.contourStart[i]))for(F[i]=!0,o=this.contourStart[i];o<this.contourEnd[i];o+=this.contourSize[i])s=o*this.scene.dataScale[i],insertIfNewLevel(_[i],s);if(N){var j=[[],[],[]];for(i=0;i<3;++i)this.showContour[i]&&(j[i]=F[i]?_[i]:this.scene.contourLevels[i]);this.surface.update({levels:j})}},er.update=function(i){var o,s,_,N,X=this.scene,er=X.fullSceneLayout,en=this.surface,ei=$(i),eo=X.dataScale,es=i.z[0].length,el=i._ylength,ec=X.contourLevels;this.data=i;var eu=[];for(o=0;o<3;o++)for(s=0,eu[o]=[];s<es;s++)eu[o][s]=[];for(s=0;s<es;s++)for(_=0;_<el;_++)eu[0][s][_]=this.getXat(s,_,i.xcalendar,er.xaxis),eu[1][s][_]=this.getYat(s,_,i.ycalendar,er.yaxis),eu[2][s][_]=this.getZat(s,_,i.zcalendar,er.zaxis);if(i.connectgaps)for(i._emptypoints=Z(eu[2]),j(eu[2],i._emptypoints),i._interpolatedZ=[],s=0;s<es;s++)for(_=0,i._interpolatedZ[s]=[];_<el;_++)i._interpolatedZ[s][_]=eu[2][s][_];for(o=0;o<3;o++)for(s=0;s<es;s++)for(_=0;_<el;_++)null==(N=eu[o][s][_])?eu[o][s][_]=NaN:N=eu[o][s][_]*=eo[o];for(o=0;o<3;o++)for(s=0;s<es;s++)for(_=0;_<el;_++)null!=(N=eu[o][s][_])&&(this.minValues[o]>N&&(this.minValues[o]=N),this.maxValues[o]<N&&(this.maxValues[o]=N));for(o=0;o<3;o++)this.objectOffset[o]=.5*(this.minValues[o]+this.maxValues[o]);for(o=0;o<3;o++)for(s=0;s<es;s++)for(_=0;_<el;_++)null!=(N=eu[o][s][_])&&(eu[o][s][_]-=this.objectOffset[o]);var ef=[F(new Float32Array(es*el),[es,el]),F(new Float32Array(es*el),[es,el]),F(new Float32Array(es*el),[es,el])];for(o=0;o<3;o++)for(s=0;s<es;s++)for(_=0;_<el;_++)ef[o].set(s,_,eu[o][s][_]);eu=[];var ed={colormap:ei,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!i.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:i.opacityscale,opacity:i.opacity},eh=et(i);if(ed.intensityBounds=[eh.min,eh.max],i.surfacecolor){var ep=F(new Float32Array(es*el),[es,el]);for(s=0;s<es;s++)for(_=0;_<el;_++)ep.set(s,_,i.surfacecolor[_][s]);ef.push(ep)}else ed.intensityBounds[0]*=eo[2],ed.intensityBounds[1]*=eo[2];(720<ef[0].shape[0]||720<ef[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(ef[0].shape[0],0),this.dataScaleY=this.estimateScale(ef[0].shape[1],1),(1!==this.dataScaleX||1!==this.dataScaleY)&&this.refineCoords(ef)),i.surfacecolor&&(ed.intensity=ef.pop());var eg=[!0,!0,!0],em=["x","y","z"];for(o=0;o<3;++o){var ey=i.contours[em[o]];eg[o]=ey.highlight,ed.showContour[o]=ey.show||ey.highlight,ed.showContour[o]&&(ed.contourProject[o]=[ey.project.x,ey.project.y,ey.project.z],ey.show?(this.showContour[o]=!0,ed.levels[o]=ec[o],en.highlightColor[o]=ed.contourColor[o]=ee(ey.color),ey.usecolormap?en.highlightTint[o]=ed.contourTint[o]=0:en.highlightTint[o]=ed.contourTint[o]=1,ed.contourWidth[o]=ey.width,this.contourStart[o]=ey.start,this.contourEnd[o]=ey.end,this.contourSize[o]=ey.size):(this.showContour[o]=!1,this.contourStart[o]=null,this.contourEnd[o]=null,this.contourSize[o]=0),ey.highlight&&(ed.dynamicColor[o]=ee(ey.highlightcolor),ed.dynamicWidth[o]=ey.highlightwidth))}isColormapCircular(ei)&&(ed.vertexColor=!0),ed.objectOffset=this.objectOffset,ed.coords=ef,en.update(ed),en.visible=i.visible,en.enableDynamic=eg,en.enableHighlight=eg,en.snapToData=!0,"lighting"in i&&(en.ambientLight=i.lighting.ambient,en.diffuseLight=i.lighting.diffuse,en.specularLight=i.lighting.specular,en.roughness=i.lighting.roughness,en.fresnel=i.lighting.fresnel),"lightposition"in i&&(en.lightPosition=[i.lightposition.x,i.lightposition.y,i.lightposition.z])},er.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},i.exports=createSurfaceTrace},91831:function(i,o,s){"use strict";var _=s(73972),F=s(71828),N=s(1586),j=s(54532);function createWave(i,o){for(var s=[],_=0;_<32;_++){var F=_/31,N=o+(1-o)*(1-Math.pow(Math.sin(i*F*Math.PI),2));s.push([F,Math.max(0,Math.min(1,N))])}return s}function isValidScaleArray(i){var o=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var s=0;s<i.length;s++){var _=i[s];if(2!==_.length||+_[0]<o)return!1;o=+_[0]}return!0}function supplyDefaults(i,o,s,Z){function coerce(s,_){return F.coerce(i,o,j,s,_)}var X,$,ee=coerce("x"),et=coerce("y"),er=coerce("z");if(!er||!er.length||ee&&ee.length<1||et&&et.length<1){o.visible=!1;return}o._xlength=Array.isArray(ee)&&F.isArrayOrTypedArray(ee[0])?er.length:er[0].length,o._ylength=er.length,_.getComponentMethod("calendars","handleTraceDefaults")(i,o,["x","y","z"],Z),coerce("text"),coerce("hovertext"),coerce("hovertemplate"),coerce("xhoverformat"),coerce("yhoverformat"),coerce("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(i){coerce(i)});var en=coerce("surfacecolor"),ei=["x","y","z"];for(X=0;X<3;++X){var eo="contours."+ei[X],es=coerce(eo+".show"),el=coerce(eo+".highlight");if(es||el)for($=0;$<3;++$)coerce(eo+".project."+ei[$]);es&&(coerce(eo+".color"),coerce(eo+".width"),coerce(eo+".usecolormap")),el&&(coerce(eo+".highlightcolor"),coerce(eo+".highlightwidth")),coerce(eo+".start"),coerce(eo+".end"),coerce(eo+".size")}en||(mapLegacy(i,"zmin","cmin"),mapLegacy(i,"zmax","cmax"),mapLegacy(i,"zauto","cauto")),N(i,o,Z,coerce,{prefix:"",cLetter:"c"}),opacityscaleDefaults(i,o,Z,coerce),o._length=null}function opacityscaleDefaults(i,o,s,_){var F=_("opacityscale");"max"===F?o.opacityscale=[[0,.1],[1,1]]:"min"===F?o.opacityscale=[[0,1],[1,.1]]:"extremes"===F?o.opacityscale=createWave(1,.1):isValidScaleArray(F)||(o.opacityscale=void 0)}function mapLegacy(i,o,s){o in i&&!(s in i)&&(i[s]=i[o])}i.exports={supplyDefaults:supplyDefaults,opacityscaleDefaults:opacityscaleDefaults}},93601:function(i,o,s){"use strict";i.exports={attributes:s(54532),supplyDefaults:s(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:s(18396),plot:s(43768),moduleType:"trace",name:"surface",basePlotModule:s(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(i,o,s){"use strict";var _=s(50215),F=s(1426).extendFlat,N=s(30962).overrideAll,j=s(41940),Z=s(27670).Y,X=s(12663).descriptionOnlyNumbers;(i.exports=N({domain:Z({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:X("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:F({},_.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:F({},j({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:X("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:F({},_.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:F({},j({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(i,o,s){"use strict";var _=s(27659).a0,F=s(36736),N="table";o.name=N,o.plot=function(i){var o=_(i.calcdata,N)[0];o.length&&F(i,o)},o.clean=function(i,o,s,_){var F=_._has&&_._has(N),j=o._has&&o._has(N);F&&!j&&_._paperdiv.selectAll(".table").remove()}},76333:function(i,o,s){"use strict";var _=s(28984).wrap;i.exports=function(){return _({})}},49850:function(i){"use strict";i.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(i,o,s){"use strict";var _=s(49850),F=s(1426).extendFlat,N=s(92770);function arrayMax(i){if(Array.isArray(i)){for(var o=0,s=0;s<i.length;s++)o=Math.max(o,arrayMax(i[s]));return o}return i}function sum(i,o){return i+o}function squareStringMatrix(i){var o,s=i.slice(),_=1/0,F=0;for(o=0;o<s.length;o++)Array.isArray(s[o])||(s[o]=[s[o]]),_=Math.min(_,s[o].length),F=Math.max(F,s[o].length);if(_!==F)for(o=0;o<s.length;o++){var N=F-s[o].length;N&&(s[o]=s[o].concat(emptyStrings(N)))}return s}function emptyStrings(i){for(var o=Array(i),s=0;s<i;s++)o[s]="";return o}function xScale(i){return i.calcdata.columns.reduce(function(o,s){return s.xIndex<i.xIndex?o+s.columnWidth:o},0)}function makeRowBlock(i,o){return Object.keys(i).map(function(s){return F({},i[s],{auxiliaryBlocks:o})})}function makeAnchorToRowBlock(i,o){for(var s,_={},F=0,N=0,j=makeIdentity(),Z=0,X=0,$=0;$<i.length;$++)s=i[$],j.rows.push({rowIndex:$,rowHeight:s}),((N+=s)>=o||$===i.length-1)&&(_[F]=j,j.key=X++,j.firstRowIndex=Z,j.lastRowIndex=$,j=makeIdentity(),F+=N,Z=$+1,N=0);return _}function makeIdentity(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}i.exports=function(i,o){var s=squareStringMatrix(o.cells.values),slicer=function(i){return i.slice(o.header.values.length,i.length)},j=squareStringMatrix(o.header.values);j.length&&!j[0].length&&(j[0]=[""],j=squareStringMatrix(j));var Z=j.concat(slicer(s).map(function(){return emptyStrings((j[0]||[""]).length)})),X=o.domain,$=Math.floor(i._fullLayout._size.w*(X.x[1]-X.x[0])),ee=Math.floor(i._fullLayout._size.h*(X.y[1]-X.y[0])),et=o.header.values.length?Z[0].map(function(){return o.header.height}):[_.emptyHeaderHeight],er=s.length?s[0].map(function(){return o.cells.height}):[],en=et.reduce(sum,0),ei=makeAnchorToRowBlock(er,ee-en+_.uplift),eo=makeRowBlock(makeAnchorToRowBlock(et,en),[]),es=makeRowBlock(ei,eo),el={},ec=o._fullInput.columnorder.concat(slicer(s.map(function(i,o){return o}))),eu=Z.map(function(i,s){var _=Array.isArray(o.columnwidth)?o.columnwidth[Math.min(s,o.columnwidth.length-1)]:o.columnwidth;return N(_)?Number(_):1}),ef=eu.reduce(sum,0);eu=eu.map(function(i){return i/ef*$});var ed=Math.max(arrayMax(o.header.line.width),arrayMax(o.cells.line.width)),eh={key:o.uid+i._context.staticPlot,translateX:X.x[0]*i._fullLayout._size.w,translateY:i._fullLayout._size.h*(1-X.y[1]),size:i._fullLayout._size,width:$,maxLineWidth:ed,height:ee,columnOrder:ec,groupHeight:ee,rowBlocks:es,headerRowBlocks:eo,scrollY:0,cells:F({},o.cells,{values:s}),headerCells:F({},o.header,{values:Z}),gdColumns:Z.map(function(i){return i[0]}),gdColumnsOriginalOrder:Z.map(function(i){return i[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:Z.map(function(i,o){var s=el[i];return el[i]=(s||0)+1,{key:i+"__"+el[i],label:i,specIndex:o,xIndex:ec[o],xScale:xScale,x:void 0,calcdata:void 0,columnWidth:eu[o]}})};return eh.columns.forEach(function(i){i.calcdata=eh,i.x=xScale(i)}),eh}},56269:function(i,o,s){"use strict";var _=s(1426).extendFlat;function rowFromTo(i){var o=i.rowBlocks[i.page],s=o?o.rows[0].rowIndex:0,_=o?s+o.rows.length:0;return[s,_]}o.splitToPanels=function(i){var o=[0,0],s=_({},i,{key:"header",type:"header",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!0,values:i.calcdata.headerCells.values[i.specIndex],rowBlocks:i.calcdata.headerRowBlocks,calcdata:_({},i.calcdata,{cells:i.calcdata.headerCells})});return[_({},i,{key:"cells1",type:"cells",page:0,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:i.calcdata.cells.values[i.specIndex],rowBlocks:i.calcdata.rowBlocks}),_({},i,{key:"cells2",type:"cells",page:1,prevPages:o,currentRepaint:[null,null],dragHandle:!1,values:i.calcdata.cells.values[i.specIndex],rowBlocks:i.calcdata.rowBlocks}),s]},o.splitToCells=function(i){var o=rowFromTo(i);return(i.values||[]).slice(o[0],o[1]).map(function(s,_){return{keyWithinBlock:_+("string"==typeof s&&s.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:o[0]+_,column:i,calcdata:i.calcdata,page:i.page,rowBlocks:i.rowBlocks,value:s}})}},39754:function(i,o,s){"use strict";var _=s(71828),F=s(44464),N=s(27670).c;function defaultColumnOrder(i,o){for(var s=i.columnorder||[],_=i.header.values.length,F=s.slice(0,_),N=F.slice().sort(function(i,o){return i-o}),j=F.map(function(i){return N.indexOf(i)}),Z=j.length;Z<_;Z++)j.push(Z);o("columnorder",j)}i.exports=function(i,o,s,j){function coerce(s,N){return _.coerce(i,o,F,s,N)}N(o,j,coerce),coerce("columnwidth"),coerce("header.values"),coerce("header.format"),coerce("header.align"),coerce("header.prefix"),coerce("header.suffix"),coerce("header.height"),coerce("header.line.width"),coerce("header.line.color"),coerce("header.fill.color"),_.coerceFont(coerce,"header.font",_.extendFlat({},j.font)),defaultColumnOrder(o,coerce),coerce("cells.values"),coerce("cells.format"),coerce("cells.align"),coerce("cells.prefix"),coerce("cells.suffix"),coerce("cells.height"),coerce("cells.line.width"),coerce("cells.line.color"),coerce("cells.fill.color"),_.coerceFont(coerce,"cells.font",_.extendFlat({},j.font)),o._length=null}},96595:function(i,o,s){"use strict";i.exports={attributes:s(44464),supplyDefaults:s(39754),calc:s(76333),plot:s(36736),moduleType:"trace",name:"table",basePlotModule:s(99469),categories:["noOpacity"],meta:{}}},36736:function(i,o,s){"use strict";var _=s(49850),F=s(39898),N=s(71828).numberFormat,j=s(28984),Z=s(91424),X=s(63893),$=s(71828).raiseToTop,ee=s(71828).strTranslate,et=s(71828).cancelTransition,er=s(51018),en=s(56269),ei=s(7901);function roundHalfWidth(i){return Math.ceil(i.calcdata.maxLineWidth/2)}function scrollAreaBottomClipKey(i,o){return"clip"+i._fullLayout._uid+"_scrollAreaBottomClip_"+o.key}function columnBoundaryClipKey(i,o){return"clip"+i._fullLayout._uid+"_columnBoundaryClippath_"+o.calcdata.key+"_"+o.specIndex}function flatData(i){return[].concat.apply([],i.map(function(i){return i})).map(function(i){return i.__data__})}function renderScrollbarKit(i,o,s){function calcTotalHeight(i){var o=i.rowBlocks;return firstRowAnchor(o,o.length-1)+(o.length?rowsHeight(o[o.length-1],1/0):1)}var N=i.selectAll("."+_.cn.scrollbarKit).data(j.repeat,j.keyFun);N.enter().append("g").classed(_.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),N.each(function(i){var o=i.scrollbarState;o.totalHeight=calcTotalHeight(i),o.scrollableAreaHeight=i.groupHeight-headerHeight(i),o.currentlyVisibleHeight=Math.min(o.totalHeight,o.scrollableAreaHeight),o.ratio=o.currentlyVisibleHeight/o.totalHeight,o.barLength=Math.max(o.ratio*o.currentlyVisibleHeight,_.goldenRatio*_.scrollbarWidth),o.barWiggleRoom=o.currentlyVisibleHeight-o.barLength,o.wiggleRoom=Math.max(0,o.totalHeight-o.scrollableAreaHeight),o.topY=0===o.barWiggleRoom?0:i.scrollY/o.wiggleRoom*o.barWiggleRoom,o.bottomY=o.topY+o.barLength,o.dragMultiplier=o.wiggleRoom/o.barWiggleRoom}).attr("transform",function(i){return ee(i.width+_.scrollbarWidth/2+_.scrollbarOffset,headerHeight(i))});var Z=N.selectAll("."+_.cn.scrollbar).data(j.repeat,j.keyFun);Z.enter().append("g").classed(_.cn.scrollbar,!0);var X=Z.selectAll("."+_.cn.scrollbarSlider).data(j.repeat,j.keyFun);X.enter().append("g").classed(_.cn.scrollbarSlider,!0),X.attr("transform",function(i){return ee(0,i.scrollbarState.topY||0)});var $=X.selectAll("."+_.cn.scrollbarGlyph).data(j.repeat,j.keyFun);$.enter().append("line").classed(_.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",_.scrollbarWidth).attr("stroke-linecap","round").attr("y1",_.scrollbarWidth/2),$.attr("y2",function(i){return i.scrollbarState.barLength-_.scrollbarWidth/2}).attr("stroke-opacity",function(i){return i.columnDragInProgress||!i.scrollbarState.barWiggleRoom||s?0:.4}),$.transition().delay(0).duration(0),$.transition().delay(_.scrollbarHideDelay).duration(_.scrollbarHideDuration).attr("stroke-opacity",0);var et=Z.selectAll("."+_.cn.scrollbarCaptureZone).data(j.repeat,j.keyFun);et.enter().append("line").classed(_.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",_.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(s){var _=F.event.y,N=this.getBoundingClientRect(),j=s.scrollbarState,Z=_-N.top,X=F.scale.linear().domain([0,j.scrollableAreaHeight]).range([0,j.totalHeight]).clamp(!0);j.topY<=Z&&Z<=j.bottomY||makeDragRow(o,i,null,X(Z-j.barLength/2))(s)}).call(F.behavior.drag().origin(function(i){return F.event.stopPropagation(),i.scrollbarState.scrollbarScrollInProgress=!0,i}).on("drag",makeDragRow(o,i)).on("dragend",function(){})),et.attr("y2",function(i){return i.scrollbarState.scrollableAreaHeight}),o._context.staticPlot&&($.remove(),et.remove())}function renderColumnCellTree(i,o,s,_){var F=renderColumnCell(renderColumnCells(s));supplyStylingValues(F),sizeAndStyleRect(renderCellRect(F));var N=renderCellText(renderCellTextHolder(F));setFont(N),populateCellText(N,o,_,i),setCellHeightAndPositionY(F)}function renderColumnCells(i){var o=i.selectAll("."+_.cn.columnCells).data(j.repeat,j.keyFun);return o.enter().append("g").classed(_.cn.columnCells,!0),o.exit().remove(),o}function renderColumnCell(i){var o=i.selectAll("."+_.cn.columnCell).data(en.splitToCells,function(i){return i.keyWithinBlock});return o.enter().append("g").classed(_.cn.columnCell,!0),o.exit().remove(),o}function renderCellRect(i){var o=i.selectAll("."+_.cn.cellRect).data(j.repeat,function(i){return i.keyWithinBlock});return o.enter().append("rect").classed(_.cn.cellRect,!0),o}function renderCellText(i){var o=i.selectAll("."+_.cn.cellText).data(j.repeat,function(i){return i.keyWithinBlock});return o.enter().append("text").classed(_.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){F.event.stopPropagation()}),o}function renderCellTextHolder(i){var o=i.selectAll("."+_.cn.cellTextHolder).data(j.repeat,function(i){return i.keyWithinBlock});return o.enter().append("g").classed(_.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),o}function supplyStylingValues(i){i.each(function(i,o){var s=i.calcdata.cells.font,_=i.column.specIndex,F={size:gridPick(s.size,_,o),color:gridPick(s.color,_,o),family:gridPick(s.family,_,o)};i.rowNumber=i.key,i.align=gridPick(i.calcdata.cells.align,_,o),i.cellBorderWidth=gridPick(i.calcdata.cells.line.width,_,o),i.font=F})}function setFont(i){i.each(function(i){Z.font(F.select(this),i.font)})}function sizeAndStyleRect(i){i.attr("width",function(i){return i.column.columnWidth}).attr("stroke-width",function(i){return i.cellBorderWidth}).each(function(i){var o=F.select(this);ei.stroke(o,gridPick(i.calcdata.cells.line.color,i.column.specIndex,i.rowNumber)),ei.fill(o,gridPick(i.calcdata.cells.fill.color,i.column.specIndex,i.rowNumber))})}function populateCellText(i,o,s,j){i.text(function(i){var o,s,F=i.column.specIndex,j=i.rowNumber,Z=i.value,X="string"==typeof Z,$=X&&Z.match(/<br>/i),ee=!X||$;i.mayHaveMarkup=X&&Z.match(/[<&>]/);var et=isLatex(Z);i.latex=et;var er=et?"":gridPick(i.calcdata.cells.prefix,F,j)||"",en=et?"":gridPick(i.calcdata.cells.suffix,F,j)||"",ei=et?null:gridPick(i.calcdata.cells.format,F,j)||null,eo=er+(ei?N(ei)(i.value):i.value)+en;if(i.wrappingNeeded=!i.wrapped&&!ee&&!et&&(o=hasWrapCharacter(eo)),i.cellHeightMayIncrease=$||et||i.mayHaveMarkup||(void 0===o?hasWrapCharacter(eo):o),i.needsConvertToTspans=i.mayHaveMarkup||i.wrappingNeeded||i.latex,i.wrappingNeeded){var es=(" "===_.wrapSplitCharacter?eo.replace(/<a href=/ig,"<a_href="):eo).split(_.wrapSplitCharacter),el=" "===_.wrapSplitCharacter?es.map(function(i){return i.replace(/<a_href=/ig,"<a href=")}):es;i.fragments=el.map(function(i){return{text:i,width:null}}),i.fragments.push({fragment:_.wrapSpacer,width:null}),s=el.join(_.lineBreaker)+_.lineBreaker+_.wrapSpacer}else delete i.fragments,s=eo;return s}).attr("dy",function(i){return i.needsConvertToTspans?0:"0.75em"}).each(function(i){var N=F.select(this),Z=i.wrappingNeeded?wrapTextMaker:updateYPositionMaker;i.needsConvertToTspans?X.convertToTspans(N,j,Z(s,this,o,j,i)):F.select(this.parentNode).attr("transform",function(i){return ee(xPosition(i),_.cellPad)}).attr("text-anchor",function(i){return({left:"start",center:"middle",right:"end"})[i.align]})})}function isLatex(i){return"string"==typeof i&&i.match(_.latexCheck)}function hasWrapCharacter(i){return -1!==i.indexOf(_.wrapSplitCharacter)}function columnMoved(i,o,s){var _=o.gdColumnsOriginalOrder;o.gdColumns.sort(function(i,o){return s[_.indexOf(i)]-s[_.indexOf(o)]}),o.columnorder=s,i.emit("plotly_restyle")}function gridPick(i,o,s){if(!Array.isArray(i))return i;var _=i[Math.min(o,i.length-1)];return Array.isArray(_)?_[Math.min(s,_.length-1)]:_}function easeColumn(i,o,s){i.transition().ease(_.releaseTransitionEase).duration(_.releaseTransitionDuration).attr("transform",ee(o.x,s))}function cellsBlock(i){return"cells"===i.type}function headerBlock(i){return"header"===i.type}function headerHeight(i){return(i.rowBlocks.length?i.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(i,o){return i+rowsHeight(o,1/0)},0)}function findPagesAndCacheHeights(i,o,s){for(var _=[],F=0,N=0;N<i.length;N++){for(var j=i[N],Z=j.rows,X=0,$=0;$<Z.length;$++)X+=Z[$].rowHeight;j.allRowsHeight=X;var ee=o+s;o<F+X&&ee>F&&_.push(N),F+=X}return _}function updateBlockYPosition(i,o,s){var _=flatData(o)[0];if(void 0!==_){var F=_.rowBlocks,N=_.calcdata,j=firstRowAnchor(F,F.length),Z=_.calcdata.groupHeight-headerHeight(_),X=N.scrollY=Math.max(0,Math.min(j-Z,N.scrollY)),$=findPagesAndCacheHeights(F,X,Z);1===$.length&&($[0]===F.length-1?$.unshift($[0]-1):$.push($[0]+1)),$[0]%2&&$.reverse(),o.each(function(i,o){i.page=$[o],i.scrollY=X}),o.attr("transform",function(i){return ee(0,firstRowAnchor(i.rowBlocks,i.page)-i.scrollY)}),i&&(conditionalPanelRerender(i,s,o,$,_.prevPages,_,0),conditionalPanelRerender(i,s,o,$,_.prevPages,_,1),renderScrollbarKit(s,i))}}function makeDragRow(i,o,s,N){return function(j){var Z=j.calcdata?j.calcdata:j,X=o.filter(function(i){return Z.key===i.key}),$=s||Z.scrollbarState.dragMultiplier,ee=Z.scrollY;return Z.scrollY=void 0===N?Z.scrollY+$*F.event.dy:N,updateBlockYPosition(i,X.selectAll("."+_.cn.yColumn).selectAll("."+_.cn.columnBlock).filter(cellsBlock),X),Z.scrollY===ee}}function conditionalPanelRerender(i,o,s,_,F,N,j){_[j]!==F[j]&&(clearTimeout(N.currentRepaint[j]),N.currentRepaint[j]=setTimeout(function(){renderColumnCellTree(i,o,s.filter(function(i,o){return o===j&&_[o]!==F[o]}),s),F[j]=_[j]}))}function wrapTextMaker(i,o,s,N){return function(){var j=F.select(o.parentNode);j.each(function(i){var o,s,F=i.fragments;j.selectAll("tspan.line").each(function(i,o){F[o].width=this.getComputedTextLength()});var N=F[F.length-1].width,Z=F.slice(0,-1),X=[],$=0,ee=i.column.columnWidth-2*_.cellPad;for(i.value="";Z.length;)$+(s=(o=Z.shift()).width+N)>ee&&(i.value+=X.join(_.wrapSpacer)+_.lineBreaker,X=[],$=0),X.push(o.text),$+=s;$&&(i.value+=X.join(_.wrapSpacer)),i.wrapped=!0}),j.selectAll("tspan.line").remove(),populateCellText(j.select("."+_.cn.cellText),s,i,N),F.select(o.parentNode.parentNode).call(setCellHeightAndPositionY)}}function updateYPositionMaker(i,o,s,N,j){return function(){if(!j.settledY){var Z=F.select(o.parentNode),X=getBlock(j),$=j.key-X.firstRowIndex,et=X.rows[$].rowHeight,er=Math.max(j.cellHeightMayIncrease?o.parentNode.getBoundingClientRect().height+2*_.cellPad:et,et);er-X.rows[$].rowHeight&&(X.rows[$].rowHeight=er,i.selectAll("."+_.cn.columnCell).call(setCellHeightAndPositionY),updateBlockYPosition(null,i.filter(cellsBlock),0),renderScrollbarKit(s,N,!0)),Z.attr("transform",function(){var i=this.parentNode.getBoundingClientRect(),o=F.select(this.parentNode).select("."+_.cn.cellRect).node().getBoundingClientRect(),s=this.transform.baseVal.consolidate(),N=o.top-i.top+(s?s.matrix.f:_.cellPad);return ee(xPosition(j,F.select(this.parentNode).select("."+_.cn.cellTextHolder).node().getBoundingClientRect().width),N)}),j.settledY=!0}}}function xPosition(i,o){switch(i.align){case"left":default:return _.cellPad;case"right":return i.column.columnWidth-(o||0)-_.cellPad;case"center":return(i.column.columnWidth-(o||0))/2}}function setCellHeightAndPositionY(i){i.attr("transform",function(i){var o=i.rowBlocks[0].auxiliaryBlocks.reduce(function(i,o){return i+rowsHeight(o,1/0)},0);return ee(0,rowsHeight(getBlock(i),i.key)+o)}).selectAll("."+_.cn.cellRect).attr("height",function(i){return getRow(getBlock(i),i.key).rowHeight})}function firstRowAnchor(i,o){for(var s=0,_=o-1;_>=0;_--)s+=allRowsHeight(i[_]);return s}function rowsHeight(i,o){for(var s=0,_=0;_<i.rows.length&&i.rows[_].rowIndex<o;_++)s+=i.rows[_].rowHeight;return s}function allRowsHeight(i){var o=i.allRowsHeight;if(void 0!==o)return o;for(var s=0,_=0;_<i.rows.length;_++)s+=i.rows[_].rowHeight;return i.allRowsHeight=s,s}function getBlock(i){return i.rowBlocks[i.page]}function getRow(i,o){return i.rows[o-i.firstRowIndex]}i.exports=function(i,o){var s=!i._context.staticPlot,N=i._fullLayout._paper.selectAll("."+_.cn.table).data(o.map(function(o){return er(i,j.unwrap(o).trace)}),j.keyFun);N.exit().remove(),N.enter().append("g").classed(_.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),N.attr("width",function(i){return i.width+i.size.l+i.size.r}).attr("height",function(i){return i.height+i.size.t+i.size.b}).attr("transform",function(i){return ee(i.translateX,i.translateY)});var X=N.selectAll("."+_.cn.tableControlView).data(j.repeat,j.keyFun),ei=X.enter().append("g").classed(_.cn.tableControlView,!0).style("box-sizing","content-box");if(s){var eo="onwheel"in document?"wheel":"mousewheel";ei.on("mousemove",function(o){X.filter(function(i){return o===i}).call(renderScrollbarKit,i)}).on(eo,function(o){o.scrollbarState.wheeling||(o.scrollbarState.wheeling=!0,makeDragRow(i,X,null,o.scrollY+F.event.deltaY)(o)||(F.event.stopPropagation(),F.event.preventDefault()),o.scrollbarState.wheeling=!1)}).call(renderScrollbarKit,i,!0)}X.attr("transform",function(i){return ee(i.size.l,i.size.t)});var es=X.selectAll("."+_.cn.scrollBackground).data(j.repeat,j.keyFun);es.enter().append("rect").classed(_.cn.scrollBackground,!0).attr("fill","none"),es.attr("width",function(i){return i.width}).attr("height",function(i){return i.height}),X.each(function(o){Z.setClipUrl(F.select(this),scrollAreaBottomClipKey(i,o),i)});var el=X.selectAll("."+_.cn.yColumn).data(function(i){return i.columns},j.keyFun);el.enter().append("g").classed(_.cn.yColumn,!0),el.exit().remove(),el.attr("transform",function(i){return ee(i.x,0)}),s&&el.call(F.behavior.drag().origin(function(o){return easeColumn(F.select(this),o,-_.uplift),$(this),o.calcdata.columnDragInProgress=!0,renderScrollbarKit(X.filter(function(i){return o.calcdata.key===i.key}),i),o}).on("drag",function(i){var o=F.select(this),getter=function(o){return(i===o?F.event.x:o.x)+o.columnWidth/2};i.x=Math.max(-_.overdrag,Math.min(i.calcdata.width+_.overdrag-i.columnWidth,F.event.x)),flatData(el).filter(function(o){return o.calcdata.key===i.calcdata.key}).sort(function(i,o){return getter(i)-getter(o)}).forEach(function(o,s){o.xIndex=s,o.x=i===o?o.x:o.xScale(o)}),el.filter(function(o){return i!==o}).transition().ease(_.transitionEase).duration(_.transitionDuration).attr("transform",function(i){return ee(i.x,0)}),o.call(et).attr("transform",ee(i.x,-_.uplift))}).on("dragend",function(o){var s=F.select(this),_=o.calcdata;o.x=o.xScale(o),o.calcdata.columnDragInProgress=!1,easeColumn(s,o,0),columnMoved(i,_,_.columns.map(function(i){return i.xIndex}))})),el.each(function(o){Z.setClipUrl(F.select(this),columnBoundaryClipKey(i,o),i)});var ec=el.selectAll("."+_.cn.columnBlock).data(en.splitToPanels,j.keyFun);ec.enter().append("g").classed(_.cn.columnBlock,!0).attr("id",function(i){return i.key}),ec.style("cursor",function(i){return i.dragHandle?"ew-resize":i.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var eu=ec.filter(headerBlock),ef=ec.filter(cellsBlock);s&&ef.call(F.behavior.drag().origin(function(i){return F.event.stopPropagation(),i}).on("drag",makeDragRow(i,X,-1)).on("dragend",function(){})),renderColumnCellTree(i,X,eu,ec),renderColumnCellTree(i,X,ef,ec);var ed=X.selectAll("."+_.cn.scrollAreaClip).data(j.repeat,j.keyFun);ed.enter().append("clipPath").classed(_.cn.scrollAreaClip,!0).attr("id",function(o){return scrollAreaBottomClipKey(i,o)});var eh=ed.selectAll("."+_.cn.scrollAreaClipRect).data(j.repeat,j.keyFun);eh.enter().append("rect").classed(_.cn.scrollAreaClipRect,!0).attr("x",-_.overdrag).attr("y",-_.uplift).attr("fill","none"),eh.attr("width",function(i){return i.width+2*_.overdrag}).attr("height",function(i){return i.height+_.uplift}),el.selectAll("."+_.cn.columnBoundary).data(j.repeat,j.keyFun).enter().append("g").classed(_.cn.columnBoundary,!0);var ep=el.selectAll("."+_.cn.columnBoundaryClippath).data(j.repeat,j.keyFun);ep.enter().append("clipPath").classed(_.cn.columnBoundaryClippath,!0),ep.attr("id",function(o){return columnBoundaryClipKey(i,o)});var eg=ep.selectAll("."+_.cn.columnBoundaryRect).data(j.repeat,j.keyFun);eg.enter().append("rect").classed(_.cn.columnBoundaryRect,!0).attr("fill","none"),eg.attr("width",function(i){return i.columnWidth+2*roundHalfWidth(i)}).attr("height",function(i){return i.calcdata.height+2*roundHalfWidth(i)+_.uplift}).attr("x",function(i){return-roundHalfWidth(i)}).attr("y",function(i){return-roundHalfWidth(i)}),updateBlockYPosition(null,ef,X)}},45802:function(i,o,s){"use strict";var _=s(5386).fF,F=s(5386).si,N=s(50693),j=s(27670).Y,Z=s(34e3),X=s(57564),$=s(43473),ee=s(1426).extendFlat,et=s(79952).u;i.exports={labels:X.labels,parents:X.parents,values:X.values,branchvalues:X.branchvalues,count:X.count,level:X.level,maxdepth:X.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:ee({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:X.marker.colors,pattern:et,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:X.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},N("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:ee({},Z.textfont,{}),editType:"calc"},text:Z.text,textinfo:X.textinfo,texttemplate:F({editType:"plot"},{keys:$.eventDataKeys.concat(["label","value"])}),hovertext:Z.hovertext,hoverinfo:X.hoverinfo,hovertemplate:_({},{keys:$.eventDataKeys}),textfont:Z.textfont,insidetextfont:Z.insidetextfont,outsidetextfont:ee({},Z.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:Z.sort,root:X.root,domain:j({name:"treemap",trace:!0,editType:"calc"})}},78018:function(i,o,s){"use strict";var _=s(74875);o.name="treemap",o.plot=function(i,s,F,N){_.plotBasePlot(o.name,i,s,F,N)},o.clean=function(i,s,F,N){_.cleanBasePlot(o.name,i,s,F,N)}},65039:function(i,o,s){"use strict";var _=s(52147);o.y=function(i,o){return _.calc(i,o)},o.T=function(i){return _._runCrossTraceCalc("treemap",i)}},43473:function(i){"use strict";i.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(i,o,s){"use strict";var _=s(71828),F=s(45802),N=s(7901),j=s(27670).c,Z=s(90769).handleText,X=s(97313).TEXTPAD,$=s(37434).handleMarkerDefaults,ee=s(21081),et=ee.hasColorscale,er=ee.handleDefaults;i.exports=function(i,o,s,ee){function coerce(s,N){return _.coerce(i,o,F,s,N)}var en=coerce("labels"),ei=coerce("parents");if(!en||!en.length||!ei||!ei.length){o.visible=!1;return}var eo=coerce("values");coerce(eo&&eo.length?"branchvalues":"count"),coerce("level"),coerce("maxdepth"),"squarify"===coerce("tiling.packing")&&coerce("tiling.squarifyratio"),coerce("tiling.flip"),coerce("tiling.pad");var es=coerce("text");coerce("texttemplate"),o.texttemplate||coerce("textinfo",Array.isArray(es)?"text+label":"label"),coerce("hovertext"),coerce("hovertemplate");var el=coerce("pathbar.visible");Z(i,o,ee,coerce,"auto",{hasPathbar:el,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),coerce("textposition");var ec=-1!==o.textposition.indexOf("bottom");$(i,o,ee,coerce),(o._hasColorscale=et(i,"marker","colors")||(i.marker||{}).coloraxis)?er(i,o,ee,coerce,{prefix:"marker.",cLetter:"c"}):coerce("marker.depthfade",!(o.marker.colors||[]).length);var eu=2*o.textfont.size;coerce("marker.pad.t",ec?eu/4:eu),coerce("marker.pad.l",eu/4),coerce("marker.pad.r",eu/4),coerce("marker.pad.b",ec?eu:eu/4),coerce("marker.cornerradius"),o._hovered={marker:{line:{width:2,color:N.contrast(ee.paper_bgcolor)}}},el&&(coerce("pathbar.thickness",o.pathbar.textfont.size+2*X),coerce("pathbar.side"),coerce("pathbar.edgeshape")),coerce("sort"),coerce("root.color"),j(o,ee,coerce),o._length=null}},80694:function(i,o,s){"use strict";var _=s(39898),F=s(2791),N=s(72597).clearMinTextSize,j=s(16688).resizeText,Z=s(46650);i.exports=function(i,o,s,X,$){var ee,et,er=$.type,en=$.drawDescendants,ei=i._fullLayout,eo=ei["_"+er+"layer"],es=!s;N(er,ei),(ee=eo.selectAll("g.trace."+er).data(o,function(i){return i[0].trace.uid})).enter().append("g").classed("trace",!0).classed(er,!0),ee.order(),!ei.uniformtext.mode&&F.hasTransition(s)?(X&&(et=X()),_.transition().duration(s.duration).ease(s.easing).each("end",function(){et&&et()}).each("interrupt",function(){et&&et()}).each(function(){eo.selectAll("g.trace").each(function(o){Z(i,o,this,s,en)})})):(ee.each(function(o){Z(i,o,this,s,en)}),ei.uniformtext.mode&&j(i,eo.selectAll(".trace"),er)),es&&ee.exit().remove()}},66209:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(91424),j=s(63893),Z=s(37210),X=s(96362).styleOne,$=s(43473),ee=s(2791),et=s(83523);i.exports=function(i,o,s,er,en){var ei=en.barDifY,eo=en.width,es=en.height,el=en.viewX,ec=en.viewY,eu=en.pathSlice,ef=en.toMoveInsideSlice,ed=en.strTransform,eh=en.hasTransition,ep=en.handleSlicesExit,eg=en.makeUpdateSliceInterpolator,em=en.makeUpdateTextInterpolator,ey={},ev=i._context.staticPlot,ex=i._fullLayout,e_=o[0],ew=e_.trace,eT=e_.hierarchy,ek=eo/ew._entryDepth,eA=ee.listPath(s.data,"id"),eS=Z(eT.copy(),[eo,es],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(eS=eS.filter(function(i){var o=eA.indexOf(i.data.id);return -1!==o&&(i.x0=ek*o,i.x1=ek*(o+1),i.y0=ei,i.y1=ei+es,i.onPathbar=!0,!0)})).reverse(),(er=er.data(eS,ee.getPtId)).enter().append("g").classed("pathbar",!0),ep(er,!0,ey,[eo,es],eu),er.order();var eM=er;eh&&(eM=eM.transition().each("end",function(){var o=_.select(this);ee.setSliceCursor(o,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),eM.each(function(Z){Z._x0=el(Z.x0),Z._x1=el(Z.x1),Z._y0=ec(Z.y0),Z._y1=ec(Z.y1),Z._hoverX=el(Z.x1-Math.min(eo,es)/2),Z._hoverY=ec(Z.y1-es/2);var er=_.select(this),en=F.ensureSingle(er,"path","surface",function(i){i.style("pointer-events",ev?"none":"all")});eh?en.transition().attrTween("d",function(i){var o=eg(i,!0,ey,[eo,es]);return function(i){return eu(o(i))}}):en.attr("d",eu),er.call(et,s,i,o,{styleOne:X,eventDataKeys:$.eventDataKeys,transitionTime:$.CLICK_TRANSITION_TIME,transitionEasing:$.CLICK_TRANSITION_EASING}).call(ee.setSliceCursor,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:i._transitioning}),en.call(X,Z,ew,i,{hovered:!1}),Z._text=(ee.getPtLabel(Z)||"").split("<br>").join(" ")||"";var ei=F.ensureSingle(er,"g","slicetext"),ep=F.ensureSingle(ei,"text","",function(i){i.attr("data-notex",1)}),e_=F.ensureUniformFontSize(i,ee.determineTextFont(ew,Z,ex.font,{onPathbar:!0}));ep.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(N.font,e_).call(j.convertToTspans,i),Z.textBB=N.bBox(ep.node()),Z.transform=ef(Z,{fontSize:e_.size,onPathbar:!0}),Z.transform.fontSize=e_.size,eh?ep.transition().attrTween("transform",function(i){var o=em(i,!0,ey,[eo,es]);return function(i){return ed(o(i))}}):ep.attr("transform",ed(Z))})}},52583:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(91424),j=s(63893),Z=s(37210),X=s(96362).styleOne,$=s(43473),ee=s(2791),et=s(83523),er=s(24714).formatSliceLabel;i.exports=function(i,o,s,en,ei){var eo=ei.width,es=ei.height,el=ei.viewX,ec=ei.viewY,eu=ei.pathSlice,ef=ei.toMoveInsideSlice,ed=ei.strTransform,eh=ei.hasTransition,ep=ei.handleSlicesExit,eg=ei.makeUpdateSliceInterpolator,em=ei.makeUpdateTextInterpolator,ey=ei.prevEntry,ev=i._context.staticPlot,ex=i._fullLayout,e_=o[0].trace,ew=-1!==e_.textposition.indexOf("left"),eT=-1!==e_.textposition.indexOf("right"),ek=-1!==e_.textposition.indexOf("bottom"),eA=!ek&&!e_.marker.pad.t||ek&&!e_.marker.pad.b,eS=Z(s,[eo,es],{packing:e_.tiling.packing,squarifyratio:e_.tiling.squarifyratio,flipX:e_.tiling.flip.indexOf("x")>-1,flipY:e_.tiling.flip.indexOf("y")>-1,pad:{inner:e_.tiling.pad,top:e_.marker.pad.t,left:e_.marker.pad.l,right:e_.marker.pad.r,bottom:e_.marker.pad.b}}).descendants(),eM=1/0,eC=-1/0;eS.forEach(function(i){var o=i.depth;o>=e_._maxDepth?(i.x0=i.x1=(i.x0+i.x1)/2,i.y0=i.y1=(i.y0+i.y1)/2):(eM=Math.min(eM,o),eC=Math.max(eC,o))}),en=en.data(eS,ee.getPtId),e_._maxVisibleLayers=isFinite(eC)?eC-eM+1:0,en.enter().append("g").classed("slice",!0),ep(en,!1,{},[eo,es],eu),en.order();var eE=null;if(eh&&ey){var eL=ee.getPtId(ey);en.each(function(i){null===eE&&ee.getPtId(i)===eL&&(eE={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1})})}var getRefRect=function(){return eE||{x0:0,x1:eo,y0:0,y1:es}},eP=en;return eh&&(eP=eP.transition().each("end",function(){var o=_.select(this);ee.setSliceCursor(o,i,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),eP.each(function(Z){var en=ee.isHeader(Z,e_);Z._x0=el(Z.x0),Z._x1=el(Z.x1),Z._y0=ec(Z.y0),Z._y1=ec(Z.y1),Z._hoverX=el(Z.x1-e_.marker.pad.r),Z._hoverY=ek?ec(Z.y1-e_.marker.pad.b/2):ec(Z.y0+e_.marker.pad.t/2);var ei=_.select(this),ep=F.ensureSingle(ei,"path","surface",function(i){i.style("pointer-events",ev?"none":"all")});eh?ep.transition().attrTween("d",function(i){var o=eg(i,!1,getRefRect(),[eo,es]);return function(i){return eu(o(i))}}):ep.attr("d",eu),ei.call(et,s,i,o,{styleOne:X,eventDataKeys:$.eventDataKeys,transitionTime:$.CLICK_TRANSITION_TIME,transitionEasing:$.CLICK_TRANSITION_EASING}).call(ee.setSliceCursor,i,{isTransitioning:i._transitioning}),ep.call(X,Z,e_,i,{hovered:!1}),Z.x0===Z.x1||Z.y0===Z.y1?Z._text="":en?Z._text=eA?"":ee.getPtLabel(Z)||"":Z._text=er(Z,s,e_,o,ex)||"";var ey=F.ensureSingle(ei,"g","slicetext"),eS=F.ensureSingle(ey,"text","",function(i){i.attr("data-notex",1)}),eM=F.ensureUniformFontSize(i,ee.determineTextFont(e_,Z,ex.font));eS.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor",eT?"end":ew||en?"start":"middle").call(N.font,eM).call(j.convertToTspans,i),Z.textBB=N.bBox(eS.node()),Z.transform=ef(Z,{fontSize:eM.size,isHeader:en}),Z.transform.fontSize=eM.size,eh?eS.transition().attrTween("transform",function(i){var o=em(i,!1,getRefRect(),[eo,es]);return function(i){return ed(o(i))}}):eS.attr("transform",ed(Z))}),eE}},14102:function(i){"use strict";i.exports=function flipTree(i,o,s){s.swapXY&&(_=i.x0,i.x0=i.y0,i.y0=_,_=i.x1,i.x1=i.y1,i.y1=_),s.flipX&&(_=i.x0,i.x0=o[0]-i.x1,i.x1=o[0]-_),s.flipY&&(_=i.y0,i.y0=o[1]-i.y1,i.y1=o[1]-_);var _,F=i.children;if(F)for(var N=0;N<F.length;N++)flipTree(F[N],o,s)}},70954:function(i,o,s){"use strict";i.exports={moduleType:"trace",name:"treemap",basePlotModule:s(78018),categories:[],animatable:!0,attributes:s(45802),layoutAttributes:s(55479),supplyDefaults:s(91174),supplyLayoutDefaults:s(77182),calc:s(65039).y,crossTraceCalc:s(65039).T,plot:s(5893),style:s(96362).style,colorbar:s(4898),meta:{}}},55479:function(i){"use strict";i.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(i,o,s){"use strict";var _=s(71828),F=s(55479);i.exports=function(i,o){function coerce(s,N){return _.coerce(i,o,F,s,N)}coerce("treemapcolorway",o.colorway),coerce("extendtreemapcolors")}},37210:function(i,o,s){"use strict";var _=s(674),F=s(14102);function getTilingMethod(i,o){switch(i){case"squarify":return _.treemapSquarify.ratio(o);case"binary":return _.treemapBinary;case"dice":return _.treemapDice;case"slice":return _.treemapSlice;default:return _.treemapSliceDice}}i.exports=function(i,o,s){var N,j=s.flipX,Z=s.flipY,X="dice-slice"===s.packing,$=s.pad[Z?"bottom":"top"],ee=s.pad[j?"right":"left"],et=s.pad[j?"left":"right"],er=s.pad[Z?"top":"bottom"];X&&(N=ee,ee=$,$=N,N=et,et=er,er=N);var en=_.treemap().tile(getTilingMethod(s.packing,s.squarifyratio)).paddingInner(s.pad.inner).paddingLeft(ee).paddingRight(et).paddingTop($).paddingBottom(er).size(X?[o[1],o[0]]:o)(i);return(X||j||Z)&&F(en,o,{swapXY:X,flipX:j,flipY:Z}),en}},5893:function(i,o,s){"use strict";var _=s(80694),F=s(52583);i.exports=function(i,o,s,N){return _(i,o,s,N,{type:"treemap",drawDescendants:F})}},46650:function(i,o,s){"use strict";var _=s(39898),F=s(81684).sX,N=s(2791),j=s(71828),Z=s(97313).TEXTPAD,X=s(17295).toMoveInsideBar,$=s(72597).recordMinTextSize,ee=s(43473),et=s(66209);function getKey(i){return N.isHierarchyRoot(i)?"":N.getPtId(i)}i.exports=function(i,o,s,er,en){var ei=i._fullLayout,eo=o[0],es=eo.trace,el="icicle"===es.type,ec=eo.hierarchy,eu=N.findEntryWithLevel(ec,es.level),ef=_.select(s),ed=ef.selectAll("g.pathbar"),eh=ef.selectAll("g.slice");if(!eu){ed.remove(),eh.remove();return}var ep=N.isHierarchyRoot(eu),eg=!ei.uniformtext.mode&&N.hasTransition(er),em=N.getMaxDepth(es),ey=ei._size,ev=es.domain,ex=ey.w*(ev.x[1]-ev.x[0]),e_=ey.h*(ev.y[1]-ev.y[0]),ew=es.pathbar.thickness,eT=es.marker.line.width+ee.gapWithPathbar,ek=es.pathbar.visible?es.pathbar.side.indexOf("bottom")>-1?e_+eT:-(ew+eT):0,eA={x0:ex,x1:ex,y0:ek,y1:ek+ew},findClosestEdge=function(i,o,s){var _=es.tiling.pad,isLeftOfRect=function(i){return i-_<=o.x0},isRightOfRect=function(i){return i+_>=o.x1},isBottomOfRect=function(i){return i-_<=o.y0},isTopOfRect=function(i){return i+_>=o.y1};return i.x0===o.x0&&i.x1===o.x1&&i.y0===o.y0&&i.y1===o.y1?{x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1}:{x0:isLeftOfRect(i.x0-_)?0:isRightOfRect(i.x0-_)?s[0]:i.x0,x1:isLeftOfRect(i.x1+_)?0:isRightOfRect(i.x1+_)?s[0]:i.x1,y0:isBottomOfRect(i.y0-_)?0:isTopOfRect(i.y0-_)?s[1]:i.y0,y1:isBottomOfRect(i.y1+_)?0:isTopOfRect(i.y1+_)?s[1]:i.y1}},eS=null,eM={},eC={},eE=null,getPrev=function(i,o){return o?eM[getKey(i)]:eC[getKey(i)]},getOrigin=function(i,o,s,_){if(o)return eM[getKey(ec)]||eA;var F=eC[es.level]||s;return i.data.depth-eu.data.depth<em?findClosestEdge(i,F,_):{}};eo.hasMultipleRoots&&ep&&em++,es._maxDepth=em,es._backgroundColor=ei.paper_bgcolor,es._entryDepth=eu.data.depth,es._atRootLevel=ep;var eL=-ex/2+ey.l+ey.w*(ev.x[1]+ev.x[0])/2,eP=-e_/2+ey.t+ey.h*(1-(ev.y[1]+ev.y[0])/2),viewMapX=function(i){return eL+i},viewMapY=function(i){return eP+i},eI=viewMapY(0),eO=viewMapX(0),viewBarX=function(i){return eO+i},viewBarY=function(i){return eI+i},eD=viewBarX(0),limitX0=function(i){i.x=Math.max(eD,i.x)},eR=es.pathbar.edgeshape,eB=es[el?"tiling":"marker"].pad,hasFlag=function(i){return -1!==es.textposition.indexOf(i)},eF=hasFlag("top"),ez=hasFlag("left"),eN=hasFlag("right"),ej=hasFlag("bottom"),toMoveInsideSlice=function(i,o){var s=i.x0,_=i.x1,F=i.y0,N=i.y1,j=i.textBB,ee=eF||o.isHeader&&!ej,et=hasFlag("right"),er=hasFlag("left")||o.onPathbar;if(o.isHeader){if((s+=(el?eB:eB.l)-Z)>=(_-=(el?eB:eB.r)-Z)){var en,eo=(s+_)/2;s=eo,_=eo}ej?F<(en=N-(el?eB:eB.b))&&en<N&&(F=en):(en=F+(el?eB:eB.t),F<en&&en<N&&(N=en))}var ec=X(s,_,F,N,j,{isHorizontal:!1,constrained:!0,angle:0,anchor:ee?"start":ej?"end":"middle",leftToRight:er?-1:et?1:0});return(ec.fontSize=o.fontSize,ec.targetX=viewMapX(ec.targetX),ec.targetY=viewMapY(ec.targetY),isNaN(ec.targetX)||isNaN(ec.targetY))?{}:(s!==_&&F!==N&&$(es.type,ec,ei),{scale:ec.scale,rotate:ec.rotate,textX:ec.textX,textY:ec.textY,anchorX:ec.anchorX,anchorY:ec.anchorY,targetX:ec.targetX,targetY:ec.targetY})},interpFromParent=function(i,o){for(var s,_=0,F=i;!s&&_<em;)_++,(F=F.parent)?s=getPrev(F,o):_=em;return s||{}},makeExitSliceInterpolator=function(i,o,s,_){var N,j=getPrev(i,o);if(o)N=eA;else{var Z=getPrev(eu,o);N=Z?findClosestEdge(i,Z,_):{}}return F(j,N)},makeUpdateSliceInterpolator=function(i,o,s,_,N){var Z,X=getPrev(i,o);if(X)Z=X;else if(o)Z=eA;else if(eS){if(i.parent){var $=eE||s;$&&!o?Z=findClosestEdge(i,$,_):(Z={},j.extendFlat(Z,interpFromParent(i,o)))}else Z=j.extendFlat({},i),el&&("h"===N.orientation?N.flipX?Z.x0=i.x1:Z.x1=0:N.flipY?Z.y0=i.y1:Z.y1=0)}else Z={};return F(Z,{x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1})},makeUpdateTextInterpolator=function(i,o,s,_){var Z=getPrev(i,o),X={},ee=getOrigin(i,o,s,_);j.extendFlat(X,{transform:toMoveInsideSlice({x0:ee.x0,x1:ee.x1,y0:ee.y0,y1:ee.y1,textBB:i.textBB,_text:i._text},{isHeader:N.isHeader(i,es)})}),Z?X=Z:i.parent&&j.extendFlat(X,interpFromParent(i,o));var et=i.transform;return i.x0!==i.x1&&i.y0!==i.y1&&$(es.type,et,ei),F(X,{transform:{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY}})},handleSlicesExit=function(i,o,s,F,N){var j=F[0],Z=F[1];eg?i.exit().transition().each(function(){var i=_.select(this);i.select("path.surface").transition().attrTween("d",function(i){var _=makeExitSliceInterpolator(i,o,s,[j,Z]);return function(i){return N(_(i))}}),i.select("g.slicetext").attr("opacity",0)}).remove():i.exit().remove()},strTransform=function(i){var o=i.transform;return i.x0!==i.x1&&i.y0!==i.y1&&$(es.type,o,ei),j.getTextTransform({textX:o.textX,textY:o.textY,anchorX:o.anchorX,anchorY:o.anchorY,targetX:o.targetX,targetY:o.targetY,scale:o.scale,rotate:o.rotate})};eg&&(ed.each(function(i){eM[getKey(i)]={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1},i.transform&&(eM[getKey(i)].transform={textX:i.transform.textX,textY:i.transform.textY,anchorX:i.transform.anchorX,anchorY:i.transform.anchorY,targetX:i.transform.targetX,targetY:i.transform.targetY,scale:i.transform.scale,rotate:i.transform.rotate})}),eh.each(function(i){eC[getKey(i)]={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1},i.transform&&(eC[getKey(i)].transform={textX:i.transform.textX,textY:i.transform.textY,anchorX:i.transform.anchorX,anchorY:i.transform.anchorY,targetX:i.transform.targetX,targetY:i.transform.targetY,scale:i.transform.scale,rotate:i.transform.rotate}),!eS&&N.isEntry(i)&&(eS=i)})),eE=en(i,o,eu,eh,{width:ex,height:e_,viewX:viewMapX,viewY:viewMapY,pathSlice:function(i){var o=viewMapX(i.x0),s=viewMapX(i.x1),_=viewMapY(i.y0),F=viewMapY(i.y1),N=s-o,j=F-_;if(!N||!j)return"";var Z=Math.min(es.marker.cornerradius||0,N/2,j/2);Z&&i.data&&i.data.data&&i.data.data.label&&(eF&&(Z=Math.min(Z,eB.t)),ez&&(Z=Math.min(Z,eB.l)),eN&&(Z=Math.min(Z,eB.r)),ej&&(Z=Math.min(Z,eB.b)));var arc=function(i,o){return Z?"a"+Z+","+Z+" 0 0 1 "+i+","+o:""};return"M"+o+","+(_+Z)+arc(Z,-Z)+"L"+(s-Z)+","+_+arc(Z,Z)+"L"+s+","+(F-Z)+arc(-Z,Z)+"L"+(o+Z)+","+F+arc(-Z,-Z)+"Z"},toMoveInsideSlice:toMoveInsideSlice,prevEntry:eS,makeUpdateSliceInterpolator:makeUpdateSliceInterpolator,makeUpdateTextInterpolator:makeUpdateTextInterpolator,handleSlicesExit:handleSlicesExit,hasTransition:eg,strTransform:strTransform}),es.pathbar.visible?et(i,o,eu,ed,{barDifY:ek,width:ex,height:ew,viewX:viewBarX,viewY:viewBarY,pathSlice:function(i){var o=viewBarX(Math.max(Math.min(i.x0,i.x0),0)),s=viewBarX(Math.min(Math.max(i.x1,i.x1),ex)),_=viewBarY(i.y0),F=viewBarY(i.y1),N=ew/2,j={},Z={};j.x=o,Z.x=s,j.y=Z.y=(_+F)/2;var X={x:o,y:_},$={x:s,y:_},ee={x:s,y:F},et={x:o,y:F};return">"===eR?(X.x-=N,$.x-=N,ee.x-=N,et.x-=N):"/"===eR?(ee.x-=N,et.x-=N,j.x-=N/2,Z.x-=N/2):"\\"===eR?(X.x-=N,$.x-=N,j.x-=N/2,Z.x-=N/2):"<"===eR&&(j.x-=N,Z.x-=N),limitX0(X),limitX0(et),limitX0(j),limitX0($),limitX0(ee),limitX0(Z),"M"+X.x+","+X.y+"L"+$.x+","+$.y+"L"+Z.x+","+Z.y+"L"+ee.x+","+ee.y+"L"+et.x+","+et.y+"L"+j.x+","+j.y+"Z"},toMoveInsideSlice:toMoveInsideSlice,makeUpdateSliceInterpolator:makeUpdateSliceInterpolator,makeUpdateTextInterpolator:makeUpdateTextInterpolator,handleSlicesExit:handleSlicesExit,hasTransition:eg,strTransform:strTransform}):ed.remove()}},96362:function(i,o,s){"use strict";var _=s(39898),F=s(7901),N=s(71828),j=s(2791),Z=s(72597).resizeText,X=s(43467);function style(i){var o=i._fullLayout._treemaplayer.selectAll(".trace");Z(i,o,"treemap"),o.each(function(o){var s=_.select(this),F=o[0].trace;s.style("opacity",F.opacity),s.selectAll("path.surface").each(function(o){_.select(this).call(styleOne,o,F,i,{hovered:!1})})})}function styleOne(i,o,s,_,Z){var $=(Z||{}).hovered,ee=o.data.data,et=ee.i,er=ee.color,en=j.isHierarchyRoot(o),ei=1;if($)es=s._hovered.marker.line.color,el=s._hovered.marker.line.width;else if(en&&er===s.root.color)ei=100,es="rgba(0,0,0,0)",el=0;else if(es=N.castOption(s,et,"marker.line.color")||F.defaultLine,el=N.castOption(s,et,"marker.line.width")||0,!s._hasColorscale&&!o.onPathbar){var eo=s.marker.depthfade;if(eo){var es,el,ec,eu=F.combine(F.addOpacity(s._backgroundColor,.75),er);if(!0===eo?ec=isFinite(j.getMaxDepth(s))?j.isLeaf(o)?0:s._maxVisibleLayers-(o.data.depth-s._entryDepth):o.data.height+1:(ec=o.data.depth-s._entryDepth,!s._atRootLevel&&ec++),ec>0)for(var ef=0;ef<ec;ef++){var ed=.5*ef/ec;er=F.combine(F.addOpacity(eu,ed),er)}}}i.call(X,o,s,_,er).style("stroke-width",el).call(F.stroke,es).style("opacity",ei)}i.exports={style:style,styleOne:styleOne}},68875:function(i,o,s){"use strict";var _=s(53522),F=s(1426).extendFlat,N=s(12663).axisHoverFormat;i.exports={y:_.y,x:_.x,x0:_.x0,y0:_.y0,xhoverformat:N("x"),yhoverformat:N("y"),name:F({},_.name,{}),orientation:F({},_.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:_.fillcolor,points:F({},_.boxpoints,{}),jitter:F({},_.jitter,{}),pointpos:F({},_.pointpos,{}),width:F({},_.width,{}),marker:_.marker,text:_.text,hovertext:_.hovertext,hovertemplate:_.hovertemplate,quartilemethod:_.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup,selected:_.selected,unselected:_.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(48518),j=s(60168),Z=s(50606).BADNUM;function silvermanRule(i,o,s){return 1.059*Math.min(o,s/1.349)*Math.pow(i,-.2)}function calcBandwidth(i,o,s){var F=o.max-o.min;if(!F)return i.bandwidth?i.bandwidth:0;if(i.bandwidth)return Math.max(i.bandwidth,F/1e4);var N=s.length,j=_.stdev(s,N-1,o.mean);return Math.max(silvermanRule(N,j,o.q3-o.q1),F/100)}function calcSpan(i,o,s,_){var N,j=i.spanmode,X=i.span||[],$=[o.min,o.max],ee=[o.min-2*_,o.max+2*_];function calcSpanItem(_){var F=X[_],N="multicategory"===s.type?s.r2c(F):s.d2c(F,0,i[o.valLetter+"calendar"]);return N===Z?ee[_]:N}var et={type:"linear",range:N="soft"===j?ee:"hard"===j?$:[calcSpanItem(0),calcSpanItem(1)]};return F.setConvert(et),et.cleanRange(),N}i.exports=function(i,o){var s=N(i,o);if(s[0].t.empty)return s;for(var Z=i._fullLayout,X=F.getFromId(i,o["h"===o.orientation?"xaxis":"yaxis"]),$=1/0,ee=-1/0,et=0,er=0,en=0;en<s.length;en++){var ei=s[en],eo=ei.pts.map(j.extractVal),es=ei.bandwidth=calcBandwidth(o,ei,eo),el=ei.span=calcSpan(o,ei,X,es);if(ei.min===ei.max&&0===es)el=ei.span=[ei.min,ei.max],ei.density=[{v:1,t:el[0]}],ei.bandwidth=es,et=Math.max(et,1);else{var ec=el[1]-el[0],eu=Math.ceil(ec/(es/3)),ef=ec/eu;if(!isFinite(ef)||!isFinite(eu))return _.error("Something went wrong with computing the violin span"),s[0].t.empty=!0,s;var ed=j.makeKDE(ei,o,eo);ei.density=Array(eu);for(var eh=0,ep=el[0];ep<el[1]+ef/2;eh++,ep+=ef){var eg=ed(ep);ei.density[eh]={v:eg,t:ep},et=Math.max(et,eg)}}er=Math.max(er,eo.length),$=Math.min($,el[0]),ee=Math.max(ee,el[1])}var em=F.findExtremes(X,[$,ee],{padded:!0});if(o._extremes[X._id]=em,o.width)s[0].t.maxKDE=et;else{var ey=Z._violinScaleGroupStats,ev=o.scalegroup,ex=ey[ev];ex?(ex.maxKDE=Math.max(ex.maxKDE,et),ex.maxCount=Math.max(ex.maxCount,er)):ey[ev]={maxKDE:et,maxCount:er}}return s[0].t.labels.kde=_._(i,"kde:"),s}},86403:function(i,o,s){"use strict";var _=s(37188).setPositionOffset,F=["v","h"];i.exports=function(i,o){for(var s=i.calcdata,N=o.xaxis,j=o.yaxis,Z=0;Z<F.length;Z++){for(var X=F[Z],$="h"===X?j:N,ee=[],et=0;et<s.length;et++){var er=s[et],en=er[0].t,ei=er[0].trace;!0!==ei.visible||"violin"!==ei.type||en.empty||ei.orientation!==X||ei.xaxis!==N._id||ei.yaxis!==j._id||ee.push(et)}_("violin",i,ee,$)}}},15899:function(i,o,s){"use strict";var _=s(71828),F=s(7901),N=s(36411),j=s(68875);i.exports=function(i,o,s,Z){function coerce(s,F){return _.coerce(i,o,j,s,F)}function coerce2(s,F){return _.coerce2(i,o,j,s,F)}if(N.handleSampleDefaults(i,o,coerce,Z),!1!==o.visible){coerce("bandwidth"),coerce("side"),coerce("width")||(coerce("scalegroup",o.name),coerce("scalemode")),Array.isArray(coerce("span"))&&(X="manual"),coerce("spanmode",X);var X,$=coerce("line.color",(i.marker||{}).color||s),ee=coerce("line.width"),et=coerce("fillcolor",F.addOpacity(o.line.color,.5));N.handlePointsDefaults(i,o,coerce,{prefix:""});var er=coerce2("box.width"),en=coerce2("box.fillcolor",et),ei=coerce2("box.line.color",$),eo=coerce2("box.line.width",ee);coerce("box.visible",!!(er||en||ei||eo))||(o.box={visible:!1});var es=coerce2("meanline.color",$),el=coerce2("meanline.width",ee);coerce("meanline.visible",!!(es||el))||(o.meanline={visible:!1}),coerce("quartilemethod")}}},60168:function(i,o,s){"use strict";var _=s(71828);o.makeKDE=function(i,o,s){var _=s.length,F=i.bandwidth,N=1/(_*F);return function(i){for(var o,j=0,Z=0;Z<_;Z++)j+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*(o=(i-s[Z])/F)*o);return N*j}},o.getPositionOnKdePath=function(i,o,s){"h"===o.orientation?(F="y",N="x"):(F="x",N="y");var F,N,j=_.findPointOnPath(i.path,s,N,{pathLength:i.pathLength}),Z=i.posCenterPx,X=j[F],$="both"===o.side?2*Z-X:Z;return[X,$]},o.getKdeValue=function(i,s,_){var F=i.pts.map(o.extractVal);return o.makeKDE(i,s,F)(_)/i.posDensityScale},o.extractVal=function(i){return i.v}},57634:function(i,o,s){"use strict";var _=s(7901),F=s(71828),N=s(89298),j=s(41868),Z=s(60168);i.exports=function(i,o,s,X,$){$||($={});var ee=$.hoverLayer,et=i.cd,er=et[0].trace,en=er.hoveron,ei=-1!==en.indexOf("violins"),eo=-1!==en.indexOf("kde"),es=[];if(ei||eo){var el=j.hoverOnBoxes(i,o,s,X);if(eo&&el.length>0){var ec,eu,ef,ed,eh,ep,eg,em=i.xa,ey=i.ya;"h"===er.orientation?(eg=o,ef="y",eh=ey,ed="x",ep=em):(eg=s,ef="x",eh=em,ed="y",ep=ey);var ev=et[i.index];if(eg>=ev.span[0]&&eg<=ev.span[1]){var ex=F.extendFlat({},i),e_=ep.c2p(eg,!0),ew=Z.getKdeValue(ev,er,eg),eT=Z.getPositionOnKdePath(ev,er,e_),ek=eh._offset,eA=eh._length;ex[ef+"0"]=eT[0],ex[ef+"1"]=eT[1],ex[ed+"0"]=ex[ed+"1"]=e_,ex[ed+"Label"]=ed+": "+N.hoverLabelText(ep,eg,er[ed+"hoverformat"])+", "+et[0].t.labels.kde+" "+ew.toFixed(3);for(var eS=0,eM=0;eM<el.length;eM++)if("med"===el[eM].attr){eS=eM;break}ex.spikeDistance=el[eS].spikeDistance;var eC=ef+"Spike";ex[eC]=el[eS][eC],el[eS].spikeDistance=void 0,el[eS][eC]=void 0,ex.hovertemplate=!1,es.push(ex),(eu={})[ef+"1"]=F.constrain(ek+eT[0],ek,ek+eA),eu[ef+"2"]=F.constrain(ek+eT[1],ek,ek+eA),eu[ed+"1"]=eu[ed+"2"]=ep._offset+e_}}ei&&(es=es.concat(el))}-1!==en.indexOf("points")&&(ec=j.hoverOnPoints(i,o,s));var eE=ee.selectAll(".violinline-"+er.uid).data(eu?[0]:[]);return(eE.enter().append("line").classed("violinline-"+er.uid,!0).attr("stroke-width",1.5),eE.exit().remove(),eE.attr(eu).call(_.stroke,i.color),"closest"===X)?ec?[ec]:es:(ec&&es.push(ec),es)}},47462:function(i,o,s){"use strict";i.exports={attributes:s(68875),layoutAttributes:s(9228),supplyDefaults:s(15899),crossTraceDefaults:s(36411).crossTraceDefaults,supplyLayoutDefaults:s(33598),calc:s(38603),crossTraceCalc:s(86403),plot:s(28443),style:s(31847),styleOnSelect:s(16296).styleOnSelect,hoverPoints:s(57634),selectPoints:s(24626),moduleType:"trace",name:"violin",basePlotModule:s(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(i,o,s){"use strict";var _=s(40094),F=s(71828).extendFlat;i.exports={violinmode:F({},_.boxmode,{}),violingap:F({},_.boxgap,{}),violingroupgap:F({},_.boxgroupgap,{})}},33598:function(i,o,s){"use strict";var _=s(71828),F=s(9228),N=s(4199);i.exports=function(i,o,s){function coerce(s,N){return _.coerce(i,o,F,s,N)}N._supply(i,o,s,coerce,"violin")}},28443:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(91424),j=s(86047),Z=s(34621),X=s(60168);i.exports=function(i,o,s,$){var ee=i._context.staticPlot,et=i._fullLayout,er=o.xaxis,en=o.yaxis;function makePath(i,o){var s=Z(i,{xaxis:er,yaxis:en,trace:o,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return N.smoothopen(s[0],1)}F.makeTraceGroups($,s,"trace violins").each(function(i){var s,N,Z,$=_.select(this),ei=i[0],eo=ei.t,es=ei.trace;if(!0!==es.visible||eo.empty){$.remove();return}var el=eo.bPos,ec=eo.bdPos,eu=o[eo.valLetter+"axis"],ef=o[eo.posLetter+"axis"],ed="both"===es.side,eh=ed||"positive"===es.side,ep=ed||"negative"===es.side,eg=$.selectAll("path.violin").data(F.identity);eg.enter().append("path").style("vector-effect",ee?"none":"non-scaling-stroke").attr("class","violin"),eg.exit().remove(),eg.each(function(i){var o,s,F,N,j,Z,X,$,ee=_.select(this),er=i.density,en=er.length,ei=ef.c2l(i.pos+el,!0),eg=ef.l2p(ei);if(es.width)o=eo.maxKDE/ec;else{var em=et._violinScaleGroupStats[es.scalegroup];o="count"===es.scalemode?em.maxKDE/ec*(em.maxCount/i.pts.length):em.maxKDE/ec}if(eh){for(j=0,X=Array(en);j<en;j++)($=X[j]={})[eo.posLetter]=ei+er[j].v/o,$[eo.valLetter]=eu.c2l(er[j].t,!0);s=makePath(X,es)}if(ep){for(Z=0,X=Array(en),j=en-1;Z<en;Z++,j--)($=X[Z]={})[eo.posLetter]=ei-er[j].v/o,$[eo.valLetter]=eu.c2l(er[j].t,!0);F=makePath(X,es)}if(ed)N=s+"L"+F.substr(1)+"Z";else{var ey=[eg,eu.c2p(er[0].t)],ev=[eg,eu.c2p(er[en-1].t)];"h"===es.orientation&&(ey.reverse(),ev.reverse()),N=eh?"M"+ey+"L"+s.substr(1)+"L"+ev:"M"+ev+"L"+F.substr(1)+"L"+ey}ee.attr("d",N),i.posCenterPx=eg,i.posDensityScale=o*ec,i.path=ee.node(),i.pathLength=i.path.getTotalLength()/(ed?2:1)});var em=es.box,ey=em.width,ev=(em.line||{}).width;ed?(s=ec*ey,N=0):eh?(s=[0,ec*ey/2],N=ev*({x:1,y:-1})[eo.posLetter]):(s=[ec*ey/2,0],N=ev*({x:-1,y:1})[eo.posLetter]),j.plotBoxAndWhiskers($,{pos:ef,val:eu},es,{bPos:el,bdPos:s,bPosPxOffset:N}),j.plotBoxMean($,{pos:ef,val:eu},es,{bPos:el,bdPos:s,bPosPxOffset:N}),!es.box.visible&&es.meanline.visible&&(Z=F.identity);var ex=$.selectAll("path.meanline").data(Z||[]);ex.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",ee?"none":"non-scaling-stroke"),ex.exit().remove(),ex.each(function(i){var o=eu.c2p(i.mean,!0),s=X.getPositionOnKdePath(i,es,o);_.select(this).attr("d","h"===es.orientation?"M"+o+","+s[0]+"V"+s[1]:"M"+s[0]+","+o+"H"+s[1])}),j.plotPoints($,{x:er,y:en},es,eo)})}},31847:function(i,o,s){"use strict";var _=s(39898),F=s(7901),N=s(16296).stylePoints;i.exports=function(i){var o=_.select(i).selectAll("g.trace.violins");o.style("opacity",function(i){return i[0].trace.opacity}),o.each(function(o){var s=o[0].trace,j=_.select(this),Z=s.box||{},X=Z.line||{},$=s.meanline||{},ee=$.width;j.selectAll("path.violin").style("stroke-width",s.line.width+"px").call(F.stroke,s.line.color).call(F.fill,s.fillcolor),j.selectAll("path.box").style("stroke-width",X.width+"px").call(F.stroke,X.color).call(F.fill,Z.fillcolor);var et={"stroke-width":ee+"px","stroke-dasharray":2*ee+"px,"+ee+"px"};j.selectAll("path.mean").style(et).call(F.stroke,$.color),j.selectAll("path.meanline").style(et).call(F.stroke,$.color),N(j,s,i)})}},16336:function(i,o,s){"use strict";var _=s(50693),F=s(16249),N=s(54532),j=s(9012),Z=s(1426).extendFlat,X=s(30962).overrideAll,$=i.exports=X(Z({x:F.x,y:F.y,z:F.z,value:F.value,isomin:F.isomin,isomax:F.isomax,surface:F.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:F.slices,caps:F.caps,text:F.text,hovertext:F.hovertext,xhoverformat:F.xhoverformat,yhoverformat:F.yhoverformat,zhoverformat:F.zhoverformat,valuehoverformat:F.valuehoverformat,hovertemplate:F.hovertemplate},_("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:F.colorbar,opacity:F.opacity,opacityscale:N.opacityscale,lightposition:F.lightposition,lighting:F.lighting,flatshading:F.flatshading,contour:F.contour,hoverinfo:Z({},j.hoverinfo),showlegend:Z({},j.showlegend,{dflt:!1})}),"calc","nested");$.x.editType=$.y.editType=$.z.editType=$.value.editType="calc+clearAxisTypes",$.transforms=void 0},64809:function(i,o,s){"use strict";var _=s(9330).gl_mesh3d,F=s(81697).parseColorScale,N=s(78614),j=s(21081).extractOpts,Z=s(90060),X=s(22674).findNearestOnAxis,$=s(22674).generateIsoMeshes;function VolumeTrace(i,o,s){this.scene=i,this.uid=s,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var ee=VolumeTrace.prototype;function createVolumeTrace(i,o){var s=_({gl:i.glplot.gl}),F=new VolumeTrace(i,s,o.uid);return s._trace=F,F.update(o),i.glplot.add(s),F}ee.handlePick=function(i){if(i.object===this.mesh){var o=i.data.index,s=this.data._meshX[o],_=this.data._meshY[o],F=this.data._meshZ[o],N=this.data._Ys.length,j=this.data._Zs.length,Z=X(s,this.data._Xs).id,$=X(_,this.data._Ys).id,ee=X(F,this.data._Zs).id,et=i.index=ee+j*$+j*N*Z;i.traceCoordinate=[this.data._meshX[et],this.data._meshY[et],this.data._meshZ[et],this.data._value[et]];var er=this.data.hovertext||this.data.text;return Array.isArray(er)&&void 0!==er[et]?i.textLabel=er[et]:er&&(i.textLabel=er),!0}},ee.update=function(i){var o=this.scene,s=o.fullSceneLayout;function toDataCoords(i,o,s,_){return o.map(function(o){return i.d2l(o,0,_)*s})}this.data=$(i);var _={positions:Z(toDataCoords(s.xaxis,i._meshX,o.dataScale[0],i.xcalendar),toDataCoords(s.yaxis,i._meshY,o.dataScale[1],i.ycalendar),toDataCoords(s.zaxis,i._meshZ,o.dataScale[2],i.zcalendar)),cells:Z(i._meshI,i._meshJ,i._meshK),lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,opacityscale:i.opacityscale,contourEnable:i.contour.show,contourColor:N(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},X=j(i);_.vertexIntensity=i._meshIntensity,_.vertexIntensityBounds=[X.min,X.max],_.colormap=F(i),this.mesh.update(_)},ee.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},i.exports=createVolumeTrace},47651:function(i,o,s){"use strict";var _=s(71828),F=s(16336),N=s(82738).supplyIsoDefaults,j=s(91831).opacityscaleDefaults;i.exports=function(i,o,s,Z){function coerce(s,N){return _.coerce(i,o,F,s,N)}N(i,o,s,Z,coerce),j(i,o,Z,coerce)}},17659:function(i,o,s){"use strict";i.exports={attributes:s(16336),supplyDefaults:s(47651),calc:s(56959),colorbar:{min:"cmin",max:"cmax"},plot:s(64809),moduleType:"trace",name:"volume",basePlotModule:s(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(i,o,s){"use strict";var _=s(1486),F=s(82196).line,N=s(9012),j=s(12663).axisHoverFormat,Z=s(5386).fF,X=s(5386).si,$=s(48334),ee=s(1426).extendFlat,et=s(7901);function directionAttrs(i){return{marker:{color:ee({},_.marker.color,{arrayOk:!1,editType:"style"}),line:{color:ee({},_.marker.line.color,{arrayOk:!1,editType:"style"}),width:ee({},_.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}i.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:_.x,x0:_.x0,dx:_.dx,y:_.y,y0:_.y0,dy:_.dy,xperiod:_.xperiod,yperiod:_.yperiod,xperiod0:_.xperiod0,yperiod0:_.yperiod0,xperiodalignment:_.xperiodalignment,yperiodalignment:_.yperiodalignment,xhoverformat:j("x"),yhoverformat:j("y"),hovertext:_.hovertext,hovertemplate:Z({},{keys:$.eventDataKeys}),hoverinfo:ee({},N.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:X({editType:"plot"},{keys:$.eventDataKeys.concat(["label"])}),text:_.text,textposition:_.textposition,insidetextanchor:_.insidetextanchor,textangle:_.textangle,textfont:_.textfont,insidetextfont:_.insidetextfont,outsidetextfont:_.outsidetextfont,constraintext:_.constraintext,cliponaxis:_.cliponaxis,orientation:_.orientation,offset:_.offset,width:_.width,increasing:directionAttrs("increasing"),decreasing:directionAttrs("decreasing"),totals:directionAttrs("intermediate sums and total"),connector:{line:{color:ee({},F.color,{dflt:et.defaultLine}),width:ee({},F.width,{editType:"plot"}),dash:F.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:_.offsetgroup,alignmentgroup:_.alignmentgroup}},52752:function(i,o,s){"use strict";var _=s(89298),F=s(42973),N=s(71828).mergeArray,j=s(66279),Z=s(50606).BADNUM;function isAbsolute(i){return"a"===i||"absolute"===i}function isTotal(i){return"t"===i||"total"===i}i.exports=function(i,o){var s,X,$,ee,et,er,en,ei=_.getFromId(i,o.xaxis||"x"),eo=_.getFromId(i,o.yaxis||"y");"h"===o.orientation?(s=ei.makeCalcdata(o,"x"),$=eo.makeCalcdata(o,"y"),ee=F(o,eo,"y",$),et=!!o.yperiodalignment,er="y"):(s=eo.makeCalcdata(o,"y"),$=ei.makeCalcdata(o,"x"),ee=F(o,ei,"x",$),et=!!o.xperiodalignment,er="x");for(var es=Math.min((X=ee.vals).length,s.length),el=Array(es),ec=0,eu=!1,ef=0;ef<es;ef++){var ed=s[ef]||0,eh=!1;(s[ef]!==Z||isTotal(o.measure[ef])||isAbsolute(o.measure[ef]))&&ef+1<es&&(s[ef+1]!==Z||isTotal(o.measure[ef+1])||isAbsolute(o.measure[ef+1]))&&(eh=!0);var ep=el[ef]={i:ef,p:X[ef],s:ed,rawS:ed,cNext:eh};isAbsolute(o.measure[ef])?(ec=ep.s,ep.isSum=!0,ep.dir="totals",ep.s=ec):isTotal(o.measure[ef])?(ep.isSum=!0,ep.dir="totals",ep.s=ec):(ep.isSum=!1,ep.dir=ep.rawS<0?"decreasing":"increasing",en=ep.s,ep.s=ec+en,ec+=en),"totals"===ep.dir&&(eu=!0),et&&(el[ef].orig_p=$[ef],el[ef][er+"End"]=ee.ends[ef],el[ef][er+"Start"]=ee.starts[ef]),o.ids&&(ep.id=String(o.ids[ef])),ep.v=(o.base||0)+ec}return el.length&&(el[0].hasTotals=eu),N(o.text,el,"tx"),N(o.hovertext,el,"htx"),j(el,o),el}},48334:function(i){"use strict";i.exports={eventDataKeys:["initial","delta","final"]}},70766:function(i,o,s){"use strict";var _=s(11661).setGroupPositions;i.exports=function(i,o){var s,F,N=i._fullLayout,j=i._fullData,Z=i.calcdata,X=o.xaxis,$=o.yaxis,ee=[],et=[],er=[];for(F=0;F<j.length;F++){var en=j[F];!0===en.visible&&en.xaxis===X._id&&en.yaxis===$._id&&"waterfall"===en.type&&(s=Z[F],"h"===en.orientation?er.push(s):et.push(s),ee.push(s))}var ei={mode:N.waterfallmode,norm:N.waterfallnorm,gap:N.waterfallgap,groupgap:N.waterfallgroupgap};for(_(i,X,$,et,ei),_(i,$,X,er,ei),F=0;F<ee.length;F++){s=ee[F];for(var eo=0;eo<s.length;eo++){var es=s[eo];!1===es.isSum&&(es.s0+=0===eo?0:s[eo-1].s),eo+1<s.length&&(s[eo].nextP0=s[eo+1].p0,s[eo].nextS0=s[eo+1].s0)}}}},83266:function(i,o,s){"use strict";var _=s(71828),F=s(26125),N=s(90769).handleText,j=s(67513),Z=s(73927),X=s(43037),$=s(7901),ee=s(22372),et=ee.INCREASING.COLOR,er=ee.DECREASING.COLOR;function handleDirection(i,o,s){i(o+".marker.color",s),i(o+".marker.line.color",$.defaultLine),i(o+".marker.line.width")}function supplyDefaults(i,o,s,F){function coerce(s,F){return _.coerce(i,o,X,s,F)}if(!j(i,o,F,coerce)){o.visible=!1;return}Z(i,o,F,coerce),coerce("xhoverformat"),coerce("yhoverformat"),coerce("measure"),coerce("orientation",o.x&&!o.y?"h":"v"),coerce("base"),coerce("offset"),coerce("width"),coerce("text"),coerce("hovertext"),coerce("hovertemplate");var $=coerce("textposition");N(i,o,F,coerce,$,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===o.textposition||(coerce("texttemplate"),o.texttemplate||coerce("textinfo")),handleDirection(coerce,"increasing",et),handleDirection(coerce,"decreasing",er),handleDirection(coerce,"totals","#4499FF"),coerce("connector.visible")&&(coerce("connector.mode"),coerce("connector.line.width")&&(coerce("connector.line.color"),coerce("connector.line.dash")))}function crossTraceDefaults(i,o){var s;function coerce(i){return _.coerce(s._input,s,X,i)}if("group"===o.waterfallmode)for(var N=0;N<i.length;N++)F((s=i[N])._input,s,o,coerce)}i.exports={supplyDefaults:supplyDefaults,crossTraceDefaults:crossTraceDefaults}},58593:function(i){"use strict";i.exports=function(i,o){return i.x="xVal"in o?o.xVal:o.x,i.y="yVal"in o?o.yVal:o.y,"initial"in o&&(i.initial=o.initial),"delta"in o&&(i.delta=o.delta),"final"in o&&(i.final=o.final),o.xa&&(i.xaxis=o.xa),o.ya&&(i.yaxis=o.ya),i}},61326:function(i,o,s){"use strict";var _=s(89298).hoverLabelText,F=s(7901).opacity,N=s(95423).hoverOnBars,j=s(22372),Z={increasing:j.INCREASING.SYMBOL,decreasing:j.DECREASING.SYMBOL};function getTraceColor(i,o){var s=i[o.dir].marker,_=s.color,N=s.line.color,j=s.line.width;return F(_)?_:F(N)&&j?N:void 0}i.exports=function(i,o,s,F,j){var X=N(i,o,s,F,j);if(X){var $=X.cd,ee=$[0].trace,et="h"===ee.orientation,er=et?"x":"y",en=et?i.xa:i.ya,ei=$[X.index],eo=ei.isSum?ei.b+ei.s:ei.rawS;X.initial=ei.b+ei.s-eo,X.delta=eo,X.final=X.initial+X.delta;var es=formatNumber(Math.abs(X.delta));X.deltaLabel=eo<0?"("+es+")":es,X.finalLabel=formatNumber(X.final),X.initialLabel=formatNumber(X.initial);var el=ei.hi||ee.hoverinfo,ec=[];if(el&&"none"!==el&&"skip"!==el){var eu="all"===el,ef=el.split("+"),hasFlag=function(i){return eu||-1!==ef.indexOf(i)};!ei.isSum&&(!hasFlag("final")||hasFlag(et?"x":"y")||ec.push(X.finalLabel),hasFlag("delta")&&(eo<0?ec.push(X.deltaLabel+" "+Z.decreasing):ec.push(X.deltaLabel+" "+Z.increasing)),hasFlag("initial")&&ec.push("Initial: "+X.initialLabel))}return ec.length&&(X.extraText=ec.join("<br>")),X.color=getTraceColor(ee,ei),[X]}function formatNumber(i){return _(en,i,ee[er+"hoverformat"])}}},19990:function(i,o,s){"use strict";i.exports={attributes:s(43037),layoutAttributes:s(13494),supplyDefaults:s(83266).supplyDefaults,crossTraceDefaults:s(83266).crossTraceDefaults,supplyLayoutDefaults:s(5176),calc:s(52752),crossTraceCalc:s(70766),plot:s(30436),style:s(55750).style,hoverPoints:s(61326),eventData:s(58593),selectPoints:s(81974),moduleType:"trace",name:"waterfall",basePlotModule:s(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(i){"use strict";i.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(i,o,s){"use strict";var _=s(71828),F=s(13494);i.exports=function(i,o,s){var N=!1;function coerce(s,N){return _.coerce(i,o,F,s,N)}for(var j=0;j<s.length;j++){var Z=s[j];if(Z.visible&&"waterfall"===Z.type){N=!0;break}}N&&(coerce("waterfallmode"),coerce("waterfallgap",.2),coerce("waterfallgroupgap"))}},30436:function(i,o,s){"use strict";var _=s(39898),F=s(71828),N=s(91424),j=s(50606).BADNUM,Z=s(17295),X=s(72597).clearMinTextSize;function plotConnectors(i,o,s,Z){var X=o.xaxis,$=o.yaxis;F.makeTraceGroups(Z,s,"trace bars").each(function(s){var Z=_.select(this),ee=s[0].trace,et=F.ensureSingle(Z,"g","lines");if(!ee.connector||!ee.connector.visible){et.remove();return}var er="h"===ee.orientation,en=ee.connector.mode,ei=et.selectAll("g.line").data(F.identity);ei.enter().append("g").classed("line",!0),ei.exit().remove();var eo=ei.size();ei.each(function(s,Z){if(Z===eo-1||s.cNext){var ee=getXY(s,X,$,er),et=ee[0],ei=ee[1],es="";et[0]!==j&&ei[0]!==j&&et[1]!==j&&ei[1]!==j&&("spanning"===en&&!s.isSum&&Z>0&&(er?es+="M"+et[0]+","+ei[1]+"V"+ei[0]:es+="M"+et[1]+","+ei[0]+"H"+et[0]),"between"!==en&&(s.isSum||Z<eo-1)&&(er?es+="M"+et[1]+","+ei[0]+"V"+ei[1]:es+="M"+et[0]+","+ei[1]+"H"+et[1]),et[2]!==j&&ei[2]!==j&&(er?es+="M"+et[1]+","+ei[1]+"V"+ei[2]:es+="M"+et[1]+","+ei[1]+"H"+et[2])),""===es&&(es="M0,0Z"),F.ensureSingle(_.select(this),"path").attr("d",es).call(N.setClipUrl,o.layerClipId,i)}})})}function getXY(i,o,s,_){var F=[],N=[],j=_?o:s,Z=_?s:o;return F[0]=j.c2p(i.s0,!0),N[0]=Z.c2p(i.p0,!0),F[1]=j.c2p(i.s1,!0),N[1]=Z.c2p(i.p1,!0),F[2]=j.c2p(i.nextS0,!0),N[2]=Z.c2p(i.nextP0,!0),_?[F,N]:[N,F]}i.exports=function(i,o,s,_){var F=i._fullLayout;X("waterfall",F),Z.plot(i,o,s,_,{mode:F.waterfallmode,norm:F.waterfallmode,gap:F.waterfallgap,groupgap:F.waterfallgroupgap}),plotConnectors(i,o,s,_)}},55750:function(i,o,s){"use strict";var _=s(39898),F=s(91424),N=s(7901),j=s(37822).DESELECTDIM,Z=s(16688),X=s(72597).resizeText,$=Z.styleTextPoints;function style(i,o,s){var Z=s||_.select(i).selectAll("g.waterfalllayer").selectAll("g.trace");X(i,Z,"waterfall"),Z.style("opacity",function(i){return i[0].trace.opacity}),Z.each(function(o){var s=_.select(this),Z=o[0].trace;s.selectAll(".point > path").each(function(i){if(!i.isBlank){var o=Z[i.dir].marker;_.select(this).call(N.fill,o.color).call(N.stroke,o.line.color).call(F.dashLine,o.line.dash,o.line.width).style("opacity",Z.selectedpoints&&!i.selected?j:1)}}),$(s,Z,i),s.selectAll(".lines").each(function(){var i=Z.connector.line;F.lineGroupStyle(_.select(this).selectAll("path"),i.width,i.color,i.dash)})})}i.exports={style:style}},82887:function(i,o,s){"use strict";var _=s(89298),F=s(71828),N=s(86281),j=s(79344).p,Z=s(50606).BADNUM;o.moduleType="transform",o.name="aggregate";var X=o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},$=X.aggregations;function aggregateOneArray(i,o,s,N){if(N.enabled){for(var j=N.target,Z=F.nestedProperty(o,j),X=Z.get(),$=getAggregateFunction(N,_.getDataConversions(i,o,j,X)),ee=Array(s.length),et=0;et<s.length;et++)ee[et]=$(X,s[et]);Z.set(ee),"count"===N.func&&F.pushUnique(o._arrayAttrs,j)}}function getAggregateFunction(i,o){var s=i.func,_=o.d2c,N=o.c2d;switch(s){case"count":return count;case"first":return first;case"last":return last;case"sum":return function(i,o){for(var s=0,F=0;F<o.length;F++){var j=_(i[o[F]]);j!==Z&&(s+=j)}return N(s)};case"avg":return function(i,o){for(var s=0,F=0,j=0;j<o.length;j++){var X=_(i[o[j]]);X!==Z&&(s+=X,F++)}return F?N(s/F):Z};case"min":return function(i,o){for(var s=1/0,F=0;F<o.length;F++){var j=_(i[o[F]]);j!==Z&&(s=Math.min(s,j))}return s===1/0?Z:N(s)};case"max":return function(i,o){for(var s=-1/0,F=0;F<o.length;F++){var j=_(i[o[F]]);j!==Z&&(s=Math.max(s,j))}return s===-1/0?Z:N(s)};case"range":return function(i,o){for(var s=1/0,F=-1/0,j=0;j<o.length;j++){var X=_(i[o[j]]);X!==Z&&(s=Math.min(s,X),F=Math.max(F,X))}return F===-1/0||s===1/0?Z:N(F-s)};case"change":return function(i,o){var s=_(i[o[0]]),F=_(i[o[o.length-1]]);return s===Z||F===Z?Z:N(F-s)};case"median":return function(i,o){for(var s=[],j=0;j<o.length;j++){var X=_(i[o[j]]);X!==Z&&s.push(X)}if(!s.length)return Z;s.sort(F.sorterAsc);var $=(s.length-1)/2;return N((s[Math.floor($)]+s[Math.ceil($)])/2)};case"mode":return function(i,o){for(var s={},F=0,j=Z,X=0;X<o.length;X++){var $=_(i[o[X]]);if($!==Z){var ee=s[$]=(s[$]||0)+1;ee>F&&(F=ee,j=$)}}return F?N(j):Z};case"rms":return function(i,o){for(var s=0,F=0,j=0;j<o.length;j++){var X=_(i[o[j]]);X!==Z&&(s+=X*X,F++)}return F?N(Math.sqrt(s/F)):Z};case"stddev":return function(o,s){var F,N=0,j=0,X=1,$=Z;for(F=0;F<s.length&&$===Z;F++)$=_(o[s[F]]);if($===Z)return Z;for(;F<s.length;F++){var ee=_(o[s[F]]);if(ee!==Z){var et=ee-$;N+=et,j+=et*et,X++}}var er="sample"===i.funcmode?X-1:X;return er?Math.sqrt((j-N*N/X)/er):0}}}function count(i,o){return o.length}function first(i,o){return i[o[0]]}function last(i,o){return i[o[o.length-1]]}o.supplyDefaults=function(i,o){var s,_,j={};function coerce(o,s){return F.coerce(i,j,X,o,s)}if(!coerce("enabled"))return j;var Z=N.findArrayAttributes(o),ee={};for(s=0;s<Z.length;s++)ee[Z[s]]=1;var et=coerce("groups");if(!Array.isArray(et)){if(!ee[et])return j.enabled=!1,j;ee[et]=0}var er=i.aggregations||[],en=j.aggregations=Array(er.length);function coercei(i,o){return F.coerce(er[s],_,$,i,o)}for(s=0;s<er.length;s++){_={_index:s};var ei=coercei("target"),eo=coercei("func");coercei("enabled")&&ei&&(ee[ei]||"count"===eo&&void 0===ee[ei])?("stddev"===eo&&coercei("funcmode"),ee[ei]=0,en[s]=_):en[s]={enabled:!1,_index:s}}for(s=0;s<Z.length;s++)ee[Z[s]]&&en.push({target:Z[s],func:$.func.dflt,enabled:!0,_index:-1});return j},o.calcTransform=function(i,o,s){if(s.enabled){var _,N,Z,X,$=s.groups,ee=F.getTargetArray(o,{target:$});if(ee){var et={},er={},en=[],ei=j(o.transforms,s),eo=ee.length;for(o._length&&(eo=Math.min(eo,o._length)),_=0;_<eo;_++)void 0===(Z=et[N=ee[_]])?(et[N]=en.length,X=[_],en.push(X),er[et[N]]=ei(_)):(en[Z].push(_),er[et[N]]=(er[et[N]]||[]).concat(ei(_)));s._indexToPoints=er;var es=s.aggregations;for(_=0;_<es.length;_++)aggregateOneArray(i,o,en,es[_]);"string"==typeof $&&aggregateOneArray(i,o,en,{target:$,func:"first",enabled:!0}),o._length=en.length}}}},14382:function(i,o,s){"use strict";var _=s(71828),F=s(73972),N=s(89298),j=s(79344).p,Z=s(74808),X=Z.COMPARISON_OPS,$=Z.INTERVAL_OPS,ee=Z.SET_OPS;function getFilterFunc(i,o,s){var _,F=i.operation,N=i.value,j=Array.isArray(N);function isOperationIn(i){return -1!==i.indexOf(F)}var d2cValue=function(s){return o(s,0,i.valuecalendar)},d2cTarget=function(i){return o(i,0,s)};switch(isOperationIn(X)?_=d2cValue(j?N[0]:N):isOperationIn($)?_=j?[d2cValue(N[0]),d2cValue(N[1])]:[d2cValue(N),d2cValue(N)]:isOperationIn(ee)&&(_=j?N.map(d2cValue):[d2cValue(N)]),F){case"=":return function(i){return d2cTarget(i)===_};case"!=":return function(i){return d2cTarget(i)!==_};case"<":return function(i){return d2cTarget(i)<_};case"<=":return function(i){return d2cTarget(i)<=_};case">":return function(i){return d2cTarget(i)>_};case">=":return function(i){return d2cTarget(i)>=_};case"[]":return function(i){var o=d2cTarget(i);return o>=_[0]&&o<=_[1]};case"()":return function(i){var o=d2cTarget(i);return o>_[0]&&o<_[1]};case"[)":return function(i){var o=d2cTarget(i);return o>=_[0]&&o<_[1]};case"(]":return function(i){var o=d2cTarget(i);return o>_[0]&&o<=_[1]};case"][":return function(i){var o=d2cTarget(i);return o<=_[0]||o>=_[1]};case")(":return function(i){var o=d2cTarget(i);return o<_[0]||o>_[1]};case"](":return function(i){var o=d2cTarget(i);return o<=_[0]||o>_[1]};case")[":return function(i){var o=d2cTarget(i);return o<_[0]||o>=_[1]};case"{}":return function(i){return -1!==_.indexOf(d2cTarget(i))};case"}{":return function(i){return -1===_.indexOf(d2cTarget(i))}}}o.moduleType="transform",o.name="filter",o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(X).concat($).concat(ee),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},o.supplyDefaults=function(i){var s={};function coerce(F,N){return _.coerce(i,s,o.attributes,F,N)}if(coerce("enabled")){var N=coerce("target");if(_.isArrayOrTypedArray(N)&&0===N.length)return s.enabled=!1,s;coerce("preservegaps"),coerce("operation"),coerce("value");var j=F.getComponentMethod("calendars","handleDefaults");j(i,s,"valuecalendar",null),j(i,s,"targetcalendar",null)}return s},o.calcTransform=function(i,o,s){if(s.enabled){var F,Z,X=_.getTargetArray(o,s);if(X){var $=s.target,ee=X.length;o._length&&(ee=Math.min(ee,o._length));var et=s.targetcalendar,er=o._arrayAttrs,en=s.preservegaps;if("string"==typeof $){var ei=_.nestedProperty(o,$+"calendar").get();ei&&(et=ei)}var eo=getFilterFunc(s,N.getDataToCoordFunc(i,o,$,X),et),es={},el={},ec=0;en?(F=function(i){es[i.astr]=_.extendDeep([],i.get()),i.set(Array(ee))},Z=function(i,o){var s=es[i.astr][o];i.get()[o]=s}):(F=function(i){es[i.astr]=_.extendDeep([],i.get()),i.set([])},Z=function(i,o){var s=es[i.astr][o];i.get().push(s)}),forAllAttrs(F);for(var eu=j(o.transforms,s),ef=0;ef<ee;ef++)eo(X[ef])?(forAllAttrs(Z,ef),el[ec++]=eu(ef)):en&&ec++;s._indexToPoints=el,o._length=ec}}function forAllAttrs(i,s){for(var F=0;F<er.length;F++)i(_.nestedProperty(o,er[F]),s)}}},43102:function(i,o,s){"use strict";var _=s(71828),F=s(86281),N=s(74875),j=s(79344).p;function transformOne(i,o){var s,Z,X,$,ee,et,er,en,ei,eo,es=o.transform,el=o.transformIndex,ec=i.transforms[el].groups,eu=j(i.transforms,es);if(!_.isArrayOrTypedArray(ec)||0===ec.length)return[i];var ef=_.filterUnique(ec),ed=Array(ef.length),eh=ec.length,ep=F.findArrayAttributes(i),eg=es.styles||[],em={};for(s=0;s<eg.length;s++)em[eg[s].target]=eg[s].value;es.styles&&(eo=_.keyedContainer(es,"styles","target","value.name"));var ey={},ev={};for(s=0;s<ef.length;s++){ey[et=ef[s]]=s,ev[et]=0,(er=ed[s]=_.extendDeepNoArrays({},i))._group=et,er.transforms[el]._indexToPoints={};var ex=null;for(eo&&(ex=eo.get(et)),ex||""===ex?er.name=ex:er.name=_.templateString(es.nameformat,{trace:i.name,group:et}),en=er.transforms,er.transforms=[],Z=0;Z<en.length;Z++)er.transforms[Z]=_.extendDeepNoArrays({},en[Z]);for(Z=0;Z<ep.length;Z++)_.nestedProperty(er,ep[Z]).set([])}for(X=0;X<ep.length;X++){for(Z=0,$=ep[X],ei=[];Z<ef.length;Z++)ei[Z]=_.nestedProperty(ed[Z],$).get();for(Z=0,ee=_.nestedProperty(i,$).get();Z<eh;Z++)ei[ey[ec[Z]]].push(ee[Z])}for(Z=0;Z<eh;Z++)(er=ed[ey[ec[Z]]]).transforms[el]._indexToPoints[ev[ec[Z]]]=eu(Z),ev[ec[Z]]++;for(s=0;s<ef.length;s++)et=ef[s],er=ed[s],N.clearExpandedTraceDefaultColors(er),er=_.extendDeepNoArrays(er,em[et]||{});return ed}o.moduleType="transform",o.name="groupby",o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},o.supplyDefaults=function(i,s,F){var N,j={};function coerce(s,F){return _.coerce(i,j,o.attributes,s,F)}if(!coerce("enabled"))return j;coerce("groups"),coerce("nameformat",F._dataLength>1?"%{group} (%{trace})":"%{group}");var Z=i.styles,X=j.styles=[];if(Z)for(N=0;N<Z.length;N++){var $=X[N]={};_.coerce(Z[N],X[N],o.attributes.styles,"target");var ee=_.coerce(Z[N],X[N],o.attributes.styles,"value");_.isPlainObject(ee)?$.value=_.extendDeep({},ee):ee&&delete $.value}return j},o.transform=function(i,o){var s,_,F,N=[];for(_=0;_<i.length;_++)for(F=0,s=transformOne(i[_],o);F<s.length;F++)N.push(s[F]);return N}},79344:function(i,o){"use strict";o.p=function(i,o){for(var s,_,F=0;F<i.length&&(s=i[F])!==o;F++)s._indexToPoints&&!1!==s.enabled&&(_=s._indexToPoints);return _?function(i){return _[i]}:function(i){return[i]}}},32275:function(i,o,s){"use strict";var _=s(71828),F=s(89298),N=s(79344).p,j=s(50606).BADNUM;function getIndices(i,o,s,_){var F,N=Array(_),j=Array(_);for(F=0;F<_;F++)N[F]={v:o[F],i:F};for(N.sort(getSortFunc(i,s)),F=0;F<_;F++)j[F]=N[F].i;return j}function getSortFunc(i,o){switch(i.order){case"ascending":return function(i,s){var _=o(i.v),F=o(s.v);return _===j?1:F===j?-1:_-F};case"descending":return function(i,s){var _=o(i.v),F=o(s.v);return _===j?1:F===j?-1:F-_}}}o.moduleType="transform",o.name="sort",o.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},o.supplyDefaults=function(i){var s={};function coerce(F,N){return _.coerce(i,s,o.attributes,F,N)}return coerce("enabled")&&(coerce("target"),coerce("order")),s},o.calcTransform=function(i,o,s){if(s.enabled){var j,Z,X=_.getTargetArray(o,s);if(X){var $=s.target,ee=X.length;o._length&&(ee=Math.min(ee,o._length));var et=o._arrayAttrs,er=F.getDataToCoordFunc(i,o,$,X),en=getIndices(s,X,er,ee),ei=N(o.transforms,s),eo={};for(j=0;j<et.length;j++){var es=_.nestedProperty(o,et[j]),el=es.get(),ec=Array(ee);for(Z=0;Z<ee;Z++)ec[Z]=el[en[Z]];es.set(ec)}for(Z=0;Z<ee;Z++)eo[Z]=ei(en[Z]);s._indexToPoints=eo,o._length=ee}}}},11506:function(i,o){"use strict";o.version="2.27.1"},9330:function(i,o,s){var F=s(90386);self,i.exports=function(){var i={7386:function(i,o,s){i.exports={alpha_shape:s(2350),convex_hull:s(5537),delaunay_triangulate:s(4419),gl_cone3d:s(1140),gl_error3d:s(3110),gl_heatmap2d:s(6386),gl_line3d:s(6086),gl_mesh3d:s(8116),gl_plot2d:s(2117),gl_plot3d:s(1059),gl_pointcloud2d:s(8271),gl_scatter3d:s(2182),gl_select_box:s(6623),gl_spikes2d:s(3050),gl_streamtube3d:s(7307),gl_surface3d:s(3754),ndarray:s(5050),ndarray_linear_interpolate:s(3581)}},2146:function(i,o,s){"use strict";function _classCallCheck(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var s=0;s<o.length;s++){var _=o[s];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}function _createClass(i,o,s){return o&&_defineProperties(i.prototype,o),s&&_defineProperties(i,s),Object.defineProperty(i,"prototype",{writable:!1}),i}function _inherits(i,o){if("function"!=typeof o&&null!==o)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&_setPrototypeOf(i,o)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i})(i,o)}function _createSuper(i){var o=_isNativeReflectConstruct();return function(){var s,_=_getPrototypeOf(i);if(o){var F=_getPrototypeOf(this).constructor;s=Reflect.construct(_,arguments,F)}else s=_.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _possibleConstructorReturn(i,o){if(o&&("object"===_typeof(o)||"function"==typeof o))return o;if(void 0!==o)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(i)}function _assertThisInitialized(i){if(void 0===i)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}var _=s(3910),F=s(3187),N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function typedArraySupport(){try{var i=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(i,o),42===i.foo()}catch(i){return!1}}function createBuffer(i){if(i>2147483647)throw RangeError('The value "'+i+'" is invalid for option "size"');var o=new Uint8Array(i);return Object.setPrototypeOf(o,Buffer.prototype),o}function Buffer(i,o,s){if("number"==typeof i){if("string"==typeof o)throw TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(i)}return from(i,o,s)}function from(i,o,s){if("string"==typeof i)return fromString(i,o);if(ArrayBuffer.isView(i))return fromArrayView(i);if(null==i)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof(i));if(isInstance(i,ArrayBuffer)||i&&isInstance(i.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(isInstance(i,SharedArrayBuffer)||i&&isInstance(i.buffer,SharedArrayBuffer)))return fromArrayBuffer(i,o,s);if("number"==typeof i)throw TypeError('The "value" argument must not be of type number. Received type number');var _=i.valueOf&&i.valueOf();if(null!=_&&_!==i)return Buffer.from(_,o,s);var F=fromObject(i);if(F)return F;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof i[Symbol.toPrimitive])return Buffer.from(i[Symbol.toPrimitive]("string"),o,s);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof(i))}function assertSize(i){if("number"!=typeof i)throw TypeError('"size" argument must be of type number');if(i<0)throw RangeError('The value "'+i+'" is invalid for option "size"')}function alloc(i,o,s){return(assertSize(i),i<=0)?createBuffer(i):void 0!==o?"string"==typeof s?createBuffer(i).fill(o,s):createBuffer(i).fill(o):createBuffer(i)}function allocUnsafe(i){return assertSize(i),createBuffer(i<0?0:0|checked(i))}function fromString(i,o){if(("string"!=typeof o||""===o)&&(o="utf8"),!Buffer.isEncoding(o))throw TypeError("Unknown encoding: "+o);var s=0|byteLength(i,o),_=createBuffer(s),F=_.write(i,o);return F!==s&&(_=_.slice(0,F)),_}function fromArrayLike(i){for(var o=i.length<0?0:0|checked(i.length),s=createBuffer(o),_=0;_<o;_+=1)s[_]=255&i[_];return s}function fromArrayView(i){if(isInstance(i,Uint8Array)){var o=new Uint8Array(i);return fromArrayBuffer(o.buffer,o.byteOffset,o.byteLength)}return fromArrayLike(i)}function fromArrayBuffer(i,o,s){var _;if(o<0||i.byteLength<o)throw RangeError('"offset" is outside of buffer bounds');if(i.byteLength<o+(s||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(_=void 0===o&&void 0===s?new Uint8Array(i):void 0===s?new Uint8Array(i,o):new Uint8Array(i,o,s),Buffer.prototype),_}function fromObject(i){if(Buffer.isBuffer(i)){var o,s=0|checked(i.length),_=createBuffer(s);return 0===_.length||i.copy(_,0,0,s),_}return void 0!==i.length?"number"!=typeof i.length||(o=i.length)!=o?createBuffer(0):fromArrayLike(i):"Buffer"===i.type&&Array.isArray(i.data)?fromArrayLike(i.data):void 0}function checked(i){if(i>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|i}function byteLength(i,o){if(Buffer.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||isInstance(i,ArrayBuffer))return i.byteLength;if("string"!=typeof i)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+_typeof(i));var s=i.length,_=arguments.length>2&&!0===arguments[2];if(!_&&0===s)return 0;for(var F=!1;;)switch(o){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return utf8ToBytes(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return base64ToBytes(i).length;default:if(F)return _?-1:utf8ToBytes(i).length;o=(""+o).toLowerCase(),F=!0}}function slowToString(i,o,s){var _=!1;if((void 0===o||o<0)&&(o=0),o>this.length||((void 0===s||s>this.length)&&(s=this.length),s<=0||(s>>>=0)<=(o>>>=0)))return"";for(i||(i="utf8");;)switch(i){case"hex":return hexSlice(this,o,s);case"utf8":case"utf-8":return utf8Slice(this,o,s);case"ascii":return asciiSlice(this,o,s);case"latin1":case"binary":return latin1Slice(this,o,s);case"base64":return base64Slice(this,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,o,s);default:if(_)throw TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),_=!0}}function swap(i,o,s){var _=i[o];i[o]=i[s],i[s]=_}function bidirectionalIndexOf(i,o,s,_,F){var N;if(0===i.length)return -1;if("string"==typeof s?(_=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),(N=s=+s)!=N&&(s=F?0:i.length-1),s<0&&(s=i.length+s),s>=i.length){if(F)return -1;s=i.length-1}else if(s<0){if(!F)return -1;s=0}if("string"==typeof o&&(o=Buffer.from(o,_)),Buffer.isBuffer(o))return 0===o.length?-1:arrayIndexOf(i,o,s,_,F);if("number"==typeof o)return(o&=255,"function"==typeof Uint8Array.prototype.indexOf)?F?Uint8Array.prototype.indexOf.call(i,o,s):Uint8Array.prototype.lastIndexOf.call(i,o,s):arrayIndexOf(i,[o],s,_,F);throw TypeError("val must be string, number or Buffer")}function arrayIndexOf(i,o,s,_,F){var N,j=1,Z=i.length,X=o.length;if(void 0!==_&&("ucs2"===(_=String(_).toLowerCase())||"ucs-2"===_||"utf16le"===_||"utf-16le"===_)){if(i.length<2||o.length<2)return -1;j=2,Z/=2,X/=2,s/=2}function read(i,o){return 1===j?i[o]:i.readUInt16BE(o*j)}if(F){var $=-1;for(N=s;N<Z;N++)if(read(i,N)===read(o,-1===$?0:N-$)){if(-1===$&&($=N),N-$+1===X)return $*j}else -1!==$&&(N-=N-$),$=-1}else for(s+X>Z&&(s=Z-X),N=s;N>=0;N--){for(var ee=!0,et=0;et<X;et++)if(read(i,N+et)!==read(o,et)){ee=!1;break}if(ee)return N}return -1}function hexWrite(i,o,s,_){s=Number(s)||0;var F,N=i.length-s;_?(_=Number(_))>N&&(_=N):_=N;var j=o.length;for(_>j/2&&(_=j/2),F=0;F<_;++F){var Z=parseInt(o.substr(2*F,2),16);if(Z!=Z)break;i[s+F]=Z}return F}function utf8Write(i,o,s,_){return blitBuffer(utf8ToBytes(o,i.length-s),i,s,_)}function asciiWrite(i,o,s,_){return blitBuffer(asciiToBytes(o),i,s,_)}function base64Write(i,o,s,_){return blitBuffer(base64ToBytes(o),i,s,_)}function ucs2Write(i,o,s,_){return blitBuffer(utf16leToBytes(o,i.length-s),i,s,_)}function base64Slice(i,o,s){return 0===o&&s===i.length?_.fromByteArray(i):_.fromByteArray(i.slice(o,s))}function utf8Slice(i,o,s){s=Math.min(i.length,s);for(var _=[],F=o;F<s;){var N=i[F],j=null,Z=N>239?4:N>223?3:N>191?2:1;if(F+Z<=s){var X=void 0,$=void 0,ee=void 0,et=void 0;switch(Z){case 1:N<128&&(j=N);break;case 2:(192&(X=i[F+1]))==128&&(et=(31&N)<<6|63&X)>127&&(j=et);break;case 3:X=i[F+1],$=i[F+2],(192&X)==128&&(192&$)==128&&(et=(15&N)<<12|(63&X)<<6|63&$)>2047&&(et<55296||et>57343)&&(j=et);break;case 4:X=i[F+1],$=i[F+2],ee=i[F+3],(192&X)==128&&(192&$)==128&&(192&ee)==128&&(et=(15&N)<<18|(63&X)<<12|(63&$)<<6|63&ee)>65535&&et<1114112&&(j=et)}}null===j?(j=65533,Z=1):j>65535&&(j-=65536,_.push(j>>>10&1023|55296),j=56320|1023&j),_.push(j),F+=Z}return decodeCodePointsArray(_)}function decodeCodePointsArray(i){var o=i.length;if(o<=4096)return String.fromCharCode.apply(String,i);for(var s="",_=0;_<o;)s+=String.fromCharCode.apply(String,i.slice(_,_+=4096));return s}function asciiSlice(i,o,s){var _="";s=Math.min(i.length,s);for(var F=o;F<s;++F)_+=String.fromCharCode(127&i[F]);return _}function latin1Slice(i,o,s){var _="";s=Math.min(i.length,s);for(var F=o;F<s;++F)_+=String.fromCharCode(i[F]);return _}function hexSlice(i,o,s){var _=i.length;(!o||o<0)&&(o=0),(!s||s<0||s>_)&&(s=_);for(var F="",N=o;N<s;++N)F+=X[i[N]];return F}function utf16leSlice(i,o,s){for(var _=i.slice(o,s),F="",N=0;N<_.length-1;N+=2)F+=String.fromCharCode(_[N]+256*_[N+1]);return F}function checkOffset(i,o,s){if(i%1!=0||i<0)throw RangeError("offset is not uint");if(i+o>s)throw RangeError("Trying to access beyond buffer length")}function checkInt(i,o,s,_,F,N){if(!Buffer.isBuffer(i))throw TypeError('"buffer" argument must be a Buffer instance');if(o>F||o<N)throw RangeError('"value" argument is out of bounds');if(s+_>i.length)throw RangeError("Index out of range")}function wrtBigUInt64LE(i,o,s,_,F){checkIntBI(o,_,F,i,s,7);var N=Number(o&BigInt(4294967295));i[s++]=N,N>>=8,i[s++]=N,N>>=8,i[s++]=N,N>>=8,i[s++]=N;var j=Number(o>>BigInt(32)&BigInt(4294967295));return i[s++]=j,j>>=8,i[s++]=j,j>>=8,i[s++]=j,j>>=8,i[s++]=j,s}function wrtBigUInt64BE(i,o,s,_,F){checkIntBI(o,_,F,i,s,7);var N=Number(o&BigInt(4294967295));i[s+7]=N,N>>=8,i[s+6]=N,N>>=8,i[s+5]=N,N>>=8,i[s+4]=N;var j=Number(o>>BigInt(32)&BigInt(4294967295));return i[s+3]=j,j>>=8,i[s+2]=j,j>>=8,i[s+1]=j,j>>=8,i[s]=j,s+8}function checkIEEE754(i,o,s,_,F,N){if(s+_>i.length||s<0)throw RangeError("Index out of range")}function writeFloat(i,o,s,_,N){return o=+o,s>>>=0,N||checkIEEE754(i,o,s,4,34028234663852886e22,-34028234663852886e22),F.write(i,o,s,_,23,4),s+4}function writeDouble(i,o,s,_,N){return o=+o,s>>>=0,N||checkIEEE754(i,o,s,8,17976931348623157e292,-17976931348623157e292),F.write(i,o,s,_,52,8),s+8}o.lW=Buffer,o.h2=50,Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(i,o,s){return from(i,o,s)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(i,o,s){return alloc(i,o,s)},Buffer.allocUnsafe=function(i){return allocUnsafe(i)},Buffer.allocUnsafeSlow=function(i){return allocUnsafe(i)},Buffer.isBuffer=function(i){return null!=i&&!0===i._isBuffer&&i!==Buffer.prototype},Buffer.compare=function(i,o){if(isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),isInstance(o,Uint8Array)&&(o=Buffer.from(o,o.offset,o.byteLength)),!Buffer.isBuffer(i)||!Buffer.isBuffer(o))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===o)return 0;for(var s=i.length,_=o.length,F=0,N=Math.min(s,_);F<N;++F)if(i[F]!==o[F]){s=i[F],_=o[F];break}return s<_?-1:_<s?1:0},Buffer.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(i,o){if(!Array.isArray(i))throw TypeError('"list" argument must be an Array of Buffers');if(0===i.length)return Buffer.alloc(0);if(void 0===o)for(s=0,o=0;s<i.length;++s)o+=i[s].length;var s,_=Buffer.allocUnsafe(o),F=0;for(s=0;s<i.length;++s){var N=i[s];if(isInstance(N,Uint8Array))F+N.length>_.length?(Buffer.isBuffer(N)||(N=Buffer.from(N)),N.copy(_,F)):Uint8Array.prototype.set.call(_,N,F);else if(Buffer.isBuffer(N))N.copy(_,F);else throw TypeError('"list" argument must be an Array of Buffers');F+=N.length}return _},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var i=this.length;if(i%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<i;o+=2)swap(this,o,o+1);return this},Buffer.prototype.swap32=function(){var i=this.length;if(i%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<i;o+=4)swap(this,o,o+3),swap(this,o+1,o+2);return this},Buffer.prototype.swap64=function(){var i=this.length;if(i%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<i;o+=8)swap(this,o,o+7),swap(this,o+1,o+6),swap(this,o+2,o+5),swap(this,o+3,o+4);return this},Buffer.prototype.toString=function(){var i=this.length;return 0===i?"":0==arguments.length?utf8Slice(this,0,i):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(i){if(!Buffer.isBuffer(i))throw TypeError("Argument must be a Buffer");return this===i||0===Buffer.compare(this,i)},Buffer.prototype.inspect=function(){var i="",s=o.h2;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},N&&(Buffer.prototype[N]=Buffer.prototype.inspect),Buffer.prototype.compare=function(i,o,s,_,F){if(isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),!Buffer.isBuffer(i))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+_typeof(i));if(void 0===o&&(o=0),void 0===s&&(s=i?i.length:0),void 0===_&&(_=0),void 0===F&&(F=this.length),o<0||s>i.length||_<0||F>this.length)throw RangeError("out of range index");if(_>=F&&o>=s)return 0;if(_>=F)return -1;if(o>=s)return 1;if(o>>>=0,s>>>=0,_>>>=0,F>>>=0,this===i)return 0;for(var N=F-_,j=s-o,Z=Math.min(N,j),X=this.slice(_,F),$=i.slice(o,s),ee=0;ee<Z;++ee)if(X[ee]!==$[ee]){N=X[ee],j=$[ee];break}return N<j?-1:j<N?1:0},Buffer.prototype.includes=function(i,o,s){return -1!==this.indexOf(i,o,s)},Buffer.prototype.indexOf=function(i,o,s){return bidirectionalIndexOf(this,i,o,s,!0)},Buffer.prototype.lastIndexOf=function(i,o,s){return bidirectionalIndexOf(this,i,o,s,!1)},Buffer.prototype.write=function(i,o,s,_){if(void 0===o)_="utf8",s=this.length,o=0;else if(void 0===s&&"string"==typeof o)_=o,s=this.length,o=0;else if(isFinite(o))o>>>=0,isFinite(s)?(s>>>=0,void 0===_&&(_="utf8")):(_=s,s=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var F=this.length-o;if((void 0===s||s>F)&&(s=F),i.length>0&&(s<0||o<0)||o>this.length)throw RangeError("Attempt to write outside buffer bounds");_||(_="utf8");for(var N=!1;;)switch(_){case"hex":return hexWrite(this,i,o,s);case"utf8":case"utf-8":return utf8Write(this,i,o,s);case"ascii":case"latin1":case"binary":return asciiWrite(this,i,o,s);case"base64":return base64Write(this,i,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,i,o,s);default:if(N)throw TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),N=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(i,o){var s=this.length;i=~~i,o=void 0===o?s:~~o,i<0?(i+=s)<0&&(i=0):i>s&&(i=s),o<0?(o+=s)<0&&(o=0):o>s&&(o=s),o<i&&(o=i);var _=this.subarray(i,o);return Object.setPrototypeOf(_,Buffer.prototype),_},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var _=this[i],F=1,N=0;++N<o&&(F*=256);)_+=this[i+N]*F;return _},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var _=this[i+--o],F=1;o>0&&(F*=256);)_+=this[i+--o]*F;return _},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(i,o){return i>>>=0,o||checkOffset(i,1,this.length),this[i]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(i,o){return i>>>=0,o||checkOffset(i,2,this.length),this[i]|this[i+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(i,o){return i>>>=0,o||checkOffset(i,2,this.length),this[i]<<8|this[i+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+16777216*this[i+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),16777216*this[i]+(this[i+1]<<16|this[i+2]<<8|this[i+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];(void 0===o||void 0===s)&&boundsError(i,this.length-8);var _=o+256*this[++i]+65536*this[++i]+16777216*this[++i],F=this[++i]+256*this[++i]+65536*this[++i]+16777216*s;return BigInt(_)+(BigInt(F)<<BigInt(32))}),Buffer.prototype.readBigUInt64BE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];(void 0===o||void 0===s)&&boundsError(i,this.length-8);var _=16777216*o+65536*this[++i]+256*this[++i]+this[++i],F=16777216*this[++i]+65536*this[++i]+256*this[++i]+s;return(BigInt(_)<<BigInt(32))+BigInt(F)}),Buffer.prototype.readIntLE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var _=this[i],F=1,N=0;++N<o&&(F*=256);)_+=this[i+N]*F;return _>=(F*=128)&&(_-=Math.pow(2,8*o)),_},Buffer.prototype.readIntBE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var _=o,F=1,N=this[i+--_];_>0&&(F*=256);)N+=this[i+--_]*F;return N>=(F*=128)&&(N-=Math.pow(2,8*o)),N},Buffer.prototype.readInt8=function(i,o){return(i>>>=0,o||checkOffset(i,1,this.length),128&this[i])?-((255-this[i]+1)*1):this[i]},Buffer.prototype.readInt16LE=function(i,o){i>>>=0,o||checkOffset(i,2,this.length);var s=this[i]|this[i+1]<<8;return 32768&s?4294901760|s:s},Buffer.prototype.readInt16BE=function(i,o){i>>>=0,o||checkOffset(i,2,this.length);var s=this[i+1]|this[i]<<8;return 32768&s?4294901760|s:s},Buffer.prototype.readInt32LE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},Buffer.prototype.readInt32BE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];return(void 0===o||void 0===s)&&boundsError(i,this.length-8),(BigInt(this[i+4]+256*this[i+5]+65536*this[i+6]+(s<<24))<<BigInt(32))+BigInt(o+256*this[++i]+65536*this[++i]+16777216*this[++i])}),Buffer.prototype.readBigInt64BE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];return(void 0===o||void 0===s)&&boundsError(i,this.length-8),(BigInt((o<<24)+65536*this[++i]+256*this[++i]+this[++i])<<BigInt(32))+BigInt(16777216*this[++i]+65536*this[++i]+256*this[++i]+s)}),Buffer.prototype.readFloatLE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),F.read(this,i,!0,23,4)},Buffer.prototype.readFloatBE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),F.read(this,i,!1,23,4)},Buffer.prototype.readDoubleLE=function(i,o){return i>>>=0,o||checkOffset(i,8,this.length),F.read(this,i,!0,52,8)},Buffer.prototype.readDoubleBE=function(i,o){return i>>>=0,o||checkOffset(i,8,this.length),F.read(this,i,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(i,o,s,_){if(i=+i,o>>>=0,s>>>=0,!_){var F=Math.pow(2,8*s)-1;checkInt(this,i,o,s,F,0)}var N=1,j=0;for(this[o]=255&i;++j<s&&(N*=256);)this[o+j]=i/N&255;return o+s},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(i,o,s,_){if(i=+i,o>>>=0,s>>>=0,!_){var F=Math.pow(2,8*s)-1;checkInt(this,i,o,s,F,0)}var N=s-1,j=1;for(this[o+N]=255&i;--N>=0&&(j*=256);)this[o+N]=i/j&255;return o+s},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,1,255,0),this[o]=255&i,o+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,65535,0),this[o]=255&i,this[o+1]=i>>>8,o+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,65535,0),this[o]=i>>>8,this[o+1]=255&i,o+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,4294967295,0),this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=255&i,o+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,4294967295,0),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=255&i,o+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64LE(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64BE(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeIntLE=function(i,o,s,_){if(i=+i,o>>>=0,!_){var F=Math.pow(2,8*s-1);checkInt(this,i,o,s,F-1,-F)}var N=0,j=1,Z=0;for(this[o]=255&i;++N<s&&(j*=256);)i<0&&0===Z&&0!==this[o+N-1]&&(Z=1),this[o+N]=(i/j>>0)-Z&255;return o+s},Buffer.prototype.writeIntBE=function(i,o,s,_){if(i=+i,o>>>=0,!_){var F=Math.pow(2,8*s-1);checkInt(this,i,o,s,F-1,-F)}var N=s-1,j=1,Z=0;for(this[o+N]=255&i;--N>=0&&(j*=256);)i<0&&0===Z&&0!==this[o+N+1]&&(Z=1),this[o+N]=(i/j>>0)-Z&255;return o+s},Buffer.prototype.writeInt8=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,1,127,-128),i<0&&(i=255+i+1),this[o]=255&i,o+1},Buffer.prototype.writeInt16LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,32767,-32768),this[o]=255&i,this[o+1]=i>>>8,o+2},Buffer.prototype.writeInt16BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,32767,-32768),this[o]=i>>>8,this[o+1]=255&i,o+2},Buffer.prototype.writeInt32LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,2147483647,-2147483648),this[o]=255&i,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24,o+4},Buffer.prototype.writeInt32BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=255&i,o+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64LE(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeBigInt64BE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64BE(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeFloatLE=function(i,o,s){return writeFloat(this,i,o,!0,s)},Buffer.prototype.writeFloatBE=function(i,o,s){return writeFloat(this,i,o,!1,s)},Buffer.prototype.writeDoubleLE=function(i,o,s){return writeDouble(this,i,o,!0,s)},Buffer.prototype.writeDoubleBE=function(i,o,s){return writeDouble(this,i,o,!1,s)},Buffer.prototype.copy=function(i,o,s,_){if(!Buffer.isBuffer(i))throw TypeError("argument should be a Buffer");if(s||(s=0),_||0===_||(_=this.length),o>=i.length&&(o=i.length),o||(o=0),_>0&&_<s&&(_=s),_===s||0===i.length||0===this.length)return 0;if(o<0)throw RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw RangeError("Index out of range");if(_<0)throw RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),i.length-o<_-s&&(_=i.length-o+s);var F=_-s;return this===i&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(o,s,_):Uint8Array.prototype.set.call(i,this.subarray(s,_),o),F},Buffer.prototype.fill=function(i,o,s,_){if("string"==typeof i){if("string"==typeof o?(_=o,o=0,s=this.length):"string"==typeof s&&(_=s,s=this.length),void 0!==_&&"string"!=typeof _)throw TypeError("encoding must be a string");if("string"==typeof _&&!Buffer.isEncoding(_))throw TypeError("Unknown encoding: "+_);if(1===i.length){var F,N=i.charCodeAt(0);("utf8"===_&&N<128||"latin1"===_)&&(i=N)}}else"number"==typeof i?i&=255:"boolean"==typeof i&&(i=Number(i));if(o<0||this.length<o||this.length<s)throw RangeError("Out of range index");if(s<=o)return this;if(o>>>=0,s=void 0===s?this.length:s>>>0,i||(i=0),"number"==typeof i)for(F=o;F<s;++F)this[F]=i;else{var j=Buffer.isBuffer(i)?i:Buffer.from(i,_),Z=j.length;if(0===Z)throw TypeError('The value "'+i+'" is invalid for argument "value"');for(F=0;F<s-o;++F)this[F+o]=j[F%Z]}return this};var j={};function E(i,o,s){j[i]=function(s){_inherits(NodeError,s);var _=_createSuper(NodeError);function NodeError(){var s;return _classCallCheck(this,NodeError),Object.defineProperty(_assertThisInitialized(s=_.call(this)),"message",{value:o.apply(_assertThisInitialized(s),arguments),writable:!0,configurable:!0}),s.name="".concat(s.name," [").concat(i,"]"),s.stack,delete s.name,s}return _createClass(NodeError,[{key:"code",get:function(){return i},set:function(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(i,"]: ").concat(this.message)}}]),NodeError}(s)}function addNumericalSeparator(i){for(var o="",s=i.length,_="-"===i[0]?1:0;s>=_+4;s-=3)o="_".concat(i.slice(s-3,s)).concat(o);return"".concat(i.slice(0,s)).concat(o)}function checkBounds(i,o,s){validateNumber(o,"offset"),(void 0===i[o]||void 0===i[o+s])&&boundsError(o,i.length-(s+1))}function checkIntBI(i,o,s,_,F,N){if(i>s||i<o){var Z,X="bigint"==typeof o?"n":"";throw Z=N>3?0===o||o===BigInt(0)?">= 0".concat(X," and < 2").concat(X," ** ").concat((N+1)*8).concat(X):">= -(2".concat(X," ** ").concat((N+1)*8-1).concat(X,") and < 2 ** ")+"".concat((N+1)*8-1).concat(X):">= ".concat(o).concat(X," and <= ").concat(s).concat(X),new j.ERR_OUT_OF_RANGE("value",Z,i)}checkBounds(_,F,N)}function validateNumber(i,o){if("number"!=typeof i)throw new j.ERR_INVALID_ARG_TYPE(o,"number",i)}function boundsError(i,o,s){if(Math.floor(i)!==i)throw validateNumber(i,s),new j.ERR_OUT_OF_RANGE(s||"offset","an integer",i);if(o<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(s||"offset",">= ".concat(s?1:0," and <= ").concat(o),i)}E("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?"".concat(i," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(i,o){return'The "'.concat(i,'" argument must be of type number. Received type ').concat(_typeof(o))},TypeError),E("ERR_OUT_OF_RANGE",function(i,o,s){var _='The value of "'.concat(i,'" is out of range.'),F=s;return Number.isInteger(s)&&Math.abs(s)>4294967296?F=addNumericalSeparator(String(s)):"bigint"==typeof s&&(F=String(s),(s>Math.pow(BigInt(2),BigInt(32))||s<-Math.pow(BigInt(2),BigInt(32)))&&(F=addNumericalSeparator(F)),F+="n"),_+=" It must be ".concat(o,". Received ").concat(F)},RangeError);var Z=/[^+/0-9A-Za-z-_]/g;function base64clean(i){if((i=(i=i.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;i.length%4!=0;)i+="=";return i}function utf8ToBytes(i,o){o=o||1/0;for(var s,_=i.length,F=null,N=[],j=0;j<_;++j){if((s=i.charCodeAt(j))>55295&&s<57344){if(!F){if(s>56319||j+1===_){(o-=3)>-1&&N.push(239,191,189);continue}F=s;continue}if(s<56320){(o-=3)>-1&&N.push(239,191,189),F=s;continue}s=(F-55296<<10|s-56320)+65536}else F&&(o-=3)>-1&&N.push(239,191,189);if(F=null,s<128){if((o-=1)<0)break;N.push(s)}else if(s<2048){if((o-=2)<0)break;N.push(s>>6|192,63&s|128)}else if(s<65536){if((o-=3)<0)break;N.push(s>>12|224,s>>6&63|128,63&s|128)}else if(s<1114112){if((o-=4)<0)break;N.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}else throw Error("Invalid code point")}return N}function asciiToBytes(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o}function utf16leToBytes(i,o){for(var s,_,F=[],N=0;N<i.length&&!((o-=2)<0);++N)_=(s=i.charCodeAt(N))>>8,F.push(s%256),F.push(_);return F}function base64ToBytes(i){return _.toByteArray(base64clean(i))}function blitBuffer(i,o,s,_){var F;for(F=0;F<_&&!(F+s>=o.length)&&!(F>=i.length);++F)o[F+s]=i[F];return F}function isInstance(i,o){return i instanceof o||null!=i&&null!=i.constructor&&null!=i.constructor.name&&i.constructor.name===o.name}var X=function(){for(var i="0123456789abcdef",o=Array(256),s=0;s<16;++s)for(var _=16*s,F=0;F<16;++F)o[_+F]=i[s]+i[F];return o}();function defineBigIntMethod(i){return"undefined"==typeof BigInt?BufferBigIntNotDefined:i}function BufferBigIntNotDefined(){throw Error("BigInt not supported")}},2321:function(i){"use strict";i.exports=isMobile,i.exports.isMobile=isMobile,i.exports.default=isMobile;var o=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,s=/CrOS/,_=/android|ipad|playbook|silk/i;function isMobile(i){i||(i={});var F=i.ua;if(F||"undefined"==typeof navigator||(F=navigator.userAgent),F&&F.headers&&"string"==typeof F.headers["user-agent"]&&(F=F.headers["user-agent"]),"string"!=typeof F)return!1;var N=o.test(F)&&!s.test(F)||!!i.tablet&&_.test(F);return!N&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==F.indexOf("Macintosh")&&-1!==F.indexOf("Safari")&&(N=!0),N}},3910:function(i,o){"use strict";o.byteLength=byteLength,o.toByteArray=toByteArray,o.fromByteArray=fromByteArray;for(var s=[],_=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0,Z=N.length;j<Z;++j)s[j]=N[j],_[N.charCodeAt(j)]=j;function getLens(i){var o=i.length;if(o%4>0)throw Error("Invalid string. Length must be a multiple of 4");var s=i.indexOf("=");-1===s&&(s=o);var _=s===o?0:4-s%4;return[s,_]}function byteLength(i){var o=getLens(i),s=o[0],_=o[1];return(s+_)*3/4-_}function _byteLength(i,o,s){return(o+s)*3/4-s}function toByteArray(i){var o,s,N=getLens(i),j=N[0],Z=N[1],X=new F(_byteLength(i,j,Z)),$=0,ee=Z>0?j-4:j;for(s=0;s<ee;s+=4)o=_[i.charCodeAt(s)]<<18|_[i.charCodeAt(s+1)]<<12|_[i.charCodeAt(s+2)]<<6|_[i.charCodeAt(s+3)],X[$++]=o>>16&255,X[$++]=o>>8&255,X[$++]=255&o;return 2===Z&&(o=_[i.charCodeAt(s)]<<2|_[i.charCodeAt(s+1)]>>4,X[$++]=255&o),1===Z&&(o=_[i.charCodeAt(s)]<<10|_[i.charCodeAt(s+1)]<<4|_[i.charCodeAt(s+2)]>>2,X[$++]=o>>8&255,X[$++]=255&o),X}function tripletToBase64(i){return s[i>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]}function encodeChunk(i,o,s){for(var _=[],F=o;F<s;F+=3)_.push(tripletToBase64((i[F]<<16&16711680)+(i[F+1]<<8&65280)+(255&i[F+2])));return _.join("")}function fromByteArray(i){for(var o,_=i.length,F=_%3,N=[],j=0,Z=_-F;j<Z;j+=16383)N.push(encodeChunk(i,j,j+16383>Z?Z:j+16383));return 1===F?N.push(s[(o=i[_-1])>>2]+s[o<<4&63]+"=="):2===F&&N.push(s[(o=(i[_-2]<<8)+i[_-1])>>10]+s[o>>4&63]+s[o<<2&63]+"="),N.join("")}_["-".charCodeAt(0)]=62,_["_".charCodeAt(0)]=63},3187:function(i,o){o.read=function(i,o,s,_,F){var N,j,Z=8*F-_-1,X=(1<<Z)-1,$=X>>1,ee=-7,et=s?F-1:0,er=s?-1:1,en=i[o+et];for(et+=er,N=en&(1<<-ee)-1,en>>=-ee,ee+=Z;ee>0;N=256*N+i[o+et],et+=er,ee-=8);for(j=N&(1<<-ee)-1,N>>=-ee,ee+=_;ee>0;j=256*j+i[o+et],et+=er,ee-=8);if(0===N)N=1-$;else{if(N===X)return j?NaN:(en?-1:1)*(1/0);j+=Math.pow(2,_),N-=$}return(en?-1:1)*j*Math.pow(2,N-_)},o.write=function(i,o,s,_,F,N){var j,Z,X,$=8*N-F-1,ee=(1<<$)-1,et=ee>>1,er=23===F?5960464477539062e-23:0,en=_?0:N-1,ei=_?1:-1,eo=o<0||0===o&&1/o<0?1:0;for(isNaN(o=Math.abs(o))||o===1/0?(Z=isNaN(o)?1:0,j=ee):(j=Math.floor(Math.log(o)/Math.LN2),o*(X=Math.pow(2,-j))<1&&(j--,X*=2),j+et>=1?o+=er/X:o+=er*Math.pow(2,1-et),o*X>=2&&(j++,X/=2),j+et>=ee?(Z=0,j=ee):j+et>=1?(Z=(o*X-1)*Math.pow(2,F),j+=et):(Z=o*Math.pow(2,et-1)*Math.pow(2,F),j=0));F>=8;i[s+en]=255&Z,en+=ei,Z/=256,F-=8);for(j=j<<F|Z,$+=F;$>0;i[s+en]=255&j,en+=ei,j/=256,$-=8);i[s+en-ei]|=128*eo}},1152:function(i,o,s){"use strict";i.exports=createViewController;var _=s(3440),F=s(7774),N=s(9298);function ViewController(i,o){this._controllerNames=Object.keys(i),this._controllerList=this._controllerNames.map(function(o){return i[o]}),this._mode=o,this._active=i[o],this._active||(this._mode="turntable",this._active=i.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var j=ViewController.prototype;function createViewController(i){var o=(i=i||{}).eye||[0,0,1],s=i.center||[0,0,0],j=i.up||[0,1,0],Z=i.distanceLimits||[0,1/0],X=i.mode||"turntable",$=_(),ee=F(),et=N();return $.setDistanceLimits(Z[0],Z[1]),$.lookAt(0,o,s,j),ee.setDistanceLimits(Z[0],Z[1]),ee.lookAt(0,o,s,j),et.setDistanceLimits(Z[0],Z[1]),et.lookAt(0,o,s,j),new ViewController({turntable:$,orbit:ee,matrix:et},X)}j.flush=function(i){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].flush(i)},j.idle=function(i){for(var o=this._controllerList,s=0;s<o.length;++s)o[s].idle(i)},j.lookAt=function(i,o,s,_){for(var F=this._controllerList,N=0;N<F.length;++N)F[N].lookAt(i,o,s,_)},j.rotate=function(i,o,s,_){for(var F=this._controllerList,N=0;N<F.length;++N)F[N].rotate(i,o,s,_)},j.pan=function(i,o,s,_){for(var F=this._controllerList,N=0;N<F.length;++N)F[N].pan(i,o,s,_)},j.translate=function(i,o,s,_){for(var F=this._controllerList,N=0;N<F.length;++N)F[N].translate(i,o,s,_)},j.setMatrix=function(i,o){for(var s=this._controllerList,_=0;_<s.length;++_)s[_].setMatrix(i,o)},j.setDistanceLimits=function(i,o){for(var s=this._controllerList,_=0;_<s.length;++_)s[_].setDistanceLimits(i,o)},j.setDistance=function(i,o){for(var s=this._controllerList,_=0;_<s.length;++_)s[_].setDistance(i,o)},j.recalcMatrix=function(i){this._active.recalcMatrix(i)},j.getDistance=function(i){return this._active.getDistance(i)},j.getDistanceLimits=function(i){return this._active.getDistanceLimits(i)},j.lastT=function(){return this._active.lastT()},j.setMode=function(i){if(i!==this._mode){var o=this._controllerNames.indexOf(i);if(!(o<0)){var s=this._active,_=this._controllerList[o],F=Math.max(s.lastT(),_.lastT());s.recalcMatrix(F),_.setMatrix(F,s.computedMatrix),this._active=_,this._mode=i,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},j.getMode=function(){return this._mode}},8126:function(i,o,s){"use strict";var _="undefined"==typeof WeakMap?s(5346):WeakMap,F=s(5827),N=s(2944),j=new _;function createABigTriangle(i){var o=j.get(i),s=o&&(o._triangleBuffer.handle||o._triangleBuffer.buffer);if(!s||!i.isBuffer(s)){var _=F(i,new Float32Array([-1,-1,-1,4,4,-1]));(o=N(i,[{buffer:_,type:i.FLOAT,size:2}]))._triangleBuffer=_,j.set(i,o)}o.bind(),i.drawArrays(i.TRIANGLES,0,3),o.unbind()}i.exports=createABigTriangle},8008:function(i,o,s){var _=s(4930);function addLineNumbers(i,o,s){o="number"==typeof o?o:1,s=s||": ";var F=i.split(/\r?\n/),N=String(F.length+o-1).length;return F.map(function(i,F){var j=F+o,Z=String(j).length;return _(j,N-Z)+s+i}).join("\n")}i.exports=addLineNumbers},2153:function(i,o,s){"use strict";i.exports=affineHull;var _=s(417);function linearlyIndependent(i,o){for(var s=Array(o+1),F=0;F<i.length;++F)s[F]=i[F];for(var F=0;F<=i.length;++F){for(var N=i.length;N<=o;++N){for(var j=Array(o),Z=0;Z<o;++Z)j[Z]=Math.pow(N+1-F,Z);s[N]=j}if(_.apply(void 0,s))return!0}return!1}function affineHull(i){var o=i.length;if(0===o)return[];if(1===o)return[0];for(var s=i[0].length,_=[i[0]],F=[0],N=1;N<o;++N){if(_.push(i[N]),!linearlyIndependent(_,s)){_.pop();continue}if(F.push(N),F.length===s+1)break}return F}},4653:function(i,o,s){"use strict";i.exports=alphaComplex;var _=s(4419),F=s(1778);function alphaComplex(i,o){return _(o).filter(function(s){for(var _=Array(s.length),N=0;N<s.length;++N)_[N]=o[s[N]];return F(_)*i<1})}},2350:function(i,o,s){i.exports=alphaShape;var _=s(4653),F=s(8691);function alphaShape(i,o){return F(_(i,o))}},7896:function(i){i.exports=function(i){return atob(i)}},957:function(i,o,s){"use strict";i.exports=barycentric;var _=s(6606);function reduce(i){for(var o=0,s=0;s<i.length;++s)o+=i[s];return o}function barycentric(i,o){for(var s=o.length,F=Array(s+1),N=0;N<s;++N){for(var j=Array(s+1),Z=0;Z<=s;++Z)j[Z]=i[Z][N];F[N]=j}F[s]=Array(s+1);for(var N=0;N<=s;++N)F[s][N]=1;for(var X=Array(s+1),N=0;N<s;++N)X[N]=o[N];X[s]=1;var $=_(F,X),ee=reduce($[s+1]);0===ee&&(ee=1);for(var et=Array(s+1),N=0;N<=s;++N)et[N]=reduce($[N])/ee;return et}},1539:function(i,o,s){"use strict";var _=s(8524);function add(i,o){return _(i[0].mul(o[1]).add(o[0].mul(i[1])),i[1].mul(o[1]))}i.exports=add},8846:function(i){"use strict";function cmp(i,o){return i[0].mul(o[1]).cmp(o[0].mul(i[1]))}i.exports=cmp},9189:function(i,o,s){"use strict";var _=s(8524);function div(i,o){return _(i[0].mul(o[1]),i[1].mul(o[0]))}i.exports=div},5125:function(i,o,s){"use strict";var _=s(234),F=s(3218),N=s(5514),j=s(2813),Z=s(8524),X=s(9189);function makeRational(i,o){if(_(i))return o?X(i,makeRational(o)):[i[0].clone(),i[1].clone()];var s,$,ee=0;if(F(i))s=i.clone();else if("string"==typeof i)s=j(i);else if(0===i)return[N(0),N(1)];else if(i===Math.floor(i))s=N(i);else{for(;i!==Math.floor(i);)i*=1157920892373162e62,ee-=256;s=N(i)}if(_(o))s.mul(o[1]),$=o[0].clone();else if(F(o))$=o.clone();else if("string"==typeof o)$=j(o);else if(o){if(o===Math.floor(o))$=N(o);else{for(;o!==Math.floor(o);)o*=1157920892373162e62,ee+=256;$=N(o)}}else $=N(1);return ee>0?s=s.ushln(ee):ee<0&&($=$.ushln(-ee)),Z(s,$)}i.exports=makeRational},234:function(i,o,s){"use strict";var _=s(3218);function isRat(i){return Array.isArray(i)&&2===i.length&&_(i[0])&&_(i[1])}i.exports=isRat},4275:function(i,o,s){"use strict";var _=s(1928);function sign(i){return i.cmp(new _(0))}i.exports=sign},9958:function(i,o,s){"use strict";var _=s(4275);function bn2num(i){var o=i.length,s=i.words,F=0;if(1===o)F=s[0];else if(2===o)F=s[0]+67108864*s[1];else for(var N=0;N<o;N++)F+=s[N]*Math.pow(67108864,N);return _(i)*F}i.exports=bn2num},1112:function(i,o,s){"use strict";var _=s(8362),F=s(2288).countTrailingZeros;function ctzNumber(i){var o=F(_.lo(i));if(o<32)return o;var s=F(_.hi(i));return s>20?52:s+32}i.exports=ctzNumber},3218:function(i,o,s){"use strict";function isBN(i){return i&&"object"==typeof i&&!!i.words}s(1928),i.exports=isBN},5514:function(i,o,s){"use strict";var _=s(1928),F=s(8362);function num2bn(i){var o=F.exponent(i);return o<52?new _(i):new _(i*Math.pow(2,52-o)).ushln(o-52)}i.exports=num2bn},8524:function(i,o,s){"use strict";var _=s(5514),F=s(4275);function rationalize(i,o){var s=F(i),N=F(o);if(0===s)return[_(0),_(1)];if(0===N)return[_(0),_(0)];N<0&&(i=i.neg(),o=o.neg());var j=i.gcd(o);return j.cmpn(1)?[i.div(j),o.div(j)]:[i,o]}i.exports=rationalize},2813:function(i,o,s){"use strict";var _=s(1928);function str2BN(i){return new _(i)}i.exports=str2BN},3962:function(i,o,s){"use strict";var _=s(8524);function mul(i,o){return _(i[0].mul(o[0]),i[1].mul(o[1]))}i.exports=mul},4951:function(i,o,s){"use strict";var _=s(4275);function sign(i){return _(i[0])*_(i[1])}i.exports=sign},4354:function(i,o,s){"use strict";var _=s(8524);function sub(i,o){return _(i[0].mul(o[1]).sub(i[1].mul(o[0])),i[1].mul(o[1]))}i.exports=sub},7999:function(i,o,s){"use strict";var _=s(9958),F=s(1112);function roundRat(i){var o=i[0],s=i[1];if(0===o.cmpn(0))return 0;var N=o.abs().divmod(s.abs()),j=_(N.div),Z=N.mod,X=o.negative!==s.negative?-1:1;if(0===Z.cmpn(0))return X*j;if(j){var $=F(j)+4,ee=_(Z.ushln($).divRound(s));return X*(j+ee*Math.pow(2,-$))}var et=s.bitLength()-Z.bitLength()+53,ee=_(Z.ushln(et).divRound(s));return et<1023?X*ee*Math.pow(2,-et):X*(ee*=11125369292536007e-324)*Math.pow(2,1023-et)}i.exports=roundRat},5070:function(i){"use strict";function ge(i,o,s,_,F){for(var N=F+1;_<=F;){var j=_+F>>>1,Z=i[j];(void 0!==s?s(Z,o):Z-o)>=0?(N=j,F=j-1):_=j+1}return N}function gt(i,o,s,_,F){for(var N=F+1;_<=F;){var j=_+F>>>1,Z=i[j];(void 0!==s?s(Z,o):Z-o)>0?(N=j,F=j-1):_=j+1}return N}function lt(i,o,s,_,F){for(var N=_-1;_<=F;){var j=_+F>>>1,Z=i[j];(void 0!==s?s(Z,o):Z-o)<0?(N=j,_=j+1):F=j-1}return N}function le(i,o,s,_,F){for(var N=_-1;_<=F;){var j=_+F>>>1,Z=i[j];(void 0!==s?s(Z,o):Z-o)<=0?(N=j,_=j+1):F=j-1}return N}function eq(i,o,s,_,F){for(;_<=F;){var N=_+F>>>1,j=i[N],Z=void 0!==s?s(j,o):j-o;if(0===Z)return N;Z<=0?_=N+1:F=N-1}return -1}function norm(i,o,s,_,F,N){return"function"==typeof s?N(i,o,s,void 0===_?0:0|_,void 0===F?i.length-1:0|F):N(i,o,void 0,void 0===s?0:0|s,void 0===_?i.length-1:0|_)}i.exports={ge:function(i,o,s,_,F){return norm(i,o,s,_,F,ge)},gt:function(i,o,s,_,F){return norm(i,o,s,_,F,gt)},lt:function(i,o,s,_,F){return norm(i,o,s,_,F,lt)},le:function(i,o,s,_,F){return norm(i,o,s,_,F,le)},eq:function(i,o,s,_,F){return norm(i,o,s,_,F,eq)}}},2288:function(i,o){"use strict";function countTrailingZeros(i){var o=32;return(i&=-i)&&o--,65535&i&&(o-=16),16711935&i&&(o-=8),252645135&i&&(o-=4),858993459&i&&(o-=2),1431655765&i&&(o-=1),o}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(i){return(i>0)-(i<0)},o.abs=function(i){var o=i>>31;return(i^o)-o},o.min=function(i,o){return o^(i^o)&-(i<o)},o.max=function(i,o){return i^(i^o)&-(i<o)},o.isPow2=function(i){return!(i&i-1)&&!!i},o.log2=function(i){var o,s;return o=(i>65535)<<4,i>>>=o,s=(i>255)<<3,i>>>=s,o|=s,s=(i>15)<<2,i>>>=s,o|=s,s=(i>3)<<1,i>>>=s,(o|=s)|i>>1},o.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},o.popCount=function(i){return i-=i>>>1&1431655765,((i=(858993459&i)+(i>>>2&858993459))+(i>>>4)&252645135)*16843009>>>24},o.countTrailingZeros=countTrailingZeros,o.nextPow2=function(i){return i+=0===i,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)+1},o.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)-(i>>>1)},o.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,27030>>>(i&=15)&1};var s=Array(256);(function(i){for(var o=0;o<256;++o){var s=o,_=o,F=7;for(s>>>=1;s;s>>>=1)_<<=1,_|=1&s,--F;i[o]=_<<F&255}})(s),o.reverse=function(i){return s[255&i]<<24|s[i>>>8&255]<<16|s[i>>>16&255]<<8|s[i>>>24&255]},o.interleave2=function(i,o){return i&=65535,o&=65535,(i=((i=((i=((i=(i|i<<8)&16711935)|i<<4)&252645135)|i<<2)&858993459)|i<<1)&1431655765)|(o=((o=((o=((o=(o|o<<8)&16711935)|o<<4)&252645135)|o<<2)&858993459)|o<<1)&1431655765)<<1},o.deinterleave2=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1431655765)|i>>>1)&858993459)|i>>>2)&252645135)|i>>>4)&16711935)|i>>>16)&65535)<<16>>16},o.interleave3=function(i,o,s){return i&=1023,o&=1023,s&=1023,s=((s=((s=((s=(s|s<<16)&4278190335)|s<<8)&251719695)|s<<4)&3272356035)|s<<2)&1227133513,(i=((i=((i=((i=(i|i<<16)&4278190335)|i<<8)&251719695)|i<<4)&3272356035)|i<<2)&1227133513|(o=((o=((o=((o=(o|o<<16)&4278190335)|o<<8)&251719695)|o<<4)&3272356035)|o<<2)&1227133513)<<1)|s<<2},o.deinterleave3=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1227133513)|i>>>2)&3272356035)|i>>>4)&251719695)|i>>>8)&4278190335)|i>>>16)&1023)<<22>>22},o.nextCombination=function(i){var o=i|i-1;return o+1|(~o&-~o)-1>>>countTrailingZeros(i)+1}},1928:function(i,o,s){!function(i,o){"use strict";function assert(i,o){if(!i)throw Error(o||"Assertion failed")}function inherits(i,o){i.super_=o;var TempCtor=function(){};TempCtor.prototype=o.prototype,i.prototype=new TempCtor,i.prototype.constructor=i}function BN(i,o,s){if(BN.isBN(i))return i;this.negative=0,this.words=null,this.length=0,this.red=null,null!==i&&(("le"===o||"be"===o)&&(s=o,o=10),this._init(i||0,o||10,s||"be"))}"object"==typeof i?i.exports=BN:o.BN=BN,BN.BN=BN,BN.wordSize=26;try{_="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:s(6601).Buffer}catch(i){}function parseHex4Bits(i,o){var s=i.charCodeAt(o);return s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:s-48&15}function parseHexByte(i,o,s){var _=parseHex4Bits(i,s);return s-1>=o&&(_|=parseHex4Bits(i,s-1)<<4),_}function parseBase(i,o,s,_){for(var F=0,N=Math.min(i.length,s),j=o;j<N;j++){var Z=i.charCodeAt(j)-48;F*=_,Z>=49?F+=Z-49+10:Z>=17?F+=Z-17+10:F+=Z}return F}BN.isBN=function(i){return i instanceof BN||null!==i&&"object"==typeof i&&i.constructor.wordSize===BN.wordSize&&Array.isArray(i.words)},BN.max=function(i,o){return i.cmp(o)>0?i:o},BN.min=function(i,o){return 0>i.cmp(o)?i:o},BN.prototype._init=function(i,o,s){if("number"==typeof i)return this._initNumber(i,o,s);if("object"==typeof i)return this._initArray(i,o,s);"hex"===o&&(o=16),assert(o===(0|o)&&o>=2&&o<=36);var _=0;"-"===(i=i.toString().replace(/\s+/g,""))[0]&&(_++,this.negative=1),_<i.length&&(16===o?this._parseHex(i,_,s):(this._parseBase(i,o,_),"le"===s&&this._initArray(this.toArray(),o,s)))},BN.prototype._initNumber=function(i,o,s){i<0&&(this.negative=1,i=-i),i<67108864?(this.words=[67108863&i],this.length=1):i<4503599627370496?(this.words=[67108863&i,i/67108864&67108863],this.length=2):(assert(i<9007199254740992),this.words=[67108863&i,i/67108864&67108863,1],this.length=3),"le"===s&&this._initArray(this.toArray(),o,s)},BN.prototype._initArray=function(i,o,s){if(assert("number"==typeof i.length),i.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(i.length/3),this.words=Array(this.length);for(var _,F,N=0;N<this.length;N++)this.words[N]=0;var j=0;if("be"===s)for(N=i.length-1,_=0;N>=0;N-=3)F=i[N]|i[N-1]<<8|i[N-2]<<16,this.words[_]|=F<<j&67108863,this.words[_+1]=F>>>26-j&67108863,(j+=24)>=26&&(j-=26,_++);else if("le"===s)for(N=0,_=0;N<i.length;N+=3)F=i[N]|i[N+1]<<8|i[N+2]<<16,this.words[_]|=F<<j&67108863,this.words[_+1]=F>>>26-j&67108863,(j+=24)>=26&&(j-=26,_++);return this.strip()},BN.prototype._parseHex=function(i,o,s){this.length=Math.ceil((i.length-o)/6),this.words=Array(this.length);for(var _,F=0;F<this.length;F++)this.words[F]=0;var N=0,j=0;if("be"===s)for(F=i.length-1;F>=o;F-=2)_=parseHexByte(i,o,F)<<N,this.words[j]|=67108863&_,N>=18?(N-=18,j+=1,this.words[j]|=_>>>26):N+=8;else for(F=(i.length-o)%2==0?o+1:o;F<i.length;F+=2)_=parseHexByte(i,o,F)<<N,this.words[j]|=67108863&_,N>=18?(N-=18,j+=1,this.words[j]|=_>>>26):N+=8;this.strip()},BN.prototype._parseBase=function(i,o,s){this.words=[0],this.length=1;for(var _=0,F=1;F<=67108863;F*=o)_++;_--,F=F/o|0;for(var N=i.length-s,j=N%_,Z=Math.min(N,N-j)+s,X=0,$=s;$<Z;$+=_)X=parseBase(i,$,$+_,o),this.imuln(F),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(0!==j){var ee=1;for(X=parseBase(i,$,i.length,o),$=0;$<j;$++)ee*=o;this.imuln(ee),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},BN.prototype.copy=function(i){i.words=Array(this.length);for(var o=0;o<this.length;o++)i.words[o]=this.words[o];i.length=this.length,i.negative=this.negative,i.red=this.red},BN.prototype.clone=function(){var i=new BN(null);return this.copy(i),i},BN.prototype._expand=function(i){for(;this.length<i;)this.words[this.length++]=0;return this},BN.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var _,F=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],N=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],j=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function toBitArray(i){for(var o=Array(i.bitLength()),s=0;s<o.length;s++){var _=s/26|0,F=s%26;o[s]=(i.words[_]&1<<F)>>>F}return o}function smallMulTo(i,o,s){s.negative=o.negative^i.negative;var _=i.length+o.length|0;s.length=_,_=_-1|0;var F=0|i.words[0],N=0|o.words[0],j=F*N,Z=67108863&j,X=j/67108864|0;s.words[0]=Z;for(var $=1;$<_;$++){for(var ee=X>>>26,et=67108863&X,er=Math.min($,o.length-1),en=Math.max(0,$-i.length+1);en<=er;en++){var ei=$-en|0;ee+=(j=(F=0|i.words[ei])*(N=0|o.words[en])+et)/67108864|0,et=67108863&j}s.words[$]=0|et,X=0|ee}return 0!==X?s.words[$]=0|X:s.length--,s.strip()}BN.prototype.toString=function(i,o){if(o=0|o||1,16===(i=i||10)||"hex"===i){s="";for(var s,_=0,Z=0,X=0;X<this.length;X++){var $=this.words[X],ee=(($<<_|Z)&16777215).toString(16);s=0!=(Z=$>>>24-_&16777215)||X!==this.length-1?F[6-ee.length]+ee+s:ee+s,(_+=2)>=26&&(_-=26,X--)}for(0!==Z&&(s=Z.toString(16)+s);s.length%o!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}if(i===(0|i)&&i>=2&&i<=36){var et=N[i],er=j[i];s="";var en=this.clone();for(en.negative=0;!en.isZero();){var ei=en.modn(er).toString(i);s=(en=en.idivn(er)).isZero()?ei+s:F[et-ei.length]+ei+s}for(this.isZero()&&(s="0"+s);s.length%o!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function(){var i=this.words[0];return 2===this.length?i+=67108864*this.words[1]:3===this.length&&1===this.words[2]?i+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-i:i},BN.prototype.toJSON=function(){return this.toString(16)},BN.prototype.toBuffer=function(i,o){return assert(void 0!==_),this.toArrayLike(_,i,o)},BN.prototype.toArray=function(i,o){return this.toArrayLike(Array,i,o)},BN.prototype.toArrayLike=function(i,o,s){var _,F,N=this.byteLength(),j=s||Math.max(1,N);assert(N<=j,"byte array longer than desired length"),assert(j>0,"Requested array length <= 0"),this.strip();var Z=new i(j),X=this.clone();if("le"===o){for(F=0;!X.isZero();F++)_=X.andln(255),X.iushrn(8),Z[F]=_;for(;F<j;F++)Z[F]=0}else{for(F=0;F<j-N;F++)Z[F]=0;for(F=0;!X.isZero();F++)_=X.andln(255),X.iushrn(8),Z[j-F-1]=_}return Z},Math.clz32?BN.prototype._countBits=function(i){return 32-Math.clz32(i)}:BN.prototype._countBits=function(i){var o=i,s=0;return o>=4096&&(s+=13,o>>>=13),o>=64&&(s+=7,o>>>=7),o>=8&&(s+=4,o>>>=4),o>=2&&(s+=2,o>>>=2),s+o},BN.prototype._zeroBits=function(i){if(0===i)return 26;var o=i,s=0;return(8191&o)==0&&(s+=13,o>>>=13),(127&o)==0&&(s+=7,o>>>=7),(15&o)==0&&(s+=4,o>>>=4),(3&o)==0&&(s+=2,o>>>=2),(1&o)==0&&s++,s},BN.prototype.bitLength=function(){var i=this.words[this.length-1],o=this._countBits(i);return(this.length-1)*26+o},BN.prototype.zeroBits=function(){if(this.isZero())return 0;for(var i=0,o=0;o<this.length;o++){var s=this._zeroBits(this.words[o]);if(i+=s,26!==s)break}return i},BN.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function(i){return 0!==this.negative?this.abs().inotn(i).iaddn(1):this.clone()},BN.prototype.fromTwos=function(i){return this.testn(i-1)?this.notn(i).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function(){return 0!==this.negative},BN.prototype.neg=function(){return this.clone().ineg()},BN.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function(i){for(;this.length<i.length;)this.words[this.length++]=0;for(var o=0;o<i.length;o++)this.words[o]=this.words[o]|i.words[o];return this.strip()},BN.prototype.ior=function(i){return assert((this.negative|i.negative)==0),this.iuor(i)},BN.prototype.or=function(i){return this.length>i.length?this.clone().ior(i):i.clone().ior(this)},BN.prototype.uor=function(i){return this.length>i.length?this.clone().iuor(i):i.clone().iuor(this)},BN.prototype.iuand=function(i){var o;o=this.length>i.length?i:this;for(var s=0;s<o.length;s++)this.words[s]=this.words[s]&i.words[s];return this.length=o.length,this.strip()},BN.prototype.iand=function(i){return assert((this.negative|i.negative)==0),this.iuand(i)},BN.prototype.and=function(i){return this.length>i.length?this.clone().iand(i):i.clone().iand(this)},BN.prototype.uand=function(i){return this.length>i.length?this.clone().iuand(i):i.clone().iuand(this)},BN.prototype.iuxor=function(i){this.length>i.length?(o=this,s=i):(o=i,s=this);for(var o,s,_=0;_<s.length;_++)this.words[_]=o.words[_]^s.words[_];if(this!==o)for(;_<o.length;_++)this.words[_]=o.words[_];return this.length=o.length,this.strip()},BN.prototype.ixor=function(i){return assert((this.negative|i.negative)==0),this.iuxor(i)},BN.prototype.xor=function(i){return this.length>i.length?this.clone().ixor(i):i.clone().ixor(this)},BN.prototype.uxor=function(i){return this.length>i.length?this.clone().iuxor(i):i.clone().iuxor(this)},BN.prototype.inotn=function(i){assert("number"==typeof i&&i>=0);var o=0|Math.ceil(i/26),s=i%26;this._expand(o),s>0&&o--;for(var _=0;_<o;_++)this.words[_]=67108863&~this.words[_];return s>0&&(this.words[_]=~this.words[_]&67108863>>26-s),this.strip()},BN.prototype.notn=function(i){return this.clone().inotn(i)},BN.prototype.setn=function(i,o){assert("number"==typeof i&&i>=0);var s=i/26|0,_=i%26;return this._expand(s+1),o?this.words[s]=this.words[s]|1<<_:this.words[s]=this.words[s]&~(1<<_),this.strip()},BN.prototype.iadd=function(i){if(0!==this.negative&&0===i.negative)return this.negative=0,o=this.isub(i),this.negative^=1,this._normSign();if(0===this.negative&&0!==i.negative)return i.negative=0,o=this.isub(i),i.negative=1,o._normSign();this.length>i.length?(s=this,_=i):(s=i,_=this);for(var o,s,_,F=0,N=0;N<_.length;N++)o=(0|s.words[N])+(0|_.words[N])+F,this.words[N]=67108863&o,F=o>>>26;for(;0!==F&&N<s.length;N++)o=(0|s.words[N])+F,this.words[N]=67108863&o,F=o>>>26;if(this.length=s.length,0!==F)this.words[this.length]=F,this.length++;else if(s!==this)for(;N<s.length;N++)this.words[N]=s.words[N];return this},BN.prototype.add=function(i){var o;return 0!==i.negative&&0===this.negative?(i.negative=0,o=this.sub(i),i.negative^=1,o):0===i.negative&&0!==this.negative?(this.negative=0,o=i.sub(this),this.negative=1,o):this.length>i.length?this.clone().iadd(i):i.clone().iadd(this)},BN.prototype.isub=function(i){if(0!==i.negative){i.negative=0;var o,s,_=this.iadd(i);return i.negative=1,_._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(i),this.negative=1,this._normSign();var F=this.cmp(i);if(0===F)return this.negative=0,this.length=1,this.words[0]=0,this;F>0?(o=this,s=i):(o=i,s=this);for(var N=0,j=0;j<s.length;j++)N=(_=(0|o.words[j])-(0|s.words[j])+N)>>26,this.words[j]=67108863&_;for(;0!==N&&j<o.length;j++)N=(_=(0|o.words[j])+N)>>26,this.words[j]=67108863&_;if(0===N&&j<o.length&&o!==this)for(;j<o.length;j++)this.words[j]=o.words[j];return this.length=Math.max(this.length,j),o!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function(i){return this.clone().isub(i)};var comb10MulTo=function(i,o,s){var _,F,N,j=i.words,Z=o.words,X=s.words,$=0,ee=0|j[0],et=8191&ee,er=ee>>>13,en=0|j[1],ei=8191&en,eo=en>>>13,es=0|j[2],el=8191&es,ec=es>>>13,eu=0|j[3],ef=8191&eu,ed=eu>>>13,eh=0|j[4],ep=8191&eh,eg=eh>>>13,em=0|j[5],ey=8191&em,ev=em>>>13,ex=0|j[6],e_=8191&ex,ew=ex>>>13,eT=0|j[7],ek=8191&eT,eA=eT>>>13,eS=0|j[8],eM=8191&eS,eC=eS>>>13,eE=0|j[9],eL=8191&eE,eP=eE>>>13,eI=0|Z[0],eO=8191&eI,eD=eI>>>13,eR=0|Z[1],eB=8191&eR,eF=eR>>>13,ez=0|Z[2],eN=8191&ez,ej=ez>>>13,eV=0|Z[3],eU=8191&eV,eH=eV>>>13,eG=0|Z[4],eW=8191&eG,eZ=eG>>>13,eY=0|Z[5],eX=8191&eY,eK=eY>>>13,eJ=0|Z[6],e$=8191&eJ,eQ=eJ>>>13,e0=0|Z[7],e1=8191&e0,e2=e0>>>13,e3=0|Z[8],e5=8191&e3,e4=e3>>>13,e6=0|Z[9],e8=8191&e6,e7=e6>>>13;s.negative=i.negative^o.negative,s.length=19;var e9=($+(_=Math.imul(et,eO))|0)+((8191&(F=(F=Math.imul(et,eD))+Math.imul(er,eO)|0))<<13)|0;$=((N=Math.imul(er,eD))+(F>>>13)|0)+(e9>>>26)|0,e9&=67108863,_=Math.imul(ei,eO),F=(F=Math.imul(ei,eD))+Math.imul(eo,eO)|0,N=Math.imul(eo,eD);var te=($+(_=_+Math.imul(et,eB)|0)|0)+((8191&(F=(F=F+Math.imul(et,eF)|0)+Math.imul(er,eB)|0))<<13)|0;$=((N=N+Math.imul(er,eF)|0)+(F>>>13)|0)+(te>>>26)|0,te&=67108863,_=Math.imul(el,eO),F=(F=Math.imul(el,eD))+Math.imul(ec,eO)|0,N=Math.imul(ec,eD),_=_+Math.imul(ei,eB)|0,F=(F=F+Math.imul(ei,eF)|0)+Math.imul(eo,eB)|0,N=N+Math.imul(eo,eF)|0;var tt=($+(_=_+Math.imul(et,eN)|0)|0)+((8191&(F=(F=F+Math.imul(et,ej)|0)+Math.imul(er,eN)|0))<<13)|0;$=((N=N+Math.imul(er,ej)|0)+(F>>>13)|0)+(tt>>>26)|0,tt&=67108863,_=Math.imul(ef,eO),F=(F=Math.imul(ef,eD))+Math.imul(ed,eO)|0,N=Math.imul(ed,eD),_=_+Math.imul(el,eB)|0,F=(F=F+Math.imul(el,eF)|0)+Math.imul(ec,eB)|0,N=N+Math.imul(ec,eF)|0,_=_+Math.imul(ei,eN)|0,F=(F=F+Math.imul(ei,ej)|0)+Math.imul(eo,eN)|0,N=N+Math.imul(eo,ej)|0;var tr=($+(_=_+Math.imul(et,eU)|0)|0)+((8191&(F=(F=F+Math.imul(et,eH)|0)+Math.imul(er,eU)|0))<<13)|0;$=((N=N+Math.imul(er,eH)|0)+(F>>>13)|0)+(tr>>>26)|0,tr&=67108863,_=Math.imul(ep,eO),F=(F=Math.imul(ep,eD))+Math.imul(eg,eO)|0,N=Math.imul(eg,eD),_=_+Math.imul(ef,eB)|0,F=(F=F+Math.imul(ef,eF)|0)+Math.imul(ed,eB)|0,N=N+Math.imul(ed,eF)|0,_=_+Math.imul(el,eN)|0,F=(F=F+Math.imul(el,ej)|0)+Math.imul(ec,eN)|0,N=N+Math.imul(ec,ej)|0,_=_+Math.imul(ei,eU)|0,F=(F=F+Math.imul(ei,eH)|0)+Math.imul(eo,eU)|0,N=N+Math.imul(eo,eH)|0;var tn=($+(_=_+Math.imul(et,eW)|0)|0)+((8191&(F=(F=F+Math.imul(et,eZ)|0)+Math.imul(er,eW)|0))<<13)|0;$=((N=N+Math.imul(er,eZ)|0)+(F>>>13)|0)+(tn>>>26)|0,tn&=67108863,_=Math.imul(ey,eO),F=(F=Math.imul(ey,eD))+Math.imul(ev,eO)|0,N=Math.imul(ev,eD),_=_+Math.imul(ep,eB)|0,F=(F=F+Math.imul(ep,eF)|0)+Math.imul(eg,eB)|0,N=N+Math.imul(eg,eF)|0,_=_+Math.imul(ef,eN)|0,F=(F=F+Math.imul(ef,ej)|0)+Math.imul(ed,eN)|0,N=N+Math.imul(ed,ej)|0,_=_+Math.imul(el,eU)|0,F=(F=F+Math.imul(el,eH)|0)+Math.imul(ec,eU)|0,N=N+Math.imul(ec,eH)|0,_=_+Math.imul(ei,eW)|0,F=(F=F+Math.imul(ei,eZ)|0)+Math.imul(eo,eW)|0,N=N+Math.imul(eo,eZ)|0;var ta=($+(_=_+Math.imul(et,eX)|0)|0)+((8191&(F=(F=F+Math.imul(et,eK)|0)+Math.imul(er,eX)|0))<<13)|0;$=((N=N+Math.imul(er,eK)|0)+(F>>>13)|0)+(ta>>>26)|0,ta&=67108863,_=Math.imul(e_,eO),F=(F=Math.imul(e_,eD))+Math.imul(ew,eO)|0,N=Math.imul(ew,eD),_=_+Math.imul(ey,eB)|0,F=(F=F+Math.imul(ey,eF)|0)+Math.imul(ev,eB)|0,N=N+Math.imul(ev,eF)|0,_=_+Math.imul(ep,eN)|0,F=(F=F+Math.imul(ep,ej)|0)+Math.imul(eg,eN)|0,N=N+Math.imul(eg,ej)|0,_=_+Math.imul(ef,eU)|0,F=(F=F+Math.imul(ef,eH)|0)+Math.imul(ed,eU)|0,N=N+Math.imul(ed,eH)|0,_=_+Math.imul(el,eW)|0,F=(F=F+Math.imul(el,eZ)|0)+Math.imul(ec,eW)|0,N=N+Math.imul(ec,eZ)|0,_=_+Math.imul(ei,eX)|0,F=(F=F+Math.imul(ei,eK)|0)+Math.imul(eo,eX)|0,N=N+Math.imul(eo,eK)|0;var ti=($+(_=_+Math.imul(et,e$)|0)|0)+((8191&(F=(F=F+Math.imul(et,eQ)|0)+Math.imul(er,e$)|0))<<13)|0;$=((N=N+Math.imul(er,eQ)|0)+(F>>>13)|0)+(ti>>>26)|0,ti&=67108863,_=Math.imul(ek,eO),F=(F=Math.imul(ek,eD))+Math.imul(eA,eO)|0,N=Math.imul(eA,eD),_=_+Math.imul(e_,eB)|0,F=(F=F+Math.imul(e_,eF)|0)+Math.imul(ew,eB)|0,N=N+Math.imul(ew,eF)|0,_=_+Math.imul(ey,eN)|0,F=(F=F+Math.imul(ey,ej)|0)+Math.imul(ev,eN)|0,N=N+Math.imul(ev,ej)|0,_=_+Math.imul(ep,eU)|0,F=(F=F+Math.imul(ep,eH)|0)+Math.imul(eg,eU)|0,N=N+Math.imul(eg,eH)|0,_=_+Math.imul(ef,eW)|0,F=(F=F+Math.imul(ef,eZ)|0)+Math.imul(ed,eW)|0,N=N+Math.imul(ed,eZ)|0,_=_+Math.imul(el,eX)|0,F=(F=F+Math.imul(el,eK)|0)+Math.imul(ec,eX)|0,N=N+Math.imul(ec,eK)|0,_=_+Math.imul(ei,e$)|0,F=(F=F+Math.imul(ei,eQ)|0)+Math.imul(eo,e$)|0,N=N+Math.imul(eo,eQ)|0;var to=($+(_=_+Math.imul(et,e1)|0)|0)+((8191&(F=(F=F+Math.imul(et,e2)|0)+Math.imul(er,e1)|0))<<13)|0;$=((N=N+Math.imul(er,e2)|0)+(F>>>13)|0)+(to>>>26)|0,to&=67108863,_=Math.imul(eM,eO),F=(F=Math.imul(eM,eD))+Math.imul(eC,eO)|0,N=Math.imul(eC,eD),_=_+Math.imul(ek,eB)|0,F=(F=F+Math.imul(ek,eF)|0)+Math.imul(eA,eB)|0,N=N+Math.imul(eA,eF)|0,_=_+Math.imul(e_,eN)|0,F=(F=F+Math.imul(e_,ej)|0)+Math.imul(ew,eN)|0,N=N+Math.imul(ew,ej)|0,_=_+Math.imul(ey,eU)|0,F=(F=F+Math.imul(ey,eH)|0)+Math.imul(ev,eU)|0,N=N+Math.imul(ev,eH)|0,_=_+Math.imul(ep,eW)|0,F=(F=F+Math.imul(ep,eZ)|0)+Math.imul(eg,eW)|0,N=N+Math.imul(eg,eZ)|0,_=_+Math.imul(ef,eX)|0,F=(F=F+Math.imul(ef,eK)|0)+Math.imul(ed,eX)|0,N=N+Math.imul(ed,eK)|0,_=_+Math.imul(el,e$)|0,F=(F=F+Math.imul(el,eQ)|0)+Math.imul(ec,e$)|0,N=N+Math.imul(ec,eQ)|0,_=_+Math.imul(ei,e1)|0,F=(F=F+Math.imul(ei,e2)|0)+Math.imul(eo,e1)|0,N=N+Math.imul(eo,e2)|0;var ts=($+(_=_+Math.imul(et,e5)|0)|0)+((8191&(F=(F=F+Math.imul(et,e4)|0)+Math.imul(er,e5)|0))<<13)|0;$=((N=N+Math.imul(er,e4)|0)+(F>>>13)|0)+(ts>>>26)|0,ts&=67108863,_=Math.imul(eL,eO),F=(F=Math.imul(eL,eD))+Math.imul(eP,eO)|0,N=Math.imul(eP,eD),_=_+Math.imul(eM,eB)|0,F=(F=F+Math.imul(eM,eF)|0)+Math.imul(eC,eB)|0,N=N+Math.imul(eC,eF)|0,_=_+Math.imul(ek,eN)|0,F=(F=F+Math.imul(ek,ej)|0)+Math.imul(eA,eN)|0,N=N+Math.imul(eA,ej)|0,_=_+Math.imul(e_,eU)|0,F=(F=F+Math.imul(e_,eH)|0)+Math.imul(ew,eU)|0,N=N+Math.imul(ew,eH)|0,_=_+Math.imul(ey,eW)|0,F=(F=F+Math.imul(ey,eZ)|0)+Math.imul(ev,eW)|0,N=N+Math.imul(ev,eZ)|0,_=_+Math.imul(ep,eX)|0,F=(F=F+Math.imul(ep,eK)|0)+Math.imul(eg,eX)|0,N=N+Math.imul(eg,eK)|0,_=_+Math.imul(ef,e$)|0,F=(F=F+Math.imul(ef,eQ)|0)+Math.imul(ed,e$)|0,N=N+Math.imul(ed,eQ)|0,_=_+Math.imul(el,e1)|0,F=(F=F+Math.imul(el,e2)|0)+Math.imul(ec,e1)|0,N=N+Math.imul(ec,e2)|0,_=_+Math.imul(ei,e5)|0,F=(F=F+Math.imul(ei,e4)|0)+Math.imul(eo,e5)|0,N=N+Math.imul(eo,e4)|0;var tl=($+(_=_+Math.imul(et,e8)|0)|0)+((8191&(F=(F=F+Math.imul(et,e7)|0)+Math.imul(er,e8)|0))<<13)|0;$=((N=N+Math.imul(er,e7)|0)+(F>>>13)|0)+(tl>>>26)|0,tl&=67108863,_=Math.imul(eL,eB),F=(F=Math.imul(eL,eF))+Math.imul(eP,eB)|0,N=Math.imul(eP,eF),_=_+Math.imul(eM,eN)|0,F=(F=F+Math.imul(eM,ej)|0)+Math.imul(eC,eN)|0,N=N+Math.imul(eC,ej)|0,_=_+Math.imul(ek,eU)|0,F=(F=F+Math.imul(ek,eH)|0)+Math.imul(eA,eU)|0,N=N+Math.imul(eA,eH)|0,_=_+Math.imul(e_,eW)|0,F=(F=F+Math.imul(e_,eZ)|0)+Math.imul(ew,eW)|0,N=N+Math.imul(ew,eZ)|0,_=_+Math.imul(ey,eX)|0,F=(F=F+Math.imul(ey,eK)|0)+Math.imul(ev,eX)|0,N=N+Math.imul(ev,eK)|0,_=_+Math.imul(ep,e$)|0,F=(F=F+Math.imul(ep,eQ)|0)+Math.imul(eg,e$)|0,N=N+Math.imul(eg,eQ)|0,_=_+Math.imul(ef,e1)|0,F=(F=F+Math.imul(ef,e2)|0)+Math.imul(ed,e1)|0,N=N+Math.imul(ed,e2)|0,_=_+Math.imul(el,e5)|0,F=(F=F+Math.imul(el,e4)|0)+Math.imul(ec,e5)|0,N=N+Math.imul(ec,e4)|0;var tc=($+(_=_+Math.imul(ei,e8)|0)|0)+((8191&(F=(F=F+Math.imul(ei,e7)|0)+Math.imul(eo,e8)|0))<<13)|0;$=((N=N+Math.imul(eo,e7)|0)+(F>>>13)|0)+(tc>>>26)|0,tc&=67108863,_=Math.imul(eL,eN),F=(F=Math.imul(eL,ej))+Math.imul(eP,eN)|0,N=Math.imul(eP,ej),_=_+Math.imul(eM,eU)|0,F=(F=F+Math.imul(eM,eH)|0)+Math.imul(eC,eU)|0,N=N+Math.imul(eC,eH)|0,_=_+Math.imul(ek,eW)|0,F=(F=F+Math.imul(ek,eZ)|0)+Math.imul(eA,eW)|0,N=N+Math.imul(eA,eZ)|0,_=_+Math.imul(e_,eX)|0,F=(F=F+Math.imul(e_,eK)|0)+Math.imul(ew,eX)|0,N=N+Math.imul(ew,eK)|0,_=_+Math.imul(ey,e$)|0,F=(F=F+Math.imul(ey,eQ)|0)+Math.imul(ev,e$)|0,N=N+Math.imul(ev,eQ)|0,_=_+Math.imul(ep,e1)|0,F=(F=F+Math.imul(ep,e2)|0)+Math.imul(eg,e1)|0,N=N+Math.imul(eg,e2)|0,_=_+Math.imul(ef,e5)|0,F=(F=F+Math.imul(ef,e4)|0)+Math.imul(ed,e5)|0,N=N+Math.imul(ed,e4)|0;var tu=($+(_=_+Math.imul(el,e8)|0)|0)+((8191&(F=(F=F+Math.imul(el,e7)|0)+Math.imul(ec,e8)|0))<<13)|0;$=((N=N+Math.imul(ec,e7)|0)+(F>>>13)|0)+(tu>>>26)|0,tu&=67108863,_=Math.imul(eL,eU),F=(F=Math.imul(eL,eH))+Math.imul(eP,eU)|0,N=Math.imul(eP,eH),_=_+Math.imul(eM,eW)|0,F=(F=F+Math.imul(eM,eZ)|0)+Math.imul(eC,eW)|0,N=N+Math.imul(eC,eZ)|0,_=_+Math.imul(ek,eX)|0,F=(F=F+Math.imul(ek,eK)|0)+Math.imul(eA,eX)|0,N=N+Math.imul(eA,eK)|0,_=_+Math.imul(e_,e$)|0,F=(F=F+Math.imul(e_,eQ)|0)+Math.imul(ew,e$)|0,N=N+Math.imul(ew,eQ)|0,_=_+Math.imul(ey,e1)|0,F=(F=F+Math.imul(ey,e2)|0)+Math.imul(ev,e1)|0,N=N+Math.imul(ev,e2)|0,_=_+Math.imul(ep,e5)|0,F=(F=F+Math.imul(ep,e4)|0)+Math.imul(eg,e5)|0,N=N+Math.imul(eg,e4)|0;var tf=($+(_=_+Math.imul(ef,e8)|0)|0)+((8191&(F=(F=F+Math.imul(ef,e7)|0)+Math.imul(ed,e8)|0))<<13)|0;$=((N=N+Math.imul(ed,e7)|0)+(F>>>13)|0)+(tf>>>26)|0,tf&=67108863,_=Math.imul(eL,eW),F=(F=Math.imul(eL,eZ))+Math.imul(eP,eW)|0,N=Math.imul(eP,eZ),_=_+Math.imul(eM,eX)|0,F=(F=F+Math.imul(eM,eK)|0)+Math.imul(eC,eX)|0,N=N+Math.imul(eC,eK)|0,_=_+Math.imul(ek,e$)|0,F=(F=F+Math.imul(ek,eQ)|0)+Math.imul(eA,e$)|0,N=N+Math.imul(eA,eQ)|0,_=_+Math.imul(e_,e1)|0,F=(F=F+Math.imul(e_,e2)|0)+Math.imul(ew,e1)|0,N=N+Math.imul(ew,e2)|0,_=_+Math.imul(ey,e5)|0,F=(F=F+Math.imul(ey,e4)|0)+Math.imul(ev,e5)|0,N=N+Math.imul(ev,e4)|0;var td=($+(_=_+Math.imul(ep,e8)|0)|0)+((8191&(F=(F=F+Math.imul(ep,e7)|0)+Math.imul(eg,e8)|0))<<13)|0;$=((N=N+Math.imul(eg,e7)|0)+(F>>>13)|0)+(td>>>26)|0,td&=67108863,_=Math.imul(eL,eX),F=(F=Math.imul(eL,eK))+Math.imul(eP,eX)|0,N=Math.imul(eP,eK),_=_+Math.imul(eM,e$)|0,F=(F=F+Math.imul(eM,eQ)|0)+Math.imul(eC,e$)|0,N=N+Math.imul(eC,eQ)|0,_=_+Math.imul(ek,e1)|0,F=(F=F+Math.imul(ek,e2)|0)+Math.imul(eA,e1)|0,N=N+Math.imul(eA,e2)|0,_=_+Math.imul(e_,e5)|0,F=(F=F+Math.imul(e_,e4)|0)+Math.imul(ew,e5)|0,N=N+Math.imul(ew,e4)|0;var th=($+(_=_+Math.imul(ey,e8)|0)|0)+((8191&(F=(F=F+Math.imul(ey,e7)|0)+Math.imul(ev,e8)|0))<<13)|0;$=((N=N+Math.imul(ev,e7)|0)+(F>>>13)|0)+(th>>>26)|0,th&=67108863,_=Math.imul(eL,e$),F=(F=Math.imul(eL,eQ))+Math.imul(eP,e$)|0,N=Math.imul(eP,eQ),_=_+Math.imul(eM,e1)|0,F=(F=F+Math.imul(eM,e2)|0)+Math.imul(eC,e1)|0,N=N+Math.imul(eC,e2)|0,_=_+Math.imul(ek,e5)|0,F=(F=F+Math.imul(ek,e4)|0)+Math.imul(eA,e5)|0,N=N+Math.imul(eA,e4)|0;var tp=($+(_=_+Math.imul(e_,e8)|0)|0)+((8191&(F=(F=F+Math.imul(e_,e7)|0)+Math.imul(ew,e8)|0))<<13)|0;$=((N=N+Math.imul(ew,e7)|0)+(F>>>13)|0)+(tp>>>26)|0,tp&=67108863,_=Math.imul(eL,e1),F=(F=Math.imul(eL,e2))+Math.imul(eP,e1)|0,N=Math.imul(eP,e2),_=_+Math.imul(eM,e5)|0,F=(F=F+Math.imul(eM,e4)|0)+Math.imul(eC,e5)|0,N=N+Math.imul(eC,e4)|0;var tg=($+(_=_+Math.imul(ek,e8)|0)|0)+((8191&(F=(F=F+Math.imul(ek,e7)|0)+Math.imul(eA,e8)|0))<<13)|0;$=((N=N+Math.imul(eA,e7)|0)+(F>>>13)|0)+(tg>>>26)|0,tg&=67108863,_=Math.imul(eL,e5),F=(F=Math.imul(eL,e4))+Math.imul(eP,e5)|0,N=Math.imul(eP,e4);var tm=($+(_=_+Math.imul(eM,e8)|0)|0)+((8191&(F=(F=F+Math.imul(eM,e7)|0)+Math.imul(eC,e8)|0))<<13)|0;$=((N=N+Math.imul(eC,e7)|0)+(F>>>13)|0)+(tm>>>26)|0,tm&=67108863;var ty=($+(_=Math.imul(eL,e8))|0)+((8191&(F=(F=Math.imul(eL,e7))+Math.imul(eP,e8)|0))<<13)|0;return $=((N=Math.imul(eP,e7))+(F>>>13)|0)+(ty>>>26)|0,ty&=67108863,X[0]=e9,X[1]=te,X[2]=tt,X[3]=tr,X[4]=tn,X[5]=ta,X[6]=ti,X[7]=to,X[8]=ts,X[9]=tl,X[10]=tc,X[11]=tu,X[12]=tf,X[13]=td,X[14]=th,X[15]=tp,X[16]=tg,X[17]=tm,X[18]=ty,0!==$&&(X[19]=$,s.length++),s};function bigMulTo(i,o,s){s.negative=o.negative^i.negative,s.length=i.length+o.length;for(var _=0,F=0,N=0;N<s.length-1;N++){var j=F;F=0;for(var Z=67108863&_,X=Math.min(N,o.length-1),$=Math.max(0,N-i.length+1);$<=X;$++){var ee=N-$,et=(0|i.words[ee])*(0|o.words[$]),er=67108863&et;j=j+(et/67108864|0)|0,Z=67108863&(er=er+Z|0),F+=(j=j+(er>>>26)|0)>>>26,j&=67108863}s.words[N]=Z,_=j,j=F}return 0!==_?s.words[N]=_:s.length--,s.strip()}function jumboMulTo(i,o,s){return new FFTM().mulp(i,o,s)}function FFTM(i,o){this.x=i,this.y=o}Math.imul||(comb10MulTo=smallMulTo),BN.prototype.mulTo=function(i,o){var s=this.length+i.length;return 10===this.length&&10===i.length?comb10MulTo(this,i,o):s<63?smallMulTo(this,i,o):s<1024?bigMulTo(this,i,o):jumboMulTo(this,i,o)},FFTM.prototype.makeRBT=function(i){for(var o=Array(i),s=BN.prototype._countBits(i)-1,_=0;_<i;_++)o[_]=this.revBin(_,s,i);return o},FFTM.prototype.revBin=function(i,o,s){if(0===i||i===s-1)return i;for(var _=0,F=0;F<o;F++)_|=(1&i)<<o-F-1,i>>=1;return _},FFTM.prototype.permute=function(i,o,s,_,F,N){for(var j=0;j<N;j++)_[j]=o[i[j]],F[j]=s[i[j]]},FFTM.prototype.transform=function(i,o,s,_,F,N){this.permute(N,i,o,s,_,F);for(var j=1;j<F;j<<=1)for(var Z=j<<1,X=Math.cos(2*Math.PI/Z),$=Math.sin(2*Math.PI/Z),ee=0;ee<F;ee+=Z)for(var et=X,er=$,en=0;en<j;en++){var ei=s[ee+en],eo=_[ee+en],es=s[ee+en+j],el=_[ee+en+j],ec=et*es-er*el;el=et*el+er*es,es=ec,s[ee+en]=ei+es,_[ee+en]=eo+el,s[ee+en+j]=ei-es,_[ee+en+j]=eo-el,en!==Z&&(ec=X*et-$*er,er=X*er+$*et,et=ec)}},FFTM.prototype.guessLen13b=function(i,o){var s=1|Math.max(o,i),_=1&s,F=0;for(s=s/2|0;s;s>>>=1)F++;return 1<<F+1+_},FFTM.prototype.conjugate=function(i,o,s){if(!(s<=1))for(var _=0;_<s/2;_++){var F=i[_];i[_]=i[s-_-1],i[s-_-1]=F,F=o[_],o[_]=-o[s-_-1],o[s-_-1]=-F}},FFTM.prototype.normalize13b=function(i,o){for(var s=0,_=0;_<o/2;_++){var F=8192*Math.round(i[2*_+1]/o)+Math.round(i[2*_]/o)+s;i[_]=67108863&F,s=F<67108864?0:F/67108864|0}return i},FFTM.prototype.convert13b=function(i,o,s,_){for(var F=0,N=0;N<o;N++)F+=0|i[N],s[2*N]=8191&F,F>>>=13,s[2*N+1]=8191&F,F>>>=13;for(N=2*o;N<_;++N)s[N]=0;assert(0===F),assert((-8192&F)==0)},FFTM.prototype.stub=function(i){for(var o=Array(i),s=0;s<i;s++)o[s]=0;return o},FFTM.prototype.mulp=function(i,o,s){var _=2*this.guessLen13b(i.length,o.length),F=this.makeRBT(_),N=this.stub(_),j=Array(_),Z=Array(_),X=Array(_),$=Array(_),ee=Array(_),et=Array(_),er=s.words;er.length=_,this.convert13b(i.words,i.length,j,_),this.convert13b(o.words,o.length,$,_),this.transform(j,N,Z,X,_,F),this.transform($,N,ee,et,_,F);for(var en=0;en<_;en++){var ei=Z[en]*ee[en]-X[en]*et[en];X[en]=Z[en]*et[en]+X[en]*ee[en],Z[en]=ei}return this.conjugate(Z,X,_),this.transform(Z,X,er,N,_,F),this.conjugate(er,N,_),this.normalize13b(er,_),s.negative=i.negative^o.negative,s.length=i.length+o.length,s.strip()},BN.prototype.mul=function(i){var o=new BN(null);return o.words=Array(this.length+i.length),this.mulTo(i,o)},BN.prototype.mulf=function(i){var o=new BN(null);return o.words=Array(this.length+i.length),jumboMulTo(this,i,o)},BN.prototype.imul=function(i){return this.clone().mulTo(i,this)},BN.prototype.imuln=function(i){assert("number"==typeof i),assert(i<67108864);for(var o=0,s=0;s<this.length;s++){var _=(0|this.words[s])*i,F=(67108863&_)+(67108863&o);o>>=26,o+=(_/67108864|0)+(F>>>26),this.words[s]=67108863&F}return 0!==o&&(this.words[s]=o,this.length++),this},BN.prototype.muln=function(i){return this.clone().imuln(i)},BN.prototype.sqr=function(){return this.mul(this)},BN.prototype.isqr=function(){return this.imul(this.clone())},BN.prototype.pow=function(i){var o=toBitArray(i);if(0===o.length)return new BN(1);for(var s=this,_=0;_<o.length&&0===o[_];_++,s=s.sqr());if(++_<o.length)for(var F=s.sqr();_<o.length;_++,F=F.sqr())0!==o[_]&&(s=s.mul(F));return s},BN.prototype.iushln=function(i){assert("number"==typeof i&&i>=0);var o,s=i%26,_=(i-s)/26,F=67108863>>>26-s<<26-s;if(0!==s){var N=0;for(o=0;o<this.length;o++){var j=this.words[o]&F,Z=(0|this.words[o])-j<<s;this.words[o]=Z|N,N=j>>>26-s}N&&(this.words[o]=N,this.length++)}if(0!==_){for(o=this.length-1;o>=0;o--)this.words[o+_]=this.words[o];for(o=0;o<_;o++)this.words[o]=0;this.length+=_}return this.strip()},BN.prototype.ishln=function(i){return assert(0===this.negative),this.iushln(i)},BN.prototype.iushrn=function(i,o,s){assert("number"==typeof i&&i>=0),_=o?(o-o%26)/26:0;var _,F=i%26,N=Math.min((i-F)/26,this.length),j=67108863^67108863>>>F<<F;if(_-=N,_=Math.max(0,_),s){for(var Z=0;Z<N;Z++)s.words[Z]=this.words[Z];s.length=N}if(0===N);else if(this.length>N)for(this.length-=N,Z=0;Z<this.length;Z++)this.words[Z]=this.words[Z+N];else this.words[0]=0,this.length=1;var X=0;for(Z=this.length-1;Z>=0&&(0!==X||Z>=_);Z--){var $=0|this.words[Z];this.words[Z]=X<<26-F|$>>>F,X=$&j}return s&&0!==X&&(s.words[s.length++]=X),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function(i,o,s){return assert(0===this.negative),this.iushrn(i,o,s)},BN.prototype.shln=function(i){return this.clone().ishln(i)},BN.prototype.ushln=function(i){return this.clone().iushln(i)},BN.prototype.shrn=function(i){return this.clone().ishrn(i)},BN.prototype.ushrn=function(i){return this.clone().iushrn(i)},BN.prototype.testn=function(i){assert("number"==typeof i&&i>=0);var o=i%26,s=(i-o)/26;return!(this.length<=s)&&!!(this.words[s]&1<<o)},BN.prototype.imaskn=function(i){assert("number"==typeof i&&i>=0);var o=i%26,s=(i-o)/26;return(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)?this:(0!==o&&s++,this.length=Math.min(s,this.length),0!==o&&(this.words[this.length-1]&=67108863^67108863>>>o<<o),this.strip())},BN.prototype.maskn=function(i){return this.clone().imaskn(i)},BN.prototype.iaddn=function(i){return(assert("number"==typeof i),assert(i<67108864),i<0)?this.isubn(-i):0!==this.negative?(1===this.length&&(0|this.words[0])<i?(this.words[0]=i-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(i),this.negative=1),this):this._iaddn(i)},BN.prototype._iaddn=function(i){this.words[0]+=i;for(var o=0;o<this.length&&this.words[o]>=67108864;o++)this.words[o]-=67108864,o===this.length-1?this.words[o+1]=1:this.words[o+1]++;return this.length=Math.max(this.length,o+1),this},BN.prototype.isubn=function(i){if(assert("number"==typeof i),assert(i<67108864),i<0)return this.iaddn(-i);if(0!==this.negative)return this.negative=0,this.iaddn(i),this.negative=1,this;if(this.words[0]-=i,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var o=0;o<this.length&&this.words[o]<0;o++)this.words[o]+=67108864,this.words[o+1]-=1;return this.strip()},BN.prototype.addn=function(i){return this.clone().iaddn(i)},BN.prototype.subn=function(i){return this.clone().isubn(i)},BN.prototype.iabs=function(){return this.negative=0,this},BN.prototype.abs=function(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function(i,o,s){var _,F,N=i.length+s;this._expand(N);var j=0;for(_=0;_<i.length;_++){F=(0|this.words[_+s])+j;var Z=(0|i.words[_])*o;F-=67108863&Z,j=(F>>26)-(Z/67108864|0),this.words[_+s]=67108863&F}for(;_<this.length-s;_++)j=(F=(0|this.words[_+s])+j)>>26,this.words[_+s]=67108863&F;if(0===j)return this.strip();for(assert(-1===j),j=0,_=0;_<this.length;_++)j=(F=-(0|this.words[_])+j)>>26,this.words[_]=67108863&F;return this.negative=1,this.strip()},BN.prototype._wordDiv=function(i,o){var s,_=this.length-i.length,F=this.clone(),N=i,j=0|N.words[N.length-1];0!=(_=26-this._countBits(j))&&(N=N.ushln(_),F.iushln(_),j=0|N.words[N.length-1]);var Z=F.length-N.length;if("mod"!==o){(s=new BN(null)).length=Z+1,s.words=Array(s.length);for(var X=0;X<s.length;X++)s.words[X]=0}var $=F.clone()._ishlnsubmul(N,1,Z);0===$.negative&&(F=$,s&&(s.words[Z]=1));for(var ee=Z-1;ee>=0;ee--){var et=(0|F.words[N.length+ee])*67108864+(0|F.words[N.length+ee-1]);for(et=Math.min(et/j|0,67108863),F._ishlnsubmul(N,et,ee);0!==F.negative;)et--,F.negative=0,F._ishlnsubmul(N,1,ee),F.isZero()||(F.negative^=1);s&&(s.words[ee]=et)}return s&&s.strip(),F.strip(),"div"!==o&&0!==_&&F.iushrn(_),{div:s||null,mod:F}},BN.prototype.divmod=function(i,o,s){var _,F,N;return(assert(!i.isZero()),this.isZero())?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===i.negative?(N=this.neg().divmod(i,o),"mod"!==o&&(_=N.div.neg()),"div"!==o&&(F=N.mod.neg(),s&&0!==F.negative&&F.iadd(i)),{div:_,mod:F}):0===this.negative&&0!==i.negative?(N=this.divmod(i.neg(),o),"mod"!==o&&(_=N.div.neg()),{div:_,mod:N.mod}):(this.negative&i.negative)!=0?(N=this.neg().divmod(i.neg(),o),"div"!==o&&(F=N.mod.neg(),s&&0!==F.negative&&F.isub(i)),{div:N.div,mod:F}):i.length>this.length||0>this.cmp(i)?{div:new BN(0),mod:this}:1===i.length?"div"===o?{div:this.divn(i.words[0]),mod:null}:"mod"===o?{div:null,mod:new BN(this.modn(i.words[0]))}:{div:this.divn(i.words[0]),mod:new BN(this.modn(i.words[0]))}:this._wordDiv(i,o)},BN.prototype.div=function(i){return this.divmod(i,"div",!1).div},BN.prototype.mod=function(i){return this.divmod(i,"mod",!1).mod},BN.prototype.umod=function(i){return this.divmod(i,"mod",!0).mod},BN.prototype.divRound=function(i){var o=this.divmod(i);if(o.mod.isZero())return o.div;var s=0!==o.div.negative?o.mod.isub(i):o.mod,_=i.ushrn(1),F=i.andln(1),N=s.cmp(_);return N<0||1===F&&0===N?o.div:0!==o.div.negative?o.div.isubn(1):o.div.iaddn(1)},BN.prototype.modn=function(i){assert(i<=67108863);for(var o=67108864%i,s=0,_=this.length-1;_>=0;_--)s=(o*s+(0|this.words[_]))%i;return s},BN.prototype.idivn=function(i){assert(i<=67108863);for(var o=0,s=this.length-1;s>=0;s--){var _=(0|this.words[s])+67108864*o;this.words[s]=_/i|0,o=_%i}return this.strip()},BN.prototype.divn=function(i){return this.clone().idivn(i)},BN.prototype.egcd=function(i){assert(0===i.negative),assert(!i.isZero());var o=this,s=i.clone();o=0!==o.negative?o.umod(i):o.clone();for(var _=new BN(1),F=new BN(0),N=new BN(0),j=new BN(1),Z=0;o.isEven()&&s.isEven();)o.iushrn(1),s.iushrn(1),++Z;for(var X=s.clone(),$=o.clone();!o.isZero();){for(var ee=0,et=1;(o.words[0]&et)==0&&ee<26;++ee,et<<=1);if(ee>0)for(o.iushrn(ee);ee-- >0;)(_.isOdd()||F.isOdd())&&(_.iadd(X),F.isub($)),_.iushrn(1),F.iushrn(1);for(var er=0,en=1;(s.words[0]&en)==0&&er<26;++er,en<<=1);if(er>0)for(s.iushrn(er);er-- >0;)(N.isOdd()||j.isOdd())&&(N.iadd(X),j.isub($)),N.iushrn(1),j.iushrn(1);o.cmp(s)>=0?(o.isub(s),_.isub(N),F.isub(j)):(s.isub(o),N.isub(_),j.isub(F))}return{a:N,b:j,gcd:s.iushln(Z)}},BN.prototype._invmp=function(i){assert(0===i.negative),assert(!i.isZero());var o,s=this,_=i.clone();s=0!==s.negative?s.umod(i):s.clone();for(var F=new BN(1),N=new BN(0),j=_.clone();s.cmpn(1)>0&&_.cmpn(1)>0;){for(var Z=0,X=1;(s.words[0]&X)==0&&Z<26;++Z,X<<=1);if(Z>0)for(s.iushrn(Z);Z-- >0;)F.isOdd()&&F.iadd(j),F.iushrn(1);for(var $=0,ee=1;(_.words[0]&ee)==0&&$<26;++$,ee<<=1);if($>0)for(_.iushrn($);$-- >0;)N.isOdd()&&N.iadd(j),N.iushrn(1);s.cmp(_)>=0?(s.isub(_),F.isub(N)):(_.isub(s),N.isub(F))}return 0>(o=0===s.cmpn(1)?F:N).cmpn(0)&&o.iadd(i),o},BN.prototype.gcd=function(i){if(this.isZero())return i.abs();if(i.isZero())return this.abs();var o=this.clone(),s=i.clone();o.negative=0,s.negative=0;for(var _=0;o.isEven()&&s.isEven();_++)o.iushrn(1),s.iushrn(1);for(;;){for(;o.isEven();)o.iushrn(1);for(;s.isEven();)s.iushrn(1);var F=o.cmp(s);if(F<0){var N=o;o=s,s=N}else if(0===F||0===s.cmpn(1))break;o.isub(s)}return s.iushln(_)},BN.prototype.invm=function(i){return this.egcd(i).a.umod(i)},BN.prototype.isEven=function(){return(1&this.words[0])==0},BN.prototype.isOdd=function(){return(1&this.words[0])==1},BN.prototype.andln=function(i){return this.words[0]&i},BN.prototype.bincn=function(i){assert("number"==typeof i);var o=i%26,s=(i-o)/26,_=1<<o;if(this.length<=s)return this._expand(s+1),this.words[s]|=_,this;for(var F=_,N=s;0!==F&&N<this.length;N++){var j=0|this.words[N];j+=F,F=j>>>26,j&=67108863,this.words[N]=j}return 0!==F&&(this.words[N]=F,this.length++),this},BN.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function(i){var o,s=i<0;if(0!==this.negative&&!s)return -1;if(0===this.negative&&s)return 1;if(this.strip(),this.length>1)o=1;else{s&&(i=-i),assert(i<=67108863,"Number is too big");var _=0|this.words[0];o=_===i?0:_<i?-1:1}return 0!==this.negative?0|-o:o},BN.prototype.cmp=function(i){if(0!==this.negative&&0===i.negative)return -1;if(0===this.negative&&0!==i.negative)return 1;var o=this.ucmp(i);return 0!==this.negative?0|-o:o},BN.prototype.ucmp=function(i){if(this.length>i.length)return 1;if(this.length<i.length)return -1;for(var o=0,s=this.length-1;s>=0;s--){var _=0|this.words[s],F=0|i.words[s];if(_!==F){_<F?o=-1:_>F&&(o=1);break}}return o},BN.prototype.gtn=function(i){return 1===this.cmpn(i)},BN.prototype.gt=function(i){return 1===this.cmp(i)},BN.prototype.gten=function(i){return this.cmpn(i)>=0},BN.prototype.gte=function(i){return this.cmp(i)>=0},BN.prototype.ltn=function(i){return -1===this.cmpn(i)},BN.prototype.lt=function(i){return -1===this.cmp(i)},BN.prototype.lten=function(i){return 0>=this.cmpn(i)},BN.prototype.lte=function(i){return 0>=this.cmp(i)},BN.prototype.eqn=function(i){return 0===this.cmpn(i)},BN.prototype.eq=function(i){return 0===this.cmp(i)},BN.red=function(i){return new Red(i)},BN.prototype.toRed=function(i){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),i.convertTo(this)._forceRed(i)},BN.prototype.fromRed=function(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function(i){return this.red=i,this},BN.prototype.forceRed=function(i){return assert(!this.red,"Already a number in reduction context"),this._forceRed(i)},BN.prototype.redAdd=function(i){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,i)},BN.prototype.redIAdd=function(i){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,i)},BN.prototype.redSub=function(i){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,i)},BN.prototype.redISub=function(i){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,i)},BN.prototype.redShl=function(i){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,i)},BN.prototype.redMul=function(i){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.mul(this,i)},BN.prototype.redIMul=function(i){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,i),this.red.imul(this,i)},BN.prototype.redSqr=function(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function(i){return assert(this.red&&!i.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,i)};var Z={k256:null,p224:null,p192:null,p25519:null};function MPrime(i,o){this.name=i,this.p=new BN(o,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(i){if("string"==typeof i){var o=BN._prime(i);this.m=o.p,this.prime=o}else assert(i.gtn(1),"modulus must be greater than 1"),this.m=i,this.prime=null}function Mont(i){Red.call(this,i),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function(){var i=new BN(null);return i.words=Array(Math.ceil(this.n/13)),i},MPrime.prototype.ireduce=function(i){var o,s=i;do this.split(s,this.tmp),o=(s=(s=this.imulK(s)).iadd(this.tmp)).bitLength();while(o>this.n);var _=o<this.n?-1:s.ucmp(this.p);return 0===_?(s.words[0]=0,s.length=1):_>0?s.isub(this.p):void 0!==s.strip?s.strip():s._strip(),s},MPrime.prototype.split=function(i,o){i.iushrn(this.n,0,o)},MPrime.prototype.imulK=function(i){return i.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function(i,o){for(var s=Math.min(i.length,9),_=0;_<s;_++)o.words[_]=i.words[_];if(o.length=s,i.length<=9){i.words[0]=0,i.length=1;return}var F=i.words[9];for(_=10,o.words[o.length++]=4194303&F;_<i.length;_++){var N=0|i.words[_];i.words[_-10]=(4194303&N)<<4|F>>>22,F=N}F>>>=22,i.words[_-10]=F,0===F&&i.length>10?i.length-=10:i.length-=9},K256.prototype.imulK=function(i){i.words[i.length]=0,i.words[i.length+1]=0,i.length+=2;for(var o=0,s=0;s<i.length;s++){var _=0|i.words[s];o+=977*_,i.words[s]=67108863&o,o=64*_+(o/67108864|0)}return 0===i.words[i.length-1]&&(i.length--,0===i.words[i.length-1]&&i.length--),i},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function(i){for(var o=0,s=0;s<i.length;s++){var _=(0|i.words[s])*19+o,F=67108863&_;_>>>=26,i.words[s]=F,o=_}return 0!==o&&(i.words[i.length++]=o),i},BN._prime=function(i){var o;if(Z[i])return Z[i];if("k256"===i)o=new K256;else if("p224"===i)o=new P224;else if("p192"===i)o=new P192;else if("p25519"===i)o=new P25519;else throw Error("Unknown prime "+i);return Z[i]=o,o},Red.prototype._verify1=function(i){assert(0===i.negative,"red works only with positives"),assert(i.red,"red works only with red numbers")},Red.prototype._verify2=function(i,o){assert((i.negative|o.negative)==0,"red works only with positives"),assert(i.red&&i.red===o.red,"red works only with red numbers")},Red.prototype.imod=function(i){return this.prime?this.prime.ireduce(i)._forceRed(this):i.umod(this.m)._forceRed(this)},Red.prototype.neg=function(i){return i.isZero()?i.clone():this.m.sub(i)._forceRed(this)},Red.prototype.add=function(i,o){this._verify2(i,o);var s=i.add(o);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},Red.prototype.iadd=function(i,o){this._verify2(i,o);var s=i.iadd(o);return s.cmp(this.m)>=0&&s.isub(this.m),s},Red.prototype.sub=function(i,o){this._verify2(i,o);var s=i.sub(o);return 0>s.cmpn(0)&&s.iadd(this.m),s._forceRed(this)},Red.prototype.isub=function(i,o){this._verify2(i,o);var s=i.isub(o);return 0>s.cmpn(0)&&s.iadd(this.m),s},Red.prototype.shl=function(i,o){return this._verify1(i),this.imod(i.ushln(o))},Red.prototype.imul=function(i,o){return this._verify2(i,o),this.imod(i.imul(o))},Red.prototype.mul=function(i,o){return this._verify2(i,o),this.imod(i.mul(o))},Red.prototype.isqr=function(i){return this.imul(i,i.clone())},Red.prototype.sqr=function(i){return this.mul(i,i)},Red.prototype.sqrt=function(i){if(i.isZero())return i.clone();var o=this.m.andln(3);if(assert(o%2==1),3===o){var s=this.m.add(new BN(1)).iushrn(2);return this.pow(i,s)}for(var _=this.m.subn(1),F=0;!_.isZero()&&0===_.andln(1);)F++,_.iushrn(1);assert(!_.isZero());var N=new BN(1).toRed(this),j=N.redNeg(),Z=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new BN(2*X*X).toRed(this);0!==this.pow(X,Z).cmp(j);)X.redIAdd(j);for(var $=this.pow(X,_),ee=this.pow(i,_.addn(1).iushrn(1)),et=this.pow(i,_),er=F;0!==et.cmp(N);){for(var en=et,ei=0;0!==en.cmp(N);ei++)en=en.redSqr();assert(ei<er);var eo=this.pow($,new BN(1).iushln(er-ei-1));ee=ee.redMul(eo),$=eo.redSqr(),et=et.redMul($),er=ei}return ee},Red.prototype.invm=function(i){var o=i._invmp(this.m);return 0!==o.negative?(o.negative=0,this.imod(o).redNeg()):this.imod(o)},Red.prototype.pow=function(i,o){if(o.isZero())return new BN(1).toRed(this);if(0===o.cmpn(1))return i.clone();var s=Array(16);s[0]=new BN(1).toRed(this),s[1]=i;for(var _=2;_<s.length;_++)s[_]=this.mul(s[_-1],i);var F=s[0],N=0,j=0,Z=o.bitLength()%26;for(0===Z&&(Z=26),_=o.length-1;_>=0;_--){for(var X=o.words[_],$=Z-1;$>=0;$--){var ee=X>>$&1;if(F!==s[0]&&(F=this.sqr(F)),0===ee&&0===N){j=0;continue}N<<=1,N|=ee,(4==++j||0===_&&0===$)&&(F=this.mul(F,s[N]),j=0,N=0)}Z=26}return F},Red.prototype.convertTo=function(i){var o=i.umod(this.m);return o===i?o.clone():o},Red.prototype.convertFrom=function(i){var o=i.clone();return o.red=null,o},BN.mont=function(i){return new Mont(i)},inherits(Mont,Red),Mont.prototype.convertTo=function(i){return this.imod(i.ushln(this.shift))},Mont.prototype.convertFrom=function(i){var o=this.imod(i.mul(this.rinv));return o.red=null,o},Mont.prototype.imul=function(i,o){if(i.isZero()||o.isZero())return i.words[0]=0,i.length=1,i;var s=i.imul(o),_=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),F=s.isub(_).iushrn(this.shift),N=F;return F.cmp(this.m)>=0?N=F.isub(this.m):0>F.cmpn(0)&&(N=F.iadd(this.m)),N._forceRed(this)},Mont.prototype.mul=function(i,o){if(i.isZero()||o.isZero())return new BN(0)._forceRed(this);var s=i.mul(o),_=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),F=s.isub(_).iushrn(this.shift),N=F;return F.cmp(this.m)>=0?N=F.isub(this.m):0>F.cmpn(0)&&(N=F.iadd(this.m)),N._forceRed(this)},Mont.prototype.invm=function(i){return this.imod(i._invmp(this.m).mul(this.r2))._forceRed(this)}}(i=s.nmd(i),this)},2692:function(i){"use strict";function boundary(i){var o,s,_,F=i.length,N=0;for(o=0;o<F;++o)N+=i[o].length;var j=Array(N),Z=0;for(o=0;o<F;++o){var X=i[o],$=X.length;for(s=0;s<$;++s){var ee=j[Z++]=Array($-1),et=0;for(_=0;_<$;++_)_!==s&&(ee[et++]=X[_]);if(1&s){var er=ee[1];ee[1]=ee[0],ee[0]=er}}}return j}i.exports=boundary},2569:function(i,o,s){"use strict";i.exports=boxIntersectWrapper;var _,F=s(5306),N=s(1390),j=s(2337);function boxEmpty(i,o){for(var s=0;s<i;++s)if(!(o[s]<=o[s+i]))return!0;return!1}function convertBoxes(i,o,s,_){for(var F=0,N=0,j=0,Z=i.length;j<Z;++j){var X=i[j];if(!boxEmpty(o,X)){for(var $=0;$<2*o;++$)s[F++]=X[$];_[N++]=j}}return N}function boxIntersect(i,o,s,_){var Z,X=i.length,$=o.length;if(!(X<=0)&&!($<=0)){var ee=i[0].length>>>1;if(!(ee<=0)){var et=F.mallocDouble(2*ee*X),er=F.mallocInt32(X);if((X=convertBoxes(i,ee,et,er))>0){if(1===ee&&_)N.init(X),Z=N.sweepComplete(ee,s,0,X,et,er,0,X,et,er);else{var en=F.mallocDouble(2*ee*$),ei=F.mallocInt32($);($=convertBoxes(o,ee,en,ei))>0&&(N.init(X+$),Z=1===ee?N.sweepBipartite(ee,s,0,X,et,er,0,$,en,ei):j(ee,s,_,X,et,er,$,en,ei),F.free(en),F.free(ei))}F.free(et),F.free(er)}return Z}}}function appendItem(i,o){_.push([i,o])}function intersectFullArray(i){return _=[],boxIntersect(i,i,appendItem,!0),_}function intersectBipartiteArray(i,o){return _=[],boxIntersect(i,o,appendItem,!1),_}function boxIntersectWrapper(i,o,s){switch(arguments.length){case 1:return intersectFullArray(i);case 2:if("function"==typeof o)return boxIntersect(i,i,o,!0);return intersectBipartiteArray(i,o);case 3:return boxIntersect(i,o,s,!1);default:throw Error("box-intersect: Invalid arguments")}}},7333:function(i,o){"use strict";function full(){function bruteForceRedFull(i,o,s,_,F,N,j,Z,X,$,ee){for(var et=2*i,er=_,en=et*_;er<F;++er,en+=et){var ei=N[o+en],eo=N[o+en+i],es=j[er];n:for(var el=Z,ec=et*Z;el<X;++el,ec+=et){var eu=$[o+ec],ef=$[o+ec+i],ed=ee[el];if(!(ef<ei)&&!(eo<eu)){for(var eh=o+1;eh<i;++eh){var ep=N[eh+en],eg=N[eh+i+en],em=$[eh+ec],ey=$[eh+i+ec];if(eg<em||ey<ep)continue n}var ev=s(es,ed);if(void 0!==ev)return ev}}}}function bruteForceBlueFull(i,o,s,_,F,N,j,Z,X,$,ee){for(var et=2*i,er=Z,en=et*Z;er<X;++er,en+=et){var ei=$[o+en],eo=$[o+en+i],es=ee[er];n:for(var el=_,ec=et*_;el<F;++el,ec+=et){var eu=N[o+ec],ef=N[o+ec+i],ed=j[el];if(!(eo<eu)&&!(ef<ei)){for(var eh=o+1;eh<i;++eh){var ep=N[eh+ec],eg=N[eh+i+ec],em=$[eh+en],ey=$[eh+i+en];if(eg<em||ey<ep)continue n}var ev=s(ed,es);if(void 0!==ev)return ev}}}}return function(i,o,s,_,F,N,j,Z,X,$,ee){return F-_>X-Z?bruteForceRedFull(i,o,s,_,F,N,j,Z,X,$,ee):bruteForceBlueFull(i,o,s,_,F,N,j,Z,X,$,ee)}}function partial(){function bruteForceRedFlip(i,o,s,_,F,N,j,Z,X,$,ee){for(var et=2*i,er=_,en=et*_;er<F;++er,en+=et){var ei=N[o+en],eo=N[o+en+i],es=j[er];n:for(var el=Z,ec=et*Z;el<X;++el,ec+=et){var eu=$[o+ec],ef=ee[el];if(!(eu<=ei)&&!(eo<eu)){for(var ed=o+1;ed<i;++ed){var eh=N[ed+en],ep=N[ed+i+en],eg=$[ed+ec],em=$[ed+i+ec];if(ep<eg||em<eh)continue n}var ey=s(ef,es);if(void 0!==ey)return ey}}}}function bruteForceRed(i,o,s,_,F,N,j,Z,X,$,ee){for(var et=2*i,er=_,en=et*_;er<F;++er,en+=et){var ei=N[o+en],eo=N[o+en+i],es=j[er];n:for(var el=Z,ec=et*Z;el<X;++el,ec+=et){var eu=$[o+ec],ef=ee[el];if(!(eu<ei)&&!(eo<eu)){for(var ed=o+1;ed<i;++ed){var eh=N[ed+en],ep=N[ed+i+en],eg=$[ed+ec],em=$[ed+i+ec];if(ep<eg||em<eh)continue n}var ey=s(es,ef);if(void 0!==ey)return ey}}}}function bruteForceBlueFlip(i,o,s,_,F,N,j,Z,X,$,ee){for(var et=2*i,er=Z,en=et*Z;er<X;++er,en+=et){var ei=$[o+en],eo=ee[er];n:for(var es=_,el=et*_;es<F;++es,el+=et){var ec=N[o+el],eu=N[o+el+i],ef=j[es];if(!(ei<=ec)&&!(eu<ei)){for(var ed=o+1;ed<i;++ed){var eh=N[ed+el],ep=N[ed+i+el],eg=$[ed+en],em=$[ed+i+en];if(ep<eg||em<eh)continue n}var ey=s(eo,ef);if(void 0!==ey)return ey}}}}function bruteForceBlue(i,o,s,_,F,N,j,Z,X,$,ee){for(var et=2*i,er=Z,en=et*Z;er<X;++er,en+=et){var ei=$[o+en],eo=ee[er];n:for(var es=_,el=et*_;es<F;++es,el+=et){var ec=N[o+el],eu=N[o+el+i],ef=j[es];if(!(ei<ec)&&!(eu<ei)){for(var ed=o+1;ed<i;++ed){var eh=N[ed+el],ep=N[ed+i+el],eg=$[ed+en],em=$[ed+i+en];if(ep<eg||em<eh)continue n}var ey=s(ef,eo);if(void 0!==ey)return ey}}}}return function(i,o,s,_,F,N,j,Z,X,$,ee,et){return N-F>$-X?_?bruteForceRedFlip(i,o,s,F,N,j,Z,X,$,ee,et):bruteForceRed(i,o,s,F,N,j,Z,X,$,ee,et):_?bruteForceBlueFlip(i,o,s,F,N,j,Z,X,$,ee,et):bruteForceBlue(i,o,s,F,N,j,Z,X,$,ee,et)}}o.partial=partial(),o.full=full()},2337:function(i,o,s){"use strict";i.exports=boxIntersectIter;var _=s(5306),F=s(2288),N=s(7333),j=N.partial,Z=N.full,X=s(1390),$=s(2464),ee=s(122),et=ee("!(lo>=p0)&&!(p1>=hi)"),er=ee("lo===p0"),en=ee("lo<p0"),ei=ee("hi<=p0"),eo=ee("lo<=p0&&p0<=hi"),es=ee("lo<p0&&p0<=hi"),el=_.mallocInt32(1024),ec=_.mallocDouble(1024);function iterInit(i,o){var s=8*F.log2(o+1)*(i+1)|0,N=F.nextPow2(6*s);el.length<N&&(_.free(el),el=_.mallocInt32(N));var j=F.nextPow2(2*s);ec.length<j&&(_.free(ec),ec=_.mallocDouble(j))}function iterPush(i,o,s,_,F,N,j,Z,X){var $=6*i;el[$]=o,el[$+1]=s,el[$+2]=_,el[$+3]=F,el[$+4]=N,el[$+5]=j;var ee=2*i;ec[ee]=Z,ec[ee+1]=X}function onePointPartial(i,o,s,_,F,N,j,Z,X,$,ee){var et=2*i,er=X*et,en=$[er+o];a:for(var ei=F,eo=F*et;ei<N;++ei,eo+=et){var es,el=j[eo+o],ec=j[eo+o+i];if(!(en<el)&&!(ec<en)&&(!_||en!==el)){for(var eu=Z[ei],ef=o+1;ef<i;++ef){var el=j[eo+ef],ec=j[eo+ef+i],ed=$[er+ef],eh=$[er+ef+i];if(ec<ed||eh<el)continue a}if(void 0!==(es=_?s(ee,eu):s(eu,ee)))return es}}}function onePointFull(i,o,s,_,F,N,j,Z,X,$){var ee=2*i,et=Z*ee,er=X[et+o];a:for(var en=_,ei=_*ee;en<F;++en,ei+=ee){var eo=j[en];if(eo!==$){var es=N[ei+o],el=N[ei+o+i];if(!(er<es)&&!(el<er)){for(var ec=o+1;ec<i;++ec){var es=N[ei+ec],el=N[ei+ec+i],eu=X[et+ec],ef=X[et+ec+i];if(el<eu||ef<es)continue a}var ed=s(eo,$);if(void 0!==ed)return ed}}}}function boxIntersectIter(i,o,s,_,F,N,ee,eu,ef){iterInit(i,_+ee);var ed=0,eh=2*i;for(iterPush(ed++,0,0,_,0,ee,s?16:0,-1/0,1/0),s||iterPush(ed++,0,0,ee,0,_,1,-1/0,1/0);ed>0;){var ep=6*(ed-=1),eg=el[ep],em=el[ep+1],ey=el[ep+2],ev=el[ep+3],ex=el[ep+4],e_=el[ep+5],ew=2*ed,eT=ec[ew],ek=ec[ew+1],eA=1&e_,eS=!!(16&e_),eM=F,eC=N,eE=eu,eL=ef;if(eA&&(eM=eu,eC=ef,eE=F,eL=N),!(2&e_&&(ey=en(i,eg,em,ey,eM,eC,ek),em>=ey)||4&e_&&(em=ei(i,eg,em,ey,eM,eC,eT))>=ey)){var eP=ey-em,eI=ex-ev;if(eS){if(i*eP*(eP+eI)<4194304){if(void 0!==(eD=X.scanComplete(i,eg,o,em,ey,eM,eC,ev,ex,eE,eL)))return eD;continue}}else{if(i*Math.min(eP,eI)<128){if(void 0!==(eD=j(i,eg,o,eA,em,ey,eM,eC,ev,ex,eE,eL)))return eD;continue}if(i*eP*eI<4194304){if(void 0!==(eD=X.scanBipartite(i,eg,o,eA,em,ey,eM,eC,ev,ex,eE,eL)))return eD;continue}}var eO=et(i,eg,em,ey,eM,eC,eT,ek);if(em<eO){if(i*(eO-em)<128){if(void 0!==(eD=Z(i,eg+1,o,em,eO,eM,eC,ev,ex,eE,eL)))return eD}else if(eg===i-2){if(void 0!==(eD=eA?X.sweepBipartite(i,o,ev,ex,eE,eL,em,eO,eM,eC):X.sweepBipartite(i,o,em,eO,eM,eC,ev,ex,eE,eL)))return eD}else iterPush(ed++,eg+1,em,eO,ev,ex,eA,-1/0,1/0),iterPush(ed++,eg+1,ev,ex,em,eO,1^eA,-1/0,1/0)}if(eO<ey){var eD,eR,eB=$(i,eg,ev,ex,eE,eL),eF=eE[eh*eB+eg],ez=er(i,eg,eB,ex,eE,eL,eF);if(ez<ex&&iterPush(ed++,eg,eO,ey,ez,ex,(4|eA)+(eS?16:0),eF,ek),ev<eB&&iterPush(ed++,eg,eO,ey,ev,eB,(2|eA)+(eS?16:0),eT,eF),eB+1===ez){if(void 0!==(eD=eS?onePointFull(i,eg,o,eO,ey,eM,eC,eB,eE,eL[eB]):onePointPartial(i,eg,o,eA,eO,ey,eM,eC,eB,eE,eL[eB])))return eD}else if(eB<ez){if(eS){if(eR=eo(i,eg,eO,ey,eM,eC,eF),eO<eR){var eN=er(i,eg,eO,eR,eM,eC,eF);if(eg===i-2){if(eO<eN&&void 0!==(eD=X.sweepComplete(i,o,eO,eN,eM,eC,eB,ez,eE,eL))||eN<eR&&void 0!==(eD=X.sweepBipartite(i,o,eN,eR,eM,eC,eB,ez,eE,eL)))return eD}else eO<eN&&iterPush(ed++,eg+1,eO,eN,eB,ez,16,-1/0,1/0),eN<eR&&(iterPush(ed++,eg+1,eN,eR,eB,ez,0,-1/0,1/0),iterPush(ed++,eg+1,eB,ez,eN,eR,1,-1/0,1/0))}}else eR=eA?es(i,eg,eO,ey,eM,eC,eF):eo(i,eg,eO,ey,eM,eC,eF),eO<eR&&(eg===i-2?eD=eA?X.sweepBipartite(i,o,eB,ez,eE,eL,eO,eR,eM,eC):X.sweepBipartite(i,o,eO,eR,eM,eC,eB,ez,eE,eL):(iterPush(ed++,eg+1,eO,eR,eB,ez,eA,-1/0,1/0),iterPush(ed++,eg+1,eB,ez,eO,eR,1^eA,-1/0,1/0)))}}}}}},2464:function(i,o,s){"use strict";i.exports=findMedian;var _=s(122)("lo<p0");function insertionSort(i,o,s,_,F,N){for(var j=2*i,Z=j*(s+1)+o,X=s+1;X<_;++X,Z+=j)for(var $=F[Z],ee=X,et=j*(X-1);ee>s&&F[et+o]>$;--ee,et-=j){for(var er=et,en=et+j,ei=0;ei<j;++ei,++er,++en){var eo=F[er];F[er]=F[en],F[en]=eo}var es=N[ee];N[ee]=N[ee-1],N[ee-1]=es}}function findMedian(i,o,s,F,N,j){if(F<=s+1)return s;for(var Z=s,X=F,$=F+s>>>1,ee=2*i,et=$,er=N[ee*$+o];Z<X;){if(X-Z<8){insertionSort(i,o,Z,X,N,j),er=N[ee*$+o];break}var en=X-Z,ei=Math.random()*en+Z|0,eo=N[ee*ei+o],es=Math.random()*en+Z|0,el=N[ee*es+o],ec=Math.random()*en+Z|0,eu=N[ee*ec+o];eo<=el?eu>=el?(et=es,er=el):eo>=eu?(et=ei,er=eo):(et=ec,er=eu):el>=eu?(et=es,er=el):eu>=eo?(et=ei,er=eo):(et=ec,er=eu);for(var ef=ee*(X-1),ed=ee*et,eh=0;eh<ee;++eh,++ef,++ed){var ep=N[ef];N[ef]=N[ed],N[ed]=ep}var eg=j[X-1];j[X-1]=j[et],j[et]=eg,et=_(i,o,Z,X-1,N,j,er);for(var ef=ee*(X-1),ed=ee*et,eh=0;eh<ee;++eh,++ef,++ed){var ep=N[ef];N[ef]=N[ed],N[ed]=ep}var eg=j[X-1];if(j[X-1]=j[et],j[et]=eg,$<et){for(X=et-1;Z<X&&N[ee*(X-1)+o]===er;)X-=1;X+=1}else if(et<$)for(Z=et+1;Z<X&&N[ee*Z+o]===er;)Z+=1;else break}return _(i,o,s,$,N,j,N[ee*$+o])}},122:function(i){"use strict";i.exports=genPartition;var o={"lo===p0":lo_equal_p0,"lo<p0":lo_lessThan_p0,"lo<=p0":lo_lessOrEqual_p0,"hi<=p0":hi_lessOrEqual_p0,"lo<p0&&p0<=hi":lo_lessThan_p0_and_p0_lessOrEqual_hi,"lo<=p0&&p0<=hi":lo_lassOrEqual_p0_and_p0_lessOrEqual_hi,"!(lo>=p0)&&!(p1>=hi)":lo_lessThan_p0_and_p1_lessThan_hi};function genPartition(i){return o[i]}function lo_equal_p0(i,o,s,_,F,N,j){for(var Z=2*i,X=Z*s,$=X,ee=s,et=s;_>et;++et,X+=Z)if(F[X+o]===j){if(ee===et)ee+=1,$+=Z;else{for(var er=0;Z>er;++er){var en=F[X+er];F[X+er]=F[$],F[$++]=en}var ei=N[et];N[et]=N[ee],N[ee++]=ei}}return ee}function lo_lessThan_p0(i,o,s,_,F,N,j){for(var Z=2*i,X=Z*s,$=X,ee=s,et=s;_>et;++et,X+=Z)if(F[X+o]<j){if(ee===et)ee+=1,$+=Z;else{for(var er=0;Z>er;++er){var en=F[X+er];F[X+er]=F[$],F[$++]=en}var ei=N[et];N[et]=N[ee],N[ee++]=ei}}return ee}function lo_lessOrEqual_p0(i,o,s,_,F,N,j){for(var Z=2*i,X=Z*s,$=X,ee=s,et=i+o,er=s;_>er;++er,X+=Z)if(F[X+et]<=j){if(ee===er)ee+=1,$+=Z;else{for(var en=0;Z>en;++en){var ei=F[X+en];F[X+en]=F[$],F[$++]=ei}var eo=N[er];N[er]=N[ee],N[ee++]=eo}}return ee}function hi_lessOrEqual_p0(i,o,s,_,F,N,j){for(var Z=2*i,X=Z*s,$=X,ee=s,et=i+o,er=s;_>er;++er,X+=Z)if(F[X+et]<=j){if(ee===er)ee+=1,$+=Z;else{for(var en=0;Z>en;++en){var ei=F[X+en];F[X+en]=F[$],F[$++]=ei}var eo=N[er];N[er]=N[ee],N[ee++]=eo}}return ee}function lo_lassOrEqual_p0_and_p0_lessOrEqual_hi(i,o,s,_,F,N,j){for(var Z=2*i,X=Z*s,$=X,ee=s,et=i+o,er=s;_>er;++er,X+=Z){var en=F[X+o],ei=F[X+et];if(en<=j&&j<=ei){if(ee===er)ee+=1,$+=Z;else{for(var eo=0;Z>eo;++eo){var es=F[X+eo];F[X+eo]=F[$],F[$++]=es}var el=N[er];N[er]=N[ee],N[ee++]=el}}}return ee}function lo_lessThan_p0_and_p0_lessOrEqual_hi(i,o,s,_,F,N,j){for(var Z=2*i,X=Z*s,$=X,ee=s,et=i+o,er=s;_>er;++er,X+=Z){var en=F[X+o],ei=F[X+et];if(en<j&&j<=ei){if(ee===er)ee+=1,$+=Z;else{for(var eo=0;Z>eo;++eo){var es=F[X+eo];F[X+eo]=F[$],F[$++]=es}var el=N[er];N[er]=N[ee],N[ee++]=el}}}return ee}function lo_lessThan_p0_and_p1_lessThan_hi(i,o,s,_,F,N,j,Z){for(var X=2*i,$=X*s,ee=$,et=s,er=i+o,en=s;_>en;++en,$+=X){var ei=F[$+o],eo=F[$+er];if(!(ei>=j)&&!(Z>=eo)){if(et===en)et+=1,ee+=X;else{for(var es=0;X>es;++es){var el=F[$+es];F[$+es]=F[ee],F[ee++]=el}var ec=N[en];N[en]=N[et],N[et++]=ec}}}return et}},309:function(i){"use strict";function wrapper(i,o){o<=128?insertionSort(0,o-1,i):quickSort(0,o-1,i)}function insertionSort(i,o,s){for(var _=2*(i+1),F=i+1;F<=o;++F){for(var N=s[_++],j=s[_++],Z=F,X=_-2;Z-- >i;){var $=s[X-2],ee=s[X-1];if($<N||$===N&&ee<j)break;s[X]=$,s[X+1]=ee,X-=2}s[X]=N,s[X+1]=j}}function swap(i,o,s){o*=2;var _=s[i*=2],F=s[i+1];s[i]=s[o],s[i+1]=s[o+1],s[o]=_,s[o+1]=F}function move(i,o,s){o*=2,s[i*=2]=s[o],s[i+1]=s[o+1]}function rotate(i,o,s,_){o*=2,s*=2;var F=_[i*=2],N=_[i+1];_[i]=_[o],_[i+1]=_[o+1],_[o]=_[s],_[o+1]=_[s+1],_[s]=F,_[s+1]=N}function shufflePivot(i,o,s,_,F){o*=2,F[i*=2]=F[o],F[o]=s,F[i+1]=F[o+1],F[o+1]=_}function compare(i,o,s){o*=2;var _=s[i*=2],F=s[o];return!(_<F)&&(_!==F||s[i+1]>s[o+1])}function comparePivot(i,o,s,_){var F=_[i*=2];return F<o||F===o&&_[i+1]<s}function quickSort(i,o,s){var _=(o-i+1)/6|0,F=i+_,N=o-_,j=i+o>>1,Z=j-_,X=j+_,$=F,ee=Z,et=j,er=X,en=N,ei=i+1,eo=o-1,es=0;compare($,ee,s)&&(es=$,$=ee,ee=es),compare(er,en,s)&&(es=er,er=en,en=es),compare($,et,s)&&(es=$,$=et,et=es),compare(ee,et,s)&&(es=ee,ee=et,et=es),compare($,er,s)&&(es=$,$=er,er=es),compare(et,er,s)&&(es=et,et=er,er=es),compare(ee,en,s)&&(es=ee,ee=en,en=es),compare(ee,et,s)&&(es=ee,ee=et,et=es),compare(er,en,s)&&(es=er,er=en,en=es);for(var el=s[2*ee],ec=s[2*ee+1],eu=s[2*er],ef=s[2*er+1],ed=2*$,eh=2*et,ep=2*en,eg=2*F,em=2*j,ey=2*N,ev=0;ev<2;++ev){var ex=s[ed+ev],e_=s[eh+ev],ew=s[ep+ev];s[eg+ev]=ex,s[em+ev]=e_,s[ey+ev]=ew}move(Z,i,s),move(X,o,s);for(var eT=ei;eT<=eo;++eT)if(comparePivot(eT,el,ec,s))eT!==ei&&swap(eT,ei,s),++ei;else if(!comparePivot(eT,eu,ef,s))for(;;){if(comparePivot(eo,eu,ef,s)){comparePivot(eo,el,ec,s)?(rotate(eT,ei,eo,s),++ei):swap(eT,eo,s),--eo;break}if(--eo<eT)break}shufflePivot(i,ei-1,el,ec,s),shufflePivot(o,eo+1,eu,ef,s),ei-2-i<=32?insertionSort(i,ei-2,s):quickSort(i,ei-2,s),o-(eo+2)<=32?insertionSort(eo+2,o,s):quickSort(eo+2,o,s),eo-ei<=32?insertionSort(ei,eo,s):quickSort(ei,eo,s)}i.exports=wrapper},1390:function(i,o,s){"use strict";i.exports={init:sqInit,sweepBipartite:sweepBipartite,sweepComplete:sweepComplete,scanBipartite:scanBipartite,scanComplete:scanComplete};var _=s(5306),F=s(2288),N=s(309),j=_.mallocInt32(1024),Z=_.mallocInt32(1024),X=_.mallocInt32(1024),$=_.mallocInt32(1024),ee=_.mallocInt32(1024),et=_.mallocInt32(1024),er=_.mallocDouble(8192);function sqInit(i){var o=F.nextPow2(i);j.length<o&&(_.free(j),j=_.mallocInt32(o)),Z.length<o&&(_.free(Z),Z=_.mallocInt32(o)),X.length<o&&(_.free(X),X=_.mallocInt32(o)),$.length<o&&(_.free($),$=_.mallocInt32(o)),ee.length<o&&(_.free(ee),ee=_.mallocInt32(o)),et.length<o&&(_.free(et),et=_.mallocInt32(o));var s=8*o;er.length<s&&(_.free(er),er=_.mallocDouble(s))}function sqPop(i,o,s,_){var F=o[_],N=i[s-1];i[F]=N,o[N]=F}function sqPush(i,o,s,_){i[s]=_,o[_]=s}function sweepBipartite(i,o,s,_,F,ee,et,en,ei,eo){for(var es=0,el=2*i,ec=i-1,eu=el-1,ef=s;ef<_;++ef){var ed=ee[ef],eh=el*ef;er[es++]=F[eh+ec],er[es++]=-(ed+1),er[es++]=F[eh+eu],er[es++]=ed}for(var ef=et;ef<en;++ef){var ed=eo[ef]+268435456,ep=el*ef;er[es++]=ei[ep+ec],er[es++]=-ed,er[es++]=ei[ep+eu],er[es++]=ed}var eg=es>>>1;N(er,eg);for(var em=0,ey=0,ef=0;ef<eg;++ef){var ev=0|er[2*ef+1];if(ev>=268435456)ev=ev-268435456|0,sqPop(X,$,ey--,ev);else if(ev>=0)sqPop(j,Z,em--,ev);else if(ev<=-268435456){ev=-ev-268435456|0;for(var ex=0;ex<em;++ex){var e_=o(j[ex],ev);if(void 0!==e_)return e_}sqPush(X,$,ey++,ev)}else{ev=-ev-1|0;for(var ex=0;ex<ey;++ex){var e_=o(ev,X[ex]);if(void 0!==e_)return e_}sqPush(j,Z,em++,ev)}}}function sweepComplete(i,o,s,_,F,en,ei,eo,es,el){for(var ec=0,eu=2*i,ef=i-1,ed=eu-1,eh=s;eh<_;++eh){var ep=en[eh]+1<<1,eg=eu*eh;er[ec++]=F[eg+ef],er[ec++]=-ep,er[ec++]=F[eg+ed],er[ec++]=ep}for(var eh=ei;eh<eo;++eh){var ep=el[eh]+1<<1,em=eu*eh;er[ec++]=es[em+ef],er[ec++]=1|-ep,er[ec++]=es[em+ed],er[ec++]=1|ep}var ey=ec>>>1;N(er,ey);for(var ev=0,ex=0,e_=0,eh=0;eh<ey;++eh){var ew=0|er[2*eh+1],eT=1&ew;if(eh<ey-1&&ew>>1==er[2*eh+3]>>1&&(eT=2,eh+=1),ew<0){for(var ek=-(ew>>1)-1,eA=0;eA<e_;++eA){var eS=o(ee[eA],ek);if(void 0!==eS)return eS}if(0!==eT)for(var eA=0;eA<ev;++eA){var eS=o(j[eA],ek);if(void 0!==eS)return eS}if(1!==eT)for(var eA=0;eA<ex;++eA){var eS=o(X[eA],ek);if(void 0!==eS)return eS}0===eT?sqPush(j,Z,ev++,ek):1===eT?sqPush(X,$,ex++,ek):2===eT&&sqPush(ee,et,e_++,ek)}else{var ek=(ew>>1)-1;0===eT?sqPop(j,Z,ev--,ek):1===eT?sqPop(X,$,ex--,ek):2===eT&&sqPop(ee,et,e_--,ek)}}}function scanBipartite(i,o,s,_,F,X,$,ee,et,en,ei,eo){var es=0,el=2*i,ec=o+i,eu=1,ef=1;_?ef=268435456:eu=268435456;for(var ed=F;ed<X;++ed){var eh=ed+eu,ep=el*ed;er[es++]=$[ep+o],er[es++]=-eh,er[es++]=$[ep+ec],er[es++]=eh}for(var ed=et;ed<en;++ed){var eh=ed+ef,eg=el*ed;er[es++]=ei[eg+o],er[es++]=-eh}var em=es>>>1;N(er,em);for(var ey=0,ed=0;ed<em;++ed){var ev=0|er[2*ed+1];if(ev<0){var eh=-ev,ex=!1;if(eh>=268435456?(ex=!_,eh-=268435456):(ex=!!_,eh-=1),ex)sqPush(j,Z,ey++,eh);else{var e_=eo[eh],ew=el*eh,eT=ei[ew+o+1],ek=ei[ew+o+1+i];a:for(var eA=0;eA<ey;++eA){var eS,eM=j[eA],eC=el*eM;if(!(ek<$[eC+o+1])&&!($[eC+o+1+i]<eT)){for(var eE=o+2;eE<i;++eE)if(ei[ew+eE+i]<$[eC+eE]||$[eC+eE+i]<ei[ew+eE])continue a;var eL=ee[eM];if(void 0!==(eS=_?s(e_,eL):s(eL,e_)))return eS}}}}else sqPop(j,Z,ey--,ev-eu)}}function scanComplete(i,o,s,_,F,Z,X,$,ee,et,en){for(var ei=0,eo=2*i,es=o+i,el=_;el<F;++el){var ec=el+268435456,eu=eo*el;er[ei++]=Z[eu+o],er[ei++]=-ec,er[ei++]=Z[eu+es],er[ei++]=ec}for(var el=$;el<ee;++el){var ec=el+1,ef=eo*el;er[ei++]=et[ef+o],er[ei++]=-ec}var ed=ei>>>1;N(er,ed);for(var eh=0,el=0;el<ed;++el){var ep=0|er[2*el+1];if(ep<0){var ec=-ep;if(ec>=268435456)j[eh++]=ec-268435456;else{var eg=en[ec-=1],em=eo*ec,ey=et[em+o+1],ev=et[em+o+1+i];a:for(var ex=0;ex<eh;++ex){var e_=j[ex],ew=X[e_];if(ew===eg)break;var eT=eo*e_;if(!(ev<Z[eT+o+1])&&!(Z[eT+o+1+i]<ey)){for(var ek=o+2;ek<i;++ek)if(et[em+ek+i]<Z[eT+ek]||Z[eT+ek+i]<et[em+ek])continue a;var eA=s(ew,eg);if(void 0!==eA)return eA}}}}else{for(var ec=ep-268435456,ex=eh-1;ex>=0;--ex)if(j[ex]===ec){for(var ek=ex+1;ek<eh;++ek)j[ek-1]=j[ek];break}--eh}}}},7761:function(i,o,s){"use strict";var _=s(9971),F=s(743),N=s(2161),j=s(7098);function canonicalizeEdge(i){return[Math.min(i[0],i[1]),Math.max(i[0],i[1])]}function compareEdge(i,o){return i[0]-o[0]||i[1]-o[1]}function canonicalizeEdges(i){return i.map(canonicalizeEdge).sort(compareEdge)}function getDefault(i,o,s){return o in i?i[o]:s}function cdt2d(i,o,s){Array.isArray(o)?(s=s||{},o=o||[]):(s=o||{},o=[]);var Z=!!getDefault(s,"delaunay",!0),X=!!getDefault(s,"interior",!0),$=!!getDefault(s,"exterior",!0),ee=!!getDefault(s,"infinity",!1);if(!X&&!$||0===i.length)return[];var et=_(i,o);if(!Z&&X===$&&!ee)return et;for(var er=F(i.length,canonicalizeEdges(o)),en=0;en<et.length;++en){var ei=et[en];er.addTriangle(ei[0],ei[1],ei[2])}return(Z&&N(i,er),$)?X?ee?j(er,0,ee):er.cells():j(er,1,ee):j(er,-1)}i.exports=cdt2d},2161:function(i,o,s){"use strict";var _=s(2227)[4];function testFlip(i,o,s,F,N,j){var Z=o.opposite(F,N);if(!(Z<0)){if(N<F){var X=F;F=N,N=X,X=j,j=Z,Z=X}!o.isConstraint(F,N)&&0>_(i[F],i[N],i[j],i[Z])&&s.push(F,N)}}function delaunayRefine(i,o){for(var s=[],F=i.length,N=o.stars,j=0;j<F;++j)for(var Z=N[j],X=1;X<Z.length;X+=2){var $=Z[X];if(!($<j||o.isConstraint(j,$))){for(var ee=Z[X-1],et=-1,er=1;er<Z.length;er+=2)if(Z[er-1]===$){et=Z[er];break}!(et<0)&&0>_(i[j],i[$],i[ee],i[et])&&s.push(j,$)}}for(;s.length>0;){for(var $=s.pop(),j=s.pop(),ee=-1,et=-1,Z=N[j],en=1;en<Z.length;en+=2){var ei=Z[en-1],eo=Z[en];ei===$?et=eo:eo===$&&(ee=ei)}ee<0||et<0||_(i[j],i[$],i[ee],i[et])>=0||(o.flip(j,$),testFlip(i,o,s,ee,j,et),testFlip(i,o,s,j,et,ee),testFlip(i,o,s,et,$,ee),testFlip(i,o,s,$,ee,et))}}s(5070),i.exports=delaunayRefine},7098:function(i,o,s){"use strict";var _,F=s(5070);function FaceIndex(i,o,s,_,F,N,j){this.cells=i,this.neighbor=o,this.flags=_,this.constraint=s,this.active=F,this.next=N,this.boundary=j}function compareCell(i,o){return i[0]-o[0]||i[1]-o[1]||i[2]-o[2]}function indexCells(i,o){for(var s=i.cells(),_=s.length,F=0;F<_;++F){var N=s[F],j=N[0],Z=N[1],X=N[2];Z<X?Z<j&&(N[0]=Z,N[1]=X,N[2]=j):X<j&&(N[0]=X,N[1]=j,N[2]=Z)}s.sort(compareCell);for(var $=Array(_),F=0;F<$.length;++F)$[F]=0;var ee=[],et=[],er=Array(3*_),en=Array(3*_),ei=null;o&&(ei=[]);for(var eo=new FaceIndex(s,er,en,$,ee,et,ei),F=0;F<_;++F)for(var N=s[F],es=0;es<3;++es){var j=N[es],Z=N[(es+1)%3],el=er[3*F+es]=eo.locate(Z,j,i.opposite(Z,j)),ec=en[3*F+es]=i.isConstraint(j,Z);el<0&&(ec?et.push(F):(ee.push(F),$[F]=1),o&&ei.push([Z,j,-1]))}return eo}function filterCells(i,o,s){for(var _=0,F=0;F<i.length;++F)o[F]===s&&(i[_++]=i[F]);return i.length=_,i}function classifyFaces(i,o,s){var _=indexCells(i,s);if(0===o)return s?_.cells.concat(_.boundary):_.cells;for(var F=1,N=_.active,j=_.next,Z=_.flags,X=_.cells,$=_.constraint,ee=_.neighbor;N.length>0||j.length>0;){for(;N.length>0;){var et=N.pop();if(Z[et]!==-F){Z[et]=F,X[et];for(var er=0;er<3;++er){var en=ee[3*et+er];en>=0&&0===Z[en]&&($[3*et+er]?j.push(en):(N.push(en),Z[en]=F))}}}var ei=j;j=N,N=ei,j.length=0,F=-F}var eo=filterCells(X,Z,o);return s?eo.concat(_.boundary):eo}i.exports=classifyFaces,FaceIndex.prototype.locate=(_=[0,0,0],function(i,o,s){var N=i,j=o,Z=s;return(o<s?o<i&&(N=o,j=s,Z=i):s<i&&(N=s,j=i,Z=o),N<0)?-1:(_[0]=N,_[1]=j,_[2]=Z,F.eq(this.cells,_,compareCell))})},9971:function(i,o,s){"use strict";var _=s(5070),F=s(417)[3];function PartialHull(i,o,s,_,F){this.a=i,this.b=o,this.idx=s,this.lowerIds=_,this.upperIds=F}function Event(i,o,s,_){this.a=i,this.b=o,this.type=s,this.idx=_}function compareEvent(i,o){var s=i.a[0]-o.a[0]||i.a[1]-o.a[1]||i.type-o.type;return s||0!==i.type&&(s=F(i.a,i.b,o.b))?s:i.idx-o.idx}function testPoint(i,o){return F(i.a,i.b,o)}function addPoint(i,o,s,N,j){for(var Z=_.lt(o,N,testPoint),X=_.gt(o,N,testPoint),$=Z;$<X;++$){for(var ee=o[$],et=ee.lowerIds,er=et.length;er>1&&F(s[et[er-2]],s[et[er-1]],N)>0;)i.push([et[er-1],et[er-2],j]),er-=1;et.length=er,et.push(j);for(var en=ee.upperIds,er=en.length;er>1&&0>F(s[en[er-2]],s[en[er-1]],N);)i.push([en[er-2],en[er-1],j]),er-=1;en.length=er,en.push(j)}}function findSplit(i,o){var s;return(s=i.a[0]<o.a[0]?F(i.a,i.b,o.a):F(o.b,o.a,i.a))?s:(s=o.b[0]<i.b[0]?F(i.a,i.b,o.b):F(o.b,o.a,i.b))||i.idx-o.idx}function splitHulls(i,o,s){var F=_.le(i,s,findSplit),N=i[F],j=N.upperIds,Z=j[j.length-1];N.upperIds=[Z],i.splice(F+1,0,new PartialHull(s.a,s.b,s.idx,[Z],j))}function mergeHulls(i,o,s){var F=s.a;s.a=s.b,s.b=F;var N=_.eq(i,s,findSplit),j=i[N];i[N-1].upperIds=j.upperIds,i.splice(N,1)}function monotoneTriangulate(i,o){for(var s=i.length,_=o.length,F=[],N=0;N<s;++N)F.push(new Event(i[N],null,0,N));for(var N=0;N<_;++N){var j=o[N],Z=i[j[0]],X=i[j[1]];Z[0]<X[0]?F.push(new Event(Z,X,2,N),new Event(X,Z,1,N)):Z[0]>X[0]&&F.push(new Event(X,Z,2,N),new Event(Z,X,1,N))}F.sort(compareEvent);for(var $=F[0].a[0]-(1+Math.abs(F[0].a[0]))*2220446049250313e-31,ee=[new PartialHull([$,1],[$,0],-1,[],[],[],[])],et=[],N=0,er=F.length;N<er;++N){var en=F[N],ei=en.type;0===ei?addPoint(et,ee,i,en.a,en.idx):2===ei?splitHulls(ee,i,en):mergeHulls(ee,i,en)}return et}i.exports=monotoneTriangulate},743:function(i,o,s){"use strict";var _=s(5070);function Triangulation(i,o){this.stars=i,this.edges=o}i.exports=createTriangulation;var F=Triangulation.prototype;function removePair(i,o,s){for(var _=1,F=i.length;_<F;_+=2)if(i[_-1]===o&&i[_]===s){i[_-1]=i[F-2],i[_]=i[F-1],i.length=F-2;return}}function createTriangulation(i,o){for(var s=Array(i),_=0;_<i;++_)s[_]=[];return new Triangulation(s,o)}F.isConstraint=function(){var i=[0,0];function compareLex(i,o){return i[0]-o[0]||i[1]-o[1]}return function(o,s){return i[0]=Math.min(o,s),i[1]=Math.max(o,s),_.eq(this.edges,i,compareLex)>=0}}(),F.removeTriangle=function(i,o,s){var _=this.stars;removePair(_[i],o,s),removePair(_[o],s,i),removePair(_[s],i,o)},F.addTriangle=function(i,o,s){var _=this.stars;_[i].push(o,s),_[o].push(s,i),_[s].push(i,o)},F.opposite=function(i,o){for(var s=this.stars[o],_=1,F=s.length;_<F;_+=2)if(s[_]===i)return s[_-1];return -1},F.flip=function(i,o){var s=this.opposite(i,o),_=this.opposite(o,i);this.removeTriangle(i,o,s),this.removeTriangle(o,i,_),this.addTriangle(i,_,s),this.addTriangle(o,s,_)},F.edges=function(){for(var i=this.stars,o=[],s=0,_=i.length;s<_;++s)for(var F=i[s],N=0,j=F.length;N<j;N+=2)o.push([F[N],F[N+1]]);return o},F.cells=function(){for(var i=this.stars,o=[],s=0,_=i.length;s<_;++s)for(var F=i[s],N=0,j=F.length;N<j;N+=2){var Z=F[N],X=F[N+1];s<Math.min(Z,X)&&o.push([s,Z,X])}return o}},9887:function(i){"use strict";function orientation(i){for(var o=1,s=1;s<i.length;++s)for(var _=0;_<s;++_)if(i[s]<i[_])o=-o;else if(i[_]===i[s])return 0;return o}i.exports=orientation},9243:function(i,o,s){"use strict";var _=s(3094),F=s(6606);function dot(i,o){for(var s=0,_=i.length,F=0;F<_;++F)s+=i[F]*o[F];return s}function barycentricCircumcenter(i){var o=i.length;if(0===o)return[];i[0].length;var s=_([i.length+1,i.length+1],1),N=_([i.length+1],1);s[o][o]=0;for(var j=0;j<o;++j){for(var Z=0;Z<=j;++Z)s[Z][j]=s[j][Z]=2*dot(i[j],i[Z]);N[j]=dot(i[j],i[j])}for(var X=F(s,N),$=0,ee=X[o+1],j=0;j<ee.length;++j)$+=ee[j];for(var et=Array(o),j=0;j<o;++j){for(var ee=X[j],er=0,Z=0;Z<ee.length;++Z)er+=ee[Z];et[j]=er/$}return et}function circumcenter(i){if(0===i.length)return[];for(var o=i[0].length,s=_([o]),F=barycentricCircumcenter(i),N=0;N<i.length;++N)for(var j=0;j<o;++j)s[j]+=i[N][j]*F[N];return s}circumcenter.barycenetric=barycentricCircumcenter,i.exports=circumcenter},1778:function(i,o,s){i.exports=circumradius;var _=s(9243);function circumradius(i){for(var o=_(i),s=0,F=0;F<i.length;++F)for(var N=i[F],j=0;j<o.length;++j)s+=Math.pow(N[j]-o[j],2);return Math.sqrt(s/i.length)}},197:function(i,o,s){"use strict";i.exports=cleanPSLG;var _=s(1731),F=s(2569),N=s(4434),j=s(5125),Z=s(8846),X=s(7999),$=s(2826),ee=s(8551),et=s(5528);function boundRat(i){var o=X(i);return[ee(o,-1/0),ee(o,1/0)]}function boundEdges(i,o){for(var s=Array(o.length),_=0;_<o.length;++_){var F=o[_],N=i[F[0]],j=i[F[1]];s[_]=[ee(Math.min(N[0],j[0]),-1/0),ee(Math.min(N[1],j[1]),-1/0),ee(Math.max(N[0],j[0]),1/0),ee(Math.max(N[1],j[1]),1/0)]}return s}function boundPoints(i){for(var o=Array(i.length),s=0;s<i.length;++s){var _=i[s];o[s]=[ee(_[0],-1/0),ee(_[1],-1/0),ee(_[0],1/0),ee(_[1],1/0)]}return o}function getCrossings(i,o,s){var _=[];return F(s,function(s,F){var j=o[s],Z=o[F];j[0]!==Z[0]&&j[0]!==Z[1]&&j[1]!==Z[0]&&j[1]!==Z[1]&&N(i[j[0]],i[j[1]],i[Z[0]],i[Z[1]])&&_.push([s,F])}),_}function getTJunctions(i,o,s,_){var j=[];return F(s,_,function(s,_){var F=o[s];if(F[0]!==_&&F[1]!==_){var Z=i[_];N(i[F[0]],i[F[1]],Z,Z)&&j.push([s,_])}}),j}function cutEdges(i,o,s,_,F){var N=i.map(function(i){return[j(i[0]),j(i[1])]});for(el=0;el<s.length;++el){var ee=s[el];ec=ee[0];var er=ee[1],en=o[ec],ei=o[er],eo=et($(i[en[0]]),$(i[en[1]]),$(i[ei[0]]),$(i[ei[1]]));if(eo){var es=i.length;i.push([X(eo[0]),X(eo[1])]),N.push(eo),_.push([ec,es],[er,es])}}for(_.sort(function(i,o){if(i[0]!==o[0])return i[0]-o[0];var s=N[i[1]],_=N[o[1]];return Z(s[0],_[0])||Z(s[1],_[1])}),el=_.length-1;el>=0;--el){var el,ec,eu,ef=_[el],ed=o[ec=ef[0]],eh=ed[0],ep=ed[1],eg=i[eh],em=i[ep];if(0>(eg[0]-em[0]||eg[1]-em[1])){var ey=eh;eh=ep,ep=ey}ed[0]=eh;var ev=ed[1]=ef[1];for(F&&(eu=ed[2]);el>0&&_[el-1][0]===ec;){var ef=_[--el],ex=ef[1];F?o.push([ev,ex,eu]):o.push([ev,ex]),ev=ex}F?o.push([ev,ep,eu]):o.push([ev,ep])}return N}function dedupPoints(i,o,s){for(var N=o.length,j=new _(N),Z=[],X=0;X<o.length;++X){var $=o[X],et=boundRat($[0]),er=boundRat($[1]);Z.push([ee(et[0],-1/0),ee(er[0],-1/0),ee(et[1],1/0),ee(er[1],1/0)])}F(Z,function(i,o){j.link(i,o)});for(var en=!0,ei=Array(N),X=0;X<N;++X){var eo=j.find(X);eo!==X&&(en=!1,i[eo]=[Math.min(i[X][0],i[eo][0]),Math.min(i[X][1],i[eo][1])])}if(en)return null;for(var es=0,X=0;X<N;++X){var eo=j.find(X);eo===X?(ei[X]=es,i[es++]=i[X]):ei[X]=-1}i.length=es;for(var X=0;X<N;++X)ei[X]<0&&(ei[X]=ei[j.find(X)]);return ei}function compareLex2(i,o){return i[0]-o[0]||i[1]-o[1]}function compareLex3(i,o){return i[0]-o[0]||i[1]-o[1]||(i[2]<o[2]?-1:i[2]>o[2]?1:0)}function dedupEdges(i,o,s){if(0!==i.length){if(o)for(var _=0;_<i.length;++_){var F=i[_],N=o[F[0]],j=o[F[1]];F[0]=Math.min(N,j),F[1]=Math.max(N,j)}else for(var _=0;_<i.length;++_){var F=i[_],N=F[0],j=F[1];F[0]=Math.min(N,j),F[1]=Math.max(N,j)}s?i.sort(compareLex3):i.sort(compareLex2);for(var Z=1,_=1;_<i.length;++_){var X=i[_-1],$=i[_];($[0]!==X[0]||$[1]!==X[1]||s&&$[2]!==X[2])&&(i[Z++]=$)}i.length=Z}}function preRound(i,o,s){var _=dedupPoints(i,[],boundPoints(i));return dedupEdges(o,_,s),!!_}function snapRound(i,o,s){var _=boundEdges(i,o),F=getCrossings(i,o,_),N=boundPoints(i),j=getTJunctions(i,o,_,N),Z=cutEdges(i,o,F,j,s),X=dedupPoints(i,Z,N);return dedupEdges(o,X,s),!!X||F.length>0||j.length>0}function cleanPSLG(i,o,s){if(s){_=o;for(var _,F=Array(o.length),N=0;N<o.length;++N){var j=o[N];F[N]=[j[0],j[1],s[N]]}o=F}for(var Z=preRound(i,o,!!s);snapRound(i,o,!!s);)Z=!0;if(s&&Z){_.length=0,s.length=0;for(var N=0;N<o.length;++N){var j=o[N];_.push([j[0],j[1]]),s.push(j[2])}}return Z}},5528:function(i,o,s){"use strict";i.exports=solveIntersection;var _=s(3962),F=s(9189),N=s(4354),j=s(4951),Z=s(6695),X=s(7584),$=s(4469);function ratPerp(i,o){return N(_(i[0],o[1]),_(i[1],o[0]))}function solveIntersection(i,o,s,_){var N=Z(o,i),ee=Z(_,s),et=ratPerp(N,ee);if(0===j(et))return null;var er=$(N,F(ratPerp(ee,Z(i,s)),et));return X(i,er)}},5692:function(i){i.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(i,o,s){"use strict";var _=s(5692),F=s(3578);function createColormap(i){if(i||(i={}),ee=(i.nshades||72)-1,$=i.format||"hex",(X=i.colormap)||(X="jet"),"string"==typeof X){if(!_[X=X.toLowerCase()])throw Error(X+" not a supported colorscale");Z=_[X]}else if(Array.isArray(X))Z=X.slice();else throw Error("unsupported colormap option",X);if(Z.length>ee+1)throw Error(X+" map requires nshades to be at least size "+Z.length);er=Array.isArray(i.alpha)?2!==i.alpha.length?[1,1]:i.alpha.slice():"number"==typeof i.alpha?[i.alpha,i.alpha]:[1,1],o=Z.map(function(i){return Math.round(i.index*ee)}),er[0]=Math.min(Math.max(er[0],0),1),er[1]=Math.min(Math.max(er[1],0),1);var o,s,N,j,Z,X,$,ee,et,er,en,ei=Z.map(function(i,o){var s=Z[o].index,_=Z[o].rgb.slice();return 4===_.length&&_[3]>=0&&_[3]<=1||(_[3]=er[0]+(er[1]-er[0])*s),_}),et=[];for(en=0;en<o.length-1;++en){j=o[en+1]-o[en],s=ei[en],N=ei[en+1];for(var eo=0;eo<j;eo++){var es=eo/j;et.push([Math.round(F(s[0],N[0],es)),Math.round(F(s[1],N[1],es)),Math.round(F(s[2],N[2],es)),F(s[3],N[3],es)])}}return et.push(Z[Z.length-1].rgb.concat(er[1])),"hex"===$?et=et.map(rgb2hex):"rgbaString"===$?et=et.map(rgbaStr):"float"===$&&(et=et.map(rgb2float)),et}function rgb2float(i){return[i[0]/255,i[1]/255,i[2]/255,i[3]]}function rgb2hex(i){for(var o,s="#",_=0;_<3;++_)s+=("00"+(o=(o=i[_]).toString(16))).substr(o.length);return s}function rgbaStr(i){return"rgba("+i.join(",")+")"}i.exports=createColormap},9398:function(i,o,s){"use strict";i.exports=compareAngle;var _=s(417),F=s(7538),N=s(87),j=s(2019),Z=s(9662);function testInterior(i,o,s){var _=N(i[0],-o[0]),F=N(i[1],-o[1]),X=N(s[0],-o[0]),$=N(s[1],-o[1]),ee=Z(j(_,X),j(F,$));return ee[ee.length-1]>=0}function compareAngle(i,o,s,N){var j=_(o,s,N);if(0===j){var Z=F(_(i,o,s)),X=F(_(i,o,N));if(Z===X){if(0===Z){var $=testInterior(i,o,s);if($===testInterior(i,o,N));else if($)return 1;else return -1}return 0}return 0===X?Z>0?-1:testInterior(i,o,N)?-1:1:0===Z?X>0?1:testInterior(i,o,s)?1:-1:F(X-Z)}var ee=_(i,o,s);return ee>0?j>0&&_(i,o,N)>0?1:-1:ee<0?j>0||_(i,o,N)>0?1:-1:_(i,o,N)>0?1:testInterior(i,o,s)?1:-1}},7538:function(i){"use strict";i.exports=function(i){return i<0?-1:i>0?1:0}},9209:function(i){i.exports=compareCells;var o=Math.min;function compareInt(i,o){return i-o}function compareCells(i,s){var _=i.length,F=i.length-s.length;if(F)return F;switch(_){case 0:return 0;case 1:return i[0]-s[0];case 2:return i[0]+i[1]-s[0]-s[1]||o(i[0],i[1])-o(s[0],s[1]);case 3:var N=i[0]+i[1],j=s[0]+s[1];if(F=N+i[2]-(j+s[2]))return F;var Z=o(i[0],i[1]),X=o(s[0],s[1]);return o(Z,i[2])-o(X,s[2])||o(Z+i[2],N)-o(X+s[2],j);case 4:var $=i[0],ee=i[1],et=i[2],er=i[3],en=s[0],ei=s[1],eo=s[2],es=s[3];return $+ee+et+er-(en+ei+eo+es)||o($,ee,et,er)-o(en,ei,eo,es,en)||o($+ee,$+et,$+er,ee+et,ee+er,et+er)-o(en+ei,en+eo,en+es,ei+eo,ei+es,eo+es)||o($+ee+et,$+ee+er,$+et+er,ee+et+er)-o(en+ei+eo,en+ei+es,en+eo+es,ei+eo+es);default:for(var el=i.slice().sort(compareInt),ec=s.slice().sort(compareInt),eu=0;eu<_;++eu)if(F=el[eu]-ec[eu])return F;return 0}}},1284:function(i,o,s){"use strict";var _=s(9209),F=s(9887);function compareOrientedCells(i,o){return _(i,o)||F(i)-F(o)}i.exports=compareOrientedCells},5537:function(i,o,s){"use strict";var _=s(8950),F=s(8722),N=s(3332);function convexHull(i){var o=i.length;if(0===o)return[];if(1===o)return[[0]];var s=i[0].length;return 0===s?[]:1===s?_(i):2===s?F(i):N(i,s)}i.exports=convexHull},8950:function(i){"use strict";function convexHull1d(i){for(var o=0,s=0,_=1;_<i.length;++_)i[_][0]<i[o][0]&&(o=_),i[_][0]>i[s][0]&&(s=_);return o<s?[[o],[s]]:o>s?[[s],[o]]:[[o]]}i.exports=convexHull1d},8722:function(i,o,s){"use strict";i.exports=convexHull2D;var _=s(3266);function convexHull2D(i){var o=_(i),s=o.length;if(s<=2)return[];for(var F=Array(s),N=o[s-1],j=0;j<s;++j){var Z=o[j];F[j]=[N,Z],N=Z}return F}},3332:function(i,o,s){"use strict";i.exports=convexHullnD;var _=s(2183),F=s(2153);function permute(i,o){for(var s=i.length,_=Array(s),F=0;F<o.length;++F)_[F]=i[o[F]];for(var N=o.length,F=0;F<s;++F)0>o.indexOf(F)&&(_[N++]=i[F]);return _}function invPermute(i,o){for(var s=i.length,_=o.length,F=0;F<s;++F)for(var N=i[F],j=0;j<N.length;++j){var Z=N[j];if(Z<_)N[j]=o[Z];else{Z-=_;for(var X=0;X<_;++X)Z>=o[X]&&(Z+=1);N[j]=Z}}return i}function convexHullnD(i,o){try{return _(i,!0)}catch(N){var s=F(i);if(s.length<=o)return[];return invPermute(_(permute(i,s),!0),s)}}},9680:function(i){"use strict";function dcubicHermite(i,o,s,_,F,N){var j=6*F*F-6*F,Z=3*F*F-4*F+1,X=-6*F*F+6*F,$=3*F*F-2*F;if(i.length){N||(N=Array(i.length));for(var ee=i.length-1;ee>=0;--ee)N[ee]=j*i[ee]+Z*o[ee]+X*s[ee]+$*_[ee];return N}return j*i+Z*o+X*s[ee]+$*_}function cubicHermite(i,o,s,_,F,N){var j=F-1,Z=F*F,X=j*j,$=(1+2*F)*X,ee=F*X,et=Z*(3-2*F),er=Z*j;if(i.length){N||(N=Array(i.length));for(var en=i.length-1;en>=0;--en)N[en]=$*i[en]+ee*o[en]+et*s[en]+er*_[en];return N}return $*i+ee*o+et*s+er*_}i.exports=cubicHermite,i.exports.derivative=dcubicHermite},4419:function(i,o,s){"use strict";var _=s(2183),F=s(1215);function LiftedPoint(i,o){this.point=i,this.index=o}function compareLifted(i,o){for(var s=i.point,_=o.point,F=s.length,N=0;N<F;++N){var j=_[N]-s[N];if(j)return j}return 0}function triangulate1D(i,o,s){if(1===i)return s?[[-1,0]]:[];var _=o.map(function(i,o){return[i[0],o]});_.sort(function(i,o){return i[0]-o[0]});for(var F=Array(i-1),N=1;N<i;++N){var j=_[N-1],Z=_[N];F[N-1]=[j[1],Z[1]]}return s&&F.push([-1,F[0][1]],[F[i-1][1],-1]),F}function triangulate(i,o){var s=i.length;if(0===s)return[];var N=i[0].length;if(N<1)return[];if(1===N)return triangulate1D(s,i,o);for(var j=Array(s),Z=1,X=0;X<s;++X){for(var $=i[X],ee=Array(N+1),et=0,er=0;er<N;++er){var en=$[er];ee[er]=en,et+=en*en}ee[N]=et,j[X]=new LiftedPoint(ee,X),Z=Math.max(et,Z)}F(j,compareLifted);for(var ei=Array((s=j.length)+N+1),eo=Array(s+N+1),es=(N+1)*(N+1)*Z,el=Array(N+1),X=0;X<=N;++X)el[X]=0;el[N]=es,ei[0]=el.slice(),eo[0]=-1;for(var X=0;X<=N;++X){var ee=el.slice();ee[X]=1,ei[X+1]=ee,eo[X+1]=-1}for(var X=0;X<s;++X){var ec=j[X];ei[X+N+1]=ec.point,eo[X+N+1]=ec.index}var eu=_(ei,!1);if(eu=o?eu.filter(function(i){for(var o=0,s=0;s<=N;++s){var _=eo[i[s]];if(_<0&&++o>=2)return!1;i[s]=_}return!0}):eu.filter(function(i){for(var o=0;o<=N;++o){var s=eo[i[o]];if(s<0)return!1;i[o]=s}return!0}),1&N)for(var X=0;X<eu.length;++X){var ec=eu[X],ee=ec[0];ec[0]=ec[1],ec[1]=ee}return eu}i.exports=triangulate},8362:function(i){var o=!1;if("undefined"!=typeof Float64Array){var s=new Float64Array(1),F=new Uint32Array(s.buffer);if(s[0]=1,o=!0,1072693248===F[1]){function toDoubleLE(i,o){return F[0]=i,F[1]=o,s[0]}function lowUintLE(i){return s[0]=i,F[0]}function highUintLE(i){return s[0]=i,F[1]}i.exports=function(i){return s[0]=i,[F[0],F[1]]},i.exports.pack=toDoubleLE,i.exports.lo=lowUintLE,i.exports.hi=highUintLE}else if(1072693248===F[0]){function toDoubleBE(i,o){return F[1]=i,F[0]=o,s[0]}function lowUintBE(i){return s[0]=i,F[1]}function highUintBE(i){return s[0]=i,F[0]}i.exports=function(i){return s[0]=i,[F[1],F[0]]},i.exports.pack=toDoubleBE,i.exports.lo=lowUintBE,i.exports.hi=highUintBE}else o=!1}if(!o){var N=new _(8);function toDouble(i,o){return N.writeUInt32LE(i,0,!0),N.writeUInt32LE(o,4,!0),N.readDoubleLE(0,!0)}function lowUint(i){return N.writeDoubleLE(i,0,!0),N.readUInt32LE(0,!0)}function highUint(i){return N.writeDoubleLE(i,0,!0),N.readUInt32LE(4,!0)}i.exports=function(i){return N.writeDoubleLE(i,0,!0),[N.readUInt32LE(0,!0),N.readUInt32LE(4,!0)]},i.exports.pack=toDouble,i.exports.lo=lowUint,i.exports.hi=highUint}i.exports.sign=function(o){return i.exports.hi(o)>>>31},i.exports.exponent=function(o){return(i.exports.hi(o)<<1>>>21)-1023},i.exports.fraction=function(o){var s=i.exports.lo(o),_=i.exports.hi(o),F=1048575&_;return 2146435072&_&&(F+=1048576),[s,F]},i.exports.denormalized=function(o){return!(2146435072&i.exports.hi(o))}},3094:function(i){"use strict";function dupe_array(i,o,s){var _=0|i[s];if(_<=0)return[];var F,N=Array(_);if(s===i.length-1)for(F=0;F<_;++F)N[F]=o;else for(F=0;F<_;++F)N[F]=dupe_array(i,o,s+1);return N}function dupe_number(i,o){var s,_;for(_=0,s=Array(i);_<i;++_)s[_]=o;return s}function dupe(i,o){switch(void 0===o&&(o=0),typeof i){case"number":if(i>0)return dupe_number(0|i,o);break;case"object":if("number"==typeof i.length)return dupe_array(i,o,0)}return[]}i.exports=dupe},8348:function(i,o,s){"use strict";i.exports=edgeToAdjacency;var _=s(1215);function edgeToAdjacency(i,o){var s=i.length;if("number"!=typeof o){o=0;for(var F=0;F<s;++F){var N=i[F];o=Math.max(o,N[0],N[1])}o=(0|o)+1}for(var j=Array(o|=0),F=0;F<o;++F)j[F]=[];for(var F=0;F<s;++F){var N=i[F];j[N[0]].push(N[1]),j[N[1]].push(N[0])}for(var Z=0;Z<o;++Z)_(j[Z],function(i,o){return i-o});return j}},5795:function(i){"use strict";function extractPlanes(i,o,s){var _=o||0,F=s||1;return[[i[12]+i[0],i[13]+i[1],i[14]+i[2],i[15]+i[3]],[i[12]-i[0],i[13]-i[1],i[14]-i[2],i[15]-i[3]],[i[12]+i[4],i[13]+i[5],i[14]+i[6],i[15]+i[7]],[i[12]-i[4],i[13]-i[5],i[14]-i[6],i[15]-i[7]],[_*i[12]+i[8],_*i[13]+i[9],_*i[14]+i[10],_*i[15]+i[11]],[F*i[12]-i[8],F*i[13]-i[9],F*i[14]-i[10],F*i[15]-i[11]]]}i.exports=extractPlanes},8444:function(i,o,s){"use strict";i.exports=createFilteredVector;var _=s(9680),F=s(5070);function clamp(i,o,s){return Math.min(o,Math.max(i,s))}function FilteredVector(i,o,s){this.dimension=i.length,this.bounds=[Array(this.dimension),Array(this.dimension)];for(var _=0;_<this.dimension;++_)this.bounds[0][_]=-1/0,this.bounds[1][_]=1/0;this._state=i.slice().reverse(),this._velocity=o.slice().reverse(),this._time=[s],this._scratch=[i.slice(),i.slice(),i.slice(),i.slice(),i.slice()]}var N=FilteredVector.prototype;function getZero(i){for(var o=Array(i),s=0;s<i;++s)o[s]=0;return o}function createFilteredVector(i,o,s){switch(arguments.length){case 0:return new FilteredVector([0],[0],0);case 1:if("number"!=typeof i)return new FilteredVector(i,getZero(i.length),0);var _=getZero(i);return new FilteredVector(_,_,0);case 2:if("number"==typeof o){var _=getZero(i.length);return new FilteredVector(i,_,+o)}s=0;case 3:if(i.length!==o.length)throw Error("state and velocity lengths must match");return new FilteredVector(i,o,s)}}N.flush=function(i){var o=F.gt(this._time,i)-1;o<=0||(this._time.splice(0,o),this._state.splice(0,o*this.dimension),this._velocity.splice(0,o*this.dimension))},N.curve=function(i){var o=this._time,s=o.length,N=F.le(o,i),j=this._scratch[0],Z=this._state,X=this._velocity,$=this.dimension,ee=this.bounds;if(N<0)for(var et=$-1,er=0;er<$;++er,--et)j[er]=Z[et];else if(N>=s-1)for(var et=Z.length-1,en=i-o[s-1],er=0;er<$;++er,--et)j[er]=Z[et]+en*X[et];else{for(var et=$*(N+1)-1,ei=o[N],eo=o[N+1]-ei||1,es=this._scratch[1],el=this._scratch[2],ec=this._scratch[3],eu=this._scratch[4],ef=!0,er=0;er<$;++er,--et)es[er]=Z[et],ec[er]=X[et]*eo,el[er]=Z[et+$],eu[er]=X[et+$]*eo,ef=ef&&es[er]===el[er]&&ec[er]===eu[er]&&0===ec[er];if(ef)for(var er=0;er<$;++er)j[er]=es[er];else _(es,ec,el,eu,(i-ei)/eo,j)}for(var ed=ee[0],eh=ee[1],er=0;er<$;++er)j[er]=clamp(ed[er],eh[er],j[er]);return j},N.dcurve=function(i){var o=this._time,s=o.length,N=F.le(o,i),j=this._scratch[0],Z=this._state,X=this._velocity,$=this.dimension;if(N>=s-1){var ee=Z.length-1;o[s-1];for(var et=0;et<$;++et,--ee)j[et]=X[ee]}else{for(var ee=$*(N+1)-1,er=o[N],en=o[N+1]-er||1,ei=this._scratch[1],eo=this._scratch[2],es=this._scratch[3],el=this._scratch[4],ec=!0,et=0;et<$;++et,--ee)ei[et]=Z[ee],es[et]=X[ee]*en,eo[et]=Z[ee+$],el[et]=X[ee+$]*en,ec=ec&&ei[et]===eo[et]&&es[et]===el[et]&&0===es[et];if(ec)for(var et=0;et<$;++et)j[et]=0;else{_.derivative(ei,es,eo,el,(i-er)/en,j);for(var et=0;et<$;++et)j[et]/=en}}return j},N.lastT=function(){var i=this._time;return i[i.length-1]},N.stable=function(){for(var i=this._velocity,o=i.length,s=this.dimension-1;s>=0;--s)if(i[--o])return!1;return!0},N.jump=function(i){var o=this.lastT(),s=this.dimension;if(!(i<o)&&arguments.length===s+1){var _=this._state,F=this._velocity,N=_.length-this.dimension,j=this.bounds,Z=j[0],X=j[1];this._time.push(o,i);for(var $=0;$<2;++$)for(var ee=0;ee<s;++ee)_.push(_[N++]),F.push(0);this._time.push(i);for(var ee=s;ee>0;--ee)_.push(clamp(Z[ee-1],X[ee-1],arguments[ee])),F.push(0)}},N.push=function(i){var o=this.lastT(),s=this.dimension;if(!(i<o)&&arguments.length===s+1){var _=this._state,F=this._velocity,N=_.length-this.dimension,j=i-o,Z=this.bounds,X=Z[0],$=Z[1],ee=j>1e-6?1/j:0;this._time.push(i);for(var et=s;et>0;--et){var er=clamp(X[et-1],$[et-1],arguments[et]);_.push(er),F.push((er-_[N++])*ee)}}},N.set=function(i){var o=this.dimension;if(!(i<this.lastT())&&arguments.length===o+1){var s=this._state,_=this._velocity,F=this.bounds,N=F[0],j=F[1];this._time.push(i);for(var Z=o;Z>0;--Z)s.push(clamp(N[Z-1],j[Z-1],arguments[Z])),_.push(0)}},N.move=function(i){var o=this.lastT(),s=this.dimension;if(!(i<=o)&&arguments.length===s+1){var _=this._state,F=this._velocity,N=_.length-this.dimension,j=this.bounds,Z=j[0],X=j[1],$=i-o,ee=$>1e-6?1/$:0;this._time.push(i);for(var et=s;et>0;--et){var er=arguments[et];_.push(clamp(Z[et-1],X[et-1],_[N++]+er)),F.push(er*ee)}}},N.idle=function(i){var o=this.lastT();if(!(i<o)){var s=this.dimension,_=this._state,F=this._velocity,N=_.length-s,j=this.bounds,Z=j[0],X=j[1],$=i-o;this._time.push(i);for(var ee=s-1;ee>=0;--ee)_.push(clamp(Z[ee],X[ee],_[N]+$*F[N])),F.push(0),N+=1}}},7080:function(i){"use strict";function RBNode(i,o,s,_,F,N){this._color=i,this.key=o,this.value=s,this.left=_,this.right=F,this._count=N}function cloneNode(i){return new RBNode(i._color,i.key,i.value,i.left,i.right,i._count)}function repaint(i,o){return new RBNode(i,o.key,o.value,o.left,o.right,o._count)}function recount(i){i._count=1+(i.left?i.left._count:0)+(i.right?i.right._count:0)}function RedBlackTree(i,o){this._compare=i,this.root=o}i.exports=createRBTree;var o=RedBlackTree.prototype;function doVisitFull(i,o){if(o.left){var s=doVisitFull(i,o.left);if(s)return s}var s=i(o.key,o.value);return s||(o.right?doVisitFull(i,o.right):void 0)}function doVisitHalf(i,o,s,_){if(0>=o(i,_.key)){if(_.left){var F=doVisitHalf(i,o,s,_.left);if(F)return F}var F=s(_.key,_.value);if(F)return F}if(_.right)return doVisitHalf(i,o,s,_.right)}function doVisit(i,o,s,_,F){var N,j=s(i,F.key),Z=s(o,F.key);return j<=0&&(F.left&&(N=doVisit(i,o,s,_,F.left))||Z>0&&(N=_(F.key,F.value)))?N:Z>0&&F.right?doVisit(i,o,s,_,F.right):void 0}function RedBlackTreeIterator(i,o){this.tree=i,this._stack=o}Object.defineProperty(o,"keys",{get:function(){var i=[];return this.forEach(function(o,s){i.push(o)}),i}}),Object.defineProperty(o,"values",{get:function(){var i=[];return this.forEach(function(o,s){i.push(s)}),i}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(i,o){for(var s=this._compare,_=this.root,F=[],N=[];_;){var j=s(i,_.key);F.push(_),N.push(j),_=j<=0?_.left:_.right}F.push(new RBNode(0,i,o,null,null,1));for(var Z=F.length-2;Z>=0;--Z){var _=F[Z];N[Z]<=0?F[Z]=new RBNode(_._color,_.key,_.value,F[Z+1],_.right,_._count+1):F[Z]=new RBNode(_._color,_.key,_.value,_.left,F[Z+1],_._count+1)}for(var Z=F.length-1;Z>1;--Z){var X=F[Z-1],_=F[Z];if(1===X._color||1===_._color)break;var $=F[Z-2];if($.left===X){if(X.left===_){var ee=$.right;if(ee&&0===ee._color)X._color=1,$.right=repaint(1,ee),$._color=0,Z-=1;else{if($._color=0,$.left=X.right,X._color=1,X.right=$,F[Z-2]=X,F[Z-1]=_,recount($),recount(X),Z>=3){var et=F[Z-3];et.left===$?et.left=X:et.right=X}break}}else{var ee=$.right;if(ee&&0===ee._color)X._color=1,$.right=repaint(1,ee),$._color=0,Z-=1;else{if(X.right=_.left,$._color=0,$.left=_.right,_._color=1,_.left=X,_.right=$,F[Z-2]=_,F[Z-1]=X,recount($),recount(X),recount(_),Z>=3){var et=F[Z-3];et.left===$?et.left=_:et.right=_}break}}}else if(X.right===_){var ee=$.left;if(ee&&0===ee._color)X._color=1,$.left=repaint(1,ee),$._color=0,Z-=1;else{if($._color=0,$.right=X.left,X._color=1,X.left=$,F[Z-2]=X,F[Z-1]=_,recount($),recount(X),Z>=3){var et=F[Z-3];et.right===$?et.right=X:et.left=X}break}}else{var ee=$.left;if(ee&&0===ee._color)X._color=1,$.left=repaint(1,ee),$._color=0,Z-=1;else{if(X.left=_.right,$._color=0,$.right=_.left,_._color=1,_.right=X,_.left=$,F[Z-2]=_,F[Z-1]=X,recount($),recount(X),recount(_),Z>=3){var et=F[Z-3];et.right===$?et.right=_:et.left=_}break}}}return F[0]._color=1,new RedBlackTree(s,F[0])},o.forEach=function(i,o,s){if(this.root)switch(arguments.length){case 1:return doVisitFull(i,this.root);case 2:return doVisitHalf(o,this._compare,i,this.root);case 3:if(this._compare(o,s)>=0)return;return doVisit(o,s,this._compare,i,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var i=[],o=this.root;o;)i.push(o),o=o.left;return new RedBlackTreeIterator(this,i)}}),Object.defineProperty(o,"end",{get:function(){for(var i=[],o=this.root;o;)i.push(o),o=o.right;return new RedBlackTreeIterator(this,i)}}),o.at=function(i){if(i<0)return new RedBlackTreeIterator(this,[]);for(var o=this.root,s=[];;){if(s.push(o),o.left){if(i<o.left._count){o=o.left;continue}i-=o.left._count}if(!i)return new RedBlackTreeIterator(this,s);if(i-=1,o.right){if(i>=o.right._count)break;o=o.right}else break}return new RedBlackTreeIterator(this,[])},o.ge=function(i){for(var o=this._compare,s=this.root,_=[],F=0;s;){var N=o(i,s.key);_.push(s),N<=0&&(F=_.length),s=N<=0?s.left:s.right}return _.length=F,new RedBlackTreeIterator(this,_)},o.gt=function(i){for(var o=this._compare,s=this.root,_=[],F=0;s;){var N=o(i,s.key);_.push(s),N<0&&(F=_.length),s=N<0?s.left:s.right}return _.length=F,new RedBlackTreeIterator(this,_)},o.lt=function(i){for(var o=this._compare,s=this.root,_=[],F=0;s;){var N=o(i,s.key);_.push(s),N>0&&(F=_.length),s=N<=0?s.left:s.right}return _.length=F,new RedBlackTreeIterator(this,_)},o.le=function(i){for(var o=this._compare,s=this.root,_=[],F=0;s;){var N=o(i,s.key);_.push(s),N>=0&&(F=_.length),s=N<0?s.left:s.right}return _.length=F,new RedBlackTreeIterator(this,_)},o.find=function(i){for(var o=this._compare,s=this.root,_=[];s;){var F=o(i,s.key);if(_.push(s),0===F)return new RedBlackTreeIterator(this,_);s=F<=0?s.left:s.right}return new RedBlackTreeIterator(this,[])},o.remove=function(i){var o=this.find(i);return o?o.remove():this},o.get=function(i){for(var o=this._compare,s=this.root;s;){var _=o(i,s.key);if(0===_)return s.value;s=_<=0?s.left:s.right}};var s=RedBlackTreeIterator.prototype;function swapNode(i,o){i.key=o.key,i.value=o.value,i.left=o.left,i.right=o.right,i._color=o._color,i._count=o._count}function fixDoubleBlack(i){for(var o,s,_,F,N=i.length-1;N>=0;--N){if(o=i[N],0===N){o._color=1;return}if((s=i[N-1]).left===o){if((_=s.right).right&&0===_.right._color){if(F=(_=s.right=cloneNode(_)).right=cloneNode(_.right),s.right=_.left,_.left=s,_.right=F,_._color=s._color,o._color=1,s._color=1,F._color=1,recount(s),recount(_),N>1){var j=i[N-2];j.left===s?j.left=_:j.right=_}i[N-1]=_;return}if(_.left&&0===_.left._color){if(F=(_=s.right=cloneNode(_)).left=cloneNode(_.left),s.right=F.left,_.left=F.right,F.left=s,F.right=_,F._color=s._color,s._color=1,_._color=1,o._color=1,recount(s),recount(_),recount(F),N>1){var j=i[N-2];j.left===s?j.left=F:j.right=F}i[N-1]=F;return}if(1===_._color){if(0===s._color){s._color=1,s.right=repaint(0,_);return}s.right=repaint(0,_);continue}if(_=cloneNode(_),s.right=_.left,_.left=s,_._color=s._color,s._color=0,recount(s),recount(_),N>1){var j=i[N-2];j.left===s?j.left=_:j.right=_}i[N-1]=_,i[N]=s,N+1<i.length?i[N+1]=o:i.push(o),N+=2}else{if((_=s.left).left&&0===_.left._color){if(F=(_=s.left=cloneNode(_)).left=cloneNode(_.left),s.left=_.right,_.right=s,_.left=F,_._color=s._color,o._color=1,s._color=1,F._color=1,recount(s),recount(_),N>1){var j=i[N-2];j.right===s?j.right=_:j.left=_}i[N-1]=_;return}if(_.right&&0===_.right._color){if(F=(_=s.left=cloneNode(_)).right=cloneNode(_.right),s.left=F.right,_.right=F.left,F.right=s,F.left=_,F._color=s._color,s._color=1,_._color=1,o._color=1,recount(s),recount(_),recount(F),N>1){var j=i[N-2];j.right===s?j.right=F:j.left=F}i[N-1]=F;return}if(1===_._color){if(0===s._color){s._color=1,s.left=repaint(0,_);return}s.left=repaint(0,_);continue}if(_=cloneNode(_),s.left=_.right,_.right=s,_._color=s._color,s._color=0,recount(s),recount(_),N>1){var j=i[N-2];j.right===s?j.right=_:j.left=_}i[N-1]=_,i[N]=s,N+1<i.length?i[N+1]=o:i.push(o),N+=2}}}function defaultCompare(i,o){return i<o?-1:i>o?1:0}function createRBTree(i){return new RedBlackTree(i||defaultCompare,null)}Object.defineProperty(s,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(s,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),s.clone=function(){return new RedBlackTreeIterator(this.tree,this._stack.slice())},s.remove=function(){var i=this._stack;if(0===i.length)return this.tree;var o=Array(i.length),s=i[i.length-1];o[o.length-1]=new RBNode(s._color,s.key,s.value,s.left,s.right,s._count);for(var _=i.length-2;_>=0;--_){var s=i[_];s.left===i[_+1]?o[_]=new RBNode(s._color,s.key,s.value,o[_+1],s.right,s._count):o[_]=new RBNode(s._color,s.key,s.value,s.left,o[_+1],s._count)}if((s=o[o.length-1]).left&&s.right){var F=o.length;for(s=s.left;s.right;)o.push(s),s=s.right;var N=o[F-1];o.push(new RBNode(s._color,N.key,N.value,s.left,s.right,s._count)),o[F-1].key=s.key,o[F-1].value=s.value;for(var _=o.length-2;_>=F;--_)s=o[_],o[_]=new RBNode(s._color,s.key,s.value,s.left,o[_+1],s._count);o[F-1].left=o[F]}if(0===(s=o[o.length-1])._color){var j=o[o.length-2];j.left===s?j.left=null:j.right===s&&(j.right=null),o.pop();for(var _=0;_<o.length;++_)o[_]._count--}else if(s.left||s.right){s.left?swapNode(s,s.left):s.right&&swapNode(s,s.right),s._color=1;for(var _=0;_<o.length-1;++_)o[_]._count--}else{if(1===o.length)return new RedBlackTree(this.tree._compare,null);for(var _=0;_<o.length;++_)o[_]._count--;var Z=o[o.length-2];fixDoubleBlack(o),Z.left===s?Z.left=null:Z.right=null}return new RedBlackTree(this.tree._compare,o[0])},Object.defineProperty(s,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(s,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(s,"index",{get:function(){var i=0,o=this._stack;if(0===o.length){var s=this.tree.root;return s?s._count:0}o[o.length-1].left&&(i=o[o.length-1].left._count);for(var _=o.length-2;_>=0;--_)o[_+1]===o[_].right&&(++i,o[_].left&&(i+=o[_].left._count));return i},enumerable:!0}),s.next=function(){var i=this._stack;if(0!==i.length){var o=i[i.length-1];if(o.right)for(o=o.right;o;)i.push(o),o=o.left;else for(i.pop();i.length>0&&i[i.length-1].right===o;)o=i[i.length-1],i.pop()}},Object.defineProperty(s,"hasNext",{get:function(){var i=this._stack;if(0===i.length)return!1;if(i[i.length-1].right)return!0;for(var o=i.length-1;o>0;--o)if(i[o-1].left===i[o])return!0;return!1}}),s.update=function(i){var o=this._stack;if(0===o.length)throw Error("Can't update empty node!");var s=Array(o.length),_=o[o.length-1];s[s.length-1]=new RBNode(_._color,_.key,i,_.left,_.right,_._count);for(var F=o.length-2;F>=0;--F)(_=o[F]).left===o[F+1]?s[F]=new RBNode(_._color,_.key,_.value,s[F+1],_.right,_._count):s[F]=new RBNode(_._color,_.key,_.value,_.left,s[F+1],_._count);return new RedBlackTree(this.tree._compare,s[0])},s.prev=function(){var i=this._stack;if(0!==i.length){var o=i[i.length-1];if(o.left)for(o=o.left;o;)i.push(o),o=o.right;else for(i.pop();i.length>0&&i[i.length-1].left===o;)o=i[i.length-1],i.pop()}},Object.defineProperty(s,"hasPrev",{get:function(){var i=this._stack;if(0===i.length)return!1;if(i[i.length-1].left)return!0;for(var o=i.length-1;o>0;--o)if(i[o-1].right===i[o])return!0;return!1}})},7453:function(i,o,s){"use strict";i.exports=createAxes;var _=s(9557),F=s(1681),N=s(1011),j=s(2864),Z=s(8468),X=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function copyVec3(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i}function Axes(i){this.gl=i,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=N(i)}var $=Axes.prototype;function OffsetInfo(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}$.update=function(i){function parseOption(o,s,_){if(_ in i){var F,N=i[_],j=this[_];(o?Array.isArray(N)&&Array.isArray(N[0]):Array.isArray(N))?this[_]=F=[s(N[0]),s(N[1]),s(N[2])]:this[_]=F=[s(N),s(N),s(N)];for(var Z=0;Z<3;++Z)if(F[Z]!==j[Z])return!0}return!1}i=i||{};var o,s=parseOption.bind(this,!1,Number),N=parseOption.bind(this,!1,Boolean),j=parseOption.bind(this,!1,String),X=parseOption.bind(this,!0,function(i){if(Array.isArray(i)){if(3===i.length)return[+i[0],+i[1],+i[2],1];if(4===i.length)return[+i[0],+i[1],+i[2],+i[3]]}return[0,0,0,1]}),$=!1,ee=!1;if("bounds"in i)for(var et=i.bounds,er=0;er<2;++er)for(var en=0;en<3;++en)et[er][en]!==this.bounds[er][en]&&(ee=!0),this.bounds[er][en]=et[er][en];if("ticks"in i){o=i.ticks,$=!0,this.autoTicks=!1;for(var er=0;er<3;++er)this.tickSpacing[er]=0}else s("tickSpacing")&&(this.autoTicks=!0,ee=!0);if(this._firstInit&&("ticks"in i||"tickSpacing"in i||(this.autoTicks=!0),ee=!0,$=!0,this._firstInit=!1),ee&&this.autoTicks&&(o=Z.create(this.bounds,this.tickSpacing),$=!0),$){for(var er=0;er<3;++er)o[er].sort(function(i,o){return i.x-o.x});Z.equal(o,this.ticks)?$=!1:this.ticks=o}N("tickEnable"),j("tickFont")&&($=!0),s("tickSize"),s("tickAngle"),s("tickPad"),X("tickColor");var ei=j("labels");j("labelFont")&&(ei=!0),N("labelEnable"),s("labelSize"),s("labelPad"),X("labelColor"),N("lineEnable"),N("lineMirror"),s("lineWidth"),X("lineColor"),N("lineTickEnable"),N("lineTickMirror"),s("lineTickLength"),s("lineTickWidth"),X("lineTickColor"),N("gridEnable"),s("gridWidth"),X("gridColor"),N("zeroEnable"),X("zeroLineColor"),s("zeroLineWidth"),N("backgroundEnable"),X("backgroundColor"),this._text?this._text&&(ei||$)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=_(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&$&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=F(this.gl,this.bounds,this.ticks))};var ee=[new OffsetInfo,new OffsetInfo,new OffsetInfo];function computeLineOffset(i,o,s,_,F){for(var N=i.primalOffset,j=i.primalMinor,Z=i.mirrorOffset,X=i.mirrorMinor,$=_[o],ee=0;ee<3;++ee)if(o!==ee){var et=N,er=Z,en=j,ei=X;$&1<<ee&&(et=Z,er=N,en=X,ei=j),et[ee]=s[0][ee],er[ee]=s[1][ee],F[ee]>0?(en[ee]=-1,ei[ee]=0):(en[ee]=0,ei[ee]=1)}}var et=[0,0,0],er={model:X,view:X,projection:X,_ortho:!1};$.isOpaque=function(){return!0},$.isTransparent=function(){return!1},$.drawTransparent=function(i){};var en=[0,0,0],ei=[0,0,0],eo=[0,0,0];function createAxes(i,o){var s=new Axes(i);return s.update(o),s}$.draw=function(i){i=i||er;for(var o,s,_,F=this.gl,N=i.model||X,Z=i.view||X,$=i.projection||X,es=this.bounds,el=i._ortho||!1,ec=j(N,Z,$,es,el),eu=ec.cubeEdges,ef=ec.axis,ed=Z[12],eh=Z[13],ep=Z[14],eg=Z[15],em=(el?2:1)*this.pixelRatio*($[3]*ed+$[7]*eh+$[11]*ep+$[15]*eg)/F.drawingBufferHeight,ey=0;ey<3;++ey)this.lastCubeProps.cubeEdges[ey]=eu[ey],this.lastCubeProps.axis[ey]=ef[ey];for(var ey=0;ey<3;++ey)computeLineOffset(ee[ey],ey,this.bounds,eu,ef);for(var F=this.gl,ey=0;ey<3;++ey)this.backgroundEnable[ey]?et[ey]=ef[ey]:et[ey]=0;this._background.draw(N,Z,$,es,et,this.backgroundColor),this._lines.bind(N,Z,$,this);for(var ey=0;ey<3;++ey){var ev=[0,0,0];ef[ey]>0?ev[ey]=es[1][ey]:ev[ey]=es[0][ey];for(var ex=0;ex<2;++ex){var e_=(ey+1+ex)%3,ew=(ey+1+(1^ex))%3;this.gridEnable[e_]&&this._lines.drawGrid(e_,ew,this.bounds,ev,this.gridColor[e_],this.gridWidth[e_]*this.pixelRatio)}for(var ex=0;ex<2;++ex){var e_=(ey+1+ex)%3,ew=(ey+1+(1^ex))%3;this.zeroEnable[ew]&&0>=Math.min(es[0][ew],es[1][ew])&&Math.max(es[0][ew],es[1][ew])>=0&&this._lines.drawZero(e_,ew,this.bounds,ev,this.zeroLineColor[ew],this.zeroLineWidth[ew]*this.pixelRatio)}}for(var ey=0;ey<3;++ey){this.lineEnable[ey]&&this._lines.drawAxisLine(ey,this.bounds,ee[ey].primalOffset,this.lineColor[ey],this.lineWidth[ey]*this.pixelRatio),this.lineMirror[ey]&&this._lines.drawAxisLine(ey,this.bounds,ee[ey].mirrorOffset,this.lineColor[ey],this.lineWidth[ey]*this.pixelRatio);for(var eT=copyVec3(en,ee[ey].primalMinor),ek=copyVec3(ei,ee[ey].mirrorMinor),eA=this.lineTickLength,ex=0;ex<3;++ex){var eS=em/N[5*ex];eT[ex]*=eA[ex]*eS,ek[ex]*=eA[ex]*eS}this.lineTickEnable[ey]&&this._lines.drawAxisTicks(ey,ee[ey].primalOffset,eT,this.lineTickColor[ey],this.lineTickWidth[ey]*this.pixelRatio),this.lineTickMirror[ey]&&this._lines.drawAxisTicks(ey,ee[ey].mirrorOffset,ek,this.lineTickColor[ey],this.lineTickWidth[ey]*this.pixelRatio)}function alignTo(i){(_=[0,0,0])[i]=1}function solveTickAlignments(i,o,s){var _=(i+1)%3,F=(i+2)%3,N=o[_],j=o[F],Z=s[_],X=s[F];if(N>0&&X>0||N>0&&X<0||N<0&&X>0||N<0&&X<0){alignTo(_);return}if(j>0&&Z>0){alignTo(F);return}if(j>0&&Z<0){alignTo(F);return}if(j<0&&Z>0){alignTo(F);return}else if(j<0&&Z<0){alignTo(F);return}}this._lines.unbind(),this._text.bind(N,Z,$,this.pixelRatio);for(var ey=0;ey<3;++ey){for(var eM=ee[ey].primalMinor,eC=ee[ey].mirrorMinor,eE=copyVec3(eo,ee[ey].primalOffset),ex=0;ex<3;++ex)this.lineTickEnable[ey]&&(eE[ex]+=em*eM[ex]*Math.max(this.lineTickLength[ex],0)/N[5*ex]);var eL=[0,0,0];if(eL[ey]=1,this.tickEnable[ey]){-3600===this.tickAngle[ey]?(this.tickAngle[ey]=0,this.tickAlign[ey]="auto"):this.tickAlign[ey]=-1,s=1,"auto"===(o=[this.tickAlign[ey],.5,s])[0]?o[0]=0:o[0]=parseInt(""+o[0]),_=[0,0,0],solveTickAlignments(ey,eM,eC);for(var ex=0;ex<3;++ex)eE[ex]+=em*eM[ex]*this.tickPad[ex]/N[5*ex];this._text.drawTicks(ey,this.tickSize[ey],this.tickAngle[ey],eE,this.tickColor[ey],eL,_,o)}if(this.labelEnable[ey]){s=0,_=[0,0,0],this.labels[ey].length>4&&(alignTo(ey),s=1),"auto"===(o=[this.labelAlign[ey],.5,s])[0]?o[0]=0:o[0]=parseInt(""+o[0]);for(var ex=0;ex<3;++ex)eE[ex]+=em*eM[ex]*this.labelPad[ex]/N[5*ex];eE[ey]+=.5*(es[0][ey]+es[1][ey]),this._text.drawLabel(ey,this.labelSize[ey],this.labelAngle[ey],eE,this.labelColor[ey],[0,0,0],_,o)}}this._text.unbind()},$.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(i,o,s){"use strict";i.exports=createBackgroundCube;var _=s(5827),F=s(2944),N=s(1943).bg;function BackgroundCube(i,o,s,_){this.gl=i,this.buffer=o,this.vao=s,this.shader=_}var j=BackgroundCube.prototype;function createBackgroundCube(i){for(var o=[],s=[],j=0,Z=0;Z<3;++Z)for(var X=(Z+1)%3,$=(Z+2)%3,ee=[0,0,0],et=[0,0,0],er=-1;er<=1;er+=2){s.push(j,j+2,j+1,j+1,j+2,j+3),ee[Z]=er,et[Z]=er;for(var en=-1;en<=1;en+=2){ee[X]=en;for(var ei=-1;ei<=1;ei+=2)ee[$]=ei,o.push(ee[0],ee[1],ee[2],et[0],et[1],et[2]),j+=1}var eo=X;X=$,$=eo}var es=_(i,new Float32Array(o)),el=_(i,new Uint16Array(s),i.ELEMENT_ARRAY_BUFFER),ec=F(i,[{buffer:es,type:i.FLOAT,size:3,offset:0,stride:24},{buffer:es,type:i.FLOAT,size:3,offset:12,stride:24}],el),eu=N(i);return eu.attributes.position.location=0,eu.attributes.normal.location=1,new BackgroundCube(i,es,ec,eu)}j.draw=function(i,o,s,_,F,N){for(var j=!1,Z=0;Z<3;++Z)j=j||F[Z];if(j){var X=this.gl;X.enable(X.POLYGON_OFFSET_FILL),X.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:i,view:o,projection:s,bounds:_,enable:F,colors:N},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),X.disable(X.POLYGON_OFFSET_FILL)}},j.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(i,o,s){"use strict";i.exports=getCubeEdges;var _=s(2288),F=s(104),N=s(4670),j=s(417),Z=Array(16),X=Array(8),$=Array(8),ee=[,,,],et=[0,0,0];function transformHg(i,o,s){for(var _=0;_<4;++_){i[_]=s[12+_];for(var F=0;F<3;++F)i[_]+=o[F]*s[4*F+_]}}!function(){for(var i=0;i<8;++i)X[i]=[1,1,1,1],$[i]=[1,1,1]}();var er=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function polygonArea(i){for(var o=0;o<er.length;++o)if((i=N.positive(i,er[o])).length<3)return 0;for(var s=i[0],_=s[0]/s[3],F=s[1]/s[3],j=0,o=1;o+1<i.length;++o){var Z=i[o],X=i[o+1],$=Z[0]/Z[3],ee=Z[1]/Z[3],et=X[0]/X[3],en=X[1]/X[3],ei=ee-F;j+=Math.abs(($-_)*(en-F)-ei*(et-_))}return j}var en=[1,1,1],ei=[0,0,0],eo={cubeEdges:en,axis:ei};function getCubeEdges(i,o,s,N,er){F(Z,o,i),F(Z,s,Z);for(var es=0,el=0;el<2;++el){ee[2]=N[el][2];for(var ec=0;ec<2;++ec){ee[1]=N[ec][1];for(var eu=0;eu<2;++eu)ee[0]=N[eu][0],transformHg(X[es],ee,Z),es+=1}}for(var ef=-1,el=0;el<8;++el){for(var ed=X[el][3],eh=0;eh<3;++eh)$[el][eh]=X[el][eh]/ed;er&&($[el][2]*=-1),ed<0&&(ef<0?ef=el:$[el][2]<$[ef][2]&&(ef=el))}if(ef<0){ef=0;for(var ep=0;ep<3;++ep){for(var eg=(ep+2)%3,em=(ep+1)%3,ey=-1,ev=-1,ex=0;ex<2;++ex){var e_=ex<<ep,ew=e_+(ex<<eg)+(1-ex<<em),eT=e_+(1-ex<<eg)+(ex<<em);0>j($[e_],$[ew],$[eT],et)||(ex?ey=1:ev=1)}if(ey<0||ev<0){ev>ey&&(ef|=1<<ep);continue}for(var ex=0;ex<2;++ex){var e_=ex<<ep,ew=e_+(ex<<eg)+(1-ex<<em),eT=e_+(1-ex<<eg)+(ex<<em),ek=polygonArea([X[e_],X[ew],X[eT],X[e_+(1<<eg)+(1<<em)]]);ex?ey=ek:ev=ek}if(ev>ey){ef|=1<<ep;continue}}}for(var eA=7^ef,eS=-1,el=0;el<8;++el)el!==ef&&el!==eA&&(eS<0?eS=el:$[eS][1]>$[el][1]&&(eS=el));for(var eM=-1,el=0;el<3;++el){var eC=eS^1<<el;if(eC!==ef&&eC!==eA){eM<0&&(eM=eC);var em=$[eC];em[0]<$[eM][0]&&(eM=eC)}}for(var eE=-1,el=0;el<3;++el){var eC=eS^1<<el;if(eC!==ef&&eC!==eA&&eC!==eM){eE<0&&(eE=eC);var em=$[eC];em[0]>$[eE][0]&&(eE=eC)}}en[0]=en[1]=en[2]=0,en[_.log2(eM^eS)]=eS&eM,en[_.log2(eS^eE)]=eS&eE;var eL=7^eE;eL===ef||eL===eA?(eL=7^eM,en[_.log2(eE^eL)]=eL&eE):en[_.log2(eM^eL)]=eL&eM;for(var eP=ef,ep=0;ep<3;++ep)eP&1<<ep?ei[ep]=-1:ei[ep]=1;return eo}},1681:function(i,o,s){"use strict";i.exports=createLines;var _=s(5827),F=s(2944),N=s(1943).j,j=[0,0,0],Z=[0,0,0],X=[0,0,0],$=[0,0,0],ee=[1,1];function zeroVec(i){return i[0]=i[1]=i[2]=0,i}function copyVec(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i}function Lines(i,o,s,_,F,N,j,Z){this.gl=i,this.vertBuffer=o,this.vao=s,this.shader=_,this.tickCount=F,this.tickOffset=N,this.gridCount=j,this.gridOffset=Z}var et=Lines.prototype;function createLines(i,o,s){var j=[],Z=[0,0,0],X=[0,0,0],$=[0,0,0],ee=[0,0,0];j.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var et=0;et<3;++et){for(var er=j.length/3|0,en=0;en<s[et].length;++en){var ei=+s[et][en].x;j.push(ei,0,1,ei,1,1,ei,0,-1,ei,0,-1,ei,1,1,ei,1,-1)}var eo=j.length/3|0;Z[et]=er,X[et]=eo-er;for(var er=j.length/3|0,es=0;es<s[et].length;++es){var ei=+s[et][es].x;j.push(ei,0,1,ei,1,1,ei,0,-1,ei,0,-1,ei,1,1,ei,1,-1)}var eo=j.length/3|0;$[et]=er,ee[et]=eo-er}var el=_(i,new Float32Array(j)),ec=F(i,[{buffer:el,type:i.FLOAT,size:3,stride:0,offset:0}]),eu=N(i);return eu.attributes.position.location=0,new Lines(i,el,ec,eu,X,Z,ee,$)}et.bind=function(i,o,s){this.shader.bind(),this.shader.uniforms.model=i,this.shader.uniforms.view=o,this.shader.uniforms.projection=s,ee[0]=this.gl.drawingBufferWidth,ee[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=ee,this.vao.bind()},et.unbind=function(){this.vao.unbind()},et.drawAxisLine=function(i,o,s,_,F){var N=zeroVec(Z);this.shader.uniforms.majorAxis=Z,N[i]=o[1][i]-o[0][i],this.shader.uniforms.minorAxis=N;var j=copyVec($,s);j[i]+=o[0][i],this.shader.uniforms.offset=j,this.shader.uniforms.lineWidth=F,this.shader.uniforms.color=_;var ee=zeroVec(X);ee[(i+2)%3]=1,this.shader.uniforms.screenAxis=ee,this.vao.draw(this.gl.TRIANGLES,6);var ee=zeroVec(X);ee[(i+1)%3]=1,this.shader.uniforms.screenAxis=ee,this.vao.draw(this.gl.TRIANGLES,6)},et.drawAxisTicks=function(i,o,s,_,F){if(this.tickCount[i]){var N=zeroVec(j);N[i]=1,this.shader.uniforms.majorAxis=N,this.shader.uniforms.offset=o,this.shader.uniforms.minorAxis=s,this.shader.uniforms.color=_,this.shader.uniforms.lineWidth=F;var Z=zeroVec(X);Z[i]=1,this.shader.uniforms.screenAxis=Z,this.vao.draw(this.gl.TRIANGLES,this.tickCount[i],this.tickOffset[i])}},et.drawGrid=function(i,o,s,_,F,N){if(this.gridCount[i]){var ee=zeroVec(Z);ee[o]=s[1][o]-s[0][o],this.shader.uniforms.minorAxis=ee;var et=copyVec($,_);et[o]+=s[0][o],this.shader.uniforms.offset=et;var er=zeroVec(j);er[i]=1,this.shader.uniforms.majorAxis=er;var en=zeroVec(X);en[i]=1,this.shader.uniforms.screenAxis=en,this.shader.uniforms.lineWidth=N,this.shader.uniforms.color=F,this.vao.draw(this.gl.TRIANGLES,this.gridCount[i],this.gridOffset[i])}},et.drawZero=function(i,o,s,_,F,N){var j=zeroVec(Z);this.shader.uniforms.majorAxis=j,j[i]=s[1][i]-s[0][i],this.shader.uniforms.minorAxis=j;var ee=copyVec($,_);ee[i]+=s[0][i],this.shader.uniforms.offset=ee;var et=zeroVec(X);et[o]=1,this.shader.uniforms.screenAxis=et,this.shader.uniforms.lineWidth=N,this.shader.uniforms.color=F,this.vao.draw(this.gl.TRIANGLES,6)},et.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(i,o,s){"use strict";var _=s(6832),F=s(5158),N=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),j=_(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);o.j=function(i){return F(i,N,j,null,[{name:"position",type:"vec3"}])};var Z=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),X=_(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);o.f=function(i){return F(i,Z,X,null,[{name:"position",type:"vec3"}])};var $=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),ee=_(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);o.bg=function(i){return F(i,$,ee,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(i,o,s){"use strict";i.exports=createTextSprites;var _=s(5827),N=s(2944),j=s(875),Z=s(1943).f,X=window||F.global||{},$=X.__TEXT_CACHE||{};function TextSprites(i,o,s,_){this.gl=i,this.shader=o,this.buffer=s,this.vao=_,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}X.__TEXT_CACHE={};var ee=TextSprites.prototype,et=[0,0];function tryVectorizeText(i,o){try{return j(i,o)}catch(o){return console.warn('error vectorizing text:"'+i+'" error:',o),{cells:[],positions:[]}}}function createTextSprites(i,o,s,F,j,X){var $=_(i),ee=N(i,[{buffer:$,size:3}]),et=Z(i);et.attributes.position.location=0;var er=new TextSprites(i,et,$,ee);return er.update(o,s,F,j,X),er}ee.bind=function(i,o,s,_){this.vao.bind(),this.shader.bind();var F=this.shader.uniforms;F.model=i,F.view=o,F.projection=s,F.pixelScale=_,et[0]=this.gl.drawingBufferWidth,et[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=et},ee.unbind=function(){this.vao.unbind()},ee.update=function(i,o,s,_,F){var N=[];function addItem(i,o,s,_,F,j){var Z=$[s];Z||(Z=$[s]={});var X=Z[o];X||(X=Z[o]=tryVectorizeText(o,{triangles:!0,font:s,textAlign:"center",textBaseline:"middle",lineSpacing:F,styletags:j}));for(var ee=(_||12)/12,et=X.positions,er=X.cells,en=0,ei=er.length;en<ei;++en)for(var eo=er[en],es=2;es>=0;--es){var el=et[eo[es]];N.push(ee*el[0],-ee*el[1],i)}}for(var j=[0,0,0],Z=[0,0,0],X=[0,0,0],ee=[0,0,0],et={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},er=0;er<3;++er){X[er]=N.length/3|0,addItem(.5*(i[0][er]+i[1][er]),o[er],s[er],12,1.25,et),ee[er]=(N.length/3|0)-X[er],j[er]=N.length/3|0;for(var en=0;en<_[er].length;++en)_[er][en].text&&addItem(_[er][en].x,_[er][en].text,_[er][en].font||F,_[er][en].fontSize||12,1.25,et);Z[er]=(N.length/3|0)-j[er]}this.buffer.update(N),this.tickOffset=j,this.tickCount=Z,this.labelOffset=X,this.labelCount=ee},ee.drawTicks=function(i,o,s,_,F,N,j,Z){this.tickCount[i]&&(this.shader.uniforms.axis=N,this.shader.uniforms.color=F,this.shader.uniforms.angle=s,this.shader.uniforms.scale=o,this.shader.uniforms.offset=_,this.shader.uniforms.alignDir=j,this.shader.uniforms.alignOpt=Z,this.vao.draw(this.gl.TRIANGLES,this.tickCount[i],this.tickOffset[i]))},ee.drawLabel=function(i,o,s,_,F,N,j,Z){this.labelCount[i]&&(this.shader.uniforms.axis=N,this.shader.uniforms.color=F,this.shader.uniforms.angle=s,this.shader.uniforms.scale=o,this.shader.uniforms.offset=_,this.shader.uniforms.alignDir=j,this.shader.uniforms.alignOpt=Z,this.vao.draw(this.gl.TRIANGLES,this.labelCount[i],this.labelOffset[i]))},ee.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(i,o){"use strict";function prettyPrint(i,o){var s=i+"",_=s.indexOf("."),F=0;_>=0&&(F=s.length-_-1);var N=Math.pow(10,F),j=Math.round(i*o*N),Z=j+"";if(Z.indexOf("e")>=0)return Z;var X=j/N,$=j%N;j<0?(X=0|-Math.ceil(X),$=0|-$):(X=0|Math.floor(X),$|=0);var ee=""+X;if(j<0&&(ee="-"+ee),!F)return ee;for(var et=""+$;et.length<F;)et="0"+et;return ee+"."+et}function defaultTicks(i,o){for(var s=[],_=0;_<3;++_){var F=[];i[0][_],i[1][_];for(var N=0;N*o[_]<=i[1][_];++N)F.push({x:N*o[_],text:prettyPrint(o[_],N)});for(var N=-1;N*o[_]>=i[0][_];--N)F.push({x:N*o[_],text:prettyPrint(o[_],N)});s.push(F)}return s}function ticksEqual(i,o){for(var s=0;s<3;++s){if(i[s].length!==o[s].length)return!1;for(var _=0;_<i[s].length;++_){var F=i[s][_],N=o[s][_];if(F.x!==N.x||F.text!==N.text||F.font!==N.font||F.fontColor!==N.fontColor||F.fontSize!==N.fontSize||F.dx!==N.dx||F.dy!==N.dy)return!1}}return!0}o.create=defaultTicks,o.equal=ticksEqual},2771:function(i,o,s){"use strict";i.exports=axesProperties;var _=s(5795),F=s(4670),N=s(2864),j=s(104),Z=s(2142),X=s(6342),$=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),ee=new Float32Array(16);function AxesRange3D(i,o,s){this.lo=i,this.hi=o,this.pixelsPerDataUnit=s}var et=[0,0,0,1],er=[0,0,0,1];function gradient(i,o,s,_,F){for(var N=0;N<3;++N){for(var j=0;j<3;++j)er[j]=et[j]=s[j];er[3]=et[3]=1,er[N]+=1,X(er,er,o),er[3]<0&&(i[N]=1/0),et[N]-=1,X(et,et,o),et[3]<0&&(i[N]=1/0);var Z=(et[0]/et[3]-er[0]/er[3])*_,$=(et[1]/et[3]-er[1]/er[3])*F;i[N]=.25*Math.sqrt(Z*Z+$*$)}return i}var en=[new AxesRange3D(1/0,-1/0,1/0),new AxesRange3D(1/0,-1/0,1/0),new AxesRange3D(1/0,-1/0,1/0)],ei=[0,0,0];function axesProperties(i,o,s,X,et){var er=o.model||$,eo=o.view||$,es=o.projection||$,el=o._ortho||!1,ec=i.bounds,et=et||N(er,eo,es,ec,el),eu=et.axis;j(ee,eo,er),j(ee,es,ee);for(var ef=0;ef<3;++ef)en[ef].lo=1/0,en[ef].hi=-1/0,en[ef].pixelsPerDataUnit=1/0;var ed=_(Z(ee,ee));Z(ee,ee);for(var eh=0;eh<3;++eh){var ep=(eh+1)%3,eg=(eh+2)%3;i:for(var ef=0;ef<2;++ef){var em=[];if(eu[eh]<0!=!!ef){ei[eh]=ec[ef][eh];for(var ey=0;ey<2;++ey){ei[ep]=ec[ey^ef][ep];for(var ev=0;ev<2;++ev)ei[eg]=ec[ev^ey^ef][eg],em.push(ei.slice())}for(var ex=el?5:4,ey=ex;ey===ex;++ey){if(0===em.length)continue i;em=F.positive(em,ed[ey])}for(var ey=0;ey<em.length;++ey)for(var eg=em[ey],e_=gradient(ei,ee,eg,s,X),ev=0;ev<3;++ev)en[ev].lo=Math.min(en[ev].lo,eg[ev]),en[ev].hi=Math.max(en[ev].hi,eg[ev]),ev!==eh&&(en[ev].pixelsPerDataUnit=Math.min(en[ev].pixelsPerDataUnit,Math.abs(e_[ev])))}}}return en}},5827:function(i,o,s){"use strict";var _=s(5306),F=s(7498),N=s(5050),j=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function GLBuffer(i,o,s,_,F){this.gl=i,this.type=o,this.handle=s,this.length=_,this.usage=F}var Z=GLBuffer.prototype;function updateTypeArray(i,o,s,_,F,N){var j=F.length*F.BYTES_PER_ELEMENT;if(N<0)return i.bufferData(o,F,_),j;if(j+N>s)throw Error("gl-buffer: If resizing buffer, must not specify offset");return i.bufferSubData(o,N,F),s}function makeScratchTypeArray(i,o){for(var s=_.malloc(i.length,o),F=i.length,N=0;N<F;++N)s[N]=i[N];return s}function isPacked(i,o){for(var s=1,_=o.length-1;_>=0;--_){if(o[_]!==s)return!1;s*=i[_]}return!0}function createBuffer(i,o,s,_){if(s=s||i.ARRAY_BUFFER,_=_||i.DYNAMIC_DRAW,s!==i.ARRAY_BUFFER&&s!==i.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(_!==i.DYNAMIC_DRAW&&_!==i.STATIC_DRAW&&_!==i.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var F=i.createBuffer(),N=new GLBuffer(i,s,F,0,_);return N.update(o),N}Z.bind=function(){this.gl.bindBuffer(this.type,this.handle)},Z.unbind=function(){this.gl.bindBuffer(this.type,null)},Z.dispose=function(){this.gl.deleteBuffer(this.handle)},Z.update=function(i,o){if("number"!=typeof o&&(o=-1),this.bind(),"object"==typeof i&&void 0!==i.shape){var s,Z=i.dtype;if(0>j.indexOf(Z)&&(Z="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(Z=gl.getExtension("OES_element_index_uint")&&"uint16"!==Z?"uint32":"uint16"),Z===i.dtype&&isPacked(i.shape,i.stride))0===i.offset&&i.data.length===i.shape[0]?this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,i.data,o):this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,i.data.subarray(i.offset,i.shape[0]),o);else{var X=_.malloc(i.size,Z),$=N(X,i.shape);F.assign($,i),o<0?this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,X,o):this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,X.subarray(0,i.size),o),_.free(X)}}else if(Array.isArray(i))s=this.type===this.gl.ELEMENT_ARRAY_BUFFER?makeScratchTypeArray(i,"uint16"):makeScratchTypeArray(i,"float32"),o<0?this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,s,o):this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,s.subarray(0,i.length),o),_.free(s);else if("object"==typeof i&&"number"==typeof i.length)this.length=updateTypeArray(this.gl,this.type,this.length,this.usage,i,o);else if("number"==typeof i||void 0===i){if(o>=0)throw Error("gl-buffer: Cannot specify offset when resizing buffer");(i|=0)<=0&&(i=1),this.gl.bufferData(this.type,0|i,this.usage),this.length=i}else throw Error("gl-buffer: Invalid data type")},i.exports=createBuffer},1140:function(i,o,s){"use strict";var _=s(2858);i.exports=function(i,o){var s=i.positions,F=i.vectors,N={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(0===i.positions.length)return o&&(o[0]=[0,0,0],o[1]=[0,0,0]),N;for(var j=0,Z=1/0,X=-1/0,$=1/0,ee=-1/0,et=1/0,er=-1/0,en=null,ei=null,eo=[],es=1/0,el=!1,ec=0;ec<s.length;ec++){var eu=s[ec];Z=Math.min(eu[0],Z),X=Math.max(eu[0],X),$=Math.min(eu[1],$),ee=Math.max(eu[1],ee),et=Math.min(eu[2],et),er=Math.max(eu[2],er);var ef=F[ec];if(_.length(ef)>j&&(j=_.length(ef)),ec){var ed=2*_.distance(en,eu)/(_.length(ei)+_.length(ef));ed?(es=Math.min(es,ed),el=!1):el=!0}el||(en=eu,ei=ef),eo.push(ef)}var eh=[Z,$,et],ep=[X,ee,er];o&&(o[0]=eh,o[1]=ep),0===j&&(j=1);var eg=1/j;isFinite(es)||(es=1),N.vectorScale=es;var em=i.coneSize||.5;i.absoluteConeSize&&(em=i.absoluteConeSize*eg),N.coneScale=em;for(var ec=0,ey=0;ec<s.length;ec++)for(var eu=s[ec],ev=eu[0],ex=eu[1],e_=eu[2],ew=eo[ec],eT=_.length(ew)*eg,ek=0;ek<8;ek++){N.positions.push([ev,ex,e_,ey++]),N.positions.push([ev,ex,e_,ey++]),N.positions.push([ev,ex,e_,ey++]),N.positions.push([ev,ex,e_,ey++]),N.positions.push([ev,ex,e_,ey++]),N.positions.push([ev,ex,e_,ey++]),N.vectors.push(ew),N.vectors.push(ew),N.vectors.push(ew),N.vectors.push(ew),N.vectors.push(ew),N.vectors.push(ew),N.vertexIntensity.push(eT,eT,eT),N.vertexIntensity.push(eT,eT,eT);var eA=N.positions.length;N.cells.push([eA-6,eA-5,eA-4],[eA-3,eA-2,eA-1])}return N};var F=s(7234);i.exports.createMesh=s(5028),i.exports.createConeMesh=function(o,s){return i.exports.createMesh(o,s,{shaders:F,traceType:"cone"})}},5028:function(i,o,s){"use strict";var _=s(5158),F=s(5827),N=s(2944),j=s(8931),Z=s(104),X=s(7437),$=s(5050),ee=s(9156),et=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function VectorMesh(i,o,s,_,F,N,j,Z,X,$,ee){this.gl=i,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=o,this.dirty=!0,this.triShader=s,this.pickShader=_,this.trianglePositions=F,this.triangleVectors=N,this.triangleColors=Z,this.triangleUVs=X,this.triangleIds=j,this.triangleVAO=$,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=ee,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=et,this._view=et,this._projection=et,this._resolution=[1,1]}var er=VectorMesh.prototype;function genColormap(i){for(var o=ee({colormap:i,nshades:256,format:"rgba"}),s=new Uint8Array(1024),_=0;_<256;++_){for(var F=o[_],N=0;N<3;++N)s[4*_+N]=F[N];s[4*_+3]=255*F[3]}return $(s,[256,256,4],[4,0,1])}function takeZComponent(i){for(var o=i.length,s=Array(o),_=0;_<o;++_)s[_]=i[_][2];return s}function createMeshShader(i,o){var s=_(i,o.meshShader.vertex,o.meshShader.fragment,null,o.meshShader.attributes);return s.attributes.position.location=0,s.attributes.color.location=2,s.attributes.uv.location=3,s.attributes.vector.location=4,s}function createPickShader(i,o){var s=_(i,o.pickShader.vertex,o.pickShader.fragment,null,o.pickShader.attributes);return s.attributes.position.location=0,s.attributes.id.location=1,s.attributes.vector.location=4,s}function createVectorMesh(i,o,s){var _=s.shaders;1==arguments.length&&(i=(o=i).gl);var Z=createMeshShader(i,_),X=createPickShader(i,_),ee=j(i,$(new Uint8Array([255,255,255,255]),[1,1,4]));ee.generateMipmap(),ee.minFilter=i.LINEAR_MIPMAP_LINEAR,ee.magFilter=i.LINEAR;var et=F(i),er=F(i),en=F(i),ei=F(i),eo=F(i),es=N(i,[{buffer:et,type:i.FLOAT,size:4},{buffer:eo,type:i.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:en,type:i.FLOAT,size:4},{buffer:ei,type:i.FLOAT,size:2},{buffer:er,type:i.FLOAT,size:4}]),el=new VectorMesh(i,ee,Z,X,et,er,eo,en,ei,es,s.traceType||"cone");return el.update(o),el}er.isOpaque=function(){return this.opacity>=1},er.isTransparent=function(){return this.opacity<1},er.pickSlots=1,er.setPickBase=function(i){this.pickId=i},er.update=function(i){i=i||{};var o=this.gl;this.dirty=!0,"lightPosition"in i&&(this.lightPosition=i.lightPosition),"opacity"in i&&(this.opacity=i.opacity),"ambient"in i&&(this.ambientLight=i.ambient),"diffuse"in i&&(this.diffuseLight=i.diffuse),"specular"in i&&(this.specularLight=i.specular),"roughness"in i&&(this.roughness=i.roughness),"fresnel"in i&&(this.fresnel=i.fresnel),void 0!==i.tubeScale&&(this.tubeScale=i.tubeScale),void 0!==i.vectorScale&&(this.vectorScale=i.vectorScale),void 0!==i.coneScale&&(this.coneScale=i.coneScale),void 0!==i.coneOffset&&(this.coneOffset=i.coneOffset),i.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=o.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=o.LINEAR,this.texture.setPixels(genColormap(i.colormap)),this.texture.generateMipmap());var s=i.cells,_=i.positions,F=i.vectors;if(_&&s&&F){var N=[],j=[],Z=[],X=[],$=[];this.cells=s,this.positions=_,this.vectors=F;var ee=i.meshColor||[1,1,1,1],et=i.vertexIntensity,er=1/0,en=-1/0;if(et){if(i.vertexIntensityBounds)er=+i.vertexIntensityBounds[0],en=+i.vertexIntensityBounds[1];else for(var ei=0;ei<et.length;++ei){var eo=et[ei];er=Math.min(er,eo),en=Math.max(en,eo)}}else for(var ei=0;ei<_.length;++ei){var eo=_[ei][2];er=Math.min(er,eo),en=Math.max(en,eo)}et?this.intensity=et:this.intensity=takeZComponent(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var ei=0;ei<_.length;++ei)for(var es=_[ei],el=0;el<3;++el)!isNaN(es[el])&&isFinite(es[el])&&(this.bounds[0][el]=Math.min(this.bounds[0][el],es[el]),this.bounds[1][el]=Math.max(this.bounds[1][el],es[el]));var ec=0;o:for(var ei=0;ei<s.length;++ei){var eu=s[ei];if(3===eu.length){for(var el=0;el<3;++el)for(var ef=eu[el],es=_[ef],ed=0;ed<3;++ed)if(isNaN(es[ed])||!isFinite(es[ed]))continue o;for(var el=0;el<3;++el){var eh,ef=eu[2-el],es=_[ef];N.push(es[0],es[1],es[2],es[3]);var ep=F[ef];j.push(ep[0],ep[1],ep[2],ep[3]||0),3===ee.length?Z.push(ee[0],ee[1],ee[2],1):Z.push(ee[0],ee[1],ee[2],ee[3]),eh=et?[(et[ef]-er)/(en-er),0]:[(es[2]-er)/(en-er),0],X.push(eh[0],eh[1]),$.push(ei)}ec+=1}}this.triangleCount=ec,this.trianglePositions.update(N),this.triangleVectors.update(j),this.triangleColors.update(Z),this.triangleUVs.update(X),this.triangleIds.update(new Uint32Array($))}},er.drawTransparent=er.draw=function(i){i=i||{};for(var o=this.gl,s=i.model||et,_=i.view||et,F=i.projection||et,N=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)N[0][j]=Math.max(N[0][j],this.clipBounds[0][j]),N[1][j]=Math.min(N[1][j],this.clipBounds[1][j]);var $={model:s,view:_,projection:F,inverseModel:et.slice(),clipBounds:N,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};$.inverseModel=X($.inverseModel,$.model),o.disable(o.CULL_FACE),this.texture.bind(0);var ee=Array(16);Z(ee,$.view,$.model),Z(ee,$.projection,ee),X(ee,ee);for(var j=0;j<3;++j)$.eyePosition[j]=ee[12+j]/ee[15];for(var er=ee[15],j=0;j<3;++j)er+=this.lightPosition[j]*ee[4*j+3];for(var j=0;j<3;++j){for(var en=ee[12+j],ei=0;ei<3;++ei)en+=ee[4*ei+j]*this.lightPosition[ei];$.lightPosition[j]=en/er}if(this.triangleCount>0){var eo=this.triShader;eo.bind(),eo.uniforms=$,this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},er.drawPick=function(i){i=i||{};for(var o=this.gl,s=i.model||et,_=i.view||et,F=i.projection||et,N=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)N[0][j]=Math.max(N[0][j],this.clipBounds[0][j]),N[1][j]=Math.min(N[1][j],this.clipBounds[1][j]);this._model=[].slice.call(s),this._view=[].slice.call(_),this._projection=[].slice.call(F),this._resolution=[o.drawingBufferWidth,o.drawingBufferHeight];var Z={model:s,view:_,projection:F,clipBounds:N,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},X=this.pickShader;X.bind(),X.uniforms=Z,this.triangleCount>0&&(this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},er.pick=function(i){if(!i||i.id!==this.pickId)return null;var o=i.value[0]+256*i.value[1]+65536*i.value[2],s=this.cells[o],_=this.positions[s[1]].slice(0,3),F={position:_,dataCoordinate:_,index:Math.floor(s[1]/48)};return"cone"===this.traceType?F.index=Math.floor(s[1]/48):"streamtube"===this.traceType&&(F.intensity=this.intensity[s[1]],F.velocity=this.vectors[s[1]].slice(0,3),F.divergence=this.vectors[s[1]][3],F.index=o),F},er.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},i.exports=createVectorMesh},7234:function(i,o,s){var _=s(6832),F=_(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),N=_(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),j=_(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),Z=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);o.meshShader={vertex:F,fragment:N,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},o.pickShader={vertex:j,fragment:Z,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(i){i.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(i,o,s){var _=s(1950);i.exports=function(i){return _[i]}},3110:function(i,o,s){"use strict";i.exports=createErrorBars;var _=s(5827),F=s(2944),N=s(7667),j=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function ErrorBars(i,o,s,_){this.gl=i,this.shader=_,this.buffer=o,this.vao=s,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var Z=ErrorBars.prototype;function updateBounds(i,o){for(var s=0;s<3;++s)i[0][s]=Math.min(i[0][s],o[s]),i[1][s]=Math.max(i[1][s],o[s])}Z.isOpaque=function(){return!this.hasAlpha},Z.isTransparent=function(){return this.hasAlpha},Z.drawTransparent=Z.draw=function(i){var o=this.gl,s=this.shader.uniforms;this.shader.bind();var _=s.view=i.view||j,F=s.projection=i.projection||j;s.model=i.model||j,s.clipBounds=this.clipBounds,s.opacity=this.opacity;var N=_[12],Z=_[13],X=_[14],$=_[15],ee=(i._ortho?2:1)*this.pixelRatio*(F[3]*N+F[7]*Z+F[11]*X+F[15]*$)/o.drawingBufferHeight;this.vao.bind();for(var et=0;et<3;++et)o.lineWidth(this.lineWidth[et]*this.pixelRatio),s.capSize=this.capSize[et]*ee,this.lineCount[et]&&o.drawArrays(o.LINES,this.lineOffset[et],this.lineCount[et]);this.vao.unbind()};var X=function(){for(var i=[,,,],o=0;o<3;++o){for(var s=[],_=1;_<=2;++_)for(var F=-1;F<=1;F+=2){var N=[0,0,0];N[(_+o)%3]=F,s.push(N)}i[o]=s}return i}();function emitFace(i,o,s,_){for(var F=X[_],N=0;N<F.length;++N){var j=F[N];i.push(o[0],o[1],o[2],s[0],s[1],s[2],s[3],j[0],j[1],j[2])}return F.length}function createErrorBars(i){var o=i.gl,s=_(o),j=F(o,[{buffer:s,type:o.FLOAT,size:3,offset:0,stride:40},{buffer:s,type:o.FLOAT,size:4,offset:12,stride:40},{buffer:s,type:o.FLOAT,size:3,offset:28,stride:40}]),Z=N(o);Z.attributes.position.location=0,Z.attributes.color.location=1,Z.attributes.offset.location=2;var X=new ErrorBars(o,s,j,Z);return X.update(i),X}Z.update=function(i){"lineWidth"in(i=i||{})&&(this.lineWidth=i.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in i&&(this.capSize=i.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in i&&(this.opacity=+i.opacity,this.opacity<1&&(this.hasAlpha=!0));var o=i.color||[[0,0,0],[0,0,0],[0,0,0]],s=i.position,_=i.error;if(Array.isArray(o[0])||(o=[o,o,o]),s&&_){var F=[],N=s.length,j=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var Z=0;Z<3;++Z){this.lineOffset[Z]=j;i:for(var X=0;X<N;++X){for(var $=s[X],ee=0;ee<3;++ee)if(isNaN($[ee])||!isFinite($[ee]))continue i;var et=_[X],er=o[Z];if(Array.isArray(er[0])&&(er=o[X]),3===er.length?er=[er[0],er[1],er[2],1]:4===er.length&&(er=[er[0],er[1],er[2],er[3]],!this.hasAlpha&&er[3]<1&&(this.hasAlpha=!0)),!(isNaN(et[0][Z])||isNaN(et[1][Z]))){if(et[0][Z]<0){var en=$.slice();en[Z]+=et[0][Z],F.push($[0],$[1],$[2],er[0],er[1],er[2],er[3],0,0,0,en[0],en[1],en[2],er[0],er[1],er[2],er[3],0,0,0),updateBounds(this.bounds,en),j+=2+emitFace(F,en,er,Z)}if(et[1][Z]>0){var en=$.slice();en[Z]+=et[1][Z],F.push($[0],$[1],$[2],er[0],er[1],er[2],er[3],0,0,0,en[0],en[1],en[2],er[0],er[1],er[2],er[3],0,0,0),updateBounds(this.bounds,en),j+=2+emitFace(F,en,er,Z)}}}this.lineCount[Z]=j-this.lineOffset[Z]}this.buffer.update(F)}},Z.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(i,o,s){"use strict";var _=s(6832),F=s(5158),N=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),j=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);i.exports=function(i){return F(i,N,j,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(i,o,s){"use strict";var _,F,N,j,Z=s(8931);i.exports=createFBO;var X=null;function saveFBOState(i){return[i.getParameter(i.FRAMEBUFFER_BINDING),i.getParameter(i.RENDERBUFFER_BINDING),i.getParameter(i.TEXTURE_BINDING_2D)]}function restoreFBOState(i,o){i.bindFramebuffer(i.FRAMEBUFFER,o[0]),i.bindRenderbuffer(i.RENDERBUFFER,o[1]),i.bindTexture(i.TEXTURE_2D,o[2])}function lazyInitColorAttachments(i,o){var s=i.getParameter(o.MAX_COLOR_ATTACHMENTS_WEBGL);X=Array(s+1);for(var _=0;_<=s;++_){for(var F=Array(s),N=0;N<_;++N)F[N]=i.COLOR_ATTACHMENT0+N;for(var N=_;N<s;++N)F[N]=i.NONE;X[_]=F}}function throwFBOError(i){switch(i){case _:throw Error("gl-fbo: Framebuffer unsupported");case F:throw Error("gl-fbo: Framebuffer incomplete attachment");case N:throw Error("gl-fbo: Framebuffer incomplete dimensions");case j:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason")}}function initTexture(i,o,s,_,F,N){if(!_)return null;var j=Z(i,o,s,F,_);return j.magFilter=i.NEAREST,j.minFilter=i.NEAREST,j.mipSamples=1,j.bind(),i.framebufferTexture2D(i.FRAMEBUFFER,N,i.TEXTURE_2D,j.handle,0),j}function initRenderBuffer(i,o,s,_,F){var N=i.createRenderbuffer();return i.bindRenderbuffer(i.RENDERBUFFER,N),i.renderbufferStorage(i.RENDERBUFFER,_,o,s),i.framebufferRenderbuffer(i.FRAMEBUFFER,F,i.RENDERBUFFER,N),N}function rebuildFBO(i){var o=saveFBOState(i.gl),s=i.gl,_=i.handle=s.createFramebuffer(),F=i._shape[0],N=i._shape[1],j=i.color.length,Z=i._ext,$=i._useStencil,ee=i._useDepth,et=i._colorType;s.bindFramebuffer(s.FRAMEBUFFER,_);for(var er=0;er<j;++er)i.color[er]=initTexture(s,F,N,et,s.RGBA,s.COLOR_ATTACHMENT0+er);0===j?(i._color_rb=initRenderBuffer(s,F,N,s.RGBA4,s.COLOR_ATTACHMENT0),Z&&Z.drawBuffersWEBGL(X[0])):j>1&&Z.drawBuffersWEBGL(X[j]);var en=s.getExtension("WEBGL_depth_texture");en?$?i.depth=initTexture(s,F,N,en.UNSIGNED_INT_24_8_WEBGL,s.DEPTH_STENCIL,s.DEPTH_STENCIL_ATTACHMENT):ee&&(i.depth=initTexture(s,F,N,s.UNSIGNED_SHORT,s.DEPTH_COMPONENT,s.DEPTH_ATTACHMENT)):ee&&$?i._depth_rb=initRenderBuffer(s,F,N,s.DEPTH_STENCIL,s.DEPTH_STENCIL_ATTACHMENT):ee?i._depth_rb=initRenderBuffer(s,F,N,s.DEPTH_COMPONENT16,s.DEPTH_ATTACHMENT):$&&(i._depth_rb=initRenderBuffer(s,F,N,s.STENCIL_INDEX,s.STENCIL_ATTACHMENT));var ei=s.checkFramebufferStatus(s.FRAMEBUFFER);if(ei!==s.FRAMEBUFFER_COMPLETE){i._destroyed=!0,s.bindFramebuffer(s.FRAMEBUFFER,null),s.deleteFramebuffer(i.handle),i.handle=null,i.depth&&(i.depth.dispose(),i.depth=null),i._depth_rb&&(s.deleteRenderbuffer(i._depth_rb),i._depth_rb=null);for(var er=0;er<i.color.length;++er)i.color[er].dispose(),i.color[er]=null;i._color_rb&&(s.deleteRenderbuffer(i._color_rb),i._color_rb=null),restoreFBOState(s,o),throwFBOError(ei)}restoreFBOState(s,o)}function Framebuffer(i,o,s,_,F,N,j,Z){this.gl=i,this._shape=[0|o,0|s],this._destroyed=!1,this._ext=Z,this.color=Array(F);for(var X=0;X<F;++X)this.color[X]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=N,this._useStencil=j;var $=this,ee=[0|o,0|s];Object.defineProperties(ee,{0:{get:function(){return $._shape[0]},set:function(i){return $.width=i}},1:{get:function(){return $._shape[1]},set:function(i){return $.height=i}}}),this._shapeVector=ee,rebuildFBO(this)}var $=Framebuffer.prototype;function reshapeFBO(i,o,s){if(i._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(i._shape[0]!==o||i._shape[1]!==s){var _=i.gl,F=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(o<0||o>F||s<0||s>F)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");i._shape[0]=o,i._shape[1]=s;for(var N=saveFBOState(_),j=0;j<i.color.length;++j)i.color[j].shape=i._shape;i._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,i._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,i._shape[0],i._shape[1])),i.depth&&(i.depth.shape=i._shape),i._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,i._depth_rb),i._useDepth&&i._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,i._shape[0],i._shape[1]):i._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,i._shape[0],i._shape[1]):i._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,i._shape[0],i._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,i.handle);var Z=_.checkFramebufferStatus(_.FRAMEBUFFER);Z!==_.FRAMEBUFFER_COMPLETE&&(i.dispose(),restoreFBOState(_,N),throwFBOError(Z)),restoreFBOState(_,N)}}function createFBO(i,o,s,Z){_||(_=i.FRAMEBUFFER_UNSUPPORTED,F=i.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,N=i.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,j=i.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var $=i.getExtension("WEBGL_draw_buffers");if(!X&&$&&lazyInitColorAttachments(i,$),Array.isArray(o)&&(Z=s,s=0|o[1],o=0|o[0]),"number"!=typeof o)throw Error("gl-fbo: Missing shape parameter");var ee=i.getParameter(i.MAX_RENDERBUFFER_SIZE);if(o<0||o>ee||s<0||s>ee)throw Error("gl-fbo: Parameters are too large for FBO");var et=1;if("color"in(Z=Z||{})){if((et=Math.max(0|Z.color,0))<0)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(et>1){if($){if(et>i.getParameter($.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+et+" draw buffers")}else throw Error("gl-fbo: Multiple draw buffer extension not supported")}}var er=i.UNSIGNED_BYTE,en=i.getExtension("OES_texture_float");if(Z.float&&et>0){if(!en)throw Error("gl-fbo: Context does not support floating point textures");er=i.FLOAT}else Z.preferFloat&&et>0&&en&&(er=i.FLOAT);var ei=!0;"depth"in Z&&(ei=!!Z.depth);var eo=!1;return"stencil"in Z&&(eo=!!Z.stencil),new Framebuffer(i,o,s,er,et,ei,eo,$)}Object.defineProperties($,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(i){if(Array.isArray(i)||(i=[0|i,0|i]),2!==i.length)throw Error("gl-fbo: Shape vector must be length 2");var o=0|i[0],s=0|i[1];return reshapeFBO(this,o,s),[o,s]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(i){return reshapeFBO(this,i|=0,this._shape[1]),i},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(i){return i|=0,reshapeFBO(this,this._shape[0],i),i},enumerable:!1}}),$.bind=function(){if(!this._destroyed){var i=this.gl;i.bindFramebuffer(i.FRAMEBUFFER,this.handle),i.viewport(0,0,this._shape[0],this._shape[1])}},$.dispose=function(){if(!this._destroyed){this._destroyed=!0;var i=this.gl;i.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(i.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var o=0;o<this.color.length;++o)this.color[o].dispose(),this.color[o]=null;this._color_rb&&(i.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(i,o,s){var _=s(8974).sprintf,F=s(6603),N=s(9365),j=s(8008);function formatCompilerError(i,o,s){"use strict";var Z=N(o)||"of unknown name (see npm glsl-shader-name)",X="unknown type";void 0!==s&&(X=s===F.FRAGMENT_SHADER?"fragment":"vertex");for(var $=_("Error compiling %s shader %s:\n",X,Z),ee=_("%s%s",$,i),et=i.split("\n"),er={},en=0;en<et.length;en++){var ei=et[en];if(""!==ei&&"\x00"!==ei){var eo=parseInt(ei.split(":")[2]);if(isNaN(eo))throw Error(_("Could not parse error: %s",ei));er[eo]=ei}}for(var es=j(o).split("\n"),en=0;en<es.length;en++)if((er[en+3]||er[en+2]||er[en+1])&&($+=es[en]+"\n",er[en+1])){var el=er[en+1];$+=_("^^^ %s\n\n",el=el.substr(el.split(":",3).join(":").length+1).trim())}return{long:$.trim(),short:ee.trim()}}i.exports=formatCompilerError},6386:function(i,o,s){"use strict";i.exports=createHeatmap2D;var _,F,N,j=s(5070),Z=s(9560),X=s(5306),$=s(5158),ee=s(5827),et=s(1292);function GLHeatmap2D(i,o,s,_,F,N,j){this.plot=i,this.shader=o,this.pickShader=s,this.positionBuffer=_,this.weightBuffer=F,this.colorBuffer=N,this.idBuffer=j,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var er=GLHeatmap2D.prototype,en=[0,0,1,0,0,1,1,0,1,1,0,1];function createHeatmap2D(i,o){var s=i.gl,_=new GLHeatmap2D(i,$(s,et.vertex,et.fragment),$(s,et.pickVertex,et.pickFragment),ee(s),ee(s),ee(s),ee(s));return _.update(o),i.addObject(_),_}er.draw=(_=[1,0,0,0,1,0,0,0,1],function(){var i=this.plot,o=this.shader,s=this.bounds,F=this.numVertices;if(!(F<=0)){var N=i.gl,j=i.dataBox,Z=s[2]-s[0],X=s[3]-s[1],$=j[2]-j[0],ee=j[3]-j[1];_[0]=2*Z/$,_[4]=2*X/ee,_[6]=2*(s[0]-j[0])/$-1,_[7]=2*(s[1]-j[1])/ee-1,o.bind();var et=o.uniforms;et.viewTransform=_,et.shape=this.shape;var er=o.attributes;this.positionBuffer.bind(),er.position.pointer(),this.weightBuffer.bind(),er.weight.pointer(N.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),er.color.pointer(N.UNSIGNED_BYTE,!0),N.drawArrays(N.TRIANGLES,0,F)}}),er.drawPick=(F=[1,0,0,0,1,0,0,0,1],N=[0,0,0,0],function(i){var o=this.plot,s=this.pickShader,_=this.bounds,j=this.numVertices;if(!(j<=0)){var Z=o.gl,X=o.dataBox,$=_[2]-_[0],ee=_[3]-_[1],et=X[2]-X[0],er=X[3]-X[1];F[0]=2*$/et,F[4]=2*ee/er,F[6]=2*(_[0]-X[0])/et-1,F[7]=2*(_[1]-X[1])/er-1;for(var en=0;en<4;++en)N[en]=i>>8*en&255;this.pickOffset=i,s.bind();var ei=s.uniforms;ei.viewTransform=F,ei.pickOffset=N,ei.shape=this.shape;var eo=s.attributes;return this.positionBuffer.bind(),eo.position.pointer(),this.weightBuffer.bind(),eo.weight.pointer(Z.UNSIGNED_BYTE,!1),this.idBuffer.bind(),eo.pickId.pointer(Z.UNSIGNED_BYTE,!1),Z.drawArrays(Z.TRIANGLES,0,j),i+this.shape[0]*this.shape[1]}}),er.pick=function(i,o,s){var _=this.pickOffset,F=this.shape[0]*this.shape[1];if(s<_||s>=_+F)return null;var N=s-_,j=this.xData,Z=this.yData;return{object:this,pointId:N,dataCoord:[j[N%this.shape[0]],Z[N/this.shape[0]|0]]}},er.update=function(i){var o=(i=i||{}).shape||[0,0],s=i.x||Z(o[0]),_=i.y||Z(o[1]),F=i.z||new Float32Array(o[0]*o[1]),N=!1!==i.zsmooth;this.xData=s,this.yData=_;var $=i.colorLevels||[0],ee=i.colorValues||[0,0,0,1],et=$.length,er=this.bounds;N?(e_=er[0]=s[0],ew=er[1]=_[0],eT=er[2]=s[s.length-1],ek=er[3]=_[_.length-1]):(e_=er[0]=s[0]+(s[1]-s[0])/2,ew=er[1]=_[0]+(_[1]-_[0])/2,eT=er[2]=s[s.length-1]+(s[s.length-1]-s[s.length-2])/2,ek=er[3]=_[_.length-1]+(_[_.length-1]-_[_.length-2])/2);var ei=1/(eT-e_),eo=1/(ek-ew),es=o[0],el=o[1];this.shape=[es,el];var ec=(N?(es-1)*(el-1):es*el)*(en.length>>>1);this.numVertices=ec;for(var eu=X.mallocUint8(4*ec),ef=X.mallocFloat32(2*ec),ed=X.mallocUint8(2*ec),eh=X.mallocUint32(ec),ep=0,eg=N?es-1:es,em=N?el-1:el,ey=0;ey<em;++ey){N?(eA=eo*(_[ey]-ew),eS=eo*(_[ey+1]-ew)):(eA=ey<el-1?eo*(_[ey]-(_[ey+1]-_[ey])/2-ew):eo*(_[ey]-(_[ey]-_[ey-1])/2-ew),eS=ey<el-1?eo*(_[ey]+(_[ey+1]-_[ey])/2-ew):eo*(_[ey]+(_[ey]-_[ey-1])/2-ew));for(var ev=0;ev<eg;++ev){N?(eM=ei*(s[ev]-e_),eC=ei*(s[ev+1]-e_)):(eM=ev<es-1?ei*(s[ev]-(s[ev+1]-s[ev])/2-e_):ei*(s[ev]-(s[ev]-s[ev-1])/2-e_),eC=ev<es-1?ei*(s[ev]+(s[ev+1]-s[ev])/2-e_):ei*(s[ev]+(s[ev]-s[ev-1])/2-e_));for(var ex=0;ex<en.length;ex+=2){var e_,ew,eT,ek,eA,eS,eM,eC,eE,eL,eP,eI,eO=en[ex],eD=en[ex+1],eR=F[N?(ey+eD)*es+(ev+eO):ey*es+ev],eB=j.le($,eR);if(eB<0)eE=ee[0],eL=ee[1],eP=ee[2],eI=ee[3];else if(eB===et-1)eE=ee[4*et-4],eL=ee[4*et-3],eP=ee[4*et-2],eI=ee[4*et-1];else{var eF=(eR-$[eB])/($[eB+1]-$[eB]),ez=1-eF,eN=4*eB,ej=4*(eB+1);eE=ez*ee[eN]+eF*ee[ej],eL=ez*ee[eN+1]+eF*ee[ej+1],eP=ez*ee[eN+2]+eF*ee[ej+2],eI=ez*ee[eN+3]+eF*ee[ej+3]}eu[4*ep]=255*eE,eu[4*ep+1]=255*eL,eu[4*ep+2]=255*eP,eu[4*ep+3]=255*eI,ef[2*ep]=.5*eM+.5*eC,ef[2*ep+1]=.5*eA+.5*eS,ed[2*ep]=eO,ed[2*ep+1]=eD,eh[ep]=ey*es+ev,ep+=1}}}this.positionBuffer.update(ef),this.weightBuffer.update(ed),this.colorBuffer.update(eu),this.idBuffer.update(eh),X.free(ef),X.free(eu),X.free(ed),X.free(eh)},er.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(i,o,s){"use strict";var _=s(6832);i.exports={fragment:_(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:_(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:_(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:_(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},248:function(i,o,s){var _=s(6832),F=s(5158),N=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),j=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),Z=_(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),X=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];o.createShader=function(i){return F(i,N,j,null,X)},o.createPickShader=function(i){return F(i,N,Z,null,X)}},6086:function(i,o,s){"use strict";i.exports=createLinePlot;var _=s(5827),F=s(2944),N=s(8931),j=new Uint8Array(4),Z=new Float32Array(j.buffer);function unpackFloat(i,o,s,_){return j[0]=_,j[1]=s,j[2]=o,j[3]=i,Z[0]}var X=s(5070),$=s(5050),ee=s(248),et=ee.createShader,er=ee.createPickShader,en=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function distance(i,o){for(var s=0,_=0;_<3;++_){var F=i[_]-o[_];s+=F*F}return Math.sqrt(s)}function filterClipBounds(i){for(var o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],s=0;s<3;++s)o[0][s]=Math.max(i[0][s],o[0][s]),o[1][s]=Math.min(i[1][s],o[1][s]);return o}function PickResult(i,o,s,_){this.arcLength=i,this.position=o,this.index=s,this.dataCoordinate=_}function LinePlot(i,o,s,_,F,N){this.gl=i,this.shader=o,this.pickShader=s,this.buffer=_,this.vao=F,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=N,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var ei=LinePlot.prototype;function createLinePlot(i){var o=i.gl||i.scene&&i.scene.gl,s=et(o);s.attributes.position.location=0,s.attributes.nextPosition.location=1,s.attributes.arcLength.location=2,s.attributes.lineWidth.location=3,s.attributes.color.location=4;var j=er(o);j.attributes.position.location=0,j.attributes.nextPosition.location=1,j.attributes.arcLength.location=2,j.attributes.lineWidth.location=3,j.attributes.color.location=4;for(var Z=_(o),X=F(o,[{buffer:Z,size:3,offset:0,stride:48},{buffer:Z,size:3,offset:12,stride:48},{buffer:Z,size:1,offset:24,stride:48},{buffer:Z,size:1,offset:28,stride:48},{buffer:Z,size:4,offset:32,stride:48}]),ee=$(Array(1024),[256,1,4]),en=0;en<1024;++en)ee.data[en]=255;var ei=N(o,ee);ei.wrap=o.REPEAT;var eo=new LinePlot(o,s,j,Z,X,ei);return eo.update(i),eo}ei.isTransparent=function(){return this.hasAlpha},ei.isOpaque=function(){return!this.hasAlpha},ei.pickSlots=1,ei.setPickBase=function(i){this.pickId=i},ei.drawTransparent=ei.draw=function(i){if(this.vertexCount){var o=this.gl,s=this.shader,_=this.vao;s.bind(),s.uniforms={model:i.model||en,view:i.view||en,projection:i.projection||en,clipBounds:filterClipBounds(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[o.drawingBufferWidth,o.drawingBufferHeight],pixelRatio:this.pixelRatio},_.bind(),_.draw(o.TRIANGLE_STRIP,this.vertexCount),_.unbind()}},ei.drawPick=function(i){if(this.vertexCount){var o=this.gl,s=this.pickShader,_=this.vao;s.bind(),s.uniforms={model:i.model||en,view:i.view||en,projection:i.projection||en,pickId:this.pickId,clipBounds:filterClipBounds(this.clipBounds),screenShape:[o.drawingBufferWidth,o.drawingBufferHeight],pixelRatio:this.pixelRatio},_.bind(),_.draw(o.TRIANGLE_STRIP,this.vertexCount),_.unbind()}},ei.update=function(i){this.dirty=!0;var o=!!i.connectGaps;"dashScale"in i&&(this.dashScale=i.dashScale),this.hasAlpha=!1,"opacity"in i&&(this.opacity=+i.opacity,this.opacity<1&&(this.hasAlpha=!0));var s=[],_=[],F=[],N=0,j=0,Z=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ee=i.position||i.positions;if(ee){var et=i.color||i.colors||[0,0,0,1],er=i.lineWidth||1,en=!1;o:for(ei=1;ei<ee.length;++ei){var ei,eo,es,el,ec,eu=ee[ei-1],ef=ee[ei];for(_.push(N),F.push(eu.slice()),eo=0;eo<3;++eo){if(isNaN(eu[eo])||isNaN(ef[eo])||!isFinite(eu[eo])||!isFinite(ef[eo])){if(!o&&s.length>0){for(var ed=0;ed<24;++ed)s.push(s[s.length-12]);j+=2,en=!0}continue o}Z[0][eo]=Math.min(Z[0][eo],eu[eo],ef[eo]),Z[1][eo]=Math.max(Z[1][eo],eu[eo],ef[eo])}Array.isArray(et[0])?(es=et.length>ei-1?et[ei-1]:et.length>0?et[et.length-1]:[0,0,0,1],el=et.length>ei?et[ei]:et.length>0?et[et.length-1]:[0,0,0,1]):es=el=et,3===es.length&&(es=[es[0],es[1],es[2],1]),3===el.length&&(el=[el[0],el[1],el[2],1]),!this.hasAlpha&&es[3]<1&&(this.hasAlpha=!0),ec=Array.isArray(er)?er.length>ei-1?er[ei-1]:er.length>0?er[er.length-1]:[0,0,0,1]:er;var eh=N;if(N+=distance(eu,ef),en){for(eo=0;eo<2;++eo)s.push(eu[0],eu[1],eu[2],ef[0],ef[1],ef[2],eh,ec,es[0],es[1],es[2],es[3]);j+=2,en=!1}s.push(eu[0],eu[1],eu[2],ef[0],ef[1],ef[2],eh,ec,es[0],es[1],es[2],es[3],eu[0],eu[1],eu[2],ef[0],ef[1],ef[2],eh,-ec,es[0],es[1],es[2],es[3],ef[0],ef[1],ef[2],eu[0],eu[1],eu[2],N,-ec,el[0],el[1],el[2],el[3],ef[0],ef[1],ef[2],eu[0],eu[1],eu[2],N,ec,el[0],el[1],el[2],el[3]),j+=4}}if(this.buffer.update(s),_.push(N),F.push(ee[ee.length-1].slice()),this.bounds=Z,this.vertexCount=j,this.points=F,this.arcLength=_,"dashes"in i){var ep=i.dashes.slice();for(ep.unshift(0),ei=1;ei<ep.length;++ei)ep[ei]=ep[ei-1]+ep[ei];var eg=$(Array(1024),[256,1,4]);for(ei=0;ei<256;++ei){for(eo=0;eo<4;++eo)eg.set(ei,0,eo,0);1&X.le(ep,ep[ep.length-1]*ei/255)?eg.set(ei,0,0,0):eg.set(ei,0,0,255)}this.texture.setPixels(eg)}},ei.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},ei.pick=function(i){if(!i||i.id!==this.pickId)return null;var o=unpackFloat(i.value[0],i.value[1],i.value[2],0),s=X.le(this.arcLength,o);if(s<0)return null;if(s===this.arcLength.length-1)return new PickResult(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),s);for(var _=this.points[s],F=this.points[Math.min(s+1,this.points.length-1)],N=(o-this.arcLength[s])/(this.arcLength[s+1]-this.arcLength[s]),j=1-N,Z=[0,0,0],$=0;$<3;++$)Z[$]=j*_[$]+N*F[$];var ee=Math.min(N<.5?s:s+1,this.points.length-1);return new PickResult(o,Z,ee,this.points[ee])}},7332:function(i){i.exports=clone;function clone(i){var o=new Float32Array(16);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o}},9823:function(i){i.exports=create;function create(){var i=new Float32Array(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},7787:function(i){i.exports=determinant;function determinant(i){var o=i[0],s=i[1],_=i[2],F=i[3],N=i[4],j=i[5],Z=i[6],X=i[7],$=i[8],ee=i[9],et=i[10],er=i[11],en=i[12],ei=i[13],eo=i[14],es=i[15];return(o*j-s*N)*(et*es-er*eo)-(o*Z-_*N)*(ee*es-er*ei)+(o*X-F*N)*(ee*eo-et*ei)+(s*Z-_*j)*($*es-er*en)-(s*X-F*j)*($*eo-et*en)+(_*X-F*Z)*($*ei-ee*en)}},5950:function(i){i.exports=fromQuat;function fromQuat(i,o){var s=o[0],_=o[1],F=o[2],N=o[3],j=s+s,Z=_+_,X=F+F,$=s*j,ee=_*j,et=_*Z,er=F*j,en=F*Z,ei=F*X,eo=N*j,es=N*Z,el=N*X;return i[0]=1-et-ei,i[1]=ee+el,i[2]=er-es,i[3]=0,i[4]=ee-el,i[5]=1-$-ei,i[6]=en+eo,i[7]=0,i[8]=er+es,i[9]=en-eo,i[10]=1-$-et,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},7280:function(i){i.exports=fromRotationTranslation;function fromRotationTranslation(i,o,s){var _=o[0],F=o[1],N=o[2],j=o[3],Z=_+_,X=F+F,$=N+N,ee=_*Z,et=_*X,er=_*$,en=F*X,ei=F*$,eo=N*$,es=j*Z,el=j*X,ec=j*$;return i[0]=1-(en+eo),i[1]=et+ec,i[2]=er-el,i[3]=0,i[4]=et-ec,i[5]=1-(ee+eo),i[6]=ei+es,i[7]=0,i[8]=er+el,i[9]=ei-es,i[10]=1-(ee+en),i[11]=0,i[12]=s[0],i[13]=s[1],i[14]=s[2],i[15]=1,i}},9947:function(i){i.exports=identity;function identity(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},7437:function(i){i.exports=invert;function invert(i,o){var s=o[0],_=o[1],F=o[2],N=o[3],j=o[4],Z=o[5],X=o[6],$=o[7],ee=o[8],et=o[9],er=o[10],en=o[11],ei=o[12],eo=o[13],es=o[14],el=o[15],ec=s*Z-_*j,eu=s*X-F*j,ef=s*$-N*j,ed=_*X-F*Z,eh=_*$-N*Z,ep=F*$-N*X,eg=ee*eo-et*ei,em=ee*es-er*ei,ey=ee*el-en*ei,ev=et*es-er*eo,ex=et*el-en*eo,e_=er*el-en*es,ew=ec*e_-eu*ex+ef*ev+ed*ey-eh*em+ep*eg;return ew?(ew=1/ew,i[0]=(Z*e_-X*ex+$*ev)*ew,i[1]=(F*ex-_*e_-N*ev)*ew,i[2]=(eo*ep-es*eh+el*ed)*ew,i[3]=(er*eh-et*ep-en*ed)*ew,i[4]=(X*ey-j*e_-$*em)*ew,i[5]=(s*e_-F*ey+N*em)*ew,i[6]=(es*ef-ei*ep-el*eu)*ew,i[7]=(ee*ep-er*ef+en*eu)*ew,i[8]=(j*ex-Z*ey+$*eg)*ew,i[9]=(_*ey-s*ex-N*eg)*ew,i[10]=(ei*eh-eo*ef+el*ec)*ew,i[11]=(et*ef-ee*eh-en*ec)*ew,i[12]=(Z*em-j*ev-X*eg)*ew,i[13]=(s*ev-_*em+F*eg)*ew,i[14]=(eo*eu-ei*ed-es*ec)*ew,i[15]=(ee*ed-et*eu+er*ec)*ew,i):null}},3012:function(i,o,s){var _=s(9947);function lookAt(i,o,s,F){var N,j,Z,X,$,ee,et,er,en,ei,eo=o[0],es=o[1],el=o[2],ec=F[0],eu=F[1],ef=F[2],ed=s[0],eh=s[1],ep=s[2];return 1e-6>Math.abs(eo-ed)&&1e-6>Math.abs(es-eh)&&1e-6>Math.abs(el-ep)?_(i):(ei=1/Math.sqrt((et=eo-ed)*et+(er=es-eh)*er+(en=el-ep)*en),et*=ei,er*=ei,en*=ei,(ei=Math.sqrt((N=eu*en-ef*er)*N+(j=ef*et-ec*en)*j+(Z=ec*er-eu*et)*Z))?(N*=ei=1/ei,j*=ei,Z*=ei):(N=0,j=0,Z=0),(ei=Math.sqrt((X=er*Z-en*j)*X+($=en*N-et*Z)*$+(ee=et*j-er*N)*ee))?(X*=ei=1/ei,$*=ei,ee*=ei):(X=0,$=0,ee=0),i[0]=N,i[1]=X,i[2]=et,i[3]=0,i[4]=j,i[5]=$,i[6]=er,i[7]=0,i[8]=Z,i[9]=ee,i[10]=en,i[11]=0,i[12]=-(N*eo+j*es+Z*el),i[13]=-(X*eo+$*es+ee*el),i[14]=-(et*eo+er*es+en*el),i[15]=1,i)}i.exports=lookAt},104:function(i){i.exports=multiply;function multiply(i,o,s){var _=o[0],F=o[1],N=o[2],j=o[3],Z=o[4],X=o[5],$=o[6],ee=o[7],et=o[8],er=o[9],en=o[10],ei=o[11],eo=o[12],es=o[13],el=o[14],ec=o[15],eu=s[0],ef=s[1],ed=s[2],eh=s[3];return i[0]=eu*_+ef*Z+ed*et+eh*eo,i[1]=eu*F+ef*X+ed*er+eh*es,i[2]=eu*N+ef*$+ed*en+eh*el,i[3]=eu*j+ef*ee+ed*ei+eh*ec,eu=s[4],ef=s[5],ed=s[6],eh=s[7],i[4]=eu*_+ef*Z+ed*et+eh*eo,i[5]=eu*F+ef*X+ed*er+eh*es,i[6]=eu*N+ef*$+ed*en+eh*el,i[7]=eu*j+ef*ee+ed*ei+eh*ec,eu=s[8],ef=s[9],ed=s[10],eh=s[11],i[8]=eu*_+ef*Z+ed*et+eh*eo,i[9]=eu*F+ef*X+ed*er+eh*es,i[10]=eu*N+ef*$+ed*en+eh*el,i[11]=eu*j+ef*ee+ed*ei+eh*ec,eu=s[12],ef=s[13],ed=s[14],eh=s[15],i[12]=eu*_+ef*Z+ed*et+eh*eo,i[13]=eu*F+ef*X+ed*er+eh*es,i[14]=eu*N+ef*$+ed*en+eh*el,i[15]=eu*j+ef*ee+ed*ei+eh*ec,i}},5268:function(i){i.exports=ortho;function ortho(i,o,s,_,F,N,j){var Z=1/(o-s),X=1/(_-F),$=1/(N-j);return i[0]=-2*Z,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*X,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*$,i[11]=0,i[12]=(o+s)*Z,i[13]=(F+_)*X,i[14]=(j+N)*$,i[15]=1,i}},1120:function(i){i.exports=perspective;function perspective(i,o,s,_,F){var N=1/Math.tan(o/2),j=1/(_-F);return i[0]=N/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=N,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(F+_)*j,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*F*_*j,i[15]=0,i}},4422:function(i){i.exports=rotate;function rotate(i,o,s,_){var F,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg,em,ey,ev,ex=_[0],e_=_[1],ew=_[2],eT=Math.sqrt(ex*ex+e_*e_+ew*ew);return 1e-6>Math.abs(eT)?null:(ex*=eT=1/eT,e_*=eT,ew*=eT,F=Math.sin(s),j=1-(N=Math.cos(s)),Z=o[0],X=o[1],$=o[2],ee=o[3],et=o[4],er=o[5],en=o[6],ei=o[7],eo=o[8],es=o[9],el=o[10],ec=o[11],eu=ex*ex*j+N,ef=e_*ex*j+ew*F,ed=ew*ex*j-e_*F,eh=ex*e_*j-ew*F,ep=e_*e_*j+N,eg=ew*e_*j+ex*F,em=ex*ew*j+e_*F,ey=e_*ew*j-ex*F,ev=ew*ew*j+N,i[0]=Z*eu+et*ef+eo*ed,i[1]=X*eu+er*ef+es*ed,i[2]=$*eu+en*ef+el*ed,i[3]=ee*eu+ei*ef+ec*ed,i[4]=Z*eh+et*ep+eo*eg,i[5]=X*eh+er*ep+es*eg,i[6]=$*eh+en*ep+el*eg,i[7]=ee*eh+ei*ep+ec*eg,i[8]=Z*em+et*ey+eo*ev,i[9]=X*em+er*ey+es*ev,i[10]=$*em+en*ey+el*ev,i[11]=ee*em+ei*ey+ec*ev,o!==i&&(i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i)}},6109:function(i){i.exports=rotateX;function rotateX(i,o,s){var _=Math.sin(s),F=Math.cos(s),N=o[4],j=o[5],Z=o[6],X=o[7],$=o[8],ee=o[9],et=o[10],er=o[11];return o!==i&&(i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[4]=N*F+$*_,i[5]=j*F+ee*_,i[6]=Z*F+et*_,i[7]=X*F+er*_,i[8]=$*F-N*_,i[9]=ee*F-j*_,i[10]=et*F-Z*_,i[11]=er*F-X*_,i}},7115:function(i){i.exports=rotateY;function rotateY(i,o,s){var _=Math.sin(s),F=Math.cos(s),N=o[0],j=o[1],Z=o[2],X=o[3],$=o[8],ee=o[9],et=o[10],er=o[11];return o!==i&&(i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=N*F-$*_,i[1]=j*F-ee*_,i[2]=Z*F-et*_,i[3]=X*F-er*_,i[8]=N*_+$*F,i[9]=j*_+ee*F,i[10]=Z*_+et*F,i[11]=X*_+er*F,i}},5240:function(i){i.exports=rotateZ;function rotateZ(i,o,s){var _=Math.sin(s),F=Math.cos(s),N=o[0],j=o[1],Z=o[2],X=o[3],$=o[4],ee=o[5],et=o[6],er=o[7];return o!==i&&(i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=N*F+$*_,i[1]=j*F+ee*_,i[2]=Z*F+et*_,i[3]=X*F+er*_,i[4]=$*F-N*_,i[5]=ee*F-j*_,i[6]=et*F-Z*_,i[7]=er*F-X*_,i}},3668:function(i){i.exports=scale;function scale(i,o,s){var _=s[0],F=s[1],N=s[2];return i[0]=o[0]*_,i[1]=o[1]*_,i[2]=o[2]*_,i[3]=o[3]*_,i[4]=o[4]*F,i[5]=o[5]*F,i[6]=o[6]*F,i[7]=o[7]*F,i[8]=o[8]*N,i[9]=o[9]*N,i[10]=o[10]*N,i[11]=o[11]*N,i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i}},998:function(i){i.exports=translate;function translate(i,o,s){var _,F,N,j,Z,X,$,ee,et,er,en,ei,eo=s[0],es=s[1],el=s[2];return o===i?(i[12]=o[0]*eo+o[4]*es+o[8]*el+o[12],i[13]=o[1]*eo+o[5]*es+o[9]*el+o[13],i[14]=o[2]*eo+o[6]*es+o[10]*el+o[14],i[15]=o[3]*eo+o[7]*es+o[11]*el+o[15]):(_=o[0],F=o[1],N=o[2],j=o[3],Z=o[4],X=o[5],$=o[6],ee=o[7],et=o[8],er=o[9],en=o[10],ei=o[11],i[0]=_,i[1]=F,i[2]=N,i[3]=j,i[4]=Z,i[5]=X,i[6]=$,i[7]=ee,i[8]=et,i[9]=er,i[10]=en,i[11]=ei,i[12]=_*eo+Z*es+et*el+o[12],i[13]=F*eo+X*es+er*el+o[13],i[14]=N*eo+$*es+en*el+o[14],i[15]=j*eo+ee*es+ei*el+o[15]),i}},2142:function(i){i.exports=transpose;function transpose(i,o){if(i===o){var s=o[1],_=o[2],F=o[3],N=o[6],j=o[7],Z=o[11];i[1]=o[4],i[2]=o[8],i[3]=o[12],i[4]=s,i[6]=o[9],i[7]=o[13],i[8]=_,i[9]=N,i[11]=o[14],i[12]=F,i[13]=j,i[14]=Z}else i[0]=o[0],i[1]=o[4],i[2]=o[8],i[3]=o[12],i[4]=o[1],i[5]=o[5],i[6]=o[9],i[7]=o[13],i[8]=o[2],i[9]=o[6],i[10]=o[10],i[11]=o[14],i[12]=o[3],i[13]=o[7],i[14]=o[11],i[15]=o[15];return i}},4340:function(i,o,s){"use strict";var _=s(957),F=s(7309);function xformMatrix(i,o){for(var s=[0,0,0,0],_=0;_<4;++_)for(var F=0;F<4;++F)s[F]+=i[4*_+F]*o[_];return s}function projectVertex(i,o,s,_,F){for(var N=xformMatrix(_,xformMatrix(s,xformMatrix(o,[i[0],i[1],i[2],1]))),j=0;j<3;++j)N[j]/=N[3];return[.5*F[0]*(1+N[0]),.5*F[1]*(1-N[1])]}function barycentricCoord(i,o){if(2===i.length){for(var s=0,N=0,j=0;j<2;++j)s+=Math.pow(o[j]-i[0][j],2),N+=Math.pow(o[j]-i[1][j],2);return(s=Math.sqrt(s))+(N=Math.sqrt(N))<1e-6?[1,0]:[N/(s+N),s/(N+s)]}if(3===i.length){var Z=[0,0];return F(i[0],i[1],i[2],o,Z),_(i,Z)}return[]}function interpolate(i,o){for(var s=[0,0,0],_=0;_<i.length;++_)for(var F=i[_],N=o[_],j=0;j<3;++j)s[j]+=N*F[j];return s}function closestPointToPickLocation(i,o,s,_,F,N){if(1===i.length)return[0,i[0].slice()];for(var j=Array(i.length),Z=0;Z<i.length;++Z)j[Z]=projectVertex(i[Z],s,_,F,N);for(var X=0,$=1/0,Z=0;Z<j.length;++Z){for(var ee=0,et=0;et<2;++et)ee+=Math.pow(j[Z][et]-o[et],2);ee<$&&($=ee,X=Z)}for(var er=barycentricCoord(j,o),en=0,Z=0;Z<3;++Z){if(er[Z]<-.001||er[Z]>1.0001)return null;en+=er[Z]}return Math.abs(en-1)>.001?null:[X,interpolate(i,er),er]}i.exports=closestPointToPickLocation},2056:function(i,o,s){var _=s(6832),F=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),N=_(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),j=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),Z=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),X=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),$=_(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),ee=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),et=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),er=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),en=_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),ei=_(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);o.meshShader={vertex:F,fragment:N,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.wireShader={vertex:j,fragment:Z,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.pointShader={vertex:X,fragment:$,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},o.pickShader={vertex:ee,fragment:et,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},o.pointPickShader={vertex:er,fragment:et,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},o.contourShader={vertex:en,fragment:ei,attributes:[{name:"position",type:"vec3"}]}},8116:function(i,o,s){"use strict";var _=s(5158),F=s(5827),N=s(2944),j=s(8931),Z=s(115),X=s(104),$=s(7437),ee=s(5050),et=s(9156),er=s(7212),en=s(5306),ei=s(2056),eo=s(4340),es=ei.meshShader,el=ei.wireShader,ec=ei.pointShader,eu=ei.pickShader,ef=ei.pointPickShader,ed=ei.contourShader,eh=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function SimplicialMesh(i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,ed,ep,eg,em,ey,ev){this.gl=i,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=o,this.dirty=!0,this.triShader=s,this.lineShader=_,this.pointShader=F,this.pickShader=N,this.pointPickShader=j,this.contourShader=Z,this.trianglePositions=X,this.triangleColors=ee,this.triangleNormals=er,this.triangleUVs=et,this.triangleIds=$,this.triangleVAO=en,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ei,this.edgeColors=es,this.edgeUVs=el,this.edgeIds=eo,this.edgeVAO=ec,this.edgeCount=0,this.pointPositions=eu,this.pointColors=ed,this.pointUVs=ep,this.pointSizes=eg,this.pointIds=ef,this.pointVAO=em,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=ey,this.contourVAO=ev,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=eh,this._view=eh,this._projection=eh,this._resolution=[1,1]}var ep=SimplicialMesh.prototype;function getOpacityFromScale(i,o){if(!o||!o.length)return 1;for(var s=0;s<o.length&&!(o.length<2);++s){if(o[s][0]===i)return o[s][1];if(o[s][0]>i&&s>0){var _=(o[s][0]-i)/(o[s][0]-o[s-1][0]);return o[s][1]*(1-_)+_*o[s-1][1]}}return 1}function genColormap(i,o){for(var s=et({colormap:i,nshades:256,format:"rgba"}),_=new Uint8Array(1024),F=0;F<256;++F){for(var N=s[F],j=0;j<3;++j)_[4*F+j]=N[j];o?_[4*F+3]=255*getOpacityFromScale(F/255,o):_[4*F+3]=255*N[3]}return ee(_,[256,256,4],[4,0,1])}function takeZComponent(i){for(var o=i.length,s=Array(o),_=0;_<o;++_)s[_]=i[_][2];return s}function createMeshShader(i){var o=_(i,es.vertex,es.fragment);return o.attributes.position.location=0,o.attributes.color.location=2,o.attributes.uv.location=3,o.attributes.normal.location=4,o}function createWireShader(i){var o=_(i,el.vertex,el.fragment);return o.attributes.position.location=0,o.attributes.color.location=2,o.attributes.uv.location=3,o}function createPointShader(i){var o=_(i,ec.vertex,ec.fragment);return o.attributes.position.location=0,o.attributes.color.location=2,o.attributes.uv.location=3,o.attributes.pointSize.location=4,o}function createPickShader(i){var o=_(i,eu.vertex,eu.fragment);return o.attributes.position.location=0,o.attributes.id.location=1,o}function createPointPickShader(i){var o=_(i,ef.vertex,ef.fragment);return o.attributes.position.location=0,o.attributes.id.location=1,o.attributes.pointSize.location=4,o}function createContourShader(i){var o=_(i,ed.vertex,ed.fragment);return o.attributes.position.location=0,o}function createSimplicialMesh(i,o){if(1==arguments.length&&(i=(o=i).gl),!(i.getExtension("OES_standard_derivatives")||i.getExtension("MOZ_OES_standard_derivatives")||i.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var s=createMeshShader(i),_=createWireShader(i),Z=createPointShader(i),X=createPickShader(i),$=createPointPickShader(i),et=createContourShader(i),er=j(i,ee(new Uint8Array([255,255,255,255]),[1,1,4]));er.generateMipmap(),er.minFilter=i.LINEAR_MIPMAP_LINEAR,er.magFilter=i.LINEAR;var en=F(i),ei=F(i),eo=F(i),es=F(i),el=F(i),ec=N(i,[{buffer:en,type:i.FLOAT,size:3},{buffer:el,type:i.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ei,type:i.FLOAT,size:4},{buffer:eo,type:i.FLOAT,size:2},{buffer:es,type:i.FLOAT,size:3}]),eu=F(i),ef=F(i),ed=F(i),eh=F(i),ep=N(i,[{buffer:eu,type:i.FLOAT,size:3},{buffer:eh,type:i.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ef,type:i.FLOAT,size:4},{buffer:ed,type:i.FLOAT,size:2}]),eg=F(i),em=F(i),ey=F(i),ev=F(i),ex=F(i),e_=N(i,[{buffer:eg,type:i.FLOAT,size:3},{buffer:ex,type:i.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:em,type:i.FLOAT,size:4},{buffer:ey,type:i.FLOAT,size:2},{buffer:ev,type:i.FLOAT,size:1}]),ew=F(i),eT=N(i,[{buffer:ew,type:i.FLOAT,size:3}]),ek=new SimplicialMesh(i,er,s,_,Z,X,$,et,en,el,ei,eo,es,ec,eu,eh,ef,ed,ep,eg,ex,em,ey,ev,e_,ew,eT);return ek.update(o),ek}ep.isOpaque=function(){return!this.hasAlpha},ep.isTransparent=function(){return this.hasAlpha},ep.pickSlots=1,ep.setPickBase=function(i){this.pickId=i},ep.highlight=function(i){if(!i||!this.contourEnable){this.contourCount=0;return}for(var o=er(this.cells,this.intensity,i.intensity),s=o.cells,_=o.vertexIds,F=o.vertexWeights,N=s.length,j=en.mallocFloat32(6*N),Z=0,X=0;X<N;++X)for(var $=s[X],ee=0;ee<2;++ee){var et=$[0];2===$.length&&(et=$[ee]);for(var ei=_[et][0],eo=_[et][1],es=F[et],el=1-es,ec=this.positions[ei],eu=this.positions[eo],ef=0;ef<3;++ef)j[Z++]=es*ec[ef]+el*eu[ef]}this.contourCount=Z/3|0,this.contourPositions.update(j.subarray(0,Z)),en.free(j)},ep.update=function(i){i=i||{};var o=this.gl;this.dirty=!0,"contourEnable"in i&&(this.contourEnable=i.contourEnable),"contourColor"in i&&(this.contourColor=i.contourColor),"lineWidth"in i&&(this.lineWidth=i.lineWidth),"lightPosition"in i&&(this.lightPosition=i.lightPosition),this.hasAlpha=!1,"opacity"in i&&(this.opacity=i.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in i&&(this.opacityscale=i.opacityscale,this.hasAlpha=!0),"ambient"in i&&(this.ambientLight=i.ambient),"diffuse"in i&&(this.diffuseLight=i.diffuse),"specular"in i&&(this.specularLight=i.specular),"roughness"in i&&(this.roughness=i.roughness),"fresnel"in i&&(this.fresnel=i.fresnel),i.texture?(this.texture.dispose(),this.texture=j(o,i.texture)):i.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=o.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=o.LINEAR,this.texture.setPixels(genColormap(i.colormap,this.opacityscale)),this.texture.generateMipmap());var s=i.cells,_=i.positions;if(_&&s){var F=[],N=[],X=[],$=[],ee=[],et=[],er=[],en=[],ei=[],eo=[],es=[],el=[],ec=[],eu=[];this.cells=s,this.positions=_;var ef=i.vertexNormals,ed=i.cellNormals,eh=void 0===i.vertexNormalsEpsilon?1e-6:i.vertexNormalsEpsilon,ep=void 0===i.faceNormalsEpsilon?1e-6:i.faceNormalsEpsilon;i.useFacetNormals&&!ed&&(ed=Z.faceNormals(s,_,ep)),ed||ef||(ef=Z.vertexNormals(s,_,eh));var eg=i.vertexColors,em=i.cellColors,ey=i.meshColor||[1,1,1,1],ev=i.vertexUVs,ex=i.vertexIntensity,e_=i.cellUVs,ew=i.cellIntensity,eT=1/0,ek=-1/0;if(!ev&&!e_){if(ex){if(i.vertexIntensityBounds)eT=+i.vertexIntensityBounds[0],ek=+i.vertexIntensityBounds[1];else for(var eA=0;eA<ex.length;++eA){var eS=ex[eA];eT=Math.min(eT,eS),ek=Math.max(ek,eS)}}else if(ew){if(i.cellIntensityBounds)eT=+i.cellIntensityBounds[0],ek=+i.cellIntensityBounds[1];else for(var eA=0;eA<ew.length;++eA){var eS=ew[eA];eT=Math.min(eT,eS),ek=Math.max(ek,eS)}}else for(var eA=0;eA<_.length;++eA){var eS=_[eA][2];eT=Math.min(eT,eS),ek=Math.max(ek,eS)}}ex?this.intensity=ex:ew?this.intensity=ew:this.intensity=takeZComponent(_),this.pickVertex=!(ew||em);var eM=i.pointSizes,eC=i.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var eA=0;eA<_.length;++eA)for(var eE=_[eA],eL=0;eL<3;++eL)!isNaN(eE[eL])&&isFinite(eE[eL])&&(this.bounds[0][eL]=Math.min(this.bounds[0][eL],eE[eL]),this.bounds[1][eL]=Math.max(this.bounds[1][eL],eE[eL]));var eP=0,eI=0,eO=0;o:for(var eA=0;eA<s.length;++eA){var eD=s[eA];switch(eD.length){case 1:for(var eR,eB,eF=eD[0],eE=_[eF],eL=0;eL<3;++eL)if(isNaN(eE[eL])||!isFinite(eE[eL]))continue o;eo.push(eE[0],eE[1],eE[2]),eR=eg?eg[eF]:em?em[eA]:ey,this.opacityscale&&ex?N.push(eR[0],eR[1],eR[2],this.opacity*getOpacityFromScale((ex[eF]-eT)/(ek-eT),this.opacityscale)):3===eR.length?es.push(eR[0],eR[1],eR[2],this.opacity):(es.push(eR[0],eR[1],eR[2],eR[3]*this.opacity),eR[3]<1&&(this.hasAlpha=!0)),eB=ev?ev[eF]:ex?[(ex[eF]-eT)/(ek-eT),0]:e_?e_[eA]:ew?[(ew[eA]-eT)/(ek-eT),0]:[(eE[2]-eT)/(ek-eT),0],el.push(eB[0],eB[1]),eM?ec.push(eM[eF]):ec.push(eC),eu.push(eA),eO+=1;break;case 2:for(var eL=0;eL<2;++eL)for(var eF=eD[eL],eE=_[eF],ez=0;ez<3;++ez)if(isNaN(eE[ez])||!isFinite(eE[ez]))continue o;for(var eL=0;eL<2;++eL){var eR,eB,eF=eD[eL],eE=_[eF];et.push(eE[0],eE[1],eE[2]),eR=eg?eg[eF]:em?em[eA]:ey,this.opacityscale&&ex?N.push(eR[0],eR[1],eR[2],this.opacity*getOpacityFromScale((ex[eF]-eT)/(ek-eT),this.opacityscale)):3===eR.length?er.push(eR[0],eR[1],eR[2],this.opacity):(er.push(eR[0],eR[1],eR[2],eR[3]*this.opacity),eR[3]<1&&(this.hasAlpha=!0)),eB=ev?ev[eF]:ex?[(ex[eF]-eT)/(ek-eT),0]:e_?e_[eA]:ew?[(ew[eA]-eT)/(ek-eT),0]:[(eE[2]-eT)/(ek-eT),0],en.push(eB[0],eB[1]),ei.push(eA)}eI+=1;break;case 3:for(var eL=0;eL<3;++eL)for(var eF=eD[eL],eE=_[eF],ez=0;ez<3;++ez)if(isNaN(eE[ez])||!isFinite(eE[ez]))continue o;for(var eL=0;eL<3;++eL){var eR,eB,eN,eF=eD[2-eL],eE=_[eF];F.push(eE[0],eE[1],eE[2]),(eR=eg?eg[eF]:em?em[eA]:ey)?this.opacityscale&&ex?N.push(eR[0],eR[1],eR[2],this.opacity*getOpacityFromScale((ex[eF]-eT)/(ek-eT),this.opacityscale)):3===eR.length?N.push(eR[0],eR[1],eR[2],this.opacity):(N.push(eR[0],eR[1],eR[2],eR[3]*this.opacity),eR[3]<1&&(this.hasAlpha=!0)):N.push(.5,.5,.5,1),eB=ev?ev[eF]:ex?[(ex[eF]-eT)/(ek-eT),0]:e_?e_[eA]:ew?[(ew[eA]-eT)/(ek-eT),0]:[(eE[2]-eT)/(ek-eT),0],$.push(eB[0],eB[1]),eN=ef?ef[eF]:ed[eA],X.push(eN[0],eN[1],eN[2]),ee.push(eA)}eP+=1}}this.pointCount=eO,this.edgeCount=eI,this.triangleCount=eP,this.pointPositions.update(eo),this.pointColors.update(es),this.pointUVs.update(el),this.pointSizes.update(ec),this.pointIds.update(new Uint32Array(eu)),this.edgePositions.update(et),this.edgeColors.update(er),this.edgeUVs.update(en),this.edgeIds.update(new Uint32Array(ei)),this.trianglePositions.update(F),this.triangleColors.update(N),this.triangleUVs.update($),this.triangleNormals.update(X),this.triangleIds.update(new Uint32Array(ee))}},ep.drawTransparent=ep.draw=function(i){i=i||{};for(var o=this.gl,s=i.model||eh,_=i.view||eh,F=i.projection||eh,N=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)N[0][j]=Math.max(N[0][j],this.clipBounds[0][j]),N[1][j]=Math.min(N[1][j],this.clipBounds[1][j]);var Z={model:s,view:_,projection:F,inverseModel:eh.slice(),clipBounds:N,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Z.inverseModel=$(Z.inverseModel,Z.model),o.disable(o.CULL_FACE),this.texture.bind(0);var ee=Array(16);X(ee,Z.view,Z.model),X(ee,Z.projection,ee),$(ee,ee);for(var j=0;j<3;++j)Z.eyePosition[j]=ee[12+j]/ee[15];for(var et=ee[15],j=0;j<3;++j)et+=this.lightPosition[j]*ee[4*j+3];for(var j=0;j<3;++j){for(var er=ee[12+j],en=0;en<3;++en)er+=ee[4*en+j]*this.lightPosition[en];Z.lightPosition[j]=er/et}if(this.triangleCount>0){var ei=this.triShader;ei.bind(),ei.uniforms=Z,this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ei=this.lineShader;ei.bind(),ei.uniforms=Z,this.edgeVAO.bind(),o.lineWidth(this.lineWidth*this.pixelRatio),o.drawArrays(o.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var ei=this.pointShader;ei.bind(),ei.uniforms=Z,this.pointVAO.bind(),o.drawArrays(o.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ei=this.contourShader;ei.bind(),ei.uniforms=Z,this.contourVAO.bind(),o.drawArrays(o.LINES,0,this.contourCount),this.contourVAO.unbind()}},ep.drawPick=function(i){i=i||{};for(var o=this.gl,s=i.model||eh,_=i.view||eh,F=i.projection||eh,N=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)N[0][j]=Math.max(N[0][j],this.clipBounds[0][j]),N[1][j]=Math.min(N[1][j],this.clipBounds[1][j]);this._model=[].slice.call(s),this._view=[].slice.call(_),this._projection=[].slice.call(F),this._resolution=[o.drawingBufferWidth,o.drawingBufferHeight];var Z={model:s,view:_,projection:F,clipBounds:N,pickId:this.pickId/255},X=this.pickShader;if(X.bind(),X.uniforms=Z,this.triangleCount>0&&(this.triangleVAO.bind(),o.drawArrays(o.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),o.lineWidth(this.lineWidth*this.pixelRatio),o.drawArrays(o.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var X=this.pointPickShader;X.bind(),X.uniforms=Z,this.pointVAO.bind(),o.drawArrays(o.POINTS,0,this.pointCount),this.pointVAO.unbind()}},ep.pick=function(i){if(!i||i.id!==this.pickId)return null;for(var o=i.value[0]+256*i.value[1]+65536*i.value[2],s=this.cells[o],_=this.positions,F=Array(s.length),N=0;N<s.length;++N)F[N]=_[s[N]];var j=i.coord[0],Z=i.coord[1];if(!this.pickVertex){var X=this.positions[s[0]],$=this.positions[s[1]],ee=this.positions[s[2]],et=[(X[0]+$[0]+ee[0])/3,(X[1]+$[1]+ee[1])/3,(X[2]+$[2]+ee[2])/3];return{_cellCenter:!0,position:[j,Z],index:o,cell:s,cellId:o,intensity:this.intensity[o],dataCoordinate:et}}var er=eo(F,[j*this.pixelRatio,this._resolution[1]-Z*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!er)return null;for(var en=er[2],ei=0,N=0;N<s.length;++N)ei+=en[N]*this.intensity[s[N]];return{position:er[1],index:s[er[0]],cell:s,cellId:o,intensity:ei,dataCoordinate:this.positions[s[er[0]]]}},ep.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},i.exports=createSimplicialMesh},4554:function(i,o,s){"use strict";i.exports=createBoxes;var _,F,N=s(5827),j=s(5158),Z=s(2709);function Boxes(i,o,s){this.plot=i,this.vbo=o,this.shader=s}var X=Boxes.prototype;function createBoxes(i){var o=i.gl;return new Boxes(i,N(o,[0,0,0,1,1,0,1,1]),j(o,Z.boxVert,Z.lineFrag))}X.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},X.drawBox=(_=[0,0],F=[0,0],function(i,o,s,N,j){var Z=this.plot,X=this.shader,$=Z.gl;_[0]=i,_[1]=o,F[0]=s,F[1]=N,X.uniforms.lo=_,X.uniforms.hi=F,X.uniforms.color=j,$.drawArrays($.TRIANGLE_STRIP,0,4)}),X.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(i,o,s){"use strict";i.exports=createGrid;var _,F,N,j,Z,X,$,ee,et,er,en,ei=s(5827),eo=s(5158),es=s(5070),el=s(2709);function Grid(i,o,s,_){this.plot=i,this.vbo=o,this.shader=s,this.tickShader=_,this.ticks=[[],[]]}function compareTickNum(i,o){return i-o}var ec=Grid.prototype;function createGrid(i){var o=i.gl;return new Grid(i,ei(o),eo(o,el.gridVert,el.gridFrag),eo(o,el.tickVert,el.gridFrag))}ec.draw=(_=[0,0],F=[0,0],N=[0,0],function(){for(var i=this.plot,o=this.vbo,s=this.shader,j=this.ticks,Z=i.gl,X=i._tickBounds,$=i.dataBox,ee=i.viewBox,et=i.gridLineWidth,er=i.gridLineColor,en=i.gridLineEnable,ei=i.pixelRatio,eo=0;eo<2;++eo){var es=X[eo],el=X[eo+2]-es,ec=.5*($[eo+2]+$[eo]),eu=$[eo+2]-$[eo];F[eo]=2*el/eu,_[eo]=2*(es-ec)/eu}s.bind(),o.bind(),s.attributes.dataCoord.pointer(),s.uniforms.dataShift=_,s.uniforms.dataScale=F;for(var ef=0,eo=0;eo<2;++eo){N[0]=N[1]=0,N[eo]=1,s.uniforms.dataAxis=N,s.uniforms.lineWidth=et[eo]/(ee[eo+2]-ee[eo])*ei,s.uniforms.color=er[eo];var ed=6*j[eo].length;en[eo]&&ed&&Z.drawArrays(Z.TRIANGLES,ef,ed),ef+=ed}}),ec.drawTickMarks=(j=[0,0],Z=[0,0],X=[1,0],$=[0,1],ee=[0,0],et=[0,0],function(){for(var i=this.plot,o=this.vbo,s=this.tickShader,_=this.ticks,F=i.gl,N=i._tickBounds,er=i.dataBox,en=i.viewBox,ei=i.pixelRatio,eo=i.screenBox,el=eo[2]-eo[0],ec=eo[3]-eo[1],eu=en[2]-en[0],ef=en[3]-en[1],ed=0;ed<2;++ed){var eh=N[ed],ep=N[ed+2]-eh,eg=.5*(er[ed+2]+er[ed]),em=er[ed+2]-er[ed];Z[ed]=2*ep/em,j[ed]=2*(eh-eg)/em}Z[0]*=eu/el,j[0]*=eu/el,Z[1]*=ef/ec,j[1]*=ef/ec,s.bind(),o.bind(),s.attributes.dataCoord.pointer();var ey=s.uniforms;ey.dataShift=j,ey.dataScale=Z;var ev=i.tickMarkLength,ex=i.tickMarkWidth,e_=i.tickMarkColor,ew=6*_[0].length,eT=Math.min(es.ge(_[0],(er[0]-N[0])/(N[2]-N[0]),compareTickNum),_[0].length),ek=Math.min(es.gt(_[0],(er[2]-N[0])/(N[2]-N[0]),compareTickNum),_[0].length),eA=0+6*eT,eS=6*Math.max(0,ek-eT),eM=Math.min(es.ge(_[1],(er[1]-N[1])/(N[3]-N[1]),compareTickNum),_[1].length),eC=Math.min(es.gt(_[1],(er[3]-N[1])/(N[3]-N[1]),compareTickNum),_[1].length),eE=ew+6*eM,eL=6*Math.max(0,eC-eM);ee[0]=2*(en[0]-ev[1])/el-1,ee[1]=(en[3]+en[1])/ec-1,et[0]=ev[1]*ei/el,et[1]=ex[1]*ei/ec,eL&&(ey.color=e_[1],ey.tickScale=et,ey.dataAxis=$,ey.screenOffset=ee,F.drawArrays(F.TRIANGLES,eE,eL)),ee[0]=(en[2]+en[0])/el-1,ee[1]=2*(en[1]-ev[0])/ec-1,et[0]=ex[0]*ei/el,et[1]=ev[0]*ei/ec,eS&&(ey.color=e_[0],ey.tickScale=et,ey.dataAxis=X,ey.screenOffset=ee,F.drawArrays(F.TRIANGLES,eA,eS)),ee[0]=2*(en[2]+ev[3])/el-1,ee[1]=(en[3]+en[1])/ec-1,et[0]=ev[3]*ei/el,et[1]=ex[3]*ei/ec,eL&&(ey.color=e_[3],ey.tickScale=et,ey.dataAxis=$,ey.screenOffset=ee,F.drawArrays(F.TRIANGLES,eE,eL)),ee[0]=(en[2]+en[0])/el-1,ee[1]=2*(en[3]+ev[2])/ec-1,et[0]=ex[2]*ei/el,et[1]=ev[2]*ei/ec,eS&&(ey.color=e_[2],ey.tickScale=et,ey.dataAxis=X,ey.screenOffset=ee,F.drawArrays(F.TRIANGLES,eA,eS))}),ec.update=(er=[1,1,-1,-1,1,-1],en=[1,-1,1,1,-1,-1],function(i){var o=i.ticks,s=i.bounds,_=new Float32Array(18*(o[0].length+o[1].length));this.plot.zeroLineEnable;for(var F=0,N=[[],[]],j=0;j<2;++j)for(var Z=N[j],X=o[j],$=s[j],ee=s[j+2],et=0;et<X.length;++et){var ei=(X[et].x-$)/(ee-$);Z.push(ei);for(var eo=0;eo<6;++eo)_[F++]=ei,_[F++]=er[eo],_[F++]=en[eo]}this.ticks=N,this.vbo.update(_)}),ec.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(i,o,s){"use strict";i.exports=createLines;var _,F,N=s(5827),j=s(5158),Z=s(2709);function Lines(i,o,s){this.plot=i,this.vbo=o,this.shader=s}var X=Lines.prototype;function createLines(i){var o=i.gl;return new Lines(i,N(o,[-1,-1,-1,1,1,-1,1,1]),j(o,Z.lineVert,Z.lineFrag))}X.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},X.drawLine=(_=[0,0],F=[0,0],function(i,o,s,N,j,Z){var X=this.plot,$=this.shader,ee=X.gl;_[0]=i,_[1]=o,F[0]=s,F[1]=N,$.uniforms.start=_,$.uniforms.end=F,$.uniforms.width=j*X.pixelRatio,$.uniforms.color=Z,ee.drawArrays(ee.TRIANGLE_STRIP,0,4)}),X.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(i,o,s){"use strict";var _=s(6832),F=_(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);i.exports={lineVert:_(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:F,textVert:_(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:F,gridVert:_(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:F,boxVert:_(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:_(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},5613:function(i,o,s){"use strict";i.exports=createTextElements;var _,F,N,j,Z,X,$,ee,et=s(5827),er=s(5158),en=s(6946),ei=s(5070),eo=s(2709);function TextElements(i,o,s){this.plot=i,this.vbo=o,this.shader=s,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var es=TextElements.prototype;function createTextElements(i){var o=i.gl;return new TextElements(i,et(o),er(o,eo.textVert,eo.textFrag))}es.drawTicks=(_=[0,0],F=[0,0],N=[0,0],function(i){var o=this.plot,s=this.shader,j=this.tickX[i],Z=this.tickOffset[i],X=o.gl,$=o.viewBox,ee=o.dataBox,et=o.screenBox,er=o.pixelRatio,en=o.tickEnable,eo=o.tickPad,es=o.tickColor,el=o.tickAngle,ec=o.labelEnable,eu=o.labelPad,ef=o.labelColor,ed=o.labelAngle,eh=this.labelOffset[i],ep=this.labelCount[i],eg=ei.lt(j,ee[i]),em=ei.le(j,ee[i+2]);_[0]=_[1]=0,_[i]=1,F[i]=($[2+i]+$[i])/(et[2+i]-et[i])-1;var ey=2/et[2+(1^i)]-et[1^i];F[1^i]=ey*$[1^i]-1,en[i]&&(F[1^i]-=ey*er*eo[i],eg<em&&Z[em]>Z[eg]&&(s.uniforms.dataAxis=_,s.uniforms.screenOffset=F,s.uniforms.color=es[i],s.uniforms.angle=el[i],X.drawArrays(X.TRIANGLES,Z[eg],Z[em]-Z[eg]))),ec[i]&&ep&&(F[1^i]-=ey*er*eu[i],s.uniforms.dataAxis=N,s.uniforms.screenOffset=F,s.uniforms.color=ef[i],s.uniforms.angle=ed[i],X.drawArrays(X.TRIANGLES,eh,ep)),F[1^i]=ey*$[2+(1^i)]-1,en[i+2]&&(F[1^i]+=ey*er*eo[i+2],eg<em&&Z[em]>Z[eg]&&(s.uniforms.dataAxis=_,s.uniforms.screenOffset=F,s.uniforms.color=es[i+2],s.uniforms.angle=el[i+2],X.drawArrays(X.TRIANGLES,Z[eg],Z[em]-Z[eg]))),ec[i+2]&&ep&&(F[1^i]+=ey*er*eu[i+2],s.uniforms.dataAxis=N,s.uniforms.screenOffset=F,s.uniforms.color=ef[i+2],s.uniforms.angle=ed[i+2],X.drawArrays(X.TRIANGLES,eh,ep))}),es.drawTitle=(j=[0,0],Z=[0,0],function(){var i=this.plot,o=this.shader,s=i.gl,_=i.screenBox,F=i.titleCenter,N=i.titleAngle,X=i.titleColor,$=i.pixelRatio;if(this.titleCount){for(var ee=0;ee<2;++ee)Z[ee]=2*(F[ee]*$-_[ee])/(_[2+ee]-_[ee])-1;o.bind(),o.uniforms.dataAxis=j,o.uniforms.screenOffset=Z,o.uniforms.angle=N,o.uniforms.color=X,s.drawArrays(s.TRIANGLES,this.titleOffset,this.titleCount)}}),es.bind=(X=[0,0],$=[0,0],ee=[0,0],function(){var i=this.plot,o=this.shader,s=i._tickBounds,_=i.dataBox,F=i.screenBox,N=i.viewBox;o.bind();for(var j=0;j<2;++j){var Z=s[j],et=s[j+2]-Z,er=.5*(_[j+2]+_[j]),en=_[j+2]-_[j],ei=N[j],eo=N[j+2]-ei,es=F[j],el=F[j+2]-es;$[j]=2*et/en*eo/el,X[j]=2*(Z-er)/en*eo/el}ee[1]=2*i.pixelRatio/(F[3]-F[1]),ee[0]=ee[1]*(F[3]-F[1])/(F[2]-F[0]),o.uniforms.dataScale=$,o.uniforms.dataShift=X,o.uniforms.textScale=ee,this.vbo.bind(),o.attributes.textCoordinate.pointer()}),es.update=function(i){var o,s,_,F,N,j=[],Z=i.ticks,X=i.bounds;for(N=0;N<2;++N){var $=[Math.floor(j.length/3)],ee=[-1/0],et=Z[N];for(o=0;o<et.length;++o){var er=et[o],ei=er.x,eo=er.text,es=er.font||"sans-serif";F=er.fontSize||12;for(var el=1/(X[N+2]-X[N]),ec=X[N],eu=eo.split("\n"),ef=0;ef<eu.length;ef++)for(s=0,_=en(es,eu[ef]).data;s<_.length;s+=2)j.push(_[s]*F,-_[s+1]*F-ef*F*1.2,(ei-ec)*el);$.push(Math.floor(j.length/3)),ee.push(ei)}this.tickOffset[N]=$,this.tickX[N]=ee}for(N=0;N<2;++N){for(o=0,this.labelOffset[N]=Math.floor(j.length/3),_=en(i.labelFont[N],i.labels[N],{textAlign:"center"}).data,F=i.labelSize[N];o<_.length;o+=2)j.push(_[o]*F,-_[o+1]*F,0);this.labelCount[N]=Math.floor(j.length/3)-this.labelOffset[N]}for(o=0,this.titleOffset=Math.floor(j.length/3),_=en(i.titleFont,i.title).data,F=i.titleSize;o<_.length;o+=2)j.push(_[o]*F,-_[o+1]*F,0);this.titleCount=Math.floor(j.length/3)-this.titleOffset,this.vbo.update(j)},es.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(i,o,s){"use strict";i.exports=createGLPlot2D;var _=s(2611),F=s(3016),N=s(5613),j=s(1154),Z=s(4554);function GLPlot2D(i,o){this.gl=i,this.pickBuffer=o,this.screenBox=[0,0,i.drawingBufferWidth,i.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var X=GLPlot2D.prototype;function deepClone(i){for(var o=i.slice(),s=0;s<o.length;++s)o[s]=o[s].slice();return o}function compareTicks(i,o){return i.x-o.x}function createGLPlot2D(i){var o=i.gl,s=_(o,[o.drawingBufferWidth,o.drawingBufferHeight]),X=new GLPlot2D(o,s);return X.grid=F(X),X.text=N(X),X.line=j(X),X.box=Z(X),X.update(i),X}X.setDirty=function(){this.dirty=this.pickDirty=!0},X.setOverlayDirty=function(){this.dirty=!0},X.nextDepthValue=function(){return this._depthCounter++/65536},X.draw=function(){var i=this.gl,o=this.screenBox,s=this.viewBox,_=this.dataBox,F=this.pixelRatio,N=this.grid,j=this.line,Z=this.text,X=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,i.bindFramebuffer(i.FRAMEBUFFER,null),i.enable(i.SCISSOR_TEST),i.disable(i.DEPTH_TEST),i.depthFunc(i.LESS),i.depthMask(!1),i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD,i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),this.borderColor){i.scissor(o[0],o[1],o[2]-o[0],o[3]-o[1]);var $=this.borderColor;i.clearColor($[0]*$[3],$[1]*$[3],$[2]*$[3],$[3]),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}i.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]),i.viewport(s[0],s[1],s[2]-s[0],s[3]-s[1]);var ee=this.backgroundColor;i.clearColor(ee[0]*ee[3],ee[1]*ee[3],ee[2]*ee[3],ee[3]),i.clear(i.COLOR_BUFFER_BIT),N.draw();var et=this.zeroLineEnable,er=this.zeroLineColor,en=this.zeroLineWidth;if(et[0]||et[1]){j.bind();for(var ei=0;ei<2;++ei)if(et[ei]&&_[ei]<=0&&_[ei+2]>=0){var eo=o[ei]-_[ei]*(o[ei+2]-o[ei])/(_[ei+2]-_[ei]);0===ei?j.drawLine(eo,o[1],eo,o[3],en[ei],er[ei]):j.drawLine(o[0],eo,o[2],eo,en[ei],er[ei])}}for(var ei=0;ei<X.length;++ei)X[ei].draw();i.viewport(o[0],o[1],o[2]-o[0],o[3]-o[1]),i.scissor(o[0],o[1],o[2]-o[0],o[3]-o[1]),this.grid.drawTickMarks(),j.bind();var es=this.borderLineEnable,el=this.borderLineWidth,ec=this.borderLineColor;es[1]&&j.drawLine(s[0],s[1]-.5*el[1]*F,s[0],s[3]+.5*el[3]*F,el[1],ec[1]),es[0]&&j.drawLine(s[0]-.5*el[0]*F,s[1],s[2]+.5*el[2]*F,s[1],el[0],ec[0]),es[3]&&j.drawLine(s[2],s[1]-.5*el[1]*F,s[2],s[3]+.5*el[3]*F,el[3],ec[3]),es[2]&&j.drawLine(s[0]-.5*el[0]*F,s[3],s[2]+.5*el[2]*F,s[3],el[2],ec[2]),Z.bind();for(var ei=0;ei<2;++ei)Z.drawTicks(ei);this.titleEnable&&Z.drawTitle();for(var eu=this.overlays,ei=0;ei<eu.length;++ei)eu[ei].draw();i.disable(i.SCISSOR_TEST),i.disable(i.BLEND),i.depthMask(!0)}},X.drawPick=function(){if(!this.static){var i=this.pickBuffer;this.gl,this._pickTimeout=null,i.begin();for(var o=1,s=this.objects,_=0;_<s.length;++_)o=s[_].drawPick(o);i.end()}},X.pick=function(i,o){if(!this.static){var s=this.pixelRatio,_=this.pickPixelRatio,F=this.viewBox,N=0|Math.round((i-F[0]/s)*_),j=0|Math.round((o-F[1]/s)*_),Z=this.pickBuffer.query(N,j,this.pickRadius);if(!Z)return null;for(var X=Z.id+(Z.value[0]<<8)+(Z.value[1]<<16)+(Z.value[2]<<24),$=this.objects,ee=0;ee<$.length;++ee){var et=$[ee].pick(N,j,X);if(et)return et}return null}},X.setScreenBox=function(i){var o=this.screenBox,s=this.pixelRatio;o[0]=0|Math.round(i[0]*s),o[1]=0|Math.round(i[1]*s),o[2]=0|Math.round(i[2]*s),o[3]=0|Math.round(i[3]*s),this.setDirty()},X.setDataBox=function(i){var o=this.dataBox;(o[0]!==i[0]||o[1]!==i[1]||o[2]!==i[2]||o[3]!==i[3])&&(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],this.setDirty())},X.setViewBox=function(i){var o=this.pixelRatio,s=this.viewBox;s[0]=0|Math.round(i[0]*o),s[1]=0|Math.round(i[1]*o),s[2]=0|Math.round(i[2]*o),s[3]=0|Math.round(i[3]*o);var _=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((i[2]-i[0])*_),0|Math.round((i[3]-i[1])*_)],this.setDirty()},X.update=function(i){i=i||{};var o=this.gl;this.pixelRatio=i.pixelRatio||1;var s=this.pixelRatio;this.pickPixelRatio=Math.max(s,1),this.setScreenBox(i.screenBox||[0,0,o.drawingBufferWidth/s,o.drawingBufferHeight/s]),this.screenBox,this.setViewBox(i.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/s,.125*(this.screenBox[3]-this.screenBox[1])/s,.875*(this.screenBox[2]-this.screenBox[0])/s,.875*(this.screenBox[3]-this.screenBox[1])/s]);var _=this.viewBox,F=(_[2]-_[0])/(_[3]-_[1]);this.setDataBox(i.dataBox||[-10,-10/F,10,10/F]),this.borderColor=!1!==i.borderColor&&(i.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(i.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(i.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(i.gridLineWidth||[1,1]).slice(),this.gridLineColor=deepClone(i.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(i.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(i.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=deepClone(i.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(i.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(i.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=deepClone(i.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(i.titleCenter||[.5*(_[0]+_[2])/s,(_[3]+120)/s]).slice(),this.titleEnable=!("titleEnable"in i)||!!i.titleEnable,this.titleAngle=i.titleAngle||0,this.titleColor=(i.titleColor||[0,0,0,1]).slice(),this.labelPad=(i.labelPad||[15,15,15,15]).slice(),this.labelAngle=(i.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(i.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=deepClone(i.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(i.tickPad||[15,15,15,15]).slice(),this.tickAngle=(i.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(i.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=deepClone(i.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(i.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(i.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=deepClone(i.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var N=i.ticks||[[],[]],j=this._tickBounds;j[0]=j[1]=1/0,j[2]=j[3]=-1/0;for(var Z=0;Z<2;++Z){var X=N[Z].slice(0);0!==X.length&&(X.sort(compareTicks),j[Z]=Math.min(j[Z],X[0].x),j[Z+2]=Math.max(j[Z+2],X[X.length-1].x))}this.grid.update({bounds:j,ticks:N}),this.text.update({bounds:j,ticks:N,labels:i.labels||["x","y"],labelSize:i.labelSize||[12,12],labelFont:i.labelFont||["sans-serif","sans-serif"],title:i.title||"",titleSize:i.titleSize||18,titleFont:i.titleFont||"sans-serif"}),this.static=!!i.static,this.setDirty()},X.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var i=this.objects.length-1;i>=0;--i)this.objects[i].dispose();this.objects.length=0;for(var i=this.overlays.length-1;i>=0;--i)this.overlays[i].dispose();this.overlays.length=0,this.gl=null},X.addObject=function(i){0>this.objects.indexOf(i)&&(this.objects.push(i),this.setDirty())},X.removeObject=function(i){for(var o=this.objects,s=0;s<o.length;++s)if(o[s]===i){o.splice(s,1),this.setDirty();break}},X.addOverlay=function(i){0>this.overlays.indexOf(i)&&(this.overlays.push(i),this.setOverlayDirty())},X.removeOverlay=function(i){for(var o=this.overlays,s=0;s<o.length;++s)if(o[s]===i){o.splice(s,1),this.setOverlayDirty();break}}},4296:function(i,o,s){"use strict";i.exports=createCamera;var _=s(8161),F=s(1152),N=s(6145),j=s(6475),Z=s(2565),X=s(5233);function createCamera(i,o){i=i||document.body;var s=[.01,1/0];"distanceLimits"in(o=o||{})&&(s[0]=o.distanceLimits[0],s[1]=o.distanceLimits[1]),"zoomMin"in o&&(s[0]=o.zoomMin),"zoomMax"in o&&(s[1]=o.zoomMax);var $=F({center:o.center||[0,0,0],up:o.up||[0,1,0],eye:o.eye||[0,0,10],mode:o.mode||"orbit",distanceLimits:s}),ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],et=0,er=i.clientWidth,en=i.clientHeight,ei={keyBindingMode:"rotate",enableWheel:!0,view:$,element:i,delay:o.delay||16,rotateSpeed:o.rotateSpeed||1,zoomSpeed:o.zoomSpeed||1,translateSpeed:o.translateSpeed||1,flipX:!!o.flipX,flipY:!!o.flipY,modes:$.modes,_ortho:o._ortho||o.projection&&"orthographic"===o.projection.type||!1,tick:function(){var o=_(),s=this.delay,F=o-2*s;$.idle(o-s),$.recalcMatrix(F),$.flush(o-(100+2*s));for(var N=!0,j=$.computedMatrix,Z=0;Z<16;++Z)N=N&&ee[Z]===j[Z],ee[Z]=j[Z];var X=i.clientWidth===er&&i.clientHeight===en;return(er=i.clientWidth,en=i.clientHeight,N)?!X:(et=Math.exp($.computedRadius[0]),!0)},lookAt:function(i,o,s){$.lookAt($.lastT(),i,o,s)},rotate:function(i,o,s){$.rotate($.lastT(),i,o,s)},pan:function(i,o,s){$.pan($.lastT(),i,o,s)},translate:function(i,o,s){$.translate($.lastT(),i,o,s)}};return Object.defineProperties(ei,{matrix:{get:function(){return $.computedMatrix},set:function(i){return $.setMatrix($.lastT(),i),$.computedMatrix},enumerable:!0},mode:{get:function(){return $.getMode()},set:function(i){var o=$.computedUp.slice(),s=$.computedEye.slice(),F=$.computedCenter.slice();if($.setMode(i),"turntable"===i){var N=_();$._active.lookAt(N,s,F,o),$._active.lookAt(N+500,s,F,[0,0,1]),$._active.flush(N)}return $.getMode()},enumerable:!0},center:{get:function(){return $.computedCenter},set:function(i){return $.lookAt($.lastT(),null,i),$.computedCenter},enumerable:!0},eye:{get:function(){return $.computedEye},set:function(i){return $.lookAt($.lastT(),i),$.computedEye},enumerable:!0},up:{get:function(){return $.computedUp},set:function(i){return $.lookAt($.lastT(),null,null,i),$.computedUp},enumerable:!0},distance:{get:function(){return et},set:function(i){return $.setDistance($.lastT(),i),i},enumerable:!0},distanceLimits:{get:function(){return $.getDistanceLimits(s)},set:function(i){return $.setDistanceLimits(i),i},enumerable:!0}}),i.addEventListener("contextmenu",function(i){return i.preventDefault(),!1}),ei._lastX=-1,ei._lastY=-1,ei._lastMods={shift:!1,control:!1,alt:!1,meta:!1},ei.enableMouseListeners=function(){function handleInteraction(o,s,F,N){var j=ei.keyBindingMode;if(!1!==j){var Z=!!N.control,X=!!N.alt,ee=!!N.shift,er=!!(1&o),en=1/i.clientHeight,eo=en*(s-ei._lastX),es=en*(F-ei._lastY),el=ei.flipX?1:-1,ec=ei.flipY?1:-1,eu=Math.PI*ei.rotateSpeed,ef=_();if(-1!==ei._lastX&&-1!==ei._lastY&&(("rotate"!==j||!er||Z||X||ee)&&(!er||Z||X||!ee)||$.rotate(ef,el*eu*eo,-ec*eu*es,0),("pan"!==j||!er||Z||X||ee)&&!(2&o)&&(!er||!Z||X||ee)||$.pan(ef,-ei.translateSpeed*eo*et,ei.translateSpeed*es*et,0),"zoom"===j&&er&&!Z&&!X&&!ee||4&o||er&&!Z&&X&&!ee)){var ed=-ei.zoomSpeed*es/window.innerHeight*(ef-$.lastT())*100;$.pan(ef,0,0,et*(Math.exp(ed)-1))}return ei._lastX=s,ei._lastY=F,ei._lastMods=N,!0}}ei.mouseListener=N(i,handleInteraction),i.addEventListener("touchstart",function(o){var s=Z(o.changedTouches[0],i);handleInteraction(0,s[0],s[1],ei._lastMods),handleInteraction(1,s[0],s[1],ei._lastMods)},!!X&&{passive:!0}),i.addEventListener("touchmove",function(o){var s=Z(o.changedTouches[0],i);handleInteraction(1,s[0],s[1],ei._lastMods),o.preventDefault()},!!X&&{passive:!1}),i.addEventListener("touchend",function(i){handleInteraction(0,ei._lastX,ei._lastY,ei._lastMods)},!!X&&{passive:!0}),ei.wheelListener=j(i,function(i,o){if(!1!==ei.keyBindingMode&&ei.enableWheel){var s=ei.flipX?1:-1,F=ei.flipY?1:-1,N=_();if(Math.abs(i)>Math.abs(o))$.rotate(N,0,0,-i*s*Math.PI*ei.rotateSpeed/window.innerWidth);else if(!ei._ortho){var j=-ei.zoomSpeed*F*o/window.innerHeight*(N-$.lastT())/20;$.pan(N,0,0,et*(Math.exp(j)-1))}}},!0)},ei.enableMouseListeners(),ei}},8245:function(i,o,s){var _=s(6832),F=s(5158),N=_(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),j=_(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);i.exports=function(i){return F(i,N,j,null,[{name:"position",type:"vec2"}])}},1059:function(i,o,s){"use strict";var _=s(4296),F=s(7453),N=s(2771),j=s(6496),Z=s(2611),X=s(4234),$=s(8126),ee=s(6145),et=s(1120),er=s(5268),en=s(8245),ei=s(2321)({tablet:!0,featureDetect:!0});function MouseSelect(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function getContext(i,o){var s=null;try{(s=i.getContext("webgl",o))||(s=i.getContext("experimental-webgl",o))}catch(i){return null}return s}function roundUpPow10(i){var o=Math.round(Math.log(Math.abs(i))/Math.log(10));if(o<0){var s=Math.round(Math.pow(10,-o));return Math.ceil(i*s)/s}if(o>0){var s=Math.round(Math.pow(10,o));return Math.ceil(i/s)*s}return Math.ceil(i)}function defaultBool(i){return"boolean"!=typeof i||i}function createScene(i){(i=i||{}).camera=i.camera||{};var o=i.canvas;o||(o=document.createElement("canvas"),i.container?i.container.appendChild(o):document.body.appendChild(o));var s=i.gl;if(s||(i.glOptions&&(ei=!!i.glOptions.preserveDrawingBuffer),s=getContext(o,i.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:ei})),!s)throw Error("webgl not supported");var et=i.bounds||[[-10,-10,-10],[10,10,10]],er=new MouseSelect,eo=X(s,s.drawingBufferWidth,s.drawingBufferHeight,{preferFloat:!ei}),es=en(s),el=i.cameraObject&&!0===i.cameraObject._ortho||i.camera.projection&&"orthographic"===i.camera.projection.type||!1,ec={eye:i.camera.eye||[2,0,0],center:i.camera.center||[0,0,0],up:i.camera.up||[0,1,0],zoomMin:i.camera.zoomMax||.1,zoomMax:i.camera.zoomMin||100,mode:i.camera.mode||"turntable",_ortho:el},eu=i.axes||{},ef=F(s,eu);ef.enable=!eu.disable;var ed=i.spikes||{},eh=j(s,ed),ep=[],eg=[],em=[],ey=[],ev=!0,ex=!0,e_={view:null,projection:Array(16),model:Array(16),_ortho:!1},ex=!0,ew=[s.drawingBufferWidth,s.drawingBufferHeight],eT=i.cameraObject||_(o,ec),ek={gl:s,contextLost:!1,pixelRatio:i.pixelRatio||1,canvas:o,selection:er,camera:eT,axes:ef,axesPixels:null,spikes:eh,bounds:et,objects:ep,shape:ew,aspect:i.aspectRatio||[1,1,1],pickRadius:i.pickRadius||10,zNear:i.zNear||.01,zFar:i.zFar||1e3,fovy:i.fovy||Math.PI/4,clearColor:i.clearColor||[0,0,0,0],autoResize:defaultBool(i.autoResize),autoBounds:defaultBool(i.autoBounds),autoScale:!!i.autoScale,autoCenter:defaultBool(i.autoCenter),clipToBounds:defaultBool(i.clipToBounds),snapToData:!!i.snapToData,onselect:i.onselect||null,onrender:i.onrender||null,onclick:i.onclick||null,cameraParams:e_,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(i){this.aspect[0]=i.x,this.aspect[1]=i.y,this.aspect[2]=i.z,ex=!0},setBounds:function(i,o){this.bounds[0][i]=o.min,this.bounds[1][i]=o.max},setClearColor:function(i){this.clearColor=i},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},eA=[s.drawingBufferWidth/ek.pixelRatio|0,s.drawingBufferHeight/ek.pixelRatio|0];function resizeListener(){if(!ek._stopped&&ek.autoResize){var i=o.parentNode,s=1,_=1;i&&i!==document.body?(s=i.clientWidth,_=i.clientHeight):(s=window.innerWidth,_=window.innerHeight);var F=0|Math.ceil(s*ek.pixelRatio),N=0|Math.ceil(_*ek.pixelRatio);if(F!==o.width||N!==o.height){o.width=F,o.height=N;var j=o.style;j.position=j.position||"absolute",j.left="0px",j.top="0px",j.width=s+"px",j.height=_+"px",ev=!0}}}function reallocPickIds(){for(var i=ep.length,o=ey.length,_=0;_<o;++_)em[_]=0;s:for(var _=0;_<i;++_){var F=ep[_],N=F.pickSlots;if(!N){eg[_]=-1;continue}for(var j=0;j<o;++j)if(em[j]+N<255){eg[_]=j,F.setPickBase(em[j]+1),em[j]+=N;continue s}var X=Z(s,ew);eg[_]=o,ey.push(X),em.push(N),F.setPickBase(1),o+=1}for(;o>0&&0===em[o-1];)em.pop(),ey.pop().dispose()}function checkContextLoss(){if(ek.contextLost)return!0;s.isContextLost()&&(ek.contextLost=!0,ek.mouseListener.enabled=!1,ek.selection.object=null,ek.oncontextloss&&ek.oncontextloss())}function renderPick(){if(!checkContextLoss()){s.colorMask(!0,!0,!0,!0),s.depthMask(!0),s.disable(s.BLEND),s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL);for(var i=ep.length,o=ey.length,_=0;_<o;++_){var F=ey[_];F.shape=eA,F.begin();for(var N=0;N<i;++N)if(eg[N]===_){var j=ep[N];j.drawPick&&(j.pixelRatio=1,j.drawPick(e_))}F.end()}}}ek.autoResize&&resizeListener(),window.addEventListener("resize",resizeListener),ek.update=function(i){ek._stopped||(i=i||{},ev=!0,ex=!0)},ek.add=function(i){ek._stopped||(i.axes=ef,ep.push(i),eg.push(-1),ev=!0,ex=!0,reallocPickIds())},ek.remove=function(i){if(!ek._stopped){var o=ep.indexOf(i);o<0||(ep.splice(o,1),eg.pop(),ev=!0,ex=!0,reallocPickIds())}},ek.dispose=function(){if(!ek._stopped&&(ek._stopped=!0,window.removeEventListener("resize",resizeListener),o.removeEventListener("webglcontextlost",checkContextLoss),ek.mouseListener.enabled=!1,!ek.contextLost)){ef.dispose(),eh.dispose();for(var i=0;i<ep.length;++i)ep[i].dispose();eo.dispose();for(var i=0;i<ey.length;++i)ey[i].dispose();es.dispose(),s=null,ef=null,eh=null,ep=[]}},ek._mouseRotating=!1,ek._prevButtons=0,ek.enableMouseListeners=function(){ek.mouseListener=ee(o,function(i,o,s){if(!ek._stopped){var _=ey.length,F=ep.length,N=er.object;er.distance=1/0,er.mouse[0]=o,er.mouse[1]=s,er.object=null,er.screen=null,er.dataCoordinate=er.dataPosition=null;var j=!1;if(i&&ek._prevButtons)ek._mouseRotating=!0;else{ek._mouseRotating&&(ex=!0),ek._mouseRotating=!1;for(var Z=0;Z<_;++Z){var X=ey[Z].query(o,eA[1]-s-1,ek.pickRadius);if(X){if(X.distance>er.distance)continue;for(var $=0;$<F;++$){var ee=ep[$];if(eg[$]===Z){var et=ee.pick(X);et&&(er.buttons=i,er.screen=X.coord,er.distance=X.distance,er.object=ee,er.index=et.distance,er.dataPosition=et.position,er.dataCoordinate=et.dataCoordinate,er.data=et,j=!0)}}}}}N&&N!==er.object&&(N.highlight&&N.highlight(null),ev=!0),er.object&&(er.object.highlight&&er.object.highlight(er.data),ev=!0),(j=j||er.object!==N)&&ek.onselect&&ek.onselect(er),1&i&&!(1&ek._prevButtons)&&ek.onclick&&ek.onclick(er),ek._prevButtons=i}})},o.addEventListener("webglcontextlost",checkContextLoss);var eS=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],eM=[eS[0].slice(),eS[1].slice()];function redraw(){if(!checkContextLoss()){resizeListener();var i=ek.camera.tick();e_.view=ek.camera.matrix,ev=ev||i,ex=ex||i,ef.pixelRatio=ek.pixelRatio,eh.pixelRatio=ek.pixelRatio;var o=ep.length,_=eS[0],F=eS[1];_[0]=_[1]=_[2]=1/0,F[0]=F[1]=F[2]=-1/0;for(var j=0;j<o;++j){var Z=ep[j];Z.pixelRatio=ek.pixelRatio,Z.axes=ek.axes,ev=ev||!!Z.dirty,ex=ex||!!Z.dirty;var X=Z.bounds;if(X)for(var ee=X[0],et=X[1],en=0;en<3;++en)_[en]=Math.min(_[en],ee[en]),F[en]=Math.max(F[en],et[en])}var ei=ek.bounds;if(ek.autoBounds)for(var en=0;en<3;++en){if(F[en]<_[en])_[en]=-1,F[en]=1;else{_[en]===F[en]&&(_[en]-=1,F[en]+=1);var ec=.05*(F[en]-_[en]);_[en]=_[en]-ec,F[en]=F[en]+ec}ei[0][en]=_[en],ei[1][en]=F[en]}for(var eu=!1,en=0;en<3;++en)eu=eu||eM[0][en]!==ei[0][en]||eM[1][en]!==ei[1][en],eM[0][en]=ei[0][en],eM[1][en]=ei[1][en];if(ex=ex||eu,ev=ev||eu){if(eu){for(var ed=[0,0,0],j=0;j<3;++j)ed[j]=roundUpPow10((ei[1][j]-ei[0][j])/10);ef.autoTicks?ef.update({bounds:ei,tickSpacing:ed}):ef.update({bounds:ei})}var eg=s.drawingBufferWidth,em=s.drawingBufferHeight;ew[0]=eg,ew[1]=em,eA[0]=0|Math.max(eg/ek.pixelRatio,1),eA[1]=0|Math.max(em/ek.pixelRatio,1),calcCameraParams(ek,el);for(var j=0;j<o;++j){var Z=ep[j];Z.axesBounds=ei,ek.clipToBounds&&(Z.clipBounds=ei)}er.object&&(ek.snapToData?eh.position=er.dataCoordinate:eh.position=er.dataPosition,eh.bounds=ei),ex&&(ex=!1,renderPick()),ek.axesPixels=N(ek.axes,e_,eg,em),ek.onrender&&ek.onrender(),s.bindFramebuffer(s.FRAMEBUFFER,null),s.viewport(0,0,eg,em),ek.clearRGBA(),s.depthMask(!0),s.colorMask(!0,!0,!0,!0),s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL),s.disable(s.BLEND),s.disable(s.CULL_FACE);var ey=!1;ef.enable&&(ey=ey||ef.isTransparent(),ef.draw(e_)),eh.axes=ef,er.object&&eh.draw(e_),s.disable(s.CULL_FACE);for(var j=0;j<o;++j){var Z=ep[j];Z.axes=ef,Z.pixelRatio=ek.pixelRatio,Z.isOpaque&&Z.isOpaque()&&Z.draw(e_),Z.isTransparent&&Z.isTransparent()&&(ey=!0)}if(ey){eo.shape=ew,eo.bind(),s.clear(s.DEPTH_BUFFER_BIT),s.colorMask(!1,!1,!1,!1),s.depthMask(!0),s.depthFunc(s.LESS),ef.enable&&ef.isTransparent()&&ef.drawTransparent(e_);for(var j=0;j<o;++j){var Z=ep[j];Z.isOpaque&&Z.isOpaque()&&Z.draw(e_)}s.enable(s.BLEND),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.colorMask(!0,!0,!0,!0),s.depthMask(!1),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),ef.isTransparent()&&ef.drawTransparent(e_);for(var j=0;j<o;++j){var Z=ep[j];Z.isTransparent&&Z.isTransparent()&&Z.drawTransparent(e_)}s.bindFramebuffer(s.FRAMEBUFFER,null),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.disable(s.DEPTH_TEST),es.bind(),eo.color[0].bind(0),es.uniforms.accumBuffer=0,$(s),s.disable(s.BLEND)}ev=!1;for(var j=0;j<o;++j)ep[j].dirty=!1}}}function render(){ek._stopped||ek.contextLost||(redraw(),requestAnimationFrame(render))}return ek.enableMouseListeners(),render(),ek.redraw=function(){ek._stopped||(ev=!0,redraw())},ek}function calcCameraParams(i,o){var s=i.bounds,_=i.cameraParams,F=_.projection,N=_.model,j=i.gl.drawingBufferWidth,Z=i.gl.drawingBufferHeight,X=i.zNear,$=i.zFar,ee=i.fovy,en=j/Z;o?(er(F,-en,en,-1,1,X,$),_._ortho=!0):(et(F,ee,en,X,$),_._ortho=!1);for(var ei=0;ei<16;++ei)N[ei]=0;N[15]=1;for(var eo=0,ei=0;ei<3;++ei)eo=Math.max(eo,s[1][ei]-s[0][ei]);for(var ei=0;ei<3;++ei)i.autoScale?N[5*ei]=i.aspect[ei]/(s[1][ei]-s[0][ei]):N[5*ei]=1/eo,i.autoCenter&&(N[12+ei]=-(.5*N[5*ei])*(s[0][ei]+s[1][ei]))}i.exports={createScene:createScene,createCamera:_}},8023:function(i,o,s){var _=s(6832);o.pointVertex=_(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),o.pointFragment=_(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),o.pickVertex=_(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),o.pickFragment=_(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},8271:function(i,o,s){"use strict";var _,F,N=s(5158),j=s(5827),Z=s(5306),X=s(8023);function Pointcloud2D(i,o,s,_,F){this.plot=i,this.offsetBuffer=o,this.pickBuffer=s,this.shader=_,this.pickShader=F,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}i.exports=createPointcloud2D;var $=Pointcloud2D.prototype;function count(i,o){var s,_=0,F=i.length>>>1;for(s=0;s<F;s++){var N=i[2*s],j=i[2*s+1];N>=o[0]&&N<=o[2]&&j>=o[1]&&j<=o[3]&&_++}return _}function createPointcloud2D(i,o){var s=i.gl,_=new Pointcloud2D(i,j(s),j(s),N(s,X.pointVertex,X.pointFragment),N(s,X.pickVertex,X.pickFragment));return _.update(o),i.addObject(_),_}$.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},$.update=function(i){function dflt(o,s){return o in i?i[o]:s}i=i||{},this.sizeMin=dflt("sizeMin",.5),this.sizeMax=dflt("sizeMax",20),this.color=dflt("color",[1,0,0,1]).slice(),this.areaRatio=dflt("areaRatio",1),this.borderColor=dflt("borderColor",[0,0,0,1]).slice(),this.blend=dflt("blend",!1);var o,s=i.positions.length>>>1,_=i.positions instanceof Float32Array,F=i.idToIndex instanceof Int32Array&&i.idToIndex.length>=s,N=i.positions,j=_?N:Z.mallocFloat32(N.length),X=F?i.idToIndex:Z.mallocInt32(s);if(_||j.set(N),!F)for(j.set(N),o=0;o<s;o++)X[o]=o;this.points=N,this.offsetBuffer.update(j),this.pickBuffer.update(X),_||Z.free(j),F||Z.free(X),this.pointCount=s,this.pickOffset=0},$.unifiedDraw=(_=[1,0,0,0,1,0,0,0,1],F=[0,0,0,0],function(i){var o=void 0!==i,s=o?this.pickShader:this.shader,N=this.plot.gl,j=this.plot.dataBox;if(0===this.pointCount)return i;var Z=j[2]-j[0],X=j[3]-j[1],$=count(this.points,j),ee=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow($,.33333)));_[0]=2/Z,_[4]=2/X,_[6]=-2*j[0]/Z-1,_[7]=-2*j[1]/X-1,this.offsetBuffer.bind(),s.bind(),s.attributes.position.pointer(),s.uniforms.matrix=_,s.uniforms.color=this.color,s.uniforms.borderColor=this.borderColor,s.uniforms.pointCloud=ee<5,s.uniforms.pointSize=ee,s.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),o&&(F[0]=255&i,F[1]=i>>8&255,F[2]=i>>16&255,F[3]=i>>24&255,this.pickBuffer.bind(),s.attributes.pickId.pointer(N.UNSIGNED_BYTE),s.uniforms.pickOffset=F,this.pickOffset=i);var et=N.getParameter(N.BLEND),er=N.getParameter(N.DITHER);return et&&!this.blend&&N.disable(N.BLEND),er&&N.disable(N.DITHER),N.drawArrays(N.POINTS,0,this.pointCount),et&&!this.blend&&N.enable(N.BLEND),er&&N.enable(N.DITHER),i+this.pointCount}),$.draw=$.unifiedDraw,$.drawPick=$.unifiedDraw,$.pick=function(i,o,s){var _=this.pickOffset,F=this.pointCount;if(s<_||s>=_+F)return null;var N=s-_,j=this.points;return{object:this,pointId:N,dataCoord:[j[2*N],j[2*N+1]]}}},6093:function(i){i.exports=slerp;function slerp(i,o,s,_){var F,N,j,Z,X,$=o[0],ee=o[1],et=o[2],er=o[3],en=s[0],ei=s[1],eo=s[2],es=s[3];return(N=$*en+ee*ei+et*eo+er*es)<0&&(N=-N,en=-en,ei=-ei,eo=-eo,es=-es),1-N>1e-6?(j=Math.sin(F=Math.acos(N)),Z=Math.sin((1-_)*F)/j,X=Math.sin(_*F)/j):(Z=1-_,X=_),i[0]=Z*$+X*en,i[1]=Z*ee+X*ei,i[2]=Z*et+X*eo,i[3]=Z*er+X*es,i}},8240:function(i){"use strict";i.exports=function(i){return i||0===i?i.toString():""}},4123:function(i,o,s){"use strict";var _=s(875);i.exports=getGlyph;var F={};function getGlyph(i,o,s){var N,j,Z=F[o];if(Z||(Z=F[o]={}),i in Z)return Z[i];var X={textAlign:"center",textBaseline:"middle",lineHeight:1,font:o,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};X.triangles=!0;var $=_(i,X);X.triangles=!1;var ee=_(i,X);if(s&&1!==s){for(N=0;N<$.positions.length;++N)for(j=0;j<$.positions[N].length;++j)$.positions[N][j]/=s;for(N=0;N<ee.positions.length;++N)for(j=0;j<ee.positions[N].length;++j)ee.positions[N][j]/=s}var et=[[1/0,1/0],[-1/0,-1/0]],er=ee.positions.length;for(N=0;N<er;++N){var en=ee.positions[N];for(j=0;j<2;++j)et[0][j]=Math.min(et[0][j],en[j]),et[1][j]=Math.max(et[1][j],en[j])}return Z[i]=[$,ee,et]}},9282:function(i,o,s){var _=s(5158),F=s(6832),N=F(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),j=F(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),Z=F(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),X=F(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),$=F(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),ee=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],et={vertex:N,fragment:X,attributes:ee},er={vertex:j,fragment:X,attributes:ee},en={vertex:Z,fragment:X,attributes:ee},ei={vertex:N,fragment:$,attributes:ee},eo={vertex:j,fragment:$,attributes:ee},es={vertex:Z,fragment:$,attributes:ee};function createShader(i,o){var s=_(i,o),F=s.attributes;return F.position.location=0,F.color.location=1,F.glyph.location=2,F.id.location=3,s}o.createPerspective=function(i){return createShader(i,et)},o.createOrtho=function(i){return createShader(i,er)},o.createProject=function(i){return createShader(i,en)},o.createPickPerspective=function(i){return createShader(i,ei)},o.createPickOrtho=function(i){return createShader(i,eo)},o.createPickProject=function(i){return createShader(i,es)}},2182:function(i,o,s){"use strict";var _=s(3596),F=s(5827),N=s(2944),j=s(5306),Z=s(104),X=s(9282),$=s(4123),ee=s(8240),et=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function transformMat4(i,o){var s=i[0],_=i[1],F=i[2],N=i[3];return i[0]=o[0]*s+o[4]*_+o[8]*F+o[12]*N,i[1]=o[1]*s+o[5]*_+o[9]*F+o[13]*N,i[2]=o[2]*s+o[6]*_+o[10]*F+o[14]*N,i[3]=o[3]*s+o[7]*_+o[11]*F+o[15]*N,i}function project(i,o,s,_){return transformMat4(_,_,s),transformMat4(_,_,o),transformMat4(_,_,i)}function ScatterPlotPickResult(i,o){this.index=i,this.dataCoordinate=this.position=o}function fixOpacity(i){return!0===i||i>1?1:i}function PointCloud(i,o,s,_,F,N,j,Z,X,$,ee,et){this.gl=i,this.pixelRatio=1,this.shader=o,this.orthoShader=s,this.projectShader=_,this.pointBuffer=F,this.colorBuffer=N,this.glyphBuffer=j,this.idBuffer=Z,this.vao=X,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=$,this.pickOrthoShader=ee,this.pickProjectShader=et,this.points=[],this._selectResult=new ScatterPlotPickResult(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}i.exports=createPointCloud;var er=PointCloud.prototype;er.pickSlots=1,er.setPickBase=function(i){this.pickId=i},er.isTransparent=function(){if(this.hasAlpha)return!0;for(var i=0;i<3;++i)if(this.axesProject[i]&&this.projectHasAlpha)return!0;return!1},er.isOpaque=function(){if(!this.hasAlpha)return!0;for(var i=0;i<3;++i)if(this.axesProject[i]&&!this.projectHasAlpha)return!0;return!1};var en=[0,0],ei=[0,0,0],eo=[0,0,0],es=[0,0,0,1],el=[0,0,0,1],ec=et.slice(),eu=[0,0,0],ef=[[0,0,0],[0,0,0]];function zeroVec(i){return i[0]=i[1]=i[2]=0,i}function augment(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=1,i}function setComponent(i,o,s,_){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[s]=_,i}function getClipBounds(i){for(var o=0;o<2;++o)for(var s=0;s<3;++s)ef[o][s]=Math.max(Math.min(i[o][s],1e8),-1e8);return ef}function drawProject(i,o,s,_){var F,N=o.axesProject,j=o.gl,X=i.uniforms,$=s.model||et,ee=s.view||et,er=s.projection||et,ef=o.axesBounds,ed=getClipBounds(o.clipBounds);F=o.axes&&o.axes.lastCubeProps?o.axes.lastCubeProps.axis:[1,1,1],en[0]=2/j.drawingBufferWidth,en[1]=2/j.drawingBufferHeight,i.bind(),X.view=ee,X.projection=er,X.screenSize=en,X.highlightId=o.highlightId,X.highlightScale=o.highlightScale,X.clipBounds=ed,X.pickGroup=o.pickId/255,X.pixelRatio=_;for(var eh=0;eh<3;++eh)if(N[eh]){X.scale=o.projectScale[eh],X.opacity=o.projectOpacity[eh];for(var ep=0;ep<16;++ep)ec[ep]=0;for(var ep=0;ep<4;++ep)ec[5*ep]=1;ec[5*eh]=0,F[eh]<0?ec[12+eh]=ef[0][eh]:ec[12+eh]=ef[1][eh],Z(ec,$,ec),X.model=ec;var eg=(eh+1)%3,em=(eh+2)%3,ey=zeroVec(ei),ev=zeroVec(eo);ey[eg]=1,ev[em]=1;var ex=project(er,ee,$,augment(es,ey)),e_=project(er,ee,$,augment(el,ev));if(Math.abs(ex[1])>Math.abs(e_[1])){var ew=ex;ex=e_,e_=ew,ew=ey,ey=ev,ev=ew;var eT=eg;eg=em,em=eT}ex[0]<0&&(ey[eg]=-1),e_[1]>0&&(ev[em]=-1);for(var ek=0,eA=0,ep=0;ep<4;++ep)ek+=Math.pow($[4*eg+ep],2),eA+=Math.pow($[4*em+ep],2);ey[eg]/=Math.sqrt(ek),ev[em]/=Math.sqrt(eA),X.axes[0]=ey,X.axes[1]=ev,X.fragClipBounds[0]=setComponent(eu,ed[0],eh,-1e8),X.fragClipBounds[1]=setComponent(eu,ed[1],eh,1e8),o.vao.bind(),o.vao.draw(j.TRIANGLES,o.vertexCount),o.lineWidth>0&&(j.lineWidth(o.lineWidth*_),o.vao.draw(j.LINES,o.lineVertexCount,o.vertexCount)),o.vao.unbind()}}var ed=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function drawFull(i,o,s,_,F,N,j){var Z=s.gl;if((N===s.projectHasAlpha||j)&&drawProject(o,s,_,F),N===s.hasAlpha||j){i.bind();var X=i.uniforms;X.model=_.model||et,X.view=_.view||et,X.projection=_.projection||et,en[0]=2/Z.drawingBufferWidth,en[1]=2/Z.drawingBufferHeight,X.screenSize=en,X.highlightId=s.highlightId,X.highlightScale=s.highlightScale,X.fragClipBounds=ed,X.clipBounds=s.axes.bounds,X.opacity=s.opacity,X.pickGroup=s.pickId/255,X.pixelRatio=F,s.vao.bind(),s.vao.draw(Z.TRIANGLES,s.vertexCount),s.lineWidth>0&&(Z.lineWidth(s.lineWidth*F),s.vao.draw(Z.LINES,s.lineVertexCount,s.vertexCount)),s.vao.unbind()}}function get_glyphData(i,o,s,F){N=ee(N=Array.isArray(i)?o<i.length?i[o]:void 0:i);var N,j=!0;_(N)&&(N="▼",j=!1);var Z=$(N,s,F);return{mesh:Z[0],lines:Z[1],bounds:Z[2],visible:j}}function createPointCloud(i){var o=i.gl,s=X.createPerspective(o),_=X.createOrtho(o),j=X.createProject(o),Z=X.createPickPerspective(o),$=X.createPickOrtho(o),ee=X.createPickProject(o),et=F(o),er=F(o),en=F(o),ei=F(o),eo=N(o,[{buffer:et,size:3,type:o.FLOAT},{buffer:er,size:4,type:o.FLOAT},{buffer:en,size:2,type:o.FLOAT},{buffer:ei,size:4,type:o.UNSIGNED_BYTE,normalized:!0}]),es=new PointCloud(o,s,_,j,et,er,en,ei,eo,Z,$,ee);return es.update(i),es}er.draw=function(i){drawFull(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,i,this.pixelRatio,!1,!1)},er.drawTransparent=function(i){drawFull(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,i,this.pixelRatio,!0,!1)},er.drawPick=function(i){drawFull(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,i,1,!0,!0)},er.pick=function(i){if(!i||i.id!==this.pickId)return null;var o=i.value[2]+(i.value[1]<<8)+(i.value[0]<<16);if(o>=this.pointCount||o<0)return null;var s=this.points[o],_=this._selectResult;_.index=o;for(var F=0;F<3;++F)_.position[F]=_.dataCoordinate[F]=s[F];return _},er.highlight=function(i){if(i){var o=i.index;this.highlightId=[(255&o)/255,(o>>8&255)/255,(o>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},er.update=function(i){if("perspective"in(i=i||{})&&(this.useOrtho=!i.perspective),"orthographic"in i&&(this.useOrtho=!!i.orthographic),"lineWidth"in i&&(this.lineWidth=i.lineWidth),"project"in i){if(Array.isArray(i.project))this.axesProject=i.project;else{var o=!!i.project;this.axesProject=[o,o,o]}}if("projectScale"in i){if(Array.isArray(i.projectScale))this.projectScale=i.projectScale.slice();else{var s=+i.projectScale;this.projectScale=[s,s,s]}}if(this.projectHasAlpha=!1,"projectOpacity"in i){if(Array.isArray(i.projectOpacity))this.projectOpacity=i.projectOpacity.slice();else{var s=+i.projectOpacity;this.projectOpacity=[s,s,s]}for(var _=0;_<3;++_)this.projectOpacity[_]=fixOpacity(this.projectOpacity[_]),this.projectOpacity[_]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in i&&(this.opacity=fixOpacity(i.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var F=i.position,N=i.font||"normal",Z=i.alignment||[0,0];if(2===Z.length)eC=Z[0],eE=Z[1];else{eC=[],eE=[];for(var _=0;_<Z.length;++_)eC[_]=Z[_][0],eE[_]=Z[_][1]}var X=[1/0,1/0,1/0],$=[-1/0,-1/0,-1/0],ee=i.glyph,et=i.color,er=i.size,en=i.angle,ei=i.lineColor,eo=-1,es=0,el=0,ec=0;if(F.length){ec=F.length;l:for(var _=0;_<ec;++_){for(var eu=F[_],ef=0;ef<3;++ef)if(isNaN(eu[ef])||!isFinite(eu[ef]))continue l;var ed=get_glyphData(ee,_,N,this.pixelRatio),eh=ed.mesh,ep=ed.lines,eg=ed.bounds;es+=3*eh.cells.length,el+=2*ep.edges.length}}var em=es+el,ey=j.mallocFloat(3*em),ev=j.mallocFloat(4*em),ex=j.mallocFloat(2*em),e_=j.mallocUint32(em);if(em>0){var ew=0,eT=es,ek=[0,0,0,1],eA=[0,0,0,1],eS=Array.isArray(et)&&Array.isArray(et[0]),eM=Array.isArray(ei)&&Array.isArray(ei[0]);o:for(var _=0;_<ec;++_){eo+=1;for(var eC,eE,eL,eu=F[_],ef=0;ef<3;++ef){if(isNaN(eu[ef])||!isFinite(eu[ef]))continue o;$[ef]=Math.max($[ef],eu[ef]),X[ef]=Math.min(X[ef],eu[ef])}var ed=get_glyphData(ee,_,N,this.pixelRatio),eh=ed.mesh,ep=ed.lines,eg=ed.bounds,eP=ed.visible;if(eP){if(Array.isArray(et)){if(3===(eL=eS?_<et.length?et[_]:[0,0,0,0]:et).length){for(var ef=0;ef<3;++ef)ek[ef]=eL[ef];ek[3]=1}else if(4===eL.length){for(var ef=0;ef<4;++ef)ek[ef]=eL[ef];!this.hasAlpha&&eL[3]<1&&(this.hasAlpha=!0)}}else ek[0]=ek[1]=ek[2]=0,ek[3]=1}else ek=[1,1,1,0];if(eP){if(Array.isArray(ei)){if(3===(eL=eM?_<ei.length?ei[_]:[0,0,0,0]:ei).length){for(var ef=0;ef<3;++ef)eA[ef]=eL[ef];eA[ef]=1}else if(4===eL.length){for(var ef=0;ef<4;++ef)eA[ef]=eL[ef];!this.hasAlpha&&eL[3]<1&&(this.hasAlpha=!0)}}else eA[0]=eA[1]=eA[2]=0,eA[3]=1}else eA=[1,1,1,0];var eI=.5;eP?Array.isArray(er)?eI=_<er.length?+er[_]:12:er?eI=+er:this.useOrtho&&(eI=12):eI=0;var eO=0;Array.isArray(en)?eO=_<en.length?+en[_]:0:en&&(eO=+en);for(var eD=Math.cos(eO),eR=Math.sin(eO),eu=F[_],ef=0;ef<3;++ef)$[ef]=Math.max($[ef],eu[ef]),X[ef]=Math.min(X[ef],eu[ef]);var eB=eE,eF=0;Array.isArray(eC)?eF=_<eC.length?eC[_]:0:eC&&(eF=eC);var eB=0;Array.isArray(eE)?eB=_<eE.length?eE[_]:0:eE&&(eB=eE),eF*=eF>0?1-eg[0][0]:eF<0?1+eg[1][0]:1,eB*=eB>0?1-eg[0][1]:eB<0?1+eg[1][1]:1;for(var ez=[eF,eB],eN=eh.cells||[],ej=eh.positions||[],ef=0;ef<eN.length;++ef)for(var eV=eN[ef],eU=0;eU<3;++eU){for(var eH=0;eH<3;++eH)ey[3*ew+eH]=eu[eH];for(var eH=0;eH<4;++eH)ev[4*ew+eH]=ek[eH];e_[ew]=eo;var eG=ej[eV[eU]];ex[2*ew]=eI*(eD*eG[0]-eR*eG[1]+ez[0]),ex[2*ew+1]=eI*(eR*eG[0]+eD*eG[1]+ez[1]),ew+=1}for(var eN=ep.edges,ej=ep.positions,ef=0;ef<eN.length;++ef)for(var eV=eN[ef],eU=0;eU<2;++eU){for(var eH=0;eH<3;++eH)ey[3*eT+eH]=eu[eH];for(var eH=0;eH<4;++eH)ev[4*eT+eH]=eA[eH];e_[eT]=eo;var eG=ej[eV[eU]];ex[2*eT]=eI*(eD*eG[0]-eR*eG[1]+ez[0]),ex[2*eT+1]=eI*(eR*eG[0]+eD*eG[1]+ez[1]),eT+=1}}}this.bounds=[X,$],this.points=F,this.pointCount=F.length,this.vertexCount=es,this.lineVertexCount=el,this.pointBuffer.update(ey),this.colorBuffer.update(ev),this.glyphBuffer.update(ex),this.idBuffer.update(e_),j.free(ey),j.free(ev),j.free(ex),j.free(e_)},er.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(i,o,s){"use strict";var _=s(6832);o.boxVertex=_(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),o.boxFragment=_(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},6623:function(i,o,s){"use strict";var _=s(5158),F=s(5827),N=s(1884);function SelectBox(i,o,s){this.plot=i,this.boxBuffer=o,this.boxShader=s,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}i.exports=createSelectBox;var j=SelectBox.prototype;function createSelectBox(i,o){var s=i.gl,j=new SelectBox(i,F(s,[0,0,0,1,1,0,1,1]),_(s,N.boxVertex,N.boxFragment));return j.update(o),i.addOverlay(j),j}j.draw=function(){if(this.enabled){var i=this.plot,o=this.selectBox,s=this.borderWidth;this.innerFill;var _=this.innerColor;this.outerFill;var F=this.outerColor,N=this.borderColor,j=i.box,Z=i.screenBox,X=i.dataBox,$=i.viewBox,ee=i.pixelRatio,et=(o[0]-X[0])*($[2]-$[0])/(X[2]-X[0])+$[0],er=(o[1]-X[1])*($[3]-$[1])/(X[3]-X[1])+$[1],en=(o[2]-X[0])*($[2]-$[0])/(X[2]-X[0])+$[0],ei=(o[3]-X[1])*($[3]-$[1])/(X[3]-X[1])+$[1];if(et=Math.max(et,$[0]),er=Math.max(er,$[1]),en=Math.min(en,$[2]),ei=Math.min(ei,$[3]),!(en<et)&&!(ei<er)){j.bind();var eo=Z[2]-Z[0],es=Z[3]-Z[1];if(this.outerFill&&(j.drawBox(0,0,eo,er,F),j.drawBox(0,er,et,ei,F),j.drawBox(0,ei,eo,es,F),j.drawBox(en,er,eo,ei,F)),this.innerFill&&j.drawBox(et,er,en,ei,_),s>0){var el=s*ee;j.drawBox(et-el,er-el,en+el,er+el,N),j.drawBox(et-el,ei-el,en+el,ei+el,N),j.drawBox(et-el,er-el,et+el,ei+el,N),j.drawBox(en-el,er-el,en+el,ei+el,N)}}}},j.update=function(i){i=i||{},this.innerFill=!!i.innerFill,this.outerFill=!!i.outerFill,this.innerColor=(i.innerColor||[0,0,0,.5]).slice(),this.outerColor=(i.outerColor||[0,0,0,.5]).slice(),this.borderColor=(i.borderColor||[0,0,0,1]).slice(),this.borderWidth=i.borderWidth||0,this.selectBox=(i.selectBox||this.selectBox).slice()},j.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(i,o,s){"use strict";i.exports=createSelectBuffer;var _=s(4234),F=s(5306),N=s(5050),j=s(2288).nextPow2,selectRange=function(i,o,s){for(var _=1e8,F=-1,N=-1,j=i.shape[0],Z=i.shape[1],X=0;X<j;X++)for(var $=0;$<Z;$++){var ee=i.get(X,$,0),et=i.get(X,$,1),er=i.get(X,$,2),en=i.get(X,$,3);if(ee<255||et<255||er<255||en<255){var ei=o-X,eo=s-$,es=ei*ei+eo*eo;es<_&&(_=es,F=X,N=$)}}return[F,N,_]};function SelectResult(i,o,s,_,F){this.coord=[i,o],this.id=s,this.value=_,this.distance=F}function SelectBuffer(i,o,s){this.gl=i,this.fbo=o,this.buffer=s,this._readTimeout=null;var _=this;this._readCallback=function(){_.gl&&(o.bind(),i.readPixels(0,0,o.shape[0],o.shape[1],i.RGBA,i.UNSIGNED_BYTE,_.buffer),_._readTimeout=null)}}var Z=SelectBuffer.prototype;function createSelectBuffer(i,o){var s=o[0],N=o[1],j=_(i,s,N,{});return new SelectBuffer(i,j,F.mallocUint8(s*N*4))}Object.defineProperty(Z,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(i){if(this.gl){this.fbo.shape=i;var o=this.fbo.shape[0],s=this.fbo.shape[1];if(s*o*4>this.buffer.length){F.free(this.buffer);for(var _=this.buffer=F.mallocUint8(j(s*o*4)),N=0;N<s*o*4;++N)_[N]=255}return i}}}),Z.begin=function(){var i=this.gl;this.shape,i&&(this.fbo.bind(),i.clearColor(1,1,1,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT))},Z.end=function(){var i=this.gl;i&&(i.bindFramebuffer(i.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},Z.query=function(i,o,s){if(!this.gl)return null;var _=this.fbo.shape.slice();o|=0,"number"!=typeof s&&(s=1);var F=0|Math.min(Math.max((i|=0)-s,0),_[0]),j=0|Math.min(Math.max(i+s,0),_[0]),Z=0|Math.min(Math.max(o-s,0),_[1]),X=0|Math.min(Math.max(o+s,0),_[1]);if(j<=F||X<=Z)return null;var $=[j-F,X-Z],ee=N(this.buffer,[$[0],$[1],4],[4,4*_[0],1],4*(F+_[0]*Z)),et=selectRange(ee.hi($[0],$[1],1),s,s),er=et[0],en=et[1];if(er<0||Math.pow(this.radius,2)<et[2])return null;var ei=ee.get(er,en,0),eo=ee.get(er,en,1),es=ee.get(er,en,2),el=ee.get(er,en,3);return new SelectResult(er+F|0,en+Z|0,ei,[eo,es,el],Math.sqrt(et[2]))},Z.dispose=function(){this.gl&&(this.fbo.dispose(),F.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(i,o,s){"use strict";var _=s(9016),F=s(4280),N=s(3984),j=s(1628),Z=s(2631),X=s(9068);function Shader(i){this.gl=i,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var $=Shader.prototype;function compareAttributes(i,o){return i.name<o.name?-1:1}function createShader(i,o,s,_,F){var N=new Shader(i);return N.update(o,s,_,F),N}$.bind=function(){this.program||this._relink();var i,o=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),s=this.gl.lastAttribCount;if(o>s)for(i=s;i<o;i++)this.gl.enableVertexAttribArray(i);else if(s>o)for(i=o;i<s;i++)this.gl.disableVertexAttribArray(i);this.gl.lastAttribCount=o,this.gl.useProgram(this.program)},$.dispose=function(){for(var i=this.gl.lastAttribCount,o=0;o<i;o++)this.gl.disableVertexAttribArray(o);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},$.update=function(i,o,s,$){if(!o||1==arguments.length){var ee,et=i;i=et.vertex,o=et.fragment,s=et.uniforms,$=et.attributes}var er=this,en=er.gl,ei=er._vref;er._vref=j.shader(en,en.VERTEX_SHADER,i),ei&&ei.dispose(),er.vertShader=er._vref.shader;var eo=this._fref;if(er._fref=j.shader(en,en.FRAGMENT_SHADER,o),eo&&eo.dispose(),er.fragShader=er._fref.shader,!s||!$){var es=en.createProgram();if(en.attachShader(es,er.fragShader),en.attachShader(es,er.vertShader),en.linkProgram(es),!en.getProgramParameter(es,en.LINK_STATUS)){var el=en.getProgramInfoLog(es);throw new X(el,"Error linking program:"+el)}s=s||Z.uniforms(en,es),$=$||Z.attributes(en,es),en.deleteProgram(es)}($=$.slice()).sort(compareAttributes);var ec=[],eu=[],ef=[];for(ee=0;ee<$.length;++ee){var ed=$[ee];if(ed.type.indexOf("mat")>=0){for(var eh=0|ed.type.charAt(ed.type.length-1),ep=Array(eh),eg=0;eg<eh;++eg)ep[eg]=ef.length,eu.push(ed.name+"["+eg+"]"),"number"==typeof ed.location?ef.push(ed.location+eg):Array.isArray(ed.location)&&ed.location.length===eh&&"number"==typeof ed.location[eg]?ef.push(0|ed.location[eg]):ef.push(-1);ec.push({name:ed.name,type:ed.type,locations:ep})}else ec.push({name:ed.name,type:ed.type,locations:[ef.length]}),eu.push(ed.name),"number"==typeof ed.location?ef.push(0|ed.location):ef.push(-1)}var em=0;for(ee=0;ee<ef.length;++ee)if(ef[ee]<0){for(;ef.indexOf(em)>=0;)em+=1;ef[ee]=em}var ey=Array(s.length);function relink(){er.program=j.program(en,er._vref,er._fref,eu,ef);for(var i=0;i<s.length;++i)ey[i]=en.getUniformLocation(er.program,s[i].name)}relink(),er._relink=relink,er.types={uniforms:N(s),attributes:N($)},er.attributes=F(en,er,ec,ef),Object.defineProperty(er,"uniforms",_(en,er,s,ey))},i.exports=createShader},9068:function(i){function GLError(i,o,s){this.shortMessage=o||"",this.longMessage=s||"",this.rawError=i||"",this.message="gl-shader: "+(o||i||"")+(s?"\n"+s:""),this.stack=Error().stack}GLError.prototype=Error(),GLError.prototype.name="GLError",GLError.prototype.constructor=GLError,i.exports=GLError},4280:function(i,o,s){"use strict";i.exports=createAttributeWrapper;var _=s(9068);function ShaderAttribute(i,o,s,_,F,N){this._gl=i,this._wrapper=o,this._index=s,this._locations=_,this._dimension=F,this._constFunc=N}var F=ShaderAttribute.prototype;F.pointer=function(i,o,s,_){var F=this._gl,N=this._locations[this._index];F.vertexAttribPointer(N,this._dimension,i||F.FLOAT,!!o,s||0,_||0),F.enableVertexAttribArray(N)},F.set=function(i,o,s,_){return this._constFunc(this._locations[this._index],i,o,s,_)},Object.defineProperty(F,"location",{get:function(){return this._locations[this._index]},set:function(i){return i!==this._locations[this._index]&&(this._locations[this._index]=0|i,this._wrapper.program=null),0|i}});var N=[function(i,o,s){return void 0===s.length?i.vertexAttrib1f(o,s):i.vertexAttrib1fv(o,s)},function(i,o,s,_){return void 0===s.length?i.vertexAttrib2f(o,s,_):i.vertexAttrib2fv(o,s)},function(i,o,s,_,F){return void 0===s.length?i.vertexAttrib3f(o,s,_,F):i.vertexAttrib3fv(o,s)},function(i,o,s,_,F,N){return void 0===s.length?i.vertexAttrib4f(o,s,_,F,N):i.vertexAttrib4fv(o,s)}];function addVectorAttribute(i,o,s,_,F,j,Z){var X=N[F],$=new ShaderAttribute(i,o,s,_,F,X);Object.defineProperty(j,Z,{set:function(o){return i.disableVertexAttribArray(_[s]),X(i,_[s],o),o},get:function(){return $},enumerable:!0})}function addMatrixAttribute(i,o,s,_,F,N,j){for(var Z=Array(F),X=Array(F),$=0;$<F;++$)addVectorAttribute(i,o,s[$],_,F,Z,$),X[$]=Z[$];Object.defineProperty(Z,"location",{set:function(i){if(Array.isArray(i))for(var o=0;o<F;++o)X[o].location=i[o];else for(var o=0;o<F;++o)X[o].location=i+o;return i},get:function(){for(var i=Array(F),o=0;o<F;++o)i[o]=_[s[o]];return i},enumerable:!0}),Z.pointer=function(o,N,j,Z){o=o||i.FLOAT,N=!!N,j=j||F*F,Z=Z||0;for(var X=0;X<F;++X){var $=_[s[X]];i.vertexAttribPointer($,F,o,N,j,Z+X*F),i.enableVertexAttribArray($)}};var ee=Array(F),et=i["vertexAttrib"+F+"fv"];Object.defineProperty(N,j,{set:function(o){for(var N=0;N<F;++N){var j=_[s[N]];if(i.disableVertexAttribArray(j),Array.isArray(o[0]))et.call(i,j,o[N]);else{for(var Z=0;Z<F;++Z)ee[Z]=o[F*N+Z];et.call(i,j,ee)}}return o},get:function(){return Z},enumerable:!0})}function createAttributeWrapper(i,o,s,F){for(var N={},j=0,Z=s.length;j<Z;++j){var X=s[j],$=X.name,ee=X.type,et=X.locations;switch(ee){case"bool":case"int":case"float":addVectorAttribute(i,o,et[0],F,1,N,$);break;default:if(ee.indexOf("vec")>=0){var er=ee.charCodeAt(ee.length-1)-48;if(er<2||er>4)throw new _("","Invalid data type for attribute "+$+": "+ee);addVectorAttribute(i,o,et[0],F,er,N,$)}else if(ee.indexOf("mat")>=0){var er=ee.charCodeAt(ee.length-1)-48;if(er<2||er>4)throw new _("","Invalid data type for attribute "+$+": "+ee);addMatrixAttribute(i,o,et,F,er,N,$)}else throw new _("","Unknown data type for attribute "+$+": "+ee)}}return N}},9016:function(i,o,s){"use strict";var _=s(3984),F=s(9068);function identity(i){return function(){return i}}function makeVector(i,o){for(var s=Array(i),_=0;_<i;++_)s[_]=o;return s}function createUniformWrapper(i,o,s,N){function makeGetter(i){return function(o,s,_){return o.getUniform(s.program,_[i])}}function makeSetter(o){return function(_){for(var j=enumerateIndices("",o),Z=0;Z<j.length;++Z){var X=j[Z],$=X[0],ee=X[1];if(N[ee]){var et,er=_;if("string"==typeof $&&(0===$.indexOf(".")||0===$.indexOf("["))){var en=$;if(0===$.indexOf(".")&&(en=$.slice(1)),en.indexOf("]")===en.length-1){var ei=en.indexOf("["),eo=en.slice(0,ei),es=en.slice(ei+1,en.length-1);er=eo?_[eo][es]:_[es]}else er=_[en]}var el=s[ee].type;switch(el){case"bool":case"int":case"sampler2D":case"samplerCube":i.uniform1i(N[ee],er);break;case"float":i.uniform1f(N[ee],er);break;default:var ec=el.indexOf("vec");if(0<=ec&&ec<=1&&el.length===4+ec){if((et=el.charCodeAt(el.length-1)-48)<2||et>4)throw new F("","Invalid data type");switch(el.charAt(0)){case"b":case"i":i["uniform"+et+"iv"](N[ee],er);break;case"v":i["uniform"+et+"fv"](N[ee],er);break;default:throw new F("","Unrecognized data type for vector "+name+": "+el)}}else if(0===el.indexOf("mat")&&4===el.length){if((et=el.charCodeAt(el.length-1)-48)<2||et>4)throw new F("","Invalid uniform dimension type for matrix "+name+": "+el);i["uniformMatrix"+et+"fv"](N[ee],!1,er);break}else throw new F("","Unknown uniform data type for "+name+": "+el)}}}}}function enumerateIndices(i,o){if("object"!=typeof o)return[[i,o]];var s=[];for(var _ in o){var F=o[_],N=i;parseInt(_)+""===_?N+="["+_+"]":N+="."+_,"object"==typeof F?s.push.apply(s,enumerateIndices(N,F)):s.push([N,F])}return s}function defaultValue(i){switch(i){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var o=i.indexOf("vec");if(0<=o&&o<=1&&i.length===4+o){var s=i.charCodeAt(i.length-1)-48;if(s<2||s>4)throw new F("","Invalid data type");if("b"===i.charAt(0))return makeVector(s,!1);return makeVector(s,0)}if(0===i.indexOf("mat")&&4===i.length){var s=i.charCodeAt(i.length-1)-48;if(s<2||s>4)throw new F("","Invalid uniform dimension type for matrix "+name+": "+i);return makeVector(s*s,0)}throw new F("","Unknown uniform data type for "+name+": "+i)}}function storeProperty(i,o,_){"object"==typeof _?Object.defineProperty(i,o,{get:identity(processObject(_)),set:makeSetter(_),enumerable:!0,configurable:!1}):N[_]?Object.defineProperty(i,o,{get:makeGetter(_),set:makeSetter(_),enumerable:!0,configurable:!1}):i[o]=defaultValue(s[_].type)}function processObject(i){var o;if(Array.isArray(i)){o=Array(i.length);for(var s=0;s<i.length;++s)storeProperty(o,s,i[s])}else for(var _ in o={},i)storeProperty(o,_,i[_]);return o}var j=_(s,!0);return{get:identity(processObject(j)),set:makeSetter(j),enumerable:!0,configurable:!0}}i.exports=createUniformWrapper},3984:function(i){"use strict";function makeReflectTypes(i,o){for(var s={},_=0;_<i.length;++_)for(var F=i[_].name.split("."),N=s,j=0;j<F.length;++j){var Z=F[j].split("[");if(Z.length>1){Z[0]in N||(N[Z[0]]=[]),N=N[Z[0]];for(var X=1;X<Z.length;++X){var $=parseInt(Z[X]);X<Z.length-1||j<F.length-1?($ in N||(X<Z.length-1?N[$]=[]:N[$]={}),N=N[$]):o?N[$]=_:N[$]=i[_].type}}else j<F.length-1?(Z[0]in N||(N[Z[0]]={}),N=N[Z[0]]):o?N[Z[0]]=_:N[Z[0]]=i[_].type}return s}i.exports=makeReflectTypes},2631:function(i,o){"use strict";o.uniforms=runtimeUniforms,o.attributes=runtimeAttributes;var s={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},_=null;function getType(i,o){if(!_){var F=Object.keys(s);_={};for(var N=0;N<F.length;++N){var j=F[N];_[i[j]]=s[j]}}return _[o]}function runtimeUniforms(i,o){for(var s=i.getProgramParameter(o,i.ACTIVE_UNIFORMS),_=[],F=0;F<s;++F){var N=i.getActiveUniform(o,F);if(N){var j=getType(i,N.type);if(N.size>1)for(var Z=0;Z<N.size;++Z)_.push({name:N.name.replace("[0]","["+Z+"]"),type:j});else _.push({name:N.name,type:j})}}return _}function runtimeAttributes(i,o){for(var s=i.getProgramParameter(o,i.ACTIVE_ATTRIBUTES),_=[],F=0;F<s;++F){var N=i.getActiveAttrib(o,F);N&&_.push({name:N.name,type:getType(i,N.type)})}return _}},1628:function(i,o,s){"use strict";o.shader=getShaderReference,o.program=createProgram;var _=s(9068),F=s(3530),N=new("undefined"==typeof WeakMap?s(4037):WeakMap),j=0;function ShaderReference(i,o,s,_,F,N,j){this.id=i,this.src=o,this.type=s,this.shader=_,this.count=N,this.programs=[],this.cache=j}function ContextCache(i){this.gl=i,this.shaders=[{},{}],this.programs={}}ShaderReference.prototype.dispose=function(){if(0==--this.count){for(var i=this.cache,o=i.gl,s=this.programs,_=0,F=s.length;_<F;++_){var N=i.programs[s[_]];N&&(delete i.programs[_],o.deleteProgram(N))}o.deleteShader(this.shader),delete i.shaders[this.type===o.FRAGMENT_SHADER|0][this.src]}};var Z=ContextCache.prototype;function compileShader(i,o,s){var N=i.createShader(o);if(i.shaderSource(N,s),i.compileShader(N),!i.getShaderParameter(N,i.COMPILE_STATUS)){var j=i.getShaderInfoLog(N);try{var Z=F(j,s,o)}catch(i){throw console.warn("Failed to format compiler error: "+i),new _(j,"Error compiling shader:\n"+j)}throw new _(j,Z.short,Z.long)}return N}function linkProgram(i,o,s,F,N){var j=i.createProgram();i.attachShader(j,o),i.attachShader(j,s);for(var Z=0;Z<F.length;++Z)i.bindAttribLocation(j,N[Z],F[Z]);if(i.linkProgram(j),!i.getProgramParameter(j,i.LINK_STATUS)){var X=i.getProgramInfoLog(j);throw new _(X,"Error linking program: "+X)}return j}function getCache(i){var o=N.get(i);return o||(o=new ContextCache(i),N.set(i,o)),o}function getShaderReference(i,o,s){return getCache(i).getShaderReference(o,s)}function createProgram(i,o,s,_,F){return getCache(i).getProgram(o,s,_,F)}Z.getShaderReference=function(i,o){var s=this.gl,_=this.shaders[i===s.FRAGMENT_SHADER|0],F=_[o];if(F&&s.isShader(F.shader))F.count+=1;else{var N=compileShader(s,i,o);F=_[o]=new ShaderReference(j++,o,i,N,[],1,this)}return F},Z.getProgram=function(i,o,s,_){var F=[i.id,o.id,s.join(":"),_.join(":")].join("@"),N=this.programs[F];return N&&this.gl.isProgram(N)||(this.programs[F]=N=linkProgram(this.gl,i.shader,o.shader,s,_),i.programs.push(F),o.programs.push(F)),N}},3050:function(i){"use strict";function GLSpikes2D(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}i.exports=createSpikes2D;var o=GLSpikes2D.prototype;function createSpikes2D(i,o){var s=new GLSpikes2D(i);return s.update(o),i.addOverlay(s),s}o.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(i){return i.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var i=this.enable,o=this.width,s=this.color,_=this.center,F=this.plot,N=F.line,j=F.dataBox,Z=F.viewBox;if(N.bind(),j[0]<=_[0]&&_[0]<=j[2]&&j[1]<=_[1]&&_[1]<=j[3]){var X=Z[0]+(_[0]-j[0])/(j[2]-j[0])*(Z[2]-Z[0]),$=Z[1]+(_[1]-j[1])/(j[3]-j[1])*(Z[3]-Z[1]);i[0]&&N.drawLine(X,$,Z[0],$,o[0],s[0]),i[1]&&N.drawLine(X,$,X,Z[1],o[1],s[1]),i[2]&&N.drawLine(X,$,Z[2],$,o[2],s[2]),i[3]&&N.drawLine(X,$,X,Z[3],o[3],s[3])}},o.dispose=function(){this.plot.removeOverlay(this)}},3540:function(i,o,s){"use strict";var _=s(6832),F=s(5158),N=_(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),j=_(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);i.exports=function(i){return F(i,N,j,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(i,o,s){"use strict";var _=s(5827),F=s(2944),N=s(3540);i.exports=createSpikes;var j=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function AxisSpikes(i,o,s,_){this.gl=i,this.buffer=o,this.vao=s,this.shader=_,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var Z=AxisSpikes.prototype,X=[0,0,0],$=[0,0,0],ee=[0,0];function createSpikes(i,o){var s=[];function line(i,o,_,F,N,j){var Z=[i,o,_,0,0,0,1];Z[F+3]=1,Z[F]=N,s.push.apply(s,Z),Z[6]=-1,s.push.apply(s,Z),Z[F]=j,s.push.apply(s,Z),s.push.apply(s,Z),Z[6]=1,s.push.apply(s,Z),Z[F]=N,s.push.apply(s,Z)}line(0,0,0,0,0,1),line(0,0,0,1,0,1),line(0,0,0,2,0,1),line(1,0,0,1,-1,1),line(1,0,0,2,-1,1),line(0,1,0,0,-1,1),line(0,1,0,2,-1,1),line(0,0,1,0,-1,1),line(0,0,1,1,-1,1);var j=_(i,s),Z=F(i,[{type:i.FLOAT,buffer:j,size:3,offset:0,stride:28},{type:i.FLOAT,buffer:j,size:3,offset:12,stride:28},{type:i.FLOAT,buffer:j,size:1,offset:24,stride:28}]),X=N(i);X.attributes.position.location=0,X.attributes.color.location=1,X.attributes.weight.location=2;var $=new AxisSpikes(i,j,Z,X);return $.update(o),$}Z.isTransparent=function(){return!1},Z.drawTransparent=function(i){},Z.draw=function(i){var o,s=this.gl,_=this.vao,F=this.shader;_.bind(),F.bind();var N=i.model||j,Z=i.view||j,et=i.projection||j;this.axes&&(o=this.axes.lastCubeProps.axis);for(var er=0;er<3;++er)o&&o[er]<0?(X[er]=this.bounds[0][er],$[er]=this.bounds[1][er]):(X[er]=this.bounds[1][er],$[er]=this.bounds[0][er]);ee[0]=s.drawingBufferWidth,ee[1]=s.drawingBufferHeight,F.uniforms.model=N,F.uniforms.view=Z,F.uniforms.projection=et,F.uniforms.coordinates=[this.position,X,$],F.uniforms.colors=this.colors,F.uniforms.screenShape=ee;for(var er=0;er<3;++er)F.uniforms.lineWidth=this.lineWidth[er]*this.pixelRatio,this.enabled[er]&&(_.draw(s.TRIANGLES,6,6*er),this.drawSides[er]&&_.draw(s.TRIANGLES,12,18+12*er));_.unbind()},Z.update=function(i){i&&("bounds"in i&&(this.bounds=i.bounds),"position"in i&&(this.position=i.position),"lineWidth"in i&&(this.lineWidth=i.lineWidth),"colors"in i&&(this.colors=i.colors),"enabled"in i&&(this.enabled=i.enabled),"drawSides"in i&&(this.drawSides=i.drawSides))},Z.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(i,o,s){var _=s(6832),F=_(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),N=_(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),j=_(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),Z=_(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);o.meshShader={vertex:F,fragment:N,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},o.pickShader={vertex:j,fragment:Z,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(i,o,s){"use strict";var _=s(2858),F=s(4020),N=["xyz","xzy","yxz","yzx","zxy","zyx"],streamToTube=function(i,o,s,N){for(var j=i.points,Z=i.velocities,X=i.divergences,$=[],ee=[],et=[],er=[],en=[],ei=[],eo=0,es=0,el=F.create(),ec=F.create(),eu=0;eu<j.length;eu++){var ef=j[eu],ed=Z[eu],eh=X[eu];0===o&&(eh=.05*s),es=_.length(ed)/N,el=F.create(),_.copy(el,ed),el[3]=eh;for(var ep=0;ep<8;ep++)en[ep]=[ef[0],ef[1],ef[2],ep];if(er.length>0)for(var ep=0;ep<8;ep++){var eg=(ep+1)%8;$.push(er[ep],en[ep],en[eg],en[eg],er[eg],er[ep]),et.push(ec,el,el,el,ec,ec),ei.push(eo,es,es,es,eo,eo);var em=$.length;ee.push([em-6,em-5,em-4],[em-3,em-2,em-1])}var ey=er;er=en,en=ey;var ev=ec;ec=el,el=ev;var ex=eo;eo=es,es=ex}return{positions:$,cells:ee,vectors:et,vertexIntensity:ei}},createTubes=function(i,o,s,F){for(var N=0,j=0;j<i.length;j++)for(var Z=i[j].velocities,X=0;X<Z.length;X++)N=Math.max(N,_.length(Z[X]));for(var $=i.map(function(i){return streamToTube(i,s,F,N)}),ee=[],et=[],er=[],en=[],j=0;j<$.length;j++){var ei=$[j],eo=ee.length;ee=ee.concat(ei.positions),er=er.concat(ei.vectors),en=en.concat(ei.vertexIntensity);for(var X=0;X<ei.cells.length;X++){var es=ei.cells[X],el=[];et.push(el);for(var ec=0;ec<es.length;ec++)el.push(es[ec]+eo)}}return{positions:ee,cells:et,vectors:er,vertexIntensity:en,colormap:o}},findLastSmallerIndex=function(i,o){var s,_=i.length;for(s=0;s<_;s++){var F=i[s];if(F===o)break;if(F>o)return s-1}return s},clamp=function(i,o,s){return i<o?o:i>s?s:i},sampleMeshgrid=function(i,o,s){var F,N,j,Z,X,$,ee=o.vectors,et=o.meshgrid,er=i[0],en=i[1],ei=i[2],eo=et[0].length,es=et[1].length,el=et[2].length,ec=findLastSmallerIndex(et[0],er),eu=findLastSmallerIndex(et[1],en),ef=findLastSmallerIndex(et[2],ei),ed=ec+1,eh=eu+1,ep=ef+1;if(ec=clamp(ec,0,eo-1),ed=clamp(ed,0,eo-1),eu=clamp(eu,0,es-1),eh=clamp(eh,0,es-1),ef=clamp(ef,0,el-1),ep=clamp(ep,0,el-1),ec<0||eu<0||ef<0||ed>eo-1||eh>es-1||ep>el-1)return _.create();var eg=et[0][ec],em=et[0][ed],ey=et[1][eu],ev=et[1][eh],ex=et[2][ef],e_=et[2][ep],ew=(er-eg)/(em-eg),eT=(en-ey)/(ev-ey),ek=(ei-ex)/(e_-ex);switch(isFinite(ew)||(ew=.5),isFinite(eT)||(eT=.5),isFinite(ek)||(ek=.5),s.reversedX&&(ec=eo-1-ec,ed=eo-1-ed),s.reversedY&&(eu=es-1-eu,eh=es-1-eh),s.reversedZ&&(ef=el-1-ef,ep=el-1-ep),s.filled){case 5:X=ef,$=ep,j=eu*el,Z=eh*el,F=ec*el*es,N=ed*el*es;break;case 4:X=ef,$=ep,F=ec*el,N=ed*el,j=eu*el*eo,Z=eh*el*eo;break;case 3:j=eu,Z=eh,X=ef*es,$=ep*es,F=ec*es*el,N=ed*es*el;break;case 2:j=eu,Z=eh,F=ec*es,N=ed*es,X=ef*es*eo,$=ep*es*eo;break;case 1:F=ec,N=ed,X=ef*eo,$=ep*eo,j=eu*eo*el,Z=eh*eo*el;break;default:F=ec,N=ed,j=eu*eo,Z=eh*eo,X=ef*eo*es,$=ep*eo*es}var eA=ee[F+j+X],eS=ee[F+j+$],eM=ee[F+Z+X],eC=ee[F+Z+$],eE=ee[N+j+X],eL=ee[N+j+$],eP=ee[N+Z+X],eI=ee[N+Z+$],eO=_.create(),eD=_.create(),eR=_.create(),eB=_.create();_.lerp(eO,eA,eE,ew),_.lerp(eD,eS,eL,ew),_.lerp(eR,eM,eP,ew),_.lerp(eB,eC,eI,ew);var eF=_.create(),ez=_.create();_.lerp(eF,eO,eR,eT),_.lerp(ez,eD,eB,eT);var eN=_.create();return _.lerp(eN,eF,ez,ek),eN},findMinSeparation=function(i){var o=1/0;i.sort(function(i,o){return i-o});for(var s=i.length,_=1;_<s;_++){var F=Math.abs(i[_]-i[_-1]);F<o&&(o=F)}return o},calculateMinPositionDistance=function(i){for(var o=[],s=[],_=[],F={},N={},j={},Z=i.length,X=0;X<Z;X++){var $=i[X],ee=$[0],et=$[1],er=$[2];F[ee]||(o.push(ee),F[ee]=!0),N[et]||(s.push(et),N[et]=!0),j[er]||(_.push(er),j[er]=!0)}var en=Math.min(findMinSeparation(o),findMinSeparation(s),findMinSeparation(_));return isFinite(en)?en:1};i.exports=function(i,o){var s=i.startingPositions,F=i.maxLength||1e3,j=i.tubeSize||1,Z=i.absoluteTubeSize,X=i.gridFill||"+x+y+z",$={};-1!==X.indexOf("-x")&&($.reversedX=!0),-1!==X.indexOf("-y")&&($.reversedY=!0),-1!==X.indexOf("-z")&&($.reversedZ=!0),$.filled=N.indexOf(X.replace(/-/g,"").replace(/\+/g,""));var ee=i.getVelocity||function(o){return sampleMeshgrid(o,i,$)},et=i.getDivergence||function(i,o){var s=_.create();_.add(s,i,[1e-4,0,0]);var F=ee(s);_.subtract(F,F,o),_.scale(F,F,1e4),_.add(s,i,[0,1e-4,0]);var N=ee(s);_.subtract(N,N,o),_.scale(N,N,1e4),_.add(s,i,[0,0,1e-4]);var j=ee(s);return _.subtract(j,j,o),_.scale(j,j,1e4),_.add(s,F,N),_.add(s,s,j),s},er=[],en=o[0][0],ei=o[0][1],eo=o[0][2],es=o[1][0],el=o[1][1],ec=o[1][2],eu=10*_.distance(o[0],o[1])/F,ef=eu*eu,ed=1,eh=0,ep=s.length;ep>1&&(ed=calculateMinPositionDistance(s));for(var eg=0;eg<ep;eg++){var em=_.create();_.copy(em,s[eg]);var ey=[em],ev=[],ex=ee(em),e_=em;ev.push(ex);var ew=[],eT=et(em,ex),ek=_.length(eT);isFinite(ek)&&ek>eh&&(eh=ek),ew.push(ek),er.push({points:ey,velocities:ev,divergences:ew});for(var eA=0;eA<100*F&&ey.length<F&&function(i){var o=i[0],s=i[1],_=i[2];return!(o<en||o>es||s<ei||s>el||_<eo||_>ec)}(em);){eA++;var eS=_.clone(ex),eM=_.squaredLength(eS);if(0===eM)break;if(eM>ef&&_.scale(eS,eS,eu/Math.sqrt(eM)),_.add(eS,eS,em),ex=ee(eS),_.squaredDistance(e_,eS)-ef>-.0001*ef){ey.push(eS),e_=eS,ev.push(ex);var eT=et(eS,ex),ek=_.length(eT);isFinite(ek)&&ek>eh&&(eh=ek),ew.push(ek)}em=eS}}var eC=createTubes(er,i.colormap,eh,ed);return Z?eC.tubeScale=Z:(0===eh&&(eh=1),eC.tubeScale=.5*j*ed/eh),eC};var j=s(9578),Z=s(1140).createMesh;i.exports.createTubeMesh=function(i,o){return Z(i,o,{shaders:j,traceType:"streamtube"})}},9054:function(i,o,s){var _=s(5158),F=s(6832),N=F(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),j=F(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),Z=F(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),X=F(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);o.createShader=function(i){var o=_(i,N,j,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},o.createPickShader=function(i){var o=_(i,N,X,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},o.createContourShader=function(i){var o=_(i,Z,j,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},o.createPickContourShader=function(i){var o=_(i,Z,X,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},3754:function(i,o,s){"use strict";i.exports=createSurfacePlot;var _=s(2288),F=s(5827),N=s(2944),j=s(8931),Z=s(5306),X=s(9156),$=s(7498),ee=s(7382),et=s(5050),er=s(4162),en=s(104),ei=s(7437),eo=s(5070),es=s(9144),el=s(9054),ec=el.createShader,eu=el.createContourShader,ef=el.createPickShader,ed=el.createPickContourShader,eh=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ep=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],eg=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function SurfacePickResult(i,o,s,_,F){this.position=i,this.index=o,this.uv=s,this.level=_,this.dataCoordinate=F}function SurfacePlot(i,o,s,_,F,N,j,X,$,ee,er,en,ei,eo,es){this.gl=i,this.shape=o,this.bounds=s,this.objectOffset=es,this.intensityBounds=[],this._shader=_,this._pickShader=F,this._coordinateBuffer=N,this._vao=j,this._colorMap=X,this._contourShader=$,this._contourPickShader=ee,this._contourBuffer=er,this._contourVAO=en,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new SurfacePickResult([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ei,this._dynamicVAO=eo,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[et(Z.mallocFloat(1024),[0,0]),et(Z.mallocFloat(1024),[0,0]),et(Z.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var i=0;i<3;++i){var o=eg[i],s=(i+1)%3,_=(i+2)%3;o[s+0]=1,o[_+3]=1,o[i+6]=1}}();var em=SurfacePlot.prototype;function getOpacityFromScale(i,o){if(!o||!o.length)return 1;for(var s=0;s<o.length&&!(o.length<2);++s){if(o[s][0]===i)return o[s][1];if(o[s][0]>i&&s>0){var _=(o[s][0]-i)/(o[s][0]-o[s-1][0]);return o[s][1]*(1-_)+_*o[s-1][1]}}return 1}em.genColormap=function(i,o){var s=!1,_=ee([X({colormap:i,nshades:256,format:"rgba"}).map(function(i,_){var F=o?getOpacityFromScale(_/255,o):i[3];return F<1&&(s=!0),[i[0],i[1],i[2],255*F]})]);return $.divseq(_,255),this.hasAlphaScale=s,_},em.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},em.isOpaque=function(){return!this.isTransparent()},em.pickSlots=1,em.setPickBase=function(i){this.pickId=i};var ey=[0,0,0],ev={showSurface:!1,showContour:!1,projections:[eh.slice(),eh.slice(),eh.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function computeProjectionData(i,o){var s,_,F,N=o.axes&&o.axes.lastCubeProps.axis||ey,j=o.showSurface,Z=o.showContour;for(s=0;s<3;++s)for(_=0,j=j||o.surfaceProject[s];_<3;++_)Z=Z||o.contourProject[s][_];for(s=0;s<3;++s){var X=ev.projections[s];for(_=0;_<16;++_)X[_]=0;for(_=0;_<4;++_)X[5*_]=1;X[5*s]=0,X[12+s]=o.axesBounds[+(N[s]>0)][s],en(X,i.model,X);var $=ev.clipBounds[s];for(F=0;F<2;++F)for(_=0;_<3;++_)$[F][_]=i.clipBounds[F][_];$[0][s]=-1e8,$[1][s]=1e8}return ev.showSurface=j,ev.showContour=Z,ev}var ex={model:eh,view:eh,projection:eh,inverseModel:eh.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-.0001,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},e_=eh.slice(),ew=[1,0,0,0,1,0,0,0,1];function drawCore(i,o){i=i||{};var s=this.gl;s.disable(s.CULL_FACE),this._colorMap.bind(0),ex.model=i.model||eh,ex.view=i.view||eh,ex.projection=i.projection||eh,ex.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ex.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ex.objectOffset=this.objectOffset,ex.contourColor=this.contourColor[0],ex.inverseModel=ei(ex.inverseModel,ex.model);for(var _=0;_<2;++_)for(var F=ex.clipBounds[_],N=0;N<3;++N)F[N]=Math.min(Math.max(this.clipBounds[_][N],-1e8),1e8);for(ex.kambient=this.ambientLight,ex.kdiffuse=this.diffuseLight,ex.kspecular=this.specularLight,ex.roughness=this.roughness,ex.fresnel=this.fresnel,ex.opacity=this.opacity,ex.height=0,ex.permutation=ew,ex.vertexColor=this.vertexColor,en(e_,ex.view,ex.model),en(e_,ex.projection,e_),ei(e_,e_),_=0;_<3;++_)ex.eyePosition[_]=e_[12+_]/e_[15];var j=e_[15];for(_=0;_<3;++_)j+=this.lightPosition[_]*e_[4*_+3];for(_=0;_<3;++_){var Z=e_[12+_];for(N=0;N<3;++N)Z+=e_[4*N+_]*this.lightPosition[N];ex.lightPosition[_]=Z/j}var X=computeProjectionData(ex,this);if(X.showSurface){for(this._shader.bind(),this._shader.uniforms=ex,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(s.TRIANGLES,this._vertexCount),_=0;_<3;++_)this.surfaceProject[_]&&this.vertexCount&&(this._shader.uniforms.model=X.projections[_],this._shader.uniforms.clipBounds=X.clipBounds[_],this._vao.draw(s.TRIANGLES,this._vertexCount));this._vao.unbind()}if(X.showContour){var $=this._contourShader;ex.kambient=1,ex.kdiffuse=0,ex.kspecular=0,ex.opacity=1,$.bind(),$.uniforms=ex;var ee=this._contourVAO;for(ee.bind(),_=0;_<3;++_)for($.uniforms.permutation=eg[_],s.lineWidth(this.contourWidth[_]*this.pixelRatio),N=0;N<this.contourLevels[_].length;++N)N===this.highlightLevel[_]?($.uniforms.contourColor=this.highlightColor[_],$.uniforms.contourTint=this.highlightTint[_]):(0===N||N-1===this.highlightLevel[_])&&($.uniforms.contourColor=this.contourColor[_],$.uniforms.contourTint=this.contourTint[_]),this._contourCounts[_][N]&&($.uniforms.height=this.contourLevels[_][N],ee.draw(s.LINES,this._contourCounts[_][N],this._contourOffsets[_][N]));for(_=0;_<3;++_)for(N=0,$.uniforms.model=X.projections[_],$.uniforms.clipBounds=X.clipBounds[_];N<3;++N)if(this.contourProject[_][N]){$.uniforms.permutation=eg[N],s.lineWidth(this.contourWidth[N]*this.pixelRatio);for(var et=0;et<this.contourLevels[N].length;++et)et===this.highlightLevel[N]?($.uniforms.contourColor=this.highlightColor[N],$.uniforms.contourTint=this.highlightTint[N]):(0===et||et-1===this.highlightLevel[N])&&($.uniforms.contourColor=this.contourColor[N],$.uniforms.contourTint=this.contourTint[N]),this._contourCounts[N][et]&&($.uniforms.height=this.contourLevels[N][et],ee.draw(s.LINES,this._contourCounts[N][et],this._contourOffsets[N][et]))}for(ee.unbind(),(ee=this._dynamicVAO).bind(),_=0;_<3;++_)if(0!==this._dynamicCounts[_])for($.uniforms.model=ex.model,$.uniforms.clipBounds=ex.clipBounds,$.uniforms.permutation=eg[_],s.lineWidth(this.dynamicWidth[_]*this.pixelRatio),$.uniforms.contourColor=this.dynamicColor[_],$.uniforms.contourTint=this.dynamicTint[_],$.uniforms.height=this.dynamicLevel[_],ee.draw(s.LINES,this._dynamicCounts[_],this._dynamicOffsets[_]),N=0;N<3;++N)this.contourProject[N][_]&&($.uniforms.model=X.projections[N],$.uniforms.clipBounds=X.clipBounds[N],ee.draw(s.LINES,this._dynamicCounts[_],this._dynamicOffsets[_]));ee.unbind()}}em.draw=function(i){return drawCore.call(this,i,!1)},em.drawTransparent=function(i){return drawCore.call(this,i,!0)};var eT={model:eh,view:eh,projection:eh,inverseModel:eh,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function handleArray(i,o){return Array.isArray(i)?[o(i[0]),o(i[1]),o(i[2])]:[o(i),o(i),o(i)]}function toColor(i){return Array.isArray(i)?3===i.length?[i[0],i[1],i[2],1]:[i[0],i[1],i[2],i[3]]:[0,0,0,1]}function handleColor(i){if(Array.isArray(i)){if(Array.isArray(i))return[toColor(i[0]),toColor(i[1]),toColor(i[2])];var o=toColor(i);return[o.slice(),o.slice(),o.slice()]}}function createSurfacePlot(i){var o=i.gl,s=ec(o),_=ef(o),Z=eu(o),X=ed(o),$=F(o),ee=N(o,[{buffer:$,size:4,stride:40,offset:0},{buffer:$,size:3,stride:40,offset:16},{buffer:$,size:3,stride:40,offset:28}]),et=F(o),er=N(o,[{buffer:et,size:4,stride:20,offset:0},{buffer:et,size:1,stride:20,offset:16}]),en=F(o),ei=N(o,[{buffer:en,size:2,type:o.FLOAT}]),eo=j(o,1,256,o.RGBA,o.UNSIGNED_BYTE);eo.minFilter=o.LINEAR,eo.magFilter=o.LINEAR;var es=new SurfacePlot(o,[0,0],[[0,0,0],[0,0,0]],s,_,$,ee,eo,Z,X,et,er,en,ei,[0,0,0]),el={levels:[[],[],[]]};for(var eh in i)el[eh]=i[eh];return el.colormap=el.colormap||"jet",es.update(el),es}em.drawPick=function(i){i=i||{};var o=this.gl;o.disable(o.CULL_FACE),eT.model=i.model||eh,eT.view=i.view||eh,eT.projection=i.projection||eh,eT.shape=this._field[2].shape,eT.pickId=this.pickId/255,eT.lowerBound=this.bounds[0],eT.upperBound=this.bounds[1],eT.objectOffset=this.objectOffset,eT.permutation=ew;for(var s=0;s<2;++s)for(var _=eT.clipBounds[s],F=0;F<3;++F)_[F]=Math.min(Math.max(this.clipBounds[s][F],-1e8),1e8);var N=computeProjectionData(eT,this);if(N.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=eT,this._vao.bind(),this._vao.draw(o.TRIANGLES,this._vertexCount),s=0;s<3;++s)this.surfaceProject[s]&&(this._pickShader.uniforms.model=N.projections[s],this._pickShader.uniforms.clipBounds=N.clipBounds[s],this._vao.draw(o.TRIANGLES,this._vertexCount));this._vao.unbind()}if(N.showContour){var j=this._contourPickShader;j.bind(),j.uniforms=eT;var Z=this._contourVAO;for(Z.bind(),F=0;F<3;++F)for(o.lineWidth(this.contourWidth[F]*this.pixelRatio),j.uniforms.permutation=eg[F],s=0;s<this.contourLevels[F].length;++s)this._contourCounts[F][s]&&(j.uniforms.height=this.contourLevels[F][s],Z.draw(o.LINES,this._contourCounts[F][s],this._contourOffsets[F][s]));for(s=0;s<3;++s)for(F=0,j.uniforms.model=N.projections[s],j.uniforms.clipBounds=N.clipBounds[s];F<3;++F)if(this.contourProject[s][F]){j.uniforms.permutation=eg[F],o.lineWidth(this.contourWidth[F]*this.pixelRatio);for(var X=0;X<this.contourLevels[F].length;++X)this._contourCounts[F][X]&&(j.uniforms.height=this.contourLevels[F][X],Z.draw(o.LINES,this._contourCounts[F][X],this._contourOffsets[F][X]))}Z.unbind()}},em.pick=function(i){if(!i||i.id!==this.pickId)return null;var o=this._field[2].shape,s=this._pickResult,_=o[0]*(i.value[0]+(i.value[2]>>4)/16)/255,F=Math.floor(_),N=_-F,j=o[1]*(i.value[1]+(15&i.value[2])/16)/255,Z=Math.floor(j),X=j-Z;F+=1,Z+=1;var $=s.position;$[0]=$[1]=$[2]=0;for(var ee=0;ee<2;++ee)for(var et=ee?N:1-N,er=0;er<2;++er)for(var en=er?X:1-X,ei=F+ee,es=Z+er,el=et*en,ec=0;ec<3;++ec)$[ec]+=this._field[ec].get(ei,es)*el;for(var eu=this._pickResult.level,ef=0;ef<3;++ef)if(eu[ef]=eo.le(this.contourLevels[ef],$[ef]),eu[ef]<0)this.contourLevels[ef].length>0&&(eu[ef]=0);else if(eu[ef]<this.contourLevels[ef].length-1){var ed=this.contourLevels[ef][eu[ef]],eh=this.contourLevels[ef][eu[ef]+1];Math.abs(ed-$[ef])>Math.abs(eh-$[ef])&&(eu[ef]+=1)}for(ec=0,s.index[0]=N<.5?F:F+1,s.index[1]=X<.5?Z:Z+1,s.uv[0]=_/o[0],s.uv[1]=j/o[1];ec<3;++ec)s.dataCoordinate[ec]=this._field[ec].get(s.index[0],s.index[1]);return s},em.padField=function(i,o){var s=o.shape.slice(),_=i.shape.slice();$.assign(i.lo(1,1).hi(s[0],s[1]),o),$.assign(i.lo(1).hi(s[0],1),o.hi(s[0],1)),$.assign(i.lo(1,_[1]-1).hi(s[0],1),o.lo(0,s[1]-1).hi(s[0],1)),$.assign(i.lo(0,1).hi(1,s[1]),o.hi(1)),$.assign(i.lo(_[0]-1,1).hi(1,s[1]),o.lo(s[0]-1)),i.set(0,0,o.get(0,0)),i.set(0,_[1]-1,o.get(0,s[1]-1)),i.set(_[0]-1,0,o.get(s[0]-1,0)),i.set(_[0]-1,_[1]-1,o.get(s[0]-1,s[1]-1))},em.update=function(i){i=i||{},this.objectOffset=i.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in i&&(this.contourWidth=handleArray(i.contourWidth,Number)),"showContour"in i&&(this.showContour=handleArray(i.showContour,Boolean)),"showSurface"in i&&(this.showSurface=!!i.showSurface),"contourTint"in i&&(this.contourTint=handleArray(i.contourTint,Boolean)),"contourColor"in i&&(this.contourColor=handleColor(i.contourColor)),"contourProject"in i&&(this.contourProject=handleArray(i.contourProject,function(i){return handleArray(i,Boolean)})),"surfaceProject"in i&&(this.surfaceProject=i.surfaceProject),"dynamicColor"in i&&(this.dynamicColor=handleColor(i.dynamicColor)),"dynamicTint"in i&&(this.dynamicTint=handleArray(i.dynamicTint,Number)),"dynamicWidth"in i&&(this.dynamicWidth=handleArray(i.dynamicWidth,Number)),"opacity"in i&&(this.opacity=i.opacity),"opacityscale"in i&&(this.opacityscale=i.opacityscale),"colorBounds"in i&&(this.colorBounds=i.colorBounds),"vertexColor"in i&&(this.vertexColor=i.vertexColor?1:0),"colormap"in i&&this._colorMap.setPixels(this.genColormap(i.colormap,this.opacityscale));var o=i.field||i.coords&&i.coords[2]||null,s=!1;if(o||(o=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in i||"coords"in i){var F=(o.shape[0]+2)*(o.shape[1]+2);F>this._field[2].data.length&&(Z.freeFloat(this._field[2].data),this._field[2].data=Z.mallocFloat(_.nextPow2(F))),this._field[2]=et(this._field[2].data,[o.shape[0]+2,o.shape[1]+2]),this.padField(this._field[2],o),this.shape=o.shape.slice();for(var N=this.shape,j=0;j<2;++j)this._field[2].size>this._field[j].data.length&&(Z.freeFloat(this._field[j].data),this._field[j].data=Z.mallocFloat(this._field[2].size)),this._field[j]=et(this._field[j].data,[N[0]+2,N[1]+2]);if(i.coords){var X=i.coords;if(!Array.isArray(X)||3!==X.length)throw Error("gl-surface: invalid coordinates for x/y");for(j=0;j<2;++j){var $=X[j];for(el=0;el<2;++el)if($.shape[el]!==N[el])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[j],$)}}else if(i.ticks){var ee=i.ticks;if(!Array.isArray(ee)||2!==ee.length)throw Error("gl-surface: invalid ticks");for(j=0;j<2;++j){var en=ee[j];if((Array.isArray(en)||en.length)&&(en=et(en)),en.shape[0]!==N[j])throw Error("gl-surface: invalid tick length");var ei=et(en.data,N);ei.stride[j]=en.stride[0],ei.stride[1^j]=0,this.padField(this._field[j],ei)}}else{for(j=0;j<2;++j){var eo=[0,0];eo[j]=1,this._field[j]=et(this._field[j].data,[N[0]+2,N[1]+2],eo,0)}this._field[0].set(0,0,0);for(var el=0;el<N[0];++el)this._field[0].set(el+1,0,el);for(this._field[0].set(N[0]+1,0,N[0]-1),this._field[1].set(0,0,0),el=0;el<N[1];++el)this._field[1].set(0,el+1,el);this._field[1].set(0,N[1]+1,N[1]-1)}var ec=this._field,eu=et(Z.mallocFloat(6*ec[2].size),[3,N[0]+2,N[1]+2,2]);for(j=0;j<3;++j)es(eu.pick(j),ec[j],"mirror");var ef=et(Z.mallocFloat(3*ec[2].size),[N[0]+2,N[1]+2,3]);for(j=0;j<N[0]+2;++j)for(el=0;el<N[1]+2;++el){var ed=eu.get(0,j,el,0),eh=eu.get(0,j,el,1),eg=eu.get(1,j,el,0),em=eu.get(1,j,el,1),ey=eu.get(2,j,el,0),ev=eu.get(2,j,el,1),ex=eg*ev-em*ey,e_=ey*eh-ev*ed,ew=ed*em-eh*eg,eT=Math.sqrt(ex*ex+e_*e_+ew*ew);eT<1e-8?(eT=Math.max(Math.abs(ex),Math.abs(e_),Math.abs(ew)))<1e-8?(ew=1,e_=ex=0,eT=1):eT=1/eT:eT=1/Math.sqrt(eT),ef.set(j,el,0,ex*eT),ef.set(j,el,1,e_*eT),ef.set(j,el,2,ew*eT)}Z.free(eu.data);var ek=[1/0,1/0,1/0],eA=[-1/0,-1/0,-1/0],eS=1/0,eM=-1/0,eC=(N[0]-1)*(N[1]-1)*6,eE=Z.mallocFloat(_.nextPow2(10*eC)),eL=0,eP=0;for(j=0;j<N[0]-1;++j)c:for(el=0;el<N[1]-1;++el){for(var eI=0;eI<2;++eI)for(var eO=0;eO<2;++eO)for(var eD=0;eD<3;++eD){var eR=this._field[eD].get(1+j+eI,1+el+eO);if(isNaN(eR)||!isFinite(eR))continue c}for(eD=0;eD<6;++eD){var eB=j+ep[eD][0],eF=el+ep[eD][1],ez=this._field[0].get(eB+1,eF+1),eN=this._field[1].get(eB+1,eF+1);eR=this._field[2].get(eB+1,eF+1),ex=ef.get(eB+1,eF+1,0),e_=ef.get(eB+1,eF+1,1),ew=ef.get(eB+1,eF+1,2),i.intensity&&(ej=i.intensity.get(eB,eF));var ej=i.intensity?i.intensity.get(eB,eF):eR+this.objectOffset[2];eE[eL++]=eB,eE[eL++]=eF,eE[eL++]=ez,eE[eL++]=eN,eE[eL++]=eR,eE[eL++]=0,eE[eL++]=ej,eE[eL++]=ex,eE[eL++]=e_,eE[eL++]=ew,ek[0]=Math.min(ek[0],ez+this.objectOffset[0]),ek[1]=Math.min(ek[1],eN+this.objectOffset[1]),ek[2]=Math.min(ek[2],eR+this.objectOffset[2]),eS=Math.min(eS,ej),eA[0]=Math.max(eA[0],ez+this.objectOffset[0]),eA[1]=Math.max(eA[1],eN+this.objectOffset[1]),eA[2]=Math.max(eA[2],eR+this.objectOffset[2]),eM=Math.max(eM,ej),eP+=1}}for(i.intensityBounds&&(eS=+i.intensityBounds[0],eM=+i.intensityBounds[1]),j=6;j<eL;j+=10)eE[j]=(eE[j]-eS)/(eM-eS);this._vertexCount=eP,this._coordinateBuffer.update(eE.subarray(0,eL)),Z.freeFloat(eE),Z.free(ef.data),this.bounds=[ek,eA],this.intensity=i.intensity||this._field[2],(this.intensityBounds[0]!==eS||this.intensityBounds[1]!==eM)&&(s=!0),this.intensityBounds=[eS,eM]}if("levels"in i){var eV=i.levels;for(j=0,eV=Array.isArray(eV[0])?eV.slice():[[],[],eV];j<3;++j)eV[j]=eV[j].slice(),eV[j].sort(function(i,o){return i-o});for(j=0;j<3;++j)for(el=0;el<eV[j].length;++el)eV[j][el]-=this.objectOffset[j];u:for(j=0;j<3;++j){if(eV[j].length!==this.contourLevels[j].length){s=!0;break}for(el=0;el<eV[j].length;++el)if(eV[j][el]!==this.contourLevels[j][el]){s=!0;break u}}this.contourLevels=eV}if(s){ec=this._field,N=this.shape;for(var eU=[],eH=0;eH<3;++eH){var eG=this.contourLevels[eH],eW=[],eZ=[],eY=[0,0,0];for(j=0;j<eG.length;++j){var eX=er(this._field[eH],eG[j]);eW.push(eU.length/5|0),eP=0;f:for(el=0;el<eX.cells.length;++el){var eK=eX.cells[el];for(eD=0;eD<2;++eD){var eJ=eX.positions[eK[eD]],e$=eJ[0],eQ=0|Math.floor(e$),e0=e$-eQ,e1=eJ[1],e2=0|Math.floor(e1),e3=e1-e2,e5=!1;d:for(var e4=0;e4<3;++e4){eY[e4]=0;var e6=(eH+e4+1)%3;for(eI=0;eI<2;++eI){var e8=eI?e0:1-e0;for(eO=0,eB=0|Math.min(Math.max(eQ+eI,0),N[0]);eO<2;++eO){var e7=eO?e3:1-e3;if(eF=0|Math.min(Math.max(e2+eO,0),N[1]),!isFinite(eR=e4<2?this._field[e6].get(eB,eF):(this.intensity.get(eB,eF)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]))||isNaN(eR)){e5=!0;break d}var e9=e8*e7;eY[e4]+=e9*eR}}}if(e5){if(eD>0){for(var te=0;te<5;++te)eU.pop();eP-=1}continue f}eU.push(eY[0],eY[1],eJ[0],eJ[1],eY[2]),eP+=1}}eZ.push(eP)}this._contourOffsets[eH]=eW,this._contourCounts[eH]=eZ}var tt=Z.mallocFloat(eU.length);for(j=0;j<eU.length;++j)tt[j]=eU[j];this._contourBuffer.update(tt),Z.freeFloat(tt)}},em.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var i=0;i<3;++i)Z.freeFloat(this._field[i].data)},em.highlight=function(i){if(!i){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(o=0;o<3;++o)this.enableHighlight[o]?this.highlightLevel[o]=i.level[o]:this.highlightLevel[o]=-1;for(o=0,s=this.snapToData?i.dataCoordinate:i.position;o<3;++o)s[o]-=this.objectOffset[o];if(this.enableDynamic[0]&&s[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&s[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&s[2]!==this.dynamicLevel[2]){for(var o,s,_=0,F=this.shape,N=Z.mallocFloat(12*F[0]*F[1]),j=0;j<3;++j){if(!this.enableDynamic[j]){this.dynamicLevel[j]=NaN,this._dynamicCounts[j]=0;continue}this.dynamicLevel[j]=s[j];var X=(j+1)%3,$=(j+2)%3,ee=this._field[j],et=this._field[X],en=this._field[$],ei=er(ee,s[j]),eo=ei.cells,es=ei.positions;for(o=0,this._dynamicOffsets[j]=_;o<eo.length;++o)for(var el=eo[o],ec=0;ec<2;++ec){var eu=es[el[ec]],ef=+eu[0],ed=0|ef,eh=0|Math.min(ed+1,F[0]),ep=ef-ed,eg=1-ep,em=+eu[1],ey=0|em,ev=0|Math.min(ey+1,F[1]),ex=em-ey,e_=1-ex,ew=eg*e_,eT=eg*ex,ek=ep*e_,eA=ep*ex,eS=ew*et.get(ed,ey)+eT*et.get(ed,ev)+ek*et.get(eh,ey)+eA*et.get(eh,ev),eM=ew*en.get(ed,ey)+eT*en.get(ed,ev)+ek*en.get(eh,ey)+eA*en.get(eh,ev);if(isNaN(eS)||isNaN(eM)){ec&&(_-=1);break}N[2*_+0]=eS,N[2*_+1]=eM,_+=1}this._dynamicCounts[j]=_-this._dynamicOffsets[j]}this._dynamicBuffer.update(N.subarray(0,2*_)),Z.freeFloat(N)}}},8931:function(i,o,s){"use strict";var _=s(5050),F=s(7498),N=s(5306);i.exports=createTexture2D;var j=null,Z=null,X=null;function lazyInitLinearTypes(i){j=[i.LINEAR,i.NEAREST_MIPMAP_LINEAR,i.LINEAR_MIPMAP_NEAREST,i.LINEAR_MIPMAP_NEAREST],Z=[i.NEAREST,i.LINEAR,i.NEAREST_MIPMAP_NEAREST,i.NEAREST_MIPMAP_LINEAR,i.LINEAR_MIPMAP_NEAREST,i.LINEAR_MIPMAP_LINEAR],X=[i.REPEAT,i.CLAMP_TO_EDGE,i.MIRRORED_REPEAT]}function acceptTextureDOM(i){return"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&i instanceof ImageData}var convertFloatToUint8=function(i,o){F.muls(i,o,255)};function reshapeTexture(i,o,s){var _=i.gl,F=_.getParameter(_.MAX_TEXTURE_SIZE);if(o<0||o>F||s<0||s>F)throw Error("gl-texture2d: Invalid texture size");return i._shape=[o,s],i.bind(),_.texImage2D(_.TEXTURE_2D,0,i.format,o,s,0,i.format,i.type,null),i._mipLevels=[0],i}function Texture2D(i,o,s,_,F,N){this.gl=i,this.handle=o,this.format=F,this.type=N,this._shape=[s,_],this._mipLevels=[0],this._magFilter=i.NEAREST,this._minFilter=i.NEAREST,this._wrapS=i.CLAMP_TO_EDGE,this._wrapT=i.CLAMP_TO_EDGE,this._anisoSamples=1;var j=this,Z=[this._wrapS,this._wrapT];Object.defineProperties(Z,[{get:function(){return j._wrapS},set:function(i){return j.wrapS=i}},{get:function(){return j._wrapT},set:function(i){return j.wrapT=i}}]),this._wrapVector=Z;var X=[this._shape[0],this._shape[1]];Object.defineProperties(X,[{get:function(){return j._shape[0]},set:function(i){return j.width=i}},{get:function(){return j._shape[1]},set:function(i){return j.height=i}}]),this._shapeVector=X}var $=Texture2D.prototype;function isPacked(i,o){return 3===i.length?1===o[2]&&o[1]===i[0]*i[2]&&o[0]===i[2]:1===o[0]&&o[1]===i[0]}function texSubImageArray(i,o,s,j,Z,X,$,ee){var et=ee.dtype,er=ee.shape.slice();if(er.length<2||er.length>3)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var en=0,ei=0,eo=isPacked(er,ee.stride.slice());if("float32"===et?en=i.FLOAT:"float64"===et?(en=i.FLOAT,eo=!1,et="float32"):"uint8"===et?en=i.UNSIGNED_BYTE:(en=i.UNSIGNED_BYTE,eo=!1,et="uint8"),2===er.length)ei=i.LUMINANCE,er=[er[0],er[1],1],ee=_(ee.data,er,[ee.stride[0],ee.stride[1],1],ee.offset);else if(3===er.length){if(1===er[2])ei=i.ALPHA;else if(2===er[2])ei=i.LUMINANCE_ALPHA;else if(3===er[2])ei=i.RGB;else if(4===er[2])ei=i.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");er[2]}else throw Error("gl-texture2d: Invalid shape for texture");if((ei===i.LUMINANCE||ei===i.ALPHA)&&(Z===i.LUMINANCE||Z===i.ALPHA)&&(ei=Z),ei!==Z)throw Error("gl-texture2d: Incompatible texture format for setPixels");var es=ee.size,el=0>$.indexOf(j);if(el&&$.push(j),en===X&&eo)0===ee.offset&&ee.data.length===es?el?i.texImage2D(i.TEXTURE_2D,j,Z,er[0],er[1],0,Z,X,ee.data):i.texSubImage2D(i.TEXTURE_2D,j,o,s,er[0],er[1],Z,X,ee.data):el?i.texImage2D(i.TEXTURE_2D,j,Z,er[0],er[1],0,Z,X,ee.data.subarray(ee.offset,ee.offset+es)):i.texSubImage2D(i.TEXTURE_2D,j,o,s,er[0],er[1],Z,X,ee.data.subarray(ee.offset,ee.offset+es));else{var ec,eu=_(ec=X===i.FLOAT?N.mallocFloat32(es):N.mallocUint8(es),er,[er[2],er[2]*er[0],1]);en===i.FLOAT&&X===i.UNSIGNED_BYTE?convertFloatToUint8(eu,ee):F.assign(eu,ee),el?i.texImage2D(i.TEXTURE_2D,j,Z,er[0],er[1],0,Z,X,ec.subarray(0,es)):i.texSubImage2D(i.TEXTURE_2D,j,o,s,er[0],er[1],Z,X,ec.subarray(0,es)),X===i.FLOAT?N.freeFloat32(ec):N.freeUint8(ec)}}function initTexture(i){var o=i.createTexture();return i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),o}function createTextureShape(i,o,s,_,F){var N=i.getParameter(i.MAX_TEXTURE_SIZE);if(o<0||o>N||s<0||s>N)throw Error("gl-texture2d: Invalid texture shape");if(F===i.FLOAT&&!i.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");var j=initTexture(i);return i.texImage2D(i.TEXTURE_2D,0,_,o,s,0,_,F,null),new Texture2D(i,j,o,s,_,F)}function createTextureDOM(i,o,s,_,F,N){var j=initTexture(i);return i.texImage2D(i.TEXTURE_2D,0,F,F,N,o),new Texture2D(i,j,s,_,F,N)}function createTextureArray(i,o){var s,j,Z=o.dtype,X=o.shape.slice(),$=i.getParameter(i.MAX_TEXTURE_SIZE);if(X[0]<0||X[0]>$||X[1]<0||X[1]>$)throw Error("gl-texture2d: Invalid texture size");var ee=isPacked(X,o.stride.slice()),et=0;"float32"===Z?et=i.FLOAT:"float64"===Z?(et=i.FLOAT,ee=!1,Z="float32"):"uint8"===Z?et=i.UNSIGNED_BYTE:(et=i.UNSIGNED_BYTE,ee=!1,Z="uint8");var er=0;if(2===X.length)er=i.LUMINANCE,X=[X[0],X[1],1],o=_(o.data,X,[o.stride[0],o.stride[1],1],o.offset);else if(3===X.length){if(1===X[2])er=i.ALPHA;else if(2===X[2])er=i.LUMINANCE_ALPHA;else if(3===X[2])er=i.RGB;else if(4===X[2])er=i.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords")}else throw Error("gl-texture2d: Invalid shape for texture");et!==i.FLOAT||i.getExtension("OES_texture_float")||(et=i.UNSIGNED_BYTE,ee=!1);var en=o.size;if(ee)s=0===o.offset&&o.data.length===en?o.data:o.data.subarray(o.offset,o.offset+en);else{var ei=[X[2],X[2]*X[0],1],eo=_(j=N.malloc(en,Z),X,ei,0);("float32"===Z||"float64"===Z)&&et===i.UNSIGNED_BYTE?convertFloatToUint8(eo,o):F.assign(eo,o),s=j.subarray(0,en)}var es=initTexture(i);return i.texImage2D(i.TEXTURE_2D,0,er,X[0],X[1],0,er,et,s),ee||N.free(j),new Texture2D(i,es,X[0],X[1],er,et)}function createTexture2D(i){if(arguments.length<=1)throw Error("gl-texture2d: Missing arguments for texture2d constructor");if(j||lazyInitLinearTypes(i),"number"==typeof arguments[1])return createTextureShape(i,arguments[1],arguments[2],arguments[3]||i.RGBA,arguments[4]||i.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return createTextureShape(i,0|arguments[1][0],0|arguments[1][1],arguments[2]||i.RGBA,arguments[3]||i.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var o=arguments[1],s=acceptTextureDOM(o)?o:o.raw;if(s)return createTextureDOM(i,s,0|o.width,0|o.height,arguments[2]||i.RGBA,arguments[3]||i.UNSIGNED_BYTE);if(o.shape&&o.data&&o.stride)return createTextureArray(i,o)}throw Error("gl-texture2d: Invalid arguments for texture2d constructor")}Object.defineProperties($,{minFilter:{get:function(){return this._minFilter},set:function(i){this.bind();var o=this.gl;if(this.type===o.FLOAT&&j.indexOf(i)>=0&&!o.getExtension("OES_texture_float_linear")&&(i=o.NEAREST),0>Z.indexOf(i))throw Error("gl-texture2d: Unknown filter mode "+i);return o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,i),this._minFilter=i}},magFilter:{get:function(){return this._magFilter},set:function(i){this.bind();var o=this.gl;if(this.type===o.FLOAT&&j.indexOf(i)>=0&&!o.getExtension("OES_texture_float_linear")&&(i=o.NEAREST),0>Z.indexOf(i))throw Error("gl-texture2d: Unknown filter mode "+i);return o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,i),this._magFilter=i}},mipSamples:{get:function(){return this._anisoSamples},set:function(i){var o=this._anisoSamples;if(this._anisoSamples=0|Math.max(i,1),o!==this._anisoSamples){var s=this.gl.getExtension("EXT_texture_filter_anisotropic");s&&this.gl.texParameterf(this.gl.TEXTURE_2D,s.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(i){if(this.bind(),0>X.indexOf(i))throw Error("gl-texture2d: Unknown wrap mode "+i);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,i),this._wrapS=i}},wrapT:{get:function(){return this._wrapT},set:function(i){if(this.bind(),0>X.indexOf(i))throw Error("gl-texture2d: Unknown wrap mode "+i);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,i),this._wrapT=i}},wrap:{get:function(){return this._wrapVector},set:function(i){if(Array.isArray(i)||(i=[i,i]),2!==i.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var o=0;o<2;++o)if(0>X.indexOf(i[o]))throw Error("gl-texture2d: Unknown wrap mode "+i);this._wrapS=i[0],this._wrapT=i[1];var s=this.gl;return this.bind(),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,this._wrapS),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,this._wrapT),i}},shape:{get:function(){return this._shapeVector},set:function(i){if(Array.isArray(i)){if(2!==i.length)throw Error("gl-texture2d: Invalid texture shape")}else i=[0|i,0|i];return reshapeTexture(this,0|i[0],0|i[1]),[0|i[0],0|i[1]]}},width:{get:function(){return this._shape[0]},set:function(i){return reshapeTexture(this,i|=0,this._shape[1]),i}},height:{get:function(){return this._shape[1]},set:function(i){return i|=0,reshapeTexture(this,this._shape[0],i),i}}}),$.bind=function(i){var o=this.gl;return(void 0!==i&&o.activeTexture(o.TEXTURE0+(0|i)),o.bindTexture(o.TEXTURE_2D,this.handle),void 0!==i)?0|i:o.getParameter(o.ACTIVE_TEXTURE)-o.TEXTURE0},$.dispose=function(){this.gl.deleteTexture(this.handle)},$.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var i=Math.min(this._shape[0],this._shape[1]),o=0;i>0;++o,i>>>=1)0>this._mipLevels.indexOf(o)&&this._mipLevels.push(o)},$.setPixels=function(i,o,s,_){var F=this.gl;this.bind(),Array.isArray(o)?(_=s,s=0|o[1],o=0|o[0]):(o=o||0,s=s||0),_=_||0;var N=acceptTextureDOM(i)?i:i.raw;if(N)0>this._mipLevels.indexOf(_)?(F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,this.type,N),this._mipLevels.push(_)):F.texSubImage2D(F.TEXTURE_2D,_,o,s,this.format,this.type,N);else if(i.shape&&i.stride&&i.data){if(i.shape.length<2||o+i.shape[1]>this._shape[1]>>>_||s+i.shape[0]>this._shape[0]>>>_||o<0||s<0)throw Error("gl-texture2d: Texture dimensions are out of bounds");texSubImageArray(F,o,s,_,this.format,this.type,this._mipLevels,i)}else throw Error("gl-texture2d: Unsupported data type")}},3056:function(i){"use strict";function doBind(i,o,s){o?o.bind():i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null);var _=0|i.getParameter(i.MAX_VERTEX_ATTRIBS);if(s){if(s.length>_)throw Error("gl-vao: Too many vertex attributes");for(var F=0;F<s.length;++F){var N=s[F];if(N.buffer){var j=N.buffer,Z=N.size||4,X=N.type||i.FLOAT,$=!!N.normalized,ee=N.stride||0,et=N.offset||0;j.bind(),i.enableVertexAttribArray(F),i.vertexAttribPointer(F,Z,X,$,ee,et)}else{if("number"==typeof N)i.vertexAttrib1f(F,N);else if(1===N.length)i.vertexAttrib1f(F,N[0]);else if(2===N.length)i.vertexAttrib2f(F,N[0],N[1]);else if(3===N.length)i.vertexAttrib3f(F,N[0],N[1],N[2]);else if(4===N.length)i.vertexAttrib4f(F,N[0],N[1],N[2],N[3]);else throw Error("gl-vao: Invalid vertex attribute");i.disableVertexAttribArray(F)}}for(;F<_;++F)i.disableVertexAttribArray(F)}else{i.bindBuffer(i.ARRAY_BUFFER,null);for(var F=0;F<_;++F)i.disableVertexAttribArray(F)}}i.exports=doBind},7220:function(i,o,s){"use strict";var _=s(3056);function VAOEmulated(i){this.gl=i,this._elements=null,this._attributes=null,this._elementsType=i.UNSIGNED_SHORT}function createVAOEmulated(i){return new VAOEmulated(i)}VAOEmulated.prototype.bind=function(){_(this.gl,this._elements,this._attributes)},VAOEmulated.prototype.update=function(i,o,s){this._elements=o,this._attributes=i,this._elementsType=s||this.gl.UNSIGNED_SHORT},VAOEmulated.prototype.dispose=function(){},VAOEmulated.prototype.unbind=function(){},VAOEmulated.prototype.draw=function(i,o,s){s=s||0;var _=this.gl;this._elements?_.drawElements(i,o,this._elementsType,s):_.drawArrays(i,s,o)},i.exports=createVAOEmulated},3778:function(i,o,s){"use strict";var _=s(3056);function VertexAttribute(i,o,s,_,F,N){this.location=i,this.dimension=o,this.a=s,this.b=_,this.c=F,this.d=N}function VAONative(i,o,s){this.gl=i,this._ext=o,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=i.UNSIGNED_SHORT}function createVAONative(i,o){return new VAONative(i,o,o.createVertexArrayOES())}VertexAttribute.prototype.bind=function(i){switch(this.dimension){case 1:i.vertexAttrib1f(this.location,this.a);break;case 2:i.vertexAttrib2f(this.location,this.a,this.b);break;case 3:i.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:i.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},VAONative.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var i=0;i<this._attribs.length;++i)this._attribs[i].bind(this.gl)},VAONative.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},VAONative.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},VAONative.prototype.update=function(i,o,s){if(this.bind(),_(this.gl,o,i),this.unbind(),this._attribs.length=0,i)for(var F=0;F<i.length;++F){var N=i[F];"number"==typeof N?this._attribs.push(new VertexAttribute(F,1,N)):Array.isArray(N)&&this._attribs.push(new VertexAttribute(F,N.length,N[0],N[1],N[2],N[3]))}this._useElements=!!o,this._elementsType=s||this.gl.UNSIGNED_SHORT},VAONative.prototype.draw=function(i,o,s){s=s||0;var _=this.gl;this._useElements?_.drawElements(i,o,this._elementsType,s):_.drawArrays(i,s,o)},i.exports=createVAONative},2944:function(i,o,s){"use strict";var _=s(3778),F=s(7220);function ExtensionShim(i){this.bindVertexArrayOES=i.bindVertexArray.bind(i),this.createVertexArrayOES=i.createVertexArray.bind(i),this.deleteVertexArrayOES=i.deleteVertexArray.bind(i)}function createVAO(i,o,s,N){var j,Z=i.createVertexArray?new ExtensionShim(i):i.getExtension("OES_vertex_array_object");return(j=Z?_(i,Z):F(i)).update(o,s,N),j}i.exports=createVAO},2598:function(i){i.exports=add;function add(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i}},5879:function(i,o,s){i.exports=angle;var _=s(5415),F=s(899),N=s(9305);function angle(i,o){var s=_(i[0],i[1],i[2]),j=_(o[0],o[1],o[2]);F(s,s),F(j,j);var Z=N(s,j);return Z>1?0:Math.acos(Z)}},8827:function(i){i.exports=ceil;function ceil(i,o){return i[0]=Math.ceil(o[0]),i[1]=Math.ceil(o[1]),i[2]=Math.ceil(o[2]),i}},7622:function(i){i.exports=clone;function clone(i){var o=new Float32Array(3);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o}},8782:function(i){i.exports=copy;function copy(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i}},8501:function(i){i.exports=create;function create(){var i=new Float32Array(3);return i[0]=0,i[1]=0,i[2]=0,i}},903:function(i){i.exports=cross;function cross(i,o,s){var _=o[0],F=o[1],N=o[2],j=s[0],Z=s[1],X=s[2];return i[0]=F*X-N*Z,i[1]=N*j-_*X,i[2]=_*Z-F*j,i}},5981:function(i,o,s){i.exports=s(8288)},8288:function(i){i.exports=distance;function distance(i,o){var s=o[0]-i[0],_=o[1]-i[1],F=o[2]-i[2];return Math.sqrt(s*s+_*_+F*F)}},8629:function(i,o,s){i.exports=s(7979)},7979:function(i){i.exports=divide;function divide(i,o,s){return i[0]=o[0]/s[0],i[1]=o[1]/s[1],i[2]=o[2]/s[2],i}},9305:function(i){i.exports=dot;function dot(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]}},154:function(i){i.exports=1e-6},4932:function(i,o,s){i.exports=equals;var _=s(154);function equals(i,o){var s=i[0],F=i[1],N=i[2],j=o[0],Z=o[1],X=o[2];return Math.abs(s-j)<=_*Math.max(1,Math.abs(s),Math.abs(j))&&Math.abs(F-Z)<=_*Math.max(1,Math.abs(F),Math.abs(Z))&&Math.abs(N-X)<=_*Math.max(1,Math.abs(N),Math.abs(X))}},5777:function(i){i.exports=exactEquals;function exactEquals(i,o){return i[0]===o[0]&&i[1]===o[1]&&i[2]===o[2]}},3306:function(i){i.exports=floor;function floor(i,o){return i[0]=Math.floor(o[0]),i[1]=Math.floor(o[1]),i[2]=Math.floor(o[2]),i}},7447:function(i,o,s){i.exports=forEach;var _=s(8501)();function forEach(i,o,s,F,N,j){var Z,X;for(o||(o=3),s||(s=0),X=F?Math.min(F*o+s,i.length):i.length,Z=s;Z<X;Z+=o)_[0]=i[Z],_[1]=i[Z+1],_[2]=i[Z+2],N(_,_,j),i[Z]=_[0],i[Z+1]=_[1],i[Z+2]=_[2];return i}},5415:function(i){i.exports=fromValues;function fromValues(i,o,s){var _=new Float32Array(3);return _[0]=i,_[1]=o,_[2]=s,_}},2858:function(i,o,s){i.exports={EPSILON:s(154),create:s(8501),clone:s(7622),angle:s(5879),fromValues:s(5415),copy:s(8782),set:s(831),equals:s(4932),exactEquals:s(5777),add:s(2598),subtract:s(911),sub:s(8921),multiply:s(105),mul:s(5733),divide:s(7979),div:s(8629),min:s(3605),max:s(1716),floor:s(3306),ceil:s(8827),round:s(1624),scale:s(5685),scaleAndAdd:s(6722),distance:s(8288),dist:s(5981),squaredDistance:s(6403),sqrDist:s(5294),length:s(4693),len:s(1468),squaredLength:s(4337),sqrLen:s(3303),negate:s(435),inverse:s(2073),normalize:s(899),dot:s(9305),cross:s(903),lerp:s(1868),random:s(6660),transformMat4:s(3255),transformMat3:s(9908),transformQuat:s(6568),rotateX:s(392),rotateY:s(3222),rotateZ:s(3388),forEach:s(7447)}},2073:function(i){i.exports=inverse;function inverse(i,o){return i[0]=1/o[0],i[1]=1/o[1],i[2]=1/o[2],i}},1468:function(i,o,s){i.exports=s(4693)},4693:function(i){i.exports=length;function length(i){var o=i[0],s=i[1],_=i[2];return Math.sqrt(o*o+s*s+_*_)}},1868:function(i){i.exports=lerp;function lerp(i,o,s,_){var F=o[0],N=o[1],j=o[2];return i[0]=F+_*(s[0]-F),i[1]=N+_*(s[1]-N),i[2]=j+_*(s[2]-j),i}},1716:function(i){i.exports=max;function max(i,o,s){return i[0]=Math.max(o[0],s[0]),i[1]=Math.max(o[1],s[1]),i[2]=Math.max(o[2],s[2]),i}},3605:function(i){i.exports=min;function min(i,o,s){return i[0]=Math.min(o[0],s[0]),i[1]=Math.min(o[1],s[1]),i[2]=Math.min(o[2],s[2]),i}},5733:function(i,o,s){i.exports=s(105)},105:function(i){i.exports=multiply;function multiply(i,o,s){return i[0]=o[0]*s[0],i[1]=o[1]*s[1],i[2]=o[2]*s[2],i}},435:function(i){i.exports=negate;function negate(i,o){return i[0]=-o[0],i[1]=-o[1],i[2]=-o[2],i}},899:function(i){i.exports=normalize;function normalize(i,o){var s=o[0],_=o[1],F=o[2],N=s*s+_*_+F*F;return N>0&&(N=1/Math.sqrt(N),i[0]=o[0]*N,i[1]=o[1]*N,i[2]=o[2]*N),i}},6660:function(i){i.exports=random;function random(i,o){var s=2*Math.random()*Math.PI,_=2*Math.random()-1,F=Math.sqrt(1-_*_)*(o=o||1);return i[0]=Math.cos(s)*F,i[1]=Math.sin(s)*F,i[2]=_*o,i}},392:function(i){i.exports=rotateX;function rotateX(i,o,s,_){var F=s[1],N=s[2],j=o[1]-F,Z=o[2]-N,X=Math.sin(_),$=Math.cos(_);return i[0]=o[0],i[1]=F+j*$-Z*X,i[2]=N+j*X+Z*$,i}},3222:function(i){i.exports=rotateY;function rotateY(i,o,s,_){var F=s[0],N=s[2],j=o[0]-F,Z=o[2]-N,X=Math.sin(_),$=Math.cos(_);return i[0]=F+Z*X+j*$,i[1]=o[1],i[2]=N+Z*$-j*X,i}},3388:function(i){i.exports=rotateZ;function rotateZ(i,o,s,_){var F=s[0],N=s[1],j=o[0]-F,Z=o[1]-N,X=Math.sin(_),$=Math.cos(_);return i[0]=F+j*$-Z*X,i[1]=N+j*X+Z*$,i[2]=o[2],i}},1624:function(i){i.exports=round;function round(i,o){return i[0]=Math.round(o[0]),i[1]=Math.round(o[1]),i[2]=Math.round(o[2]),i}},5685:function(i){i.exports=scale;function scale(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i}},6722:function(i){i.exports=scaleAndAdd;function scaleAndAdd(i,o,s,_){return i[0]=o[0]+s[0]*_,i[1]=o[1]+s[1]*_,i[2]=o[2]+s[2]*_,i}},831:function(i){i.exports=set;function set(i,o,s,_){return i[0]=o,i[1]=s,i[2]=_,i}},5294:function(i,o,s){i.exports=s(6403)},3303:function(i,o,s){i.exports=s(4337)},6403:function(i){i.exports=squaredDistance;function squaredDistance(i,o){var s=o[0]-i[0],_=o[1]-i[1],F=o[2]-i[2];return s*s+_*_+F*F}},4337:function(i){i.exports=squaredLength;function squaredLength(i){var o=i[0],s=i[1],_=i[2];return o*o+s*s+_*_}},8921:function(i,o,s){i.exports=s(911)},911:function(i){i.exports=subtract;function subtract(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i}},9908:function(i){i.exports=transformMat3;function transformMat3(i,o,s){var _=o[0],F=o[1],N=o[2];return i[0]=_*s[0]+F*s[3]+N*s[6],i[1]=_*s[1]+F*s[4]+N*s[7],i[2]=_*s[2]+F*s[5]+N*s[8],i}},3255:function(i){i.exports=transformMat4;function transformMat4(i,o,s){var _=o[0],F=o[1],N=o[2],j=s[3]*_+s[7]*F+s[11]*N+s[15];return j=j||1,i[0]=(s[0]*_+s[4]*F+s[8]*N+s[12])/j,i[1]=(s[1]*_+s[5]*F+s[9]*N+s[13])/j,i[2]=(s[2]*_+s[6]*F+s[10]*N+s[14])/j,i}},6568:function(i){i.exports=transformQuat;function transformQuat(i,o,s){var _=o[0],F=o[1],N=o[2],j=s[0],Z=s[1],X=s[2],$=s[3],ee=$*_+Z*N-X*F,et=$*F+X*_-j*N,er=$*N+j*F-Z*_,en=-j*_-Z*F-X*N;return i[0]=ee*$+-(en*j)+-(et*X)- -(er*Z),i[1]=et*$+-(en*Z)+-(er*j)- -(ee*X),i[2]=er*$+-(en*X)+-(ee*Z)- -(et*j),i}},3433:function(i){i.exports=add;function add(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i[3]=o[3]+s[3],i}},1413:function(i){i.exports=clone;function clone(i){var o=new Float32Array(4);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o}},3470:function(i){i.exports=copy;function copy(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i}},5313:function(i){i.exports=create;function create(){var i=new Float32Array(4);return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i}},5446:function(i){i.exports=distance;function distance(i,o){var s=o[0]-i[0],_=o[1]-i[1],F=o[2]-i[2],N=o[3]-i[3];return Math.sqrt(s*s+_*_+F*F+N*N)}},205:function(i){i.exports=divide;function divide(i,o,s){return i[0]=o[0]/s[0],i[1]=o[1]/s[1],i[2]=o[2]/s[2],i[3]=o[3]/s[3],i}},4242:function(i){i.exports=dot;function dot(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]+i[3]*o[3]}},5680:function(i){i.exports=fromValues;function fromValues(i,o,s,_){var F=new Float32Array(4);return F[0]=i,F[1]=o,F[2]=s,F[3]=_,F}},4020:function(i,o,s){i.exports={create:s(5313),clone:s(1413),fromValues:s(5680),copy:s(3470),set:s(6453),add:s(3433),subtract:s(2705),multiply:s(746),divide:s(205),min:s(2170),max:s(3030),scale:s(5510),scaleAndAdd:s(4224),distance:s(5446),squaredDistance:s(1542),length:s(8177),squaredLength:s(9037),negate:s(6459),inverse:s(8057),normalize:s(381),dot:s(4242),lerp:s(8746),random:s(3770),transformMat4:s(6342),transformQuat:s(5022)}},8057:function(i){i.exports=inverse;function inverse(i,o){return i[0]=1/o[0],i[1]=1/o[1],i[2]=1/o[2],i[3]=1/o[3],i}},8177:function(i){i.exports=length;function length(i){var o=i[0],s=i[1],_=i[2],F=i[3];return Math.sqrt(o*o+s*s+_*_+F*F)}},8746:function(i){i.exports=lerp;function lerp(i,o,s,_){var F=o[0],N=o[1],j=o[2],Z=o[3];return i[0]=F+_*(s[0]-F),i[1]=N+_*(s[1]-N),i[2]=j+_*(s[2]-j),i[3]=Z+_*(s[3]-Z),i}},3030:function(i){i.exports=max;function max(i,o,s){return i[0]=Math.max(o[0],s[0]),i[1]=Math.max(o[1],s[1]),i[2]=Math.max(o[2],s[2]),i[3]=Math.max(o[3],s[3]),i}},2170:function(i){i.exports=min;function min(i,o,s){return i[0]=Math.min(o[0],s[0]),i[1]=Math.min(o[1],s[1]),i[2]=Math.min(o[2],s[2]),i[3]=Math.min(o[3],s[3]),i}},746:function(i){i.exports=multiply;function multiply(i,o,s){return i[0]=o[0]*s[0],i[1]=o[1]*s[1],i[2]=o[2]*s[2],i[3]=o[3]*s[3],i}},6459:function(i){i.exports=negate;function negate(i,o){return i[0]=-o[0],i[1]=-o[1],i[2]=-o[2],i[3]=-o[3],i}},381:function(i){i.exports=normalize;function normalize(i,o){var s=o[0],_=o[1],F=o[2],N=o[3],j=s*s+_*_+F*F+N*N;return j>0&&(j=1/Math.sqrt(j),i[0]=s*j,i[1]=_*j,i[2]=F*j,i[3]=N*j),i}},3770:function(i,o,s){var _=s(381),F=s(5510);function random(i,o){return o=o||1,i[0]=Math.random(),i[1]=Math.random(),i[2]=Math.random(),i[3]=Math.random(),_(i,i),F(i,i,o),i}i.exports=random},5510:function(i){i.exports=scale;function scale(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i[3]=o[3]*s,i}},4224:function(i){i.exports=scaleAndAdd;function scaleAndAdd(i,o,s,_){return i[0]=o[0]+s[0]*_,i[1]=o[1]+s[1]*_,i[2]=o[2]+s[2]*_,i[3]=o[3]+s[3]*_,i}},6453:function(i){i.exports=set;function set(i,o,s,_,F){return i[0]=o,i[1]=s,i[2]=_,i[3]=F,i}},1542:function(i){i.exports=squaredDistance;function squaredDistance(i,o){var s=o[0]-i[0],_=o[1]-i[1],F=o[2]-i[2],N=o[3]-i[3];return s*s+_*_+F*F+N*N}},9037:function(i){i.exports=squaredLength;function squaredLength(i){var o=i[0],s=i[1],_=i[2],F=i[3];return o*o+s*s+_*_+F*F}},2705:function(i){i.exports=subtract;function subtract(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i[3]=o[3]-s[3],i}},6342:function(i){i.exports=transformMat4;function transformMat4(i,o,s){var _=o[0],F=o[1],N=o[2],j=o[3];return i[0]=s[0]*_+s[4]*F+s[8]*N+s[12]*j,i[1]=s[1]*_+s[5]*F+s[9]*N+s[13]*j,i[2]=s[2]*_+s[6]*F+s[10]*N+s[14]*j,i[3]=s[3]*_+s[7]*F+s[11]*N+s[15]*j,i}},5022:function(i){i.exports=transformQuat;function transformQuat(i,o,s){var _=o[0],F=o[1],N=o[2],j=s[0],Z=s[1],X=s[2],$=s[3],ee=$*_+Z*N-X*F,et=$*F+X*_-j*N,er=$*N+j*F-Z*_,en=-j*_-Z*F-X*N;return i[0]=ee*$+-(en*j)+-(et*X)- -(er*Z),i[1]=et*$+-(en*Z)+-(er*j)- -(ee*X),i[2]=er*$+-(en*X)+-(ee*Z)- -(et*j),i[3]=o[3],i}},9365:function(i,o,s){var _=s(8096),F=s(7896);function getName(i){for(var o=Array.isArray(i)?i:_(i),s=0;s<o.length;s++){var N=o[s];if("preprocessor"===N.type){var j=N.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(j&&j[2]){var Z=j[1],X=j[2];return(Z?F(X):X).trim()}}}}i.exports=getName},3193:function(i,o,s){i.exports=tokenize;var _=s(399),F=s(9746),N=s(9525),j=s(9458),Z=s(3585),X=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function tokenize(i){var o,s,$,ee=0,et=0,er=999,en=[],ei=[],eo=1,es=0,el=0,ec=!1,eu=!1,ef="",ed=N,eh=_;"300 es"===(i=i||{}).version&&(ed=Z,eh=j);for(var ep={},eg={},ee=0;ee<ed.length;ee++)ep[ed[ee]]=!0;for(var ee=0;ee<eh.length;ee++)eg[eh[ee]]=!0;return function(i){return(ei=[],null!==i)?write(i):end()};function token(i){i.length&&ei.push({type:X[er],data:i,position:el,line:eo,column:es})}function write(i){var s;for(ee=0,i.toString&&(i=i.toString()),ef+=i.replace(/\r\n/g,"\n"),$=ef.length;o=ef[ee],ee<$;){switch(s=ee,er){case 0:ee=block_comment();break;case 1:ee=line_comment();break;case 2:ee=preprocessor();break;case 3:ee=operator();break;case 4:ee=integer();break;case 11:ee=hex();break;case 5:ee=decimal();break;case 9999:ee=readtoken();break;case 9:ee=whitespace();break;case 999:ee=normal()}s!==ee&&("\n"===ef[s]?(es=0,++eo):++es)}return et+=ee,ef=ef.slice(ee),ei}function end(i){return en.length&&token(en.join("")),er=10,token("(eof)"),ei}function normal(){return(en=en.length?[]:en,"/"===s&&"*"===o)?(el=et+ee-1,er=0,s=o,ee+1):"/"===s&&"/"===o?(el=et+ee-1,er=1,s=o,ee+1):("#"===o?(er=2,el=et+ee):/\s/.test(o)?(er=9,el=et+ee):(ec=/\d/.test(o),eu=/[^\w_]/.test(o),el=et+ee,er=ec?4:eu?3:9999),ee)}function whitespace(){return/[^\s]/g.test(o)?(token(en.join("")),er=999,ee):(en.push(o),s=o,ee+1)}function preprocessor(){return("\r"===o||"\n"===o)&&"\\"!==s?(token(en.join("")),er=999,ee):(en.push(o),s=o,ee+1)}function line_comment(){return preprocessor()}function block_comment(){return"/"===o&&"*"===s?(en.push(o),token(en.join("")),er=999):(en.push(o),s=o),ee+1}function operator(){if("."===s&&/\d/.test(o))return er=5,ee;if("/"===s&&"*"===o)return er=0,ee;if("/"===s&&"/"===o)return er=1,ee;if("."===o&&en.length){for(;determine_operator(en););return er=5,ee}if(";"===o||")"===o||"("===o){if(en.length)for(;determine_operator(en););return token(o),er=999,ee+1}var i=2===en.length&&"="!==o;if(/[\w_\d\s]/.test(o)||i){for(;determine_operator(en););return er=999,ee}return en.push(o),s=o,ee+1}function determine_operator(i){for(var o,s,_=0;;){if(o=F.indexOf(i.slice(0,i.length+_).join("")),s=F[o],-1===o){if(_--+i.length>0)continue;s=i.slice(0,1).join("")}return token(s),el+=s.length,(en=en.slice(s.length)).length}}function hex(){return/[^a-fA-F0-9]/.test(o)?(token(en.join("")),er=999,ee):(en.push(o),s=o,ee+1)}function integer(){return"."===o||/[eE]/.test(o)?(en.push(o),er=5,s=o,ee+1):"x"===o&&1===en.length&&"0"===en[0]?(er=11,en.push(o),s=o,ee+1):/[^\d]/.test(o)?(token(en.join("")),er=999,ee):(en.push(o),s=o,ee+1)}function decimal(){return("f"===o&&(en.push(o),s=o,ee+=1),/[eE]/.test(o)||("-"===o||"+"===o)&&/[eE]/.test(s))?(en.push(o),s=o,ee+1):/[^\d]/.test(o)?(token(en.join("")),er=999,ee):(en.push(o),s=o,ee+1)}function readtoken(){if(/[^\d\w_]/.test(o)){var i=en.join("");return er=eg[i]?8:ep[i]?7:6,token(en.join("")),er=999,ee}return en.push(o),s=o,ee+1}}},3585:function(i,o,s){var _=s(9525);_=_.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),i.exports=_.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(i){i.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(i,o,s){var _=s(399);i.exports=_.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(i){i.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(i){i.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(i,o,s){var _=s(3193);function tokenizeString(i,o){var s=_(o),F=[];return(F=F.concat(s(i))).concat(s(null))}i.exports=tokenizeString},6832:function(i){i.exports=function(i){"string"==typeof i&&(i=[i]);for(var o=[].slice.call(arguments,1),s=[],_=0;_<i.length-1;_++)s.push(i[_],o[_]||"");return s.push(i[_]),s.join("")}},5233:function(i,o,s){"use strict";var _=s(4846);function detect(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch(o){i=!1}return i}i.exports=_&&detect()},2183:function(i,o,s){"use strict";i.exports=incrementalConvexHull;var _=s(417),F=s(8211).H;function Simplex(i,o,s){this.vertices=i,this.adjacent=o,this.boundary=s,this.lastVisited=-1}function GlueFacet(i,o,s){this.vertices=i,this.cell=o,this.index=s}function compareGlue(i,o){return F(i.vertices,o.vertices)}function wrapper(i){return function(){var o=this.tuple;return i.apply(this,o)}}function bakeOrient(i){var o=_[i+1];return o||(o=_),wrapper(o)}Simplex.prototype.flip=function(){var i=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=i;var o=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=o};var N=[];function Triangulation(i,o,s){this.dimension=i,this.vertices=o,this.simplices=s,this.interior=s.filter(function(i){return!i.boundary}),this.tuple=Array(i+1);for(var _=0;_<=i;++_)this.tuple[_]=this.vertices[_];var F=N[i];F||(F=N[i]=bakeOrient(i)),this.orient=F}var j=Triangulation.prototype;function incrementalConvexHull(i,o){var s=i.length;if(0===s)throw Error("Must have at least d+1 points");var F=i[0].length;if(s<=F)throw Error("Must input at least d+1 points");var N=i.slice(0,F+1),j=_.apply(void 0,N);if(0===j)throw Error("Input not in general position");for(var Z=Array(F+1),X=0;X<=F;++X)Z[X]=X;j<0&&(Z[0]=1,Z[1]=0);for(var $=new Simplex(Z,Array(F+1),!1),ee=$.adjacent,et=Array(F+2),X=0;X<=F;++X){for(var er=Z.slice(),en=0;en<=F;++en)en===X&&(er[en]=-1);var ei=er[0];er[0]=er[1],er[1]=ei;var eo=new Simplex(er,Array(F+1),!0);ee[X]=eo,et[X]=eo}et[F+1]=$;for(var X=0;X<=F;++X)for(var er=ee[X].vertices,es=ee[X].adjacent,en=0;en<=F;++en){var el=er[en];if(el<0){es[en]=$;continue}for(var ec=0;ec<=F;++ec)0>ee[ec].vertices.indexOf(el)&&(es[en]=ee[ec])}for(var eu=new Triangulation(F,N,et),ef=!!o,X=F+1;X<s;++X)eu.insert(i[X],ef);return eu.boundary()}j.handleBoundaryDegeneracy=function(i,o){var s=this.dimension,_=this.vertices.length-1,F=this.tuple,N=this.vertices,j=[i];for(i.lastVisited=-_;j.length>0;)for(var Z=(i=j.pop()).adjacent,X=0;X<=s;++X){var $=Z[X];if($.boundary&&!($.lastVisited<=-_)){for(var ee=$.vertices,et=0;et<=s;++et){var er=ee[et];er<0?F[et]=o:F[et]=N[er]}var en=this.orient();if(en>0)return $;$.lastVisited=-_,0===en&&j.push($)}}return null},j.walk=function(i,o){var s=this.vertices.length-1,_=this.dimension,F=this.vertices,N=this.tuple,j=o?this.interior.length*Math.random()|0:this.interior.length-1,Z=this.interior[j];h:for(;!Z.boundary;){for(var X=Z.vertices,$=Z.adjacent,ee=0;ee<=_;++ee)N[ee]=F[X[ee]];Z.lastVisited=s;for(var ee=0;ee<=_;++ee){var et=$[ee];if(!(et.lastVisited>=s)){var er=N[ee];N[ee]=i;var en=this.orient();if(N[ee]=er,en<0){Z=et;continue h}et.boundary?et.lastVisited=-s:et.lastVisited=s}}return}return Z},j.addPeaks=function(i,o){var s=this.vertices.length-1,_=this.dimension,F=this.vertices,N=this.tuple,j=this.interior,Z=this.simplices,X=[o];o.lastVisited=s,o.vertices[o.vertices.indexOf(-1)]=s,o.boundary=!1,j.push(o);for(var $=[];X.length>0;){var o=X.pop(),ee=o.vertices,et=o.adjacent,er=ee.indexOf(s);if(!(er<0))for(var en=0;en<=_;++en){if(en!==er){var ei=et[en];if(ei.boundary&&!(ei.lastVisited>=s)){var eo=ei.vertices;if(ei.lastVisited!==-s){for(var es=0,el=0;el<=_;++el)eo[el]<0?(es=el,N[el]=i):N[el]=F[eo[el]];if(this.orient()>0){eo[es]=s,ei.boundary=!1,j.push(ei),X.push(ei),ei.lastVisited=s;continue}ei.lastVisited=-s}var ec=ei.adjacent,eu=ee.slice(),ef=et.slice(),ed=new Simplex(eu,ef,!0);Z.push(ed);var eh=ec.indexOf(o);if(!(eh<0)){ec[eh]=ed,ef[er]=ei,eu[en]=-1,ef[en]=o,et[en]=ed,ed.flip();for(var el=0;el<=_;++el){var ep=eu[el];if(!(ep<0)&&ep!==s){for(var eg=Array(_-1),em=0,ey=0;ey<=_;++ey){var ev=eu[ey];ev<0||ey===el||(eg[em++]=ev)}$.push(new GlueFacet(eg,ed,el))}}}}}}}$.sort(compareGlue);for(var en=0;en+1<$.length;en+=2){var ex=$[en],e_=$[en+1],ew=ex.index,eT=e_.index;ew<0||eT<0||(ex.cell.adjacent[ex.index]=e_.cell,e_.cell.adjacent[e_.index]=ex.cell)}},j.insert=function(i,o){var s=this.vertices;s.push(i);var _=this.walk(i,o);if(_){for(var F=this.dimension,N=this.tuple,j=0;j<=F;++j){var Z=_.vertices[j];Z<0?N[j]=i:N[j]=s[Z]}var X=this.orient(N);!(X<0)&&(0!==X||(_=this.handleBoundaryDegeneracy(_,i)))&&this.addPeaks(i,_)}},j.boundary=function(){for(var i=this.dimension,o=[],s=this.simplices,_=s.length,F=0;F<_;++F){var N=s[F];if(N.boundary){for(var j=Array(i),Z=N.vertices,X=0,$=0,ee=0;ee<=i;++ee)Z[ee]>=0?j[X++]=Z[ee]:$=1&ee;if($===(1&i)){var et=j[0];j[0]=j[1],j[1]=et}o.push(j)}}return o}},9014:function(i,o,s){"use strict";var _=s(5070);function IntervalTreeNode(i,o,s,_,F){this.mid=i,this.left=o,this.right=s,this.leftPoints=_,this.rightPoints=F,this.count=(o?o.count:0)+(s?s.count:0)+_.length}i.exports=createWrapper;var F=IntervalTreeNode.prototype;function copy(i,o){i.mid=o.mid,i.left=o.left,i.right=o.right,i.leftPoints=o.leftPoints,i.rightPoints=o.rightPoints,i.count=o.count}function rebuild(i,o){var s=createIntervalTree(o);i.mid=s.mid,i.left=s.left,i.right=s.right,i.leftPoints=s.leftPoints,i.rightPoints=s.rightPoints,i.count=s.count}function rebuildWithInterval(i,o){var s=i.intervals([]);s.push(o),rebuild(i,s)}function rebuildWithoutInterval(i,o){var s=i.intervals([]),_=s.indexOf(o);return _<0?0:(s.splice(_,1),rebuild(i,s),1)}function reportLeftRange(i,o,s){for(var _=0;_<i.length&&i[_][0]<=o;++_){var F=s(i[_]);if(F)return F}}function reportRightRange(i,o,s){for(var _=i.length-1;_>=0&&i[_][1]>=o;--_){var F=s(i[_]);if(F)return F}}function reportRange(i,o){for(var s=0;s<i.length;++s){var _=o(i[s]);if(_)return _}}function compareNumbers(i,o){return i-o}function compareBegin(i,o){return i[0]-o[0]||i[1]-o[1]}function compareEnd(i,o){return i[1]-o[1]||i[0]-o[0]}function createIntervalTree(i){if(0===i.length)return null;for(var o=[],s=0;s<i.length;++s)o.push(i[s][0],i[s][1]);o.sort(compareNumbers);for(var _=o[o.length>>1],F=[],N=[],j=[],s=0;s<i.length;++s){var Z=i[s];Z[1]<_?F.push(Z):_<Z[0]?N.push(Z):j.push(Z)}var X=j.slice();return j.sort(compareBegin),X.sort(compareEnd),new IntervalTreeNode(_,createIntervalTree(F),createIntervalTree(N),j,X)}function IntervalTree(i){this.root=i}F.intervals=function(i){return i.push.apply(i,this.leftPoints),this.left&&this.left.intervals(i),this.right&&this.right.intervals(i),i},F.insert=function(i){var o=this.count-this.leftPoints.length;if(this.count+=1,i[1]<this.mid)this.left?4*(this.left.count+1)>3*(o+1)?rebuildWithInterval(this,i):this.left.insert(i):this.left=createIntervalTree([i]);else if(i[0]>this.mid)this.right?4*(this.right.count+1)>3*(o+1)?rebuildWithInterval(this,i):this.right.insert(i):this.right=createIntervalTree([i]);else{var s=_.ge(this.leftPoints,i,compareBegin),F=_.ge(this.rightPoints,i,compareEnd);this.leftPoints.splice(s,0,i),this.rightPoints.splice(F,0,i)}},F.remove=function(i){var o=this.count-this.leftPoints;if(i[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(o-1))return rebuildWithoutInterval(this,i);var s=this.left.remove(i);return 2===s?(this.left=null,this.count-=1,1):(1===s&&(this.count-=1),s)}if(i[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(o-1))return rebuildWithoutInterval(this,i);var s=this.right.remove(i);return 2===s?(this.right=null,this.count-=1,1):(1===s&&(this.count-=1),s)}if(1===this.count)return this.leftPoints[0]===i?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===i){if(this.left&&this.right){for(var F=this,N=this.left;N.right;)F=N,N=N.right;if(F===this)N.right=this.right;else{var j=this.left,s=this.right;F.count-=N.count,F.right=N.left,N.left=j,N.right=s}copy(this,N),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?copy(this,this.left):copy(this,this.right);return 1}for(var j=_.ge(this.leftPoints,i,compareBegin);j<this.leftPoints.length&&this.leftPoints[j][0]===i[0];++j)if(this.leftPoints[j]===i){this.count-=1,this.leftPoints.splice(j,1);for(var s=_.ge(this.rightPoints,i,compareEnd);s<this.rightPoints.length&&this.rightPoints[s][1]===i[1];++s)if(this.rightPoints[s]===i)return this.rightPoints.splice(s,1),1}return 0},F.queryPoint=function(i,o){if(i<this.mid){if(this.left){var s=this.left.queryPoint(i,o);if(s)return s}return reportLeftRange(this.leftPoints,i,o)}if(!(i>this.mid))return reportRange(this.leftPoints,o);if(this.right){var s=this.right.queryPoint(i,o);if(s)return s}return reportRightRange(this.rightPoints,i,o)},F.queryInterval=function(i,o,s){if(i<this.mid&&this.left){var _=this.left.queryInterval(i,o,s);if(_)return _}if(o>this.mid&&this.right){var _=this.right.queryInterval(i,o,s);if(_)return _}return o<this.mid?reportLeftRange(this.leftPoints,o,s):i>this.mid?reportRightRange(this.rightPoints,i,s):reportRange(this.leftPoints,s)};var N=IntervalTree.prototype;function createWrapper(i){return new IntervalTree(i&&0!==i.length?createIntervalTree(i):null)}N.insert=function(i){this.root?this.root.insert(i):this.root=new IntervalTreeNode(i[0],null,null,[i],[i])},N.remove=function(i){if(this.root){var o=this.root.remove(i);return 2===o&&(this.root=null),0!==o}return!1},N.queryPoint=function(i,o){if(this.root)return this.root.queryPoint(i,o)},N.queryInterval=function(i,o,s){if(i<=o&&this.root)return this.root.queryInterval(i,o,s)},Object.defineProperty(N,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(N,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(i){"use strict";function iota(i){for(var o=Array(i),s=0;s<i;++s)o[s]=s;return o}i.exports=iota},4846:function(i){i.exports=!0},4780:function(i){function isBuffer(i){return!!i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}function isSlowBuffer(i){return"function"==typeof i.readFloatLE&&"function"==typeof i.slice&&isBuffer(i.slice(0,0))}i.exports=function(i){return null!=i&&(isBuffer(i)||isSlowBuffer(i)||!!i._isBuffer)}},3596:function(i){"use strict";i.exports=function(i){for(var o,s=i.length,_=0;_<s;_++)if(((o=i.charCodeAt(_))<9||o>13)&&32!==o&&133!==o&&160!==o&&5760!==o&&6158!==o&&(o<8192||o>8205)&&8232!==o&&8233!==o&&8239!==o&&8287!==o&&8288!==o&&12288!==o&&65279!==o)return!1;return!0}},3578:function(i){function lerp(i,o,s){return i*(1-s)+o*s}i.exports=lerp},7191:function(i,o,s){var _=s(4690),F=s(9823),N=s(7332),j=s(7787),Z=s(7437),X=s(2142),$={length:s(4693),normalize:s(899),dot:s(9305),cross:s(903)},ee=F(),et=F(),er=[0,0,0,0],en=[[0,0,0],[0,0,0],[0,0,0]],ei=[0,0,0];function vec4multMat4(i,o,s){var _=o[0],F=o[1],N=o[2],j=o[3];return i[0]=s[0]*_+s[4]*F+s[8]*N+s[12]*j,i[1]=s[1]*_+s[5]*F+s[9]*N+s[13]*j,i[2]=s[2]*_+s[6]*F+s[10]*N+s[14]*j,i[3]=s[3]*_+s[7]*F+s[11]*N+s[15]*j,i}function mat3from4(i,o){i[0][0]=o[0],i[0][1]=o[1],i[0][2]=o[2],i[1][0]=o[4],i[1][1]=o[5],i[1][2]=o[6],i[2][0]=o[8],i[2][1]=o[9],i[2][2]=o[10]}function combine(i,o,s,_,F){i[0]=o[0]*_+s[0]*F,i[1]=o[1]*_+s[1]*F,i[2]=o[2]*_+s[2]*F}i.exports=function(i,o,s,F,eo,es){if(o||(o=[0,0,0]),s||(s=[0,0,0]),F||(F=[0,0,0]),eo||(eo=[0,0,0,1]),es||(es=[0,0,0,1]),!_(ee,i)||(N(et,ee),et[3]=0,et[7]=0,et[11]=0,et[15]=1,Math.abs(1e-8>j(et))))return!1;var el=ee[3],ec=ee[7],eu=ee[11],ef=ee[12],ed=ee[13],eh=ee[14],ep=ee[15];if(0!==el||0!==ec||0!==eu){if(er[0]=el,er[1]=ec,er[2]=eu,er[3]=ep,!Z(et,et))return!1;X(et,et),vec4multMat4(eo,er,et)}else eo[0]=eo[1]=eo[2]=0,eo[3]=1;if(o[0]=ef,o[1]=ed,o[2]=eh,mat3from4(en,ee),s[0]=$.length(en[0]),$.normalize(en[0],en[0]),F[0]=$.dot(en[0],en[1]),combine(en[1],en[1],en[0],1,-F[0]),s[1]=$.length(en[1]),$.normalize(en[1],en[1]),F[0]/=s[1],F[1]=$.dot(en[0],en[2]),combine(en[2],en[2],en[0],1,-F[1]),F[2]=$.dot(en[1],en[2]),combine(en[2],en[2],en[1],1,-F[2]),s[2]=$.length(en[2]),$.normalize(en[2],en[2]),F[1]/=s[2],F[2]/=s[2],$.cross(ei,en[1],en[2]),0>$.dot(en[0],ei))for(var eg=0;eg<3;eg++)s[eg]*=-1,en[eg][0]*=-1,en[eg][1]*=-1,en[eg][2]*=-1;return es[0]=.5*Math.sqrt(Math.max(1+en[0][0]-en[1][1]-en[2][2],0)),es[1]=.5*Math.sqrt(Math.max(1-en[0][0]+en[1][1]-en[2][2],0)),es[2]=.5*Math.sqrt(Math.max(1-en[0][0]-en[1][1]+en[2][2],0)),es[3]=.5*Math.sqrt(Math.max(1+en[0][0]+en[1][1]+en[2][2],0)),en[2][1]>en[1][2]&&(es[0]=-es[0]),en[0][2]>en[2][0]&&(es[1]=-es[1]),en[1][0]>en[0][1]&&(es[2]=-es[2]),!0}},4690:function(i){i.exports=function(i,o){var s=o[15];if(0===s)return!1;for(var _=1/s,F=0;F<16;F++)i[F]=o[F]*_;return!0}},7649:function(i,o,s){var _=s(1868),F=s(1102),N=s(7191),j=s(7787),Z=s(1116),X=state(),$=state(),ee=state();function interpolate(i,o,s,et){if(0===j(o)||0===j(s))return!1;var er=N(o,X.translate,X.scale,X.skew,X.perspective,X.quaternion),en=N(s,$.translate,$.scale,$.skew,$.perspective,$.quaternion);return!!er&&!!en&&(_(ee.translate,X.translate,$.translate,et),_(ee.skew,X.skew,$.skew,et),_(ee.scale,X.scale,$.scale,et),_(ee.perspective,X.perspective,$.perspective,et),Z(ee.quaternion,X.quaternion,$.quaternion,et),F(i,ee.translate,ee.scale,ee.skew,ee.perspective,ee.quaternion),!0)}function state(){return{translate:vec3(),scale:vec3(1),skew:vec3(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function vec3(i){return[i||0,i||0,i||0]}i.exports=interpolate},1102:function(i,o,s){var _={identity:s(9947),translate:s(998),multiply:s(104),create:s(9823),scale:s(3668),fromRotationTranslation:s(7280)};_.create();var F=_.create();i.exports=function(i,o,s,N,j,Z){return _.identity(i),_.fromRotationTranslation(i,Z,o),i[3]=j[0],i[7]=j[1],i[11]=j[2],i[15]=j[3],_.identity(F),0!==N[2]&&(F[9]=N[2],_.multiply(i,i,F)),0!==N[1]&&(F[9]=0,F[8]=N[1],_.multiply(i,i,F)),0!==N[0]&&(F[8]=0,F[4]=N[0],_.multiply(i,i,F)),_.scale(i,i,s),i}},9298:function(i,o,s){"use strict";var _=s(5070),F=s(7649),N=s(7437),j=s(6109),Z=s(7115),X=s(5240),$=s(3012),ee=s(998);s(3668);var et=s(899),er=[0,0,0];function MatrixCameraController(i){this._components=i.slice(),this._time=[0],this.prevMatrix=i.slice(),this.nextMatrix=i.slice(),this.computedMatrix=i.slice(),this.computedInverse=i.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}i.exports=createMatrixCameraController;var en=MatrixCameraController.prototype;en.recalcMatrix=function(i){var o=this._time,s=_.le(o,i),j=this.computedMatrix;if(!(s<0)){var Z=this._components;if(s===o.length-1)for(var X=16*s,$=0;$<16;++$)j[$]=Z[X++];else{for(var ee=o[s+1]-o[s],X=16*s,er=this.prevMatrix,en=!0,$=0;$<16;++$)er[$]=Z[X++];for(var ei=this.nextMatrix,$=0;$<16;++$)ei[$]=Z[X++],en=en&&er[$]===ei[$];if(ee<1e-6||en)for(var $=0;$<16;++$)j[$]=er[$];else F(j,er,ei,(i-o[s])/ee)}var eo=this.computedUp;eo[0]=j[1],eo[1]=j[5],eo[2]=j[9],et(eo,eo);var es=this.computedInverse;N(es,j);var el=this.computedEye,ec=es[15];el[0]=es[12]/ec,el[1]=es[13]/ec,el[2]=es[14]/ec;for(var eu=this.computedCenter,ef=Math.exp(this.computedRadius[0]),$=0;$<3;++$)eu[$]=el[$]-j[2+4*$]*ef}},en.idle=function(i){if(!(i<this.lastT())){for(var o=this._components,s=o.length-16,_=0;_<16;++_)o.push(o[s++]);this._time.push(i)}},en.flush=function(i){var o=_.gt(this._time,i)-2;o<0||(this._time.splice(0,o),this._components.splice(0,16*o))},en.lastT=function(){return this._time[this._time.length-1]},en.lookAt=function(i,o,s,_){this.recalcMatrix(i),o=o||this.computedEye,s=s||er,_=_||this.computedUp,this.setMatrix(i,$(this.computedMatrix,o,s,_));for(var F=0,N=0;N<3;++N)F+=Math.pow(s[N]-o[N],2);F=Math.log(Math.sqrt(F)),this.computedRadius[0]=F},en.rotate=function(i,o,s,_){this.recalcMatrix(i);var F=this.computedInverse;o&&Z(F,F,o),s&&j(F,F,s),_&&X(F,F,_),this.setMatrix(i,N(this.computedMatrix,F))};var ei=[0,0,0];function createMatrixCameraController(i){return new MatrixCameraController((i=i||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}en.pan=function(i,o,s,_){ei[0]=-(o||0),ei[1]=-(s||0),ei[2]=-(_||0),this.recalcMatrix(i);var F=this.computedInverse;ee(F,F,ei),this.setMatrix(i,N(F,F))},en.translate=function(i,o,s,_){ei[0]=o||0,ei[1]=s||0,ei[2]=_||0,this.recalcMatrix(i);var F=this.computedMatrix;ee(F,F,ei),this.setMatrix(i,F)},en.setMatrix=function(i,o){if(!(i<this.lastT())){this._time.push(i);for(var s=0;s<16;++s)this._components.push(o[s])}},en.setDistance=function(i,o){this.computedRadius[0]=o},en.setDistanceLimits=function(i,o){var s=this._limits;s[0]=i,s[1]=o},en.getDistanceLimits=function(i){var o=this._limits;return i?(i[0]=o[0],i[1]=o[1],i):o}},3266:function(i,o,s){"use strict";i.exports=monotoneConvexHull2D;var _=s(417)[3];function monotoneConvexHull2D(i){var o=i.length;if(o<3){for(var s=Array(o),F=0;F<o;++F)s[F]=F;return 2===o&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:s}for(var N=Array(o),F=0;F<o;++F)N[F]=F;N.sort(function(o,s){return i[o][0]-i[s][0]||i[o][1]-i[s][1]});for(var j=[N[0],N[1]],Z=[N[0],N[1]],F=2;F<o;++F){for(var X=N[F],$=i[X],ee=j.length;ee>1&&0>=_(i[j[ee-2]],i[j[ee-1]],$);)ee-=1,j.pop();for(j.push(X),ee=Z.length;ee>1&&_(i[Z[ee-2]],i[Z[ee-1]],$)>=0;)ee-=1,Z.pop();Z.push(X)}for(var s=Array(Z.length+j.length-2),et=0,F=0,er=j.length;F<er;++F)s[et++]=j[F];for(var en=Z.length-2;en>0;--en)s[et++]=Z[en];return s}},6145:function(i,o,s){"use strict";i.exports=mouseListen;var _=s(4110);function mouseListen(i,o){o||(o=i,i=window);var s=0,F=0,N=0,j={shift:!1,alt:!1,control:!1,meta:!1},Z=!1;function updateMods(i){var o=!1;return"altKey"in i&&(o=o||i.altKey!==j.alt,j.alt=!!i.altKey),"shiftKey"in i&&(o=o||i.shiftKey!==j.shift,j.shift=!!i.shiftKey),"ctrlKey"in i&&(o=o||i.ctrlKey!==j.control,j.control=!!i.ctrlKey),"metaKey"in i&&(o=o||i.metaKey!==j.meta,j.meta=!!i.metaKey),o}function handleEvent(i,Z){var X=_.x(Z),$=_.y(Z);"buttons"in Z&&(i=0|Z.buttons),(i!==s||X!==F||$!==N||updateMods(Z))&&(s=0|i,F=X||0,N=$||0,o&&o(s,F,N,j))}function clearState(i){handleEvent(0,i)}function handleBlur(){(s||F||N||j.shift||j.alt||j.meta||j.control)&&(F=N=0,s=0,j.shift=j.alt=j.control=j.meta=!1,o&&o(0,0,0,j))}function handleMods(i){updateMods(i)&&o&&o(s,F,N,j)}function handleMouseMove(i){0===_.buttons(i)?handleEvent(0,i):handleEvent(s,i)}function handleMouseDown(i){handleEvent(s|_.buttons(i),i)}function handleMouseUp(i){handleEvent(s&~_.buttons(i),i)}function attachListeners(){Z||(Z=!0,i.addEventListener("mousemove",handleMouseMove),i.addEventListener("mousedown",handleMouseDown),i.addEventListener("mouseup",handleMouseUp),i.addEventListener("mouseleave",clearState),i.addEventListener("mouseenter",clearState),i.addEventListener("mouseout",clearState),i.addEventListener("mouseover",clearState),i.addEventListener("blur",handleBlur),i.addEventListener("keyup",handleMods),i.addEventListener("keydown",handleMods),i.addEventListener("keypress",handleMods),i!==window&&(window.addEventListener("blur",handleBlur),window.addEventListener("keyup",handleMods),window.addEventListener("keydown",handleMods),window.addEventListener("keypress",handleMods)))}function detachListeners(){Z&&(Z=!1,i.removeEventListener("mousemove",handleMouseMove),i.removeEventListener("mousedown",handleMouseDown),i.removeEventListener("mouseup",handleMouseUp),i.removeEventListener("mouseleave",clearState),i.removeEventListener("mouseenter",clearState),i.removeEventListener("mouseout",clearState),i.removeEventListener("mouseover",clearState),i.removeEventListener("blur",handleBlur),i.removeEventListener("keyup",handleMods),i.removeEventListener("keydown",handleMods),i.removeEventListener("keypress",handleMods),i!==window&&(window.removeEventListener("blur",handleBlur),window.removeEventListener("keyup",handleMods),window.removeEventListener("keydown",handleMods),window.removeEventListener("keypress",handleMods)))}attachListeners();var X={element:i};return Object.defineProperties(X,{enabled:{get:function(){return Z},set:function(i){i?attachListeners():detachListeners()},enumerable:!0},buttons:{get:function(){return s},enumerable:!0},x:{get:function(){return F},enumerable:!0},y:{get:function(){return N},enumerable:!0},mods:{get:function(){return j},enumerable:!0}}),X}},2565:function(i){var o={left:0,top:0};function mouseEventOffset(i,o,s){o=o||i.currentTarget||i.srcElement,Array.isArray(s)||(s=[0,0]);var _=i.clientX||0,F=i.clientY||0,N=getBoundingClientOffset(o);return s[0]=_-N.left,s[1]=F-N.top,s}function getBoundingClientOffset(i){return i===window||i===document||i===document.body?o:i.getBoundingClientRect()}i.exports=mouseEventOffset},4110:function(i,o){"use strict";function mouseButtons(i){if("object"==typeof i){if("buttons"in i)return i.buttons;if("which"in i){var o=i.which;if(2===o)return 4;if(3===o)return 2;if(o>0)return 1<<o-1}else if("button"in i){var o=i.button;if(1===o)return 4;if(2===o)return 2;if(o>=0)return 1<<o}}return 0}function mouseElement(i){return i.target||i.srcElement||window}function mouseRelativeX(i){if("object"==typeof i){if("offsetX"in i)return i.offsetX;var o=mouseElement(i).getBoundingClientRect();return i.clientX-o.left}return 0}function mouseRelativeY(i){if("object"==typeof i){if("offsetY"in i)return i.offsetY;var o=mouseElement(i).getBoundingClientRect();return i.clientY-o.top}return 0}o.buttons=mouseButtons,o.element=mouseElement,o.x=mouseRelativeX,o.y=mouseRelativeY},6475:function(i,o,s){"use strict";var _=s(14);function mouseWheelListen(i,o,s){"function"==typeof i&&(s=!!o,o=i,i=window);var F=_("ex",i),listener=function(i){s&&i.preventDefault();var _=i.deltaX||0,N=i.deltaY||0,j=i.deltaZ||0,Z=i.deltaMode,X=1;switch(Z){case 1:X=F;break;case 2:X=window.innerHeight}if(_*=X,N*=X,j*=X,_||N||j)return o(_,N,j,i)};return i.addEventListener("wheel",listener),listener}i.exports=mouseWheelListen},9284:function(i,o,s){"use strict";var _=s(5306);i.exports=createSurfaceExtractor;var F={"false,0,1":function(i,o,s,_,F){return function(N,j,Z,X){var $,ee=0|N.shape[0],et=0|N.shape[1],er=N.data,en=0|N.offset,ei=0|N.stride[0],eo=0|N.stride[1],es=en,el=0|-ei,ec=0,eu=0|-eo,ef=0,ed=-ei-eo|0,eh=0,ep=0|ei,eg=eo-ei*ee|0,em=0,ey=0,ev=0,ex=2*ee|0,e_=_(ex),ew=_(ex),eT=0,ek=0,eA=-1,eS=-1,eM=0,eC=0|-ee,eE=0|ee,eL=0,eP=-ee-1|0,eI=ee-1|0,eO=0,eD=0,eR=0;for(em=0;em<ee;++em)e_[eT++]=s(er[es],j,Z,X),es+=ep;if(es+=eg,et>0){if(ey=1,e_[eT++]=s(er[es],j,Z,X),es+=ep,ee>0)for(em=1,$=er[es],ek=e_[eT]=s($,j,Z,X),eM=e_[eT+eA],eL=e_[eT+eC],eO=e_[eT+eP],(ek!==eM||ek!==eL||ek!==eO)&&(i(em,ey,$,ec=er[es+el],ef=er[es+eu],eh=er[es+ed],ek,eM,eL,eO,j,Z,X),eD=ew[eT]=ev++),eT+=1,es+=ep,em=2;em<ee;++em)$=er[es],ek=e_[eT]=s($,j,Z,X),eM=e_[eT+eA],eL=e_[eT+eC],eO=e_[eT+eP],(ek!==eM||ek!==eL||ek!==eO)&&(i(em,ey,$,ec=er[es+el],ef=er[es+eu],eh=er[es+ed],ek,eM,eL,eO,j,Z,X),eD=ew[eT]=ev++,eO!==eM&&o(ew[eT+eA],eD,eh,ec,eO,eM,j,Z,X)),eT+=1,es+=ep;for(es+=eg,eT=0,eR=eA,eA=eS,eS=eR,eR=eC,eC=eE,eE=eR,eR=eP,eP=eI,eI=eR,ey=2;ey<et;++ey){if(e_[eT++]=s(er[es],j,Z,X),es+=ep,ee>0)for(em=1,$=er[es],ek=e_[eT]=s($,j,Z,X),eM=e_[eT+eA],eL=e_[eT+eC],eO=e_[eT+eP],(ek!==eM||ek!==eL||ek!==eO)&&(i(em,ey,$,ec=er[es+el],ef=er[es+eu],eh=er[es+ed],ek,eM,eL,eO,j,Z,X),eD=ew[eT]=ev++,eO!==eL&&o(ew[eT+eC],eD,ef,eh,eL,eO,j,Z,X)),eT+=1,es+=ep,em=2;em<ee;++em)$=er[es],ek=e_[eT]=s($,j,Z,X),eM=e_[eT+eA],eL=e_[eT+eC],eO=e_[eT+eP],(ek!==eM||ek!==eL||ek!==eO)&&(i(em,ey,$,ec=er[es+el],ef=er[es+eu],eh=er[es+ed],ek,eM,eL,eO,j,Z,X),eD=ew[eT]=ev++,eO!==eL&&o(ew[eT+eC],eD,ef,eh,eL,eO,j,Z,X),eO!==eM&&o(ew[eT+eA],eD,eh,ec,eO,eM,j,Z,X)),eT+=1,es+=ep;1&ey&&(eT=0),eR=eA,eA=eS,eS=eR,eR=eC,eC=eE,eE=eR,eR=eP,eP=eI,eI=eR,es+=eg}}F(ew),F(e_)}},"false,1,0":function(i,o,s,_,F){return function(N,j,Z,X){var $,ee=0|N.shape[0],et=0|N.shape[1],er=N.data,en=0|N.offset,ei=0|N.stride[0],eo=0|N.stride[1],es=en,el=0|-ei,ec=0,eu=0|-eo,ef=0,ed=-ei-eo|0,eh=0,ep=0|eo,eg=ei-eo*et|0,em=0,ey=0,ev=0,ex=2*et|0,e_=_(ex),ew=_(ex),eT=0,ek=0,eA=-1,eS=-1,eM=0,eC=0|-et,eE=0|et,eL=0,eP=-et-1|0,eI=et-1|0,eO=0,eD=0,eR=0;for(ey=0;ey<et;++ey)e_[eT++]=s(er[es],j,Z,X),es+=ep;if(es+=eg,ee>0){if(em=1,e_[eT++]=s(er[es],j,Z,X),es+=ep,et>0)for(ey=1,$=er[es],ek=e_[eT]=s($,j,Z,X),eL=e_[eT+eC],eM=e_[eT+eA],eO=e_[eT+eP],(ek!==eL||ek!==eM||ek!==eO)&&(i(em,ey,$,ec=er[es+el],ef=er[es+eu],eh=er[es+ed],ek,eL,eM,eO,j,Z,X),eD=ew[eT]=ev++),eT+=1,es+=ep,ey=2;ey<et;++ey)$=er[es],ek=e_[eT]=s($,j,Z,X),eL=e_[eT+eC],eM=e_[eT+eA],eO=e_[eT+eP],(ek!==eL||ek!==eM||ek!==eO)&&(i(em,ey,$,ec=er[es+el],ef=er[es+eu],eh=er[es+ed],ek,eL,eM,eO,j,Z,X),eD=ew[eT]=ev++,eO!==eM&&o(ew[eT+eA],eD,ef,eh,eM,eO,j,Z,X)),eT+=1,es+=ep;for(es+=eg,eT=0,eR=eC,eC=eE,eE=eR,eR=eA,eA=eS,eS=eR,eR=eP,eP=eI,eI=eR,em=2;em<ee;++em){if(e_[eT++]=s(er[es],j,Z,X),es+=ep,et>0)for(ey=1,$=er[es],ek=e_[eT]=s($,j,Z,X),eL=e_[eT+eC],eM=e_[eT+eA],eO=e_[eT+eP],(ek!==eL||ek!==eM||ek!==eO)&&(i(em,ey,$,ec=er[es+el],ef=er[es+eu],eh=er[es+ed],ek,eL,eM,eO,j,Z,X),eD=ew[eT]=ev++,eO!==eL&&o(ew[eT+eC],eD,eh,ec,eO,eL,j,Z,X)),eT+=1,es+=ep,ey=2;ey<et;++ey)$=er[es],ek=e_[eT]=s($,j,Z,X),eL=e_[eT+eC],eM=e_[eT+eA],eO=e_[eT+eP],(ek!==eL||ek!==eM||ek!==eO)&&(i(em,ey,$,ec=er[es+el],ef=er[es+eu],eh=er[es+ed],ek,eL,eM,eO,j,Z,X),eD=ew[eT]=ev++,eO!==eM&&o(ew[eT+eA],eD,ef,eh,eM,eO,j,Z,X),eO!==eL&&o(ew[eT+eC],eD,eh,ec,eO,eL,j,Z,X)),eT+=1,es+=ep;1&em&&(eT=0),eR=eC,eC=eE,eE=eR,eR=eA,eA=eS,eS=eR,eR=eP,eP=eI,eI=eR,es+=eg}}F(ew),F(e_)}}};function compileSurfaceProcedure(i,o,s,N,j,Z){return(0,F[[Z,j].join(",")])(i,o,s,_.mallocUint32,_.freeUint32)}function createSurfaceExtractor(i){function error(i){throw Error("ndarray-extract-contour: "+i)}"object"!=typeof i&&error("Must specify arguments");var o=i.order;Array.isArray(o)||error("Must specify order");var s=i.arrayArguments||1;s<1&&error("Must have at least one array argument");var _=i.scalarArguments||0;_<0&&error("Scalar arg count must be > 0"),"function"!=typeof i.vertex&&error("Must specify vertex creation function"),"function"!=typeof i.cell&&error("Must specify cell creation function"),"function"!=typeof i.phase&&error("Must specify phase function");for(var F=i.getters||[],N=Array(s),j=0;j<s;++j)F.indexOf(j)>=0?N[j]=!0:N[j]=!1;return compileSurfaceProcedure(i.vertex,i.cell,i.phase,_,o,N)}},9144:function(i,o,s){"use strict";var _=s(3094),F={zero:function(i,o,s,_){var F=i[0],N=s[0];_|=0;var j=0;for(j=0;j<F;++j)o[_]=0,_+=N},fdTemplate1:function(i,o,s,_,F,N,j){var Z=i[0],X=s[0],$=N[0],ee=-1*X;_|=0,j|=0;var et=0;for(et=0;et<Z;++et)F[j]=.5*(o[_+ee]-o[_+X]),_+=X,j+=$},fdTemplate2:function(i,o,s,_,F,N,j,Z,X,$){var ee=i[0],et=i[1],er=s[0],en=s[1],ei=N[0],eo=N[1],es=X[0],el=X[1],ec=-1*er,eu=-1*en;_|=0,j|=0,$|=0;var ef=0,ed=0,eh=er-et*en,ep=ei-et*eo,eg=es-et*el;for(ed=0;ed<ee;++ed){for(ef=0;ef<et;++ef)F[j]=.5*(o[_+ec]-o[_+er]),Z[$]=.5*(o[_+eu]-o[_+en]),_+=en,j+=eo,$+=el;_+=eh,j+=ep,$+=eg}}},N={cdiff:function(i){var o={};return function(s,_,F){var N=s.dtype,j=s.order,Z=_.dtype,X=_.order,$=F.dtype,ee=F.order,et=[N,j.join(),Z,X.join(),$,ee.join()].join(),er=o[et];return er||(o[et]=er=i([N,j,Z,X,$,ee])),er(s.shape.slice(0),s.data,s.stride,0|s.offset,_.data,_.stride,0|_.offset,F.data,F.stride,0|F.offset)}},zero:function(i){var o={};return function(s){var _=s.dtype,F=s.order,N=[_,F.join()].join(),j=o[N];return j||(o[N]=j=i([_,F])),j(s.shape.slice(0),s.data,s.stride,0|s.offset)}},fdTemplate1:function(i){var o={};return function(s,_){var F=s.dtype,N=s.order,j=_.dtype,Z=_.order,X=[F,N.join(),j,Z.join()].join(),$=o[X];return $||(o[X]=$=i([F,N,j,Z])),$(s.shape.slice(0),s.data,s.stride,0|s.offset,_.data,_.stride,0|_.offset)}},fdTemplate2:function(i){var o={};return function(s,_,F){var N=s.dtype,j=s.order,Z=_.dtype,X=_.order,$=F.dtype,ee=F.order,et=[N,j.join(),Z,X.join(),$,ee.join()].join(),er=o[et];return er||(o[et]=er=i([N,j,Z,X,$,ee])),er(s.shape.slice(0),s.data,s.stride,0|s.offset,_.data,_.stride,0|_.offset,F.data,F.stride,0|F.offset)}}};function createThunk(i){return(0,N[i.funcName])(compile.bind(void 0,i))}function compile(i){return F[i.funcName]}function cwiseCompiler(i){return createThunk({funcName:i.funcName})}var j={},Z={},X=cwiseCompiler({funcName:"cdiff"}),$=cwiseCompiler({funcName:"zero"});function generateTemplate(i){return i in j?j[i]:j[i]=cwiseCompiler({funcName:"fdTemplate"+i})}function CACHED_link(i,o,s,_){return function(i,F){var N=F.shape.slice();return N[0]>2&&N[1]>2&&_(F.pick(-1,-1).lo(1,1).hi(N[0]-2,N[1]-2),i.pick(-1,-1,0).lo(1,1).hi(N[0]-2,N[1]-2),i.pick(-1,-1,1).lo(1,1).hi(N[0]-2,N[1]-2)),N[1]>2&&(s(F.pick(0,-1).lo(1).hi(N[1]-2),i.pick(0,-1,1).lo(1).hi(N[1]-2)),o(i.pick(0,-1,0).lo(1).hi(N[1]-2))),N[1]>2&&(s(F.pick(N[0]-1,-1).lo(1).hi(N[1]-2),i.pick(N[0]-1,-1,1).lo(1).hi(N[1]-2)),o(i.pick(N[0]-1,-1,0).lo(1).hi(N[1]-2))),N[0]>2&&(s(F.pick(-1,0).lo(1).hi(N[0]-2),i.pick(-1,0,0).lo(1).hi(N[0]-2)),o(i.pick(-1,0,1).lo(1).hi(N[0]-2))),N[0]>2&&(s(F.pick(-1,N[1]-1).lo(1).hi(N[0]-2),i.pick(-1,N[1]-1,0).lo(1).hi(N[0]-2)),o(i.pick(-1,N[1]-1,1).lo(1).hi(N[0]-2))),i.set(0,0,0,0),i.set(0,0,1,0),i.set(N[0]-1,0,0,0),i.set(N[0]-1,0,1,0),i.set(0,N[1]-1,0,0),i.set(0,N[1]-1,1,0),i.set(N[0]-1,N[1]-1,0,0),i.set(N[0]-1,N[1]-1,1,0),i}}function generateGradient(i){var o=i.join(),s=Z[o];if(s)return s;for(var _=i.length,F=[X,$],N=1;N<=_;++N)F.push(generateTemplate(N));var s=CACHED_link.apply(void 0,F);return Z[o]=s,s}i.exports=function(i,o,s){return(Array.isArray(s)||(s="string"==typeof s?_(o.dimension,s):_(o.dimension,"clamp")),0===o.size)?i:0===o.dimension?(i.set(0),i):generateGradient(s)(i,o)}},3581:function(i){"use strict";function interp1d(i,o){var s=Math.floor(o),_=o-s,F=0<=s&&s<i.shape[0],N=0<=s+1&&s+1<i.shape[0];return(1-_)*(F?+i.get(s):0)+_*(N?+i.get(s+1):0)}function interp2d(i,o,s){var _=Math.floor(o),F=o-_,N=0<=_&&_<i.shape[0],j=0<=_+1&&_+1<i.shape[0],Z=Math.floor(s),X=s-Z,$=0<=Z&&Z<i.shape[1],ee=0<=Z+1&&Z+1<i.shape[1],et=N&&$?i.get(_,Z):0,er=N&&ee?i.get(_,Z+1):0;return(1-X)*((1-F)*et+F*(j&&$?i.get(_+1,Z):0))+X*((1-F)*er+F*(j&&ee?i.get(_+1,Z+1):0))}function interp3d(i,o,s,_){var F=Math.floor(o),N=o-F,j=0<=F&&F<i.shape[0],Z=0<=F+1&&F+1<i.shape[0],X=Math.floor(s),$=s-X,ee=0<=X&&X<i.shape[1],et=0<=X+1&&X+1<i.shape[1],er=Math.floor(_),en=_-er,ei=0<=er&&er<i.shape[2],eo=0<=er+1&&er+1<i.shape[2],es=j&&ee&&ei?i.get(F,X,er):0,el=j&&et&&ei?i.get(F,X+1,er):0,ec=Z&&ee&&ei?i.get(F+1,X,er):0,eu=Z&&et&&ei?i.get(F+1,X+1,er):0,ef=j&&ee&&eo?i.get(F,X,er+1):0,ed=j&&et&&eo?i.get(F,X+1,er+1):0;return(1-en)*((1-$)*((1-N)*es+N*ec)+$*((1-N)*el+N*eu))+en*((1-$)*((1-N)*ef+N*(Z&&ee&&eo?i.get(F+1,X,er+1):0))+$*((1-N)*ed+N*(Z&&et&&eo?i.get(F+1,X+1,er+1):0)))}function interpNd(i){var o,s,_=0|i.shape.length,F=Array(_),N=Array(_),j=Array(_),Z=Array(_);for(o=0;o<_;++o)s=+arguments[o+1],F[o]=Math.floor(s),N[o]=s-F[o],j[o]=0<=F[o]&&F[o]<i.shape[o],Z[o]=0<=F[o]+1&&F[o]+1<i.shape[o];var X,$,ee,et=0;i:for(o=0;o<1<<_;++o){for(X=0,$=1,ee=i.offset;X<_;++X)if(o&1<<X){if(!Z[X])continue i;$*=N[X],ee+=i.stride[X]*(F[X]+1)}else{if(!j[X])continue i;$*=1-N[X],ee+=i.stride[X]*F[X]}et+=$*i.data[ee]}return et}function interpolate(i,o,s,_){switch(i.shape.length){case 0:return 0;case 1:return interp1d(i,o);case 2:return interp2d(i,o,s);case 3:return interp3d(i,o,s,_);default:return interpNd.apply(void 0,arguments)}}i.exports=interpolate,i.exports.d1=interp1d,i.exports.d2=interp2d,i.exports.d3=interp3d},7498:function(i,o){"use strict";var s={"float64,2,1,0":function(){return function(i,o,s,_,F){var N=i[0],j=i[1],Z=i[2],X=s[0],$=s[1],ee=s[2];_|=0;var et=0,er=0,en=0,ei=$-Z*ee,eo=X-j*$;for(en=0;en<N;++en){for(er=0;er<j;++er){for(et=0;et<Z;++et)o[_]/=F,_+=ee;_+=ei}_+=eo}}},"uint8,2,0,1,float64,2,1,0":function(){return function(i,o,s,_,F,N,j,Z){for(var X=i[0],$=i[1],ee=i[2],et=s[0],er=s[1],en=s[2],ei=N[0],eo=N[1],es=N[2],el=_|=0,ec=j|=0,eu=0|i[0];eu>0;){eu<64?(X=eu,eu=0):(X=64,eu-=64);for(var ef=0|i[1];ef>0;){ef<64?($=ef,ef=0):($=64,ef-=64),_=el+eu*et+ef*er,j=ec+eu*ei+ef*eo;var ed=0,eh=0,ep=0,eg=et-ee*en,em=er-X*et,ey=ei-ee*es,ev=eo-X*ei;for(ep=0;ep<$;++ep){for(eh=0;eh<X;++eh){for(ed=0;ed<ee;++ed)o[_]=F[j]*Z,_+=en,j+=es;_+=eg,j+=ey}_+=em,j+=ev}}}}},"float32,1,0,float32,1,0":function(){return function(i,o,s,_,F,N,j){var Z=i[0],X=i[1],$=s[0],ee=s[1],et=N[0],er=N[1];_|=0,j|=0;var en=0,ei=0,eo=$-X*ee,es=et-X*er;for(ei=0;ei<Z;++ei){for(en=0;en<X;++en)o[_]=F[j],_+=ee,j+=er;_+=eo,j+=es}}},"float32,1,0,float32,0,1":function(){return function(i,o,s,_,F,N,j){for(var Z=i[0],X=i[1],$=s[0],ee=s[1],et=N[0],er=N[1],en=_|=0,ei=j|=0,eo=0|i[1];eo>0;){eo<64?(X=eo,eo=0):(X=64,eo-=64);for(var es=0|i[0];es>0;){es<64?(Z=es,es=0):(Z=64,es-=64),_=en+eo*ee+es*$,j=ei+eo*er+es*et;var el=0,ec=0,eu=$-X*ee,ef=et-X*er;for(ec=0;ec<Z;++ec){for(el=0;el<X;++el)o[_]=F[j],_+=ee,j+=er;_+=eu,j+=ef}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(i,o,s,_,F,N,j){for(var Z=i[0],X=i[1],$=i[2],ee=s[0],et=s[1],er=s[2],en=N[0],ei=N[1],eo=N[2],es=_|=0,el=j|=0,ec=0|i[2];ec>0;){ec<64?($=ec,ec=0):($=64,ec-=64);for(var eu=0|i[0];eu>0;){eu<64?(Z=eu,eu=0):(Z=64,eu-=64);for(var ef=0|i[1];ef>0;){ef<64?(X=ef,ef=0):(X=64,ef-=64),_=es+ec*er+eu*ee+ef*et,j=el+ec*eo+eu*en+ef*ei;var ed=0,eh=0,ep=0,eg=ee-$*er,em=et-Z*ee,ey=en-$*eo,ev=ei-Z*en;for(ep=0;ep<X;++ep){for(eh=0;eh<Z;++eh){for(ed=0;ed<$;++ed)o[_]=F[j],_+=er,j+=eo;_+=eg,j+=ey}_+=em,j+=ev}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(i,o,s,_,F,N,j){var Z=i[0],X=i[1],$=i[2],ee=s[0],et=s[1],er=s[2],en=N[0],ei=N[1],eo=N[2];_|=0,j|=0;var es=0,el=0,ec=0,eu=ee-$*er,ef=et-Z*ee,ed=en-$*eo,eh=ei-Z*en;for(ec=0;ec<X;++ec){for(el=0;el<Z;++el){for(es=0;es<$;++es)o[_]=F[j],_+=er,j+=eo;_+=eu,j+=ed}_+=ef,j+=eh}}}},compile=function(i,o){return(0,s[o.join(",")])()},_={mul:function(i){var o={};return function(s,_,F){var N=s.dtype,j=s.order,Z=_.dtype,X=_.order,$=F.dtype,ee=F.order,et=[N,j.join(),Z,X.join(),$,ee.join()].join(),er=o[et];return er||(o[et]=er=i([N,j,Z,X,$,ee])),er(s.shape.slice(0),s.data,s.stride,0|s.offset,_.data,_.stride,0|_.offset,F.data,F.stride,0|F.offset)}},muls:function(i){var o={};return function(s,_,F){var N=s.dtype,j=s.order,Z=_.dtype,X=_.order,$=[N,j.join(),Z,X.join()].join(),ee=o[$];return ee||(o[$]=ee=i([N,j,Z,X])),ee(s.shape.slice(0),s.data,s.stride,0|s.offset,_.data,_.stride,0|_.offset,F)}},mulseq:function(i){var o={};return function(s,_){var F=s.dtype,N=s.order,j=[F,N.join()].join(),Z=o[j];return Z||(o[j]=Z=i([F,N])),Z(s.shape.slice(0),s.data,s.stride,0|s.offset,_)}},div:function(i){var o={};return function(s,_,F){var N=s.dtype,j=s.order,Z=_.dtype,X=_.order,$=F.dtype,ee=F.order,et=[N,j.join(),Z,X.join(),$,ee.join()].join(),er=o[et];return er||(o[et]=er=i([N,j,Z,X,$,ee])),er(s.shape.slice(0),s.data,s.stride,0|s.offset,_.data,_.stride,0|_.offset,F.data,F.stride,0|F.offset)}},divs:function(i){var o={};return function(s,_,F){var N=s.dtype,j=s.order,Z=_.dtype,X=_.order,$=[N,j.join(),Z,X.join()].join(),ee=o[$];return ee||(o[$]=ee=i([N,j,Z,X])),ee(s.shape.slice(0),s.data,s.stride,0|s.offset,_.data,_.stride,0|_.offset,F)}},divseq:function(i){var o={};return function(s,_){var F=s.dtype,N=s.order,j=[F,N.join()].join(),Z=o[j];return Z||(o[j]=Z=i([F,N])),Z(s.shape.slice(0),s.data,s.stride,0|s.offset,_)}},assign:function(i){var o={};return function(s,_){var F=s.dtype,N=s.order,j=_.dtype,Z=_.order,X=[F,N.join(),j,Z.join()].join(),$=o[X];return $||(o[X]=$=i([F,N,j,Z])),$(s.shape.slice(0),s.data,s.stride,0|s.offset,_.data,_.stride,0|_.offset)}}};function createThunk(i){return(0,_[i.funcName])(compile.bind(void 0,i))}function makeOp(i){return createThunk({funcName:i.funcName})}var F={mul:"*",div:"/"};(function(){for(var i in F)o[i]=makeOp({funcName:i}),o[i+"s"]=makeOp({funcName:i+"s"}),o[i+"seq"]=makeOp({funcName:i+"seq"})})(),o.assign=makeOp({funcName:"assign"})},7382:function(i,o,s){"use strict";var _=s(5050),F=s(9262);i.exports=function(i,o){for(var s=[],N=i,j=1;Array.isArray(N);)s.push(N.length),j*=N.length,N=N[0];return 0===s.length?_():(o||(o=_(new Float64Array(j),s)),F(o,i),o)}},9262:function(i){"use strict";function CwiseOp(){return function(i,o,s,_,F){var N=i[0],j=i[1],Z=i[2],X=s[0],$=s[1],ee=s[2],et=[0,0,0];_|=0;var er=0,en=0,ei=0,eo=$-Z*ee,es=X-j*$;for(ei=0;ei<N;++ei){for(en=0;en<j;++en){for(er=0;er<Z;++er){var el,ec=F;for(el=0;el<et.length-1;++el)ec=ec[et[el]];o[_]=ec[et[et.length-1]],_+=ee,++et[2]}_+=eo,et[2]-=Z,++et[1]}_+=es,et[1]-=j,++et[0]}}}var compile=function(){return CwiseOp()};function thunk(i){var o={};return function(s,_){var F=s.dtype,N=s.order,j=[F,N.join()].join(),Z=o[j];return Z||(o[j]=Z=i([F,N])),Z(s.shape.slice(0),s.data,s.stride,0|s.offset,_)}}function createThunk(i){return thunk(compile.bind(void 0,i))}function compileCwise(i){return createThunk({funcName:i.funcName})}i.exports=compileCwise({funcName:"convert"})},8139:function(i,o,s){"use strict";var _=s(5306);function getMallocFree(i){return"uint32"===i?[_.mallocUint32,_.freeUint32]:null}var F={"uint32,1,0":function(i,o){return function(s,_,F,N,j,Z,X,$,ee,et,er){var en,ei,eo,es,el,ec,eu,ef,ed=s*j+N,eh=i($);for(en=s+1;en<=_;++en){for(ei=en,ed+=j,eo=ed,el=0,ec=ed,es=0;es<$;++es)eh[el++]=F[ec],ec+=ee;p:for(;ei-- >s;){for(es=0,el=0,ec=eo-j;es<$;++es){if((eu=F[ec])<(ef=eh[el]))break p;if(eu>ef)break;ec+=et,el+=er}for(es=0,el=eo,ec=eo-j;es<$;++es)F[el]=F[ec],el+=ee,ec+=ee;eo-=j}for(es=0,el=eo,ec=0;es<$;++es)F[el]=eh[ec++],el+=ee}o(eh)}}};function createInsertionSort(i,o){var s=getMallocFree(o),_=F[[o,i].join(",")];return s?_(s[0],s[1]):_()}var N={"uint32,1,0":function(i,o,s){return function ndarrayQuickSort1d0uint32(_,F,N,j,Z,X,$,ee,et,er,en){var ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg,em,ey,ev,ex,e_,ew,eT,ek,eA,eS,eM,eC,eE,eL,eP=(F-_+1)/6|0,eI=_+eP,eO=F-eP,eD=_+F>>1,eR=eD-eP,eB=eD+eP,eF=eI,ez=eR,eN=eD,ej=eB,eV=eO,eU=_+1,eH=F-1,eG=!0,eW=0,eZ=0,eY=0,eX=o(ee),eK=o(ee);for(ep=0,eg=Z*eF,em=Z*ez,eL=j;ep<ee;++ep){if(ef=eg+eL,ed=em+eL,(eY=N[ef]-N[ed])>0){eo=eF,eF=ez,ez=eo;break}if(eY<0)break;eL+=er}for(ep=0,eg=Z*ej,em=Z*eV,eL=j;ep<ee;++ep){if(ef=eg+eL,ed=em+eL,(eY=N[ef]-N[ed])>0){eo=ej,ej=eV,eV=eo;break}if(eY<0)break;eL+=er}for(ep=0,eg=Z*eF,em=Z*eN,eL=j;ep<ee;++ep){if(ef=eg+eL,ed=em+eL,(eY=N[ef]-N[ed])>0){eo=eF,eF=eN,eN=eo;break}if(eY<0)break;eL+=er}for(ep=0,eg=Z*ez,em=Z*eN,eL=j;ep<ee;++ep){if(ef=eg+eL,ed=em+eL,(eY=N[ef]-N[ed])>0){eo=ez,ez=eN,eN=eo;break}if(eY<0)break;eL+=er}for(ep=0,eg=Z*eF,em=Z*ej,eL=j;ep<ee;++ep){if(ef=eg+eL,ed=em+eL,(eY=N[ef]-N[ed])>0){eo=eF,eF=ej,ej=eo;break}if(eY<0)break;eL+=er}for(ep=0,eg=Z*eN,em=Z*ej,eL=j;ep<ee;++ep){if(ef=eg+eL,ed=em+eL,(eY=N[ef]-N[ed])>0){eo=eN,eN=ej,ej=eo;break}if(eY<0)break;eL+=er}for(ep=0,eg=Z*ez,em=Z*eV,eL=j;ep<ee;++ep){if(ef=eg+eL,ed=em+eL,(eY=N[ef]-N[ed])>0){eo=ez,ez=eV,eV=eo;break}if(eY<0)break;eL+=er}for(ep=0,eg=Z*ez,em=Z*eN,eL=j;ep<ee;++ep){if(ef=eg+eL,ed=em+eL,(eY=N[ef]-N[ed])>0){eo=ez,ez=eN,eN=eo;break}if(eY<0)break;eL+=er}for(ep=0,eg=Z*ej,em=Z*eV,eL=j;ep<ee;++ep){if(ef=eg+eL,ed=em+eL,(eY=N[ef]-N[ed])>0){eo=ej,ej=eV,eV=eo;break}if(eY<0)break;eL+=er}for(ep=0,eg=Z*eF,em=Z*ez,ey=Z*eN,ev=Z*ej,ex=Z*eV,e_=Z*eI,ew=Z*eD,eT=Z*eO,eE=0,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,eh=ey+eL,ek=ev+eL,eA=ex+eL,eS=e_+eL,eM=ew+eL,eC=eT+eL,eX[eE]=N[ed],eK[eE]=N[ek],eG=eG&&eX[eE]===eK[eE],es=N[ef],el=N[eh],ec=N[eA],N[eS]=es,N[eM]=el,N[eC]=ec,++eE,eL+=et;for(ep=0,eg=Z*eR,em=Z*_,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,N[ef]=N[ed],eL+=et;for(ep=0,eg=Z*eB,em=Z*F,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,N[ef]=N[ed],eL+=et;if(eG)for(eu=eU;eu<=eH;++eu){for(ep=0,ef=j+eu*Z,eE=0;ep<ee&&0==(eY=N[ef]-eX[eE]);++ep)eE+=en,ef+=er;if(0!==eY){if(eY<0){if(eu!==eU)for(ep=0,eg=Z*eu,em=Z*eU,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,ei=N[ef],N[ef]=N[ed],N[ed]=ei,eL+=et;++eU}else for(;;){for(ep=0,ef=j+eH*Z,eE=0;ep<ee&&0==(eY=N[ef]-eX[eE]);++ep)eE+=en,ef+=er;if(eY>0)eH--;else if(eY<0){for(ep=0,eg=Z*eu,em=Z*eU,ey=Z*eH,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,eh=ey+eL,ei=N[ef],N[ef]=N[ed],N[ed]=N[eh],N[eh]=ei,eL+=et;++eU,--eH;break}else{for(ep=0,eg=Z*eu,em=Z*eH,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,ei=N[ef],N[ef]=N[ed],N[ed]=ei,eL+=et;--eH;break}}}}else for(eu=eU;eu<=eH;++eu){for(ep=0,ef=j+eu*Z,eE=0;ep<ee&&0==(eW=N[ef]-eX[eE]);++ep)eE+=en,ef+=er;if(eW<0){if(eu!==eU)for(ep=0,eg=Z*eu,em=Z*eU,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,ei=N[ef],N[ef]=N[ed],N[ed]=ei,eL+=et;++eU}else{for(ep=0,ef=j+eu*Z,eE=0;ep<ee&&0==(eZ=N[ef]-eK[eE]);++ep)eE+=en,ef+=er;if(eZ>0)for(;;){for(ep=0,ef=j+eH*Z,eE=0;ep<ee&&0==(eY=N[ef]-eK[eE]);++ep)eE+=en,ef+=er;if(eY>0){if(--eH<eu)break;continue}for(ep=0,ef=j+eH*Z,eE=0;ep<ee&&0==(eY=N[ef]-eX[eE]);++ep)eE+=en,ef+=er;if(eY<0){for(ep=0,eg=Z*eu,em=Z*eU,ey=Z*eH,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,eh=ey+eL,ei=N[ef],N[ef]=N[ed],N[ed]=N[eh],N[eh]=ei,eL+=et;++eU,--eH}else{for(ep=0,eg=Z*eu,em=Z*eH,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,ei=N[ef],N[ef]=N[ed],N[ed]=ei,eL+=et;--eH}break}}}for(ep=0,eg=Z*_,em=Z*(eU-1),eE=0,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,N[ef]=N[ed],N[ed]=eX[eE],++eE,eL+=et;for(ep=0,eg=Z*F,em=Z*(eH+1),eE=0,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,N[ef]=N[ed],N[ed]=eK[eE],++eE,eL+=et;if(eU-2-_<=32?i(_,eU-2,N,j,Z,X,$,ee,et,er,en):ndarrayQuickSort1d0uint32(_,eU-2,N,j,Z,X,$,ee,et,er,en),F-(eH+2)<=32?i(eH+2,F,N,j,Z,X,$,ee,et,er,en):ndarrayQuickSort1d0uint32(eH+2,F,N,j,Z,X,$,ee,et,er,en),eG){s(eX),s(eK);return}if(eU<eI&&eH>eO){g:for(;;){for(ep=0,ef=j+eU*Z,eE=0,eL=j;ep<ee;++ep){if(N[ef]!==eX[eE])break g;++eE,ef+=et}++eU}m:for(;;){for(ep=0,ef=j+eH*Z,eE=0,eL=j;ep<ee;++ep){if(N[ef]!==eK[eE])break m;++eE,ef+=et}--eH}for(eu=eU;eu<=eH;++eu){for(ep=0,ef=j+eu*Z,eE=0;ep<ee&&0==(eW=N[ef]-eX[eE]);++ep)eE+=en,ef+=er;if(0===eW){if(eu!==eU)for(ep=0,eg=Z*eu,em=Z*eU,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,ei=N[ef],N[ef]=N[ed],N[ed]=ei,eL+=et;++eU}else{for(ep=0,ef=j+eu*Z,eE=0;ep<ee&&0==(eZ=N[ef]-eK[eE]);++ep)eE+=en,ef+=er;if(0===eZ)for(;;){for(ep=0,ef=j+eH*Z,eE=0;ep<ee&&0==(eY=N[ef]-eK[eE]);++ep)eE+=en,ef+=er;if(0===eY){if(--eH<eu)break;continue}for(ep=0,ef=j+eH*Z,eE=0;ep<ee&&0==(eY=N[ef]-eX[eE]);++ep)eE+=en,ef+=er;if(eY<0){for(ep=0,eg=Z*eu,em=Z*eU,ey=Z*eH,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,eh=ey+eL,ei=N[ef],N[ef]=N[ed],N[ed]=N[eh],N[eh]=ei,eL+=et;++eU,--eH}else{for(ep=0,eg=Z*eu,em=Z*eH,eL=j;ep<ee;++ep)ef=eg+eL,ed=em+eL,ei=N[ef],N[ef]=N[ed],N[ed]=ei,eL+=et;--eH}break}}}}s(eX),s(eK),eH-eU<=32?i(eU,eH,N,j,Z,X,$,ee,et,er,en):ndarrayQuickSort1d0uint32(eU,eH,N,j,Z,X,$,ee,et,er,en)}}};function createQuickSort(i,o,s){var _=getMallocFree(o),F=N[[o,i].join(",")];return i.length>1&&_?F(s,_[0],_[1]):F(s)}var j={"uint32,1,0":function(i,o){return function(s){var _=s.data,F=0|s.offset,N=s.shape,j=s.stride,Z=0|j[0],X=0|N[0],$=0|j[1],ee=0|N[1];X<=32?i(0,X-1,_,F,Z,$,X,ee,$,$,1):o(0,X-1,_,F,Z,$,X,ee,$,$,1)}}};function compileSort(i,o){var s=j[[o,i].join(",")],_=createInsertionSort(i,o),F=createQuickSort(i,o,_);return s(_,F)}i.exports=compileSort},8729:function(i,o,s){"use strict";var _=s(8139),F={};function sort(i){var o=i.order,s=i.dtype,N=[o,s].join(":"),j=F[N];return j||(F[N]=j=_(o,s)),j(i),i}i.exports=sort},5050:function(i,o,s){var _=s(4780),F="undefined"!=typeof Float64Array;function compare1st(i,o){return i[0]-o[0]}function order(){var i,o=this.stride,s=Array(o.length);for(i=0;i<s.length;++i)s[i]=[Math.abs(o[i]),i];s.sort(compare1st);var _=Array(s.length);for(i=0;i<_.length;++i)_[i]=s[i][1];return _}var N={T:function(i){function View(i){this.data=i}var o=View.prototype;return o.dtype=i,o.index=function(){return -1},o.size=0,o.dimension=-1,o.shape=o.stride=o.order=[],o.lo=o.hi=o.transpose=o.step=function(){return new View(this.data)},o.get=o.set=function(){},o.pick=function(){return null},function(i){return new View(i)}},0:function(i,o){function View(i,o){this.data=i,this.offset=o}var s=View.prototype;return s.dtype=i,s.index=function(){return this.offset},s.dimension=0,s.size=1,s.shape=s.stride=s.order=[],s.lo=s.hi=s.transpose=s.step=function(){return new View(this.data,this.offset)},s.pick=function(){return o(this.data)},s.valueOf=s.get=function(){return"generic"===i?this.data.get(this.offset):this.data[this.offset]},s.set=function(o){return"generic"===i?this.data.set(this.offset,o):this.data[this.offset]=o},function(i,o,s,_){return new View(i,_)}},1:function(i,o,s){function View(i,o,s,_){this.data=i,this.shape=[o],this.stride=[s],this.offset=0|_}var _=View.prototype;return _.dtype=i,_.dimension=1,Object.defineProperty(_,"size",{get:function(){return this.shape[0]}}),_.order=[0],_.set=function(o,s){return"generic"===i?this.data.set(this.offset+this.stride[0]*o,s):this.data[this.offset+this.stride[0]*o]=s},_.get=function(o){return"generic"===i?this.data.get(this.offset+this.stride[0]*o):this.data[this.offset+this.stride[0]*o]},_.index=function(i){return this.offset+this.stride[0]*i},_.hi=function(i){return new View(this.data,"number"!=typeof i||i<0?this.shape[0]:0|i,this.stride[0],this.offset)},_.lo=function(i){var o=this.offset,s=0,_=this.shape[0],F=this.stride[0];return"number"==typeof i&&i>=0&&(o+=F*(s=0|i),_-=s),new View(this.data,_,F,o)},_.step=function(i){var o=this.shape[0],s=this.stride[0],_=this.offset,F=0,N=Math.ceil;return"number"==typeof i&&((F=0|i)<0?(_+=s*(o-1),o=N(-o/F)):o=N(o/F),s*=F),new View(this.data,o,s,_)},_.transpose=function(i){i=void 0===i?0:0|i;var o=this.shape,s=this.stride;return new View(this.data,o[i],s[i],this.offset)},_.pick=function(i){var s=[],_=[],F=this.offset;return"number"==typeof i&&i>=0?F=F+this.stride[0]*i|0:(s.push(this.shape[0]),_.push(this.stride[0])),(0,o[s.length+1])(this.data,s,_,F)},function(i,o,s,_){return new View(i,o[0],s[0],_)}},2:function(i,o,s){function View(i,o,s,_,F,N){this.data=i,this.shape=[o,s],this.stride=[_,F],this.offset=0|N}var _=View.prototype;return _.dtype=i,_.dimension=2,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(_,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),_.set=function(o,s,_){return"generic"===i?this.data.set(this.offset+this.stride[0]*o+this.stride[1]*s,_):this.data[this.offset+this.stride[0]*o+this.stride[1]*s]=_},_.get=function(o,s){return"generic"===i?this.data.get(this.offset+this.stride[0]*o+this.stride[1]*s):this.data[this.offset+this.stride[0]*o+this.stride[1]*s]},_.index=function(i,o){return this.offset+this.stride[0]*i+this.stride[1]*o},_.hi=function(i,o){return new View(this.data,"number"!=typeof i||i<0?this.shape[0]:0|i,"number"!=typeof o||o<0?this.shape[1]:0|o,this.stride[0],this.stride[1],this.offset)},_.lo=function(i,o){var s=this.offset,_=0,F=this.shape[0],N=this.shape[1],j=this.stride[0],Z=this.stride[1];return"number"==typeof i&&i>=0&&(s+=j*(_=0|i),F-=_),"number"==typeof o&&o>=0&&(s+=Z*(_=0|o),N-=_),new View(this.data,F,N,j,Z,s)},_.step=function(i,o){var s=this.shape[0],_=this.shape[1],F=this.stride[0],N=this.stride[1],j=this.offset,Z=0,X=Math.ceil;return"number"==typeof i&&((Z=0|i)<0?(j+=F*(s-1),s=X(-s/Z)):s=X(s/Z),F*=Z),"number"==typeof o&&((Z=0|o)<0?(j+=N*(_-1),_=X(-_/Z)):_=X(_/Z),N*=Z),new View(this.data,s,_,F,N,j)},_.transpose=function(i,o){i=void 0===i?0:0|i,o=void 0===o?1:0|o;var s=this.shape,_=this.stride;return new View(this.data,s[i],s[o],_[i],_[o],this.offset)},_.pick=function(i,s){var _=[],F=[],N=this.offset;return"number"==typeof i&&i>=0?N=N+this.stride[0]*i|0:(_.push(this.shape[0]),F.push(this.stride[0])),"number"==typeof s&&s>=0?N=N+this.stride[1]*s|0:(_.push(this.shape[1]),F.push(this.stride[1])),(0,o[_.length+1])(this.data,_,F,N)},function(i,o,s,_){return new View(i,o[0],o[1],s[0],s[1],_)}},3:function(i,o,s){function View(i,o,s,_,F,N,j,Z){this.data=i,this.shape=[o,s,_],this.stride=[F,N,j],this.offset=0|Z}var _=View.prototype;return _.dtype=i,_.dimension=3,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(_,"order",{get:function(){var i=Math.abs(this.stride[0]),o=Math.abs(this.stride[1]),s=Math.abs(this.stride[2]);return i>o?o>s?[2,1,0]:i>s?[1,2,0]:[1,0,2]:i>s?[2,0,1]:s>o?[0,1,2]:[0,2,1]}}),_.set=function(o,s,_,F){return"generic"===i?this.data.set(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_,F):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_]=F},_.get=function(o,s,_){return"generic"===i?this.data.get(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_]},_.index=function(i,o,s){return this.offset+this.stride[0]*i+this.stride[1]*o+this.stride[2]*s},_.hi=function(i,o,s){return new View(this.data,"number"!=typeof i||i<0?this.shape[0]:0|i,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof s||s<0?this.shape[2]:0|s,this.stride[0],this.stride[1],this.stride[2],this.offset)},_.lo=function(i,o,s){var _=this.offset,F=0,N=this.shape[0],j=this.shape[1],Z=this.shape[2],X=this.stride[0],$=this.stride[1],ee=this.stride[2];return"number"==typeof i&&i>=0&&(_+=X*(F=0|i),N-=F),"number"==typeof o&&o>=0&&(_+=$*(F=0|o),j-=F),"number"==typeof s&&s>=0&&(_+=ee*(F=0|s),Z-=F),new View(this.data,N,j,Z,X,$,ee,_)},_.step=function(i,o,s){var _=this.shape[0],F=this.shape[1],N=this.shape[2],j=this.stride[0],Z=this.stride[1],X=this.stride[2],$=this.offset,ee=0,et=Math.ceil;return"number"==typeof i&&((ee=0|i)<0?($+=j*(_-1),_=et(-_/ee)):_=et(_/ee),j*=ee),"number"==typeof o&&((ee=0|o)<0?($+=Z*(F-1),F=et(-F/ee)):F=et(F/ee),Z*=ee),"number"==typeof s&&((ee=0|s)<0?($+=X*(N-1),N=et(-N/ee)):N=et(N/ee),X*=ee),new View(this.data,_,F,N,j,Z,X,$)},_.transpose=function(i,o,s){i=void 0===i?0:0|i,o=void 0===o?1:0|o,s=void 0===s?2:0|s;var _=this.shape,F=this.stride;return new View(this.data,_[i],_[o],_[s],F[i],F[o],F[s],this.offset)},_.pick=function(i,s,_){var F=[],N=[],j=this.offset;return"number"==typeof i&&i>=0?j=j+this.stride[0]*i|0:(F.push(this.shape[0]),N.push(this.stride[0])),"number"==typeof s&&s>=0?j=j+this.stride[1]*s|0:(F.push(this.shape[1]),N.push(this.stride[1])),"number"==typeof _&&_>=0?j=j+this.stride[2]*_|0:(F.push(this.shape[2]),N.push(this.stride[2])),(0,o[F.length+1])(this.data,F,N,j)},function(i,o,s,_){return new View(i,o[0],o[1],o[2],s[0],s[1],s[2],_)}},4:function(i,o,s){function View(i,o,s,_,F,N,j,Z,X,$){this.data=i,this.shape=[o,s,_,F],this.stride=[N,j,Z,X],this.offset=0|$}var _=View.prototype;return _.dtype=i,_.dimension=4,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(_,"order",{get:s}),_.set=function(o,s,_,F,N){return"generic"===i?this.data.set(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_+this.stride[3]*F,N):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_+this.stride[3]*F]=N},_.get=function(o,s,_,F){return"generic"===i?this.data.get(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_+this.stride[3]*F):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_+this.stride[3]*F]},_.index=function(i,o,s,_){return this.offset+this.stride[0]*i+this.stride[1]*o+this.stride[2]*s+this.stride[3]*_},_.hi=function(i,o,s,_){return new View(this.data,"number"!=typeof i||i<0?this.shape[0]:0|i,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof s||s<0?this.shape[2]:0|s,"number"!=typeof _||_<0?this.shape[3]:0|_,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},_.lo=function(i,o,s,_){var F=this.offset,N=0,j=this.shape[0],Z=this.shape[1],X=this.shape[2],$=this.shape[3],ee=this.stride[0],et=this.stride[1],er=this.stride[2],en=this.stride[3];return"number"==typeof i&&i>=0&&(F+=ee*(N=0|i),j-=N),"number"==typeof o&&o>=0&&(F+=et*(N=0|o),Z-=N),"number"==typeof s&&s>=0&&(F+=er*(N=0|s),X-=N),"number"==typeof _&&_>=0&&(F+=en*(N=0|_),$-=N),new View(this.data,j,Z,X,$,ee,et,er,en,F)},_.step=function(i,o,s,_){var F=this.shape[0],N=this.shape[1],j=this.shape[2],Z=this.shape[3],X=this.stride[0],$=this.stride[1],ee=this.stride[2],et=this.stride[3],er=this.offset,en=0,ei=Math.ceil;return"number"==typeof i&&((en=0|i)<0?(er+=X*(F-1),F=ei(-F/en)):F=ei(F/en),X*=en),"number"==typeof o&&((en=0|o)<0?(er+=$*(N-1),N=ei(-N/en)):N=ei(N/en),$*=en),"number"==typeof s&&((en=0|s)<0?(er+=ee*(j-1),j=ei(-j/en)):j=ei(j/en),ee*=en),"number"==typeof _&&((en=0|_)<0?(er+=et*(Z-1),Z=ei(-Z/en)):Z=ei(Z/en),et*=en),new View(this.data,F,N,j,Z,X,$,ee,et,er)},_.transpose=function(i,o,s,_){i=void 0===i?0:0|i,o=void 0===o?1:0|o,s=void 0===s?2:0|s,_=void 0===_?3:0|_;var F=this.shape,N=this.stride;return new View(this.data,F[i],F[o],F[s],F[_],N[i],N[o],N[s],N[_],this.offset)},_.pick=function(i,s,_,F){var N=[],j=[],Z=this.offset;return"number"==typeof i&&i>=0?Z=Z+this.stride[0]*i|0:(N.push(this.shape[0]),j.push(this.stride[0])),"number"==typeof s&&s>=0?Z=Z+this.stride[1]*s|0:(N.push(this.shape[1]),j.push(this.stride[1])),"number"==typeof _&&_>=0?Z=Z+this.stride[2]*_|0:(N.push(this.shape[2]),j.push(this.stride[2])),"number"==typeof F&&F>=0?Z=Z+this.stride[3]*F|0:(N.push(this.shape[3]),j.push(this.stride[3])),(0,o[N.length+1])(this.data,N,j,Z)},function(i,o,s,_){return new View(i,o[0],o[1],o[2],o[3],s[0],s[1],s[2],s[3],_)}},5:function(i,o,s){function View(i,o,s,_,F,N,j,Z,X,$,ee,et){this.data=i,this.shape=[o,s,_,F,N],this.stride=[j,Z,X,$,ee],this.offset=0|et}var _=View.prototype;return _.dtype=i,_.dimension=5,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(_,"order",{get:s}),_.set=function(o,s,_,F,N,j){return"generic"===i?this.data.set(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_+this.stride[3]*F+this.stride[4]*N,j):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_+this.stride[3]*F+this.stride[4]*N]=j},_.get=function(o,s,_,F,N){return"generic"===i?this.data.get(this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_+this.stride[3]*F+this.stride[4]*N):this.data[this.offset+this.stride[0]*o+this.stride[1]*s+this.stride[2]*_+this.stride[3]*F+this.stride[4]*N]},_.index=function(i,o,s,_,F){return this.offset+this.stride[0]*i+this.stride[1]*o+this.stride[2]*s+this.stride[3]*_+this.stride[4]*F},_.hi=function(i,o,s,_,F){return new View(this.data,"number"!=typeof i||i<0?this.shape[0]:0|i,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof s||s<0?this.shape[2]:0|s,"number"!=typeof _||_<0?this.shape[3]:0|_,"number"!=typeof F||F<0?this.shape[4]:0|F,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},_.lo=function(i,o,s,_,F){var N=this.offset,j=0,Z=this.shape[0],X=this.shape[1],$=this.shape[2],ee=this.shape[3],et=this.shape[4],er=this.stride[0],en=this.stride[1],ei=this.stride[2],eo=this.stride[3],es=this.stride[4];return"number"==typeof i&&i>=0&&(N+=er*(j=0|i),Z-=j),"number"==typeof o&&o>=0&&(N+=en*(j=0|o),X-=j),"number"==typeof s&&s>=0&&(N+=ei*(j=0|s),$-=j),"number"==typeof _&&_>=0&&(N+=eo*(j=0|_),ee-=j),"number"==typeof F&&F>=0&&(N+=es*(j=0|F),et-=j),new View(this.data,Z,X,$,ee,et,er,en,ei,eo,es,N)},_.step=function(i,o,s,_,F){var N=this.shape[0],j=this.shape[1],Z=this.shape[2],X=this.shape[3],$=this.shape[4],ee=this.stride[0],et=this.stride[1],er=this.stride[2],en=this.stride[3],ei=this.stride[4],eo=this.offset,es=0,el=Math.ceil;return"number"==typeof i&&((es=0|i)<0?(eo+=ee*(N-1),N=el(-N/es)):N=el(N/es),ee*=es),"number"==typeof o&&((es=0|o)<0?(eo+=et*(j-1),j=el(-j/es)):j=el(j/es),et*=es),"number"==typeof s&&((es=0|s)<0?(eo+=er*(Z-1),Z=el(-Z/es)):Z=el(Z/es),er*=es),"number"==typeof _&&((es=0|_)<0?(eo+=en*(X-1),X=el(-X/es)):X=el(X/es),en*=es),"number"==typeof F&&((es=0|F)<0?(eo+=ei*($-1),$=el(-$/es)):$=el($/es),ei*=es),new View(this.data,N,j,Z,X,$,ee,et,er,en,ei,eo)},_.transpose=function(i,o,s,_,F){i=void 0===i?0:0|i,o=void 0===o?1:0|o,s=void 0===s?2:0|s,_=void 0===_?3:0|_,F=void 0===F?4:0|F;var N=this.shape,j=this.stride;return new View(this.data,N[i],N[o],N[s],N[_],N[F],j[i],j[o],j[s],j[_],j[F],this.offset)},_.pick=function(i,s,_,F,N){var j=[],Z=[],X=this.offset;return"number"==typeof i&&i>=0?X=X+this.stride[0]*i|0:(j.push(this.shape[0]),Z.push(this.stride[0])),"number"==typeof s&&s>=0?X=X+this.stride[1]*s|0:(j.push(this.shape[1]),Z.push(this.stride[1])),"number"==typeof _&&_>=0?X=X+this.stride[2]*_|0:(j.push(this.shape[2]),Z.push(this.stride[2])),"number"==typeof F&&F>=0?X=X+this.stride[3]*F|0:(j.push(this.shape[3]),Z.push(this.stride[3])),"number"==typeof N&&N>=0?X=X+this.stride[4]*N|0:(j.push(this.shape[4]),Z.push(this.stride[4])),(0,o[j.length+1])(this.data,j,Z,X)},function(i,o,s,_){return new View(i,o[0],o[1],o[2],o[3],o[4],s[0],s[1],s[2],s[3],s[4],_)}}};function compileConstructor(i,o){var s=N[-1===o?"T":String(o)];return -1===o?s(i):0===o?s(i,j[i][0]):s(i,j[i],order)}function arrayDType(i){if(_(i))return"buffer";if(F)switch(Object.prototype.toString.call(i)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(i)?"array":"generic"}var j={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function wrappedNDArrayCtor(i,o,s,_){if(void 0===i){var F=j.array[0];return F([])}"number"==typeof i&&(i=[i]),void 0===o&&(o=[i.length]);var N=o.length;if(void 0===s){s=Array(N);for(var Z=N-1,X=1;Z>=0;--Z)s[Z]=X,X*=o[Z]}if(void 0===_){_=0;for(var Z=0;Z<N;++Z)s[Z]<0&&(_-=(o[Z]-1)*s[Z])}for(var $=arrayDType(i),ee=j[$];ee.length<=N+1;)ee.push(compileConstructor($,ee.length-1));var F=ee[N+1];return F(i,o,s,_)}i.exports=wrappedNDArrayCtor},8551:function(i,o,s){"use strict";var _=s(8362);function nextafter(i,o){if(isNaN(i)||isNaN(o))return NaN;if(i===o)return i;if(0===i)return o<0?-.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005:5e-324;var s=_.hi(i),F=_.lo(i);return o>i==i>0?4294967295===F?(s+=1,F=0):F+=1:0===F?(F=4294967295,s-=1):F-=1,_.pack(F,s)}i.exports=nextafter},115:function(i,o){o.vertexNormals=function(i,o,s){for(var _=o.length,F=Array(_),N=void 0===s?1e-6:s,j=0;j<_;++j)F[j]=[0,0,0];for(var j=0;j<i.length;++j)for(var Z=i[j],X=0,$=Z[Z.length-1],ee=Z[0],et=0;et<Z.length;++et){X=$,$=ee,ee=Z[(et+1)%Z.length];for(var er=o[X],en=o[$],ei=o[ee],eo=[,,,],es=0,el=[,,,],ec=0,eu=0;eu<3;++eu)eo[eu]=er[eu]-en[eu],es+=eo[eu]*eo[eu],el[eu]=ei[eu]-en[eu],ec+=el[eu]*el[eu];if(es*ec>N)for(var ef=F[$],ed=1/Math.sqrt(es*ec),eu=0;eu<3;++eu){var eh=(eu+1)%3,ep=(eu+2)%3;ef[eu]+=ed*(el[eh]*eo[ep]-el[ep]*eo[eh])}}for(var j=0;j<_;++j){for(var ef=F[j],eg=0,eu=0;eu<3;++eu)eg+=ef[eu]*ef[eu];if(eg>N)for(var ed=1/Math.sqrt(eg),eu=0;eu<3;++eu)ef[eu]*=ed;else for(var eu=0;eu<3;++eu)ef[eu]=0}return F},o.faceNormals=function(i,o,s){for(var _=i.length,F=Array(_),N=void 0===s?1e-6:s,j=0;j<_;++j){for(var Z=i[j],X=[,,,],$=0;$<3;++$)X[$]=o[Z[$]];for(var ee=[,,,],et=[,,,],$=0;$<3;++$)ee[$]=X[1][$]-X[0][$],et[$]=X[2][$]-X[0][$];for(var er=[,,,],en=0,$=0;$<3;++$){var ei=($+1)%3,eo=($+2)%3;er[$]=ee[ei]*et[eo]-ee[eo]*et[ei],en+=er[$]*er[$]}en=en>N?1/Math.sqrt(en):0;for(var $=0;$<3;++$)er[$]*=en;F[j]=er}return F}},567:function(i){"use strict";function quatFromFrame(i,o,s,_,F,N,j,Z,X,$){var ee=o+N+$;if(et>0){var et=Math.sqrt(ee+1);i[0]=.5*(j-X)/et,i[1]=.5*(Z-_)/et,i[2]=.5*(s-N)/et,i[3]=.5*et}else{var er=Math.max(o,N,$),et=Math.sqrt(2*er-ee+1);o>=er?(i[0]=.5*et,i[1]=.5*(F+s)/et,i[2]=.5*(Z+_)/et,i[3]=.5*(j-X)/et):N>=er?(i[0]=.5*(s+F)/et,i[1]=.5*et,i[2]=.5*(X+j)/et,i[3]=.5*(Z-_)/et):(i[0]=.5*(_+Z)/et,i[1]=.5*(j+X)/et,i[2]=.5*et,i[3]=.5*(s-F)/et)}return i}i.exports=quatFromFrame},7774:function(i,o,s){"use strict";i.exports=createOrbitController;var _=s(8444),F=s(3012),N=s(5950),j=s(7437),Z=s(567);function len3(i,o,s){return Math.sqrt(Math.pow(i,2)+Math.pow(o,2)+Math.pow(s,2))}function len4(i,o,s,_){return Math.sqrt(Math.pow(i,2)+Math.pow(o,2)+Math.pow(s,2)+Math.pow(_,2))}function normalize4(i,o){var s=o[0],_=o[1],F=o[2],N=o[3],j=len4(s,_,F,N);j>1e-6?(i[0]=s/j,i[1]=_/j,i[2]=F/j,i[3]=N/j):(i[0]=i[1]=i[2]=0,i[3]=1)}function OrbitCameraController(i,o,s){this.radius=_([s]),this.center=_(o),this.rotation=_(i),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var X=OrbitCameraController.prototype;function createOrbitController(i){var o=(i=i||{}).center||[0,0,0],s=i.rotation||[0,0,0,1],_=i.radius||1;o=[].slice.call(o,0,3),normalize4(s=[].slice.call(s,0,4),s);var F=new OrbitCameraController(s,o,Math.log(_));return F.setDistanceLimits(i.zoomMin,i.zoomMax),("eye"in i||"up"in i)&&F.lookAt(0,i.eye,i.center,i.up),F}X.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},X.recalcMatrix=function(i){this.radius.curve(i),this.center.curve(i),this.rotation.curve(i);var o=this.computedRotation;normalize4(o,o);var s=this.computedMatrix;N(s,o);var _=this.computedCenter,F=this.computedEye,j=this.computedUp,Z=Math.exp(this.computedRadius[0]);F[0]=_[0]+Z*s[2],F[1]=_[1]+Z*s[6],F[2]=_[2]+Z*s[10],j[0]=s[1],j[1]=s[5],j[2]=s[9];for(var X=0;X<3;++X){for(var $=0,ee=0;ee<3;++ee)$+=s[X+4*ee]*F[ee];s[12+X]=-$}},X.getMatrix=function(i,o){this.recalcMatrix(i);var s=this.computedMatrix;if(o){for(var _=0;_<16;++_)o[_]=s[_];return o}return s},X.idle=function(i){this.center.idle(i),this.radius.idle(i),this.rotation.idle(i)},X.flush=function(i){this.center.flush(i),this.radius.flush(i),this.rotation.flush(i)},X.pan=function(i,o,s,_){o=o||0,s=s||0,_=_||0,this.recalcMatrix(i);var F=this.computedMatrix,N=F[1],j=F[5],Z=F[9],X=len3(N,j,Z);N/=X,j/=X,Z/=X;var $=F[0],ee=F[4],et=F[8],er=$*N+ee*j+et*Z,en=len3($-=N*er,ee-=j*er,et-=Z*er);$/=en,ee/=en,et/=en;var ei=F[2],eo=F[6],es=F[10],el=ei*N+eo*j+es*Z,ec=ei*$+eo*ee+es*et,eu=len3(ei-=el*N+ec*$,eo-=el*j+ec*ee,es-=el*Z+ec*et);ei/=eu,eo/=eu,es/=eu;var ef=$*o+N*s,ed=ee*o+j*s,eh=et*o+Z*s;this.center.move(i,ef,ed,eh);var ep=Math.exp(this.computedRadius[0]);ep=Math.max(1e-4,ep+_),this.radius.set(i,Math.log(ep))},X.rotate=function(i,o,s,_){this.recalcMatrix(i),o=o||0,s=s||0;var F=this.computedMatrix,N=F[0],j=F[4],Z=F[8],X=F[1],$=F[5],ee=F[9],et=F[2],er=F[6],en=F[10],ei=o*N+s*X,eo=o*j+s*$,es=o*Z+s*ee,el=-(er*es-en*eo),ec=-(en*ei-et*es),eu=-(et*eo-er*ei),ef=Math.sqrt(Math.max(0,1-Math.pow(el,2)-Math.pow(ec,2)-Math.pow(eu,2))),ed=len4(el,ec,eu,ef);ed>1e-6?(el/=ed,ec/=ed,eu/=ed,ef/=ed):(el=ec=eu=0,ef=1);var eh=this.computedRotation,ep=eh[0],eg=eh[1],em=eh[2],ey=eh[3],ev=ep*ef+ey*el+eg*eu-em*ec,ex=eg*ef+ey*ec+em*el-ep*eu,e_=em*ef+ey*eu+ep*ec-eg*el,ew=ey*ef-ep*el-eg*ec-em*eu;if(_){var eT=Math.sin(_)/len3(el=et,ec=er,eu=en);el*=eT,ec*=eT,eu*=eT,ev=ev*(ef=Math.cos(o))+ew*el+ex*eu-e_*ec,ex=ex*ef+ew*ec+e_*el-ev*eu,e_=e_*ef+ew*eu+ev*ec-ex*el,ew=ew*ef-ev*el-ex*ec-e_*eu}var ek=len4(ev,ex,e_,ew);ek>1e-6?(ev/=ek,ex/=ek,e_/=ek,ew/=ek):(ev=ex=e_=0,ew=1),this.rotation.set(i,ev,ex,e_,ew)},X.lookAt=function(i,o,s,_){this.recalcMatrix(i),s=s||this.computedCenter,o=o||this.computedEye,_=_||this.computedUp;var N=this.computedMatrix;F(N,o,s,_);var j=this.computedRotation;Z(j,N[0],N[1],N[2],N[4],N[5],N[6],N[8],N[9],N[10]),normalize4(j,j),this.rotation.set(i,j[0],j[1],j[2],j[3]);for(var X=0,$=0;$<3;++$)X+=Math.pow(s[$]-o[$],2);this.radius.set(i,.5*Math.log(Math.max(X,1e-6))),this.center.set(i,s[0],s[1],s[2])},X.translate=function(i,o,s,_){this.center.move(i,o||0,s||0,_||0)},X.setMatrix=function(i,o){var s=this.computedRotation;Z(s,o[0],o[1],o[2],o[4],o[5],o[6],o[8],o[9],o[10]),normalize4(s,s),this.rotation.set(i,s[0],s[1],s[2],s[3]);var _=this.computedMatrix;j(_,o);var F=_[15];if(Math.abs(F)>1e-6){var N=_[12]/F,X=_[13]/F,$=_[14]/F;this.recalcMatrix(i);var ee=Math.exp(this.computedRadius[0]);this.center.set(i,N-_[2]*ee,X-_[6]*ee,$-_[10]*ee),this.radius.idle(i)}else this.center.idle(i),this.radius.idle(i)},X.setDistance=function(i,o){o>0&&this.radius.set(i,Math.log(o))},X.setDistanceLimits=function(i,o){i=i>0?Math.log(i):-1/0,o=Math.max(o=o>0?Math.log(o):1/0,i),this.radius.bounds[0][0]=i,this.radius.bounds[1][0]=o},X.getDistanceLimits=function(i){var o=this.radius.bounds;return i?(i[0]=Math.exp(o[0][0]),i[1]=Math.exp(o[1][0]),i):[Math.exp(o[0][0]),Math.exp(o[1][0])]},X.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},X.fromJSON=function(i){var o=this.lastT(),s=i.center;s&&this.center.set(o,s[0],s[1],s[2]);var _=i.rotation;_&&this.rotation.set(o,_[0],_[1],_[2],_[3]);var F=i.distance;F&&F>0&&this.radius.set(o,Math.log(F)),this.setDistanceLimits(i.zoomMin,i.zoomMax)}},4930:function(i,o,s){"use strict";/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */var _=s(6184);i.exports=function(i,o,s){return _(s=void 0!==s?s+"":" ",o)+i}},4405:function(i){i.exports=function(i,o){o||(o=[0,""]);var s=parseFloat(i=String(i),10);return o[0]=s,o[1]=i.match(/[\d.\-\+]*\s*(.*)/)[1]||"",o}},4166:function(i,o,s){"use strict";i.exports=planarDual;var _=s(9398);function planarDual(i,o){for(var s=0|o.length,F=i.length,N=[Array(s),Array(s)],j=0;j<s;++j)N[0][j]=[],N[1][j]=[];for(var j=0;j<F;++j){var Z=i[j];N[0][Z[0]].push(Z),N[1][Z[1]].push(Z)}for(var X=[],j=0;j<s;++j)N[0][j].length+N[1][j].length===0&&X.push([j]);function cut(i,o){var s=N[o][i[o]];s.splice(s.indexOf(i),1)}function next(i,s,F){for(var j,Z,X,$=0;$<2;++$)if(N[$][s].length>0){j=N[$][s][0],X=$;break}Z=j[1^X];for(var ee=0;ee<2;++ee)for(var et=N[ee][s],er=0;er<et.length;++er){var en=et[er],ei=en[1^ee];_(o[i],o[s],o[Z],o[ei])>0&&(j=en,Z=ei,X=ee)}return F||j&&cut(j,X),Z}function extractCycle(i,s){var F=N[s][i][0],j=[i];cut(F,s);for(var Z=F[1^s];;){for(;Z!==i;)j.push(Z),Z=next(j[j.length-2],Z,!1);if(N[0][i].length+N[1][i].length===0)break;var X=j[j.length-1],$=j[1],ee=next(X,i,!0);if(0>_(o[X],o[i],o[$],o[ee]))break;j.push(i),Z=next(X,i)}return j}function shouldGlue(i,o){return o[1]===o[o.length-1]}for(var j=0;j<s;++j)for(var $=0;$<2;++$){for(var ee=[];N[$][j].length>0;){N[0][j].length;var et=extractCycle(j,$);shouldGlue(ee,et)?ee.push.apply(ee,et):(ee.length>0&&X.push(ee),ee=et)}ee.length>0&&X.push(ee)}return X}},3959:function(i,o,s){"use strict";i.exports=trimLeaves;var _=s(8348);function trimLeaves(i,o){for(var s=_(i,o.length),F=Array(o.length),N=Array(o.length),j=[],Z=0;Z<o.length;++Z){var X=s[Z].length;N[Z]=X,F[Z]=!0,X<=1&&j.push(Z)}for(;j.length>0;){var $=j.pop();F[$]=!1;for(var ee=s[$],Z=0;Z<ee.length;++Z){var et=ee[Z];0==--N[et]&&j.push(et)}}for(var er=Array(o.length),en=[],Z=0;Z<o.length;++Z)if(F[Z]){var $=en.length;er[Z]=$,en.push(o[Z])}else er[Z]=-1;for(var ei=[],Z=0;Z<i.length;++Z){var eo=i[Z];F[eo[0]]&&F[eo[1]]&&ei.push([er[eo[0]],er[eo[1]]])}return[ei,en]}},8040:function(i,o,s){"use strict";i.exports=planarGraphToPolyline;var _=s(8348),F=s(4166),N=s(211),j=s(9660),Z=s(9662),X=s(1215),$=s(3959);function makeArray(i,o){for(var s=Array(i),_=0;_<i;++_)s[_]=o;return s}function makeArrayOfArrays(i){for(var o=Array(i),s=0;s<i;++s)o[s]=[];return o}function planarGraphToPolyline(i,o){var s=$(i,o);i=s[0];var ee=(o=s[1]).length;i.length;for(var et=_(i,o.length),er=0;er<ee;++er)if(et[er].length%2==1)throw Error("planar-graph-to-polyline: graph must be manifold");var en=F(i,o);function ccw(i){for(var s=i.length,_=[0],F=0;F<s;++F){var N=o[i[F]],X=o[i[(F+1)%s]],$=j(-N[0],N[1]),ee=j(-N[0],X[1]),et=j(X[0],N[1]),er=j(X[0],X[1]);_=Z(_,Z(Z($,ee),Z(et,er)))}return _[_.length-1]>0}for(var ei=(en=en.filter(ccw)).length,eo=Array(ei),es=Array(ei),er=0;er<ei;++er){eo[er]=er;var el=Array(ei),ec=N([en[er].map(function(i){return o[i]})]),eu=0;y:for(var ef=0;ef<ei;++ef)if(el[ef]=0,er!==ef){for(var ed=en[ef],eh=ed.length,ep=0;ep<eh;++ep){var eg=ec(o[ed[ep]]);if(0!==eg){eg<0&&(el[ef]=1,eu+=1);continue y}}el[ef]=1,eu+=1}es[er]=[eu,er,el]}es.sort(function(i,o){return o[0]-i[0]});for(var er=0;er<ei;++er)for(var el=es[er],em=el[1],ey=el[2],ef=0;ef<ei;++ef)ey[ef]&&(eo[ef]=em);for(var ev=makeArrayOfArrays(ei),er=0;er<ei;++er)ev[er].push(eo[er]),ev[eo[er]].push(er);for(var ex={},e_=makeArray(ee,!1),er=0;er<ei;++er)for(var ed=en[er],eh=ed.length,ef=0;ef<eh;++ef){var ew=ed[ef],eT=ed[(ef+1)%eh],ek=Math.min(ew,eT)+":"+Math.max(ew,eT);if(ek in ex){var eA=ex[ek];ev[eA].push(er),ev[er].push(eA),e_[ew]=e_[eT]=!0}else ex[ek]=er}function sharedBoundary(i){for(var o=i.length,s=0;s<o;++s)if(!e_[i[s]])return!1;return!0}for(var eS=[],eM=makeArray(ei,-1),er=0;er<ei;++er)eo[er]!==er||sharedBoundary(en[er])?eM[er]=-1:(eS.push(er),eM[er]=0);for(var s=[];eS.length>0;){var eC,eE=eS.pop(),eL=ev[eE];X(eL,function(i,o){return i-o});var eP=eL.length,eI=eM[eE];if(0===eI){var ed=en[eE];eC=[ed]}for(var er=0;er<eP;++er){var eO=eL[er];if(!(eM[eO]>=0)&&(eM[eO]=1^eI,eS.push(eO),0===eI)){var ed=en[eO];sharedBoundary(ed)||(ed.reverse(),eC.push(ed))}}0===eI&&s.push(eC)}return s}},211:function(i,o,s){i.exports=preprocessPolygon;var _=s(417)[3],F=s(4385),N=s(9014),j=s(5070);function visitInterval(){return!0}function intervalSearch(i){return function(o,s){var _=i[o];return!!_&&!!_.queryPoint(s,visitInterval)}}function buildVerticalIndex(i){for(var o={},s=0;s<i.length;++s){var _=i[s],F=_[0][0],j=_[0][1],Z=_[1][1],X=[Math.min(j,Z),Math.max(j,Z)];F in o?o[F].push(X):o[F]=[X]}for(var $={},ee=Object.keys(o),s=0;s<ee.length;++s){var et=o[ee[s]];$[ee[s]]=N(et)}return intervalSearch($)}function buildSlabSearch(i,o){return function(s){var F=j.le(o,s[0]);if(F<0)return 1;var N=i[F];if(!N){if(!(F>0)||o[F]!==s[0])return 1;N=i[F-1]}for(var Z=1;N;){var X=N.key,$=_(s,X[0],X[1]);if(X[0][0]<X[1][0]){if($<0)N=N.left;else{if(!($>0))return 0;Z=-1,N=N.right}}else if($>0)N=N.left;else{if(!($<0))return 0;Z=1,N=N.right}}return Z}}function classifyEmpty(i){return 1}function createClassifyVertical(i){return function(o){return i(o[0],o[1])?0:1}}function createClassifyPointDegen(i,o){return function(s){return i(s[0],s[1])?0:o(s)}}function preprocessPolygon(i){for(var o=i.length,s=[],_=[],N=0;N<o;++N)for(var j=i[N],Z=j.length,X=Z-1,$=0;$<Z;X=$++){var ee=j[X],et=j[$];ee[0]===et[0]?_.push([ee,et]):s.push([ee,et])}if(0===s.length)return 0===_.length?classifyEmpty:createClassifyVertical(buildVerticalIndex(_));var er=F(s),en=buildSlabSearch(er.slabs,er.coordinates);return 0===_.length?en:createClassifyPointDegen(buildVerticalIndex(_),en)}},7309:function(i){"use strict";var o=new Float64Array(4),s=new Float64Array(4),_=new Float64Array(4);function closestPoint2d(i,F,N,j,Z){o.length<j.length&&(o=new Float64Array(j.length),s=new Float64Array(j.length),_=new Float64Array(j.length));for(var X,$,ee,et,er,en=0;en<j.length;++en)o[en]=i[en]-j[en],s[en]=F[en]-i[en],_[en]=N[en]-i[en];for(var ei=0,eo=0,es=0,el=0,ec=0,eu=0,en=0;en<j.length;++en){var ef=s[en],ed=_[en],eh=o[en];ei+=ef*ef,eo+=ef*ed,es+=ed*ed,el+=eh*ef,ec+=eh*ed,eu+=eh*eh}var ep=Math.abs(ei*es-eo*eo),eg=eo*ec-es*el,em=eo*el-ei*ec;if(eg+em<=ep){if(eg<0)em<0&&el<0?(em=0,-el>=ei?(eg=1,X=ei+2*el+eu):(eg=-el/ei,X=el*eg+eu)):(eg=0,ec>=0?(em=0,X=eu):-ec>=es?(em=1,X=es+2*ec+eu):(em=-ec/es,X=ec*em+eu));else if(em<0)em=0,el>=0?(eg=0,X=eu):-el>=ei?(eg=1,X=ei+2*el+eu):(eg=-el/ei,X=el*eg+eu);else{var ey=1/ep;eg*=ey,em*=ey,X=eg*(ei*eg+eo*em+2*el)+em*(eo*eg+es*em+2*ec)+eu}}else eg<0?($=eo+el,(ee=es+ec)>$?(et=ee-$)>=(er=ei-2*eo+es)?(eg=1,em=0,X=ei+2*el+eu):(em=1-(eg=et/er),X=eg*(ei*eg+eo*em+2*el)+em*(eo*eg+es*em+2*ec)+eu):(eg=0,ee<=0?(em=1,X=es+2*ec+eu):ec>=0?(em=0,X=eu):(em=-ec/es,X=ec*em+eu))):em<0?($=eo+ec,(ee=ei+el)>$?(et=ee-$)>=(er=ei-2*eo+es)?(em=1,eg=0,X=es+2*ec+eu):X=(eg=1-(em=et/er))*(ei*eg+eo*em+2*el)+em*(eo*eg+es*em+2*ec)+eu:(em=0,ee<=0?(eg=1,X=ei+2*el+eu):el>=0?(eg=0,X=eu):(eg=-el/ei,X=el*eg+eu))):(et=es+ec-eo-el)<=0?(eg=0,em=1,X=es+2*ec+eu):et>=(er=ei-2*eo+es)?(eg=1,em=0,X=ei+2*el+eu):(em=1-(eg=et/er),X=eg*(ei*eg+eo*em+2*el)+em*(eo*eg+es*em+2*ec)+eu);for(var ev=1-eg-em,en=0;en<j.length;++en)Z[en]=ev*i[en]+eg*F[en]+em*N[en];return X<0?0:X}i.exports=closestPoint2d},1116:function(i,o,s){i.exports=s(6093)},7584:function(i,o,s){"use strict";var _=s(1539);function add(i,o){for(var s=i.length,F=Array(s),N=0;N<s;++N)F[N]=_(i[N],o[N]);return F}i.exports=add},2826:function(i,o,s){"use strict";i.exports=float2rat;var _=s(5125);function float2rat(i){for(var o=Array(i.length),s=0;s<i.length;++s)o[s]=_(i[s]);return o}},4469:function(i,o,s){"use strict";var _=s(5125),F=s(3962);function muls(i,o){for(var s=_(o),N=i.length,j=Array(N),Z=0;Z<N;++Z)j[Z]=F(i[Z],s);return j}i.exports=muls},6695:function(i,o,s){"use strict";var _=s(4354);function sub(i,o){for(var s=i.length,F=Array(s),N=0;N<s;++N)F[N]=_(i[N],o[N]);return F}i.exports=sub},7037:function(i,o,s){"use strict";var _=s(9209),F=s(1284),N=s(9887);function reduceCellComplex(i){i.sort(F);for(var o=i.length,s=0,j=0;j<o;++j){var Z=i[j],X=N(Z);if(0!==X){if(s>0){var $=i[s-1];if(0===_(Z,$)&&N($)!==X){s-=1;continue}}i[s++]=Z}}return i.length=s,i}i.exports=reduceCellComplex},6184:function(i){"use strict";/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var o,s="";function repeat(i,_){if("string"!=typeof i)throw TypeError("expected a string");if(1===_)return i;if(2===_)return i+i;var F=i.length*_;if(o!==i||void 0===o)o=i,s="";else if(s.length>=F)return s.substr(0,F);for(;F>s.length&&_>1;)1&_&&(s+=i),_>>=1,i+=i;return s+=i,s=s.substr(0,F)}i.exports=repeat},8161:function(i,o,s){i.exports=s.g.performance&&s.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(i){"use strict";function compressExpansion(i){for(var o=i.length,s=i[i.length-1],_=o,F=o-2;F>=0;--F){var N=s,j=i[F],Z=(s=N+j)-N,X=j-Z;X&&(i[--_]=s,s=X)}for(var $=0,F=_;F<o;++F){var N=i[F],j=s,Z=(s=N+j)-N,X=j-Z;X&&(i[$++]=X)}return i[$++]=s,i.length=$,i}i.exports=compressExpansion},8167:function(i,o,s){"use strict";var _=s(9660),F=s(9662),N=s(8289),j=s(402);function determinant_2(i,o,s,_){return function(o){return _(i(s(o[0][0],o[1][1]),s(-o[0][1],o[1][0])))}}function determinant_3(i,o,s,_){return function(F){return _(i(o(i(s(F[1][1],F[2][2]),s(-F[1][2],F[2][1])),F[0][0]),i(o(i(s(F[1][0],F[2][2]),s(-F[1][2],F[2][0])),-F[0][1]),o(i(s(F[1][0],F[2][1]),s(-F[1][1],F[2][0])),F[0][2]))))}}function determinant_4(i,o,s,_){return function(F){return _(i(i(o(i(o(i(s(F[2][2],F[3][3]),s(-F[2][3],F[3][2])),F[1][1]),i(o(i(s(F[2][1],F[3][3]),s(-F[2][3],F[3][1])),-F[1][2]),o(i(s(F[2][1],F[3][2]),s(-F[2][2],F[3][1])),F[1][3]))),F[0][0]),o(i(o(i(s(F[2][2],F[3][3]),s(-F[2][3],F[3][2])),F[1][0]),i(o(i(s(F[2][0],F[3][3]),s(-F[2][3],F[3][0])),-F[1][2]),o(i(s(F[2][0],F[3][2]),s(-F[2][2],F[3][0])),F[1][3]))),-F[0][1])),i(o(i(o(i(s(F[2][1],F[3][3]),s(-F[2][3],F[3][1])),F[1][0]),i(o(i(s(F[2][0],F[3][3]),s(-F[2][3],F[3][0])),-F[1][1]),o(i(s(F[2][0],F[3][1]),s(-F[2][1],F[3][0])),F[1][3]))),F[0][2]),o(i(o(i(s(F[2][1],F[3][2]),s(-F[2][2],F[3][1])),F[1][0]),i(o(i(s(F[2][0],F[3][2]),s(-F[2][2],F[3][0])),-F[1][1]),o(i(s(F[2][0],F[3][1]),s(-F[2][1],F[3][0])),F[1][2]))),-F[0][3]))))}}function determinant_5(i,o,s,_){return function(F){return _(i(i(o(i(i(o(i(o(i(s(F[3][3],F[4][4]),s(-F[3][4],F[4][3])),F[2][2]),i(o(i(s(F[3][2],F[4][4]),s(-F[3][4],F[4][2])),-F[2][3]),o(i(s(F[3][2],F[4][3]),s(-F[3][3],F[4][2])),F[2][4]))),F[1][1]),o(i(o(i(s(F[3][3],F[4][4]),s(-F[3][4],F[4][3])),F[2][1]),i(o(i(s(F[3][1],F[4][4]),s(-F[3][4],F[4][1])),-F[2][3]),o(i(s(F[3][1],F[4][3]),s(-F[3][3],F[4][1])),F[2][4]))),-F[1][2])),i(o(i(o(i(s(F[3][2],F[4][4]),s(-F[3][4],F[4][2])),F[2][1]),i(o(i(s(F[3][1],F[4][4]),s(-F[3][4],F[4][1])),-F[2][2]),o(i(s(F[3][1],F[4][2]),s(-F[3][2],F[4][1])),F[2][4]))),F[1][3]),o(i(o(i(s(F[3][2],F[4][3]),s(-F[3][3],F[4][2])),F[2][1]),i(o(i(s(F[3][1],F[4][3]),s(-F[3][3],F[4][1])),-F[2][2]),o(i(s(F[3][1],F[4][2]),s(-F[3][2],F[4][1])),F[2][3]))),-F[1][4]))),F[0][0]),o(i(i(o(i(o(i(s(F[3][3],F[4][4]),s(-F[3][4],F[4][3])),F[2][2]),i(o(i(s(F[3][2],F[4][4]),s(-F[3][4],F[4][2])),-F[2][3]),o(i(s(F[3][2],F[4][3]),s(-F[3][3],F[4][2])),F[2][4]))),F[1][0]),o(i(o(i(s(F[3][3],F[4][4]),s(-F[3][4],F[4][3])),F[2][0]),i(o(i(s(F[3][0],F[4][4]),s(-F[3][4],F[4][0])),-F[2][3]),o(i(s(F[3][0],F[4][3]),s(-F[3][3],F[4][0])),F[2][4]))),-F[1][2])),i(o(i(o(i(s(F[3][2],F[4][4]),s(-F[3][4],F[4][2])),F[2][0]),i(o(i(s(F[3][0],F[4][4]),s(-F[3][4],F[4][0])),-F[2][2]),o(i(s(F[3][0],F[4][2]),s(-F[3][2],F[4][0])),F[2][4]))),F[1][3]),o(i(o(i(s(F[3][2],F[4][3]),s(-F[3][3],F[4][2])),F[2][0]),i(o(i(s(F[3][0],F[4][3]),s(-F[3][3],F[4][0])),-F[2][2]),o(i(s(F[3][0],F[4][2]),s(-F[3][2],F[4][0])),F[2][3]))),-F[1][4]))),-F[0][1])),i(o(i(i(o(i(o(i(s(F[3][3],F[4][4]),s(-F[3][4],F[4][3])),F[2][1]),i(o(i(s(F[3][1],F[4][4]),s(-F[3][4],F[4][1])),-F[2][3]),o(i(s(F[3][1],F[4][3]),s(-F[3][3],F[4][1])),F[2][4]))),F[1][0]),o(i(o(i(s(F[3][3],F[4][4]),s(-F[3][4],F[4][3])),F[2][0]),i(o(i(s(F[3][0],F[4][4]),s(-F[3][4],F[4][0])),-F[2][3]),o(i(s(F[3][0],F[4][3]),s(-F[3][3],F[4][0])),F[2][4]))),-F[1][1])),i(o(i(o(i(s(F[3][1],F[4][4]),s(-F[3][4],F[4][1])),F[2][0]),i(o(i(s(F[3][0],F[4][4]),s(-F[3][4],F[4][0])),-F[2][1]),o(i(s(F[3][0],F[4][1]),s(-F[3][1],F[4][0])),F[2][4]))),F[1][3]),o(i(o(i(s(F[3][1],F[4][3]),s(-F[3][3],F[4][1])),F[2][0]),i(o(i(s(F[3][0],F[4][3]),s(-F[3][3],F[4][0])),-F[2][1]),o(i(s(F[3][0],F[4][1]),s(-F[3][1],F[4][0])),F[2][3]))),-F[1][4]))),F[0][2]),i(o(i(i(o(i(o(i(s(F[3][2],F[4][4]),s(-F[3][4],F[4][2])),F[2][1]),i(o(i(s(F[3][1],F[4][4]),s(-F[3][4],F[4][1])),-F[2][2]),o(i(s(F[3][1],F[4][2]),s(-F[3][2],F[4][1])),F[2][4]))),F[1][0]),o(i(o(i(s(F[3][2],F[4][4]),s(-F[3][4],F[4][2])),F[2][0]),i(o(i(s(F[3][0],F[4][4]),s(-F[3][4],F[4][0])),-F[2][2]),o(i(s(F[3][0],F[4][2]),s(-F[3][2],F[4][0])),F[2][4]))),-F[1][1])),i(o(i(o(i(s(F[3][1],F[4][4]),s(-F[3][4],F[4][1])),F[2][0]),i(o(i(s(F[3][0],F[4][4]),s(-F[3][4],F[4][0])),-F[2][1]),o(i(s(F[3][0],F[4][1]),s(-F[3][1],F[4][0])),F[2][4]))),F[1][2]),o(i(o(i(s(F[3][1],F[4][2]),s(-F[3][2],F[4][1])),F[2][0]),i(o(i(s(F[3][0],F[4][2]),s(-F[3][2],F[4][0])),-F[2][1]),o(i(s(F[3][0],F[4][1]),s(-F[3][1],F[4][0])),F[2][2]))),-F[1][4]))),-F[0][3]),o(i(i(o(i(o(i(s(F[3][2],F[4][3]),s(-F[3][3],F[4][2])),F[2][1]),i(o(i(s(F[3][1],F[4][3]),s(-F[3][3],F[4][1])),-F[2][2]),o(i(s(F[3][1],F[4][2]),s(-F[3][2],F[4][1])),F[2][3]))),F[1][0]),o(i(o(i(s(F[3][2],F[4][3]),s(-F[3][3],F[4][2])),F[2][0]),i(o(i(s(F[3][0],F[4][3]),s(-F[3][3],F[4][0])),-F[2][2]),o(i(s(F[3][0],F[4][2]),s(-F[3][2],F[4][0])),F[2][3]))),-F[1][1])),i(o(i(o(i(s(F[3][1],F[4][3]),s(-F[3][3],F[4][1])),F[2][0]),i(o(i(s(F[3][0],F[4][3]),s(-F[3][3],F[4][0])),-F[2][1]),o(i(s(F[3][0],F[4][1]),s(-F[3][1],F[4][0])),F[2][3]))),F[1][2]),o(i(o(i(s(F[3][1],F[4][2]),s(-F[3][2],F[4][1])),F[2][0]),i(o(i(s(F[3][0],F[4][2]),s(-F[3][2],F[4][0])),-F[2][1]),o(i(s(F[3][0],F[4][1]),s(-F[3][1],F[4][0])),F[2][2]))),-F[1][3]))),F[0][4])))))}}function compileDeterminant(i){return(2===i?determinant_2:3===i?determinant_3:4===i?determinant_4:5===i?determinant_5:void 0)(F,N,_,j)}var Z=[function(){return[0]},function(i){return[i[0][0]]}];function proc(i,o,s,_,F,N,j,Z){return function(X){switch(X.length){case 0:return i(X);case 1:return o(X);case 2:return s(X);case 3:return _(X);case 4:return F(X);case 5:return N(X)}var $=j[X.length];return $||($=j[X.length]=Z(X.length)),$(X)}}(function(){for(;Z.length<6;)Z.push(compileDeterminant(Z.length));i.exports=proc.apply(void 0,Z.concat([Z,compileDeterminant]));for(var o=0;o<Z.length;++o)i.exports[o]=Z[o]})()},9130:function(i,o,s){"use strict";var _=s(9660),F=s(9662);function robustDotProduct(i,o){for(var s=_(i[0],o[0]),N=1;N<i.length;++N)s=F(s,_(i[N],o[N]));return s}i.exports=robustDotProduct},2227:function(i,o,s){"use strict";var _=s(9660),F=s(9662),N=s(4078),j=s(8289);function orientation(i){return(3===i?inSphere3:4===i?inSphere4:5===i?inSphere5:inSphere6)(F,N,_,j)}function inSphere3(i,o,s,_){return function(F,N,j){var Z=s(F[0],F[0]),X=_(Z,N[0]),$=_(Z,j[0]),ee=s(N[0],N[0]),et=_(ee,F[0]),er=_(ee,j[0]),en=s(j[0],j[0]),ei=_(en,F[0]),eo=i(o(_(en,N[0]),er),o(et,X)),es=o(ei,$),el=o(eo,es);return el[el.length-1]}}function inSphere4(i,o,s,_){return function(F,N,j,Z){var X=i(s(F[0],F[0]),s(F[1],F[1])),$=_(X,N[0]),ee=_(X,j[0]),et=_(X,Z[0]),er=i(s(N[0],N[0]),s(N[1],N[1])),en=_(er,F[0]),ei=_(er,j[0]),eo=_(er,Z[0]),es=i(s(j[0],j[0]),s(j[1],j[1])),el=_(es,F[0]),ec=_(es,N[0]),eu=_(es,Z[0]),ef=i(s(Z[0],Z[0]),s(Z[1],Z[1])),ed=_(ef,F[0]),eh=_(ef,N[0]),ep=_(ef,j[0]),eg=i(i(_(o(ep,eu),N[1]),i(_(o(eh,eo),-j[1]),_(o(ec,ei),Z[1]))),i(_(o(eh,eo),F[1]),i(_(o(ed,et),-N[1]),_(o(en,$),Z[1])))),em=i(i(_(o(ep,eu),F[1]),i(_(o(ed,et),-j[1]),_(o(el,ee),Z[1]))),i(_(o(ec,ei),F[1]),i(_(o(el,ee),-N[1]),_(o(en,$),j[1])))),ey=o(eg,em);return ey[ey.length-1]}}function inSphere5(i,o,s,_){return function(F,N,j,Z,X){var $=i(s(F[0],F[0]),i(s(F[1],F[1]),s(F[2],F[2]))),ee=_($,N[0]),et=_($,j[0]),er=_($,Z[0]),en=_($,X[0]),ei=i(s(N[0],N[0]),i(s(N[1],N[1]),s(N[2],N[2]))),eo=_(ei,F[0]),es=_(ei,j[0]),el=_(ei,Z[0]),ec=_(ei,X[0]),eu=i(s(j[0],j[0]),i(s(j[1],j[1]),s(j[2],j[2]))),ef=_(eu,F[0]),ed=_(eu,N[0]),eh=_(eu,Z[0]),ep=_(eu,X[0]),eg=i(s(Z[0],Z[0]),i(s(Z[1],Z[1]),s(Z[2],Z[2]))),em=_(eg,F[0]),ey=_(eg,N[0]),ev=_(eg,j[0]),ex=_(eg,X[0]),e_=i(s(X[0],X[0]),i(s(X[1],X[1]),s(X[2],X[2]))),ew=_(e_,F[0]),eT=_(e_,N[0]),ek=_(e_,j[0]),eA=_(e_,Z[0]),eS=i(i(i(_(i(_(o(eA,ex),j[1]),i(_(o(ek,ep),-Z[1]),_(o(ev,eh),X[1]))),N[2]),i(_(i(_(o(eA,ex),N[1]),i(_(o(eT,ec),-Z[1]),_(o(ey,el),X[1]))),-j[2]),_(i(_(o(ek,ep),N[1]),i(_(o(eT,ec),-j[1]),_(o(ed,es),X[1]))),Z[2]))),i(_(i(_(o(ev,eh),N[1]),i(_(o(ey,el),-j[1]),_(o(ed,es),Z[1]))),-X[2]),i(_(i(_(o(eA,ex),N[1]),i(_(o(eT,ec),-Z[1]),_(o(ey,el),X[1]))),F[2]),_(i(_(o(eA,ex),F[1]),i(_(o(ew,en),-Z[1]),_(o(em,er),X[1]))),-N[2])))),i(i(_(i(_(o(eT,ec),F[1]),i(_(o(ew,en),-N[1]),_(o(eo,ee),X[1]))),Z[2]),i(_(i(_(o(ey,el),F[1]),i(_(o(em,er),-N[1]),_(o(eo,ee),Z[1]))),-X[2]),_(i(_(o(ev,eh),N[1]),i(_(o(ey,el),-j[1]),_(o(ed,es),Z[1]))),F[2]))),i(_(i(_(o(ev,eh),F[1]),i(_(o(em,er),-j[1]),_(o(ef,et),Z[1]))),-N[2]),i(_(i(_(o(ey,el),F[1]),i(_(o(em,er),-N[1]),_(o(eo,ee),Z[1]))),j[2]),_(i(_(o(ed,es),F[1]),i(_(o(ef,et),-N[1]),_(o(eo,ee),j[1]))),-Z[2]))))),eM=i(i(i(_(i(_(o(eA,ex),j[1]),i(_(o(ek,ep),-Z[1]),_(o(ev,eh),X[1]))),F[2]),_(i(_(o(eA,ex),F[1]),i(_(o(ew,en),-Z[1]),_(o(em,er),X[1]))),-j[2])),i(_(i(_(o(ek,ep),F[1]),i(_(o(ew,en),-j[1]),_(o(ef,et),X[1]))),Z[2]),_(i(_(o(ev,eh),F[1]),i(_(o(em,er),-j[1]),_(o(ef,et),Z[1]))),-X[2]))),i(i(_(i(_(o(ek,ep),N[1]),i(_(o(eT,ec),-j[1]),_(o(ed,es),X[1]))),F[2]),_(i(_(o(ek,ep),F[1]),i(_(o(ew,en),-j[1]),_(o(ef,et),X[1]))),-N[2])),i(_(i(_(o(eT,ec),F[1]),i(_(o(ew,en),-N[1]),_(o(eo,ee),X[1]))),j[2]),_(i(_(o(ed,es),F[1]),i(_(o(ef,et),-N[1]),_(o(eo,ee),j[1]))),-X[2])))),eC=o(eS,eM);return eC[eC.length-1]}}function inSphere6(i,o,s,_){return function(F,N,j,Z,X,$){var ee=i(i(s(F[0],F[0]),s(F[1],F[1])),i(s(F[2],F[2]),s(F[3],F[3]))),et=_(ee,N[0]),er=_(ee,j[0]),en=_(ee,Z[0]),ei=_(ee,X[0]),eo=_(ee,$[0]),es=i(i(s(N[0],N[0]),s(N[1],N[1])),i(s(N[2],N[2]),s(N[3],N[3]))),el=_(es,F[0]),ec=_(es,j[0]),eu=_(es,Z[0]),ef=_(es,X[0]),ed=_(es,$[0]),eh=i(i(s(j[0],j[0]),s(j[1],j[1])),i(s(j[2],j[2]),s(j[3],j[3]))),ep=_(eh,F[0]),eg=_(eh,N[0]),em=_(eh,Z[0]),ey=_(eh,X[0]),ev=_(eh,$[0]),ex=i(i(s(Z[0],Z[0]),s(Z[1],Z[1])),i(s(Z[2],Z[2]),s(Z[3],Z[3]))),e_=_(ex,F[0]),ew=_(ex,N[0]),eT=_(ex,j[0]),ek=_(ex,X[0]),eA=_(ex,$[0]),eS=i(i(s(X[0],X[0]),s(X[1],X[1])),i(s(X[2],X[2]),s(X[3],X[3]))),eM=_(eS,F[0]),eC=_(eS,N[0]),eE=_(eS,j[0]),eL=_(eS,Z[0]),eP=_(eS,$[0]),eI=i(i(s($[0],$[0]),s($[1],$[1])),i(s($[2],$[2]),s($[3],$[3]))),eO=_(eI,F[0]),eD=_(eI,N[0]),eR=_(eI,j[0]),eB=_(eI,Z[0]),eF=_(eI,X[0]),ez=i(i(i(_(i(i(_(i(_(o(eF,eP),Z[1]),i(_(o(eB,eA),-X[1]),_(o(eL,ek),$[1]))),j[2]),_(i(_(o(eF,eP),j[1]),i(_(o(eR,ev),-X[1]),_(o(eE,ey),$[1]))),-Z[2])),i(_(i(_(o(eB,eA),j[1]),i(_(o(eR,ev),-Z[1]),_(o(eT,em),$[1]))),X[2]),_(i(_(o(eL,ek),j[1]),i(_(o(eE,ey),-Z[1]),_(o(eT,em),X[1]))),-$[2]))),N[3]),i(_(i(i(_(i(_(o(eF,eP),Z[1]),i(_(o(eB,eA),-X[1]),_(o(eL,ek),$[1]))),N[2]),_(i(_(o(eF,eP),N[1]),i(_(o(eD,ed),-X[1]),_(o(eC,ef),$[1]))),-Z[2])),i(_(i(_(o(eB,eA),N[1]),i(_(o(eD,ed),-Z[1]),_(o(ew,eu),$[1]))),X[2]),_(i(_(o(eL,ek),N[1]),i(_(o(eC,ef),-Z[1]),_(o(ew,eu),X[1]))),-$[2]))),-j[3]),_(i(i(_(i(_(o(eF,eP),j[1]),i(_(o(eR,ev),-X[1]),_(o(eE,ey),$[1]))),N[2]),_(i(_(o(eF,eP),N[1]),i(_(o(eD,ed),-X[1]),_(o(eC,ef),$[1]))),-j[2])),i(_(i(_(o(eR,ev),N[1]),i(_(o(eD,ed),-j[1]),_(o(eg,ec),$[1]))),X[2]),_(i(_(o(eE,ey),N[1]),i(_(o(eC,ef),-j[1]),_(o(eg,ec),X[1]))),-$[2]))),Z[3]))),i(i(_(i(i(_(i(_(o(eB,eA),j[1]),i(_(o(eR,ev),-Z[1]),_(o(eT,em),$[1]))),N[2]),_(i(_(o(eB,eA),N[1]),i(_(o(eD,ed),-Z[1]),_(o(ew,eu),$[1]))),-j[2])),i(_(i(_(o(eR,ev),N[1]),i(_(o(eD,ed),-j[1]),_(o(eg,ec),$[1]))),Z[2]),_(i(_(o(eT,em),N[1]),i(_(o(ew,eu),-j[1]),_(o(eg,ec),Z[1]))),-$[2]))),-X[3]),_(i(i(_(i(_(o(eL,ek),j[1]),i(_(o(eE,ey),-Z[1]),_(o(eT,em),X[1]))),N[2]),_(i(_(o(eL,ek),N[1]),i(_(o(eC,ef),-Z[1]),_(o(ew,eu),X[1]))),-j[2])),i(_(i(_(o(eE,ey),N[1]),i(_(o(eC,ef),-j[1]),_(o(eg,ec),X[1]))),Z[2]),_(i(_(o(eT,em),N[1]),i(_(o(ew,eu),-j[1]),_(o(eg,ec),Z[1]))),-X[2]))),$[3])),i(_(i(i(_(i(_(o(eF,eP),Z[1]),i(_(o(eB,eA),-X[1]),_(o(eL,ek),$[1]))),N[2]),_(i(_(o(eF,eP),N[1]),i(_(o(eD,ed),-X[1]),_(o(eC,ef),$[1]))),-Z[2])),i(_(i(_(o(eB,eA),N[1]),i(_(o(eD,ed),-Z[1]),_(o(ew,eu),$[1]))),X[2]),_(i(_(o(eL,ek),N[1]),i(_(o(eC,ef),-Z[1]),_(o(ew,eu),X[1]))),-$[2]))),F[3]),_(i(i(_(i(_(o(eF,eP),Z[1]),i(_(o(eB,eA),-X[1]),_(o(eL,ek),$[1]))),F[2]),_(i(_(o(eF,eP),F[1]),i(_(o(eO,eo),-X[1]),_(o(eM,ei),$[1]))),-Z[2])),i(_(i(_(o(eB,eA),F[1]),i(_(o(eO,eo),-Z[1]),_(o(e_,en),$[1]))),X[2]),_(i(_(o(eL,ek),F[1]),i(_(o(eM,ei),-Z[1]),_(o(e_,en),X[1]))),-$[2]))),-N[3])))),i(i(i(_(i(i(_(i(_(o(eF,eP),N[1]),i(_(o(eD,ed),-X[1]),_(o(eC,ef),$[1]))),F[2]),_(i(_(o(eF,eP),F[1]),i(_(o(eO,eo),-X[1]),_(o(eM,ei),$[1]))),-N[2])),i(_(i(_(o(eD,ed),F[1]),i(_(o(eO,eo),-N[1]),_(o(el,et),$[1]))),X[2]),_(i(_(o(eC,ef),F[1]),i(_(o(eM,ei),-N[1]),_(o(el,et),X[1]))),-$[2]))),Z[3]),_(i(i(_(i(_(o(eB,eA),N[1]),i(_(o(eD,ed),-Z[1]),_(o(ew,eu),$[1]))),F[2]),_(i(_(o(eB,eA),F[1]),i(_(o(eO,eo),-Z[1]),_(o(e_,en),$[1]))),-N[2])),i(_(i(_(o(eD,ed),F[1]),i(_(o(eO,eo),-N[1]),_(o(el,et),$[1]))),Z[2]),_(i(_(o(ew,eu),F[1]),i(_(o(e_,en),-N[1]),_(o(el,et),Z[1]))),-$[2]))),-X[3])),i(_(i(i(_(i(_(o(eL,ek),N[1]),i(_(o(eC,ef),-Z[1]),_(o(ew,eu),X[1]))),F[2]),_(i(_(o(eL,ek),F[1]),i(_(o(eM,ei),-Z[1]),_(o(e_,en),X[1]))),-N[2])),i(_(i(_(o(eC,ef),F[1]),i(_(o(eM,ei),-N[1]),_(o(el,et),X[1]))),Z[2]),_(i(_(o(ew,eu),F[1]),i(_(o(e_,en),-N[1]),_(o(el,et),Z[1]))),-X[2]))),$[3]),_(i(i(_(i(_(o(eB,eA),j[1]),i(_(o(eR,ev),-Z[1]),_(o(eT,em),$[1]))),N[2]),_(i(_(o(eB,eA),N[1]),i(_(o(eD,ed),-Z[1]),_(o(ew,eu),$[1]))),-j[2])),i(_(i(_(o(eR,ev),N[1]),i(_(o(eD,ed),-j[1]),_(o(eg,ec),$[1]))),Z[2]),_(i(_(o(eT,em),N[1]),i(_(o(ew,eu),-j[1]),_(o(eg,ec),Z[1]))),-$[2]))),F[3]))),i(i(_(i(i(_(i(_(o(eB,eA),j[1]),i(_(o(eR,ev),-Z[1]),_(o(eT,em),$[1]))),F[2]),_(i(_(o(eB,eA),F[1]),i(_(o(eO,eo),-Z[1]),_(o(e_,en),$[1]))),-j[2])),i(_(i(_(o(eR,ev),F[1]),i(_(o(eO,eo),-j[1]),_(o(ep,er),$[1]))),Z[2]),_(i(_(o(eT,em),F[1]),i(_(o(e_,en),-j[1]),_(o(ep,er),Z[1]))),-$[2]))),-N[3]),_(i(i(_(i(_(o(eB,eA),N[1]),i(_(o(eD,ed),-Z[1]),_(o(ew,eu),$[1]))),F[2]),_(i(_(o(eB,eA),F[1]),i(_(o(eO,eo),-Z[1]),_(o(e_,en),$[1]))),-N[2])),i(_(i(_(o(eD,ed),F[1]),i(_(o(eO,eo),-N[1]),_(o(el,et),$[1]))),Z[2]),_(i(_(o(ew,eu),F[1]),i(_(o(e_,en),-N[1]),_(o(el,et),Z[1]))),-$[2]))),j[3])),i(_(i(i(_(i(_(o(eR,ev),N[1]),i(_(o(eD,ed),-j[1]),_(o(eg,ec),$[1]))),F[2]),_(i(_(o(eR,ev),F[1]),i(_(o(eO,eo),-j[1]),_(o(ep,er),$[1]))),-N[2])),i(_(i(_(o(eD,ed),F[1]),i(_(o(eO,eo),-N[1]),_(o(el,et),$[1]))),j[2]),_(i(_(o(eg,ec),F[1]),i(_(o(ep,er),-N[1]),_(o(el,et),j[1]))),-$[2]))),-Z[3]),_(i(i(_(i(_(o(eT,em),N[1]),i(_(o(ew,eu),-j[1]),_(o(eg,ec),Z[1]))),F[2]),_(i(_(o(eT,em),F[1]),i(_(o(e_,en),-j[1]),_(o(ep,er),Z[1]))),-N[2])),i(_(i(_(o(ew,eu),F[1]),i(_(o(e_,en),-N[1]),_(o(el,et),Z[1]))),j[2]),_(i(_(o(eg,ec),F[1]),i(_(o(ep,er),-N[1]),_(o(el,et),j[1]))),-Z[2]))),$[3]))))),eN=i(i(i(_(i(i(_(i(_(o(eF,eP),Z[1]),i(_(o(eB,eA),-X[1]),_(o(eL,ek),$[1]))),j[2]),_(i(_(o(eF,eP),j[1]),i(_(o(eR,ev),-X[1]),_(o(eE,ey),$[1]))),-Z[2])),i(_(i(_(o(eB,eA),j[1]),i(_(o(eR,ev),-Z[1]),_(o(eT,em),$[1]))),X[2]),_(i(_(o(eL,ek),j[1]),i(_(o(eE,ey),-Z[1]),_(o(eT,em),X[1]))),-$[2]))),F[3]),i(_(i(i(_(i(_(o(eF,eP),Z[1]),i(_(o(eB,eA),-X[1]),_(o(eL,ek),$[1]))),F[2]),_(i(_(o(eF,eP),F[1]),i(_(o(eO,eo),-X[1]),_(o(eM,ei),$[1]))),-Z[2])),i(_(i(_(o(eB,eA),F[1]),i(_(o(eO,eo),-Z[1]),_(o(e_,en),$[1]))),X[2]),_(i(_(o(eL,ek),F[1]),i(_(o(eM,ei),-Z[1]),_(o(e_,en),X[1]))),-$[2]))),-j[3]),_(i(i(_(i(_(o(eF,eP),j[1]),i(_(o(eR,ev),-X[1]),_(o(eE,ey),$[1]))),F[2]),_(i(_(o(eF,eP),F[1]),i(_(o(eO,eo),-X[1]),_(o(eM,ei),$[1]))),-j[2])),i(_(i(_(o(eR,ev),F[1]),i(_(o(eO,eo),-j[1]),_(o(ep,er),$[1]))),X[2]),_(i(_(o(eE,ey),F[1]),i(_(o(eM,ei),-j[1]),_(o(ep,er),X[1]))),-$[2]))),Z[3]))),i(i(_(i(i(_(i(_(o(eB,eA),j[1]),i(_(o(eR,ev),-Z[1]),_(o(eT,em),$[1]))),F[2]),_(i(_(o(eB,eA),F[1]),i(_(o(eO,eo),-Z[1]),_(o(e_,en),$[1]))),-j[2])),i(_(i(_(o(eR,ev),F[1]),i(_(o(eO,eo),-j[1]),_(o(ep,er),$[1]))),Z[2]),_(i(_(o(eT,em),F[1]),i(_(o(e_,en),-j[1]),_(o(ep,er),Z[1]))),-$[2]))),-X[3]),_(i(i(_(i(_(o(eL,ek),j[1]),i(_(o(eE,ey),-Z[1]),_(o(eT,em),X[1]))),F[2]),_(i(_(o(eL,ek),F[1]),i(_(o(eM,ei),-Z[1]),_(o(e_,en),X[1]))),-j[2])),i(_(i(_(o(eE,ey),F[1]),i(_(o(eM,ei),-j[1]),_(o(ep,er),X[1]))),Z[2]),_(i(_(o(eT,em),F[1]),i(_(o(e_,en),-j[1]),_(o(ep,er),Z[1]))),-X[2]))),$[3])),i(_(i(i(_(i(_(o(eF,eP),j[1]),i(_(o(eR,ev),-X[1]),_(o(eE,ey),$[1]))),N[2]),_(i(_(o(eF,eP),N[1]),i(_(o(eD,ed),-X[1]),_(o(eC,ef),$[1]))),-j[2])),i(_(i(_(o(eR,ev),N[1]),i(_(o(eD,ed),-j[1]),_(o(eg,ec),$[1]))),X[2]),_(i(_(o(eE,ey),N[1]),i(_(o(eC,ef),-j[1]),_(o(eg,ec),X[1]))),-$[2]))),F[3]),_(i(i(_(i(_(o(eF,eP),j[1]),i(_(o(eR,ev),-X[1]),_(o(eE,ey),$[1]))),F[2]),_(i(_(o(eF,eP),F[1]),i(_(o(eO,eo),-X[1]),_(o(eM,ei),$[1]))),-j[2])),i(_(i(_(o(eR,ev),F[1]),i(_(o(eO,eo),-j[1]),_(o(ep,er),$[1]))),X[2]),_(i(_(o(eE,ey),F[1]),i(_(o(eM,ei),-j[1]),_(o(ep,er),X[1]))),-$[2]))),-N[3])))),i(i(i(_(i(i(_(i(_(o(eF,eP),N[1]),i(_(o(eD,ed),-X[1]),_(o(eC,ef),$[1]))),F[2]),_(i(_(o(eF,eP),F[1]),i(_(o(eO,eo),-X[1]),_(o(eM,ei),$[1]))),-N[2])),i(_(i(_(o(eD,ed),F[1]),i(_(o(eO,eo),-N[1]),_(o(el,et),$[1]))),X[2]),_(i(_(o(eC,ef),F[1]),i(_(o(eM,ei),-N[1]),_(o(el,et),X[1]))),-$[2]))),j[3]),_(i(i(_(i(_(o(eR,ev),N[1]),i(_(o(eD,ed),-j[1]),_(o(eg,ec),$[1]))),F[2]),_(i(_(o(eR,ev),F[1]),i(_(o(eO,eo),-j[1]),_(o(ep,er),$[1]))),-N[2])),i(_(i(_(o(eD,ed),F[1]),i(_(o(eO,eo),-N[1]),_(o(el,et),$[1]))),j[2]),_(i(_(o(eg,ec),F[1]),i(_(o(ep,er),-N[1]),_(o(el,et),j[1]))),-$[2]))),-X[3])),i(_(i(i(_(i(_(o(eE,ey),N[1]),i(_(o(eC,ef),-j[1]),_(o(eg,ec),X[1]))),F[2]),_(i(_(o(eE,ey),F[1]),i(_(o(eM,ei),-j[1]),_(o(ep,er),X[1]))),-N[2])),i(_(i(_(o(eC,ef),F[1]),i(_(o(eM,ei),-N[1]),_(o(el,et),X[1]))),j[2]),_(i(_(o(eg,ec),F[1]),i(_(o(ep,er),-N[1]),_(o(el,et),j[1]))),-X[2]))),$[3]),_(i(i(_(i(_(o(eL,ek),j[1]),i(_(o(eE,ey),-Z[1]),_(o(eT,em),X[1]))),N[2]),_(i(_(o(eL,ek),N[1]),i(_(o(eC,ef),-Z[1]),_(o(ew,eu),X[1]))),-j[2])),i(_(i(_(o(eE,ey),N[1]),i(_(o(eC,ef),-j[1]),_(o(eg,ec),X[1]))),Z[2]),_(i(_(o(eT,em),N[1]),i(_(o(ew,eu),-j[1]),_(o(eg,ec),Z[1]))),-X[2]))),F[3]))),i(i(_(i(i(_(i(_(o(eL,ek),j[1]),i(_(o(eE,ey),-Z[1]),_(o(eT,em),X[1]))),F[2]),_(i(_(o(eL,ek),F[1]),i(_(o(eM,ei),-Z[1]),_(o(e_,en),X[1]))),-j[2])),i(_(i(_(o(eE,ey),F[1]),i(_(o(eM,ei),-j[1]),_(o(ep,er),X[1]))),Z[2]),_(i(_(o(eT,em),F[1]),i(_(o(e_,en),-j[1]),_(o(ep,er),Z[1]))),-X[2]))),-N[3]),_(i(i(_(i(_(o(eL,ek),N[1]),i(_(o(eC,ef),-Z[1]),_(o(ew,eu),X[1]))),F[2]),_(i(_(o(eL,ek),F[1]),i(_(o(eM,ei),-Z[1]),_(o(e_,en),X[1]))),-N[2])),i(_(i(_(o(eC,ef),F[1]),i(_(o(eM,ei),-N[1]),_(o(el,et),X[1]))),Z[2]),_(i(_(o(ew,eu),F[1]),i(_(o(e_,en),-N[1]),_(o(el,et),Z[1]))),-X[2]))),j[3])),i(_(i(i(_(i(_(o(eE,ey),N[1]),i(_(o(eC,ef),-j[1]),_(o(eg,ec),X[1]))),F[2]),_(i(_(o(eE,ey),F[1]),i(_(o(eM,ei),-j[1]),_(o(ep,er),X[1]))),-N[2])),i(_(i(_(o(eC,ef),F[1]),i(_(o(eM,ei),-N[1]),_(o(el,et),X[1]))),j[2]),_(i(_(o(eg,ec),F[1]),i(_(o(ep,er),-N[1]),_(o(el,et),j[1]))),-X[2]))),-Z[3]),_(i(i(_(i(_(o(eT,em),N[1]),i(_(o(ew,eu),-j[1]),_(o(eg,ec),Z[1]))),F[2]),_(i(_(o(eT,em),F[1]),i(_(o(e_,en),-j[1]),_(o(ep,er),Z[1]))),-N[2])),i(_(i(_(o(ew,eu),F[1]),i(_(o(e_,en),-N[1]),_(o(el,et),Z[1]))),j[2]),_(i(_(o(eg,ec),F[1]),i(_(o(ep,er),-N[1]),_(o(el,et),j[1]))),-Z[2]))),X[3]))))),ej=o(ez,eN);return ej[ej.length-1]}}var Z=[function(){return 0},function(){return 0},function(){return 0}];function slowInSphere(i){var o=Z[i.length];return o||(o=Z[i.length]=orientation(i.length)),o.apply(void 0,i)}function proc(i,o,s,_,F,N,j,Z){return function(o,s,X,$,ee,et){switch(arguments.length){case 0:case 1:return 0;case 2:return _(o,s);case 3:return F(o,s,X);case 4:return N(o,s,X,$);case 5:return j(o,s,X,$,ee);case 6:return Z(o,s,X,$,ee,et)}for(var er=Array(arguments.length),en=0;en<arguments.length;++en)er[en]=arguments[en];return i(er)}}(function(){for(;Z.length<=6;)Z.push(orientation(Z.length));i.exports=proc.apply(void 0,[slowInSphere].concat(Z));for(var o=0;o<=6;++o)i.exports[o]=Z[o]})()},6606:function(i,o,s){"use strict";var _=s(8167);function generateSolver(i){return(2===i?solve2d:3===i?solve3d:4===i?solve4d:5===i?solve5d:solve6d)(i<6?_[i]:_)}function solve2d(i){return function(o,s){return[i([[+s[0],+o[0][1]],[+s[1],+o[1][1]]]),i([[+o[0][0],+s[0]],[+o[1][0],+s[1]]]),i(o)]}}function solve3d(i){return function(o,s){return[i([[+s[0],+o[0][1],+o[0][2]],[+s[1],+o[1][1],+o[1][2]],[+s[2],+o[2][1],+o[2][2]]]),i([[+o[0][0],+s[0],+o[0][2]],[+o[1][0],+s[1],+o[1][2]],[+o[2][0],+s[2],+o[2][2]]]),i([[+o[0][0],+o[0][1],+s[0]],[+o[1][0],+o[1][1],+s[1]],[+o[2][0],+o[2][1],+s[2]]]),i(o)]}}function solve4d(i){return function(o,s){return[i([[+s[0],+o[0][1],+o[0][2],+o[0][3]],[+s[1],+o[1][1],+o[1][2],+o[1][3]],[+s[2],+o[2][1],+o[2][2],+o[2][3]],[+s[3],+o[3][1],+o[3][2],+o[3][3]]]),i([[+o[0][0],+s[0],+o[0][2],+o[0][3]],[+o[1][0],+s[1],+o[1][2],+o[1][3]],[+o[2][0],+s[2],+o[2][2],+o[2][3]],[+o[3][0],+s[3],+o[3][2],+o[3][3]]]),i([[+o[0][0],+o[0][1],+s[0],+o[0][3]],[+o[1][0],+o[1][1],+s[1],+o[1][3]],[+o[2][0],+o[2][1],+s[2],+o[2][3]],[+o[3][0],+o[3][1],+s[3],+o[3][3]]]),i([[+o[0][0],+o[0][1],+o[0][2],+s[0]],[+o[1][0],+o[1][1],+o[1][2],+s[1]],[+o[2][0],+o[2][1],+o[2][2],+s[2]],[+o[3][0],+o[3][1],+o[3][2],+s[3]]]),i(o)]}}function solve5d(i){return function(o,s){return[i([[+s[0],+o[0][1],+o[0][2],+o[0][3],+o[0][4]],[+s[1],+o[1][1],+o[1][2],+o[1][3],+o[1][4]],[+s[2],+o[2][1],+o[2][2],+o[2][3],+o[2][4]],[+s[3],+o[3][1],+o[3][2],+o[3][3],+o[3][4]],[+s[4],+o[4][1],+o[4][2],+o[4][3],+o[4][4]]]),i([[+o[0][0],+s[0],+o[0][2],+o[0][3],+o[0][4]],[+o[1][0],+s[1],+o[1][2],+o[1][3],+o[1][4]],[+o[2][0],+s[2],+o[2][2],+o[2][3],+o[2][4]],[+o[3][0],+s[3],+o[3][2],+o[3][3],+o[3][4]],[+o[4][0],+s[4],+o[4][2],+o[4][3],+o[4][4]]]),i([[+o[0][0],+o[0][1],+s[0],+o[0][3],+o[0][4]],[+o[1][0],+o[1][1],+s[1],+o[1][3],+o[1][4]],[+o[2][0],+o[2][1],+s[2],+o[2][3],+o[2][4]],[+o[3][0],+o[3][1],+s[3],+o[3][3],+o[3][4]],[+o[4][0],+o[4][1],+s[4],+o[4][3],+o[4][4]]]),i([[+o[0][0],+o[0][1],+o[0][2],+s[0],+o[0][4]],[+o[1][0],+o[1][1],+o[1][2],+s[1],+o[1][4]],[+o[2][0],+o[2][1],+o[2][2],+s[2],+o[2][4]],[+o[3][0],+o[3][1],+o[3][2],+s[3],+o[3][4]],[+o[4][0],+o[4][1],+o[4][2],+s[4],+o[4][4]]]),i([[+o[0][0],+o[0][1],+o[0][2],+o[0][3],+s[0]],[+o[1][0],+o[1][1],+o[1][2],+o[1][3],+s[1]],[+o[2][0],+o[2][1],+o[2][2],+o[2][3],+s[2]],[+o[3][0],+o[3][1],+o[3][2],+o[3][3],+s[3]],[+o[4][0],+o[4][1],+o[4][2],+o[4][3],+s[4]]]),i(o)]}}function solve6d(i){return function(o,s){return[i([[+s[0],+o[0][1],+o[0][2],+o[0][3],+o[0][4],+o[0][5]],[+s[1],+o[1][1],+o[1][2],+o[1][3],+o[1][4],+o[1][5]],[+s[2],+o[2][1],+o[2][2],+o[2][3],+o[2][4],+o[2][5]],[+s[3],+o[3][1],+o[3][2],+o[3][3],+o[3][4],+o[3][5]],[+s[4],+o[4][1],+o[4][2],+o[4][3],+o[4][4],+o[4][5]],[+s[5],+o[5][1],+o[5][2],+o[5][3],+o[5][4],+o[5][5]]]),i([[+o[0][0],+s[0],+o[0][2],+o[0][3],+o[0][4],+o[0][5]],[+o[1][0],+s[1],+o[1][2],+o[1][3],+o[1][4],+o[1][5]],[+o[2][0],+s[2],+o[2][2],+o[2][3],+o[2][4],+o[2][5]],[+o[3][0],+s[3],+o[3][2],+o[3][3],+o[3][4],+o[3][5]],[+o[4][0],+s[4],+o[4][2],+o[4][3],+o[4][4],+o[4][5]],[+o[5][0],+s[5],+o[5][2],+o[5][3],+o[5][4],+o[5][5]]]),i([[+o[0][0],+o[0][1],+s[0],+o[0][3],+o[0][4],+o[0][5]],[+o[1][0],+o[1][1],+s[1],+o[1][3],+o[1][4],+o[1][5]],[+o[2][0],+o[2][1],+s[2],+o[2][3],+o[2][4],+o[2][5]],[+o[3][0],+o[3][1],+s[3],+o[3][3],+o[3][4],+o[3][5]],[+o[4][0],+o[4][1],+s[4],+o[4][3],+o[4][4],+o[4][5]],[+o[5][0],+o[5][1],+s[5],+o[5][3],+o[5][4],+o[5][5]]]),i([[+o[0][0],+o[0][1],+o[0][2],+s[0],+o[0][4],+o[0][5]],[+o[1][0],+o[1][1],+o[1][2],+s[1],+o[1][4],+o[1][5]],[+o[2][0],+o[2][1],+o[2][2],+s[2],+o[2][4],+o[2][5]],[+o[3][0],+o[3][1],+o[3][2],+s[3],+o[3][4],+o[3][5]],[+o[4][0],+o[4][1],+o[4][2],+s[4],+o[4][4],+o[4][5]],[+o[5][0],+o[5][1],+o[5][2],+s[5],+o[5][4],+o[5][5]]]),i([[+o[0][0],+o[0][1],+o[0][2],+o[0][3],+s[0],+o[0][5]],[+o[1][0],+o[1][1],+o[1][2],+o[1][3],+s[1],+o[1][5]],[+o[2][0],+o[2][1],+o[2][2],+o[2][3],+s[2],+o[2][5]],[+o[3][0],+o[3][1],+o[3][2],+o[3][3],+s[3],+o[3][5]],[+o[4][0],+o[4][1],+o[4][2],+o[4][3],+s[4],+o[4][5]],[+o[5][0],+o[5][1],+o[5][2],+o[5][3],+s[5],+o[5][5]]]),i([[+o[0][0],+o[0][1],+o[0][2],+o[0][3],+o[0][4],+s[0]],[+o[1][0],+o[1][1],+o[1][2],+o[1][3],+o[1][4],+s[1]],[+o[2][0],+o[2][1],+o[2][2],+o[2][3],+o[2][4],+s[2]],[+o[3][0],+o[3][1],+o[3][2],+o[3][3],+o[3][4],+s[3]],[+o[4][0],+o[4][1],+o[4][2],+o[4][3],+o[4][4],+s[4]],[+o[5][0],+o[5][1],+o[5][2],+o[5][3],+o[5][4],+s[5]]]),i(o)]}}var F=[function(){return[[0]]},function(i,o){return[[o[0]],[i[0][0]]]}];function proc(i,o,s,_,F,N,j,Z){return function(X,$){switch(X.length){case 0:return i(X,$);case 1:return o(X,$);case 2:return s(X,$);case 3:return _(X,$);case 4:return F(X,$);case 5:return N(X,$)}var ee=j[X.length];return ee||(ee=j[X.length]=Z(X.length)),ee(X,$)}}(function(){for(;F.length<6;)F.push(generateSolver(F.length));i.exports=proc.apply(void 0,F.concat([F,generateSolver]));for(var o=0;o<6;++o)i.exports[o]=F[o]})()},417:function(i,o,s){"use strict";var _=s(9660),F=s(9662),N=s(8289),j=s(4078),Z=(3+17763568394002505e-31)*11102230246251565e-32,X=(7+6217248937900877e-30)*11102230246251565e-32;function orientation_3(i,o,s,_){return function(s,F,N){var j=_(i(i(o(F[1],N[0]),o(-N[1],F[0])),i(o(s[1],F[0]),o(-F[1],s[0]))),i(o(s[1],N[0]),o(-N[1],s[0])));return j[j.length-1]}}function orientation_4(i,o,s,_){return function(F,N,j,Z){var X=_(i(i(s(i(o(j[1],Z[0]),o(-Z[1],j[0])),N[2]),i(s(i(o(N[1],Z[0]),o(-Z[1],N[0])),-j[2]),s(i(o(N[1],j[0]),o(-j[1],N[0])),Z[2]))),i(s(i(o(N[1],Z[0]),o(-Z[1],N[0])),F[2]),i(s(i(o(F[1],Z[0]),o(-Z[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),Z[2])))),i(i(s(i(o(j[1],Z[0]),o(-Z[1],j[0])),F[2]),i(s(i(o(F[1],Z[0]),o(-Z[1],F[0])),-j[2]),s(i(o(F[1],j[0]),o(-j[1],F[0])),Z[2]))),i(s(i(o(N[1],j[0]),o(-j[1],N[0])),F[2]),i(s(i(o(F[1],j[0]),o(-j[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),j[2])))));return X[X.length-1]}}function orientation_5(i,o,s,_){return function(F,N,j,Z,X){var $=_(i(i(i(s(i(s(i(o(Z[1],X[0]),o(-X[1],Z[0])),j[2]),i(s(i(o(j[1],X[0]),o(-X[1],j[0])),-Z[2]),s(i(o(j[1],Z[0]),o(-Z[1],j[0])),X[2]))),N[3]),i(s(i(s(i(o(Z[1],X[0]),o(-X[1],Z[0])),N[2]),i(s(i(o(N[1],X[0]),o(-X[1],N[0])),-Z[2]),s(i(o(N[1],Z[0]),o(-Z[1],N[0])),X[2]))),-j[3]),s(i(s(i(o(j[1],X[0]),o(-X[1],j[0])),N[2]),i(s(i(o(N[1],X[0]),o(-X[1],N[0])),-j[2]),s(i(o(N[1],j[0]),o(-j[1],N[0])),X[2]))),Z[3]))),i(s(i(s(i(o(j[1],Z[0]),o(-Z[1],j[0])),N[2]),i(s(i(o(N[1],Z[0]),o(-Z[1],N[0])),-j[2]),s(i(o(N[1],j[0]),o(-j[1],N[0])),Z[2]))),-X[3]),i(s(i(s(i(o(Z[1],X[0]),o(-X[1],Z[0])),N[2]),i(s(i(o(N[1],X[0]),o(-X[1],N[0])),-Z[2]),s(i(o(N[1],Z[0]),o(-Z[1],N[0])),X[2]))),F[3]),s(i(s(i(o(Z[1],X[0]),o(-X[1],Z[0])),F[2]),i(s(i(o(F[1],X[0]),o(-X[1],F[0])),-Z[2]),s(i(o(F[1],Z[0]),o(-Z[1],F[0])),X[2]))),-N[3])))),i(i(s(i(s(i(o(N[1],X[0]),o(-X[1],N[0])),F[2]),i(s(i(o(F[1],X[0]),o(-X[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),X[2]))),Z[3]),i(s(i(s(i(o(N[1],Z[0]),o(-Z[1],N[0])),F[2]),i(s(i(o(F[1],Z[0]),o(-Z[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),Z[2]))),-X[3]),s(i(s(i(o(j[1],Z[0]),o(-Z[1],j[0])),N[2]),i(s(i(o(N[1],Z[0]),o(-Z[1],N[0])),-j[2]),s(i(o(N[1],j[0]),o(-j[1],N[0])),Z[2]))),F[3]))),i(s(i(s(i(o(j[1],Z[0]),o(-Z[1],j[0])),F[2]),i(s(i(o(F[1],Z[0]),o(-Z[1],F[0])),-j[2]),s(i(o(F[1],j[0]),o(-j[1],F[0])),Z[2]))),-N[3]),i(s(i(s(i(o(N[1],Z[0]),o(-Z[1],N[0])),F[2]),i(s(i(o(F[1],Z[0]),o(-Z[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),Z[2]))),j[3]),s(i(s(i(o(N[1],j[0]),o(-j[1],N[0])),F[2]),i(s(i(o(F[1],j[0]),o(-j[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),j[2]))),-Z[3]))))),i(i(i(s(i(s(i(o(Z[1],X[0]),o(-X[1],Z[0])),j[2]),i(s(i(o(j[1],X[0]),o(-X[1],j[0])),-Z[2]),s(i(o(j[1],Z[0]),o(-Z[1],j[0])),X[2]))),F[3]),s(i(s(i(o(Z[1],X[0]),o(-X[1],Z[0])),F[2]),i(s(i(o(F[1],X[0]),o(-X[1],F[0])),-Z[2]),s(i(o(F[1],Z[0]),o(-Z[1],F[0])),X[2]))),-j[3])),i(s(i(s(i(o(j[1],X[0]),o(-X[1],j[0])),F[2]),i(s(i(o(F[1],X[0]),o(-X[1],F[0])),-j[2]),s(i(o(F[1],j[0]),o(-j[1],F[0])),X[2]))),Z[3]),s(i(s(i(o(j[1],Z[0]),o(-Z[1],j[0])),F[2]),i(s(i(o(F[1],Z[0]),o(-Z[1],F[0])),-j[2]),s(i(o(F[1],j[0]),o(-j[1],F[0])),Z[2]))),-X[3]))),i(i(s(i(s(i(o(j[1],X[0]),o(-X[1],j[0])),N[2]),i(s(i(o(N[1],X[0]),o(-X[1],N[0])),-j[2]),s(i(o(N[1],j[0]),o(-j[1],N[0])),X[2]))),F[3]),s(i(s(i(o(j[1],X[0]),o(-X[1],j[0])),F[2]),i(s(i(o(F[1],X[0]),o(-X[1],F[0])),-j[2]),s(i(o(F[1],j[0]),o(-j[1],F[0])),X[2]))),-N[3])),i(s(i(s(i(o(N[1],X[0]),o(-X[1],N[0])),F[2]),i(s(i(o(F[1],X[0]),o(-X[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),X[2]))),j[3]),s(i(s(i(o(N[1],j[0]),o(-j[1],N[0])),F[2]),i(s(i(o(F[1],j[0]),o(-j[1],F[0])),-N[2]),s(i(o(F[1],N[0]),o(-N[1],F[0])),j[2]))),-X[3])))));return $[$.length-1]}}function orientation(i){return(3===i?orientation_3:4===i?orientation_4:orientation_5)(F,_,N,j)}var $=orientation(3),ee=orientation(4),et=[function(){return 0},function(){return 0},function(i,o){return o[0]-i[0]},function(i,o,s){var _,F=(i[1]-s[1])*(o[0]-s[0]),N=(i[0]-s[0])*(o[1]-s[1]),j=F-N;if(F>0){if(N<=0)return j;_=F+N}else{if(!(F<0)||N>=0)return j;_=-(F+N)}var X=Z*_;return j>=X||j<=-X?j:$(i,o,s)},function(i,o,s,_){var F=i[0]-_[0],N=o[0]-_[0],j=s[0]-_[0],Z=i[1]-_[1],$=o[1]-_[1],et=s[1]-_[1],er=i[2]-_[2],en=o[2]-_[2],ei=s[2]-_[2],eo=N*et,es=j*$,el=j*Z,ec=F*et,eu=F*$,ef=N*Z,ed=er*(eo-es)+en*(el-ec)+ei*(eu-ef),eh=X*((Math.abs(eo)+Math.abs(es))*Math.abs(er)+(Math.abs(el)+Math.abs(ec))*Math.abs(en)+(Math.abs(eu)+Math.abs(ef))*Math.abs(ei));return ed>eh||-ed>eh?ed:ee(i,o,s,_)}];function slowOrient(i){var o=et[i.length];return o||(o=et[i.length]=orientation(i.length)),o.apply(void 0,i)}function proc(i,o,s,_,F,N,j){return function(o,s,Z,X,$){switch(arguments.length){case 0:case 1:return 0;case 2:return _(o,s);case 3:return F(o,s,Z);case 4:return N(o,s,Z,X);case 5:return j(o,s,Z,X,$)}for(var ee=Array(arguments.length),et=0;et<arguments.length;++et)ee[et]=arguments[et];return i(ee)}}(function(){for(;et.length<=5;)et.push(orientation(et.length));i.exports=proc.apply(void 0,[slowOrient].concat(et));for(var o=0;o<=5;++o)i.exports[o]=et[o]})()},2019:function(i,o,s){"use strict";var _=s(9662),F=s(8289);function robustProduct(i,o){if(1===i.length)return F(o,i[0]);if(1===o.length)return F(i,o[0]);if(0===i.length||0===o.length)return[0];var s=[0];if(i.length<o.length)for(var N=0;N<i.length;++N)s=_(s,F(o,i[N]));else for(var N=0;N<o.length;++N)s=_(s,F(i,o[N]));return s}i.exports=robustProduct},8289:function(i,o,s){"use strict";var _=s(9660),F=s(87);function scaleLinearExpansion(i,o){var s=i.length;if(1===s){var N=_(i[0],o);return N[0]?N:[N[1]]}var j=Array(2*s),Z=[.1,.1],X=[.1,.1],$=0;_(i[0],o,Z),Z[0]&&(j[$++]=Z[0]);for(var ee=1;ee<s;++ee){_(i[ee],o,X),F(Z[1],X[0],Z),Z[0]&&(j[$++]=Z[0]);var et=X[1],er=Z[1],en=et+er,ei=er-(en-et);Z[1]=en,ei&&(j[$++]=ei)}return Z[1]&&(j[$++]=Z[1]),0===$&&(j[$++]=0),j.length=$,j}i.exports=scaleLinearExpansion},4434:function(i,o,s){"use strict";i.exports=segmentsIntersect;var _=s(417)[3];function checkCollinear(i,o,s,_){for(var F=0;F<2;++F){var N=i[F],j=o[F],Z=Math.min(N,j),X=Math.max(N,j),$=s[F],ee=_[F],et=Math.min($,ee);if(Math.max($,ee)<Z||X<et)return!1}return!0}function segmentsIntersect(i,o,s,F){var N=_(i,s,F),j=_(o,s,F);if(N>0&&j>0||N<0&&j<0)return!1;var Z=_(s,i,o),X=_(F,i,o);return(!(Z>0)||!(X>0))&&(!(Z<0)||!(X<0))&&(0!==N||0!==j||0!==Z||0!==X||checkCollinear(i,o,s,F))}},4078:function(i){"use strict";function scalarScalar(i,o){var s=i+o,_=s-i,F=i-(s-_)+(o-_);return F?[F,s]:[s]}function robustSubtract(i,o){var s,_,F,N,j,Z,X=0|i.length,$=0|o.length;if(1===X&&1===$)return scalarScalar(i[0],-o[0]);var ee=Array(X+$),et=0,er=0,en=0,ei=Math.abs,eo=i[0],es=ei(eo),el=-o[en],ec=ei(el);es<ec?(_=eo,(er+=1)<X&&(es=ei(eo=i[er]))):(_=el,(en+=1)<$&&(ec=ei(el=-o[en]))),er<X&&es<ec||en>=$?(s=eo,(er+=1)<X&&(es=ei(eo=i[er]))):(s=el,(en+=1)<$&&(ec=ei(el=-o[en])));for(var eu=s+_,ef=eu-s,ed=_-ef,eh=ed,ep=eu;er<X&&en<$;)es<ec?(s=eo,(er+=1)<X&&(es=ei(eo=i[er]))):(s=el,(en+=1)<$&&(ec=ei(el=-o[en]))),ef=(eu=s+(_=eh))-s,(ed=_-ef)&&(ee[et++]=ed),N=(F=ep+eu)-ep,eh=ep-(F-N)+(eu-N),ep=F;for(;er<X;)ef=(eu=(s=eo)+(_=eh))-s,(ed=_-ef)&&(ee[et++]=ed),N=(F=ep+eu)-ep,eh=ep-(F-N)+(eu-N),ep=F,(er+=1)<X&&(eo=i[er]);for(;en<$;)ef=(eu=(s=el)+(_=eh))-s,(ed=_-ef)&&(ee[et++]=ed),N=(F=ep+eu)-ep,eh=ep-(F-N)+(eu-N),ep=F,(en+=1)<$&&(el=-o[en]);return eh&&(ee[et++]=eh),ep&&(ee[et++]=ep),et||(ee[et++]=0),ee.length=et,ee}i.exports=robustSubtract},9662:function(i){"use strict";function scalarScalar(i,o){var s=i+o,_=s-i,F=i-(s-_)+(o-_);return F?[F,s]:[s]}function linearExpansionSum(i,o){var s,_,F,N,j,Z,X=0|i.length,$=0|o.length;if(1===X&&1===$)return scalarScalar(i[0],o[0]);var ee=Array(X+$),et=0,er=0,en=0,ei=Math.abs,eo=i[0],es=ei(eo),el=o[en],ec=ei(el);es<ec?(_=eo,(er+=1)<X&&(es=ei(eo=i[er]))):(_=el,(en+=1)<$&&(ec=ei(el=o[en]))),er<X&&es<ec||en>=$?(s=eo,(er+=1)<X&&(es=ei(eo=i[er]))):(s=el,(en+=1)<$&&(ec=ei(el=o[en])));for(var eu=s+_,ef=eu-s,ed=_-ef,eh=ed,ep=eu;er<X&&en<$;)es<ec?(s=eo,(er+=1)<X&&(es=ei(eo=i[er]))):(s=el,(en+=1)<$&&(ec=ei(el=o[en]))),ef=(eu=s+(_=eh))-s,(ed=_-ef)&&(ee[et++]=ed),N=(F=ep+eu)-ep,eh=ep-(F-N)+(eu-N),ep=F;for(;er<X;)ef=(eu=(s=eo)+(_=eh))-s,(ed=_-ef)&&(ee[et++]=ed),N=(F=ep+eu)-ep,eh=ep-(F-N)+(eu-N),ep=F,(er+=1)<X&&(eo=i[er]);for(;en<$;)ef=(eu=(s=el)+(_=eh))-s,(ed=_-ef)&&(ee[et++]=ed),N=(F=ep+eu)-ep,eh=ep-(F-N)+(eu-N),ep=F,(en+=1)<$&&(el=o[en]);return eh&&(ee[et++]=eh),ep&&(ee[et++]=ep),et||(ee[et++]=0),ee.length=et,ee}i.exports=linearExpansionSum},8691:function(i,o,s){"use strict";i.exports=boundary;var _=s(2692),F=s(7037);function boundary(i){return F(_(i))}},7212:function(i,o,s){"use strict";i.exports=extractContour;var _=s(5050),F=s(5306),N=s(8729),j=s(1168);function getDimension(i){for(var o=i.length,s=0,_=0;_<o;++_)s=0|Math.max(s,i[_].length);return s-1}function getSigns(i,o){for(var s=i.length,_=F.mallocUint8(s),N=0;N<s;++N)_[N]=i[N]<o|0;return _}function getEdges(i,o){for(var s=i.length,j=o*(o+1)/2*s|0,Z=F.mallocUint32(2*j),X=0,$=0;$<s;++$)for(var ee=i[$],o=ee.length,et=0;et<o;++et)for(var er=0;er<et;++er){var en=ee[er],ei=ee[et];Z[X++]=0|Math.min(en,ei),Z[X++]=0|Math.max(en,ei)}N(_(Z,[X/2|0,2]));for(var eo=2,$=2;$<X;$+=2)(Z[$-2]!==Z[$]||Z[$-1]!==Z[$+1])&&(Z[eo++]=Z[$],Z[eo++]=Z[$+1]);return _(Z,[eo/2|0,2])}function getCrossingWeights(i,o,s,N){for(var j=i.data,Z=i.shape[0],X=F.mallocDouble(Z),$=0,ee=0;ee<Z;++ee){var et=j[2*ee],er=j[2*ee+1];if(s[et]!==s[er]){var en=o[et],ei=o[er];j[2*$]=et,j[2*$+1]=er,X[$++]=(ei-N)/(ei-en)}}return i.shape[0]=$,_(X,[$])}function getCascade(i,o){var s=F.mallocInt32(2*o),_=i.shape[0],N=i.data;s[0]=0;for(var j=0,Z=0;Z<_;++Z){var X=N[2*Z];if(X!==j){for(s[2*j+1]=Z;++j<X;)s[2*j]=Z,s[2*j+1]=Z;s[2*j]=Z}}for(s[2*j+1]=_;++j<o;)s[2*j]=s[2*j+1]=_;return s}function unpackEdges(i){for(var o=0|i.shape[0],s=i.data,_=Array(o),F=0;F<o;++F)_[F]=[s[2*F],s[2*F+1]];return _}function extractContour(i,o,s,_){if(s=s||0,void 0===_&&(_=getDimension(i)),0===i.length||_<1)return{cells:[],vertexIds:[],vertexWeights:[]};var N=getSigns(o,+s),Z=getEdges(i,_),X=getCrossingWeights(Z,o,N,+s),$=getCascade(Z,0|o.length),ee=j(_)(i,Z.data,$,N),et=unpackEdges(Z),er=[].slice.call(X.data,0,X.shape[0]);return F.free(N),F.free(Z.data),F.free(X.data),F.free($),{cells:ee,vertexIds:et,vertexWeights:er}}},1168:function(i){"use strict";i.exports=getPolygonizer;var o=[function(){return function(i,o,s,_){for(var F=i.length,N=0;N<F;++N)i[N].length;return[]}},function(){function B(i,o,s,_){for(var F=0|Math.min(s,_),N=0|Math.max(s,_),j=i[2*F],Z=i[2*F+1];j<Z;){var X=j+Z>>1,$=o[2*X+1];if($===N)return X;N<$?Z=X:j=X+1}return j}return function(i,o,s,_){for(var F=i.length,N=[],j=0;j<F;++j){var Z=i[j];if(2===Z.length){var X=(_[Z[0]]<<0)+(_[Z[1]]<<1);if(0===X||3===X)continue;switch(X){case 0:break;case 1:N.push([B(s,o,Z[0],Z[1])]);break;case 2:N.push([B(s,o,Z[1],Z[0])])}}}return N}},function(){function B(i,o,s,_){for(var F=0|Math.min(s,_),N=0|Math.max(s,_),j=i[2*F],Z=i[2*F+1];j<Z;){var X=j+Z>>1,$=o[2*X+1];if($===N)return X;N<$?Z=X:j=X+1}return j}return function(i,o,s,_){for(var F=i.length,N=[],j=0;j<F;++j){var Z=i[j],X=Z.length;if(3===X){var $=(_[Z[0]]<<0)+(_[Z[1]]<<1)+(_[Z[2]]<<2);if(0===$||7===$)continue;switch($){case 0:break;case 1:N.push([B(s,o,Z[0],Z[2]),B(s,o,Z[0],Z[1])]);break;case 2:N.push([B(s,o,Z[1],Z[0]),B(s,o,Z[1],Z[2])]);break;case 3:N.push([B(s,o,Z[0],Z[2]),B(s,o,Z[1],Z[2])]);break;case 4:N.push([B(s,o,Z[2],Z[1]),B(s,o,Z[2],Z[0])]);break;case 5:N.push([B(s,o,Z[2],Z[1]),B(s,o,Z[0],Z[1])]);break;case 6:N.push([B(s,o,Z[1],Z[0]),B(s,o,Z[2],Z[0])])}}else if(2===X){var $=(_[Z[0]]<<0)+(_[Z[1]]<<1);if(0===$||3===$)continue;switch($){case 0:break;case 1:N.push([B(s,o,Z[0],Z[1])]);break;case 2:N.push([B(s,o,Z[1],Z[0])])}}}return N}},function(){function B(i,o,s,_){for(var F=0|Math.min(s,_),N=0|Math.max(s,_),j=i[2*F],Z=i[2*F+1];j<Z;){var X=j+Z>>1,$=o[2*X+1];if($===N)return X;N<$?Z=X:j=X+1}return j}return function(i,o,s,_){for(var F=i.length,N=[],j=0;j<F;++j){var Z=i[j],X=Z.length;if(4===X){var $=(_[Z[0]]<<0)+(_[Z[1]]<<1)+(_[Z[2]]<<2)+(_[Z[3]]<<3);if(0===$||15===$)continue;switch($){case 0:break;case 1:N.push([B(s,o,Z[0],Z[1]),B(s,o,Z[0],Z[2]),B(s,o,Z[0],Z[3])]);break;case 2:N.push([B(s,o,Z[1],Z[2]),B(s,o,Z[1],Z[0]),B(s,o,Z[1],Z[3])]);break;case 3:N.push([B(s,o,Z[1],Z[2]),B(s,o,Z[0],Z[2]),B(s,o,Z[0],Z[3])],[B(s,o,Z[1],Z[3]),B(s,o,Z[1],Z[2]),B(s,o,Z[0],Z[3])]);break;case 4:N.push([B(s,o,Z[2],Z[0]),B(s,o,Z[2],Z[1]),B(s,o,Z[2],Z[3])]);break;case 5:N.push([B(s,o,Z[0],Z[1]),B(s,o,Z[2],Z[1]),B(s,o,Z[0],Z[3])],[B(s,o,Z[2],Z[1]),B(s,o,Z[2],Z[3]),B(s,o,Z[0],Z[3])]);break;case 6:N.push([B(s,o,Z[2],Z[0]),B(s,o,Z[1],Z[0]),B(s,o,Z[1],Z[3])],[B(s,o,Z[2],Z[3]),B(s,o,Z[2],Z[0]),B(s,o,Z[1],Z[3])]);break;case 7:N.push([B(s,o,Z[0],Z[3]),B(s,o,Z[1],Z[3]),B(s,o,Z[2],Z[3])]);break;case 8:N.push([B(s,o,Z[3],Z[1]),B(s,o,Z[3],Z[0]),B(s,o,Z[3],Z[2])]);break;case 9:N.push([B(s,o,Z[3],Z[1]),B(s,o,Z[0],Z[1]),B(s,o,Z[0],Z[2])],[B(s,o,Z[3],Z[2]),B(s,o,Z[3],Z[1]),B(s,o,Z[0],Z[2])]);break;case 10:N.push([B(s,o,Z[1],Z[0]),B(s,o,Z[3],Z[0]),B(s,o,Z[1],Z[2])],[B(s,o,Z[3],Z[0]),B(s,o,Z[3],Z[2]),B(s,o,Z[1],Z[2])]);break;case 11:N.push([B(s,o,Z[1],Z[2]),B(s,o,Z[0],Z[2]),B(s,o,Z[3],Z[2])]);break;case 12:N.push([B(s,o,Z[3],Z[0]),B(s,o,Z[2],Z[0]),B(s,o,Z[2],Z[1])],[B(s,o,Z[3],Z[1]),B(s,o,Z[3],Z[0]),B(s,o,Z[2],Z[1])]);break;case 13:N.push([B(s,o,Z[0],Z[1]),B(s,o,Z[2],Z[1]),B(s,o,Z[3],Z[1])]);break;case 14:N.push([B(s,o,Z[2],Z[0]),B(s,o,Z[1],Z[0]),B(s,o,Z[3],Z[0])])}}else if(3===X){var $=(_[Z[0]]<<0)+(_[Z[1]]<<1)+(_[Z[2]]<<2);if(0===$||7===$)continue;switch($){case 0:break;case 1:N.push([B(s,o,Z[0],Z[2]),B(s,o,Z[0],Z[1])]);break;case 2:N.push([B(s,o,Z[1],Z[0]),B(s,o,Z[1],Z[2])]);break;case 3:N.push([B(s,o,Z[0],Z[2]),B(s,o,Z[1],Z[2])]);break;case 4:N.push([B(s,o,Z[2],Z[1]),B(s,o,Z[2],Z[0])]);break;case 5:N.push([B(s,o,Z[2],Z[1]),B(s,o,Z[0],Z[1])]);break;case 6:N.push([B(s,o,Z[1],Z[0]),B(s,o,Z[2],Z[0])])}}else if(2===X){var $=(_[Z[0]]<<0)+(_[Z[1]]<<1);if(0===$||3===$)continue;switch($){case 0:break;case 1:N.push([B(s,o,Z[0],Z[1])]);break;case 2:N.push([B(s,o,Z[1],Z[0])])}}}return N}}];function getPolygonizer(i){return o[i]()}},8211:function(i,o,s){"use strict";var _=s(2288),F=s(1731);function compareCells(i,o){var s=i.length,_=i.length-o.length,F=Math.min;if(_)return _;switch(s){case 0:return 0;case 1:return i[0]-o[0];case 2:var N=i[0]+i[1]-o[0]-o[1];if(N)return N;return F(i[0],i[1])-F(o[0],o[1]);case 3:var j=i[0]+i[1],Z=o[0]+o[1];if(N=j+i[2]-(Z+o[2]))return N;var X=F(i[0],i[1]),$=F(o[0],o[1]),N=F(X,i[2])-F($,o[2]);if(N)return N;return F(X+i[2],j)-F($+o[2],Z);default:var ee=i.slice(0);ee.sort();var et=o.slice(0);et.sort();for(var er=0;er<s;++er)if(_=ee[er]-et[er])return _;return 0}}function compareZipped(i,o){return compareCells(i[0],o[0])}function normalize(i,o){if(!o)return i.sort(compareCells),i;for(var s=i.length,_=Array(s),F=0;F<s;++F)_[F]=[i[F],o[F]];_.sort(compareZipped);for(var F=0;F<s;++F)i[F]=_[F][0],o[F]=_[F][1];return i}function unique(i){if(0===i.length)return[];for(var o=1,s=i.length,_=1;_<s;++_){var F=i[_];if(compareCells(F,i[_-1])){if(_===o){o++;continue}i[o++]=F}}return i.length=o,i}function findCell(i,o){for(var s=0,_=i.length-1,F=-1;s<=_;){var N=s+_>>1,j=compareCells(i[N],o);j<=0?(0===j&&(F=N),s=N+1):j>0&&(_=N-1)}return F}function skeleton(i,o){if(o<0)return[];for(var s=[],F=(1<<o+1)-1,N=0;N<i.length;++N)for(var j=i[N],Z=F;Z<1<<j.length;Z=_.nextCombination(Z)){for(var X=Array(o+1),$=0,ee=0;ee<j.length;++ee)Z&1<<ee&&(X[$++]=j[ee]);s.push(X)}return normalize(s)}o.H=compareCells},9392:function(i,o){"use strict";function countTrailingZeros(i){var o=32;return(i&=-i)&&o--,65535&i&&(o-=16),16711935&i&&(o-=8),252645135&i&&(o-=4),858993459&i&&(o-=2),1431655765&i&&(o-=1),o}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(i){return(i>0)-(i<0)},o.abs=function(i){var o=i>>31;return(i^o)-o},o.min=function(i,o){return o^(i^o)&-(i<o)},o.max=function(i,o){return i^(i^o)&-(i<o)},o.isPow2=function(i){return!(i&i-1)&&!!i},o.log2=function(i){var o,s;return o=(i>65535)<<4,i>>>=o,s=(i>255)<<3,i>>>=s,o|=s,s=(i>15)<<2,i>>>=s,o|=s,s=(i>3)<<1,i>>>=s,(o|=s)|i>>1},o.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},o.popCount=function(i){return i-=i>>>1&1431655765,((i=(858993459&i)+(i>>>2&858993459))+(i>>>4)&252645135)*16843009>>>24},o.countTrailingZeros=countTrailingZeros,o.nextPow2=function(i){return i+=0===i,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)+1},o.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)-(i>>>1)},o.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,27030>>>(i&=15)&1};var s=Array(256);(function(i){for(var o=0;o<256;++o){var s=o,_=o,F=7;for(s>>>=1;s;s>>>=1)_<<=1,_|=1&s,--F;i[o]=_<<F&255}})(s),o.reverse=function(i){return s[255&i]<<24|s[i>>>8&255]<<16|s[i>>>16&255]<<8|s[i>>>24&255]},o.interleave2=function(i,o){return i&=65535,o&=65535,(i=((i=((i=((i=(i|i<<8)&16711935)|i<<4)&252645135)|i<<2)&858993459)|i<<1)&1431655765)|(o=((o=((o=((o=(o|o<<8)&16711935)|o<<4)&252645135)|o<<2)&858993459)|o<<1)&1431655765)<<1},o.deinterleave2=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1431655765)|i>>>1)&858993459)|i>>>2)&252645135)|i>>>4)&16711935)|i>>>16)&65535)<<16>>16},o.interleave3=function(i,o,s){return i&=1023,o&=1023,s&=1023,s=((s=((s=((s=(s|s<<16)&4278190335)|s<<8)&251719695)|s<<4)&3272356035)|s<<2)&1227133513,(i=((i=((i=((i=(i|i<<16)&4278190335)|i<<8)&251719695)|i<<4)&3272356035)|i<<2)&1227133513|(o=((o=((o=((o=(o|o<<16)&4278190335)|o<<8)&251719695)|o<<4)&3272356035)|o<<2)&1227133513)<<1)|s<<2},o.deinterleave3=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1227133513)|i>>>2)&3272356035)|i>>>4)&251719695)|i>>>8)&4278190335)|i>>>16)&1023)<<22>>22},o.nextCombination=function(i){var o=i|i-1;return o+1|(~o&-~o)-1>>>countTrailingZeros(i)+1}},6656:function(i,o,s){"use strict";var _=s(9392),F=s(9521);function dimension(i){for(var o=0,s=Math.max,_=0,F=i.length;_<F;++_)o=s(o,i[_].length);return o-1}function countVertices(i){for(var o=-1,s=Math.max,_=0,F=i.length;_<F;++_)for(var N=i[_],j=0,Z=N.length;j<Z;++j)o=s(o,N[j]);return o+1}function cloneCells(i){for(var o=Array(i.length),s=0,_=i.length;s<_;++s)o[s]=i[s].slice(0);return o}function compareCells(i,o){var s=i.length,_=i.length-o.length,F=Math.min;if(_)return _;switch(s){case 0:return 0;case 1:return i[0]-o[0];case 2:var N=i[0]+i[1]-o[0]-o[1];if(N)return N;return F(i[0],i[1])-F(o[0],o[1]);case 3:var j=i[0]+i[1],Z=o[0]+o[1];if(N=j+i[2]-(Z+o[2]))return N;var X=F(i[0],i[1]),$=F(o[0],o[1]),N=F(X,i[2])-F($,o[2]);if(N)return N;return F(X+i[2],j)-F($+o[2],Z);default:var ee=i.slice(0);ee.sort();var et=o.slice(0);et.sort();for(var er=0;er<s;++er)if(_=ee[er]-et[er])return _;return 0}}function compareZipped(i,o){return compareCells(i[0],o[0])}function normalize(i,o){if(!o)return i.sort(compareCells),i;for(var s=i.length,_=Array(s),F=0;F<s;++F)_[F]=[i[F],o[F]];_.sort(compareZipped);for(var F=0;F<s;++F)i[F]=_[F][0],o[F]=_[F][1];return i}function unique(i){if(0===i.length)return[];for(var o=1,s=i.length,_=1;_<s;++_){var F=i[_];if(compareCells(F,i[_-1])){if(_===o){o++;continue}i[o++]=F}}return i.length=o,i}function findCell(i,o){for(var s=0,_=i.length-1,F=-1;s<=_;){var N=s+_>>1,j=compareCells(i[N],o);j<=0?(0===j&&(F=N),s=N+1):j>0&&(_=N-1)}return F}function incidence(i,o){for(var s=Array(i.length),F=0,N=s.length;F<N;++F)s[F]=[];for(var j=[],F=0,Z=o.length;F<Z;++F)for(var X=o[F],$=X.length,ee=1,et=1<<$;ee<et;++ee){j.length=_.popCount(ee);for(var er=0,en=0;en<$;++en)ee&1<<en&&(j[er++]=X[en]);var ei=findCell(i,j);if(!(ei<0))for(;s[ei++].push(F),!(ei>=i.length)&&0===compareCells(i[ei],j););}return s}function dual(i,o){if(!o)return incidence(unique(skeleton(i,0)),i,0);for(var s=Array(o),_=0;_<o;++_)s[_]=[];for(var _=0,F=i.length;_<F;++_)for(var N=i[_],j=0,Z=N.length;j<Z;++j)s[N[j]].push(_);return s}function explode(i){for(var o=[],s=0,_=i.length;s<_;++s)for(var F=i[s],N=0|F.length,j=1,Z=1<<N;j<Z;++j){for(var X=[],$=0;$<N;++$)j>>>$&1&&X.push(F[$]);o.push(X)}return normalize(o)}function skeleton(i,o){if(o<0)return[];for(var s=[],F=(1<<o+1)-1,N=0;N<i.length;++N)for(var j=i[N],Z=F;Z<1<<j.length;Z=_.nextCombination(Z)){for(var X=Array(o+1),$=0,ee=0;ee<j.length;++ee)Z&1<<ee&&(X[$++]=j[ee]);s.push(X)}return normalize(s)}function boundary(i){for(var o=[],s=0,_=i.length;s<_;++s)for(var F=i[s],N=0,j=F.length;N<j;++N){for(var Z=Array(F.length-1),X=0,$=0;X<j;++X)X!==N&&(Z[$++]=F[X]);o.push(Z)}return normalize(o)}function connectedComponents_dense(i,o){for(var s=new F(o),_=0;_<i.length;++_)for(var N=i[_],j=0;j<N.length;++j)for(var Z=j+1;Z<N.length;++Z)s.link(N[j],N[Z]);for(var X=[],$=s.ranks,_=0;_<$.length;++_)$[_]=-1;for(var _=0;_<i.length;++_){var ee=s.find(i[_][0]);$[ee]<0?($[ee]=X.length,X.push([i[_].slice(0)])):X[$[ee]].push(i[_].slice(0))}return X}function connectedComponents_sparse(i){for(var o=unique(normalize(skeleton(i,0))),s=new F(o.length),_=0;_<i.length;++_)for(var N=i[_],j=0;j<N.length;++j)for(var Z=findCell(o,[N[j]]),X=j+1;X<N.length;++X)s.link(Z,findCell(o,[N[X]]));for(var $=[],ee=s.ranks,_=0;_<ee.length;++_)ee[_]=-1;for(var _=0;_<i.length;++_){var et=s.find(findCell(o,[i[_][0]]));ee[et]<0?(ee[et]=$.length,$.push([i[_].slice(0)])):$[ee[et]].push(i[_].slice(0))}return $}function connectedComponents(i,o){return o?connectedComponents_dense(i,o):connectedComponents_sparse(i)}o.dimension=dimension,o.countVertices=countVertices,o.cloneCells=cloneCells,o.compareCells=compareCells,o.normalize=normalize,o.unique=unique,o.findCell=findCell,o.incidence=incidence,o.dual=dual,o.explode=explode,o.skeleton=skeleton,o.boundary=boundary,o.connectedComponents=connectedComponents},9521:function(i){"use strict";function UnionFind(i){this.roots=Array(i),this.ranks=Array(i);for(var o=0;o<i;++o)this.roots[o]=o,this.ranks[o]=0}i.exports=UnionFind,UnionFind.prototype.length=function(){return this.roots.length},UnionFind.prototype.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},UnionFind.prototype.find=function(i){for(var o=this.roots;o[i]!==i;){var s=o[i];o[i]=o[s],i=s}return i},UnionFind.prototype.link=function(i,o){var s=this.find(i),_=this.find(o);if(s!==_){var F=this.ranks,N=this.roots,j=F[s],Z=F[_];j<Z?N[s]=_:Z<j?N[_]=s:(N[_]=s,++F[s])}}},8243:function(i,o,s){"use strict";i.exports=simplifyPolygon;var _=s(417),F=s(6656);function errorWeight(i,o,s){return Math.abs(_(i,o,s))/Math.sqrt(Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2))}function simplifyPolygon(i,o,s){for(var _=o.length,N=i.length,j=Array(_),Z=Array(_),X=Array(_),$=Array(_),ee=0;ee<_;++ee)j[ee]=Z[ee]=-1,X[ee]=1/0,$[ee]=!1;for(var ee=0;ee<N;++ee){var et=i[ee];if(2!==et.length)throw Error("Input must be a graph");var er=et[1],en=et[0];-1!==Z[en]?Z[en]=-2:Z[en]=er,-1!==j[er]?j[er]=-2:j[er]=en}function computeWeight(i){if($[i])return 1/0;var s=j[i],_=Z[i];return s<0||_<0?1/0:errorWeight(o[i],o[s],o[_])}function heapSwap(i,o){var s=ei[i],_=ei[o];ei[i]=_,ei[o]=s,eo[s]=o,eo[_]=i}function heapWeight(i){return X[ei[i]]}function heapParent(i){return 1&i?i-1>>1:(i>>1)-1}function heapDown(i){for(var o=heapWeight(i);;){var s=o,_=2*i+1,F=2*(i+1),N=i;if(_<es){var j=heapWeight(_);j<s&&(N=_,s=j)}if(F<es&&heapWeight(F)<s&&(N=F),N===i)return i;heapSwap(i,N),i=N}}function heapUp(i){for(var o=heapWeight(i);i>0;){var s=heapParent(i);if(s>=0&&o<heapWeight(s)){heapSwap(i,s),i=s;continue}return i}}function heapPop(){if(es>0){var i=ei[0];return heapSwap(0,es-1),es-=1,heapDown(0),i}return -1}function heapUpdate(i,o){var s=ei[i];return X[s]===o?i:(X[s]=-1/0,heapUp(i),heapPop(),X[s]=o,heapUp((es+=1)-1))}function kill(i){if(!$[i]){$[i]=!0;var o=j[i],s=Z[i];j[s]>=0&&(j[s]=o),Z[o]>=0&&(Z[o]=s),eo[o]>=0&&heapUpdate(eo[o],computeWeight(o)),eo[s]>=0&&heapUpdate(eo[s],computeWeight(s))}}for(var ei=[],eo=Array(_),ee=0;ee<_;++ee)(X[ee]=computeWeight(ee))<1/0?(eo[ee]=ei.length,ei.push(ee)):eo[ee]=-1;for(var es=ei.length,ee=es>>1;ee>=0;--ee)heapDown(ee);for(;;){var el=heapPop();if(el<0||X[el]>s)break;kill(el)}for(var ec=[],ee=0;ee<_;++ee)$[ee]||(eo[ee]=ec.length,ec.push(o[ee].slice()));function tortoiseHare(i,o){if(i[o]<0)return o;var s=o,_=o;do{var F=i[_];if(!$[_]||F<0||F===_||(F=i[_=F],!$[_]||F<0||F===_))break;_=F,s=i[s]}while(s!==_);for(var N=o;N!==_;N=i[N])i[N]=_;return _}var eu=[];return i.forEach(function(i){var o=tortoiseHare(j,i[0]),s=tortoiseHare(Z,i[1]);if(o>=0&&s>=0&&o!==s){var _=eo[o],F=eo[s];_!==F&&eu.push([_,F])}}),F.unique(F.normalize(eu)),{positions:ec,edges:eu}}},6638:function(i,o,s){"use strict";i.exports=orderSegments;var _=s(417);function horizontalOrder(i,o){if(o[0][0]<o[1][0])s=o[0],F=o[1];else if(o[0][0]>o[1][0])s=o[1],F=o[0];else{var s,F,N,j,Z=Math.min(i[0][1],i[1][1]),X=Math.max(i[0][1],i[1][1]),$=Math.min(o[0][1],o[1][1]),ee=Math.max(o[0][1],o[1][1]);return X<$?X-$:Z>ee?Z-ee:X-ee}i[0][1]<i[1][1]?(N=i[0],j=i[1]):(N=i[1],j=i[0]);var et=_(F,s,N);return et||(et=_(F,s,j))?et:j-F}function orderSegments(i,o){if(o[0][0]<o[1][0])s=o[0],F=o[1];else{if(!(o[0][0]>o[1][0]))return horizontalOrder(o,i);s=o[1],F=o[0]}if(i[0][0]<i[1][0])N=i[0],j=i[1];else{if(!(i[0][0]>i[1][0]))return-horizontalOrder(i,o);N=i[1],j=i[0]}var s,F,N,j,Z=_(s,F,j),X=_(s,F,N);if(Z<0){if(X<=0)return Z}else if(Z>0){if(X>=0)return Z}else if(X)return X;if(Z=_(j,N,F),X=_(j,N,s),Z<0){if(X<=0)return Z}else if(Z>0){if(X>=0)return Z}else if(X)return X;return F[0]-j[0]}},4385:function(i,o,s){"use strict";i.exports=createSlabDecomposition;var _=s(5070),F=s(7080),N=s(417),j=s(6638);function SlabDecomposition(i,o,s){this.slabs=i,this.coordinates=o,this.horizontal=s}function compareHorizontal(i,o){return i.y-o}function searchBucket(i,o){for(var s=null;i;){var _,F,j=i.key;j[0][0]<j[1][0]?(_=j[0],F=j[1]):(_=j[1],F=j[0]);var Z=N(_,F,o);if(Z<0)i=i.left;else if(Z>0){if(o[0]!==j[1][0])s=i,i=i.right;else{var X=searchBucket(i.right,o);if(X)return X;i=i.left}}else{if(o[0]!==j[1][0])return i;var X=searchBucket(i.right,o);if(X)return X;i=i.left}}return s}function IntervalSegment(i,o,s,_){this.y=i,this.index=o,this.start=s,this.closed=_}function Event(i,o,s,_){this.x=i,this.segment=o,this.create=s,this.index=_}function createSlabDecomposition(i){for(var o=i.length,s=2*o,_=Array(s),N=0;N<o;++N){var Z=i[N],X=Z[0][0]<Z[1][0];_[2*N]=new Event(Z[0][0],Z,X,N),_[2*N+1]=new Event(Z[1][0],Z,!X,N)}_.sort(function(i,o){var s=i.x-o.x;return s||(s=i.create-o.create)?s:Math.min(i.segment[0][1],i.segment[1][1])-Math.min(o.segment[0][1],o.segment[1][1])});for(var $=F(j),ee=[],et=[],er=[],N=0;N<s;){for(var en=_[N].x,ei=[];N<s;){var eo=_[N];if(eo.x!==en)break;N+=1,eo.segment[0][0]===eo.x&&eo.segment[1][0]===eo.x?eo.create&&(eo.segment[0][1]<eo.segment[1][1]?(ei.push(new IntervalSegment(eo.segment[0][1],eo.index,!0,!0)),ei.push(new IntervalSegment(eo.segment[1][1],eo.index,!1,!1))):(ei.push(new IntervalSegment(eo.segment[1][1],eo.index,!0,!1)),ei.push(new IntervalSegment(eo.segment[0][1],eo.index,!1,!0)))):$=eo.create?$.insert(eo.segment,eo.index):$.remove(eo.segment)}ee.push($.root),et.push(en),er.push(ei)}return new SlabDecomposition(ee,et,er)}SlabDecomposition.prototype.castUp=function(i){var o=_.le(this.coordinates,i[0]);if(o<0)return -1;this.slabs[o];var s=searchBucket(this.slabs[o],i),F=-1;if(s&&(F=s.value),this.coordinates[o]===i[0]){var Z=null;if(s&&(Z=s.key),o>0){var X=searchBucket(this.slabs[o-1],i);X&&(Z?j(X.key,Z)>0&&(Z=X.key,F=X.value):(F=X.value,Z=X.key))}var $=this.horizontal[o];if($.length>0){var ee=_.ge($,i[1],compareHorizontal);if(ee<$.length){var et=$[ee];if(i[1]===et.y){if(et.closed)return et.index;for(;ee<$.length-1&&$[ee+1].y===i[1];)if(ee+=1,(et=$[ee]).closed)return et.index;if(et.y===i[1]&&!et.start){if((ee+=1)>=$.length)return F;et=$[ee]}}if(et.start){if(Z){var er=N(Z[0],Z[1],[i[0],et.y]);Z[0][0]>Z[1][0]&&(er=-er),er>0&&(F=et.index)}else F=et.index}else et.y!==i[1]&&(F=et.index)}}}return F}},4670:function(i,o,s){"use strict";var _=s(9130),F=s(9662);function planeT(i,o){var s=F(_(i,o),[o[o.length-1]]);return s[s.length-1]}function lerpW(i,o,s,_){var F=-o/(_-o);F<0?F=0:F>1&&(F=1);for(var N=1-F,j=i.length,Z=Array(j),X=0;X<j;++X)Z[X]=F*i[X]+N*s[X];return Z}function splitPolygon(i,o){for(var s=[],_=[],F=planeT(i[i.length-1],o),N=i[i.length-1],j=i[0],Z=0;Z<i.length;++Z,N=j){var X=planeT(j=i[Z],o);if(F<0&&X>0||F>0&&X<0){var $=lerpW(N,X,j,F);s.push($),_.push($.slice())}X<0?_.push(j.slice()):X>0?s.push(j.slice()):(s.push(j.slice()),_.push(j.slice())),F=X}return{positive:s,negative:_}}function positive(i,o){for(var s=[],_=planeT(i[i.length-1],o),F=i[i.length-1],N=i[0],j=0;j<i.length;++j,F=N){var Z=planeT(N=i[j],o);(_<0&&Z>0||_>0&&Z<0)&&s.push(lerpW(F,Z,N,_)),Z>=0&&s.push(N.slice()),_=Z}return s}function negative(i,o){for(var s=[],_=planeT(i[i.length-1],o),F=i[i.length-1],N=i[0],j=0;j<i.length;++j,F=N){var Z=planeT(N=i[j],o);(_<0&&Z>0||_>0&&Z<0)&&s.push(lerpW(F,Z,N,_)),Z<=0&&s.push(N.slice()),_=Z}return s}i.exports=splitPolygon,i.exports.positive=positive,i.exports.negative=negative},8974:function(i,o,s){var _;!function(){"use strict";var F={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function sprintf(i){return sprintf_format(sprintf_parse(i),arguments)}function vsprintf(i,o){return sprintf.apply(null,[i].concat(o||[]))}function sprintf_format(i,o){var s,_,N,j,Z,X,$,ee,et,er=1,en=i.length,ei="";for(_=0;_<en;_++)if("string"==typeof i[_])ei+=i[_];else if("object"==typeof i[_]){if((j=i[_]).keys)for(N=0,s=o[er];N<j.keys.length;N++){if(void 0==s)throw Error(sprintf('[sprintf] Cannot access property "%s" of undefined value "%s"',j.keys[N],j.keys[N-1]));s=s[j.keys[N]]}else s=j.param_no?o[j.param_no]:o[er++];if(F.not_type.test(j.type)&&F.not_primitive.test(j.type)&&s instanceof Function&&(s=s()),F.numeric_arg.test(j.type)&&"number"!=typeof s&&isNaN(s))throw TypeError(sprintf("[sprintf] expecting number but found %T",s));switch(F.number.test(j.type)&&(ee=s>=0),j.type){case"b":s=parseInt(s,10).toString(2);break;case"c":s=String.fromCharCode(parseInt(s,10));break;case"d":case"i":s=parseInt(s,10);break;case"j":s=JSON.stringify(s,null,j.width?parseInt(j.width):0);break;case"e":s=j.precision?parseFloat(s).toExponential(j.precision):parseFloat(s).toExponential();break;case"f":s=j.precision?parseFloat(s).toFixed(j.precision):parseFloat(s);break;case"g":s=j.precision?String(Number(s.toPrecision(j.precision))):parseFloat(s);break;case"o":s=(parseInt(s,10)>>>0).toString(8);break;case"s":s=String(s),s=j.precision?s.substring(0,j.precision):s;break;case"t":s=String(!!s),s=j.precision?s.substring(0,j.precision):s;break;case"T":s=Object.prototype.toString.call(s).slice(8,-1).toLowerCase(),s=j.precision?s.substring(0,j.precision):s;break;case"u":s=parseInt(s,10)>>>0;break;case"v":s=s.valueOf(),s=j.precision?s.substring(0,j.precision):s;break;case"x":s=(parseInt(s,10)>>>0).toString(16);break;case"X":s=(parseInt(s,10)>>>0).toString(16).toUpperCase()}F.json.test(j.type)?ei+=s:(F.number.test(j.type)&&(!ee||j.sign)?(et=ee?"+":"-",s=s.toString().replace(F.sign,"")):et="",X=j.pad_char?"0"===j.pad_char?"0":j.pad_char.charAt(1):" ",$=j.width-(et+s).length,Z=j.width&&$>0?X.repeat($):"",ei+=j.align?et+s+Z:"0"===X?et+Z+s:Z+et+s)}return ei}var N=Object.create(null);function sprintf_parse(i){if(N[i])return N[i];for(var o,s=i,_=[],j=0;s;){if(null!==(o=F.text.exec(s)))_.push(o[0]);else if(null!==(o=F.modulo.exec(s)))_.push("%");else if(null!==(o=F.placeholder.exec(s))){if(o[2]){j|=1;var Z=[],X=o[2],$=[];if(null!==($=F.key.exec(X)))for(Z.push($[1]);""!==(X=X.substring($[0].length));)if(null!==($=F.key_access.exec(X)))Z.push($[1]);else if(null!==($=F.index_access.exec(X)))Z.push($[1]);else throw SyntaxError("[sprintf] failed to parse named argument key");else throw SyntaxError("[sprintf] failed to parse named argument key");o[2]=Z}else j|=2;if(3===j)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");_.push({placeholder:o[0],param_no:o[1],keys:o[2],sign:o[3],pad_char:o[4],align:o[5],width:o[6],precision:o[7],type:o[8]})}else throw SyntaxError("[sprintf] unexpected placeholder");s=s.substring(o[0].length)}return N[i]=_}o.sprintf=sprintf,o.vsprintf=vsprintf,"undefined"!=typeof window&&(window.sprintf=sprintf,window.vsprintf=vsprintf,void 0!==(_=(function(){return{sprintf:sprintf,vsprintf:vsprintf}}).call(o,s,o,i))&&(i.exports=_))}()},4162:function(i,o,s){"use strict";i.exports=surfaceNets;var _=s(9284),F=s(9584),N={"2d":function(i,o,s){var _=i({order:o,scalarArguments:3,getters:"generic"===s?[0]:void 0,phase:function(i,o,s,_){return i>_|0},vertex:function(i,o,s,_,F,N,j,Z,X,$,ee,et,er){var en=(j<<0)+(Z<<1)+(X<<2)+($<<3)|0;if(0!==en&&15!==en)switch(en){case 0:case 15:ee.push([i-.5,o-.5]);break;case 1:ee.push([i-.25-.25*(_+s-2*er)/(s-_),o-.25-.25*(F+s-2*er)/(s-F)]);break;case 2:ee.push([i-.75-.25*(-_-s+2*er)/(_-s),o-.25-.25*(N+_-2*er)/(_-N)]);break;case 3:ee.push([i-.5,o-.5-.5*(F+s+N+_-4*er)/(s-F+_-N)]);break;case 4:ee.push([i-.25-.25*(N+F-2*er)/(F-N),o-.75-.25*(-F-s+2*er)/(F-s)]);break;case 5:ee.push([i-.5-.5*(_+s+N+F-4*er)/(s-_+F-N),o-.5]);break;case 6:ee.push([i-.5-.25*(-_-s+N+F)/(_-s+F-N),o-.5-.25*(-F-s+N+_)/(F-s+_-N)]);break;case 7:ee.push([i-.75-.25*(N+F-2*er)/(F-N),o-.75-.25*(N+_-2*er)/(_-N)]);break;case 8:ee.push([i-.75-.25*(-N-F+2*er)/(N-F),o-.75-.25*(-N-_+2*er)/(N-_)]);break;case 9:ee.push([i-.5-.25*(_+s+-N-F)/(s-_+N-F),o-.5-.25*(F+s+-N-_)/(s-F+N-_)]);break;case 10:ee.push([i-.5-.5*(-_-s+-N-F+4*er)/(_-s+N-F),o-.5]);break;case 11:ee.push([i-.25-.25*(-N-F+2*er)/(N-F),o-.75-.25*(F+s-2*er)/(s-F)]);break;case 12:ee.push([i-.5,o-.5-.5*(-F-s+-N-_+4*er)/(F-s+N-_)]);break;case 13:ee.push([i-.75-.25*(_+s-2*er)/(s-_),o-.25-.25*(-N-_+2*er)/(N-_)]);break;case 14:ee.push([i-.25-.25*(-_-s+2*er)/(_-s),o-.25-.25*(-F-s+2*er)/(F-s)])}},cell:function(i,o,s,_,F,N,j,Z,X){F?Z.push([i,o]):Z.push([o,i])}});return function(i,o){var s=[],F=[];return _(i,s,F,o),{positions:s,cells:F}}}};function buildSurfaceNets(i,o){var s=N[i.length+"d"];if(s)return s(_,i,o)}function mesh1D(i,o){for(var s=F(i,o),_=s.length,N=Array(_),j=Array(_),Z=0;Z<_;++Z)N[Z]=[s[Z]],j[Z]=[Z];return{positions:N,cells:j}}var j={};function surfaceNets(i,o){if(i.dimension<=0)return{positions:[],cells:[]};if(1===i.dimension)return mesh1D(i,o);var s=i.order.join()+"-"+i.dtype,_=j[s],o=+o||0;return _||(_=j[s]=buildSurfaceNets(i.order,i.dtype)),_(i,o)}},6946:function(i,o,s){"use strict";i.exports=textGet;var _=s(875),N=window||F.global||{},j=N.__TEXT_CACHE||{};function unwrap(i){for(var o=i.cells,s=i.positions,_=new Float32Array(6*o.length),F=0,N=0,j=0;j<o.length;++j)for(var Z=o[j],X=0;X<3;++X){var $=s[Z[X]];_[F++]=$[0],_[F++]=$[1]+1.4,N=Math.max($[0],N)}return{data:_,shape:N}}function textGet(i,o,s){var s=s||{},F=j[i];F||(F=j[i]={" ":{data:new Float32Array(0),shape:.2}});var N=F[o];if(!N){if(o.length<=1||!/\d/.test(o))N=F[o]=unwrap(_(o,{triangles:!0,font:i,textAlign:s.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var Z=o.split(/(\d|\s)/),X=Array(Z.length),$=0,ee=0,et=0;et<Z.length;++et)X[et]=textGet(i,Z[et]),$+=X[et].data.length,ee+=X[et].shape,et>0&&(ee+=.02);for(var er=new Float32Array($),en=0,ei=-.5*ee,et=0;et<X.length;++et){for(var eo=X[et].data,es=0;es<eo.length;es+=2)er[en++]=eo[es]+ei,er[en++]=eo[es+1];ei+=X[et].shape+.02}N=F[o]={data:er,shape:ee}}}return N}N.__TEXT_CACHE={}},14:function(i,o,s){"use strict";var _=s(4405);function getPropertyInPX(i,o){var s=_(getComputedStyle(i).getPropertyValue(o));return s[0]*toPX(s[1],i)}function getSizeBrutal(i,o){var s=document.createElement("div");s.style["font-size"]="128"+i,o.appendChild(s);var _=getPropertyInPX(s,"font-size")/128;return o.removeChild(s),_}function toPX(i,o){switch(o=o||document.body,i=(i||"px").trim().toLowerCase(),(o===window||o===document)&&(o=document.body),i){case"%":return o.clientHeight/100;case"ch":case"ex":return getSizeBrutal(i,o);case"em":return getPropertyInPX(o,"font-size");case"rem":return getPropertyInPX(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}i.exports=toPX},3440:function(i,o,s){"use strict";i.exports=createTurntableController;var _=s(8444),F=s(7437),N=s(4422),j=s(903),Z=s(899),X=s(9305);function len3(i,o,s){return Math.sqrt(Math.pow(i,2)+Math.pow(o,2)+Math.pow(s,2))}function clamp1(i){return Math.min(1,Math.max(-1,i))}function findOrthoPair(i){var o=Math.abs(i[0]),s=Math.abs(i[1]),_=Math.abs(i[2]),F=[0,0,0];o>Math.max(s,_)?F[2]=1:s>Math.max(o,_)?F[0]=1:F[1]=1;for(var N=0,j=0,X=0;X<3;++X)N+=i[X]*i[X],j+=F[X]*i[X];for(var X=0;X<3;++X)F[X]-=j/N*i[X];return Z(F,F),F}function TurntableController(i,o,s,F,N,j,Z,X){this.center=_(s),this.up=_(F),this.right=_(N),this.radius=_([j]),this.angle=_([Z,X]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(i,o),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=Array(16);for(var $=0;$<16;++$)this.computedMatrix[$]=.5;this.recalcMatrix(0)}var $=TurntableController.prototype;$.setDistanceLimits=function(i,o){i=i>0?Math.log(i):-1/0,o=Math.max(o=o>0?Math.log(o):1/0,i),this.radius.bounds[0][0]=i,this.radius.bounds[1][0]=o},$.getDistanceLimits=function(i){var o=this.radius.bounds[0];return i?(i[0]=Math.exp(o[0][0]),i[1]=Math.exp(o[1][0]),i):[Math.exp(o[0][0]),Math.exp(o[1][0])]},$.recalcMatrix=function(i){this.center.curve(i),this.up.curve(i),this.right.curve(i),this.radius.curve(i),this.angle.curve(i);for(var o=this.computedUp,s=this.computedRight,_=0,F=0,N=0;N<3;++N)F+=o[N]*s[N],_+=o[N]*o[N];for(var X=Math.sqrt(_),$=0,N=0;N<3;++N)s[N]-=o[N]*F/_,$+=s[N]*s[N],o[N]/=X;for(var ee=Math.sqrt($),N=0;N<3;++N)s[N]/=ee;var et=this.computedToward;j(et,o,s),Z(et,et);for(var er=Math.exp(this.computedRadius[0]),en=this.computedAngle[0],ei=this.computedAngle[1],eo=Math.cos(en),es=Math.sin(en),el=Math.cos(ei),ec=Math.sin(ei),eu=this.computedCenter,ef=eo*el,ed=es*el,eh=-eo*ec,ep=-es*ec,eg=this.computedEye,em=this.computedMatrix,N=0;N<3;++N){var ey=ef*s[N]+ed*et[N]+ec*o[N];em[4*N+1]=eh*s[N]+ep*et[N]+el*o[N],em[4*N+2]=ey,em[4*N+3]=0}var ev=em[1],ex=em[5],e_=em[9],ew=em[2],eT=em[6],ek=em[10],eA=ex*ek-e_*eT,eS=e_*ew-ev*ek,eM=ev*eT-ex*ew,eC=len3(eA,eS,eM);eA/=eC,eS/=eC,eM/=eC,em[0]=eA,em[4]=eS,em[8]=eM;for(var N=0;N<3;++N)eg[N]=eu[N]+em[2+4*N]*er;for(var N=0;N<3;++N){for(var $=0,eE=0;eE<3;++eE)$+=em[N+4*eE]*eg[eE];em[12+N]=-$}em[15]=1},$.getMatrix=function(i,o){this.recalcMatrix(i);var s=this.computedMatrix;if(o){for(var _=0;_<16;++_)o[_]=s[_];return o}return s};var ee=[0,0,0];function createTurntableController(i){var o=(i=i||{}).center||[0,0,0],s=i.up||[0,1,0],_=i.right||findOrthoPair(s),F=i.radius||1,N=i.theta||0,$=i.phi||0;if(o=[].slice.call(o,0,3),Z(s=[].slice.call(s,0,3),s),Z(_=[].slice.call(_,0,3),_),"eye"in i){var ee=i.eye,et=[ee[0]-o[0],ee[1]-o[1],ee[2]-o[2]];j(_,et,s),1e-6>len3(_[0],_[1],_[2])?_=findOrthoPair(s):Z(_,_),F=len3(et[0],et[1],et[2]);var er=X(s,et)/F,en=X(_,et)/F;$=Math.acos(er),N=Math.acos(en)}return F=Math.log(F),new TurntableController(i.zoomMin,i.zoomMax,o,s,_,F,N,$)}$.rotate=function(i,o,s,_){if(this.angle.move(i,o,s),_){this.recalcMatrix(i);var F=this.computedMatrix;ee[0]=F[2],ee[1]=F[6],ee[2]=F[10];for(var j=this.computedUp,Z=this.computedRight,X=this.computedToward,$=0;$<3;++$)F[4*$]=j[$],F[4*$+1]=Z[$],F[4*$+2]=X[$];N(F,F,_,ee);for(var $=0;$<3;++$)j[$]=F[4*$],Z[$]=F[4*$+1];this.up.set(i,j[0],j[1],j[2]),this.right.set(i,Z[0],Z[1],Z[2])}},$.pan=function(i,o,s,_){o=o||0,s=s||0,_=_||0,this.recalcMatrix(i);var F=this.computedMatrix;this.computedRadius[0];var N=F[1],j=F[5],Z=F[9],X=len3(N,j,Z);N/=X,j/=X,Z/=X;var $=F[0],ee=F[4],et=F[8],er=$*N+ee*j+et*Z,en=len3($-=N*er,ee-=j*er,et-=Z*er),ei=($/=en)*o+N*s,eo=(ee/=en)*o+j*s,es=(et/=en)*o+Z*s;this.center.move(i,ei,eo,es);var el=Math.exp(this.computedRadius[0]);el=Math.max(1e-4,el+_),this.radius.set(i,Math.log(el))},$.translate=function(i,o,s,_){this.center.move(i,o||0,s||0,_||0)},$.setMatrix=function(i,o,s,_){var N,j,Z=1;"number"==typeof s&&(Z=0|s),(Z<0||Z>3)&&(Z=1);var X=(Z+2)%3;o||(this.recalcMatrix(i),o=this.computedMatrix);var $=o[Z],ee=o[Z+4],et=o[Z+8];if(_){var er=Math.abs($),en=Math.abs(et),ei=Math.max(er,Math.abs(ee),en);er===ei?($=$<0?-1:1,ee=et=0):en===ei?(et=et<0?-1:1,$=ee=0):(ee=ee<0?-1:1,$=et=0)}else{var eo=len3($,ee,et);$/=eo,ee/=eo,et/=eo}var es=o[X],el=o[X+4],ec=o[X+8],eu=es*$+el*ee+ec*et,ef=len3(es-=$*eu,el-=ee*eu,ec-=et*eu);es/=ef,el/=ef;var ed=ee*(ec/=ef)-et*el,eh=et*es-$*ec,ep=$*el-ee*es,eg=len3(ed,eh,ep);if(ed/=eg,eh/=eg,ep/=eg,this.center.jump(i,eO,eD,eR),this.radius.idle(i),this.up.jump(i,$,ee,et),this.right.jump(i,es,el,ec),2===Z){var em=o[1],ey=o[5],ev=o[9],ex=em*es+ey*el+ev*ec,e_=em*ed+ey*eh+ev*ep;N=eA<0?-Math.PI/2:Math.PI/2,j=Math.atan2(e_,ex)}else{var ew=o[2],eT=o[6],ek=o[10],eA=ew*$+eT*ee+ek*et,eS=ew*es+eT*el+ek*ec,eM=ew*ed+eT*eh+ek*ep;N=Math.asin(clamp1(eA)),j=Math.atan2(eM,eS)}this.angle.jump(i,j,N),this.recalcMatrix(i);var eC=o[2],eE=o[6],eL=o[10],eP=this.computedMatrix;F(eP,o);var eI=eP[15],eO=eP[12]/eI,eD=eP[13]/eI,eR=eP[14]/eI,eB=Math.exp(this.computedRadius[0]);this.center.jump(i,eO-eC*eB,eD-eE*eB,eR-eL*eB)},$.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},$.idle=function(i){this.center.idle(i),this.up.idle(i),this.right.idle(i),this.radius.idle(i),this.angle.idle(i)},$.flush=function(i){this.center.flush(i),this.up.flush(i),this.right.flush(i),this.radius.flush(i),this.angle.flush(i)},$.setDistance=function(i,o){o>0&&this.radius.set(i,Math.log(o))},$.lookAt=function(i,o,s,_){this.recalcMatrix(i),o=o||this.computedEye,s=s||this.computedCenter;var F=(_=_||this.computedUp)[0],N=_[1],j=_[2],Z=len3(F,N,j);if(!(Z<1e-6)){F/=Z,N/=Z,j/=Z;var X=o[0]-s[0],$=o[1]-s[1],ee=o[2]-s[2],et=len3(X,$,ee);if(!(et<1e-6)){X/=et,$/=et,ee/=et;var er=this.computedRight,en=er[0],ei=er[1],eo=er[2],es=F*en+N*ei+j*eo,el=len3(en-=es*F,ei-=es*N,eo-=es*j);if(!(el<.01&&(el=len3(en=N*ee-j*$,ei=j*X-F*ee,eo=F*$-N*X))<1e-6)){en/=el,ei/=el,eo/=el,this.up.set(i,F,N,j),this.right.set(i,en,ei,eo),this.center.set(i,s[0],s[1],s[2]),this.radius.set(i,Math.log(et));var ec=N*eo-j*ei,eu=j*en-F*eo,ef=F*ei-N*en,ed=len3(ec,eu,ef),eh=F*X+N*$+j*ee,ep=en*X+ei*$+eo*ee,eg=(ec/=ed)*X+(eu/=ed)*$+(ef/=ed)*ee,em=Math.asin(clamp1(eh)),ey=Math.atan2(eg,ep),ev=this.angle._state,ex=ev[ev.length-1],e_=ev[ev.length-2],ew=Math.abs((ex%=2*Math.PI)+2*Math.PI-ey),eT=Math.abs(ex-ey),ek=Math.abs(ex-2*Math.PI-ey);ew<eT&&(ex+=2*Math.PI),ek<eT&&(ex-=2*Math.PI),this.angle.jump(this.angle.lastT(),ex,e_),this.angle.set(i,ey,em)}}}}},9660:function(i){"use strict";function twoProduct(i,o,s){var _=i*o,F=134217729*i,N=F-(F-i),j=i-N,Z=134217729*o,X=Z-(Z-o),$=o-X,ee=j*$-(_-N*X-j*X-N*$);return s?(s[0]=ee,s[1]=_,s):[ee,_]}i.exports=twoProduct},87:function(i){"use strict";function fastTwoSum(i,o,s){var _=i+o,F=_-i,N=o-F,j=i-(_-F);return s?(s[0]=j+N,s[1]=_,s):[j+N,_]}i.exports=fastTwoSum},5306:function(i,o,s){"use strict";var _=s(2288),F=s(3094),N=s(2146).lW;s.g.__TYPEDARRAY_POOL||(s.g.__TYPEDARRAY_POOL={UINT8:F([32,0]),UINT16:F([32,0]),UINT32:F([32,0]),BIGUINT64:F([32,0]),INT8:F([32,0]),INT16:F([32,0]),INT32:F([32,0]),BIGINT64:F([32,0]),FLOAT:F([32,0]),DOUBLE:F([32,0]),DATA:F([32,0]),UINT8C:F([32,0]),BUFFER:F([32,0])});var j="undefined"!=typeof Uint8ClampedArray,Z="undefined"!=typeof BigUint64Array,X="undefined"!=typeof BigInt64Array,$=s.g.__TYPEDARRAY_POOL;$.UINT8C||($.UINT8C=F([32,0])),$.BIGUINT64||($.BIGUINT64=F([32,0])),$.BIGINT64||($.BIGINT64=F([32,0])),$.BUFFER||($.BUFFER=F([32,0]));var ee=$.DATA,et=$.BUFFER;function freeArrayBuffer(i){if(i){var o=i.length||i.byteLength;ee[_.log2(o)].push(i)}}function freeTypedArray(i){freeArrayBuffer(i.buffer)}function mallocArrayBuffer(i){var i=_.nextPow2(i),o=ee[_.log2(i)];return o.length>0?o.pop():new ArrayBuffer(i)}function mallocUint8(i){return new Uint8Array(mallocArrayBuffer(i),0,i)}function mallocUint16(i){return new Uint16Array(mallocArrayBuffer(2*i),0,i)}function mallocUint32(i){return new Uint32Array(mallocArrayBuffer(4*i),0,i)}function mallocInt8(i){return new Int8Array(mallocArrayBuffer(i),0,i)}function mallocInt16(i){return new Int16Array(mallocArrayBuffer(2*i),0,i)}function mallocInt32(i){return new Int32Array(mallocArrayBuffer(4*i),0,i)}function mallocFloat(i){return new Float32Array(mallocArrayBuffer(4*i),0,i)}function mallocDouble(i){return new Float64Array(mallocArrayBuffer(8*i),0,i)}function mallocUint8Clamped(i){return j?new Uint8ClampedArray(mallocArrayBuffer(i),0,i):mallocUint8(i)}function mallocBigUint64(i){return Z?new BigUint64Array(mallocArrayBuffer(8*i),0,i):null}function mallocBigInt64(i){return X?new BigInt64Array(mallocArrayBuffer(8*i),0,i):null}function mallocDataView(i){return new DataView(mallocArrayBuffer(i),0,i)}function mallocBuffer(i){i=_.nextPow2(i);var o=et[_.log2(i)];return o.length>0?o.pop():new N(i)}o.free=function(i){if(N.isBuffer(i))et[_.log2(i.length)].push(i);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(i)&&(i=i.buffer),!i)return;var o=i.length||i.byteLength;ee[0|_.log2(o)].push(i)}},o.freeUint8=o.freeUint16=o.freeUint32=o.freeBigUint64=o.freeInt8=o.freeInt16=o.freeInt32=o.freeBigInt64=o.freeFloat32=o.freeFloat=o.freeFloat64=o.freeDouble=o.freeUint8Clamped=o.freeDataView=freeTypedArray,o.freeArrayBuffer=freeArrayBuffer,o.freeBuffer=function(i){et[_.log2(i.length)].push(i)},o.malloc=function(i,o){if(void 0===o||"arraybuffer"===o)return mallocArrayBuffer(i);switch(o){case"uint8":return mallocUint8(i);case"uint16":return mallocUint16(i);case"uint32":return mallocUint32(i);case"int8":return mallocInt8(i);case"int16":return mallocInt16(i);case"int32":return mallocInt32(i);case"float":case"float32":return mallocFloat(i);case"double":case"float64":return mallocDouble(i);case"uint8_clamped":return mallocUint8Clamped(i);case"bigint64":return mallocBigInt64(i);case"biguint64":return mallocBigUint64(i);case"buffer":return mallocBuffer(i);case"data":case"dataview":return mallocDataView(i)}return null},o.mallocArrayBuffer=mallocArrayBuffer,o.mallocUint8=mallocUint8,o.mallocUint16=mallocUint16,o.mallocUint32=mallocUint32,o.mallocInt8=mallocInt8,o.mallocInt16=mallocInt16,o.mallocInt32=mallocInt32,o.mallocFloat32=o.mallocFloat=mallocFloat,o.mallocFloat64=o.mallocDouble=mallocDouble,o.mallocUint8Clamped=mallocUint8Clamped,o.mallocBigUint64=mallocBigUint64,o.mallocBigInt64=mallocBigInt64,o.mallocDataView=mallocDataView,o.mallocBuffer=mallocBuffer,o.clearCache=function(){for(var i=0;i<32;++i)$.UINT8[i].length=0,$.UINT16[i].length=0,$.UINT32[i].length=0,$.INT8[i].length=0,$.INT16[i].length=0,$.INT32[i].length=0,$.FLOAT[i].length=0,$.DOUBLE[i].length=0,$.BIGUINT64[i].length=0,$.BIGINT64[i].length=0,$.UINT8C[i].length=0,ee[i].length=0,et[i].length=0}},1731:function(i){"use strict";function UnionFind(i){this.roots=Array(i),this.ranks=Array(i);for(var o=0;o<i;++o)this.roots[o]=o,this.ranks[o]=0}i.exports=UnionFind;var o=UnionFind.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},o.find=function(i){for(var o=i,s=this.roots;s[i]!==i;)i=s[i];for(;s[o]!==i;){var _=s[o];s[o]=i,o=_}return i},o.link=function(i,o){var s=this.find(i),_=this.find(o);if(s!==_){var F=this.ranks,N=this.roots,j=F[s],Z=F[_];j<Z?N[s]=_:Z<j?N[_]=s:(N[_]=s,++F[s])}}},1215:function(i){"use strict";function unique_pred(i,o){for(var s=1,_=i.length,F=i[0],N=i[0],j=1;j<_;++j)if(N=F,o(F=i[j],N)){if(j===s){s++;continue}i[s++]=F}return i.length=s,i}function unique_eq(i){for(var o=1,s=i.length,_=i[0],F=i[0],N=1;N<s;++N,F=_)if(F=_,(_=i[N])!==F){if(N===o){o++;continue}i[o++]=_}return i.length=o,i}function unique(i,o,s){return 0===i.length?i:o?(s||i.sort(o),unique_pred(i,o)):(s||i.sort(),unique_eq(i))}i.exports=unique},875:function(i,o,s){"use strict";i.exports=createText;var _=s(712),F=null,N=null;function createText(i,o){return("object"!=typeof o||null===o)&&(o={}),_(i,o.canvas||F,o.context||N,o)}"undefined"!=typeof document&&((F=document.createElement("canvas")).width=8192,F.height=1024,N=F.getContext("2d"))},712:function(i,o,s){i.exports=vectorizeText,i.exports.processPixels=processPixels;var _=s(4162),F=s(5050),N=s(8243),j=s(197),Z=s(7761),X=s(8040);function parseTag(i,o,s,_){for(var F="<"+i+">",N="</"+i+">",j=F.length,Z=N.length,X="+"===o[0]||"-"===o[0],$=0,ee=-Z;$>-1&&-1!==($=s.indexOf(F,$))&&-1!==(ee=s.indexOf(N,$+j))&&!(ee<=$);){for(var et=$;et<ee+Z;++et)if(et<$+j||et>=ee)_[et]=null,s=s.substr(0,et)+" "+s.substr(et+1);else if(null!==_[et]){var er=_[et].indexOf(o[0]);-1===er?_[et]+=o:X&&(_[et]=_[et].substr(0,er+1)+(1+parseInt(_[et][er+1]))+_[et].substr(er+2))}var en=$+j,ei=s.substr(en,ee-en).indexOf(F);$=-1!==ei?ei:ee+Z}return _}function transformPositions(i,o,s){for(var _=o.textAlign||"start",F=o.textBaseline||"alphabetic",N=[1073741824,1073741824],j=[0,0],Z=i.length,X=0;X<Z;++X)for(var $=i[X],ee=0;ee<2;++ee)N[ee]=0|Math.min(N[ee],$[ee]),j[ee]=0|Math.max(j[ee],$[ee]);var et=0;switch(_){case"center":et=-.5*(N[0]+j[0]);break;case"right":case"end":et=-j[0];break;case"left":case"start":et=-N[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+_+"'")}var er=0;switch(F){case"hanging":case"top":er=-N[1];break;case"middle":er=-.5*(N[1]+j[1]);break;case"alphabetic":case"ideographic":er=-3*s;break;case"bottom":er=-j[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+F+"'")}var en=1/s;return"lineHeight"in o?en*=+o.lineHeight:"width"in o?en=o.width/(j[0]-N[0]):"height"in o&&(en=o.height/(j[1]-N[1])),i.map(function(i){return[en*(i[0]+et),en*(i[1]+er)]})}function getPixels(i,o,s,_,N,j){s=s.replace(/\n/g,""),s=!0===j.breaklines?s.replace(/\<br\>/g,"\n"):s.replace(/\<br\>/g," ");var Z,X,$,ee,et,er="",en=[];for(X=0;X<s.length;++X)en[X]=er;!0===j.bolds&&(en=parseTag("b","b|",s,en)),!0===j.italics&&(en=parseTag("i","i|",s,en)),!0===j.superscripts&&(en=parseTag("sup","+1",s,en)),!0===j.subscripts&&(en=parseTag("sub","-1",s,en));var ei=[],eo="";for(X=0;X<s.length;++X)null!==en[X]&&(eo+=s[X],ei.push(en[X]));var es=eo.split("\n"),el=es.length,ec=Math.round(N*_),eu=2*_,ef=0,ed=el*ec+eu;i.height<ed&&(i.height=ed),o.fillStyle="#000",o.fillRect(0,0,i.width,i.height),o.fillStyle="#fff";var eh=0,ep="";function writeBuffer(){if(""!==ep){var i=o.measureText(ep).width;o.fillText(ep,_+$,eu+ee),$+=i}}function getTextFontSize(){return""+Math.round(et)+"px "}function changeStyle(i,s){var _=""+o.font;if(!0===j.subscripts){var F=i.indexOf("-"),N=s.indexOf("-"),Z=F>-1?parseInt(i[1+F]):0,X=N>-1?parseInt(s[1+N]):0;Z!==X&&(_=_.replace(getTextFontSize(),"?px "),et*=Math.pow(.75,X-Z),_=_.replace("?px ",getTextFontSize())),ee+=.25*ec*(X-Z)}if(!0===j.superscripts){var $=i.indexOf("+"),er=s.indexOf("+"),en=$>-1?parseInt(i[1+$]):0,ei=er>-1?parseInt(s[1+er]):0;en!==ei&&(_=_.replace(getTextFontSize(),"?px "),et*=Math.pow(.75,ei-en),_=_.replace("?px ",getTextFontSize())),ee-=.25*ec*(ei-en)}if(!0===j.bolds){var eo=i.indexOf("b|")>-1,es=s.indexOf("b|")>-1;!eo&&es&&(_=el?_.replace("italic ","italic bold "):"bold "+_),eo&&!es&&(_=_.replace("bold ",""))}if(!0===j.italics){var el=i.indexOf("i|")>-1,eu=s.indexOf("i|")>-1;!el&&eu&&(_="italic "+_),el&&!eu&&(_=_.replace("italic ",""))}o.font=_}for(Z=0;Z<el;++Z){var eg=es[Z]+"\n";for(X=0,$=0,ee=Z*ec,et=_,ep="";X<eg.length;++X){var em=X+eh<ei.length?ei[X+eh]:ei[ei.length-1];er===em?ep+=eg[X]:(writeBuffer(),ep=eg[X],void 0!==em&&(changeStyle(er,em),er=em))}writeBuffer(),eh+=eg.length;var ey=0|Math.round($+2*_);ef<ey&&(ef=ey)}var ev=ef,ex=eu+ec*el;return F(o.getImageData(0,0,ev,ex).data,[ex,ev,4]).pick(-1,-1,0).transpose(1,0)}function getContour(i,o){var s=_(i,128);return o?N(s.cells,s.positions,.25):{edges:s.cells,positions:s.positions}}function processPixelsImpl(i,o,s,_){var F=getContour(i,_),N=transformPositions(F.positions,o,s),$=F.edges,ee="ccw"===o.orientation;if(j(N,$),o.polygons||o.polygon||o.polyline){for(var et=X($,N),er=Array(et.length),en=0;en<et.length;++en){for(var ei=et[en],eo=Array(ei.length),es=0;es<ei.length;++es){for(var el=ei[es],ec=Array(el.length),eu=0;eu<el.length;++eu)ec[eu]=N[el[eu]].slice();ee&&ec.reverse(),eo[es]=ec}er[en]=eo}return er}return o.triangles||o.triangulate||o.triangle?{cells:Z(N,$,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:$,positions:N}}function processPixels(i,o,s){try{return processPixelsImpl(i,o,s,!0)}catch(i){}try{return processPixelsImpl(i,o,s,!1)}catch(i){}return o.polygons||o.polyline||o.polygon?[]:o.triangles||o.triangulate||o.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function vectorizeText(i,o,s,_){var F=64,N=1.25,j={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return _&&(_.size&&_.size>0&&(F=_.size),_.lineSpacing&&_.lineSpacing>0&&(N=_.lineSpacing),_.styletags&&_.styletags.breaklines&&(j.breaklines=!!_.styletags.breaklines),_.styletags&&_.styletags.bolds&&(j.bolds=!!_.styletags.bolds),_.styletags&&_.styletags.italics&&(j.italics=!!_.styletags.italics),_.styletags&&_.styletags.subscripts&&(j.subscripts=!!_.styletags.subscripts),_.styletags&&_.styletags.superscripts&&(j.superscripts=!!_.styletags.superscripts)),s.font=[_.fontStyle,_.fontVariant,_.fontWeight,F+"px",_.font].filter(function(i){return i}).join(" "),s.textAlign="start",s.textBaseline="alphabetic",s.direction="ltr",processPixels(getPixels(o,s,i,F,N,j),_,F)}},5346:function(i){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=weakMapPermitHostObjects);var o,s,_,F=!1;if("function"==typeof WeakMap){var N=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var j=new N,Z=Object.freeze({});if(j.set(Z,1),1!==j.get(Z))F=!0;else{i.exports=WeakMap;return}}}Object.prototype.hasOwnProperty;var X=Object.getOwnPropertyNames,$=Object.defineProperty,ee=Object.isExtensible,et="weakmap:",er=et+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var en=new ArrayBuffer(25),ei=new Uint8Array(en);crypto.getRandomValues(ei),er=et+"rand:"+Array.prototype.map.call(ei,function(i){return(i%36).toString(36)}).join("")+"___"}if($(Object,"getOwnPropertyNames",{value:function(i){return X(i).filter(isNotHiddenName)}}),"getPropertyNames"in Object){var eo=Object.getPropertyNames;$(Object,"getPropertyNames",{value:function(i){return eo(i).filter(isNotHiddenName)}})}o=Object.freeze,$(Object,"freeze",{value:function(i){return getHiddenRecord(i),o(i)}}),s=Object.seal,$(Object,"seal",{value:function(i){return getHiddenRecord(i),s(i)}}),_=Object.preventExtensions,$(Object,"preventExtensions",{value:function(i){return getHiddenRecord(i),_(i)}});var es=!1,el=0,OurWeakMap=function(){this instanceof OurWeakMap||calledAsFunctionWarning();var i=[],o=[],s=el++;function get___(_,F){var N,j=getHiddenRecord(_);return j?s in j?j[s]:F:(N=i.indexOf(_))>=0?o[N]:F}function has___(o){var _=getHiddenRecord(o);return _?s in _:i.indexOf(o)>=0}function set___(_,F){var N,j=getHiddenRecord(_);return j?j[s]=F:(N=i.indexOf(_))>=0?o[N]=F:(o[N=i.length]=F,i[N]=_),this}function delete___(_){var F,N,j=getHiddenRecord(_);return j?s in j&&delete j[s]:!((F=i.indexOf(_))<0)&&(N=i.length-1,i[F]=void 0,o[F]=o[N],i[F]=i[N],i.length=N,o.length=N,!0)}return Object.create(OurWeakMap.prototype,{get___:{value:constFunc(get___)},has___:{value:constFunc(has___)},set___:{value:constFunc(set___)},delete___:{value:constFunc(delete___)}})};OurWeakMap.prototype=Object.create(Object.prototype,{get:{value:function(i,o){return this.get___(i,o)},writable:!0,configurable:!0},has:{value:function(i){return this.has___(i)},writable:!0,configurable:!0},set:{value:function(i,o){return this.set___(i,o)},writable:!0,configurable:!0},delete:{value:function(i){return this.delete___(i)},writable:!0,configurable:!0}}),"function"==typeof N?function(){function DoubleWeakMap(){this instanceof OurWeakMap||calledAsFunctionWarning();var i,o=new N,s=void 0,_=!1;function dget(i,_){return s?o.has(i)?o.get(i):s.get___(i,_):o.get(i,_)}function dhas(i){return o.has(i)||!!s&&s.has___(i)}function ddelete(i){var _=!!o.delete(i);return s&&s.delete___(i)||_}return i=F?function(i,_){return o.set(i,_),o.has(i)||(s||(s=new OurWeakMap),s.set(i,_)),this}:function(i,F){if(_)try{o.set(i,F)}catch(o){s||(s=new OurWeakMap),s.set___(i,F)}else o.set(i,F);return this},Object.create(OurWeakMap.prototype,{get___:{value:constFunc(dget)},has___:{value:constFunc(dhas)},set___:{value:constFunc(i)},delete___:{value:constFunc(ddelete)},permitHostObjects___:{value:constFunc(function(i){if(i===weakMapPermitHostObjects)_=!0;else throw Error("bogus call to permitHostObjects___")})}})}F&&"undefined"!=typeof Proxy&&(Proxy=void 0),DoubleWeakMap.prototype=OurWeakMap.prototype,i.exports=DoubleWeakMap,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),i.exports=OurWeakMap)}function weakMapPermitHostObjects(i){i.permitHostObjects___&&i.permitHostObjects___(weakMapPermitHostObjects)}function isNotHiddenName(i){return!(i.substr(0,et.length)==et&&"___"===i.substr(i.length-3))}function getHiddenRecord(i){if(i!==Object(i))throw TypeError("Not an object: "+i);var o=i[er];if(o&&o.key===i)return o;if(ee(i)){o={key:i};try{return $(i,er,{value:o,writable:!1,enumerable:!1,configurable:!1}),o}catch(i){return}}}function constFunc(i){return i.prototype=null,Object.freeze(i)}function calledAsFunctionWarning(){es||"undefined"==typeof console||(es=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},9222:function(i,o,s){var _=s(7178);function createStore(){var i={};return function(o){if(("object"!=typeof o||null===o)&&"function"!=typeof o)throw Error("Weakmap-shim: Key must be object");var s=o.valueOf(i);return s&&s.identity===i?s:_(o,i)}}i.exports=createStore},7178:function(i){i.exports=hiddenStore;function hiddenStore(i,o){var s={identity:o},_=i.valueOf;return Object.defineProperty(i,"valueOf",{value:function(i){return i!==o?_.apply(this,arguments):s},writable:!0}),s}},4037:function(i,o,s){var _=s(9222);function weakMap(){var i=_();return{get:function(o,s){var _=i(o);return _.hasOwnProperty("value")?_.value:s},set:function(o,s){return i(o).value=s,this},has:function(o){return"value"in i(o)},delete:function(o){return delete i(o).value}}}i.exports=weakMap},6183:function(i){"use strict";function CWiseOp(){return function(i,o,s,_,F,N){var j=i[0],Z=s[0],X=[0];_|=0;var $=0;for($=0;$<j;++$){var ee=o[_]-N,et=o[_+Z]-N;ee>=0!=et>=0&&F.push(X[0]+.5+.5*(ee+et)/(ee-et)),_+=Z,++X[0]}}}var compile=function(){return CWiseOp()};function thunk(i){var o={};return function(s,_,F){var N=s.dtype,j=s.order,Z=[N,j.join()].join(),X=o[Z];return X||(o[Z]=X=i([N,j])),X(s.shape.slice(0),s.data,s.stride,0|s.offset,_,F)}}function createThunk(i){return thunk(compile.bind(void 0,i))}function compileCwise(i){return createThunk({funcName:i.funcName})}i.exports=compileCwise({funcName:"zeroCrossings"})},9584:function(i,o,s){"use strict";i.exports=findZeroCrossings;var _=s(6183);function findZeroCrossings(i,o){var s=[];return o=+o||0,_(i.hi(i.shape[0]-1),s,o),s}},6601:function(){}},o={};function __nested_webpack_require_889453__(s){var _=o[s];if(void 0!==_)return _.exports;var F=o[s]={id:s,loaded:!1,exports:{}};return i[s].call(F.exports,F,F.exports,__nested_webpack_require_889453__),F.loaded=!0,F.exports}return __nested_webpack_require_889453__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(i){if("object"==typeof window)return window}}(),__nested_webpack_require_889453__.nmd=function(i){return i.paths=[],i.children||(i.children=[]),i},__nested_webpack_require_889453__(7386)}()},12856:function(i,o,s){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function _classCallCheck(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var s=0;s<o.length;s++){var _=o[s];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_toPropertyKey(_.key),_)}}function _createClass(i,o,s){return o&&_defineProperties(i.prototype,o),s&&_defineProperties(i,s),Object.defineProperty(i,"prototype",{writable:!1}),i}function _toPropertyKey(i){var o=_toPrimitive(i,"string");return"symbol"===_typeof(o)?o:String(o)}function _toPrimitive(i,o){if("object"!==_typeof(i)||null===i)return i;var s=i[Symbol.toPrimitive];if(void 0!==s){var _=s.call(i,o||"default");if("object"!==_typeof(_))return _;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(i)}function _inherits(i,o){if("function"!=typeof o&&null!==o)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&_setPrototypeOf(i,o)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i})(i,o)}function _createSuper(i){var o=_isNativeReflectConstruct();return function(){var s,_=_getPrototypeOf(i);if(o){var F=_getPrototypeOf(this).constructor;s=Reflect.construct(_,arguments,F)}else s=_.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _possibleConstructorReturn(i,o){if(o&&("object"===_typeof(o)||"function"==typeof o))return o;if(void 0!==o)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(i)}function _assertThisInitialized(i){if(void 0===i)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}var _=s(95341),F=s(95280),N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function typedArraySupport(){try{var i=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(i,o),42===i.foo()}catch(i){return!1}}function createBuffer(i){if(i>2147483647)throw RangeError('The value "'+i+'" is invalid for option "size"');var o=new Uint8Array(i);return Object.setPrototypeOf(o,Buffer.prototype),o}function Buffer(i,o,s){if("number"==typeof i){if("string"==typeof o)throw TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(i)}return from(i,o,s)}function from(i,o,s){if("string"==typeof i)return fromString(i,o);if(ArrayBuffer.isView(i))return fromArrayView(i);if(null==i)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof(i));if(isInstance(i,ArrayBuffer)||i&&isInstance(i.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(isInstance(i,SharedArrayBuffer)||i&&isInstance(i.buffer,SharedArrayBuffer)))return fromArrayBuffer(i,o,s);if("number"==typeof i)throw TypeError('The "value" argument must not be of type number. Received type number');var _=i.valueOf&&i.valueOf();if(null!=_&&_!==i)return Buffer.from(_,o,s);var F=fromObject(i);if(F)return F;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof i[Symbol.toPrimitive])return Buffer.from(i[Symbol.toPrimitive]("string"),o,s);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+_typeof(i))}function assertSize(i){if("number"!=typeof i)throw TypeError('"size" argument must be of type number');if(i<0)throw RangeError('The value "'+i+'" is invalid for option "size"')}function alloc(i,o,s){return(assertSize(i),i<=0)?createBuffer(i):void 0!==o?"string"==typeof s?createBuffer(i).fill(o,s):createBuffer(i).fill(o):createBuffer(i)}function allocUnsafe(i){return assertSize(i),createBuffer(i<0?0:0|checked(i))}function fromString(i,o){if(("string"!=typeof o||""===o)&&(o="utf8"),!Buffer.isEncoding(o))throw TypeError("Unknown encoding: "+o);var s=0|byteLength(i,o),_=createBuffer(s),F=_.write(i,o);return F!==s&&(_=_.slice(0,F)),_}function fromArrayLike(i){for(var o=i.length<0?0:0|checked(i.length),s=createBuffer(o),_=0;_<o;_+=1)s[_]=255&i[_];return s}function fromArrayView(i){if(isInstance(i,Uint8Array)){var o=new Uint8Array(i);return fromArrayBuffer(o.buffer,o.byteOffset,o.byteLength)}return fromArrayLike(i)}function fromArrayBuffer(i,o,s){var _;if(o<0||i.byteLength<o)throw RangeError('"offset" is outside of buffer bounds');if(i.byteLength<o+(s||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(_=void 0===o&&void 0===s?new Uint8Array(i):void 0===s?new Uint8Array(i,o):new Uint8Array(i,o,s),Buffer.prototype),_}function fromObject(i){if(Buffer.isBuffer(i)){var o,s=0|checked(i.length),_=createBuffer(s);return 0===_.length||i.copy(_,0,0,s),_}return void 0!==i.length?"number"!=typeof i.length||(o=i.length)!=o?createBuffer(0):fromArrayLike(i):"Buffer"===i.type&&Array.isArray(i.data)?fromArrayLike(i.data):void 0}function checked(i){if(i>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|i}function SlowBuffer(i){return+i!=i&&(i=0),Buffer.alloc(+i)}function byteLength(i,o){if(Buffer.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||isInstance(i,ArrayBuffer))return i.byteLength;if("string"!=typeof i)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+_typeof(i));var s=i.length,_=arguments.length>2&&!0===arguments[2];if(!_&&0===s)return 0;for(var F=!1;;)switch(o){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return utf8ToBytes(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*s;case"hex":return s>>>1;case"base64":return base64ToBytes(i).length;default:if(F)return _?-1:utf8ToBytes(i).length;o=(""+o).toLowerCase(),F=!0}}function slowToString(i,o,s){var _=!1;if((void 0===o||o<0)&&(o=0),o>this.length||((void 0===s||s>this.length)&&(s=this.length),s<=0||(s>>>=0)<=(o>>>=0)))return"";for(i||(i="utf8");;)switch(i){case"hex":return hexSlice(this,o,s);case"utf8":case"utf-8":return utf8Slice(this,o,s);case"ascii":return asciiSlice(this,o,s);case"latin1":case"binary":return latin1Slice(this,o,s);case"base64":return base64Slice(this,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,o,s);default:if(_)throw TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),_=!0}}function swap(i,o,s){var _=i[o];i[o]=i[s],i[s]=_}function bidirectionalIndexOf(i,o,s,_,F){var N;if(0===i.length)return -1;if("string"==typeof s?(_=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),(N=s=+s)!=N&&(s=F?0:i.length-1),s<0&&(s=i.length+s),s>=i.length){if(F)return -1;s=i.length-1}else if(s<0){if(!F)return -1;s=0}if("string"==typeof o&&(o=Buffer.from(o,_)),Buffer.isBuffer(o))return 0===o.length?-1:arrayIndexOf(i,o,s,_,F);if("number"==typeof o)return(o&=255,"function"==typeof Uint8Array.prototype.indexOf)?F?Uint8Array.prototype.indexOf.call(i,o,s):Uint8Array.prototype.lastIndexOf.call(i,o,s):arrayIndexOf(i,[o],s,_,F);throw TypeError("val must be string, number or Buffer")}function arrayIndexOf(i,o,s,_,F){var N,j=1,Z=i.length,X=o.length;if(void 0!==_&&("ucs2"===(_=String(_).toLowerCase())||"ucs-2"===_||"utf16le"===_||"utf-16le"===_)){if(i.length<2||o.length<2)return -1;j=2,Z/=2,X/=2,s/=2}function read(i,o){return 1===j?i[o]:i.readUInt16BE(o*j)}if(F){var $=-1;for(N=s;N<Z;N++)if(read(i,N)===read(o,-1===$?0:N-$)){if(-1===$&&($=N),N-$+1===X)return $*j}else -1!==$&&(N-=N-$),$=-1}else for(s+X>Z&&(s=Z-X),N=s;N>=0;N--){for(var ee=!0,et=0;et<X;et++)if(read(i,N+et)!==read(o,et)){ee=!1;break}if(ee)return N}return -1}function hexWrite(i,o,s,_){s=Number(s)||0;var F,N=i.length-s;_?(_=Number(_))>N&&(_=N):_=N;var j=o.length;for(_>j/2&&(_=j/2),F=0;F<_;++F){var Z=parseInt(o.substr(2*F,2),16);if(Z!=Z)break;i[s+F]=Z}return F}function utf8Write(i,o,s,_){return blitBuffer(utf8ToBytes(o,i.length-s),i,s,_)}function asciiWrite(i,o,s,_){return blitBuffer(asciiToBytes(o),i,s,_)}function base64Write(i,o,s,_){return blitBuffer(base64ToBytes(o),i,s,_)}function ucs2Write(i,o,s,_){return blitBuffer(utf16leToBytes(o,i.length-s),i,s,_)}function base64Slice(i,o,s){return 0===o&&s===i.length?_.fromByteArray(i):_.fromByteArray(i.slice(o,s))}function utf8Slice(i,o,s){s=Math.min(i.length,s);for(var _=[],F=o;F<s;){var N=i[F],j=null,Z=N>239?4:N>223?3:N>191?2:1;if(F+Z<=s){var X=void 0,$=void 0,ee=void 0,et=void 0;switch(Z){case 1:N<128&&(j=N);break;case 2:(192&(X=i[F+1]))==128&&(et=(31&N)<<6|63&X)>127&&(j=et);break;case 3:X=i[F+1],$=i[F+2],(192&X)==128&&(192&$)==128&&(et=(15&N)<<12|(63&X)<<6|63&$)>2047&&(et<55296||et>57343)&&(j=et);break;case 4:X=i[F+1],$=i[F+2],ee=i[F+3],(192&X)==128&&(192&$)==128&&(192&ee)==128&&(et=(15&N)<<18|(63&X)<<12|(63&$)<<6|63&ee)>65535&&et<1114112&&(j=et)}}null===j?(j=65533,Z=1):j>65535&&(j-=65536,_.push(j>>>10&1023|55296),j=56320|1023&j),_.push(j),F+=Z}return decodeCodePointsArray(_)}function decodeCodePointsArray(i){var o=i.length;if(o<=4096)return String.fromCharCode.apply(String,i);for(var s="",_=0;_<o;)s+=String.fromCharCode.apply(String,i.slice(_,_+=4096));return s}function asciiSlice(i,o,s){var _="";s=Math.min(i.length,s);for(var F=o;F<s;++F)_+=String.fromCharCode(127&i[F]);return _}function latin1Slice(i,o,s){var _="";s=Math.min(i.length,s);for(var F=o;F<s;++F)_+=String.fromCharCode(i[F]);return _}function hexSlice(i,o,s){var _=i.length;(!o||o<0)&&(o=0),(!s||s<0||s>_)&&(s=_);for(var F="",N=o;N<s;++N)F+=X[i[N]];return F}function utf16leSlice(i,o,s){for(var _=i.slice(o,s),F="",N=0;N<_.length-1;N+=2)F+=String.fromCharCode(_[N]+256*_[N+1]);return F}function checkOffset(i,o,s){if(i%1!=0||i<0)throw RangeError("offset is not uint");if(i+o>s)throw RangeError("Trying to access beyond buffer length")}function checkInt(i,o,s,_,F,N){if(!Buffer.isBuffer(i))throw TypeError('"buffer" argument must be a Buffer instance');if(o>F||o<N)throw RangeError('"value" argument is out of bounds');if(s+_>i.length)throw RangeError("Index out of range")}function wrtBigUInt64LE(i,o,s,_,F){checkIntBI(o,_,F,i,s,7);var N=Number(o&BigInt(4294967295));i[s++]=N,N>>=8,i[s++]=N,N>>=8,i[s++]=N,N>>=8,i[s++]=N;var j=Number(o>>BigInt(32)&BigInt(4294967295));return i[s++]=j,j>>=8,i[s++]=j,j>>=8,i[s++]=j,j>>=8,i[s++]=j,s}function wrtBigUInt64BE(i,o,s,_,F){checkIntBI(o,_,F,i,s,7);var N=Number(o&BigInt(4294967295));i[s+7]=N,N>>=8,i[s+6]=N,N>>=8,i[s+5]=N,N>>=8,i[s+4]=N;var j=Number(o>>BigInt(32)&BigInt(4294967295));return i[s+3]=j,j>>=8,i[s+2]=j,j>>=8,i[s+1]=j,j>>=8,i[s]=j,s+8}function checkIEEE754(i,o,s,_,F,N){if(s+_>i.length||s<0)throw RangeError("Index out of range")}function writeFloat(i,o,s,_,N){return o=+o,s>>>=0,N||checkIEEE754(i,o,s,4,34028234663852886e22,-34028234663852886e22),F.write(i,o,s,_,23,4),s+4}function writeDouble(i,o,s,_,N){return o=+o,s>>>=0,N||checkIEEE754(i,o,s,8,17976931348623157e292,-17976931348623157e292),F.write(i,o,s,_,52,8),s+8}o.Buffer=Buffer,o.SlowBuffer=SlowBuffer,o.INSPECT_MAX_BYTES=50,o.kMaxLength=2147483647,Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(i,o,s){return from(i,o,s)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(i,o,s){return alloc(i,o,s)},Buffer.allocUnsafe=function(i){return allocUnsafe(i)},Buffer.allocUnsafeSlow=function(i){return allocUnsafe(i)},Buffer.isBuffer=function(i){return null!=i&&!0===i._isBuffer&&i!==Buffer.prototype},Buffer.compare=function(i,o){if(isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),isInstance(o,Uint8Array)&&(o=Buffer.from(o,o.offset,o.byteLength)),!Buffer.isBuffer(i)||!Buffer.isBuffer(o))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===o)return 0;for(var s=i.length,_=o.length,F=0,N=Math.min(s,_);F<N;++F)if(i[F]!==o[F]){s=i[F],_=o[F];break}return s<_?-1:_<s?1:0},Buffer.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(i,o){if(!Array.isArray(i))throw TypeError('"list" argument must be an Array of Buffers');if(0===i.length)return Buffer.alloc(0);if(void 0===o)for(s=0,o=0;s<i.length;++s)o+=i[s].length;var s,_=Buffer.allocUnsafe(o),F=0;for(s=0;s<i.length;++s){var N=i[s];if(isInstance(N,Uint8Array))F+N.length>_.length?(Buffer.isBuffer(N)||(N=Buffer.from(N)),N.copy(_,F)):Uint8Array.prototype.set.call(_,N,F);else if(Buffer.isBuffer(N))N.copy(_,F);else throw TypeError('"list" argument must be an Array of Buffers');F+=N.length}return _},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var i=this.length;if(i%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<i;o+=2)swap(this,o,o+1);return this},Buffer.prototype.swap32=function(){var i=this.length;if(i%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<i;o+=4)swap(this,o,o+3),swap(this,o+1,o+2);return this},Buffer.prototype.swap64=function(){var i=this.length;if(i%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<i;o+=8)swap(this,o,o+7),swap(this,o+1,o+6),swap(this,o+2,o+5),swap(this,o+3,o+4);return this},Buffer.prototype.toString=function(){var i=this.length;return 0===i?"":0==arguments.length?utf8Slice(this,0,i):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(i){if(!Buffer.isBuffer(i))throw TypeError("Argument must be a Buffer");return this===i||0===Buffer.compare(this,i)},Buffer.prototype.inspect=function(){var i="",s=o.INSPECT_MAX_BYTES;return i=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(i+=" ... "),"<Buffer "+i+">"},N&&(Buffer.prototype[N]=Buffer.prototype.inspect),Buffer.prototype.compare=function(i,o,s,_,F){if(isInstance(i,Uint8Array)&&(i=Buffer.from(i,i.offset,i.byteLength)),!Buffer.isBuffer(i))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+_typeof(i));if(void 0===o&&(o=0),void 0===s&&(s=i?i.length:0),void 0===_&&(_=0),void 0===F&&(F=this.length),o<0||s>i.length||_<0||F>this.length)throw RangeError("out of range index");if(_>=F&&o>=s)return 0;if(_>=F)return -1;if(o>=s)return 1;if(o>>>=0,s>>>=0,_>>>=0,F>>>=0,this===i)return 0;for(var N=F-_,j=s-o,Z=Math.min(N,j),X=this.slice(_,F),$=i.slice(o,s),ee=0;ee<Z;++ee)if(X[ee]!==$[ee]){N=X[ee],j=$[ee];break}return N<j?-1:j<N?1:0},Buffer.prototype.includes=function(i,o,s){return -1!==this.indexOf(i,o,s)},Buffer.prototype.indexOf=function(i,o,s){return bidirectionalIndexOf(this,i,o,s,!0)},Buffer.prototype.lastIndexOf=function(i,o,s){return bidirectionalIndexOf(this,i,o,s,!1)},Buffer.prototype.write=function(i,o,s,_){if(void 0===o)_="utf8",s=this.length,o=0;else if(void 0===s&&"string"==typeof o)_=o,s=this.length,o=0;else if(isFinite(o))o>>>=0,isFinite(s)?(s>>>=0,void 0===_&&(_="utf8")):(_=s,s=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var F=this.length-o;if((void 0===s||s>F)&&(s=F),i.length>0&&(s<0||o<0)||o>this.length)throw RangeError("Attempt to write outside buffer bounds");_||(_="utf8");for(var N=!1;;)switch(_){case"hex":return hexWrite(this,i,o,s);case"utf8":case"utf-8":return utf8Write(this,i,o,s);case"ascii":case"latin1":case"binary":return asciiWrite(this,i,o,s);case"base64":return base64Write(this,i,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,i,o,s);default:if(N)throw TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),N=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(i,o){var s=this.length;i=~~i,o=void 0===o?s:~~o,i<0?(i+=s)<0&&(i=0):i>s&&(i=s),o<0?(o+=s)<0&&(o=0):o>s&&(o=s),o<i&&(o=i);var _=this.subarray(i,o);return Object.setPrototypeOf(_,Buffer.prototype),_},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var _=this[i],F=1,N=0;++N<o&&(F*=256);)_+=this[i+N]*F;return _},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var _=this[i+--o],F=1;o>0&&(F*=256);)_+=this[i+--o]*F;return _},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(i,o){return i>>>=0,o||checkOffset(i,1,this.length),this[i]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(i,o){return i>>>=0,o||checkOffset(i,2,this.length),this[i]|this[i+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(i,o){return i>>>=0,o||checkOffset(i,2,this.length),this[i]<<8|this[i+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+16777216*this[i+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),16777216*this[i]+(this[i+1]<<16|this[i+2]<<8|this[i+3])},Buffer.prototype.readBigUInt64LE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];(void 0===o||void 0===s)&&boundsError(i,this.length-8);var _=o+256*this[++i]+65536*this[++i]+16777216*this[++i],F=this[++i]+256*this[++i]+65536*this[++i]+16777216*s;return BigInt(_)+(BigInt(F)<<BigInt(32))}),Buffer.prototype.readBigUInt64BE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];(void 0===o||void 0===s)&&boundsError(i,this.length-8);var _=16777216*o+65536*this[++i]+256*this[++i]+this[++i],F=16777216*this[++i]+65536*this[++i]+256*this[++i]+s;return(BigInt(_)<<BigInt(32))+BigInt(F)}),Buffer.prototype.readIntLE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var _=this[i],F=1,N=0;++N<o&&(F*=256);)_+=this[i+N]*F;return _>=(F*=128)&&(_-=Math.pow(2,8*o)),_},Buffer.prototype.readIntBE=function(i,o,s){i>>>=0,o>>>=0,s||checkOffset(i,o,this.length);for(var _=o,F=1,N=this[i+--_];_>0&&(F*=256);)N+=this[i+--_]*F;return N>=(F*=128)&&(N-=Math.pow(2,8*o)),N},Buffer.prototype.readInt8=function(i,o){return(i>>>=0,o||checkOffset(i,1,this.length),128&this[i])?-((255-this[i]+1)*1):this[i]},Buffer.prototype.readInt16LE=function(i,o){i>>>=0,o||checkOffset(i,2,this.length);var s=this[i]|this[i+1]<<8;return 32768&s?4294901760|s:s},Buffer.prototype.readInt16BE=function(i,o){i>>>=0,o||checkOffset(i,2,this.length);var s=this[i+1]|this[i]<<8;return 32768&s?4294901760|s:s},Buffer.prototype.readInt32LE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},Buffer.prototype.readInt32BE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},Buffer.prototype.readBigInt64LE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];return(void 0===o||void 0===s)&&boundsError(i,this.length-8),(BigInt(this[i+4]+256*this[i+5]+65536*this[i+6]+(s<<24))<<BigInt(32))+BigInt(o+256*this[++i]+65536*this[++i]+16777216*this[++i])}),Buffer.prototype.readBigInt64BE=defineBigIntMethod(function(i){validateNumber(i>>>=0,"offset");var o=this[i],s=this[i+7];return(void 0===o||void 0===s)&&boundsError(i,this.length-8),(BigInt((o<<24)+65536*this[++i]+256*this[++i]+this[++i])<<BigInt(32))+BigInt(16777216*this[++i]+65536*this[++i]+256*this[++i]+s)}),Buffer.prototype.readFloatLE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),F.read(this,i,!0,23,4)},Buffer.prototype.readFloatBE=function(i,o){return i>>>=0,o||checkOffset(i,4,this.length),F.read(this,i,!1,23,4)},Buffer.prototype.readDoubleLE=function(i,o){return i>>>=0,o||checkOffset(i,8,this.length),F.read(this,i,!0,52,8)},Buffer.prototype.readDoubleBE=function(i,o){return i>>>=0,o||checkOffset(i,8,this.length),F.read(this,i,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(i,o,s,_){if(i=+i,o>>>=0,s>>>=0,!_){var F=Math.pow(2,8*s)-1;checkInt(this,i,o,s,F,0)}var N=1,j=0;for(this[o]=255&i;++j<s&&(N*=256);)this[o+j]=i/N&255;return o+s},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(i,o,s,_){if(i=+i,o>>>=0,s>>>=0,!_){var F=Math.pow(2,8*s)-1;checkInt(this,i,o,s,F,0)}var N=s-1,j=1;for(this[o+N]=255&i;--N>=0&&(j*=256);)this[o+N]=i/j&255;return o+s},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,1,255,0),this[o]=255&i,o+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,65535,0),this[o]=255&i,this[o+1]=i>>>8,o+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,65535,0),this[o]=i>>>8,this[o+1]=255&i,o+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,4294967295,0),this[o+3]=i>>>24,this[o+2]=i>>>16,this[o+1]=i>>>8,this[o]=255&i,o+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,4294967295,0),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=255&i,o+4},Buffer.prototype.writeBigUInt64LE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64LE(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeBigUInt64BE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64BE(this,i,o,BigInt(0),BigInt("0xffffffffffffffff"))}),Buffer.prototype.writeIntLE=function(i,o,s,_){if(i=+i,o>>>=0,!_){var F=Math.pow(2,8*s-1);checkInt(this,i,o,s,F-1,-F)}var N=0,j=1,Z=0;for(this[o]=255&i;++N<s&&(j*=256);)i<0&&0===Z&&0!==this[o+N-1]&&(Z=1),this[o+N]=(i/j>>0)-Z&255;return o+s},Buffer.prototype.writeIntBE=function(i,o,s,_){if(i=+i,o>>>=0,!_){var F=Math.pow(2,8*s-1);checkInt(this,i,o,s,F-1,-F)}var N=s-1,j=1,Z=0;for(this[o+N]=255&i;--N>=0&&(j*=256);)i<0&&0===Z&&0!==this[o+N+1]&&(Z=1),this[o+N]=(i/j>>0)-Z&255;return o+s},Buffer.prototype.writeInt8=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,1,127,-128),i<0&&(i=255+i+1),this[o]=255&i,o+1},Buffer.prototype.writeInt16LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,32767,-32768),this[o]=255&i,this[o+1]=i>>>8,o+2},Buffer.prototype.writeInt16BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,2,32767,-32768),this[o]=i>>>8,this[o+1]=255&i,o+2},Buffer.prototype.writeInt32LE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,2147483647,-2147483648),this[o]=255&i,this[o+1]=i>>>8,this[o+2]=i>>>16,this[o+3]=i>>>24,o+4},Buffer.prototype.writeInt32BE=function(i,o,s){return i=+i,o>>>=0,s||checkInt(this,i,o,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[o]=i>>>24,this[o+1]=i>>>16,this[o+2]=i>>>8,this[o+3]=255&i,o+4},Buffer.prototype.writeBigInt64LE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64LE(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeBigInt64BE=defineBigIntMethod(function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return wrtBigUInt64BE(this,i,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Buffer.prototype.writeFloatLE=function(i,o,s){return writeFloat(this,i,o,!0,s)},Buffer.prototype.writeFloatBE=function(i,o,s){return writeFloat(this,i,o,!1,s)},Buffer.prototype.writeDoubleLE=function(i,o,s){return writeDouble(this,i,o,!0,s)},Buffer.prototype.writeDoubleBE=function(i,o,s){return writeDouble(this,i,o,!1,s)},Buffer.prototype.copy=function(i,o,s,_){if(!Buffer.isBuffer(i))throw TypeError("argument should be a Buffer");if(s||(s=0),_||0===_||(_=this.length),o>=i.length&&(o=i.length),o||(o=0),_>0&&_<s&&(_=s),_===s||0===i.length||0===this.length)return 0;if(o<0)throw RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw RangeError("Index out of range");if(_<0)throw RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),i.length-o<_-s&&(_=i.length-o+s);var F=_-s;return this===i&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(o,s,_):Uint8Array.prototype.set.call(i,this.subarray(s,_),o),F},Buffer.prototype.fill=function(i,o,s,_){if("string"==typeof i){if("string"==typeof o?(_=o,o=0,s=this.length):"string"==typeof s&&(_=s,s=this.length),void 0!==_&&"string"!=typeof _)throw TypeError("encoding must be a string");if("string"==typeof _&&!Buffer.isEncoding(_))throw TypeError("Unknown encoding: "+_);if(1===i.length){var F,N=i.charCodeAt(0);("utf8"===_&&N<128||"latin1"===_)&&(i=N)}}else"number"==typeof i?i&=255:"boolean"==typeof i&&(i=Number(i));if(o<0||this.length<o||this.length<s)throw RangeError("Out of range index");if(s<=o)return this;if(o>>>=0,s=void 0===s?this.length:s>>>0,i||(i=0),"number"==typeof i)for(F=o;F<s;++F)this[F]=i;else{var j=Buffer.isBuffer(i)?i:Buffer.from(i,_),Z=j.length;if(0===Z)throw TypeError('The value "'+i+'" is invalid for argument "value"');for(F=0;F<s-o;++F)this[F+o]=j[F%Z]}return this};var j={};function E(i,o,s){j[i]=function(s){_inherits(NodeError,s);var _=_createSuper(NodeError);function NodeError(){var s;return _classCallCheck(this,NodeError),Object.defineProperty(_assertThisInitialized(s=_.call(this)),"message",{value:o.apply(_assertThisInitialized(s),arguments),writable:!0,configurable:!0}),s.name="".concat(s.name," [").concat(i,"]"),s.stack,delete s.name,s}return _createClass(NodeError,[{key:"code",get:function(){return i},set:function(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(i,"]: ").concat(this.message)}}]),NodeError}(s)}function addNumericalSeparator(i){for(var o="",s=i.length,_="-"===i[0]?1:0;s>=_+4;s-=3)o="_".concat(i.slice(s-3,s)).concat(o);return"".concat(i.slice(0,s)).concat(o)}function checkBounds(i,o,s){validateNumber(o,"offset"),(void 0===i[o]||void 0===i[o+s])&&boundsError(o,i.length-(s+1))}function checkIntBI(i,o,s,_,F,N){if(i>s||i<o){var Z,X="bigint"==typeof o?"n":"";throw Z=N>3?0===o||o===BigInt(0)?">= 0".concat(X," and < 2").concat(X," ** ").concat((N+1)*8).concat(X):">= -(2".concat(X," ** ").concat((N+1)*8-1).concat(X,") and < 2 ** ")+"".concat((N+1)*8-1).concat(X):">= ".concat(o).concat(X," and <= ").concat(s).concat(X),new j.ERR_OUT_OF_RANGE("value",Z,i)}checkBounds(_,F,N)}function validateNumber(i,o){if("number"!=typeof i)throw new j.ERR_INVALID_ARG_TYPE(o,"number",i)}function boundsError(i,o,s){if(Math.floor(i)!==i)throw validateNumber(i,s),new j.ERR_OUT_OF_RANGE(s||"offset","an integer",i);if(o<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(s||"offset",">= ".concat(s?1:0," and <= ").concat(o),i)}E("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?"".concat(i," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(i,o){return'The "'.concat(i,'" argument must be of type number. Received type ').concat(_typeof(o))},TypeError),E("ERR_OUT_OF_RANGE",function(i,o,s){var _='The value of "'.concat(i,'" is out of range.'),F=s;return Number.isInteger(s)&&Math.abs(s)>4294967296?F=addNumericalSeparator(String(s)):"bigint"==typeof s&&(F=String(s),(s>Math.pow(BigInt(2),BigInt(32))||s<-Math.pow(BigInt(2),BigInt(32)))&&(F=addNumericalSeparator(F)),F+="n"),_+=" It must be ".concat(o,". Received ").concat(F)},RangeError);var Z=/[^+/0-9A-Za-z-_]/g;function base64clean(i){if((i=(i=i.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;i.length%4!=0;)i+="=";return i}function utf8ToBytes(i,o){o=o||1/0;for(var s,_=i.length,F=null,N=[],j=0;j<_;++j){if((s=i.charCodeAt(j))>55295&&s<57344){if(!F){if(s>56319||j+1===_){(o-=3)>-1&&N.push(239,191,189);continue}F=s;continue}if(s<56320){(o-=3)>-1&&N.push(239,191,189),F=s;continue}s=(F-55296<<10|s-56320)+65536}else F&&(o-=3)>-1&&N.push(239,191,189);if(F=null,s<128){if((o-=1)<0)break;N.push(s)}else if(s<2048){if((o-=2)<0)break;N.push(s>>6|192,63&s|128)}else if(s<65536){if((o-=3)<0)break;N.push(s>>12|224,s>>6&63|128,63&s|128)}else if(s<1114112){if((o-=4)<0)break;N.push(s>>18|240,s>>12&63|128,s>>6&63|128,63&s|128)}else throw Error("Invalid code point")}return N}function asciiToBytes(i){for(var o=[],s=0;s<i.length;++s)o.push(255&i.charCodeAt(s));return o}function utf16leToBytes(i,o){for(var s,_,F=[],N=0;N<i.length&&!((o-=2)<0);++N)_=(s=i.charCodeAt(N))>>8,F.push(s%256),F.push(_);return F}function base64ToBytes(i){return _.toByteArray(base64clean(i))}function blitBuffer(i,o,s,_){var F;for(F=0;F<_&&!(F+s>=o.length)&&!(F>=i.length);++F)o[F+s]=i[F];return F}function isInstance(i,o){return i instanceof o||null!=i&&null!=i.constructor&&null!=i.constructor.name&&i.constructor.name===o.name}var X=function(){for(var i="0123456789abcdef",o=Array(256),s=0;s<16;++s)for(var _=16*s,F=0;F<16;++F)o[_+F]=i[s]+i[F];return o}();function defineBigIntMethod(i){return"undefined"==typeof BigInt?BufferBigIntNotDefined:i}function BufferBigIntNotDefined(){throw Error("BigInt not supported")}},35791:function(i){"use strict";i.exports=isMobile,i.exports.isMobile=isMobile,i.exports.default=isMobile;var o=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,s=/CrOS/,_=/android|ipad|playbook|silk/i;function isMobile(i){i||(i={});var F=i.ua;if(F||"undefined"==typeof navigator||(F=navigator.userAgent),F&&F.headers&&"string"==typeof F.headers["user-agent"]&&(F=F.headers["user-agent"]),"string"!=typeof F)return!1;var N=o.test(F)&&!s.test(F)||!!i.tablet&&_.test(F);return!N&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==F.indexOf("Macintosh")&&-1!==F.indexOf("Safari")&&(N=!0),N}},86781:function(i,o,s){"use strict";s.r(o),s.d(o,{sankeyCenter:function(){return center},sankeyCircular:function(){return sankeyCircular},sankeyJustify:function(){return justify},sankeyLeft:function(){return left},sankeyRight:function(){return right}});var _=s(33064),F=s(15140),N=s(45879),j=s(2502),Z=s.n(j);function targetDepth(i){return i.target.depth}function left(i){return i.depth}function right(i,o){return o-1-i.height}function justify(i,o){return i.sourceLinks.length?i.depth:o-1}function center(i){return i.targetLinks.length?i.depth:i.sourceLinks.length?(0,_.VV)(i.sourceLinks,targetDepth)-1:0}function constant(i){return function(){return i}}var X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function ascendingSourceBreadth(i,o){return ascendingBreadth(i.source,o.source)||i.index-o.index}function ascendingTargetBreadth(i,o){return ascendingBreadth(i.target,o.target)||i.index-o.index}function ascendingBreadth(i,o){return i.partOfCycle===o.partOfCycle?i.y0-o.y0:"top"===i.circularLinkType||"bottom"===o.circularLinkType?-1:1}function value(i){return i.value}function nodeCenter(i){return(i.y0+i.y1)/2}function linkSourceCenter(i){return nodeCenter(i.source)}function linkTargetCenter(i){return nodeCenter(i.target)}function defaultId(i){return i.index}function defaultNodes(i){return i.nodes}function defaultLinks(i){return i.links}function find(i,o){var s=i.get(o);if(!s)throw Error("missing: "+o);return s}function sankeyCircular(){var i,o,s=0,N=0,j=1,Z=1,$=24,ee=defaultId,et=justify,er=defaultNodes,en=defaultLinks,ei=32,eo=2,es=null;function sankeyCircular(){var i={nodes:er.apply(null,arguments),links:en.apply(null,arguments)};computeNodeLinks(i),identifyCircles(i,ee,es),computeNodeValues(i),computeNodeDepths(i),selectCircularLinkTypes(i,ee),computeNodeBreadths(i,ei,ee),computeLinkBreadths(i);for(var o=0;o<4;o++)sortSourceLinks(i,Z,ee),sortTargetLinks(i,Z,ee),resolveNodeLinkOverlaps(i,N,Z,ee),sortSourceLinks(i,Z,ee),sortTargetLinks(i,Z,ee);return fillHeight(i,N,Z),addCircularPathData(i,eo,Z,ee),i}function computeNodeLinks(i){i.nodes.forEach(function(i,o){i.index=o,i.sourceLinks=[],i.targetLinks=[]});var o=(0,F.UI)(i.nodes,ee);return i.links.forEach(function(i,s){i.index=s;var _=i.source,F=i.target;(void 0===_?"undefined":X(_))!=="object"&&(_=i.source=find(o,_)),(void 0===F?"undefined":X(F))!=="object"&&(F=i.target=find(o,F)),_.sourceLinks.push(i),F.targetLinks.push(i)}),i}function computeNodeValues(i){i.nodes.forEach(function(i){i.partOfCycle=!1,i.value=Math.max((0,_.Sm)(i.sourceLinks,value),(0,_.Sm)(i.targetLinks,value)),i.sourceLinks.forEach(function(o){o.circular&&(i.partOfCycle=!0,i.circularLinkType=o.circularLinkType)}),i.targetLinks.forEach(function(o){o.circular&&(i.partOfCycle=!0,i.circularLinkType=o.circularLinkType)})})}function getCircleMargins(i){var o=0,s=0,F=0,N=0,j=(0,_.Fp)(i.nodes,function(i){return i.column});return i.links.forEach(function(i){i.circular&&("top"==i.circularLinkType?o+=i.width:s+=i.width,0==i.target.column&&(N+=i.width),i.source.column==j&&(F+=i.width))}),{top:o=o>0?o+25+10:o,bottom:s=s>0?s+25+10:s,left:N=N>0?N+25+10:N,right:F=F>0?F+25+10:F}}function scaleSankeySize(i,o){var F=(0,_.Fp)(i.nodes,function(i){return i.column}),X=j-s,ee=Z-N,et=X+o.right+o.left,er=ee+o.top+o.bottom,en=X/et,ei=ee/er;return s=s*en+o.left,j=0==o.right?j:j*en,N=N*ei+o.top,Z*=ei,i.nodes.forEach(function(i){i.x0=s+i.column*((j-s-$)/F),i.x1=i.x0+$}),ei}function computeNodeDepths(i){var o,s,_;for(o=i.nodes,s=[],_=0;o.length;++_,o=s,s=[])o.forEach(function(i){i.depth=_,i.sourceLinks.forEach(function(i){0>s.indexOf(i.target)&&!i.circular&&s.push(i.target)})});for(o=i.nodes,s=[],_=0;o.length;++_,o=s,s=[])o.forEach(function(i){i.height=_,i.targetLinks.forEach(function(i){0>s.indexOf(i.source)&&!i.circular&&s.push(i.source)})});i.nodes.forEach(function(i){i.column=Math.floor(et.call(null,i,_))})}function computeNodeBreadths(s,j,X){var $=(0,F.b1)().key(function(i){return i.column}).sortKeys(_.j2).entries(s.nodes).map(function(i){return i.values});initializeNodeBreadth(X),resolveCollisions();for(var ee=1,et=j;et>0;--et)relaxLeftAndRight(ee*=.99,X),resolveCollisions();function initializeNodeBreadth(F){if(o){var j=1/0;$.forEach(function(i){var s=Z*o/(i.length+1);j=s<j?s:j}),i=j}var X=(0,_.VV)($,function(o){return(Z-N-(o.length-1)*i)/(0,_.Sm)(o,value)});X*=.3,s.links.forEach(function(i){i.width=i.value*X});var ee=getCircleMargins(s),et=scaleSankeySize(s,ee);X*=et,s.links.forEach(function(i){i.width=i.value*X}),$.forEach(function(i){var o=i.length;i.forEach(function(i,s){i.depth==$.length-1&&1==o?i.y0=Z/2-i.value*X:0==i.depth&&1==o?i.y0=Z/2-i.value*X:i.partOfCycle?0==numberOfNonSelfLinkingCycles(i,F)?i.y0=Z/2+s:"top"==i.circularLinkType?i.y0=N+s:i.y0=Z-i.value*X-s:0==ee.top||0==ee.bottom?i.y0=(Z-N)/o*s:i.y0=(Z-N)/2-o/2+s,i.y1=i.y0+i.value*X})})}function relaxLeftAndRight(i,o){var s=$.length;$.forEach(function(F){var N=F.length,j=F[0].depth;F.forEach(function(F){var X;if(F.sourceLinks.length||F.targetLinks.length){if(F.partOfCycle&&numberOfNonSelfLinkingCycles(F,o)>0);else if(0==j&&1==N)X=F.y1-F.y0,F.y0=Z/2-X/2,F.y1=Z/2+X/2;else if(j==s-1&&1==N)X=F.y1-F.y0,F.y0=Z/2-X/2,F.y1=Z/2+X/2;else{var $=(0,_.J6)(F.sourceLinks,linkTargetCenter),ee=(0,_.J6)(F.targetLinks,linkSourceCenter),et=(($&&ee?($+ee)/2:$||ee)-nodeCenter(F))*i;F.y0+=et,F.y1+=et}}})})}function resolveCollisions(){$.forEach(function(o){var s,_,F,j=N,X=o.length;for(o.sort(ascendingBreadth),F=0;F<X;++F)(_=j-(s=o[F]).y0)>0&&(s.y0+=_,s.y1+=_),j=s.y1+i;if((_=j-i-Z)>0)for(j=s.y0-=_,s.y1-=_,F=X-2;F>=0;--F)(_=(s=o[F]).y1+i-j)>0&&(s.y0-=_,s.y1-=_),j=s.y0})}}function computeLinkBreadths(i){i.nodes.forEach(function(i){i.sourceLinks.sort(ascendingTargetBreadth),i.targetLinks.sort(ascendingSourceBreadth)}),i.nodes.forEach(function(i){var o=i.y0,s=o,_=i.y1,F=_;i.sourceLinks.forEach(function(i){i.circular?(i.y0=_-i.width/2,_-=i.width):(i.y0=o+i.width/2,o+=i.width)}),i.targetLinks.forEach(function(i){i.circular?(i.y1=F-i.width/2,F-=i.width):(i.y1=s+i.width/2,s+=i.width)})})}return sankeyCircular.nodeId=function(i){return arguments.length?(ee="function"==typeof i?i:constant(i),sankeyCircular):ee},sankeyCircular.nodeAlign=function(i){return arguments.length?(et="function"==typeof i?i:constant(i),sankeyCircular):et},sankeyCircular.nodeWidth=function(i){return arguments.length?($=+i,sankeyCircular):$},sankeyCircular.nodePadding=function(o){return arguments.length?(i=+o,sankeyCircular):i},sankeyCircular.nodes=function(i){return arguments.length?(er="function"==typeof i?i:constant(i),sankeyCircular):er},sankeyCircular.links=function(i){return arguments.length?(en="function"==typeof i?i:constant(i),sankeyCircular):en},sankeyCircular.size=function(i){return arguments.length?(s=N=0,j=+i[0],Z=+i[1],sankeyCircular):[j-s,Z-N]},sankeyCircular.extent=function(i){return arguments.length?(s=+i[0][0],j=+i[1][0],N=+i[0][1],Z=+i[1][1],sankeyCircular):[[s,N],[j,Z]]},sankeyCircular.iterations=function(i){return arguments.length?(ei=+i,sankeyCircular):ei},sankeyCircular.circularLinkGap=function(i){return arguments.length?(eo=+i,sankeyCircular):eo},sankeyCircular.nodePaddingRatio=function(i){return arguments.length?(o=+i,sankeyCircular):o},sankeyCircular.sortNodes=function(i){return arguments.length?(es=i,sankeyCircular):es},sankeyCircular.update=function(i){return selectCircularLinkTypes(i,ee),computeLinkBreadths(i),i.links.forEach(function(i){i.circular&&(i.circularLinkType=i.y0+i.y1<Z?"top":"bottom",i.source.circularLinkType=i.circularLinkType,i.target.circularLinkType=i.circularLinkType)}),sortSourceLinks(i,Z,ee,!1),sortTargetLinks(i,Z,ee),addCircularPathData(i,eo,Z,ee),i},sankeyCircular}function identifyCircles(i,o,s){var _=0;if(null===s){for(var F=[],N=0;N<i.links.length;N++){var j=i.links[N],X=j.source.index,$=j.target.index;F[X]||(F[X]=[]),F[$]||(F[$]=[]),-1===F[X].indexOf($)&&F[X].push($)}var ee=Z()(F);ee.sort(function(i,o){return i.length-o.length});var et={};for(N=0;N<ee.length;N++){var er=ee[N].slice(-2);et[er[0]]||(et[er[0]]={}),et[er[0]][er[1]]=!0}i.links.forEach(function(i){var o=i.target.index,s=i.source.index;o===s||et[s]&&et[s][o]?(i.circular=!0,i.circularLinkID=_,_+=1):i.circular=!1})}else i.links.forEach(function(i){i.source[s]<i.target[s]?i.circular=!1:(i.circular=!0,i.circularLinkID=_,_+=1)})}function selectCircularLinkTypes(i,o){var s=0,_=0;i.links.forEach(function(F){F.circular&&(F.source.circularLinkType||F.target.circularLinkType?F.circularLinkType=F.source.circularLinkType?F.source.circularLinkType:F.target.circularLinkType:F.circularLinkType=s<_?"top":"bottom","top"==F.circularLinkType?s+=1:_+=1,i.nodes.forEach(function(i){(o(i)==o(F.source)||o(i)==o(F.target))&&(i.circularLinkType=F.circularLinkType)}))}),i.links.forEach(function(i){i.circular&&(i.source.circularLinkType==i.target.circularLinkType&&(i.circularLinkType=i.source.circularLinkType),selfLinking(i,o)&&(i.circularLinkType=i.source.circularLinkType))})}function linkAngle(i){var o=Math.abs(i.y1-i.y0);return Math.atan(Math.abs(i.target.x0-i.source.x1)/o)}function circularLinksCross(i,o){return!(i.source.column<o.target.column)&&!(i.target.column>o.source.column)}function numberOfNonSelfLinkingCycles(i,o){var s=0;i.sourceLinks.forEach(function(i){s=i.circular&&!selfLinking(i,o)?s+1:s});var _=0;return i.targetLinks.forEach(function(i){_=i.circular&&!selfLinking(i,o)?_+1:_}),s+_}function onlyCircularLink(i){var o=i.source.sourceLinks,s=0;o.forEach(function(i){s=i.circular?s+1:s});var _=i.target.targetLinks,F=0;return _.forEach(function(i){F=i.circular?F+1:F}),!(s>1)&&!(F>1)}function calcVerticalBuffer(i,o,s){return i.sort(sortLinkColumnAscending),i.forEach(function(_,F){var N=0;if(selfLinking(_,s)&&onlyCircularLink(_))_.circularPathData.verticalBuffer=N+_.width/2;else{for(var j=0;j<F;j++)if(circularLinksCross(i[F],i[j])){var Z=i[j].circularPathData.verticalBuffer+i[j].width/2+o;N=Z>N?Z:N}_.circularPathData.verticalBuffer=N+_.width/2}}),i}function addCircularPathData(i,o,s,F){var j=(0,_.VV)(i.links,function(i){return i.source.y0});i.links.forEach(function(i){i.circular&&(i.circularPathData={})}),calcVerticalBuffer(i.links.filter(function(i){return"top"==i.circularLinkType}),o,F),calcVerticalBuffer(i.links.filter(function(i){return"bottom"==i.circularLinkType}),o,F),i.links.forEach(function(_){if(_.circular){if(_.circularPathData.arcRadius=_.width+10,_.circularPathData.leftNodeBuffer=5,_.circularPathData.rightNodeBuffer=5,_.circularPathData.sourceWidth=_.source.x1-_.source.x0,_.circularPathData.sourceX=_.source.x0+_.circularPathData.sourceWidth,_.circularPathData.targetX=_.target.x0,_.circularPathData.sourceY=_.y0,_.circularPathData.targetY=_.y1,selfLinking(_,F)&&onlyCircularLink(_))_.circularPathData.leftSmallArcRadius=10+_.width/2,_.circularPathData.leftLargeArcRadius=10+_.width/2,_.circularPathData.rightSmallArcRadius=10+_.width/2,_.circularPathData.rightLargeArcRadius=10+_.width/2,"bottom"==_.circularLinkType?(_.circularPathData.verticalFullExtent=_.source.y1+25+_.circularPathData.verticalBuffer,_.circularPathData.verticalLeftInnerExtent=_.circularPathData.verticalFullExtent-_.circularPathData.leftLargeArcRadius,_.circularPathData.verticalRightInnerExtent=_.circularPathData.verticalFullExtent-_.circularPathData.rightLargeArcRadius):(_.circularPathData.verticalFullExtent=_.source.y0-25-_.circularPathData.verticalBuffer,_.circularPathData.verticalLeftInnerExtent=_.circularPathData.verticalFullExtent+_.circularPathData.leftLargeArcRadius,_.circularPathData.verticalRightInnerExtent=_.circularPathData.verticalFullExtent+_.circularPathData.rightLargeArcRadius);else{var Z=_.source.column,X=_.circularLinkType,$=i.links.filter(function(i){return i.source.column==Z&&i.circularLinkType==X});"bottom"==_.circularLinkType?$.sort(sortLinkSourceYDescending):$.sort(sortLinkSourceYAscending);var ee=0;$.forEach(function(i,s){i.circularLinkID==_.circularLinkID&&(_.circularPathData.leftSmallArcRadius=10+_.width/2+ee,_.circularPathData.leftLargeArcRadius=10+_.width/2+s*o+ee),ee+=i.width}),Z=_.target.column,$=i.links.filter(function(i){return i.target.column==Z&&i.circularLinkType==X}),"bottom"==_.circularLinkType?$.sort(sortLinkTargetYDescending):$.sort(sortLinkTargetYAscending),ee=0,$.forEach(function(i,s){i.circularLinkID==_.circularLinkID&&(_.circularPathData.rightSmallArcRadius=10+_.width/2+ee,_.circularPathData.rightLargeArcRadius=10+_.width/2+s*o+ee),ee+=i.width}),"bottom"==_.circularLinkType?(_.circularPathData.verticalFullExtent=Math.max(s,_.source.y1,_.target.y1)+25+_.circularPathData.verticalBuffer,_.circularPathData.verticalLeftInnerExtent=_.circularPathData.verticalFullExtent-_.circularPathData.leftLargeArcRadius,_.circularPathData.verticalRightInnerExtent=_.circularPathData.verticalFullExtent-_.circularPathData.rightLargeArcRadius):(_.circularPathData.verticalFullExtent=j-25-_.circularPathData.verticalBuffer,_.circularPathData.verticalLeftInnerExtent=_.circularPathData.verticalFullExtent+_.circularPathData.leftLargeArcRadius,_.circularPathData.verticalRightInnerExtent=_.circularPathData.verticalFullExtent+_.circularPathData.rightLargeArcRadius)}_.circularPathData.leftInnerExtent=_.circularPathData.sourceX+_.circularPathData.leftNodeBuffer,_.circularPathData.rightInnerExtent=_.circularPathData.targetX-_.circularPathData.rightNodeBuffer,_.circularPathData.leftFullExtent=_.circularPathData.sourceX+_.circularPathData.leftLargeArcRadius+_.circularPathData.leftNodeBuffer,_.circularPathData.rightFullExtent=_.circularPathData.targetX-_.circularPathData.rightLargeArcRadius-_.circularPathData.rightNodeBuffer}if(_.circular)_.path=createCircularPathString(_);else{var et=(0,N.h5)().source(function(i){return[i.source.x0+(i.source.x1-i.source.x0),i.y0]}).target(function(i){return[i.target.x0,i.y1]});_.path=et(_)}})}function createCircularPathString(i){return"top"==i.circularLinkType?"M"+i.circularPathData.sourceX+" "+i.circularPathData.sourceY+" L"+i.circularPathData.leftInnerExtent+" "+i.circularPathData.sourceY+" A"+i.circularPathData.leftLargeArcRadius+" "+i.circularPathData.leftSmallArcRadius+" 0 0 0 "+i.circularPathData.leftFullExtent+" "+(i.circularPathData.sourceY-i.circularPathData.leftSmallArcRadius)+" L"+i.circularPathData.leftFullExtent+" "+i.circularPathData.verticalLeftInnerExtent+" A"+i.circularPathData.leftLargeArcRadius+" "+i.circularPathData.leftLargeArcRadius+" 0 0 0 "+i.circularPathData.leftInnerExtent+" "+i.circularPathData.verticalFullExtent+" L"+i.circularPathData.rightInnerExtent+" "+i.circularPathData.verticalFullExtent+" A"+i.circularPathData.rightLargeArcRadius+" "+i.circularPathData.rightLargeArcRadius+" 0 0 0 "+i.circularPathData.rightFullExtent+" "+i.circularPathData.verticalRightInnerExtent+" L"+i.circularPathData.rightFullExtent+" "+(i.circularPathData.targetY-i.circularPathData.rightSmallArcRadius)+" A"+i.circularPathData.rightLargeArcRadius+" "+i.circularPathData.rightSmallArcRadius+" 0 0 0 "+i.circularPathData.rightInnerExtent+" "+i.circularPathData.targetY+" L"+i.circularPathData.targetX+" "+i.circularPathData.targetY:"M"+i.circularPathData.sourceX+" "+i.circularPathData.sourceY+" L"+i.circularPathData.leftInnerExtent+" "+i.circularPathData.sourceY+" A"+i.circularPathData.leftLargeArcRadius+" "+i.circularPathData.leftSmallArcRadius+" 0 0 1 "+i.circularPathData.leftFullExtent+" "+(i.circularPathData.sourceY+i.circularPathData.leftSmallArcRadius)+" L"+i.circularPathData.leftFullExtent+" "+i.circularPathData.verticalLeftInnerExtent+" A"+i.circularPathData.leftLargeArcRadius+" "+i.circularPathData.leftLargeArcRadius+" 0 0 1 "+i.circularPathData.leftInnerExtent+" "+i.circularPathData.verticalFullExtent+" L"+i.circularPathData.rightInnerExtent+" "+i.circularPathData.verticalFullExtent+" A"+i.circularPathData.rightLargeArcRadius+" "+i.circularPathData.rightLargeArcRadius+" 0 0 1 "+i.circularPathData.rightFullExtent+" "+i.circularPathData.verticalRightInnerExtent+" L"+i.circularPathData.rightFullExtent+" "+(i.circularPathData.targetY+i.circularPathData.rightSmallArcRadius)+" A"+i.circularPathData.rightLargeArcRadius+" "+i.circularPathData.rightSmallArcRadius+" 0 0 1 "+i.circularPathData.rightInnerExtent+" "+i.circularPathData.targetY+" L"+i.circularPathData.targetX+" "+i.circularPathData.targetY}function sortLinkColumnAscending(i,o){return linkColumnDistance(i)==linkColumnDistance(o)?"bottom"==i.circularLinkType?sortLinkSourceYDescending(i,o):sortLinkSourceYAscending(i,o):linkColumnDistance(o)-linkColumnDistance(i)}function sortLinkSourceYAscending(i,o){return i.y0-o.y0}function sortLinkSourceYDescending(i,o){return o.y0-i.y0}function sortLinkTargetYAscending(i,o){return i.y1-o.y1}function sortLinkTargetYDescending(i,o){return o.y1-i.y1}function linkColumnDistance(i){return i.target.column-i.source.column}function linkXLength(i){return i.target.x0-i.source.x1}function linkPerpendicularYToLinkSource(i,o){var s=linkAngle(i),_=linkXLength(o)/Math.tan(s);return"up"==incline(i)?i.y1+_:i.y1-_}function linkPerpendicularYToLinkTarget(i,o){var s=linkAngle(i),_=linkXLength(o)/Math.tan(s);return"up"==incline(i)?i.y1-_:i.y1+_}function resolveNodeLinkOverlaps(i,o,s,_){i.links.forEach(function(F){if(!F.circular&&F.target.column-F.source.column>1){var N=F.source.column+1,j=F.target.column-1,Z=1,X=j-N+1;for(Z=1;N<=j;N++,Z++)i.nodes.forEach(function(j){if(j.column==N){var $,ee=Z/(X+1),et=Math.pow(1-ee,3),er=3*ee*Math.pow(1-ee,2),en=3*Math.pow(ee,2)*(1-ee),ei=Math.pow(ee,3),eo=et*F.y0+er*F.y0+en*F.y1+ei*F.y1,es=eo-F.width/2,el=eo+F.width/2;es>j.y0&&es<j.y1?($=j.y1-es+10,$="bottom"==j.circularLinkType?$:-$,j=adjustNodeHeight(j,$,o,s),i.nodes.forEach(function(i){_(i)!=_(j)&&i.column==j.column&&nodesOverlap(j,i)&&adjustNodeHeight(i,$,o,s)})):el>j.y0&&el<j.y1?($=el-j.y0+10,j=adjustNodeHeight(j,$,o,s),i.nodes.forEach(function(i){_(i)!=_(j)&&i.column==j.column&&i.y0<j.y1&&i.y1>j.y1&&adjustNodeHeight(i,$,o,s)})):es<j.y0&&el>j.y1&&($=el-j.y0+10,j=adjustNodeHeight(j,$,o,s),i.nodes.forEach(function(i){_(i)!=_(j)&&i.column==j.column&&i.y0<j.y1&&i.y1>j.y1&&adjustNodeHeight(i,$,o,s)}))}})}})}function nodesOverlap(i,o){return i.y0>o.y0&&i.y0<o.y1||i.y1>o.y0&&i.y1<o.y1||!!(i.y0<o.y0)&&!!(i.y1>o.y1)}function adjustNodeHeight(i,o,s,_){return i.y0+o>=s&&i.y1+o<=_&&(i.y0=i.y0+o,i.y1=i.y1+o,i.targetLinks.forEach(function(i){i.y1=i.y1+o}),i.sourceLinks.forEach(function(i){i.y0=i.y0+o})),i}function sortSourceLinks(i,o,s,_){i.nodes.forEach(function(F){_&&F.y+(F.y1-F.y0)>o&&(F.y=F.y-(F.y+(F.y1-F.y0)-o));var N=i.links.filter(function(i){return s(i.source)==s(F)}),j=N.length;j>1&&N.sort(function(i,o){if(!i.circular&&!o.circular){if(i.target.column==o.target.column||incline(i)!=incline(o))return i.y1-o.y1;if(i.target.column>o.target.column){var s=linkPerpendicularYToLinkTarget(o,i);return i.y1-s}if(o.target.column>i.target.column)return linkPerpendicularYToLinkTarget(i,o)-o.y1}return i.circular&&!o.circular?"top"==i.circularLinkType?-1:1:o.circular&&!i.circular?"top"==o.circularLinkType?1:-1:i.circular&&o.circular?i.circularLinkType===o.circularLinkType&&"top"==i.circularLinkType?i.target.column===o.target.column?i.target.y1-o.target.y1:o.target.column-i.target.column:i.circularLinkType!==o.circularLinkType||"bottom"!=i.circularLinkType?"top"==i.circularLinkType?-1:1:i.target.column===o.target.column?o.target.y1-i.target.y1:i.target.column-o.target.column:void 0});var Z=F.y0;N.forEach(function(i){i.y0=Z+i.width/2,Z+=i.width}),N.forEach(function(i,o){if("bottom"==i.circularLinkType){for(var s=o+1,_=0;s<j;s++)_+=N[s].width;i.y0=F.y1-_-i.width/2}})})}function sortTargetLinks(i,o,s){i.nodes.forEach(function(o){var _=i.links.filter(function(i){return s(i.target)==s(o)}),F=_.length;F>1&&_.sort(function(i,o){if(!i.circular&&!o.circular){if(i.source.column==o.source.column||incline(i)!=incline(o))return i.y0-o.y0;if(o.source.column<i.source.column){var s=linkPerpendicularYToLinkSource(o,i);return i.y0-s}if(i.source.column<o.source.column)return linkPerpendicularYToLinkSource(i,o)-o.y0}return i.circular&&!o.circular?"top"==i.circularLinkType?-1:1:o.circular&&!i.circular?"top"==o.circularLinkType?1:-1:i.circular&&o.circular?i.circularLinkType===o.circularLinkType&&"top"==i.circularLinkType?i.source.column===o.source.column?i.source.y1-o.source.y1:i.source.column-o.source.column:i.circularLinkType!==o.circularLinkType||"bottom"!=i.circularLinkType?"top"==i.circularLinkType?-1:1:i.source.column===o.source.column?i.source.y1-o.source.y1:o.source.column-i.source.column:void 0});var N=o.y0;_.forEach(function(i){i.y1=N+i.width/2,N+=i.width}),_.forEach(function(i,s){if("bottom"==i.circularLinkType){for(var N=s+1,j=0;N<F;N++)j+=_[N].width;i.y1=o.y1-j-i.width/2}})})}function incline(i){return i.y0-i.y1>0?"up":"down"}function selfLinking(i,o){return o(i.source)==o(i.target)}function fillHeight(i,o,s){var F=i.nodes,N=i.links,j=!1,Z=!1;if(N.forEach(function(i){"top"==i.circularLinkType?j=!0:"bottom"==i.circularLinkType&&(Z=!0)}),!1==j||!1==Z){var X=(0,_.VV)(F,function(i){return i.y0}),$=(s-o)/((0,_.Fp)(F,function(i){return i.y1})-X);F.forEach(function(i){var o=(i.y1-i.y0)*$;i.y0=(i.y0-X)*$,i.y1=i.y0+o}),N.forEach(function(i){i.y0=(i.y0-X)*$,i.y1=(i.y1-X)*$,i.width=i.width*$})}}},30838:function(i,o,s){"use strict";s.r(o),s.d(o,{sankey:function(){return sankey},sankeyCenter:function(){return center},sankeyJustify:function(){return justify},sankeyLeft:function(){return left},sankeyLinkHorizontal:function(){return sankeyLinkHorizontal},sankeyRight:function(){return right}});var _=s(33064),F=s(15140);function targetDepth(i){return i.target.depth}function left(i){return i.depth}function right(i,o){return o-1-i.height}function justify(i,o){return i.sourceLinks.length?i.depth:o-1}function center(i){return i.targetLinks.length?i.depth:i.sourceLinks.length?(0,_.VV)(i.sourceLinks,targetDepth)-1:0}function constant(i){return function(){return i}}function ascendingSourceBreadth(i,o){return ascendingBreadth(i.source,o.source)||i.index-o.index}function ascendingTargetBreadth(i,o){return ascendingBreadth(i.target,o.target)||i.index-o.index}function ascendingBreadth(i,o){return i.y0-o.y0}function value(i){return i.value}function nodeCenter(i){return(i.y0+i.y1)/2}function weightedSource(i){return nodeCenter(i.source)*i.value}function weightedTarget(i){return nodeCenter(i.target)*i.value}function defaultId(i){return i.index}function defaultNodes(i){return i.nodes}function defaultLinks(i){return i.links}function find(i,o){var s=i.get(o);if(!s)throw Error("missing: "+o);return s}function sankey(){var i=0,o=0,s=1,N=1,j=24,Z=8,X=defaultId,$=justify,ee=defaultNodes,et=defaultLinks,er=32,en=2/3;function sankey(){var i={nodes:ee.apply(null,arguments),links:et.apply(null,arguments)};return computeNodeLinks(i),computeNodeValues(i),computeNodeDepths(i),computeNodeBreadths(i,er),computeLinkBreadths(i),i}function computeNodeLinks(i){i.nodes.forEach(function(i,o){i.index=o,i.sourceLinks=[],i.targetLinks=[]});var o=(0,F.UI)(i.nodes,X);i.links.forEach(function(i,s){i.index=s;var _=i.source,F=i.target;"object"!=typeof _&&(_=i.source=find(o,_)),"object"!=typeof F&&(F=i.target=find(o,F)),_.sourceLinks.push(i),F.targetLinks.push(i)})}function computeNodeValues(i){i.nodes.forEach(function(i){i.value=Math.max((0,_.Sm)(i.sourceLinks,value),(0,_.Sm)(i.targetLinks,value))})}function computeNodeDepths(o){for(_=o.nodes,F=[],N=0;_.length;++N,_=F,F=[])_.forEach(function(i){i.depth=N,i.sourceLinks.forEach(function(i){0>F.indexOf(i.target)&&F.push(i.target)})});for(_=o.nodes,F=[],N=0;_.length;++N,_=F,F=[])_.forEach(function(i){i.height=N,i.targetLinks.forEach(function(i){0>F.indexOf(i.source)&&F.push(i.source)})});var _,F,N,Z=(s-i-j)/(N-1);o.nodes.forEach(function(o){o.x1=(o.x0=i+Math.max(0,Math.min(N-1,Math.floor($.call(null,o,N))))*Z)+j})}function computeNodeBreadths(i){var s=(0,F.b1)().key(function(i){return i.x0}).sortKeys(_.j2).entries(i.nodes).map(function(i){return i.values});initializeNodeBreadth(),resolveCollisions();for(var j=1,X=er;X>0;--X)relaxRightToLeft(j*=.99),resolveCollisions(),relaxLeftToRight(j),resolveCollisions();function initializeNodeBreadth(){var F=(0,_.Fp)(s,function(i){return i.length}),j=en*(N-o)/(F-1);Z>j&&(Z=j);var X=(0,_.VV)(s,function(i){return(N-o-(i.length-1)*Z)/(0,_.Sm)(i,value)});s.forEach(function(i){i.forEach(function(i,o){i.y1=(i.y0=o)+i.value*X})}),i.links.forEach(function(i){i.width=i.value*X})}function relaxLeftToRight(i){s.forEach(function(o){o.forEach(function(o){if(o.targetLinks.length){var s=((0,_.Sm)(o.targetLinks,weightedSource)/(0,_.Sm)(o.targetLinks,value)-nodeCenter(o))*i;o.y0+=s,o.y1+=s}})})}function relaxRightToLeft(i){s.slice().reverse().forEach(function(o){o.forEach(function(o){if(o.sourceLinks.length){var s=((0,_.Sm)(o.sourceLinks,weightedTarget)/(0,_.Sm)(o.sourceLinks,value)-nodeCenter(o))*i;o.y0+=s,o.y1+=s}})})}function resolveCollisions(){s.forEach(function(i){var s,_,F,j=o,X=i.length;for(i.sort(ascendingBreadth),F=0;F<X;++F)(_=j-(s=i[F]).y0)>0&&(s.y0+=_,s.y1+=_),j=s.y1+Z;if((_=j-Z-N)>0)for(j=s.y0-=_,s.y1-=_,F=X-2;F>=0;--F)(_=(s=i[F]).y1+Z-j)>0&&(s.y0-=_,s.y1-=_),j=s.y0})}}function computeLinkBreadths(i){i.nodes.forEach(function(i){i.sourceLinks.sort(ascendingTargetBreadth),i.targetLinks.sort(ascendingSourceBreadth)}),i.nodes.forEach(function(i){var o=i.y0,s=o;i.sourceLinks.forEach(function(i){i.y0=o+i.width/2,o+=i.width}),i.targetLinks.forEach(function(i){i.y1=s+i.width/2,s+=i.width})})}return sankey.update=function(i){return computeLinkBreadths(i),i},sankey.nodeId=function(i){return arguments.length?(X="function"==typeof i?i:constant(i),sankey):X},sankey.nodeAlign=function(i){return arguments.length?($="function"==typeof i?i:constant(i),sankey):$},sankey.nodeWidth=function(i){return arguments.length?(j=+i,sankey):j},sankey.nodePadding=function(i){return arguments.length?(Z=+i,sankey):Z},sankey.nodes=function(i){return arguments.length?(ee="function"==typeof i?i:constant(i),sankey):ee},sankey.links=function(i){return arguments.length?(et="function"==typeof i?i:constant(i),sankey):et},sankey.size=function(_){return arguments.length?(i=o=0,s=+_[0],N=+_[1],sankey):[s-i,N-o]},sankey.extent=function(_){return arguments.length?(i=+_[0][0],s=+_[1][0],o=+_[0][1],N=+_[1][1],sankey):[[i,o],[s,N]]},sankey.iterations=function(i){return arguments.length?(er=+i,sankey):er},sankey}var N=s(45879);function horizontalSource(i){return[i.source.x1,i.y0]}function horizontalTarget(i){return[i.target.x0,i.y1]}function sankeyLinkHorizontal(){return(0,N.h5)().source(horizontalSource).target(horizontalTarget)}},39898:function(i,o,s){var _,F;(function(){var N={version:"3.8.0"},j=[].slice,d3_array=function(i){return j.call(i)},Z=self.document;function d3_documentElement(i){return i&&(i.ownerDocument||i.document||i).documentElement}function d3_window(i){return i&&(i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView)}if(Z)try{d3_array(Z.documentElement.childNodes)[0].nodeType}catch(i){d3_array=function(i){for(var o=i.length,s=Array(o);o--;)s[o]=i[o];return s}}if(Date.now||(Date.now=function(){return+new Date}),Z)try{Z.createElement("DIV").style.setProperty("opacity",0,"")}catch(i){var X=this.Element.prototype,$=X.setAttribute,ee=X.setAttributeNS,et=this.CSSStyleDeclaration.prototype,er=et.setProperty;X.setAttribute=function(i,o){$.call(this,i,o+"")},X.setAttributeNS=function(i,o,s){ee.call(this,i,o,s+"")},et.setProperty=function(i,o,s){er.call(this,i,o+"",s)}}function d3_ascending(i,o){return i<o?-1:i>o?1:i>=o?0:NaN}function d3_number(i){return null===i?NaN:+i}function d3_numeric(i){return!isNaN(i)}function d3_bisector(i){return{left:function(o,s,_,F){for(arguments.length<3&&(_=0),arguments.length<4&&(F=o.length);_<F;){var N=_+F>>>1;0>i(o[N],s)?_=N+1:F=N}return _},right:function(o,s,_,F){for(arguments.length<3&&(_=0),arguments.length<4&&(F=o.length);_<F;){var N=_+F>>>1;i(o[N],s)>0?F=N:_=N+1}return _}}}N.ascending=d3_ascending,N.descending=function(i,o){return o<i?-1:o>i?1:o>=i?0:NaN},N.min=function(i,o){var s,_,F=-1,N=i.length;if(1==arguments.length){for(;++F<N;)if(null!=(_=i[F])&&_>=_){s=_;break}for(;++F<N;)null!=(_=i[F])&&s>_&&(s=_)}else{for(;++F<N;)if(null!=(_=o.call(i,i[F],F))&&_>=_){s=_;break}for(;++F<N;)null!=(_=o.call(i,i[F],F))&&s>_&&(s=_)}return s},N.max=function(i,o){var s,_,F=-1,N=i.length;if(1==arguments.length){for(;++F<N;)if(null!=(_=i[F])&&_>=_){s=_;break}for(;++F<N;)null!=(_=i[F])&&_>s&&(s=_)}else{for(;++F<N;)if(null!=(_=o.call(i,i[F],F))&&_>=_){s=_;break}for(;++F<N;)null!=(_=o.call(i,i[F],F))&&_>s&&(s=_)}return s},N.extent=function(i,o){var s,_,F,N=-1,j=i.length;if(1==arguments.length){for(;++N<j;)if(null!=(_=i[N])&&_>=_){s=F=_;break}for(;++N<j;)null!=(_=i[N])&&(s>_&&(s=_),F<_&&(F=_))}else{for(;++N<j;)if(null!=(_=o.call(i,i[N],N))&&_>=_){s=F=_;break}for(;++N<j;)null!=(_=o.call(i,i[N],N))&&(s>_&&(s=_),F<_&&(F=_))}return[s,F]},N.sum=function(i,o){var s,_=0,F=i.length,N=-1;if(1==arguments.length)for(;++N<F;)d3_numeric(s=+i[N])&&(_+=s);else for(;++N<F;)d3_numeric(s=+o.call(i,i[N],N))&&(_+=s);return _},N.mean=function(i,o){var s,_=0,F=i.length,N=-1,j=F;if(1==arguments.length)for(;++N<F;)d3_numeric(s=d3_number(i[N]))?_+=s:--j;else for(;++N<F;)d3_numeric(s=d3_number(o.call(i,i[N],N)))?_+=s:--j;if(j)return _/j},N.quantile=function(i,o){var s=(i.length-1)*o+1,_=Math.floor(s),F=+i[_-1],N=s-_;return N?F+N*(i[_]-F):F},N.median=function(i,o){var s,_=[],F=i.length,j=-1;if(1==arguments.length)for(;++j<F;)d3_numeric(s=d3_number(i[j]))&&_.push(s);else for(;++j<F;)d3_numeric(s=d3_number(o.call(i,i[j],j)))&&_.push(s);if(_.length)return N.quantile(_.sort(d3_ascending),.5)},N.variance=function(i,o){var s,_,F=i.length,N=0,j=0,Z=-1,X=0;if(1==arguments.length)for(;++Z<F;)d3_numeric(s=d3_number(i[Z]))&&(_=s-N,N+=_/++X,j+=_*(s-N));else for(;++Z<F;)d3_numeric(s=d3_number(o.call(i,i[Z],Z)))&&(_=s-N,N+=_/++X,j+=_*(s-N));if(X>1)return j/(X-1)},N.deviation=function(){var i=N.variance.apply(this,arguments);return i?Math.sqrt(i):i};var en=d3_bisector(d3_ascending);function d3_transposeLength(i){return i.length}N.bisectLeft=en.left,N.bisect=N.bisectRight=en.right,N.bisector=function(i){return d3_bisector(1===i.length?function(o,s){return d3_ascending(i(o),s)}:i)},N.shuffle=function(i,o,s){(N=arguments.length)<3&&(s=i.length,N<2&&(o=0));for(var _,F,N=s-o;N;)F=Math.random()*N--|0,_=i[N+o],i[N+o]=i[F+o],i[F+o]=_;return i},N.permute=function(i,o){for(var s=o.length,_=Array(s);s--;)_[s]=i[o[s]];return _},N.pairs=function(i){for(var o=0,s=i.length-1,_=i[0],F=Array(s<0?0:s);o<s;)F[o]=[_,_=i[++o]];return F},N.transpose=function(i){if(!(F=i.length))return[];for(var o=-1,s=N.min(i,d3_transposeLength),_=Array(s);++o<s;)for(var F,j=-1,Z=_[o]=Array(F);++j<F;)Z[j]=i[j][o];return _},N.zip=function(){return N.transpose(arguments)},N.keys=function(i){var o=[];for(var s in i)o.push(s);return o},N.values=function(i){var o=[];for(var s in i)o.push(i[s]);return o},N.entries=function(i){var o=[];for(var s in i)o.push({key:s,value:i[s]});return o},N.merge=function(i){for(var o,s,_,F=i.length,N=-1,j=0;++N<F;)j+=i[N].length;for(s=Array(j);--F>=0;)for(o=(_=i[F]).length;--o>=0;)s[--j]=_[o];return s};var ei=Math.abs;function d3_range_integerScale(i){for(var o=1;i*o%1;)o*=10;return o}function d3_class(i,o){for(var s in o)Object.defineProperty(i.prototype,s,{value:o[s],enumerable:!1})}function d3_Map(){this._=Object.create(null)}function d3_map_escape(i){return"__proto__"==(i+="")||"\x00"===i[0]?"\x00"+i:i}function d3_map_unescape(i){return"\x00"===(i+="")[0]?i.slice(1):i}function d3_map_has(i){return d3_map_escape(i) in this._}function d3_map_remove(i){return(i=d3_map_escape(i))in this._&&delete this._[i]}function d3_map_keys(){var i=[];for(var o in this._)i.push(d3_map_unescape(o));return i}function d3_map_size(){var i=0;for(var o in this._)++i;return i}function d3_map_empty(){for(var i in this._)return!1;return!0}function d3_Set(){this._=Object.create(null)}function d3_identity(i){return i}function d3_rebind(i,o,s){return function(){var _=s.apply(o,arguments);return _===o?i:_}}function d3_vendorSymbol(i,o){if(o in i)return o;o=o.charAt(0).toUpperCase()+o.slice(1);for(var s=0,_=eo.length;s<_;++s){var F=eo[s]+o;if(F in i)return F}}N.range=function(i,o,s){if(arguments.length<3&&(s=1,arguments.length<2&&(o=i,i=0)),(o-i)/s==1/0)throw Error("infinite range");var _,F=[],N=d3_range_integerScale(ei(s)),j=-1;if(i*=N,o*=N,(s*=N)<0)for(;(_=i+s*++j)>o;)F.push(_/N);else for(;(_=i+s*++j)<o;)F.push(_/N);return F},N.map=function(i,o){var s=new d3_Map;if(i instanceof d3_Map)i.forEach(function(i,o){s.set(i,o)});else if(Array.isArray(i)){var _,F=-1,N=i.length;if(1==arguments.length)for(;++F<N;)s.set(F,i[F]);else for(;++F<N;)s.set(o.call(i,_=i[F],F),_)}else for(var j in i)s.set(j,i[j]);return s},d3_class(d3_Map,{has:d3_map_has,get:function(i){return this._[d3_map_escape(i)]},set:function(i,o){return this._[d3_map_escape(i)]=o},remove:d3_map_remove,keys:d3_map_keys,values:function(){var i=[];for(var o in this._)i.push(this._[o]);return i},entries:function(){var i=[];for(var o in this._)i.push({key:d3_map_unescape(o),value:this._[o]});return i},size:d3_map_size,empty:d3_map_empty,forEach:function(i){for(var o in this._)i.call(this,d3_map_unescape(o),this._[o])}}),N.nest=function(){var i,o,s={},_=[],F=[];function map(F,N,j){if(j>=_.length)return o?o.call(s,N):i?N.sort(i):N;for(var Z,X,$,ee,et=-1,er=N.length,en=_[j++],ei=new d3_Map;++et<er;)(ee=ei.get(Z=en(X=N[et])))?ee.push(X):ei.set(Z,[X]);return F?(X=F(),$=function(i,o){X.set(i,map(F,o,j))}):(X={},$=function(i,o){X[i]=map(F,o,j)}),ei.forEach($),X}function entries(i,o){if(o>=_.length)return i;var s=[],N=F[o++];return i.forEach(function(i,_){s.push({key:i,values:entries(_,o)})}),N?s.sort(function(i,o){return N(i.key,o.key)}):s}return s.map=function(i,o){return map(o,i,0)},s.entries=function(i){return entries(map(N.map,i,0),0)},s.key=function(i){return _.push(i),s},s.sortKeys=function(i){return F[_.length-1]=i,s},s.sortValues=function(o){return i=o,s},s.rollup=function(i){return o=i,s},s},N.set=function(i){var o=new d3_Set;if(i)for(var s=0,_=i.length;s<_;++s)o.add(i[s]);return o},d3_class(d3_Set,{has:d3_map_has,add:function(i){return this._[d3_map_escape(i+="")]=!0,i},remove:d3_map_remove,values:d3_map_keys,size:d3_map_size,empty:d3_map_empty,forEach:function(i){for(var o in this._)i.call(this,d3_map_unescape(o))}}),N.behavior={},N.rebind=function(i,o){for(var s,_=1,F=arguments.length;++_<F;)i[s=arguments[_]]=d3_rebind(i,o,o[s]);return i};var eo=["webkit","ms","moz","Moz","o","O"];function d3_noop(){}function d3_dispatch(){}function d3_dispatch_event(i){var o=[],s=new d3_Map;function event(){for(var s,_=o,F=-1,N=_.length;++F<N;)(s=_[F].on)&&s.apply(this,arguments);return i}return event.on=function(_,F){var N,j=s.get(_);return arguments.length<2?j&&j.on:(j&&(j.on=null,o=o.slice(0,N=o.indexOf(j)).concat(o.slice(N+1)),s.remove(_)),F&&o.push(s.set(_,{on:F})),i)},event}function d3_eventPreventDefault(){N.event.preventDefault()}function d3_eventSource(){for(var i,o=N.event;i=o.sourceEvent;)o=i;return o}function d3_eventDispatch(i){for(var o=new d3_dispatch,s=0,_=arguments.length;++s<_;)o[arguments[s]]=d3_dispatch_event(o);return o.of=function(s,_){return function(F){try{var j=F.sourceEvent=N.event;F.target=i,N.event=F,o[F.type].apply(s,_)}finally{N.event=j}}},o}N.dispatch=function(){for(var i=new d3_dispatch,o=-1,s=arguments.length;++o<s;)i[arguments[o]]=d3_dispatch_event(i);return i},d3_dispatch.prototype.on=function(i,o){var s=i.indexOf("."),_="";if(s>=0&&(_=i.slice(s+1),i=i.slice(0,s)),i)return arguments.length<2?this[i].on(_):this[i].on(_,o);if(2==arguments.length){if(null==o)for(i in this)this.hasOwnProperty(i)&&this[i].on(_,null);return this}},N.event=null,N.requote=function(i){return i.replace(es,"\\$&")};var es=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,el={}.__proto__?function(i,o){i.__proto__=o}:function(i,o){for(var s in o)i[s]=o[s]};function d3_selection(i){return el(i,ec),i}var d3_select=function(i,o){return o.querySelector(i)},d3_selectAll=function(i,o){return o.querySelectorAll(i)},d3_selectMatches=function(i,o){var s=i.matches||i[d3_vendorSymbol(i,"matchesSelector")];return(d3_selectMatches=function(i,o){return s.call(i,o)})(i,o)};"function"==typeof Sizzle&&(d3_select=function(i,o){return Sizzle(i,o)[0]||null},d3_selectAll=Sizzle,d3_selectMatches=Sizzle.matchesSelector),N.selection=function(){return N.select(Z.documentElement)};var ec=N.selection.prototype=[];function d3_selection_selector(i){return"function"==typeof i?i:function(){return d3_select(i,this)}}function d3_selection_selectorAll(i){return"function"==typeof i?i:function(){return d3_selectAll(i,this)}}ec.select=function(i){var o,s,_,F,N=[];i=d3_selection_selector(i);for(var j=-1,Z=this.length;++j<Z;){N.push(o=[]),o.parentNode=(_=this[j]).parentNode;for(var X=-1,$=_.length;++X<$;)(F=_[X])?(o.push(s=i.call(F,F.__data__,X,j)),s&&"__data__"in F&&(s.__data__=F.__data__)):o.push(null)}return d3_selection(N)},ec.selectAll=function(i){var o,s,_=[];i=d3_selection_selectorAll(i);for(var F=-1,N=this.length;++F<N;)for(var j=this[F],Z=-1,X=j.length;++Z<X;)(s=j[Z])&&(_.push(o=d3_array(i.call(s,s.__data__,Z,F))),o.parentNode=s);return d3_selection(_)};var eu="http://www.w3.org/1999/xhtml",ef={svg:"http://www.w3.org/2000/svg",xhtml:eu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function d3_selection_attr(i,o){function attrNull(){this.removeAttribute(i)}function attrNullNS(){this.removeAttributeNS(i.space,i.local)}function attrConstant(){this.setAttribute(i,o)}function attrConstantNS(){this.setAttributeNS(i.space,i.local,o)}function attrFunction(){var s=o.apply(this,arguments);null==s?this.removeAttribute(i):this.setAttribute(i,s)}function attrFunctionNS(){var s=o.apply(this,arguments);null==s?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,s)}return i=N.ns.qualify(i),null==o?i.local?attrNullNS:attrNull:"function"==typeof o?i.local?attrFunctionNS:attrFunction:i.local?attrConstantNS:attrConstant}function d3_collapse(i){return i.trim().replace(/\s+/g," ")}function d3_selection_classedRe(i){return RegExp("(?:^|\\s+)"+N.requote(i)+"(?:\\s+|$)","g")}function d3_selection_classes(i){return(i+"").trim().split(/^|\s+/)}function d3_selection_classed(i,o){var s=(i=d3_selection_classes(i).map(d3_selection_classedName)).length;function classedConstant(){for(var _=-1;++_<s;)i[_](this,o)}function classedFunction(){for(var _=-1,F=o.apply(this,arguments);++_<s;)i[_](this,F)}return"function"==typeof o?classedFunction:classedConstant}function d3_selection_classedName(i){var o=d3_selection_classedRe(i);return function(s,_){if(F=s.classList)return _?F.add(i):F.remove(i);var F=s.getAttribute("class")||"";_?(o.lastIndex=0,o.test(F)||s.setAttribute("class",d3_collapse(F+" "+i))):s.setAttribute("class",d3_collapse(F.replace(o," ")))}}function d3_selection_style(i,o,s){function styleNull(){this.style.removeProperty(i)}function styleConstant(){this.style.setProperty(i,o,s)}function styleFunction(){var _=o.apply(this,arguments);null==_?this.style.removeProperty(i):this.style.setProperty(i,_,s)}return null==o?styleNull:"function"==typeof o?styleFunction:styleConstant}function d3_selection_property(i,o){function propertyNull(){delete this[i]}function propertyConstant(){this[i]=o}function propertyFunction(){var s=o.apply(this,arguments);null==s?delete this[i]:this[i]=s}return null==o?propertyNull:"function"==typeof o?propertyFunction:propertyConstant}function d3_selection_creator(i){function create(){var o=this.ownerDocument,s=this.namespaceURI;return s===eu&&o.documentElement.namespaceURI===eu?o.createElement(i):o.createElementNS(s,i)}function createNS(){return this.ownerDocument.createElementNS(i.space,i.local)}return"function"==typeof i?i:(i=N.ns.qualify(i)).local?createNS:create}function d3_selectionRemove(){var i=this.parentNode;i&&i.removeChild(this)}function d3_selection_dataNode(i){return{__data__:i}}function d3_selection_filter(i){return function(){return d3_selectMatches(this,i)}}function d3_selection_sortComparator(i){return arguments.length||(i=d3_ascending),function(o,s){return o&&s?i(o.__data__,s.__data__):!o-!s}}function d3_selection_each(i,o){for(var s=0,_=i.length;s<_;s++)for(var F,N=i[s],j=0,Z=N.length;j<Z;j++)(F=N[j])&&o(F,j,s);return i}function d3_selection_enter(i){return el(i,ed),i}N.ns={prefix:ef,qualify:function(i){var o=i.indexOf(":"),s=i;return o>=0&&"xmlns"!==(s=i.slice(0,o))&&(i=i.slice(o+1)),ef.hasOwnProperty(s)?{space:ef[s],local:i}:i}},ec.attr=function(i,o){if(arguments.length<2){if("string"==typeof i){var s=this.node();return(i=N.ns.qualify(i)).local?s.getAttributeNS(i.space,i.local):s.getAttribute(i)}for(o in i)this.each(d3_selection_attr(o,i[o]));return this}return this.each(d3_selection_attr(i,o))},ec.classed=function(i,o){if(arguments.length<2){if("string"==typeof i){var s=this.node(),_=(i=d3_selection_classes(i)).length,F=-1;if(o=s.classList){for(;++F<_;)if(!o.contains(i[F]))return!1}else for(o=s.getAttribute("class");++F<_;)if(!d3_selection_classedRe(i[F]).test(o))return!1;return!0}for(o in i)this.each(d3_selection_classed(o,i[o]));return this}return this.each(d3_selection_classed(i,o))},ec.style=function(i,o,s){var _=arguments.length;if(_<3){if("string"!=typeof i){for(s in _<2&&(o=""),i)this.each(d3_selection_style(s,i[s],o));return this}if(_<2){var F=this.node();return d3_window(F).getComputedStyle(F,null).getPropertyValue(i)}s=""}return this.each(d3_selection_style(i,o,s))},ec.property=function(i,o){if(arguments.length<2){if("string"==typeof i)return this.node()[i];for(o in i)this.each(d3_selection_property(o,i[o]));return this}return this.each(d3_selection_property(i,o))},ec.text=function(i){return arguments.length?this.each("function"==typeof i?function(){var o=i.apply(this,arguments);this.textContent=null==o?"":o}:null==i?function(){this.textContent=""}:function(){this.textContent=i}):this.node().textContent},ec.html=function(i){return arguments.length?this.each("function"==typeof i?function(){var o=i.apply(this,arguments);this.innerHTML=null==o?"":o}:null==i?function(){this.innerHTML=""}:function(){this.innerHTML=i}):this.node().innerHTML},ec.append=function(i){return i=d3_selection_creator(i),this.select(function(){return this.appendChild(i.apply(this,arguments))})},ec.insert=function(i,o){return i=d3_selection_creator(i),o=d3_selection_selector(o),this.select(function(){return this.insertBefore(i.apply(this,arguments),o.apply(this,arguments)||null)})},ec.remove=function(){return this.each(d3_selectionRemove)},ec.data=function(i,o){var s,_,F=-1,N=this.length;if(!arguments.length){for(i=Array(N=(s=this[0]).length);++F<N;)(_=s[F])&&(i[F]=_.__data__);return i}function bind(i,s){var _,F,N,$=i.length,ee=s.length,et=Math.min($,ee),er=Array(ee),en=Array(ee),ei=Array($);if(o){var eo,es=new d3_Map,el=Array($);for(_=-1;++_<$;)(F=i[_])&&(es.has(eo=o.call(F,F.__data__,_))?ei[_]=F:es.set(eo,F),el[_]=eo);for(_=-1;++_<ee;)(F=es.get(eo=o.call(s,N=s[_],_)))?!0!==F&&(er[_]=F,F.__data__=N):en[_]=d3_selection_dataNode(N),es.set(eo,!0);for(_=-1;++_<$;)_ in el&&!0!==es.get(el[_])&&(ei[_]=i[_])}else{for(_=-1;++_<et;)F=i[_],N=s[_],F?(F.__data__=N,er[_]=F):en[_]=d3_selection_dataNode(N);for(;_<ee;++_)en[_]=d3_selection_dataNode(s[_]);for(;_<$;++_)ei[_]=i[_]}en.update=er,en.parentNode=er.parentNode=ei.parentNode=i.parentNode,j.push(en),Z.push(er),X.push(ei)}var j=d3_selection_enter([]),Z=d3_selection([]),X=d3_selection([]);if("function"==typeof i)for(;++F<N;)bind(s=this[F],i.call(s,s.parentNode.__data__,F));else for(;++F<N;)bind(s=this[F],i);return Z.enter=function(){return j},Z.exit=function(){return X},Z},ec.datum=function(i){return arguments.length?this.property("__data__",i):this.property("__data__")},ec.filter=function(i){var o,s,_,F=[];"function"!=typeof i&&(i=d3_selection_filter(i));for(var N=0,j=this.length;N<j;N++){F.push(o=[]),o.parentNode=(s=this[N]).parentNode;for(var Z=0,X=s.length;Z<X;Z++)(_=s[Z])&&i.call(_,_.__data__,Z,N)&&o.push(_)}return d3_selection(F)},ec.order=function(){for(var i=-1,o=this.length;++i<o;)for(var s,_=this[i],F=_.length-1,N=_[F];--F>=0;)(s=_[F])&&(N&&N!==s.nextSibling&&N.parentNode.insertBefore(s,N),N=s);return this},ec.sort=function(i){i=d3_selection_sortComparator.apply(this,arguments);for(var o=-1,s=this.length;++o<s;)this[o].sort(i);return this.order()},ec.each=function(i){return d3_selection_each(this,function(o,s,_){i.call(o,o.__data__,s,_)})},ec.call=function(i){var o=d3_array(arguments);return i.apply(o[0]=this,o),this},ec.empty=function(){return!this.node()},ec.node=function(){for(var i=0,o=this.length;i<o;i++)for(var s=this[i],_=0,F=s.length;_<F;_++){var N=s[_];if(N)return N}return null},ec.size=function(){var i=0;return d3_selection_each(this,function(){++i}),i};var ed=[];function d3_selection_enterInsertBefore(i){var o,s;return function(_,F,N){var j,Z=i[N].update,X=Z.length;for(N!=s&&(s=N,o=0),F>=o&&(o=F+1);!(j=Z[o])&&++o<X;);return j}}function d3_selection_on(i,o,s){var _="__on"+i,F=i.indexOf("."),j=d3_selection_onListener;F>0&&(i=i.slice(0,F));var Z=eh.get(i);function onRemove(){var o=this[_];o&&(this.removeEventListener(i,o,o.$),delete this[_])}function onAdd(){var F=j(o,d3_array(arguments));onRemove.call(this),this.addEventListener(i,this[_]=F,F.$=s),F._=o}function removeAll(){var o,s=RegExp("^__on([^.]+)"+N.requote(i)+"$");for(var _ in this)if(o=_.match(s)){var F=this[_];this.removeEventListener(o[1],F,F.$),delete this[_]}}return Z&&(i=Z,j=d3_selection_onFilter),F?o?onAdd:onRemove:o?d3_noop:removeAll}N.selection.enter=d3_selection_enter,N.selection.enter.prototype=ed,ed.append=ec.append,ed.empty=ec.empty,ed.node=ec.node,ed.call=ec.call,ed.size=ec.size,ed.select=function(i){for(var o,s,_,F,N,j=[],Z=-1,X=this.length;++Z<X;){_=(F=this[Z]).update,j.push(o=[]),o.parentNode=F.parentNode;for(var $=-1,ee=F.length;++$<ee;)(N=F[$])?(o.push(_[$]=s=i.call(F.parentNode,N.__data__,$,Z)),s.__data__=N.__data__):o.push(null)}return d3_selection(j)},ed.insert=function(i,o){return arguments.length<2&&(o=d3_selection_enterInsertBefore(this)),ec.insert.call(this,i,o)},N.select=function(i){var o;return"string"==typeof i?(o=[d3_select(i,Z)]).parentNode=Z.documentElement:(o=[i]).parentNode=d3_documentElement(i),d3_selection([o])},N.selectAll=function(i){var o;return"string"==typeof i?(o=d3_array(d3_selectAll(i,Z))).parentNode=Z.documentElement:(o=d3_array(i)).parentNode=null,d3_selection([o])},ec.on=function(i,o,s){var _=arguments.length;if(_<3){if("string"!=typeof i){for(s in _<2&&(o=!1),i)this.each(d3_selection_on(s,i[s],o));return this}if(_<2)return(_=this.node()["__on"+i])&&_._;s=!1}return this.each(d3_selection_on(i,o,s))};var eh=N.map({mouseenter:"mouseover",mouseleave:"mouseout"});function d3_selection_onListener(i,o){return function(s){var _=N.event;N.event=s,o[0]=this.__data__;try{i.apply(this,o)}finally{N.event=_}}}function d3_selection_onFilter(i,o){var s=d3_selection_onListener(i,o);return function(i){var o=i.relatedTarget;o&&(o===this||8&o.compareDocumentPosition(this))||s.call(this,i)}}Z&&eh.forEach(function(i){"on"+i in Z&&eh.remove(i)});var ep,eg=0;function d3_event_dragSuppress(i){var o=".dragsuppress-"+ ++eg,s="click"+o,_=N.select(d3_window(i)).on("touchmove"+o,d3_eventPreventDefault).on("dragstart"+o,d3_eventPreventDefault).on("selectstart"+o,d3_eventPreventDefault);if(null==ep&&(ep=!("onselectstart"in i)&&d3_vendorSymbol(i.style,"userSelect")),ep){var F=d3_documentElement(i).style,j=F[ep];F[ep]="none"}return function(i){if(_.on(o,null),ep&&(F[ep]=j),i){var off=function(){_.on(s,null)};_.on(s,function(){d3_eventPreventDefault(),off()},!0),setTimeout(off,0)}}}N.mouse=function(i){return d3_mousePoint(i,d3_eventSource())};var em=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function d3_mousePoint(i,o){o.changedTouches&&(o=o.changedTouches[0]);var s=i.ownerSVGElement||i;if(s.createSVGPoint){var _=s.createSVGPoint();if(em<0){var F=d3_window(i);if(F.scrollX||F.scrollY){var j=(s=N.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();em=!(j.f||j.e),s.remove()}}return em?(_.x=o.pageX,_.y=o.pageY):(_.x=o.clientX,_.y=o.clientY),[(_=_.matrixTransform(i.getScreenCTM().inverse())).x,_.y]}var Z=i.getBoundingClientRect();return[o.clientX-Z.left-i.clientLeft,o.clientY-Z.top-i.clientTop]}function d3_behavior_dragTouchId(){return N.event.changedTouches[0].identifier}N.touch=function(i,o,s){if(arguments.length<3&&(s=o,o=d3_eventSource().changedTouches),o){for(var _,F=0,N=o.length;F<N;++F)if((_=o[F]).identifier===s)return d3_mousePoint(i,_)}},N.behavior.drag=function(){var i=d3_eventDispatch(drag,"drag","dragstart","dragend"),o=null,s=dragstart(d3_noop,N.mouse,d3_window,"mousemove","mouseup"),_=dragstart(d3_behavior_dragTouchId,N.touch,d3_identity,"touchmove","touchend");function drag(){this.on("mousedown.drag",s).on("touchstart.drag",_)}function dragstart(s,_,F,j,Z){return function(){var X,$=N.event.target.correspondingElement||N.event.target,ee=this.parentNode,et=i.of(this,arguments),er=0,en=s(),ei=".drag"+(null==en?"":"-"+en),eo=N.select(F($)).on(j+ei,moved).on(Z+ei,ended),es=d3_event_dragSuppress($),el=_(ee,en);function moved(){var i,o,s=_(ee,en);s&&(i=s[0]-el[0],o=s[1]-el[1],er|=i|o,el=s,et({type:"drag",x:s[0]+X[0],y:s[1]+X[1],dx:i,dy:o}))}function ended(){_(ee,en)&&(eo.on(j+ei,null).on(Z+ei,null),es(er),et({type:"dragend"}))}o?(X=o.apply(this,arguments),X=[X.x-el[0],X.y-el[1]]):X=[0,0],et({type:"dragstart"})}}return drag.origin=function(i){return arguments.length?(o=i,drag):o},N.rebind(drag,i,"on")},N.touches=function(i,o){return arguments.length<2&&(o=d3_eventSource().touches),o?d3_array(o).map(function(o){var s=d3_mousePoint(i,o);return s.identifier=o.identifier,s}):[]};var ey=1e-6*1e-6,ev=Math.PI,ex=2*ev,e_=ex-1e-6,ew=ev/2,eT=ev/180,ek=180/ev;function d3_cross2d(i,o,s){return(o[0]-i[0])*(s[1]-i[1])-(o[1]-i[1])*(s[0]-i[0])}function d3_asin(i){return i>1?ew:i<-1?-ew:Math.asin(i)}function d3_sinh(i){return((i=Math.exp(i))-1/i)/2}function d3_cosh(i){return((i=Math.exp(i))+1/i)/2}function d3_tanh(i){return((i=Math.exp(2*i))-1)/(i+1)}var eA=Math.SQRT2;N.interpolateZoom=function(i,o){var s,_,F=i[0],N=i[1],j=i[2],Z=o[0],X=o[1],$=o[2],ee=Z-F,et=X-N,er=ee*ee+et*et;if(er<ey)_=Math.log($/j)/eA,s=function(i){return[F+i*ee,N+i*et,j*Math.exp(eA*i*_)]};else{var en=Math.sqrt(er),ei=($*$-j*j+4*er)/(2*j*2*en),eo=($*$-j*j-4*er)/(2*$*2*en),es=Math.log(Math.sqrt(ei*ei+1)-ei);_=(Math.log(Math.sqrt(eo*eo+1)-eo)-es)/eA,s=function(i){var o=i*_,s=d3_cosh(es),Z=j/(2*en)*(s*d3_tanh(eA*o+es)-d3_sinh(es));return[F+Z*ee,N+Z*et,j*s/d3_cosh(eA*o+es)]}}return s.duration=1e3*_,s},N.behavior.zoom=function(){var i,o,s,_,F,j,X,$,ee,et={x:0,y:0,k:1},er=[960,500],en=eC,ei=250,eo=0,es="mousedown.zoom",el="mousemove.zoom",ec="mouseup.zoom",eu="touchstart.zoom",ef=d3_eventDispatch(zoom,"zoomstart","zoom","zoomend");function zoom(i){i.on(es,mousedowned).on(eM+".zoom",mousewheeled).on("dblclick.zoom",dblclicked).on(eu,touchstarted)}function location(i){return[(i[0]-et.x)/et.k,(i[1]-et.y)/et.k]}function point(i){return[i[0]*et.k+et.x,i[1]*et.k+et.y]}function scaleTo(i){et.k=Math.max(en[0],Math.min(en[1],i))}function translateTo(i,o){o=point(o),et.x+=i[0]-o[0],et.y+=i[1]-o[1]}function zoomTo(i,s,_,F){i.__chart__={x:et.x,y:et.y,k:et.k},scaleTo(Math.pow(2,F)),translateTo(o=s,_),i=N.select(i),ei>0&&(i=i.transition().duration(ei)),i.call(zoom.event)}function rescale(){X&&X.domain(j.range().map(function(i){return(i-et.x)/et.k}).map(j.invert)),ee&&ee.domain($.range().map(function(i){return(i-et.y)/et.k}).map($.invert))}function zoomstarted(i){eo++||i({type:"zoomstart"})}function zoomed(i){rescale(),i({type:"zoom",scale:et.k,translate:[et.x,et.y]})}function zoomended(i){--eo||(i({type:"zoomend"}),o=null)}function mousedowned(){var i=this,o=ef.of(i,arguments),s=0,_=N.select(d3_window(i)).on(el,moved).on(ec,ended),F=location(N.mouse(i)),j=d3_event_dragSuppress(i);function moved(){s=1,translateTo(N.mouse(i),F),zoomed(o)}function ended(){_.on(el,null).on(ec,null),j(s),zoomended(o)}tf.call(i),zoomstarted(o)}function touchstarted(){var i,o=this,s=ef.of(o,arguments),_={},j=0,Z=".zoom-"+N.event.changedTouches[0].identifier,X="touchmove"+Z,$="touchend"+Z,ee=[],er=N.select(o),en=d3_event_dragSuppress(o);function relocate(){var s=N.touches(o);return i=et.k,s.forEach(function(i){i.identifier in _&&(_[i.identifier]=location(i))}),s}function started(){var i=N.event.target;N.select(i).on(X,moved).on($,ended),ee.push(i);for(var s=N.event.changedTouches,Z=0,er=s.length;Z<er;++Z)_[s[Z].identifier]=null;var en=relocate(),ei=Date.now();if(1===en.length){if(ei-F<500){var eo=en[0];zoomTo(o,eo,_[eo.identifier],Math.floor(Math.log(et.k)/Math.LN2)+1),d3_eventPreventDefault()}F=ei}else if(en.length>1){var eo=en[0],es=en[1],el=eo[0]-es[0],ec=eo[1]-es[1];j=el*el+ec*ec}}function moved(){var Z,X,$,ee,et=N.touches(o);tf.call(o);for(var er=0,en=et.length;er<en;++er,ee=null)if(ee=_[($=et[er]).identifier]){if(X)break;Z=$,X=ee}if(ee){var ei=(ei=$[0]-Z[0])*ei+(ei=$[1]-Z[1])*ei,eo=j&&Math.sqrt(ei/j);Z=[(Z[0]+$[0])/2,(Z[1]+$[1])/2],X=[(X[0]+ee[0])/2,(X[1]+ee[1])/2],scaleTo(eo*i)}F=null,translateTo(Z,X),zoomed(s)}function ended(){if(N.event.touches.length){for(var i=N.event.changedTouches,o=0,F=i.length;o<F;++o)delete _[i[o].identifier];for(var j in _)return void relocate()}N.selectAll(ee).on(Z,null),er.on(es,mousedowned).on(eu,touchstarted),en(),zoomended(s)}started(),zoomstarted(s),er.on(es,null).on(eu,started)}function mousewheeled(){var F=ef.of(this,arguments);_?clearTimeout(_):(tf.call(this),i=location(o=s||N.mouse(this)),zoomstarted(F)),_=setTimeout(function(){_=null,zoomended(F)},50),d3_eventPreventDefault(),scaleTo(Math.pow(2,.002*eS())*et.k),translateTo(o,i),zoomed(F)}function dblclicked(){var i=N.mouse(this),o=Math.log(et.k)/Math.LN2;zoomTo(this,i,location(i),N.event.shiftKey?Math.ceil(o)-1:Math.floor(o)+1)}return eM||(eM="onwheel"in Z?(eS=function(){return-N.event.deltaY*(N.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Z?(eS=function(){return N.event.wheelDelta},"mousewheel"):(eS=function(){return-N.event.detail},"MozMousePixelScroll")),zoom.event=function(i){i.each(function(){var i=ef.of(this,arguments),s=et;td?N.select(this).transition().each("start.zoom",function(){et=this.__chart__||{x:0,y:0,k:1},zoomstarted(i)}).tween("zoom:zoom",function(){var _=er[0],F=er[1],j=o?o[0]:_/2,Z=o?o[1]:F/2,X=N.interpolateZoom([(j-et.x)/et.k,(Z-et.y)/et.k,_/et.k],[(j-s.x)/s.k,(Z-s.y)/s.k,_/s.k]);return function(o){var s=X(o),F=_/s[2];this.__chart__=et={x:j-s[0]*F,y:Z-s[1]*F,k:F},zoomed(i)}}).each("interrupt.zoom",function(){zoomended(i)}).each("end.zoom",function(){zoomended(i)}):(this.__chart__=et,zoomstarted(i),zoomed(i),zoomended(i))})},zoom.translate=function(i){return arguments.length?(et={x:+i[0],y:+i[1],k:et.k},rescale(),zoom):[et.x,et.y]},zoom.scale=function(i){return arguments.length?(et={x:et.x,y:et.y,k:null},scaleTo(+i),rescale(),zoom):et.k},zoom.scaleExtent=function(i){return arguments.length?(en=null==i?eC:[+i[0],+i[1]],zoom):en},zoom.center=function(i){return arguments.length?(s=i&&[+i[0],+i[1]],zoom):s},zoom.size=function(i){return arguments.length?(er=i&&[+i[0],+i[1]],zoom):er},zoom.duration=function(i){return arguments.length?(ei=+i,zoom):ei},zoom.x=function(i){return arguments.length?(X=i,j=i.copy(),et={x:0,y:0,k:1},zoom):X},zoom.y=function(i){return arguments.length?(ee=i,$=i.copy(),et={x:0,y:0,k:1},zoom):ee},N.rebind(zoom,ef,"on")};var eS,eM,eC=[0,1/0];function d3_color(){}function d3_hsl(i,o,s){return this instanceof d3_hsl?void(this.h=+i,this.s=+o,this.l=+s):arguments.length<2?i instanceof d3_hsl?new d3_hsl(i.h,i.s,i.l):d3_rgb_parse(""+i,d3_rgb_hsl,d3_hsl):new d3_hsl(i,o,s)}N.color=d3_color,d3_color.prototype.toString=function(){return this.rgb()+""},N.hsl=d3_hsl;var eE=d3_hsl.prototype=new d3_color;function d3_hsl_rgb(i,o,s){var _,F;function v(i){return(i>360?i-=360:i<0&&(i+=360),i<60)?_+(F-_)*i/60:i<180?F:i<240?_+(F-_)*(240-i)/60:_}function vv(i){return Math.round(255*v(i))}return i=isNaN(i)?0:(i%=360)<0?i+360:i,o=isNaN(o)?0:o<0?0:o>1?1:o,F=(s=s<0?0:s>1?1:s)<=.5?s*(1+o):s+o-s*o,_=2*s-F,new d3_rgb(vv(i+120),vv(i),vv(i-120))}function d3_hcl(i,o,s){return this instanceof d3_hcl?void(this.h=+i,this.c=+o,this.l=+s):arguments.length<2?i instanceof d3_hcl?new d3_hcl(i.h,i.c,i.l):i instanceof d3_lab?d3_lab_hcl(i.l,i.a,i.b):d3_lab_hcl((i=d3_rgb_lab((i=N.rgb(i)).r,i.g,i.b)).l,i.a,i.b):new d3_hcl(i,o,s)}eE.brighter=function(i){return i=Math.pow(.7,arguments.length?i:1),new d3_hsl(this.h,this.s,this.l/i)},eE.darker=function(i){return i=Math.pow(.7,arguments.length?i:1),new d3_hsl(this.h,this.s,i*this.l)},eE.rgb=function(){return d3_hsl_rgb(this.h,this.s,this.l)},N.hcl=d3_hcl;var eL=d3_hcl.prototype=new d3_color;function d3_hcl_lab(i,o,s){return isNaN(i)&&(i=0),isNaN(o)&&(o=0),new d3_lab(s,Math.cos(i*=eT)*o,Math.sin(i)*o)}function d3_lab(i,o,s){return this instanceof d3_lab?void(this.l=+i,this.a=+o,this.b=+s):arguments.length<2?i instanceof d3_lab?new d3_lab(i.l,i.a,i.b):i instanceof d3_hcl?d3_hcl_lab(i.h,i.c,i.l):d3_rgb_lab((i=d3_rgb(i)).r,i.g,i.b):new d3_lab(i,o,s)}eL.brighter=function(i){return new d3_hcl(this.h,this.c,Math.min(100,this.l+eP*(arguments.length?i:1)))},eL.darker=function(i){return new d3_hcl(this.h,this.c,Math.max(0,this.l-eP*(arguments.length?i:1)))},eL.rgb=function(){return d3_hcl_lab(this.h,this.c,this.l).rgb()},N.lab=d3_lab;var eP=18,eI=d3_lab.prototype=new d3_color;function d3_lab_rgb(i,o,s){var _=(i+16)/116,F=_+o/500,N=_-s/200;return new d3_rgb(d3_xyz_rgb(3.2404542*(F=.95047*d3_lab_xyz(F))-1.5371385*(_=1*d3_lab_xyz(_))-.4985314*(N=1.08883*d3_lab_xyz(N))),d3_xyz_rgb(-.969266*F+1.8760108*_+.041556*N),d3_xyz_rgb(.0556434*F-.2040259*_+1.0572252*N))}function d3_lab_hcl(i,o,s){return i>0?new d3_hcl(Math.atan2(s,o)*ek,Math.sqrt(o*o+s*s),i):new d3_hcl(NaN,NaN,i)}function d3_lab_xyz(i){return i>.206893034?i*i*i:(i-4/29)/7.787037}function d3_xyz_lab(i){return i>.008856?Math.pow(i,1/3):7.787037*i+4/29}function d3_xyz_rgb(i){return Math.round(255*(i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055))}function d3_rgb(i,o,s){return this instanceof d3_rgb?void(this.r=~~i,this.g=~~o,this.b=~~s):arguments.length<2?i instanceof d3_rgb?new d3_rgb(i.r,i.g,i.b):d3_rgb_parse(""+i,d3_rgb,d3_hsl_rgb):new d3_rgb(i,o,s)}function d3_rgbNumber(i){return new d3_rgb(i>>16,i>>8&255,255&i)}function d3_rgbString(i){return d3_rgbNumber(i)+""}eI.brighter=function(i){return new d3_lab(Math.min(100,this.l+eP*(arguments.length?i:1)),this.a,this.b)},eI.darker=function(i){return new d3_lab(Math.max(0,this.l-eP*(arguments.length?i:1)),this.a,this.b)},eI.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)},N.rgb=d3_rgb;var eO=d3_rgb.prototype=new d3_color;function d3_rgb_hex(i){return i<16?"0"+Math.max(0,i).toString(16):Math.min(255,i).toString(16)}function d3_rgb_parse(i,o,s){var _,F,N,j=0,Z=0,X=0;if(_=/([a-z]+)\((.*)\)/.exec(i=i.toLowerCase()))switch(F=_[2].split(","),_[1]){case"hsl":return s(parseFloat(F[0]),parseFloat(F[1])/100,parseFloat(F[2])/100);case"rgb":return o(d3_rgb_parseNumber(F[0]),d3_rgb_parseNumber(F[1]),d3_rgb_parseNumber(F[2]))}return(N=eD.get(i))?o(N.r,N.g,N.b):(null==i||"#"!==i.charAt(0)||isNaN(N=parseInt(i.slice(1),16))||(4===i.length?(j=(j=(3840&N)>>4)>>4|j,Z=(Z=240&N)>>4|Z,X=(X=15&N)<<4|X):7!==i.length||(j=(16711680&N)>>16,Z=(65280&N)>>8,X=255&N)),o(j,Z,X))}function d3_rgb_hsl(i,o,s){var _,F,N=Math.min(i/=255,o/=255,s/=255),j=Math.max(i,o,s),Z=j-N,X=(j+N)/2;return Z?(F=X<.5?Z/(j+N):Z/(2-j-N),_=(i==j?(o-s)/Z+(o<s?6:0):o==j?(s-i)/Z+2:(i-o)/Z+4)*60):(_=NaN,F=X>0&&X<1?0:_),new d3_hsl(_,F,X)}function d3_rgb_lab(i,o,s){var _=d3_xyz_lab((.4124564*(i=d3_rgb_xyz(i))+.3575761*(o=d3_rgb_xyz(o))+.1804375*(s=d3_rgb_xyz(s)))/.95047),F=d3_xyz_lab((.2126729*i+.7151522*o+.072175*s)/1);return d3_lab(116*F-16,500*(_-F),200*(F-d3_xyz_lab((.0193339*i+.119192*o+.9503041*s)/1.08883)))}function d3_rgb_xyz(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function d3_rgb_parseNumber(i){var o=parseFloat(i);return"%"===i.charAt(i.length-1)?Math.round(2.55*o):o}eO.brighter=function(i){i=Math.pow(.7,arguments.length?i:1);var o=this.r,s=this.g,_=this.b;return o||s||_?(o&&o<30&&(o=30),s&&s<30&&(s=30),_&&_<30&&(_=30),new d3_rgb(Math.min(255,o/i),Math.min(255,s/i),Math.min(255,_/i))):new d3_rgb(30,30,30)},eO.darker=function(i){return i=Math.pow(.7,arguments.length?i:1),new d3_rgb(i*this.r,i*this.g,i*this.b)},eO.hsl=function(){return d3_rgb_hsl(this.r,this.g,this.b)},eO.toString=function(){return"#"+d3_rgb_hex(this.r)+d3_rgb_hex(this.g)+d3_rgb_hex(this.b)};var eD=N.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function d3_functor(i){return"function"==typeof i?i:function(){return i}}function d3_xhrType(i){return function(o,s,_){return 2==arguments.length&&"function"==typeof s&&(_=s,s=null),d3_xhr(o,s,i,_)}}function d3_xhr(i,o,s,_){var F={},j=N.dispatch("beforesend","progress","load","error"),Z={},X=new XMLHttpRequest,$=null;function respond(){var i,o=X.status;if(!o&&d3_xhrHasResponse(X)||o>=200&&o<300||304===o){try{i=s.call(F,X)}catch(i){j.error.call(F,i);return}j.load.call(F,i)}else j.error.call(F,X)}return self.XDomainRequest&&!("withCredentials"in X)&&/^(http(s)?:)?\/\//.test(i)&&(X=new XDomainRequest),"onload"in X?X.onload=X.onerror=respond:X.onreadystatechange=function(){X.readyState>3&&respond()},X.onprogress=function(i){var o=N.event;N.event=i;try{j.progress.call(F,X)}finally{N.event=o}},F.header=function(i,o){return(i=(i+"").toLowerCase(),arguments.length<2)?Z[i]:(null==o?delete Z[i]:Z[i]=o+"",F)},F.mimeType=function(i){return arguments.length?(o=null==i?null:i+"",F):o},F.responseType=function(i){return arguments.length?($=i,F):$},F.response=function(i){return s=i,F},["get","post"].forEach(function(i){F[i]=function(){return F.send.apply(F,[i].concat(d3_array(arguments)))}}),F.send=function(s,_,N){if(2==arguments.length&&"function"==typeof _&&(N=_,_=null),X.open(s,i,!0),null==o||"accept"in Z||(Z.accept=o+",*/*"),X.setRequestHeader)for(var ee in Z)X.setRequestHeader(ee,Z[ee]);return null!=o&&X.overrideMimeType&&X.overrideMimeType(o),null!=$&&(X.responseType=$),null!=N&&F.on("error",N).on("load",function(i){N(null,i)}),j.beforesend.call(F,X),X.send(null==_?null:_),F},F.abort=function(){return X.abort(),F},N.rebind(F,j,"on"),null==_?F:F.get(d3_xhr_fixCallback(_))}function d3_xhr_fixCallback(i){return 1===i.length?function(o,s){i(null==o?s:null)}:i}function d3_xhrHasResponse(i){var o=i.responseType;return o&&"text"!==o?i.response:i.responseText}eD.forEach(function(i,o){eD.set(i,d3_rgbNumber(o))}),N.functor=d3_functor,N.xhr=d3_xhrType(d3_identity),N.dsv=function(i,o){var s=RegExp('["'+i+"\n]"),_=i.charCodeAt(0);function dsv(i,s,_){arguments.length<3&&(_=s,s=null);var F=d3_xhr(i,o,null==s?response:typedResponse(s),_);return F.row=function(i){return arguments.length?F.response(null==(s=i)?response:typedResponse(i)):s},F}function response(i){return dsv.parse(i.responseText)}function typedResponse(i){return function(o){return dsv.parse(o.responseText,i)}}function formatRow(o){return o.map(formatValue).join(i)}function formatValue(i){return s.test(i)?'"'+i.replace(/\"/g,'""')+'"':i}return dsv.parse=function(i,o){var s;return dsv.parseRows(i,function(i,_){if(s)return s(i,_-1);var a=function(o){for(var s={},_=i.length,F=0;F<_;++F)s[i[F]]=o[F];return s};s=o?function(i,s){return o(a(i),s)}:a})},dsv.parseRows=function(i,o){var s,F,N={},j={},Z=[],X=i.length,$=0,ee=0;function token(){if($>=X)return j;if(F)return F=!1,N;var o=$;if(34===i.charCodeAt(o)){for(var s=o;s++<X;)if(34===i.charCodeAt(s)){if(34!==i.charCodeAt(s+1))break;++s}$=s+2;var Z=i.charCodeAt(s+1);return 13===Z?(F=!0,10===i.charCodeAt(s+2)&&++$):10===Z&&(F=!0),i.slice(o+1,s).replace(/""/g,'"')}for(;$<X;){var Z=i.charCodeAt($++),ee=1;if(10===Z)F=!0;else if(13===Z)F=!0,10===i.charCodeAt($)&&(++$,++ee);else if(Z!==_)continue;return i.slice(o,$-ee)}return i.slice(o)}for(;(s=token())!==j;){for(var et=[];s!==N&&s!==j;)et.push(s),s=token();o&&null==(et=o(et,ee++))||Z.push(et)}return Z},dsv.format=function(o){if(Array.isArray(o[0]))return dsv.formatRows(o);var s=new d3_Set,_=[];return o.forEach(function(i){for(var o in i)s.has(o)||_.push(s.add(o))}),[_.map(formatValue).join(i)].concat(o.map(function(o){return _.map(function(i){return formatValue(o[i])}).join(i)})).join("\n")},dsv.formatRows=function(i){return i.map(formatRow).join("\n")},dsv},N.csv=N.dsv(",","text/csv"),N.tsv=N.dsv("	","text/tab-separated-values");var eR,eB,eF,ez,eN=this[d3_vendorSymbol(this,"requestAnimationFrame")]||function(i){setTimeout(i,17)};function d3_timer(i,o,s){var _=arguments.length;_<2&&(o=0),_<3&&(s=Date.now());var F={c:i,t:s+o,n:null};return eB?eB.n=F:eR=F,eB=F,eF||(ez=clearTimeout(ez),eF=1,eN(d3_timer_step)),F}function d3_timer_step(){var i=d3_timer_mark(),o=d3_timer_sweep()-i;o>24?(isFinite(o)&&(clearTimeout(ez),ez=setTimeout(d3_timer_step,o)),eF=0):(eF=1,eN(d3_timer_step))}function d3_timer_mark(){for(var i=Date.now(),o=eR;o;)i>=o.t&&o.c(i-o.t)&&(o.c=null),o=o.n;return i}function d3_timer_sweep(){for(var i,o=eR,s=1/0;o;)o.c?(o.t<s&&(s=o.t),o=(i=o).n):o=i?i.n=o.n:eR=o.n;return eB=i,s}function d3_geom_pointX(i){return i[0]}function d3_geom_pointY(i){return i[1]}function d3_geom_hullUpper(i){for(var o=i.length,s=[0,1],_=2,F=2;F<o;F++){for(;_>1&&0>=d3_cross2d(i[s[_-2]],i[s[_-1]],i[F]);)--_;s[_++]=F}return s.slice(0,_)}function d3_geom_hullOrder(i,o){return i[0]-o[0]||i[1]-o[1]}N.timer=function(){d3_timer.apply(this,arguments)},N.timer.flush=function(){d3_timer_mark(),d3_timer_sweep()},N.round=function(i,o){return o?Math.round(i*(o=Math.pow(10,o)))/o:Math.round(i)},N.geom={},N.geom.hull=function(i){var o=d3_geom_pointX,s=d3_geom_pointY;if(arguments.length)return hull(i);function hull(i){if(i.length<3)return[];var _,F=d3_functor(o),N=d3_functor(s),j=i.length,Z=[],X=[];for(_=0;_<j;_++)Z.push([+F.call(this,i[_],_),+N.call(this,i[_],_),_]);for(Z.sort(d3_geom_hullOrder),_=0;_<j;_++)X.push([Z[_][0],-Z[_][1]]);var $=d3_geom_hullUpper(Z),ee=d3_geom_hullUpper(X),et=ee[0]===$[0],er=ee[ee.length-1]===$[$.length-1],en=[];for(_=$.length-1;_>=0;--_)en.push(i[Z[$[_]][2]]);for(_=+et;_<ee.length-er;++_)en.push(i[Z[ee[_]][2]]);return en}return hull.x=function(i){return arguments.length?(o=i,hull):o},hull.y=function(i){return arguments.length?(s=i,hull):s},hull},N.geom.polygon=function(i){return el(i,ej),i};var ej=N.geom.polygon.prototype=[];function d3_geom_polygonInside(i,o,s){return(s[0]-o[0])*(i[1]-o[1])<(s[1]-o[1])*(i[0]-o[0])}function d3_geom_polygonIntersect(i,o,s,_){var F=i[0],N=s[0],j=o[0]-F,Z=_[0]-N,X=i[1],$=s[1],ee=o[1]-X,et=_[1]-$,er=(Z*(X-$)-et*(F-N))/(et*j-Z*ee);return[F+er*j,X+er*ee]}function d3_geom_polygonClosed(i){var o=i[0],s=i[i.length-1];return!(o[0]-s[0]||o[1]-s[1])}ej.area=function(){for(var i,o=-1,s=this.length,_=this[s-1],F=0;++o<s;)i=_,_=this[o],F+=i[1]*_[0]-i[0]*_[1];return .5*F},ej.centroid=function(i){var o,s,_=-1,F=this.length,N=0,j=0,Z=this[F-1];for(arguments.length||(i=-1/(6*this.area()));++_<F;)o=Z,Z=this[_],s=o[0]*Z[1]-Z[0]*o[1],N+=(o[0]+Z[0])*s,j+=(o[1]+Z[1])*s;return[N*i,j*i]},ej.clip=function(i){for(var o,s,_,F,N,j,Z=d3_geom_polygonClosed(i),X=-1,$=this.length-d3_geom_polygonClosed(this),ee=this[$-1];++X<$;){for(o=i.slice(),i.length=0,F=this[X],N=o[(_=o.length-Z)-1],s=-1;++s<_;)d3_geom_polygonInside(j=o[s],ee,F)?(d3_geom_polygonInside(N,ee,F)||i.push(d3_geom_polygonIntersect(N,j,ee,F)),i.push(j)):d3_geom_polygonInside(N,ee,F)&&i.push(d3_geom_polygonIntersect(N,j,ee,F)),N=j;Z&&i.push(i[0]),ee=F}return i};var eV,eU,eH,eG,eW,eZ=[],eY=[];function d3_geom_voronoiBeach(){d3_geom_voronoiRedBlackNode(this),this.edge=this.site=this.circle=null}function d3_geom_voronoiCreateBeach(i){var o=eZ.pop()||new d3_geom_voronoiBeach;return o.site=i,o}function d3_geom_voronoiDetachBeach(i){d3_geom_voronoiDetachCircle(i),eH.remove(i),eZ.push(i),d3_geom_voronoiRedBlackNode(i)}function d3_geom_voronoiRemoveBeach(i){var o=i.circle,s=o.x,_=o.cy,F={x:s,y:_},N=i.P,j=i.N,Z=[i];d3_geom_voronoiDetachBeach(i);for(var X=N;X.circle&&1e-6>ei(s-X.circle.x)&&1e-6>ei(_-X.circle.cy);)N=X.P,Z.unshift(X),d3_geom_voronoiDetachBeach(X),X=N;Z.unshift(X),d3_geom_voronoiDetachCircle(X);for(var $=j;$.circle&&1e-6>ei(s-$.circle.x)&&1e-6>ei(_-$.circle.cy);)j=$.N,Z.push($),d3_geom_voronoiDetachBeach($),$=j;Z.push($),d3_geom_voronoiDetachCircle($);var ee,et=Z.length;for(ee=1;ee<et;++ee)$=Z[ee],X=Z[ee-1],d3_geom_voronoiSetEdgeEnd($.edge,X.site,$.site,F);X=Z[0],($=Z[et-1]).edge=d3_geom_voronoiCreateEdge(X.site,$.site,null,F),d3_geom_voronoiAttachCircle(X),d3_geom_voronoiAttachCircle($)}function d3_geom_voronoiAddBeach(i){for(var o,s,_,F,N=i.x,j=i.y,Z=eH._;Z;)if((_=d3_geom_voronoiLeftBreakPoint(Z,j)-N)>1e-6)Z=Z.L;else if((F=N-d3_geom_voronoiRightBreakPoint(Z,j))>1e-6){if(!Z.R){o=Z;break}Z=Z.R}else{_>-.000001?(o=Z.P,s=Z):F>-.000001?(o=Z,s=Z.N):o=s=Z;break}var X=d3_geom_voronoiCreateBeach(i);if(eH.insert(o,X),o||s){if(o===s){d3_geom_voronoiDetachCircle(o),s=d3_geom_voronoiCreateBeach(o.site),eH.insert(X,s),X.edge=s.edge=d3_geom_voronoiCreateEdge(o.site,X.site),d3_geom_voronoiAttachCircle(o),d3_geom_voronoiAttachCircle(s);return}if(!s){X.edge=d3_geom_voronoiCreateEdge(o.site,X.site);return}d3_geom_voronoiDetachCircle(o),d3_geom_voronoiDetachCircle(s);var $=o.site,ee=$.x,et=$.y,er=i.x-ee,en=i.y-et,ei=s.site,eo=ei.x-ee,es=ei.y-et,el=2*(er*es-en*eo),ec=er*er+en*en,eu=eo*eo+es*es,ef={x:(es*ec-en*eu)/el+ee,y:(er*eu-eo*ec)/el+et};d3_geom_voronoiSetEdgeEnd(s.edge,$,ei,ef),X.edge=d3_geom_voronoiCreateEdge($,i,null,ef),s.edge=d3_geom_voronoiCreateEdge(i,ei,null,ef),d3_geom_voronoiAttachCircle(o),d3_geom_voronoiAttachCircle(s)}}function d3_geom_voronoiLeftBreakPoint(i,o){var s=i.site,_=s.x,F=s.y,N=F-o;if(!N)return _;var j=i.P;if(!j)return-1/0;var Z=(s=j.site).x,X=s.y,$=X-o;if(!$)return Z;var ee=Z-_,et=1/N-1/$,er=ee/$;return et?(-er+Math.sqrt(er*er-2*et*(ee*ee/(-2*$)-X+$/2+F-N/2)))/et+_:(_+Z)/2}function d3_geom_voronoiRightBreakPoint(i,o){var s=i.N;if(s)return d3_geom_voronoiLeftBreakPoint(s,o);var _=i.site;return _.y===o?_.x:1/0}function d3_geom_voronoiCell(i){this.site=i,this.edges=[]}function d3_geom_voronoiCloseCells(i){for(var o,s,_,F,N,j,Z,X,$,ee,et=i[0][0],er=i[1][0],en=i[0][1],eo=i[1][1],es=eU,el=es.length;el--;)if((N=es[el])&&N.prepare())for(X=(Z=N.edges).length,j=0;j<X;)_=(ee=Z[j].end()).x,F=ee.y,o=($=Z[++j%X].start()).x,s=$.y,(ei(_-o)>1e-6||ei(F-s)>1e-6)&&(Z.splice(j,0,new d3_geom_voronoiHalfEdge(d3_geom_voronoiCreateBorderEdge(N.site,ee,1e-6>ei(_-et)&&eo-F>1e-6?{x:et,y:1e-6>ei(o-et)?s:eo}:1e-6>ei(F-eo)&&er-_>1e-6?{x:1e-6>ei(s-eo)?o:er,y:eo}:1e-6>ei(_-er)&&F-en>1e-6?{x:er,y:1e-6>ei(o-er)?s:en}:1e-6>ei(F-en)&&_-et>1e-6?{x:1e-6>ei(s-en)?o:et,y:en}:null),N.site,null)),++X)}function d3_geom_voronoiHalfEdgeOrder(i,o){return o.angle-i.angle}function d3_geom_voronoiCircle(){d3_geom_voronoiRedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function d3_geom_voronoiAttachCircle(i){var o=i.P,s=i.N;if(o&&s){var _=o.site,F=i.site,N=s.site;if(_!==N){var j=F.x,Z=F.y,X=_.x-j,$=_.y-Z,ee=N.x-j,et=N.y-Z,er=2*(X*et-$*ee);if(!(er>=-ey)){var en=X*X+$*$,ei=ee*ee+et*et,eo=(et*en-$*ei)/er,es=(X*ei-ee*en)/er,et=es+Z,el=eY.pop()||new d3_geom_voronoiCircle;el.arc=i,el.site=F,el.x=eo+j,el.y=et+Math.sqrt(eo*eo+es*es),el.cy=et,i.circle=el;for(var ec=null,eu=eW._;eu;)if(el.y<eu.y||el.y===eu.y&&el.x<=eu.x){if(eu.L)eu=eu.L;else{ec=eu.P;break}}else if(eu.R)eu=eu.R;else{ec=eu;break}eW.insert(ec,el),ec||(eG=el)}}}}function d3_geom_voronoiDetachCircle(i){var o=i.circle;o&&(o.P||(eG=o.N),eW.remove(o),eY.push(o),d3_geom_voronoiRedBlackNode(o),i.circle=null)}function d3_geom_clipLine(i,o,s,_){return function(F){var N,j=F.a,Z=F.b,X=j.x,$=j.y,ee=Z.x,et=Z.y,er=0,en=1,ei=ee-X,eo=et-$;if(N=i-X,ei||!(N>0)){if(N/=ei,ei<0){if(N<er)return;N<en&&(en=N)}else if(ei>0){if(N>en)return;N>er&&(er=N)}if(N=s-X,ei||!(N<0)){if(N/=ei,ei<0){if(N>en)return;N>er&&(er=N)}else if(ei>0){if(N<er)return;N<en&&(en=N)}if(N=o-$,eo||!(N>0)){if(N/=eo,eo<0){if(N<er)return;N<en&&(en=N)}else if(eo>0){if(N>en)return;N>er&&(er=N)}if(N=_-$,eo||!(N<0)){if(N/=eo,eo<0){if(N>en)return;N>er&&(er=N)}else if(eo>0){if(N<er)return;N<en&&(en=N)}return er>0&&(F.a={x:X+er*ei,y:$+er*eo}),en<1&&(F.b={x:X+en*ei,y:$+en*eo}),F}}}}}}function d3_geom_voronoiClipEdges(i){for(var o,s=eV,_=d3_geom_clipLine(i[0][0],i[0][1],i[1][0],i[1][1]),F=s.length;F--;)(!d3_geom_voronoiConnectEdge(o=s[F],i)||!_(o)||1e-6>ei(o.a.x-o.b.x)&&1e-6>ei(o.a.y-o.b.y))&&(o.a=o.b=null,s.splice(F,1))}function d3_geom_voronoiConnectEdge(i,o){var s=i.b;if(s)return!0;var _,F,N=i.a,j=o[0][0],Z=o[1][0],X=o[0][1],$=o[1][1],ee=i.l,et=i.r,er=ee.x,en=ee.y,ei=et.x,eo=et.y,es=(er+ei)/2;if(eo===en){if(es<j||es>=Z)return;if(er>ei){if(N){if(N.y>=$)return}else N={x:es,y:X};s={x:es,y:$}}else{if(N){if(N.y<X)return}else N={x:es,y:$};s={x:es,y:X}}}else if(_=(er-ei)/(eo-en),F=(en+eo)/2-_*es,_<-1||_>1){if(er>ei){if(N){if(N.y>=$)return}else N={x:(X-F)/_,y:X};s={x:($-F)/_,y:$}}else{if(N){if(N.y<X)return}else N={x:($-F)/_,y:$};s={x:(X-F)/_,y:X}}}else if(en<eo){if(N){if(N.x>=Z)return}else N={x:j,y:_*j+F};s={x:Z,y:_*Z+F}}else{if(N){if(N.x<j)return}else N={x:Z,y:_*Z+F};s={x:j,y:_*j+F}}return i.a=N,i.b=s,!0}function d3_geom_voronoiEdge(i,o){this.l=i,this.r=o,this.a=this.b=null}function d3_geom_voronoiCreateEdge(i,o,s,_){var F=new d3_geom_voronoiEdge(i,o);return eV.push(F),s&&d3_geom_voronoiSetEdgeEnd(F,i,o,s),_&&d3_geom_voronoiSetEdgeEnd(F,o,i,_),eU[i.i].edges.push(new d3_geom_voronoiHalfEdge(F,i,o)),eU[o.i].edges.push(new d3_geom_voronoiHalfEdge(F,o,i)),F}function d3_geom_voronoiCreateBorderEdge(i,o,s){var _=new d3_geom_voronoiEdge(i,null);return _.a=o,_.b=s,eV.push(_),_}function d3_geom_voronoiSetEdgeEnd(i,o,s,_){i.a||i.b?i.l===s?i.b=_:i.a=_:(i.a=_,i.l=o,i.r=s)}function d3_geom_voronoiHalfEdge(i,o,s){var _=i.a,F=i.b;this.edge=i,this.site=o,this.angle=s?Math.atan2(s.y-o.y,s.x-o.x):i.l===o?Math.atan2(F.x-_.x,_.y-F.y):Math.atan2(_.x-F.x,F.y-_.y)}function d3_geom_voronoiRedBlackTree(){this._=null}function d3_geom_voronoiRedBlackNode(i){i.U=i.C=i.L=i.R=i.P=i.N=null}function d3_geom_voronoiRedBlackRotateLeft(i,o){var s=o.R,_=o.U;_?_.L===o?_.L=s:_.R=s:i._=s,s.U=_,o.U=s,o.R=s.L,o.R&&(o.R.U=o),s.L=o}function d3_geom_voronoiRedBlackRotateRight(i,o){var s=o.L,_=o.U;_?_.L===o?_.L=s:_.R=s:i._=s,s.U=_,o.U=s,o.L=s.R,o.L&&(o.L.U=o),s.R=o}function d3_geom_voronoiRedBlackFirst(i){for(;i.L;)i=i.L;return i}function d3_geom_voronoi(i,o){var s,_,F,N=i.sort(d3_geom_voronoiVertexOrder).pop();for(eV=[],eU=Array(i.length),eH=new d3_geom_voronoiRedBlackTree,eW=new d3_geom_voronoiRedBlackTree;;)if(F=eG,N&&(!F||N.y<F.y||N.y===F.y&&N.x<F.x))(N.x!==s||N.y!==_)&&(eU[N.i]=new d3_geom_voronoiCell(N),d3_geom_voronoiAddBeach(N),s=N.x,_=N.y),N=i.pop();else if(F)d3_geom_voronoiRemoveBeach(F.arc);else break;o&&(d3_geom_voronoiClipEdges(o),d3_geom_voronoiCloseCells(o));var j={cells:eU,edges:eV};return eH=eW=eV=eU=null,j}function d3_geom_voronoiVertexOrder(i,o){return o.y-i.y||o.x-i.x}d3_geom_voronoiCell.prototype.prepare=function(){for(var i,o=this.edges,s=o.length;s--;)(i=o[s].edge).b&&i.a||o.splice(s,1);return o.sort(d3_geom_voronoiHalfEdgeOrder),o.length},d3_geom_voronoiHalfEdge.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},d3_geom_voronoiRedBlackTree.prototype={insert:function(i,o){var s,_,F;if(i){if(o.P=i,o.N=i.N,i.N&&(i.N.P=o),i.N=o,i.R){for(i=i.R;i.L;)i=i.L;i.L=o}else i.R=o;s=i}else this._?(i=d3_geom_voronoiRedBlackFirst(this._),o.P=null,o.N=i,i.P=i.L=o,s=i):(o.P=o.N=null,this._=o,s=null);for(o.L=o.R=null,o.U=s,o.C=!0,i=o;s&&s.C;)_=s.U,s===_.L?(F=_.R)&&F.C?(s.C=F.C=!1,_.C=!0,i=_):(i===s.R&&(d3_geom_voronoiRedBlackRotateLeft(this,s),s=(i=s).U),s.C=!1,_.C=!0,d3_geom_voronoiRedBlackRotateRight(this,_)):(F=_.L)&&F.C?(s.C=F.C=!1,_.C=!0,i=_):(i===s.L&&(d3_geom_voronoiRedBlackRotateRight(this,s),s=(i=s).U),s.C=!1,_.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,_)),s=i.U;this._.C=!1},remove:function(i){i.N&&(i.N.P=i.P),i.P&&(i.P.N=i.N),i.N=i.P=null;var o,s,_,F=i.U,N=i.L,j=i.R;if(s=N?j?d3_geom_voronoiRedBlackFirst(j):N:j,F?F.L===i?F.L=s:F.R=s:this._=s,N&&j?(_=s.C,s.C=i.C,s.L=N,N.U=s,s!==j?(F=s.U,s.U=i.U,i=s.R,F.L=i,s.R=j,j.U=s):(s.U=F,F=s,i=s.R)):(_=i.C,i=s),i&&(i.U=F),!_){if(i&&i.C){i.C=!1;return}do{if(i===this._)break;if(i===F.L){if((o=F.R).C&&(o.C=!1,F.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,F),o=F.R),o.L&&o.L.C||o.R&&o.R.C){o.R&&o.R.C||(o.L.C=!1,o.C=!0,d3_geom_voronoiRedBlackRotateRight(this,o),o=F.R),o.C=F.C,F.C=o.R.C=!1,d3_geom_voronoiRedBlackRotateLeft(this,F),i=this._;break}}else if((o=F.L).C&&(o.C=!1,F.C=!0,d3_geom_voronoiRedBlackRotateRight(this,F),o=F.L),o.L&&o.L.C||o.R&&o.R.C){o.L&&o.L.C||(o.R.C=!1,o.C=!0,d3_geom_voronoiRedBlackRotateLeft(this,o),o=F.L),o.C=F.C,F.C=o.L.C=!1,d3_geom_voronoiRedBlackRotateRight(this,F),i=this._;break}o.C=!0,i=F,F=F.U}while(!i.C);i&&(i.C=!1)}}},N.geom.voronoi=function(i){var o=d3_geom_pointX,s=d3_geom_pointY,_=o,F=s,N=eX;if(i)return voronoi(i);function voronoi(i){var o=Array(i.length),s=N[0][0],_=N[0][1],F=N[1][0],j=N[1][1];return d3_geom_voronoi(sites(i),N).cells.forEach(function(N,Z){var X=N.edges,$=N.site;(o[Z]=X.length?X.map(function(i){var o=i.start();return[o.x,o.y]}):$.x>=s&&$.x<=F&&$.y>=_&&$.y<=j?[[s,j],[F,j],[F,_],[s,_]]:[]).point=i[Z]}),o}function sites(i){return i.map(function(i,o){return{x:1e-6*Math.round(_(i,o)/1e-6),y:1e-6*Math.round(F(i,o)/1e-6),i:o}})}return voronoi.links=function(i){return d3_geom_voronoi(sites(i)).edges.filter(function(i){return i.l&&i.r}).map(function(o){return{source:i[o.l.i],target:i[o.r.i]}})},voronoi.triangles=function(i){var o=[];return d3_geom_voronoi(sites(i)).cells.forEach(function(s,_){for(var F,N=s.site,j=s.edges.sort(d3_geom_voronoiHalfEdgeOrder),Z=-1,X=j.length,$=j[X-1].edge,ee=$.l===N?$.r:$.l;++Z<X;)F=ee,ee=($=j[Z].edge).l===N?$.r:$.l,_<F.i&&_<ee.i&&0>d3_geom_voronoiTriangleArea(N,F,ee)&&o.push([i[_],i[F.i],i[ee.i]])}),o},voronoi.x=function(i){return arguments.length?(_=d3_functor(o=i),voronoi):o},voronoi.y=function(i){return arguments.length?(F=d3_functor(s=i),voronoi):s},voronoi.clipExtent=function(i){return arguments.length?(N=null==i?eX:i,voronoi):N===eX?null:N},voronoi.size=function(i){return arguments.length?voronoi.clipExtent(i&&[[0,0],i]):N===eX?null:N&&N[1]},voronoi};var eX=[[-1e6,-1e6],[1e6,1e6]];function d3_geom_voronoiTriangleArea(i,o,s){return(i.x-s.x)*(o.y-i.y)-(i.x-o.x)*(s.y-i.y)}function d3_geom_quadtreeCompatX(i){return i.x}function d3_geom_quadtreeCompatY(i){return i.y}function d3_geom_quadtreeNode(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function d3_geom_quadtreeVisit(i,o,s,_,F,N){if(!i(o,s,_,F,N)){var j=(s+F)*.5,Z=(_+N)*.5,X=o.nodes;X[0]&&d3_geom_quadtreeVisit(i,X[0],s,_,j,Z),X[1]&&d3_geom_quadtreeVisit(i,X[1],j,_,F,Z),X[2]&&d3_geom_quadtreeVisit(i,X[2],s,Z,j,N),X[3]&&d3_geom_quadtreeVisit(i,X[3],j,Z,F,N)}}function d3_geom_quadtreeFind(i,o,s,_,F,N,j){var Z,X=1/0;return function find(i,$,ee,et,er){if(!($>N)&&!(ee>j)&&!(et<_)&&!(er<F)){if(en=i.point){var en,ei=o-i.x,eo=s-i.y,es=ei*ei+eo*eo;if(es<X){var el=Math.sqrt(X=es);_=o-el,F=s-el,N=o+el,j=s+el,Z=en}}for(var ec=i.nodes,eu=($+et)*.5,ef=(ee+er)*.5,ed=o>=eu,eh=s>=ef,ep=eh<<1|ed,eg=ep+4;ep<eg;++ep)if(i=ec[3&ep])switch(3&ep){case 0:find(i,$,ee,eu,ef);break;case 1:find(i,eu,ee,et,ef);break;case 2:find(i,$,ef,eu,er);break;case 3:find(i,eu,ef,et,er)}}}(i,_,F,N,j),Z}function d3_interpolateRgb(i,o){i=N.rgb(i),o=N.rgb(o);var s=i.r,_=i.g,F=i.b,j=o.r-s,Z=o.g-_,X=o.b-F;return function(i){return"#"+d3_rgb_hex(Math.round(s+j*i))+d3_rgb_hex(Math.round(_+Z*i))+d3_rgb_hex(Math.round(F+X*i))}}function d3_interpolateObject(i,o){var s,_={},F={};for(s in i)s in o?_[s]=d3_interpolate(i[s],o[s]):F[s]=i[s];for(s in o)s in i||(F[s]=o[s]);return function(i){for(s in _)F[s]=_[s](i);return F}}function d3_interpolateNumber(i,o){return i=+i,o=+o,function(s){return i*(1-s)+o*s}}function d3_interpolateString(i,o){var s,_,F,N=eK.lastIndex=eJ.lastIndex=0,j=-1,Z=[],X=[];for(i+="",o+="";(s=eK.exec(i))&&(_=eJ.exec(o));)(F=_.index)>N&&(F=o.slice(N,F),Z[j]?Z[j]+=F:Z[++j]=F),(s=s[0])===(_=_[0])?Z[j]?Z[j]+=_:Z[++j]=_:(Z[++j]=null,X.push({i:j,x:d3_interpolateNumber(s,_)})),N=eJ.lastIndex;return N<o.length&&(F=o.slice(N),Z[j]?Z[j]+=F:Z[++j]=F),Z.length<2?X[0]?(o=X[0].x,function(i){return o(i)+""}):function(){return o}:(o=X.length,function(i){for(var s,_=0;_<o;++_)Z[(s=X[_]).i]=s.x(i);return Z.join("")})}N.geom.delaunay=function(i){return N.geom.voronoi().triangles(i)},N.geom.quadtree=function(i,o,s,_,F){var N,j=d3_geom_pointX,Z=d3_geom_pointY;if(N=arguments.length)return j=d3_geom_quadtreeCompatX,Z=d3_geom_quadtreeCompatY,3===N&&(F=s,_=o,s=o=0),quadtree(i);function quadtree(i){var X,$,ee,et,er,en,eo,es,el,ec=d3_functor(j),eu=d3_functor(Z);if(null!=o)en=o,eo=s,es=_,el=F;else if(es=el=-(en=eo=1/0),$=[],ee=[],er=i.length,N)for(et=0;et<er;++et)(X=i[et]).x<en&&(en=X.x),X.y<eo&&(eo=X.y),X.x>es&&(es=X.x),X.y>el&&(el=X.y),$.push(X.x),ee.push(X.y);else for(et=0;et<er;++et){var ef=+ec(X=i[et],et),ed=+eu(X,et);ef<en&&(en=ef),ed<eo&&(eo=ed),ef>es&&(es=ef),ed>el&&(el=ed),$.push(ef),ee.push(ed)}var eh=es-en,ep=el-eo;function insert(i,o,s,_,F,N,j,Z){if(!(isNaN(s)||isNaN(_))){if(i.leaf){var X=i.x,$=i.y;if(null!=X){if(ei(X-s)+ei($-_)<.01)insertChild(i,o,s,_,F,N,j,Z);else{var ee=i.point;i.x=i.y=i.point=null,insertChild(i,ee,X,$,F,N,j,Z),insertChild(i,o,s,_,F,N,j,Z)}}else i.x=s,i.y=_,i.point=o}else insertChild(i,o,s,_,F,N,j,Z)}}function insertChild(i,o,s,_,F,N,j,Z){var X=(F+j)*.5,$=(N+Z)*.5,ee=s>=X,et=_>=$,er=et<<1|ee;i.leaf=!1,i=i.nodes[er]||(i.nodes[er]=d3_geom_quadtreeNode()),ee?F=X:j=X,et?N=$:Z=$,insert(i,o,s,_,F,N,j,Z)}eh>ep?el=eo+eh:es=en+ep;var eg=d3_geom_quadtreeNode();if(eg.add=function(i){insert(eg,i,+ec(i,++et),+eu(i,et),en,eo,es,el)},eg.visit=function(i){d3_geom_quadtreeVisit(i,eg,en,eo,es,el)},eg.find=function(i){return d3_geom_quadtreeFind(eg,i[0],i[1],en,eo,es,el)},et=-1,null==o){for(;++et<er;)insert(eg,i[et],$[et],ee[et],en,eo,es,el);--et}else i.forEach(eg.add);return $=ee=i=X=null,eg}return quadtree.x=function(i){return arguments.length?(j=i,quadtree):j},quadtree.y=function(i){return arguments.length?(Z=i,quadtree):Z},quadtree.extent=function(i){return arguments.length?(null==i?o=s=_=F=null:(o=+i[0][0],s=+i[0][1],_=+i[1][0],F=+i[1][1]),quadtree):null==o?null:[[o,s],[_,F]]},quadtree.size=function(i){return arguments.length?(null==i?o=s=_=F=null:(o=s=0,_=+i[0],F=+i[1]),quadtree):null==o?null:[_-o,F-s]},quadtree},N.interpolateRgb=d3_interpolateRgb,N.interpolateObject=d3_interpolateObject,N.interpolateNumber=d3_interpolateNumber,N.interpolateString=d3_interpolateString;var eK=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eJ=RegExp(eK.source,"g");function d3_interpolate(i,o){for(var s,_=N.interpolators.length;--_>=0&&!(s=N.interpolators[_](i,o)););return s}function d3_interpolateArray(i,o){var s,_=[],F=[],N=i.length,j=o.length,Z=Math.min(i.length,o.length);for(s=0;s<Z;++s)_.push(d3_interpolate(i[s],o[s]));for(;s<N;++s)F[s]=i[s];for(;s<j;++s)F[s]=o[s];return function(i){for(s=0;s<Z;++s)F[s]=_[s](i);return F}}N.interpolate=d3_interpolate,N.interpolators=[function(i,o){var s=typeof o;return("string"===s?eD.has(o.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(o)?d3_interpolateRgb:d3_interpolateString:o instanceof d3_color?d3_interpolateRgb:Array.isArray(o)?d3_interpolateArray:"object"===s&&isNaN(o)?d3_interpolateObject:d3_interpolateNumber)(i,o)}],N.interpolateArray=d3_interpolateArray;var d3_ease_default=function(){return d3_identity},e$=N.map({linear:d3_ease_default,poly:d3_ease_poly,quad:function(){return d3_ease_quad},cubic:function(){return d3_ease_cubic},sin:function(){return d3_ease_sin},exp:function(){return d3_ease_exp},circle:function(){return d3_ease_circle},elastic:d3_ease_elastic,back:d3_ease_back,bounce:function(){return d3_ease_bounce}}),eQ=N.map({in:d3_identity,out:d3_ease_reverse,"in-out":d3_ease_reflect,"out-in":function(i){return d3_ease_reflect(d3_ease_reverse(i))}});function d3_ease_clamp(i){return function(o){return o<=0?0:o>=1?1:i(o)}}function d3_ease_reverse(i){return function(o){return 1-i(1-o)}}function d3_ease_reflect(i){return function(o){return .5*(o<.5?i(2*o):2-i(2-2*o))}}function d3_ease_quad(i){return i*i}function d3_ease_cubic(i){return i*i*i}function d3_ease_cubicInOut(i){if(i<=0)return 0;if(i>=1)return 1;var o=i*i,s=o*i;return 4*(i<.5?s:3*(i-o)+s-.75)}function d3_ease_poly(i){return function(o){return Math.pow(o,i)}}function d3_ease_sin(i){return 1-Math.cos(i*ew)}function d3_ease_exp(i){return Math.pow(2,10*(i-1))}function d3_ease_circle(i){return 1-Math.sqrt(1-i*i)}function d3_ease_elastic(i,o){var s;return arguments.length<2&&(o=.45),arguments.length?s=o/ex*Math.asin(1/i):(i=1,s=o/4),function(_){return 1+i*Math.pow(2,-10*_)*Math.sin((_-s)*ex/o)}}function d3_ease_back(i){return i||(i=1.70158),function(o){return o*o*((i+1)*o-i)}}function d3_ease_bounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375}function d3_interpolateHcl(i,o){i=N.hcl(i),o=N.hcl(o);var s=i.h,_=i.c,F=i.l,j=o.h-s,Z=o.c-_,X=o.l-F;return isNaN(Z)&&(Z=0,_=isNaN(_)?o.c:_),isNaN(j)?(j=0,s=isNaN(s)?o.h:s):j>180?j-=360:j<-180&&(j+=360),function(i){return d3_hcl_lab(s+j*i,_+Z*i,F+X*i)+""}}function d3_interpolateHsl(i,o){i=N.hsl(i),o=N.hsl(o);var s=i.h,_=i.s,F=i.l,j=o.h-s,Z=o.s-_,X=o.l-F;return isNaN(Z)&&(Z=0,_=isNaN(_)?o.s:_),isNaN(j)?(j=0,s=isNaN(s)?o.h:s):j>180?j-=360:j<-180&&(j+=360),function(i){return d3_hsl_rgb(s+j*i,_+Z*i,F+X*i)+""}}function d3_interpolateLab(i,o){i=N.lab(i),o=N.lab(o);var s=i.l,_=i.a,F=i.b,j=o.l-s,Z=o.a-_,X=o.b-F;return function(i){return d3_lab_rgb(s+j*i,_+Z*i,F+X*i)+""}}function d3_interpolateRound(i,o){return o-=i,function(s){return Math.round(i+o*s)}}function d3_transform(i){var o=[i.a,i.b],s=[i.c,i.d],_=d3_transformNormalize(o),F=d3_transformDot(o,s),N=d3_transformNormalize(d3_transformCombine(s,o,-F))||0;o[0]*s[1]<s[0]*o[1]&&(o[0]*=-1,o[1]*=-1,_*=-1,F*=-1),this.rotate=(_?Math.atan2(o[1],o[0]):Math.atan2(-s[0],s[1]))*ek,this.translate=[i.e,i.f],this.scale=[_,N],this.skew=N?Math.atan2(F,N)*ek:0}function d3_transformDot(i,o){return i[0]*o[0]+i[1]*o[1]}function d3_transformNormalize(i){var o=Math.sqrt(d3_transformDot(i,i));return o&&(i[0]/=o,i[1]/=o),o}function d3_transformCombine(i,o,s){return i[0]+=s*o[0],i[1]+=s*o[1],i}N.ease=function(i){var o=i.indexOf("-"),s=o>=0?i.slice(0,o):i,_=o>=0?i.slice(o+1):"in";return s=e$.get(s)||d3_ease_default,d3_ease_clamp((_=eQ.get(_)||d3_identity)(s.apply(null,j.call(arguments,1))))},N.interpolateHcl=d3_interpolateHcl,N.interpolateHsl=d3_interpolateHsl,N.interpolateLab=d3_interpolateLab,N.interpolateRound=d3_interpolateRound,N.transform=function(i){var o=Z.createElementNS(N.ns.prefix.svg,"g");return(N.transform=function(i){if(null!=i){o.setAttribute("transform",i);var s=o.transform.baseVal.consolidate()}return new d3_transform(s?s.matrix:e0)})(i)},d3_transform.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var e0={a:1,b:0,c:0,d:1,e:0,f:0};function d3_interpolateTransformPop(i){return i.length?i.pop()+",":""}function d3_interpolateTranslate(i,o,s,_){if(i[0]!==o[0]||i[1]!==o[1]){var F=s.push("translate(",null,",",null,")");_.push({i:F-4,x:d3_interpolateNumber(i[0],o[0])},{i:F-2,x:d3_interpolateNumber(i[1],o[1])})}else(o[0]||o[1])&&s.push("translate("+o+")")}function d3_interpolateRotate(i,o,s,_){i!==o?(i-o>180?o+=360:o-i>180&&(i+=360),_.push({i:s.push(d3_interpolateTransformPop(s)+"rotate(",null,")")-2,x:d3_interpolateNumber(i,o)})):o&&s.push(d3_interpolateTransformPop(s)+"rotate("+o+")")}function d3_interpolateSkew(i,o,s,_){i!==o?_.push({i:s.push(d3_interpolateTransformPop(s)+"skewX(",null,")")-2,x:d3_interpolateNumber(i,o)}):o&&s.push(d3_interpolateTransformPop(s)+"skewX("+o+")")}function d3_interpolateScale(i,o,s,_){if(i[0]!==o[0]||i[1]!==o[1]){var F=s.push(d3_interpolateTransformPop(s)+"scale(",null,",",null,")");_.push({i:F-4,x:d3_interpolateNumber(i[0],o[0])},{i:F-2,x:d3_interpolateNumber(i[1],o[1])})}else(1!==o[0]||1!==o[1])&&s.push(d3_interpolateTransformPop(s)+"scale("+o+")")}function d3_interpolateTransform(i,o){var s=[],_=[];return i=N.transform(i),o=N.transform(o),d3_interpolateTranslate(i.translate,o.translate,s,_),d3_interpolateRotate(i.rotate,o.rotate,s,_),d3_interpolateSkew(i.skew,o.skew,s,_),d3_interpolateScale(i.scale,o.scale,s,_),i=o=null,function(i){for(var o,F=-1,N=_.length;++F<N;)s[(o=_[F]).i]=o.x(i);return s.join("")}}function d3_uninterpolateNumber(i,o){return o=(o-=i=+i)||1/o,function(s){return(s-i)/o}}function d3_uninterpolateClamp(i,o){return o=(o-=i=+i)||1/o,function(s){return Math.max(0,Math.min(1,(s-i)/o))}}function d3_layout_bundlePath(i){for(var o=i.source,s=i.target,_=d3_layout_bundleLeastCommonAncestor(o,s),F=[o];o!==_;)F.push(o=o.parent);for(var N=F.length;s!==_;)F.splice(N,0,s),s=s.parent;return F}function d3_layout_bundleAncestors(i){for(var o=[],s=i.parent;null!=s;)o.push(i),i=s,s=s.parent;return o.push(i),o}function d3_layout_bundleLeastCommonAncestor(i,o){if(i===o)return i;for(var s=d3_layout_bundleAncestors(i),_=d3_layout_bundleAncestors(o),F=s.pop(),N=_.pop(),j=null;F===N;)j=F,F=s.pop(),N=_.pop();return j}function d3_layout_forceDragstart(i){i.fixed|=2}function d3_layout_forceDragend(i){i.fixed&=-7}function d3_layout_forceMouseover(i){i.fixed|=4,i.px=i.x,i.py=i.y}function d3_layout_forceMouseout(i){i.fixed&=-5}function d3_layout_forceAccumulate(i,o,s){var _=0,F=0;if(i.charge=0,!i.leaf)for(var N,j=i.nodes,Z=j.length,X=-1;++X<Z;)null!=(N=j[X])&&(d3_layout_forceAccumulate(N,o,s),i.charge+=N.charge,_+=N.charge*N.cx,F+=N.charge*N.cy);if(i.point){i.leaf||(i.point.x+=Math.random()-.5,i.point.y+=Math.random()-.5);var $=o*s[i.point.index];i.charge+=i.pointCharge=$,_+=$*i.point.x,F+=$*i.point.y}i.cx=_/i.charge,i.cy=F/i.charge}N.interpolateTransform=d3_interpolateTransform,N.layout={},N.layout.bundle=function(){return function(i){for(var o=[],s=-1,_=i.length;++s<_;)o.push(d3_layout_bundlePath(i[s]));return o}},N.layout.chord=function(){var i,o,s,_,F,j,Z,X={},$=0;function relayout(){var X,ee,et,er,en,ei={},eo=[],es=N.range(_),el=[];for(i=[],o=[],X=0,er=-1;++er<_;){for(ee=0,en=-1;++en<_;)ee+=s[er][en];eo.push(ee),el.push(N.range(_)),X+=ee}for(F&&es.sort(function(i,o){return F(eo[i],eo[o])}),j&&el.forEach(function(i,o){i.sort(function(i,_){return j(s[o][i],s[o][_])})}),X=(ex-$*_)/X,ee=0,er=-1;++er<_;){for(et=ee,en=-1;++en<_;){var ec=es[er],eu=el[ec][en],ef=s[ec][eu],ed=ee,eh=ee+=ef*X;ei[ec+"-"+eu]={index:ec,subindex:eu,startAngle:ed,endAngle:eh,value:ef}}o[ec]={index:ec,startAngle:et,endAngle:ee,value:eo[ec]},ee+=$}for(er=-1;++er<_;)for(en=er-1;++en<_;){var ep=ei[er+"-"+en],eg=ei[en+"-"+er];(ep.value||eg.value)&&i.push(ep.value<eg.value?{source:eg,target:ep}:{source:ep,target:eg})}Z&&resort()}function resort(){i.sort(function(i,o){return Z((i.source.value+i.target.value)/2,(o.source.value+o.target.value)/2)})}return X.matrix=function(F){return arguments.length?(_=(s=F)&&s.length,i=o=null,X):s},X.padding=function(s){return arguments.length?($=s,i=o=null,X):$},X.sortGroups=function(s){return arguments.length?(F=s,i=o=null,X):F},X.sortSubgroups=function(o){return arguments.length?(j=o,i=null,X):j},X.sortChords=function(o){return arguments.length?(Z=o,i&&resort(),X):Z},X.chords=function(){return i||relayout(),i},X.groups=function(){return o||relayout(),o},X},N.layout.force=function(){var i,o,s,_,F,j,Z={},X=N.dispatch("start","tick","end"),$=[1,1],ee=.9,et=e1,er=e2,en=-30,ei=e3,eo=.1,es=.64,el=[],ec=[];function repulse(i){return function(o,s,_,F){if(o.point!==i){var N=o.cx-i.x,j=o.cy-i.y,Z=F-s,X=N*N+j*j;if(Z*Z/es<X){if(X<ei){var $=o.charge/X;i.px-=N*$,i.py-=j*$}return!0}if(o.point&&X&&X<ei){var $=o.pointCharge/X;i.px-=N*$,i.py-=j*$}}return!o.charge}}function dragmove(i){i.px=N.event.x,i.py=N.event.y,Z.resume()}return Z.tick=function(){if((s*=.99)<.005)return i=null,X.end({type:"end",alpha:s=0}),!0;var o,Z,et,er,ei,es,eu,ef,ed,eh=el.length,ep=ec.length;for(Z=0;Z<ep;++Z)er=(et=ec[Z]).source,(es=(ef=(ei=et.target).x-er.x)*ef+(ed=ei.y-er.y)*ed)&&(ef*=es=s*F[Z]*((es=Math.sqrt(es))-_[Z])/es,ed*=es,ei.x-=ef*(eu=er.weight+ei.weight?er.weight/(er.weight+ei.weight):.5),ei.y-=ed*eu,er.x+=ef*(eu=1-eu),er.y+=ed*eu);if((eu=s*eo)&&(ef=$[0]/2,ed=$[1]/2,Z=-1,eu))for(;++Z<eh;)et=el[Z],et.x+=(ef-et.x)*eu,et.y+=(ed-et.y)*eu;if(en)for(d3_layout_forceAccumulate(o=N.geom.quadtree(el),s,j),Z=-1;++Z<eh;)(et=el[Z]).fixed||o.visit(repulse(et));for(Z=-1;++Z<eh;)(et=el[Z]).fixed?(et.x=et.px,et.y=et.py):(et.x-=(et.px-(et.px=et.x))*ee,et.y-=(et.py-(et.py=et.y))*ee);X.tick({type:"tick",alpha:s})},Z.nodes=function(i){return arguments.length?(el=i,Z):el},Z.links=function(i){return arguments.length?(ec=i,Z):ec},Z.size=function(i){return arguments.length?($=i,Z):$},Z.linkDistance=function(i){return arguments.length?(et="function"==typeof i?i:+i,Z):et},Z.distance=Z.linkDistance,Z.linkStrength=function(i){return arguments.length?(er="function"==typeof i?i:+i,Z):er},Z.friction=function(i){return arguments.length?(ee=+i,Z):ee},Z.charge=function(i){return arguments.length?(en="function"==typeof i?i:+i,Z):en},Z.chargeDistance=function(i){return arguments.length?(ei=i*i,Z):Math.sqrt(ei)},Z.gravity=function(i){return arguments.length?(eo=+i,Z):eo},Z.theta=function(i){return arguments.length?(es=i*i,Z):Math.sqrt(es)},Z.alpha=function(o){return arguments.length?(o=+o,s?o>0?s=o:(i.c=null,i.t=NaN,i=null,X.end({type:"end",alpha:s=0})):o>0&&(X.start({type:"start",alpha:s=o}),i=d3_timer(Z.tick)),Z):s},Z.start=function(){var i,o,s,N=el.length,X=ec.length,ee=$[0],ei=$[1];for(i=0;i<N;++i)(s=el[i]).index=i,s.weight=0;for(i=0;i<X;++i)"number"==typeof(s=ec[i]).source&&(s.source=el[s.source]),"number"==typeof s.target&&(s.target=el[s.target]),++s.source.weight,++s.target.weight;for(i=0;i<N;++i)isNaN((s=el[i]).x)&&(s.x=position("x",ee)),isNaN(s.y)&&(s.y=position("y",ei)),isNaN(s.px)&&(s.px=s.x),isNaN(s.py)&&(s.py=s.y);if(_=[],"function"==typeof et)for(i=0;i<X;++i)_[i]=+et.call(this,ec[i],i);else for(i=0;i<X;++i)_[i]=et;if(F=[],"function"==typeof er)for(i=0;i<X;++i)F[i]=+er.call(this,ec[i],i);else for(i=0;i<X;++i)F[i]=er;if(j=[],"function"==typeof en)for(i=0;i<N;++i)j[i]=+en.call(this,el[i],i);else for(i=0;i<N;++i)j[i]=en;function position(s,_){if(!o){for($=0,o=Array(N);$<N;++$)o[$]=[];for($=0;$<X;++$){var F=ec[$];o[F.source.index].push(F.target),o[F.target.index].push(F.source)}}for(var j,Z=o[i],$=-1,ee=Z.length;++$<ee;)if(!isNaN(j=Z[$][s]))return j;return Math.random()*_}return Z.resume()},Z.resume=function(){return Z.alpha(.1)},Z.stop=function(){return Z.alpha(0)},Z.drag=function(){if(o||(o=N.behavior.drag().origin(d3_identity).on("dragstart.force",d3_layout_forceDragstart).on("drag.force",dragmove).on("dragend.force",d3_layout_forceDragend)),!arguments.length)return o;this.on("mouseover.force",d3_layout_forceMouseover).on("mouseout.force",d3_layout_forceMouseout).call(o)},N.rebind(Z,X,"on")};var e1=20,e2=1,e3=1/0;function d3_layout_hierarchyRebind(i,o){return N.rebind(i,o,"sort","children","value"),i.nodes=i,i.links=d3_layout_hierarchyLinks,i}function d3_layout_hierarchyVisitBefore(i,o){for(var s,_,F=[i];null!=(i=F.pop());)if(o(i),(_=i.children)&&(s=_.length))for(;--s>=0;)F.push(_[s])}function d3_layout_hierarchyVisitAfter(i,o){for(var s=[i],_=[];null!=(i=s.pop());)if(_.push(i),(N=i.children)&&(F=N.length))for(var F,N,j=-1;++j<F;)s.push(N[j]);for(;null!=(i=_.pop());)o(i)}function d3_layout_hierarchyChildren(i){return i.children}function d3_layout_hierarchyValue(i){return i.value}function d3_layout_hierarchySort(i,o){return o.value-i.value}function d3_layout_hierarchyLinks(i){return N.merge(i.map(function(i){return(i.children||[]).map(function(o){return{source:i,target:o}})}))}N.layout.hierarchy=function(){var i=d3_layout_hierarchySort,o=d3_layout_hierarchyChildren,s=d3_layout_hierarchyValue;function hierarchy(_){var F,N,j,Z,X=[_],$=[];for(_.depth=0;null!=(Z=X.pop());)if($.push(Z),(N=o.call(hierarchy,Z,Z.depth))&&(F=N.length)){for(;--F>=0;)X.push(j=N[F]),j.parent=Z,j.depth=Z.depth+1;s&&(Z.value=0),Z.children=N}else s&&(Z.value=+s.call(hierarchy,Z,Z.depth)||0),delete Z.children;return d3_layout_hierarchyVisitAfter(_,function(o){var _,F;i&&(_=o.children)&&_.sort(i),s&&(F=o.parent)&&(F.value+=o.value)}),$}return hierarchy.sort=function(o){return arguments.length?(i=o,hierarchy):i},hierarchy.children=function(i){return arguments.length?(o=i,hierarchy):o},hierarchy.value=function(i){return arguments.length?(s=i,hierarchy):s},hierarchy.revalue=function(i){return s&&(d3_layout_hierarchyVisitBefore(i,function(i){i.children&&(i.value=0)}),d3_layout_hierarchyVisitAfter(i,function(i){var o;i.children||(i.value=+s.call(hierarchy,i,i.depth)||0),(o=i.parent)&&(o.value+=i.value)})),i},hierarchy},N.layout.partition=function(){var i=N.layout.hierarchy(),o=[1,1];function position(i,o,s,_){var F=i.children;if(i.x=o,i.y=i.depth*_,i.dx=s,i.dy=_,F&&(N=F.length)){var N,j,Z,X=-1;for(s=i.value?s/i.value:0;++X<N;)position(j=F[X],o,Z=j.value*s,_),o+=Z}}function depth(i){var o=i.children,s=0;if(o&&(_=o.length))for(var _,F=-1;++F<_;)s=Math.max(s,depth(o[F]));return 1+s}function partition(s,_){var F=i.call(this,s,_);return position(F[0],0,o[0],o[1]/depth(F[0])),F}return partition.size=function(i){return arguments.length?(o=i,partition):o},d3_layout_hierarchyRebind(partition,i)},N.layout.pie=function(){var i=Number,o=e5,s=0,_=ex,F=0;function pie(j){var Z,X=j.length,$=j.map(function(o,s){return+i.call(pie,o,s)}),ee=+("function"==typeof s?s.apply(this,arguments):s),et=("function"==typeof _?_.apply(this,arguments):_)-ee,er=Math.min(Math.abs(et)/X,+("function"==typeof F?F.apply(this,arguments):F)),en=er*(et<0?-1:1),ei=N.sum($),eo=ei?(et-X*en)/ei:0,es=N.range(X),el=[];return null!=o&&es.sort(o===e5?function(i,o){return $[o]-$[i]}:function(i,s){return o(j[i],j[s])}),es.forEach(function(i){el[i]={data:j[i],value:Z=$[i],startAngle:ee,endAngle:ee+=Z*eo+en,padAngle:er}}),el}return pie.value=function(o){return arguments.length?(i=o,pie):i},pie.sort=function(i){return arguments.length?(o=i,pie):o},pie.startAngle=function(i){return arguments.length?(s=i,pie):s},pie.endAngle=function(i){return arguments.length?(_=i,pie):_},pie.padAngle=function(i){return arguments.length?(F=i,pie):F},pie};var e5={};function d3_layout_stackX(i){return i.x}function d3_layout_stackY(i){return i.y}function d3_layout_stackOut(i,o,s){i.y0=o,i.y=s}N.layout.stack=function(){var i=d3_identity,o=d3_layout_stackOrderDefault,s=d3_layout_stackOffsetZero,_=d3_layout_stackOut,F=d3_layout_stackX,j=d3_layout_stackY;function stack(Z,X){if(!(er=Z.length))return Z;var $=Z.map(function(o,s){return i.call(stack,o,s)}),ee=$.map(function(i){return i.map(function(i,o){return[F.call(stack,i,o),j.call(stack,i,o)]})}),et=o.call(stack,ee,X);$=N.permute($,et),ee=N.permute(ee,et);var er,en,ei,eo,es=s.call(stack,ee,X),el=$[0].length;for(ei=0;ei<el;++ei)for(_.call(stack,$[0][ei],eo=es[ei],ee[0][ei][1]),en=1;en<er;++en)_.call(stack,$[en][ei],eo+=ee[en-1][ei][1],ee[en][ei][1]);return Z}return stack.values=function(o){return arguments.length?(i=o,stack):i},stack.order=function(i){return arguments.length?(o="function"==typeof i?i:e4.get(i)||d3_layout_stackOrderDefault,stack):o},stack.offset=function(i){return arguments.length?(s="function"==typeof i?i:e6.get(i)||d3_layout_stackOffsetZero,stack):s},stack.x=function(i){return arguments.length?(F=i,stack):F},stack.y=function(i){return arguments.length?(j=i,stack):j},stack.out=function(i){return arguments.length?(_=i,stack):_},stack};var e4=N.map({"inside-out":function(i){var o,s,_=i.length,F=i.map(d3_layout_stackMaxIndex),j=i.map(d3_layout_stackReduceSum),Z=N.range(_).sort(function(i,o){return F[i]-F[o]}),X=0,$=0,ee=[],et=[];for(o=0;o<_;++o)s=Z[o],X<$?(X+=j[s],ee.push(s)):($+=j[s],et.push(s));return et.reverse().concat(ee)},reverse:function(i){return N.range(i.length).reverse()},default:d3_layout_stackOrderDefault}),e6=N.map({silhouette:function(i){var o,s,_,F=i.length,N=i[0].length,j=[],Z=0,X=[];for(s=0;s<N;++s){for(o=0,_=0;o<F;o++)_+=i[o][s][1];_>Z&&(Z=_),j.push(_)}for(s=0;s<N;++s)X[s]=(Z-j[s])/2;return X},wiggle:function(i){var o,s,_,F,N,j,Z,X,$,ee=i.length,et=i[0],er=et.length,en=[];for(s=1,en[0]=X=$=0;s<er;++s){for(o=0,F=0;o<ee;++o)F+=i[o][s][1];for(o=0,N=0,Z=et[s][0]-et[s-1][0];o<ee;++o){for(_=0,j=(i[o][s][1]-i[o][s-1][1])/(2*Z);_<o;++_)j+=(i[_][s][1]-i[_][s-1][1])/Z;N+=j*i[o][s][1]}en[s]=X-=F?N/F*Z:0,X<$&&($=X)}for(s=0;s<er;++s)en[s]-=$;return en},expand:function(i){var o,s,_,F=i.length,N=i[0].length,j=1/F,Z=[];for(s=0;s<N;++s){for(o=0,_=0;o<F;o++)_+=i[o][s][1];if(_)for(o=0;o<F;o++)i[o][s][1]/=_;else for(o=0;o<F;o++)i[o][s][1]=j}for(s=0;s<N;++s)Z[s]=0;return Z},zero:d3_layout_stackOffsetZero});function d3_layout_stackOrderDefault(i){return N.range(i.length)}function d3_layout_stackOffsetZero(i){for(var o=-1,s=i[0].length,_=[];++o<s;)_[o]=0;return _}function d3_layout_stackMaxIndex(i){for(var o,s=1,_=0,F=i[0][1],N=i.length;s<N;++s)(o=i[s][1])>F&&(_=s,F=o);return _}function d3_layout_stackReduceSum(i){return i.reduce(d3_layout_stackSum,0)}function d3_layout_stackSum(i,o){return i+o[1]}function d3_layout_histogramBinSturges(i,o){return d3_layout_histogramBinFixed(i,Math.ceil(Math.log(o.length)/Math.LN2+1))}function d3_layout_histogramBinFixed(i,o){for(var s=-1,_=+i[0],F=(i[1]-_)/o,N=[];++s<=o;)N[s]=F*s+_;return N}function d3_layout_histogramRange(i){return[N.min(i),N.max(i)]}function d3_layout_packSort(i,o){return i.value-o.value}function d3_layout_packInsert(i,o){var s=i._pack_next;i._pack_next=o,o._pack_prev=i,o._pack_next=s,s._pack_prev=o}function d3_layout_packSplice(i,o){i._pack_next=o,o._pack_prev=i}function d3_layout_packIntersects(i,o){var s=o.x-i.x,_=o.y-i.y,F=i.r+o.r;return .999*F*F>s*s+_*_}function d3_layout_packSiblings(i){if((o=i.children)&&(X=o.length)){var o,s,_,F,N,j,Z,X,$=1/0,ee=-1/0,et=1/0,er=-1/0;if(o.forEach(d3_layout_packLink),(s=o[0]).x=-s.r,s.y=0,bound(s),X>1&&((_=o[1]).x=_.r,_.y=0,bound(_),X>2))for(d3_layout_packPlace(s,_,F=o[2]),bound(F),d3_layout_packInsert(s,F),s._pack_prev=F,d3_layout_packInsert(F,_),_=s._pack_next,N=3;N<X;N++){d3_layout_packPlace(s,_,F=o[N]);var en=0,ei=1,eo=1;for(j=_._pack_next;j!==_;j=j._pack_next,ei++)if(d3_layout_packIntersects(j,F)){en=1;break}if(1==en)for(Z=s._pack_prev;Z!==j._pack_prev&&!d3_layout_packIntersects(Z,F);Z=Z._pack_prev,eo++);en?(ei<eo||ei==eo&&_.r<s.r?d3_layout_packSplice(s,_=j):d3_layout_packSplice(s=Z,_),N--):(d3_layout_packInsert(s,F),_=F,bound(F))}var es=($+ee)/2,el=(et+er)/2,ec=0;for(N=0;N<X;N++)F=o[N],F.x-=es,F.y-=el,ec=Math.max(ec,F.r+Math.sqrt(F.x*F.x+F.y*F.y));i.r=ec,o.forEach(d3_layout_packUnlink)}function bound(i){$=Math.min(i.x-i.r,$),ee=Math.max(i.x+i.r,ee),et=Math.min(i.y-i.r,et),er=Math.max(i.y+i.r,er)}}function d3_layout_packLink(i){i._pack_next=i._pack_prev=i}function d3_layout_packUnlink(i){delete i._pack_next,delete i._pack_prev}function d3_layout_packTransform(i,o,s,_){var F=i.children;if(i.x=o+=_*i.x,i.y=s+=_*i.y,i.r*=_,F)for(var N=-1,j=F.length;++N<j;)d3_layout_packTransform(F[N],o,s,_)}function d3_layout_packPlace(i,o,s){var _=i.r+s.r,F=o.x-i.x,N=o.y-i.y;if(_&&(F||N)){var j=o.r+s.r,Z=F*F+N*N;j*=j,_*=_;var X=.5+(_-j)/(2*Z),$=Math.sqrt(Math.max(0,2*j*(_+Z)-(_-=Z)*_-j*j))/(2*Z);s.x=i.x+X*F+$*N,s.y=i.y+X*N-$*F}else s.x=i.x+_,s.y=i.y}function d3_layout_treeSeparation(i,o){return i.parent==o.parent?1:2}function d3_layout_treeLeft(i){var o=i.children;return o.length?o[0]:i.t}function d3_layout_treeRight(i){var o,s=i.children;return(o=s.length)?s[o-1]:i.t}function d3_layout_treeMove(i,o,s){var _=s/(o.i-i.i);o.c-=_,o.s+=s,i.c+=_,o.z+=s,o.m+=s}function d3_layout_treeShift(i){for(var o,s=0,_=0,F=i.children,N=F.length;--N>=0;)o=F[N],o.z+=s,o.m+=s,s+=o.s+(_+=o.c)}function d3_layout_treeAncestor(i,o,s){return i.a.parent===o.parent?i.a:s}function d3_layout_clusterY(i){return 1+N.max(i,function(i){return i.y})}function d3_layout_clusterX(i){return i.reduce(function(i,o){return i+o.x},0)/i.length}function d3_layout_clusterLeft(i){var o=i.children;return o&&o.length?d3_layout_clusterLeft(o[0]):i}function d3_layout_clusterRight(i){var o,s=i.children;return s&&(o=s.length)?d3_layout_clusterRight(s[o-1]):i}function d3_layout_treemapPadNull(i){return{x:i.x,y:i.y,dx:i.dx,dy:i.dy}}function d3_layout_treemapPad(i,o){var s=i.x+o[3],_=i.y+o[0],F=i.dx-o[1]-o[3],N=i.dy-o[0]-o[2];return F<0&&(s+=F/2,F=0),N<0&&(_+=N/2,N=0),{x:s,y:_,dx:F,dy:N}}function d3_scaleExtent(i){var o=i[0],s=i[i.length-1];return o<s?[o,s]:[s,o]}function d3_scaleRange(i){return i.rangeExtent?i.rangeExtent():d3_scaleExtent(i.range())}function d3_scale_bilinear(i,o,s,_){var F=s(i[0],i[1]),N=_(o[0],o[1]);return function(i){return N(F(i))}}function d3_scale_nice(i,o){var s,_=0,F=i.length-1,N=i[_],j=i[F];return j<N&&(s=_,_=F,F=s,s=N,N=j,j=s),i[_]=o.floor(N),i[F]=o.ceil(j),i}function d3_scale_niceStep(i){return i?{floor:function(o){return Math.floor(o/i)*i},ceil:function(o){return Math.ceil(o/i)*i}}:e8}N.layout.histogram=function(){var i=!0,o=Number,s=d3_layout_histogramRange,_=d3_layout_histogramBinSturges;function histogram(F,j){for(var Z,X,$=[],ee=F.map(o,this),et=s.call(this,ee,j),er=_.call(this,et,ee,j),j=-1,en=ee.length,ei=er.length-1,eo=i?1:1/en;++j<ei;)(Z=$[j]=[]).dx=er[j+1]-(Z.x=er[j]),Z.y=0;if(ei>0)for(j=-1;++j<en;)(X=ee[j])>=et[0]&&X<=et[1]&&(Z=$[N.bisect(er,X,1,ei)-1],Z.y+=eo,Z.push(F[j]));return $}return histogram.value=function(i){return arguments.length?(o=i,histogram):o},histogram.range=function(i){return arguments.length?(s=d3_functor(i),histogram):s},histogram.bins=function(i){return arguments.length?(_="number"==typeof i?function(o){return d3_layout_histogramBinFixed(o,i)}:d3_functor(i),histogram):_},histogram.frequency=function(o){return arguments.length?(i=!!o,histogram):i},histogram},N.layout.pack=function(){var i,o=N.layout.hierarchy().sort(d3_layout_packSort),s=0,_=[1,1];function pack(F,N){var j=o.call(this,F,N),Z=j[0],X=_[0],$=_[1],ee=null==i?Math.sqrt:"function"==typeof i?i:function(){return i};if(Z.x=Z.y=0,d3_layout_hierarchyVisitAfter(Z,function(i){i.r=+ee(i.value)}),d3_layout_hierarchyVisitAfter(Z,d3_layout_packSiblings),s){var et=s*(i?1:Math.max(2*Z.r/X,2*Z.r/$))/2;d3_layout_hierarchyVisitAfter(Z,function(i){i.r+=et}),d3_layout_hierarchyVisitAfter(Z,d3_layout_packSiblings),d3_layout_hierarchyVisitAfter(Z,function(i){i.r-=et})}return d3_layout_packTransform(Z,X/2,$/2,i?1:1/Math.max(2*Z.r/X,2*Z.r/$)),j}return pack.size=function(i){return arguments.length?(_=i,pack):_},pack.radius=function(o){return arguments.length?(i=null==o||"function"==typeof o?o:+o,pack):i},pack.padding=function(i){return arguments.length?(s=+i,pack):s},d3_layout_hierarchyRebind(pack,o)},N.layout.tree=function(){var i=N.layout.hierarchy().sort(null).value(null),o=d3_layout_treeSeparation,s=[1,1],_=null;function tree(F,N){var j=i.call(this,F,N),Z=j[0],X=wrapTree(Z);if(d3_layout_hierarchyVisitAfter(X,firstWalk),X.parent.m=-X.z,d3_layout_hierarchyVisitBefore(X,secondWalk),_)d3_layout_hierarchyVisitBefore(Z,sizeNode);else{var $=Z,ee=Z,et=Z;d3_layout_hierarchyVisitBefore(Z,function(i){i.x<$.x&&($=i),i.x>ee.x&&(ee=i),i.depth>et.depth&&(et=i)});var er=o($,ee)/2-$.x,en=s[0]/(ee.x+o(ee,$)/2+er),ei=s[1]/(et.depth||1);d3_layout_hierarchyVisitBefore(Z,function(i){i.x=(i.x+er)*en,i.y=i.depth*ei})}return j}function wrapTree(i){for(var o,s={A:null,children:[i]},_=[s];null!=(o=_.pop());)for(var F,N=o.children,j=0,Z=N.length;j<Z;++j)_.push((N[j]=F={_:N[j],parent:o,children:(F=N[j].children)&&F.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:j}).a=F);return s.children[0]}function firstWalk(i){var s=i.children,_=i.parent.children,F=i.i?_[i.i-1]:null;if(s.length){d3_layout_treeShift(i);var N=(s[0].z+s[s.length-1].z)/2;F?(i.z=F.z+o(i._,F._),i.m=i.z-N):i.z=N}else F&&(i.z=F.z+o(i._,F._));i.parent.A=apportion(i,F,i.parent.A||_[0])}function secondWalk(i){i._.x=i.z+i.parent.m,i.m+=i.parent.m}function apportion(i,s,_){if(s){for(var F,N=i,j=i,Z=s,X=N.parent.children[0],$=N.m,ee=j.m,et=Z.m,er=X.m;Z=d3_layout_treeRight(Z),N=d3_layout_treeLeft(N),Z&&N;)X=d3_layout_treeLeft(X),(j=d3_layout_treeRight(j)).a=i,(F=Z.z+et-N.z-$+o(Z._,N._))>0&&(d3_layout_treeMove(d3_layout_treeAncestor(Z,i,_),i,F),$+=F,ee+=F),et+=Z.m,$+=N.m,er+=X.m,ee+=j.m;Z&&!d3_layout_treeRight(j)&&(j.t=Z,j.m+=et-ee),N&&!d3_layout_treeLeft(X)&&(X.t=N,X.m+=$-er,_=i)}return _}function sizeNode(i){i.x*=s[0],i.y=i.depth*s[1]}return tree.separation=function(i){return arguments.length?(o=i,tree):o},tree.size=function(i){return arguments.length?(_=null==(s=i)?sizeNode:null,tree):_?null:s},tree.nodeSize=function(i){return arguments.length?(_=null==(s=i)?null:sizeNode,tree):_?s:null},d3_layout_hierarchyRebind(tree,i)},N.layout.cluster=function(){var i=N.layout.hierarchy().sort(null).value(null),o=d3_layout_treeSeparation,s=[1,1],_=!1;function cluster(F,N){var j,Z=i.call(this,F,N),X=Z[0],$=0;d3_layout_hierarchyVisitAfter(X,function(i){var s=i.children;s&&s.length?(i.x=d3_layout_clusterX(s),i.y=d3_layout_clusterY(s)):(i.x=j?$+=o(i,j):0,i.y=0,j=i)});var ee=d3_layout_clusterLeft(X),et=d3_layout_clusterRight(X),er=ee.x-o(ee,et)/2,en=et.x+o(et,ee)/2;return d3_layout_hierarchyVisitAfter(X,_?function(i){i.x=(i.x-X.x)*s[0],i.y=(X.y-i.y)*s[1]}:function(i){i.x=(i.x-er)/(en-er)*s[0],i.y=(1-(X.y?i.y/X.y:1))*s[1]}),Z}return cluster.separation=function(i){return arguments.length?(o=i,cluster):o},cluster.size=function(i){return arguments.length?(_=null==(s=i),cluster):_?null:s},cluster.nodeSize=function(i){return arguments.length?(_=null!=(s=i),cluster):_?s:null},d3_layout_hierarchyRebind(cluster,i)},N.layout.treemap=function(){var i,o=N.layout.hierarchy(),s=Math.round,_=[1,1],F=null,j=d3_layout_treemapPadNull,Z=!1,X="squarify",$=.5*(1+Math.sqrt(5));function scale(i,o){for(var s,_,F=-1,N=i.length;++F<N;)_=(s=i[F]).value*(o<0?0:o),s.area=isNaN(_)||_<=0?0:_}function squarify(i){var o=i.children;if(o&&o.length){var s,_,F,N=j(i),Z=[],$=o.slice(),ee=1/0,et="slice"===X?N.dx:"dice"===X?N.dy:"slice-dice"===X?1&i.depth?N.dy:N.dx:Math.min(N.dx,N.dy);for(scale($,N.dx*N.dy/i.value),Z.area=0;(F=$.length)>0;)Z.push(s=$[F-1]),Z.area+=s.area,"squarify"!==X||(_=worst(Z,et))<=ee?($.pop(),ee=_):(Z.area-=Z.pop().area,position(Z,et,N,!1),et=Math.min(N.dx,N.dy),Z.length=Z.area=0,ee=1/0);Z.length&&(position(Z,et,N,!0),Z.length=Z.area=0),o.forEach(squarify)}}function stickify(i){var o=i.children;if(o&&o.length){var s,_=j(i),F=o.slice(),N=[];for(scale(F,_.dx*_.dy/i.value),N.area=0;s=F.pop();)N.push(s),N.area+=s.area,null!=s.z&&(position(N,s.z?_.dx:_.dy,_,!F.length),N.length=N.area=0);o.forEach(stickify)}}function worst(i,o){for(var s,_=i.area,F=0,N=1/0,j=-1,Z=i.length;++j<Z;)(s=i[j].area)&&(s<N&&(N=s),s>F&&(F=s));return _*=_,o*=o,_?Math.max(o*F*$/_,_/(o*N*$)):1/0}function position(i,o,_,F){var N,j=-1,Z=i.length,X=_.x,$=_.y,ee=o?s(i.area/o):0;if(o==_.dx){for((F||ee>_.dy)&&(ee=_.dy);++j<Z;)(N=i[j]).x=X,N.y=$,N.dy=ee,X+=N.dx=Math.min(_.x+_.dx-X,ee?s(N.area/ee):0);N.z=!0,N.dx+=_.x+_.dx-X,_.y+=ee,_.dy-=ee}else{for((F||ee>_.dx)&&(ee=_.dx);++j<Z;)(N=i[j]).x=X,N.y=$,N.dx=ee,$+=N.dy=Math.min(_.y+_.dy-$,ee?s(N.area/ee):0);N.z=!1,N.dy+=_.y+_.dy-$,_.x+=ee,_.dx-=ee}}function treemap(s){var F=i||o(s),N=F[0];return N.x=N.y=0,N.value?(N.dx=_[0],N.dy=_[1]):N.dx=N.dy=0,i&&o.revalue(N),scale([N],N.dx*N.dy/N.value),(i?stickify:squarify)(N),Z&&(i=F),F}return treemap.size=function(i){return arguments.length?(_=i,treemap):_},treemap.padding=function(i){var o;if(!arguments.length)return F;function padFunction(o){var s=i.call(treemap,o,o.depth);return null==s?d3_layout_treemapPadNull(o):d3_layout_treemapPad(o,"number"==typeof s?[s,s,s,s]:s)}function padConstant(o){return d3_layout_treemapPad(o,i)}return j=null==(F=i)?d3_layout_treemapPadNull:"function"==(o=typeof i)?padFunction:("number"===o&&(i=[i,i,i,i]),padConstant),treemap},treemap.round=function(i){return arguments.length?(s=i?Math.round:Number,treemap):s!=Number},treemap.sticky=function(o){return arguments.length?(Z=o,i=null,treemap):Z},treemap.ratio=function(i){return arguments.length?($=i,treemap):$},treemap.mode=function(i){return arguments.length?(X=i+"",treemap):X},d3_layout_hierarchyRebind(treemap,o)},N.random={normal:function(i,o){var s=arguments.length;return s<2&&(o=1),s<1&&(i=0),function(){var s,_,F;do F=(s=2*Math.random()-1)*s+(_=2*Math.random()-1)*_;while(!F||F>1);return i+o*s*Math.sqrt(-2*Math.log(F)/F)}},logNormal:function(){var i=N.random.normal.apply(N,arguments);return function(){return Math.exp(i())}},bates:function(i){var o=N.random.irwinHall(i);return function(){return o()/i}},irwinHall:function(i){return function(){for(var o=0,s=0;s<i;s++)o+=Math.random();return o}}},N.scale={};var e8={floor:d3_identity,ceil:d3_identity};function d3_scale_polylinear(i,o,s,_){var F=[],j=[],Z=0,X=Math.min(i.length,o.length)-1;for(i[X]<i[0]&&(i=i.slice().reverse(),o=o.slice().reverse());++Z<=X;)F.push(s(i[Z-1],i[Z])),j.push(_(o[Z-1],o[Z]));return function(o){var s=N.bisect(i,o,1,X)-1;return j[s](F[s](o))}}function d3_scale_linear(i,o,s,_){var F,N;function rescale(){var j=Math.min(i.length,o.length)>2?d3_scale_polylinear:d3_scale_bilinear,Z=_?d3_uninterpolateClamp:d3_uninterpolateNumber;return F=j(i,o,Z,s),N=j(o,i,Z,d3_interpolate),scale}function scale(i){return F(i)}return scale.invert=function(i){return N(i)},scale.domain=function(o){return arguments.length?(i=o.map(Number),rescale()):i},scale.range=function(i){return arguments.length?(o=i,rescale()):o},scale.rangeRound=function(i){return scale.range(i).interpolate(d3_interpolateRound)},scale.clamp=function(i){return arguments.length?(_=i,rescale()):_},scale.interpolate=function(i){return arguments.length?(s=i,rescale()):s},scale.ticks=function(o){return d3_scale_linearTicks(i,o)},scale.tickFormat=function(o,s){return d3_scale_linearTickFormat(i,o,s)},scale.nice=function(o){return d3_scale_linearNice(i,o),rescale()},scale.copy=function(){return d3_scale_linear(i,o,s,_)},rescale()}function d3_scale_linearRebind(i,o){return N.rebind(i,o,"range","rangeRound","interpolate","clamp")}function d3_scale_linearNice(i,o){return d3_scale_nice(i,d3_scale_niceStep(d3_scale_linearTickRange(i,o)[2])),d3_scale_nice(i,d3_scale_niceStep(d3_scale_linearTickRange(i,o)[2])),i}function d3_scale_linearTickRange(i,o){null==o&&(o=10);var s=d3_scaleExtent(i),_=s[1]-s[0],F=Math.pow(10,Math.floor(Math.log(_/o)/Math.LN10)),N=o/_*F;return N<=.15?F*=10:N<=.35?F*=5:N<=.75&&(F*=2),s[0]=Math.ceil(s[0]/F)*F,s[1]=Math.floor(s[1]/F)*F+.5*F,s[2]=F,s}function d3_scale_linearTicks(i,o){return N.range.apply(N,d3_scale_linearTickRange(i,o))}function d3_scale_log(i,o,s,_){function log(i){return(s?Math.log(i<0?0:i):-Math.log(i>0?0:-i))/Math.log(o)}function pow(i){return s?Math.pow(o,i):-Math.pow(o,-i)}function scale(o){return i(log(o))}return scale.invert=function(o){return pow(i.invert(o))},scale.domain=function(o){return arguments.length?(s=o[0]>=0,i.domain((_=o.map(Number)).map(log)),scale):_},scale.base=function(s){return arguments.length?(o=+s,i.domain(_.map(log)),scale):o},scale.nice=function(){var o=d3_scale_nice(_.map(log),s?Math:e7);return i.domain(o),_=o.map(pow),scale},scale.ticks=function(){var i=d3_scaleExtent(_),F=[],N=i[0],j=i[1],Z=Math.floor(log(N)),X=Math.ceil(log(j)),$=o%1?2:o;if(isFinite(X-Z)){if(s){for(;Z<X;Z++)for(var ee=1;ee<$;ee++)F.push(pow(Z)*ee);F.push(pow(Z))}else for(F.push(pow(Z));Z++<X;)for(var ee=$-1;ee>0;ee--)F.push(pow(Z)*ee);for(Z=0;F[Z]<N;Z++);for(X=F.length;F[X-1]>j;X--);F=F.slice(Z,X)}return F},scale.copy=function(){return d3_scale_log(i.copy(),o,s,_)},d3_scale_linearRebind(scale,i)}N.scale.linear=function(){return d3_scale_linear([0,1],[0,1],d3_interpolate,!1)},N.scale.log=function(){return d3_scale_log(N.scale.linear().domain([0,1]),10,!0,[1,10])};var e7={floor:function(i){return-Math.ceil(-i)},ceil:function(i){return-Math.floor(-i)}};function d3_scale_pow(i,o,s){var _=d3_scale_powPow(o),F=d3_scale_powPow(1/o);function scale(o){return i(_(o))}return scale.invert=function(o){return F(i.invert(o))},scale.domain=function(o){return arguments.length?(i.domain((s=o.map(Number)).map(_)),scale):s},scale.ticks=function(i){return d3_scale_linearTicks(s,i)},scale.tickFormat=function(i,o){return d3_scale_linearTickFormat(s,i,o)},scale.nice=function(i){return scale.domain(d3_scale_linearNice(s,i))},scale.exponent=function(N){return arguments.length?(_=d3_scale_powPow(o=N),F=d3_scale_powPow(1/o),i.domain(s.map(_)),scale):o},scale.copy=function(){return d3_scale_pow(i.copy(),o,s)},d3_scale_linearRebind(scale,i)}function d3_scale_powPow(i){return function(o){return o<0?-Math.pow(-o,i):Math.pow(o,i)}}function d3_scale_ordinal(i,o){var s,_,F;function scale(F){return _[((s.get(F)||("range"===o.t?s.set(F,i.push(F)):NaN))-1)%_.length]}function steps(o,s){return N.range(i.length).map(function(i){return o+s*i})}return scale.domain=function(_){if(!arguments.length)return i;i=[],s=new d3_Map;for(var F,N=-1,j=_.length;++N<j;)s.has(F=_[N])||s.set(F,i.push(F));return scale[o.t].apply(scale,o.a)},scale.range=function(i){return arguments.length?(_=i,F=0,o={t:"range",a:arguments},scale):_},scale.rangePoints=function(s,N){arguments.length<2&&(N=0);var j=s[0],Z=s[1],X=i.length<2?(j=(j+Z)/2,0):(Z-j)/(i.length-1+N);return _=steps(j+X*N/2,X),F=0,o={t:"rangePoints",a:arguments},scale},scale.rangeRoundPoints=function(s,N){arguments.length<2&&(N=0);var j=s[0],Z=s[1],X=i.length<2?(j=Z=Math.round((j+Z)/2),0):(Z-j)/(i.length-1+N)|0;return _=steps(j+Math.round(X*N/2+(Z-j-(i.length-1+N)*X)/2),X),F=0,o={t:"rangeRoundPoints",a:arguments},scale},scale.rangeBands=function(s,N,j){arguments.length<2&&(N=0),arguments.length<3&&(j=N);var Z=s[1]<s[0],X=s[Z-0],$=(s[1-Z]-X)/(i.length-N+2*j);return _=steps(X+$*j,$),Z&&_.reverse(),F=$*(1-N),o={t:"rangeBands",a:arguments},scale},scale.rangeRoundBands=function(s,N,j){arguments.length<2&&(N=0),arguments.length<3&&(j=N);var Z=s[1]<s[0],X=s[Z-0],$=s[1-Z],ee=Math.floor(($-X)/(i.length-N+2*j));return _=steps(X+Math.round(($-X-(i.length-N)*ee)/2),ee),Z&&_.reverse(),F=Math.round(ee*(1-N)),o={t:"rangeRoundBands",a:arguments},scale},scale.rangeBand=function(){return F},scale.rangeExtent=function(){return d3_scaleExtent(o.a[0])},scale.copy=function(){return d3_scale_ordinal(i,o)},scale.domain(i)}N.scale.pow=function(){return d3_scale_pow(N.scale.linear(),1,[0,1])},N.scale.sqrt=function(){return N.scale.pow().exponent(.5)},N.scale.ordinal=function(){return d3_scale_ordinal([],{t:"range",a:[[]]})},N.scale.category10=function(){return N.scale.ordinal().range(e9)},N.scale.category20=function(){return N.scale.ordinal().range(te)},N.scale.category20b=function(){return N.scale.ordinal().range(tt)},N.scale.category20c=function(){return N.scale.ordinal().range(tr)};var e9=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(d3_rgbString),te=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(d3_rgbString),tt=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(d3_rgbString),tr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(d3_rgbString);function d3_scale_quantile(i,o){var s;function rescale(){var _=0,F=o.length;for(s=[];++_<F;)s[_-1]=N.quantile(i,_/F);return scale}function scale(i){if(!isNaN(i=+i))return o[N.bisect(s,i)]}return scale.domain=function(o){return arguments.length?(i=o.map(d3_number).filter(d3_numeric).sort(d3_ascending),rescale()):i},scale.range=function(i){return arguments.length?(o=i,rescale()):o},scale.quantiles=function(){return s},scale.invertExtent=function(_){return(_=o.indexOf(_))<0?[NaN,NaN]:[_>0?s[_-1]:i[0],_<s.length?s[_]:i[i.length-1]]},scale.copy=function(){return d3_scale_quantile(i,o)},rescale()}function d3_scale_quantize(i,o,s){var _,F;function scale(o){return s[Math.max(0,Math.min(F,Math.floor(_*(o-i))))]}function rescale(){return _=s.length/(o-i),F=s.length-1,scale}return scale.domain=function(s){return arguments.length?(i=+s[0],o=+s[s.length-1],rescale()):[i,o]},scale.range=function(i){return arguments.length?(s=i,rescale()):s},scale.invertExtent=function(o){return[o=(o=s.indexOf(o))<0?NaN:o/_+i,o+1/_]},scale.copy=function(){return d3_scale_quantize(i,o,s)},rescale()}function d3_scale_threshold(i,o){function scale(s){if(s<=s)return o[N.bisect(i,s)]}return scale.domain=function(o){return arguments.length?(i=o,scale):i},scale.range=function(i){return arguments.length?(o=i,scale):o},scale.invertExtent=function(s){return[i[(s=o.indexOf(s))-1],i[s]]},scale.copy=function(){return d3_scale_threshold(i,o)},scale}function d3_scale_identity(i){function identity(i){return+i}return identity.invert=identity,identity.domain=identity.range=function(o){return arguments.length?(i=o.map(identity),identity):i},identity.ticks=function(o){return d3_scale_linearTicks(i,o)},identity.tickFormat=function(o,s){return d3_scale_linearTickFormat(i,o,s)},identity.copy=function(){return d3_scale_identity(i)},identity}function d3_zero(){return 0}N.scale.quantile=function(){return d3_scale_quantile([],[])},N.scale.quantize=function(){return d3_scale_quantize(0,1,[0,1])},N.scale.threshold=function(){return d3_scale_threshold([.5],[0,1])},N.scale.identity=function(){return d3_scale_identity([0,1])},N.svg={},N.svg.arc=function(){var i=d3_svg_arcInnerRadius,o=d3_svg_arcOuterRadius,s=d3_zero,_=tn,F=d3_svg_arcStartAngle,N=d3_svg_arcEndAngle,j=d3_svg_arcPadAngle;function arc(){var Z=Math.max(0,+i.apply(this,arguments)),X=Math.max(0,+o.apply(this,arguments)),$=F.apply(this,arguments)-ew,ee=N.apply(this,arguments)-ew,et=Math.abs(ee-$),er=$>ee?0:1;if(X<Z&&(en=X,X=Z,Z=en),et>=e_)return circleSegment(X,er)+(Z?circleSegment(Z,1-er):"")+"Z";var en,ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg,em=0,ey=0,ex=[];if((es=(+j.apply(this,arguments)||0)/2)&&(eo=_===tn?Math.sqrt(Z*Z+X*X):+_.apply(this,arguments),er||(ey*=-1),X&&(ey=d3_asin(eo/X*Math.sin(es))),Z&&(em=d3_asin(eo/Z*Math.sin(es)))),X){el=X*Math.cos($+ey),ec=X*Math.sin($+ey),eu=X*Math.cos(ee-ey),ef=X*Math.sin(ee-ey);var eT=Math.abs(ee-$-2*ey)<=ev?0:1;if(ey&&d3_svg_arcSweep(el,ec,eu,ef)===er^eT){var ek=($+ee)/2;el=X*Math.cos(ek),ec=X*Math.sin(ek),eu=ef=null}}else el=ec=0;if(Z){ed=Z*Math.cos(ee-em),eh=Z*Math.sin(ee-em),ep=Z*Math.cos($+em),eg=Z*Math.sin($+em);var eA=Math.abs($-ee+2*em)<=ev?0:1;if(em&&d3_svg_arcSweep(ed,eh,ep,eg)===1-er^eA){var eS=($+ee)/2;ed=Z*Math.cos(eS),eh=Z*Math.sin(eS),ep=eg=null}}else ed=eh=0;if(et>1e-6&&(en=Math.min(Math.abs(X-Z)/2,+s.apply(this,arguments)))>.001){ei=Z<X^er?0:1;var eM=en,eC=en;if(et<ev){var eE=null==ep?[ed,eh]:null==eu?[el,ec]:d3_geom_polygonIntersect([el,ec],[ep,eg],[eu,ef],[ed,eh]),eL=el-eE[0],eP=ec-eE[1],eI=eu-eE[0],eO=ef-eE[1],eD=1/Math.sin(Math.acos((eL*eI+eP*eO)/(Math.sqrt(eL*eL+eP*eP)*Math.sqrt(eI*eI+eO*eO)))/2),eR=Math.sqrt(eE[0]*eE[0]+eE[1]*eE[1]);eC=Math.min(en,(Z-eR)/(eD-1)),eM=Math.min(en,(X-eR)/(eD+1))}if(null!=eu){var eB=d3_svg_arcCornerTangents(null==ep?[ed,eh]:[ep,eg],[el,ec],X,eM,er),eF=d3_svg_arcCornerTangents([eu,ef],[ed,eh],X,eM,er);en===eM?ex.push("M",eB[0],"A",eM,",",eM," 0 0,",ei," ",eB[1],"A",X,",",X," 0 ",1-er^d3_svg_arcSweep(eB[1][0],eB[1][1],eF[1][0],eF[1][1]),",",er," ",eF[1],"A",eM,",",eM," 0 0,",ei," ",eF[0]):ex.push("M",eB[0],"A",eM,",",eM," 0 1,",ei," ",eF[0])}else ex.push("M",el,",",ec);if(null!=ep){var ez=d3_svg_arcCornerTangents([el,ec],[ep,eg],Z,-eC,er),eN=d3_svg_arcCornerTangents([ed,eh],null==eu?[el,ec]:[eu,ef],Z,-eC,er);en===eC?ex.push("L",eN[0],"A",eC,",",eC," 0 0,",ei," ",eN[1],"A",Z,",",Z," 0 ",er^d3_svg_arcSweep(eN[1][0],eN[1][1],ez[1][0],ez[1][1]),",",1-er," ",ez[1],"A",eC,",",eC," 0 0,",ei," ",ez[0]):ex.push("L",eN[0],"A",eC,",",eC," 0 0,",ei," ",ez[0])}else ex.push("L",ed,",",eh)}else ex.push("M",el,",",ec),null!=eu&&ex.push("A",X,",",X," 0 ",eT,",",er," ",eu,",",ef),ex.push("L",ed,",",eh),null!=ep&&ex.push("A",Z,",",Z," 0 ",eA,",",1-er," ",ep,",",eg);return ex.push("Z"),ex.join("")}function circleSegment(i,o){return"M0,"+i+"A"+i+","+i+" 0 1,"+o+" 0,"+-i+"A"+i+","+i+" 0 1,"+o+" 0,"+i}return arc.innerRadius=function(o){return arguments.length?(i=d3_functor(o),arc):i},arc.outerRadius=function(i){return arguments.length?(o=d3_functor(i),arc):o},arc.cornerRadius=function(i){return arguments.length?(s=d3_functor(i),arc):s},arc.padRadius=function(i){return arguments.length?(_=i==tn?tn:d3_functor(i),arc):_},arc.startAngle=function(i){return arguments.length?(F=d3_functor(i),arc):F},arc.endAngle=function(i){return arguments.length?(N=d3_functor(i),arc):N},arc.padAngle=function(i){return arguments.length?(j=d3_functor(i),arc):j},arc.centroid=function(){var s=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2,_=(+F.apply(this,arguments)+ +N.apply(this,arguments))/2-ew;return[Math.cos(_)*s,Math.sin(_)*s]},arc};var tn="auto";function d3_svg_arcInnerRadius(i){return i.innerRadius}function d3_svg_arcOuterRadius(i){return i.outerRadius}function d3_svg_arcStartAngle(i){return i.startAngle}function d3_svg_arcEndAngle(i){return i.endAngle}function d3_svg_arcPadAngle(i){return i&&i.padAngle}function d3_svg_arcSweep(i,o,s,_){return(i-s)*o-(o-_)*i>0?0:1}function d3_svg_arcCornerTangents(i,o,s,_,F){var N=i[0]-o[0],j=i[1]-o[1],Z=(F?_:-_)/Math.sqrt(N*N+j*j),X=Z*j,$=-Z*N,ee=i[0]+X,et=i[1]+$,er=o[0]+X,en=o[1]+$,ei=(ee+er)/2,eo=(et+en)/2,es=er-ee,el=en-et,ec=es*es+el*el,eu=s-_,ef=ee*en-er*et,ed=(el<0?-1:1)*Math.sqrt(Math.max(0,eu*eu*ec-ef*ef)),eh=(ef*el-es*ed)/ec,ep=(-ef*es-el*ed)/ec,eg=(ef*el+es*ed)/ec,em=(-ef*es+el*ed)/ec,ey=eh-ei,ev=ep-eo,ex=eg-ei,e_=em-eo;return ey*ey+ev*ev>ex*ex+e_*e_&&(eh=eg,ep=em),[[eh-X,ep-$],[eh*s/eu,ep*s/eu]]}function d3_true(){return!0}function d3_svg_line(i){var o=d3_geom_pointX,s=d3_geom_pointY,_=d3_true,F=d3_svg_lineLinear,N=F.key,j=.7;function line(N){var Z,X=[],$=[],ee=-1,et=N.length,er=d3_functor(o),en=d3_functor(s);function segment(){X.push("M",F(i($),j))}for(;++ee<et;)_.call(this,Z=N[ee],ee)?$.push([+er.call(this,Z,ee),+en.call(this,Z,ee)]):$.length&&(segment(),$=[]);return $.length&&segment(),X.length?X.join(""):null}return line.x=function(i){return arguments.length?(o=i,line):o},line.y=function(i){return arguments.length?(s=i,line):s},line.defined=function(i){return arguments.length?(_=i,line):_},line.interpolate=function(i){return arguments.length?(N="function"==typeof i?F=i:(F=ta.get(i)||d3_svg_lineLinear).key,line):N},line.tension=function(i){return arguments.length?(j=i,line):j},line}N.svg.line=function(){return d3_svg_line(d3_identity)};var ta=N.map({linear:d3_svg_lineLinear,"linear-closed":d3_svg_lineLinearClosed,step:d3_svg_lineStep,"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":d3_svg_lineBasisOpen,"basis-closed":d3_svg_lineBasisClosed,bundle:d3_svg_lineBundle,cardinal:d3_svg_lineCardinal,"cardinal-open":d3_svg_lineCardinalOpen,"cardinal-closed":d3_svg_lineCardinalClosed,monotone:d3_svg_lineMonotone});function d3_svg_lineLinear(i){return i.length>1?i.join("L"):i+"Z"}function d3_svg_lineLinearClosed(i){return i.join("L")+"Z"}function d3_svg_lineStep(i){for(var o=0,s=i.length,_=i[0],F=[_[0],",",_[1]];++o<s;)F.push("H",(_[0]+(_=i[o])[0])/2,"V",_[1]);return s>1&&F.push("H",_[0]),F.join("")}function d3_svg_lineStepBefore(i){for(var o=0,s=i.length,_=i[0],F=[_[0],",",_[1]];++o<s;)F.push("V",(_=i[o])[1],"H",_[0]);return F.join("")}function d3_svg_lineStepAfter(i){for(var o=0,s=i.length,_=i[0],F=[_[0],",",_[1]];++o<s;)F.push("H",(_=i[o])[0],"V",_[1]);return F.join("")}function d3_svg_lineCardinalOpen(i,o){return i.length<4?d3_svg_lineLinear(i):i[1]+d3_svg_lineHermite(i.slice(1,-1),d3_svg_lineCardinalTangents(i,o))}function d3_svg_lineCardinalClosed(i,o){return i.length<3?d3_svg_lineLinearClosed(i):i[0]+d3_svg_lineHermite((i.push(i[0]),i),d3_svg_lineCardinalTangents([i[i.length-2]].concat(i,[i[1]]),o))}function d3_svg_lineCardinal(i,o){return i.length<3?d3_svg_lineLinear(i):i[0]+d3_svg_lineHermite(i,d3_svg_lineCardinalTangents(i,o))}function d3_svg_lineHermite(i,o){if(o.length<1||i.length!=o.length&&i.length!=o.length+2)return d3_svg_lineLinear(i);var s=i.length!=o.length,_="",F=i[0],N=i[1],j=o[0],Z=j,X=1;if(s&&(_+="Q"+(N[0]-2*j[0]/3)+","+(N[1]-2*j[1]/3)+","+N[0]+","+N[1],F=i[1],X=2),o.length>1){Z=o[1],N=i[X],X++,_+="C"+(F[0]+j[0])+","+(F[1]+j[1])+","+(N[0]-Z[0])+","+(N[1]-Z[1])+","+N[0]+","+N[1];for(var $=2;$<o.length;$++,X++)N=i[X],Z=o[$],_+="S"+(N[0]-Z[0])+","+(N[1]-Z[1])+","+N[0]+","+N[1]}if(s){var ee=i[X];_+="Q"+(N[0]+2*Z[0]/3)+","+(N[1]+2*Z[1]/3)+","+ee[0]+","+ee[1]}return _}function d3_svg_lineCardinalTangents(i,o){for(var s,_=[],F=(1-o)/2,N=i[0],j=i[1],Z=1,X=i.length;++Z<X;)s=N,N=j,_.push([F*((j=i[Z])[0]-s[0]),F*(j[1]-s[1])]);return _}function d3_svg_lineBasis(i){if(i.length<3)return d3_svg_lineLinear(i);var o=1,s=i.length,_=i[0],F=_[0],N=_[1],j=[F,F,F,(_=i[1])[0]],Z=[N,N,N,_[1]],X=[F,",",N,"L",d3_svg_lineDot4(ts,j),",",d3_svg_lineDot4(ts,Z)];for(i.push(i[s-1]);++o<=s;)_=i[o],j.shift(),j.push(_[0]),Z.shift(),Z.push(_[1]),d3_svg_lineBasisBezier(X,j,Z);return i.pop(),X.push("L",_),X.join("")}function d3_svg_lineBasisOpen(i){if(i.length<4)return d3_svg_lineLinear(i);for(var o,s=[],_=-1,F=i.length,N=[0],j=[0];++_<3;)o=i[_],N.push(o[0]),j.push(o[1]);for(s.push(d3_svg_lineDot4(ts,N)+","+d3_svg_lineDot4(ts,j)),--_;++_<F;)o=i[_],N.shift(),N.push(o[0]),j.shift(),j.push(o[1]),d3_svg_lineBasisBezier(s,N,j);return s.join("")}function d3_svg_lineBasisClosed(i){for(var o,s,_=-1,F=i.length,N=F+4,j=[],Z=[];++_<4;)s=i[_%F],j.push(s[0]),Z.push(s[1]);for(o=[d3_svg_lineDot4(ts,j),",",d3_svg_lineDot4(ts,Z)],--_;++_<N;)s=i[_%F],j.shift(),j.push(s[0]),Z.shift(),Z.push(s[1]),d3_svg_lineBasisBezier(o,j,Z);return o.join("")}function d3_svg_lineBundle(i,o){var s=i.length-1;if(s)for(var _,F,N=i[0][0],j=i[0][1],Z=i[s][0]-N,X=i[s][1]-j,$=-1;++$<=s;)_=i[$],F=$/s,_[0]=o*_[0]+(1-o)*(N+F*Z),_[1]=o*_[1]+(1-o)*(j+F*X);return d3_svg_lineBasis(i)}function d3_svg_lineDot4(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]+i[3]*o[3]}ta.forEach(function(i,o){o.key=i,o.closed=/-closed$/.test(i)});var ti=[0,2/3,1/3,0],to=[0,1/3,2/3,0],ts=[0,1/6,2/3,1/6];function d3_svg_lineBasisBezier(i,o,s){i.push("C",d3_svg_lineDot4(ti,o),",",d3_svg_lineDot4(ti,s),",",d3_svg_lineDot4(to,o),",",d3_svg_lineDot4(to,s),",",d3_svg_lineDot4(ts,o),",",d3_svg_lineDot4(ts,s))}function d3_svg_lineSlope(i,o){return(o[1]-i[1])/(o[0]-i[0])}function d3_svg_lineFiniteDifferences(i){for(var o=0,s=i.length-1,_=[],F=i[0],N=i[1],j=_[0]=d3_svg_lineSlope(F,N);++o<s;)_[o]=(j+(j=d3_svg_lineSlope(F=N,N=i[o+1])))/2;return _[o]=j,_}function d3_svg_lineMonotoneTangents(i){for(var o,s,_,F,N=[],j=d3_svg_lineFiniteDifferences(i),Z=-1,X=i.length-1;++Z<X;)1e-6>ei(o=d3_svg_lineSlope(i[Z],i[Z+1]))?j[Z]=j[Z+1]=0:(F=(s=j[Z]/o)*s+(_=j[Z+1]/o)*_)>9&&(F=3*o/Math.sqrt(F),j[Z]=F*s,j[Z+1]=F*_);for(Z=-1;++Z<=X;)N.push([(F=(i[Math.min(X,Z+1)][0]-i[Math.max(0,Z-1)][0])/(6*(1+j[Z]*j[Z])))||0,j[Z]*F||0]);return N}function d3_svg_lineMonotone(i){return i.length<3?d3_svg_lineLinear(i):i[0]+d3_svg_lineHermite(i,d3_svg_lineMonotoneTangents(i))}function d3_svg_lineRadial(i){for(var o,s,_,F=-1,N=i.length;++F<N;)s=(o=i[F])[0],_=o[1]-ew,o[0]=s*Math.cos(_),o[1]=s*Math.sin(_);return i}function d3_svg_area(i){var o=d3_geom_pointX,s=d3_geom_pointX,_=0,F=d3_geom_pointY,N=d3_true,j=d3_svg_lineLinear,Z=j.key,X=j,$="L",ee=.7;function area(Z){var et,er,en,ei=[],eo=[],es=[],el=-1,ec=Z.length,eu=d3_functor(o),ef=d3_functor(_),ed=o===s?function(){return er}:d3_functor(s),eh=_===F?function(){return en}:d3_functor(F);function segment(){ei.push("M",j(i(es),ee),$,X(i(eo.reverse()),ee),"Z")}for(;++el<ec;)N.call(this,et=Z[el],el)?(eo.push([er=+eu.call(this,et,el),en=+ef.call(this,et,el)]),es.push([+ed.call(this,et,el),+eh.call(this,et,el)])):eo.length&&(segment(),eo=[],es=[]);return eo.length&&segment(),ei.length?ei.join(""):null}return area.x=function(i){return arguments.length?(o=s=i,area):s},area.x0=function(i){return arguments.length?(o=i,area):o},area.x1=function(i){return arguments.length?(s=i,area):s},area.y=function(i){return arguments.length?(_=F=i,area):F},area.y0=function(i){return arguments.length?(_=i,area):_},area.y1=function(i){return arguments.length?(F=i,area):F},area.defined=function(i){return arguments.length?(N=i,area):N},area.interpolate=function(i){return arguments.length?(Z="function"==typeof i?j=i:(j=ta.get(i)||d3_svg_lineLinear).key,X=j.reverse||j,$=j.closed?"M":"L",area):Z},area.tension=function(i){return arguments.length?(ee=i,area):ee},area}function d3_source(i){return i.source}function d3_target(i){return i.target}function d3_svg_chordRadius(i){return i.radius}function d3_svg_diagonalProjection(i){return[i.x,i.y]}function d3_svg_diagonalRadialProjection(i){return function(){var o=i.apply(this,arguments),s=o[0],_=o[1]-ew;return[s*Math.cos(_),s*Math.sin(_)]}}function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(i){var o=Math.sqrt(i/ev);return"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z"}N.svg.line.radial=function(){var i=d3_svg_line(d3_svg_lineRadial);return i.radius=i.x,delete i.x,i.angle=i.y,delete i.y,i},d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter,d3_svg_lineStepAfter.reverse=d3_svg_lineStepBefore,N.svg.area=function(){return d3_svg_area(d3_identity)},N.svg.area.radial=function(){var i=d3_svg_area(d3_svg_lineRadial);return i.radius=i.x,delete i.x,i.innerRadius=i.x0,delete i.x0,i.outerRadius=i.x1,delete i.x1,i.angle=i.y,delete i.y,i.startAngle=i.y0,delete i.y0,i.endAngle=i.y1,delete i.y1,i},N.svg.chord=function(){var i=d3_source,o=d3_target,s=d3_svg_chordRadius,_=d3_svg_arcStartAngle,F=d3_svg_arcEndAngle;function chord(s,_){var F,N,j,Z,X,$,ee,et,er,en,ei,eo,es=subgroup(this,i,s,_),el=subgroup(this,o,s,_);return"M"+es.p0+arc(es.r,es.p1,es.a1-es.a0)+(equals(es,el)?(es.r,es.p1,es.r,"Q 0,0 "+es.p0):(es.r,es.p1,el.r,"Q 0,0 "+el.p0+arc(el.r,el.p1,el.a1-el.a0)+(el.r,el.p1,es.r,"Q 0,0 "+es.p0)))+"Z"}function subgroup(i,o,N,j){var Z=o.call(i,N,j),X=s.call(i,Z,j),$=_.call(i,Z,j)-ew,ee=F.call(i,Z,j)-ew;return{r:X,a0:$,a1:ee,p0:[X*Math.cos($),X*Math.sin($)],p1:[X*Math.cos(ee),X*Math.sin(ee)]}}function equals(i,o){return i.a0==o.a0&&i.a1==o.a1}function arc(i,o,s){return"A"+i+","+i+" 0 "+ +(s>ev)+",1 "+o}return chord.radius=function(i){return arguments.length?(s=d3_functor(i),chord):s},chord.source=function(o){return arguments.length?(i=d3_functor(o),chord):i},chord.target=function(i){return arguments.length?(o=d3_functor(i),chord):o},chord.startAngle=function(i){return arguments.length?(_=d3_functor(i),chord):_},chord.endAngle=function(i){return arguments.length?(F=d3_functor(i),chord):F},chord},N.svg.diagonal=function(){var i=d3_source,o=d3_target,s=d3_svg_diagonalProjection;function diagonal(_,F){var N=i.call(this,_,F),j=o.call(this,_,F),Z=(N.y+j.y)/2,X=[N,{x:N.x,y:Z},{x:j.x,y:Z},j];return"M"+(X=X.map(s))[0]+"C"+X[1]+" "+X[2]+" "+X[3]}return diagonal.source=function(o){return arguments.length?(i=d3_functor(o),diagonal):i},diagonal.target=function(i){return arguments.length?(o=d3_functor(i),diagonal):o},diagonal.projection=function(i){return arguments.length?(s=i,diagonal):s},diagonal},N.svg.diagonal.radial=function(){var i=N.svg.diagonal(),o=d3_svg_diagonalProjection,s=i.projection;return i.projection=function(i){return arguments.length?s(d3_svg_diagonalRadialProjection(o=i)):o},i},N.svg.symbol=function(){var i=d3_svg_symbolType,o=d3_svg_symbolSize;function symbol(s,_){return(tl.get(i.call(this,s,_))||d3_svg_symbolCircle)(o.call(this,s,_))}return symbol.type=function(o){return arguments.length?(i=d3_functor(o),symbol):i},symbol.size=function(i){return arguments.length?(o=d3_functor(i),symbol):o},symbol};var tl=N.map({circle:d3_svg_symbolCircle,cross:function(i){var o=Math.sqrt(i/5)/2;return"M"+-3*o+","+-o+"H"+-o+"V"+-3*o+"H"+o+"V"+-o+"H"+3*o+"V"+o+"H"+o+"V"+3*o+"H"+-o+"V"+o+"H"+-3*o+"Z"},diamond:function(i){var o=Math.sqrt(i/(2*tu)),s=o*tu;return"M0,"+-o+"L"+s+",0 0,"+o+" "+-s+",0Z"},square:function(i){var o=Math.sqrt(i)/2;return"M"+-o+","+-o+"L"+o+","+-o+" "+o+","+o+" "+-o+","+o+"Z"},"triangle-down":function(i){var o=Math.sqrt(i/tc),s=o*tc/2;return"M0,"+s+"L"+o+","+-s+" "+-o+","+-s+"Z"},"triangle-up":function(i){var o=Math.sqrt(i/tc),s=o*tc/2;return"M0,"+-s+"L"+o+","+s+" "+-o+","+s+"Z"}});N.svg.symbolTypes=tl.keys();var tc=Math.sqrt(3),tu=Math.tan(30*eT);ec.transition=function(i){for(var o,s,_=td||++tg,F=d3_transitionNamespace(i),N=[],j=th||{time:Date.now(),ease:d3_ease_cubicInOut,delay:0,duration:250},Z=-1,X=this.length;++Z<X;){N.push(o=[]);for(var $=this[Z],ee=-1,et=$.length;++ee<et;)(s=$[ee])&&d3_transitionNode(s,ee,F,_,j),o.push(s)}return d3_transition(N,F,_)},ec.interrupt=function(i){return this.each(null==i?tf:d3_selection_interruptNS(d3_transitionNamespace(i)))};var tf=d3_selection_interruptNS(d3_transitionNamespace());function d3_selection_interruptNS(i){return function(){var o,s,_;(o=this[i])&&(_=o[s=o.active])&&(_.timer.c=null,_.timer.t=NaN,--o.count?delete o[s]:delete this[i],o.active+=.5,_.event&&_.event.interrupt.call(this,this.__data__,_.index))}}function d3_transition(i,o,s){return el(i,tp),i.namespace=o,i.id=s,i}var td,th,tp=[],tg=0;function d3_transition_tween(i,o,s,_){var F=i.id,N=i.namespace;return d3_selection_each(i,"function"==typeof s?function(i,j,Z){i[N][F].tween.set(o,_(s.call(i,i.__data__,j,Z)))}:(s=_(s),function(i){i[N][F].tween.set(o,s)}))}function d3_transition_text(i){return null==i&&(i=""),function(){this.textContent=i}}function d3_transitionNamespace(i){return null==i?"__transition__":"__transition_"+i+"__"}function d3_transitionNode(i,o,s,_,F){var N,j,Z,X,$,ee=i[s]||(i[s]={active:0,count:0}),et=ee[_];function schedule(i){var o=et.delay;if(j.t=o+N,o<=i)return start(i-o);j.c=start}function start(s){var F=ee.active,er=ee[F];for(var en in er&&(er.timer.c=null,er.timer.t=NaN,--ee.count,delete ee[F],er.event&&er.event.interrupt.call(i,i.__data__,er.index)),ee)if(+en<_){var ei=ee[en];ei.timer.c=null,ei.timer.t=NaN,--ee.count,delete ee[en]}j.c=tick,d3_timer(function(){return j.c&&tick(s||1)&&(j.c=null,j.t=NaN),1},0,N),ee.active=_,et.event&&et.event.start.call(i,i.__data__,o),$=[],et.tween.forEach(function(s,_){(_=_.call(i,i.__data__,o))&&$.push(_)}),X=et.ease,Z=et.duration}function tick(F){for(var N=F/Z,j=X(N),er=$.length;er>0;)$[--er].call(i,j);if(N>=1)return et.event&&et.event.end.call(i,i.__data__,o),--ee.count?delete ee[_]:delete i[s],1}!et&&(j=d3_timer(schedule,0,N=F.time),et=ee[_]={tween:new d3_Map,time:N,timer:j,delay:F.delay,duration:F.duration,ease:F.ease,index:o},F=null,++ee.count)}tp.call=ec.call,tp.empty=ec.empty,tp.node=ec.node,tp.size=ec.size,N.transition=function(i,o){return i&&i.transition?td?i.transition(o):i:N.selection().transition(i)},N.transition.prototype=tp,tp.select=function(i){var o,s,_,F=this.id,N=this.namespace,j=[];i=d3_selection_selector(i);for(var Z=-1,X=this.length;++Z<X;){j.push(o=[]);for(var $=this[Z],ee=-1,et=$.length;++ee<et;)(_=$[ee])&&(s=i.call(_,_.__data__,ee,Z))?("__data__"in _&&(s.__data__=_.__data__),d3_transitionNode(s,ee,N,F,_[N][F]),o.push(s)):o.push(null)}return d3_transition(j,N,F)},tp.selectAll=function(i){var o,s,_,F,N,j=this.id,Z=this.namespace,X=[];i=d3_selection_selectorAll(i);for(var $=-1,ee=this.length;++$<ee;)for(var et=this[$],er=-1,en=et.length;++er<en;)if(_=et[er]){N=_[Z][j],s=i.call(_,_.__data__,er,$),X.push(o=[]);for(var ei=-1,eo=s.length;++ei<eo;)(F=s[ei])&&d3_transitionNode(F,ei,Z,j,N),o.push(F)}return d3_transition(X,Z,j)},tp.filter=function(i){var o,s,_,F=[];"function"!=typeof i&&(i=d3_selection_filter(i));for(var N=0,j=this.length;N<j;N++){F.push(o=[]);for(var s=this[N],Z=0,X=s.length;Z<X;Z++)(_=s[Z])&&i.call(_,_.__data__,Z,N)&&o.push(_)}return d3_transition(F,this.namespace,this.id)},tp.tween=function(i,o){var s=this.id,_=this.namespace;return arguments.length<2?this.node()[_][s].tween.get(i):d3_selection_each(this,null==o?function(o){o[_][s].tween.remove(i)}:function(F){F[_][s].tween.set(i,o)})},tp.attr=function(i,o){if(arguments.length<2){for(o in i)this.attr(o,i[o]);return this}var s="transform"==i?d3_interpolateTransform:d3_interpolate,_=N.ns.qualify(i);function attrNull(){this.removeAttribute(_)}function attrNullNS(){this.removeAttributeNS(_.space,_.local)}function attrTween(i){return null==i?attrNull:(i+="",function(){var o,F=this.getAttribute(_);return F!==i&&(o=s(F,i),function(i){this.setAttribute(_,o(i))})})}function attrTweenNS(i){return null==i?attrNullNS:(i+="",function(){var o,F=this.getAttributeNS(_.space,_.local);return F!==i&&(o=s(F,i),function(i){this.setAttributeNS(_.space,_.local,o(i))})})}return d3_transition_tween(this,"attr."+i,o,_.local?attrTweenNS:attrTween)},tp.attrTween=function(i,o){var s=N.ns.qualify(i);function attrTween(i,_){var F=o.call(this,i,_,this.getAttribute(s));return F&&function(i){this.setAttribute(s,F(i))}}function attrTweenNS(i,_){var F=o.call(this,i,_,this.getAttributeNS(s.space,s.local));return F&&function(i){this.setAttributeNS(s.space,s.local,F(i))}}return this.tween("attr."+i,s.local?attrTweenNS:attrTween)},tp.style=function(i,o,s){var _=arguments.length;if(_<3){if("string"!=typeof i){for(s in _<2&&(o=""),i)this.style(s,i[s],o);return this}s=""}function styleNull(){this.style.removeProperty(i)}function styleString(o){return null==o?styleNull:(o+="",function(){var _,F=d3_window(this).getComputedStyle(this,null).getPropertyValue(i);return F!==o&&(_=d3_interpolate(F,o),function(o){this.style.setProperty(i,_(o),s)})})}return d3_transition_tween(this,"style."+i,o,styleString)},tp.styleTween=function(i,o,s){function styleTween(_,F){var N=o.call(this,_,F,d3_window(this).getComputedStyle(this,null).getPropertyValue(i));return N&&function(o){this.style.setProperty(i,N(o),s)}}return arguments.length<3&&(s=""),this.tween("style."+i,styleTween)},tp.text=function(i){return d3_transition_tween(this,"text",i,d3_transition_text)},tp.remove=function(){var i=this.namespace;return this.each("end.transition",function(){var o;this[i].count<2&&(o=this.parentNode)&&o.removeChild(this)})},tp.ease=function(i){var o=this.id,s=this.namespace;return arguments.length<1?this.node()[s][o].ease:("function"!=typeof i&&(i=N.ease.apply(N,arguments)),d3_selection_each(this,function(_){_[s][o].ease=i}))},tp.delay=function(i){var o=this.id,s=this.namespace;return arguments.length<1?this.node()[s][o].delay:d3_selection_each(this,"function"==typeof i?function(_,F,N){_[s][o].delay=+i.call(_,_.__data__,F,N)}:(i=+i,function(_){_[s][o].delay=i}))},tp.duration=function(i){var o=this.id,s=this.namespace;return arguments.length<1?this.node()[s][o].duration:d3_selection_each(this,"function"==typeof i?function(_,F,N){_[s][o].duration=Math.max(1,i.call(_,_.__data__,F,N))}:(i=Math.max(1,i),function(_){_[s][o].duration=i}))},tp.each=function(i,o){var s=this.id,_=this.namespace;if(arguments.length<2){var F=th,j=td;try{td=s,d3_selection_each(this,function(o,F,N){th=o[_][s],i.call(o,o.__data__,F,N)})}finally{th=F,td=j}}else d3_selection_each(this,function(F){var j=F[_][s];(j.event||(j.event=N.dispatch("start","end","interrupt"))).on(i,o)});return this},tp.transition=function(){for(var i,o,s,_,F=this.id,N=++tg,j=this.namespace,Z=[],X=0,$=this.length;X<$;X++){Z.push(i=[]);for(var o=this[X],ee=0,et=o.length;ee<et;ee++)(s=o[ee])&&(_=s[j][F],d3_transitionNode(s,ee,j,N,{time:_.time,ease:_.ease,delay:_.delay+_.duration,duration:_.duration})),i.push(s)}return d3_transition(Z,j,N)},N.svg.axis=function(){var i,o=N.scale.linear(),s=tm,_=6,F=6,j=3,Z=[10],X=null;function axis($){$.each(function(){var $,ee=N.select(this),et=this.__chart__||o,er=this.__chart__=o.copy(),en=null==X?er.ticks?er.ticks.apply(er,Z):er.domain():X,ei=null==i?er.tickFormat?er.tickFormat.apply(er,Z):d3_identity:i,eo=ee.selectAll(".tick").data(en,er),es=eo.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),el=N.transition(eo.exit()).style("opacity",1e-6).remove(),ec=N.transition(eo.order()).style("opacity",1),eu=Math.max(_,0)+j,ef=d3_scaleRange(er),ed=ee.selectAll(".domain").data([0]),eh=(ed.enter().append("path").attr("class","domain"),N.transition(ed));es.append("line"),es.append("text");var ep,eg,em,ey,ev=es.select("line"),ex=ec.select("line"),e_=eo.select("text").text(ei),ew=es.select("text"),eT=ec.select("text"),ek="top"===s||"left"===s?-1:1;if("bottom"===s||"top"===s?($=d3_svg_axisX,ep="x",em="y",eg="x2",ey="y2",e_.attr("dy",ek<0?"0em":".71em").style("text-anchor","middle"),eh.attr("d","M"+ef[0]+","+ek*F+"V0H"+ef[1]+"V"+ek*F)):($=d3_svg_axisY,ep="y",em="x",eg="y2",ey="x2",e_.attr("dy",".32em").style("text-anchor",ek<0?"end":"start"),eh.attr("d","M"+ek*F+","+ef[0]+"H0V"+ef[1]+"H"+ek*F)),ev.attr(ey,ek*_),ew.attr(em,ek*eu),ex.attr(eg,0).attr(ey,ek*_),eT.attr(ep,0).attr(em,ek*eu),er.rangeBand){var eA=er,eS=eA.rangeBand()/2;et=er=function(i){return eA(i)+eS}}else et.rangeBand?et=er:el.call($,er,et);es.call($,et,er),ec.call($,er,er)})}return axis.scale=function(i){return arguments.length?(o=i,axis):o},axis.orient=function(i){return arguments.length?(s=i in ty?i+"":tm,axis):s},axis.ticks=function(){return arguments.length?(Z=d3_array(arguments),axis):Z},axis.tickValues=function(i){return arguments.length?(X=i,axis):X},axis.tickFormat=function(o){return arguments.length?(i=o,axis):i},axis.tickSize=function(i){var o=arguments.length;return o?(_=+i,F=+arguments[o-1],axis):_},axis.innerTickSize=function(i){return arguments.length?(_=+i,axis):_},axis.outerTickSize=function(i){return arguments.length?(F=+i,axis):F},axis.tickPadding=function(i){return arguments.length?(j=+i,axis):j},axis.tickSubdivide=function(){return arguments.length&&axis},axis};var tm="bottom",ty={top:1,right:1,bottom:1,left:1};function d3_svg_axisX(i,o,s){i.attr("transform",function(i){var _=o(i);return"translate("+(isFinite(_)?_:s(i))+",0)"})}function d3_svg_axisY(i,o,s){i.attr("transform",function(i){var _=o(i);return"translate(0,"+(isFinite(_)?_:s(i))+")"})}N.svg.brush=function(){var i,o,s=d3_eventDispatch(brush,"brushstart","brush","brushend"),_=null,F=null,j=[0,0],Z=[0,0],X=!0,$=!0,ee=tx[0];function brush(i){i.each(function(){var i=N.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",brushstart).on("touchstart.brush",brushstart),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=i.selectAll(".resize").data(ee,d3_identity);s.exit().remove(),s.enter().append("g").attr("class",function(i){return"resize "+i}).style("cursor",function(i){return tv[i]}).append("rect").attr("x",function(i){return/[ew]$/.test(i)?-3:null}).attr("y",function(i){return/^[ns]/.test(i)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",brush.empty()?"none":null);var j,Z=N.transition(i),X=N.transition(o);_&&(j=d3_scaleRange(_),X.attr("x",j[0]).attr("width",j[1]-j[0]),redrawX(Z)),F&&(j=d3_scaleRange(F),X.attr("y",j[0]).attr("height",j[1]-j[0]),redrawY(Z)),redraw(Z)})}function redraw(i){i.selectAll(".resize").attr("transform",function(i){return"translate("+j[+/e$/.test(i)]+","+Z[+/^s/.test(i)]+")"})}function redrawX(i){i.select(".extent").attr("x",j[0]),i.selectAll(".extent,.n>rect,.s>rect").attr("width",j[1]-j[0])}function redrawY(i){i.select(".extent").attr("y",Z[0]),i.selectAll(".extent,.e>rect,.w>rect").attr("height",Z[1]-Z[0])}function brushstart(){var ee,et,er=this,en=N.select(N.event.target),ei=s.of(er,arguments),eo=N.select(er),es=en.datum(),el=!/^(n|s)$/.test(es)&&_,ec=!/^(e|w)$/.test(es)&&F,eu=en.classed("extent"),ef=d3_event_dragSuppress(er),ed=N.mouse(er),eh=N.select(d3_window(er)).on("keydown.brush",keydown).on("keyup.brush",keyup);if(N.event.changedTouches?eh.on("touchmove.brush",brushmove).on("touchend.brush",brushend):eh.on("mousemove.brush",brushmove).on("mouseup.brush",brushend),eo.interrupt().selectAll("*").interrupt(),eu)ed[0]=j[0]-ed[0],ed[1]=Z[0]-ed[1];else if(es){var ep=+/w$/.test(es),eg=+/^n/.test(es);et=[j[1-ep]-ed[0],Z[1-eg]-ed[1]],ed[0]=j[ep],ed[1]=Z[eg]}else N.event.altKey&&(ee=ed.slice());function keydown(){32==N.event.keyCode&&(eu||(ee=null,ed[0]-=j[1],ed[1]-=Z[1],eu=2),d3_eventPreventDefault())}function keyup(){32==N.event.keyCode&&2==eu&&(ed[0]+=j[1],ed[1]+=Z[1],eu=0,d3_eventPreventDefault())}function brushmove(){var i=N.mouse(er),o=!1;et&&(i[0]+=et[0],i[1]+=et[1]),eu||(N.event.altKey?(ee||(ee=[(j[0]+j[1])/2,(Z[0]+Z[1])/2]),ed[0]=j[+(i[0]<ee[0])],ed[1]=Z[+(i[1]<ee[1])]):ee=null),el&&move1(i,_,0)&&(redrawX(eo),o=!0),ec&&move1(i,F,1)&&(redrawY(eo),o=!0),o&&(redraw(eo),ei({type:"brush",mode:eu?"move":"resize"}))}function move1(s,_,F){var N,et,er=d3_scaleRange(_),en=er[0],ei=er[1],eo=ed[F],es=F?Z:j,el=es[1]-es[0];if(eu&&(en-=eo,ei-=el+eo),N=(F?$:X)?Math.max(en,Math.min(ei,s[F])):s[F],eu?et=(N+=eo)+el:(ee&&(eo=Math.max(en,Math.min(ei,2*ee[F]-N))),eo<N?(et=N,N=eo):et=eo),es[0]!=N||es[1]!=et)return F?o=null:i=null,es[0]=N,es[1]=et,!0}function brushend(){brushmove(),eo.style("pointer-events","all").selectAll(".resize").style("display",brush.empty()?"none":null),N.select("body").style("cursor",null),eh.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),ef(),ei({type:"brushend"})}eo.style("pointer-events","none").selectAll(".resize").style("display",null),N.select("body").style("cursor",en.style("cursor")),ei({type:"brushstart"}),brushmove()}return brush.event=function(_){_.each(function(){var _=s.of(this,arguments),F={x:j,y:Z,i:i,j:o},X=this.__chart__||F;this.__chart__=F,td?N.select(this).transition().each("start.brush",function(){i=X.i,o=X.j,j=X.x,Z=X.y,_({type:"brushstart"})}).tween("brush:brush",function(){var s=d3_interpolateArray(j,F.x),N=d3_interpolateArray(Z,F.y);return i=o=null,function(i){j=F.x=s(i),Z=F.y=N(i),_({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=F.i,o=F.j,_({type:"brush",mode:"resize"}),_({type:"brushend"})}):(_({type:"brushstart"}),_({type:"brush",mode:"resize"}),_({type:"brushend"}))})},brush.x=function(i){return arguments.length?(ee=tx[!(_=i)<<1|!F],brush):_},brush.y=function(i){return arguments.length?(ee=tx[!_<<1|!(F=i)],brush):F},brush.clamp=function(i){return arguments.length?(_&&F?(X=!!i[0],$=!!i[1]):_?X=!!i:F&&($=!!i),brush):_&&F?[X,$]:_?X:F?$:null},brush.extent=function(s){var N,X,$,ee,et;return arguments.length?(_&&(N=s[0],X=s[1],F&&(N=N[0],X=X[0]),i=[N,X],_.invert&&(N=_(N),X=_(X)),X<N&&(et=N,N=X,X=et),(N!=j[0]||X!=j[1])&&(j=[N,X])),F&&($=s[0],ee=s[1],_&&($=$[1],ee=ee[1]),o=[$,ee],F.invert&&($=F($),ee=F(ee)),ee<$&&(et=$,$=ee,ee=et),($!=Z[0]||ee!=Z[1])&&(Z=[$,ee])),brush):(_&&(i?(N=i[0],X=i[1]):(N=j[0],X=j[1],_.invert&&(N=_.invert(N),X=_.invert(X)),X<N&&(et=N,N=X,X=et))),F&&(o?($=o[0],ee=o[1]):($=Z[0],ee=Z[1],F.invert&&($=F.invert($),ee=F.invert(ee)),ee<$&&(et=$,$=ee,ee=et))),_&&F?[[N,$],[X,ee]]:_?[N,X]:F&&[$,ee])},brush.clear=function(){return brush.empty()||(j=[0,0],Z=[0,0],i=o=null),brush},brush.empty=function(){return!!_&&j[0]==j[1]||!!F&&Z[0]==Z[1]},N.rebind(brush,s,"on")};var tv={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},tx=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function d3_json(i){return JSON.parse(i.responseText)}function d3_html(i){var o=Z.createRange();return o.selectNode(Z.body),o.createContextualFragment(i.responseText)}N.text=d3_xhrType(function(i){return i.responseText}),N.json=function(i,o){return d3_xhr(i,"application/json",d3_json,o)},N.html=function(i,o){return d3_xhr(i,"text/html",d3_html,o)},N.xml=d3_xhrType(function(i){return i.responseXML}),void 0!==(F="function"==typeof(_=N)?_.call(o,s,o,i):_)&&(i.exports=F)}).apply(self)},88294:function(i,o,s){"use strict";i.exports=s(62849)},62849:function(i,o,s){"use strict";var _=s(91358),F=s(53435),N=s(18863),j=s(21527),Z=s(71299),X=s(46775),$=s(30120),ee=s(64941),et=s(90660),er=s(27084);function normalize(i,o){for(var s=o[0],_=o[1],N=o[2],j=o[3],Z=1/(N-s),X=1/(j-_),$=Array(i.length),ee=0,et=i.length/2;ee<et;ee++)$[2*ee]=F((i[2*ee]-s)*Z,0,1),$[2*ee+1]=F((i[2*ee+1]-_)*X,0,1);return $}i.exports=function(i,o){o||(o={}),i=$(i,"float64");var s,F=X((o=Z(o,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"})).maxDepth,255),en=X(o.bounds,j(i,2));en[0]===en[2]&&en[2]++,en[1]===en[3]&&en[3]++;var ei=normalize(i,en),eo=i.length>>>1;o.dtype||(o.dtype="array"),"string"==typeof o.dtype?s=new(et(o.dtype))(eo):o.dtype&&Array.isArray(s=o.dtype)&&(s.length=eo);for(var es=0;es<eo;++es)s[es]=es;var el=[],ec=[],eu=[],ef=[];sort(0,0,1,s,0,1);for(var ed=0,eh=0;eh<el.length;eh++){var ep=el[eh];if(s.set)s.set(ep,ed);else for(var eg=0,em=ep.length;eg<em;eg++)s[eg+ed]=ep[eg];var ey=ed+el[eh].length;ef[eh]=[ed,ey],ed=ey}return s.range=range,s;function sort(i,o,s,_,N,j){if(!_.length)return null;var Z=el[N]||(el[N]=[]),X=eu[N]||(eu[N]=[]),$=ec[N]||(ec[N]=[]),ee=Z.length;if(++N>F||j>1073741824){for(var et=0;et<_.length;et++)Z.push(_[et]),X.push(j),$.push(null,null,null,null);return ee}if(Z.push(_[0]),X.push(j),_.length<=1)return $.push(null,null,null,null),ee;for(var er=.5*s,en=i+er,eo=o+er,es=[],ef=[],ed=[],eh=[],ep=1,eg=_.length;ep<eg;ep++){var em=_[ep],ey=ei[2*em],ev=ei[2*em+1];ey<en?ev<eo?es.push(em):ef.push(em):ev<eo?ed.push(em):eh.push(em)}return j<<=2,$.push(sort(i,o,er,es,N,j),sort(i,eo,er,ef,N,j+1),sort(en,o,er,ed,N,j+2),sort(en,eo,er,eh,N,j+3)),ee}function range(){for(var o,s,_=[],F=arguments.length;F--;)_[F]=arguments[F];if(ee(_[_.length-1])){var j=_.pop();_.length||null==j.x&&null==j.l&&null==j.left||(_=[j],o={}),o=Z(j,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else o={};_.length||(_=en);var $=N.apply(void 0,_),et=[Math.min($.x,$.x+$.width),Math.min($.y,$.y+$.height),Math.max($.x,$.x+$.width),Math.max($.y,$.y+$.height)],ei=et[0],eo=et[1],es=et[2],eu=et[3],ef=normalize([ei,eo,es,eu],en),ed=ef[0],eh=ef[1],ep=ef[2],eg=ef[3],em=X(o.level,el.length);if(null!=o.d&&("number"==typeof o.d?s=[o.d,o.d]:o.d.length&&(s=o.d),em=Math.min(Math.max(Math.ceil(-er(Math.abs(s[0])/(en[2]-en[0]))),Math.ceil(-er(Math.abs(s[1])/(en[3]-en[1])))),em)),em=Math.min(em,el.length),o.lod)return lod(ed,eh,ep,eg,em);var ey=[];function select(o,s,_,F,N,j){if(null!==N&&null!==j){var Z=o+_,X=s+_;if(!(ed>Z)&&!(eh>X)&&!(ep<o)&&!(eg<s)&&!(F>=em)&&N!==j){var $=el[F];void 0===j&&(j=$.length);for(var ee=N;ee<j;ee++){var et=$[ee],er=i[2*et],en=i[2*et+1];er>=ei&&er<=es&&en>=eo&&en<=eu&&ey.push(et)}var ef=ec[F],ev=ef[4*N+0],ex=ef[4*N+1],e_=ef[4*N+2],ew=ef[4*N+3],eT=nextOffset(ef,N+1),ek=.5*_,eA=F+1;select(o,s,ek,eA,ev,ex||e_||ew||eT),select(o,s+ek,ek,eA,ex,e_||ew||eT),select(o+ek,s,ek,eA,e_,ew||eT),select(o+ek,s+ek,ek,eA,ew,eT)}}}function nextOffset(i,o){for(var s=null,_=0;null===s;)if(s=i[4*o+_],++_>i.length)return null;return s}return select(0,0,1,0,0,1),ey}function lod(i,o,s,F,N){for(var j=[],Z=0;Z<N;Z++){var X=eu[Z],$=ef[Z][0],ee=group(i,o,Z),et=group(s,F,Z),er=_.ge(X,ee),en=_.gt(X,et,er,X.length-1);j[Z]=[er+$,en+$]}return j}function group(i,o,s){for(var _=1,F=.5,N=.5,j=.5,Z=0;Z<s;Z++)_<<=2,_+=i<F?o<N?0:1:o<N?2:3,j*=.5,F+=i<F?-j:j,N+=o<N?-j:j;return _}}},30774:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var _=s(60302);function area(i){return _.geomReduce(i,function(i,o){return i+calculateArea(o)},0)}function calculateArea(i){var o,s=0;switch(i.type){case"Polygon":return polygonArea(i.coordinates);case"MultiPolygon":for(o=0;o<i.coordinates.length;o++)s+=polygonArea(i.coordinates[o]);return s}return 0}function polygonArea(i){var o=0;if(i&&i.length>0){o+=Math.abs(ringArea(i[0]));for(var s=1;s<i.length;s++)o-=Math.abs(ringArea(i[s]))}return o}function ringArea(i){var o,s,_,F,N,j,Z=0,X=i.length;if(X>2){for(j=0;j<X;j++)j===X-2?(_=X-2,F=X-1,N=0):j===X-1?(_=X-1,F=0,N=1):(_=j,F=j+1,N=j+2),o=i[_],s=i[F],Z+=(rad(i[N][0])-rad(o[0]))*Math.sin(rad(s[1]));Z=40680631590769*Z/2}return Z}function rad(i){return i*Math.PI/180}o.default=area},23132:function(i,o){"use strict";function feature(i,o,s){void 0===s&&(s={});var _={type:"Feature"};return(0===s.id||s.id)&&(_.id=s.id),s.bbox&&(_.bbox=s.bbox),_.properties=o||{},_.geometry=i,_}function geometry(i,o,s){switch(void 0===s&&(s={}),i){case"Point":return point(o).geometry;case"LineString":return lineString(o).geometry;case"Polygon":return polygon(o).geometry;case"MultiPoint":return multiPoint(o).geometry;case"MultiLineString":return multiLineString(o).geometry;case"MultiPolygon":return multiPolygon(o).geometry;default:throw Error(i+" is invalid")}}function point(i,o,s){if(void 0===s&&(s={}),!i)throw Error("coordinates is required");if(!Array.isArray(i))throw Error("coordinates must be an Array");if(i.length<2)throw Error("coordinates must be at least 2 numbers long");if(!isNumber(i[0])||!isNumber(i[1]))throw Error("coordinates must contain numbers");return feature({type:"Point",coordinates:i},o,s)}function points(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return point(i,o)}),s)}function polygon(i,o,s){void 0===s&&(s={});for(var _=0;_<i.length;_++){var F=i[_];if(F.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var N=0;N<F[F.length-1].length;N++)if(F[F.length-1][N]!==F[0][N])throw Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:i},o,s)}function polygons(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return polygon(i,o)}),s)}function lineString(i,o,s){if(void 0===s&&(s={}),i.length<2)throw Error("coordinates must be an array of two or more positions");return feature({type:"LineString",coordinates:i},o,s)}function lineStrings(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return lineString(i,o)}),s)}function featureCollection(i,o){void 0===o&&(o={});var s={type:"FeatureCollection"};return o.id&&(s.id=o.id),o.bbox&&(s.bbox=o.bbox),s.features=i,s}function multiLineString(i,o,s){return void 0===s&&(s={}),feature({type:"MultiLineString",coordinates:i},o,s)}function multiPoint(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPoint",coordinates:i},o,s)}function multiPolygon(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPolygon",coordinates:i},o,s)}function geometryCollection(i,o,s){return void 0===s&&(s={}),feature({type:"GeometryCollection",geometries:i},o,s)}function round(i,o){if(void 0===o&&(o=0),o&&!(o>=0))throw Error("precision must be a positive number");var s=Math.pow(10,o||0);return Math.round(i*s)/s}function radiansToLength(i,s){void 0===s&&(s="kilometers");var _=o.factors[s];if(!_)throw Error(s+" units is invalid");return i*_}function lengthToRadians(i,s){void 0===s&&(s="kilometers");var _=o.factors[s];if(!_)throw Error(s+" units is invalid");return i/_}function lengthToDegrees(i,o){return radiansToDegrees(lengthToRadians(i,o))}function bearingToAzimuth(i){var o=i%360;return o<0&&(o+=360),o}function radiansToDegrees(i){return 180*(i%(2*Math.PI))/Math.PI}function degreesToRadians(i){return i%360*Math.PI/180}function convertLength(i,o,s){if(void 0===o&&(o="kilometers"),void 0===s&&(s="kilometers"),!(i>=0))throw Error("length must be a positive number");return radiansToLength(lengthToRadians(i,o),s)}function convertArea(i,s,_){if(void 0===s&&(s="meters"),void 0===_&&(_="kilometers"),!(i>=0))throw Error("area must be a positive number");var F=o.areaFactors[s];if(!F)throw Error("invalid original units");var N=o.areaFactors[_];if(!N)throw Error("invalid final units");return i/F*N}function isNumber(i){return!isNaN(i)&&null!==i&&!Array.isArray(i)}function isObject(i){return!!i&&i.constructor===Object}function validateBBox(i){if(!i)throw Error("bbox is required");if(!Array.isArray(i))throw Error("bbox must be an Array");if(4!==i.length&&6!==i.length)throw Error("bbox must be an Array of 4 or 6 numbers");i.forEach(function(i){if(!isNumber(i))throw Error("bbox must only contain numbers")})}function validateId(i){if(!i)throw Error("id is required");if(-1===["string","number"].indexOf(typeof i))throw Error("id must be a number or a string")}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:1.0936*o.earthRadius},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1.0936133},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=feature,o.geometry=geometry,o.point=point,o.points=points,o.polygon=polygon,o.polygons=polygons,o.lineString=lineString,o.lineStrings=lineStrings,o.featureCollection=featureCollection,o.multiLineString=multiLineString,o.multiPoint=multiPoint,o.multiPolygon=multiPolygon,o.geometryCollection=geometryCollection,o.round=round,o.radiansToLength=radiansToLength,o.lengthToRadians=lengthToRadians,o.lengthToDegrees=lengthToDegrees,o.bearingToAzimuth=bearingToAzimuth,o.radiansToDegrees=radiansToDegrees,o.degreesToRadians=degreesToRadians,o.convertLength=convertLength,o.convertArea=convertArea,o.isNumber=isNumber,o.isObject=isObject,o.validateBBox=validateBBox,o.validateId=validateId},60302:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var _=s(23132);function coordEach(i,o,s){if(null!==i)for(var _,F,N,j,Z,X,$,ee,et=0,er=0,en=i.type,ei="FeatureCollection"===en,eo="Feature"===en,es=ei?i.features.length:1,el=0;el<es;el++){Z=(ee=!!($=ei?i.features[el].geometry:eo?i.geometry:i)&&"GeometryCollection"===$.type)?$.geometries.length:1;for(var ec=0;ec<Z;ec++){var eu=0,ef=0;if(null!==(j=ee?$.geometries[ec]:$)){X=j.coordinates;var ed=j.type;switch(et=s&&("Polygon"===ed||"MultiPolygon"===ed)?1:0,ed){case null:break;case"Point":if(!1===o(X,er,el,eu,ef))return!1;er++,eu++;break;case"LineString":case"MultiPoint":for(_=0;_<X.length;_++){if(!1===o(X[_],er,el,eu,ef))return!1;er++,"MultiPoint"===ed&&eu++}"LineString"===ed&&eu++;break;case"Polygon":case"MultiLineString":for(_=0;_<X.length;_++){for(F=0;F<X[_].length-et;F++){if(!1===o(X[_][F],er,el,eu,ef))return!1;er++}"MultiLineString"===ed&&eu++,"Polygon"===ed&&ef++}"Polygon"===ed&&eu++;break;case"MultiPolygon":for(_=0;_<X.length;_++){for(F=0,ef=0;F<X[_].length;F++){for(N=0;N<X[_][F].length-et;N++){if(!1===o(X[_][F][N],er,el,eu,ef))return!1;er++}ef++}eu++}break;case"GeometryCollection":for(_=0;_<j.geometries.length;_++)if(!1===coordEach(j.geometries[_],o,s))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function coordReduce(i,o,s,_){var F=s;return coordEach(i,function(i,_,N,j,Z){F=0===_&&void 0===s?i:o(F,i,_,N,j,Z)},_),F}function propEach(i,o){var s;switch(i.type){case"FeatureCollection":for(s=0;s<i.features.length&&!1!==o(i.features[s].properties,s);s++);break;case"Feature":o(i.properties,0)}}function propReduce(i,o,s){var _=s;return propEach(i,function(i,F){_=0===F&&void 0===s?i:o(_,i,F)}),_}function featureEach(i,o){if("Feature"===i.type)o(i,0);else if("FeatureCollection"===i.type)for(var s=0;s<i.features.length&&!1!==o(i.features[s],s);s++);}function featureReduce(i,o,s){var _=s;return featureEach(i,function(i,F){_=0===F&&void 0===s?i:o(_,i,F)}),_}function coordAll(i){var o=[];return coordEach(i,function(i){o.push(i)}),o}function geomEach(i,o){var s,_,F,N,j,Z,X,$,ee,et,er=0,en="FeatureCollection"===i.type,ei="Feature"===i.type,eo=en?i.features.length:1;for(s=0;s<eo;s++){for(F=0,Z=en?i.features[s].geometry:ei?i.geometry:i,$=en?i.features[s].properties:ei?i.properties:{},ee=en?i.features[s].bbox:ei?i.bbox:void 0,et=en?i.features[s].id:ei?i.id:void 0,j=(X=!!Z&&"GeometryCollection"===Z.type)?Z.geometries.length:1;F<j;F++){if(null===(N=X?Z.geometries[F]:Z)){if(!1===o(null,er,$,ee,et))return!1;continue}switch(N.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===o(N,er,$,ee,et))return!1;break;case"GeometryCollection":for(_=0;_<N.geometries.length;_++)if(!1===o(N.geometries[_],er,$,ee,et))return!1;break;default:throw Error("Unknown Geometry Type")}}er++}}function geomReduce(i,o,s){var _=s;return geomEach(i,function(i,F,N,j,Z){_=0===F&&void 0===s?i:o(_,i,F,N,j,Z)}),_}function flattenEach(i,o){geomEach(i,function(i,s,F,N,j){var Z,X=null===i?null:i.type;switch(X){case null:case"Point":case"LineString":case"Polygon":if(!1===o(_.feature(i,F,{bbox:N,id:j}),s,0))return!1;return}switch(X){case"MultiPoint":Z="Point";break;case"MultiLineString":Z="LineString";break;case"MultiPolygon":Z="Polygon"}for(var $=0;$<i.coordinates.length;$++){var ee={type:Z,coordinates:i.coordinates[$]};if(!1===o(_.feature(ee,F),s,$))return!1}})}function flattenReduce(i,o,s){var _=s;return flattenEach(i,function(i,F,N){_=0===F&&0===N&&void 0===s?i:o(_,i,F,N)}),_}function segmentEach(i,o){flattenEach(i,function(i,s,F){var N,j=0;if(i.geometry){var Z=i.geometry.type;if("Point"!==Z&&"MultiPoint"!==Z){var X=0,$=0,ee=0;if(!1===coordEach(i,function(Z,et,er,en,ei){if(void 0===N||s>X||en>$||ei>ee){N=Z,X=s,$=en,ee=ei,j=0;return}if(!1===o(_.lineString([N,Z],i.properties),s,F,ei,j))return!1;j++,N=Z}))return!1}}})}function segmentReduce(i,o,s){var _=s,F=!1;return segmentEach(i,function(i,N,j,Z,X){_=!1===F&&void 0===s?i:o(_,i,N,j,Z,X),F=!0}),_}function lineEach(i,o){if(!i)throw Error("geojson is required");flattenEach(i,function(i,s,F){if(null!==i.geometry){var N=i.geometry.type,j=i.geometry.coordinates;switch(N){case"LineString":if(!1===o(i,s,F,0,0))return!1;break;case"Polygon":for(var Z=0;Z<j.length;Z++)if(!1===o(_.lineString(j[Z],i.properties),s,F,Z))return!1}}})}function lineReduce(i,o,s){var _=s;return lineEach(i,function(i,F,N,j){_=0===F&&void 0===s?i:o(_,i,F,N,j)}),_}function findSegment(i,o){if(o=o||{},!_.isObject(o))throw Error("options is invalid");var s,F=o.featureIndex||0,N=o.multiFeatureIndex||0,j=o.geometryIndex||0,Z=o.segmentIndex||0,X=o.properties;switch(i.type){case"FeatureCollection":F<0&&(F=i.features.length+F),X=X||i.features[F].properties,s=i.features[F].geometry;break;case"Feature":X=X||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var $=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return Z<0&&(Z=$.length+Z-1),_.lineString([$[Z],$[Z+1]],X,o);case"Polygon":return j<0&&(j=$.length+j),Z<0&&(Z=$[j].length+Z-1),_.lineString([$[j][Z],$[j][Z+1]],X,o);case"MultiLineString":return N<0&&(N=$.length+N),Z<0&&(Z=$[N].length+Z-1),_.lineString([$[N][Z],$[N][Z+1]],X,o);case"MultiPolygon":return N<0&&(N=$.length+N),j<0&&(j=$[N].length+j),Z<0&&(Z=$[N][j].length-Z-1),_.lineString([$[N][j][Z],$[N][j][Z+1]],X,o)}throw Error("geojson is invalid")}function findPoint(i,o){if(o=o||{},!_.isObject(o))throw Error("options is invalid");var s,F=o.featureIndex||0,N=o.multiFeatureIndex||0,j=o.geometryIndex||0,Z=o.coordIndex||0,X=o.properties;switch(i.type){case"FeatureCollection":F<0&&(F=i.features.length+F),X=X||i.features[F].properties,s=i.features[F].geometry;break;case"Feature":X=X||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var $=s.coordinates;switch(s.type){case"Point":return _.point($,X,o);case"MultiPoint":return N<0&&(N=$.length+N),_.point($[N],X,o);case"LineString":return Z<0&&(Z=$.length+Z),_.point($[Z],X,o);case"Polygon":return j<0&&(j=$.length+j),Z<0&&(Z=$[j].length+Z),_.point($[j][Z],X,o);case"MultiLineString":return N<0&&(N=$.length+N),Z<0&&(Z=$[N].length+Z),_.point($[N][Z],X,o);case"MultiPolygon":return N<0&&(N=$.length+N),j<0&&(j=$[N].length+j),Z<0&&(Z=$[N][j].length-Z),_.point($[N][j][Z],X,o)}throw Error("geojson is invalid")}o.coordEach=coordEach,o.coordReduce=coordReduce,o.propEach=propEach,o.propReduce=propReduce,o.featureEach=featureEach,o.featureReduce=featureReduce,o.coordAll=coordAll,o.geomEach=geomEach,o.geomReduce=geomReduce,o.flattenEach=flattenEach,o.flattenReduce=flattenReduce,o.segmentEach=segmentEach,o.segmentReduce=segmentReduce,o.lineEach=lineEach,o.lineReduce=lineReduce,o.findSegment=findSegment,o.findPoint=findPoint},85268:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var _=s(27138);function bbox(i){var o=[1/0,1/0,-1/0,-1/0];return _.coordEach(i,function(i){o[0]>i[0]&&(o[0]=i[0]),o[1]>i[1]&&(o[1]=i[1]),o[2]<i[0]&&(o[2]=i[0]),o[3]<i[1]&&(o[3]=i[1])}),o}bbox.default=bbox,o.default=bbox},94228:function(i,o){"use strict";function feature(i,o,s){void 0===s&&(s={});var _={type:"Feature"};return(0===s.id||s.id)&&(_.id=s.id),s.bbox&&(_.bbox=s.bbox),_.properties=o||{},_.geometry=i,_}function geometry(i,o,s){switch(void 0===s&&(s={}),i){case"Point":return point(o).geometry;case"LineString":return lineString(o).geometry;case"Polygon":return polygon(o).geometry;case"MultiPoint":return multiPoint(o).geometry;case"MultiLineString":return multiLineString(o).geometry;case"MultiPolygon":return multiPolygon(o).geometry;default:throw Error(i+" is invalid")}}function point(i,o,s){if(void 0===s&&(s={}),!i)throw Error("coordinates is required");if(!Array.isArray(i))throw Error("coordinates must be an Array");if(i.length<2)throw Error("coordinates must be at least 2 numbers long");if(!isNumber(i[0])||!isNumber(i[1]))throw Error("coordinates must contain numbers");return feature({type:"Point",coordinates:i},o,s)}function points(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return point(i,o)}),s)}function polygon(i,o,s){void 0===s&&(s={});for(var _=0;_<i.length;_++){var F=i[_];if(F.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var N=0;N<F[F.length-1].length;N++)if(F[F.length-1][N]!==F[0][N])throw Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:i},o,s)}function polygons(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return polygon(i,o)}),s)}function lineString(i,o,s){if(void 0===s&&(s={}),i.length<2)throw Error("coordinates must be an array of two or more positions");return feature({type:"LineString",coordinates:i},o,s)}function lineStrings(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return lineString(i,o)}),s)}function featureCollection(i,o){void 0===o&&(o={});var s={type:"FeatureCollection"};return o.id&&(s.id=o.id),o.bbox&&(s.bbox=o.bbox),s.features=i,s}function multiLineString(i,o,s){return void 0===s&&(s={}),feature({type:"MultiLineString",coordinates:i},o,s)}function multiPoint(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPoint",coordinates:i},o,s)}function multiPolygon(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPolygon",coordinates:i},o,s)}function geometryCollection(i,o,s){return void 0===s&&(s={}),feature({type:"GeometryCollection",geometries:i},o,s)}function round(i,o){if(void 0===o&&(o=0),o&&!(o>=0))throw Error("precision must be a positive number");var s=Math.pow(10,o||0);return Math.round(i*s)/s}function radiansToLength(i,s){void 0===s&&(s="kilometers");var _=o.factors[s];if(!_)throw Error(s+" units is invalid");return i*_}function lengthToRadians(i,s){void 0===s&&(s="kilometers");var _=o.factors[s];if(!_)throw Error(s+" units is invalid");return i/_}function lengthToDegrees(i,o){return radiansToDegrees(lengthToRadians(i,o))}function bearingToAzimuth(i){var o=i%360;return o<0&&(o+=360),o}function radiansToDegrees(i){return 180*(i%(2*Math.PI))/Math.PI}function degreesToRadians(i){return i%360*Math.PI/180}function convertLength(i,o,s){if(void 0===o&&(o="kilometers"),void 0===s&&(s="kilometers"),!(i>=0))throw Error("length must be a positive number");return radiansToLength(lengthToRadians(i,o),s)}function convertArea(i,s,_){if(void 0===s&&(s="meters"),void 0===_&&(_="kilometers"),!(i>=0))throw Error("area must be a positive number");var F=o.areaFactors[s];if(!F)throw Error("invalid original units");var N=o.areaFactors[_];if(!N)throw Error("invalid final units");return i/F*N}function isNumber(i){return!isNaN(i)&&null!==i&&!Array.isArray(i)}function isObject(i){return!!i&&i.constructor===Object}function validateBBox(i){if(!i)throw Error("bbox is required");if(!Array.isArray(i))throw Error("bbox must be an Array");if(4!==i.length&&6!==i.length)throw Error("bbox must be an Array of 4 or 6 numbers");i.forEach(function(i){if(!isNumber(i))throw Error("bbox must only contain numbers")})}function validateId(i){if(!i)throw Error("id is required");if(-1===["string","number"].indexOf(typeof i))throw Error("id must be a number or a string")}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:1.0936*o.earthRadius},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1.0936133},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=feature,o.geometry=geometry,o.point=point,o.points=points,o.polygon=polygon,o.polygons=polygons,o.lineString=lineString,o.lineStrings=lineStrings,o.featureCollection=featureCollection,o.multiLineString=multiLineString,o.multiPoint=multiPoint,o.multiPolygon=multiPolygon,o.geometryCollection=geometryCollection,o.round=round,o.radiansToLength=radiansToLength,o.lengthToRadians=lengthToRadians,o.lengthToDegrees=lengthToDegrees,o.bearingToAzimuth=bearingToAzimuth,o.radiansToDegrees=radiansToDegrees,o.degreesToRadians=degreesToRadians,o.convertLength=convertLength,o.convertArea=convertArea,o.isNumber=isNumber,o.isObject=isObject,o.validateBBox=validateBBox,o.validateId=validateId},27138:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var _=s(94228);function coordEach(i,o,s){if(null!==i)for(var _,F,N,j,Z,X,$,ee,et=0,er=0,en=i.type,ei="FeatureCollection"===en,eo="Feature"===en,es=ei?i.features.length:1,el=0;el<es;el++){Z=(ee=!!($=ei?i.features[el].geometry:eo?i.geometry:i)&&"GeometryCollection"===$.type)?$.geometries.length:1;for(var ec=0;ec<Z;ec++){var eu=0,ef=0;if(null!==(j=ee?$.geometries[ec]:$)){X=j.coordinates;var ed=j.type;switch(et=s&&("Polygon"===ed||"MultiPolygon"===ed)?1:0,ed){case null:break;case"Point":if(!1===o(X,er,el,eu,ef))return!1;er++,eu++;break;case"LineString":case"MultiPoint":for(_=0;_<X.length;_++){if(!1===o(X[_],er,el,eu,ef))return!1;er++,"MultiPoint"===ed&&eu++}"LineString"===ed&&eu++;break;case"Polygon":case"MultiLineString":for(_=0;_<X.length;_++){for(F=0;F<X[_].length-et;F++){if(!1===o(X[_][F],er,el,eu,ef))return!1;er++}"MultiLineString"===ed&&eu++,"Polygon"===ed&&ef++}"Polygon"===ed&&eu++;break;case"MultiPolygon":for(_=0;_<X.length;_++){for(F=0,ef=0;F<X[_].length;F++){for(N=0;N<X[_][F].length-et;N++){if(!1===o(X[_][F][N],er,el,eu,ef))return!1;er++}ef++}eu++}break;case"GeometryCollection":for(_=0;_<j.geometries.length;_++)if(!1===coordEach(j.geometries[_],o,s))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function coordReduce(i,o,s,_){var F=s;return coordEach(i,function(i,_,N,j,Z){F=0===_&&void 0===s?i:o(F,i,_,N,j,Z)},_),F}function propEach(i,o){var s;switch(i.type){case"FeatureCollection":for(s=0;s<i.features.length&&!1!==o(i.features[s].properties,s);s++);break;case"Feature":o(i.properties,0)}}function propReduce(i,o,s){var _=s;return propEach(i,function(i,F){_=0===F&&void 0===s?i:o(_,i,F)}),_}function featureEach(i,o){if("Feature"===i.type)o(i,0);else if("FeatureCollection"===i.type)for(var s=0;s<i.features.length&&!1!==o(i.features[s],s);s++);}function featureReduce(i,o,s){var _=s;return featureEach(i,function(i,F){_=0===F&&void 0===s?i:o(_,i,F)}),_}function coordAll(i){var o=[];return coordEach(i,function(i){o.push(i)}),o}function geomEach(i,o){var s,_,F,N,j,Z,X,$,ee,et,er=0,en="FeatureCollection"===i.type,ei="Feature"===i.type,eo=en?i.features.length:1;for(s=0;s<eo;s++){for(F=0,Z=en?i.features[s].geometry:ei?i.geometry:i,$=en?i.features[s].properties:ei?i.properties:{},ee=en?i.features[s].bbox:ei?i.bbox:void 0,et=en?i.features[s].id:ei?i.id:void 0,j=(X=!!Z&&"GeometryCollection"===Z.type)?Z.geometries.length:1;F<j;F++){if(null===(N=X?Z.geometries[F]:Z)){if(!1===o(null,er,$,ee,et))return!1;continue}switch(N.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===o(N,er,$,ee,et))return!1;break;case"GeometryCollection":for(_=0;_<N.geometries.length;_++)if(!1===o(N.geometries[_],er,$,ee,et))return!1;break;default:throw Error("Unknown Geometry Type")}}er++}}function geomReduce(i,o,s){var _=s;return geomEach(i,function(i,F,N,j,Z){_=0===F&&void 0===s?i:o(_,i,F,N,j,Z)}),_}function flattenEach(i,o){geomEach(i,function(i,s,F,N,j){var Z,X=null===i?null:i.type;switch(X){case null:case"Point":case"LineString":case"Polygon":if(!1===o(_.feature(i,F,{bbox:N,id:j}),s,0))return!1;return}switch(X){case"MultiPoint":Z="Point";break;case"MultiLineString":Z="LineString";break;case"MultiPolygon":Z="Polygon"}for(var $=0;$<i.coordinates.length;$++){var ee={type:Z,coordinates:i.coordinates[$]};if(!1===o(_.feature(ee,F),s,$))return!1}})}function flattenReduce(i,o,s){var _=s;return flattenEach(i,function(i,F,N){_=0===F&&0===N&&void 0===s?i:o(_,i,F,N)}),_}function segmentEach(i,o){flattenEach(i,function(i,s,F){var N,j=0;if(i.geometry){var Z=i.geometry.type;if("Point"!==Z&&"MultiPoint"!==Z){var X=0,$=0,ee=0;if(!1===coordEach(i,function(Z,et,er,en,ei){if(void 0===N||s>X||en>$||ei>ee){N=Z,X=s,$=en,ee=ei,j=0;return}if(!1===o(_.lineString([N,Z],i.properties),s,F,ei,j))return!1;j++,N=Z}))return!1}}})}function segmentReduce(i,o,s){var _=s,F=!1;return segmentEach(i,function(i,N,j,Z,X){_=!1===F&&void 0===s?i:o(_,i,N,j,Z,X),F=!0}),_}function lineEach(i,o){if(!i)throw Error("geojson is required");flattenEach(i,function(i,s,F){if(null!==i.geometry){var N=i.geometry.type,j=i.geometry.coordinates;switch(N){case"LineString":if(!1===o(i,s,F,0,0))return!1;break;case"Polygon":for(var Z=0;Z<j.length;Z++)if(!1===o(_.lineString(j[Z],i.properties),s,F,Z))return!1}}})}function lineReduce(i,o,s){var _=s;return lineEach(i,function(i,F,N,j){_=0===F&&void 0===s?i:o(_,i,F,N,j)}),_}function findSegment(i,o){if(o=o||{},!_.isObject(o))throw Error("options is invalid");var s,F=o.featureIndex||0,N=o.multiFeatureIndex||0,j=o.geometryIndex||0,Z=o.segmentIndex||0,X=o.properties;switch(i.type){case"FeatureCollection":F<0&&(F=i.features.length+F),X=X||i.features[F].properties,s=i.features[F].geometry;break;case"Feature":X=X||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var $=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return Z<0&&(Z=$.length+Z-1),_.lineString([$[Z],$[Z+1]],X,o);case"Polygon":return j<0&&(j=$.length+j),Z<0&&(Z=$[j].length+Z-1),_.lineString([$[j][Z],$[j][Z+1]],X,o);case"MultiLineString":return N<0&&(N=$.length+N),Z<0&&(Z=$[N].length+Z-1),_.lineString([$[N][Z],$[N][Z+1]],X,o);case"MultiPolygon":return N<0&&(N=$.length+N),j<0&&(j=$[N].length+j),Z<0&&(Z=$[N][j].length-Z-1),_.lineString([$[N][j][Z],$[N][j][Z+1]],X,o)}throw Error("geojson is invalid")}function findPoint(i,o){if(o=o||{},!_.isObject(o))throw Error("options is invalid");var s,F=o.featureIndex||0,N=o.multiFeatureIndex||0,j=o.geometryIndex||0,Z=o.coordIndex||0,X=o.properties;switch(i.type){case"FeatureCollection":F<0&&(F=i.features.length+F),X=X||i.features[F].properties,s=i.features[F].geometry;break;case"Feature":X=X||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var $=s.coordinates;switch(s.type){case"Point":return _.point($,X,o);case"MultiPoint":return N<0&&(N=$.length+N),_.point($[N],X,o);case"LineString":return Z<0&&(Z=$.length+Z),_.point($[Z],X,o);case"Polygon":return j<0&&(j=$.length+j),Z<0&&(Z=$[j].length+Z),_.point($[j][Z],X,o);case"MultiLineString":return N<0&&(N=$.length+N),Z<0&&(Z=$[N].length+Z),_.point($[N][Z],X,o);case"MultiPolygon":return N<0&&(N=$.length+N),j<0&&(j=$[N].length+j),Z<0&&(Z=$[N][j].length-Z),_.point($[N][j][Z],X,o)}throw Error("geojson is invalid")}o.coordEach=coordEach,o.coordReduce=coordReduce,o.propEach=propEach,o.propReduce=propReduce,o.featureEach=featureEach,o.featureReduce=featureReduce,o.coordAll=coordAll,o.geomEach=geomEach,o.geomReduce=geomReduce,o.flattenEach=flattenEach,o.flattenReduce=flattenReduce,o.segmentEach=segmentEach,o.segmentReduce=segmentReduce,o.lineEach=lineEach,o.lineReduce=lineReduce,o.findSegment=findSegment,o.findPoint=findPoint},29261:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var _=s(88553),F=s(64182);function centroid(i,o){void 0===o&&(o={});var s=0,N=0,j=0;return _.coordEach(i,function(i){s+=i[0],N+=i[1],j++}),F.point([s/j,N/j],o.properties)}o.default=centroid},64182:function(i,o){"use strict";function feature(i,o,s){void 0===s&&(s={});var _={type:"Feature"};return(0===s.id||s.id)&&(_.id=s.id),s.bbox&&(_.bbox=s.bbox),_.properties=o||{},_.geometry=i,_}function geometry(i,o,s){switch(void 0===s&&(s={}),i){case"Point":return point(o).geometry;case"LineString":return lineString(o).geometry;case"Polygon":return polygon(o).geometry;case"MultiPoint":return multiPoint(o).geometry;case"MultiLineString":return multiLineString(o).geometry;case"MultiPolygon":return multiPolygon(o).geometry;default:throw Error(i+" is invalid")}}function point(i,o,s){return void 0===s&&(s={}),feature({type:"Point",coordinates:i},o,s)}function points(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return point(i,o)}),s)}function polygon(i,o,s){void 0===s&&(s={});for(var _=0;_<i.length;_++){var F=i[_];if(F.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var N=0;N<F[F.length-1].length;N++)if(F[F.length-1][N]!==F[0][N])throw Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates:i},o,s)}function polygons(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return polygon(i,o)}),s)}function lineString(i,o,s){if(void 0===s&&(s={}),i.length<2)throw Error("coordinates must be an array of two or more positions");return feature({type:"LineString",coordinates:i},o,s)}function lineStrings(i,o,s){return void 0===s&&(s={}),featureCollection(i.map(function(i){return lineString(i,o)}),s)}function featureCollection(i,o){void 0===o&&(o={});var s={type:"FeatureCollection"};return o.id&&(s.id=o.id),o.bbox&&(s.bbox=o.bbox),s.features=i,s}function multiLineString(i,o,s){return void 0===s&&(s={}),feature({type:"MultiLineString",coordinates:i},o,s)}function multiPoint(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPoint",coordinates:i},o,s)}function multiPolygon(i,o,s){return void 0===s&&(s={}),feature({type:"MultiPolygon",coordinates:i},o,s)}function geometryCollection(i,o,s){return void 0===s&&(s={}),feature({type:"GeometryCollection",geometries:i},o,s)}function round(i,o){if(void 0===o&&(o=0),o&&!(o>=0))throw Error("precision must be a positive number");var s=Math.pow(10,o||0);return Math.round(i*s)/s}function radiansToLength(i,s){void 0===s&&(s="kilometers");var _=o.factors[s];if(!_)throw Error(s+" units is invalid");return i*_}function lengthToRadians(i,s){void 0===s&&(s="kilometers");var _=o.factors[s];if(!_)throw Error(s+" units is invalid");return i/_}function lengthToDegrees(i,o){return radiansToDegrees(lengthToRadians(i,o))}function bearingToAzimuth(i){var o=i%360;return o<0&&(o+=360),o}function radiansToDegrees(i){return 180*(i%(2*Math.PI))/Math.PI}function degreesToRadians(i){return i%360*Math.PI/180}function convertLength(i,o,s){if(void 0===o&&(o="kilometers"),void 0===s&&(s="kilometers"),!(i>=0))throw Error("length must be a positive number");return radiansToLength(lengthToRadians(i,o),s)}function convertArea(i,s,_){if(void 0===s&&(s="meters"),void 0===_&&(_="kilometers"),!(i>=0))throw Error("area must be a positive number");var F=o.areaFactors[s];if(!F)throw Error("invalid original units");var N=o.areaFactors[_];if(!N)throw Error("invalid final units");return i/F*N}function isNumber(i){return!isNaN(i)&&null!==i&&!Array.isArray(i)&&!/^\s*$/.test(i)}function isObject(i){return!!i&&i.constructor===Object}function validateBBox(i){if(!i)throw Error("bbox is required");if(!Array.isArray(i))throw Error("bbox must be an Array");if(4!==i.length&&6!==i.length)throw Error("bbox must be an Array of 4 or 6 numbers");i.forEach(function(i){if(!isNumber(i))throw Error("bbox must only contain numbers")})}function validateId(i){if(!i)throw Error("id is required");if(-1===["string","number"].indexOf(typeof i))throw Error("id must be a number or a string")}function radians2degrees(){throw Error("method has been renamed to `radiansToDegrees`")}function degrees2radians(){throw Error("method has been renamed to `degreesToRadians`")}function distanceToDegrees(){throw Error("method has been renamed to `lengthToDegrees`")}function distanceToRadians(){throw Error("method has been renamed to `lengthToRadians`")}function radiansToDistance(){throw Error("method has been renamed to `radiansToLength`")}function bearingToAngle(){throw Error("method has been renamed to `bearingToAzimuth`")}function convertDistance(){throw Error("method has been renamed to `convertLength`")}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:o.earthRadius/1.0936},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1/1.0936},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=feature,o.geometry=geometry,o.point=point,o.points=points,o.polygon=polygon,o.polygons=polygons,o.lineString=lineString,o.lineStrings=lineStrings,o.featureCollection=featureCollection,o.multiLineString=multiLineString,o.multiPoint=multiPoint,o.multiPolygon=multiPolygon,o.geometryCollection=geometryCollection,o.round=round,o.radiansToLength=radiansToLength,o.lengthToRadians=lengthToRadians,o.lengthToDegrees=lengthToDegrees,o.bearingToAzimuth=bearingToAzimuth,o.radiansToDegrees=radiansToDegrees,o.degreesToRadians=degreesToRadians,o.convertLength=convertLength,o.convertArea=convertArea,o.isNumber=isNumber,o.isObject=isObject,o.validateBBox=validateBBox,o.validateId=validateId,o.radians2degrees=radians2degrees,o.degrees2radians=degrees2radians,o.distanceToDegrees=distanceToDegrees,o.distanceToRadians=distanceToRadians,o.radiansToDistance=radiansToDistance,o.bearingToAngle=bearingToAngle,o.convertDistance=convertDistance},88553:function(i,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var _=s(64182);function coordEach(i,o,s){if(null!==i)for(var _,F,N,j,Z,X,$,ee,et=0,er=0,en=i.type,ei="FeatureCollection"===en,eo="Feature"===en,es=ei?i.features.length:1,el=0;el<es;el++){Z=(ee=!!($=ei?i.features[el].geometry:eo?i.geometry:i)&&"GeometryCollection"===$.type)?$.geometries.length:1;for(var ec=0;ec<Z;ec++){var eu=0,ef=0;if(null!==(j=ee?$.geometries[ec]:$)){X=j.coordinates;var ed=j.type;switch(et=s&&("Polygon"===ed||"MultiPolygon"===ed)?1:0,ed){case null:break;case"Point":if(!1===o(X,er,el,eu,ef))return!1;er++,eu++;break;case"LineString":case"MultiPoint":for(_=0;_<X.length;_++){if(!1===o(X[_],er,el,eu,ef))return!1;er++,"MultiPoint"===ed&&eu++}"LineString"===ed&&eu++;break;case"Polygon":case"MultiLineString":for(_=0;_<X.length;_++){for(F=0;F<X[_].length-et;F++){if(!1===o(X[_][F],er,el,eu,ef))return!1;er++}"MultiLineString"===ed&&eu++,"Polygon"===ed&&ef++}"Polygon"===ed&&eu++;break;case"MultiPolygon":for(_=0;_<X.length;_++){for(F=0,ef=0;F<X[_].length;F++){for(N=0;N<X[_][F].length-et;N++){if(!1===o(X[_][F][N],er,el,eu,ef))return!1;er++}ef++}eu++}break;case"GeometryCollection":for(_=0;_<j.geometries.length;_++)if(!1===coordEach(j.geometries[_],o,s))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function coordReduce(i,o,s,_){var F=s;return coordEach(i,function(i,_,N,j,Z){F=0===_&&void 0===s?i:o(F,i,_,N,j,Z)},_),F}function propEach(i,o){var s;switch(i.type){case"FeatureCollection":for(s=0;s<i.features.length&&!1!==o(i.features[s].properties,s);s++);break;case"Feature":o(i.properties,0)}}function propReduce(i,o,s){var _=s;return propEach(i,function(i,F){_=0===F&&void 0===s?i:o(_,i,F)}),_}function featureEach(i,o){if("Feature"===i.type)o(i,0);else if("FeatureCollection"===i.type)for(var s=0;s<i.features.length&&!1!==o(i.features[s],s);s++);}function featureReduce(i,o,s){var _=s;return featureEach(i,function(i,F){_=0===F&&void 0===s?i:o(_,i,F)}),_}function coordAll(i){var o=[];return coordEach(i,function(i){o.push(i)}),o}function geomEach(i,o){var s,_,F,N,j,Z,X,$,ee,et,er=0,en="FeatureCollection"===i.type,ei="Feature"===i.type,eo=en?i.features.length:1;for(s=0;s<eo;s++){for(F=0,Z=en?i.features[s].geometry:ei?i.geometry:i,$=en?i.features[s].properties:ei?i.properties:{},ee=en?i.features[s].bbox:ei?i.bbox:void 0,et=en?i.features[s].id:ei?i.id:void 0,j=(X=!!Z&&"GeometryCollection"===Z.type)?Z.geometries.length:1;F<j;F++){if(null===(N=X?Z.geometries[F]:Z)){if(!1===o(null,er,$,ee,et))return!1;continue}switch(N.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===o(N,er,$,ee,et))return!1;break;case"GeometryCollection":for(_=0;_<N.geometries.length;_++)if(!1===o(N.geometries[_],er,$,ee,et))return!1;break;default:throw Error("Unknown Geometry Type")}}er++}}function geomReduce(i,o,s){var _=s;return geomEach(i,function(i,F,N,j,Z){_=0===F&&void 0===s?i:o(_,i,F,N,j,Z)}),_}function flattenEach(i,o){geomEach(i,function(i,s,F,N,j){var Z,X=null===i?null:i.type;switch(X){case null:case"Point":case"LineString":case"Polygon":if(!1===o(_.feature(i,F,{bbox:N,id:j}),s,0))return!1;return}switch(X){case"MultiPoint":Z="Point";break;case"MultiLineString":Z="LineString";break;case"MultiPolygon":Z="Polygon"}for(var $=0;$<i.coordinates.length;$++){var ee={type:Z,coordinates:i.coordinates[$]};if(!1===o(_.feature(ee,F),s,$))return!1}})}function flattenReduce(i,o,s){var _=s;return flattenEach(i,function(i,F,N){_=0===F&&0===N&&void 0===s?i:o(_,i,F,N)}),_}function segmentEach(i,o){flattenEach(i,function(i,s,F){var N,j=0;if(i.geometry){var Z=i.geometry.type;if("Point"!==Z&&"MultiPoint"!==Z){var X=0,$=0,ee=0;if(!1===coordEach(i,function(Z,et,er,en,ei){if(void 0===N||s>X||en>$||ei>ee){N=Z,X=s,$=en,ee=ei,j=0;return}if(!1===o(_.lineString([N,Z],i.properties),s,F,ei,j))return!1;j++,N=Z}))return!1}}})}function segmentReduce(i,o,s){var _=s,F=!1;return segmentEach(i,function(i,N,j,Z,X){_=!1===F&&void 0===s?i:o(_,i,N,j,Z,X),F=!0}),_}function lineEach(i,o){if(!i)throw Error("geojson is required");flattenEach(i,function(i,s,F){if(null!==i.geometry){var N=i.geometry.type,j=i.geometry.coordinates;switch(N){case"LineString":if(!1===o(i,s,F,0,0))return!1;break;case"Polygon":for(var Z=0;Z<j.length;Z++)if(!1===o(_.lineString(j[Z],i.properties),s,F,Z))return!1}}})}function lineReduce(i,o,s){var _=s;return lineEach(i,function(i,F,N,j){_=0===F&&void 0===s?i:o(_,i,F,N,j)}),_}function findSegment(i,o){if(o=o||{},!_.isObject(o))throw Error("options is invalid");var s,F=o.featureIndex||0,N=o.multiFeatureIndex||0,j=o.geometryIndex||0,Z=o.segmentIndex||0,X=o.properties;switch(i.type){case"FeatureCollection":F<0&&(F=i.features.length+F),X=X||i.features[F].properties,s=i.features[F].geometry;break;case"Feature":X=X||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var $=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return Z<0&&(Z=$.length+Z-1),_.lineString([$[Z],$[Z+1]],X,o);case"Polygon":return j<0&&(j=$.length+j),Z<0&&(Z=$[j].length+Z-1),_.lineString([$[j][Z],$[j][Z+1]],X,o);case"MultiLineString":return N<0&&(N=$.length+N),Z<0&&(Z=$[N].length+Z-1),_.lineString([$[N][Z],$[N][Z+1]],X,o);case"MultiPolygon":return N<0&&(N=$.length+N),j<0&&(j=$[N].length+j),Z<0&&(Z=$[N][j].length-Z-1),_.lineString([$[N][j][Z],$[N][j][Z+1]],X,o)}throw Error("geojson is invalid")}function findPoint(i,o){if(o=o||{},!_.isObject(o))throw Error("options is invalid");var s,F=o.featureIndex||0,N=o.multiFeatureIndex||0,j=o.geometryIndex||0,Z=o.coordIndex||0,X=o.properties;switch(i.type){case"FeatureCollection":F<0&&(F=i.features.length+F),X=X||i.features[F].properties,s=i.features[F].geometry;break;case"Feature":X=X||i.properties,s=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=i;break;default:throw Error("geojson is invalid")}if(null===s)return null;var $=s.coordinates;switch(s.type){case"Point":return _.point($,X,o);case"MultiPoint":return N<0&&(N=$.length+N),_.point($[N],X,o);case"LineString":return Z<0&&(Z=$.length+Z),_.point($[Z],X,o);case"Polygon":return j<0&&(j=$.length+j),Z<0&&(Z=$[j].length+Z),_.point($[j][Z],X,o);case"MultiLineString":return N<0&&(N=$.length+N),Z<0&&(Z=$[N].length+Z),_.point($[N][Z],X,o);case"MultiPolygon":return N<0&&(N=$.length+N),j<0&&(j=$[N].length+j),Z<0&&(Z=$[N][j].length-Z),_.point($[N][j][Z],X,o)}throw Error("geojson is invalid")}o.coordEach=coordEach,o.coordReduce=coordReduce,o.propEach=propEach,o.propReduce=propReduce,o.featureEach=featureEach,o.featureReduce=featureReduce,o.coordAll=coordAll,o.geomEach=geomEach,o.geomReduce=geomReduce,o.flattenEach=flattenEach,o.flattenReduce=flattenReduce,o.segmentEach=segmentEach,o.segmentReduce=segmentReduce,o.lineEach=lineEach,o.lineReduce=lineReduce,o.findSegment=findSegment,o.findPoint=findPoint},65185:function(i){i.exports=absolutize;function absolutize(i){var o=0,s=0,_=0,F=0;return i.map(function(i){var N=(i=i.slice())[0],j=N.toUpperCase();if(N!=j)switch(i[0]=j,N){case"a":i[6]+=_,i[7]+=F;break;case"v":i[1]+=F;break;case"h":i[1]+=_;break;default:for(var Z=1;Z<i.length;)i[Z++]+=_,i[Z++]+=F}switch(j){case"Z":_=o,F=s;break;case"H":_=i[1];break;case"V":F=i[1];break;case"M":_=o=i[1],F=s=i[2];break;default:_=i[i.length-2],F=i[i.length-1]}return i})}},21527:function(i){"use strict";function normalize(i,o){if(!i||null==i.length)throw Error("Argument should be an array");for(var s=Array(2*(o=null==o?1:Math.floor(o))),_=0;_<o;_++){for(var F=-1/0,N=1/0,j=_,Z=i.length;j<Z;j+=o)i[j]>F&&(F=i[j]),i[j]<N&&(N=i[j]);s[_]=N,s[o+_]=F}return s}i.exports=normalize},6851:function(i){"use strict";i.exports=function(i,o,s){if("function"==typeof Array.prototype.findIndex)return i.findIndex(o,s);if("function"!=typeof o)throw TypeError("predicate must be a function");var _=Object(i),F=_.length;if(0===F)return -1;for(var N=0;N<F;N++)if(o.call(s,_[N],N,_))return N;return -1}},54:function(i,o,s){"use strict";var _=s(21527);function normalize(i,o,s){if(!i||null==i.length)throw Error("Argument should be an array");null==o&&(o=1),null==s&&(s=_(i,o));for(var F=0;F<o;F++){var N=s[o+F],j=s[F],Z=F,X=i.length;if(N===1/0&&j===-1/0)for(Z=F;Z<X;Z+=o)i[Z]=i[Z]===N?1:i[Z]===j?0:.5;else if(N===1/0)for(Z=F;Z<X;Z+=o)i[Z]=i[Z]===N?1:0;else if(j===-1/0)for(Z=F;Z<X;Z+=o)i[Z]=i[Z]===j?0:1;else{var $=N-j;for(Z=F;Z<X;Z+=o)isNaN(i[Z])||(i[Z]=0===$?.5:(i[Z]-j)/$)}}return i}i.exports=normalize},57471:function(i){i.exports=function(i,o){var s="number"==typeof i,_="number"==typeof o;s&&!_?(o=i,i=0):s||_||(i=0,o=0);var F=(o|=0)-(i|=0);if(F<0)throw Error("array length must be positive");for(var N=Array(F),j=0,Z=i;j<F;j++,Z++)N[j]=Z;return N}},32791:function(i,o,s){"use strict";var _,F,N=s(90386);function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}function _classCallCheck(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")}var j=s(79616).codes,Z=j.ERR_AMBIGUOUS_ARGUMENT,X=j.ERR_INVALID_ARG_TYPE,$=j.ERR_INVALID_ARG_VALUE,ee=j.ERR_INVALID_RETURN_VALUE,et=j.ERR_MISSING_ARGS,er=s(73894),en=s(43827).inspect,ei=s(43827).types,eo=ei.isPromise,es=ei.isRegExp,el=Object.assign?Object.assign:s(73523).assign,ec=Object.is?Object.is:s(64003);function lazyLoadComparison(){var i=s(74061);_=i.isDeepEqual,F=i.isDeepStrictEqual}var eu=!1,ef=i.exports=ok,ed={};function innerFail(i){if(i.message instanceof Error)throw i.message;throw new er(i)}function fail(i,o,s,_,F){var j,Z=arguments.length;if(0===Z?j="Failed":1===Z?(s=i,i=void 0):(!1===eu&&(eu=!0,(N.emitWarning?N.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===Z&&(_="!=")),s instanceof Error)throw s;var X={actual:i,expected:o,operator:void 0===_?"fail":_,stackStartFn:F||fail};void 0!==s&&(X.message=s);var $=new er(X);throw j&&($.message=j,$.generatedMessage=!0),$}function innerOk(i,o,s,_){if(!s){var F=!1;if(0===o)F=!0,_="No value argument passed to `assert.ok()`";else if(_ instanceof Error)throw _;var N=new er({actual:s,expected:!0,message:_,operator:"==",stackStartFn:i});throw N.generatedMessage=F,N}}function ok(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];innerOk.apply(void 0,[ok,o.length].concat(o))}function notDeepStrictEqual(i,o,s){if(arguments.length<2)throw new et("actual","expected");void 0===_&&lazyLoadComparison(),F(i,o)&&innerFail({actual:i,expected:o,message:s,operator:"notDeepStrictEqual",stackStartFn:notDeepStrictEqual})}ef.fail=fail,ef.AssertionError=er,ef.ok=ok,ef.equal=function equal(i,o,s){if(arguments.length<2)throw new et("actual","expected");i!=o&&innerFail({actual:i,expected:o,message:s,operator:"==",stackStartFn:equal})},ef.notEqual=function notEqual(i,o,s){if(arguments.length<2)throw new et("actual","expected");i==o&&innerFail({actual:i,expected:o,message:s,operator:"!=",stackStartFn:notEqual})},ef.deepEqual=function deepEqual(i,o,s){if(arguments.length<2)throw new et("actual","expected");void 0===_&&lazyLoadComparison(),_(i,o)||innerFail({actual:i,expected:o,message:s,operator:"deepEqual",stackStartFn:deepEqual})},ef.notDeepEqual=function notDeepEqual(i,o,s){if(arguments.length<2)throw new et("actual","expected");void 0===_&&lazyLoadComparison(),_(i,o)&&innerFail({actual:i,expected:o,message:s,operator:"notDeepEqual",stackStartFn:notDeepEqual})},ef.deepStrictEqual=function deepStrictEqual(i,o,s){if(arguments.length<2)throw new et("actual","expected");void 0===_&&lazyLoadComparison(),F(i,o)||innerFail({actual:i,expected:o,message:s,operator:"deepStrictEqual",stackStartFn:deepStrictEqual})},ef.notDeepStrictEqual=notDeepStrictEqual,ef.strictEqual=function strictEqual(i,o,s){if(arguments.length<2)throw new et("actual","expected");ec(i,o)||innerFail({actual:i,expected:o,message:s,operator:"strictEqual",stackStartFn:strictEqual})},ef.notStrictEqual=function notStrictEqual(i,o,s){if(arguments.length<2)throw new et("actual","expected");ec(i,o)&&innerFail({actual:i,expected:o,message:s,operator:"notStrictEqual",stackStartFn:notStrictEqual})};var Comparison=function Comparison(i,o,s){var _=this;_classCallCheck(this,Comparison),o.forEach(function(o){o in i&&(void 0!==s&&"string"==typeof s[o]&&es(i[o])&&i[o].test(s[o])?_[o]=s[o]:_[o]=i[o])})};function compareExceptionKey(i,o,s,_,N,j){if(!(s in i)||!F(i[s],o[s])){if(!_){var Z=new er({actual:new Comparison(i,N),expected:new Comparison(o,N,i),operator:"deepStrictEqual",stackStartFn:j});throw Z.actual=i,Z.expected=o,Z.operator=j.name,Z}innerFail({actual:i,expected:o,message:_,operator:j.name,stackStartFn:j})}}function expectedException(i,o,s,F){if("function"!=typeof o){if(es(o))return o.test(i);if(2==arguments.length)throw new X("expected",["Function","RegExp"],o);if("object"!==_typeof(i)||null===i){var N=new er({actual:i,expected:o,message:s,operator:"deepStrictEqual",stackStartFn:F});throw N.operator=F.name,N}var j=Object.keys(o);if(o instanceof Error)j.push("name","message");else if(0===j.length)throw new $("error",o,"may not be an empty object");return void 0===_&&lazyLoadComparison(),j.forEach(function(_){"string"==typeof i[_]&&es(o[_])&&o[_].test(i[_])||compareExceptionKey(i,o,_,s,j,F)}),!0}return void 0!==o.prototype&&i instanceof o||!Error.isPrototypeOf(o)&&!0===o.call({},i)}function getActual(i){if("function"!=typeof i)throw new X("fn","Function",i);try{i()}catch(i){return i}return ed}function checkIsPromise(i){return eo(i)||null!==i&&"object"===_typeof(i)&&"function"==typeof i.then&&"function"==typeof i.catch}function waitForActual(i){return Promise.resolve().then(function(){var o;if("function"==typeof i){if(!checkIsPromise(o=i()))throw new ee("instance of Promise","promiseFn",o)}else if(checkIsPromise(i))o=i;else throw new X("promiseFn",["Function","Promise"],i);return Promise.resolve().then(function(){return o}).then(function(){return ed}).catch(function(i){return i})})}function expectsError(i,o,s,_){if("string"==typeof s){if(4==arguments.length)throw new X("error",["Object","Error","Function","RegExp"],s);if("object"===_typeof(o)&&null!==o){if(o.message===s)throw new Z("error/message",'The error message "'.concat(o.message,'" is identical to the message.'))}else if(o===s)throw new Z("error/message",'The error "'.concat(o,'" is identical to the message.'));_=s,s=void 0}else if(null!=s&&"object"!==_typeof(s)&&"function"!=typeof s)throw new X("error",["Object","Error","Function","RegExp"],s);if(o===ed){var F="";s&&s.name&&(F+=" (".concat(s.name,")")),F+=_?": ".concat(_):".";var N="rejects"===i.name?"rejection":"exception";innerFail({actual:void 0,expected:s,operator:i.name,message:"Missing expected ".concat(N).concat(F),stackStartFn:i})}if(s&&!expectedException(o,s,_,i))throw o}function expectsNoError(i,o,s,_){if(o!==ed){if("string"==typeof s&&(_=s,s=void 0),!s||expectedException(o,s)){var F=_?": ".concat(_):".",N="doesNotReject"===i.name?"rejection":"exception";innerFail({actual:o,expected:s,operator:i.name,message:"Got unwanted ".concat(N).concat(F,"\n")+'Actual message: "'.concat(o&&o.message,'"'),stackStartFn:i})}throw o}}function strict(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];innerOk.apply(void 0,[strict,o.length].concat(o))}ef.throws=function throws(i){for(var o=arguments.length,s=Array(o>1?o-1:0),_=1;_<o;_++)s[_-1]=arguments[_];expectsError.apply(void 0,[throws,getActual(i)].concat(s))},ef.rejects=function rejects(i){for(var o=arguments.length,s=Array(o>1?o-1:0),_=1;_<o;_++)s[_-1]=arguments[_];return waitForActual(i).then(function(i){return expectsError.apply(void 0,[rejects,i].concat(s))})},ef.doesNotThrow=function doesNotThrow(i){for(var o=arguments.length,s=Array(o>1?o-1:0),_=1;_<o;_++)s[_-1]=arguments[_];expectsNoError.apply(void 0,[doesNotThrow,getActual(i)].concat(s))},ef.doesNotReject=function doesNotReject(i){for(var o=arguments.length,s=Array(o>1?o-1:0),_=1;_<o;_++)s[_-1]=arguments[_];return waitForActual(i).then(function(i){return expectsNoError.apply(void 0,[doesNotReject,i].concat(s))})},ef.ifError=function ifError(i){if(null!=i){var o="ifError got unwanted exception: ";"object"===_typeof(i)&&"string"==typeof i.message?0===i.message.length&&i.constructor?o+=i.constructor.name:o+=i.message:o+=en(i);var s=new er({actual:i,expected:null,operator:"ifError",message:o,stackStartFn:ifError}),_=i.stack;if("string"==typeof _){var F=_.split("\n");F.shift();for(var N=s.stack.split("\n"),j=0;j<F.length;j++){var Z=N.indexOf(F[j]);if(-1!==Z){N=N.slice(0,Z);break}}s.stack="".concat(N.join("\n"),"\n").concat(F.join("\n"))}throw s}},ef.strict=el(strict,ef,{equal:ef.strictEqual,deepEqual:ef.deepStrictEqual,notEqual:ef.notStrictEqual,notDeepEqual:ef.notDeepStrictEqual}),ef.strict.strict=ef.strict},73894:function(i,o,s){"use strict";var _=s(90386);function _objectSpread(i){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{},_=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(_=_.concat(Object.getOwnPropertySymbols(s).filter(function(i){return Object.getOwnPropertyDescriptor(s,i).enumerable}))),_.forEach(function(o){_defineProperty(i,o,s[o])})}return i}function _defineProperty(i,o,s){return o in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,i}function _classCallCheck(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var s=0;s<o.length;s++){var _=o[s];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}function _createClass(i,o,s){return o&&_defineProperties(i.prototype,o),s&&_defineProperties(i,s),i}function _possibleConstructorReturn(i,o){return o&&("object"===_typeof(o)||"function"==typeof o)?o:_assertThisInitialized(i)}function _assertThisInitialized(i){if(void 0===i)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _inherits(i,o){if("function"!=typeof o&&null!==o)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}function _wrapNativeSuper(i){var o="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(i){if(null===i||!_isNativeFunction(i))return i;if("function"!=typeof i)throw TypeError("Super expression must either be null or a function");if(void 0!==o){if(o.has(i))return o.get(i);o.set(i,Wrapper)}function Wrapper(){return _construct(i,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(i.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,i)})(i)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}function _construct(i,o,s){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(i,o,s){var _=[null];_.push.apply(_,o);var F=new(Function.bind.apply(i,_));return s&&_setPrototypeOf(F,s.prototype),F}).apply(null,arguments)}function _isNativeFunction(i){return -1!==Function.toString.call(i).indexOf("[native code]")}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function(i,o){return i.__proto__=o,i})(i,o)}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}var F=s(43827).inspect,N=s(79616).codes.ERR_INVALID_ARG_TYPE;function endsWith(i,o,s){return(void 0===s||s>i.length)&&(s=i.length),i.substring(s-o.length,s)===o}function repeat(i,o){if(o=Math.floor(o),0==i.length||0==o)return"";var s=i.length*o;for(o=Math.floor(Math.log(o)/Math.log(2));o;)i+=i,o--;return i+i.substring(0,s-i.length)}var j="",Z="",X="",$="",ee={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function copyError(i){var o=Object.keys(i),s=Object.create(Object.getPrototypeOf(i));return o.forEach(function(o){s[o]=i[o]}),Object.defineProperty(s,"message",{value:i.message}),s}function inspectValue(i){return F(i,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function createErrDiff(i,o,s){var F="",N="",et=0,er="",en=!1,ei=inspectValue(i),eo=ei.split("\n"),es=inspectValue(o).split("\n"),el=0,ec="";if("strictEqual"===s&&"object"===_typeof(i)&&"object"===_typeof(o)&&null!==i&&null!==o&&(s="strictEqualObject"),1===eo.length&&1===es.length&&eo[0]!==es[0]){var eu=eo[0].length+es[0].length;if(eu<=10){if(("object"!==_typeof(i)||null===i)&&("object"!==_typeof(o)||null===o)&&(0!==i||0!==o))return"".concat(ee[s],"\n\n")+"".concat(eo[0]," !== ").concat(es[0],"\n")}else if("strictEqualObject"!==s&&eu<(_.stderr&&_.stderr.isTTY?_.stderr.columns:80)){for(;eo[0][el]===es[0][el];)el++;el>2&&(ec="\n  ".concat(repeat(" ",el),"^"),el=0)}}for(var ef=eo[eo.length-1],ed=es[es.length-1];ef===ed&&(el++<2?er="\n  ".concat(ef).concat(er):F=ef,eo.pop(),es.pop(),0!==eo.length&&0!==es.length);)ef=eo[eo.length-1],ed=es[es.length-1];var eh=Math.max(eo.length,es.length);if(0===eh){var ep=ei.split("\n");if(ep.length>30)for(ep[26]="".concat(j,"...").concat($);ep.length>27;)ep.pop();return"".concat(ee.notIdentical,"\n\n").concat(ep.join("\n"),"\n")}el>3&&(er="\n".concat(j,"...").concat($).concat(er),en=!0),""!==F&&(er="\n  ".concat(F).concat(er),F="");var eg=0,em=ee[s]+"\n".concat(Z,"+ actual").concat($," ").concat(X,"- expected").concat($),ey=" ".concat(j,"...").concat($," Lines skipped");for(el=0;el<eh;el++){var ev=el-et;if(eo.length<el+1)ev>1&&el>2&&(ev>4?(N+="\n".concat(j,"...").concat($),en=!0):ev>3&&(N+="\n  ".concat(es[el-2]),eg++),N+="\n  ".concat(es[el-1]),eg++),et=el,F+="\n".concat(X,"-").concat($," ").concat(es[el]),eg++;else if(es.length<el+1)ev>1&&el>2&&(ev>4?(N+="\n".concat(j,"...").concat($),en=!0):ev>3&&(N+="\n  ".concat(eo[el-2]),eg++),N+="\n  ".concat(eo[el-1]),eg++),et=el,N+="\n".concat(Z,"+").concat($," ").concat(eo[el]),eg++;else{var ex=es[el],e_=eo[el],ew=e_!==ex&&(!endsWith(e_,",")||e_.slice(0,-1)!==ex);ew&&endsWith(ex,",")&&ex.slice(0,-1)===e_&&(ew=!1,e_+=","),ew?(ev>1&&el>2&&(ev>4?(N+="\n".concat(j,"...").concat($),en=!0):ev>3&&(N+="\n  ".concat(eo[el-2]),eg++),N+="\n  ".concat(eo[el-1]),eg++),et=el,N+="\n".concat(Z,"+").concat($," ").concat(e_),F+="\n".concat(X,"-").concat($," ").concat(ex),eg+=2):(N+=F,F="",(1===ev||0===el)&&(N+="\n  ".concat(e_),eg++))}if(eg>20&&el<eh-2)return"".concat(em).concat(ey,"\n").concat(N,"\n").concat(j,"...").concat($).concat(F,"\n")+"".concat(j,"...").concat($)}return"".concat(em).concat(en?ey:"","\n").concat(N).concat(F).concat(er).concat(ec)}var et=function(i){function AssertionError(i){if(_classCallCheck(this,AssertionError),"object"!==_typeof(i)||null===i)throw new N("options","Object",i);var o,s=i.message,F=i.operator,et=i.stackStartFn,er=i.actual,en=i.expected,ei=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=s)o=_possibleConstructorReturn(this,_getPrototypeOf(AssertionError).call(this,String(s)));else if(_.stderr&&_.stderr.isTTY&&(_.stderr&&_.stderr.getColorDepth&&1!==_.stderr.getColorDepth()?(j="\x1b[34m",Z="\x1b[32m",$="\x1b[39m",X="\x1b[31m"):(j="",Z="",$="",X="")),"object"===_typeof(er)&&null!==er&&"object"===_typeof(en)&&null!==en&&"stack"in er&&er instanceof Error&&"stack"in en&&en instanceof Error&&(er=copyError(er),en=copyError(en)),"deepStrictEqual"===F||"strictEqual"===F)o=_possibleConstructorReturn(this,_getPrototypeOf(AssertionError).call(this,createErrDiff(er,en,F)));else if("notDeepStrictEqual"===F||"notStrictEqual"===F){var eo=ee[F],es=inspectValue(er).split("\n");if("notStrictEqual"===F&&"object"===_typeof(er)&&null!==er&&(eo=ee.notStrictEqualObject),es.length>30)for(es[26]="".concat(j,"...").concat($);es.length>27;)es.pop();o=1===es.length?_possibleConstructorReturn(this,_getPrototypeOf(AssertionError).call(this,"".concat(eo," ").concat(es[0]))):_possibleConstructorReturn(this,_getPrototypeOf(AssertionError).call(this,"".concat(eo,"\n\n").concat(es.join("\n"),"\n")))}else{var el=inspectValue(er),ec="",eu=ee[F];"notDeepEqual"===F||"notEqual"===F?(el="".concat(ee[F],"\n\n").concat(el)).length>1024&&(el="".concat(el.slice(0,1021),"...")):(ec="".concat(inspectValue(en)),el.length>512&&(el="".concat(el.slice(0,509),"...")),ec.length>512&&(ec="".concat(ec.slice(0,509),"...")),"deepEqual"===F||"equal"===F?el="".concat(eu,"\n\n").concat(el,"\n\nshould equal\n\n"):ec=" ".concat(F," ").concat(ec)),o=_possibleConstructorReturn(this,_getPrototypeOf(AssertionError).call(this,"".concat(el).concat(ec)))}return Error.stackTraceLimit=ei,o.generatedMessage=!s,Object.defineProperty(_assertThisInitialized(o),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),o.code="ERR_ASSERTION",o.actual=er,o.expected=en,o.operator=F,Error.captureStackTrace&&Error.captureStackTrace(_assertThisInitialized(o),et),o.stack,o.name="AssertionError",_possibleConstructorReturn(o)}return _inherits(AssertionError,i),_createClass(AssertionError,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:F.custom,value:function(i,o){return F(this,_objectSpread({},o,{customInspect:!1,depth:0}))}}]),AssertionError}(_wrapNativeSuper(Error));i.exports=et},79616:function(i,o,s){"use strict";function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}function _classCallCheck(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(i,o){return o&&("object"===_typeof(o)||"function"==typeof o)?o:_assertThisInitialized(i)}function _assertThisInitialized(i){if(void 0===i)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _inherits(i,o){if("function"!=typeof o&&null!==o)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&_setPrototypeOf(i,o)}function _setPrototypeOf(i,o){return(_setPrototypeOf=Object.setPrototypeOf||function(i,o){return i.__proto__=o,i})(i,o)}var _,F,N={};function createErrorType(i,o,s){function getMessage(i,s,_){return"string"==typeof o?o:o(i,s,_)}s||(s=Error);var _=function(o){function NodeError(o,s,_){var F;return _classCallCheck(this,NodeError),(F=_possibleConstructorReturn(this,_getPrototypeOf(NodeError).call(this,getMessage(o,s,_)))).code=i,F}return _inherits(NodeError,o),NodeError}(s);N[i]=_}function oneOf(i,o){if(!Array.isArray(i))return"of ".concat(o," ").concat(String(i));var s=i.length;return(i=i.map(function(i){return String(i)}),s>2)?"one of ".concat(o," ").concat(i.slice(0,s-1).join(", "),", or ")+i[s-1]:2===s?"one of ".concat(o," ").concat(i[0]," or ").concat(i[1]):"of ".concat(o," ").concat(i[0])}function startsWith(i,o,s){return i.substr(!s||s<0?0:+s,o.length)===o}function endsWith(i,o,s){return(void 0===s||s>i.length)&&(s=i.length),i.substring(s-o.length,s)===o}function includes(i,o,s){return"number"!=typeof s&&(s=0),!(s+o.length>i.length)&&-1!==i.indexOf(o,s)}createErrorType("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(i,o,F){if(void 0===_&&(_=s(32791)),_("string"==typeof i,"'name' must be a string"),"string"==typeof o&&startsWith(o,"not ")?(N="must not be",o=o.replace(/^not /,"")):N="must be",endsWith(i," argument"))j="The ".concat(i," ").concat(N," ").concat(oneOf(o,"type"));else{var N,j,Z=includes(i,".")?"property":"argument";j='The "'.concat(i,'" ').concat(Z," ").concat(N," ").concat(oneOf(o,"type"))}return j+". Received type ".concat(_typeof(F))},TypeError),createErrorType("ERR_INVALID_ARG_VALUE",function(i,o){var _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===F&&(F=s(43827));var N=F.inspect(o);return N.length>128&&(N="".concat(N.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(_,". Received ").concat(N)},TypeError,RangeError),createErrorType("ERR_INVALID_RETURN_VALUE",function(i,o,s){var _;return _=s&&s.constructor&&s.constructor.name?"instance of ".concat(s.constructor.name):"type ".concat(_typeof(s)),"Expected ".concat(i,' to be returned from the "').concat(o,'"')+" function but got ".concat(_,".")},TypeError),createErrorType("ERR_MISSING_ARGS",function(){for(var i=arguments.length,o=Array(i),F=0;F<i;F++)o[F]=arguments[F];void 0===_&&(_=s(32791)),_(o.length>0,"At least one arg needs to be specified");var N="The ",j=o.length;switch(o=o.map(function(i){return'"'.concat(i,'"')}),j){case 1:N+="".concat(o[0]," argument");break;case 2:N+="".concat(o[0]," and ").concat(o[1]," arguments");break;default:N+=o.slice(0,j-1).join(", ")+", and ".concat(o[j-1]," arguments")}return"".concat(N," must be specified")},TypeError),i.exports.codes=N},74061:function(i,o,s){"use strict";function _slicedToArray(i,o){return _arrayWithHoles(i)||_iterableToArrayLimit(i,o)||_nonIterableRest()}function _nonIterableRest(){throw TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(i,o){var s=[],_=!0,F=!1,N=void 0;try{for(var j,Z=i[Symbol.iterator]();!(_=(j=Z.next()).done)&&(s.push(j.value),!o||s.length!==o);_=!0);}catch(i){F=!0,N=i}finally{try{_||null==Z.return||Z.return()}finally{if(F)throw N}}return s}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}var _=void 0!==/a/g.flags,arrayFromSet=function(i){var o=[];return i.forEach(function(i){return o.push(i)}),o},arrayFromMap=function(i){var o=[];return i.forEach(function(i,s){return o.push([s,i])}),o},F=Object.is?Object.is:s(64003),N=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},j=Number.isNaN?Number.isNaN:s(15567);function uncurryThis(i){return i.call.bind(i)}var Z=uncurryThis(Object.prototype.hasOwnProperty),X=uncurryThis(Object.prototype.propertyIsEnumerable),$=uncurryThis(Object.prototype.toString),ee=s(43827).types,et=ee.isAnyArrayBuffer,er=ee.isArrayBufferView,en=ee.isDate,ei=ee.isMap,eo=ee.isRegExp,es=ee.isSet,el=ee.isNativeError,ec=ee.isBoxedPrimitive,eu=ee.isNumberObject,ef=ee.isStringObject,ed=ee.isBooleanObject,eh=ee.isBigIntObject,ep=ee.isSymbolObject,eg=ee.isFloat32Array,em=ee.isFloat64Array;function isNonIndex(i){if(0===i.length||i.length>10)return!0;for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(s<48||s>57)return!0}return 10===i.length&&i>=4294967296}function getOwnNonIndexProperties(i){return Object.keys(i).filter(isNonIndex).concat(N(i).filter(Object.prototype.propertyIsEnumerable.bind(i)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function compare(i,o){if(i===o)return 0;for(var s=i.length,_=o.length,F=0,N=Math.min(s,_);F<N;++F)if(i[F]!==o[F]){s=i[F],_=o[F];break}return s<_?-1:_<s?1:0}var ey=void 0;function areSimilarRegExps(i,o){return _?i.source===o.source&&i.flags===o.flags:RegExp.prototype.toString.call(i)===RegExp.prototype.toString.call(o)}function areSimilarFloatArrays(i,o){if(i.byteLength!==o.byteLength)return!1;for(var s=0;s<i.byteLength;s++)if(i[s]!==o[s])return!1;return!0}function areSimilarTypedArrays(i,o){return i.byteLength===o.byteLength&&0===compare(new Uint8Array(i.buffer,i.byteOffset,i.byteLength),new Uint8Array(o.buffer,o.byteOffset,o.byteLength))}function areEqualArrayBuffers(i,o){return i.byteLength===o.byteLength&&0===compare(new Uint8Array(i),new Uint8Array(o))}function isEqualBoxedPrimitive(i,o){return eu(i)?eu(o)&&F(Number.prototype.valueOf.call(i),Number.prototype.valueOf.call(o)):ef(i)?ef(o)&&String.prototype.valueOf.call(i)===String.prototype.valueOf.call(o):ed(i)?ed(o)&&Boolean.prototype.valueOf.call(i)===Boolean.prototype.valueOf.call(o):eh(i)?eh(o)&&BigInt.prototype.valueOf.call(i)===BigInt.prototype.valueOf.call(o):ep(o)&&Symbol.prototype.valueOf.call(i)===Symbol.prototype.valueOf.call(o)}function innerDeepEqual(i,o,s,_){if(i===o)return 0!==i||!s||F(i,o);if(s){if("object"!==_typeof(i))return"number"==typeof i&&j(i)&&j(o);if("object"!==_typeof(o)||null===i||null===o||Object.getPrototypeOf(i)!==Object.getPrototypeOf(o))return!1}else{if(null===i||"object"!==_typeof(i))return(null===o||"object"!==_typeof(o))&&i==o;if(null===o||"object"!==_typeof(o))return!1}var N=$(i);if(N!==$(o))return!1;if(Array.isArray(i)){if(i.length!==o.length)return!1;var Z=getOwnNonIndexProperties(i,ey),X=getOwnNonIndexProperties(o,ey);return Z.length===X.length&&keyCheck(i,o,s,_,1,Z)}if("[object Object]"===N&&(!ei(i)&&ei(o)||!es(i)&&es(o)))return!1;if(en(i)){if(!en(o)||Date.prototype.getTime.call(i)!==Date.prototype.getTime.call(o))return!1}else if(eo(i)){if(!eo(o)||!areSimilarRegExps(i,o))return!1}else if(el(i)||i instanceof Error){if(i.message!==o.message||i.name!==o.name)return!1}else if(er(i)){if(!s&&(eg(i)||em(i))){if(!areSimilarFloatArrays(i,o))return!1}else if(!areSimilarTypedArrays(i,o))return!1;var ee=getOwnNonIndexProperties(i,ey),eu=getOwnNonIndexProperties(o,ey);return ee.length===eu.length&&keyCheck(i,o,s,_,0,ee)}else if(es(i))return!!es(o)&&i.size===o.size&&keyCheck(i,o,s,_,2);else if(ei(i))return!!ei(o)&&i.size===o.size&&keyCheck(i,o,s,_,3);else if(et(i)){if(!areEqualArrayBuffers(i,o))return!1}else if(ec(i)&&!isEqualBoxedPrimitive(i,o))return!1;return keyCheck(i,o,s,_,0)}function getEnumerables(i,o){return o.filter(function(o){return X(i,o)})}function keyCheck(i,o,s,_,F,j){if(5==arguments.length){j=Object.keys(i);var $=Object.keys(o);if(j.length!==$.length)return!1}for(var ee=0;ee<j.length;ee++)if(!Z(o,j[ee]))return!1;if(s&&5==arguments.length){var et=N(i);if(0!==et.length){var er=0;for(ee=0;ee<et.length;ee++){var en=et[ee];if(X(i,en)){if(!X(o,en))return!1;j.push(en),er++}else if(X(o,en))return!1}var ei=N(o);if(et.length!==ei.length&&getEnumerables(o,ei).length!==er)return!1}else{var eo=N(o);if(0!==eo.length&&0!==getEnumerables(o,eo).length)return!1}}if(0===j.length&&(0===F||1===F&&0===i.length||0===i.size))return!0;if(void 0===_)_={val1:new Map,val2:new Map,position:0};else{var es=_.val1.get(i);if(void 0!==es){var el=_.val2.get(o);if(void 0!==el)return es===el}_.position++}_.val1.set(i,_.position),_.val2.set(o,_.position);var ec=objEquiv(i,o,s,j,_,F);return _.val1.delete(i),_.val2.delete(o),ec}function setHasEqualElement(i,o,s,_){for(var F=arrayFromSet(i),N=0;N<F.length;N++){var j=F[N];if(innerDeepEqual(o,j,s,_))return i.delete(j),!0}return!1}function findLooseMatchingPrimitives(i){switch(_typeof(i)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":i=+i;case"number":if(j(i))return!1}return!0}function setMightHaveLoosePrim(i,o,s){var _=findLooseMatchingPrimitives(s);return null!=_?_:o.has(_)&&!i.has(_)}function mapMightHaveLoosePrim(i,o,s,_,F){var N=findLooseMatchingPrimitives(s);if(null!=N)return N;var j=o.get(N);return!!((void 0!==j||o.has(N))&&innerDeepEqual(_,j,!1,F))&&!i.has(N)&&innerDeepEqual(_,j,!1,F)}function setEquiv(i,o,s,_){for(var F=null,N=arrayFromSet(i),j=0;j<N.length;j++){var Z=N[j];if("object"===_typeof(Z)&&null!==Z)null===F&&(F=new Set),F.add(Z);else if(!o.has(Z)){if(s||!setMightHaveLoosePrim(i,o,Z))return!1;null===F&&(F=new Set),F.add(Z)}}if(null!==F){for(var X=arrayFromSet(o),$=0;$<X.length;$++){var ee=X[$];if("object"===_typeof(ee)&&null!==ee){if(!setHasEqualElement(F,ee,s,_))return!1}else if(!s&&!i.has(ee)&&!setHasEqualElement(F,ee,s,_))return!1}return 0===F.size}return!0}function mapHasEqualEntry(i,o,s,_,F,N){for(var j=arrayFromSet(i),Z=0;Z<j.length;Z++){var X=j[Z];if(innerDeepEqual(s,X,F,N)&&innerDeepEqual(_,o.get(X),F,N))return i.delete(X),!0}return!1}function mapEquiv(i,o,s,_){for(var F=null,N=arrayFromMap(i),j=0;j<N.length;j++){var Z=_slicedToArray(N[j],2),X=Z[0],$=Z[1];if("object"===_typeof(X)&&null!==X)null===F&&(F=new Set),F.add(X);else{var ee=o.get(X);if(void 0===ee&&!o.has(X)||!innerDeepEqual($,ee,s,_)){if(s||!mapMightHaveLoosePrim(i,o,X,$,_))return!1;null===F&&(F=new Set),F.add(X)}}}if(null!==F){for(var et=arrayFromMap(o),er=0;er<et.length;er++){var en=_slicedToArray(et[er],2),X=en[0],ei=en[1];if("object"===_typeof(X)&&null!==X){if(!mapHasEqualEntry(F,i,X,ei,s,_))return!1}else if(!s&&(!i.has(X)||!innerDeepEqual(i.get(X),ei,!1,_))&&!mapHasEqualEntry(F,i,X,ei,!1,_))return!1}return 0===F.size}return!0}function objEquiv(i,o,s,_,F,N){var j=0;if(2===N){if(!setEquiv(i,o,s,F))return!1}else if(3===N){if(!mapEquiv(i,o,s,F))return!1}else if(1===N)for(;j<i.length;j++)if(Z(i,j)){if(!Z(o,j)||!innerDeepEqual(i[j],o[j],s,F))return!1}else{if(Z(o,j))return!1;for(var X=Object.keys(i);j<X.length;j++){var $=X[j];if(!Z(o,$)||!innerDeepEqual(i[$],o[$],s,F))return!1}if(X.length!==Object.keys(o).length)return!1;return!0}for(j=0;j<_.length;j++){var ee=_[j];if(!innerDeepEqual(i[ee],o[ee],s,F))return!1}return!0}function isDeepEqual(i,o){return innerDeepEqual(i,o,!1)}function isDeepStrictEqual(i,o){return innerDeepEqual(i,o,!0)}i.exports={isDeepEqual:isDeepEqual,isDeepStrictEqual:isDeepStrictEqual}},95341:function(i,o){"use strict";o.byteLength=byteLength,o.toByteArray=toByteArray,o.fromByteArray=fromByteArray;for(var s=[],_=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0,Z=N.length;j<Z;++j)s[j]=N[j],_[N.charCodeAt(j)]=j;function getLens(i){var o=i.length;if(o%4>0)throw Error("Invalid string. Length must be a multiple of 4");var s=i.indexOf("=");-1===s&&(s=o);var _=s===o?0:4-s%4;return[s,_]}function byteLength(i){var o=getLens(i),s=o[0],_=o[1];return(s+_)*3/4-_}function _byteLength(i,o,s){return(o+s)*3/4-s}function toByteArray(i){var o,s,N=getLens(i),j=N[0],Z=N[1],X=new F(_byteLength(i,j,Z)),$=0,ee=Z>0?j-4:j;for(s=0;s<ee;s+=4)o=_[i.charCodeAt(s)]<<18|_[i.charCodeAt(s+1)]<<12|_[i.charCodeAt(s+2)]<<6|_[i.charCodeAt(s+3)],X[$++]=o>>16&255,X[$++]=o>>8&255,X[$++]=255&o;return 2===Z&&(o=_[i.charCodeAt(s)]<<2|_[i.charCodeAt(s+1)]>>4,X[$++]=255&o),1===Z&&(o=_[i.charCodeAt(s)]<<10|_[i.charCodeAt(s+1)]<<4|_[i.charCodeAt(s+2)]>>2,X[$++]=o>>8&255,X[$++]=255&o),X}function tripletToBase64(i){return s[i>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]}function encodeChunk(i,o,s){for(var _=[],F=o;F<s;F+=3)_.push(tripletToBase64((i[F]<<16&16711680)+(i[F+1]<<8&65280)+(255&i[F+2])));return _.join("")}function fromByteArray(i){for(var o,_=i.length,F=_%3,N=[],j=0,Z=_-F;j<Z;j+=16383)N.push(encodeChunk(i,j,j+16383>Z?Z:j+16383));return 1===F?N.push(s[(o=i[_-1])>>2]+s[o<<4&63]+"=="):2===F&&N.push(s[(o=(i[_-2]<<8)+i[_-1])>>10]+s[o>>4&63]+s[o<<2&63]+"="),N.join("")}_["-".charCodeAt(0)]=62,_["_".charCodeAt(0)]=63},91358:function(i){"use strict";function ge(i,o,s,_,F){for(var N=F+1;_<=F;){var j=_+F>>>1,Z=i[j];(void 0!==s?s(Z,o):Z-o)>=0?(N=j,F=j-1):_=j+1}return N}function gt(i,o,s,_,F){for(var N=F+1;_<=F;){var j=_+F>>>1,Z=i[j];(void 0!==s?s(Z,o):Z-o)>0?(N=j,F=j-1):_=j+1}return N}function lt(i,o,s,_,F){for(var N=_-1;_<=F;){var j=_+F>>>1,Z=i[j];(void 0!==s?s(Z,o):Z-o)<0?(N=j,_=j+1):F=j-1}return N}function le(i,o,s,_,F){for(var N=_-1;_<=F;){var j=_+F>>>1,Z=i[j];(void 0!==s?s(Z,o):Z-o)<=0?(N=j,_=j+1):F=j-1}return N}function eq(i,o,s,_,F){for(;_<=F;){var N=_+F>>>1,j=i[N],Z=void 0!==s?s(j,o):j-o;if(0===Z)return N;Z<=0?_=N+1:F=N-1}return -1}function norm(i,o,s,_,F,N){return"function"==typeof s?N(i,o,s,void 0===_?0:0|_,void 0===F?i.length-1:0|F):N(i,o,void 0,void 0===s?0:0|s,void 0===_?i.length-1:0|_)}i.exports={ge:function(i,o,s,_,F){return norm(i,o,s,_,F,ge)},gt:function(i,o,s,_,F){return norm(i,o,s,_,F,gt)},lt:function(i,o,s,_,F){return norm(i,o,s,_,F,lt)},le:function(i,o,s,_,F){return norm(i,o,s,_,F,le)},eq:function(i,o,s,_,F){return norm(i,o,s,_,F,eq)}}},13547:function(i,o){"use strict";function countTrailingZeros(i){var o=32;return(i&=-i)&&o--,65535&i&&(o-=16),16711935&i&&(o-=8),252645135&i&&(o-=4),858993459&i&&(o-=2),1431655765&i&&(o-=1),o}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(i){return(i>0)-(i<0)},o.abs=function(i){var o=i>>31;return(i^o)-o},o.min=function(i,o){return o^(i^o)&-(i<o)},o.max=function(i,o){return i^(i^o)&-(i<o)},o.isPow2=function(i){return!(i&i-1)&&!!i},o.log2=function(i){var o,s;return o=(i>65535)<<4,i>>>=o,s=(i>255)<<3,i>>>=s,o|=s,s=(i>15)<<2,i>>>=s,o|=s,s=(i>3)<<1,i>>>=s,(o|=s)|i>>1},o.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},o.popCount=function(i){return i-=i>>>1&1431655765,((i=(858993459&i)+(i>>>2&858993459))+(i>>>4)&252645135)*16843009>>>24},o.countTrailingZeros=countTrailingZeros,o.nextPow2=function(i){return i+=0===i,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)+1},o.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)-(i>>>1)},o.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,27030>>>(i&=15)&1};var s=Array(256);(function(i){for(var o=0;o<256;++o){var s=o,_=o,F=7;for(s>>>=1;s;s>>>=1)_<<=1,_|=1&s,--F;i[o]=_<<F&255}})(s),o.reverse=function(i){return s[255&i]<<24|s[i>>>8&255]<<16|s[i>>>16&255]<<8|s[i>>>24&255]},o.interleave2=function(i,o){return i&=65535,o&=65535,(i=((i=((i=((i=(i|i<<8)&16711935)|i<<4)&252645135)|i<<2)&858993459)|i<<1)&1431655765)|(o=((o=((o=((o=(o|o<<8)&16711935)|o<<4)&252645135)|o<<2)&858993459)|o<<1)&1431655765)<<1},o.deinterleave2=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1431655765)|i>>>1)&858993459)|i>>>2)&252645135)|i>>>4)&16711935)|i>>>16)&65535)<<16>>16},o.interleave3=function(i,o,s){return i&=1023,o&=1023,s&=1023,s=((s=((s=((s=(s|s<<16)&4278190335)|s<<8)&251719695)|s<<4)&3272356035)|s<<2)&1227133513,(i=((i=((i=((i=(i|i<<16)&4278190335)|i<<8)&251719695)|i<<4)&3272356035)|i<<2)&1227133513|(o=((o=((o=((o=(o|o<<16)&4278190335)|o<<8)&251719695)|o<<4)&3272356035)|o<<2)&1227133513)<<1)|s<<2},o.deinterleave3=function(i,o){return(i=((i=((i=((i=((i=i>>>o&1227133513)|i>>>2)&3272356035)|i>>>4)&251719695)|i>>>8)&4278190335)|i>>>16)&1023)<<22>>22},o.nextCombination=function(i){var o=i|i-1;return o+1|(~o&-~o)-1>>>countTrailingZeros(i)+1}},44781:function(i,o,s){"use strict";var _=s(53435);function calcSDF(i,o){o||(o={});var s,F,N,j,Z,X,$,ee,et,er,en,ei=null==o.cutoff?.25:o.cutoff,eo=null==o.radius?8:o.radius,es=o.channel||0;if(ArrayBuffer.isView(i)||Array.isArray(i)){if(!o.width||!o.height)throw Error("For raw data width and height should be provided by options");s=o.width,F=o.height,j=i,X=o.stride?o.stride:Math.floor(i.length/s/F)}else window.HTMLCanvasElement&&i instanceof window.HTMLCanvasElement?($=(ee=i).getContext("2d"),s=ee.width,F=ee.height,j=(et=$.getImageData(0,0,s,F)).data,X=4):window.CanvasRenderingContext2D&&i instanceof window.CanvasRenderingContext2D?(ee=i.canvas,$=i,s=ee.width,F=ee.height,j=(et=$.getImageData(0,0,s,F)).data,X=4):window.ImageData&&i instanceof window.ImageData&&(et=i,s=i.width,F=i.height,j=et.data,X=4);if(N=Math.max(s,F),window.Uint8ClampedArray&&j instanceof window.Uint8ClampedArray||window.Uint8Array&&j instanceof window.Uint8Array)for(er=0,Z=j,j=Array(s*F),en=Z.length;er<en;er++)j[er]=Z[er*X+es]/255;else if(1!==X)throw Error("Raw data can have only 1 value per pixel");var el=Array(s*F),ec=Array(s*F),eu=Array(N),ef=Array(N),ed=Array(N+1),eh=Array(N);for(er=0,en=s*F;er<en;er++){var ep=j[er];el[er]=1===ep?0:0===ep?1e20:Math.pow(Math.max(0,.5-ep),2),ec[er]=1===ep?1e20:0===ep?0:Math.pow(Math.max(0,ep-.5),2)}edt(el,s,F,eu,ef,eh,ed),edt(ec,s,F,eu,ef,eh,ed);var eg=window.Float32Array?new Float32Array(s*F):Array(s*F);for(er=0,en=s*F;er<en;er++)eg[er]=_(1-((el[er]-ec[er])/eo+ei),0,1);return eg}function edt(i,o,s,_,F,N,j){for(var Z=0;Z<o;Z++){for(var X=0;X<s;X++)_[X]=i[X*o+Z];for(edt1d(_,F,N,j,s),X=0;X<s;X++)i[X*o+Z]=F[X]}for(X=0;X<s;X++){for(Z=0;Z<o;Z++)_[Z]=i[X*o+Z];for(edt1d(_,F,N,j,o),Z=0;Z<o;Z++)i[X*o+Z]=Math.sqrt(F[Z])}}function edt1d(i,o,s,_,F){s[0]=0,_[0]=-1e20,_[1]=1e20;for(var N=1,j=0;N<F;N++){for(var Z=(i[N]+N*N-(i[s[j]]+s[j]*s[j]))/(2*N-2*s[j]);Z<=_[j];)j--,Z=(i[N]+N*N-(i[s[j]]+s[j]*s[j]))/(2*N-2*s[j]);s[++j]=N,_[j]=Z,_[j+1]=1e20}for(N=0,j=0;N<F;N++){for(;_[j+1]<N;)j++;o[N]=(N-s[j])*(N-s[j])+i[s[j]]}}i.exports=calcSDF},6614:function(i,o,s){"use strict";var _=s(68318),F=s(68222),N=F(_("String.prototype.indexOf"));i.exports=function(i,o){var s=_(i,!!o);return"function"==typeof s&&N(i,".prototype.")>-1?F(s):s}},68222:function(i,o,s){"use strict";var _=s(77575),F=s(68318),N=F("%Function.prototype.apply%"),j=F("%Function.prototype.call%"),Z=F("%Reflect.apply%",!0)||_.call(j,N),X=F("%Object.getOwnPropertyDescriptor%",!0),$=F("%Object.defineProperty%",!0),ee=F("%Math.max%");if($)try{$({},"a",{value:1})}catch(i){$=null}i.exports=function(i){var o=Z(_,j,arguments);return X&&$&&X(o,"length").configurable&&$(o,"length",{value:1+ee(0,i.length-(arguments.length-1))}),o};var applyBind=function(){return Z(_,N,arguments)};$?$(i.exports,"apply",{value:applyBind}):i.exports.apply=applyBind},53435:function(i){i.exports=clamp;function clamp(i,o,s){return o<s?i<o?o:i>s?s:i:i<s?s:i>o?o:i}},6475:function(i,o,s){"use strict";var _=s(53435);function toNumber(i,o){null==o&&(o=!0);var s=i[0],F=i[1],N=i[2],j=i[3];return null==j&&(j=o?1:255),o&&(s*=255,F*=255,N*=255,j*=255),s=255&_(s,0,255),16777216*s+((F=255&_(F,0,255))<<16)+((N=255&_(N,0,255))<<8)+(j=255&_(j,0,255))}function fromNumber(i,o){var s=(i=+i)>>>24,_=(16711680&i)>>>16,F=(65280&i)>>>8,N=255&i;return!1===o?[s,_,F,N]:[s/255,_/255,F/255,N/255]}i.exports=toNumber,i.exports.to=toNumber,i.exports.from=fromNumber},76857:function(i){"use strict";i.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(i,o,s){"use strict";var _=s(36652),F=s(53435),N=s(90660);function isInt(i){return!!(i instanceof Uint8Array||i instanceof Uint8ClampedArray||Array.isArray(i)&&(i[0]>1||0===i[0])&&(i[1]>1||0===i[1])&&(i[2]>1||0===i[2])&&(!i[3]||i[3]>1))}i.exports=function(i,o){"float"!==o&&o||(o="array"),"uint"===o&&(o="uint8"),"uint_clamped"===o&&(o="uint8_clamped");var s=new(N(o))(4),j="uint8"!==o&&"uint8_clamped"!==o;return(i.length&&"string"!=typeof i||(i=_(i),i[0]/=255,i[1]/=255,i[2]/=255),isInt(i))?(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=null!=i[3]?i[3]:255,j&&(s[0]/=255,s[1]/=255,s[2]/=255,s[3]/=255)):j?(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=null!=i[3]?i[3]:1):(s[0]=F(Math.floor(255*i[0]),0,255),s[1]=F(Math.floor(255*i[1]),0,255),s[2]=F(Math.floor(255*i[2]),0,255),s[3]=null==i[3]?255:F(Math.floor(255*i[3]),0,255)),s}},90736:function(i,o,s){"use strict";var _=s(76857),F=s(10973),N=s(46775);i.exports=parse;var j={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse(i){var o,Z,X=[],$=1;if("string"==typeof i){if(_[i])X=_[i].slice(),Z="rgb";else if("transparent"===i)$=0,Z="rgb",X=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var ee=i.slice(1),et=ee.length;$=1,et<=4?(X=[parseInt(ee[0]+ee[0],16),parseInt(ee[1]+ee[1],16),parseInt(ee[2]+ee[2],16)],4===et&&($=parseInt(ee[3]+ee[3],16)/255)):(X=[parseInt(ee[0]+ee[1],16),parseInt(ee[2]+ee[3],16),parseInt(ee[4]+ee[5],16)],8===et&&($=parseInt(ee[6]+ee[7],16)/255)),X[0]||(X[0]=0),X[1]||(X[1]=0),X[2]||(X[2]=0),Z="rgb"}else if(o=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var er=o[1],ee=er.replace(/a$/,"");Z=ee;var et="cmyk"===ee?4:"gray"===ee?1:3;X=o[2].trim().split(/\s*,\s*/).map(function(i,o){if(/%$/.test(i)){if(o===et)return parseFloat(i)/100;if("rgb"===ee)return 255*parseFloat(i)/100}else if("h"===ee[o]){if(/deg$/.test(i));else if(void 0!==j[i])return j[i]}return parseFloat(i)}),er===ee&&X.push(1),$="rgb"===er?1:void 0===X[et]?1:X[et],X=X.slice(0,et)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(X=i.match(/([0-9]+)/g).map(function(i){return parseFloat(i)}),Z=i.match(/([a-z])/ig).join("").toLowerCase())}else if(isNaN(i)){if(F(i)){var en=N(i.r,i.red,i.R,null);null!==en?(Z="rgb",X=[en,N(i.g,i.green,i.G),N(i.b,i.blue,i.B)]):(Z="hsl",X=[N(i.h,i.hue,i.H),N(i.s,i.saturation,i.S),N(i.l,i.lightness,i.L,i.b,i.brightness)]),$=N(i.a,i.alpha,i.opacity,1),null!=i.opacity&&($/=100)}else(Array.isArray(i)||s.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(i))&&(X=[i[0],i[1],i[2]],Z="rgb",$=4===i.length?i[3]:1)}else Z="rgb",X=[i>>>16,(65280&i)>>>8,255&i];return{space:Z,values:X,alpha:$}}},36652:function(i,o,s){"use strict";var _=s(90736),F=s(80009),N=s(53435);i.exports=function(i){var o,s=_(i);return s.space?((o=[,,,])[0]=N(s.values[0],0,255),o[1]=N(s.values[1],0,255),o[2]=N(s.values[2],0,255),"h"===s.space[0]&&(o=F.rgb(o)),o.push(N(s.alpha,0,1)),o):[]}},80009:function(i,o,s){"use strict";var _=s(6866);i.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var o,s,_,F,N,j=i[0]/360,Z=i[1]/100,X=i[2]/100;if(0===Z)return[N=255*X,N,N];s=X<.5?X*(1+Z):X+Z-X*Z,o=2*X-s,F=[0,0,0];for(var $=0;$<3;$++)(_=j+-(1/3*($-1)))<0?_++:_>1&&_--,N=6*_<1?o+(s-o)*6*_:2*_<1?s:3*_<2?o+(s-o)*(2/3-_)*6:o,F[$]=255*N;return F}},_.hsl=function(i){var o,s,_=i[0]/255,F=i[1]/255,N=i[2]/255,j=Math.min(_,F,N),Z=Math.max(_,F,N),X=Z-j;return Z===j?o=0:_===Z?o=(F-N)/X:F===Z?o=2+(N-_)/X:N===Z&&(o=4+(_-F)/X),(o=Math.min(60*o,360))<0&&(o+=360),s=(j+Z)/2,[o,100*(Z===j?0:s<=.5?X/(Z+j):X/(2-Z-j)),100*s]}},6866:function(i){"use strict";i.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(i){i.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(i,o,s){"use strict";i.exports={parse:s(41004),stringify:s(53313)}},63625:function(i,o,s){"use strict";var _=s(40402);i.exports={isSize:function(i){return/^[\d\.]/.test(i)||-1!==i.indexOf("/")||-1!==_.indexOf(i)}}},41004:function(i,o,s){"use strict";var _=s(90448),F=s(38732),N=s(41901),j=s(15659),Z=s(96209),X=s(83794),$=s(99011),ee=s(63625).isSize;i.exports=parseFont;var et=parseFont.cache={};function parseFont(i){if("string"!=typeof i)throw Error("Font argument must be a string.");if(et[i])return et[i];if(""===i)throw Error("Cannot parse an empty string.");if(-1!==N.indexOf(i))return et[i]={system:i};for(var o,s={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},er=$(i,/\s+/);o=er.shift();){if(-1!==F.indexOf(o))return["style","variant","weight","stretch"].forEach(function(i){s[i]=o}),et[i]=s;if(-1!==Z.indexOf(o)){s.style=o;continue}if("normal"===o||"small-caps"===o){s.variant=o;continue}if(-1!==X.indexOf(o)){s.stretch=o;continue}if(-1!==j.indexOf(o)){s.weight=o;continue}if(ee(o)){var en=$(o,"/");if(s.size=en[0],null!=en[1]?s.lineHeight=parseLineHeight(en[1]):"/"===er[0]&&(er.shift(),s.lineHeight=parseLineHeight(er.shift())),!er.length)throw Error("Missing required font-family.");return s.family=$(er.join(" "),/\s*,\s*/).map(_),et[i]=s}throw Error("Unknown or unsupported font token: "+o)}throw Error("Missing required font-size.")}function parseLineHeight(i){var o=parseFloat(i);return o.toString()===i?o:i}},53313:function(i,o,s){"use strict";var _=s(71299),F=s(63625).isSize,N=a2o(s(38732)),j=a2o(s(41901)),Z=a2o(s(15659)),X=a2o(s(96209)),$=a2o(s(83794)),ee={normal:1,"small-caps":1},et={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},er={size:"1rem",family:"serif"};function verify(i,o){if(i&&!o[i]&&!N[i])throw Error("Unknown keyword `"+i+"`");return i}function a2o(i){for(var o={},s=0;s<i.length;s++)o[i[s]]=1;return o}i.exports=function(i){if((i=_(i,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return i.system&&verify(i.system,j),i.system;if(verify(i.style,X),verify(i.variant,ee),verify(i.weight,Z),verify(i.stretch,$),null==i.size&&(i.size=er.size),"number"==typeof i.size&&(i.size+="px"),!F)throw Error("Bad size value `"+i.size+"`");i.family||(i.family=er.family),Array.isArray(i.family)&&(i.family.length||(i.family=[er.family]),i.family=i.family.map(function(i){return et[i]?i:'"'+i+'"'}).join(", "));var o=[];return o.push(i.style),i.variant!==i.style&&o.push(i.variant),i.weight!==i.variant&&i.weight!==i.style&&o.push(i.weight),i.stretch!==i.weight&&i.stretch!==i.variant&&i.stretch!==i.style&&o.push(i.stretch),o.push(i.size+(null==i.lineHeight||"normal"===i.lineHeight||i.lineHeight+""=="1"?"":"/"+i.lineHeight)),o.push(i.family),o.filter(Boolean).join(" ")}},55174:function(i,o,s){"use strict";var _,F=s(24582),N=s(10424),j=s(82527),Z=s(19012),X=s(21780),$=s(16906),ee=Function.prototype.bind,et=Object.defineProperty,er=Object.prototype.hasOwnProperty;_=function(i,o,s){var _,F=N(o)&&j(o.value);return _=Z(o),delete _.writable,delete _.value,_.get=function(){return!s.overwriteDefinition&&er.call(this,i)?F:(o.value=ee.call(F,s.resolveContext?s.resolveContext(this):this),et(this,i,o),this[i])},_},i.exports=function(i){var o=X(arguments[1]);return F(o.resolveContext)&&j(o.resolveContext),$(i,function(i,s){return _(s,i,o)})}},62072:function(i,o,s){"use strict";var _=s(24582),F=s(84985),N=s(95879),j=s(21780),Z=s(66741);(i.exports=function(i,o){var s,F,X,$,ee;return arguments.length<2||"string"!=typeof i?($=o,o=i,i=null):$=arguments[2],_(i)?(s=Z.call(i,"c"),F=Z.call(i,"e"),X=Z.call(i,"w")):(s=X=!0,F=!1),ee={value:o,configurable:s,enumerable:F,writable:X},$?N(j($),ee):ee}).gs=function(i,o,s){var X,$,ee,et;return"string"!=typeof i?(ee=s,s=o,o=i,i=null):ee=arguments[3],_(o)?F(o)?_(s)?F(s)||(ee=s,s=void 0):s=void 0:(ee=o,o=s=void 0):o=void 0,_(i)?(X=Z.call(i,"c"),$=Z.call(i,"e")):(X=!0,$=!1),et={get:o,set:s,configurable:X,enumerable:$},ee?N(j(ee),et):et}},33064:function(i,o,s){"use strict";function src_ascending(i,o){return i<o?-1:i>o?1:i>=o?0:NaN}function ascendingComparator(i){return function(o,s){return src_ascending(i(o),s)}}s.d(o,{j2:function(){return src_ascending},Fp:function(){return max},J6:function(){return mean},TS:function(){return merge},VV:function(){return min},w6:function(){return src_range},Sm:function(){return sum}});var _,F=(1===(_=src_ascending).length&&(_=ascendingComparator(_)),{left:function(i,o,s,F){for(null==s&&(s=0),null==F&&(F=i.length);s<F;){var N=s+F>>>1;0>_(i[N],o)?s=N+1:F=N}return s},right:function(i,o,s,F){for(null==s&&(s=0),null==F&&(F=i.length);s<F;){var N=s+F>>>1;_(i[N],o)>0?F=N:s=N+1}return s}});F.right,F.left;var N=Array.prototype;function max(i,o){var s,_,F=i.length,N=-1;if(null==o){for(;++N<F;)if(null!=(s=i[N])&&s>=s)for(_=s;++N<F;)null!=(s=i[N])&&s>_&&(_=s)}else for(;++N<F;)if(null!=(s=o(i[N],N,i))&&s>=s)for(_=s;++N<F;)null!=(s=o(i[N],N,i))&&s>_&&(_=s);return _}function src_number(i){return null===i?NaN:+i}function mean(i,o){var s,_=i.length,F=_,N=-1,j=0;if(null==o)for(;++N<_;)isNaN(s=src_number(i[N]))?--F:j+=s;else for(;++N<_;)isNaN(s=src_number(o(i[N],N,i)))?--F:j+=s;if(F)return j/F}function merge(i){for(var o,s,_,F=i.length,N=-1,j=0;++N<F;)j+=i[N].length;for(s=Array(j);--F>=0;)for(o=(_=i[F]).length;--o>=0;)s[--j]=_[o];return s}function min(i,o){var s,_,F=i.length,N=-1;if(null==o){for(;++N<F;)if(null!=(s=i[N])&&s>=s)for(_=s;++N<F;)null!=(s=i[N])&&_>s&&(_=s)}else for(;++N<F;)if(null!=(s=o(i[N],N,i))&&s>=s)for(_=s;++N<F;)null!=(s=o(i[N],N,i))&&_>s&&(_=s);return _}function src_range(i,o,s){i=+i,o=+o,s=(F=arguments.length)<2?(o=i,i=0,1):F<3?1:+s;for(var _=-1,F=0|Math.max(0,Math.ceil((o-i)/s)),N=Array(F);++_<F;)N[_]=i+_*s;return N}function sum(i,o){var s,_=i.length,F=-1,N=0;if(null==o)for(;++F<_;)(s=+i[F])&&(N+=s);else for(;++F<_;)(s=+o(i[F],F,i))&&(N+=s);return N}N.slice,N.map},15140:function(i,o,s){"use strict";function Map(){}function map(i,o){var s=new Map;if(i instanceof Map)i.each(function(i,o){s.set(o,i)});else if(Array.isArray(i)){var _,F=-1,N=i.length;if(null==o)for(;++F<N;)s.set(F,i[F]);else for(;++F<N;)s.set(o(_=i[F],F,i),_)}else if(i)for(var j in i)s.set(j,i[j]);return s}s.d(o,{UI:function(){return _},b1:function(){return nest}}),Map.prototype=map.prototype={constructor:Map,has:function(i){return"$"+i in this},get:function(i){return this["$"+i]},set:function(i,o){return this["$"+i]=o,this},remove:function(i){var o="$"+i;return o in this&&delete this[o]},clear:function(){for(var i in this)"$"===i[0]&&delete this[i]},keys:function(){var i=[];for(var o in this)"$"===o[0]&&i.push(o.slice(1));return i},values:function(){var i=[];for(var o in this)"$"===o[0]&&i.push(this[o]);return i},entries:function(){var i=[];for(var o in this)"$"===o[0]&&i.push({key:o.slice(1),value:this[o]});return i},size:function(){var i=0;for(var o in this)"$"===o[0]&&++i;return i},empty:function(){for(var i in this)if("$"===i[0])return!1;return!0},each:function(i){for(var o in this)"$"===o[0]&&i(this[o],o.slice(1),this)}};var _=map;function nest(){var i,o,s,F=[],N=[];function apply(s,N,j,Z){if(N>=F.length)return null!=i&&s.sort(i),null!=o?o(s):s;for(var X,$,ee,et=-1,er=s.length,en=F[N++],ei=_(),eo=j();++et<er;)(ee=ei.get(X=en($=s[et])+""))?ee.push($):ei.set(X,[$]);return ei.each(function(i,o){Z(eo,o,apply(i,N,j,Z))}),eo}function entries(i,s){if(++s>F.length)return i;var _,j=N[s-1];return null!=o&&s>=F.length?_=i.entries():(_=[],i.each(function(i,o){_.push({key:o,values:entries(i,s)})})),null!=j?_.sort(function(i,o){return j(i.key,o.key)}):_}return s={object:function(i){return apply(i,0,createObject,setObject)},map:function(i){return apply(i,0,createMap,setMap)},entries:function(i){return entries(apply(i,0,createMap,setMap),0)},key:function(i){return F.push(i),s},sortKeys:function(i){return N[F.length-1]=i,s},sortValues:function(o){return i=o,s},rollup:function(i){return o=i,s}}}function createObject(){return{}}function setObject(i,o,s){i[o]=s}function createMap(){return _()}function setMap(i,o,s){i.set(o,s)}function Set(){}var F=_.prototype;function set(i,o){var s=new Set;if(i instanceof Set)i.each(function(i){s.add(i)});else if(i){var _=-1,F=i.length;if(null==o)for(;++_<F;)s.add(i[_]);else for(;++_<F;)s.add(o(i[_],_,i))}return s}Set.prototype=set.prototype={constructor:Set,has:F.has,add:function(i){return this["$"+(i+="")]=i,this},remove:F.remove,clear:F.clear,values:F.keys,size:F.size,empty:F.empty,each:F.each}},49887:function(i,o,s){"use strict";function center(i,o){var s;function force(){var _,F,N=s.length,j=0,Z=0;for(_=0;_<N;++_)j+=(F=s[_]).x,Z+=F.y;for(j=j/N-i,Z=Z/N-o,_=0;_<N;++_)F=s[_],F.x-=j,F.y-=Z}return null==i&&(i=0),null==o&&(o=0),force.initialize=function(i){s=i},force.x=function(o){return arguments.length?(i=+o,force):i},force.y=function(i){return arguments.length?(o=+i,force):o},force}function constant(i){return function(){return i}}function jiggle(){return(Math.random()-.5)*1e-6}function add(i){var o=+this._x.call(null,i),s=+this._y.call(null,i);return add_add(this.cover(o,s),o,s,i)}function add_add(i,o,s,_){if(isNaN(o)||isNaN(s))return i;var F,N,j,Z,X,$,ee,et,er,en=i._root,ei={data:_},eo=i._x0,es=i._y0,el=i._x1,ec=i._y1;if(!en)return i._root=ei,i;for(;en.length;)if(($=o>=(N=(eo+el)/2))?eo=N:el=N,(ee=s>=(j=(es+ec)/2))?es=j:ec=j,F=en,!(en=en[et=ee<<1|$]))return F[et]=ei,i;if(Z=+i._x.call(null,en.data),X=+i._y.call(null,en.data),o===Z&&s===X)return ei.next=en,F?F[et]=ei:i._root=ei,i;do F=F?F[et]=[,,,,]:i._root=[,,,,],($=o>=(N=(eo+el)/2))?eo=N:el=N,(ee=s>=(j=(es+ec)/2))?es=j:ec=j;while((et=ee<<1|$)==(er=(X>=j)<<1|Z>=N));return F[er]=en,F[et]=ei,i}function addAll(i){var o,s,_,F,N=i.length,j=Array(N),Z=Array(N),X=1/0,$=1/0,ee=-1/0,et=-1/0;for(s=0;s<N;++s)!(isNaN(_=+this._x.call(null,o=i[s]))||isNaN(F=+this._y.call(null,o)))&&(j[s]=_,Z[s]=F,_<X&&(X=_),_>ee&&(ee=_),F<$&&($=F),F>et&&(et=F));if(X>ee||$>et)return this;for(this.cover(X,$).cover(ee,et),s=0;s<N;++s)add_add(this,j[s],Z[s],i[s]);return this}function cover(i,o){if(isNaN(i=+i)||isNaN(o=+o))return this;var s=this._x0,_=this._y0,F=this._x1,N=this._y1;if(isNaN(s))F=(s=Math.floor(i))+1,N=(_=Math.floor(o))+1;else{for(var j,Z,X=F-s,$=this._root;s>i||i>=F||_>o||o>=N;)switch(Z=(o<_)<<1|i<s,(j=[,,,,])[Z]=$,$=j,X*=2,Z){case 0:F=s+X,N=_+X;break;case 1:s=F-X,N=_+X;break;case 2:F=s+X,_=N-X;break;case 3:s=F-X,_=N-X}this._root&&this._root.length&&(this._root=$)}return this._x0=s,this._y0=_,this._x1=F,this._y1=N,this}function data(){var i=[];return this.visit(function(o){if(!o.length)do i.push(o.data);while(o=o.next)}),i}function extent(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function quad(i,o,s,_,F){this.node=i,this.x0=o,this.y0=s,this.x1=_,this.y1=F}function find(i,o,s){var _,F,N,j,Z,X,$,ee=this._x0,et=this._y0,er=this._x1,en=this._y1,ei=[],eo=this._root;for(eo&&ei.push(new quad(eo,ee,et,er,en)),null==s?s=1/0:(ee=i-s,et=o-s,er=i+s,en=o+s,s*=s);X=ei.pop();)if((eo=X.node)&&!((F=X.x0)>er)&&!((N=X.y0)>en)&&!((j=X.x1)<ee)&&!((Z=X.y1)<et)){if(eo.length){var es=(F+j)/2,el=(N+Z)/2;ei.push(new quad(eo[3],es,el,j,Z),new quad(eo[2],F,el,es,Z),new quad(eo[1],es,N,j,el),new quad(eo[0],F,N,es,el)),($=(o>=el)<<1|i>=es)&&(X=ei[ei.length-1],ei[ei.length-1]=ei[ei.length-1-$],ei[ei.length-1-$]=X)}else{var ec=i-+this._x.call(null,eo.data),eu=o-+this._y.call(null,eo.data),ef=ec*ec+eu*eu;if(ef<s){var ed=Math.sqrt(s=ef);ee=i-ed,et=o-ed,er=i+ed,en=o+ed,_=eo.data}}}return _}function remove(i){if(isNaN(N=+this._x.call(null,i))||isNaN(j=+this._y.call(null,i)))return this;var o,s,_,F,N,j,Z,X,$,ee,et,er,en=this._root,ei=this._x0,eo=this._y0,es=this._x1,el=this._y1;if(!en)return this;if(en.length)for(;;){if(($=N>=(Z=(ei+es)/2))?ei=Z:es=Z,(ee=j>=(X=(eo+el)/2))?eo=X:el=X,o=en,!(en=en[et=ee<<1|$]))return this;if(!en.length)break;(o[et+1&3]||o[et+2&3]||o[et+3&3])&&(s=o,er=et)}for(;en.data!==i;)if(_=en,!(en=en.next))return this;return((F=en.next)&&delete en.next,_)?F?_.next=F:delete _.next:o?(F?o[et]=F:delete o[et],(en=o[0]||o[1]||o[2]||o[3])&&en===(o[3]||o[2]||o[1]||o[0])&&!en.length&&(s?s[er]=en:this._root=en)):this._root=F,this}function removeAll(i){for(var o=0,s=i.length;o<s;++o)this.remove(i[o]);return this}function root(){return this._root}function size(){var i=0;return this.visit(function(o){if(!o.length)do++i;while(o=o.next)}),i}function visit(i){var o,s,_,F,N,j,Z=[],X=this._root;for(X&&Z.push(new quad(X,this._x0,this._y0,this._x1,this._y1));o=Z.pop();)if(!i(X=o.node,_=o.x0,F=o.y0,N=o.x1,j=o.y1)&&X.length){var $=(_+N)/2,ee=(F+j)/2;(s=X[3])&&Z.push(new quad(s,$,ee,N,j)),(s=X[2])&&Z.push(new quad(s,_,ee,$,j)),(s=X[1])&&Z.push(new quad(s,$,F,N,ee)),(s=X[0])&&Z.push(new quad(s,_,F,$,ee))}return this}function visitAfter(i){var o,s=[],_=[];for(this._root&&s.push(new quad(this._root,this._x0,this._y0,this._x1,this._y1));o=s.pop();){var F=o.node;if(F.length){var N,j=o.x0,Z=o.y0,X=o.x1,$=o.y1,ee=(j+X)/2,et=(Z+$)/2;(N=F[0])&&s.push(new quad(N,j,Z,ee,et)),(N=F[1])&&s.push(new quad(N,ee,Z,X,et)),(N=F[2])&&s.push(new quad(N,j,et,ee,$)),(N=F[3])&&s.push(new quad(N,ee,et,X,$))}_.push(o)}for(;o=_.pop();)i(o.node,o.x0,o.y0,o.x1,o.y1);return this}function defaultX(i){return i[0]}function x(i){return arguments.length?(this._x=i,this):this._x}function defaultY(i){return i[1]}function y(i){return arguments.length?(this._y=i,this):this._y}function quadtree(i,o,s){var _=new Quadtree(null==o?defaultX:o,null==s?defaultY:s,NaN,NaN,NaN,NaN);return null==i?_:_.addAll(i)}function Quadtree(i,o,s,_,F,N){this._x=i,this._y=o,this._x0=s,this._y0=_,this._x1=F,this._y1=N,this._root=void 0}function leaf_copy(i){for(var o={data:i.data},s=o;i=i.next;)s=s.next={data:i.data};return o}s.r(o),s.d(o,{forceCenter:function(){return center},forceCollide:function(){return collide},forceLink:function(){return src_link},forceManyBody:function(){return manyBody},forceRadial:function(){return radial},forceSimulation:function(){return simulation},forceX:function(){return src_x},forceY:function(){return src_y}});var _=quadtree.prototype=Quadtree.prototype;function collide_x(i){return i.x+i.vx}function collide_y(i){return i.y+i.vy}function collide(i){var o,s,_=1,F=1;function force(){for(var i,N,j,Z,X,$,ee,et=o.length,er=0;er<F;++er)for(i=0,N=quadtree(o,collide_x,collide_y).visitAfter(prepare);i<et;++i)ee=($=s[(j=o[i]).index])*$,Z=j.x+j.vx,X=j.y+j.vy,N.visit(apply);function apply(i,o,s,F,N){var et=i.data,er=i.r,en=$+er;if(et){if(et.index>j.index){var ei=Z-et.x-et.vx,eo=X-et.y-et.vy,es=ei*ei+eo*eo;es<en*en&&(0===ei&&(es+=(ei=jiggle())*ei),0===eo&&(es+=(eo=jiggle())*eo),es=(en-(es=Math.sqrt(es)))/es*_,j.vx+=(ei*=es)*(en=(er*=er)/(ee+er)),j.vy+=(eo*=es)*en,et.vx-=ei*(en=1-en),et.vy-=eo*en)}return}return o>Z+en||F<Z-en||s>X+en||N<X-en}}function prepare(i){if(i.data)return i.r=s[i.data.index];for(var o=i.r=0;o<4;++o)i[o]&&i[o].r>i.r&&(i.r=i[o].r)}function initialize(){if(o){var _,F,N=o.length;for(_=0,s=Array(N);_<N;++_)s[(F=o[_]).index]=+i(F,_,o)}}return"function"!=typeof i&&(i=constant(null==i?1:+i)),force.initialize=function(i){o=i,initialize()},force.iterations=function(i){return arguments.length?(F=+i,force):F},force.strength=function(i){return arguments.length?(_=+i,force):_},force.radius=function(o){return arguments.length?(i="function"==typeof o?o:constant(+o),initialize(),force):i},force}_.copy=function(){var i,o,s=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),_=this._root;if(!_)return s;if(!_.length)return s._root=leaf_copy(_),s;for(i=[{source:_,target:s._root=[,,,,]}];_=i.pop();)for(var F=0;F<4;++F)(o=_.source[F])&&(o.length?i.push({source:o,target:_.target[F]=[,,,,]}):_.target[F]=leaf_copy(o));return s},_.add=add,_.addAll=addAll,_.cover=cover,_.data=data,_.extent=extent,_.find=find,_.remove=remove,_.removeAll=removeAll,_.root=root,_.size=size,_.visit=visit,_.visitAfter=visitAfter,_.x=x,_.y=y;var F=s(15140);function index(i){return i.index}function link_find(i,o){var s=i.get(o);if(!s)throw Error("missing: "+o);return s}function src_link(i){var o,s,_,N,j,Z=index,X=defaultStrength,$=constant(30),ee=1;function defaultStrength(i){return 1/Math.min(N[i.source.index],N[i.target.index])}function force(_){for(var F=0,N=i.length;F<ee;++F)for(var Z,X,$,et,er,en,ei,eo=0;eo<N;++eo)X=(Z=i[eo]).source,en=((en=Math.sqrt((et=($=Z.target).x+$.vx-X.x-X.vx||jiggle())*et+(er=$.y+$.vy-X.y-X.vy||jiggle())*er))-s[eo])/en*_*o[eo],et*=en,er*=en,$.vx-=et*(ei=j[eo]),$.vy-=er*ei,X.vx+=et*(ei=1-ei),X.vy+=er*ei}function initialize(){if(_){var X,$,ee=_.length,et=i.length,er=(0,F.UI)(_,Z);for(X=0,N=Array(ee);X<et;++X)($=i[X]).index=X,"object"!=typeof $.source&&($.source=link_find(er,$.source)),"object"!=typeof $.target&&($.target=link_find(er,$.target)),N[$.source.index]=(N[$.source.index]||0)+1,N[$.target.index]=(N[$.target.index]||0)+1;for(X=0,j=Array(et);X<et;++X)$=i[X],j[X]=N[$.source.index]/(N[$.source.index]+N[$.target.index]);o=Array(et),initializeStrength(),s=Array(et),initializeDistance()}}function initializeStrength(){if(_)for(var s=0,F=i.length;s<F;++s)o[s]=+X(i[s],s,i)}function initializeDistance(){if(_)for(var o=0,F=i.length;o<F;++o)s[o]=+$(i[o],o,i)}return null==i&&(i=[]),force.initialize=function(i){_=i,initialize()},force.links=function(o){return arguments.length?(i=o,initialize(),force):i},force.id=function(i){return arguments.length?(Z=i,force):Z},force.iterations=function(i){return arguments.length?(ee=+i,force):ee},force.strength=function(i){return arguments.length?(X="function"==typeof i?i:constant(+i),initializeStrength(),force):X},force.distance=function(i){return arguments.length?($="function"==typeof i?i:constant(+i),initializeDistance(),force):$},force}var N={value:function(){}};function dispatch(){for(var i,o=0,s=arguments.length,_={};o<s;++o){if(!(i=arguments[o]+"")||i in _||/[\s.]/.test(i))throw Error("illegal type: "+i);_[i]=[]}return new Dispatch(_)}function Dispatch(i){this._=i}function parseTypenames(i,o){return i.trim().split(/^|\s+/).map(function(i){var s="",_=i.indexOf(".");if(_>=0&&(s=i.slice(_+1),i=i.slice(0,_)),i&&!o.hasOwnProperty(i))throw Error("unknown type: "+i);return{type:i,name:s}})}function get(i,o){for(var s,_=0,F=i.length;_<F;++_)if((s=i[_]).name===o)return s.value}function set(i,o,s){for(var _=0,F=i.length;_<F;++_)if(i[_].name===o){i[_]=N,i=i.slice(0,_).concat(i.slice(_+1));break}return null!=s&&i.push({name:o,value:s}),i}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(i,o){var s,_=this._,F=parseTypenames(i+"",_),N=-1,j=F.length;if(arguments.length<2){for(;++N<j;)if((s=(i=F[N]).type)&&(s=get(_[s],i.name)))return s;return}if(null!=o&&"function"!=typeof o)throw Error("invalid callback: "+o);for(;++N<j;)if(s=(i=F[N]).type)_[s]=set(_[s],i.name,o);else if(null==o)for(s in _)_[s]=set(_[s],i.name,null);return this},copy:function(){var i={},o=this._;for(var s in o)i[s]=o[s].slice();return new Dispatch(i)},call:function(i,o){if((s=arguments.length-2)>0)for(var s,_,F=Array(s),N=0;N<s;++N)F[N]=arguments[N+2];if(!this._.hasOwnProperty(i))throw Error("unknown type: "+i);for(_=this._[i],N=0,s=_.length;N<s;++N)_[N].value.apply(o,F)},apply:function(i,o,s){if(!this._.hasOwnProperty(i))throw Error("unknown type: "+i);for(var _=this._[i],F=0,N=_.length;F<N;++F)_[F].value.apply(o,s)}};var j,Z,X=dispatch,$=0,ee=0,et=0,er=0,en=0,ei=0,eo="object"==typeof performance&&performance.now?performance:Date,es="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function now(){return en||(es(clearNow),en=eo.now()+ei)}function clearNow(){en=0}function Timer(){this._call=this._time=this._next=null}function timer(i,o,s){var _=new Timer;return _.restart(i,o,s),_}function timerFlush(){now(),++$;for(var i,o=j;o;)(i=en-o._time)>=0&&o._call.call(null,i),o=o._next;--$}function wake(){en=(er=eo.now())+ei,$=ee=0;try{timerFlush()}finally{$=0,nap(),en=0}}function poke(){var i=eo.now(),o=i-er;o>1e3&&(ei-=o,er=i)}function nap(){for(var i,o,s=j,_=1/0;s;)s._call?(_>s._time&&(_=s._time),i=s,s=s._next):(o=s._next,s._next=null,s=i?i._next=o:j=o);Z=i,sleep(_)}function sleep(i){!$&&(ee&&(ee=clearTimeout(ee)),i-en>24?(i<1/0&&(ee=setTimeout(wake,i-eo.now()-ei)),et&&(et=clearInterval(et))):(et||(er=eo.now(),et=setInterval(poke,1e3)),$=1,es(wake)))}function simulation_x(i){return i.x}function simulation_y(i){return i.y}Timer.prototype=timer.prototype={constructor:Timer,restart:function(i,o,s){if("function"!=typeof i)throw TypeError("callback is not a function");s=(null==s?now():+s)+(null==o?0:+o),this._next||Z===this||(Z?Z._next=this:j=this,Z=this),this._call=i,this._time=s,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};var el=Math.PI*(3-Math.sqrt(5));function simulation(i){var o,s=1,_=.001,N=1-Math.pow(.001,1/300),j=0,Z=.6,$=(0,F.UI)(),ee=timer(step),et=X("tick","end");function step(){tick(),et.call("tick",o),s<_&&(ee.stop(),et.call("end",o))}function tick(_){var F,X,ee=i.length;void 0===_&&(_=1);for(var et=0;et<_;++et)for(s+=(j-s)*N,$.each(function(i){i(s)}),F=0;F<ee;++F)null==(X=i[F]).fx?X.x+=X.vx*=Z:(X.x=X.fx,X.vx=0),null==X.fy?X.y+=X.vy*=Z:(X.y=X.fy,X.vy=0);return o}function initializeNodes(){for(var o,s=0,_=i.length;s<_;++s){if((o=i[s]).index=s,null!=o.fx&&(o.x=o.fx),null!=o.fy&&(o.y=o.fy),isNaN(o.x)||isNaN(o.y)){var F=10*Math.sqrt(s),N=s*el;o.x=F*Math.cos(N),o.y=F*Math.sin(N)}(isNaN(o.vx)||isNaN(o.vy))&&(o.vx=o.vy=0)}}function initializeForce(o){return o.initialize&&o.initialize(i),o}return null==i&&(i=[]),initializeNodes(),o={tick:tick,restart:function(){return ee.restart(step),o},stop:function(){return ee.stop(),o},nodes:function(s){return arguments.length?(i=s,initializeNodes(),$.each(initializeForce),o):i},alpha:function(i){return arguments.length?(s=+i,o):s},alphaMin:function(i){return arguments.length?(_=+i,o):_},alphaDecay:function(i){return arguments.length?(N=+i,o):+N},alphaTarget:function(i){return arguments.length?(j=+i,o):j},velocityDecay:function(i){return arguments.length?(Z=1-i,o):1-Z},force:function(i,s){return arguments.length>1?(null==s?$.remove(i):$.set(i,initializeForce(s)),o):$.get(i)},find:function(o,s,_){var F,N,j,Z,X,$=0,ee=i.length;for(null==_?_=1/0:_*=_,$=0;$<ee;++$)(j=(F=o-(Z=i[$]).x)*F+(N=s-Z.y)*N)<_&&(X=Z,_=j);return X},on:function(i,s){return arguments.length>1?(et.on(i,s),o):et.on(i)}}}function manyBody(){var i,o,s,_,F=constant(-30),N=1,j=1/0,Z=.81;function force(_){var F,N=i.length,j=quadtree(i,simulation_x,simulation_y).visitAfter(accumulate);for(s=_,F=0;F<N;++F)o=i[F],j.visit(apply)}function initialize(){if(i){var o,s,N=i.length;for(o=0,_=Array(N);o<N;++o)_[(s=i[o]).index]=+F(s,o,i)}}function accumulate(i){var o,s,F,N,j,Z=0,X=0;if(i.length){for(F=N=j=0;j<4;++j)(o=i[j])&&(s=Math.abs(o.value))&&(Z+=o.value,X+=s,F+=s*o.x,N+=s*o.y);i.x=F/X,i.y=N/X}else{(o=i).x=o.data.x,o.y=o.data.y;do Z+=_[o.data.index];while(o=o.next)}i.value=Z}function apply(i,F,X,$){if(!i.value)return!0;var ee=i.x-o.x,et=i.y-o.y,er=$-F,en=ee*ee+et*et;if(er*er/Z<en)return en<j&&(0===ee&&(en+=(ee=jiggle())*ee),0===et&&(en+=(et=jiggle())*et),en<N&&(en=Math.sqrt(N*en)),o.vx+=ee*i.value*s/en,o.vy+=et*i.value*s/en),!0;if(!i.length&&!(en>=j)){(i.data!==o||i.next)&&(0===ee&&(en+=(ee=jiggle())*ee),0===et&&(en+=(et=jiggle())*et),en<N&&(en=Math.sqrt(N*en)));do i.data!==o&&(er=_[i.data.index]*s/en,o.vx+=ee*er,o.vy+=et*er);while(i=i.next)}}return force.initialize=function(o){i=o,initialize()},force.strength=function(i){return arguments.length?(F="function"==typeof i?i:constant(+i),initialize(),force):F},force.distanceMin=function(i){return arguments.length?(N=i*i,force):Math.sqrt(N)},force.distanceMax=function(i){return arguments.length?(j=i*i,force):Math.sqrt(j)},force.theta=function(i){return arguments.length?(Z=i*i,force):Math.sqrt(Z)},force}function radial(i,o,s){var _,F,N,j=constant(.1);function force(i){for(var j=0,Z=_.length;j<Z;++j){var X=_[j],$=X.x-o||1e-6,ee=X.y-s||1e-6,et=Math.sqrt($*$+ee*ee),er=(N[j]-et)*F[j]*i/et;X.vx+=$*er,X.vy+=ee*er}}function initialize(){if(_){var o,s=_.length;for(o=0,F=Array(s),N=Array(s);o<s;++o)N[o]=+i(_[o],o,_),F[o]=isNaN(N[o])?0:+j(_[o],o,_)}}return"function"!=typeof i&&(i=constant(+i)),null==o&&(o=0),null==s&&(s=0),force.initialize=function(i){_=i,initialize()},force.strength=function(i){return arguments.length?(j="function"==typeof i?i:constant(+i),initialize(),force):j},force.radius=function(o){return arguments.length?(i="function"==typeof o?o:constant(+o),initialize(),force):i},force.x=function(i){return arguments.length?(o=+i,force):o},force.y=function(i){return arguments.length?(s=+i,force):s},force}function src_x(i){var o,s,_,F=constant(.1);function force(i){for(var F,N=0,j=o.length;N<j;++N)F=o[N],F.vx+=(_[N]-F.x)*s[N]*i}function initialize(){if(o){var N,j=o.length;for(N=0,s=Array(j),_=Array(j);N<j;++N)s[N]=isNaN(_[N]=+i(o[N],N,o))?0:+F(o[N],N,o)}}return"function"!=typeof i&&(i=constant(null==i?0:+i)),force.initialize=function(i){o=i,initialize()},force.strength=function(i){return arguments.length?(F="function"==typeof i?i:constant(+i),initialize(),force):F},force.x=function(o){return arguments.length?(i="function"==typeof o?o:constant(+o),initialize(),force):i},force}function src_y(i){var o,s,_,F=constant(.1);function force(i){for(var F,N=0,j=o.length;N<j;++N)F=o[N],F.vy+=(_[N]-F.y)*s[N]*i}function initialize(){if(o){var N,j=o.length;for(N=0,s=Array(j),_=Array(j);N<j;++N)s[N]=isNaN(_[N]=+i(o[N],N,o))?0:+F(o[N],N,o)}}return"function"!=typeof i&&(i=constant(null==i?0:+i)),force.initialize=function(i){o=i,initialize()},force.strength=function(i){return arguments.length?(F="function"==typeof i?i:constant(+i),initialize(),force):F},force.y=function(o){return arguments.length?(i="function"==typeof o?o:constant(+o),initialize(),force):i},force}},60721:function(i,o,s){"use strict";function formatDecimal(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function formatDecimalParts(i,o){if((s=(i=o?i.toExponential(o-1):i.toExponential()).indexOf("e"))<0)return null;var s,_=i.slice(0,s);return[_.length>1?_[0]+_.slice(2):_,+i.slice(s+1)]}function exponent(i){return(i=formatDecimalParts(Math.abs(i)))?i[1]:NaN}function formatGroup(i,o){return function(s,_){for(var F=s.length,N=[],j=0,Z=i[0],X=0;F>0&&Z>0&&(X+Z+1>_&&(Z=Math.max(1,_-X)),N.push(s.substring(F-=Z,F+Z)),!((X+=Z+1)>_));)Z=i[j=(j+1)%i.length];return N.reverse().join(o)}}function formatNumerals(i){return function(o){return o.replace(/[0-9]/g,function(o){return i[+o]})}}s.d(o,{WU:function(){return N},FF:function(){return locale}});var _,F,N,j=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(i){var o;if(!(o=j.exec(i)))throw Error("invalid format: "+i);return new FormatSpecifier({fill:o[1],align:o[2],sign:o[3],symbol:o[4],zero:o[5],width:o[6],comma:o[7],precision:o[8]&&o[8].slice(1),trim:o[9],type:o[10]})}function FormatSpecifier(i){this.fill=void 0===i.fill?" ":i.fill+"",this.align=void 0===i.align?">":i.align+"",this.sign=void 0===i.sign?"-":i.sign+"",this.symbol=void 0===i.symbol?"":i.symbol+"",this.zero=!!i.zero,this.width=void 0===i.width?void 0:+i.width,this.comma=!!i.comma,this.precision=void 0===i.precision?void 0:+i.precision,this.trim=!!i.trim,this.type=void 0===i.type?"":i.type+""}function formatTrim(i){v:for(var o,s=i.length,_=1,F=-1;_<s;++_)switch(i[_]){case".":F=o=_;break;case"0":0===F&&(F=_),o=_;break;default:if(!+i[_])break v;F>0&&(F=0)}return F>0?i.slice(0,F)+i.slice(o+1):i}function formatRounded(i,o){var s=formatDecimalParts(i,o);if(!s)return i+"";var _=s[0],F=s[1];return F<0?"0."+Array(-F).join("0")+_:_.length>F+1?_.slice(0,F+1)+"."+_.slice(F+1):_+Array(F-_.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Z={"%":function(i,o){return(100*i).toFixed(o)},b:function(i){return Math.round(i).toString(2)},c:function(i){return i+""},d:formatDecimal,e:function(i,o){return i.toExponential(o)},f:function(i,o){return i.toFixed(o)},g:function(i,o){return i.toPrecision(o)},o:function(i){return Math.round(i).toString(8)},p:function(i,o){return formatRounded(100*i,o)},r:formatRounded,s:function(i,o){var s=formatDecimalParts(i,o);if(!s)return i+"";var F=s[0],N=s[1],j=N-(_=3*Math.max(-8,Math.min(8,Math.floor(N/3))))+1,Z=F.length;return j===Z?F:j>Z?F+Array(j-Z+1).join("0"):j>0?F.slice(0,j)+"."+F.slice(j):"0."+Array(1-j).join("0")+formatDecimalParts(i,Math.max(0,o+j-1))[0]},X:function(i){return Math.round(i).toString(16).toUpperCase()},x:function(i){return Math.round(i).toString(16)}};function identity(i){return i}var X=Array.prototype.map,$=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function locale(i){var o=void 0===i.grouping||void 0===i.thousands?identity:formatGroup(X.call(i.grouping,Number),i.thousands+""),s=void 0===i.currency?"":i.currency[0]+"",F=void 0===i.currency?"":i.currency[1]+"",N=void 0===i.decimal?".":i.decimal+"",j=void 0===i.numerals?identity:formatNumerals(X.call(i.numerals,String)),ee=void 0===i.percent?"%":i.percent+"",et=void 0===i.minus?"-":i.minus+"",er=void 0===i.nan?"NaN":i.nan+"";function newFormat(i){var X=(i=formatSpecifier(i)).fill,en=i.align,ei=i.sign,eo=i.symbol,es=i.zero,el=i.width,ec=i.comma,eu=i.precision,ef=i.trim,ed=i.type;"n"===ed?(ec=!0,ed="g"):Z[ed]||(void 0===eu&&(eu=12),ef=!0,ed="g"),(es||"0"===X&&"="===en)&&(es=!0,X="0",en="=");var eh="$"===eo?s:"#"===eo&&/[boxX]/.test(ed)?"0"+ed.toLowerCase():"",ep="$"===eo?F:/[%p]/.test(ed)?ee:"",eg=Z[ed],em=/[defgprs%]/.test(ed);function format(i){var s,F,Z,ee=eh,eo=ep;if("c"===ed)eo=eg(i)+eo,i="";else{var ey=(i=+i)<0||1/i<0;if(i=isNaN(i)?er:eg(Math.abs(i),eu),ef&&(i=formatTrim(i)),ey&&0==+i&&"+"!==ei&&(ey=!1),ee=(ey?"("===ei?ei:et:"-"===ei||"("===ei?"":ei)+ee,eo=("s"===ed?$[8+_/3]:"")+eo+(ey&&"("===ei?")":""),em){for(s=-1,F=i.length;++s<F;)if(48>(Z=i.charCodeAt(s))||Z>57){eo=(46===Z?N+i.slice(s+1):i.slice(s))+eo,i=i.slice(0,s);break}}}ec&&!es&&(i=o(i,1/0));var ev=ee.length+i.length+eo.length,ex=ev<el?Array(el-ev+1).join(X):"";switch(ec&&es&&(i=o(ex+i,ex.length?el-eo.length:1/0),ex=""),en){case"<":i=ee+i+eo+ex;break;case"=":i=ee+ex+i+eo;break;case"^":i=ex.slice(0,ev=ex.length>>1)+ee+i+eo+ex.slice(ev);break;default:i=ex+ee+i+eo}return j(i)}return eu=void 0===eu?6:/[gprs]/.test(ed)?Math.max(1,Math.min(21,eu)):Math.max(0,Math.min(20,eu)),format.toString=function(){return i+""},format}function formatPrefix(i,o){var s=newFormat(((i=formatSpecifier(i)).type="f",i)),_=3*Math.max(-8,Math.min(8,Math.floor(exponent(o)/3))),F=Math.pow(10,-_),N=$[8+_/3];return function(i){return s(F*i)+N}}return{format:newFormat,formatPrefix:formatPrefix}}N=(F=locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})).format,F.formatPrefix},65704:function(i,o,s){"use strict";s.r(o),s.d(o,{geoAiry:function(){return airy},geoAiryRaw:function(){return airyRaw},geoAitoff:function(){return aitoff},geoAitoffRaw:function(){return aitoffRaw},geoArmadillo:function(){return armadillo},geoArmadilloRaw:function(){return armadilloRaw},geoAugust:function(){return august},geoAugustRaw:function(){return augustRaw},geoBaker:function(){return baker},geoBakerRaw:function(){return bakerRaw},geoBerghaus:function(){return berghaus},geoBerghausRaw:function(){return berghausRaw},geoBertin1953:function(){return bertin},geoBertin1953Raw:function(){return bertin1953Raw},geoBoggs:function(){return boggs},geoBoggsRaw:function(){return boggsRaw},geoBonne:function(){return bonne},geoBonneRaw:function(){return bonneRaw},geoBottomley:function(){return bottomley},geoBottomleyRaw:function(){return bottomleyRaw},geoBromley:function(){return bromley},geoBromleyRaw:function(){return ek},geoChamberlin:function(){return chamberlin},geoChamberlinAfrica:function(){return chamberlinAfrica},geoChamberlinRaw:function(){return chamberlinRaw},geoCollignon:function(){return collignon},geoCollignonRaw:function(){return collignonRaw},geoCraig:function(){return craig},geoCraigRaw:function(){return craigRaw},geoCraster:function(){return craster},geoCrasterRaw:function(){return crasterRaw},geoCylindricalEqualArea:function(){return cylindricalEqualArea},geoCylindricalEqualAreaRaw:function(){return cylindricalEqualAreaRaw},geoCylindricalStereographic:function(){return cylindricalStereographic},geoCylindricalStereographicRaw:function(){return cylindricalStereographicRaw},geoEckert1:function(){return eckert1},geoEckert1Raw:function(){return eckert1Raw},geoEckert2:function(){return eckert2},geoEckert2Raw:function(){return eckert2Raw},geoEckert3:function(){return eckert3},geoEckert3Raw:function(){return eckert3Raw},geoEckert4:function(){return eckert4},geoEckert4Raw:function(){return eckert4Raw},geoEckert5:function(){return eckert5},geoEckert5Raw:function(){return eckert5Raw},geoEckert6:function(){return eckert6},geoEckert6Raw:function(){return eckert6Raw},geoEisenlohr:function(){return eisenlohr},geoEisenlohrRaw:function(){return eisenlohrRaw},geoFahey:function(){return fahey},geoFaheyRaw:function(){return faheyRaw},geoFoucaut:function(){return foucaut},geoFoucautRaw:function(){return foucautRaw},geoFoucautSinusoidal:function(){return foucautSinusoidal},geoFoucautSinusoidalRaw:function(){return foucautSinusoidalRaw},geoGilbert:function(){return gilbert},geoGingery:function(){return gingery},geoGingeryRaw:function(){return gingeryRaw},geoGinzburg4:function(){return ginzburg4},geoGinzburg4Raw:function(){return eI},geoGinzburg5:function(){return ginzburg5},geoGinzburg5Raw:function(){return eO},geoGinzburg6:function(){return ginzburg6},geoGinzburg6Raw:function(){return eD},geoGinzburg8:function(){return ginzburg8},geoGinzburg8Raw:function(){return ginzburg8Raw},geoGinzburg9:function(){return ginzburg9},geoGinzburg9Raw:function(){return eR},geoGringorten:function(){return gringorten},geoGringortenQuincuncial:function(){return quincuncial_gringorten},geoGringortenRaw:function(){return gringortenRaw},geoGuyou:function(){return guyou},geoGuyouRaw:function(){return guyouRaw},geoHammer:function(){return hammer},geoHammerRaw:function(){return hammerRaw},geoHammerRetroazimuthal:function(){return hammerRetroazimuthal},geoHammerRetroazimuthalRaw:function(){return hammerRetroazimuthalRaw},geoHealpix:function(){return healpix},geoHealpixRaw:function(){return healpixRaw},geoHill:function(){return hill},geoHillRaw:function(){return hillRaw},geoHomolosine:function(){return homolosine},geoHomolosineRaw:function(){return homolosineRaw},geoHufnagel:function(){return hufnagel},geoHufnagelRaw:function(){return hufnagelRaw},geoHyperelliptical:function(){return hyperelliptical},geoHyperellipticalRaw:function(){return hyperellipticalRaw},geoInterrupt:function(){return interrupted},geoInterruptedBoggs:function(){return interrupted_boggs},geoInterruptedHomolosine:function(){return interrupted_homolosine},geoInterruptedMollweide:function(){return interrupted_mollweide},geoInterruptedMollweideHemispheres:function(){return mollweideHemispheres},geoInterruptedQuarticAuthalic:function(){return quarticAuthalic},geoInterruptedSinuMollweide:function(){return interrupted_sinuMollweide},geoInterruptedSinusoidal:function(){return interrupted_sinusoidal},geoKavrayskiy7:function(){return kavrayskiy7},geoKavrayskiy7Raw:function(){return kavrayskiy7Raw},geoLagrange:function(){return lagrange},geoLagrangeRaw:function(){return lagrangeRaw},geoLarrivee:function(){return larrivee},geoLarriveeRaw:function(){return larriveeRaw},geoLaskowski:function(){return laskowski},geoLaskowskiRaw:function(){return laskowskiRaw},geoLittrow:function(){return littrow},geoLittrowRaw:function(){return littrowRaw},geoLoximuthal:function(){return loximuthal},geoLoximuthalRaw:function(){return loximuthalRaw},geoMiller:function(){return miller},geoMillerRaw:function(){return millerRaw},geoModifiedStereographic:function(){return modifiedStereographic},geoModifiedStereographicAlaska:function(){return modifiedStereographicAlaska},geoModifiedStereographicGs48:function(){return modifiedStereographicGs48},geoModifiedStereographicGs50:function(){return modifiedStereographicGs50},geoModifiedStereographicLee:function(){return modifiedStereographicLee},geoModifiedStereographicMiller:function(){return modifiedStereographicMiller},geoModifiedStereographicRaw:function(){return modifiedStereographicRaw},geoMollweide:function(){return mollweide},geoMollweideRaw:function(){return eT},geoMtFlatPolarParabolic:function(){return mtFlatPolarParabolic},geoMtFlatPolarParabolicRaw:function(){return mtFlatPolarParabolicRaw},geoMtFlatPolarQuartic:function(){return mtFlatPolarQuartic},geoMtFlatPolarQuarticRaw:function(){return mtFlatPolarQuarticRaw},geoMtFlatPolarSinusoidal:function(){return mtFlatPolarSinusoidal},geoMtFlatPolarSinusoidalRaw:function(){return mtFlatPolarSinusoidalRaw},geoNaturalEarth:function(){return e2.Z},geoNaturalEarth2:function(){return naturalEarth2},geoNaturalEarth2Raw:function(){return naturalEarth2Raw},geoNaturalEarthRaw:function(){return e2.K},geoNellHammer:function(){return nellHammer},geoNellHammerRaw:function(){return nellHammerRaw},geoNicolosi:function(){return nicolosi},geoNicolosiRaw:function(){return nicolosiRaw},geoPatterson:function(){return patterson},geoPattersonRaw:function(){return pattersonRaw},geoPeirceQuincuncial:function(){return peirce},geoPierceQuincuncial:function(){return peirce},geoPolyconic:function(){return polyconic},geoPolyconicRaw:function(){return polyconicRaw},geoPolyhedral:function(){return polyhedral},geoPolyhedralButterfly:function(){return butterfly},geoPolyhedralCollignon:function(){return polyhedral_collignon},geoPolyhedralWaterman:function(){return waterman},geoProject:function(){return project},geoQuantize:function(){return quantize},geoQuincuncial:function(){return quincuncial},geoRectangularPolyconic:function(){return rectangularPolyconic},geoRectangularPolyconicRaw:function(){return rectangularPolyconicRaw},geoRobinson:function(){return robinson},geoRobinsonRaw:function(){return robinsonRaw},geoSatellite:function(){return satellite},geoSatelliteRaw:function(){return satelliteRaw},geoSinuMollweide:function(){return sinuMollweide},geoSinuMollweideRaw:function(){return sinuMollweideRaw},geoSinusoidal:function(){return sinusoidal},geoSinusoidalRaw:function(){return sinusoidalRaw},geoStitch:function(){return stitch},geoTimes:function(){return times},geoTimesRaw:function(){return timesRaw},geoTwoPointAzimuthal:function(){return twoPointAzimuthal},geoTwoPointAzimuthalRaw:function(){return twoPointAzimuthalRaw},geoTwoPointAzimuthalUsa:function(){return twoPointAzimuthalUsa},geoTwoPointEquidistant:function(){return twoPointEquidistant},geoTwoPointEquidistantRaw:function(){return twoPointEquidistantRaw},geoTwoPointEquidistantUsa:function(){return twoPointEquidistantUsa},geoVanDerGrinten:function(){return vanDerGrinten},geoVanDerGrinten2:function(){return vanDerGrinten2},geoVanDerGrinten2Raw:function(){return vanDerGrinten2Raw},geoVanDerGrinten3:function(){return vanDerGrinten3},geoVanDerGrinten3Raw:function(){return vanDerGrinten3Raw},geoVanDerGrinten4:function(){return vanDerGrinten4},geoVanDerGrinten4Raw:function(){return vanDerGrinten4Raw},geoVanDerGrintenRaw:function(){return vanDerGrintenRaw},geoWagner:function(){return wagner},geoWagner4:function(){return wagner4},geoWagner4Raw:function(){return tl},geoWagner6:function(){return wagner6},geoWagner6Raw:function(){return wagner6Raw},geoWagner7:function(){return wagner7},geoWagnerRaw:function(){return wagnerRaw},geoWiechel:function(){return wiechel},geoWiechelRaw:function(){return wiechelRaw},geoWinkel3:function(){return winkel3},geoWinkel3Raw:function(){return winkel3Raw}});var _=s(15002),F=Math.abs,N=Math.atan,j=Math.atan2,Z=Math.cos,X=Math.exp,$=Math.floor,ee=Math.log,et=Math.max,er=Math.min,en=Math.pow,ei=Math.round,eo=Math.sign||function(i){return i>0?1:i<0?-1:0},es=Math.sin,el=Math.tan,ec=Math.PI,eu=ec/2,ef=ec/4,ed=Math.SQRT1_2,eh=sqrt(2),ep=sqrt(ec),eg=2*ec,em=180/ec,ey=ec/180;function sinci(i){return i?i/Math.sin(i):1}function asin(i){return i>1?eu:i<-1?-eu:Math.asin(i)}function acos(i){return i>1?0:i<-1?ec:Math.acos(i)}function sqrt(i){return i>0?Math.sqrt(i):0}function tanh(i){return((i=X(2*i))-1)/(i+1)}function sinh(i){return(X(i)-X(-i))/2}function cosh(i){return(X(i)+X(-i))/2}function arsinh(i){return ee(i+sqrt(i*i+1))}function arcosh(i){return ee(i+sqrt(i*i-1))}function airyRaw(i){var o=el(i/2),s=2*ee(Z(i/2))/(o*o);function forward(i,o){var _=Z(i),F=Z(o),N=es(o),j=F*_,X=-((1-j?ee((1+j)/2)/(1-j):-.5)+s/(1+j));return[X*F*es(i),X*N]}return forward.invert=function(o,_){var N,X=sqrt(o*o+_*_),$=-i/2,et=50;if(!X)return[0,0];do{var er=$/2,en=Z(er),ei=es(er),eo=ei/en,el=-ee(F(en));$-=N=(2/eo*el-s*eo-X)/(-el/(ei*ei)+1-s/(2*en*en))*(en<0?.7:1)}while(F(N)>1e-6&&--et>0);var ec=es($);return[j(o*ec,X*Z($)),asin(_*ec/X)]},forward}function airy(){var i=eu,o=(0,_.r)(airyRaw),s=o(i);return s.radius=function(s){return arguments.length?o(i=s*ey):i*em},s.scale(179.976).clipAngle(147)}function aitoffRaw(i,o){var s=Z(o),_=sinci(acos(s*Z(i/=2)));return[2*s*es(i)*_,es(o)*_]}function aitoff(){return(0,_.Z)(aitoffRaw).scale(152.63)}function armadilloRaw(i){var o=es(i),s=Z(i),_=i>=0?1:-1,N=el(_*i),X=(1+o-s)/2;function forward(i,F){var $=Z(F),ee=Z(i/=2);return[(1+$)*es(i),(_*F>-j(ee,N)-.001?0:-(10*_))+X+es(F)*s-(1+$)*o*ee]}return forward.invert=function(i,$){var ee=0,et=0,er=50;do{var en=Z(ee),ei=es(ee),eo=Z(et),el=es(et),ec=1+eo,eu=ec*ei-i,ef=X+el*s-ec*o*en-$,ed=ec*en/2,eh=-ei*el,ep=o*ec*ei/2,eg=s*eo+o*en*el,em=eh*ep-eg*ed,ey=(ef*eh-eu*eg)/em/2,ev=(eu*ep-ef*ed)/em;F(ev)>2&&(ev/=2),ee-=ey,et-=ev}while((F(ey)>1e-6||F(ev)>1e-6)&&--er>0);return _*et>-j(Z(ee),N)-.001?[2*ee,et]:null},forward}function armadillo(){var i=20*ey,o=i>=0?1:-1,s=el(o*i),F=(0,_.r)(armadilloRaw),N=F(i),X=N.stream;return N.parallel=function(_){return arguments.length?(s=el((o=(i=_*ey)>=0?1:-1)*i),F(i)):i*em},N.stream=function(_){var F=N.rotate(),$=X(_),ee=(N.rotate([0,0]),X(_)),et=N.precision();return N.rotate(F),$.sphere=function(){ee.polygonStart(),ee.lineStart();for(var _=-180*o;o*_<180;_+=90*o)ee.point(_,90*o);if(i)for(;o*(_-=3*o*et)>=-180;)ee.point(_,-(o*j(Z(_*ey/2),s))*em);ee.lineEnd(),ee.polygonEnd()},$},N.scale(218.695).center([0,28.0974])}function augustRaw(i,o){var s=el(o/2),_=sqrt(1-s*s),F=1+_*Z(i/=2),N=es(i)*_/F,j=s/F,X=N*N,$=j*j;return[4/3*N*(3+X-3*$),4/3*j*(3+3*X-$)]}function august(){return(0,_.Z)(augustRaw).scale(66.1603)}aitoffRaw.invert=function(i,o){if(!(i*i+4*o*o>ec*ec+1e-6)){var s=i,_=o,N=25;do{var j,X=es(s),$=es(s/2),ee=Z(s/2),et=es(_),er=Z(_),en=es(2*_),ei=et*et,eo=er*er,el=$*$,eu=1-eo*ee*ee,ef=eu?acos(er*ee)*sqrt(j=1/eu):j=0,ed=2*ef*er*$-i,eh=ef*et-o,ep=j*(eo*el+ef*er*ee*ei),eg=j*(.5*X*en-2*ef*et*$),em=.25*j*(en*$-ef*et*eo*X),ey=j*(ei*ee+ef*el*er),ev=eg*em-ey*ep;if(!ev)break;var ex=(eh*eg-ed*ey)/ev,e_=(ed*em-eh*ep)/ev;s-=ex,_-=e_}while((F(ex)>1e-6||F(e_)>1e-6)&&--N>0);return[s,_]}},augustRaw.invert=function(i,o){if(o*=3/8,!(i*=3/8)&&F(o)>1)return null;var s=1+i*i+o*o,_=sqrt((s-sqrt(s*s-4*o*o))/2),N=asin(_)/3,X=_?arcosh(F(o/_))/3:arsinh(F(i))/3,$=Z(N),ee=cosh(X),et=ee*ee-$*$;return[2*eo(i)*j(sinh(X)*$,.25-et),2*eo(o)*j(ee*es(N),.25+et)]};var ev=sqrt(8),ex=ee(1+eh);function bakerRaw(i,o){var s=F(o);return s<ef?[i,ee(el(ef+o/2))]:[i*Z(s)*(2*eh-1/es(s)),eo(o)*(2*eh*(s-ef)-ee(el(s/2)))]}function baker(){return(0,_.Z)(bakerRaw).scale(112.314)}bakerRaw.invert=function(i,o){if((_=F(o))<ex)return[i,2*N(X(o))-eu];var s,_,j=ef,$=25;do{var et=Z(j/2),er=el(j/2);j-=s=(ev*(j-ef)-ee(er)-_)/(ev-et*et/(2*er))}while(F(s)>1e-12&&--$>0);return[i/(Z(j)*(ev-1/es(j))),eo(o)*j]};var e_=s(17889);function berghausRaw(i){var o=2*ec/i;function forward(i,s){var _=(0,e_.N)(i,s);if(F(i)>eu){var N=j(_[1],_[0]),X=sqrt(_[0]*_[0]+_[1]*_[1]),$=o*ei((N-eu)/o)+eu,ee=j(es(N-=$),2-Z(N));N=$+asin(ec/X*es(ee))-ee,_[0]=X*Z(N),_[1]=X*es(N)}return _}return forward.invert=function(i,s){var _=sqrt(i*i+s*s);if(_>eu){var F=j(s,i),X=o*ei((F-eu)/o)+eu,$=F>X?-1:1,ee=_*Z(X-F),et=1/el($*acos((ee-ec)/sqrt(ec*(ec-2*ee)+_*_)));i=_*Z(F=X+2*N((et+$*sqrt(et*et-3))/3)),s=_*es(F)}return e_.N.invert(i,s)},forward}function berghaus(){var i=5,o=(0,_.r)(berghausRaw),s=o(i),F=s.stream,N=-Z(.01*ey),X=es(.01*ey);return s.lobes=function(s){return arguments.length?o(i=+s):i},s.stream=function(o){var _=s.rotate(),$=F(o),ee=(s.rotate([0,0]),F(o));return s.rotate(_),$.sphere=function(){ee.polygonStart(),ee.lineStart();for(var o=0,s=360/i,_=2*ec/i,F=90-180/i,$=eu;o<i;++o,F-=s,$-=_)ee.point(j(X*Z($),N)*em,asin(X*es($))*em),F<-90?(ee.point(-90,-180-F-.01),ee.point(-90,-180-F+.01)):(ee.point(90,F+.01),ee.point(90,F-.01));ee.lineEnd(),ee.polygonEnd()},$},s.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ew=s(12956);function hammerRaw(i,o){if(arguments.length<2&&(o=i),1===o)return ew.l;if(o===1/0)return hammerQuarticAuthalicRaw;function forward(s,_){var F=(0,ew.l)(s/o,_);return F[0]*=i,F}return forward.invert=function(s,_){var F=ew.l.invert(s/i,_);return F[0]*=o,F},forward}function hammerQuarticAuthalicRaw(i,o){return[i*Z(o)/Z(o/=2),2*es(o)]}function hammer(){var i=2,o=(0,_.r)(hammerRaw),s=o(i);return s.coefficient=function(s){return arguments.length?o(i=+s):i},s.scale(169.529)}function solve(i,o,s){var _,N,j,Z=100;s=void 0===s?0:+s,o=+o;do(N=i(s))===(j=i(s+1e-6))&&(j=N+1e-6),s-=_=-.000001*(N-o)/(N-j);while(Z-- >0&&F(_)>1e-6);return Z<0?NaN:s}function solve2d(i,o,s){return void 0===o&&(o=40),void 0===s&&(s=1e-12),function(_,N,j,Z){var X,$,ee;j=void 0===j?0:+j,Z=void 0===Z?0:+Z;for(var et=0;et<o;et++){var er=i(j,Z),en=er[0]-_,ei=er[1]-N;if(F(en)<s&&F(ei)<s)break;var eo=en*en+ei*ei;if(eo>X){j-=$/=2,Z-=ee/=2;continue}X=eo;var es=(j>0?-1:1)*s,el=(Z>0?-1:1)*s,ec=i(j+es,Z),eu=i(j,Z+el),ef=(ec[0]-er[0])/es,ed=(ec[1]-er[1])/es,eh=(eu[0]-er[0])/el,ep=(eu[1]-er[1])/el,eg=ep*ef-ed*eh,em=(.5>F(eg)?.5:1)/eg;if($=(ei*eh-en*ep)*em,ee=(en*ed-ei*ef)*em,j+=$,Z+=ee,F($)<s&&F(ee)<s)break}return[j,Z]}}function bertin1953Raw(){var i=hammerRaw(1.68,2);function forward(o,s){if(o+s<-1.4){var _=(o-s+1.6)*(o+s+1.4)/8;o+=_,s-=.8*_*es(s+ec/2)}var F=i(o,s),N=(1-Z(o*s))/12;return F[1]<0&&(F[0]*=1+N),F[1]>0&&(F[1]*=1+N/1.5*F[0]*F[0]),F}return forward.invert=solve2d(forward),forward}function bertin(){return(0,_.Z)(bertin1953Raw()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function mollweideBromleyTheta(i,o){var s,_=i*es(o),N=30;do o-=s=(o+es(o)-_)/(1+Z(o));while(F(s)>1e-6&&--N>0);return o/2}function mollweideBromleyRaw(i,o,s){function forward(_,F){return[i*_*Z(F=mollweideBromleyTheta(s,F)),o*es(F)]}return forward.invert=function(_,F){return[_/(i*Z(F=asin(F/o))),asin((2*F+es(2*F))/s)]},forward}hammerQuarticAuthalicRaw.invert=function(i,o){var s=2*asin(o/2);return[i*Z(s/2)/Z(s),s]};var eT=mollweideBromleyRaw(eh/eu,eh,ec);function mollweide(){return(0,_.Z)(eT).scale(169.529)}function boggsRaw(i,o){var s=mollweideBromleyTheta(ec,o);return[2.00276*i/(1/Z(o)+1.11072/Z(s)),(o+eh*es(s))/2.00276]}function boggs(){return(0,_.Z)(boggsRaw).scale(160.857)}function parallel1(i){var o=0,s=(0,_.r)(i),F=s(o);return F.parallel=function(i){return arguments.length?s(o=i*ey):o*em},F}function sinusoidalRaw(i,o){return[i*Z(o),o]}function sinusoidal(){return(0,_.Z)(sinusoidalRaw).scale(152.63)}function bonneRaw(i){if(!i)return sinusoidalRaw;var o=1/el(i);function forward(s,_){var F=o+i-_,N=F?s*Z(_)/F:F;return[F*es(N),o-F*Z(N)]}return forward.invert=function(s,_){var F=sqrt(s*s+(_=o-_)*_),N=o+i-F;return[F/Z(N)*j(s,_),N]},forward}function bonne(){return parallel1(bonneRaw).scale(123.082).center([0,26.1441]).parallel(45)}function bottomleyRaw(i){function forward(o,s){var _=eu-s,F=_?o*i*es(_)/_:_;return[_*es(F)/i,eu-_*Z(F)]}return forward.invert=function(o,s){var _=o*i,F=eu-s,N=sqrt(_*_+F*F),Z=j(_,F);return[(N?N/es(N):1)*Z/i,eu-N]},forward}function bottomley(){var i=.5,o=(0,_.r)(bottomleyRaw),s=o(i);return s.fraction=function(s){return arguments.length?o(i=+s):i},s.scale(158.837)}boggsRaw.invert=function(i,o){var s,_,N=2.00276*o,j=o<0?-ef:ef,X=25;do _=N-eh*es(j),j-=s=(es(2*j)+2*j-ec*es(_))/(2*Z(2*j)+2+ec*Z(_)*eh*Z(j));while(F(s)>1e-6&&--X>0);return[i*(1/Z(_=N-eh*es(j))+1.11072/Z(j))/2.00276,_]},sinusoidalRaw.invert=function(i,o){return[i/Z(o),o]};var ek=mollweideBromleyRaw(1,4/ec,ec);function bromley(){return(0,_.Z)(ek).scale(152.63)}var eA=s(66624),eS=s(49386);function distance(i,o,s,_,N,X){var $,ee=Z(X);if(F(i)>1||F(X)>1)$=acos(s*N+o*_*ee);else{var et=es(i/2),er=es(X/2);$=2*asin(sqrt(et*et+o*_*er*er))}return F($)>1e-6?[$,j(_*es(X),o*N-s*_*ee)]:[0,0]}function angle(i,o,s){return acos((i*i+o*o-s*s)/(2*i*o))}function longitude(i){return i-2*ec*$((i+ec)/(2*ec))}function chamberlinRaw(i,o,s){for(var _,F=[[i[0],i[1],es(i[1]),Z(i[1])],[o[0],o[1],es(o[1]),Z(o[1])],[s[0],s[1],es(s[1]),Z(s[1])]],N=F[2],j=0;j<3;++j,N=_)_=F[j],N.v=distance(_[1]-N[1],N[3],N[2],_[3],_[2],_[0]-N[0]),N.point=[0,0];var X=angle(F[0].v[0],F[2].v[0],F[1].v[0]),$=angle(F[0].v[0],F[1].v[0],F[2].v[0]),ee=ec-X;F[2].point[1]=0,F[0].point[0]=-(F[1].point[0]=F[0].v[0]/2);var et=[F[2].point[0]=F[0].point[0]+F[2].v[0]*Z(X),2*(F[0].point[1]=F[1].point[1]=F[2].v[0]*es(X))];return function(i,o){var s,_=es(o),N=Z(o),j=[,,,];for(s=0;s<3;++s){var X=F[s];if(j[s]=distance(o-X[1],X[3],X[2],N,_,i-X[0]),!j[s][0])return X.point;j[s][1]=longitude(j[s][1]-X.v[1])}var er=et.slice();for(s=0;s<3;++s){var en=2==s?0:s+1,ei=angle(F[s].v[0],j[s][0],j[en][0]);j[s][1]<0&&(ei=-ei),s?1==s?(ei=$-ei,er[0]-=j[s][0]*Z(ei),er[1]-=j[s][0]*es(ei)):(ei=ee-ei,er[0]+=j[s][0]*Z(ei),er[1]+=j[s][0]*es(ei)):(er[0]+=j[s][0]*Z(ei),er[1]-=j[s][0]*es(ei))}return er[0]/=3,er[1]/=3,er}}function pointRadians(i){return i[0]*=ey,i[1]*=ey,i}function chamberlinAfrica(){return chamberlin([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function chamberlin(i,o,s){var F=(0,eA.Z)({type:"MultiPoint",coordinates:[i,o,s]}),N=[-F[0],-F[1]],j=(0,eS.Z)(N),Z=chamberlinRaw(pointRadians(j(i)),pointRadians(j(o)),pointRadians(j(s)));Z.invert=solve2d(Z);var X=(0,_.Z)(Z).rotate(N),$=X.center;return delete X.rotate,X.center=function(i){return arguments.length?$(j(i)):j.invert($())},X.clipAngle(90)}function collignonRaw(i,o){var s=sqrt(1-es(o));return[2/ep*i*s,ep*(1-s)]}function collignon(){return(0,_.Z)(collignonRaw).scale(95.6464).center([0,30])}function craigRaw(i){var o=el(i);function forward(i,s){return[i,(i?i/es(i):1)*(es(s)*Z(i)-o*Z(s))]}return forward.invert=o?function(i,s){i&&(s*=es(i)/i);var _=Z(i);return[i,2*j(sqrt(_*_+o*o-s*s)-_,o-s)]}:function(i,o){return[i,asin(i?o*el(i)/i:o)]},forward}function craig(){return parallel1(craigRaw).scale(249.828).clipAngle(90)}collignonRaw.invert=function(i,o){var s=(s=o/ep-1)*s;return[s>0?i*sqrt(ec/s)/2:0,asin(1-s)]};var eM=sqrt(3);function crasterRaw(i,o){return[eM*i*(2*Z(2*o/3)-1)/ep,eM*ep*es(o/3)]}function craster(){return(0,_.Z)(crasterRaw).scale(156.19)}function cylindricalEqualAreaRaw(i){var o=Z(i);function forward(i,s){return[i*o,es(s)/o]}return forward.invert=function(i,s){return[i/o,asin(s*o)]},forward}function cylindricalEqualArea(){return parallel1(cylindricalEqualAreaRaw).parallel(38.58).scale(195.044)}function cylindricalStereographicRaw(i){var o=Z(i);function forward(i,s){return[i*o,(1+o)*el(s/2)]}return forward.invert=function(i,s){return[i/o,2*N(s/(1+o))]},forward}function cylindricalStereographic(){return parallel1(cylindricalStereographicRaw).scale(124.75)}function eckert1Raw(i,o){var s=sqrt(8/(3*ec));return[s*i*(1-F(o)/ec),s*o]}function eckert1(){return(0,_.Z)(eckert1Raw).scale(165.664)}function eckert2Raw(i,o){var s=sqrt(4-3*es(F(o)));return[2/sqrt(6*ec)*i*s,eo(o)*sqrt(2*ec/3)*(2-s)]}function eckert2(){return(0,_.Z)(eckert2Raw).scale(165.664)}function eckert3Raw(i,o){var s=sqrt(ec*(4+ec));return[2/s*i*(1+sqrt(1-4*o*o/(ec*ec))),4/s*o]}function eckert3(){return(0,_.Z)(eckert3Raw).scale(180.739)}function eckert4Raw(i,o){var s=(2+eu)*es(o);o/=2;for(var _=0,N=1/0;_<10&&F(N)>1e-6;_++){var j=Z(o);o-=N=(o+es(o)*(j+2)-s)/(2*j*(1+j))}return[2/sqrt(ec*(4+ec))*i*(1+Z(o)),2*sqrt(ec/(4+ec))*es(o)]}function eckert4(){return(0,_.Z)(eckert4Raw).scale(180.739)}function eckert5Raw(i,o){return[i*(1+Z(o))/sqrt(2+ec),2*o/sqrt(2+ec)]}function eckert5(){return(0,_.Z)(eckert5Raw).scale(173.044)}function eckert6Raw(i,o){for(var s=(1+eu)*es(o),_=0,N=1/0;_<10&&F(N)>1e-6;_++)o-=N=(o+es(o)-s)/(1+Z(o));return s=sqrt(2+ec),[i*(1+Z(o))/s,2*o/s]}function eckert6(){return(0,_.Z)(eckert6Raw).scale(173.044)}crasterRaw.invert=function(i,o){var s=3*asin(o/(eM*ep));return[ep*i/(eM*(2*Z(2*s/3)-1)),s]},eckert1Raw.invert=function(i,o){var s=sqrt(8/(3*ec)),_=o/s;return[i/(s*(1-F(_)/ec)),_]},eckert2Raw.invert=function(i,o){var s=2-F(o)/sqrt(2*ec/3);return[i*sqrt(6*ec)/(2*s),eo(o)*asin((4-s*s)/3)]},eckert3Raw.invert=function(i,o){var s=sqrt(ec*(4+ec))/2;return[i*s/(1+sqrt(1-o*o*(4+ec)/(4*ec))),o*s/2]},eckert4Raw.invert=function(i,o){var s=o*sqrt((4+ec)/ec)/2,_=asin(s),F=Z(_);return[i/(2/sqrt(ec*(4+ec))*(1+F)),asin((_+s*(F+2))/(2+eu))]},eckert5Raw.invert=function(i,o){var s=sqrt(2+ec),_=o*s/2;return[s*i/(1+Z(_)),_]},eckert6Raw.invert=function(i,o){var s=1+eu,_=sqrt(s/2);return[2*i*_/(1+Z(o*=_)),asin((o+es(o))/s)]};var eC=3+2*eh;function eisenlohrRaw(i,o){var s=es(i/=2),_=Z(i),F=sqrt(Z(o)),j=Z(o/=2),X=es(o)/(j+eh*_*F),$=sqrt(2/(1+X*X)),et=sqrt((eh*j+(_+s)*F)/(eh*j+(_-s)*F));return[eC*($*(et-1/et)-2*ee(et)),eC*($*X*(et+1/et)-2*N(X))]}function eisenlohr(){return(0,_.Z)(eisenlohrRaw).scale(62.5271)}eisenlohrRaw.invert=function(i,o){if(!(s=augustRaw.invert(i/1.2,1.065*o)))return null;var s,_=s[0],j=s[1],X=20;i/=eC,o/=eC;do{var $=_/2,en=j/2,ei=es($),eo=Z($),el=es(en),ec=Z(en),ef=Z(j),ep=sqrt(ef),eg=el/(ec+eh*eo*ep),em=eg*eg,ey=sqrt(2/(1+em)),ev=(eh*ec+(eo+ei)*ep)/(eh*ec+(eo-ei)*ep),ex=sqrt(ev),e_=ex-1/ex,ew=ex+1/ex,eT=ey*e_-2*ee(ex)-i,ek=ey*eg*ew-2*N(eg)-o,eA=el&&ed*ep*ei*em/el,eS=(eh*eo*ec+ep)/(2*(ec+eh*eo*ep)*(ec+eh*eo*ep)*ep),eM=-.5*eg*ey*ey*ey,eE=eM*eA,eL=eM*eS,eP=(eP=2*ec+eh*ep*(eo-ei))*eP*ex,eI=(eh*eo*ec*ep+ef)/eP,eO=-(eh*ei*el)/(ep*eP),eD=e_*eE-2*eI/ex+ey*(eI+eI/ev),eR=e_*eL-2*eO/ex+ey*(eO+eO/ev),eB=eg*ew*eE-2*eA/(1+em)+ey*ew*eA+ey*eg*(eI-eI/ev),eF=eg*ew*eL-2*eS/(1+em)+ey*ew*eS+ey*eg*(eO-eO/ev),ez=eR*eB-eF*eD;if(!ez)break;var eN=(ek*eR-eT*eF)/ez,ej=(eT*eB-ek*eD)/ez;_-=eN,j=et(-eu,er(eu,j-ej))}while((F(eN)>1e-6||F(ej)>1e-6)&&--X>0);return 1e-6>F(F(j)-eu)?[0,j]:X&&[_,j]};var eE=Z(35*ey);function faheyRaw(i,o){var s=el(o/2);return[i*eE*sqrt(1-s*s),(1+eE)*s]}function fahey(){return(0,_.Z)(faheyRaw).scale(137.152)}function foucautRaw(i,o){var s=o/2,_=Z(s);return[2*i/ep*Z(o)*_*_,ep*el(s)]}function foucaut(){return(0,_.Z)(foucautRaw).scale(135.264)}function foucautSinusoidalRaw(i){var o=1-i,s=raw(ec,0)[0]-raw(-ec,0)[0],_=sqrt(2*(raw(0,eu)[1]-raw(0,-eu)[1])/s);function raw(s,_){var F=Z(_),N=es(_);return[F/(o+i*F)*s,o*_+i*N]}function forward(i,o){var s=raw(i,o);return[s[0]*_,s[1]/_]}function forwardMeridian(i){return forward(0,i)[1]}return forward.invert=function(s,F){var N=solve(forwardMeridian,F);return[s/_*(i+o/Z(N)),N]},forward}function foucautSinusoidal(){var i=.5,o=(0,_.r)(foucautSinusoidalRaw),s=o(i);return s.alpha=function(s){return arguments.length?o(i=+s):i},s.scale(168.725)}faheyRaw.invert=function(i,o){var s=o/(1+eE);return[i&&i/(eE*sqrt(1-s*s)),2*N(s)]},foucautRaw.invert=function(i,o){var s=N(o/ep),_=Z(s),F=2*s;return[i*ep/2/(Z(F)*_*_),F]};var eL=s(57962),eP=s(97492);function gilbertForward(i){return[i[0]/2,asin(el(i[1]/2*ey))*em]}function gilbertInvert(i){return[2*i[0],2*N(es(i[1]*ey))*em]}function gilbert(i){null==i&&(i=eL.Z);var o=i(),s=(0,eP.Z)().scale(em).precision(0).clipAngle(null).translate([0,0]);function gilbert(i){return o(gilbertForward(i))}function property(i){gilbert[i]=function(){return arguments.length?(o[i].apply(o,arguments),gilbert):o[i]()}}return o.invert&&(gilbert.invert=function(i){return gilbertInvert(o.invert(i))}),gilbert.stream=function(i){var _=o.stream(i),F=s.stream({point:function(i,o){_.point(i/2,asin(el(-o/2*ey))*em)},lineStart:function(){_.lineStart()},lineEnd:function(){_.lineEnd()},polygonStart:function(){_.polygonStart()},polygonEnd:function(){_.polygonEnd()}});return F.sphere=_.sphere,F},gilbert.rotate=function(i){return arguments.length?(s.rotate(i),gilbert):s.rotate()},gilbert.center=function(i){return arguments.length?(o.center(gilbertForward(i)),gilbert):gilbertInvert(o.center())},property("angle"),property("clipAngle"),property("clipExtent"),property("fitExtent"),property("fitHeight"),property("fitSize"),property("fitWidth"),property("scale"),property("translate"),property("precision"),gilbert.scale(249.5)}function gingeryRaw(i,o){var s=2*ec/o,_=i*i;function forward(o,N){var X=(0,e_.N)(o,N),$=X[0],ee=X[1],et=$*$+ee*ee;if(et>_){var er=sqrt(et),en=j(ee,$),eo=s*ei(en/s),el=en-eo,ef=i*Z(el),ed=(i*es(el)-el*es(ef))/(eu-ef),eh=gingeryLength(el,ed),ep=(ec-i)/gingeryIntegrate(eh,ef,ec);$=er;var eg,em=50;do $-=eg=(i+gingeryIntegrate(eh,ef,$)*ep-er)/(eh($)*ep);while(F(eg)>1e-6&&--em>0);ee=el*es($),$<eu&&(ee-=ed*($-eu));var ey=es(eo),ev=Z(eo);X[0]=$*ev-ee*ey,X[1]=$*ey+ee*ev}return X}return forward.invert=function(o,N){var X=o*o+N*N;if(X>_){var $=sqrt(X),ee=j(N,o),et=s*ei(ee/s),er=ee-et;o=$*Z(er),N=$*es(er);for(var en=o-eu,eo=es(o),el=N/eo,ef=o<eu?1/0:0,ed=10;;){var eh=i*es(el),ep=i*Z(el),eg=es(ep),em=eu-ep,ey=(eh-el*eg)/em,ev=gingeryLength(el,ey);if(1e-12>F(ef)||!--ed)break;el-=ef=(el*eo-ey*en-N)/(eo-2*en*(em*(ep+el*eh*Z(ep)-eg)-eh*(eh-el*eg))/(em*em))}o=($=i+gingeryIntegrate(ev,ep,o)*(ec-i)/gingeryIntegrate(ev,ep,ec))*Z(ee=et+el),N=$*es(ee)}return e_.N.invert(o,N)},forward}function gingeryLength(i,o){return function(s){var _=i*Z(s);return s<eu&&(_-=o),sqrt(1+_*_)}}function gingeryIntegrate(i,o,s){for(var _=(s-o)/50,F=i(o)+i(s),N=1,j=o;N<50;++N)F+=2*i(j+=_);return .5*F*_}function gingery(){var i=6,o=30*ey,s=Z(o),F=es(o),N=(0,_.r)(gingeryRaw),X=N(o,i),$=X.stream,ee=-Z(.01*ey),et=es(.01*ey);return X.radius=function(_){return arguments.length?(s=Z(o=_*ey),F=es(o),N(o,i)):o*em},X.lobes=function(s){return arguments.length?N(o,i=+s):i},X.stream=function(o){var _=X.rotate(),N=$(o),er=(X.rotate([0,0]),$(o));return X.rotate(_),N.sphere=function(){er.polygonStart(),er.lineStart();for(var o=0,_=2*ec/i,N=0;o<i;++o,N-=_)er.point(j(et*Z(N),ee)*em,asin(et*es(N))*em),er.point(j(F*Z(N-_/2),s)*em,asin(F*es(N-_/2))*em);er.lineEnd(),er.polygonEnd()},N},X.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function ginzburgPolyconic(i,o,s,_,N,j,X,$){function forward(F,ee){if(!ee)return[i*F/ec,0];var et=ee*ee,er=i+et*(o+et*(s+et*_)),en=ee*(N-1+et*(j-$+et*X)),ei=(er*er+en*en)/(2*en),eo=F*asin(er/ei)/ec;return[ei*es(eo),ee*(1+et*$)+ei*(1-Z(eo))]}return arguments.length<8&&($=0),forward.invert=function(ee,et){var er,en,ei=ec*ee/i,eo=et,el=50;do{var eu=eo*eo,ef=i+eu*(o+eu*(s+eu*_)),ed=eo*(N-1+eu*(j-$+eu*X)),eh=ef*ef+ed*ed,ep=2*ed,eg=eh/ep,em=eg*eg,ey=asin(ef/eg)/ec,ev=ei*ey,ex=ef*ef,e_=(2*o+eu*(4*s+6*eu*_))*eo,ew=N+eu*(3*j+5*eu*X),eT=(2*(ef*e_+ed*(ew-1))*ep-eh*(2*(ew-1)))/(ep*ep),ek=Z(ev),eA=es(ev),eS=eg*ek,eM=eg*eA,eC=ei/ec*(1/sqrt(1-ex/em))*(e_*eg-ef*eT)/em,eE=eM-ee,eL=eo*(1+eu*$)+eg-eS-et,eP=eT*eA+eS*eC,eI=eS*ey,eO=1+eT-(eT*ek-eM*eC),eD=eM*ey,eR=eP*eD-eO*eI;if(!eR)break;ei-=er=(eL*eP-eE*eO)/eR,eo-=en=(eE*eD-eL*eI)/eR}while((F(er)>1e-6||F(en)>1e-6)&&--el>0);return[ei,eo]},forward}var eI=ginzburgPolyconic(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function ginzburg4(){return(0,_.Z)(eI).scale(149.995)}var eO=ginzburgPolyconic(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function ginzburg5(){return(0,_.Z)(eO).scale(153.93)}var eD=ginzburgPolyconic(5/6*ec,-.62636,-.0344,0,1.3493,-.05524,0,.045);function ginzburg6(){return(0,_.Z)(eD).scale(130.945)}function ginzburg8Raw(i,o){var s=i*i,_=o*o;return[i*(1-.162388*_)*(.87-952426e-9*s*s),o*(1+_/12)]}function ginzburg8(){return(0,_.Z)(ginzburg8Raw).scale(131.747)}ginzburg8Raw.invert=function(i,o){var s,_=i,N=o,j=50;do{var Z=N*N;N-=s=(N*(1+Z/12)-o)/(1+Z/4)}while(F(s)>1e-6&&--j>0);j=50,i/=1-.162388*Z;do{var X=(X=_*_)*X;_-=s=(_*(.87-952426e-9*X)-i)/(.87-.00476213*X)}while(F(s)>1e-6&&--j>0);return[_,N]};var eR=ginzburgPolyconic(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function ginzburg9(){return(0,_.Z)(eR).scale(131.087)}function square(i){var o=i(eu,0)[0]-i(-eu,0)[0];function projectSquare(s,_){var F=s>0?-.5:.5,N=i(s+F*ec,_);return N[0]-=F*o,N}return i.invert&&(projectSquare.invert=function(s,_){var F=s>0?-.5:.5,N=i.invert(s+F*o,_),j=N[0]-F*ec;return j<-ec?j+=2*ec:j>ec&&(j-=2*ec),N[0]=j,N}),projectSquare}function gringortenRaw(i,o){var s=eo(i),_=eo(o),N=Z(o),X=Z(i)*N,$=es(i)*N,ee=es(_*o);i=F(j($,ee)),o=asin(X),F(i-eu)>1e-6&&(i%=eu);var et=gringortenHexadecant(i>ec/4?eu-i:i,o);return i>ec/4&&(ee=et[0],et[0]=-et[1],et[1]=-ee),et[0]*=s,et[1]*=-_,et}function gringortenHexadecant(i,o){if(o===eu)return[0,0];var s,_,N=es(o),j=N*N,X=j*j,$=1+X,ee=1+3*X,et=1-X,er=asin(1/sqrt($)),en=et+j*$*er,ei=(1-N)/en,eo=sqrt(ei),el=ei*$,ef=sqrt(el),ed=eo*et;if(0===i)return[0,-(ed+j*ef)];var eh,ep=Z(o),eg=1/ep,em=2*N*ep,ey=(-en*ep-(1-N)*((-3*j+er*ee)*em))/(en*en),ev=j*$*ey+ei*ee*em,ex=-eg*em,e_=-eg*ev,ew=-2*eg*(et*(.5*ey/eo)-2*j*eo*em),eT=4*i/ec;if(i>.222*ec||o<ec/4&&i>.175*ec){if(s=(ed+j*sqrt(el*(1+X)-ed*ed))/(1+X),i>ec/4)return[s,s];var ek=s,eA=.5*s;s=.5*(eA+ek),_=50;do{var eS=sqrt(el-s*s),eM=s*(ew+ex*eS)+e_*asin(s/ef)-eT;if(!eM)break;eM<0?eA=s:ek=s,s=.5*(eA+ek)}while(F(ek-eA)>1e-6&&--_>0)}else{s=1e-6,_=25;do{var eC=s*s,eE=sqrt(el-eC),eL=ew+ex*eE,eP=s*eL+e_*asin(s/ef)-eT,eI=eL+(e_-ex*eC)/eE;s-=eh=eE?eP/eI:0}while(F(eh)>1e-6&&--_>0)}return[s,-ed-j*sqrt(el-s*s)]}function gringortenHexadecantInvert(i,o){for(var s=0,_=1,N=.5,j=50;;){var X=N*N,$=sqrt(N),ee=asin(1/sqrt(1+X)),et=1-X+N*(1+X)*ee,er=(1-$)/et,en=sqrt(er),ei=er*(1+X),eo=en*(1-X),es=sqrt(ei-i*i),el=o+eo+N*es;if(1e-12>F(_-s)||0==--j||0===el)break;el>0?s=N:_=N,N=.5*(s+_)}if(!j)return null;var eu=asin($),ef=Z(eu),ed=1/ef,eh=2*$*ef,ep=(-et*ef-(1-$)*((-3*N+ee*(1+3*X))*eh))/(et*et),eg=(1-X)*(.5*ep/en)-2*N*en*eh,em=-ed*(N*(1+X)*ep+er*(1+3*X)*eh);return[ec/4*(i*(-2*ed*eg+-ed*eh*es)+em*asin(i/sqrt(ei))),eu]}function gringorten(){return(0,_.Z)(square(gringortenRaw)).scale(239.75)}function ellipticJi(i,o,s){var _,F,N;return i?(_=ellipticJ(i,s),o)?(N=(F=ellipticJ(o,1-s))[1]*F[1]+s*_[0]*_[0]*F[0]*F[0],[[_[0]*F[2]/N,_[1]*_[2]*F[0]*F[1]/N],[_[1]*F[1]/N,-_[0]*_[2]*F[0]*F[2]/N],[_[2]*F[1]*F[2]/N,-s*_[0]*_[1]*F[0]/N]]):[[_[0],0],[_[1],0],[_[2],0]]:[[0,(F=ellipticJ(o,1-s))[0]/F[1]],[1/F[1],0],[F[2]/F[1],0]]}function ellipticJ(i,o){if(o<1e-6)return $=es(i),_=Z(i),s=o*(i-$*_)/4,[$-s*_,_+s*$,1-o*$*$/2,i-s];if(o>=.999999)return s=(1-o)/4,_=cosh(i),$=tanh(i),j=1/_,[$+s*((ee=_*sinh(i))-i)/(_*_),j-s*$*j*(ee-i),j+s*$*j*(ee+i),2*N(X(i))-eu+s*(ee-i)/_];var s,_,j,$,ee,et=[1,0,0,0,0,0,0,0,0],er=[sqrt(o),0,0,0,0,0,0,0,0],en=0;for(_=sqrt(1-o),ee=1;F(er[en]/et[en])>1e-6&&en<8;)s=et[en++],er[en]=(s-_)/2,et[en]=(s+_)/2,_=sqrt(s*_),ee*=2;j=ee*et[en]*i;do j=(asin($=er[en]*es(_=j)/et[en])+j)/2;while(--en);return[es(j),$=Z(j),$/Z(j-_),j]}function ellipticFi(i,o,s){var _=F(i),j=sinh(F(o));if(_){var Z=1/es(_),X=1/(el(_)*el(_)),$=-(X+s*(j*j*Z*Z)-1+s),ee=(-$+sqrt($*$-4*((s-1)*X)))/2;return[ellipticF(N(1/sqrt(ee)),s)*eo(i),ellipticF(N(sqrt((ee/X-1)/s)),1-s)*eo(o)]}return[0,ellipticF(N(j),1-s)*eo(o)]}function ellipticF(i,o){if(!o)return i;if(1===o)return ee(el(i/2+ef));for(var s=1,_=sqrt(1-o),j=sqrt(o),Z=0;F(j)>1e-6;Z++){if(i%ec){var X=N(_*el(i)/s);X<0&&(X+=ec),i+=X+~~(i/ec)*ec}else i+=i;j=(s+_)/2,_=sqrt(s*_),j=((s=j)-_)/2}return i/(en(2,Z)*s)}function guyouRaw(i,o){var s=(eh-1)/(eh+1),_=sqrt(1-s*s),N=ellipticF(eu,_*_),j=X(-1*ee(el(ec/4+F(o)/2)))/sqrt(s),$=guyouComplexAtan(j*Z(-1*i),j*es(-1*i)),et=ellipticFi($[0],$[1],_*_);return[-et[1],(o>=0?1:-1)*(.5*N-et[0])]}function guyouComplexAtan(i,o){var s=i*i,_=o+1,F=1-s-o*o;return[.5*((i>=0?eu:-eu)-j(F,2*i)),-.25*ee(F*F+4*s)+.5*ee(_*_+s)]}function guyouComplexDivide(i,o){var s=o[0]*o[0]+o[1]*o[1];return[(i[0]*o[0]+i[1]*o[1])/s,(i[1]*o[0]-i[0]*o[1])/s]}function guyou(){return(0,_.Z)(square(guyouRaw)).scale(151.496)}gringortenRaw.invert=function(i,o){F(i)>1&&(i=2*eo(i)-i),F(o)>1&&(o=2*eo(o)-o);var s=eo(i),_=eo(o),N=-s*i,X=-_*o,$=X/N<1,ee=gringortenHexadecantInvert($?X:N,$?N:X),et=ee[0],er=ee[1],en=Z(er);return $&&(et=-eu-et),[s*(j(es(et)*en,-es(er))+ec),_*asin(Z(et)*en)]},guyouRaw.invert=function(i,o){var s=(eh-1)/(eh+1),_=sqrt(1-s*s),F=ellipticJi(.5*ellipticF(eu,_*_)-o,-i,_*_),Z=guyouComplexDivide(F[0],F[1]);return[-(j(Z[1],Z[0])/1),2*N(X(-.5*ee(s*Z[0]*Z[0]+s*Z[1]*Z[1])))-eu]};var eB=s(7613);function hammerRetroazimuthalRaw(i){var o=es(i),s=Z(i),_=hammerRetroazimuthalRotation(i);function forward(i,N){var j=_(i,N);i=j[0];var X=es(N=j[1]),$=Z(N),ee=Z(i),et=acos(o*X+s*$*ee),er=es(et),en=F(er)>1e-6?et/er:1;return[en*s*es(i),(F(i)>eu?en:-en)*(o*$-s*X*ee)]}return _.invert=hammerRetroazimuthalRotation(-i),forward.invert=function(i,s){var F=sqrt(i*i+s*s),N=-es(F),X=Z(F),$=F*X,ee=-s*N,et=F*o,er=sqrt($*$+ee*ee-et*et),en=j($*et+ee*er,ee*et-$*er),ei=(F>eu?-1:1)*j(i*N,F*Z(en)*X+s*es(en)*N);return _.invert(ei,en)},forward}function hammerRetroazimuthalRotation(i){var o=es(i),s=Z(i);return function(i,_){var F=Z(_),N=Z(i)*F,X=es(i)*F,$=es(_);return[j(X,N*s-$*o),asin($*s+N*o)]}}function hammerRetroazimuthal(){var i=0,o=(0,_.r)(hammerRetroazimuthalRaw),s=o(i),F=s.rotate,N=s.stream,j=(0,eB.Z)();return s.parallel=function(_){if(!arguments.length)return i*em;var F=s.rotate();return o(i=_*ey).rotate(F)},s.rotate=function(o){return arguments.length?(F.call(s,[o[0],o[1]-i*em]),j.center([-o[0],-o[1]]),s):(o=F.call(s),o[1]+=i*em,o)},s.stream=function(i){return(i=N(i)).sphere=function(){i.polygonStart();var o,s=j.radius(89.99)().coordinates[0],_=s.length-1,F=-1;for(i.lineStart();++F<_;)i.point((o=s[F])[0],o[1]);for(i.lineEnd(),_=(s=j.radius(90.01)().coordinates[0]).length-1,i.lineStart();--F>=0;)i.point((o=s[F])[0],o[1]);i.lineEnd(),i.polygonEnd()},i},s.scale(79.4187).parallel(45).clipAngle(179.999)}var eF=s(33064),ez=s(72736),eN=asin(1-.3333333333333333)*em,ej=cylindricalEqualAreaRaw(0);function healpixRaw(i){var o=eN*ey,s=collignonRaw(ec,o)[0]-collignonRaw(-ec,o)[0],_=ej(0,o)[1],N=collignonRaw(0,o)[1],j=ep-N,Z=eg/i,X=4/eg,ee=_+j*j*4/eg;function forward(en,ei){var eo,es=F(ei);if(es>o){var el=er(i-1,et(0,$((en+ec)/Z)));en+=ec*(i-1)/i-el*Z,(eo=collignonRaw(en,es))[0]=eo[0]*eg/s-eg*(i-1)/(2*i)+el*eg/i,eo[1]=_+(eo[1]-N)*4*j/eg,ei<0&&(eo[1]=-eo[1])}else eo=ej(en,ei);return eo[0]*=X,eo[1]/=ee,eo}return forward.invert=function(o,en){o/=X;var ei=F(en*=ee);if(ei>_){var eo=er(i-1,et(0,$((o+ec)/Z)));o=(o+ec*(i-1)/i-eo*Z)*s/eg;var es=collignonRaw.invert(o,.25*(ei-_)*eg/j+N);return es[0]-=ec*(i-1)/i-eo*Z,en<0&&(es[1]=-es[1]),es}return ej.invert(o,en)},forward}function sphereTop(i,o){return[i,1&o?89.999999:eN]}function sphereBottom(i,o){return[i,1&o?-89.999999:-eN]}function sphereNudge(i){return[.999999*i[0],i[1]]}function sphere(i){var o=[].concat((0,eF.w6)(-180,180+i/2,i).map(sphereTop),(0,eF.w6)(180,-180-i/2,-i).map(sphereBottom));return{type:"Polygon",coordinates:[180===i?o.map(sphereNudge):o]}}function healpix(){var i=4,o=(0,_.r)(healpixRaw),s=o(i),F=s.stream;return s.lobes=function(s){return arguments.length?o(i=+s):i},s.stream=function(o){var _=s.rotate(),N=F(o),j=(s.rotate([0,0]),F(o));return s.rotate(_),N.sphere=function(){(0,ez.Z)(sphere(180/i),j)},N},s.scale(239.75)}function hillRaw(i){var o,s=1+i,_=asin(es(1/s)),N=2*sqrt(ec/(o=ec+4*_*s)),X=.5*N*(s+sqrt(i*(2+i))),$=i*i,ee=s*s;function forward(et,er){var en,ei,eo=1-es(er);if(eo&&eo<2){var el,ef=eu-er,ed=25;do{var eh=es(ef),ep=Z(ef),eg=_+j(eh,s-ep),em=1+ee-2*s*ep;ef-=el=(ef-$*_-s*eh+em*eg-.5*eo*o)/(2*s*eh*eg)}while(F(el)>1e-12&&--ed>0);en=N*sqrt(em),ei=et*eg/ec}else en=N*(i+eo),ei=et*_/ec;return[en*es(ei),X-en*Z(ei)]}return forward.invert=function(i,F){var Z=i*i+(F-=X)*F,et=(1+ee-Z/(N*N))/(2*s),er=acos(et),en=es(er),ei=_+j(en,s-et);return[asin(i/sqrt(Z))*ec/ei,asin(1-2*(er-$*_-s*en+(1+ee-2*s*et)*ei)/o)]},forward}function hill(){var i=1,o=(0,_.r)(hillRaw),s=o(i);return s.ratio=function(s){return arguments.length?o(i=+s):i},s.scale(167.774).center([0,18.67])}function sinuMollweideRaw(i,o){return o>-.7109889596207567?(i=eT(i,o),i[1]+=.0528035274542,i):sinusoidalRaw(i,o)}function sinuMollweide(){return(0,_.Z)(sinuMollweideRaw).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function homolosineRaw(i,o){return F(o)>.7109889596207567?(i=eT(i,o),i[1]-=o>0?.0528035274542:-.0528035274542,i):sinusoidalRaw(i,o)}function homolosine(){return(0,_.Z)(homolosineRaw).scale(152.63)}function hufnagelRaw(i,o,s,_){var F=sqrt(4*ec/(2*s+(1+i-o/2)*es(2*s)+(i+o)/2*es(4*s)+o/2*es(6*s))),N=sqrt(_*es(s)*sqrt((1+i*Z(2*s)+o*Z(4*s))/(1+i+o))),j=s*mapping(1);function radius(s){return sqrt(1+i*Z(2*s)+o*Z(4*s))}function mapping(_){var F=_*s;return(2*F+(1+i-o/2)*es(2*F)+(i+o)/2*es(4*F)+o/2*es(6*F))/s}function inversemapping(i){return radius(i)*es(i)}var forward=function(i,o){var _=s*solve(mapping,j*es(o)/s,o/ec);isNaN(_)&&(_=s*eo(o));var X=F*radius(_);return[X*N*i/ec*Z(_),X/N*es(_)]};return forward.invert=function(i,o){var _=solve(inversemapping,o*N/F);return[i*ec/(Z(_)*F*N*radius(_)),asin(s*mapping(_/s)/j)]},0===s&&(F=sqrt(_/ec),(forward=function(i,o){return[i*F,es(o)/F]}).invert=function(i,o){return[i/F,asin(o*F)]}),forward}function hufnagel(){var i=1,o=0,s=45*ey,F=2,N=(0,_.r)(hufnagelRaw),j=N(i,o,s,F);return j.a=function(_){return arguments.length?N(i=+_,o,s,F):i},j.b=function(_){return arguments.length?N(i,o=+_,s,F):o},j.psiMax=function(_){return arguments.length?N(i,o,s=+_*ey,F):s*em},j.ratio=function(_){return arguments.length?N(i,o,s,F=+_):F},j.scale(180.739)}function adsimp(i,o,s,_,F,N,j,Z,X,$,ee){var et,er,en,ei,eo,es,el,ec,eu,ef;if(ee.nanEncountered)return NaN;if(et=s-o,er=i(o+.25*et),en=i(s-.25*et),isNaN(er)||isNaN(en)){ee.nanEncountered=!0;return}return(ef=((es=(ei=et*(_+4*er+F)/12)+(eo=et*(F+4*en+N)/12))-j)/15,$>X)?(ee.maxDepthCount++,es+ef):Math.abs(ef)<Z?es+ef:(el=o+.5*et,isNaN(ec=adsimp(i,o,el,_,er,F,ei,.5*Z,X,$+1,ee))||isNaN(eu=adsimp(i,el,s,F,en,N,eo,.5*Z,X,$+1,ee)))?(ee.nanEncountered=!0,NaN):ec+eu}function integrate(i,o,s,_,F){void 0===_&&(_=1e-8),void 0===F&&(F=20);var N=i(o),j=i(.5*(o+s)),Z=i(s),X=(N+4*j+Z)*(s-o)/6;return adsimp(i,o,s,N,j,Z,X,_,F,1,{maxDepthCount:0,nanEncountered:!1})}function hyperellipticalRaw(i,o,s){function elliptic(s){return i+(1-i)*en(1-en(s,o),1/o)}function z(i){return integrate(elliptic,0,i,1e-4)}for(var _=1/z(1),N=(1+1e-8)*_,j=[],Z=0;Z<=1e3;Z++)j.push(z(Z/1e3)*N);function Y(i){var o=0,s=1e3,_=500;do j[_]>i?s=_:o=_,_=o+s>>1;while(_>o);var F=j[_+1]-j[_];return F&&(F=(i-j[_+1])/F),(_+1+F)/1e3}var X=2*Y(1)/ec*_/s,forward=function(i,o){var s=Y(F(es(o))),_=elliptic(s)*i;return s/=X,[_,o>=0?s:-s]};return forward.invert=function(i,o){var s;return 1>F(o*=X)&&(s=eo(o)*asin(z(F(o))*_)),[i/elliptic(F(o)),s]},forward}function hyperelliptical(){var i=0,o=2.5,s=1.183136,F=(0,_.r)(hyperellipticalRaw),N=F(i,o,s);return N.alpha=function(_){return arguments.length?F(i=+_,o,s):i},N.k=function(_){return arguments.length?F(i,o=+_,s):o},N.gamma=function(_){return arguments.length?F(i,o,s=+_):s},N.scale(152.63)}function pointEqual(i,o){return 1e-6>F(i[0]-o[0])&&1e-6>F(i[1]-o[1])}function interpolateLine(i,o){for(var s,_,F,N=-1,j=i.length,Z=i[0],X=[];++N<j;){_=((s=i[N])[0]-Z[0])/o,F=(s[1]-Z[1])/o;for(var $=0;$<o;++$)X.push([Z[0]+$*_,Z[1]+$*F]);Z=s}return X.push(s),X}function interpolateSphere(i){var o,s,_,F,N,j,Z,X=[],$=i[0].length;for(Z=0;Z<$;++Z)s=(o=i[0][Z])[0][0],_=o[0][1],F=o[1][1],N=o[2][0],j=o[2][1],X.push(interpolateLine([[s+1e-6,_+1e-6],[s+1e-6,F-1e-6],[N-1e-6,F-1e-6],[N-1e-6,j+1e-6]],30));for(Z=i[1].length-1;Z>=0;--Z)s=(o=i[1][Z])[0][0],_=o[0][1],F=o[1][1],N=o[2][0],j=o[2][1],X.push(interpolateLine([[N-1e-6,j-1e-6],[N-1e-6,F+1e-6],[s+1e-6,F+1e-6],[s+1e-6,_-1e-6]],30));return{type:"Polygon",coordinates:[(0,eF.TS)(X)]}}function interrupted(i,o,s){function forward(s,_){for(var F=_<0?-1:1,N=o[+(_<0)],j=0,Z=N.length-1;j<Z&&s>N[j][2][0];++j);var X=i(s-N[j][1][0],_);return X[0]+=i(N[j][1][0],F*_>F*N[j][0][1]?N[j][0][1]:_)[0],X}s?forward.invert=s(forward):i.invert&&(forward.invert=function(s,_){for(var F=N[+(_<0)],j=o[+(_<0)],Z=0,X=F.length;Z<X;++Z){var $=F[Z];if($[0][0]<=s&&s<$[1][0]&&$[0][1]<=_&&_<$[1][1]){var ee=i.invert(s-i(j[Z][1][0],0)[0],_);return ee[0]+=j[Z][1][0],pointEqual(forward(ee[0],ee[1]),[s,_])?ee:null}}});var F,N,j=(0,_.Z)(forward),Z=j.stream;return j.stream=function(i){var o=j.rotate(),s=Z(i),_=(j.rotate([0,0]),Z(i));return j.rotate(o),s.sphere=function(){(0,ez.Z)(F,_)},s},j.lobes=function(s){return arguments.length?(F=interpolateSphere(s),N=(o=s.map(function(i){return i.map(function(i){return[[i[0][0]*ey,i[0][1]*ey],[i[1][0]*ey,i[1][1]*ey],[i[2][0]*ey,i[2][1]*ey]]})})).map(function(o){return o.map(function(o){var s,_=i(o[0][0],o[0][1])[0],F=i(o[2][0],o[2][1])[0],N=i(o[1][0],o[0][1])[1],j=i(o[1][0],o[1][1])[1];return N>j&&(s=N,N=j,j=s),[[_,N],[F,j]]})}),j):o.map(function(i){return i.map(function(i){return[[i[0][0]*em,i[0][1]*em],[i[1][0]*em,i[1][1]*em],[i[2][0]*em,i[2][1]*em]]})})},null!=o&&j.lobes(o),j}sinuMollweideRaw.invert=function(i,o){return o>-.7109889596207567?eT.invert(i,o-.0528035274542):sinusoidalRaw.invert(i,o)},homolosineRaw.invert=function(i,o){return F(o)>.7109889596207567?eT.invert(i,o+(o>0?.0528035274542:-.0528035274542)):sinusoidalRaw.invert(i,o)};var eV=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function interrupted_boggs(){return interrupted(boggsRaw,eV).scale(160.857)}var eU=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function interrupted_homolosine(){return interrupted(homolosineRaw,eU).scale(152.63)}var eH=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function interrupted_mollweide(){return interrupted(eT,eH).scale(169.529)}var eG=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function mollweideHemispheres(){return interrupted(eT,eG).scale(169.529).rotate([20,0])}var eW=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function interrupted_sinuMollweide(){return interrupted(sinuMollweideRaw,eW,solve2d).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var eZ=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function interrupted_sinusoidal(){return interrupted(sinusoidalRaw,eZ).scale(152.63).rotate([-20,0])}function kavrayskiy7Raw(i,o){return[3/eg*i*sqrt(ec*ec/3-o*o),o]}function kavrayskiy7(){return(0,_.Z)(kavrayskiy7Raw).scale(158.837)}function lagrangeRaw(i){function forward(o,s){if(1e-6>F(F(s)-eu))return[0,s<0?-2:2];var _=es(s),N=en((1+_)/(1-_),i/2),j=.5*(N+1/N)+Z(o*=i);return[2*es(o)/j,(N-1/N)/j]}return forward.invert=function(o,s){var _=F(s);if(1e-6>F(_-2))return o?null:[0,eo(s)*eu];if(_>2)return null;o/=2,s/=2;var N=o*o,Z=s*s,X=2*s/(1+N+Z);return X=en((1+X)/(1-X),1/i),[j(2*o,1-N-Z)/i,asin((X-1)/(X+1))]},forward}function lagrange(){var i=.5,o=(0,_.r)(lagrangeRaw),s=o(i);return s.spacing=function(s){return arguments.length?o(i=+s):i},s.scale(124.75)}kavrayskiy7Raw.invert=function(i,o){return[eg/3*i/sqrt(ec*ec/3-o*o),o]};var eY=ec/eh;function larriveeRaw(i,o){return[i*(1+sqrt(Z(o)))/2,o/(Z(o/2)*Z(i/6))]}function larrivee(){return(0,_.Z)(larriveeRaw).scale(97.2672)}function laskowskiRaw(i,o){var s=i*i,_=o*o;return[i*(.975534+_*(-.119161+-.0143059*s+-.0547009*_)),o*(1.00384+s*(.0802894+-.02855*_+199025e-9*s)+_*(.0998909+-.0491032*_))]}function laskowski(){return(0,_.Z)(laskowskiRaw).scale(139.98)}function littrowRaw(i,o){return[es(i)/Z(o),el(o)*Z(i)]}function littrow(){return(0,_.Z)(littrowRaw).scale(144.049).clipAngle(89.999)}function loximuthalRaw(i){var o=Z(i),s=el(ef+i/2);function forward(_,N){var j=N-i,Z=1e-6>F(j)?_*o:1e-6>F(Z=ef+N/2)||1e-6>F(F(Z)-eu)?0:_*j/ee(el(Z)/s);return[Z,j]}return forward.invert=function(_,N){var j,Z=N+i;return[1e-6>F(N)?_/o:1e-6>F(j=ef+Z/2)||1e-6>F(F(j)-eu)?0:_*ee(el(j)/s)/N,Z]},forward}function loximuthal(){return parallel1(loximuthalRaw).parallel(40).scale(158.837)}function millerRaw(i,o){return[i,1.25*ee(el(ef+.4*o))]}function miller(){return(0,_.Z)(millerRaw).scale(108.318)}function modifiedStereographicRaw(i){var o=i.length-1;function forward(s,_){for(var F,N=Z(_),j=2/(1+N*Z(s)),X=j*N*es(s),$=j*es(_),ee=o,et=i[ee],er=et[0],en=et[1];--ee>=0;)er=(et=i[ee])[0]+X*(F=er)-$*en,en=et[1]+X*en+$*F;return[er=X*(F=er)-$*en,en=X*en+$*F]}return forward.invert=function(s,_){var X=20,$=s,ee=_;do{for(var et,er=o,en=i[er],ei=en[0],eo=en[1],el=0,ec=0;--er>=0;)en=i[er],el=ei+$*(et=el)-ee*ec,ec=eo+$*ec+ee*et,ei=en[0]+$*(et=ei)-ee*eo,eo=en[1]+$*eo+ee*et;el=ei+$*(et=el)-ee*ec,ec=eo+$*ec+ee*et,ei=$*(et=ei)-ee*eo-s,eo=$*eo+ee*et-_;var eu,ef,ed=el*el+ec*ec;$-=eu=(ei*el+eo*ec)/ed,ee-=ef=(eo*el-ei*ec)/ed}while(F(eu)+F(ef)>1e-6*1e-6&&--X>0);if(X){var eh=sqrt($*$+ee*ee),ep=2*N(.5*eh),eg=es(ep);return[j($*eg,eh*Z(ep)),eh?asin(ee*eg/eh):0]}},forward}larriveeRaw.invert=function(i,o){var s=F(i),_=F(o),N=1e-6,j=eu;_<eY?j*=_/eY:N+=6*acos(eY/_);for(var X=0;X<25;X++){var $=es(j),ee=sqrt(Z(j)),et=es(j/2),er=Z(j/2),en=es(N/6),ei=Z(N/6),eo=.5*N*(1+ee)-s,el=j/(er*ei)-_,ec=ee?-.25*N*$/ee:0,ef=.5*(1+ee),ed=(1+.5*j*et/er)/(er*ei),eh=j/er*(en/6)/(ei*ei),ep=ec*eh-ed*ef,eg=(eo*eh-el*ef)/ep,em=(el*ec-eo*ed)/ep;if(j-=eg,N-=em,1e-6>F(eg)&&1e-6>F(em))break}return[i<0?-N:N,o<0?-j:j]},laskowskiRaw.invert=function(i,o){var s=eo(i)*ec,_=o/2,N=50;do{var j=s*s,Z=_*_,X=s*_,$=s*(.975534+Z*(-.119161+-.0143059*j+-.0547009*Z))-i,ee=_*(1.00384+j*(.0802894+-.02855*Z+199025e-9*j)+Z*(.0998909+-.0491032*Z))-o,et=.975534-Z*(.119161+3*j*.0143059+.0547009*Z),er=-X*(.238322+.2188036*Z+.0286118*j),en=X*(.1605788+7961e-7*j+-.0571*Z),ei=1.00384+j*(.0802894+199025e-9*j)+Z*(3*(.0998909-.02855*j)-.245516*Z),es=er*en-ei*et,el=(ee*er-$*ei)/es,eu=($*en-ee*et)/es;s-=el,_-=eu}while((F(el)>1e-6||F(eu)>1e-6)&&--N>0);return N&&[s,_]},littrowRaw.invert=function(i,o){var s=i*i,_=o*o+1,F=s+_,N=i?ed*sqrt((F-sqrt(F*F-4*s))/s):1/sqrt(_);return[asin(i*N),eo(o)*acos(N)]},millerRaw.invert=function(i,o){return[i,2.5*N(X(.8*o))-.625*ec]};var eX=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],eK=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],eJ=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],e$=[[.9245,0],[0,0],[.01943,0]],eQ=[[.721316,0],[0,0],[-.00881625,-.00617325]];function modifiedStereographicAlaska(){return modifiedStereographic(eX,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function modifiedStereographicGs48(){return modifiedStereographic(eK,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function modifiedStereographicGs50(){return modifiedStereographic(eJ,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function modifiedStereographicMiller(){return modifiedStereographic(e$,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function modifiedStereographicLee(){return modifiedStereographic(eQ,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function modifiedStereographic(i,o){var s=(0,_.Z)(modifiedStereographicRaw(i)).rotate(o).clipAngle(90),F=(0,eS.Z)(o),N=s.center;return delete s.rotate,s.center=function(i){return arguments.length?N(F(i)):F.invert(N())},s}var e0=sqrt(6),e1=sqrt(7);function mtFlatPolarParabolicRaw(i,o){var s=asin(7*es(o)/(3*e0));return[e0*i*(2*Z(2*s/3)-1)/e1,9*es(s/3)/e1]}function mtFlatPolarParabolic(){return(0,_.Z)(mtFlatPolarParabolicRaw).scale(164.859)}function mtFlatPolarQuarticRaw(i,o){for(var s,_=(1+ed)*es(o),N=o,j=0;j<25&&(N-=s=(es(N/2)+es(N)-_)/(.5*Z(N/2)+Z(N)),!(1e-6>F(s)));j++);return[i*(1+2*Z(N)/Z(N/2))/(3*eh),2*sqrt(3)*es(N/2)/sqrt(2+eh)]}function mtFlatPolarQuartic(){return(0,_.Z)(mtFlatPolarQuarticRaw).scale(188.209)}function mtFlatPolarSinusoidalRaw(i,o){for(var s,_=sqrt(6/(4+ec)),N=(1+ec/4)*es(o),j=o/2,X=0;X<25&&(j-=s=(j/2+es(j)-N)/(.5+Z(j)),!(1e-6>F(s)));X++);return[_*(.5+Z(j))*i/1.5,_*j]}function mtFlatPolarSinusoidal(){return(0,_.Z)(mtFlatPolarSinusoidalRaw).scale(166.518)}mtFlatPolarParabolicRaw.invert=function(i,o){var s=3*asin(o*e1/9);return[i*e1/(e0*(2*Z(2*s/3)-1)),asin(3*es(s)*e0/7)]},mtFlatPolarQuarticRaw.invert=function(i,o){var s=o*sqrt(2+eh)/(2*sqrt(3)),_=2*asin(s);return[3*eh*i/(1+2*Z(_)/Z(_/2)),asin((s+es(_))/(1+ed))]},mtFlatPolarSinusoidalRaw.invert=function(i,o){var s=sqrt(6/(4+ec)),_=o/s;return 1e-6>F(F(_)-eu)&&(_=_<0?-eu:eu),[1.5*i/(s*(.5+Z(_))),asin((_/2+es(_))/(1+ec/4))]};var e2=s(26867);function naturalEarth2Raw(i,o){var s=o*o,_=s*s,F=s*_;return[i*(.84719-.13063*s+F*F*(-.04515+.05494*s-.02326*_+.00331*F)),o*(1.01183+_*_*(-.02625+.01926*s-.00396*_))]}function naturalEarth2(){return(0,_.Z)(naturalEarth2Raw).scale(175.295)}function nellHammerRaw(i,o){return[i*(1+Z(o))/2,2*(o-el(o/2))]}function nellHammer(){return(0,_.Z)(nellHammerRaw).scale(152.63)}naturalEarth2Raw.invert=function(i,o){var s,_,N,j,Z=o,X=25;do N=(_=Z*Z)*_,Z-=s=(Z*(1.01183+N*N*(-.02625+.01926*_-.00396*N))-o)/(1.01183+N*N*(-.23625+.21186*_+-.05148*N));while(F(s)>1e-12&&--X>0);return N=(_=Z*Z)*_,j=_*N,[i/(.84719-.13063*_+j*j*(-.04515+.05494*_-.02326*N+.00331*j)),Z]},nellHammerRaw.invert=function(i,o){for(var s=o/2,_=0,N=1/0;_<10&&F(N)>1e-6;++_){var j=Z(o/2);o-=N=(o-el(o/2)-s)/(1-.5/(j*j))}return[2*i/(1+Z(o)),o]};var e3=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function quarticAuthalic(){return interrupted(hammerRaw(1/0),e3).rotate([20,0]).scale(152.63)}function nicolosiRaw(i,o){var s=es(o),_=Z(o),N=eo(i);if(0===i||F(o)===eu)return[0,o];if(0===o)return[i,0];if(F(i)===eu)return[i*_,eu*s];var j=ec/(2*i)-2*i/ec,X=2*o/ec,$=(1-X*X)/(s-X),ee=j*j,et=$*$,er=1+ee/et,en=1+et/ee,ei=(j*s/$-j/2)/er,el=(et*s/ee+$/2)/en,ef=el*el-(et*s*s/ee+$*s-1)/en;return[eu*(ei+sqrt(ei*ei+_*_/er)*N),eu*(el+sqrt(ef<0?0:ef)*eo(-o*j)*N)]}function nicolosi(){return(0,_.Z)(nicolosiRaw).scale(127.267)}function pattersonRaw(i,o){var s=o*o;return[i,o*(1.0148+s*s*(.23185+s*(-.14499+.02406*s)))]}function patterson(){return(0,_.Z)(pattersonRaw).scale(139.319)}function polyconicRaw(i,o){if(1e-6>F(o))return[i,0];var s=el(o),_=i*es(o);return[es(_)/s,o+(1-Z(_))/s]}function polyconic(){return(0,_.Z)(polyconicRaw).scale(103.74)}nicolosiRaw.invert=function(i,o){var s=(i/=eu)*i,_=s+(o/=eu)*o,F=ec*ec;return[i?(_-1+sqrt((1-_)*(1-_)+4*s))/(2*i)*eu:0,solve(function(i){return _*(ec*es(i)-2*i)*ec+4*i*i*(o-es(i))+2*ec*i-F*o},0)]},pattersonRaw.invert=function(i,o){o>1.790857183?o=1.790857183:o<-1.790857183&&(o=-1.790857183);var s,_=o;do{var N=_*_;_-=s=(_*(1.0148+N*N*(.23185+N*(-.14499+.02406*N)))-o)/(1.0148+N*N*(1.1592500000000001+N*(-1.01493+.21654*N)))}while(F(s)>1e-6);return[i,_]},polyconicRaw.invert=function(i,o){if(1e-6>F(o))return[i,0];var s,_=i*i+o*o,N=.5*o,j=10;do{var X=el(N),$=1/Z(N),ee=_-2*o*N+N*N;N-=s=(X*ee+2*(N-o))/(2+ee*$*$+2*(N-o)*X)}while(F(s)>1e-6&&--j>0);return X=el(N),[(F(o)<F(N+1/X)?asin(i*X):eo(o)*eo(i)*(acos(F(i*X))+eu))/es(N),N]};var e5=s(77338),e4=s(83074);function matrix(i,o){var s=subtract(i[1],i[0]),_=subtract(o[1],o[0]),F=matrix_angle(s,_),N=matrix_length(s)/matrix_length(_);return multiply([1,0,i[0][0],0,1,i[0][1]],multiply([N,0,0,0,N,0],multiply([Z(F),es(F),0,-es(F),Z(F),0],[1,0,-o[0][0],0,1,-o[0][1]])))}function inverse(i){var o=1/(i[0]*i[4]-i[1]*i[3]);return[o*i[4],-o*i[1],o*(i[1]*i[5]-i[2]*i[4]),-o*i[3],o*i[0],o*(i[2]*i[3]-i[0]*i[5])]}function multiply(i,o){return[i[0]*o[0]+i[1]*o[3],i[0]*o[1]+i[1]*o[4],i[0]*o[2]+i[1]*o[5]+i[2],i[3]*o[0]+i[4]*o[3],i[3]*o[1]+i[4]*o[4],i[3]*o[2]+i[4]*o[5]+i[5]]}function subtract(i,o){return[i[0]-o[0],i[1]-o[1]]}function matrix_length(i){return sqrt(i[0]*i[0]+i[1]*i[1])}function matrix_angle(i,o){return j(i[0]*o[1]-i[1]*o[0],i[0]*o[0]+i[1]*o[1])}function polyhedral(i,o,s){function recurse(i,o){if(i.edges=faceEdges(i.face),o.face){var s=i.shared=sharedEdge(i.face,o.face),_=matrix(s.map(o.project),s.map(i.project));i.transform=o.transform?multiply(o.transform,_):_;for(var F=o.edges,N=0,j=F.length;N<j;++N)polyhedral_pointEqual(s[0],F[N][1])&&polyhedral_pointEqual(s[1],F[N][0])&&(F[N]=i),polyhedral_pointEqual(s[0],F[N][0])&&polyhedral_pointEqual(s[1],F[N][1])&&(F[N]=i);for(N=0,j=(F=i.edges).length;N<j;++N)polyhedral_pointEqual(s[0],F[N][0])&&polyhedral_pointEqual(s[1],F[N][1])&&(F[N]=o),polyhedral_pointEqual(s[0],F[N][1])&&polyhedral_pointEqual(s[1],F[N][0])&&(F[N]=o)}else i.transform=o.transform;return i.children&&i.children.forEach(function(o){recurse(o,i)}),i}function forward(i,s){var _,F=o(i,s),N=F.project([i*em,s*em]);return(_=F.transform)?[_[0]*N[0]+_[1]*N[1]+_[2],-(_[3]*N[0]+_[4]*N[1]+_[5])]:(N[1]=-N[1],N)}function faceInvert(i,o){var s=i.project.invert,_=i.transform,F=o;if(_&&(F=[(_=inverse(_))[0]*F[0]+_[1]*F[1]+_[2],_[3]*F[0]+_[4]*F[1]+_[5]]),s&&i===faceDegrees(N=s(F)))return N;for(var N,j=i.children,Z=0,X=j&&j.length;Z<X;++Z)if(N=faceInvert(j[Z],o))return N}function faceDegrees(i){return o(i[0]*ey,i[1]*ey)}recurse(i,{transform:null}),hasInverse(i)&&(forward.invert=function(o,s){var _=faceInvert(i,[o,-s]);return _&&(_[0]*=ey,_[1]*=ey,_)});var F=(0,_.Z)(forward),N=F.stream;return F.stream=function(o){var s=F.rotate(),_=N(o),j=(F.rotate([0,0]),N(o));return F.rotate(s),_.sphere=function(){j.polygonStart(),j.lineStart(),outline(j,i),j.lineEnd(),j.polygonEnd()},_},F.angle(null==s?-30:s*em)}function outline(i,o,s){var _,N,j=o.edges,Z=j.length,X={type:"MultiPoint",coordinates:o.face},$=o.face.filter(function(i){return 90!==F(i[1])}),ee=(0,e5.Z)({type:"MultiPoint",coordinates:$}),et=!1,er=-1,en=ee[1][0]-ee[0][0],ei=180===en||360===en?[(ee[0][0]+ee[1][0])/2,(ee[0][1]+ee[1][1])/2]:(0,eA.Z)(X);if(s)for(;++er<Z&&j[er]!==s;);++er;for(var eo=0;eo<Z;++eo)Array.isArray(N=j[(eo+er)%Z])?(et||(i.point((_=(0,e4.Z)(N[0],ei)(1e-6))[0],_[1]),et=!0),i.point((_=(0,e4.Z)(N[1],ei)(1e-6))[0],_[1])):(et=!1,N!==s&&outline(i,N,o))}function polyhedral_pointEqual(i,o){return i&&o&&i[0]===o[0]&&i[1]===o[1]}function sharedEdge(i,o){for(var s,_,F=i.length,N=null,j=0;j<F;++j){s=i[j];for(var Z=o.length;--Z>=0;)if(_=o[Z],s[0]===_[0]&&s[1]===_[1]){if(N)return[N,s];N=s}}}function faceEdges(i){for(var o=i.length,s=[],_=i[o-1],F=0;F<o;++F)s.push([_,_=i[F]]);return s}function hasInverse(i){return i.project.invert||i.children&&i.children.some(hasInverse)}var e6=s(98936),e8=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],e7=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(i){return i.map(function(i){return e8[i]})});function butterfly(i){i=i||function(i){var o=(0,eA.Z)({type:"MultiPoint",coordinates:i});return(0,e6.Z)().scale(1).translate([0,0]).rotate([-o[0],-o[1]])};var o=e7.map(function(o){return{face:o,project:i(o)}});return[-1,0,0,1,0,1,4,5].forEach(function(i,s){var _=o[i];_&&(_.children||(_.children=[])).push(o[s])}),polyhedral(o[0],function(i,s){return o[i<-ec/2?s<0?6:4:i<0?s<0?2:0:i<ec/2?s<0?3:1:s<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var e9=2/sqrt(3);function collignonK(i,o){var s=collignonRaw(i,o);return[s[0]*e9,s[1]]}function polyhedral_collignon(i){i=i||function(i){var o=(0,eA.Z)({type:"MultiPoint",coordinates:i});return(0,_.Z)(collignonK).translate([0,0]).scale(1).rotate(o[1]>0?[-o[0],0]:[180-o[0],180])};var o=e7.map(function(o){return{face:o,project:i(o)}});return[-1,0,0,1,0,1,4,5].forEach(function(i,s){var _=o[i];_&&(_.children||(_.children=[])).push(o[s])}),polyhedral(o[0],function(i,s){return o[i<-ec/2?s<0?6:4:i<0?s<0?2:0:i<ec/2?s<0?3:1:s<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function waterman(i){i=i||function(i){var o=6===i.length?(0,eA.Z)({type:"MultiPoint",coordinates:i}):i[0];return(0,e6.Z)().scale(1).translate([0,0]).rotate([-o[0],-o[1]])};var o=e7.map(function(i){for(var o,s=i.map(cartesian),_=s.length,F=s[_-1],N=[],j=0;j<_;++j)o=s[j],N.push(spherical([.9486832980505138*F[0]+.31622776601683794*o[0],.9486832980505138*F[1]+.31622776601683794*o[1],.9486832980505138*F[2]+.31622776601683794*o[2]]),spherical([.9486832980505138*o[0]+.31622776601683794*F[0],.9486832980505138*o[1]+.31622776601683794*F[1],.9486832980505138*o[2]+.31622776601683794*F[2]])),F=o;return N}),s=[],_=[-1,0,0,1,0,1,4,5];o.forEach(function(i,F){for(var N=e7[F],j=N.length,Z=s[F]=[],X=0;X<j;++X)o.push([N[X],i[(2*X+2)%(2*j)],i[(2*X+1)%(2*j)]]),_.push(F),Z.push(cross(cartesian(i[(2*X+2)%(2*j)]),cartesian(i[(2*X+1)%(2*j)])))});var F=o.map(function(o){return{project:i(o),face:o}});function face(i,o){var _=Z(o),N=[_*Z(i),_*es(i),es(o)],j=i<-ec/2?o<0?6:4:i<0?o<0?2:0:i<ec/2?o<0?3:1:o<0?7:5,X=s[j];return F[0>dot(X[0],N)?8+3*j:0>dot(X[1],N)?8+3*j+1:0>dot(X[2],N)?8+3*j+2:j]}return _.forEach(function(i,o){var s=F[i];s&&(s.children||(s.children=[])).push(F[o])}),polyhedral(F[0],face).angle(-30).scale(110.625).center([0,45])}function dot(i,o){for(var s=0,_=i.length,F=0;s<_;++s)F+=i[s]*o[s];return F}function cross(i,o){return[i[1]*o[2]-i[2]*o[1],i[2]*o[0]-i[0]*o[2],i[0]*o[1]-i[1]*o[0]]}function spherical(i){return[j(i[1],i[0])*em,asin(et(-1,er(1,i[2])))*em]}function cartesian(i){var o=i[0]*ey,s=i[1]*ey,_=Z(s);return[_*Z(o),_*es(o),es(s)]}function noop(){}function clockwise(i){if((o=i.length)<4)return!1;for(var o,s=0,_=i[o-1][1]*i[0][0]-i[o-1][0]*i[0][1];++s<o;)_+=i[s-1][1]*i[s][0]-i[s-1][0]*i[s][1];return _<=0}function contains(i,o){for(var s=o[0],_=o[1],F=!1,N=0,j=i.length,Z=j-1;N<j;Z=N++){var X=i[N],$=X[0],ee=X[1],et=i[Z],er=et[0],en=et[1];ee>_^en>_&&s<(er-$)*(_-ee)/(en-ee)+$&&(F=!F)}return F}function project(i,o){var s,_=o.stream;if(!_)throw Error("invalid projection");switch(i&&i.type){case"Feature":s=projectFeature;break;case"FeatureCollection":s=projectFeatureCollection;break;default:s=projectGeometry}return s(i,_)}function projectFeatureCollection(i,o){return{type:"FeatureCollection",features:i.features.map(function(i){return projectFeature(i,o)})}}function projectFeature(i,o){return{type:"Feature",id:i.id,properties:i.properties,geometry:projectGeometry(i.geometry,o)}}function projectGeometryCollection(i,o){return{type:"GeometryCollection",geometries:i.geometries.map(function(i){return projectGeometry(i,o)})}}function projectGeometry(i,o){var s;if(!i)return null;if("GeometryCollection"===i.type)return projectGeometryCollection(i,o);switch(i.type){case"Point":case"MultiPoint":s=tr;break;case"LineString":case"MultiLineString":s=tn;break;case"Polygon":case"MultiPolygon":case"Sphere":s=ta;break;default:return null}return(0,ez.Z)(i,o(s)),s.result()}collignonK.invert=function(i,o){return collignonRaw.invert(i/e9,o)};var te=[],tt=[],tr={point:function(i,o){te.push([i,o])},result:function(){var i=te.length?te.length<2?{type:"Point",coordinates:te[0]}:{type:"MultiPoint",coordinates:te}:null;return te=[],i}},tn={lineStart:noop,point:function(i,o){te.push([i,o])},lineEnd:function(){te.length&&(tt.push(te),te=[])},result:function(){var i=tt.length?tt.length<2?{type:"LineString",coordinates:tt[0]}:{type:"MultiLineString",coordinates:tt}:null;return tt=[],i}},ta={polygonStart:noop,lineStart:noop,point:function(i,o){te.push([i,o])},lineEnd:function(){var i=te.length;if(i){do te.push(te[0].slice());while(++i<4);tt.push(te),te=[]}},polygonEnd:noop,result:function(){if(!tt.length)return null;var i=[],o=[];return tt.forEach(function(s){clockwise(s)?i.push([s]):o.push(s)}),o.forEach(function(o){var s=o[0];i.some(function(i){if(contains(i[0],s))return i.push(o),!0})||i.push([o])}),tt=[],i.length?i.length>1?{type:"MultiPolygon",coordinates:i}:{type:"Polygon",coordinates:i[0]}:null}};function quincuncial(i){var o=i(eu,0)[0]-i(-eu,0)[0];function projectQuincuncial(s,_){var N=F(s)<eu,j=i(N?s:s>0?s-ec:s+ec,_),Z=(j[0]-j[1])*ed,X=(j[0]+j[1])*ed;if(N)return[Z,X];var $=o*ed,ee=Z>0^X>0?-1:1;return[ee*Z-eo(X)*$,ee*X-eo(Z)*$]}return i.invert&&(projectQuincuncial.invert=function(s,_){var N=(s+_)*ed,j=(_-s)*ed,Z=F(N)<.5*o&&F(j)<.5*o;if(!Z){var X=o*ed,$=N>0^j>0?-1:1,ee=-$*s+(j>0?1:-1)*X,et=-$*_+(N>0?1:-1)*X;N=(-ee-et)*ed,j=(ee-et)*ed}var er=i.invert(N,j);return Z||(er[0]+=N>0?ec:-ec),er}),(0,_.Z)(projectQuincuncial).rotate([-90,-90,45]).clipAngle(179.999)}function quincuncial_gringorten(){return quincuncial(gringortenRaw).scale(176.423)}function peirce(){return quincuncial(guyouRaw).scale(111.48)}function quantize(i,o){if(!(0<=(o=+o)&&o<=20))throw Error("invalid digits");function quantizePoint(i){var s=i.length,_=2,F=Array(s);for(F[0]=+i[0].toFixed(o),F[1]=+i[1].toFixed(o);_<s;)F[_]=i[_],++_;return F}function quantizePoints(i){return i.map(quantizePoint)}function quantizePointsNoDuplicates(i){for(var o=quantizePoint(i[0]),s=[o],_=1;_<i.length;_++){var F=quantizePoint(i[_]);(F.length>2||F[0]!=o[0]||F[1]!=o[1])&&(s.push(F),o=F)}return 1===s.length&&i.length>1&&s.push(quantizePoint(i[i.length-1])),s}function quantizePolygon(i){return i.map(quantizePointsNoDuplicates)}function quantizeGeometry(i){var o;if(null==i)return i;switch(i.type){case"GeometryCollection":o={type:"GeometryCollection",geometries:i.geometries.map(quantizeGeometry)};break;case"Point":o={type:"Point",coordinates:quantizePoint(i.coordinates)};break;case"MultiPoint":o={type:i.type,coordinates:quantizePoints(i.coordinates)};break;case"LineString":o={type:i.type,coordinates:quantizePointsNoDuplicates(i.coordinates)};break;case"MultiLineString":case"Polygon":o={type:i.type,coordinates:quantizePolygon(i.coordinates)};break;case"MultiPolygon":o={type:"MultiPolygon",coordinates:i.coordinates.map(quantizePolygon)};break;default:return i}return null!=i.bbox&&(o.bbox=i.bbox),o}function quantizeFeature(i){var o={type:"Feature",properties:i.properties,geometry:quantizeGeometry(i.geometry)};return null!=i.id&&(o.id=i.id),null!=i.bbox&&(o.bbox=i.bbox),o}if(null!=i)switch(i.type){case"Feature":return quantizeFeature(i);case"FeatureCollection":var s={type:"FeatureCollection",features:i.features.map(quantizeFeature)};return null!=i.bbox&&(s.bbox=i.bbox),s;default:return quantizeGeometry(i)}return i}function rectangularPolyconicRaw(i){var o=es(i);function forward(s,_){var F=o?el(s*o/2)/o:s/2;if(!_)return[2*F,-i];var j=2*N(F*es(_)),X=1/el(_);return[es(j)*X,_+(1-Z(j))*X-i]}return forward.invert=function(s,_){if(1e-6>F(_+=i))return[o?2*N(o*s/2)/o:s,0];var j,X=s*s+_*_,$=0,ee=10;do{var et=el($),er=1/Z($),en=X-2*_*$+$*$;$-=j=(et*en+2*($-_))/(2+en*er*er+2*($-_)*et)}while(F(j)>1e-6&&--ee>0);var ei=s*(et=el($)),eo=el(F(_)<F($+1/et)?.5*asin(ei):.5*acos(ei)+ec/4)/es($);return[o?2*N(o*eo)/o:2*eo,$]},forward}function rectangularPolyconic(){return parallel1(rectangularPolyconicRaw).scale(131.215)}var ti=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function robinsonRaw(i,o){var s,_=er(18,36*F(o)/ec),N=$(_),j=_-N,Z=(s=ti[N])[0],X=s[1],ee=(s=ti[++N])[0],et=s[1],en=(s=ti[er(19,++N)])[0],ei=s[1];return[i*(ee+j*(en-Z)/2+j*j*(en-2*ee+Z)/2),(o>0?eu:-eu)*(et+j*(ei-X)/2+j*j*(ei-2*et+X)/2)]}function robinson(){return(0,_.Z)(robinsonRaw).scale(152.63)}function satelliteVerticalRaw(i){function forward(o,s){var _=Z(s),F=(i-1)/(i-_*Z(o));return[F*_*es(o),F*es(s)]}return forward.invert=function(o,s){var _=o*o+s*s,F=sqrt(_),N=(i-sqrt(1-_*(i+1)/(i-1)))/((i-1)/F+F/(i-1));return[j(o*N,F*sqrt(1-N*N)),F?asin(s*N/F):0]},forward}function satelliteRaw(i,o){var s=satelliteVerticalRaw(i);if(!o)return s;var _=Z(o),F=es(o);function forward(o,N){var j=s(o,N),Z=j[1],X=Z*F/(i-1)+_;return[j[0]*_/X,Z/X]}return forward.invert=function(o,N){var j=(i-1)/(i-1-N*F);return s.invert(j*o,j*N*_)},forward}function satellite(){var i=2,o=0,s=(0,_.r)(satelliteRaw),F=s(i,o);return F.distance=function(_){return arguments.length?s(i=+_,o):i},F.tilt=function(_){return arguments.length?s(i,o=_*ey):o*em},F.scale(432.147).clipAngle(acos(1/i)*em-1e-6)}function nonempty(i){return i.length>0}function stitch_quantize(i){return Math.floor(1e4*i)/1e4}function normalizePoint(i){return -90===i||90===i?[0,i]:[-180,stitch_quantize(i)]}function clampPoint(i){var o=i[0],s=i[1],_=!1;return o<=-179.9999?(o=-180,_=!0):o>=179.9999&&(o=180,_=!0),s<=-89.9999?(s=-90,_=!0):s>=89.9999&&(s=90,_=!0),_?[o,s]:i}function clampPoints(i){return i.map(clampPoint)}function extractFragments(i,o,s){for(var _=0,F=i.length;_<F;++_){var N=i[_].slice();s.push({index:-1,polygon:o,ring:N});for(var j=0,Z=N.length;j<Z;++j){var X=N[j],$=X[0],ee=X[1];if($<=-179.9999||$>=179.9999||ee<=-89.9999||ee>=89.9999){N[j]=clampPoint(X);for(var et=j+1;et<Z;++et){var er=N[et],en=er[0],ei=er[1];if(en>-179.9999&&en<179.9999&&ei>-89.9999&&ei<89.9999)break}if(et===j+1)continue;if(j){var eo={index:-1,polygon:o,ring:N.slice(0,j+1)};eo.ring[eo.ring.length-1]=normalizePoint(ee),s[s.length-1]=eo}else s.pop();if(et>=Z)break;s.push({index:-1,polygon:o,ring:N=N.slice(et-1)}),N[0]=normalizePoint(N[0][1]),j=-1,Z=N.length}}}}function stitchFragments(i){var o,s,_,F,N,j,Z=i.length,X={},$={};for(o=0;o<Z;++o){if(_=(s=i[o]).ring[0],N=s.ring[s.ring.length-1],_[0]===N[0]&&_[1]===N[1]){s.polygon.push(s.ring),i[o]=null;continue}s.index=o,X[_]=$[N]=s}for(o=0;o<Z;++o)if(s=i[o]){if(_=s.ring[0],N=s.ring[s.ring.length-1],F=$[_],j=X[N],delete X[_],delete $[N],_[0]===N[0]&&_[1]===N[1]){s.polygon.push(s.ring);continue}F?(delete $[_],delete X[F.ring[0]],F.ring.pop(),i[F.index]=null,s={index:-1,polygon:F.polygon,ring:F.ring.concat(s.ring)},F===j?s.polygon.push(s.ring):(s.index=Z++,i.push(X[s.ring[0]]=$[s.ring[s.ring.length-1]]=s))):j?(delete X[N],delete $[j.ring[j.ring.length-1]],s.ring.pop(),s={index:Z++,polygon:j.polygon,ring:s.ring.concat(j.ring)},i[j.index]=null,i.push(X[s.ring[0]]=$[s.ring[s.ring.length-1]]=s)):(s.ring.push(s.ring[0]),s.polygon.push(s.ring))}}function stitchFeature(i){var o={type:"Feature",geometry:stitchGeometry(i.geometry)};return null!=i.id&&(o.id=i.id),null!=i.bbox&&(o.bbox=i.bbox),null!=i.properties&&(o.properties=i.properties),o}function stitchGeometry(i){if(null==i)return i;switch(i.type){case"GeometryCollection":o={type:"GeometryCollection",geometries:i.geometries.map(stitchGeometry)};break;case"Point":o={type:"Point",coordinates:clampPoint(i.coordinates)};break;case"MultiPoint":case"LineString":o={type:i.type,coordinates:clampPoints(i.coordinates)};break;case"MultiLineString":o={type:"MultiLineString",coordinates:i.coordinates.map(clampPoints)};break;case"Polygon":var o,s,_,F,N=[];extractFragments(i.coordinates,N,s=[]),stitchFragments(s),o={type:"Polygon",coordinates:N};break;case"MultiPolygon":s=[],_=-1;for(var j=Array(F=i.coordinates.length);++_<F;)extractFragments(i.coordinates[_],j[_]=[],s);stitchFragments(s),o={type:"MultiPolygon",coordinates:j.filter(nonempty)};break;default:return i}return null!=i.bbox&&(o.bbox=i.bbox),o}function stitch(i){if(null==i)return i;switch(i.type){case"Feature":return stitchFeature(i);case"FeatureCollection":var o={type:"FeatureCollection",features:i.features.map(stitchFeature)};return null!=i.bbox&&(o.bbox=i.bbox),o;default:return stitchGeometry(i)}}function timesRaw(i,o){var s=el(o/2),_=es(ef*s);return[i*(.74482-.34588*_*_),1.70711*s]}function times(){return(0,_.Z)(timesRaw).scale(146.153)}function twoPoint(i,o,s){var F=(0,e4.Z)(o,s),N=F(.5),j=(0,eS.Z)([-N[0],-N[1]])(o),Z=F.distance/2,X=-asin(es(j[1]*ey)/es(Z)),$=[-N[0],-N[1],-(j[0]>0?ec-X:X)*em],ee=(0,_.Z)(i(Z)).rotate($),et=(0,eS.Z)($),er=ee.center;return delete ee.rotate,ee.center=function(i){return arguments.length?er(et(i)):et.invert(er())},ee.clipAngle(90)}function twoPointAzimuthalRaw(i){var o=Z(i);function forward(i,s){var _=(0,e6.M)(i,s);return _[0]*=o,_}return forward.invert=function(i,s){return e6.M.invert(i/o,s)},forward}function twoPointAzimuthalUsa(){return twoPointAzimuthal([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function twoPointAzimuthal(i,o){return twoPoint(twoPointAzimuthalRaw,i,o)}function twoPointEquidistantRaw(i){if(!(i*=2))return e_.N;var o=-i/2,s=-o,_=i*i,F=el(s),N=.5/es(s);function forward(F,N){var j=acos(Z(N)*Z(F-o)),X=acos(Z(N)*Z(F-s)),$=N<0?-1:1;return j*=j,X*=X,[(j-X)/(2*i),$*sqrt(4*_*X-(_-j+X)*(_-j+X))/(2*i)]}return forward.invert=function(i,_){var X,$,ee=_*_,et=Z(sqrt(ee+(X=i+o)*X)),er=Z(sqrt(ee+(X=i+s)*X));return[j($=et-er,X=(et+er)*F),(_<0?-1:1)*acos(sqrt(X*X+$*$)*N)]},forward}function twoPointEquidistantUsa(){return twoPointEquidistant([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function twoPointEquidistant(i,o){return twoPoint(twoPointEquidistantRaw,i,o)}function vanDerGrintenRaw(i,o){if(1e-6>F(o))return[i,0];var s=F(o/eu),_=asin(s);if(1e-6>F(i)||1e-6>F(F(o)-eu))return[0,eo(o)*ec*el(_/2)];var N=Z(_),j=F(ec/i-i/ec)/2,X=j*j,$=N/(s+N-1),ee=$*(2/s-1),et=ee*ee,er=et+X,en=$-et,ei=X+$;return[eo(i)*ec*(j*en+sqrt(X*en*en-er*($*$-et)))/er,eo(o)*ec*(ee*ei-j*sqrt((X+1)*er-ei*ei))/er]}function vanDerGrinten(){return(0,_.Z)(vanDerGrintenRaw).scale(79.4183)}function vanDerGrinten2Raw(i,o){if(1e-6>F(o))return[i,0];var s=F(o/eu),_=asin(s);if(1e-6>F(i)||1e-6>F(F(o)-eu))return[0,eo(o)*ec*el(_/2)];var N=Z(_),j=F(ec/i-i/ec)/2,X=j*j,$=N*(sqrt(1+X)-j*N)/(1+X*s*s);return[eo(i)*ec*$,eo(o)*ec*sqrt(1-$*(2*j+$))]}function vanDerGrinten2(){return(0,_.Z)(vanDerGrinten2Raw).scale(79.4183)}function vanDerGrinten3Raw(i,o){if(1e-6>F(o))return[i,0];var s=o/eu,_=asin(s);if(1e-6>F(i)||1e-6>F(F(o)-eu))return[0,ec*el(_/2)];var N=(ec/i-i/ec)/2,j=s/(1+Z(_));return[ec*(eo(i)*sqrt(N*N+1-j*j)-N),ec*j]}function vanDerGrinten3(){return(0,_.Z)(vanDerGrinten3Raw).scale(79.4183)}function vanDerGrinten4Raw(i,o){if(!o)return[i,0];var s=F(o);if(!i||s===eu)return[0,o];var _=s/eu,N=_*_,j=(8*_-N*(N+2)-5)/(2*N*(_-1)),Z=j*j,X=_*j,$=N+Z+2*X,ee=_+3*j,et=i/eu,er=et+1/et,en=eo(F(i)-eu)*sqrt(er*er-4),ei=en*en,es=(en*($+Z-1)+2*sqrt($*(N+Z*ei-1)+(1-N)*(N*(ee*ee+4*Z)+12*X*Z+4*Z*Z)))/(4*$+ei);return[eo(i)*eu*es,eo(o)*eu*sqrt(1+en*F(es)-es*es)]}function vanDerGrinten4(){return(0,_.Z)(vanDerGrinten4Raw).scale(127.16)}function wagnerFormula(i,o,s,_,F){function forward(N,j){var X=s*es(_*j),$=sqrt(1-X*X),ee=sqrt(2/(1+$*Z(N*=F)));return[i*$*ee*es(N),o*X*ee]}return forward.invert=function(N,Z){var X=N/i,$=Z/o,ee=sqrt(X*X+$*$),et=2*asin(ee/2);return[j(N*el(et),i*ee)/F,ee&&asin(Z*es(et)/(o*s*ee))/_]},forward}function wagnerRaw(i,o,s,_){var F=ec/3;i=et(i,1e-6),o=et(o,1e-6),i=er(i,eu),o=er(o,ec-1e-6),s=er(s=et(s,0),99.999999);var N=(_=et(_,1e-6))/100,j=acos((s/100+1)*Z(F))/F,X=es(i)/es(j*eu),$=o/ec,ee=sqrt(N*es(i/2)/es(o/2));return wagnerFormula(ee/sqrt($*X*j),1/(ee*sqrt($*X*j)),X,j,$)}function wagner(){var i=65*ey,o=60*ey,s=20,F=200,N=(0,_.r)(wagnerRaw),j=N(i,o,s,F);return j.poleline=function(_){return arguments.length?N(i=+_*ey,o,s,F):i*em},j.parallels=function(_){return arguments.length?N(i,o=+_*ey,s,F):o*em},j.inflation=function(_){return arguments.length?N(i,o,s=+_,F):s},j.ratio=function(_){return arguments.length?N(i,o,s,F=+_):F},j.scale(163.775)}function wagner7(){return wagner().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}ti.forEach(function(i){i[1]*=1.0144}),robinsonRaw.invert=function(i,o){var s=o/eu,_=90*s,N=er(18,F(_/5)),j=et(0,$(N));do{var Z=ti[j][1],X=ti[j+1][1],ee=ti[er(19,j+2)][1],en=ee-Z,ei=ee-2*X+Z,eo=2*(F(s)-X)/en,es=ei/en,el=eo*(1-es*eo*(1-2*es*eo));if(el>=0||1===j){_=(o>=0?5:-5)*(el+N);var ec,ef=50;do j=$(N=er(18,F(_)/5)),el=N-j,Z=ti[j][1],_-=(ec=(o>=0?eu:-eu)*((X=ti[j+1][1])+el*((ee=ti[er(19,j+2)][1])-Z)/2+el*el*(ee-2*X+Z)/2)-o)*em;while(F(ec)>1e-12&&--ef>0);break}}while(--j>=0);var ed=ti[j][0],eh=ti[j+1][0],ep=ti[er(19,j+2)][0];return[i/(eh+el*(ep-ed)/2+el*el*(ep-2*eh+ed)/2),_*ey]},timesRaw.invert=function(i,o){var s=o/1.70711,_=es(ef*s);return[i/(.74482-.34588*_*_),2*N(s)]},vanDerGrintenRaw.invert=function(i,o){if(1e-6>F(o))return[i,0];if(1e-6>F(i))return[0,eu*es(2*N(o/ec))];var s=(i/=ec)*i,_=(o/=ec)*o,j=s+_,X=j*j,$=-F(o)*(1+j),ee=$-2*_+s,et=-2*$+1+2*_+X,er=_/et+(2*ee*ee*ee/(et*et*et)-9*$*ee/(et*et))/27,en=($-ee*ee/(3*et))/et,ei=2*sqrt(-en/3),el=acos(3*er/(en*ei))/3;return[ec*(j-1+sqrt(1+2*(s-_)+X))/(2*i),eo(o)*ec*(-ei*Z(el+ec/3)-ee/(3*et))]},vanDerGrinten2Raw.invert=function(i,o){if(!i)return[0,eu*es(2*N(o/ec))];var s=F(i/ec),_=(1-s*s-(o/=ec)*o)/(2*s),Z=sqrt(_*_+1);return[eo(i)*ec*(Z-_),eo(o)*eu*es(2*j(sqrt((1-2*_*s)*(_+Z)-s),sqrt(Z+_+s)))]},vanDerGrinten3Raw.invert=function(i,o){if(!o)return[i,0];var s=o/ec,_=(ec*ec*(1-s*s)-i*i)/(2*ec*i);return[i?ec*(eo(i)*sqrt(_*_+1)-_):0,eu*es(2*N(s))]},vanDerGrinten4Raw.invert=function(i,o){if(!i||!o)return[i,o];o/=ec;var s,_=eo(i)*i/eu,N=(_*_-1+4*o*o)/F(_),j=N*N,Z=2*o,X=50;do{var $=Z*Z,ee=(8*Z-$*($+2)-5)/(2*$*(Z-1)),et=(3*Z-$*Z-10)/(2*$*Z),er=ee*ee,en=Z*ee,ei=Z+ee,es=ei*ei,el=Z+3*ee,ef=es*($+er*j-1)+(1-$)*($*(el*el+4*er)+er*(12*en+4*er)),ed=-2*ei*(4*en*er+(1-4*$+3*$*$)*(1+et)+er*(-6+14*$-j+(-8+8*$-2*j)*et)+en*(-8+12*$+(-10+10*$-j)*et)),eh=sqrt(ef);Z-=s=(N*(es+er-1)+2*eh-_*(4*es+j))/(N*(2*ee*et+2*ei*(1+et))+ed/eh-8*ei*(N*(-1+er+es)+2*eh)*(1+et)/(j+4*es))}while(s>1e-6&&--X>0);return[eo(i)*(sqrt(N*N+4)+N)*ec/4,eu*Z]};var to=4*ec+3*sqrt(3),ts=2*sqrt(2*ec*sqrt(3)/to),tl=mollweideBromleyRaw(ts*sqrt(3)/ec,ts,to/6);function wagner4(){return(0,_.Z)(tl).scale(176.84)}function wagner6Raw(i,o){return[i*sqrt(1-3*o*o/(ec*ec)),o]}function wagner6(){return(0,_.Z)(wagner6Raw).scale(152.63)}function wiechelRaw(i,o){var s=Z(o),_=Z(i)*s,F=1-_,N=Z(i=j(es(i)*s,-es(o))),X=es(i);return[X*(s=sqrt(1-_*_))-N*F,-N*s-X*F]}function wiechel(){return(0,_.Z)(wiechelRaw).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function winkel3Raw(i,o){var s=aitoffRaw(i,o);return[(s[0]+i/eu)/2,(s[1]+o)/2]}function winkel3(){return(0,_.Z)(winkel3Raw).scale(158.837)}wagner6Raw.invert=function(i,o){return[i/sqrt(1-3*o*o/(ec*ec)),o]},wiechelRaw.invert=function(i,o){var s=-((i*i+o*o)/2),_=sqrt(-s*(2+s)),F=o*s+i*_,N=i*s-o*_,Z=sqrt(N*N+F*F);return[j(_*F,Z*(1+s)),Z?-asin(_*N/Z):0]},winkel3Raw.invert=function(i,o){var s=i,_=o,N=25;do{var j,X=Z(_),$=es(_),ee=es(2*_),et=$*$,er=X*X,en=es(s),ei=Z(s/2),eo=es(s/2),el=eo*eo,ec=1-er*ei*ei,ef=ec?acos(X*ei)*sqrt(j=1/ec):j=0,ed=.5*(2*ef*X*eo+s/eu)-i,eh=.5*(ef*$+_)-o,ep=.5*j*(er*el+ef*X*ei*et)+.5/eu,eg=j*(en*ee/4-ef*$*eo),em=.125*j*(ee*eo-ef*$*er*en),ey=.5*j*(et*ei+ef*el*X)+.5,ev=eg*em-ey*ep,ex=(eh*eg-ed*ey)/ev,e_=(ed*em-eh*ep)/ev;s-=ex,_-=e_}while((F(ex)>1e-6||F(e_)>1e-6)&&--N>0);return[s,_]}},33940:function(i,o,s){"use strict";function __WEBPACK_DEFAULT_EXPORT__(){return new Adder}function Adder(){this.reset()}s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}}),Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(i){add(_,i,this.t),add(this,_.s,this.s),this.s?this.t+=_.t:this.s=_.t},valueOf:function(){return this.s}};var _=new Adder;function add(i,o,s){var _=i.s=o+s,F=_-o;i.t=o-(_-F)+(s-F)}},97860:function(i,o,s){"use strict";s.d(o,{L9:function(){return er},ZP:function(){return __WEBPACK_DEFAULT_EXPORT__},gL:function(){return ei}});var _,F,N,j,Z,X=s(33940),$=s(39695),ee=s(73182),et=s(72736),er=(0,X.Z)(),en=(0,X.Z)(),ei={point:ee.Z,lineStart:ee.Z,lineEnd:ee.Z,polygonStart:function(){er.reset(),ei.lineStart=areaRingStart,ei.lineEnd=areaRingEnd},polygonEnd:function(){var i=+er;en.add(i<0?$.BZ+i:i),this.lineStart=this.lineEnd=this.point=ee.Z},sphere:function(){en.add($.BZ)}};function areaRingStart(){ei.point=areaPointFirst}function areaRingEnd(){areaPoint(_,F)}function areaPointFirst(i,o){ei.point=areaPoint,_=i,F=o,i*=$.uR,o*=$.uR,N=i,j=(0,$.mC)(o=o/2+$.pu),Z=(0,$.O$)(o)}function areaPoint(i,o){i*=$.uR,o*=$.uR,o=o/2+$.pu;var s=i-N,_=s>=0?1:-1,F=_*s,X=(0,$.mC)(o),ee=(0,$.O$)(o),et=Z*ee,en=j*X+et*(0,$.mC)(F),ei=et*_*(0,$.O$)(F);er.add((0,$.fv)(ei,en)),N=i,j=X,Z=ee}function __WEBPACK_DEFAULT_EXPORT__(i){return en.reset(),(0,et.Z)(i,ei),2*en}},77338:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _,F,N,j,Z,X,$,ee,et,er,en=s(33940),ei=s(97860),eo=s(7620),es=s(39695),el=s(72736),ec=(0,en.Z)(),eu={point:boundsPoint,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){eu.point=boundsRingPoint,eu.lineStart=boundsRingStart,eu.lineEnd=boundsRingEnd,ec.reset(),ei.gL.polygonStart()},polygonEnd:function(){ei.gL.polygonEnd(),eu.point=boundsPoint,eu.lineStart=boundsLineStart,eu.lineEnd=boundsLineEnd,ei.L9<0?(_=-(N=180),F=-(j=90)):ec>es.Ho?j=90:ec<-es.Ho&&(F=-90),er[0]=_,er[1]=N},sphere:function(){_=-(N=180),F=-(j=90)}};function boundsPoint(i,o){et.push(er=[_=i,N=i]),o<F&&(F=o),o>j&&(j=o)}function linePoint(i,o){var s=(0,eo.Og)([i*es.uR,o*es.uR]);if(ee){var X=(0,eo.T5)(ee,s),$=[X[1],-X[0],0],en=(0,eo.T5)($,X);(0,eo.iJ)(en),en=(0,eo.Y1)(en);var ei,el=i-Z,ec=el>0?1:-1,eu=en[0]*es.RW*ec,ef=(0,es.Wn)(el)>180;ef^(ec*Z<eu&&eu<ec*i)?(ei=en[1]*es.RW)>j&&(j=ei):ef^(ec*Z<(eu=(eu+360)%360-180)&&eu<ec*i)?(ei=-en[1]*es.RW)<F&&(F=ei):(o<F&&(F=o),o>j&&(j=o)),ef?i<Z?angle(_,i)>angle(_,N)&&(N=i):angle(i,N)>angle(_,N)&&(_=i):N>=_?(i<_&&(_=i),i>N&&(N=i)):i>Z?angle(_,i)>angle(_,N)&&(N=i):angle(i,N)>angle(_,N)&&(_=i)}else et.push(er=[_=i,N=i]);o<F&&(F=o),o>j&&(j=o),ee=s,Z=i}function boundsLineStart(){eu.point=linePoint}function boundsLineEnd(){er[0]=_,er[1]=N,eu.point=boundsPoint,ee=null}function boundsRingPoint(i,o){if(ee){var s=i-Z;ec.add((0,es.Wn)(s)>180?s+(s>0?360:-360):s)}else X=i,$=o;ei.gL.point(i,o),linePoint(i,o)}function boundsRingStart(){ei.gL.lineStart()}function boundsRingEnd(){boundsRingPoint(X,$),ei.gL.lineEnd(),(0,es.Wn)(ec)>es.Ho&&(_=-(N=180)),er[0]=_,er[1]=N,ee=null}function angle(i,o){return(o-=i)<0?o+360:o}function rangeCompare(i,o){return i[0]-o[0]}function rangeContains(i,o){return i[0]<=i[1]?i[0]<=o&&o<=i[1]:o<i[0]||i[1]<o}function __WEBPACK_DEFAULT_EXPORT__(i){var o,s,Z,X,$,ee,en;if(j=N=-(_=F=1/0),et=[],(0,el.Z)(i,eu),s=et.length){for(et.sort(rangeCompare),o=1,$=[Z=et[0]];o<s;++o)rangeContains(Z,(X=et[o])[0])||rangeContains(Z,X[1])?(angle(Z[0],X[1])>angle(Z[0],Z[1])&&(Z[1]=X[1]),angle(X[0],Z[1])>angle(Z[0],Z[1])&&(Z[0]=X[0])):$.push(Z=X);for(ee=-1/0,s=$.length-1,o=0,Z=$[s];o<=s;Z=X,++o)X=$[o],(en=angle(Z[1],X[0]))>ee&&(ee=en,_=X[0],N=Z[1])}return et=er=null,_===1/0||F===1/0?[[NaN,NaN],[NaN,NaN]]:[[_,F],[N,j]]}},7620:function(i,o,s){"use strict";s.d(o,{Og:function(){return cartesian},T:function(){return cartesianScale},T5:function(){return cartesianCross},Y1:function(){return spherical},iJ:function(){return cartesianNormalizeInPlace},j9:function(){return cartesianDot},s0:function(){return cartesianAddInPlace}});var _=s(39695);function spherical(i){return[(0,_.fv)(i[1],i[0]),(0,_.ZR)(i[2])]}function cartesian(i){var o=i[0],s=i[1],F=(0,_.mC)(s);return[F*(0,_.mC)(o),F*(0,_.O$)(o),(0,_.O$)(s)]}function cartesianDot(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]}function cartesianCross(i,o){return[i[1]*o[2]-i[2]*o[1],i[2]*o[0]-i[0]*o[2],i[0]*o[1]-i[1]*o[0]]}function cartesianAddInPlace(i,o){i[0]+=o[0],i[1]+=o[1],i[2]+=o[2]}function cartesianScale(i,o){return[i[0]*o,i[1]*o,i[2]*o]}function cartesianNormalizeInPlace(i){var o=(0,_._b)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=o,i[1]/=o,i[2]/=o}},66624:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _,F,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec,eu=s(39695),ef=s(73182),ed=s(72736),eh={sphere:ef.Z,point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){eh.lineStart=centroidRingStart,eh.lineEnd=centroidRingEnd},polygonEnd:function(){eh.lineStart=centroidLineStart,eh.lineEnd=centroidLineEnd}};function centroidPoint(i,o){i*=eu.uR,o*=eu.uR;var s=(0,eu.mC)(o);centroidPointCartesian(s*(0,eu.mC)(i),s*(0,eu.O$)(i),(0,eu.O$)(o))}function centroidPointCartesian(i,o,s){++_,N+=(i-N)/_,j+=(o-j)/_,Z+=(s-Z)/_}function centroidLineStart(){eh.point=centroidLinePointFirst}function centroidLinePointFirst(i,o){i*=eu.uR,o*=eu.uR;var s=(0,eu.mC)(o);es=s*(0,eu.mC)(i),el=s*(0,eu.O$)(i),ec=(0,eu.O$)(o),eh.point=centroidLinePoint,centroidPointCartesian(es,el,ec)}function centroidLinePoint(i,o){i*=eu.uR,o*=eu.uR;var s=(0,eu.mC)(o),_=s*(0,eu.mC)(i),N=s*(0,eu.O$)(i),j=(0,eu.O$)(o),Z=(0,eu.fv)((0,eu._b)((Z=el*j-ec*N)*Z+(Z=ec*_-es*j)*Z+(Z=es*N-el*_)*Z),es*_+el*N+ec*j);F+=Z,X+=Z*(es+(es=_)),$+=Z*(el+(el=N)),ee+=Z*(ec+(ec=j)),centroidPointCartesian(es,el,ec)}function centroidLineEnd(){eh.point=centroidPoint}function centroidRingStart(){eh.point=centroidRingPointFirst}function centroidRingEnd(){centroidRingPoint(ei,eo),eh.point=centroidPoint}function centroidRingPointFirst(i,o){ei=i,eo=o,i*=eu.uR,o*=eu.uR,eh.point=centroidRingPoint;var s=(0,eu.mC)(o);es=s*(0,eu.mC)(i),el=s*(0,eu.O$)(i),ec=(0,eu.O$)(o),centroidPointCartesian(es,el,ec)}function centroidRingPoint(i,o){i*=eu.uR,o*=eu.uR;var s=(0,eu.mC)(o),_=s*(0,eu.mC)(i),N=s*(0,eu.O$)(i),j=(0,eu.O$)(o),Z=el*j-ec*N,ei=ec*_-es*j,eo=es*N-el*_,ef=(0,eu._b)(Z*Z+ei*ei+eo*eo),ed=(0,eu.ZR)(ef),eh=ef&&-ed/ef;et+=eh*Z,er+=eh*ei,en+=eh*eo,F+=ed,X+=ed*(es+(es=_)),$+=ed*(el+(el=N)),ee+=ed*(ec+(ec=j)),centroidPointCartesian(es,el,ec)}function __WEBPACK_DEFAULT_EXPORT__(i){_=F=N=j=Z=X=$=ee=et=er=en=0,(0,ed.Z)(i,eh);var o=et,s=er,ei=en,eo=o*o+s*s+ei*ei;return eo<eu.aW&&(o=X,s=$,ei=ee,F<eu.Ho&&(o=N,s=j,ei=Z),(eo=o*o+s*s+ei*ei)<eu.aW)?[NaN,NaN]:[(0,eu.fv)(s,o)*eu.RW,(0,eu.ZR)(ei/(0,eu._b)(eo))*eu.RW]}},7613:function(i,o,s){"use strict";s.d(o,{m:function(){return circleStream},Z:function(){return circle}});var _=s(7620);function constant(i){return function(){return i}}var F=s(39695),N=s(49386);function circleStream(i,o,s,N,j,Z){if(s){var X=(0,F.mC)(o),$=(0,F.O$)(o),ee=N*s;null==j?(j=o+N*F.BZ,Z=o-ee/2):(j=circleRadius(X,j),Z=circleRadius(X,Z),(N>0?j<Z:j>Z)&&(j+=N*F.BZ));for(var et,er=j;N>0?er>Z:er<Z;er-=ee)et=(0,_.Y1)([X,-$*(0,F.mC)(er),-$*(0,F.O$)(er)]),i.point(et[0],et[1])}}function circleRadius(i,o){o=(0,_.Og)(o),o[0]-=i,(0,_.iJ)(o);var s=(0,F.Kh)(-o[1]);return((0>-o[2]?-s:s)+F.BZ-F.Ho)%F.BZ}function circle(){var i,o,s=constant([0,0]),_=constant(90),j=constant(6),Z={point:point};function point(s,_){i.push(s=o(s,_)),s[0]*=F.RW,s[1]*=F.RW}function circle(){var X=s.apply(this,arguments),$=_.apply(this,arguments)*F.uR,ee=j.apply(this,arguments)*F.uR;return i=[],o=(0,N.I)(-X[0]*F.uR,-X[1]*F.uR,0).invert,circleStream(Z,$,ee,1),X={type:"Polygon",coordinates:[i]},i=o=null,X}return circle.center=function(i){return arguments.length?(s="function"==typeof i?i:constant([+i[0],+i[1]]),circle):s},circle.radius=function(i){return arguments.length?(_="function"==typeof i?i:constant(+i),circle):_},circle.precision=function(i){return arguments.length?(j="function"==typeof i?i:constant(+i),circle):j},circle}},87070:function(i,o,s){"use strict";var _=s(97023),F=s(39695);function clipAntimeridianLine(i){var o,s=NaN,_=NaN,N=NaN;return{lineStart:function(){i.lineStart(),o=1},point:function(j,Z){var X=j>0?F.pi:-F.pi,$=(0,F.Wn)(j-s);(0,F.Wn)($-F.pi)<F.Ho?(i.point(s,_=(_+Z)/2>0?F.ou:-F.ou),i.point(N,_),i.lineEnd(),i.lineStart(),i.point(X,_),i.point(j,_),o=0):N!==X&&$>=F.pi&&((0,F.Wn)(s-N)<F.Ho&&(s-=N*F.Ho),(0,F.Wn)(j-X)<F.Ho&&(j-=X*F.Ho),_=clipAntimeridianIntersect(s,_,j,Z),i.point(N,_),i.lineEnd(),i.lineStart(),i.point(X,_),o=0),i.point(s=j,_=Z),N=X},lineEnd:function(){i.lineEnd(),s=_=NaN},clean:function(){return 2-o}}}function clipAntimeridianIntersect(i,o,s,_){var N,j,Z=(0,F.O$)(i-s);return(0,F.Wn)(Z)>F.Ho?(0,F.z4)(((0,F.O$)(o)*(j=(0,F.mC)(_))*(0,F.O$)(s)-(0,F.O$)(_)*(N=(0,F.mC)(o))*(0,F.O$)(i))/(N*j*Z)):(o+_)/2}function clipAntimeridianInterpolate(i,o,s,_){var N;if(null==i)N=s*F.ou,_.point(-F.pi,N),_.point(0,N),_.point(F.pi,N),_.point(F.pi,0),_.point(F.pi,-N),_.point(0,-N),_.point(-F.pi,-N),_.point(-F.pi,0),_.point(-F.pi,N);else if((0,F.Wn)(i[0]-o[0])>F.Ho){var j=i[0]<o[0]?F.pi:-F.pi;N=s*j/2,_.point(-j,N),_.point(0,N),_.point(j,N)}else _.point(o[0],o[1])}o.Z=(0,_.Z)(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-F.pi,-F.ou])},85272:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(73182);function __WEBPACK_DEFAULT_EXPORT__(){var i,o=[];return{point:function(o,s,_){i.push([o,s,_])},lineStart:function(){o.push(i=[])},lineEnd:_.Z,rejoin:function(){o.length>1&&o.push(o.pop().concat(o.shift()))},result:function(){var s=o;return o=[],i=null,s}}}},1457:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(7620),F=s(7613),N=s(39695),j=s(67108),Z=s(97023);function __WEBPACK_DEFAULT_EXPORT__(i){var o=(0,N.mC)(i),s=6*N.uR,X=o>0,$=(0,N.Wn)(o)>N.Ho;function interpolate(o,_,N,j){(0,F.m)(j,i,s,N,o,_)}function visible(i,s){return(0,N.mC)(i)*(0,N.mC)(s)>o}function clipLine(i){var o,s,_,F,Z;return{lineStart:function(){F=_=!1,Z=1},point:function(ee,et){var er,en,ei=[ee,et],eo=visible(ee,et),es=X?eo?0:code(ee,et):eo?code(ee+(ee<0?N.pi:-N.pi),et):0;!o&&(F=_=eo)&&i.lineStart(),eo!==_&&(!(en=intersect(o,ei))||(0,j.Z)(o,en)||(0,j.Z)(ei,en))&&(ei[2]=1),eo!==_?(Z=0,eo?(i.lineStart(),en=intersect(ei,o),i.point(en[0],en[1])):(en=intersect(o,ei),i.point(en[0],en[1],2),i.lineEnd()),o=en):$&&o&&X^eo&&!(es&s)&&(er=intersect(ei,o,!0))&&(Z=0,X?(i.lineStart(),i.point(er[0][0],er[0][1]),i.point(er[1][0],er[1][1]),i.lineEnd()):(i.point(er[1][0],er[1][1]),i.lineEnd(),i.lineStart(),i.point(er[0][0],er[0][1],3))),!eo||o&&(0,j.Z)(o,ei)||i.point(ei[0],ei[1]),o=ei,_=eo,s=es},lineEnd:function(){_&&i.lineEnd(),o=null},clean:function(){return Z|(F&&_)<<1}}}function intersect(i,s,F){var j=(0,_.Og)(i),Z=(0,_.Og)(s),X=[1,0,0],$=(0,_.T5)(j,Z),ee=(0,_.j9)($,$),et=$[0],er=ee-et*et;if(!er)return!F&&i;var en=o*ee/er,ei=-o*et/er,eo=(0,_.T5)(X,$),es=(0,_.T)(X,en),el=(0,_.T)($,ei);(0,_.s0)(es,el);var ec=(0,_.j9)(es,eo),eu=(0,_.j9)(eo,eo),ef=ec*ec-eu*((0,_.j9)(es,es)-1);if(!(ef<0)){var ed=(0,N._b)(ef),eh=(0,_.T)(eo,(-ec-ed)/eu);if((0,_.s0)(eh,es),eh=(0,_.Y1)(eh),!F)return eh;var ep,eg=i[0],em=s[0],ey=i[1],ev=s[1];em<eg&&(ep=eg,eg=em,em=ep);var ex=em-eg,e_=(0,N.Wn)(ex-N.pi)<N.Ho,ew=e_||ex<N.Ho;if(!e_&&ev<ey&&(ep=ey,ey=ev,ev=ep),ew?e_?ey+ev>0^eh[1]<((0,N.Wn)(eh[0]-eg)<N.Ho?ey:ev):ey<=eh[1]&&eh[1]<=ev:ex>N.pi^(eg<=eh[0]&&eh[0]<=em)){var eT=(0,_.T)(eo,(-ec+ed)/eu);return(0,_.s0)(eT,es),[eh,(0,_.Y1)(eT)]}}}function code(o,s){var _=X?i:N.pi-i,F=0;return o<-_?F|=1:o>_&&(F|=2),s<-_?F|=4:s>_&&(F|=8),F}return(0,Z.Z)(visible,clipLine,interpolate,X?[0,-i]:[-N.pi,i-N.pi])}},97023:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(85272),F=s(46225),N=s(39695),j=s(23071),Z=s(33064);function __WEBPACK_DEFAULT_EXPORT__(i,o,s,N){return function(X){var $,ee,et,er=o(X),en=(0,_.Z)(),ei=o(en),eo=!1,es={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){es.point=pointRing,es.lineStart=ringStart,es.lineEnd=ringEnd,ee=[],$=[]},polygonEnd:function(){es.point=point,es.lineStart=lineStart,es.lineEnd=lineEnd,ee=(0,Z.TS)(ee);var i=(0,j.Z)($,N);ee.length?(eo||(X.polygonStart(),eo=!0),(0,F.Z)(ee,compareIntersection,i,s,X)):i&&(eo||(X.polygonStart(),eo=!0),X.lineStart(),s(null,null,1,X),X.lineEnd()),eo&&(X.polygonEnd(),eo=!1),ee=$=null},sphere:function(){X.polygonStart(),X.lineStart(),s(null,null,1,X),X.lineEnd(),X.polygonEnd()}};function point(o,s){i(o,s)&&X.point(o,s)}function pointLine(i,o){er.point(i,o)}function lineStart(){es.point=pointLine,er.lineStart()}function lineEnd(){es.point=point,er.lineEnd()}function pointRing(i,o){et.push([i,o]),ei.point(i,o)}function ringStart(){ei.lineStart(),et=[]}function ringEnd(){pointRing(et[0][0],et[0][1]),ei.lineEnd();var i,o,s,_,F=ei.clean(),N=en.result(),j=N.length;if(et.pop(),$.push(et),et=null,j){if(1&F){if((o=(s=N[0]).length-1)>0){for(eo||(X.polygonStart(),eo=!0),X.lineStart(),i=0;i<o;++i)X.point((_=s[i])[0],_[1]);X.lineEnd()}return}j>1&&2&F&&N.push(N.pop().concat(N.shift())),ee.push(N.filter(validSegment))}}return es}}function validSegment(i){return i.length>1}function compareIntersection(i,o){return((i=i.x)[0]<0?i[1]-N.ou-N.Ho:N.ou-i[1])-((o=o.x)[0]<0?o[1]-N.ou-N.Ho:N.ou-o[1])}},87605:function(i,o,s){"use strict";s.d(o,{Z:function(){return clipRectangle}});var _=s(39695),F=s(85272);function line(i,o,s,_,F,N){var j,Z=i[0],X=i[1],$=o[0],ee=o[1],et=0,er=1,en=$-Z,ei=ee-X;if(j=s-Z,en||!(j>0)){if(j/=en,en<0){if(j<et)return;j<er&&(er=j)}else if(en>0){if(j>er)return;j>et&&(et=j)}if(j=F-Z,en||!(j<0)){if(j/=en,en<0){if(j>er)return;j>et&&(et=j)}else if(en>0){if(j<et)return;j<er&&(er=j)}if(j=_-X,ei||!(j>0)){if(j/=ei,ei<0){if(j<et)return;j<er&&(er=j)}else if(ei>0){if(j>er)return;j>et&&(et=j)}if(j=N-X,ei||!(j<0)){if(j/=ei,ei<0){if(j>er)return;j>et&&(et=j)}else if(ei>0){if(j<et)return;j<er&&(er=j)}return et>0&&(i[0]=Z+et*en,i[1]=X+et*ei),er<1&&(o[0]=Z+er*en,o[1]=X+er*ei),!0}}}}}var N=s(46225),j=s(33064);function clipRectangle(i,o,s,Z){function visible(_,F){return i<=_&&_<=s&&o<=F&&F<=Z}function interpolate(_,F,N,j){var X=0,$=0;if(null==_||(X=corner(_,N))!==($=corner(F,N))||0>comparePoint(_,F)^N>0)do j.point(0===X||3===X?i:s,X>1?Z:o);while((X=(X+N+4)%4)!==$);else j.point(F[0],F[1])}function corner(F,N){return(0,_.Wn)(F[0]-i)<_.Ho?N>0?0:3:(0,_.Wn)(F[0]-s)<_.Ho?N>0?2:1:(0,_.Wn)(F[1]-o)<_.Ho?N>0?1:0:N>0?3:2}function compareIntersection(i,o){return comparePoint(i.x,o.x)}function comparePoint(i,o){var s=corner(i,1),_=corner(o,1);return s!==_?s-_:0===s?o[1]-i[1]:1===s?i[0]-o[0]:2===s?i[1]-o[1]:o[0]-i[0]}return function(_){var X,$,ee,et,er,en,ei,eo,es,el,ec,eu=_,ef=(0,F.Z)(),ed={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:polygonStart,polygonEnd:polygonEnd};function point(i,o){visible(i,o)&&eu.point(i,o)}function polygonInside(){for(var o=0,s=0,_=$.length;s<_;++s)for(var F,N,j=$[s],X=1,ee=j.length,et=j[0],er=et[0],en=et[1];X<ee;++X)F=er,N=en,er=(et=j[X])[0],en=et[1],N<=Z?en>Z&&(er-F)*(Z-N)>(en-N)*(i-F)&&++o:en<=Z&&(er-F)*(Z-N)<(en-N)*(i-F)&&--o;return o}function polygonStart(){eu=ef,X=[],$=[],ec=!0}function polygonEnd(){var i=polygonInside(),o=ec&&i,s=(X=(0,j.TS)(X)).length;(o||s)&&(_.polygonStart(),o&&(_.lineStart(),interpolate(null,null,1,_),_.lineEnd()),s&&(0,N.Z)(X,compareIntersection,i,interpolate,_),_.polygonEnd()),eu=_,X=$=ee=null}function lineStart(){ed.point=linePoint,$&&$.push(ee=[]),el=!0,es=!1,ei=eo=NaN}function lineEnd(){X&&(linePoint(et,er),en&&es&&ef.rejoin(),X.push(ef.result())),ed.point=point,es&&eu.lineEnd()}function linePoint(_,F){var N=visible(_,F);if($&&ee.push([_,F]),el)et=_,er=F,en=N,el=!1,N&&(eu.lineStart(),eu.point(_,F));else if(N&&es)eu.point(_,F);else{var j=[ei=Math.max(-1e9,Math.min(1e9,ei)),eo=Math.max(-1e9,Math.min(1e9,eo))],X=[_=Math.max(-1e9,Math.min(1e9,_)),F=Math.max(-1e9,Math.min(1e9,F))];line(j,X,i,o,s,Z)?(es||(eu.lineStart(),eu.point(j[0],j[1])),eu.point(X[0],X[1]),N||eu.lineEnd(),ec=!1):N&&(eu.lineStart(),eu.point(_,F),ec=!1)}ei=_,eo=F,es=N}return ed}}},46225:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(67108),F=s(39695);function Intersection(i,o,s,_){this.x=i,this.z=o,this.o=s,this.e=_,this.v=!1,this.n=this.p=null}function __WEBPACK_DEFAULT_EXPORT__(i,o,s,N,j){var Z,X,$=[],ee=[];if(i.forEach(function(i){if(!((o=i.length-1)<=0)){var o,s,N=i[0],X=i[o];if((0,_.Z)(N,X)){if(!N[2]&&!X[2]){for(j.lineStart(),Z=0;Z<o;++Z)j.point((N=i[Z])[0],N[1]);j.lineEnd();return}X[0]+=2*F.Ho}$.push(s=new Intersection(N,i,null,!0)),ee.push(s.o=new Intersection(N,null,s,!1)),$.push(s=new Intersection(X,i,null,!1)),ee.push(s.o=new Intersection(X,null,s,!0))}}),$.length){for(ee.sort(o),link($),link(ee),Z=0,X=ee.length;Z<X;++Z)ee[Z].e=s=!s;for(var et,er,en=$[0];;){for(var ei=en,eo=!0;ei.v;)if((ei=ei.n)===en)return;et=ei.z,j.lineStart();do{if(ei.v=ei.o.v=!0,ei.e){if(eo)for(Z=0,X=et.length;Z<X;++Z)j.point((er=et[Z])[0],er[1]);else N(ei.x,ei.n.x,1,j);ei=ei.n}else{if(eo)for(Z=(et=ei.p.z).length-1;Z>=0;--Z)j.point((er=et[Z])[0],er[1]);else N(ei.x,ei.p.x,-1,j);ei=ei.p}et=(ei=ei.o).z,eo=!eo}while(!ei.v);j.lineEnd()}}}function link(i){if(o=i.length){for(var o,s,_=0,F=i[0];++_<o;)F.n=s=i[_],s.p=F,F=s;F.n=s=i[0],s.p=F}}},96059:function(i,o,s){"use strict";function __WEBPACK_DEFAULT_EXPORT__(i,o){function compose(s,_){return o((s=i(s,_))[0],s[1])}return i.invert&&o.invert&&(compose.invert=function(s,_){return(s=o.invert(s,_))&&i.invert(s[0],s[1])}),compose}s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}})},8593:function(i,o,s){"use strict";function __WEBPACK_DEFAULT_EXPORT__(i){return i}s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}})},27362:function(i,o,s){"use strict";s.r(o),s.d(o,{geoAlbers:function(){return albers},geoAlbersUsa:function(){return albersUsa},geoArea:function(){return _.ZP},geoAzimuthalEqualArea:function(){return eJ.Z},geoAzimuthalEqualAreaRaw:function(){return eJ.l},geoAzimuthalEquidistant:function(){return e$.Z},geoAzimuthalEquidistantRaw:function(){return e$.N},geoBounds:function(){return F.Z},geoCentroid:function(){return N.Z},geoCircle:function(){return j.Z},geoClipAntimeridian:function(){return Z.Z},geoClipCircle:function(){return X.Z},geoClipExtent:function(){return extent},geoClipRectangle:function(){return $.Z},geoConicConformal:function(){return conicConformal},geoConicConformalRaw:function(){return conicConformalRaw},geoConicEqualArea:function(){return conicEqualArea},geoConicEqualAreaRaw:function(){return conicEqualAreaRaw},geoConicEquidistant:function(){return conicEquidistant},geoConicEquidistantRaw:function(){return conicEquidistantRaw},geoContains:function(){return contains},geoDistance:function(){return distance},geoEqualEarth:function(){return equalEarth},geoEqualEarthRaw:function(){return equalEarthRaw},geoEquirectangular:function(){return e0.Z},geoEquirectangularRaw:function(){return e0.k},geoGnomonic:function(){return e2.Z},geoGnomonicRaw:function(){return e2.M},geoGraticule:function(){return graticule},geoGraticule10:function(){return graticule10},geoIdentity:function(){return projection_identity},geoInterpolate:function(){return e_.Z},geoLength:function(){return src_length},geoMercator:function(){return mercator},geoMercatorRaw:function(){return mercatorRaw},geoNaturalEarth1:function(){return e5.Z},geoNaturalEarth1Raw:function(){return e5.K},geoOrthographic:function(){return e4.Z},geoOrthographicRaw:function(){return e4.I},geoPath:function(){return path},geoProjection:function(){return eX.Z},geoProjectionMutator:function(){return eX.r},geoRotation:function(){return eQ.Z},geoStereographic:function(){return stereographic},geoStereographicRaw:function(){return stereographicRaw},geoStream:function(){return el.Z},geoTransform:function(){return e3.Z},geoTransverseMercator:function(){return transverseMercator},geoTransverseMercatorRaw:function(){return transverseMercatorRaw}});var _=s(97860),F=s(77338),N=s(66624),j=s(7613),Z=s(87070),X=s(1457),$=s(87605);function extent(){var i,o,s,_=0,F=0,N=960,j=500;return s={stream:function(s){return i&&o===s?i:i=(0,$.Z)(_,F,N,j)(o=s)},extent:function(Z){return arguments.length?(_=+Z[0][0],F=+Z[0][1],N=+Z[1][0],j=+Z[1][1],i=o=null,s):[[_,F],[N,j]]}}}var ee,et,er,en=s(23071),ei=s(33940),eo=s(39695),es=s(73182),el=s(72736),ec=(0,ei.Z)(),eu={sphere:es.Z,point:es.Z,lineStart:lengthLineStart,lineEnd:es.Z,polygonStart:es.Z,polygonEnd:es.Z};function lengthLineStart(){eu.point=lengthPointFirst,eu.lineEnd=lengthLineEnd}function lengthLineEnd(){eu.point=eu.lineEnd=es.Z}function lengthPointFirst(i,o){i*=eo.uR,o*=eo.uR,ee=i,et=(0,eo.O$)(o),er=(0,eo.mC)(o),eu.point=lengthPoint}function lengthPoint(i,o){i*=eo.uR,o*=eo.uR;var s=(0,eo.O$)(o),_=(0,eo.mC)(o),F=(0,eo.Wn)(i-ee),N=(0,eo.mC)(F),j=_*(0,eo.O$)(F),Z=er*s-et*_*N,X=et*s+er*_*N;ec.add((0,eo.fv)((0,eo._b)(j*j+Z*Z),X)),ee=i,et=s,er=_}function src_length(i){return ec.reset(),(0,el.Z)(i,eu),+ec}var ef=[null,null],ed={type:"LineString",coordinates:ef};function distance(i,o){return ef[0]=i,ef[1]=o,src_length(ed)}var eh={Feature:function(i,o){return containsGeometry(i.geometry,o)},FeatureCollection:function(i,o){for(var s=i.features,_=-1,F=s.length;++_<F;)if(containsGeometry(s[_].geometry,o))return!0;return!1}},ep={Sphere:function(){return!0},Point:function(i,o){return 0===distance(i.coordinates,o)},MultiPoint:function(i,o){for(var s=i.coordinates,_=-1,F=s.length;++_<F;)if(0===distance(s[_],o))return!0;return!1},LineString:function(i,o){return containsLine(i.coordinates,o)},MultiLineString:function(i,o){for(var s=i.coordinates,_=-1,F=s.length;++_<F;)if(containsLine(s[_],o))return!0;return!1},Polygon:function(i,o){return containsPolygon(i.coordinates,o)},MultiPolygon:function(i,o){for(var s=i.coordinates,_=-1,F=s.length;++_<F;)if(containsPolygon(s[_],o))return!0;return!1},GeometryCollection:function(i,o){for(var s=i.geometries,_=-1,F=s.length;++_<F;)if(containsGeometry(s[_],o))return!0;return!1}};function containsGeometry(i,o){return!!(i&&ep.hasOwnProperty(i.type))&&ep[i.type](i,o)}function containsLine(i,o){for(var s,_,F,N=0,j=i.length;N<j;N++){if(0===(_=distance(i[N],o))||N>0&&(F=distance(i[N],i[N-1]))>0&&s<=F&&_<=F&&(s+_-F)*(1-Math.pow((s-_)/F,2))<eo.aW*F)return!0;s=_}return!1}function containsPolygon(i,o){return!!(0,en.Z)(i.map(ringRadians),pointRadians(o))}function ringRadians(i){return(i=i.map(pointRadians)).pop(),i}function pointRadians(i){return[i[0]*eo.uR,i[1]*eo.uR]}function contains(i,o){return(i&&eh.hasOwnProperty(i.type)?eh[i.type]:containsGeometry)(i,o)}var eg=s(33064);function graticuleX(i,o,s){var _=(0,eg.w6)(i,o-eo.Ho,s).concat(o);return function(i){return _.map(function(o){return[i,o]})}}function graticuleY(i,o,s){var _=(0,eg.w6)(i,o-eo.Ho,s).concat(o);return function(i){return _.map(function(o){return[o,i]})}}function graticule(){var i,o,s,_,F,N,j,Z,X,$,ee,et,er=10,en=10,ei=90,es=360,el=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return(0,eg.w6)((0,eo.mD)(_/ei)*ei,s,ei).map(ee).concat((0,eg.w6)((0,eo.mD)(Z/es)*es,j,es).map(et)).concat((0,eg.w6)((0,eo.mD)(o/er)*er,i,er).filter(function(i){return(0,eo.Wn)(i%ei)>eo.Ho}).map(X)).concat((0,eg.w6)((0,eo.mD)(N/en)*en,F,en).filter(function(i){return(0,eo.Wn)(i%es)>eo.Ho}).map($))}return graticule.lines=function(){return lines().map(function(i){return{type:"LineString",coordinates:i}})},graticule.outline=function(){return{type:"Polygon",coordinates:[ee(_).concat(et(j).slice(1),ee(s).reverse().slice(1),et(Z).reverse().slice(1))]}},graticule.extent=function(i){return arguments.length?graticule.extentMajor(i).extentMinor(i):graticule.extentMinor()},graticule.extentMajor=function(i){return arguments.length?(_=+i[0][0],s=+i[1][0],Z=+i[0][1],j=+i[1][1],_>s&&(i=_,_=s,s=i),Z>j&&(i=Z,Z=j,j=i),graticule.precision(el)):[[_,Z],[s,j]]},graticule.extentMinor=function(s){return arguments.length?(o=+s[0][0],i=+s[1][0],N=+s[0][1],F=+s[1][1],o>i&&(s=o,o=i,i=s),N>F&&(s=N,N=F,F=s),graticule.precision(el)):[[o,N],[i,F]]},graticule.step=function(i){return arguments.length?graticule.stepMajor(i).stepMinor(i):graticule.stepMinor()},graticule.stepMajor=function(i){return arguments.length?(ei=+i[0],es=+i[1],graticule):[ei,es]},graticule.stepMinor=function(i){return arguments.length?(er=+i[0],en=+i[1],graticule):[er,en]},graticule.precision=function(er){return arguments.length?(el=+er,X=graticuleX(N,F,90),$=graticuleY(o,i,el),ee=graticuleX(Z,j,90),et=graticuleY(_,s,el),graticule):el},graticule.extentMajor([[-180,-90+eo.Ho],[180,90-eo.Ho]]).extentMinor([[-180,-80-eo.Ho],[180,80+eo.Ho]])}function graticule10(){return graticule()()}var em,ey,ev,ex,e_=s(83074),ew=s(8593),eT=(0,ei.Z)(),ek=(0,ei.Z)(),eA={point:es.Z,lineStart:es.Z,lineEnd:es.Z,polygonStart:function(){eA.lineStart=areaRingStart,eA.lineEnd=areaRingEnd},polygonEnd:function(){eA.lineStart=eA.lineEnd=eA.point=es.Z,eT.add((0,eo.Wn)(ek)),ek.reset()},result:function(){return eT.reset(),eT/2}};function areaRingStart(){eA.point=areaPointFirst}function areaPointFirst(i,o){eA.point=areaPoint,em=ev=i,ey=ex=o}function areaPoint(i,o){ek.add(ex*i-ev*o),ev=i,ex=o}function areaRingEnd(){areaPoint(em,ey)}var eS,eM,eC,eE,eL=s(3559),eP=0,eI=0,eO=0,eD=0,eR=0,eB=0,eF=0,ez=0,eN=0,ej={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){ej.lineStart=centroidRingStart,ej.lineEnd=centroidRingEnd},polygonEnd:function(){ej.point=centroidPoint,ej.lineStart=centroidLineStart,ej.lineEnd=centroidLineEnd},result:function(){var i=eN?[eF/eN,ez/eN]:eB?[eD/eB,eR/eB]:eO?[eP/eO,eI/eO]:[NaN,NaN];return eP=eI=eO=eD=eR=eB=eF=ez=eN=0,i}};function centroidPoint(i,o){eP+=i,eI+=o,++eO}function centroidLineStart(){ej.point=centroidPointFirstLine}function centroidPointFirstLine(i,o){ej.point=centroidPointLine,centroidPoint(eC=i,eE=o)}function centroidPointLine(i,o){var s=i-eC,_=o-eE,F=(0,eo._b)(s*s+_*_);eD+=F*(eC+i)/2,eR+=F*(eE+o)/2,eB+=F,centroidPoint(eC=i,eE=o)}function centroidLineEnd(){ej.point=centroidPoint}function centroidRingStart(){ej.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(eS,eM)}function centroidPointFirstRing(i,o){ej.point=centroidPointRing,centroidPoint(eS=eC=i,eM=eE=o)}function centroidPointRing(i,o){var s=i-eC,_=o-eE,F=(0,eo._b)(s*s+_*_);eD+=F*(eC+i)/2,eR+=F*(eE+o)/2,eB+=F,eF+=(F=eE*i-eC*o)*(eC+i),ez+=F*(eE+o),eN+=3*F,centroidPoint(eC=i,eE=o)}function PathContext(i){this._context=i}PathContext.prototype={_radius:4.5,pointRadius:function(i){return this._radius=i,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(i,o){switch(this._point){case 0:this._context.moveTo(i,o),this._point=1;break;case 1:this._context.lineTo(i,o);break;default:this._context.moveTo(i+this._radius,o),this._context.arc(i,o,this._radius,0,eo.BZ)}},result:es.Z};var eV,eU,eH,eG,eW,eZ=(0,ei.Z)(),eY={point:es.Z,lineStart:function(){eY.point=measure_lengthPointFirst},lineEnd:function(){eV&&measure_lengthPoint(eU,eH),eY.point=es.Z},polygonStart:function(){eV=!0},polygonEnd:function(){eV=null},result:function(){return eZ.reset(),+eZ}};function measure_lengthPointFirst(i,o){eY.point=measure_lengthPoint,eU=eG=i,eH=eW=o}function measure_lengthPoint(i,o){eG-=i,eW-=o,eZ.add((0,eo._b)(eG*eG+eW*eW)),eG=i,eW=o}function PathString(){this._string=[]}function string_circle(i){return"m0,"+i+"a"+i+","+i+" 0 1,1 0,"+-2*i+"a"+i+","+i+" 0 1,1 0,"+2*i+"z"}function path(i,o){var s,_,F=4.5;function path(i){return i&&("function"==typeof F&&_.pointRadius(+F.apply(this,arguments)),(0,el.Z)(i,s(_))),_.result()}return path.area=function(i){return(0,el.Z)(i,s(eA)),eA.result()},path.measure=function(i){return(0,el.Z)(i,s(eY)),eY.result()},path.bounds=function(i){return(0,el.Z)(i,s(eL.Z)),eL.Z.result()},path.centroid=function(i){return(0,el.Z)(i,s(ej)),ej.result()},path.projection=function(o){return arguments.length?(s=null==o?(i=null,ew.Z):(i=o).stream,path):i},path.context=function(i){return arguments.length?(_=null==i?(o=null,new PathString):new PathContext(o=i),"function"!=typeof F&&_.pointRadius(F),path):o},path.pointRadius=function(i){return arguments.length?(F="function"==typeof i?i:(_.pointRadius(+i),+i),path):F},path.projection(i).context(o)}PathString.prototype={_radius:4.5,_circle:string_circle(4.5),pointRadius:function(i){return(i=+i)!==this._radius&&(this._radius=i,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(i,o){switch(this._point){case 0:this._string.push("M",i,",",o),this._point=1;break;case 1:this._string.push("L",i,",",o);break;default:null==this._circle&&(this._circle=string_circle(this._radius)),this._string.push("M",i,",",o,this._circle)}},result:function(){if(!this._string.length)return null;var i=this._string.join("");return this._string=[],i}};var eX=s(15002);function conicProjection(i){var o=0,s=eo.pi/3,_=(0,eX.r)(i),F=_(o,s);return F.parallels=function(i){return arguments.length?_(o=i[0]*eo.uR,s=i[1]*eo.uR):[o*eo.RW,s*eo.RW]},F}function cylindricalEqualAreaRaw(i){var o=(0,eo.mC)(i);function forward(i,s){return[i*o,(0,eo.O$)(s)/o]}return forward.invert=function(i,s){return[i/o,(0,eo.ZR)(s*o)]},forward}function conicEqualAreaRaw(i,o){var s=(0,eo.O$)(i),_=(s+(0,eo.O$)(o))/2;if((0,eo.Wn)(_)<eo.Ho)return cylindricalEqualAreaRaw(i);var F=1+s*(2*_-s),N=(0,eo._b)(F)/_;function project(i,o){var s=(0,eo._b)(F-2*_*(0,eo.O$)(o))/_;return[s*(0,eo.O$)(i*=_),N-s*(0,eo.mC)(i)]}return project.invert=function(i,o){var s=N-o,j=(0,eo.fv)(i,(0,eo.Wn)(s))*(0,eo.Xx)(s);return s*_<0&&(j-=eo.pi*(0,eo.Xx)(i)*(0,eo.Xx)(s)),[j/_,(0,eo.ZR)((F-(i*i+s*s)*_*_)/(2*_))]},project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var eK=s(47589);function multiplex(i){var o=i.length;return{point:function(s,_){for(var F=-1;++F<o;)i[F].point(s,_)},sphere:function(){for(var s=-1;++s<o;)i[s].sphere()},lineStart:function(){for(var s=-1;++s<o;)i[s].lineStart()},lineEnd:function(){for(var s=-1;++s<o;)i[s].lineEnd()},polygonStart:function(){for(var s=-1;++s<o;)i[s].polygonStart()},polygonEnd:function(){for(var s=-1;++s<o;)i[s].polygonEnd()}}}function albersUsa(){var i,o,s,_,F,N,j=albers(),Z=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),X=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),$={point:function(i,o){N=[i,o]}};function albersUsa(i){var o=i[0],j=i[1];return N=null,s.point(o,j),N||(_.point(o,j),N)||(F.point(o,j),N)}function reset(){return i=o=null,albersUsa}return albersUsa.invert=function(i){var o=j.scale(),s=j.translate(),_=(i[0]-s[0])/o,F=(i[1]-s[1])/o;return(F>=.12&&F<.234&&_>=-.425&&_<-.214?Z:F>=.166&&F<.234&&_>=-.214&&_<-.115?X:j).invert(i)},albersUsa.stream=function(s){return i&&o===s?i:i=multiplex([j.stream(o=s),Z.stream(s),X.stream(s)])},albersUsa.precision=function(i){return arguments.length?(j.precision(i),Z.precision(i),X.precision(i),reset()):j.precision()},albersUsa.scale=function(i){return arguments.length?(j.scale(i),Z.scale(.35*i),X.scale(i),albersUsa.translate(j.translate())):j.scale()},albersUsa.translate=function(i){if(!arguments.length)return j.translate();var o=j.scale(),N=+i[0],ee=+i[1];return s=j.translate(i).clipExtent([[N-.455*o,ee-.238*o],[N+.455*o,ee+.238*o]]).stream($),_=Z.translate([N-.307*o,ee+.201*o]).clipExtent([[N-.425*o+eo.Ho,ee+.12*o+eo.Ho],[N-.214*o-eo.Ho,ee+.234*o-eo.Ho]]).stream($),F=X.translate([N-.205*o,ee+.212*o]).clipExtent([[N-.214*o+eo.Ho,ee+.166*o+eo.Ho],[N-.115*o-eo.Ho,ee+.234*o-eo.Ho]]).stream($),reset()},albersUsa.fitExtent=function(i,o){return(0,eK.qg)(albersUsa,i,o)},albersUsa.fitSize=function(i,o){return(0,eK.mF)(albersUsa,i,o)},albersUsa.fitWidth=function(i,o){return(0,eK.V6)(albersUsa,i,o)},albersUsa.fitHeight=function(i,o){return(0,eK.rf)(albersUsa,i,o)},albersUsa.scale(1070)}var eJ=s(12956),e$=s(17889),eQ=s(49386);function mercatorRaw(i,o){return[i,(0,eo.cM)((0,eo.OR)((eo.ou+o)/2))]}function mercator(){return mercatorProjection(mercatorRaw).scale(961/eo.BZ)}function mercatorProjection(i){var o,s,_,F=(0,eX.Z)(i),N=F.center,j=F.scale,Z=F.translate,X=F.clipExtent,$=null;function reclip(){var N=eo.pi*j(),Z=F((0,eQ.Z)(F.rotate()).invert([0,0]));return X(null==$?[[Z[0]-N,Z[1]-N],[Z[0]+N,Z[1]+N]]:i===mercatorRaw?[[Math.max(Z[0]-N,$),o],[Math.min(Z[0]+N,s),_]]:[[$,Math.max(Z[1]-N,o)],[s,Math.min(Z[1]+N,_)]])}return F.scale=function(i){return arguments.length?(j(i),reclip()):j()},F.translate=function(i){return arguments.length?(Z(i),reclip()):Z()},F.center=function(i){return arguments.length?(N(i),reclip()):N()},F.clipExtent=function(i){return arguments.length?(null==i?$=o=s=_=null:($=+i[0][0],o=+i[0][1],s=+i[1][0],_=+i[1][1]),reclip()):null==$?null:[[$,o],[s,_]]},reclip()}function tany(i){return(0,eo.OR)((eo.ou+i)/2)}function conicConformalRaw(i,o){var s=(0,eo.mC)(i),_=i===o?(0,eo.O$)(i):(0,eo.cM)(s/(0,eo.mC)(o))/(0,eo.cM)(tany(o)/tany(i)),F=s*(0,eo.sQ)(tany(i),_)/_;if(!_)return mercatorRaw;function project(i,o){F>0?o<-eo.ou+eo.Ho&&(o=-eo.ou+eo.Ho):o>eo.ou-eo.Ho&&(o=eo.ou-eo.Ho);var s=F/(0,eo.sQ)(tany(o),_);return[s*(0,eo.O$)(_*i),F-s*(0,eo.mC)(_*i)]}return project.invert=function(i,o){var s=F-o,N=(0,eo.Xx)(_)*(0,eo._b)(i*i+s*s),j=(0,eo.fv)(i,(0,eo.Wn)(s))*(0,eo.Xx)(s);return s*_<0&&(j-=eo.pi*(0,eo.Xx)(i)*(0,eo.Xx)(s)),[j/_,2*(0,eo.z4)((0,eo.sQ)(F/N,1/_))-eo.ou]},project}function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])}mercatorRaw.invert=function(i,o){return[i,2*(0,eo.z4)((0,eo.Qq)(o))-eo.ou]};var e0=s(97492);function conicEquidistantRaw(i,o){var s=(0,eo.mC)(i),_=i===o?(0,eo.O$)(i):(s-(0,eo.mC)(o))/(o-i),F=s/_+i;if((0,eo.Wn)(_)<eo.Ho)return e0.k;function project(i,o){var s=F-o,N=_*i;return[s*(0,eo.O$)(N),F-s*(0,eo.mC)(N)]}return project.invert=function(i,o){var s=F-o,N=(0,eo.fv)(i,(0,eo.Wn)(s))*(0,eo.Xx)(s);return s*_<0&&(N-=eo.pi*(0,eo.Xx)(i)*(0,eo.Xx)(s)),[N/_,F-(0,eo.Xx)(_)*(0,eo._b)(i*i+s*s)]},project}function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var e1=(0,eo._b)(3)/2;function equalEarthRaw(i,o){var s=(0,eo.ZR)(e1*(0,eo.O$)(o)),_=s*s,F=_*_*_;return[i*(0,eo.mC)(s)/(e1*(1.340264+-.24331799999999998*_+F*(.0062510000000000005+.034164*_))),s*(1.340264+-.081106*_+F*(893e-6+.003796*_))]}function equalEarth(){return(0,eX.Z)(equalEarthRaw).scale(177.158)}equalEarthRaw.invert=function(i,o){for(var s,_,F=o,N=F*F,j=N*N*N,Z=0;Z<12&&(_=F*(1.340264+-.081106*N+j*(893e-6+.003796*N))-o,F-=s=_/(1.340264+-.24331799999999998*N+j*(.0062510000000000005+.034164*N)),j=(N=F*F)*N*N,!((0,eo.Wn)(s)<eo.aW));++Z);return[e1*i*(1.340264+-.24331799999999998*N+j*(.0062510000000000005+.034164*N))/(0,eo.mC)(F),(0,eo.ZR)((0,eo.O$)(F)/e1)]};var e2=s(98936),e3=s(64684);function projection_identity(){var i,o,s,_,F,N,j,Z=1,X=0,ee=0,et=1,er=1,en=0,ei=null,es=1,el=1,ec=(0,e3.l)({point:function(i,o){var s=projection([i,o]);this.stream.point(s[0],s[1])}}),eu=ew.Z;function reset(){return es=Z*et,el=Z*er,N=j=null,projection}function projection(s){var _=s[0]*es,F=s[1]*el;if(en){var N=F*i-_*o;_=_*i+F*o,F=N}return[_+X,F+ee]}return projection.invert=function(s){var _=s[0]-X,F=s[1]-ee;if(en){var N=F*i+_*o;_=_*i-F*o,F=N}return[_/es,F/el]},projection.stream=function(i){return N&&j===i?N:N=ec(eu(j=i))},projection.postclip=function(i){return arguments.length?(eu=i,ei=s=_=F=null,reset()):eu},projection.clipExtent=function(i){return arguments.length?(eu=null==i?(ei=s=_=F=null,ew.Z):(0,$.Z)(ei=+i[0][0],s=+i[0][1],_=+i[1][0],F=+i[1][1]),reset()):null==ei?null:[[ei,s],[_,F]]},projection.scale=function(i){return arguments.length?(Z=+i,reset()):Z},projection.translate=function(i){return arguments.length?(X=+i[0],ee=+i[1],reset()):[X,ee]},projection.angle=function(s){return arguments.length?(en=s%360*eo.uR,o=(0,eo.O$)(en),i=(0,eo.mC)(en),reset()):en*eo.RW},projection.reflectX=function(i){return arguments.length?(et=i?-1:1,reset()):et<0},projection.reflectY=function(i){return arguments.length?(er=i?-1:1,reset()):er<0},projection.fitExtent=function(i,o){return(0,eK.qg)(projection,i,o)},projection.fitSize=function(i,o){return(0,eK.mF)(projection,i,o)},projection.fitWidth=function(i,o){return(0,eK.V6)(projection,i,o)},projection.fitHeight=function(i,o){return(0,eK.rf)(projection,i,o)},projection}var e5=s(26867),e4=s(57962),e6=s(25382);function stereographicRaw(i,o){var s=(0,eo.mC)(o),_=1+(0,eo.mC)(i)*s;return[s*(0,eo.O$)(i)/_,(0,eo.O$)(o)/_]}function stereographic(){return(0,eX.Z)(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(i,o){return[(0,eo.cM)((0,eo.OR)((eo.ou+o)/2)),-i]}function transverseMercator(){var i=mercatorProjection(transverseMercatorRaw),o=i.center,s=i.rotate;return i.center=function(i){return arguments.length?o([-i[1],i[0]]):[(i=o())[1],-i[0]]},i.rotate=function(i){return arguments.length?s([i[0],i[1],i.length>2?i[2]+90:90]):[(i=s())[0],i[1],i[2]-90]},s([0,0,90]).scale(159.155)}stereographicRaw.invert=(0,e6.O)(function(i){return 2*(0,eo.z4)(i)}),transverseMercatorRaw.invert=function(i,o){return[-o,2*(0,eo.z4)((0,eo.Qq)(i))-eo.ou]}},83074:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(39695);function __WEBPACK_DEFAULT_EXPORT__(i,o){var s=i[0]*_.uR,F=i[1]*_.uR,N=o[0]*_.uR,j=o[1]*_.uR,Z=(0,_.mC)(F),X=(0,_.O$)(F),$=(0,_.mC)(j),ee=(0,_.O$)(j),et=Z*(0,_.mC)(s),er=Z*(0,_.O$)(s),en=$*(0,_.mC)(N),ei=$*(0,_.O$)(N),eo=2*(0,_.ZR)((0,_._b)((0,_.Jy)(j-F)+Z*$*(0,_.Jy)(N-s))),es=(0,_.O$)(eo),el=eo?function(i){var o=(0,_.O$)(i*=eo)/es,s=(0,_.O$)(eo-i)/es,F=s*et+o*en,N=s*er+o*ei;return[(0,_.fv)(N,F)*_.RW,(0,_.fv)(s*X+o*ee,(0,_._b)(F*F+N*N))*_.RW]}:function(){return[s*_.RW,F*_.RW]};return el.distance=eo,el}},39695:function(i,o,s){"use strict";s.d(o,{BZ:function(){return X},Ho:function(){return _},Jy:function(){return haversin},Kh:function(){return acos},O$:function(){return eu},OR:function(){return eh},Qq:function(){return es},RW:function(){return $},Wn:function(){return et},Xx:function(){return ef},ZR:function(){return asin},_b:function(){return ed},aW:function(){return F},cM:function(){return el},fv:function(){return en},mC:function(){return ei},mD:function(){return eo},ou:function(){return j},pi:function(){return N},pu:function(){return Z},sQ:function(){return ec},uR:function(){return ee},z4:function(){return er}});var _=1e-6,F=1e-12,N=Math.PI,j=N/2,Z=N/4,X=2*N,$=180/N,ee=N/180,et=Math.abs,er=Math.atan,en=Math.atan2,ei=Math.cos,eo=Math.ceil,es=Math.exp,el=Math.log,ec=Math.pow,eu=Math.sin,ef=Math.sign||function(i){return i>0?1:i<0?-1:0},ed=Math.sqrt,eh=Math.tan;function acos(i){return i>1?0:i<-1?N:Math.acos(i)}function asin(i){return i>1?j:i<-1?-j:Math.asin(i)}function haversin(i){return(i=eu(i/2))*i}},73182:function(i,o,s){"use strict";function noop(){}s.d(o,{Z:function(){return noop}})},3559:function(i,o,s){"use strict";var _=s(73182),F=1/0,N=1/0,j=-1/0,Z=j,X={point:boundsPoint,lineStart:_.Z,lineEnd:_.Z,polygonStart:_.Z,polygonEnd:_.Z,result:function(){var i=[[F,N],[j,Z]];return j=Z=-(N=F=1/0),i}};function boundsPoint(i,o){i<F&&(F=i),i>j&&(j=i),o<N&&(N=o),o>Z&&(Z=o)}o.Z=X},67108:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(39695);function __WEBPACK_DEFAULT_EXPORT__(i,o){return(0,_.Wn)(i[0]-o[0])<_.Ho&&(0,_.Wn)(i[1]-o[1])<_.Ho}},23071:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(33940),F=s(7620),N=s(39695),j=(0,_.Z)();function longitude(i){return(0,N.Wn)(i[0])<=N.pi?i[0]:(0,N.Xx)(i[0])*(((0,N.Wn)(i[0])+N.pi)%N.BZ-N.pi)}function __WEBPACK_DEFAULT_EXPORT__(i,o){var s=longitude(o),_=o[1],Z=(0,N.O$)(_),X=[(0,N.O$)(s),-(0,N.mC)(s),0],$=0,ee=0;j.reset(),1===Z?_=N.ou+N.Ho:-1===Z&&(_=-N.ou-N.Ho);for(var et=0,er=i.length;et<er;++et)if(ei=(en=i[et]).length)for(var en,ei,eo=en[ei-1],es=longitude(eo),el=eo[1]/2+N.pu,ec=(0,N.O$)(el),eu=(0,N.mC)(el),ef=0;ef<ei;++ef,es=eh,ec=eg,eu=em,eo=ed){var ed=en[ef],eh=longitude(ed),ep=ed[1]/2+N.pu,eg=(0,N.O$)(ep),em=(0,N.mC)(ep),ey=eh-es,ev=ey>=0?1:-1,ex=ev*ey,e_=ex>N.pi,ew=ec*eg;if(j.add((0,N.fv)(ew*ev*(0,N.O$)(ex),eu*em+ew*(0,N.mC)(ex))),$+=e_?ey+ev*N.BZ:ey,e_^es>=s^eh>=s){var eT=(0,F.T5)((0,F.Og)(eo),(0,F.Og)(ed));(0,F.iJ)(eT);var ek=(0,F.T5)(X,eT);(0,F.iJ)(ek);var eA=(e_^ey>=0?-1:1)*(0,N.ZR)(ek[2]);(_>eA||_===eA&&(eT[0]||eT[1]))&&(ee+=e_^ey>=0?1:-1)}}return($<-N.Ho||$<N.Ho&&j<-N.Ho)^1&ee}},25382:function(i,o,s){"use strict";s.d(o,{O:function(){return azimuthalInvert},W:function(){return azimuthalRaw}});var _=s(39695);function azimuthalRaw(i){return function(o,s){var F=(0,_.mC)(o),N=(0,_.mC)(s),j=i(F*N);return[j*N*(0,_.O$)(o),j*(0,_.O$)(s)]}}function azimuthalInvert(i){return function(o,s){var F=(0,_._b)(o*o+s*s),N=i(F),j=(0,_.O$)(N),Z=(0,_.mC)(N);return[(0,_.fv)(o*j,F*Z),(0,_.ZR)(F&&s*j/F)]}}},12956:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__},l:function(){return j}});var _=s(39695),F=s(25382),N=s(15002),j=(0,F.W)(function(i){return(0,_._b)(2/(1+i))});function __WEBPACK_DEFAULT_EXPORT__(){return(0,N.Z)(j).scale(124.75).clipAngle(179.999)}j.invert=(0,F.O)(function(i){return 2*(0,_.ZR)(i/2)})},17889:function(i,o,s){"use strict";s.d(o,{N:function(){return j},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(39695),F=s(25382),N=s(15002),j=(0,F.W)(function(i){return(i=(0,_.Kh)(i))&&i/(0,_.O$)(i)});function __WEBPACK_DEFAULT_EXPORT__(){return(0,N.Z)(j).scale(79.4188).clipAngle(179.999)}j.invert=(0,F.O)(function(i){return i})},97492:function(i,o,s){"use strict";s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__},k:function(){return equirectangularRaw}});var _=s(15002);function equirectangularRaw(i,o){return[i,o]}function __WEBPACK_DEFAULT_EXPORT__(){return(0,_.Z)(equirectangularRaw).scale(152.63)}equirectangularRaw.invert=equirectangularRaw},47589:function(i,o,s){"use strict";s.d(o,{V6:function(){return fitWidth},mF:function(){return fitSize},qg:function(){return fitExtent},rf:function(){return fitHeight}});var _=s(72736),F=s(3559);function fit(i,o,s){var N=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),null!=N&&i.clipExtent(null),(0,_.Z)(s,i.stream(F.Z)),o(F.Z.result()),null!=N&&i.clipExtent(N),i}function fitExtent(i,o,s){return fit(i,function(s){var _=o[1][0]-o[0][0],F=o[1][1]-o[0][1],N=Math.min(_/(s[1][0]-s[0][0]),F/(s[1][1]-s[0][1])),j=+o[0][0]+(_-N*(s[1][0]+s[0][0]))/2,Z=+o[0][1]+(F-N*(s[1][1]+s[0][1]))/2;i.scale(150*N).translate([j,Z])},s)}function fitSize(i,o,s){return fitExtent(i,[[0,0],o],s)}function fitWidth(i,o,s){return fit(i,function(s){var _=+o,F=_/(s[1][0]-s[0][0]),N=(_-F*(s[1][0]+s[0][0]))/2,j=-F*s[0][1];i.scale(150*F).translate([N,j])},s)}function fitHeight(i,o,s){return fit(i,function(s){var _=+o,F=_/(s[1][1]-s[0][1]),N=-F*s[0][0],j=(_-F*(s[1][1]+s[0][1]))/2;i.scale(150*F).translate([N,j])},s)}},98936:function(i,o,s){"use strict";s.d(o,{M:function(){return gnomonicRaw},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(39695),F=s(25382),N=s(15002);function gnomonicRaw(i,o){var s=(0,_.mC)(o),F=(0,_.mC)(i)*s;return[s*(0,_.O$)(i)/F,(0,_.O$)(o)/F]}function __WEBPACK_DEFAULT_EXPORT__(){return(0,N.Z)(gnomonicRaw).scale(144.049).clipAngle(60)}gnomonicRaw.invert=(0,F.O)(_.z4)},15002:function(i,o,s){"use strict";s.d(o,{Z:function(){return projection},r:function(){return projectionMutator}});var _=s(87070),F=s(1457),N=s(87605),j=s(96059),Z=s(8593),X=s(39695),$=s(49386),ee=s(64684),et=s(47589),er=s(7620),en=(0,X.mC)(30*X.uR);function resample(i,o){return+o?resample_resample(i,o):resampleNone(i)}function resampleNone(i){return(0,ee.l)({point:function(o,s){o=i(o,s),this.stream.point(o[0],o[1])}})}function resample_resample(i,o){function resampleLineTo(s,_,F,N,j,Z,$,ee,et,er,ei,eo,es,el){var ec=$-s,eu=ee-_,ef=ec*ec+eu*eu;if(ef>4*o&&es--){var ed=N+er,eh=j+ei,ep=Z+eo,eg=(0,X._b)(ed*ed+eh*eh+ep*ep),em=(0,X.ZR)(ep/=eg),ey=(0,X.Wn)((0,X.Wn)(ep)-1)<X.Ho||(0,X.Wn)(F-et)<X.Ho?(F+et)/2:(0,X.fv)(eh,ed),ev=i(ey,em),ex=ev[0],e_=ev[1],ew=ex-s,eT=e_-_,ek=eu*ew-ec*eT;(ek*ek/ef>o||(0,X.Wn)((ec*ew+eu*eT)/ef-.5)>.3||N*er+j*ei+Z*eo<en)&&(resampleLineTo(s,_,F,N,j,Z,ex,e_,ey,ed/=eg,eh/=eg,ep,es,el),el.point(ex,e_),resampleLineTo(ex,e_,ey,ed,eh,ep,$,ee,et,er,ei,eo,es,el))}}return function(o){var s,_,F,N,j,Z,X,$,ee,et,en,ei,eo={point:point,lineStart:lineStart,lineEnd:lineEnd,polygonStart:function(){o.polygonStart(),eo.lineStart=ringStart},polygonEnd:function(){o.polygonEnd(),eo.lineStart=lineStart}};function point(s,_){s=i(s,_),o.point(s[0],s[1])}function lineStart(){$=NaN,eo.point=linePoint,o.lineStart()}function linePoint(s,_){var F=(0,er.Og)([s,_]),N=i(s,_);resampleLineTo($,ee,X,et,en,ei,$=N[0],ee=N[1],X=s,et=F[0],en=F[1],ei=F[2],16,o),o.point($,ee)}function lineEnd(){eo.point=point,o.lineEnd()}function ringStart(){lineStart(),eo.point=ringPoint,eo.lineEnd=ringEnd}function ringPoint(i,o){linePoint(s=i,o),_=$,F=ee,N=et,j=en,Z=ei,eo.point=linePoint}function ringEnd(){resampleLineTo($,ee,X,et,en,ei,_,F,s,N,j,Z,16,o),eo.lineEnd=lineEnd,lineEnd()}return eo}}var ei=(0,ee.l)({point:function(i,o){this.stream.point(i*X.uR,o*X.uR)}});function transformRotate(i){return(0,ee.l)({point:function(o,s){var _=i(o,s);return this.stream.point(_[0],_[1])}})}function scaleTranslate(i,o,s,_,F){function transform(N,j){return[o+i*(N*=_),s-i*(j*=F)]}return transform.invert=function(N,j){return[(N-o)/i*_,(s-j)/i*F]},transform}function scaleTranslateRotate(i,o,s,_,F,N){var j=(0,X.mC)(N),Z=(0,X.O$)(N),$=j*i,ee=Z*i,et=j/i,er=Z/i,en=(Z*s-j*o)/i,ei=(Z*o+j*s)/i;function transform(i,N){return[$*(i*=_)-ee*(N*=F)+o,s-ee*i-$*N]}return transform.invert=function(i,o){return[_*(et*i-er*o+en),F*(ei-er*i-et*o)]},transform}function projection(i){return projectionMutator(function(){return i})()}function projectionMutator(i){var o,s,ee,er,en,eo,es,el,ec,eu,ef=150,ed=480,eh=250,ep=0,eg=0,em=0,ey=0,ev=0,ex=0,e_=1,ew=1,eT=null,ek=_.Z,eA=null,eS=Z.Z,eM=.5;function projection(i){return el(i[0]*X.uR,i[1]*X.uR)}function invert(i){return(i=el.invert(i[0],i[1]))&&[i[0]*X.RW,i[1]*X.RW]}function recenter(){var i=scaleTranslateRotate(ef,0,0,e_,ew,ex).apply(null,o(ep,eg)),_=(ex?scaleTranslateRotate:scaleTranslate)(ef,ed-i[0],eh-i[1],e_,ew,ex);return s=(0,$.I)(em,ey,ev),es=(0,j.Z)(o,_),el=(0,j.Z)(s,es),eo=resample(es,eM),reset()}function reset(){return ec=eu=null,projection}return projection.stream=function(i){return ec&&eu===i?ec:ec=ei(transformRotate(s)(ek(eo(eS(eu=i)))))},projection.preclip=function(i){return arguments.length?(ek=i,eT=void 0,reset()):ek},projection.postclip=function(i){return arguments.length?(eS=i,eA=ee=er=en=null,reset()):eS},projection.clipAngle=function(i){return arguments.length?(ek=+i?(0,F.Z)(eT=i*X.uR):(eT=null,_.Z),reset()):eT*X.RW},projection.clipExtent=function(i){return arguments.length?(eS=null==i?(eA=ee=er=en=null,Z.Z):(0,N.Z)(eA=+i[0][0],ee=+i[0][1],er=+i[1][0],en=+i[1][1]),reset()):null==eA?null:[[eA,ee],[er,en]]},projection.scale=function(i){return arguments.length?(ef=+i,recenter()):ef},projection.translate=function(i){return arguments.length?(ed=+i[0],eh=+i[1],recenter()):[ed,eh]},projection.center=function(i){return arguments.length?(ep=i[0]%360*X.uR,eg=i[1]%360*X.uR,recenter()):[ep*X.RW,eg*X.RW]},projection.rotate=function(i){return arguments.length?(em=i[0]%360*X.uR,ey=i[1]%360*X.uR,ev=i.length>2?i[2]%360*X.uR:0,recenter()):[em*X.RW,ey*X.RW,ev*X.RW]},projection.angle=function(i){return arguments.length?(ex=i%360*X.uR,recenter()):ex*X.RW},projection.reflectX=function(i){return arguments.length?(e_=i?-1:1,recenter()):e_<0},projection.reflectY=function(i){return arguments.length?(ew=i?-1:1,recenter()):ew<0},projection.precision=function(i){return arguments.length?(eo=resample(es,eM=i*i),reset()):(0,X._b)(eM)},projection.fitExtent=function(i,o){return(0,et.qg)(projection,i,o)},projection.fitSize=function(i,o){return(0,et.mF)(projection,i,o)},projection.fitWidth=function(i,o){return(0,et.V6)(projection,i,o)},projection.fitHeight=function(i,o){return(0,et.rf)(projection,i,o)},function(){return o=i.apply(this,arguments),projection.invert=o.invert&&invert,recenter()}}},26867:function(i,o,s){"use strict";s.d(o,{K:function(){return naturalEarth1Raw},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(15002),F=s(39695);function naturalEarth1Raw(i,o){var s=o*o,_=s*s;return[i*(.8707-.131979*s+_*(-.013791+_*(.003971*s-.001529*_))),o*(1.007226+s*(.015085+_*(-.044475+.028874*s-.005916*_)))]}function __WEBPACK_DEFAULT_EXPORT__(){return(0,_.Z)(naturalEarth1Raw).scale(175.295)}naturalEarth1Raw.invert=function(i,o){var s,_=o,N=25;do{var j=_*_,Z=j*j;_-=s=(_*(1.007226+j*(.015085+Z*(-.044475+.028874*j-.005916*Z)))-o)/(1.007226+j*(.045255+Z*(-.311325+.259866*j-.005916*11*Z)))}while((0,F.Wn)(s)>F.Ho&&--N>0);return[i/(.8707+(j=_*_)*(-.131979+j*(-.013791+j*j*j*(.003971-.001529*j)))),_]}},57962:function(i,o,s){"use strict";s.d(o,{I:function(){return orthographicRaw},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(39695),F=s(25382),N=s(15002);function orthographicRaw(i,o){return[(0,_.mC)(o)*(0,_.O$)(i),(0,_.O$)(o)]}function __WEBPACK_DEFAULT_EXPORT__(){return(0,N.Z)(orthographicRaw).scale(249.5).clipAngle(90+_.Ho)}orthographicRaw.invert=(0,F.O)(_.ZR)},49386:function(i,o,s){"use strict";s.d(o,{I:function(){return rotateRadians},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _=s(96059),F=s(39695);function rotationIdentity(i,o){return[(0,F.Wn)(i)>F.pi?i+Math.round(-i/F.BZ)*F.BZ:i,o]}function rotateRadians(i,o,s){return(i%=F.BZ)?o||s?(0,_.Z)(rotationLambda(i),rotationPhiGamma(o,s)):rotationLambda(i):o||s?rotationPhiGamma(o,s):rotationIdentity}function forwardRotationLambda(i){return function(o,s){return[(o+=i)>F.pi?o-F.BZ:o<-F.pi?o+F.BZ:o,s]}}function rotationLambda(i){var o=forwardRotationLambda(i);return o.invert=forwardRotationLambda(-i),o}function rotationPhiGamma(i,o){var s=(0,F.mC)(i),_=(0,F.O$)(i),N=(0,F.mC)(o),j=(0,F.O$)(o);function rotation(i,o){var Z=(0,F.mC)(o),X=(0,F.mC)(i)*Z,$=(0,F.O$)(i)*Z,ee=(0,F.O$)(o),et=ee*s+X*_;return[(0,F.fv)($*N-et*j,X*s-ee*_),(0,F.ZR)(et*N+$*j)]}return rotation.invert=function(i,o){var Z=(0,F.mC)(o),X=(0,F.mC)(i)*Z,$=(0,F.O$)(i)*Z,ee=(0,F.O$)(o),et=ee*N-$*j;return[(0,F.fv)($*N+ee*j,X*s+et*_),(0,F.ZR)(et*s-X*_)]},rotation}function __WEBPACK_DEFAULT_EXPORT__(i){function forward(o){return o=i(o[0]*F.uR,o[1]*F.uR),o[0]*=F.RW,o[1]*=F.RW,o}return i=rotateRadians(i[0]*F.uR,i[1]*F.uR,i.length>2?i[2]*F.uR:0),forward.invert=function(o){return o=i.invert(o[0]*F.uR,o[1]*F.uR),o[0]*=F.RW,o[1]*=F.RW,o},forward}rotationIdentity.invert=rotationIdentity},72736:function(i,o,s){"use strict";function streamGeometry(i,o){i&&F.hasOwnProperty(i.type)&&F[i.type](i,o)}s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var _={Feature:function(i,o){streamGeometry(i.geometry,o)},FeatureCollection:function(i,o){for(var s=i.features,_=-1,F=s.length;++_<F;)streamGeometry(s[_].geometry,o)}},F={Sphere:function(i,o){o.sphere()},Point:function(i,o){i=i.coordinates,o.point(i[0],i[1],i[2])},MultiPoint:function(i,o){for(var s=i.coordinates,_=-1,F=s.length;++_<F;)i=s[_],o.point(i[0],i[1],i[2])},LineString:function(i,o){streamLine(i.coordinates,o,0)},MultiLineString:function(i,o){for(var s=i.coordinates,_=-1,F=s.length;++_<F;)streamLine(s[_],o,0)},Polygon:function(i,o){streamPolygon(i.coordinates,o)},MultiPolygon:function(i,o){for(var s=i.coordinates,_=-1,F=s.length;++_<F;)streamPolygon(s[_],o)},GeometryCollection:function(i,o){for(var s=i.geometries,_=-1,F=s.length;++_<F;)streamGeometry(s[_],o)}};function streamLine(i,o,s){var _,F=-1,N=i.length-s;for(o.lineStart();++F<N;)_=i[F],o.point(_[0],_[1],_[2]);o.lineEnd()}function streamPolygon(i,o){var s=-1,_=i.length;for(o.polygonStart();++s<_;)streamLine(i[s],o,1);o.polygonEnd()}function __WEBPACK_DEFAULT_EXPORT__(i,o){i&&_.hasOwnProperty(i.type)?_[i.type](i,o):streamGeometry(i,o)}},64684:function(i,o,s){"use strict";function __WEBPACK_DEFAULT_EXPORT__(i){return{stream:transformer(i)}}function transformer(i){return function(o){var s=new TransformStream;for(var _ in i)s[_]=i[_];return s.stream=o,s}}function TransformStream(){}s.d(o,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__},l:function(){return transformer}}),TransformStream.prototype={constructor:TransformStream,point:function(i,o){this.stream.point(i,o)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(i,o,s){"use strict";function defaultSeparation(i,o){return i.parent===o.parent?1:2}function meanX(i){return i.reduce(meanXReduce,0)/i.length}function meanXReduce(i,o){return i+o.x}function maxY(i){return 1+i.reduce(maxYReduce,0)}function maxYReduce(i,o){return Math.max(i,o.y)}function leafLeft(i){for(var o;o=i.children;)i=o[0];return i}function leafRight(i){for(var o;o=i.children;)i=o[o.length-1];return i}function cluster(){var i=defaultSeparation,o=1,s=1,_=!1;function cluster(F){var N,j=0;F.eachAfter(function(o){var s=o.children;s?(o.x=meanX(s),o.y=maxY(s)):(o.x=N?j+=i(o,N):0,o.y=0,N=o)});var Z=leafLeft(F),X=leafRight(F),$=Z.x-i(Z,X)/2,ee=X.x+i(X,Z)/2;return F.eachAfter(_?function(i){i.x=(i.x-F.x)*o,i.y=(F.y-i.y)*s}:function(i){i.x=(i.x-$)/(ee-$)*o,i.y=(1-(F.y?i.y/F.y:1))*s})}return cluster.separation=function(o){return arguments.length?(i=o,cluster):i},cluster.size=function(i){return arguments.length?(_=!1,o=+i[0],s=+i[1],cluster):_?null:[o,s]},cluster.nodeSize=function(i){return arguments.length?(_=!0,o=+i[0],s=+i[1],cluster):_?[o,s]:null},cluster}function count(i){var o=0,s=i.children,_=s&&s.length;if(_)for(;--_>=0;)o+=s[_].value;else o=1;i.value=o}function hierarchy_count(){return this.eachAfter(count)}function each(i){var o,s,_,F,N=this,j=[N];do for(o=j.reverse(),j=[];N=o.pop();)if(i(N),s=N.children)for(_=0,F=s.length;_<F;++_)j.push(s[_]);while(j.length);return this}function eachBefore(i){for(var o,s,_=this,F=[_];_=F.pop();)if(i(_),o=_.children)for(s=o.length-1;s>=0;--s)F.push(o[s]);return this}function eachAfter(i){for(var o,s,_,F=this,N=[F],j=[];F=N.pop();)if(j.push(F),o=F.children)for(s=0,_=o.length;s<_;++s)N.push(o[s]);for(;F=j.pop();)i(F);return this}function sum(i){return this.eachAfter(function(o){for(var s=+i(o.data)||0,_=o.children,F=_&&_.length;--F>=0;)s+=_[F].value;o.value=s})}function sort(i){return this.eachBefore(function(o){o.children&&o.children.sort(i)})}function path(i){for(var o=this,s=leastCommonAncestor(o,i),_=[o];o!==s;)_.push(o=o.parent);for(var F=_.length;i!==s;)_.splice(F,0,i),i=i.parent;return _}function leastCommonAncestor(i,o){if(i===o)return i;var s=i.ancestors(),_=o.ancestors(),F=null;for(i=s.pop(),o=_.pop();i===o;)F=i,i=s.pop(),o=_.pop();return F}function ancestors(){for(var i=this,o=[i];i=i.parent;)o.push(i);return o}function descendants(){var i=[];return this.each(function(o){i.push(o)}),i}function leaves(){var i=[];return this.eachBefore(function(o){o.children||i.push(o)}),i}function links(){var i=this,o=[];return i.each(function(s){s!==i&&o.push({source:s.parent,target:s})}),o}function hierarchy(i,o){var s,_,F,N,j,Z=new Node(i),X=+i.value&&(Z.value=i.value),$=[Z];for(null==o&&(o=defaultChildren);s=$.pop();)if(X&&(s.value=+s.data.value),(F=o(s.data))&&(j=F.length))for(s.children=Array(j),N=j-1;N>=0;--N)$.push(_=s.children[N]=new Node(F[N])),_.parent=s,_.depth=s.depth+1;return Z.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function defaultChildren(i){return i.children}function copyData(i){i.data=i.data.data}function computeHeight(i){var o=0;do i.height=o;while((i=i.parent)&&i.height<++o)}function Node(i){this.data=i,this.depth=this.height=0,this.parent=null}s.r(o),s.d(o,{cluster:function(){return cluster},hierarchy:function(){return hierarchy},pack:function(){return pack},packEnclose:function(){return enclose},packSiblings:function(){return siblings},partition:function(){return partition},stratify:function(){return stratify},tree:function(){return tree},treemap:function(){return treemap},treemapBinary:function(){return binary},treemapDice:function(){return dice},treemapResquarify:function(){return X},treemapSlice:function(){return treemap_slice},treemapSliceDice:function(){return sliceDice},treemapSquarify:function(){return Z}}),Node.prototype=hierarchy.prototype={constructor:Node,count:hierarchy_count,each:each,eachAfter:eachAfter,eachBefore:eachBefore,sum:sum,sort:sort,path:path,ancestors:ancestors,descendants:descendants,leaves:leaves,links:links,copy:node_copy};var _=Array.prototype.slice;function shuffle(i){for(var o,s,_=i.length;_;)s=Math.random()*_--|0,o=i[_],i[_]=i[s],i[s]=o;return i}function enclose(i){for(var o,s,F=0,N=(i=shuffle(_.call(i))).length,j=[];F<N;)o=i[F],s&&enclosesWeak(s,o)?++F:(s=encloseBasis(j=extendBasis(j,o)),F=0);return s}function extendBasis(i,o){var s,_;if(enclosesWeakAll(o,i))return[o];for(s=0;s<i.length;++s)if(enclosesNot(o,i[s])&&enclosesWeakAll(encloseBasis2(i[s],o),i))return[i[s],o];for(s=0;s<i.length-1;++s)for(_=s+1;_<i.length;++_)if(enclosesNot(encloseBasis2(i[s],i[_]),o)&&enclosesNot(encloseBasis2(i[s],o),i[_])&&enclosesNot(encloseBasis2(i[_],o),i[s])&&enclosesWeakAll(encloseBasis3(i[s],i[_],o),i))return[i[s],i[_],o];throw Error()}function enclosesNot(i,o){var s=i.r-o.r,_=o.x-i.x,F=o.y-i.y;return s<0||s*s<_*_+F*F}function enclosesWeak(i,o){var s=i.r-o.r+1e-6,_=o.x-i.x,F=o.y-i.y;return s>0&&s*s>_*_+F*F}function enclosesWeakAll(i,o){for(var s=0;s<o.length;++s)if(!enclosesWeak(i,o[s]))return!1;return!0}function encloseBasis(i){switch(i.length){case 1:return encloseBasis1(i[0]);case 2:return encloseBasis2(i[0],i[1]);case 3:return encloseBasis3(i[0],i[1],i[2])}}function encloseBasis1(i){return{x:i.x,y:i.y,r:i.r}}function encloseBasis2(i,o){var s=i.x,_=i.y,F=i.r,N=o.x,j=o.y,Z=o.r,X=N-s,$=j-_,ee=Z-F,et=Math.sqrt(X*X+$*$);return{x:(s+N+X/et*ee)/2,y:(_+j+$/et*ee)/2,r:(et+F+Z)/2}}function encloseBasis3(i,o,s){var _=i.x,F=i.y,N=i.r,j=o.x,Z=o.y,X=o.r,$=s.x,ee=s.y,et=s.r,er=_-j,en=_-$,ei=F-Z,eo=F-ee,es=X-N,el=et-N,ec=_*_+F*F-N*N,eu=ec-j*j-Z*Z+X*X,ef=ec-$*$-ee*ee+et*et,ed=en*ei-er*eo,eh=(ei*ef-eo*eu)/(2*ed)-_,ep=(eo*es-ei*el)/ed,eg=(en*eu-er*ef)/(2*ed)-F,em=(er*el-en*es)/ed,ey=ep*ep+em*em-1,ev=2*(N+eh*ep+eg*em),ex=eh*eh+eg*eg-N*N,e_=-(ey?(ev+Math.sqrt(ev*ev-4*ey*ex))/(2*ey):ex/ev);return{x:_+eh+ep*e_,y:F+eg+em*e_,r:e_}}function place(i,o,s){var _,F,N,j,Z=i.x-o.x,X=i.y-o.y,$=Z*Z+X*X;$?(F=o.r+s.r,F*=F,j=i.r+s.r,F>(j*=j)?(_=($+j-F)/(2*$),N=Math.sqrt(Math.max(0,j/$-_*_)),s.x=i.x-_*Z-N*X,s.y=i.y-_*X+N*Z):(_=($+F-j)/(2*$),N=Math.sqrt(Math.max(0,F/$-_*_)),s.x=o.x+_*Z-N*X,s.y=o.y+_*X+N*Z)):(s.x=o.x+s.r,s.y=o.y)}function intersects(i,o){var s=i.r+o.r-1e-6,_=o.x-i.x,F=o.y-i.y;return s>0&&s*s>_*_+F*F}function score(i){var o=i._,s=i.next._,_=o.r+s.r,F=(o.x*s.r+s.x*o.r)/_,N=(o.y*s.r+s.y*o.r)/_;return F*F+N*N}function siblings_Node(i){this._=i,this.next=null,this.previous=null}function packEnclose(i){var o,s,_,F,N,j,Z,X,$,ee,et;if(!(F=i.length))return 0;if((o=i[0]).x=0,o.y=0,!(F>1))return o.r;if(s=i[1],o.x=-s.r,s.x=o.r,s.y=0,!(F>2))return o.r+s.r;place(s,o,_=i[2]),o=new siblings_Node(o),s=new siblings_Node(s),_=new siblings_Node(_),o.next=_.previous=s,s.next=o.previous=_,_.next=s.previous=o;x:for(Z=3;Z<F;++Z){place(o._,s._,_=i[Z]),_=new siblings_Node(_),X=s.next,$=o.previous,ee=s._.r,et=o._.r;do if(ee<=et){if(intersects(X._,_._)){s=X,o.next=s,s.previous=o,--Z;continue x}ee+=X._.r,X=X.next}else{if(intersects($._,_._)){(o=$).next=s,s.previous=o,--Z;continue x}et+=$._.r,$=$.previous}while(X!==$.next);for(_.previous=o,_.next=s,o.next=s.previous=s=_,N=score(o);(_=_.next)!==s;)(j=score(_))<N&&(o=_,N=j);s=o.next}for(o=[s._],_=s;(_=_.next)!==s;)o.push(_._);for(Z=0,_=enclose(o);Z<F;++Z)o=i[Z],o.x-=_.x,o.y-=_.y;return _.r}function siblings(i){return packEnclose(i),i}function optional(i){return null==i?null:required(i)}function required(i){if("function"!=typeof i)throw Error();return i}function constantZero(){return 0}function constant(i){return function(){return i}}function defaultRadius(i){return Math.sqrt(i.value)}function pack(){var i=null,o=1,s=1,_=constantZero;function pack(F){return F.x=o/2,F.y=s/2,i?F.eachBefore(radiusLeaf(i)).eachAfter(packChildren(_,.5)).eachBefore(translateChild(1)):F.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(_,F.r/Math.min(o,s))).eachBefore(translateChild(Math.min(o,s)/(2*F.r))),F}return pack.radius=function(o){return arguments.length?(i=optional(o),pack):i},pack.size=function(i){return arguments.length?(o=+i[0],s=+i[1],pack):[o,s]},pack.padding=function(i){return arguments.length?(_="function"==typeof i?i:constant(+i),pack):_},pack}function radiusLeaf(i){return function(o){o.children||(o.r=Math.max(0,+i(o)||0))}}function packChildren(i,o){return function(s){if(_=s.children){var _,F,N,j=_.length,Z=i(s)*o||0;if(Z)for(F=0;F<j;++F)_[F].r+=Z;if(N=packEnclose(_),Z)for(F=0;F<j;++F)_[F].r-=Z;s.r=N+Z}}}function translateChild(i){return function(o){var s=o.parent;o.r*=i,s&&(o.x=s.x+i*o.x,o.y=s.y+i*o.y)}}function treemap_round(i){i.x0=Math.round(i.x0),i.y0=Math.round(i.y0),i.x1=Math.round(i.x1),i.y1=Math.round(i.y1)}function dice(i,o,s,_,F){for(var N,j=i.children,Z=-1,X=j.length,$=i.value&&(_-o)/i.value;++Z<X;)(N=j[Z]).y0=s,N.y1=F,N.x0=o,N.x1=o+=N.value*$}function partition(){var i=1,o=1,s=0,_=!1;function partition(F){var N=F.height+1;return F.x0=F.y0=s,F.x1=i,F.y1=o/N,F.eachBefore(positionNode(o,N)),_&&F.eachBefore(treemap_round),F}function positionNode(i,o){return function(_){_.children&&dice(_,_.x0,i*(_.depth+1)/o,_.x1,i*(_.depth+2)/o);var F=_.x0,N=_.y0,j=_.x1-s,Z=_.y1-s;j<F&&(F=j=(F+j)/2),Z<N&&(N=Z=(N+Z)/2),_.x0=F,_.y0=N,_.x1=j,_.y1=Z}}return partition.round=function(i){return arguments.length?(_=!!i,partition):_},partition.size=function(s){return arguments.length?(i=+s[0],o=+s[1],partition):[i,o]},partition.padding=function(i){return arguments.length?(s=+i,partition):s},partition}var F={depth:-1},N={};function defaultId(i){return i.id}function defaultParentId(i){return i.parentId}function stratify(){var i=defaultId,o=defaultParentId;function stratify(s){var _,j,Z,X,$,ee,et,er=s.length,en=Array(er),ei={};for(j=0;j<er;++j)_=s[j],$=en[j]=new Node(_),null!=(ee=i(_,j,s))&&(ee+="")&&(ei[et="$"+($.id=ee)]=et in ei?N:$);for(j=0;j<er;++j)if($=en[j],null!=(ee=o(s[j],j,s))&&(ee+="")){if(!(X=ei["$"+ee]))throw Error("missing: "+ee);if(X===N)throw Error("ambiguous: "+ee);X.children?X.children.push($):X.children=[$],$.parent=X}else{if(Z)throw Error("multiple roots");Z=$}if(!Z)throw Error("no root");if(Z.parent=F,Z.eachBefore(function(i){i.depth=i.parent.depth+1,--er}).eachBefore(computeHeight),Z.parent=null,er>0)throw Error("cycle");return Z}return stratify.id=function(o){return arguments.length?(i=required(o),stratify):i},stratify.parentId=function(i){return arguments.length?(o=required(i),stratify):o},stratify}function tree_defaultSeparation(i,o){return i.parent===o.parent?1:2}function nextLeft(i){var o=i.children;return o?o[0]:i.t}function nextRight(i){var o=i.children;return o?o[o.length-1]:i.t}function moveSubtree(i,o,s){var _=s/(o.i-i.i);o.c-=_,o.s+=s,i.c+=_,o.z+=s,o.m+=s}function executeShifts(i){for(var o,s=0,_=0,F=i.children,N=F.length;--N>=0;)o=F[N],o.z+=s,o.m+=s,s+=o.s+(_+=o.c)}function nextAncestor(i,o,s){return i.a.parent===o.parent?i.a:s}function TreeNode(i,o){this._=i,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=o}function treeRoot(i){for(var o,s,_,F,N,j=new TreeNode(i,0),Z=[j];o=Z.pop();)if(_=o._.children)for(o.children=Array(N=_.length),F=N-1;F>=0;--F)Z.push(s=o.children[F]=new TreeNode(_[F],F)),s.parent=o;return(j.parent=new TreeNode(null,0)).children=[j],j}function tree(){var i=tree_defaultSeparation,o=1,s=1,_=null;function tree(F){var N=treeRoot(F);if(N.eachAfter(firstWalk),N.parent.m=-N.z,N.eachBefore(secondWalk),_)F.eachBefore(sizeNode);else{var j=F,Z=F,X=F;F.eachBefore(function(i){i.x<j.x&&(j=i),i.x>Z.x&&(Z=i),i.depth>X.depth&&(X=i)});var $=j===Z?1:i(j,Z)/2,ee=$-j.x,et=o/(Z.x+$+ee),er=s/(X.depth||1);F.eachBefore(function(i){i.x=(i.x+ee)*et,i.y=i.depth*er})}return F}function firstWalk(o){var s=o.children,_=o.parent.children,F=o.i?_[o.i-1]:null;if(s){executeShifts(o);var N=(s[0].z+s[s.length-1].z)/2;F?(o.z=F.z+i(o._,F._),o.m=o.z-N):o.z=N}else F&&(o.z=F.z+i(o._,F._));o.parent.A=apportion(o,F,o.parent.A||_[0])}function secondWalk(i){i._.x=i.z+i.parent.m,i.m+=i.parent.m}function apportion(o,s,_){if(s){for(var F,N=o,j=o,Z=s,X=N.parent.children[0],$=N.m,ee=j.m,et=Z.m,er=X.m;Z=nextRight(Z),N=nextLeft(N),Z&&N;)X=nextLeft(X),(j=nextRight(j)).a=o,(F=Z.z+et-N.z-$+i(Z._,N._))>0&&(moveSubtree(nextAncestor(Z,o,_),o,F),$+=F,ee+=F),et+=Z.m,$+=N.m,er+=X.m,ee+=j.m;Z&&!nextRight(j)&&(j.t=Z,j.m+=et-ee),N&&!nextLeft(X)&&(X.t=N,X.m+=$-er,_=o)}return _}function sizeNode(i){i.x*=o,i.y=i.depth*s}return tree.separation=function(o){return arguments.length?(i=o,tree):i},tree.size=function(i){return arguments.length?(_=!1,o=+i[0],s=+i[1],tree):_?null:[o,s]},tree.nodeSize=function(i){return arguments.length?(_=!0,o=+i[0],s=+i[1],tree):_?[o,s]:null},tree}function treemap_slice(i,o,s,_,F){for(var N,j=i.children,Z=-1,X=j.length,$=i.value&&(F-s)/i.value;++Z<X;)(N=j[Z]).x0=o,N.x1=_,N.y0=s,N.y1=s+=N.value*$}TreeNode.prototype=Object.create(Node.prototype);var j=(1+Math.sqrt(5))/2;function squarifyRatio(i,o,s,_,F,N){for(var j,Z,X,$,ee,et,er,en,ei,eo,es,el=[],ec=o.children,eu=0,ef=0,ed=ec.length,eh=o.value;eu<ed;){X=F-s,$=N-_;do ee=ec[ef++].value;while(!ee&&ef<ed);for(et=er=ee,ei=Math.max(er/(es=ee*ee*(eo=Math.max($/X,X/$)/(eh*i))),es/et);ef<ed;++ef){if(ee+=Z=ec[ef].value,Z<et&&(et=Z),Z>er&&(er=Z),(en=Math.max(er/(es=ee*ee*eo),es/et))>ei){ee-=Z;break}ei=en}el.push(j={value:ee,dice:X<$,children:ec.slice(eu,ef)}),j.dice?dice(j,s,_,F,eh?_+=$*ee/eh:N):treemap_slice(j,s,_,eh?s+=X*ee/eh:F,N),eh-=ee,eu=ef}return el}var Z=function custom(i){function squarify(o,s,_,F,N){squarifyRatio(i,o,s,_,F,N)}return squarify.ratio=function(i){return custom((i=+i)>1?i:1)},squarify}(j);function treemap(){var i=Z,o=!1,s=1,_=1,F=[0],N=constantZero,j=constantZero,X=constantZero,$=constantZero,ee=constantZero;function treemap(i){return i.x0=i.y0=0,i.x1=s,i.y1=_,i.eachBefore(positionNode),F=[0],o&&i.eachBefore(treemap_round),i}function positionNode(o){var s=F[o.depth],_=o.x0+s,Z=o.y0+s,et=o.x1-s,er=o.y1-s;et<_&&(_=et=(_+et)/2),er<Z&&(Z=er=(Z+er)/2),o.x0=_,o.y0=Z,o.x1=et,o.y1=er,o.children&&(s=F[o.depth+1]=N(o)/2,_+=ee(o)-s,Z+=j(o)-s,et-=X(o)-s,er-=$(o)-s,et<_&&(_=et=(_+et)/2),er<Z&&(Z=er=(Z+er)/2),i(o,_,Z,et,er))}return treemap.round=function(i){return arguments.length?(o=!!i,treemap):o},treemap.size=function(i){return arguments.length?(s=+i[0],_=+i[1],treemap):[s,_]},treemap.tile=function(o){return arguments.length?(i=required(o),treemap):i},treemap.padding=function(i){return arguments.length?treemap.paddingInner(i).paddingOuter(i):treemap.paddingInner()},treemap.paddingInner=function(i){return arguments.length?(N="function"==typeof i?i:constant(+i),treemap):N},treemap.paddingOuter=function(i){return arguments.length?treemap.paddingTop(i).paddingRight(i).paddingBottom(i).paddingLeft(i):treemap.paddingTop()},treemap.paddingTop=function(i){return arguments.length?(j="function"==typeof i?i:constant(+i),treemap):j},treemap.paddingRight=function(i){return arguments.length?(X="function"==typeof i?i:constant(+i),treemap):X},treemap.paddingBottom=function(i){return arguments.length?($="function"==typeof i?i:constant(+i),treemap):$},treemap.paddingLeft=function(i){return arguments.length?(ee="function"==typeof i?i:constant(+i),treemap):ee},treemap}function binary(i,o,s,_,F){var N,j,Z=i.children,X=Z.length,$=Array(X+1);for($[0]=j=N=0;N<X;++N)$[N+1]=j+=Z[N].value;function partition(i,o,s,_,F,N,j){if(i>=o-1){var X=Z[i];X.x0=_,X.y0=F,X.x1=N,X.y1=j;return}for(var ee=$[i],et=s/2+ee,er=i+1,en=o-1;er<en;){var ei=er+en>>>1;$[ei]<et?er=ei+1:en=ei}et-$[er-1]<$[er]-et&&i+1<er&&--er;var eo=$[er]-ee,es=s-eo;if(N-_>j-F){var el=(_*es+N*eo)/s;partition(i,er,eo,_,F,el,j),partition(er,o,es,el,F,N,j)}else{var ec=(F*es+j*eo)/s;partition(i,er,eo,_,F,N,ec),partition(er,o,es,_,ec,N,j)}}partition(0,X,i.value,o,s,_,F)}function sliceDice(i,o,s,_,F){(1&i.depth?treemap_slice:dice)(i,o,s,_,F)}var X=function custom(i){function resquarify(o,s,_,F,N){if((j=o._squarify)&&j.ratio===i)for(var j,Z,X,$,ee,et=-1,er=j.length,en=o.value;++et<er;){for(X=(Z=j[et]).children,$=Z.value=0,ee=X.length;$<ee;++$)Z.value+=X[$].value;Z.dice?dice(Z,s,_,F,_+=(N-_)*Z.value/en):treemap_slice(Z,s,_,s+=(F-s)*Z.value/en,N),en-=Z.value}else o._squarify=j=squarifyRatio(i,o,s,_,F,N),j.ratio=i}return resquarify.ratio=function(i){return custom((i=+i)>1?i:1)},resquarify}(j)},45879:function(i,o,s){"use strict";s.d(o,{h5:function(){return linkHorizontal}});var _=Math.PI,F=2*_,N=F-1e-6;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(i,o){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+o)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,o){this._+="L"+(this._x1=+i)+","+(this._y1=+o)},quadraticCurveTo:function(i,o,s,_){this._+="Q"+ +i+","+ +o+","+(this._x1=+s)+","+(this._y1=+_)},bezierCurveTo:function(i,o,s,_,F,N){this._+="C"+ +i+","+ +o+","+ +s+","+ +_+","+(this._x1=+F)+","+(this._y1=+N)},arcTo:function(i,o,s,F,N){i=+i,o=+o,s=+s,F=+F,N=+N;var j=this._x1,Z=this._y1,X=s-i,$=F-o,ee=j-i,et=Z-o,er=ee*ee+et*et;if(N<0)throw Error("negative radius: "+N);if(null===this._x1)this._+="M"+(this._x1=i)+","+(this._y1=o);else if(er>1e-6){if(Math.abs(et*X-$*ee)>1e-6&&N){var en=s-j,ei=F-Z,eo=X*X+$*$,es=Math.sqrt(eo),el=Math.sqrt(er),ec=N*Math.tan((_-Math.acos((eo+er-(en*en+ei*ei))/(2*es*el)))/2),eu=ec/el,ef=ec/es;Math.abs(eu-1)>1e-6&&(this._+="L"+(i+eu*ee)+","+(o+eu*et)),this._+="A"+N+","+N+",0,0,"+ +(et*en>ee*ei)+","+(this._x1=i+ef*X)+","+(this._y1=o+ef*$)}else this._+="L"+(this._x1=i)+","+(this._y1=o)}},arc:function(i,o,s,j,Z,X){i=+i,o=+o,s=+s,X=!!X;var $=s*Math.cos(j),ee=s*Math.sin(j),et=i+$,er=o+ee,en=1^X,ei=X?j-Z:Z-j;if(s<0)throw Error("negative radius: "+s);null===this._x1?this._+="M"+et+","+er:(Math.abs(this._x1-et)>1e-6||Math.abs(this._y1-er)>1e-6)&&(this._+="L"+et+","+er),s&&(ei<0&&(ei=ei%F+F),ei>N?this._+="A"+s+","+s+",0,1,"+en+","+(i-$)+","+(o-ee)+"A"+s+","+s+",0,1,"+en+","+(this._x1=et)+","+(this._y1=er):ei>1e-6&&(this._+="A"+s+","+s+",0,"+ +(ei>=_)+","+en+","+(this._x1=i+s*Math.cos(Z))+","+(this._y1=o+s*Math.sin(Z))))},rect:function(i,o,s,_){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+o)+"h"+ +s+"v"+ +_+"h"+-s+"Z"},toString:function(){return this._}};var j=path,Z=Array.prototype.slice;function constant(i){return function(){return i}}function point_x(i){return i[0]}function point_y(i){return i[1]}function linkSource(i){return i.source}function linkTarget(i){return i.target}function link_link(i){var o=linkSource,s=linkTarget,_=point_x,F=point_y,N=null;function link(){var X,$=Z.call(arguments),ee=o.apply(this,$),et=s.apply(this,$);if(N||(N=X=j()),i(N,+_.apply(this,($[0]=ee,$)),+F.apply(this,$),+_.apply(this,($[0]=et,$)),+F.apply(this,$)),X)return N=null,X+""||null}return link.source=function(i){return arguments.length?(o=i,link):o},link.target=function(i){return arguments.length?(s=i,link):s},link.x=function(i){return arguments.length?(_="function"==typeof i?i:constant(+i),link):_},link.y=function(i){return arguments.length?(F="function"==typeof i?i:constant(+i),link):F},link.context=function(i){return arguments.length?(N=null==i?null:i,link):N},link}function curveHorizontal(i,o,s,_,F){i.moveTo(o,s),i.bezierCurveTo(o=(o+_)/2,s,o,F,_,F)}function linkHorizontal(){return link_link(curveHorizontal)}},84096:function(i,o,s){"use strict";s.d(o,{i$:function(){return F},Dq:function(){return formatLocale},g0:function(){return N}});var _,F,N,j=s(58176),Z=s(48480),X=s(59879),$=s(82301),ee=s(34823),et=s(79791);function localDate(i){if(0<=i.y&&i.y<100){var o=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return o.setFullYear(i.y),o}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function utcDate(i){if(0<=i.y&&i.y<100){var o=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return o.setUTCFullYear(i.y),o}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function newDate(i,o,s){return{y:i,m:o,d:s,H:0,M:0,S:0,L:0}}function formatLocale(i){var o=i.dateTime,s=i.date,_=i.time,F=i.periods,N=i.days,ee=i.shortDays,et=i.months,en=i.shortMonths,ei=formatRe(F),eo=formatLookup(F),es=formatRe(N),el=formatLookup(N),ec=formatRe(ee),eu=formatLookup(ee),ef=formatRe(et),ed=formatLookup(et),eh=formatRe(en),ep=formatLookup(en),eg={a:formatShortWeekday,A:formatWeekday,b:formatShortMonth,B:formatMonth,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:formatPeriod,q:formatQuarter,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},em={a:formatUTCShortWeekday,A:formatUTCWeekday,b:formatUTCShortMonth,B:formatUTCMonth,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:formatUTCPeriod,q:formatUTCQuarter,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},ey={a:parseShortWeekday,A:parseWeekday,b:parseShortMonth,B:parseMonth,c:parseLocaleDateTime,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:parsePeriod,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:parseLocaleDate,X:parseLocaleTime,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(i,o){return function(s){var _,F,N,j=[],Z=-1,X=0,$=i.length;for(s instanceof Date||(s=new Date(+s));++Z<$;)37===i.charCodeAt(Z)&&(j.push(i.slice(X,Z)),null!=(F=er[_=i.charAt(++Z)])?_=i.charAt(++Z):F="e"===_?" ":"0",(N=o[_])&&(_=N(s,F)),j.push(_),X=Z+1);return j.push(i.slice(X,Z)),j.join("")}}function newParse(i,o){return function(s){var _,F,N=newDate(1900,void 0,1);if(parseSpecifier(N,i,s+="",0)!=s.length)return null;if("Q"in N)return new Date(N.Q);if("s"in N)return new Date(1e3*N.s+("L"in N?N.L:0));if(!o||"Z"in N||(N.Z=0),"p"in N&&(N.H=N.H%12+12*N.p),void 0===N.m&&(N.m="q"in N?N.q:0),"V"in N){if(N.V<1||N.V>53)return null;"w"in N||(N.w=1),"Z"in N?(_=(F=(_=utcDate(newDate(N.y,0,1))).getUTCDay())>4||0===F?j.l6.ceil(_):(0,j.l6)(_),_=Z.Z.offset(_,(N.V-1)*7),N.y=_.getUTCFullYear(),N.m=_.getUTCMonth(),N.d=_.getUTCDate()+(N.w+6)%7):(_=(F=(_=localDate(newDate(N.y,0,1))).getDay())>4||0===F?X.wA.ceil(_):(0,X.wA)(_),_=$.Z.offset(_,(N.V-1)*7),N.y=_.getFullYear(),N.m=_.getMonth(),N.d=_.getDate()+(N.w+6)%7)}else("W"in N||"U"in N)&&("w"in N||(N.w="u"in N?N.u%7:"W"in N?1:0),F="Z"in N?utcDate(newDate(N.y,0,1)).getUTCDay():localDate(newDate(N.y,0,1)).getDay(),N.m=0,N.d="W"in N?(N.w+6)%7+7*N.W-(F+5)%7:N.w+7*N.U-(F+6)%7);return"Z"in N?(N.H+=N.Z/100|0,N.M+=N.Z%100,utcDate(N)):localDate(N)}}function parseSpecifier(i,o,s,_){for(var F,N,j=0,Z=o.length,X=s.length;j<Z;){if(_>=X)return -1;if(37===(F=o.charCodeAt(j++))){if(!(N=ey[(F=o.charAt(j++))in er?o.charAt(j++):F])||(_=N(i,s,_))<0)return -1}else if(F!=s.charCodeAt(_++))return -1}return _}function parsePeriod(i,o,s){var _=ei.exec(o.slice(s));return _?(i.p=eo[_[0].toLowerCase()],s+_[0].length):-1}function parseShortWeekday(i,o,s){var _=ec.exec(o.slice(s));return _?(i.w=eu[_[0].toLowerCase()],s+_[0].length):-1}function parseWeekday(i,o,s){var _=es.exec(o.slice(s));return _?(i.w=el[_[0].toLowerCase()],s+_[0].length):-1}function parseShortMonth(i,o,s){var _=eh.exec(o.slice(s));return _?(i.m=ep[_[0].toLowerCase()],s+_[0].length):-1}function parseMonth(i,o,s){var _=ef.exec(o.slice(s));return _?(i.m=ed[_[0].toLowerCase()],s+_[0].length):-1}function parseLocaleDateTime(i,s,_){return parseSpecifier(i,o,s,_)}function parseLocaleDate(i,o,_){return parseSpecifier(i,s,o,_)}function parseLocaleTime(i,o,s){return parseSpecifier(i,_,o,s)}function formatShortWeekday(i){return ee[i.getDay()]}function formatWeekday(i){return N[i.getDay()]}function formatShortMonth(i){return en[i.getMonth()]}function formatMonth(i){return et[i.getMonth()]}function formatPeriod(i){return F[+(i.getHours()>=12)]}function formatQuarter(i){return 1+~~(i.getMonth()/3)}function formatUTCShortWeekday(i){return ee[i.getUTCDay()]}function formatUTCWeekday(i){return N[i.getUTCDay()]}function formatUTCShortMonth(i){return en[i.getUTCMonth()]}function formatUTCMonth(i){return et[i.getUTCMonth()]}function formatUTCPeriod(i){return F[+(i.getUTCHours()>=12)]}function formatUTCQuarter(i){return 1+~~(i.getUTCMonth()/3)}return eg.x=newFormat(s,eg),eg.X=newFormat(_,eg),eg.c=newFormat(o,eg),em.x=newFormat(s,em),em.X=newFormat(_,em),em.c=newFormat(o,em),{format:function(i){var o=newFormat(i+="",eg);return o.toString=function(){return i},o},parse:function(i){var o=newParse(i+="",!1);return o.toString=function(){return i},o},utcFormat:function(i){var o=newFormat(i+="",em);return o.toString=function(){return i},o},utcParse:function(i){var o=newParse(i+="",!0);return o.toString=function(){return i},o}}}var er={"-":"",_:" ",0:"0"},en=/^\s*\d+/,ei=/^%/,eo=/[\\^$*+?|[\]().{}]/g;function pad(i,o,s){var _=i<0?"-":"",F=(_?-i:i)+"",N=F.length;return _+(N<s?Array(s-N+1).join(o)+F:F)}function requote(i){return i.replace(eo,"\\$&")}function formatRe(i){return RegExp("^(?:"+i.map(requote).join("|")+")","i")}function formatLookup(i){for(var o={},s=-1,_=i.length;++s<_;)o[i[s].toLowerCase()]=s;return o}function parseWeekdayNumberSunday(i,o,s){var _=en.exec(o.slice(s,s+1));return _?(i.w=+_[0],s+_[0].length):-1}function parseWeekdayNumberMonday(i,o,s){var _=en.exec(o.slice(s,s+1));return _?(i.u=+_[0],s+_[0].length):-1}function parseWeekNumberSunday(i,o,s){var _=en.exec(o.slice(s,s+2));return _?(i.U=+_[0],s+_[0].length):-1}function parseWeekNumberISO(i,o,s){var _=en.exec(o.slice(s,s+2));return _?(i.V=+_[0],s+_[0].length):-1}function parseWeekNumberMonday(i,o,s){var _=en.exec(o.slice(s,s+2));return _?(i.W=+_[0],s+_[0].length):-1}function parseFullYear(i,o,s){var _=en.exec(o.slice(s,s+4));return _?(i.y=+_[0],s+_[0].length):-1}function parseYear(i,o,s){var _=en.exec(o.slice(s,s+2));return _?(i.y=+_[0]+(+_[0]>68?1900:2e3),s+_[0].length):-1}function parseZone(i,o,s){var _=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(o.slice(s,s+6));return _?(i.Z=_[1]?0:-(_[2]+(_[3]||"00")),s+_[0].length):-1}function parseQuarter(i,o,s){var _=en.exec(o.slice(s,s+1));return _?(i.q=3*_[0]-3,s+_[0].length):-1}function parseMonthNumber(i,o,s){var _=en.exec(o.slice(s,s+2));return _?(i.m=_[0]-1,s+_[0].length):-1}function parseDayOfMonth(i,o,s){var _=en.exec(o.slice(s,s+2));return _?(i.d=+_[0],s+_[0].length):-1}function parseDayOfYear(i,o,s){var _=en.exec(o.slice(s,s+3));return _?(i.m=0,i.d=+_[0],s+_[0].length):-1}function parseHour24(i,o,s){var _=en.exec(o.slice(s,s+2));return _?(i.H=+_[0],s+_[0].length):-1}function parseMinutes(i,o,s){var _=en.exec(o.slice(s,s+2));return _?(i.M=+_[0],s+_[0].length):-1}function parseSeconds(i,o,s){var _=en.exec(o.slice(s,s+2));return _?(i.S=+_[0],s+_[0].length):-1}function parseMilliseconds(i,o,s){var _=en.exec(o.slice(s,s+3));return _?(i.L=+_[0],s+_[0].length):-1}function parseMicroseconds(i,o,s){var _=en.exec(o.slice(s,s+6));return _?(i.L=Math.floor(_[0]/1e3),s+_[0].length):-1}function parseLiteralPercent(i,o,s){var _=ei.exec(o.slice(s,s+1));return _?s+_[0].length:-1}function parseUnixTimestamp(i,o,s){var _=en.exec(o.slice(s));return _?(i.Q=+_[0],s+_[0].length):-1}function parseUnixTimestampSeconds(i,o,s){var _=en.exec(o.slice(s));return _?(i.s=+_[0],s+_[0].length):-1}function formatDayOfMonth(i,o){return pad(i.getDate(),o,2)}function formatHour24(i,o){return pad(i.getHours(),o,2)}function formatHour12(i,o){return pad(i.getHours()%12||12,o,2)}function formatDayOfYear(i,o){return pad(1+$.Z.count((0,ee.Z)(i),i),o,3)}function formatMilliseconds(i,o){return pad(i.getMilliseconds(),o,3)}function formatMicroseconds(i,o){return formatMilliseconds(i,o)+"000"}function formatMonthNumber(i,o){return pad(i.getMonth()+1,o,2)}function formatMinutes(i,o){return pad(i.getMinutes(),o,2)}function formatSeconds(i,o){return pad(i.getSeconds(),o,2)}function formatWeekdayNumberMonday(i){var o=i.getDay();return 0===o?7:o}function formatWeekNumberSunday(i,o){return pad(X.OM.count((0,ee.Z)(i)-1,i),o,2)}function formatWeekNumberISO(i,o){var s=i.getDay();return i=s>=4||0===s?(0,X.bL)(i):X.bL.ceil(i),pad(X.bL.count((0,ee.Z)(i),i)+(4===(0,ee.Z)(i).getDay()),o,2)}function formatWeekdayNumberSunday(i){return i.getDay()}function formatWeekNumberMonday(i,o){return pad(X.wA.count((0,ee.Z)(i)-1,i),o,2)}function formatYear(i,o){return pad(i.getFullYear()%100,o,2)}function formatFullYear(i,o){return pad(i.getFullYear()%1e4,o,4)}function formatZone(i){var o=i.getTimezoneOffset();return(o>0?"-":(o*=-1,"+"))+pad(o/60|0,"0",2)+pad(o%60,"0",2)}function formatUTCDayOfMonth(i,o){return pad(i.getUTCDate(),o,2)}function formatUTCHour24(i,o){return pad(i.getUTCHours(),o,2)}function formatUTCHour12(i,o){return pad(i.getUTCHours()%12||12,o,2)}function formatUTCDayOfYear(i,o){return pad(1+Z.Z.count((0,et.Z)(i),i),o,3)}function formatUTCMilliseconds(i,o){return pad(i.getUTCMilliseconds(),o,3)}function formatUTCMicroseconds(i,o){return formatUTCMilliseconds(i,o)+"000"}function formatUTCMonthNumber(i,o){return pad(i.getUTCMonth()+1,o,2)}function formatUTCMinutes(i,o){return pad(i.getUTCMinutes(),o,2)}function formatUTCSeconds(i,o){return pad(i.getUTCSeconds(),o,2)}function formatUTCWeekdayNumberMonday(i){var o=i.getUTCDay();return 0===o?7:o}function formatUTCWeekNumberSunday(i,o){return pad(j.Ox.count((0,et.Z)(i)-1,i),o,2)}function formatUTCWeekNumberISO(i,o){var s=i.getUTCDay();return i=s>=4||0===s?(0,j.hB)(i):j.hB.ceil(i),pad(j.hB.count((0,et.Z)(i),i)+(4===(0,et.Z)(i).getUTCDay()),o,2)}function formatUTCWeekdayNumberSunday(i){return i.getUTCDay()}function formatUTCWeekNumberMonday(i,o){return pad(j.l6.count((0,et.Z)(i)-1,i),o,2)}function formatUTCYear(i,o){return pad(i.getUTCFullYear()%100,o,2)}function formatUTCFullYear(i,o){return pad(i.getUTCFullYear()%1e4,o,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(i){return+i}function formatUnixTimestampSeconds(i){return Math.floor(+i/1e3)}F=(_=formatLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,_.parse,N=_.utcFormat,_.utcParse},82301:function(i,o,s){"use strict";s.d(o,{a:function(){return j}});var _=s(30052),F=s(54263),N=(0,_.Z)(function(i){i.setHours(0,0,0,0)},function(i,o){i.setDate(i.getDate()+o)},function(i,o){return(o-i-(o.getTimezoneOffset()-i.getTimezoneOffset())*F.yB)/F.UD},function(i){return i.getDate()-1});o.Z=N;var j=N.range},54263:function(i,o,s){"use strict";s.d(o,{UD:function(){return j},Y2:function(){return N},Ym:function(){return _},iM:function(){return Z},yB:function(){return F}});var _=1e3,F=6e4,N=36e5,j=864e5,Z=6048e5},81041:function(i,o,s){"use strict";s.r(o),s.d(o,{timeDay:function(){return el.Z},timeDays:function(){return el.a},timeFriday:function(){return ec.mC},timeFridays:function(){return ec.b$},timeHour:function(){return eo},timeHours:function(){return es},timeInterval:function(){return _.Z},timeMillisecond:function(){return N},timeMilliseconds:function(){return j},timeMinute:function(){return er},timeMinutes:function(){return en},timeMonday:function(){return ec.wA},timeMondays:function(){return ec.bJ},timeMonth:function(){return ef},timeMonths:function(){return ed},timeSaturday:function(){return ec.EY},timeSaturdays:function(){return ec.Ff},timeSecond:function(){return $},timeSeconds:function(){return ee},timeSunday:function(){return ec.OM},timeSundays:function(){return ec.vm},timeThursday:function(){return ec.bL},timeThursdays:function(){return ec.$t},timeTuesday:function(){return ec.sy},timeTuesdays:function(){return ec.aU},timeWednesday:function(){return ec.zg},timeWednesdays:function(){return ec.Ld},timeWeek:function(){return ec.OM},timeWeeks:function(){return ec.vm},timeYear:function(){return eh.Z},timeYears:function(){return eh.g},utcDay:function(){return e_.Z},utcDays:function(){return e_.y},utcFriday:function(){return ew.QQ},utcFridays:function(){return ew.fz},utcHour:function(){return ev},utcHours:function(){return ex},utcMillisecond:function(){return N},utcMilliseconds:function(){return j},utcMinute:function(){return eg},utcMinutes:function(){return em},utcMonday:function(){return ew.l6},utcMondays:function(){return ew.$3},utcMonth:function(){return ek},utcMonths:function(){return eA},utcSaturday:function(){return ew.g4},utcSaturdays:function(){return ew.Q_},utcSecond:function(){return $},utcSeconds:function(){return ee},utcSunday:function(){return ew.Ox},utcSundays:function(){return ew.SU},utcThursday:function(){return ew.hB},utcThursdays:function(){return ew.xj},utcTuesday:function(){return ew.J1},utcTuesdays:function(){return ew.DK},utcWednesday:function(){return ew.b3},utcWednesdays:function(){return ew.uy},utcWeek:function(){return ew.Ox},utcWeeks:function(){return ew.SU},utcYear:function(){return eS.Z},utcYears:function(){return eS.D}});var _=s(30052),F=(0,_.Z)(function(){},function(i,o){i.setTime(+i+o)},function(i,o){return o-i});F.every=function(i){return isFinite(i=Math.floor(i))&&i>0?i>1?(0,_.Z)(function(o){o.setTime(Math.floor(o/i)*i)},function(o,s){o.setTime(+o+s*i)},function(o,s){return(s-o)/i}):F:null};var N=F,j=F.range,Z=s(54263),X=(0,_.Z)(function(i){i.setTime(i-i.getMilliseconds())},function(i,o){i.setTime(+i+o*Z.Ym)},function(i,o){return(o-i)/Z.Ym},function(i){return i.getUTCSeconds()}),$=X,ee=X.range,et=(0,_.Z)(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*Z.Ym)},function(i,o){i.setTime(+i+o*Z.yB)},function(i,o){return(o-i)/Z.yB},function(i){return i.getMinutes()}),er=et,en=et.range,ei=(0,_.Z)(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*Z.Ym-i.getMinutes()*Z.yB)},function(i,o){i.setTime(+i+o*Z.Y2)},function(i,o){return(o-i)/Z.Y2},function(i){return i.getHours()}),eo=ei,es=ei.range,el=s(82301),ec=s(59879),eu=(0,_.Z)(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,o){i.setMonth(i.getMonth()+o)},function(i,o){return o.getMonth()-i.getMonth()+(o.getFullYear()-i.getFullYear())*12},function(i){return i.getMonth()}),ef=eu,ed=eu.range,eh=s(34823),ep=(0,_.Z)(function(i){i.setUTCSeconds(0,0)},function(i,o){i.setTime(+i+o*Z.yB)},function(i,o){return(o-i)/Z.yB},function(i){return i.getUTCMinutes()}),eg=ep,em=ep.range,ey=(0,_.Z)(function(i){i.setUTCMinutes(0,0,0)},function(i,o){i.setTime(+i+o*Z.Y2)},function(i,o){return(o-i)/Z.Y2},function(i){return i.getUTCHours()}),ev=ey,ex=ey.range,e_=s(48480),ew=s(58176),eT=(0,_.Z)(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,o){i.setUTCMonth(i.getUTCMonth()+o)},function(i,o){return o.getUTCMonth()-i.getUTCMonth()+(o.getUTCFullYear()-i.getUTCFullYear())*12},function(i){return i.getUTCMonth()}),ek=eT,eA=eT.range,eS=s(79791)},30052:function(i,o,s){"use strict";s.d(o,{Z:function(){return newInterval}});var _=new Date,F=new Date;function newInterval(i,o,s,N){function interval(o){return i(o=0==arguments.length?new Date:new Date(+o)),o}return interval.floor=function(o){return i(o=new Date(+o)),o},interval.ceil=function(s){return i(s=new Date(s-1)),o(s,1),i(s),s},interval.round=function(i){var o=interval(i),s=interval.ceil(i);return i-o<s-i?o:s},interval.offset=function(i,s){return o(i=new Date(+i),null==s?1:Math.floor(s)),i},interval.range=function(s,_,F){var N,j=[];if(s=interval.ceil(s),F=null==F?1:Math.floor(F),!(s<_)||!(F>0))return j;do j.push(N=new Date(+s)),o(s,F),i(s);while(N<s&&s<_);return j},interval.filter=function(s){return newInterval(function(o){if(o>=o)for(;i(o),!s(o);)o.setTime(o-1)},function(i,_){if(i>=i){if(_<0)for(;++_<=0;)for(;o(i,-1),!s(i););else for(;--_>=0;)for(;o(i,1),!s(i););}})},s&&(interval.count=function(o,N){return _.setTime(+o),F.setTime(+N),i(_),i(F),Math.floor(s(_,F))},interval.every=function(i){return isFinite(i=Math.floor(i))&&i>0?i>1?interval.filter(N?function(o){return N(o)%i==0}:function(o){return interval.count(0,o)%i==0}):interval:null}),interval}},48480:function(i,o,s){"use strict";s.d(o,{y:function(){return j}});var _=s(30052),F=s(54263),N=(0,_.Z)(function(i){i.setUTCHours(0,0,0,0)},function(i,o){i.setUTCDate(i.getUTCDate()+o)},function(i,o){return(o-i)/F.UD},function(i){return i.getUTCDate()-1});o.Z=N;var j=N.range},58176:function(i,o,s){"use strict";s.d(o,{$3:function(){return en},DK:function(){return ei},J1:function(){return Z},Ox:function(){return N},QQ:function(){return ee},Q_:function(){return ec},SU:function(){return er},b3:function(){return X},fz:function(){return el},g4:function(){return et},hB:function(){return $},l6:function(){return j},uy:function(){return eo},xj:function(){return es}});var _=s(30052),F=s(54263);function utcWeekday(i){return(0,_.Z)(function(o){o.setUTCDate(o.getUTCDate()-(o.getUTCDay()+7-i)%7),o.setUTCHours(0,0,0,0)},function(i,o){i.setUTCDate(i.getUTCDate()+7*o)},function(i,o){return(o-i)/F.iM})}var N=utcWeekday(0),j=utcWeekday(1),Z=utcWeekday(2),X=utcWeekday(3),$=utcWeekday(4),ee=utcWeekday(5),et=utcWeekday(6),er=N.range,en=j.range,ei=Z.range,eo=X.range,es=$.range,el=ee.range,ec=et.range},79791:function(i,o,s){"use strict";s.d(o,{D:function(){return N}});var _=s(30052),F=(0,_.Z)(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,o){i.setUTCFullYear(i.getUTCFullYear()+o)},function(i,o){return o.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});F.every=function(i){return isFinite(i=Math.floor(i))&&i>0?(0,_.Z)(function(o){o.setUTCFullYear(Math.floor(o.getUTCFullYear()/i)*i),o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function(o,s){o.setUTCFullYear(o.getUTCFullYear()+s*i)}):null},o.Z=F;var N=F.range},59879:function(i,o,s){"use strict";s.d(o,{$t:function(){return es},EY:function(){return et},Ff:function(){return ec},Ld:function(){return eo},OM:function(){return N},aU:function(){return ei},b$:function(){return el},bJ:function(){return en},bL:function(){return $},mC:function(){return ee},sy:function(){return Z},vm:function(){return er},wA:function(){return j},zg:function(){return X}});var _=s(30052),F=s(54263);function weekday(i){return(0,_.Z)(function(o){o.setDate(o.getDate()-(o.getDay()+7-i)%7),o.setHours(0,0,0,0)},function(i,o){i.setDate(i.getDate()+7*o)},function(i,o){return(o-i-(o.getTimezoneOffset()-i.getTimezoneOffset())*F.yB)/F.iM})}var N=weekday(0),j=weekday(1),Z=weekday(2),X=weekday(3),$=weekday(4),ee=weekday(5),et=weekday(6),er=N.range,en=j.range,ei=Z.range,eo=X.range,es=$.range,el=ee.range,ec=et.range},34823:function(i,o,s){"use strict";s.d(o,{g:function(){return N}});var _=s(30052),F=(0,_.Z)(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,o){i.setFullYear(i.getFullYear()+o)},function(i,o){return o.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()});F.every=function(i){return isFinite(i=Math.floor(i))&&i>0?(0,_.Z)(function(o){o.setFullYear(Math.floor(o.getFullYear()/i)*i),o.setMonth(0,1),o.setHours(0,0,0,0)},function(o,s){o.setFullYear(o.getFullYear()+s*i)}):null},o.Z=F;var N=F.range},17045:function(i,o,s){"use strict";var _=s(8709),F="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),N=Object.prototype.toString,j=Array.prototype.concat,Z=Object.defineProperty,X=s(55622)(),$=Z&&X,defineProperty=function(i,o,s,_){if(o in i){if(!0===_){if(i[o]===s)return}else if(!("function"==typeof _&&"[object Function]"===N.call(_))||!_())return}$?Z(i,o,{configurable:!0,enumerable:!1,value:s,writable:!0}):i[o]=s},defineProperties=function(i,o){var s=arguments.length>2?arguments[2]:{},N=_(o);F&&(N=j.call(N,Object.getOwnPropertySymbols(o)));for(var Z=0;Z<N.length;Z+=1)defineProperty(i,N[Z],o[N[Z]],s[N[Z]])};defineProperties.supportsDescriptors=!!$,i.exports=defineProperties},46775:function(i){i.exports=function(){for(var i=0;i<arguments.length;i++)if(void 0!==arguments[i])return arguments[i]}},53545:function(i){"use strict";i.exports=kerning;var o=(kerning.canvas=document.createElement("canvas")).getContext("2d"),s=createPairs([32,126]);function kerning(i,_){Array.isArray(i)&&(i=i.join(", "));var F,N={},j=16,Z=.05;_&&(2===_.length&&"number"==typeof _[0]?F=createPairs(_):Array.isArray(_)?F=_:(_.o?F=createPairs(_.o):_.pairs&&(F=_.pairs),_.fontSize&&(j=_.fontSize),null!=_.threshold&&(Z=_.threshold))),F||(F=s),o.font=j+"px "+i;for(var X=0;X<F.length;X++){var $=F[X],ee=o.measureText($[0]).width+o.measureText($[1]).width,et=o.measureText($).width;if(Math.abs(ee-et)>j*Z){var er=(et-ee)/j;N[$]=1e3*er}}return N}function createPairs(i){for(var o=[],s=i[0];s<=i[1];s++)for(var _=String.fromCharCode(s),F=i[0];F<i[1];F++){var N=_+String.fromCharCode(F);o.push(N)}return o}kerning.createPairs=createPairs,kerning.ascii=s},31457:function(i,o,s){var _=s(65185),F=s(18625),N={M:"moveTo",C:"bezierCurveTo"};i.exports=function(i,o){i.beginPath(),F(_(o)).forEach(function(o){var s=o[0],_=o.slice(1);i[N[s]].apply(i,_)}),i.closePath()}},90660:function(i){i.exports=function(i){switch(i){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(i){"use strict";function dupe_array(i,o,s){var _=0|i[s];if(_<=0)return[];var F,N=Array(_);if(s===i.length-1)for(F=0;F<_;++F)N[F]=o;else for(F=0;F<_;++F)N[F]=dupe_array(i,o,s+1);return N}function dupe_number(i,o){var s,_;for(_=0,s=Array(i);_<i;++_)s[_]=o;return s}function dupe(i,o){switch(void 0===o&&(o=0),typeof i){case"number":if(i>0)return dupe_number(0|i,o);break;case"object":if("number"==typeof i.length)return dupe_array(i,o,0)}return[]}i.exports=dupe},11474:function(i){"use strict";function earcut(i,o,s){s=s||2;var _,F,N,j,Z,X,$,ee=o&&o.length,et=ee?o[0]*s:i.length,er=linkedList(i,0,et,s,!0),en=[];if(!er||er.next===er.prev)return en;if(ee&&(er=eliminateHoles(i,o,er,s)),i.length>80*s){_=N=i[0],F=j=i[1];for(var ei=s;ei<et;ei+=s)Z=i[ei],X=i[ei+1],Z<_&&(_=Z),X<F&&(F=X),Z>N&&(N=Z),X>j&&(j=X);$=0!==($=Math.max(N-_,j-F))?1/$:0}return earcutLinked(er,en,s,_,F,$),en}function linkedList(i,o,s,_,F){var N,j;if(F===signedArea(i,o,s,_)>0)for(N=o;N<s;N+=_)j=insertNode(N,i[N],i[N+1],j);else for(N=s-_;N>=o;N-=_)j=insertNode(N,i[N],i[N+1],j);return j&&equals(j,j.next)&&(removeNode(j),j=j.next),j}function filterPoints(i,o){if(!i)return i;o||(o=i);var s,_=i;do if(s=!1,!_.steiner&&(equals(_,_.next)||0===area(_.prev,_,_.next))){if(removeNode(_),(_=o=_.prev)===_.next)break;s=!0}else _=_.next;while(s||_!==o);return o}function earcutLinked(i,o,s,_,F,N,j){if(i){!j&&N&&indexCurve(i,_,F,N);for(var Z,X,$=i;i.prev!==i.next;){if(Z=i.prev,X=i.next,N?isEarHashed(i,_,F,N):isEar(i)){o.push(Z.i/s),o.push(i.i/s),o.push(X.i/s),removeNode(i),i=X.next,$=X.next;continue}if((i=X)===$){j?1===j?earcutLinked(i=cureLocalIntersections(filterPoints(i),o,s),o,s,_,F,N,2):2===j&&splitEarcut(i,o,s,_,F,N):earcutLinked(filterPoints(i),o,s,_,F,N,1);break}}}}function isEar(i){var o=i.prev,s=i.next;if(area(o,i,s)>=0)return!1;for(var _=i.next.next;_!==i.prev;){if(pointInTriangle(o.x,o.y,i.x,i.y,s.x,s.y,_.x,_.y)&&area(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function isEarHashed(i,o,s,_){var F=i.prev,N=i.next;if(area(F,i,N)>=0)return!1;for(var j=F.x<i.x?F.x<N.x?F.x:N.x:i.x<N.x?i.x:N.x,Z=F.y<i.y?F.y<N.y?F.y:N.y:i.y<N.y?i.y:N.y,X=F.x>i.x?F.x>N.x?F.x:N.x:i.x>N.x?i.x:N.x,$=F.y>i.y?F.y>N.y?F.y:N.y:i.y>N.y?i.y:N.y,ee=zOrder(j,Z,o,s,_),et=zOrder(X,$,o,s,_),er=i.prevZ,en=i.nextZ;er&&er.z>=ee&&en&&en.z<=et;){if(er!==i.prev&&er!==i.next&&pointInTriangle(F.x,F.y,i.x,i.y,N.x,N.y,er.x,er.y)&&area(er.prev,er,er.next)>=0||(er=er.prevZ,en!==i.prev&&en!==i.next&&pointInTriangle(F.x,F.y,i.x,i.y,N.x,N.y,en.x,en.y)&&area(en.prev,en,en.next)>=0))return!1;en=en.nextZ}for(;er&&er.z>=ee;){if(er!==i.prev&&er!==i.next&&pointInTriangle(F.x,F.y,i.x,i.y,N.x,N.y,er.x,er.y)&&area(er.prev,er,er.next)>=0)return!1;er=er.prevZ}for(;en&&en.z<=et;){if(en!==i.prev&&en!==i.next&&pointInTriangle(F.x,F.y,i.x,i.y,N.x,N.y,en.x,en.y)&&area(en.prev,en,en.next)>=0)return!1;en=en.nextZ}return!0}function cureLocalIntersections(i,o,s){var _=i;do{var F=_.prev,N=_.next.next;!equals(F,N)&&intersects(F,_,_.next,N)&&locallyInside(F,N)&&locallyInside(N,F)&&(o.push(F.i/s),o.push(_.i/s),o.push(N.i/s),removeNode(_),removeNode(_.next),_=i=N),_=_.next}while(_!==i);return filterPoints(_)}function splitEarcut(i,o,s,_,F,N){var j=i;do{for(var Z=j.next.next;Z!==j.prev;){if(j.i!==Z.i&&isValidDiagonal(j,Z)){var X=splitPolygon(j,Z);j=filterPoints(j,j.next),X=filterPoints(X,X.next),earcutLinked(j,o,s,_,F,N),earcutLinked(X,o,s,_,F,N);return}Z=Z.next}j=j.next}while(j!==i)}function eliminateHoles(i,o,s,_){var F,N,j,Z,X,$=[];for(F=0,N=o.length;F<N;F++)j=o[F]*_,Z=F<N-1?o[F+1]*_:i.length,(X=linkedList(i,j,Z,_,!1))===X.next&&(X.steiner=!0),$.push(getLeftmost(X));for($.sort(compareX),F=0;F<$.length;F++)eliminateHole($[F],s),s=filterPoints(s,s.next);return s}function compareX(i,o){return i.x-o.x}function eliminateHole(i,o){if(o=findHoleBridge(i,o)){var s=splitPolygon(o,i);filterPoints(o,o.next),filterPoints(s,s.next)}}function findHoleBridge(i,o){var s,_=o,F=i.x,N=i.y,j=-1/0;do{if(N<=_.y&&N>=_.next.y&&_.next.y!==_.y){var Z=_.x+(N-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(Z<=F&&Z>j){if(j=Z,Z===F){if(N===_.y)return _;if(N===_.next.y)return _.next}s=_.x<_.next.x?_:_.next}}_=_.next}while(_!==o);if(!s)return null;if(F===j)return s;var X,$=s,ee=s.x,et=s.y,er=1/0;_=s;do F>=_.x&&_.x>=ee&&F!==_.x&&pointInTriangle(N<et?F:j,N,ee,et,N<et?j:F,N,_.x,_.y)&&(X=Math.abs(N-_.y)/(F-_.x),locallyInside(_,i)&&(X<er||X===er&&(_.x>s.x||_.x===s.x&&sectorContainsSector(s,_)))&&(s=_,er=X)),_=_.next;while(_!==$);return s}function sectorContainsSector(i,o){return 0>area(i.prev,i,o.prev)&&0>area(o.next,i,i.next)}function indexCurve(i,o,s,_){var F=i;do null===F.z&&(F.z=zOrder(F.x,F.y,o,s,_)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==i);F.prevZ.nextZ=null,F.prevZ=null,sortLinked(F)}function sortLinked(i){var o,s,_,F,N,j,Z,X,$=1;do{for(s=i,i=null,N=null,j=0;s;){for(j++,_=s,Z=0,o=0;o<$&&(Z++,_=_.nextZ);o++);for(X=$;Z>0||X>0&&_;)0!==Z&&(0===X||!_||s.z<=_.z)?(F=s,s=s.nextZ,Z--):(F=_,_=_.nextZ,X--),N?N.nextZ=F:i=F,F.prevZ=N,N=F;s=_}N.nextZ=null,$*=2}while(j>1);return i}function zOrder(i,o,s,_,F){return(i=((i=((i=((i=((i=32767*(i-s)*F)|i<<8)&16711935)|i<<4)&252645135)|i<<2)&858993459)|i<<1)&1431655765)|(o=((o=((o=((o=((o=32767*(o-_)*F)|o<<8)&16711935)|o<<4)&252645135)|o<<2)&858993459)|o<<1)&1431655765)<<1}function getLeftmost(i){var o=i,s=i;do(o.x<s.x||o.x===s.x&&o.y<s.y)&&(s=o),o=o.next;while(o!==i);return s}function pointInTriangle(i,o,s,_,F,N,j,Z){return(F-j)*(o-Z)-(i-j)*(N-Z)>=0&&(i-j)*(_-Z)-(s-j)*(o-Z)>=0&&(s-j)*(N-Z)-(F-j)*(_-Z)>=0}function isValidDiagonal(i,o){return i.next.i!==o.i&&i.prev.i!==o.i&&!intersectsPolygon(i,o)&&(locallyInside(i,o)&&locallyInside(o,i)&&middleInside(i,o)&&(area(i.prev,i,o.prev)||area(i,o.prev,o))||equals(i,o)&&area(i.prev,i,i.next)>0&&area(o.prev,o,o.next)>0)}function area(i,o,s){return(o.y-i.y)*(s.x-o.x)-(o.x-i.x)*(s.y-o.y)}function equals(i,o){return i.x===o.x&&i.y===o.y}function intersects(i,o,s,_){var F=sign(area(i,o,s)),N=sign(area(i,o,_)),j=sign(area(s,_,i)),Z=sign(area(s,_,o));return!!(F!==N&&j!==Z||0===F&&onSegment(i,s,o)||0===N&&onSegment(i,_,o)||0===j&&onSegment(s,i,_)||0===Z&&onSegment(s,o,_))}function onSegment(i,o,s){return o.x<=Math.max(i.x,s.x)&&o.x>=Math.min(i.x,s.x)&&o.y<=Math.max(i.y,s.y)&&o.y>=Math.min(i.y,s.y)}function sign(i){return i>0?1:i<0?-1:0}function intersectsPolygon(i,o){var s=i;do{if(s.i!==i.i&&s.next.i!==i.i&&s.i!==o.i&&s.next.i!==o.i&&intersects(s,s.next,i,o))return!0;s=s.next}while(s!==i);return!1}function locallyInside(i,o){return 0>area(i.prev,i,i.next)?area(i,o,i.next)>=0&&area(i,i.prev,o)>=0:0>area(i,o,i.prev)||0>area(i,i.next,o)}function middleInside(i,o){var s=i,_=!1,F=(i.x+o.x)/2,N=(i.y+o.y)/2;do s.y>N!=s.next.y>N&&s.next.y!==s.y&&F<(s.next.x-s.x)*(N-s.y)/(s.next.y-s.y)+s.x&&(_=!_),s=s.next;while(s!==i);return _}function splitPolygon(i,o){var s=new Node(i.i,i.x,i.y),_=new Node(o.i,o.x,o.y),F=i.next,N=o.prev;return i.next=o,o.prev=i,s.next=F,F.prev=s,_.next=s,s.prev=_,N.next=_,_.prev=N,_}function insertNode(i,o,s,_){var F=new Node(i,o,s);return _?(F.next=_.next,F.prev=_,_.next.prev=F,_.next=F):(F.prev=F,F.next=F),F}function removeNode(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Node(i,o,s){this.i=i,this.x=o,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(i,o,s,_){for(var F=0,N=o,j=s-_;N<s;N+=_)F+=(i[j]-i[N])*(i[N+1]+i[j+1]),j=N;return F}i.exports=earcut,i.exports.default=earcut,earcut.deviation=function(i,o,s,_){var F=o&&o.length,N=F?o[0]*s:i.length,j=Math.abs(signedArea(i,0,N,s));if(F)for(var Z=0,X=o.length;Z<X;Z++){var $=o[Z]*s,ee=Z<X-1?o[Z+1]*s:i.length;j-=Math.abs(signedArea(i,$,ee,s))}var et=0;for(Z=0;Z<_.length;Z+=3){var er=_[Z]*s,en=_[Z+1]*s,ei=_[Z+2]*s;et+=Math.abs((i[er]-i[ei])*(i[en+1]-i[er+1])-(i[er]-i[en])*(i[ei+1]-i[er+1]))}return 0===j&&0===et?0:Math.abs((et-j)/j)},earcut.flatten=function(i){for(var o=i[0][0].length,s={vertices:[],holes:[],dimensions:o},_=0,F=0;F<i.length;F++){for(var N=0;N<i[F].length;N++)for(var j=0;j<o;j++)s.vertices.push(i[F][N][j]);F>0&&(_+=i[F-1].length,s.holes.push(_))}return s}},2502:function(i,o,s){var _=s(68664);i.exports=function(i,o){var s,F=[],N=[],j=[],Z={},X=[];function unblock(i){j[i]=!1,Z.hasOwnProperty(i)&&Object.keys(Z[i]).forEach(function(o){delete Z[i][o],j[o]&&unblock(o)})}function circuit(i){var o,_,F=!1;for(N.push(i),j[i]=!0,o=0;o<X[i].length;o++)(_=X[i][o])===s?(output(s,N),F=!0):j[_]||(F=circuit(_));if(F)unblock(i);else for(o=0;o<X[i].length;o++){var $=Z[_=X[i][o]];$||($={},Z[_]=$),$[_]=!0}return N.pop(),F}function output(i,s){var _=[].concat(s).concat(i);o?o(circuit):F.push(_)}function subgraph(o){for(var s=0;s<i.length;s++)s<o&&(i[s]=[]),i[s]=i[s].filter(function(i){return i>=o})}function adjacencyStructureSCC(o){subgraph(o);for(var s,F=_(i).components.filter(function(i){return i.length>1}),N=1/0,j=0;j<F.length;j++)for(var Z=0;Z<F[j].length;Z++)F[j][Z]<N&&(N=F[j][Z],s=j);var X=F[s];return!!X&&{leastVertex:N,adjList:i.map(function(i,o){return -1===X.indexOf(o)?[]:i.filter(function(i){return -1!==X.indexOf(i)})})}}s=0;for(var $=i.length;s<$;){var ee=adjacencyStructureSCC(s);if(s=ee.leastVertex,X=ee.adjList){for(var et=0;et<X.length;et++)for(var er=0;er<X[et].length;er++){var en=X[et][er];j[+en]=!1,Z[en]={}}circuit(s),s+=1}else s=$}if(!o)return F}},16134:function(i,o,s){"use strict";var _=s(36672);i.exports=function(){return _(this).length=0,this}},4892:function(i,o,s){"use strict";i.exports=s(64404)()?Array.from:s(49441)},64404:function(i){"use strict";i.exports=function(){var i,o,s=Array.from;return"function"==typeof s&&!!((o=s(i=["raz","dwa"]))&&o!==i&&"dwa"===o[1])}},49441:function(i,o,s){"use strict";var _=s(8260).iterator,F=s(73051),N=s(33717),j=s(35976),Z=s(78513),X=s(36672),$=s(95296),ee=s(87963),et=Array.isArray,er=Function.prototype.call,en={configurable:!0,enumerable:!0,writable:!0,value:null},ei=Object.defineProperty;i.exports=function(i){var o,s,eo,es,el,ec,eu,ef,ed,eh,ep=arguments[1],eg=arguments[2];if(i=Object(X(i)),$(ep)&&Z(ep),this&&this!==Array&&N(this))o=this;else{if(!ep){if(F(i))return 1!==(el=i.length)?Array.apply(null,i):((es=[,])[0]=i[0],es);if(et(i)){for(s=0,es=Array(el=i.length);s<el;++s)es[s]=i[s];return es}}es=[]}if(!et(i)){if(void 0!==(ed=i[_])){for(eu=Z(ed).call(i),o&&(es=new o),ef=eu.next(),s=0;!ef.done;)eh=ep?er.call(ep,eg,ef.value,s):ef.value,o?(en.value=eh,ei(es,s,en)):es[s]=eh,ef=eu.next(),++s;el=s}else if(ee(i)){for(el=i.length,o&&(es=new o),s=0,eo=0;s<el;++s)eh=i[s],s+1<el&&(ec=eh.charCodeAt(0))>=55296&&ec<=56319&&(eh+=i[++s]),eh=ep?er.call(ep,eg,eh,eo):eh,o?(en.value=eh,ei(es,eo,en)):es[eo]=eh,++eo;el=eo}}if(void 0===el)for(el=j(i.length),o&&(es=new o(el)),s=0;s<el;++s)eh=ep?er.call(ep,eg,i[s],s):i[s],o?(en.value=eh,ei(es,s,en)):es[s]=eh;return o&&(en.value=null,es.length=el),es}},73051:function(i){"use strict";var o=Object.prototype.toString,s=o.call(function(){return arguments}());i.exports=function(i){return o.call(i)===s}},33717:function(i){"use strict";var o=Object.prototype.toString,s=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);i.exports=function(i){return"function"==typeof i&&s(o.call(i))}},52345:function(i){"use strict";i.exports=function(){}},9953:function(i,o,s){"use strict";i.exports=s(90436)()?Math.sign:s(6069)},90436:function(i){"use strict";i.exports=function(){var i=Math.sign;return"function"==typeof i&&1===i(10)&&-1===i(-20)}},6069:function(i){"use strict";i.exports=function(i){return isNaN(i=Number(i))||0===i?i:i>0?1:-1}},56247:function(i,o,s){"use strict";var _=s(9953),F=Math.abs,N=Math.floor;i.exports=function(i){return isNaN(i)?0:0!==(i=Number(i))&&isFinite(i)?_(i)*N(F(i)):i}},35976:function(i,o,s){"use strict";var _=s(56247),F=Math.max;i.exports=function(i){return F(0,_(i))}},67260:function(i,o,s){"use strict";var _=s(78513),F=s(36672),N=Function.prototype.bind,j=Function.prototype.call,Z=Object.keys,X=Object.prototype.propertyIsEnumerable;i.exports=function(i,o){return function(s,$){var ee,et=arguments[2],er=arguments[3];return s=Object(F(s)),_($),ee=Z(s),er&&ee.sort("function"==typeof er?N.call(er,s):void 0),"function"!=typeof i&&(i=ee[i]),j.call(i,ee,function(i,_){return X.call(s,i)?j.call($,et,s[i],i,s,_):o})}}},95879:function(i,o,s){"use strict";i.exports=s(73583)()?Object.assign:s(34205)},73583:function(i){"use strict";i.exports=function(){var i,o=Object.assign;return"function"==typeof o&&(o(i={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),i.foo+i.bar+i.trzy==="razdwatrzy")}},34205:function(i,o,s){"use strict";var _=s(68700),F=s(36672),N=Math.max;i.exports=function(i,o){var s,j,Z,X=N(arguments.length,2);for(j=1,i=Object(F(i)),Z=function(_){try{i[_]=o[_]}catch(i){s||(s=i)}};j<X;++j)o=arguments[j],_(o).forEach(Z);if(void 0!==s)throw s;return i}},19012:function(i,o,s){"use strict";var _=s(4892),F=s(95879),N=s(36672);i.exports=function(i){var o=Object(N(i)),s=arguments[1],j=Object(arguments[2]);if(o!==i&&!s)return o;var Z={};return s?_(s,function(o){(j.ensure||o in i)&&(Z[o]=i[o])}):F(Z,i),Z}},52818:function(i,o,s){"use strict";var _,F,N,j,Z=Object.create;s(33247)()||(j=s(51882)),i.exports=j&&1===j.level?(_={},F={},N={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(i){if("__proto__"===i){F[i]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}F[i]=N}),Object.defineProperties(_,F),Object.defineProperty(j,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:_}),function(i,o){return Z(null===i?_:i,o)}):Z},96437:function(i,o,s){"use strict";i.exports=s(67260)("forEach")},99611:function(i,o,s){"use strict";var _=s(95296),F={function:!0,object:!0};i.exports=function(i){return _(i)&&F[typeof i]||!1}},95296:function(i,o,s){"use strict";var _=s(52345)();i.exports=function(i){return i!==_&&null!==i}},68700:function(i,o,s){"use strict";i.exports=s(13895)()?Object.keys:s(25217)},13895:function(i){"use strict";i.exports=function(){try{return Object.keys("primitive"),!0}catch(i){return!1}}},25217:function(i,o,s){"use strict";var _=s(95296),F=Object.keys;i.exports=function(i){return F(_(i)?Object(i):i)}},16906:function(i,o,s){"use strict";var _=s(78513),F=s(96437),N=Function.prototype.call;i.exports=function(i,o){var s={},j=arguments[2];return _(o),F(i,function(i,_,F,Z){s[_]=N.call(o,j,i,_,F,Z)}),s}},21780:function(i,o,s){"use strict";var _=s(95296),F=Array.prototype.forEach,N=Object.create,process=function(i,o){var s;for(s in i)o[s]=i[s]};i.exports=function(i){var o=N(null);return F.call(arguments,function(i){_(i)&&process(Object(i),o)}),o}},1496:function(i,o,s){"use strict";i.exports=s(33247)()?Object.setPrototypeOf:s(51882)},33247:function(i){"use strict";var o=Object.create,s=Object.getPrototypeOf,_={};i.exports=function(){var i=Object.setPrototypeOf,F=arguments[0]||o;return"function"==typeof i&&s(i(F(null),_))===_}},51882:function(i,o,s){"use strict";var _,F,N,j,Z=s(99611),X=s(36672),$=Object.prototype.isPrototypeOf,ee=Object.defineProperty,et={configurable:!0,enumerable:!1,writable:!0,value:void 0};j=function(i,o){if(X(i),null===o||Z(o))return i;throw TypeError("Prototype must be null or an object")},i.exports=(_=function(){var i,o=Object.create(null),s={},_=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(_){try{(i=_.set).call(o,s)}catch(i){}if(Object.getPrototypeOf(o)===s)return{set:i,level:2}}return(o.__proto__=s,Object.getPrototypeOf(o)===s)?{level:2}:((o={}).__proto__=s,Object.getPrototypeOf(o)===s&&{level:1})}())?(2===_.level?_.set?(N=_.set,F=function(i,o){return N.call(j(i,o),o),i}):F=function(i,o){return j(i,o).__proto__=o,i}:F=function self(i,o){var s;return j(i,o),(s=$.call(self.nullPolyfill,i))&&delete self.nullPolyfill.__proto__,null===o&&(o=self.nullPolyfill),i.__proto__=o,s&&ee(self.nullPolyfill,"__proto__",et),i},Object.defineProperty(F,"level",{configurable:!1,enumerable:!1,writable:!1,value:_.level})):null,s(52818)},78513:function(i){"use strict";i.exports=function(i){if("function"!=typeof i)throw TypeError(i+" is not a function");return i}},98976:function(i,o,s){"use strict";var _=s(99611);i.exports=function(i){if(!_(i))throw TypeError(i+" is not an Object");return i}},36672:function(i,o,s){"use strict";var _=s(95296);i.exports=function(i){if(!_(i))throw TypeError("Cannot use null or undefined");return i}},66741:function(i,o,s){"use strict";i.exports=s(17557)()?String.prototype.contains:s(60381)},17557:function(i){"use strict";var o="razdwatrzy";i.exports=function(){return"function"==typeof o.contains&&!0===o.contains("dwa")&&!1===o.contains("foo")}},60381:function(i){"use strict";var o=String.prototype.indexOf;i.exports=function(i){return o.call(this,i,arguments[1])>-1}},87963:function(i){"use strict";var o=Object.prototype.toString,s=o.call("");i.exports=function(i){return"string"==typeof i||i&&"object"==typeof i&&(i instanceof String||o.call(i)===s)||!1}},43043:function(i){"use strict";var o=Object.create(null),s=Math.random;i.exports=function(){var i;do i=s().toString(36).slice(2);while(o[i]);return i}},32411:function(i,o,s){"use strict";var _,F=s(1496),N=s(66741),j=s(62072),Z=s(8260),X=s(95426),$=Object.defineProperty;_=i.exports=function(i,o){if(!(this instanceof _))throw TypeError("Constructor requires 'new'");X.call(this,i),$(this,"__kind__",j("",o=o?N.call(o,"key+value")?"key+value":N.call(o,"key")?"key":"value":"value"))},F&&F(_,X),delete _.prototype.constructor,_.prototype=Object.create(X.prototype,{_resolve:j(function(i){return"value"===this.__kind__?this.__list__[i]:"key+value"===this.__kind__?[i,this.__list__[i]]:i})}),$(_.prototype,Z.toStringTag,j("c","Array Iterator"))},27515:function(i,o,s){"use strict";var _=s(73051),F=s(78513),N=s(87963),j=s(66661),Z=Array.isArray,X=Function.prototype.call,$=Array.prototype.some;i.exports=function(i,o){var s,ee,et,er,en,ei,eo,es,el=arguments[2];if(Z(i)||_(i)?s="array":N(i)?s="string":i=j(i),F(o),et=function(){er=!0},"array"===s){$.call(i,function(i){return X.call(o,el,i,et),er});return}if("string"===s){for(en=0,ei=i.length;en<ei&&(eo=i[en],en+1<ei&&(es=eo.charCodeAt(0))>=55296&&es<=56319&&(eo+=i[++en]),X.call(o,el,eo,et),!er);++en);return}for(ee=i.next();!ee.done;){if(X.call(o,el,ee.value,et),er)return;ee=i.next()}}},66661:function(i,o,s){"use strict";var _=s(73051),F=s(87963),N=s(32411),j=s(259),Z=s(58095),X=s(8260).iterator;i.exports=function(i){return"function"==typeof Z(i)[X]?i[X]():_(i)?new N(i):F(i)?new j(i):new N(i)}},95426:function(i,o,s){"use strict";var _,F=s(16134),N=s(95879),j=s(78513),Z=s(36672),X=s(62072),$=s(55174),ee=s(8260),et=Object.defineProperty,er=Object.defineProperties;i.exports=_=function(i,o){if(!(this instanceof _))throw TypeError("Constructor requires 'new'");er(this,{__list__:X("w",Z(i)),__context__:X("w",o),__nextIndex__:X("w",0)}),o&&(j(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete _.prototype.constructor,er(_.prototype,N({_next:X(function(){var i;if(this.__list__){if(this.__redo__&&void 0!==(i=this.__redo__.shift()))return i;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:X(function(){return this._createResult(this._next())}),_createResult:X(function(i){return void 0===i?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:X(function(i){return this.__list__[i]}),_unBind:X(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:X(function(){return"[object "+(this[ee.toStringTag]||"Object")+"]"})},$({_onAdd:X(function(i){if(!(i>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){et(this,"__redo__",X("c",[i]));return}this.__redo__.forEach(function(o,s){o>=i&&(this.__redo__[s]=++o)},this),this.__redo__.push(i)}}),_onDelete:X(function(i){var o;!(i>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__&&(-1!==(o=this.__redo__.indexOf(i))&&this.__redo__.splice(o,1),this.__redo__.forEach(function(o,s){o>i&&(this.__redo__[s]=--o)},this)))}),_onClear:X(function(){this.__redo__&&F.call(this.__redo__),this.__nextIndex__=0})}))),et(_.prototype,ee.iterator,X(function(){return this}))},35940:function(i,o,s){"use strict";var _=s(73051),F=s(95296),N=s(87963),j=s(8260).iterator,Z=Array.isArray;i.exports=function(i){return!!F(i)&&(!!(Z(i)||N(i)||_(i))||"function"==typeof i[j])}},259:function(i,o,s){"use strict";var _,F=s(1496),N=s(62072),j=s(8260),Z=s(95426),X=Object.defineProperty;_=i.exports=function(i){if(!(this instanceof _))throw TypeError("Constructor requires 'new'");i=String(i),Z.call(this,i),X(this,"__length__",N("",i.length))},F&&F(_,Z),delete _.prototype.constructor,_.prototype=Object.create(Z.prototype,{_next:N(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:N(function(i){var o,s=this.__list__[i];return this.__nextIndex__===this.__length__?s:(o=s.charCodeAt(0))>=55296&&o<=56319?s+this.__list__[this.__nextIndex__++]:s})}),X(_.prototype,j.toStringTag,N("c","String Iterator"))},58095:function(i,o,s){"use strict";var _=s(35940);i.exports=function(i){if(!_(i))throw TypeError(i+" is not iterable");return i}},73523:function(i){"use strict";function assign(i,o){if(null==i)throw TypeError("Cannot convert first argument to object");for(var s=Object(i),_=1;_<arguments.length;_++){var F=arguments[_];if(null!=F)for(var N=Object.keys(Object(F)),j=0,Z=N.length;j<Z;j++){var X=N[j],$=Object.getOwnPropertyDescriptor(F,X);void 0!==$&&$.enumerable&&(s[X]=F[X])}}return s}function polyfill(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:assign})}i.exports={assign:assign,polyfill:polyfill}},8260:function(i,o,s){"use strict";i.exports=s(69711)()?s(94908).Symbol:s(18415)},69711:function(i,o,s){"use strict";var _=s(94908),F={object:!0,symbol:!0};i.exports=function(){var i,o=_.Symbol;if("function"!=typeof o)return!1;i=o("test symbol");try{String(i)}catch(i){return!1}return!!F[typeof o.iterator]&&!!F[typeof o.toPrimitive]&&!!F[typeof o.toStringTag]}},82276:function(i){"use strict";i.exports=function(i){return!!i&&("symbol"==typeof i||!!i.constructor&&"Symbol"===i.constructor.name&&"Symbol"===i[i.constructor.toStringTag])}},29366:function(i,o,s){"use strict";var _=s(62072),F=Object.defineProperty,N=Object.prototype,j=(0,Object.create)(null);i.exports=function(i){for(var o,s,Z=0;j[i+(Z||"")];)++Z;return j[i+=Z||""]=!0,F(N,o="@@"+i,_.gs(null,function(i){s||(s=!0,F(this,o,_(i)),s=!1)})),o}},92842:function(i,o,s){"use strict";var _=s(62072),F=s(94908).Symbol;i.exports=function(i){return Object.defineProperties(i,{hasInstance:_("",F&&F.hasInstance||i("hasInstance")),isConcatSpreadable:_("",F&&F.isConcatSpreadable||i("isConcatSpreadable")),iterator:_("",F&&F.iterator||i("iterator")),match:_("",F&&F.match||i("match")),replace:_("",F&&F.replace||i("replace")),search:_("",F&&F.search||i("search")),species:_("",F&&F.species||i("species")),split:_("",F&&F.split||i("split")),toPrimitive:_("",F&&F.toPrimitive||i("toPrimitive")),toStringTag:_("",F&&F.toStringTag||i("toStringTag")),unscopables:_("",F&&F.unscopables||i("unscopables"))})}},13304:function(i,o,s){"use strict";var _=s(62072),F=s(53308),N=Object.create(null);i.exports=function(i){return Object.defineProperties(i,{for:_(function(o){return N[o]?N[o]:N[o]=i(String(o))}),keyFor:_(function(i){var o;for(o in F(i),N)if(N[o]===i)return o})})}},18415:function(i,o,s){"use strict";var _,F,N,j=s(62072),Z=s(53308),X=s(94908).Symbol,$=s(29366),ee=s(92842),et=s(13304),er=Object.create,en=Object.defineProperties,ei=Object.defineProperty;if("function"==typeof X)try{String(X()),N=!0}catch(i){}else X=null;F=function(i){if(this instanceof F)throw TypeError("Symbol is not a constructor");return _(i)},i.exports=_=function Symbol(i){if(this instanceof Symbol)throw TypeError("Symbol is not a constructor");return N?X(i):en(er(F.prototype),{__description__:j("",i=void 0===i?"":String(i)),__name__:j("",$(i))})},ee(_),et(_),en(F.prototype,{constructor:j(_),toString:j("",function(){return this.__name__})}),en(_.prototype,{toString:j(function(){return"Symbol ("+Z(this).__description__+")"}),valueOf:j(function(){return Z(this)})}),ei(_.prototype,_.toPrimitive,j("",function(){var i=Z(this);return"symbol"==typeof i?i:i.toString()})),ei(_.prototype,_.toStringTag,j("c","Symbol")),ei(F.prototype,_.toStringTag,j("c",_.prototype[_.toStringTag])),ei(F.prototype,_.toPrimitive,j("c",_.prototype[_.toPrimitive]))},53308:function(i,o,s){"use strict";var _=s(82276);i.exports=function(i){if(!_(i))throw TypeError(i+" is not a symbol");return i}},83522:function(i,o,s){"use strict";i.exports=s(96402)()?WeakMap:s(329)},96402:function(i){"use strict";i.exports=function(){var i,o;if("function"!=typeof WeakMap)return!1;try{i=new WeakMap([[o={},"one"],[{},"two"],[{},"three"]])}catch(i){return!1}return"[object WeakMap]"===String(i)&&"function"==typeof i.set&&i.set({},1)===i&&"function"==typeof i.delete&&"function"==typeof i.has&&"one"===i.get(o)}},96416:function(i){"use strict";i.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},329:function(i,o,s){"use strict";var _,F=s(95296),N=s(1496),j=s(98976),Z=s(36672),X=s(43043),$=s(62072),ee=s(66661),et=s(27515),er=s(8260).toStringTag,en=s(96416),ei=Array.isArray,eo=Object.defineProperty,es=Object.prototype.hasOwnProperty,el=Object.getPrototypeOf;i.exports=_=function(){var i,o=arguments[0];if(!(this instanceof _))throw TypeError("Constructor requires 'new'");return i=en&&N&&WeakMap!==_?N(new WeakMap,el(this)):this,F(o)&&!ei(o)&&(o=ee(o)),eo(i,"__weakMapData__",$("c","$weakMap$"+X())),o&&et(o,function(o){Z(o),i.set(o[0],o[1])}),i},en&&(N&&N(_,WeakMap),_.prototype=Object.create(WeakMap.prototype,{constructor:$(_)})),Object.defineProperties(_.prototype,{delete:$(function(i){return!!es.call(j(i),this.__weakMapData__)&&(delete i[this.__weakMapData__],!0)}),get:$(function(i){if(es.call(j(i),this.__weakMapData__))return i[this.__weakMapData__]}),has:$(function(i){return es.call(j(i),this.__weakMapData__)}),set:$(function(i,o){return eo(j(i),this.__weakMapData__,$("c",o)),this}),toString:$(function(){return"[object WeakMap]"})}),eo(_.prototype,er,$("c","WeakMap"))},15398:function(i){"use strict";var o,s="object"==typeof Reflect?Reflect:null,_=s&&"function"==typeof s.apply?s.apply:function(i,o,s){return Function.prototype.apply.call(i,o,s)};function ProcessEmitWarning(i){console&&console.warn&&console.warn(i)}o=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:function(i){return Object.getOwnPropertyNames(i)};var F=Number.isNaN||function(i){return i!=i};function EventEmitter(){EventEmitter.init.call(this)}i.exports=EventEmitter,i.exports.once=once,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var N=10;function checkListener(i){if("function"!=typeof i)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}function _getMaxListeners(i){return void 0===i._maxListeners?EventEmitter.defaultMaxListeners:i._maxListeners}function _addListener(i,o,s,_){if(checkListener(s),void 0===(N=i._events)?(N=i._events=Object.create(null),i._eventsCount=0):(void 0!==N.newListener&&(i.emit("newListener",o,s.listener?s.listener:s),N=i._events),j=N[o]),void 0===j)j=N[o]=s,++i._eventsCount;else if("function"==typeof j?j=N[o]=_?[s,j]:[j,s]:_?j.unshift(s):j.push(s),(F=_getMaxListeners(i))>0&&j.length>F&&!j.warned){j.warned=!0;var F,N,j,Z=Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(o)+" listeners added. Use emitter.setMaxListeners() to increase limit");Z.name="MaxListenersExceededWarning",Z.emitter=i,Z.type=o,Z.count=j.length,ProcessEmitWarning(Z)}return i}function onceWrapper(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(i,o,s){var _={fired:!1,wrapFn:void 0,target:i,type:o,listener:s},F=onceWrapper.bind(_);return F.listener=s,_.wrapFn=F,F}function _listeners(i,o,s){var _=i._events;if(void 0===_)return[];var F=_[o];return void 0===F?[]:"function"==typeof F?s?[F.listener||F]:[F]:s?unwrapListeners(F):arrayClone(F,F.length)}function listenerCount(i){var o=this._events;if(void 0!==o){var s=o[i];if("function"==typeof s)return 1;if(void 0!==s)return s.length}return 0}function arrayClone(i,o){for(var s=Array(o),_=0;_<o;++_)s[_]=i[_];return s}function spliceOne(i,o){for(;o+1<i.length;o++)i[o]=i[o+1];i.pop()}function unwrapListeners(i){for(var o=Array(i.length),s=0;s<o.length;++s)o[s]=i[s].listener||i[s];return o}function once(i,o){return new Promise(function(s,_){function errorListener(s){i.removeListener(o,resolver),_(s)}function resolver(){"function"==typeof i.removeListener&&i.removeListener("error",errorListener),s([].slice.call(arguments))}eventTargetAgnosticAddListener(i,o,resolver,{once:!0}),"error"!==o&&addErrorHandlerIfEventEmitter(i,errorListener,{once:!0})})}function addErrorHandlerIfEventEmitter(i,o,s){"function"==typeof i.on&&eventTargetAgnosticAddListener(i,"error",o,s)}function eventTargetAgnosticAddListener(i,o,s,_){if("function"==typeof i.on)_.once?i.once(o,s):i.on(o,s);else if("function"==typeof i.addEventListener)i.addEventListener(o,function wrapListener(F){_.once&&i.removeEventListener(o,wrapListener),s(F)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return N},set:function(i){if("number"!=typeof i||i<0||F(i))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");N=i}}),EventEmitter.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(i){if("number"!=typeof i||i<0||F(i))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(i){for(var o=[],s=1;s<arguments.length;s++)o.push(arguments[s]);var F="error"===i,N=this._events;if(void 0!==N)F=F&&void 0===N.error;else if(!F)return!1;if(F){if(o.length>0&&(j=o[0]),j instanceof Error)throw j;var j,Z=Error("Unhandled error."+(j?" ("+j.message+")":""));throw Z.context=j,Z}var X=N[i];if(void 0===X)return!1;if("function"==typeof X)_(X,this,o);else for(var $=X.length,ee=arrayClone(X,$),s=0;s<$;++s)_(ee[s],this,o);return!0},EventEmitter.prototype.addListener=function(i,o){return _addListener(this,i,o,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(i,o){return _addListener(this,i,o,!0)},EventEmitter.prototype.once=function(i,o){return checkListener(o),this.on(i,_onceWrap(this,i,o)),this},EventEmitter.prototype.prependOnceListener=function(i,o){return checkListener(o),this.prependListener(i,_onceWrap(this,i,o)),this},EventEmitter.prototype.removeListener=function(i,o){var s,_,F,N,j;if(checkListener(o),void 0===(_=this._events)||void 0===(s=_[i]))return this;if(s===o||s.listener===o)0==--this._eventsCount?this._events=Object.create(null):(delete _[i],_.removeListener&&this.emit("removeListener",i,s.listener||o));else if("function"!=typeof s){for(F=-1,N=s.length-1;N>=0;N--)if(s[N]===o||s[N].listener===o){j=s[N].listener,F=N;break}if(F<0)return this;0===F?s.shift():spliceOne(s,F),1===s.length&&(_[i]=s[0]),void 0!==_.removeListener&&this.emit("removeListener",i,j||o)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(i){var o,s,_;if(void 0===(s=this._events))return this;if(void 0===s.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==s[i]&&(0==--this._eventsCount?this._events=Object.create(null):delete s[i]),this;if(0==arguments.length){var F,N=Object.keys(s);for(_=0;_<N.length;++_)"removeListener"!==(F=N[_])&&this.removeAllListeners(F);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(o=s[i]))this.removeListener(i,o);else if(void 0!==o)for(_=o.length-1;_>=0;_--)this.removeListener(i,o[_]);return this},EventEmitter.prototype.listeners=function(i){return _listeners(this,i,!0)},EventEmitter.prototype.rawListeners=function(i){return _listeners(this,i,!1)},EventEmitter.listenerCount=function(i,o){return"function"==typeof i.listenerCount?i.listenerCount(o):listenerCount.call(i,o)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},60774:function(i){var naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw Error("Unable to resolve global `this`")};i.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(i){return naiveFallback()}try{if(!__global__)return naiveFallback();return __global__}finally{delete Object.prototype.__global__}}()},94908:function(i,o,s){"use strict";i.exports=s(51152)()?globalThis:s(60774)},51152:function(i){"use strict";i.exports=function(){return!!("object"==typeof globalThis&&globalThis)&&globalThis.Array===Array}},92770:function(i,o,s){"use strict";var _=s(18546);i.exports=function(i){var o=typeof i;if("string"===o){var s=i;if(0==(i=+i)&&_(s))return!1}else if("number"!==o)return!1;return i-i<1}},30120:function(i,o,s){var _=s(90660);function flattenVertexData(i,o,s){if(!i)throw TypeError("must specify data as first parameter");if(s=0|+(s||0),Array.isArray(i)&&i[0]&&"number"==typeof i[0][0]){var F,N,j,Z,X=i[0].length,$=i.length*X;o&&"string"!=typeof o||(o=new(_(o||"float32"))($+s));var ee=o.length-s;if($!==ee)throw Error("source length "+$+" ("+X+"x"+i.length+") does not match destination length "+ee);for(F=0,j=s;F<i.length;F++)for(N=0;N<X;N++)o[j++]=null===i[F][N]?NaN:i[F][N]}else if(o&&"string"!=typeof o)o.set(i,s);else{var et=_(o||"float32");if(Array.isArray(i)||"array"===o)for(F=0,o=new et(i.length+s),j=s,Z=o.length;j<Z;j++,F++)o[j]=null===i[F]?NaN:i[F];else 0===s?o=new et(i):(o=new et(i.length+s)).set(i,s)}return o}i.exports=flattenVertexData},68016:function(i,o,s){"use strict";var _=s(53313),F=[32,126];function atlas(i){var o=(i=i||{}).shape?i.shape:i.canvas?[i.canvas.width,i.canvas.height]:[512,512],s=i.canvas||document.createElement("canvas"),N=i.font,j="number"==typeof i.step?[i.step,i.step]:i.step||[32,32],Z=i.chars||F;if(N&&"string"!=typeof N&&(N=_(N)),Array.isArray(Z)){if(2===Z.length&&"number"==typeof Z[0]&&"number"==typeof Z[1]){for(var X=[],$=Z[0],ee=0;$<=Z[1];$++)X[ee++]=String.fromCharCode($);Z=X}}else Z=String(Z).split("");o=o.slice(),s.width=o[0],s.height=o[1];var et=s.getContext("2d");et.fillStyle="#000",et.fillRect(0,0,s.width,s.height),et.font=N,et.textAlign="center",et.textBaseline="middle",et.fillStyle="#fff";for(var er=j[0]/2,en=j[1]/2,$=0;$<Z.length;$++)et.fillText(Z[$],er,en),(er+=j[0])>o[0]-j[0]/2&&(er=j[0]/2,en+=j[1]);return s}i.exports=atlas},32879:function(i){"use strict";function measure(i,o){o||(o={}),("string"==typeof i||Array.isArray(i))&&(o.family=i);var s=Array.isArray(o.family)?o.family.join(", "):o.family;if(!s)throw Error("`family` must be defined");var _=o.size||o.fontSize||o.em||48,F=o.weight||o.fontWeight||"",i=[o.style||o.fontStyle||"",F,_].join(" ")+"px "+s,N=o.origin||"top";if(measure.cache[s]&&_<=measure.cache[s].em)return applyOrigin(measure.cache[s],N);var j=o.canvas||measure.canvas,Z=j.getContext("2d"),X={upper:void 0!==o.upper?o.upper:"H",lower:void 0!==o.lower?o.lower:"x",descent:void 0!==o.descent?o.descent:"p",ascent:void 0!==o.ascent?o.ascent:"h",tittle:void 0!==o.tittle?o.tittle:"i",overshoot:void 0!==o.overshoot?o.overshoot:"O"},$=Math.ceil(1.5*_);j.height=$,j.width=.5*$,Z.font=i;var ee={top:0};Z.clearRect(0,0,$,$),Z.textBaseline="top",Z.fillStyle="black",Z.fillText("H",0,0);var et=firstTop(Z.getImageData(0,0,$,$));Z.clearRect(0,0,$,$),Z.textBaseline="bottom",Z.fillText("H",0,$);var er=firstTop(Z.getImageData(0,0,$,$));ee.lineHeight=ee.bottom=$-er+et,Z.clearRect(0,0,$,$),Z.textBaseline="alphabetic",Z.fillText("H",0,$);var en=firstTop(Z.getImageData(0,0,$,$)),ei=$-en-1+et;ee.baseline=ee.alphabetic=ei,Z.clearRect(0,0,$,$),Z.textBaseline="middle",Z.fillText("H",0,.5*$);var eo=firstTop(Z.getImageData(0,0,$,$));ee.median=ee.middle=$-eo-1+et-.5*$,Z.clearRect(0,0,$,$),Z.textBaseline="hanging",Z.fillText("H",0,.5*$);var es=firstTop(Z.getImageData(0,0,$,$));ee.hanging=$-es-1+et-.5*$,Z.clearRect(0,0,$,$),Z.textBaseline="ideographic",Z.fillText("H",0,$);var el=firstTop(Z.getImageData(0,0,$,$));if(ee.ideographic=$-el-1+et,X.upper&&(Z.clearRect(0,0,$,$),Z.textBaseline="top",Z.fillText(X.upper,0,0),ee.upper=firstTop(Z.getImageData(0,0,$,$)),ee.capHeight=ee.baseline-ee.upper),X.lower&&(Z.clearRect(0,0,$,$),Z.textBaseline="top",Z.fillText(X.lower,0,0),ee.lower=firstTop(Z.getImageData(0,0,$,$)),ee.xHeight=ee.baseline-ee.lower),X.tittle&&(Z.clearRect(0,0,$,$),Z.textBaseline="top",Z.fillText(X.tittle,0,0),ee.tittle=firstTop(Z.getImageData(0,0,$,$))),X.ascent&&(Z.clearRect(0,0,$,$),Z.textBaseline="top",Z.fillText(X.ascent,0,0),ee.ascent=firstTop(Z.getImageData(0,0,$,$))),X.descent&&(Z.clearRect(0,0,$,$),Z.textBaseline="top",Z.fillText(X.descent,0,0),ee.descent=firstBottom(Z.getImageData(0,0,$,$))),X.overshoot){Z.clearRect(0,0,$,$),Z.textBaseline="top",Z.fillText(X.overshoot,0,0);var ec=firstBottom(Z.getImageData(0,0,$,$));ee.overshoot=ec-ei}for(var eu in ee)ee[eu]/=_;return ee.em=_,measure.cache[s]=ee,applyOrigin(ee,N)}function applyOrigin(i,o){var s={};for(var _ in"string"==typeof o&&(o=i[o]),i)"em"!==_&&(s[_]=i[_]-o);return s}function firstTop(i){for(var o=i.height,s=i.data,_=3;_<s.length;_+=4)if(0!==s[_])return Math.floor((_-3)*.25/o)}function firstBottom(i){for(var o=i.height,s=i.data,_=s.length-1;_>0;_-=4)if(0!==s[_])return Math.floor((_-3)*.25/o)}i.exports=measure,measure.canvas=document.createElement("canvas"),measure.cache={}},31353:function(i,o,s){"use strict";var _=s(85395),F=Object.prototype.toString,N=Object.prototype.hasOwnProperty,forEachArray=function(i,o,s){for(var _=0,F=i.length;_<F;_++)N.call(i,_)&&(null==s?o(i[_],_,i):o.call(s,i[_],_,i))},forEachString=function(i,o,s){for(var _=0,F=i.length;_<F;_++)null==s?o(i.charAt(_),_,i):o.call(s,i.charAt(_),_,i)},forEachObject=function(i,o,s){for(var _ in i)N.call(i,_)&&(null==s?o(i[_],_,i):o.call(s,i[_],_,i))};i.exports=function(i,o,s){var N;if(!_(o))throw TypeError("iterator must be a function");arguments.length>=3&&(N=s),"[object Array]"===F.call(i)?forEachArray(i,o,N):"string"==typeof i?forEachString(i,o,N):forEachObject(i,o,N)}},73047:function(i){"use strict";var o=Array.prototype.slice,s=Object.prototype.toString;i.exports=function(i){var _,F=this;if("function"!=typeof F||"[object Function]"!==s.call(F))throw TypeError("Function.prototype.bind called on incompatible "+F);for(var N=o.call(arguments,1),j=Math.max(0,F.length-N.length),Z=[],X=0;X<j;X++)Z.push("$"+X);if(_=Function("binder","return function ("+Z.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(!(this instanceof _))return F.apply(i,N.concat(o.call(arguments)));var s=F.apply(this,N.concat(o.call(arguments)));return Object(s)===s?s:this}),F.prototype){var Empty=function(){};Empty.prototype=F.prototype,_.prototype=new Empty,Empty.prototype=null}return _}},77575:function(i,o,s){"use strict";var _=s(73047);i.exports=Function.prototype.bind||_},86249:function(i){i.exports=getCanvasContext;function getCanvasContext(i,o){if("string"!=typeof i)throw TypeError("must specify type string");if(o=o||{},"undefined"==typeof document&&!o.canvas)return null;var s,_=o.canvas||document.createElement("canvas");"number"==typeof o.width&&(_.width=o.width),"number"==typeof o.height&&(_.height=o.height);var F=o;try{var N=[i];0===i.indexOf("webgl")&&N.push("experimental-"+i);for(var j=0;j<N.length;j++)if(s=_.getContext(N[j],F))return s}catch(i){s=null}return s||null}},68318:function(i,o,s){"use strict";var _,F=SyntaxError,N=Function,j=TypeError,getEvalledConstructor=function(i){try{return N('"use strict"; return ('+i+").constructor;")()}catch(i){}},Z=Object.getOwnPropertyDescriptor;if(Z)try{Z({},"")}catch(i){Z=null}var throwTypeError=function(){throw new j},X=Z?function(){try{return arguments.callee,throwTypeError}catch(i){try{return Z(arguments,"callee").get}catch(i){return throwTypeError}}}():throwTypeError,$=s(57877)(),ee=Object.getPrototypeOf||function(i){return i.__proto__},et={},er="undefined"==typeof Uint8Array?_:ee(Uint8Array),en={"%AggregateError%":"undefined"==typeof AggregateError?_:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?_:ArrayBuffer,"%ArrayIteratorPrototype%":$?ee([][Symbol.iterator]()):_,"%AsyncFromSyncIteratorPrototype%":_,"%AsyncFunction%":et,"%AsyncGenerator%":et,"%AsyncGeneratorFunction%":et,"%AsyncIteratorPrototype%":et,"%Atomics%":"undefined"==typeof Atomics?_:Atomics,"%BigInt%":"undefined"==typeof BigInt?_:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?_:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?_:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?_:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?_:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?_:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?_:FinalizationRegistry,"%Function%":N,"%GeneratorFunction%":et,"%Int8Array%":"undefined"==typeof Int8Array?_:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?_:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?_:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$?ee(ee([][Symbol.iterator]())):_,"%JSON%":"object"==typeof JSON?JSON:_,"%Map%":"undefined"==typeof Map?_:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&$?ee(new Map()[Symbol.iterator]()):_,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?_:Promise,"%Proxy%":"undefined"==typeof Proxy?_:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?_:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?_:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&$?ee(new Set()[Symbol.iterator]()):_,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?_:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$?ee(""[Symbol.iterator]()):_,"%Symbol%":$?Symbol:_,"%SyntaxError%":F,"%ThrowTypeError%":X,"%TypedArray%":er,"%TypeError%":j,"%Uint8Array%":"undefined"==typeof Uint8Array?_:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?_:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?_:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?_:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?_:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?_:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?_:WeakSet};try{null.error}catch(i){var ei=ee(ee(i));en["%Error.prototype%"]=ei}var doEval=function doEval(i){var o;if("%AsyncFunction%"===i)o=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===i)o=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===i)o=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===i){var s=doEval("%AsyncGeneratorFunction%");s&&(o=s.prototype)}else if("%AsyncIteratorPrototype%"===i){var _=doEval("%AsyncGenerator%");_&&(o=ee(_.prototype))}return en[i]=o,o},eo={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},es=s(77575),el=s(35065),ec=es.call(Function.call,Array.prototype.concat),eu=es.call(Function.apply,Array.prototype.splice),ef=es.call(Function.call,String.prototype.replace),ed=es.call(Function.call,String.prototype.slice),eh=es.call(Function.call,RegExp.prototype.exec),ep=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,eg=/\\(\\)?/g,stringToPath=function(i){var o=ed(i,0,1),s=ed(i,-1);if("%"===o&&"%"!==s)throw new F("invalid intrinsic syntax, expected closing `%`");if("%"===s&&"%"!==o)throw new F("invalid intrinsic syntax, expected opening `%`");var _=[];return ef(i,ep,function(i,o,s,F){_[_.length]=s?ef(F,eg,"$1"):o||i}),_},getBaseIntrinsic=function(i,o){var s,_=i;if(el(eo,_)&&(_="%"+(s=eo[_])[0]+"%"),el(en,_)){var N=en[_];if(N===et&&(N=doEval(_)),void 0===N&&!o)throw new j("intrinsic "+i+" exists, but is not available. Please file an issue!");return{alias:s,name:_,value:N}}throw new F("intrinsic "+i+" does not exist!")};i.exports=function(i,o){if("string"!=typeof i||0===i.length)throw new j("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof o)throw new j('"allowMissing" argument must be a boolean');if(null===eh(/^%?[^%]*%?$/,i))throw new F("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var s=stringToPath(i),_=s.length>0?s[0]:"",N=getBaseIntrinsic("%"+_+"%",o),X=N.name,$=N.value,ee=!1,et=N.alias;et&&(_=et[0],eu(s,ec([0,1],et)));for(var er=1,ei=!0;er<s.length;er+=1){var eo=s[er],es=ed(eo,0,1),ef=ed(eo,-1);if(('"'===es||"'"===es||"`"===es||'"'===ef||"'"===ef||"`"===ef)&&es!==ef)throw new F("property names with quotes must have matching quotes");if("constructor"!==eo&&ei||(ee=!0),_+="."+eo,el(en,X="%"+_+"%"))$=en[X];else if(null!=$){if(!(eo in $)){if(!o)throw new j("base intrinsic for "+i+" exists, but the property is not available.");return}if(Z&&er+1>=s.length){var ep=Z($,eo);$=(ei=!!ep)&&"get"in ep&&!("originalValue"in ep.get)?ep.get:$[eo]}else ei=el($,eo),$=$[eo];ei&&!ee&&(en[X]=$)}}return $}},85400:function(i){i.exports=adjoint;function adjoint(i,o){var s=o[0],_=o[1],F=o[2],N=o[3],j=o[4],Z=o[5],X=o[6],$=o[7],ee=o[8],et=o[9],er=o[10],en=o[11],ei=o[12],eo=o[13],es=o[14],el=o[15];return i[0]=Z*(er*el-en*es)-et*(X*el-$*es)+eo*(X*en-$*er),i[1]=-(_*(er*el-en*es)-et*(F*el-N*es)+eo*(F*en-N*er)),i[2]=_*(X*el-$*es)-Z*(F*el-N*es)+eo*(F*$-N*X),i[3]=-(_*(X*en-$*er)-Z*(F*en-N*er)+et*(F*$-N*X)),i[4]=-(j*(er*el-en*es)-ee*(X*el-$*es)+ei*(X*en-$*er)),i[5]=s*(er*el-en*es)-ee*(F*el-N*es)+ei*(F*en-N*er),i[6]=-(s*(X*el-$*es)-j*(F*el-N*es)+ei*(F*$-N*X)),i[7]=s*(X*en-$*er)-j*(F*en-N*er)+ee*(F*$-N*X),i[8]=j*(et*el-en*eo)-ee*(Z*el-$*eo)+ei*(Z*en-$*et),i[9]=-(s*(et*el-en*eo)-ee*(_*el-N*eo)+ei*(_*en-N*et)),i[10]=s*(Z*el-$*eo)-j*(_*el-N*eo)+ei*(_*$-N*Z),i[11]=-(s*(Z*en-$*et)-j*(_*en-N*et)+ee*(_*$-N*Z)),i[12]=-(j*(et*es-er*eo)-ee*(Z*es-X*eo)+ei*(Z*er-X*et)),i[13]=s*(et*es-er*eo)-ee*(_*es-F*eo)+ei*(_*er-F*et),i[14]=-(s*(Z*es-X*eo)-j*(_*es-F*eo)+ei*(_*X-F*Z)),i[15]=s*(Z*er-X*et)-j*(_*er-F*et)+ee*(_*X-F*Z),i}},42331:function(i){i.exports=clone;function clone(i){var o=new Float32Array(16);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o}},31042:function(i){i.exports=copy;function copy(i,o){return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i}},11902:function(i){i.exports=create;function create(){var i=new Float32Array(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},89887:function(i){i.exports=determinant;function determinant(i){var o=i[0],s=i[1],_=i[2],F=i[3],N=i[4],j=i[5],Z=i[6],X=i[7],$=i[8],ee=i[9],et=i[10],er=i[11],en=i[12],ei=i[13],eo=i[14],es=i[15];return(o*j-s*N)*(et*es-er*eo)-(o*Z-_*N)*(ee*es-er*ei)+(o*X-F*N)*(ee*eo-et*ei)+(s*Z-_*j)*($*es-er*en)-(s*X-F*j)*($*eo-et*en)+(_*X-F*Z)*($*ei-ee*en)}},27812:function(i){i.exports=fromQuat;function fromQuat(i,o){var s=o[0],_=o[1],F=o[2],N=o[3],j=s+s,Z=_+_,X=F+F,$=s*j,ee=_*j,et=_*Z,er=F*j,en=F*Z,ei=F*X,eo=N*j,es=N*Z,el=N*X;return i[0]=1-et-ei,i[1]=ee+el,i[2]=er-es,i[3]=0,i[4]=ee-el,i[5]=1-$-ei,i[6]=en+eo,i[7]=0,i[8]=er+es,i[9]=en-eo,i[10]=1-$-et,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},34045:function(i){i.exports=fromRotation;function fromRotation(i,o,s){var _,F,N,j=s[0],Z=s[1],X=s[2],$=Math.sqrt(j*j+Z*Z+X*X);return 1e-6>Math.abs($)?null:(j*=$=1/$,Z*=$,X*=$,_=Math.sin(o),N=1-(F=Math.cos(o)),i[0]=j*j*N+F,i[1]=Z*j*N+X*_,i[2]=X*j*N-Z*_,i[3]=0,i[4]=j*Z*N-X*_,i[5]=Z*Z*N+F,i[6]=X*Z*N+j*_,i[7]=0,i[8]=j*X*N+Z*_,i[9]=Z*X*N-j*_,i[10]=X*X*N+F,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}},45973:function(i){i.exports=fromRotationTranslation;function fromRotationTranslation(i,o,s){var _=o[0],F=o[1],N=o[2],j=o[3],Z=_+_,X=F+F,$=N+N,ee=_*Z,et=_*X,er=_*$,en=F*X,ei=F*$,eo=N*$,es=j*Z,el=j*X,ec=j*$;return i[0]=1-(en+eo),i[1]=et+ec,i[2]=er-el,i[3]=0,i[4]=et-ec,i[5]=1-(ee+eo),i[6]=ei+es,i[7]=0,i[8]=er+el,i[9]=ei-es,i[10]=1-(ee+en),i[11]=0,i[12]=s[0],i[13]=s[1],i[14]=s[2],i[15]=1,i}},81472:function(i){i.exports=fromScaling;function fromScaling(i,o){return i[0]=o[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=o[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=o[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},14669:function(i){i.exports=fromTranslation;function fromTranslation(i,o){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=o[0],i[13]=o[1],i[14]=o[2],i[15]=1,i}},75262:function(i){i.exports=fromXRotation;function fromXRotation(i,o){var s=Math.sin(o),_=Math.cos(o);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=_,i[6]=s,i[7]=0,i[8]=0,i[9]=-s,i[10]=_,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},331:function(i){i.exports=fromYRotation;function fromYRotation(i,o){var s=Math.sin(o),_=Math.cos(o);return i[0]=_,i[1]=0,i[2]=-s,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=s,i[9]=0,i[10]=_,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},11049:function(i){i.exports=fromZRotation;function fromZRotation(i,o){var s=Math.sin(o),_=Math.cos(o);return i[0]=_,i[1]=s,i[2]=0,i[3]=0,i[4]=-s,i[5]=_,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},75195:function(i){i.exports=frustum;function frustum(i,o,s,_,F,N,j){var Z=1/(s-o),X=1/(F-_),$=1/(N-j);return i[0]=2*N*Z,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*N*X,i[6]=0,i[7]=0,i[8]=(s+o)*Z,i[9]=(F+_)*X,i[10]=(j+N)*$,i[11]=-1,i[12]=0,i[13]=0,i[14]=j*N*2*$,i[15]=0,i}},71551:function(i){i.exports=identity;function identity(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},79576:function(i,o,s){i.exports={create:s(11902),clone:s(42331),copy:s(31042),identity:s(71551),transpose:s(88654),invert:s(95874),adjoint:s(85400),determinant:s(89887),multiply:s(91362),translate:s(31283),scale:s(10789),rotate:s(65074),rotateX:s(35545),rotateY:s(94918),rotateZ:s(15692),fromRotation:s(34045),fromRotationTranslation:s(45973),fromScaling:s(81472),fromTranslation:s(14669),fromXRotation:s(75262),fromYRotation:s(331),fromZRotation:s(11049),fromQuat:s(27812),frustum:s(75195),perspective:s(7864),perspectiveFromFieldOfView:s(35279),ortho:s(60378),lookAt:s(65551),str:s(6726)}},95874:function(i){i.exports=invert;function invert(i,o){var s=o[0],_=o[1],F=o[2],N=o[3],j=o[4],Z=o[5],X=o[6],$=o[7],ee=o[8],et=o[9],er=o[10],en=o[11],ei=o[12],eo=o[13],es=o[14],el=o[15],ec=s*Z-_*j,eu=s*X-F*j,ef=s*$-N*j,ed=_*X-F*Z,eh=_*$-N*Z,ep=F*$-N*X,eg=ee*eo-et*ei,em=ee*es-er*ei,ey=ee*el-en*ei,ev=et*es-er*eo,ex=et*el-en*eo,e_=er*el-en*es,ew=ec*e_-eu*ex+ef*ev+ed*ey-eh*em+ep*eg;return ew?(ew=1/ew,i[0]=(Z*e_-X*ex+$*ev)*ew,i[1]=(F*ex-_*e_-N*ev)*ew,i[2]=(eo*ep-es*eh+el*ed)*ew,i[3]=(er*eh-et*ep-en*ed)*ew,i[4]=(X*ey-j*e_-$*em)*ew,i[5]=(s*e_-F*ey+N*em)*ew,i[6]=(es*ef-ei*ep-el*eu)*ew,i[7]=(ee*ep-er*ef+en*eu)*ew,i[8]=(j*ex-Z*ey+$*eg)*ew,i[9]=(_*ey-s*ex-N*eg)*ew,i[10]=(ei*eh-eo*ef+el*ec)*ew,i[11]=(et*ef-ee*eh-en*ec)*ew,i[12]=(Z*em-j*ev-X*eg)*ew,i[13]=(s*ev-_*em+F*eg)*ew,i[14]=(eo*eu-ei*ed-es*ec)*ew,i[15]=(ee*ed-et*eu+er*ec)*ew,i):null}},65551:function(i,o,s){var _=s(71551);function lookAt(i,o,s,F){var N,j,Z,X,$,ee,et,er,en,ei,eo=o[0],es=o[1],el=o[2],ec=F[0],eu=F[1],ef=F[2],ed=s[0],eh=s[1],ep=s[2];return 1e-6>Math.abs(eo-ed)&&1e-6>Math.abs(es-eh)&&1e-6>Math.abs(el-ep)?_(i):(ei=1/Math.sqrt((et=eo-ed)*et+(er=es-eh)*er+(en=el-ep)*en),et*=ei,er*=ei,en*=ei,(ei=Math.sqrt((N=eu*en-ef*er)*N+(j=ef*et-ec*en)*j+(Z=ec*er-eu*et)*Z))?(N*=ei=1/ei,j*=ei,Z*=ei):(N=0,j=0,Z=0),(ei=Math.sqrt((X=er*Z-en*j)*X+($=en*N-et*Z)*$+(ee=et*j-er*N)*ee))?(X*=ei=1/ei,$*=ei,ee*=ei):(X=0,$=0,ee=0),i[0]=N,i[1]=X,i[2]=et,i[3]=0,i[4]=j,i[5]=$,i[6]=er,i[7]=0,i[8]=Z,i[9]=ee,i[10]=en,i[11]=0,i[12]=-(N*eo+j*es+Z*el),i[13]=-(X*eo+$*es+ee*el),i[14]=-(et*eo+er*es+en*el),i[15]=1,i)}i.exports=lookAt},91362:function(i){i.exports=multiply;function multiply(i,o,s){var _=o[0],F=o[1],N=o[2],j=o[3],Z=o[4],X=o[5],$=o[6],ee=o[7],et=o[8],er=o[9],en=o[10],ei=o[11],eo=o[12],es=o[13],el=o[14],ec=o[15],eu=s[0],ef=s[1],ed=s[2],eh=s[3];return i[0]=eu*_+ef*Z+ed*et+eh*eo,i[1]=eu*F+ef*X+ed*er+eh*es,i[2]=eu*N+ef*$+ed*en+eh*el,i[3]=eu*j+ef*ee+ed*ei+eh*ec,eu=s[4],ef=s[5],ed=s[6],eh=s[7],i[4]=eu*_+ef*Z+ed*et+eh*eo,i[5]=eu*F+ef*X+ed*er+eh*es,i[6]=eu*N+ef*$+ed*en+eh*el,i[7]=eu*j+ef*ee+ed*ei+eh*ec,eu=s[8],ef=s[9],ed=s[10],eh=s[11],i[8]=eu*_+ef*Z+ed*et+eh*eo,i[9]=eu*F+ef*X+ed*er+eh*es,i[10]=eu*N+ef*$+ed*en+eh*el,i[11]=eu*j+ef*ee+ed*ei+eh*ec,eu=s[12],ef=s[13],ed=s[14],eh=s[15],i[12]=eu*_+ef*Z+ed*et+eh*eo,i[13]=eu*F+ef*X+ed*er+eh*es,i[14]=eu*N+ef*$+ed*en+eh*el,i[15]=eu*j+ef*ee+ed*ei+eh*ec,i}},60378:function(i){i.exports=ortho;function ortho(i,o,s,_,F,N,j){var Z=1/(o-s),X=1/(_-F),$=1/(N-j);return i[0]=-2*Z,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*X,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*$,i[11]=0,i[12]=(o+s)*Z,i[13]=(F+_)*X,i[14]=(j+N)*$,i[15]=1,i}},7864:function(i){i.exports=perspective;function perspective(i,o,s,_,F){var N=1/Math.tan(o/2),j=1/(_-F);return i[0]=N/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=N,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(F+_)*j,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*F*_*j,i[15]=0,i}},35279:function(i){i.exports=perspectiveFromFieldOfView;function perspectiveFromFieldOfView(i,o,s,_){var F=Math.tan(o.upDegrees*Math.PI/180),N=Math.tan(o.downDegrees*Math.PI/180),j=Math.tan(o.leftDegrees*Math.PI/180),Z=Math.tan(o.rightDegrees*Math.PI/180),X=2/(j+Z),$=2/(F+N);return i[0]=X,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=$,i[6]=0,i[7]=0,i[8]=-((j-Z)*X*.5),i[9]=(F-N)*$*.5,i[10]=_/(s-_),i[11]=-1,i[12]=0,i[13]=0,i[14]=_*s/(s-_),i[15]=0,i}},65074:function(i){i.exports=rotate;function rotate(i,o,s,_){var F,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg,em,ey,ev,ex=_[0],e_=_[1],ew=_[2],eT=Math.sqrt(ex*ex+e_*e_+ew*ew);return 1e-6>Math.abs(eT)?null:(ex*=eT=1/eT,e_*=eT,ew*=eT,F=Math.sin(s),j=1-(N=Math.cos(s)),Z=o[0],X=o[1],$=o[2],ee=o[3],et=o[4],er=o[5],en=o[6],ei=o[7],eo=o[8],es=o[9],el=o[10],ec=o[11],eu=ex*ex*j+N,ef=e_*ex*j+ew*F,ed=ew*ex*j-e_*F,eh=ex*e_*j-ew*F,ep=e_*e_*j+N,eg=ew*e_*j+ex*F,em=ex*ew*j+e_*F,ey=e_*ew*j-ex*F,ev=ew*ew*j+N,i[0]=Z*eu+et*ef+eo*ed,i[1]=X*eu+er*ef+es*ed,i[2]=$*eu+en*ef+el*ed,i[3]=ee*eu+ei*ef+ec*ed,i[4]=Z*eh+et*ep+eo*eg,i[5]=X*eh+er*ep+es*eg,i[6]=$*eh+en*ep+el*eg,i[7]=ee*eh+ei*ep+ec*eg,i[8]=Z*em+et*ey+eo*ev,i[9]=X*em+er*ey+es*ev,i[10]=$*em+en*ey+el*ev,i[11]=ee*em+ei*ey+ec*ev,o!==i&&(i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i)}},35545:function(i){i.exports=rotateX;function rotateX(i,o,s){var _=Math.sin(s),F=Math.cos(s),N=o[4],j=o[5],Z=o[6],X=o[7],$=o[8],ee=o[9],et=o[10],er=o[11];return o!==i&&(i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[4]=N*F+$*_,i[5]=j*F+ee*_,i[6]=Z*F+et*_,i[7]=X*F+er*_,i[8]=$*F-N*_,i[9]=ee*F-j*_,i[10]=et*F-Z*_,i[11]=er*F-X*_,i}},94918:function(i){i.exports=rotateY;function rotateY(i,o,s){var _=Math.sin(s),F=Math.cos(s),N=o[0],j=o[1],Z=o[2],X=o[3],$=o[8],ee=o[9],et=o[10],er=o[11];return o!==i&&(i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=N*F-$*_,i[1]=j*F-ee*_,i[2]=Z*F-et*_,i[3]=X*F-er*_,i[8]=N*_+$*F,i[9]=j*_+ee*F,i[10]=Z*_+et*F,i[11]=X*_+er*F,i}},15692:function(i){i.exports=rotateZ;function rotateZ(i,o,s){var _=Math.sin(s),F=Math.cos(s),N=o[0],j=o[1],Z=o[2],X=o[3],$=o[4],ee=o[5],et=o[6],er=o[7];return o!==i&&(i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=N*F+$*_,i[1]=j*F+ee*_,i[2]=Z*F+et*_,i[3]=X*F+er*_,i[4]=$*F-N*_,i[5]=ee*F-j*_,i[6]=et*F-Z*_,i[7]=er*F-X*_,i}},10789:function(i){i.exports=scale;function scale(i,o,s){var _=s[0],F=s[1],N=s[2];return i[0]=o[0]*_,i[1]=o[1]*_,i[2]=o[2]*_,i[3]=o[3]*_,i[4]=o[4]*F,i[5]=o[5]*F,i[6]=o[6]*F,i[7]=o[7]*F,i[8]=o[8]*N,i[9]=o[9]*N,i[10]=o[10]*N,i[11]=o[11]*N,i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i}},6726:function(i){i.exports=str;function str(i){return"mat4("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+", "+i[8]+", "+i[9]+", "+i[10]+", "+i[11]+", "+i[12]+", "+i[13]+", "+i[14]+", "+i[15]+")"}},31283:function(i){i.exports=translate;function translate(i,o,s){var _,F,N,j,Z,X,$,ee,et,er,en,ei,eo=s[0],es=s[1],el=s[2];return o===i?(i[12]=o[0]*eo+o[4]*es+o[8]*el+o[12],i[13]=o[1]*eo+o[5]*es+o[9]*el+o[13],i[14]=o[2]*eo+o[6]*es+o[10]*el+o[14],i[15]=o[3]*eo+o[7]*es+o[11]*el+o[15]):(_=o[0],F=o[1],N=o[2],j=o[3],Z=o[4],X=o[5],$=o[6],ee=o[7],et=o[8],er=o[9],en=o[10],ei=o[11],i[0]=_,i[1]=F,i[2]=N,i[3]=j,i[4]=Z,i[5]=X,i[6]=$,i[7]=ee,i[8]=et,i[9]=er,i[10]=en,i[11]=ei,i[12]=_*eo+Z*es+et*el+o[12],i[13]=F*eo+X*es+er*el+o[13],i[14]=N*eo+$*es+en*el+o[14],i[15]=j*eo+ee*es+ei*el+o[15]),i}},88654:function(i){i.exports=transpose;function transpose(i,o){if(i===o){var s=o[1],_=o[2],F=o[3],N=o[6],j=o[7],Z=o[11];i[1]=o[4],i[2]=o[8],i[3]=o[12],i[4]=s,i[6]=o[9],i[7]=o[13],i[8]=_,i[9]=N,i[11]=o[14],i[12]=F,i[13]=j,i[14]=Z}else i[0]=o[0],i[1]=o[4],i[2]=o[8],i[3]=o[12],i[4]=o[1],i[5]=o[5],i[6]=o[9],i[7]=o[13],i[8]=o[2],i[9]=o[6],i[10]=o[10],i[11]=o[14],i[12]=o[3],i[13]=o[7],i[14]=o[11],i[15]=o[15];return i}},42505:function(i,o,s){"use strict";var _=s(72791),F=s(71299),N=s(98580),j=s(12018),Z=s(83522),X=s(25075),$=s(68016),ee=s(58404),et=s(18863),er=s(10973),en=s(25677),ei=s(75686),eo=s(53545),es=s(56131),el=s(32879),ec=s(30120),eu=s(13547).nextPow2,ef=new Z,ed=!1;if(document.body){var eh=document.body.appendChild(document.createElement("div"));eh.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(eh).fontStretch&&(ed=!0),document.body.removeChild(eh)}var GlText=function(i){isRegl(i)?(i={regl:i},this.gl=i.regl._gl):this.gl=j(i),this.shader=ef.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=i.regl||N({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),ef.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(er(i)?i:{})};function isRegl(i){return"function"==typeof i&&i._gl&&i.prop&&i.texture&&i.buffer}GlText.prototype.createShader=function(){var i=this.regl,o=i({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:i.prop("count"),offset:i.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:i.this("sizeBuffer")},width:{offset:0,stride:8,buffer:i.this("sizeBuffer")},char:i.this("charBuffer"),position:i.this("position")},uniforms:{atlasSize:function(i,o){return[o.atlas.width,o.atlas.height]},atlasDim:function(i,o){return[o.atlas.cols,o.atlas.rows]},atlas:function(i,o){return o.atlas.texture},charStep:function(i,o){return o.atlas.step},em:function(i,o){return o.atlas.em},color:i.prop("color"),opacity:i.prop("opacity"),viewport:i.this("viewportArray"),scale:i.this("scale"),align:i.prop("align"),baseline:i.prop("baseline"),translate:i.this("translate"),positionOffset:i.prop("positionOffset")},primitive:"points",viewport:i.this("viewport"),vert:"\n			precision highp float;\n			attribute float width, charOffset, char;\n			attribute vec2 position;\n			uniform float fontSize, charStep, em, align, baseline;\n			uniform vec4 viewport;\n			uniform vec4 color;\n			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n			varying vec2 charCoord, charId;\n			varying float charWidth;\n			varying vec4 fontColor;\n			void main () {\n				vec2 offset = floor(em * (vec2(align + charOffset, baseline)\n					+ vec2(positionOffset.x, -positionOffset.y)))\n					/ (viewport.zw * scale.xy);\n\n				vec2 position = (position + translate) * scale;\n				position += offset * scale;\n\n				charCoord = position * viewport.zw + viewport.xy;\n\n				gl_Position = vec4(position * 2. - 1., 0, 1);\n\n				gl_PointSize = charStep;\n\n				charId.x = mod(char, atlasDim.x);\n				charId.y = floor(char / atlasDim.x);\n\n				charWidth = width * em;\n\n				fontColor = color / 255.;\n			}",frag:"\n			precision highp float;\n			uniform float fontSize, charStep, opacity;\n			uniform vec2 atlasSize;\n			uniform vec4 viewport;\n			uniform sampler2D atlas;\n			varying vec4 fontColor;\n			varying vec2 charCoord, charId;\n			varying float charWidth;\n\n			float lightness(vec4 color) {\n				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n			}\n\n			void main () {\n				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n				float halfCharStep = floor(charStep * .5 + .5);\n\n				// invert y and shift by 1px (FF expecially needs that)\n				uv.y = charStep - uv.y;\n\n				// ignore points outside of character bounding box\n				float halfCharWidth = ceil(charWidth * .5);\n				if (floor(uv.x) > halfCharStep + halfCharWidth ||\n					floor(uv.x) < halfCharStep - halfCharWidth) return;\n\n				uv += charId * charStep;\n				uv = uv / atlasSize;\n\n				vec4 color = fontColor;\n				vec4 mask = texture2D(atlas, uv);\n\n				float maskY = lightness(mask);\n				// float colorY = lightness(color);\n				color.a *= maskY;\n				color.a *= opacity;\n\n				// color.a += .1;\n\n				// antialiasing, see yiq color space y-channel formula\n				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n				gl_FragColor = color;\n			}"});return{regl:i,draw:o,atlas:{}}},GlText.prototype.update=function(i){var o,s,N=this;if("string"==typeof i)i={text:i};else if(!i)return;null!=(i=F(i,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(Array.isArray(i.opacity)?this.opacity=i.opacity.map(function(i){return parseFloat(i)}):this.opacity=parseFloat(i.opacity)),null!=i.viewport&&(this.viewport=et(i.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=i.kerning&&(this.kerning=i.kerning),null!=i.offset&&("number"==typeof i.offset&&(i.offset=[i.offset,0]),this.positionOffset=ec(i.offset)),i.direction&&(this.direction=i.direction),i.range&&(this.range=i.range,this.scale=[1/(i.range[2]-i.range[0]),1/(i.range[3]-i.range[1])],this.translate=[-i.range[0],-i.range[1]]),i.scale&&(this.scale=i.scale),i.translate&&(this.translate=i.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||i.font||(i.font=GlText.baseFontSize+"px sans-serif");var j=!1,Z=!1;if(i.font&&(Array.isArray(i.font)?i.font:[i.font]).forEach(function(i,o){if("string"==typeof i)try{i=_.parse(i)}catch(o){i=_.parse(GlText.baseFontSize+"px "+i)}else i=_.parse(_.stringify(i));var s=_.stringify({size:GlText.baseFontSize,family:i.family,stretch:ed?i.stretch:void 0,variant:i.variant,weight:i.weight,style:i.style}),F=en(i.size),X=Math.round(F[0]*ei(F[1]));if(X!==N.fontSize[o]&&(Z=!0,N.fontSize[o]=X),(!N.font[o]||s!=N.font[o].baseString)&&(j=!0,N.font[o]=GlText.fonts[s],!N.font[o])){var $=i.family.join(", "),ee=[i.style];i.style!=i.variant&&ee.push(i.variant),i.variant!=i.weight&&ee.push(i.weight),ed&&i.weight!=i.stretch&&ee.push(i.stretch),N.font[o]={baseString:s,family:$,weight:i.weight,stretch:i.stretch,style:i.style,variant:i.variant,width:{},kerning:{},metrics:el($,{origin:"top",fontSize:GlText.baseFontSize,fontStyle:ee.join(" ")})},GlText.fonts[s]=N.font[o]}}),(j||Z)&&this.font.forEach(function(o,s){var F=_.stringify({size:N.fontSize[s],family:o.family,stretch:ed?o.stretch:void 0,variant:o.variant,weight:o.weight,style:o.style});if(N.fontAtlas[s]=N.shader.atlas[F],!N.fontAtlas[s]){var j=o.metrics;N.shader.atlas[F]=N.fontAtlas[s]={fontString:F,step:2*Math.ceil(N.fontSize[s]*j.bottom*.5),em:N.fontSize[s],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:N.regl.texture()}}null==i.text&&(i.text=N.text)}),"string"==typeof i.text&&i.position&&i.position.length>2){for(var er=Array(.5*i.position.length),ef=0;ef<er.length;ef++)er[ef]=i.text;i.text=er}if(null!=i.text||j){if(this.textOffsets=[0],Array.isArray(i.text)){this.count=i.text[0].length,this.counts=[this.count];for(var eh=1;eh<i.text.length;eh++)this.textOffsets[eh]=this.textOffsets[eh-1]+i.text[eh-1].length,this.count+=i.text[eh].length,this.counts.push(i.text[eh].length);this.text=i.text.join("")}else this.text=i.text,this.count=this.text.length,this.counts=[this.count];o=[],this.font.forEach(function(i,s){GlText.atlasContext.font=i.baseString;for(var _=N.fontAtlas[s],F=0;F<N.text.length;F++){var j=N.text.charAt(F);if(null==_.ids[j]&&(_.ids[j]=_.chars.length,_.chars.push(j),o.push(j)),null==i.width[j]&&(i.width[j]=GlText.atlasContext.measureText(j).width/GlText.baseFontSize,N.kerning)){var Z=[];for(var X in i.width)Z.push(X+j,j+X);es(i.kerning,eo(i.family,{pairs:Z}))}}})}if(i.position){if(i.position.length>2){for(var ep=!i.position[0].length,eg=ee.mallocFloat(2*this.count),em=0,ey=0;em<this.counts.length;em++){var ev=this.counts[em];if(ep)for(var ex=0;ex<ev;ex++)eg[ey++]=i.position[2*em],eg[ey++]=i.position[2*em+1];else for(var e_=0;e_<ev;e_++)eg[ey++]=i.position[em][0],eg[ey++]=i.position[em][1]}this.position.call?this.position({type:"float",data:eg}):this.position=this.regl.buffer({type:"float",data:eg}),ee.freeFloat(eg)}else this.position.destroy&&this.position.destroy(),this.position={constant:i.position}}if(i.text||j){var ew=ee.mallocUint8(this.count),eT=ee.mallocFloat(2*this.count);this.textWidth=[];for(var ek=0,eA=0;ek<this.counts.length;ek++){for(var eS=this.counts[ek],eM=this.font[ek]||this.font[0],eC=this.fontAtlas[ek]||this.fontAtlas[0],eE=0;eE<eS;eE++){var eL=this.text.charAt(eA),eP=this.text.charAt(eA-1);if(ew[eA]=eC.ids[eL],eT[2*eA]=eM.width[eL],eE){var eI=eT[2*eA-2],eO=eT[2*eA],eD=eT[2*eA-1]+.5*eI+.5*eO;if(this.kerning){var eR=eM.kerning[eP+eL];eR&&(eD+=.001*eR)}eT[2*eA+1]=eD}else eT[2*eA+1]=.5*eT[2*eA];eA++}this.textWidth.push(eT.length?.5*eT[2*eA-2]+eT[2*eA-1]:0)}i.align||(i.align=this.align),this.charBuffer({data:ew,type:"uint8",usage:"stream"}),this.sizeBuffer({data:eT,type:"float",usage:"stream"}),ee.freeUint8(ew),ee.freeFloat(eT),o.length&&this.font.forEach(function(i,o){var s=N.fontAtlas[o],_=s.step,F=Math.min(Math.floor(GlText.maxAtlasSize/_),s.chars.length),j=Math.ceil(s.chars.length/F),Z=eu(F*_),X=eu(j*_);s.width=Z,s.height=X,s.rows=j,s.cols=F,s.em&&s.texture({data:$({canvas:GlText.atlasCanvas,font:s.fontString,chars:s.chars,shape:[Z,X],step:[_,_]})})})}if(i.align&&(this.align=i.align,this.alignOffset=this.textWidth.map(function(i,o){var s=Array.isArray(N.align)?N.align.length>1?N.align[o]:N.align[0]:N.align;if("number"==typeof s)return s;switch(s){case"right":case"end":return-i;case"center":case"centre":case"middle":return-(.5*i)}return 0})),null==this.baseline&&null==i.baseline&&(i.baseline=0),null!=i.baseline&&(this.baseline=i.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(i,o){var s,_=(N.font[o]||N.font[0]).metrics;return s=0+.5*_.bottom,"number"==typeof i?s+=i-_.baseline:s+=-_[i],s*=-1})),null!=i.color){if(i.color||(i.color="transparent"),"string"!=typeof i.color&&isNaN(i.color)){if("number"==typeof i.color[0]&&i.color.length>this.counts.length){var eB=i.color.length;s=ee.mallocUint8(eB);for(var eF=(i.color.subarray||i.color.slice).bind(i.color),ez=0;ez<eB;ez+=4)s.set(X(eF(ez,ez+4),"uint8"),ez)}else{var eN=i.color.length;s=ee.mallocUint8(4*eN);for(var ej=0;ej<eN;ej++)s.set(X(i.color[ej]||0,"uint8"),4*ej)}this.color=s}else this.color=X(i.color,"uint8")}if(i.position||i.text||i.color||i.baseline||i.align||i.font||i.offset||i.opacity){if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var eV=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(eV);for(var eU=0;eU<this.batch.length;eU++)this.batch[eU]={count:this.counts.length>1?this.counts[eU]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[eU]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*eU,4*eU+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[eU]:this.opacity,baseline:null!=this.baselineOffset[eU]?this.baselineOffset[eU]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[eU]?this.alignOffset[eU]:this.alignOffset[0]:0,atlas:this.fontAtlas[eU]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*eU,2*eU+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},GlText.prototype.destroy=function(){},GlText.prototype.kerning=!0,GlText.prototype.position={constant:new Float32Array(2)},GlText.prototype.translate=null,GlText.prototype.scale=null,GlText.prototype.font=null,GlText.prototype.text="",GlText.prototype.positionOffset=[0,0],GlText.prototype.opacity=1,GlText.prototype.color=new Uint8Array([0,0,0,255]),GlText.prototype.alignOffset=[0,0],GlText.maxAtlasSize=1024,GlText.atlasCanvas=document.createElement("canvas"),GlText.atlasContext=GlText.atlasCanvas.getContext("2d",{alpha:!1}),GlText.baseFontSize=64,GlText.fonts={},i.exports=GlText},12018:function(i,o,s){"use strict";var _=s(71299);function resize(i){if(i.container){if(i.container==document.body)document.body.style.width||(i.canvas.width=i.width||i.pixelRatio*s.g.innerWidth),document.body.style.height||(i.canvas.height=i.height||i.pixelRatio*s.g.innerHeight);else{var o=i.container.getBoundingClientRect();i.canvas.width=i.width||o.right-o.left,i.canvas.height=i.height||o.bottom-o.top}}}function isCanvas(i){return"function"==typeof i.getContext&&"width"in i&&"height"in i}function isElement(i){return"string"==typeof i.nodeName&&"function"==typeof i.appendChild&&"function"==typeof i.getBoundingClientRect}function isContext(i){return"function"==typeof i.drawArrays||"function"==typeof i.drawElements}function createCanvas(){var i=document.createElement("canvas");return i.style.position="absolute",i.style.top=0,i.style.left=0,i}i.exports=function(i){if(i?"string"==typeof i&&(i={container:i}):i={},(i=isCanvas(i)?{container:i}:isElement(i)?{container:i}:isContext(i)?{gl:i}:_(i,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(i.pixelRatio=s.g.pixelRatio||1),i.gl)return i.gl;if(i.canvas&&(i.container=i.canvas.parentNode),i.container){if("string"==typeof i.container){var o=document.querySelector(i.container);if(!o)throw Error("Element "+i.container+" is not found");i.container=o}isCanvas(i.container)?(i.canvas=i.container,i.container=i.canvas.parentNode):i.canvas||(i.canvas=createCanvas(),i.container.appendChild(i.canvas),resize(i))}else if(!i.canvas){if("undefined"!=typeof document)i.container=document.body||document.documentElement,i.canvas=createCanvas(),i.container.appendChild(i.canvas),resize(i);else throw Error("Not DOM environment. Use headless-gl.")}return i.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(o){try{i.gl=i.canvas.getContext(o,i.attrs)}catch(i){}return i.gl}),i.gl}},56068:function(i){i.exports=function(i){"string"==typeof i&&(i=[i]);for(var o=[].slice.call(arguments,1),s=[],_=0;_<i.length-1;_++)s.push(i[_],o[_]||"");return s.push(i[_]),s.join("")}},40383:function(i,o,s){"use strict";var _=s(68318)("%Object.getOwnPropertyDescriptor%",!0);if(_)try{_([],"length")}catch(i){_=null}i.exports=_},57035:function(i,o,s){"use strict";var _,F=s(54404);_="function"==typeof s.g.matchMedia?!s.g.matchMedia("(hover: none)").matches:F,i.exports=_},38520:function(i,o,s){"use strict";var _=s(54404);function detect(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch(o){i=!1}return i}i.exports=_&&detect()},55622:function(i,o,s){"use strict";var _=s(68318)("%Object.defineProperty%",!0),hasPropertyDescriptors=function(){if(_)try{return _({},"a",{value:1}),!0}catch(i){}return!1};hasPropertyDescriptors.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors())return null;try{return 1!==_([],"length",{value:1}).length}catch(i){return!0}},i.exports=hasPropertyDescriptors},57877:function(i,o,s){"use strict";var _="undefined"!=typeof Symbol&&Symbol,F=s(35638);i.exports=function(){return"function"==typeof _&&"function"==typeof Symbol&&"symbol"==typeof _("foo")&&"symbol"==typeof Symbol("bar")&&F()}},35638:function(i){"use strict";i.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var i={},o=Symbol("test"),s=Object(o);if("string"==typeof o||"[object Symbol]"!==Object.prototype.toString.call(o)||"[object Symbol]"!==Object.prototype.toString.call(s))return!1;for(o in i[o]=42,i)return!1;if("function"==typeof Object.keys&&0!==Object.keys(i).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(i).length)return!1;var _=Object.getOwnPropertySymbols(i);if(1!==_.length||_[0]!==o||!Object.prototype.propertyIsEnumerable.call(i,o))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var F=Object.getOwnPropertyDescriptor(i,o);if(42!==F.value||!0!==F.enumerable)return!1}return!0}},84543:function(i,o,s){"use strict";var _=s(35638);i.exports=function(){return _()&&!!Symbol.toStringTag}},35065:function(i,o,s){"use strict";var _=s(77575);i.exports=_.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(i,o){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */o.read=function(i,o,s,_,F){var N,j,Z=8*F-_-1,X=(1<<Z)-1,$=X>>1,ee=-7,et=s?F-1:0,er=s?-1:1,en=i[o+et];for(et+=er,N=en&(1<<-ee)-1,en>>=-ee,ee+=Z;ee>0;N=256*N+i[o+et],et+=er,ee-=8);for(j=N&(1<<-ee)-1,N>>=-ee,ee+=_;ee>0;j=256*j+i[o+et],et+=er,ee-=8);if(0===N)N=1-$;else{if(N===X)return j?NaN:(en?-1:1)*(1/0);j+=Math.pow(2,_),N-=$}return(en?-1:1)*j*Math.pow(2,N-_)},o.write=function(i,o,s,_,F,N){var j,Z,X,$=8*N-F-1,ee=(1<<$)-1,et=ee>>1,er=23===F?5960464477539062e-23:0,en=_?0:N-1,ei=_?1:-1,eo=o<0||0===o&&1/o<0?1:0;for(isNaN(o=Math.abs(o))||o===1/0?(Z=isNaN(o)?1:0,j=ee):(j=Math.floor(Math.log(o)/Math.LN2),o*(X=Math.pow(2,-j))<1&&(j--,X*=2),j+et>=1?o+=er/X:o+=er*Math.pow(2,1-et),o*X>=2&&(j++,X/=2),j+et>=ee?(Z=0,j=ee):j+et>=1?(Z=(o*X-1)*Math.pow(2,F),j+=et):(Z=o*Math.pow(2,et-1)*Math.pow(2,F),j=0));F>=8;i[s+en]=255&Z,en+=ei,Z/=256,F-=8);for(j=j<<F|Z,$+=F;$>0;i[s+en]=255&j,en+=ei,j/=256,$-=8);i[s+en-ei]|=128*eo}},42018:function(i){"function"==typeof Object.create?i.exports=function(i,o){o&&(i.super_=o,i.prototype=Object.create(o.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(i,o){if(o){i.super_=o;var TempCtor=function(){};TempCtor.prototype=o.prototype,i.prototype=new TempCtor,i.prototype.constructor=i}}},47216:function(i,o,s){"use strict";var _=s(84543)(),F=s(6614)("Object.prototype.toString"),isStandardArguments=function(i){return(!_||!i||"object"!=typeof i||!(Symbol.toStringTag in i))&&"[object Arguments]"===F(i)},isLegacyArguments=function(i){return!!isStandardArguments(i)||null!==i&&"object"==typeof i&&"number"==typeof i.length&&i.length>=0&&"[object Array]"!==F(i)&&"[object Function]"===F(i.callee)},N=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments,i.exports=N?isStandardArguments:isLegacyArguments},54404:function(i){i.exports=!0},85395:function(i){"use strict";var o,s,_=Function.prototype.toString,F="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof F&&"function"==typeof Object.defineProperty)try{o=Object.defineProperty({},"length",{get:function(){throw s}}),s={},F(function(){throw 42},null,o)}catch(i){i!==s&&(F=null)}else F=null;var N=/^\s*class\b/,isES6ClassFn=function(i){try{var o=_.call(i);return N.test(o)}catch(i){return!1}},tryFunctionObject=function(i){try{if(isES6ClassFn(i))return!1;return _.call(i),!0}catch(i){return!1}},j=Object.prototype.toString,Z="function"==typeof Symbol&&!!Symbol.toStringTag,X=!(0 in[,]),isDDA=function(){return!1};if("object"==typeof document){var $=document.all;j.call($)===j.call(document.all)&&(isDDA=function(i){if((X||!i)&&(void 0===i||"object"==typeof i))try{var o=j.call(i);return("[object HTMLAllCollection]"===o||"[object HTML document.all class]"===o||"[object HTMLCollection]"===o||"[object Object]"===o)&&null==i("")}catch(i){}return!1})}i.exports=F?function(i){if(isDDA(i))return!0;if(!i||"function"!=typeof i&&"object"!=typeof i)return!1;try{F(i,null,o)}catch(i){if(i!==s)return!1}return!isES6ClassFn(i)&&tryFunctionObject(i)}:function(i){if(isDDA(i))return!0;if(!i||"function"!=typeof i&&"object"!=typeof i)return!1;if(Z)return tryFunctionObject(i);if(isES6ClassFn(i))return!1;var o=j.call(i);return!!("[object Function]"===o||"[object GeneratorFunction]"===o||/^\[object HTML/.test(o))&&tryFunctionObject(i)}},65481:function(i,o,s){"use strict";var _,F=Object.prototype.toString,N=Function.prototype.toString,j=/^\s*(?:function)?\*/,Z=s(84543)(),X=Object.getPrototypeOf,getGeneratorFunc=function(){if(!Z)return!1;try{return Function("return function*() {}")()}catch(i){}};i.exports=function(i){if("function"!=typeof i)return!1;if(j.test(N.call(i)))return!0;if(!Z)return"[object GeneratorFunction]"===F.call(i);if(!X)return!1;if(void 0===_){var o=getGeneratorFunc();_=!!o&&X(o)}return X(i)===_}},62683:function(i){"use strict";i.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(i){"use strict";i.exports=function(i){return i!=i}},15567:function(i,o,s){"use strict";var _=s(68222),F=s(17045),N=s(64274),j=s(14922),Z=s(22442),X=_(j(),Number);F(X,{getPolyfill:j,implementation:N,shim:Z}),i.exports=X},14922:function(i,o,s){"use strict";var _=s(64274);i.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:_}},22442:function(i,o,s){"use strict";var _=s(17045),F=s(14922);i.exports=function(){var i=F();return _(Number,{isNaN:i},{isNaN:function(){return Number.isNaN!==i}}),i}},64941:function(i){"use strict";i.exports=function(i){var o=typeof i;return null!==i&&("object"===o||"function"===o)}},10973:function(i){"use strict";var o=Object.prototype.toString;i.exports=function(i){var s;return"[object Object]"===o.call(i)&&(null===(s=Object.getPrototypeOf(i))||s===Object.getPrototypeOf({}))}},18546:function(i){"use strict";i.exports=function(i){for(var o,s=i.length,_=0;_<s;_++)if(((o=i.charCodeAt(_))<9||o>13)&&32!==o&&133!==o&&160!==o&&5760!==o&&6158!==o&&(o<8192||o>8205)&&8232!==o&&8233!==o&&8239!==o&&8287!==o&&8288!==o&&12288!==o&&65279!==o)return!1;return!0}},89546:function(i){"use strict";i.exports=function(i){return"string"==typeof i&&(i=i.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(i)&&/[\dz]$/i.test(i))&&i.length>4)}},9187:function(i,o,s){"use strict";var _=s(31353),F=s(72077),N=s(6614),j=N("Object.prototype.toString"),Z=s(84543)(),X=s(40383),$="undefined"==typeof globalThis?s.g:globalThis,ee=F(),et=N("Array.prototype.indexOf",!0)||function(i,o){for(var s=0;s<i.length;s+=1)if(i[s]===o)return s;return -1},er=N("String.prototype.slice"),en={},ei=Object.getPrototypeOf;Z&&X&&ei&&_(ee,function(i){var o=new $[i];if(Symbol.toStringTag in o){var s=ei(o),_=X(s,Symbol.toStringTag);_||(_=X(ei(s),Symbol.toStringTag)),en[i]=_.get}});var tryTypedArrays=function(i){var o=!1;return _(en,function(s,_){if(!o)try{o=s.call(i)===_}catch(i){}}),o};i.exports=function(i){return!!i&&"object"==typeof i&&(Z&&Symbol.toStringTag in i?!!X&&tryTypedArrays(i):et(ee,er(j(i),8,-1))>-1)}},44517:function(i){i.exports=function(){"use strict";var i,o,s;function define(_,F){if(i){if(o){var N="var sharedChunk = {}; ("+i+")(sharedChunk); ("+o+")(sharedChunk);",j={};i(j),(s=F(j)).workerUrl=window.URL.createObjectURL(new Blob([N],{type:"text/javascript"}))}else o=F}else i=F}return define(["exports"],function(i){function createCommonjsModule(i,o){return i(o={exports:{}},o.exports),o.exports}var o,s,_,F,N,j,Z,X,$,ee="1.10.1",et=UnitBezier;function UnitBezier(i,o,s,_){this.cx=3*i,this.bx=3*(s-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(_-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=_,this.p2x=s,this.p2y=_}UnitBezier.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i},UnitBezier.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i},UnitBezier.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},UnitBezier.prototype.solveCurveX=function(i,o){for(void 0===o&&(o=1e-6),F=i,j=0;j<8;j++){if(Math.abs(N=this.sampleCurveX(F)-i)<o)return F;var s,_,F,N,j,Z=this.sampleCurveDerivativeX(F);if(1e-6>Math.abs(Z))break;F-=N/Z}if(s=0,_=1,(F=i)<s)return s;if(F>_)return _;for(;s<_&&!(Math.abs((N=this.sampleCurveX(F))-i)<o);)i>N?s=F:_=F,F=(_-s)*.5+s;return F},UnitBezier.prototype.solve=function(i,o){return this.sampleCurveY(this.solveCurveX(i,o))};var er=Point;function Point(i,o){this.x=i,this.y=o}function deepEqual(i,o){if(Array.isArray(i)){if(!Array.isArray(o)||i.length!==o.length)return!1;for(var s=0;s<i.length;s++)if(!deepEqual(i[s],o[s]))return!1;return!0}if("object"==typeof i&&null!==i&&null!==o){if("object"!=typeof o||Object.keys(i).length!==Object.keys(o).length)return!1;for(var _ in i)if(!deepEqual(i[_],o[_]))return!1;return!0}return i===o}function easeCubicInOut(i){if(i<=0)return 0;if(i>=1)return 1;var o=i*i,s=o*i;return 4*(i<.5?s:3*(i-o)+s-.75)}function bezier(i,o,s,_){var F=new et(i,o,s,_);return function(i){return F.solve(i)}}Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,o){return this.clone()._rotateAround(i,o)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var o=i.x-this.x,s=i.y-this.y;return o*o+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,o){return Math.atan2(this.x*o-this.y*i,this.x*i+this.y*o)},_matMult:function(i){var o=i[0]*this.x+i[1]*this.y,s=i[2]*this.x+i[3]*this.y;return this.x=o,this.y=s,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var o=Math.cos(i),s=Math.sin(i),_=o*this.x-s*this.y,F=s*this.x+o*this.y;return this.x=_,this.y=F,this},_rotateAround:function(i,o){var s=Math.cos(i),_=Math.sin(i),F=o.x+s*(this.x-o.x)-_*(this.y-o.y),N=o.y+_*(this.x-o.x)+s*(this.y-o.y);return this.x=F,this.y=N,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Point.convert=function(i){return i instanceof Point?i:Array.isArray(i)?new Point(i[0],i[1]):i};var en=bezier(.25,.1,.25,1);function clamp(i,o,s){return Math.min(s,Math.max(o,i))}function wrap(i,o,s){var _=s-o,F=((i-o)%_+_)%_+o;return F===o?s:F}function asyncAll(i,o,s){if(!i.length)return s(null,[]);var _=i.length,F=Array(i.length),N=null;i.forEach(function(i,j){o(i,function(i,o){i&&(N=i),F[j]=o,0==--_&&s(N,F)})})}function values(i){var o=[];for(var s in i)o.push(i[s]);return o}function keysDifference(i,o){var s=[];for(var _ in i)_ in o||s.push(_);return s}function extend(i){for(var o=[],s=arguments.length-1;s-- >0;)o[s]=arguments[s+1];for(var _=0;_<o.length;_+=1){var F=o[_];for(var N in F)i[N]=F[N]}return i}function pick(i,o){for(var s={},_=0;_<o.length;_++){var F=o[_];F in i&&(s[F]=i[F])}return s}var ei=1;function uniqueId(){return ei++}function uuid(){function b(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,b)}return b()}function validateUuid(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function bindAll(i,o){i.forEach(function(i){o[i]&&(o[i]=o[i].bind(o))})}function endsWith(i,o){return -1!==i.indexOf(o,i.length-o.length)}function mapObject(i,o,s){var _={};for(var F in i)_[F]=o.call(s||this,i[F],F,i);return _}function filterObject(i,o,s){var _={};for(var F in i)o.call(s||this,i[F],F,i)&&(_[F]=i[F]);return _}function clone(i){return Array.isArray(i)?i.map(clone):"object"==typeof i&&i?mapObject(i,clone):i}function arraysIntersect(i,o){for(var s=0;s<i.length;s++)if(o.indexOf(i[s])>=0)return!0;return!1}var eo={};function warnOnce(i){eo[i]||("undefined"!=typeof console&&console.warn(i),eo[i]=!0)}function isCounterClockwise(i,o,s){return(s.y-i.y)*(o.x-i.x)>(o.y-i.y)*(s.x-i.x)}function calculateSignedArea(i){for(var o=0,s=0,_=i.length,F=_-1,N=void 0,j=void 0;s<_;F=s++)N=i[s],o+=((j=i[F]).x-N.x)*(N.y+j.y);return o}function sphericalToCartesian(i){var o=i[0],s=i[1],_=i[2];return s+=90,{x:o*Math.cos(s*=Math.PI/180)*Math.sin(_*=Math.PI/180),y:o*Math.sin(s)*Math.sin(_),z:o*Math.cos(_)}}function isWorker(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function parseCacheControl(i){var o={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(i,s,_,F){var N=_||F;return o[s]=!N||N.toLowerCase(),""}),o["max-age"]){var s=parseInt(o["max-age"],10);isNaN(s)?delete o["max-age"]:o["max-age"]=s}return o}var es=null;function isSafari(i){if(null==es){var o=i.navigator?i.navigator.userAgent:null;es=!!i.safari||!!(o&&(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return es}function storageAvailable(i){try{var o=self[i];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch(i){return!1}}function b64EncodeUnicode(i){return self.btoa(encodeURIComponent(i).replace(/%([0-9A-F]{2})/g,function(i,o){return String.fromCharCode(Number("0x"+o))}))}function b64DecodeUnicode(i){return decodeURIComponent(self.atob(i).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var el=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),ec=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,eu=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ef={now:el,frame:function(i){var o=ec(i);return{cancel:function(){return eu(o)}}},getImageData:function(i,o){void 0===o&&(o=0);var s=self.document.createElement("canvas"),_=s.getContext("2d");if(!_)throw Error("failed to create canvas 2d context");return s.width=i.width,s.height=i.height,_.drawImage(i,0,0,i.width,i.height),_.getImageData(-o,-o,i.width+2*o,i.height+2*o)},resolveURL:function(i){return o||(o=self.document.createElement("a")),o.href=i,o.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){if(!self.matchMedia)return!1;return null==s&&(s=self.matchMedia("(prefers-reduced-motion: reduce)")),s.matches}},ed={API_URL:"https://api.mapbox.com",get EVENTS_URL(){if(!this.API_URL)return null;if(0===this.API_URL.indexOf("https://api.mapbox.cn"))return"https://events.mapbox.cn/events/v2";if(0===this.API_URL.indexOf("https://api.mapbox.com"))return"https://events.mapbox.com/events/v2";return null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},eh={supported:!1,testSupport:testSupport},ep=!1,eg=!1;function testSupport(i){!ep&&F&&(eg?testWebpTextureUpload(i):_=i)}function testWebpTextureUpload(i){var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,F),i.isContextLost())return;eh.supported=!0}catch(i){}i.deleteTexture(o),ep=!0}function createSkuToken(){for(var i="",o=0;o<10;o++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1","01",i].join(""),tokenExpiresAt:Date.now()+432e5}}self.document&&((F=self.document.createElement("img")).onload=function(){_&&testWebpTextureUpload(_),_=null,eg=!0},F.onerror=function(){ep=!0,_=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var RequestManager=function(i,o){this._transformRequestFn=i,this._customAccessToken=o,this._createSkuToken()};function isMapboxURL(i){return 0===i.indexOf("mapbox:")}RequestManager.prototype._createSkuToken=function(){var i=createSkuToken();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt},RequestManager.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},RequestManager.prototype.transformRequest=function(i,o){return this._transformRequestFn&&this._transformRequestFn(i,o)||{url:i}},RequestManager.prototype.normalizeStyleURL=function(i,o){if(!isMapboxURL(i))return i;var s=parseUrl(i);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||o)},RequestManager.prototype.normalizeGlyphsURL=function(i,o){if(!isMapboxURL(i))return i;var s=parseUrl(i);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||o)},RequestManager.prototype.normalizeSourceURL=function(i,o){if(!isMapboxURL(i))return i;var s=parseUrl(i);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||o)},RequestManager.prototype.normalizeSpriteURL=function(i,o,s,_){var F=parseUrl(i);return isMapboxURL(i)?(F.path="/styles/v1"+F.path+"/sprite"+o+s,this._makeAPIURL(F,this._customAccessToken||_)):(F.path+=""+o+s,formatUrl(F))},RequestManager.prototype.normalizeTileURL=function(i,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!isMapboxURL(i))return i;var s=parseUrl(i),_=ef.devicePixelRatio>=2||512===o?"@2x":"",F=eh.supported?".webp":"$1";s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+_+F),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var N=this._customAccessToken||getAccessToken(s.params)||ed.ACCESS_TOKEN;return ed.REQUIRE_ACCESS_TOKEN&&N&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,N)},RequestManager.prototype.canonicalizeTileURL=function(i,o){var s=parseUrl(i);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return i;var _="mapbox://tiles/";_+=s.path.replace("/v4/","");var F=s.params;return o&&(F=F.filter(function(i){return!i.match(/^access_token=/)})),F.length&&(_+="?"+F.join("&")),_},RequestManager.prototype.canonicalizeTileset=function(i,o){for(var s=!!o&&isMapboxURL(o),_=[],F=0,N=i.tiles||[];F<N.length;F+=1){var j=N[F];isMapboxHTTPURL(j)?_.push(this.canonicalizeTileURL(j,s)):_.push(j)}return _},RequestManager.prototype._makeAPIURL=function(i,o){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",_=parseUrl(ed.API_URL);if(i.protocol=_.protocol,i.authority=_.authority,"/"!==_.path&&(i.path=""+_.path+i.path),!ed.REQUIRE_ACCESS_TOKEN)return formatUrl(i);if(!(o=o||ed.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. "+s);if("s"===o[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return i.params=i.params.filter(function(i){return -1===i.indexOf("access_token")}),i.params.push("access_token="+o),formatUrl(i)};var em=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function isMapboxHTTPURL(i){return em.test(i)}function hasCacheDefeatingSku(i){return i.indexOf("sku=")>0&&isMapboxHTTPURL(i)}function getAccessToken(i){for(var o=0;o<i.length;o+=1){var s=i[o].match(/^access_token=(.*)$/);if(s)return s[1]}return null}var ey=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function parseUrl(i){var o=i.match(ey);if(!o)throw Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function formatUrl(i){var o=i.params.length?"?"+i.params.join("&"):"";return i.protocol+"://"+i.authority+i.path+o}var ev="mapbox.eventData";function parseAccessToken(i){if(!i)return null;var o=i.split(".");if(!o||3!==o.length)return null;try{return JSON.parse(b64DecodeUnicode(o[1]))}catch(i){return null}}var TelemetryEvent=function(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};TelemetryEvent.prototype.getStorageKey=function(i){var o=parseAccessToken(ed.ACCESS_TOKEN),s="";return s=o&&o.u?b64EncodeUnicode(o.u):ed.ACCESS_TOKEN||"",i?ev+"."+i+":"+s:ev+":"+s},TelemetryEvent.prototype.fetchEventData=function(){var i=storageAvailable("localStorage"),o=this.getStorageKey(),s=this.getStorageKey("uuid");if(i)try{var _=self.localStorage.getItem(o);_&&(this.eventData=JSON.parse(_));var F=self.localStorage.getItem(s);F&&(this.anonId=F)}catch(i){warnOnce("Unable to read from LocalStorage")}},TelemetryEvent.prototype.saveEventData=function(){var i=storageAvailable("localStorage"),o=this.getStorageKey(),s=this.getStorageKey("uuid");if(i)try{self.localStorage.setItem(s,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(o,JSON.stringify(this.eventData))}catch(i){warnOnce("Unable to write to LocalStorage")}},TelemetryEvent.prototype.processRequests=function(i){},TelemetryEvent.prototype.postEvent=function(i,o,s,_){var F=this;if(ed.EVENTS_URL){var N=parseUrl(ed.EVENTS_URL);N.params.push("access_token="+(_||ed.ACCESS_TOKEN||""));var j={event:this.type,created:new Date(i).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:ee,skuId:"01",userId:this.anonId},Z=o?extend(j,o):j,X={url:formatUrl(N),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Z])};this.pendingRequest=postData(X,function(i){F.pendingRequest=null,s(i),F.saveEventData(),F.processRequests(_)})}},TelemetryEvent.prototype.queueRequest=function(i,o){this.queue.push(i),this.processRequests(o)};var ex=function(i){function MapLoadEvent(){i.call(this,"map.load"),this.success={},this.skuToken=""}return i&&(MapLoadEvent.__proto__=i),MapLoadEvent.prototype=Object.create(i&&i.prototype),MapLoadEvent.prototype.constructor=MapLoadEvent,MapLoadEvent.prototype.postMapLoadEvent=function(i,o,s,_){this.skuToken=s,(ed.EVENTS_URL&&_||ed.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(i){return isMapboxURL(i)||isMapboxHTTPURL(i)}))&&this.queueRequest({id:o,timestamp:Date.now()},_)},MapLoadEvent.prototype.processRequests=function(i){var o=this;if(!this.pendingRequest&&0!==this.queue.length){var s=this.queue.shift(),_=s.id,F=s.timestamp;_&&this.success[_]||(this.anonId||this.fetchEventData(),validateUuid(this.anonId)||(this.anonId=uuid()),this.postEvent(F,{skuToken:this.skuToken},function(i){!i&&_&&(o.success[_]=!0)},i))}},MapLoadEvent}(TelemetryEvent),e_=new(function(i){function TurnstileEvent(o){i.call(this,"appUserTurnstile"),this._customAccessToken=o}return i&&(TurnstileEvent.__proto__=i),TurnstileEvent.prototype=Object.create(i&&i.prototype),TurnstileEvent.prototype.constructor=TurnstileEvent,TurnstileEvent.prototype.postTurnstileEvent=function(i,o){ed.EVENTS_URL&&ed.ACCESS_TOKEN&&Array.isArray(i)&&i.some(function(i){return isMapboxURL(i)||isMapboxHTTPURL(i)})&&this.queueRequest(Date.now(),o)},TurnstileEvent.prototype.processRequests=function(i){var o=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var s=parseAccessToken(ed.ACCESS_TOKEN),_=s?s.u:ed.ACCESS_TOKEN,F=_!==this.eventData.tokenU;validateUuid(this.anonId)||(this.anonId=uuid(),F=!0);var N=this.queue.shift();if(this.eventData.lastSuccess){var j=new Date(this.eventData.lastSuccess),Z=new Date(N),X=(N-this.eventData.lastSuccess)/864e5;F=F||X>=1||X<-1||j.getDate()!==Z.getDate()}else F=!0;if(!F)return this.processRequests();this.postEvent(N,{"enabled.telemetry":!1},function(i){i||(o.eventData.lastSuccess=N,o.eventData.tokenU=_)},i)}},TurnstileEvent}(TelemetryEvent)),ew=e_.postTurnstileEvent.bind(e_),eT=new ex,ek=eT.postMapLoadEvent.bind(eT),eA="mapbox-tiles",eS=500,eM=50;function cacheOpen(){self.caches&&!N&&(N=self.caches.open(eA))}function prepareBody(i,o){if(void 0===j)try{new Response(new ReadableStream),j=!0}catch(i){j=!1}j?o(i.body):i.blob().then(o)}function cachePut(i,o,s){if(cacheOpen(),N){var _={status:o.status,statusText:o.statusText,headers:new self.Headers};o.headers.forEach(function(i,o){return _.headers.set(o,i)});var F=parseCacheControl(o.headers.get("Cache-Control")||"");!F["no-store"]&&(F["max-age"]&&_.headers.set("Expires",new Date(s+1e3*F["max-age"]).toUTCString()),new Date(_.headers.get("Expires")).getTime()-s<42e4||prepareBody(o,function(o){var s=new self.Response(o,_);cacheOpen(),N&&N.then(function(o){return o.put(stripQueryParameters(i.url),s)}).catch(function(i){return warnOnce(i.message)})}))}}function stripQueryParameters(i){var o=i.indexOf("?");return o<0?i:i.slice(0,o)}function cacheGet(i,o){if(cacheOpen(),!N)return o(null);var s=stripQueryParameters(i.url);N.then(function(i){i.match(s).then(function(_){var F=isFresh(_);i.delete(s),F&&i.put(s,_.clone()),o(null,_,F)}).catch(o)}).catch(o)}function isFresh(i){if(!i)return!1;var o=new Date(i.headers.get("Expires")||0),s=parseCacheControl(i.headers.get("Cache-Control")||"");return o>Date.now()&&!s["no-cache"]}var eC=1/0;function cacheEntryPossiblyAdded(i){++eC>eM&&(i.getActor().send("enforceCacheSizeLimit",eS),eC=0)}function enforceCacheSizeLimit(i){cacheOpen(),N&&N.then(function(o){o.keys().then(function(s){for(var _=0;_<s.length-i;_++)o.delete(s[_])})})}function clearTileCache(i){var o=self.caches.delete(eA);i&&o.catch(i).then(function(){return i()})}function setCacheLimits(i,o){eS=i,eM=o}function offscreenCanvasSupported(){return null==Z&&(Z=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Z}var eE={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(eE);var eL=function(i){function AJAXError(o,s,_){401===s&&isMapboxHTTPURL(_)&&(o+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),i.call(this,o),this.status=s,this.url=_,this.name=this.constructor.name,this.message=o}return i&&(AJAXError.__proto__=i),AJAXError.prototype=Object.create(i&&i.prototype),AJAXError.prototype.constructor=AJAXError,AJAXError.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},AJAXError}(Error),eP=isWorker()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function makeFetchRequest(i,o){var s=new self.AbortController,_=new self.Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:eP(),signal:s.signal}),F=!1,N=!1,j=hasCacheDefeatingSku(_.url);"json"===i.type&&_.headers.set("Accept","application/json");var validateOrFetch=function(s,F,Z){if(!N){if(s&&"SecurityError"!==s.message&&warnOnce(s),F&&Z)return finishRequest(F);var X=Date.now();self.fetch(_).then(function(s){if(!s.ok)return o(new eL(s.statusText,s.status,i.url));var _=j?s.clone():null;return finishRequest(s,_,X)}).catch(function(i){20!==i.code&&o(Error(i.message))})}},finishRequest=function(s,j,Z){("arrayBuffer"===i.type?s.arrayBuffer():"json"===i.type?s.json():s.text()).then(function(i){N||(j&&Z&&cachePut(_,j,Z),F=!0,o(null,i,s.headers.get("Cache-Control"),s.headers.get("Expires")))}).catch(function(i){N||o(Error(i.message))})};return j?cacheGet(_,validateOrFetch):validateOrFetch(null,null),{cancel:function(){N=!0,F||s.abort()}}}function makeXMLHttpRequest(i,o){var s=new self.XMLHttpRequest;for(var _ in s.open(i.method||"GET",i.url,!0),"arrayBuffer"===i.type&&(s.responseType="arraybuffer"),i.headers)s.setRequestHeader(_,i.headers[_]);return"json"===i.type&&(s.responseType="text",s.setRequestHeader("Accept","application/json")),s.withCredentials="include"===i.credentials,s.onerror=function(){o(Error(s.statusText))},s.onload=function(){if((s.status>=200&&s.status<300||0===s.status)&&null!==s.response){var _=s.response;if("json"===i.type)try{_=JSON.parse(s.response)}catch(i){return o(i)}o(null,_,s.getResponseHeader("Cache-Control"),s.getResponseHeader("Expires"))}else o(new eL(s.statusText,s.status,i.url))},s.send(i.body),{cancel:function(){return s.abort()}}}var makeRequest=function(i,o){var s;if(s=i.url,!(/^file:/.test(s)||/^file:/.test(eP())&&!/^\w+:/.test(s))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return makeFetchRequest(i,o);if(isWorker()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,o,void 0,!0)}return makeXMLHttpRequest(i,o)},getArrayBuffer=function(i,o){return makeRequest(extend(i,{type:"arrayBuffer"}),o)},postData=function(i,o){return makeRequest(extend(i,{method:"POST"}),o)};function sameOrigin(i){var o=self.document.createElement("a");return o.href=i,o.protocol===self.document.location.protocol&&o.host===self.document.location.host}function arrayBufferToImage(i,o,s,_){var F=new self.Image,N=self.URL;F.onload=function(){o(null,F),N.revokeObjectURL(F.src)},F.onerror=function(){return o(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var j=new self.Blob([new Uint8Array(i)],{type:"image/png"});F.cacheControl=s,F.expires=_,F.src=i.byteLength?N.createObjectURL(j):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}function arrayBufferToImageBitmap(i,o){var s=new self.Blob([new Uint8Array(i)],{type:"image/png"});self.createImageBitmap(s).then(function(i){o(null,i)}).catch(function(i){o(Error("Could not load image because of "+i.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}X=[],$=0;var getImage=function(i,o){if(eh.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),$>=ed.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:i,callback:o,cancelled:!1,cancel:function(){this.cancelled=!0}};return X.push(s),s}$++;var _=!1,advanceImageRequestQueue=function(){if(!_)for(_=!0,$--;X.length&&$<ed.MAX_PARALLEL_IMAGE_REQUESTS;){var i=X.shift(),o=i.requestParameters,s=i.callback;i.cancelled||(i.cancel=getImage(o,s).cancel)}},F=getArrayBuffer(i,function(i,s,_,F){advanceImageRequestQueue(),i?o(i):s&&(offscreenCanvasSupported()?arrayBufferToImageBitmap(s,o):arrayBufferToImage(s,o,_,F))});return{cancel:function(){F.cancel(),advanceImageRequestQueue()}}};function _addEventListener(i,o,s){s[i]&&-1!==s[i].indexOf(o)||(s[i]=s[i]||[],s[i].push(o))}function _removeEventListener(i,o,s){if(s&&s[i]){var _=s[i].indexOf(o);-1!==_&&s[i].splice(_,1)}}var Event=function(i,o){void 0===o&&(o={}),extend(this,o),this.type=i},eI=function(i){function ErrorEvent(o,s){void 0===s&&(s={}),i.call(this,"error",extend({error:o},s))}return i&&(ErrorEvent.__proto__=i),ErrorEvent.prototype=Object.create(i&&i.prototype),ErrorEvent.prototype.constructor=ErrorEvent,ErrorEvent}(Event),Evented=function(){};Evented.prototype.on=function(i,o){return this._listeners=this._listeners||{},_addEventListener(i,o,this._listeners),this},Evented.prototype.off=function(i,o){return _removeEventListener(i,o,this._listeners),_removeEventListener(i,o,this._oneTimeListeners),this},Evented.prototype.once=function(i,o){return this._oneTimeListeners=this._oneTimeListeners||{},_addEventListener(i,o,this._oneTimeListeners),this},Evented.prototype.fire=function(i,o){"string"==typeof i&&(i=new Event(i,o||{}));var s=i.type;if(this.listens(s)){i.target=this;for(var _=this._listeners&&this._listeners[s]?this._listeners[s].slice():[],F=0;F<_.length;F+=1)_[F].call(this,i);for(var N=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[],j=0;j<N.length;j+=1){var Z=N[j];_removeEventListener(s,Z,this._oneTimeListeners),Z.call(this,i)}var X=this._eventedParent;X&&(extend(i,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),X.fire(i))}else i instanceof eI&&console.error(i.error);return this},Evented.prototype.listens=function(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)},Evented.prototype.setEventedParent=function(i,o){return this._eventedParent=i,this._eventedParentData=o,this};var eO={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ValidationError=function(i,o,s,_){this.message=(i?i+": ":"")+s,_&&(this.identifier=_),null!=o&&o.__line__&&(this.line=o.__line__)};function validateConstants(i){var o=i.key,s=i.value;return s?[new ValidationError(o,s,"constants have been deprecated as of v8")]:[]}function extend$1(i){for(var o=[],s=arguments.length-1;s-- >0;)o[s]=arguments[s+1];for(var _=0;_<o.length;_+=1){var F=o[_];for(var N in F)i[N]=F[N]}return i}function unbundle(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function deepUnbundle(i){if(Array.isArray(i))return i.map(deepUnbundle);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){var o={};for(var s in i)o[s]=deepUnbundle(i[s]);return o}return unbundle(i)}var eD=function(i){function ParsingError(o,s){i.call(this,s),this.message=s,this.key=o}return i&&(ParsingError.__proto__=i),ParsingError.prototype=Object.create(i&&i.prototype),ParsingError.prototype.constructor=ParsingError,ParsingError}(Error),Scope=function(i,o){void 0===o&&(o=[]),this.parent=i,this.bindings={};for(var s=0,_=o;s<_.length;s+=1){var F=_[s],N=F[0],j=F[1];this.bindings[N]=j}};Scope.prototype.concat=function(i){return new Scope(this,i)},Scope.prototype.get=function(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw Error(i+" not found in scope.")},Scope.prototype.has=function(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)};var eR={kind:"null"},eB={kind:"number"},eF={kind:"string"},ez={kind:"boolean"},eN={kind:"color"},ej={kind:"object"},eV={kind:"value"},eU={kind:"collator"},eH={kind:"formatted"},eG={kind:"resolvedImage"};function array(i,o){return{kind:"array",itemType:i,N:o}}function toString(i){if("array"!==i.kind)return i.kind;var o=toString(i.itemType);return"number"==typeof i.N?"array<"+o+", "+i.N+">":"value"===i.itemType.kind?"array":"array<"+o+">"}var eW=[eR,eB,eF,ez,eN,eH,ej,array(eV),eG];function checkSubtype(i,o){if("error"===o.kind)return null;if("array"===i.kind){if("array"===o.kind&&(0===o.N&&"value"===o.itemType.kind||!checkSubtype(i.itemType,o.itemType))&&("number"!=typeof i.N||i.N===o.N))return null}else if(i.kind===o.kind)return null;else if("value"===i.kind){for(var s=0;s<eW.length;s+=1)if(!checkSubtype(eW[s],o))return null}return"Expected "+toString(i)+" but found "+toString(o)+" instead."}function isValidType(i,o){return o.some(function(o){return o.kind===i.kind})}function isValidNativeType(i,o){return o.some(function(o){return"null"===o?null===i:"array"===o?Array.isArray(i):"object"===o?i&&!Array.isArray(i)&&"object"==typeof i:o===typeof i})}var eZ=createCommonjsModule(function(i,o){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(i){return(i=Math.round(i))<0?0:i>255?255:i}function clamp_css_float(i){return i<0?0:i>1?1:i}function parse_css_int(i){return"%"===i[i.length-1]?clamp_css_byte(parseFloat(i)/100*255):clamp_css_byte(parseInt(i))}function parse_css_float(i){return"%"===i[i.length-1]?clamp_css_float(parseFloat(i)/100):clamp_css_float(parseFloat(i))}function css_hue_to_rgb(i,o,s){return(s<0?s+=1:s>1&&(s-=1),6*s<1)?i+(o-i)*s*6:2*s<1?o:3*s<2?i+(o-i)*(2/3-s)*6:i}function parseCSSColor(i){var o=i.replace(/ /g,"").toLowerCase();if(o in s)return s[o].slice();if("#"===o[0]){if(4===o.length){var _=parseInt(o.substr(1),16);return _>=0&&_<=4095?[(3840&_)>>4|(3840&_)>>8,240&_|(240&_)>>4,15&_|(15&_)<<4,1]:null}if(7===o.length){var _=parseInt(o.substr(1),16);return _>=0&&_<=16777215?[(16711680&_)>>16,(65280&_)>>8,255&_,1]:null}return null}var F=o.indexOf("("),N=o.indexOf(")");if(-1!==F&&N+1===o.length){var j=o.substr(0,F),Z=o.substr(F+1,N-(F+1)).split(","),X=1;switch(j){case"rgba":if(4!==Z.length)break;X=parse_css_float(Z.pop());case"rgb":if(3!==Z.length)break;return[parse_css_int(Z[0]),parse_css_int(Z[1]),parse_css_int(Z[2]),X];case"hsla":if(4!==Z.length)break;X=parse_css_float(Z.pop());case"hsl":if(3!==Z.length)break;var $=(parseFloat(Z[0])%360+360)%360/360,ee=parse_css_float(Z[1]),et=parse_css_float(Z[2]),er=et<=.5?et*(ee+1):et+ee-et*ee,en=2*et-er;return[clamp_css_byte(255*css_hue_to_rgb(en,er,$+1/3)),clamp_css_byte(255*css_hue_to_rgb(en,er,$)),clamp_css_byte(255*css_hue_to_rgb(en,er,$-1/3)),X]}}return null}try{o.parseCSSColor=parseCSSColor}catch(i){}}).parseCSSColor,Color=function(i,o,s,_){void 0===_&&(_=1),this.r=i,this.g=o,this.b=s,this.a=_};Color.parse=function(i){if(i){if(i instanceof Color)return i;if("string"==typeof i){var o=eZ(i);if(o)return new Color(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3])}}},Color.prototype.toString=function(){var i=this.toArray();return"rgba("+Math.round(i[0])+","+Math.round(i[1])+","+Math.round(i[2])+","+i[3]+")"},Color.prototype.toArray=function(){var i=this.r,o=this.g,s=this.b,_=this.a;return 0===_?[0,0,0,0]:[255*i/_,255*o/_,255*s/_,_]},Color.black=new Color(0,0,0,1),Color.white=new Color(1,1,1,1),Color.transparent=new Color(0,0,0,0),Color.red=new Color(1,0,0,1);var Collator=function(i,o,s){i?this.sensitivity=o?"variant":"case":this.sensitivity=o?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Collator.prototype.compare=function(i,o){return this.collator.compare(i,o)},Collator.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var FormattedSection=function(i,o,s,_,F){this.text=i,this.image=o,this.scale=s,this.fontStack=_,this.textColor=F},Formatted=function(i){this.sections=i};Formatted.fromString=function(i){return new Formatted([new FormattedSection(i,null,null,null,null)])},Formatted.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(i){return 0!==i.text.length||i.image&&0!==i.image.name.length})},Formatted.factory=function(i){return i instanceof Formatted?i:Formatted.fromString(i)},Formatted.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(i){return i.text}).join("")},Formatted.prototype.serialize=function(){for(var i=["format"],o=0,s=this.sections;o<s.length;o+=1){var _=s[o];if(_.image){i.push(["image",_.image.name]);continue}i.push(_.text);var F={};_.fontStack&&(F["text-font"]=["literal",_.fontStack.split(",")]),_.scale&&(F["font-scale"]=_.scale),_.textColor&&(F["text-color"]=["rgba"].concat(_.textColor.toArray())),i.push(F)}return i};var ResolvedImage=function(i){this.name=i.name,this.available=i.available};function validateRGBA(i,o,s,_){return"number"==typeof i&&i>=0&&i<=255&&"number"==typeof o&&o>=0&&o<=255&&"number"==typeof s&&s>=0&&s<=255?void 0===_||"number"==typeof _&&_>=0&&_<=1?null:"Invalid rgba value ["+[i,o,s,_].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof _?[i,o,s,_]:[i,o,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function isValue(i){if(null===i||"string"==typeof i||"boolean"==typeof i||"number"==typeof i)return!0;if(i instanceof Color)return!0;if(i instanceof Collator)return!0;if(i instanceof Formatted)return!0;else if(i instanceof ResolvedImage)return!0;else if(Array.isArray(i)){for(var o=0;o<i.length;o+=1)if(!isValue(i[o]))return!1;return!0}else{if("object"!=typeof i)return!1;for(var s in i)if(!isValue(i[s]))return!1;return!0}}function typeOf(i){if(null===i)return eR;if("string"==typeof i)return eF;if("boolean"==typeof i)return ez;if("number"==typeof i)return eB;if(i instanceof Color)return eN;if(i instanceof Collator)return eU;if(i instanceof Formatted)return eH;if(i instanceof ResolvedImage)return eG;if(!Array.isArray(i))return ej;for(var o,s=i.length,_=0;_<i.length;_+=1){var F=typeOf(i[_]);if(o){if(o===F)continue;o=eV;break}o=F}return array(o||eV,s)}function toString$1(i){var o=typeof i;return null===i?"":"string"===o||"number"===o||"boolean"===o?String(i):i instanceof Color||i instanceof Formatted||i instanceof ResolvedImage?i.toString():JSON.stringify(i)}ResolvedImage.prototype.toString=function(){return this.name},ResolvedImage.fromString=function(i){return i?new ResolvedImage({name:i,available:!1}):null},ResolvedImage.prototype.serialize=function(){return["image",this.name]};var Literal=function(i,o){this.type=i,this.value=o};Literal.parse=function(i,o){if(2!==i.length)return o.error("'literal' expression requires exactly one argument, but found "+(i.length-1)+" instead.");if(!isValue(i[1]))return o.error("invalid value");var s=i[1],_=typeOf(s),F=o.expectedType;return"array"===_.kind&&0===_.N&&F&&"array"===F.kind&&("number"!=typeof F.N||0===F.N)&&(_=F),new Literal(_,s)},Literal.prototype.evaluate=function(){return this.value},Literal.prototype.eachChild=function(){},Literal.prototype.outputDefined=function(){return!0},Literal.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Color?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value};var RuntimeError=function(i){this.name="ExpressionEvaluationError",this.message=i};RuntimeError.prototype.toJSON=function(){return this.message};var eY={string:eF,number:eB,boolean:ez,object:ej},Assertion=function(i,o){this.type=i,this.args=o};Assertion.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var s=1,_=i[0];if("array"===_){if(i.length>2){var F,N,j,Z=i[1];if("string"!=typeof Z||!(Z in eY)||"object"===Z)return o.error('The item type argument of "array" must be one of string, number, boolean',1);N=eY[Z],s++}else N=eV;if(i.length>3){if(null!==i[2]&&("number"!=typeof i[2]||i[2]<0||i[2]!==Math.floor(i[2])))return o.error('The length argument to "array" must be a positive integer literal',2);j=i[2],s++}F=array(N,j)}else F=eY[_];for(var X=[];s<i.length;s++){var $=o.parse(i[s],s,eV);if(!$)return null;X.push($)}return new Assertion(F,X)},Assertion.prototype.evaluate=function(i){for(var o=0;o<this.args.length;o++){var s=this.args[o].evaluate(i);if(!checkSubtype(this.type,typeOf(s)))return s;if(o===this.args.length-1)throw new RuntimeError("Expected value to be of type "+toString(this.type)+", but found "+toString(typeOf(s))+" instead.")}return null},Assertion.prototype.eachChild=function(i){this.args.forEach(i)},Assertion.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},Assertion.prototype.serialize=function(){var i=this.type,o=[i.kind];if("array"===i.kind){var s=i.itemType;if("string"===s.kind||"number"===s.kind||"boolean"===s.kind){o.push(s.kind);var _=i.N;("number"==typeof _||this.args.length>1)&&o.push(_)}}return o.concat(this.args.map(function(i){return i.serialize()}))};var FormatExpression=function(i){this.type=eH,this.sections=i};FormatExpression.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var s=i[1];if(!Array.isArray(s)&&"object"==typeof s)return o.error("First argument must be an image or text section.");for(var _=[],F=!1,N=1;N<=i.length-1;++N){var j=i[N];if(F&&"object"==typeof j&&!Array.isArray(j)){F=!1;var Z=null;if(j["font-scale"]&&!(Z=o.parse(j["font-scale"],1,eB)))return null;var X=null;if(j["text-font"]&&!(X=o.parse(j["text-font"],1,array(eF))))return null;var $=null;if(j["text-color"]&&!($=o.parse(j["text-color"],1,eN)))return null;var ee=_[_.length-1];ee.scale=Z,ee.font=X,ee.textColor=$}else{var et=o.parse(i[N],1,eV);if(!et)return null;var er=et.type.kind;if("string"!==er&&"value"!==er&&"null"!==er&&"resolvedImage"!==er)return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");F=!0,_.push({content:et,scale:null,font:null,textColor:null})}}return new FormatExpression(_)},FormatExpression.prototype.evaluate=function(i){return new Formatted(this.sections.map(function(o){var s=o.content.evaluate(i);return typeOf(s)===eG?new FormattedSection("",s,null,null,null):new FormattedSection(toString$1(s),null,o.scale?o.scale.evaluate(i):null,o.font?o.font.evaluate(i).join(","):null,o.textColor?o.textColor.evaluate(i):null)}))},FormatExpression.prototype.eachChild=function(i){for(var o=0,s=this.sections;o<s.length;o+=1){var _=s[o];i(_.content),_.scale&&i(_.scale),_.font&&i(_.font),_.textColor&&i(_.textColor)}},FormatExpression.prototype.outputDefined=function(){return!1},FormatExpression.prototype.serialize=function(){for(var i=["format"],o=0,s=this.sections;o<s.length;o+=1){var _=s[o];i.push(_.content.serialize());var F={};_.scale&&(F["font-scale"]=_.scale.serialize()),_.font&&(F["text-font"]=_.font.serialize()),_.textColor&&(F["text-color"]=_.textColor.serialize()),i.push(F)}return i};var ImageExpression=function(i){this.type=eG,this.input=i};ImageExpression.parse=function(i,o){if(2!==i.length)return o.error("Expected two arguments.");var s=o.parse(i[1],1,eF);return s?new ImageExpression(s):o.error("No image name provided.")},ImageExpression.prototype.evaluate=function(i){var o=this.input.evaluate(i),s=ResolvedImage.fromString(o);return s&&i.availableImages&&(s.available=i.availableImages.indexOf(o)>-1),s},ImageExpression.prototype.eachChild=function(i){i(this.input)},ImageExpression.prototype.outputDefined=function(){return!1},ImageExpression.prototype.serialize=function(){return["image",this.input.serialize()]};var eX={"to-boolean":ez,"to-color":eN,"to-number":eB,"to-string":eF},Coercion=function(i,o){this.type=i,this.args=o};Coercion.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var s=i[0];if(("to-boolean"===s||"to-string"===s)&&2!==i.length)return o.error("Expected one argument.");for(var _=eX[s],F=[],N=1;N<i.length;N++){var j=o.parse(i[N],N,eV);if(!j)return null;F.push(j)}return new Coercion(_,F)},Coercion.prototype.evaluate=function(i){if("boolean"===this.type.kind)return!!this.args[0].evaluate(i);if("color"===this.type.kind){for(var o,s,_=0,F=this.args;_<F.length;_+=1){if(o=F[_].evaluate(i),s=null,o instanceof Color)return o;if("string"==typeof o){var N=i.parseColor(o);if(N)return N}else if(Array.isArray(o)&&!(s=o.length<3||o.length>4?"Invalid rbga value "+JSON.stringify(o)+": expected an array containing either three or four numeric values.":validateRGBA(o[0],o[1],o[2],o[3])))return new Color(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new RuntimeError(s||"Could not parse color from value '"+("string"==typeof o?o:String(JSON.stringify(o)))+"'")}if("number"===this.type.kind){for(var j=null,Z=0,X=this.args;Z<X.length;Z+=1){if(null===(j=X[Z].evaluate(i)))return 0;var $=Number(j);if(!isNaN($))return $}throw new RuntimeError("Could not convert "+JSON.stringify(j)+" to number.")}return"formatted"===this.type.kind?Formatted.fromString(toString$1(this.args[0].evaluate(i))):"resolvedImage"===this.type.kind?ResolvedImage.fromString(toString$1(this.args[0].evaluate(i))):toString$1(this.args[0].evaluate(i))},Coercion.prototype.eachChild=function(i){this.args.forEach(i)},Coercion.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},Coercion.prototype.serialize=function(){if("formatted"===this.type.kind)return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ImageExpression(this.args[0]).serialize();var i=["to-"+this.type.kind];return this.eachChild(function(o){i.push(o.serialize())}),i};var eK=["Unknown","Point","LineString","Polygon"],EvaluationContext=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};EvaluationContext.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},EvaluationContext.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?eK[this.feature.type]:this.feature.type:null},EvaluationContext.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},EvaluationContext.prototype.canonicalID=function(){return this.canonical},EvaluationContext.prototype.properties=function(){return this.feature&&this.feature.properties||{}},EvaluationContext.prototype.parseColor=function(i){var o=this._parseColorCache[i];return o||(o=this._parseColorCache[i]=Color.parse(i)),o};var CompoundExpression=function(i,o,s,_){this.name=i,this.type=o,this._evaluate=s,this.args=_};function stringifySignature(i){return Array.isArray(i)?"("+i.map(toString).join(", ")+")":"("+toString(i.type)+"...)"}CompoundExpression.prototype.evaluate=function(i){return this._evaluate(i,this.args)},CompoundExpression.prototype.eachChild=function(i){this.args.forEach(i)},CompoundExpression.prototype.outputDefined=function(){return!1},CompoundExpression.prototype.serialize=function(){return[this.name].concat(this.args.map(function(i){return i.serialize()}))},CompoundExpression.parse=function(i,o){var s,_=i[0],F=CompoundExpression.definitions[_];if(!F)return o.error('Unknown expression "'+_+'". If you wanted a literal array, use ["literal", [...]].',0);for(var N=Array.isArray(F)?F[0]:F.type,j=Array.isArray(F)?[[F[1],F[2]]]:F.overloads,Z=j.filter(function(o){var s=o[0];return!Array.isArray(s)||s.length===i.length-1}),X=null,$=0;$<Z.length;$+=1){var ee=Z[$],et=ee[0],er=ee[1];X=new ParsingContext(o.registry,o.path,null,o.scope);for(var en=[],ei=!1,eo=1;eo<i.length;eo++){var es=i[eo],el=Array.isArray(et)?et[eo-1]:et.type,ec=X.parse(es,1+en.length,el);if(!ec){ei=!0;break}en.push(ec)}if(!ei){if(Array.isArray(et)&&et.length!==en.length){X.error("Expected "+et.length+" arguments, but found "+en.length+" instead.");continue}for(var eu=0;eu<en.length;eu++){var ef=Array.isArray(et)?et[eu]:et.type,ed=en[eu];X.concat(eu+1).checkSubtype(ef,ed.type)}if(0===X.errors.length)return new CompoundExpression(_,N,er,en)}}if(1===Z.length)(s=o.errors).push.apply(s,X.errors);else{for(var eh=(Z.length?Z:j).map(function(i){return stringifySignature(i[0])}).join(" | "),ep=[],eg=1;eg<i.length;eg++){var em=o.parse(i[eg],1+ep.length);if(!em)return null;ep.push(toString(em.type))}o.error("Expected arguments of type "+eh+", but found ("+ep.join(", ")+") instead.")}return null},CompoundExpression.register=function(i,o){for(var s in CompoundExpression.definitions=o,o)i[s]=CompoundExpression};var CollatorExpression=function(i,o,s){this.type=eU,this.locale=s,this.caseSensitive=i,this.diacriticSensitive=o};function updateBBox(i,o){i[0]=Math.min(i[0],o[0]),i[1]=Math.min(i[1],o[1]),i[2]=Math.max(i[2],o[0]),i[3]=Math.max(i[3],o[1])}function mercatorXfromLng(i){return(180+i)/360}function mercatorYfromLat(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function boxWithinBox(i,o){return!(i[0]<=o[0])&&!(i[2]>=o[2])&&!(i[1]<=o[1])&&!(i[3]>=o[3])}function getTileCoordinates(i,o){var s=mercatorXfromLng(i[0]),_=mercatorYfromLat(i[1]),F=Math.pow(2,o.z);return[Math.round(s*F*8192),Math.round(_*F*8192)]}function onBoundary(i,o,s){var _=i[0]-o[0],F=i[1]-o[1],N=i[0]-s[0],j=i[1]-s[1];return _*j-N*F==0&&_*N<=0&&F*j<=0}function rayIntersect(i,o,s){return o[1]>i[1]!=s[1]>i[1]&&i[0]<(s[0]-o[0])*(i[1]-o[1])/(s[1]-o[1])+o[0]}function pointWithinPolygon(i,o){for(var s=!1,_=0,F=o.length;_<F;_++)for(var N=o[_],j=0,Z=N.length;j<Z-1;j++){if(onBoundary(i,N[j],N[j+1]))return!1;rayIntersect(i,N[j],N[j+1])&&(s=!s)}return s}function pointWithinPolygons(i,o){for(var s=0;s<o.length;s++)if(pointWithinPolygon(i,o[s]))return!0;return!1}function perp(i,o){return i[0]*o[1]-i[1]*o[0]}function twoSided(i,o,s,_){var F=i[0]-s[0],N=i[1]-s[1],j=o[0]-s[0],Z=o[1]-s[1],X=_[0]-s[0],$=_[1]-s[1],ee=F*$-X*N,et=j*$-X*Z;return ee>0&&et<0||ee<0&&et>0}function lineIntersectLine(i,o,s,_){var F=[o[0]-i[0],o[1]-i[1]];return 0!==perp([_[0]-s[0],_[1]-s[1]],F)&&!!(twoSided(i,o,s,_)&&twoSided(s,_,i,o))}function lineIntersectPolygon(i,o,s){for(var _=0;_<s.length;_+=1)for(var F=s[_],N=0;N<F.length-1;++N)if(lineIntersectLine(i,o,F[N],F[N+1]))return!0;return!1}function lineStringWithinPolygon(i,o){for(var s=0;s<i.length;++s)if(!pointWithinPolygon(i[s],o))return!1;for(var _=0;_<i.length-1;++_)if(lineIntersectPolygon(i[_],i[_+1],o))return!1;return!0}function lineStringWithinPolygons(i,o){for(var s=0;s<o.length;s++)if(lineStringWithinPolygon(i,o[s]))return!0;return!1}function getTilePolygon(i,o,s){for(var _=[],F=0;F<i.length;F++){for(var N=[],j=0;j<i[F].length;j++){var Z=getTileCoordinates(i[F][j],s);updateBBox(o,Z),N.push(Z)}_.push(N)}return _}function getTilePolygons(i,o,s){for(var _=[],F=0;F<i.length;F++){var N=getTilePolygon(i[F],o,s);_.push(N)}return _}function updatePoint(i,o,s,_){if(i[0]<s[0]||i[0]>s[2]){var F=.5*_,N=i[0]-s[0]>F?-_:s[0]-i[0]>F?_:0;0===N&&(N=i[0]-s[2]>F?-_:s[2]-i[0]>F?_:0),i[0]+=N}updateBBox(o,i)}function resetBBox(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function getTilePoints(i,o,s,_){for(var F=8192*Math.pow(2,_.z),N=[8192*_.x,8192*_.y],j=[],Z=0;Z<i.length;Z+=1)for(var X=i[Z],$=0;$<X.length;$+=1){var ee=X[$],et=[ee.x+N[0],ee.y+N[1]];updatePoint(et,o,s,F),j.push(et)}return j}function getTileLines(i,o,s,_){for(var F=8192*Math.pow(2,_.z),N=[8192*_.x,8192*_.y],j=[],Z=0;Z<i.length;Z+=1){for(var X=i[Z],$=[],ee=0;ee<X.length;ee+=1){var et=X[ee],er=[et.x+N[0],et.y+N[1]];updateBBox(o,er),$.push(er)}j.push($)}if(o[2]-o[0]<=F/2){resetBBox(o);for(var en=0;en<j.length;en+=1)for(var ei=j[en],eo=0;eo<ei.length;eo+=1)updatePoint(ei[eo],o,s,F)}return j}function pointsWithinPolygons(i,o){var s=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],F=i.canonicalID();if("Polygon"===o.type){var N=getTilePolygon(o.coordinates,_,F),j=getTilePoints(i.geometry(),s,_,F);if(!boxWithinBox(s,_))return!1;for(var Z=0;Z<j.length;Z+=1)if(!pointWithinPolygon(j[Z],N))return!1}if("MultiPolygon"===o.type){var X=getTilePolygons(o.coordinates,_,F),$=getTilePoints(i.geometry(),s,_,F);if(!boxWithinBox(s,_))return!1;for(var ee=0;ee<$.length;ee+=1)if(!pointWithinPolygons($[ee],X))return!1}return!0}function linesWithinPolygons(i,o){var s=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],F=i.canonicalID();if("Polygon"===o.type){var N=getTilePolygon(o.coordinates,_,F),j=getTileLines(i.geometry(),s,_,F);if(!boxWithinBox(s,_))return!1;for(var Z=0;Z<j.length;Z+=1)if(!lineStringWithinPolygon(j[Z],N))return!1}if("MultiPolygon"===o.type){var X=getTilePolygons(o.coordinates,_,F),$=getTileLines(i.geometry(),s,_,F);if(!boxWithinBox(s,_))return!1;for(var ee=0;ee<$.length;ee+=1)if(!lineStringWithinPolygons($[ee],X))return!1}return!0}CollatorExpression.parse=function(i,o){if(2!==i.length)return o.error("Expected one argument.");var s=i[1];if("object"!=typeof s||Array.isArray(s))return o.error("Collator options argument must be an object.");var _=o.parse(void 0!==s["case-sensitive"]&&s["case-sensitive"],1,ez);if(!_)return null;var F=o.parse(void 0!==s["diacritic-sensitive"]&&s["diacritic-sensitive"],1,ez);if(!F)return null;var N=null;return!s.locale||(N=o.parse(s.locale,1,eF))?new CollatorExpression(_,F,N):null},CollatorExpression.prototype.evaluate=function(i){return new Collator(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)},CollatorExpression.prototype.eachChild=function(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)},CollatorExpression.prototype.outputDefined=function(){return!1},CollatorExpression.prototype.serialize=function(){var i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]};var Within=function(i,o){this.type=ez,this.geojson=i,this.geometries=o};function isFeatureConstant(i){if(i instanceof CompoundExpression){if("get"===i.name&&1===i.args.length||"feature-state"===i.name)return!1;if("has"===i.name&&1===i.args.length)return!1;if("properties"===i.name||"geometry-type"===i.name||"id"===i.name)return!1;else if(/^filter-/.test(i.name))return!1}if(i instanceof Within)return!1;var o=!0;return i.eachChild(function(i){o&&!isFeatureConstant(i)&&(o=!1)}),o}function isStateConstant(i){if(i instanceof CompoundExpression&&"feature-state"===i.name)return!1;var o=!0;return i.eachChild(function(i){o&&!isStateConstant(i)&&(o=!1)}),o}function isGlobalPropertyConstant(i,o){if(i instanceof CompoundExpression&&o.indexOf(i.name)>=0)return!1;var s=!0;return i.eachChild(function(i){s&&!isGlobalPropertyConstant(i,o)&&(s=!1)}),s}Within.parse=function(i,o){if(2!==i.length)return o.error("'within' expression requires exactly one argument, but found "+(i.length-1)+" instead.");if(isValue(i[1])){var s=i[1];if("FeatureCollection"===s.type)for(var _=0;_<s.features.length;++_){var F=s.features[_].geometry.type;if("Polygon"===F||"MultiPolygon"===F)return new Within(s,s.features[_].geometry)}else if("Feature"===s.type){var N=s.geometry.type;if("Polygon"===N||"MultiPolygon"===N)return new Within(s,s.geometry)}else if("Polygon"===s.type||"MultiPolygon"===s.type)return new Within(s,s)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Within.prototype.evaluate=function(i){if(null!=i.geometry()&&null!=i.canonicalID()){if("Point"===i.geometryType())return pointsWithinPolygons(i,this.geometries);if("LineString"===i.geometryType())return linesWithinPolygons(i,this.geometries)}return!1},Within.prototype.eachChild=function(){},Within.prototype.outputDefined=function(){return!0},Within.prototype.serialize=function(){return["within",this.geojson]};var Var=function(i,o){this.type=o.type,this.name=i,this.boundExpression=o};Var.parse=function(i,o){if(2!==i.length||"string"!=typeof i[1])return o.error("'var' expression requires exactly one string literal argument.");var s=i[1];return o.scope.has(s)?new Var(s,o.scope.get(s)):o.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},Var.prototype.evaluate=function(i){return this.boundExpression.evaluate(i)},Var.prototype.eachChild=function(){},Var.prototype.outputDefined=function(){return!1},Var.prototype.serialize=function(){return["var",this.name]};var ParsingContext=function(i,o,s,_,F){void 0===o&&(o=[]),void 0===_&&(_=new Scope),void 0===F&&(F=[]),this.registry=i,this.path=o,this.key=o.map(function(i){return"["+i+"]"}).join(""),this.scope=_,this.errors=F,this.expectedType=s};function isConstant(i){if(i instanceof Var)return isConstant(i.boundExpression);if(i instanceof CompoundExpression&&"error"===i.name||i instanceof CollatorExpression||i instanceof Within)return!1;var o=i instanceof Coercion||i instanceof Assertion,s=!0;return i.eachChild(function(i){s=o?s&&isConstant(i):s&&i instanceof Literal}),!!s&&isFeatureConstant(i)&&isGlobalPropertyConstant(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function findStopLessThanOrEqualTo(i,o){for(var s,_,F=i.length-1,N=0,j=F,Z=0;N<=j;)if(s=i[Z=Math.floor((N+j)/2)],_=i[Z+1],s<=o){if(Z===F||o<_)return Z;N=Z+1}else if(s>o)j=Z-1;else throw new RuntimeError("Input is not a number.");return 0}ParsingContext.prototype.parse=function(i,o,s,_,F){return(void 0===F&&(F={}),o)?this.concat(o,s,_)._parse(i,F):this._parse(i,F)},ParsingContext.prototype._parse=function(i,o){function annotate(i,o,s){return"assert"===s?new Assertion(o,[i]):"coerce"===s?new Coercion(o,[i]):i}if((null===i||"string"==typeof i||"boolean"==typeof i||"number"==typeof i)&&(i=["literal",i]),Array.isArray(i)){if(0===i.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var s=i[0];if("string"!=typeof s)return this.error("Expression name must be a string, but found "+typeof s+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var _=this.registry[s];if(_){var F=_.parse(i,this);if(!F)return null;if(this.expectedType){var N=this.expectedType,j=F.type;if(("string"===N.kind||"number"===N.kind||"boolean"===N.kind||"object"===N.kind||"array"===N.kind)&&"value"===j.kind)F=annotate(F,N,o.typeAnnotation||"assert");else if(("color"===N.kind||"formatted"===N.kind||"resolvedImage"===N.kind)&&("value"===j.kind||"string"===j.kind))F=annotate(F,N,o.typeAnnotation||"coerce");else if(this.checkSubtype(N,j))return null}if(!(F instanceof Literal)&&"resolvedImage"!==F.type.kind&&isConstant(F)){var Z=new EvaluationContext;try{F=new Literal(F.type,F.evaluate(Z))}catch(i){return this.error(i.message),null}}return F}return this.error('Unknown expression "'+s+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===i?this.error("'undefined' value invalid. Use null instead."):"object"==typeof i?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof i+" instead.")},ParsingContext.prototype.concat=function(i,o,s){var _="number"==typeof i?this.path.concat(i):this.path,F=s?this.scope.concat(s):this.scope;return new ParsingContext(this.registry,_,o||null,F,this.errors)},ParsingContext.prototype.error=function(i){for(var o=[],s=arguments.length-1;s-- >0;)o[s]=arguments[s+1];var _=""+this.key+o.map(function(i){return"["+i+"]"}).join("");this.errors.push(new eD(_,i))},ParsingContext.prototype.checkSubtype=function(i,o){var s=checkSubtype(i,o);return s&&this.error(s),s};var Step=function(i,o,s){this.type=i,this.input=o,this.labels=[],this.outputs=[];for(var _=0;_<s.length;_+=1){var F=s[_],N=F[0],j=F[1];this.labels.push(N),this.outputs.push(j)}};function number(i,o,s){return i*(1-s)+o*s}function color(i,o,s){return new Color(number(i.r,o.r,s),number(i.g,o.g,s),number(i.b,o.b,s),number(i.a,o.a,s))}function array$1(i,o,s){return i.map(function(i,_){return number(i,o[_],s)})}Step.parse=function(i,o){if(i.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");var s=o.parse(i[1],1,eB);if(!s)return null;var _=[],F=null;o.expectedType&&"value"!==o.expectedType.kind&&(F=o.expectedType);for(var N=1;N<i.length;N+=2){var j=1===N?-1/0:i[N],Z=i[N+1],X=N,$=N+1;if("number"!=typeof j)return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(_.length&&_[_.length-1][0]>=j)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',X);var ee=o.parse(Z,$,F);if(!ee)return null;F=F||ee.type,_.push([j,ee])}return new Step(F,s,_)},Step.prototype.evaluate=function(i){var o=this.labels,s=this.outputs;if(1===o.length)return s[0].evaluate(i);var _=this.input.evaluate(i);if(_<=o[0])return s[0].evaluate(i);var F=o.length;return _>=o[F-1]?s[F-1].evaluate(i):s[findStopLessThanOrEqualTo(o,_)].evaluate(i)},Step.prototype.eachChild=function(i){i(this.input);for(var o=0,s=this.outputs;o<s.length;o+=1)i(s[o])},Step.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})},Step.prototype.serialize=function(){for(var i=["step",this.input.serialize()],o=0;o<this.labels.length;o++)o>0&&i.push(this.labels[o]),i.push(this.outputs[o].serialize());return i};var eJ=Object.freeze({__proto__:null,number:number,color:color,array:array$1}),e$=4/29,eQ=6/29,e0=3*(6/29)*(6/29),e1=6/29*(6/29)*(6/29),e2=Math.PI/180,e3=180/Math.PI;function xyz2lab(i){return i>e1?Math.pow(i,1/3):i/e0+e$}function lab2xyz(i){return i>eQ?i*i*i:e0*(i-e$)}function xyz2rgb(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function rgb2xyz(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function rgbToLab(i){var o=rgb2xyz(i.r),s=rgb2xyz(i.g),_=rgb2xyz(i.b),F=xyz2lab((.4124564*o+.3575761*s+.1804375*_)/.95047),N=xyz2lab((.2126729*o+.7151522*s+.072175*_)/1);return{l:116*N-16,a:500*(F-N),b:200*(N-xyz2lab((.0193339*o+.119192*s+.9503041*_)/1.08883)),alpha:i.a}}function labToRgb(i){var o=(i.l+16)/116,s=isNaN(i.a)?o:o+i.a/500,_=isNaN(i.b)?o:o-i.b/200;return o=1*lab2xyz(o),new Color(xyz2rgb(3.2404542*(s=.95047*lab2xyz(s))-1.5371385*o-.4985314*(_=1.08883*lab2xyz(_))),xyz2rgb(-.969266*s+1.8760108*o+.041556*_),xyz2rgb(.0556434*s-.2040259*o+1.0572252*_),i.alpha)}function rgbToHcl(i){var o=rgbToLab(i),s=o.l,_=o.a,F=o.b,N=Math.atan2(F,_)*e3;return{h:N<0?N+360:N,c:Math.sqrt(_*_+F*F),l:s,alpha:i.a}}function hclToRgb(i){var o=i.h*e2,s=i.c;return labToRgb({l:i.l,a:Math.cos(o)*s,b:Math.sin(o)*s,alpha:i.alpha})}function interpolateHue(i,o,s){var _=o-i;return i+s*(_>180||_<-180?_-360*Math.round(_/360):_)}var e5={forward:rgbToLab,reverse:labToRgb,interpolate:function(i,o,s){return{l:number(i.l,o.l,s),a:number(i.a,o.a,s),b:number(i.b,o.b,s),alpha:number(i.alpha,o.alpha,s)}}},e4={forward:rgbToHcl,reverse:hclToRgb,interpolate:function(i,o,s){return{h:interpolateHue(i.h,o.h,s),c:number(i.c,o.c,s),l:number(i.l,o.l,s),alpha:number(i.alpha,o.alpha,s)}}},e6=Object.freeze({__proto__:null,lab:e5,hcl:e4}),Interpolate=function(i,o,s,_,F){this.type=i,this.operator=o,this.interpolation=s,this.input=_,this.labels=[],this.outputs=[];for(var N=0;N<F.length;N+=1){var j=F[N],Z=j[0],X=j[1];this.labels.push(Z),this.outputs.push(X)}};function exponentialInterpolation(i,o,s,_){var F=_-s,N=i-s;return 0===F?0:1===o?N/F:(Math.pow(o,N)-1)/(Math.pow(o,F)-1)}Interpolate.interpolationFactor=function(i,o,s,_){var F=0;if("exponential"===i.name)F=exponentialInterpolation(o,i.base,s,_);else if("linear"===i.name)F=exponentialInterpolation(o,1,s,_);else if("cubic-bezier"===i.name){var N=i.controlPoints;F=new et(N[0],N[1],N[2],N[3]).solve(exponentialInterpolation(o,1,s,_))}return F},Interpolate.parse=function(i,o){var s=i[0],_=i[1],F=i[2],N=i.slice(3);if(!Array.isArray(_)||0===_.length)return o.error("Expected an interpolation type expression.",1);if("linear"===_[0])_={name:"linear"};else if("exponential"===_[0]){var j=_[1];if("number"!=typeof j)return o.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:j}}else{if("cubic-bezier"!==_[0])return o.error("Unknown interpolation type "+String(_[0]),1,0);var Z=_.slice(1);if(4!==Z.length||Z.some(function(i){return"number"!=typeof i||i<0||i>1}))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:Z}}if(i.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(!(F=o.parse(F,2,eB)))return null;var X=[],$=null;"interpolate-hcl"===s||"interpolate-lab"===s?$=eN:o.expectedType&&"value"!==o.expectedType.kind&&($=o.expectedType);for(var ee=0;ee<N.length;ee+=2){var et=N[ee],er=N[ee+1],en=ee+3,ei=ee+4;if("number"!=typeof et)return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',en);if(X.length&&X[X.length-1][0]>=et)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',en);var eo=o.parse(er,ei,$);if(!eo)return null;$=$||eo.type,X.push([et,eo])}return"number"===$.kind||"color"===$.kind||"array"===$.kind&&"number"===$.itemType.kind&&"number"==typeof $.N?new Interpolate($,s,_,F,X):o.error("Type "+toString($)+" is not interpolatable.")},Interpolate.prototype.evaluate=function(i){var o=this.labels,s=this.outputs;if(1===o.length)return s[0].evaluate(i);var _=this.input.evaluate(i);if(_<=o[0])return s[0].evaluate(i);var F=o.length;if(_>=o[F-1])return s[F-1].evaluate(i);var N=findStopLessThanOrEqualTo(o,_),j=o[N],Z=o[N+1],X=Interpolate.interpolationFactor(this.interpolation,_,j,Z),$=s[N].evaluate(i),ee=s[N+1].evaluate(i);return"interpolate"===this.operator?eJ[this.type.kind.toLowerCase()]($,ee,X):"interpolate-hcl"===this.operator?e4.reverse(e4.interpolate(e4.forward($),e4.forward(ee),X)):e5.reverse(e5.interpolate(e5.forward($),e5.forward(ee),X))},Interpolate.prototype.eachChild=function(i){i(this.input);for(var o=0,s=this.outputs;o<s.length;o+=1)i(s[o])},Interpolate.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})},Interpolate.prototype.serialize=function(){i="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i,o=[this.operator,i,this.input.serialize()],s=0;s<this.labels.length;s++)o.push(this.labels[s],this.outputs[s].serialize());return o};var Coalesce=function(i,o){this.type=i,this.args=o};Coalesce.parse=function(i,o){if(i.length<2)return o.error("Expectected at least one argument.");var s=null,_=o.expectedType;_&&"value"!==_.kind&&(s=_);for(var F=[],N=0,j=i.slice(1);N<j.length;N+=1){var Z=j[N],X=o.parse(Z,1+F.length,s,void 0,{typeAnnotation:"omit"});if(!X)return null;s=s||X.type,F.push(X)}return _&&F.some(function(i){return checkSubtype(_,i.type)})?new Coalesce(eV,F):new Coalesce(s,F)},Coalesce.prototype.evaluate=function(i){for(var o,s=null,_=0,F=0,N=this.args;F<N.length;F+=1){var j=N[F];if(_++,(s=j.evaluate(i))&&s instanceof ResolvedImage&&!s.available&&(o||(o=s.name),s=null,_===this.args.length&&(s=o)),null!==s)break}return s},Coalesce.prototype.eachChild=function(i){this.args.forEach(i)},Coalesce.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},Coalesce.prototype.serialize=function(){var i=["coalesce"];return this.eachChild(function(o){i.push(o.serialize())}),i};var Let=function(i,o){this.type=o.type,this.bindings=[].concat(i),this.result=o};Let.prototype.evaluate=function(i){return this.result.evaluate(i)},Let.prototype.eachChild=function(i){for(var o=0,s=this.bindings;o<s.length;o+=1)i(s[o][1]);i(this.result)},Let.parse=function(i,o){if(i.length<4)return o.error("Expected at least 3 arguments, but found "+(i.length-1)+" instead.");for(var s=[],_=1;_<i.length-1;_+=2){var F=i[_];if("string"!=typeof F)return o.error("Expected string, but found "+typeof F+" instead.",_);if(/[^a-zA-Z0-9_]/.test(F))return o.error("Variable names must contain only alphanumeric characters or '_'.",_);var N=o.parse(i[_+1],_+1);if(!N)return null;s.push([F,N])}var j=o.parse(i[i.length-1],i.length-1,o.expectedType,s);return j?new Let(s,j):null},Let.prototype.outputDefined=function(){return this.result.outputDefined()},Let.prototype.serialize=function(){for(var i=["let"],o=0,s=this.bindings;o<s.length;o+=1){var _=s[o],F=_[0],N=_[1];i.push(F,N.serialize())}return i.push(this.result.serialize()),i};var At=function(i,o,s){this.type=i,this.index=o,this.input=s};At.parse=function(i,o){if(3!==i.length)return o.error("Expected 2 arguments, but found "+(i.length-1)+" instead.");var s=o.parse(i[1],1,eB),_=o.parse(i[2],2,array(o.expectedType||eV));return s&&_?new At(_.type.itemType,s,_):null},At.prototype.evaluate=function(i){var o=this.index.evaluate(i),s=this.input.evaluate(i);if(o<0)throw new RuntimeError("Array index out of bounds: "+o+" < 0.");if(o>=s.length)throw new RuntimeError("Array index out of bounds: "+o+" > "+(s.length-1)+".");if(o!==Math.floor(o))throw new RuntimeError("Array index must be an integer, but found "+o+" instead.");return s[o]},At.prototype.eachChild=function(i){i(this.index),i(this.input)},At.prototype.outputDefined=function(){return!1},At.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var In=function(i,o){this.type=ez,this.needle=i,this.haystack=o};In.parse=function(i,o){if(3!==i.length)return o.error("Expected 2 arguments, but found "+(i.length-1)+" instead.");var s=o.parse(i[1],1,eV),_=o.parse(i[2],2,eV);return s&&_?isValidType(s.type,[ez,eF,eB,eR,eV])?new In(s,_):o.error("Expected first argument to be of type boolean, string, number or null, but found "+toString(s.type)+" instead"):null},In.prototype.evaluate=function(i){var o=this.needle.evaluate(i),s=this.haystack.evaluate(i);if(!s)return!1;if(!isValidNativeType(o,["boolean","string","number","null"]))throw new RuntimeError("Expected first argument to be of type boolean, string, number or null, but found "+toString(typeOf(o))+" instead.");if(!isValidNativeType(s,["string","array"]))throw new RuntimeError("Expected second argument to be of type array or string, but found "+toString(typeOf(s))+" instead.");return s.indexOf(o)>=0},In.prototype.eachChild=function(i){i(this.needle),i(this.haystack)},In.prototype.outputDefined=function(){return!0},In.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var IndexOf=function(i,o,s){this.type=eB,this.needle=i,this.haystack=o,this.fromIndex=s};IndexOf.parse=function(i,o){if(i.length<=2||i.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(i.length-1)+" instead.");var s=o.parse(i[1],1,eV),_=o.parse(i[2],2,eV);if(!s||!_)return null;if(!isValidType(s.type,[ez,eF,eB,eR,eV]))return o.error("Expected first argument to be of type boolean, string, number or null, but found "+toString(s.type)+" instead");if(4!==i.length)return new IndexOf(s,_);var F=o.parse(i[3],3,eB);return F?new IndexOf(s,_,F):null},IndexOf.prototype.evaluate=function(i){var o=this.needle.evaluate(i),s=this.haystack.evaluate(i);if(!isValidNativeType(o,["boolean","string","number","null"]))throw new RuntimeError("Expected first argument to be of type boolean, string, number or null, but found "+toString(typeOf(o))+" instead.");if(!isValidNativeType(s,["string","array"]))throw new RuntimeError("Expected second argument to be of type array or string, but found "+toString(typeOf(s))+" instead.");if(this.fromIndex){var _=this.fromIndex.evaluate(i);return s.indexOf(o,_)}return s.indexOf(o)},IndexOf.prototype.eachChild=function(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)},IndexOf.prototype.outputDefined=function(){return!1},IndexOf.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Match=function(i,o,s,_,F,N){this.inputType=i,this.type=o,this.input=s,this.cases=_,this.outputs=F,this.otherwise=N};Match.parse=function(i,o){if(i.length<5)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if(i.length%2!=1)return o.error("Expected an even number of arguments.");o.expectedType&&"value"!==o.expectedType.kind&&(_=o.expectedType);for(var s,_,F={},N=[],j=2;j<i.length-1;j+=2){var Z=i[j],X=i[j+1];Array.isArray(Z)||(Z=[Z]);var $=o.concat(j);if(0===Z.length)return $.error("Expected at least one branch label.");for(var ee=0,et=Z;ee<et.length;ee+=1){var er=et[ee];if("number"!=typeof er&&"string"!=typeof er)return $.error("Branch labels must be numbers or strings.");if("number"==typeof er&&Math.abs(er)>Number.MAX_SAFE_INTEGER)return $.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof er&&Math.floor(er)!==er)return $.error("Numeric branch labels must be integer values.");if(s){if($.checkSubtype(s,typeOf(er)))return null}else s=typeOf(er);if(void 0!==F[String(er)])return $.error("Branch labels must be unique.");F[String(er)]=N.length}var en=o.parse(X,j,_);if(!en)return null;_=_||en.type,N.push(en)}var ei=o.parse(i[1],1,eV);if(!ei)return null;var eo=o.parse(i[i.length-1],i.length-1,_);return!eo||"value"!==ei.type.kind&&o.concat(1).checkSubtype(s,ei.type)?null:new Match(s,_,ei,F,N,eo)},Match.prototype.evaluate=function(i){var o=this.input.evaluate(i);return(typeOf(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(i)},Match.prototype.eachChild=function(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)},Match.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})&&this.otherwise.outputDefined()},Match.prototype.serialize=function(){for(var i=this,o=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),_=[],F={},N=0;N<s.length;N+=1){var j=s[N],Z=F[this.cases[j]];void 0===Z?(F[this.cases[j]]=_.length,_.push([this.cases[j],[j]])):_[Z][1].push(j)}for(var coerceLabel=function(o){return"number"===i.inputType.kind?Number(o):o},X=0;X<_.length;X+=1){var $=_[X],Z=$[0],ee=$[1];1===ee.length?o.push(coerceLabel(ee[0])):o.push(ee.map(coerceLabel)),o.push(this.outputs[outputIndex$1].serialize())}return o.push(this.otherwise.serialize()),o};var Case=function(i,o,s){this.type=i,this.branches=o,this.otherwise=s};Case.parse=function(i,o){if(i.length<4)return o.error("Expected at least 3 arguments, but found only "+(i.length-1)+".");if(i.length%2!=0)return o.error("Expected an odd number of arguments.");o.expectedType&&"value"!==o.expectedType.kind&&(s=o.expectedType);for(var s,_=[],F=1;F<i.length-1;F+=2){var N=o.parse(i[F],F,ez);if(!N)return null;var j=o.parse(i[F+1],F+1,s);if(!j)return null;_.push([N,j]),s=s||j.type}var Z=o.parse(i[i.length-1],i.length-1,s);return Z?new Case(s,_,Z):null},Case.prototype.evaluate=function(i){for(var o=0,s=this.branches;o<s.length;o+=1){var _=s[o],F=_[0],N=_[1];if(F.evaluate(i))return N.evaluate(i)}return this.otherwise.evaluate(i)},Case.prototype.eachChild=function(i){for(var o=0,s=this.branches;o<s.length;o+=1){var _=s[o],F=_[0],N=_[1];i(F),i(N)}i(this.otherwise)},Case.prototype.outputDefined=function(){return this.branches.every(function(i){return i[0],i[1].outputDefined()})&&this.otherwise.outputDefined()},Case.prototype.serialize=function(){var i=["case"];return this.eachChild(function(o){i.push(o.serialize())}),i};var Slice=function(i,o,s,_){this.type=i,this.input=o,this.beginIndex=s,this.endIndex=_};function isComparableType(i,o){return"=="===i||"!="===i?"boolean"===o.kind||"string"===o.kind||"number"===o.kind||"null"===o.kind||"value"===o.kind:"string"===o.kind||"number"===o.kind||"value"===o.kind}function neq(i,o,s){return o!==s}function lt(i,o,s){return o<s}function gt(i,o,s){return o>s}function lteq(i,o,s){return o<=s}function gteq(i,o,s){return o>=s}function eqCollate(i,o,s,_){return 0===_.compare(o,s)}function neqCollate(i,o,s,_){return!eqCollate(i,o,s,_)}function ltCollate(i,o,s,_){return 0>_.compare(o,s)}function gtCollate(i,o,s,_){return _.compare(o,s)>0}function lteqCollate(i,o,s,_){return 0>=_.compare(o,s)}function gteqCollate(i,o,s,_){return _.compare(o,s)>=0}function makeComparison(i,o,s){var _="=="!==i&&"!="!==i;return function(){function Comparison(i,o,s){this.type=ez,this.lhs=i,this.rhs=o,this.collator=s,this.hasUntypedArgument="value"===i.type.kind||"value"===o.type.kind}return Comparison.parse=function(i,o){if(3!==i.length&&4!==i.length)return o.error("Expected two or three arguments.");var s=i[0],F=o.parse(i[1],1,eV);if(!F)return null;if(!isComparableType(s,F.type))return o.concat(1).error('"'+s+"\" comparisons are not supported for type '"+toString(F.type)+"'.");var N=o.parse(i[2],2,eV);if(!N)return null;if(!isComparableType(s,N.type))return o.concat(2).error('"'+s+"\" comparisons are not supported for type '"+toString(N.type)+"'.");if(F.type.kind!==N.type.kind&&"value"!==F.type.kind&&"value"!==N.type.kind)return o.error("Cannot compare types '"+toString(F.type)+"' and '"+toString(N.type)+"'.");_&&("value"===F.type.kind&&"value"!==N.type.kind?F=new Assertion(N.type,[F]):"value"!==F.type.kind&&"value"===N.type.kind&&(N=new Assertion(F.type,[N])));var j=null;if(4===i.length){if("string"!==F.type.kind&&"string"!==N.type.kind&&"value"!==F.type.kind&&"value"!==N.type.kind)return o.error("Cannot use collator to compare non-string types.");if(!(j=o.parse(i[3],3,eU)))return null}return new Comparison(F,N,j)},Comparison.prototype.evaluate=function(F){var N=this.lhs.evaluate(F),j=this.rhs.evaluate(F);if(_&&this.hasUntypedArgument){var Z=typeOf(N),X=typeOf(j);if(Z.kind!==X.kind||!("string"===Z.kind||"number"===Z.kind))throw new RuntimeError('Expected arguments for "'+i+'" to be (string, string) or (number, number), but found ('+Z.kind+", "+X.kind+") instead.")}if(this.collator&&!_&&this.hasUntypedArgument){var $=typeOf(N),ee=typeOf(j);if("string"!==$.kind||"string"!==ee.kind)return o(F,N,j)}return this.collator?s(F,N,j,this.collator.evaluate(F)):o(F,N,j)},Comparison.prototype.eachChild=function(i){i(this.lhs),i(this.rhs),this.collator&&i(this.collator)},Comparison.prototype.outputDefined=function(){return!0},Comparison.prototype.serialize=function(){var o=[i];return this.eachChild(function(i){o.push(i.serialize())}),o},Comparison}()}Slice.parse=function(i,o){if(i.length<=2||i.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(i.length-1)+" instead.");var s=o.parse(i[1],1,eV),_=o.parse(i[2],2,eB);if(!s||!_)return null;if(!isValidType(s.type,[array(eV),eF,eV]))return o.error("Expected first argument to be of type array or string, but found "+toString(s.type)+" instead");if(4!==i.length)return new Slice(s.type,s,_);var F=o.parse(i[3],3,eB);return F?new Slice(s.type,s,_,F):null},Slice.prototype.evaluate=function(i){var o=this.input.evaluate(i),s=this.beginIndex.evaluate(i);if(!isValidNativeType(o,["string","array"]))throw new RuntimeError("Expected first argument to be of type array or string, but found "+toString(typeOf(o))+" instead.");if(this.endIndex){var _=this.endIndex.evaluate(i);return o.slice(s,_)}return o.slice(s)},Slice.prototype.eachChild=function(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)},Slice.prototype.outputDefined=function(){return!1},Slice.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var e8=makeComparison("==",function(i,o,s){return o===s},eqCollate),e7=makeComparison("!=",neq,neqCollate),e9=makeComparison("<",lt,ltCollate),te=makeComparison(">",gt,gtCollate),tt=makeComparison("<=",lteq,lteqCollate),tr=makeComparison(">=",gteq,gteqCollate),NumberFormat=function(i,o,s,_,F){this.type=eF,this.number=i,this.locale=o,this.currency=s,this.minFractionDigits=_,this.maxFractionDigits=F};NumberFormat.parse=function(i,o){if(3!==i.length)return o.error("Expected two arguments.");var s=o.parse(i[1],1,eB);if(!s)return null;var _=i[2];if("object"!=typeof _||Array.isArray(_))return o.error("NumberFormat options argument must be an object.");var F=null;if(_.locale&&!(F=o.parse(_.locale,1,eF)))return null;var N=null;if(_.currency&&!(N=o.parse(_.currency,1,eF)))return null;var j=null;if(_["min-fraction-digits"]&&!(j=o.parse(_["min-fraction-digits"],1,eB)))return null;var Z=null;return!_["max-fraction-digits"]||(Z=o.parse(_["max-fraction-digits"],1,eB))?new NumberFormat(s,F,N,j,Z):null},NumberFormat.prototype.evaluate=function(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))},NumberFormat.prototype.eachChild=function(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)},NumberFormat.prototype.outputDefined=function(){return!1},NumberFormat.prototype.serialize=function(){var i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]};var Length=function(i){this.type=eB,this.input=i};Length.parse=function(i,o){if(2!==i.length)return o.error("Expected 1 argument, but found "+(i.length-1)+" instead.");var s=o.parse(i[1],1);return s?"array"!==s.type.kind&&"string"!==s.type.kind&&"value"!==s.type.kind?o.error("Expected argument of type string or array, but found "+toString(s.type)+" instead."):new Length(s):null},Length.prototype.evaluate=function(i){var o=this.input.evaluate(i);if("string"==typeof o||Array.isArray(o))return o.length;throw new RuntimeError("Expected value to be of type string or array, but found "+toString(typeOf(o))+" instead.")},Length.prototype.eachChild=function(i){i(this.input)},Length.prototype.outputDefined=function(){return!1},Length.prototype.serialize=function(){var i=["length"];return this.eachChild(function(o){i.push(o.serialize())}),i};var tn={"==":e8,"!=":e7,">":te,"<":e9,">=":tr,"<=":tt,array:Assertion,at:At,boolean:Assertion,case:Case,coalesce:Coalesce,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In,"index-of":IndexOf,interpolate:Interpolate,"interpolate-hcl":Interpolate,"interpolate-lab":Interpolate,length:Length,let:Let,literal:Literal,match:Match,number:Assertion,"number-format":NumberFormat,object:Assertion,slice:Slice,step:Step,string:Assertion,"to-boolean":Coercion,"to-color":Coercion,"to-number":Coercion,"to-string":Coercion,var:Var,within:Within};function rgba(i,o){var s=o[0],_=o[1],F=o[2],N=o[3];s=s.evaluate(i),_=_.evaluate(i),F=F.evaluate(i);var j=N?N.evaluate(i):1,Z=validateRGBA(s,_,F,j);if(Z)throw new RuntimeError(Z);return new Color(s/255*j,_/255*j,F/255*j,j)}function get(i,o){var s=o[i];return void 0===s?null:s}function binarySearch(i,o,s,_){for(;s<=_;){var F=s+_>>1;if(o[F]===i)return!0;o[F]>i?_=F-1:s=F+1}return!1}function varargs(i){return{type:i}}function success(i){return{result:"success",value:i}}function error(i){return{result:"error",value:i}}function supportsPropertyExpression(i){return"data-driven"===i["property-type"]||"cross-faded-data-driven"===i["property-type"]}function supportsZoomExpression(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(i){return!!i.expression&&i.expression.interpolated}function getType(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":null===i?"null":typeof i}function isFunction(i){return"object"==typeof i&&null!==i&&!Array.isArray(i)}function identityFunction(i){return i}function createFunction(i,o){var s,_,F,N="color"===o.type,j=i.stops&&"object"==typeof i.stops[0][0],Z=j||void 0!==i.property,X=i.type||(supportsInterpolation(o)?"exponential":"interval");if(N&&((i=extend$1({},i)).stops&&(i.stops=i.stops.map(function(i){return[i[0],Color.parse(i[1])]})),i.default?i.default=Color.parse(i.default):i.default=Color.parse(o.default)),i.colorSpace&&"rgb"!==i.colorSpace&&!e6[i.colorSpace])throw Error("Unknown color space: "+i.colorSpace);if("exponential"===X)s=evaluateExponentialFunction;else if("interval"===X)s=evaluateIntervalFunction;else if("categorical"===X){s=evaluateCategoricalFunction,_=Object.create(null);for(var $=0,ee=i.stops;$<ee.length;$+=1){var et=ee[$];_[et[0]]=et[1]}F=typeof i.stops[0][0]}else if("identity"===X)s=evaluateIdentityFunction;else throw Error('Unknown function type "'+X+'"');if(j){for(var er={},en=[],ei=0;ei<i.stops.length;ei++){var eo=i.stops[ei],es=eo[0].zoom;void 0===er[es]&&(er[es]={zoom:es,type:i.type,property:i.property,default:i.default,stops:[]},en.push(es)),er[es].stops.push([eo[0].value,eo[1]])}for(var el=[],ec=0;ec<en.length;ec+=1){var eu=en[ec];el.push([er[eu].zoom,createFunction(er[eu],o)])}var ef={name:"linear"};return{kind:"composite",interpolationType:ef,interpolationFactor:Interpolate.interpolationFactor.bind(void 0,ef),zoomStops:el.map(function(i){return i[0]}),evaluate:function(s,_){var F=s.zoom;return evaluateExponentialFunction({stops:el,base:i.base},o,F).evaluate(F,_)}}}if(!j&&Z)return{kind:"source",evaluate:function(N,j){var Z=j&&j.properties?j.properties[i.property]:void 0;return void 0===Z?coalesce(i.default,o.default):s(i,o,Z,_,F)}};var ed="exponential"===X?{name:"exponential",base:void 0!==i.base?i.base:1}:null;return{kind:"camera",interpolationType:ed,interpolationFactor:Interpolate.interpolationFactor.bind(void 0,ed),zoomStops:i.stops.map(function(i){return i[0]}),evaluate:function(N){var j=N.zoom;return s(i,o,j,_,F)}}}function coalesce(i,o,s){return void 0!==i?i:void 0!==o?o:void 0!==s?s:void 0}function evaluateCategoricalFunction(i,o,s,_,F){return coalesce(typeof s===F?_[s]:void 0,i.default,o.default)}function evaluateIntervalFunction(i,o,s){if("number"!==getType(s))return coalesce(i.default,o.default);var _=i.stops.length;if(1===_||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[_-1][0])return i.stops[_-1][1];var F=findStopLessThanOrEqualTo(i.stops.map(function(i){return i[0]}),s);return i.stops[F][1]}function evaluateExponentialFunction(i,o,s){var _=void 0!==i.base?i.base:1;if("number"!==getType(s))return coalesce(i.default,o.default);var F=i.stops.length;if(1===F||s<=i.stops[0][0])return i.stops[0][1];if(s>=i.stops[F-1][0])return i.stops[F-1][1];var N=findStopLessThanOrEqualTo(i.stops.map(function(i){return i[0]}),s),j=interpolationFactor(s,_,i.stops[N][0],i.stops[N+1][0]),Z=i.stops[N][1],X=i.stops[N+1][1],$=eJ[o.type]||identityFunction;if(i.colorSpace&&"rgb"!==i.colorSpace){var ee=e6[i.colorSpace];$=function(i,o){return ee.reverse(ee.interpolate(ee.forward(i),ee.forward(o),j))}}return"function"==typeof Z.evaluate?{evaluate:function(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];var s=Z.evaluate.apply(void 0,i),_=X.evaluate.apply(void 0,i);if(void 0!==s&&void 0!==_)return $(s,_,j)}}:$(Z,X,j)}function evaluateIdentityFunction(i,o,s){return"color"===o.type?s=Color.parse(s):"formatted"===o.type?s=Formatted.fromString(s.toString()):"resolvedImage"===o.type?s=ResolvedImage.fromString(s.toString()):getType(s)===o.type||"enum"===o.type&&o.values[s]||(s=void 0),coalesce(s,i.default,o.default)}function interpolationFactor(i,o,s,_){var F=_-s,N=i-s;return 0===F?0:1===o?N/F:(Math.pow(o,N)-1)/(Math.pow(o,F)-1)}CompoundExpression.register(tn,{error:[{kind:"error"},[eF],function(i,o){throw new RuntimeError(o[0].evaluate(i))}],typeof:[eF,[eV],function(i,o){return toString(typeOf(o[0].evaluate(i)))}],"to-rgba":[array(eB,4),[eN],function(i,o){return o[0].evaluate(i).toArray()}],rgb:[eN,[eB,eB,eB],rgba],rgba:[eN,[eB,eB,eB,eB],rgba],has:{type:ez,overloads:[[[eF],function(i,o){return o[0].evaluate(i) in i.properties()}],[[eF,ej],function(i,o){var s=o[0],_=o[1];return s.evaluate(i) in _.evaluate(i)}]]},get:{type:eV,overloads:[[[eF],function(i,o){return get(o[0].evaluate(i),i.properties())}],[[eF,ej],function(i,o){var s=o[0],_=o[1];return get(s.evaluate(i),_.evaluate(i))}]]},"feature-state":[eV,[eF],function(i,o){return get(o[0].evaluate(i),i.featureState||{})}],properties:[ej,[],function(i){return i.properties()}],"geometry-type":[eF,[],function(i){return i.geometryType()}],id:[eV,[],function(i){return i.id()}],zoom:[eB,[],function(i){return i.globals.zoom}],"heatmap-density":[eB,[],function(i){return i.globals.heatmapDensity||0}],"line-progress":[eB,[],function(i){return i.globals.lineProgress||0}],accumulated:[eV,[],function(i){return void 0===i.globals.accumulated?null:i.globals.accumulated}],"+":[eB,varargs(eB),function(i,o){for(var s=0,_=0;_<o.length;_+=1)s+=o[_].evaluate(i);return s}],"*":[eB,varargs(eB),function(i,o){for(var s=1,_=0;_<o.length;_+=1)s*=o[_].evaluate(i);return s}],"-":{type:eB,overloads:[[[eB,eB],function(i,o){var s=o[0],_=o[1];return s.evaluate(i)-_.evaluate(i)}],[[eB],function(i,o){return-o[0].evaluate(i)}]]},"/":[eB,[eB,eB],function(i,o){var s=o[0],_=o[1];return s.evaluate(i)/_.evaluate(i)}],"%":[eB,[eB,eB],function(i,o){var s=o[0],_=o[1];return s.evaluate(i)%_.evaluate(i)}],ln2:[eB,[],function(){return Math.LN2}],pi:[eB,[],function(){return Math.PI}],e:[eB,[],function(){return Math.E}],"^":[eB,[eB,eB],function(i,o){var s=o[0],_=o[1];return Math.pow(s.evaluate(i),_.evaluate(i))}],sqrt:[eB,[eB],function(i,o){return Math.sqrt(o[0].evaluate(i))}],log10:[eB,[eB],function(i,o){return Math.log(o[0].evaluate(i))/Math.LN10}],ln:[eB,[eB],function(i,o){return Math.log(o[0].evaluate(i))}],log2:[eB,[eB],function(i,o){return Math.log(o[0].evaluate(i))/Math.LN2}],sin:[eB,[eB],function(i,o){return Math.sin(o[0].evaluate(i))}],cos:[eB,[eB],function(i,o){return Math.cos(o[0].evaluate(i))}],tan:[eB,[eB],function(i,o){return Math.tan(o[0].evaluate(i))}],asin:[eB,[eB],function(i,o){return Math.asin(o[0].evaluate(i))}],acos:[eB,[eB],function(i,o){return Math.acos(o[0].evaluate(i))}],atan:[eB,[eB],function(i,o){return Math.atan(o[0].evaluate(i))}],min:[eB,varargs(eB),function(i,o){return Math.min.apply(Math,o.map(function(o){return o.evaluate(i)}))}],max:[eB,varargs(eB),function(i,o){return Math.max.apply(Math,o.map(function(o){return o.evaluate(i)}))}],abs:[eB,[eB],function(i,o){return Math.abs(o[0].evaluate(i))}],round:[eB,[eB],function(i,o){var s=o[0].evaluate(i);return s<0?-Math.round(-s):Math.round(s)}],floor:[eB,[eB],function(i,o){return Math.floor(o[0].evaluate(i))}],ceil:[eB,[eB],function(i,o){return Math.ceil(o[0].evaluate(i))}],"filter-==":[ez,[eF,eV],function(i,o){var s=o[0],_=o[1];return i.properties()[s.value]===_.value}],"filter-id-==":[ez,[eV],function(i,o){var s=o[0];return i.id()===s.value}],"filter-type-==":[ez,[eF],function(i,o){var s=o[0];return i.geometryType()===s.value}],"filter-<":[ez,[eF,eV],function(i,o){var s=o[0],_=o[1],F=i.properties()[s.value],N=_.value;return typeof F==typeof N&&F<N}],"filter-id-<":[ez,[eV],function(i,o){var s=o[0],_=i.id(),F=s.value;return typeof _==typeof F&&_<F}],"filter->":[ez,[eF,eV],function(i,o){var s=o[0],_=o[1],F=i.properties()[s.value],N=_.value;return typeof F==typeof N&&F>N}],"filter-id->":[ez,[eV],function(i,o){var s=o[0],_=i.id(),F=s.value;return typeof _==typeof F&&_>F}],"filter-<=":[ez,[eF,eV],function(i,o){var s=o[0],_=o[1],F=i.properties()[s.value],N=_.value;return typeof F==typeof N&&F<=N}],"filter-id-<=":[ez,[eV],function(i,o){var s=o[0],_=i.id(),F=s.value;return typeof _==typeof F&&_<=F}],"filter->=":[ez,[eF,eV],function(i,o){var s=o[0],_=o[1],F=i.properties()[s.value],N=_.value;return typeof F==typeof N&&F>=N}],"filter-id->=":[ez,[eV],function(i,o){var s=o[0],_=i.id(),F=s.value;return typeof _==typeof F&&_>=F}],"filter-has":[ez,[eV],function(i,o){return o[0].value in i.properties()}],"filter-has-id":[ez,[],function(i){return null!==i.id()&&void 0!==i.id()}],"filter-type-in":[ez,[array(eF)],function(i,o){return o[0].value.indexOf(i.geometryType())>=0}],"filter-id-in":[ez,[array(eV)],function(i,o){return o[0].value.indexOf(i.id())>=0}],"filter-in-small":[ez,[eF,array(eV)],function(i,o){var s=o[0];return o[1].value.indexOf(i.properties()[s.value])>=0}],"filter-in-large":[ez,[eF,array(eV)],function(i,o){var s=o[0],_=o[1];return binarySearch(i.properties()[s.value],_.value,0,_.value.length-1)}],all:{type:ez,overloads:[[[ez,ez],function(i,o){var s=o[0],_=o[1];return s.evaluate(i)&&_.evaluate(i)}],[varargs(ez),function(i,o){for(var s=0;s<o.length;s+=1)if(!o[s].evaluate(i))return!1;return!0}]]},any:{type:ez,overloads:[[[ez,ez],function(i,o){var s=o[0],_=o[1];return s.evaluate(i)||_.evaluate(i)}],[varargs(ez),function(i,o){for(var s=0;s<o.length;s+=1)if(o[s].evaluate(i))return!0;return!1}]]},"!":[ez,[ez],function(i,o){return!o[0].evaluate(i)}],"is-supported-script":[ez,[eF],function(i,o){var s=o[0],_=i.globals&&i.globals.isSupportedScript;return!_||_(s.evaluate(i))}],upcase:[eF,[eF],function(i,o){return o[0].evaluate(i).toUpperCase()}],downcase:[eF,[eF],function(i,o){return o[0].evaluate(i).toLowerCase()}],concat:[eF,varargs(eV),function(i,o){return o.map(function(o){return toString$1(o.evaluate(i))}).join("")}],"resolved-locale":[eF,[eU],function(i,o){return o[0].evaluate(i).resolvedLocale()}]});var StyleExpression=function(i,o){this.expression=i,this._warningHistory={},this._evaluator=new EvaluationContext,this._defaultValue=o?getDefaultValue(o):null,this._enumValues=o&&"enum"===o.type?o.values:null};function isExpression(i){return Array.isArray(i)&&i.length>0&&"string"==typeof i[0]&&i[0]in tn}function createExpression(i,o){var s=new ParsingContext(tn,[],o?getExpectedType(o):void 0),_=s.parse(i,void 0,void 0,void 0,o&&"string"===o.type?{typeAnnotation:"coerce"}:void 0);return _?success(new StyleExpression(_,o)):error(s.errors)}StyleExpression.prototype.evaluateWithoutErrorHandling=function(i,o,s,_,F,N){return this._evaluator.globals=i,this._evaluator.feature=o,this._evaluator.featureState=s,this._evaluator.canonical=_,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=N,this.expression.evaluate(this._evaluator)},StyleExpression.prototype.evaluate=function(i,o,s,_,F,N){this._evaluator.globals=i,this._evaluator.feature=o||null,this._evaluator.featureState=s||null,this._evaluator.canonical=_,this._evaluator.availableImages=F||null,this._evaluator.formattedSection=N||null;try{var j=this.expression.evaluate(this._evaluator);if(null==j||"number"==typeof j&&j!=j)return this._defaultValue;if(this._enumValues&&!(j in this._enumValues))throw new RuntimeError("Expected value to be one of "+Object.keys(this._enumValues).map(function(i){return JSON.stringify(i)}).join(", ")+", but found "+JSON.stringify(j)+" instead.");return j}catch(i){return this._warningHistory[i.message]||(this._warningHistory[i.message]=!0,"undefined"!=typeof console&&console.warn(i.message)),this._defaultValue}};var ZoomConstantExpression=function(i,o){this.kind=i,this._styleExpression=o,this.isStateDependent="constant"!==i&&!isStateConstant(o.expression)};ZoomConstantExpression.prototype.evaluateWithoutErrorHandling=function(i,o,s,_,F,N){return this._styleExpression.evaluateWithoutErrorHandling(i,o,s,_,F,N)},ZoomConstantExpression.prototype.evaluate=function(i,o,s,_,F,N){return this._styleExpression.evaluate(i,o,s,_,F,N)};var ZoomDependentExpression=function(i,o,s,_){this.kind=i,this.zoomStops=s,this._styleExpression=o,this.isStateDependent="camera"!==i&&!isStateConstant(o.expression),this.interpolationType=_};function createPropertyExpression(i,o){if("error"===(i=createExpression(i,o)).result)return i;var s=i.value.expression,_=isFeatureConstant(s);if(!_&&!supportsPropertyExpression(o))return error([new eD("","data expressions not supported")]);var F=isGlobalPropertyConstant(s,["zoom"]);if(!F&&!supportsZoomExpression(o))return error([new eD("","zoom expressions not supported")]);var N=findZoomCurve(s);if(!N&&!F)return error([new eD("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(N instanceof eD)return error([N]);if(N instanceof Interpolate&&!supportsInterpolation(o))return error([new eD("",'"interpolate" expressions cannot be used with this property')]);if(!N)return success(_?new ZoomConstantExpression("constant",i.value):new ZoomConstantExpression("source",i.value));var j=N instanceof Interpolate?N.interpolation:void 0;return success(_?new ZoomDependentExpression("camera",i.value,N.labels,j):new ZoomDependentExpression("composite",i.value,N.labels,j))}ZoomDependentExpression.prototype.evaluateWithoutErrorHandling=function(i,o,s,_,F,N){return this._styleExpression.evaluateWithoutErrorHandling(i,o,s,_,F,N)},ZoomDependentExpression.prototype.evaluate=function(i,o,s,_,F,N){return this._styleExpression.evaluate(i,o,s,_,F,N)},ZoomDependentExpression.prototype.interpolationFactor=function(i,o,s){return this.interpolationType?Interpolate.interpolationFactor(this.interpolationType,i,o,s):0};var StylePropertyFunction=function(i,o){this._parameters=i,this._specification=o,extend$1(this,createFunction(this._parameters,this._specification))};function normalizePropertyExpression(i,o){if(isFunction(i))return new StylePropertyFunction(i,o);if(isExpression(i)){var s=createPropertyExpression(i,o);if("error"===s.result)throw Error(s.value.map(function(i){return i.key+": "+i.message}).join(", "));return s.value}var _=i;return"string"==typeof i&&"color"===o.type&&(_=Color.parse(i)),{kind:"constant",evaluate:function(){return _}}}function findZoomCurve(i){var o=null;if(i instanceof Let)o=findZoomCurve(i.result);else if(i instanceof Coalesce)for(var s=0,_=i.args;s<_.length&&!(o=findZoomCurve(_[s]));s+=1);else(i instanceof Step||i instanceof Interpolate)&&i.input instanceof CompoundExpression&&"zoom"===i.input.name&&(o=i);return o instanceof eD||i.eachChild(function(i){var s=findZoomCurve(i);s instanceof eD?o=s:!o&&s?o=new eD("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&s&&o!==s&&(o=new eD("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function getExpectedType(i){var o={color:eN,string:eF,number:eB,enum:eF,boolean:ez,formatted:eH,resolvedImage:eG};return"array"===i.type?array(o[i.value]||eV,i.length):o[i.type]}function getDefaultValue(i){return"color"===i.type&&isFunction(i.default)?new Color(0,0,0,0):"color"===i.type?Color.parse(i.default)||null:void 0===i.default?null:i.default}function validateObject(i){var o=i.key,s=i.value,_=i.valueSpec||{},F=i.objectElementValidators||{},N=i.style,j=i.styleSpec,Z=[],X=getType(s);if("object"!==X)return[new ValidationError(o,s,"object expected, "+X+" found")];for(var $ in s){var ee=$.split(".")[0],et=_[ee]||_["*"],er=void 0;if(F[ee])er=F[ee];else if(_[ee])er=validate;else if(F["*"])er=F["*"];else if(_["*"])er=validate;else{Z.push(new ValidationError(o,s[$],'unknown property "'+$+'"'));continue}Z=Z.concat(er({key:(o?o+".":o)+$,value:s[$],valueSpec:et,style:N,styleSpec:j,object:s,objectKey:$},s))}for(var en in _)!F[en]&&_[en].required&&void 0===_[en].default&&void 0===s[en]&&Z.push(new ValidationError(o,s,'missing required property "'+en+'"'));return Z}function validateArray(i){var o=i.value,s=i.valueSpec,_=i.style,F=i.styleSpec,N=i.key,j=i.arrayElementValidator||validate;if("array"!==getType(o))return[new ValidationError(N,o,"array expected, "+getType(o)+" found")];if(s.length&&o.length!==s.length)return[new ValidationError(N,o,"array length "+s.length+" expected, length "+o.length+" found")];if(s["min-length"]&&o.length<s["min-length"])return[new ValidationError(N,o,"array length at least "+s["min-length"]+" expected, length "+o.length+" found")];var Z={type:s.value,values:s.values};F.$version<7&&(Z.function=s.function),"object"===getType(s.value)&&(Z=s.value);for(var X=[],$=0;$<o.length;$++)X=X.concat(j({array:o,arrayIndex:$,value:o[$],valueSpec:Z,style:_,styleSpec:F,key:N+"["+$+"]"}));return X}function validateNumber(i){var o=i.key,s=i.value,_=i.valueSpec,F=getType(s);return("number"===F&&s!=s&&(F="NaN"),"number"!==F)?[new ValidationError(o,s,"number expected, "+F+" found")]:"minimum"in _&&s<_.minimum?[new ValidationError(o,s,s+" is less than the minimum value "+_.minimum)]:"maximum"in _&&s>_.maximum?[new ValidationError(o,s,s+" is greater than the maximum value "+_.maximum)]:[]}function validateFunction(i){var o,s,_,F=i.valueSpec,N=unbundle(i.value.type),j={},Z="categorical"!==N&&void 0===i.value.property,X="array"===getType(i.value.stops)&&"array"===getType(i.value.stops[0])&&"object"===getType(i.value.stops[0][0]),$=validateObject({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:validateFunctionStops,default:validateFunctionDefault}});return"identity"===N&&Z&&$.push(new ValidationError(i.key,i.value,'missing required property "property"')),"identity"===N||i.value.stops||$.push(new ValidationError(i.key,i.value,'missing required property "stops"')),"exponential"===N&&i.valueSpec.expression&&!supportsInterpolation(i.valueSpec)&&$.push(new ValidationError(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(Z||supportsPropertyExpression(i.valueSpec)?Z&&!supportsZoomExpression(i.valueSpec)&&$.push(new ValidationError(i.key,i.value,"zoom functions not supported")):$.push(new ValidationError(i.key,i.value,"property functions not supported"))),("categorical"===N||X)&&void 0===i.value.property&&$.push(new ValidationError(i.key,i.value,'"property" property is required')),$;function validateFunctionStops(i){if("identity"===N)return[new ValidationError(i.key,i.value,'identity function may not have a "stops" property')];var o=[],s=i.value;return o=o.concat(validateArray({key:i.key,value:s,valueSpec:i.valueSpec,style:i.style,styleSpec:i.styleSpec,arrayElementValidator:validateFunctionStop})),"array"===getType(s)&&0===s.length&&o.push(new ValidationError(i.key,s,"array must have at least one stop")),o}function validateFunctionStop(i){var o=[],N=i.value,Z=i.key;if("array"!==getType(N))return[new ValidationError(Z,N,"array expected, "+getType(N)+" found")];if(2!==N.length)return[new ValidationError(Z,N,"array length 2 expected, length "+N.length+" found")];if(X){if("object"!==getType(N[0]))return[new ValidationError(Z,N,"object expected, "+getType(N[0])+" found")];if(void 0===N[0].zoom)return[new ValidationError(Z,N,"object stop key must have zoom")];if(void 0===N[0].value)return[new ValidationError(Z,N,"object stop key must have value")];if(_&&_>unbundle(N[0].zoom))return[new ValidationError(Z,N[0].zoom,"stop zoom values must appear in ascending order")];unbundle(N[0].zoom)!==_&&(_=unbundle(N[0].zoom),s=void 0,j={}),o=o.concat(validateObject({key:Z+"[0]",value:N[0],valueSpec:{zoom:{}},style:i.style,styleSpec:i.styleSpec,objectElementValidators:{zoom:validateNumber,value:validateStopDomainValue}}))}else o=o.concat(validateStopDomainValue({key:Z+"[0]",value:N[0],valueSpec:{},style:i.style,styleSpec:i.styleSpec},N));return isExpression(deepUnbundle(N[1]))?o.concat([new ValidationError(Z+"[1]",N[1],"expressions are not allowed in function stops.")]):o.concat(validate({key:Z+"[1]",value:N[1],valueSpec:F,style:i.style,styleSpec:i.styleSpec}))}function validateStopDomainValue(i,_){var Z=getType(i.value),X=unbundle(i.value),$=null!==i.value?i.value:_;if(o){if(Z!==o)return[new ValidationError(i.key,$,Z+" stop domain type must match previous stop domain type "+o)]}else o=Z;if("number"!==Z&&"string"!==Z&&"boolean"!==Z)return[new ValidationError(i.key,$,"stop domain value must be a number, string, or boolean")];if("number"!==Z&&"categorical"!==N){var ee="number expected, "+Z+" found";return supportsPropertyExpression(F)&&void 0===N&&(ee+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ValidationError(i.key,$,ee)]}return"categorical"!==N||"number"!==Z||isFinite(X)&&Math.floor(X)===X?"categorical"!==N&&"number"===Z&&void 0!==s&&X<s?[new ValidationError(i.key,$,"stop domain values must appear in ascending order")]:(s=X,"categorical"===N&&X in j)?[new ValidationError(i.key,$,"stop domain values must be unique")]:(j[X]=!0,[]):[new ValidationError(i.key,$,"integer expected, found "+X)]}function validateFunctionDefault(i){return validate({key:i.key,value:i.value,valueSpec:F,style:i.style,styleSpec:i.styleSpec})}}function validateExpression(i){var o=("property"===i.expressionContext?createPropertyExpression:createExpression)(deepUnbundle(i.value),i.valueSpec);if("error"===o.result)return o.value.map(function(o){return new ValidationError(""+i.key+o.key,i.value,o.message)});var s=o.value.expression||o.value._styleExpression.expression;if("property"===i.expressionContext&&"text-font"===i.propertyKey&&!s.outputDefined())return[new ValidationError(i.key,i.value,'Invalid data expression for "'+i.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===i.expressionContext&&"layout"===i.propertyType&&!isStateConstant(s))return[new ValidationError(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===i.expressionContext&&!isStateConstant(s))return[new ValidationError(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&0===i.expressionContext.indexOf("cluster")){if(!isGlobalPropertyConstant(s,["zoom","feature-state"]))return[new ValidationError(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===i.expressionContext&&!isFeatureConstant(s))return[new ValidationError(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function validateEnum(i){var o=i.key,s=i.value,_=i.valueSpec,F=[];return Array.isArray(_.values)?-1===_.values.indexOf(unbundle(s))&&F.push(new ValidationError(o,s,"expected one of ["+_.values.join(", ")+"], "+JSON.stringify(s)+" found")):-1===Object.keys(_.values).indexOf(unbundle(s))&&F.push(new ValidationError(o,s,"expected one of ["+Object.keys(_.values).join(", ")+"], "+JSON.stringify(s)+" found")),F}function isExpressionFilter(i){if(!0===i||!1===i)return!0;if(!Array.isArray(i)||0===i.length)return!1;switch(i[0]){case"has":return i.length>=2&&"$id"!==i[1]&&"$type"!==i[1];case"in":return i.length>=3&&("string"!=typeof i[1]||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==i.length||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(var o=0,s=i.slice(1);o<s.length;o+=1){var _=s[o];if(!isExpressionFilter(_)&&"boolean"!=typeof _)return!1}return!0;default:return!0}}StylePropertyFunction.deserialize=function(i){return new StylePropertyFunction(i._parameters,i._specification)},StylePropertyFunction.serialize=function(i){return{_parameters:i._parameters,_specification:i._specification}};var ta={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function createFilter(i){if(null==i)return{filter:function(){return!0},needGeometry:!1};isExpressionFilter(i)||(i=convertFilter(i));var o=createExpression(i,ta);if("error"!==o.result)return{filter:function(i,s,_){return o.value.evaluate(i,s,{},_)},needGeometry:geometryNeeded(i)};throw Error(o.value.map(function(i){return i.key+": "+i.message}).join(", "))}function compare(i,o){return i<o?-1:i>o?1:0}function geometryNeeded(i){if(!Array.isArray(i))return!1;if("within"===i[0])return!0;for(var o=1;o<i.length;o++)if(geometryNeeded(i[o]))return!0;return!1}function convertFilter(i){if(!i)return!0;var o=i[0];return i.length<=1?"any"!==o:"=="===o?convertComparisonOp(i[1],i[2],"=="):"!="===o?convertNegation(convertComparisonOp(i[1],i[2],"==")):"<"===o||">"===o||"<="===o||">="===o?convertComparisonOp(i[1],i[2],o):"any"===o?convertDisjunctionOp(i.slice(1)):"all"===o?["all"].concat(i.slice(1).map(convertFilter)):"none"===o?["all"].concat(i.slice(1).map(convertFilter).map(convertNegation)):"in"===o?convertInOp(i[1],i.slice(2)):"!in"===o?convertNegation(convertInOp(i[1],i.slice(2))):"has"===o?convertHasOp(i[1]):"!has"===o?convertNegation(convertHasOp(i[1])):"within"!==o||i}function convertComparisonOp(i,o,s){switch(i){case"$type":return["filter-type-"+s,o];case"$id":return["filter-id-"+s,o];default:return["filter-"+s,i,o]}}function convertDisjunctionOp(i){return["any"].concat(i.map(convertFilter))}function convertInOp(i,o){if(0===o.length)return!1;switch(i){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:if(o.length>200&&!o.some(function(i){return typeof i!=typeof o[0]}))return["filter-in-large",i,["literal",o.sort(compare)]];return["filter-in-small",i,["literal",o]]}}function convertHasOp(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function convertNegation(i){return["!",i]}function validateFilter(i){return isExpressionFilter(deepUnbundle(i.value))?validateExpression(extend$1({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):validateNonExpressionFilter(i)}function validateNonExpressionFilter(i){var o,s=i.value,_=i.key;if("array"!==getType(s))return[new ValidationError(_,s,"array expected, "+getType(s)+" found")];var F=i.styleSpec,N=[];if(s.length<1)return[new ValidationError(_,s,"filter array must have at least 1 element")];switch(N=N.concat(validateEnum({key:_+"[0]",value:s[0],valueSpec:F.filter_operator,style:i.style,styleSpec:i.styleSpec})),unbundle(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"===unbundle(s[1])&&N.push(new ValidationError(_,s,'"$type" cannot be use with operator "'+s[0]+'"'));case"==":case"!=":3!==s.length&&N.push(new ValidationError(_,s,'filter array for operator "'+s[0]+'" must have 3 elements'));case"in":case"!in":s.length>=2&&"string"!==(o=getType(s[1]))&&N.push(new ValidationError(_+"[1]",s[1],"string expected, "+o+" found"));for(var j=2;j<s.length;j++)o=getType(s[j]),"$type"===unbundle(s[1])?N=N.concat(validateEnum({key:_+"["+j+"]",value:s[j],valueSpec:F.geometry_type,style:i.style,styleSpec:i.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&N.push(new ValidationError(_+"["+j+"]",s[j],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var Z=1;Z<s.length;Z++)N=N.concat(validateNonExpressionFilter({key:_+"["+Z+"]",value:s[Z],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":o=getType(s[1]),2!==s.length?N.push(new ValidationError(_,s,'filter array for "'+s[0]+'" operator must have 2 elements')):"string"!==o&&N.push(new ValidationError(_+"[1]",s[1],"string expected, "+o+" found"));break;case"within":o=getType(s[1]),2!==s.length?N.push(new ValidationError(_,s,'filter array for "'+s[0]+'" operator must have 2 elements')):"object"!==o&&N.push(new ValidationError(_+"[1]",s[1],"object expected, "+o+" found"))}return N}function validateProperty(i,o){var s,_=i.key,F=i.style,N=i.styleSpec,j=i.value,Z=i.objectKey,X=N[o+"_"+i.layerType];if(!X)return[];var $=Z.match(/^(.*)-transition$/);if("paint"===o&&$&&X[$[1]]&&X[$[1]].transition)return validate({key:_,value:j,valueSpec:N.transition,style:F,styleSpec:N});var ee=i.valueSpec||X[Z];if(!ee)return[new ValidationError(_,j,'unknown property "'+Z+'"')];if("string"===getType(j)&&supportsPropertyExpression(ee)&&!ee.tokens&&(s=/^{([^}]+)}$/.exec(j)))return[new ValidationError(_,j,'"'+Z+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(s[1])+" }`.")];var et=[];return"symbol"===i.layerType&&("text-field"===Z&&F&&!F.glyphs&&et.push(new ValidationError(_,j,'use of "text-field" requires a style "glyphs" property')),"text-font"===Z&&isFunction(deepUnbundle(j))&&"identity"===unbundle(j.type)&&et.push(new ValidationError(_,j,'"text-font" does not support identity functions'))),et.concat(validate({key:i.key,value:j,valueSpec:ee,style:F,styleSpec:N,expressionContext:"property",propertyType:o,propertyKey:Z}))}function validatePaintProperty(i){return validateProperty(i,"paint")}function validateLayoutProperty(i){return validateProperty(i,"layout")}function validateLayer(i){var o,s=[],_=i.value,F=i.key,N=i.style,j=i.styleSpec;_.type||_.ref||s.push(new ValidationError(F,_,'either "type" or "ref" is required'));var Z=unbundle(_.type),X=unbundle(_.ref);if(_.id)for(var $=unbundle(_.id),ee=0;ee<i.arrayIndex;ee++){var et=N.layers[ee];unbundle(et.id)===$&&s.push(new ValidationError(F,_.id,'duplicate layer id "'+_.id+'", previously used at line '+et.id.__line__))}if("ref"in _)["type","source","source-layer","filter","layout"].forEach(function(i){i in _&&s.push(new ValidationError(F,_[i],'"'+i+'" is prohibited for ref layers'))}),N.layers.forEach(function(i){unbundle(i.id)===X&&(o=i)}),o?o.ref?s.push(new ValidationError(F,_.ref,"ref cannot reference another ref layer")):Z=unbundle(o.type):s.push(new ValidationError(F,_.ref,'ref layer "'+X+'" not found'));else if("background"!==Z){if(_.source){var er=N.sources&&N.sources[_.source],en=er&&unbundle(er.type);er?"vector"===en&&"raster"===Z?s.push(new ValidationError(F,_.source,'layer "'+_.id+'" requires a raster source')):"raster"===en&&"raster"!==Z?s.push(new ValidationError(F,_.source,'layer "'+_.id+'" requires a vector source')):"vector"!==en||_["source-layer"]?"raster-dem"===en&&"hillshade"!==Z?s.push(new ValidationError(F,_.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===Z&&_.paint&&_.paint["line-gradient"]&&("geojson"!==en||!er.lineMetrics)&&s.push(new ValidationError(F,_,'layer "'+_.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):s.push(new ValidationError(F,_,'layer "'+_.id+'" must specify a "source-layer"')):s.push(new ValidationError(F,_.source,'source "'+_.source+'" not found'))}else s.push(new ValidationError(F,_,'missing required property "source"'))}return s=s.concat(validateObject({key:F,value:_,valueSpec:j.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return validate({key:F+".type",value:_.type,valueSpec:j.layer.type,style:i.style,styleSpec:i.styleSpec,object:_,objectKey:"type"})},filter:validateFilter,layout:function(i){return validateObject({layer:_,key:i.key,value:i.value,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":function(i){return validateLayoutProperty(extend$1({layerType:Z},i))}}})},paint:function(i){return validateObject({layer:_,key:i.key,value:i.value,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":function(i){return validatePaintProperty(extend$1({layerType:Z},i))}}})}}}))}function validateString(i){var o=i.value,s=i.key,_=getType(o);return"string"!==_?[new ValidationError(s,o,"string expected, "+_+" found")]:[]}var ti={promoteId:validatePromoteId};function validateSource(i){var o,s=i.value,_=i.key,F=i.styleSpec,N=i.style;if(!s.type)return[new ValidationError(_,s,'"type" is required')];var j=unbundle(s.type);switch(j){case"vector":case"raster":case"raster-dem":return validateObject({key:_,value:s,valueSpec:F["source_"+j.replace("-","_")],style:i.style,styleSpec:F,objectElementValidators:ti});case"geojson":if(o=validateObject({key:_,value:s,valueSpec:F.source_geojson,style:N,styleSpec:F,objectElementValidators:ti}),s.cluster)for(var Z in s.clusterProperties){var X=s.clusterProperties[Z],$=X[0],ee=X[1],et="string"==typeof $?[$,["accumulated"],["get",Z]]:$;o.push.apply(o,validateExpression({key:_+"."+Z+".map",value:ee,expressionContext:"cluster-map"})),o.push.apply(o,validateExpression({key:_+"."+Z+".reduce",value:et,expressionContext:"cluster-reduce"}))}return o;case"video":return validateObject({key:_,value:s,valueSpec:F.source_video,style:N,styleSpec:F});case"image":return validateObject({key:_,value:s,valueSpec:F.source_image,style:N,styleSpec:F});case"canvas":return[new ValidationError(_,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return validateEnum({key:_+".type",value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:N,styleSpec:F})}}function validatePromoteId(i){var o=i.key,s=i.value;if("string"===getType(s))return validateString({key:o,value:s});var _=[];for(var F in s)_.push.apply(_,validateString({key:o+"."+F,value:s[F]}));return _}function validateLight(i){var o=i.value,s=i.styleSpec,_=s.light,F=i.style,N=[],j=getType(o);if(void 0===o)return N;if("object"!==j)return N.concat([new ValidationError("light",o,"object expected, "+j+" found")]);for(var Z in o){var X=Z.match(/^(.*)-transition$/);N=X&&_[X[1]]&&_[X[1]].transition?N.concat(validate({key:Z,value:o[Z],valueSpec:s.transition,style:F,styleSpec:s})):_[Z]?N.concat(validate({key:Z,value:o[Z],valueSpec:_[Z],style:F,styleSpec:s})):N.concat([new ValidationError(Z,o[Z],'unknown property "'+Z+'"')])}return N}function validateFormatted(i){return 0===validateString(i).length?[]:validateExpression(i)}function validateImage(i){return 0===validateString(i).length?[]:validateExpression(i)}var to={"*":function(){return[]},array:validateArray,boolean:function(i){var o=i.value,s=i.key,_=getType(o);return"boolean"!==_?[new ValidationError(s,o,"boolean expected, "+_+" found")]:[]},number:validateNumber,color:function(i){var o=i.key,s=i.value,_=getType(s);return"string"!==_?[new ValidationError(o,s,"color expected, "+_+" found")]:null===eZ(s)?[new ValidationError(o,s,'color expected, "'+s+'" found')]:[]},constants:validateConstants,enum:validateEnum,filter:validateFilter,function:validateFunction,layer:validateLayer,object:validateObject,source:validateSource,light:validateLight,string:validateString,formatted:validateFormatted,resolvedImage:validateImage};function validate(i){var o=i.value,s=i.valueSpec,_=i.styleSpec;return s.expression&&isFunction(unbundle(o))?validateFunction(i):s.expression&&isExpression(deepUnbundle(o))?validateExpression(i):s.type&&to[s.type]?to[s.type](i):validateObject(extend$1({},i,{valueSpec:s.type?_[s.type]:s}))}function validateGlyphsURL(i){var o=i.value,s=i.key,_=validateString(i);return _.length||(-1===o.indexOf("{fontstack}")&&_.push(new ValidationError(s,o,'"glyphs" url must include a "{fontstack}" token')),-1===o.indexOf("{range}")&&_.push(new ValidationError(s,o,'"glyphs" url must include a "{range}" token'))),_}function validateStyleMin(i,o){void 0===o&&(o=eO);var s=[];return s=s.concat(validate({key:"",value:i,valueSpec:o.$root,styleSpec:o,style:i,objectElementValidators:{glyphs:validateGlyphsURL,"*":function(){return[]}}})),i.constants&&(s=s.concat(validateConstants({key:"constants",value:i.constants,style:i,styleSpec:o}))),sortErrors(s)}function sortErrors(i){return[].concat(i).sort(function(i,o){return i.line-o.line})}function wrapCleanErrors(i){return function(){for(var o=[],s=arguments.length;s--;)o[s]=arguments[s];return sortErrors(i.apply(this,o))}}validateStyleMin.source=wrapCleanErrors(validateSource),validateStyleMin.light=wrapCleanErrors(validateLight),validateStyleMin.layer=wrapCleanErrors(validateLayer),validateStyleMin.filter=wrapCleanErrors(validateFilter),validateStyleMin.paintProperty=wrapCleanErrors(validatePaintProperty),validateStyleMin.layoutProperty=wrapCleanErrors(validateLayoutProperty);var ts=validateStyleMin,tl=ts.light,tc=ts.paintProperty,tu=ts.layoutProperty;function emitValidationErrors(i,o){var s=!1;if(o&&o.length)for(var _=0;_<o.length;_+=1){var F=o[_];i.fire(new eI(Error(F.message))),s=!0}return s}var tf=GridIndex;function GridIndex(i,o,s){var _=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var F=new Int32Array(this.arrayBuffer);i=F[0],o=F[1],s=F[2],this.d=o+2*s;for(var N=0;N<this.d*this.d;N++){var j=F[3+N],Z=F[3+N+1];_.push(j===Z?null:F.subarray(j,Z))}var X=F[3+_.length],$=F[3+_.length+1];this.keys=F.subarray(X,$),this.bboxes=F.subarray($),this.insert=this._insertReadonly}else{this.d=o+2*s;for(var ee=0;ee<this.d*this.d;ee++)_.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=i,this.padding=s,this.scale=o/i,this.uid=0;var et=s/o*i;this.min=-et,this.max=i+et}GridIndex.prototype.insert=function(i,o,s,_,F){this._forEachCell(o,s,_,F,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(o),this.bboxes.push(s),this.bboxes.push(_),this.bboxes.push(F)},GridIndex.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},GridIndex.prototype._insertCell=function(i,o,s,_,F,N){this.cells[F].push(N)},GridIndex.prototype.query=function(i,o,s,_,F){var N=this.min,j=this.max;if(i<=N&&o<=N&&j<=s&&j<=_&&!F)return Array.prototype.slice.call(this.keys);var Z=[];return this._forEachCell(i,o,s,_,this._queryCell,Z,{},F),Z},GridIndex.prototype._queryCell=function(i,o,s,_,F,N,j,Z){var X=this.cells[F];if(null!==X)for(var $=this.keys,ee=this.bboxes,et=0;et<X.length;et++){var er=X[et];if(void 0===j[er]){var en=4*er;(Z?Z(ee[en+0],ee[en+1],ee[en+2],ee[en+3]):i<=ee[en+2]&&o<=ee[en+3]&&s>=ee[en+0]&&_>=ee[en+1])?(j[er]=!0,N.push($[er])):j[er]=!1}}},GridIndex.prototype._forEachCell=function(i,o,s,_,F,N,j,Z){for(var X=this._convertToCellCoord(i),$=this._convertToCellCoord(o),ee=this._convertToCellCoord(s),et=this._convertToCellCoord(_),er=X;er<=ee;er++)for(var en=$;en<=et;en++){var ei=this.d*en+er;if((!Z||Z(this._convertFromCellCoord(er),this._convertFromCellCoord(en),this._convertFromCellCoord(er+1),this._convertFromCellCoord(en+1)))&&F.call(this,i,o,s,_,ei,N,j,Z))return}},GridIndex.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},GridIndex.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},GridIndex.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,o=3+this.cells.length+1+1,s=0,_=0;_<this.cells.length;_++)s+=this.cells[_].length;var F=new Int32Array(o+s+this.keys.length+this.bboxes.length);F[0]=this.extent,F[1]=this.n,F[2]=this.padding;for(var N=o,j=0;j<i.length;j++){var Z=i[j];F[3+j]=N,F.set(Z,N),N+=Z.length}return F[3+i.length]=N,F.set(this.keys,N),N+=this.keys.length,F[3+i.length+1]=N,F.set(this.bboxes,N),N+=this.bboxes.length,F.buffer};var td=self.ImageData,th=self.ImageBitmap,tp={};function register(i,o,s){void 0===s&&(s={}),Object.defineProperty(o,"_classRegistryKey",{value:i,writeable:!1}),tp[i]={klass:o,omit:s.omit||[],shallow:s.shallow||[]}}for(var tg in register("Object",Object),tf.serialize=function(i,o){var s=i.toArrayBuffer();return o&&o.push(s),{buffer:s}},tf.deserialize=function(i){return new tf(i.buffer)},register("Grid",tf),register("Color",Color),register("Error",Error),register("ResolvedImage",ResolvedImage),register("StylePropertyFunction",StylePropertyFunction),register("StyleExpression",StyleExpression,{omit:["_evaluator"]}),register("ZoomDependentExpression",ZoomDependentExpression),register("ZoomConstantExpression",ZoomConstantExpression),register("CompoundExpression",CompoundExpression,{omit:["_evaluate"]}),tn)tn[tg]._classRegistryKey||register("Expression_"+tg,tn[tg]);function isArrayBuffer(i){return i&&"undefined"!=typeof ArrayBuffer&&(i instanceof ArrayBuffer||i.constructor&&"ArrayBuffer"===i.constructor.name)}function isImageBitmap(i){return th&&i instanceof th}function serialize(i,o){if(null==i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(isArrayBuffer(i)||isImageBitmap(i))return o&&o.push(i),i;if(ArrayBuffer.isView(i))return o&&o.push(i.buffer),i;if(i instanceof td)return o&&o.push(i.data.buffer),i;if(Array.isArray(i)){for(var s=[],_=0;_<i.length;_+=1){var F=i[_];s.push(serialize(F,o))}return s}if("object"==typeof i){var N=i.constructor,j=N._classRegistryKey;if(!j)throw Error("can't serialize object of unregistered class");var Z=N.serialize?N.serialize(i,o):{};if(!N.serialize){for(var X in i)if(!(!i.hasOwnProperty(X)||tp[j].omit.indexOf(X)>=0)){var $=i[X];Z[X]=tp[j].shallow.indexOf(X)>=0?$:serialize($,o)}i instanceof Error&&(Z.message=i.message)}if(Z.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==j&&(Z.$name=j),Z}throw Error("can't serialize object of type "+typeof i)}function deserialize(i){if(null==i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||isArrayBuffer(i)||isImageBitmap(i)||ArrayBuffer.isView(i)||i instanceof td)return i;if(Array.isArray(i))return i.map(deserialize);if("object"==typeof i){var o=i.$name||"Object",s=tp[o].klass;if(!s)throw Error("can't deserialize unregistered class "+o);if(s.deserialize)return s.deserialize(i);for(var _=Object.create(s.prototype),F=0,N=Object.keys(i);F<N.length;F+=1){var j=N[F];if("$name"!==j){var Z=i[j];_[j]=tp[o].shallow.indexOf(j)>=0?Z:deserialize(Z)}}return _}throw Error("can't deserialize object of type "+typeof i)}var ZoomHistory=function(){this.first=!0};ZoomHistory.prototype.update=function(i,o){var s=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=o),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=s,!0))};var tm={"Latin-1 Supplement":function(i){return i>=128&&i<=255},Arabic:function(i){return i>=1536&&i<=1791},"Arabic Supplement":function(i){return i>=1872&&i<=1919},"Arabic Extended-A":function(i){return i>=2208&&i<=2303},"Hangul Jamo":function(i){return i>=4352&&i<=4607},"Unified Canadian Aboriginal Syllabics":function(i){return i>=5120&&i<=5759},Khmer:function(i){return i>=6016&&i<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(i){return i>=6320&&i<=6399},"General Punctuation":function(i){return i>=8192&&i<=8303},"Letterlike Symbols":function(i){return i>=8448&&i<=8527},"Number Forms":function(i){return i>=8528&&i<=8591},"Miscellaneous Technical":function(i){return i>=8960&&i<=9215},"Control Pictures":function(i){return i>=9216&&i<=9279},"Optical Character Recognition":function(i){return i>=9280&&i<=9311},"Enclosed Alphanumerics":function(i){return i>=9312&&i<=9471},"Geometric Shapes":function(i){return i>=9632&&i<=9727},"Miscellaneous Symbols":function(i){return i>=9728&&i<=9983},"Miscellaneous Symbols and Arrows":function(i){return i>=11008&&i<=11263},"CJK Radicals Supplement":function(i){return i>=11904&&i<=12031},"Kangxi Radicals":function(i){return i>=12032&&i<=12255},"Ideographic Description Characters":function(i){return i>=12272&&i<=12287},"CJK Symbols and Punctuation":function(i){return i>=12288&&i<=12351},Hiragana:function(i){return i>=12352&&i<=12447},Katakana:function(i){return i>=12448&&i<=12543},Bopomofo:function(i){return i>=12544&&i<=12591},"Hangul Compatibility Jamo":function(i){return i>=12592&&i<=12687},Kanbun:function(i){return i>=12688&&i<=12703},"Bopomofo Extended":function(i){return i>=12704&&i<=12735},"CJK Strokes":function(i){return i>=12736&&i<=12783},"Katakana Phonetic Extensions":function(i){return i>=12784&&i<=12799},"Enclosed CJK Letters and Months":function(i){return i>=12800&&i<=13055},"CJK Compatibility":function(i){return i>=13056&&i<=13311},"CJK Unified Ideographs Extension A":function(i){return i>=13312&&i<=19903},"Yijing Hexagram Symbols":function(i){return i>=19904&&i<=19967},"CJK Unified Ideographs":function(i){return i>=19968&&i<=40959},"Yi Syllables":function(i){return i>=40960&&i<=42127},"Yi Radicals":function(i){return i>=42128&&i<=42191},"Hangul Jamo Extended-A":function(i){return i>=43360&&i<=43391},"Hangul Syllables":function(i){return i>=44032&&i<=55215},"Hangul Jamo Extended-B":function(i){return i>=55216&&i<=55295},"Private Use Area":function(i){return i>=57344&&i<=63743},"CJK Compatibility Ideographs":function(i){return i>=63744&&i<=64255},"Arabic Presentation Forms-A":function(i){return i>=64336&&i<=65023},"Vertical Forms":function(i){return i>=65040&&i<=65055},"CJK Compatibility Forms":function(i){return i>=65072&&i<=65103},"Small Form Variants":function(i){return i>=65104&&i<=65135},"Arabic Presentation Forms-B":function(i){return i>=65136&&i<=65279},"Halfwidth and Fullwidth Forms":function(i){return i>=65280&&i<=65519}};function allowsVerticalWritingMode(i){for(var o=0;o<i.length;o+=1)if(charHasUprightVerticalOrientation(i[o].charCodeAt(0)))return!0;return!1}function allowsLetterSpacing(i){for(var o=0;o<i.length;o+=1)if(!charAllowsLetterSpacing(i[o].charCodeAt(0)))return!1;return!0}function charAllowsLetterSpacing(i){return!(tm.Arabic(i)||tm["Arabic Supplement"](i)||tm["Arabic Extended-A"](i)||tm["Arabic Presentation Forms-A"](i)||tm["Arabic Presentation Forms-B"](i))}function charAllowsIdeographicBreaking(i){return!(i<11904)&&!!(tm["Bopomofo Extended"](i)||tm.Bopomofo(i)||tm["CJK Compatibility Forms"](i)||tm["CJK Compatibility Ideographs"](i)||tm["CJK Compatibility"](i)||tm["CJK Radicals Supplement"](i)||tm["CJK Strokes"](i)||tm["CJK Symbols and Punctuation"](i)||tm["CJK Unified Ideographs Extension A"](i)||tm["CJK Unified Ideographs"](i)||tm["Enclosed CJK Letters and Months"](i)||tm["Halfwidth and Fullwidth Forms"](i)||tm.Hiragana(i)||tm["Ideographic Description Characters"](i)||tm["Kangxi Radicals"](i)||tm["Katakana Phonetic Extensions"](i)||tm.Katakana(i)||tm["Vertical Forms"](i)||tm["Yi Radicals"](i)||tm["Yi Syllables"](i))}function charHasUprightVerticalOrientation(i){return 746===i||747===i||!(i<4352)&&!!(tm["Bopomofo Extended"](i)||tm.Bopomofo(i)||tm["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||tm["CJK Compatibility Ideographs"](i)||tm["CJK Compatibility"](i)||tm["CJK Radicals Supplement"](i)||tm["CJK Strokes"](i)||tm["CJK Symbols and Punctuation"](i)&&!(i>=12296&&i<=12305)&&!(i>=12308&&i<=12319)&&12336!==i||tm["CJK Unified Ideographs Extension A"](i)||tm["CJK Unified Ideographs"](i)||tm["Enclosed CJK Letters and Months"](i)||tm["Hangul Compatibility Jamo"](i)||tm["Hangul Jamo Extended-A"](i)||tm["Hangul Jamo Extended-B"](i)||tm["Hangul Jamo"](i)||tm["Hangul Syllables"](i)||tm.Hiragana(i)||tm["Ideographic Description Characters"](i)||tm.Kanbun(i)||tm["Kangxi Radicals"](i)||tm["Katakana Phonetic Extensions"](i)||tm.Katakana(i)&&12540!==i||tm["Halfwidth and Fullwidth Forms"](i)&&65288!==i&&65289!==i&&65293!==i&&!(i>=65306&&i<=65310)&&65339!==i&&65341!==i&&65343!==i&&!(i>=65371&&i<=65503)&&65507!==i&&!(i>=65512&&i<=65519)||tm["Small Form Variants"](i)&&!(i>=65112&&i<=65118)&&!(i>=65123&&i<=65126)||tm["Unified Canadian Aboriginal Syllabics"](i)||tm["Unified Canadian Aboriginal Syllabics Extended"](i)||tm["Vertical Forms"](i)||tm["Yijing Hexagram Symbols"](i)||tm["Yi Syllables"](i)||tm["Yi Radicals"](i))}function charHasNeutralVerticalOrientation(i){return!!(tm["Latin-1 Supplement"](i)&&(167===i||169===i||174===i||177===i||188===i||189===i||190===i||215===i||247===i)||tm["General Punctuation"](i)&&(8214===i||8224===i||8225===i||8240===i||8241===i||8251===i||8252===i||8258===i||8263===i||8264===i||8265===i||8273===i)||tm["Letterlike Symbols"](i)||tm["Number Forms"](i)||tm["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||9003===i||i>=9085&&i<=9114||i>=9150&&i<=9165||9167===i||i>=9169&&i<=9179||i>=9186&&i<=9215)||tm["Control Pictures"](i)&&9251!==i||tm["Optical Character Recognition"](i)||tm["Enclosed Alphanumerics"](i)||tm["Geometric Shapes"](i)||tm["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||tm["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||tm["CJK Symbols and Punctuation"](i)||tm.Katakana(i)||tm["Private Use Area"](i)||tm["CJK Compatibility Forms"](i)||tm["Small Form Variants"](i)||tm["Halfwidth and Fullwidth Forms"](i))||8734===i||8756===i||8757===i||i>=9984&&i<=10087||i>=10102&&i<=10131||65532===i||65533===i}function charInComplexShapingScript(i){return tm.Arabic(i)||tm["Arabic Supplement"](i)||tm["Arabic Extended-A"](i)||tm["Arabic Presentation Forms-A"](i)||tm["Arabic Presentation Forms-B"](i)}function charInRTLScript(i){return i>=1424&&i<=2303||tm["Arabic Presentation Forms-A"](i)||tm["Arabic Presentation Forms-B"](i)}function charInSupportedScript(i,o){return!(!o&&charInRTLScript(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||tm.Khmer(i))}function stringContainsRTLText(i){for(var o=0;o<i.length;o+=1)if(charInRTLScript(i[o].charCodeAt(0)))return!0;return!1}function isStringInSupportedScript(i,o){for(var s=0;s<i.length;s+=1)if(!charInSupportedScript(i[s].charCodeAt(0),o))return!1;return!0}var ty={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},tv=null,tx=ty.unavailable,tb=null,triggerPluginCompletionEvent=function(i){i&&"string"==typeof i&&i.indexOf("NetworkError")>-1&&(tx=ty.error),tv&&tv(i)};function sendPluginStateToWorker(){t_.fire(new Event("pluginStateChange",{pluginStatus:tx,pluginURL:tb}))}var t_=new Evented,getRTLTextPluginStatus=function(){return tx},downloadRTLTextPlugin=function(){if(tx!==ty.deferred||!tb)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");tx=ty.loading,sendPluginStateToWorker(),tb&&getArrayBuffer({url:tb},function(i){i?triggerPluginCompletionEvent(i):(tx=ty.loaded,sendPluginStateToWorker())})},tw={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return tx===ty.loaded||null!=tw.applyArabicShaping},isLoading:function(){return tx===ty.loading},setState:function(i){tx=i.pluginStatus,tb=i.pluginURL},isParsed:function(){return null!=tw.applyArabicShaping&&null!=tw.processBidirectionalText&&null!=tw.processStyledBidirectionalText},getPluginURL:function(){return tb}},lazyLoadRTLTextPlugin=function(){tw.isLoading()||tw.isLoaded()||"deferred"!==getRTLTextPluginStatus()||downloadRTLTextPlugin()},EvaluationParameters=function(i,o){this.zoom=i,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ZoomHistory,this.transition={})};EvaluationParameters.prototype.isSupportedScript=function(i){return isStringInSupportedScript(i,tw.isLoaded())},EvaluationParameters.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},EvaluationParameters.prototype.getCrossfadeParameters=function(){var i=this.zoom,o=i-Math.floor(i),s=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*o}};var PropertyValue=function(i,o){this.property=i,this.value=o,this.expression=normalizePropertyExpression(void 0===o?i.specification.default:o,i.specification)};PropertyValue.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},PropertyValue.prototype.possiblyEvaluate=function(i,o,s){return this.property.possiblyEvaluate(this,i,o,s)};var TransitionablePropertyValue=function(i){this.property=i,this.value=new PropertyValue(i,void 0)};TransitionablePropertyValue.prototype.transitioned=function(i,o){return new TransitioningPropertyValue(this.property,this.value,o,extend({},i.transition,this.transition),i.now)},TransitionablePropertyValue.prototype.untransitioned=function(){return new TransitioningPropertyValue(this.property,this.value,null,{},0)};var Transitionable=function(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)};Transitionable.prototype.getValue=function(i){return clone(this._values[i].value.value)},Transitionable.prototype.setValue=function(i,o){this._values.hasOwnProperty(i)||(this._values[i]=new TransitionablePropertyValue(this._values[i].property)),this._values[i].value=new PropertyValue(this._values[i].property,null===o?void 0:clone(o))},Transitionable.prototype.getTransition=function(i){return clone(this._values[i].transition)},Transitionable.prototype.setTransition=function(i,o){this._values.hasOwnProperty(i)||(this._values[i]=new TransitionablePropertyValue(this._values[i].property)),this._values[i].transition=clone(o)||void 0},Transitionable.prototype.serialize=function(){for(var i={},o=0,s=Object.keys(this._values);o<s.length;o+=1){var _=s[o],F=this.getValue(_);void 0!==F&&(i[_]=F);var N=this.getTransition(_);void 0!==N&&(i[_+"-transition"]=N)}return i},Transitionable.prototype.transitioned=function(i,o){for(var s=new Transitioning(this._properties),_=0,F=Object.keys(this._values);_<F.length;_+=1){var N=F[_];s._values[N]=this._values[N].transitioned(i,o._values[N])}return s},Transitionable.prototype.untransitioned=function(){for(var i=new Transitioning(this._properties),o=0,s=Object.keys(this._values);o<s.length;o+=1){var _=s[o];i._values[_]=this._values[_].untransitioned()}return i};var TransitioningPropertyValue=function(i,o,s,_,F){this.property=i,this.value=o,this.begin=F+_.delay||0,this.end=this.begin+_.duration||0,i.specification.transition&&(_.delay||_.duration)&&(this.prior=s)};TransitioningPropertyValue.prototype.possiblyEvaluate=function(i,o,s){var _=i.now||0,F=this.value.possiblyEvaluate(i,o,s),N=this.prior;if(!N)return F;if(_>this.end||this.value.isDataDriven())return this.prior=null,F;if(_<this.begin)return N.possiblyEvaluate(i,o,s);var j=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(N.possiblyEvaluate(i,o,s),F,easeCubicInOut(j))};var Transitioning=function(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)};Transitioning.prototype.possiblyEvaluate=function(i,o,s){for(var _=new PossiblyEvaluated(this._properties),F=0,N=Object.keys(this._values);F<N.length;F+=1){var j=N[F];_._values[j]=this._values[j].possiblyEvaluate(i,o,s)}return _},Transitioning.prototype.hasTransition=function(){for(var i=0,o=Object.keys(this._values);i<o.length;i+=1){var s=o[i];if(this._values[s].prior)return!0}return!1};var Layout=function(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)};Layout.prototype.getValue=function(i){return clone(this._values[i].value)},Layout.prototype.setValue=function(i,o){this._values[i]=new PropertyValue(this._values[i].property,null===o?void 0:clone(o))},Layout.prototype.serialize=function(){for(var i={},o=0,s=Object.keys(this._values);o<s.length;o+=1){var _=s[o],F=this.getValue(_);void 0!==F&&(i[_]=F)}return i},Layout.prototype.possiblyEvaluate=function(i,o,s){for(var _=new PossiblyEvaluated(this._properties),F=0,N=Object.keys(this._values);F<N.length;F+=1){var j=N[F];_._values[j]=this._values[j].possiblyEvaluate(i,o,s)}return _};var PossiblyEvaluatedPropertyValue=function(i,o,s){this.property=i,this.value=o,this.parameters=s};PossiblyEvaluatedPropertyValue.prototype.isConstant=function(){return"constant"===this.value.kind},PossiblyEvaluatedPropertyValue.prototype.constantOr=function(i){return"constant"===this.value.kind?this.value.value:i},PossiblyEvaluatedPropertyValue.prototype.evaluate=function(i,o,s,_){return this.property.evaluate(this.value,this.parameters,i,o,s,_)};var PossiblyEvaluated=function(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)};PossiblyEvaluated.prototype.get=function(i){return this._values[i]};var DataConstantProperty=function(i){this.specification=i};DataConstantProperty.prototype.possiblyEvaluate=function(i,o){return i.expression.evaluate(o)},DataConstantProperty.prototype.interpolate=function(i,o,s){var _=eJ[this.specification.type];return _?_(i,o,s):i};var DataDrivenProperty=function(i,o){this.specification=i,this.overrides=o};DataDrivenProperty.prototype.possiblyEvaluate=function(i,o,s,_){return"constant"===i.expression.kind||"camera"===i.expression.kind?new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:i.expression.evaluate(o,null,{},s,_)},o):new PossiblyEvaluatedPropertyValue(this,i.expression,o)},DataDrivenProperty.prototype.interpolate=function(i,o,s){if("constant"!==i.value.kind||"constant"!==o.value.kind)return i;if(void 0===i.value.value||void 0===o.value.value)return new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:void 0},i.parameters);var _=eJ[this.specification.type];return _?new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:_(i.value.value,o.value.value,s)},i.parameters):i},DataDrivenProperty.prototype.evaluate=function(i,o,s,_,F,N){return"constant"===i.kind?i.value:i.evaluate(o,s,_,F,N)};var tT=function(i){function CrossFadedDataDrivenProperty(){i.apply(this,arguments)}return i&&(CrossFadedDataDrivenProperty.__proto__=i),CrossFadedDataDrivenProperty.prototype=Object.create(i&&i.prototype),CrossFadedDataDrivenProperty.prototype.constructor=CrossFadedDataDrivenProperty,CrossFadedDataDrivenProperty.prototype.possiblyEvaluate=function(i,o,s,_){if(void 0===i.value)return new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:void 0},o);if("constant"===i.expression.kind){var F=i.expression.evaluate(o,null,{},s,_),N="resolvedImage"===i.property.specification.type&&"string"!=typeof F?F.name:F;return new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:this._calculate(N,N,N,o)},o)}return"camera"===i.expression.kind?new PossiblyEvaluatedPropertyValue(this,{kind:"constant",value:this._calculate(i.expression.evaluate({zoom:o.zoom-1}),i.expression.evaluate({zoom:o.zoom}),i.expression.evaluate({zoom:o.zoom+1}),o)},o):new PossiblyEvaluatedPropertyValue(this,i.expression,o)},CrossFadedDataDrivenProperty.prototype.evaluate=function(i,o,s,_,F,N){if("source"===i.kind){var j=i.evaluate(o,s,_,F,N);return this._calculate(j,j,j,o)}return"composite"===i.kind?this._calculate(i.evaluate({zoom:Math.floor(o.zoom)-1},s,_),i.evaluate({zoom:Math.floor(o.zoom)},s,_),i.evaluate({zoom:Math.floor(o.zoom)+1},s,_),o):i.value},CrossFadedDataDrivenProperty.prototype._calculate=function(i,o,s,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:i,to:o}:{from:s,to:o}},CrossFadedDataDrivenProperty.prototype.interpolate=function(i){return i},CrossFadedDataDrivenProperty}(DataDrivenProperty),CrossFadedProperty=function(i){this.specification=i};CrossFadedProperty.prototype.possiblyEvaluate=function(i,o,s,_){if(void 0!==i.value){if("constant"!==i.expression.kind)return this._calculate(i.expression.evaluate(new EvaluationParameters(Math.floor(o.zoom-1),o)),i.expression.evaluate(new EvaluationParameters(Math.floor(o.zoom),o)),i.expression.evaluate(new EvaluationParameters(Math.floor(o.zoom+1),o)),o);var F=i.expression.evaluate(o,null,{},s,_);return this._calculate(F,F,F,o)}},CrossFadedProperty.prototype._calculate=function(i,o,s,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:i,to:o}:{from:s,to:o}},CrossFadedProperty.prototype.interpolate=function(i){return i};var ColorRampProperty=function(i){this.specification=i};ColorRampProperty.prototype.possiblyEvaluate=function(i,o,s,_){return!!i.expression.evaluate(o,null,{},s,_)},ColorRampProperty.prototype.interpolate=function(){return!1};var Properties=function(i){for(var o in this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],i){var s=i[o];s.specification.overridable&&this.overridableProperties.push(o);var _=this.defaultPropertyValues[o]=new PropertyValue(s,void 0),F=this.defaultTransitionablePropertyValues[o]=new TransitionablePropertyValue(s);this.defaultTransitioningPropertyValues[o]=F.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=_.possiblyEvaluate({})}};register("DataDrivenProperty",DataDrivenProperty),register("DataConstantProperty",DataConstantProperty),register("CrossFadedDataDrivenProperty",tT),register("CrossFadedProperty",CrossFadedProperty),register("ColorRampProperty",ColorRampProperty);var tk="-transition",tA=function(i){function StyleLayer(o,s){if(i.call(this),this.id=o.id,this.type=o.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==o.type&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,"background"!==o.type&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),s.layout&&(this._unevaluatedLayout=new Layout(s.layout)),s.paint)){for(var _ in this._transitionablePaint=new Transitionable(s.paint),o.paint)this.setPaintProperty(_,o.paint[_],{validate:!1});for(var F in o.layout)this.setLayoutProperty(F,o.layout[F],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new PossiblyEvaluated(s.paint)}}return i&&(StyleLayer.__proto__=i),StyleLayer.prototype=Object.create(i&&i.prototype),StyleLayer.prototype.constructor=StyleLayer,StyleLayer.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},StyleLayer.prototype.getLayoutProperty=function(i){return"visibility"===i?this.visibility:this._unevaluatedLayout.getValue(i)},StyleLayer.prototype.setLayoutProperty=function(i,o,s){if(void 0===s&&(s={}),null!=o){var _="layers."+this.id+".layout."+i;if(this._validate(tu,_,i,o,s))return}if("visibility"===i){this.visibility=o;return}this._unevaluatedLayout.setValue(i,o)},StyleLayer.prototype.getPaintProperty=function(i){return endsWith(i,tk)?this._transitionablePaint.getTransition(i.slice(0,-tk.length)):this._transitionablePaint.getValue(i)},StyleLayer.prototype.setPaintProperty=function(i,o,s){if(void 0===s&&(s={}),null!=o){var _="layers."+this.id+".paint."+i;if(this._validate(tc,_,i,o,s))return!1}if(endsWith(i,tk))return this._transitionablePaint.setTransition(i.slice(0,-tk.length),o||void 0),!1;var F=this._transitionablePaint._values[i],N="cross-faded-data-driven"===F.property.specification["property-type"],j=F.value.isDataDriven(),Z=F.value;this._transitionablePaint.setValue(i,o),this._handleSpecialPaintPropertyUpdate(i);var X=this._transitionablePaint._values[i].value;return X.isDataDriven()||j||N||this._handleOverridablePaintPropertyUpdate(i,Z,X)},StyleLayer.prototype._handleSpecialPaintPropertyUpdate=function(i){},StyleLayer.prototype._handleOverridablePaintPropertyUpdate=function(i,o,s){return!1},StyleLayer.prototype.isHidden=function(i){return!!this.minzoom&&i<this.minzoom||!!this.maxzoom&&i>=this.maxzoom||"none"===this.visibility},StyleLayer.prototype.updateTransitions=function(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)},StyleLayer.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},StyleLayer.prototype.recalculate=function(i,o){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,o)},StyleLayer.prototype.serialize=function(){var i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),filterObject(i,function(i,o){return void 0!==i&&!("layout"===o&&!Object.keys(i).length)&&!("paint"===o&&!Object.keys(i).length)})},StyleLayer.prototype._validate=function(i,o,s,_,F){return void 0===F&&(F={}),(!F||!1!==F.validate)&&emitValidationErrors(this,i.call(ts,{key:o,layerType:this.type,objectKey:s,value:_,styleSpec:eO,style:{glyphs:!0,sprite:!0}}))},StyleLayer.prototype.is3D=function(){return!1},StyleLayer.prototype.isTileClipped=function(){return!1},StyleLayer.prototype.hasOffscreenPass=function(){return!1},StyleLayer.prototype.resize=function(){},StyleLayer.prototype.isStateDependent=function(){for(var i in this.paint._values){var o=this.paint.get(i);if(o instanceof PossiblyEvaluatedPropertyValue&&supportsPropertyExpression(o.property.specification)&&("source"===o.value.kind||"composite"===o.value.kind)&&o.value.isStateDependent)return!0}return!1},StyleLayer}(Evented),tS={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Struct=function(i,o){this._structArray=i,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},StructArray=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function createLayout(i,o){void 0===o&&(o=1);var s=0,_=0;return{members:i.map(function(i){var F=sizeOf(i.type),N=s=align(s,Math.max(o,F)),j=i.components||1;return _=Math.max(_,F),s+=F*j,{name:i.name,type:i.type,components:j,offset:N}}),size:align(s,Math.max(_,o)),alignment:o}}function sizeOf(i){return tS[i].BYTES_PER_ELEMENT}function align(i,o){return Math.ceil(i/o)*o}StructArray.serialize=function(i,o){return i._trim(),o&&(i.isTransferred=!0,o.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}},StructArray.deserialize=function(i){var o=Object.create(this.prototype);return o.arrayBuffer=i.arrayBuffer,o.length=i.length,o.capacity=i.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o},StructArray.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},StructArray.prototype.clear=function(){this.length=0},StructArray.prototype.resize=function(i){this.reserve(i),this.length=i},StructArray.prototype.reserve=function(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}},StructArray.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout")};var tM=function(i){function StructArrayLayout2i4(){i.apply(this,arguments)}return i&&(StructArrayLayout2i4.__proto__=i),StructArrayLayout2i4.prototype=Object.create(i&&i.prototype),StructArrayLayout2i4.prototype.constructor=StructArrayLayout2i4,StructArrayLayout2i4.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout2i4.prototype.emplaceBack=function(i,o){var s=this.length;return this.resize(s+1),this.emplace(s,i,o)},StructArrayLayout2i4.prototype.emplace=function(i,o,s){var _=2*i;return this.int16[_+0]=o,this.int16[_+1]=s,i},StructArrayLayout2i4}(StructArray);tM.prototype.bytesPerElement=4,register("StructArrayLayout2i4",tM);var tC=function(i){function StructArrayLayout4i8(){i.apply(this,arguments)}return i&&(StructArrayLayout4i8.__proto__=i),StructArrayLayout4i8.prototype=Object.create(i&&i.prototype),StructArrayLayout4i8.prototype.constructor=StructArrayLayout4i8,StructArrayLayout4i8.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout4i8.prototype.emplaceBack=function(i,o,s,_){var F=this.length;return this.resize(F+1),this.emplace(F,i,o,s,_)},StructArrayLayout4i8.prototype.emplace=function(i,o,s,_,F){var N=4*i;return this.int16[N+0]=o,this.int16[N+1]=s,this.int16[N+2]=_,this.int16[N+3]=F,i},StructArrayLayout4i8}(StructArray);tC.prototype.bytesPerElement=8,register("StructArrayLayout4i8",tC);var tE=function(i){function StructArrayLayout2i4i12(){i.apply(this,arguments)}return i&&(StructArrayLayout2i4i12.__proto__=i),StructArrayLayout2i4i12.prototype=Object.create(i&&i.prototype),StructArrayLayout2i4i12.prototype.constructor=StructArrayLayout2i4i12,StructArrayLayout2i4i12.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout2i4i12.prototype.emplaceBack=function(i,o,s,_,F,N){var j=this.length;return this.resize(j+1),this.emplace(j,i,o,s,_,F,N)},StructArrayLayout2i4i12.prototype.emplace=function(i,o,s,_,F,N,j){var Z=6*i;return this.int16[Z+0]=o,this.int16[Z+1]=s,this.int16[Z+2]=_,this.int16[Z+3]=F,this.int16[Z+4]=N,this.int16[Z+5]=j,i},StructArrayLayout2i4i12}(StructArray);tE.prototype.bytesPerElement=12,register("StructArrayLayout2i4i12",tE);var tL=function(i){function StructArrayLayout2i4ub8(){i.apply(this,arguments)}return i&&(StructArrayLayout2i4ub8.__proto__=i),StructArrayLayout2i4ub8.prototype=Object.create(i&&i.prototype),StructArrayLayout2i4ub8.prototype.constructor=StructArrayLayout2i4ub8,StructArrayLayout2i4ub8.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout2i4ub8.prototype.emplaceBack=function(i,o,s,_,F,N){var j=this.length;return this.resize(j+1),this.emplace(j,i,o,s,_,F,N)},StructArrayLayout2i4ub8.prototype.emplace=function(i,o,s,_,F,N,j){var Z=4*i,X=8*i;return this.int16[Z+0]=o,this.int16[Z+1]=s,this.uint8[X+4]=_,this.uint8[X+5]=F,this.uint8[X+6]=N,this.uint8[X+7]=j,i},StructArrayLayout2i4ub8}(StructArray);tL.prototype.bytesPerElement=8,register("StructArrayLayout2i4ub8",tL);var tP=function(i){function StructArrayLayout8ui2ub18(){i.apply(this,arguments)}return i&&(StructArrayLayout8ui2ub18.__proto__=i),StructArrayLayout8ui2ub18.prototype=Object.create(i&&i.prototype),StructArrayLayout8ui2ub18.prototype.constructor=StructArrayLayout8ui2ub18,StructArrayLayout8ui2ub18.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout8ui2ub18.prototype.emplaceBack=function(i,o,s,_,F,N,j,Z,X,$){var ee=this.length;return this.resize(ee+1),this.emplace(ee,i,o,s,_,F,N,j,Z,X,$)},StructArrayLayout8ui2ub18.prototype.emplace=function(i,o,s,_,F,N,j,Z,X,$,ee){var et=9*i,er=18*i;return this.uint16[et+0]=o,this.uint16[et+1]=s,this.uint16[et+2]=_,this.uint16[et+3]=F,this.uint16[et+4]=N,this.uint16[et+5]=j,this.uint16[et+6]=Z,this.uint16[et+7]=X,this.uint8[er+16]=$,this.uint8[er+17]=ee,i},StructArrayLayout8ui2ub18}(StructArray);tP.prototype.bytesPerElement=18,register("StructArrayLayout8ui2ub18",tP);var tI=function(i){function StructArrayLayout4i4ui4i24(){i.apply(this,arguments)}return i&&(StructArrayLayout4i4ui4i24.__proto__=i),StructArrayLayout4i4ui4i24.prototype=Object.create(i&&i.prototype),StructArrayLayout4i4ui4i24.prototype.constructor=StructArrayLayout4i4ui4i24,StructArrayLayout4i4ui4i24.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout4i4ui4i24.prototype.emplaceBack=function(i,o,s,_,F,N,j,Z,X,$,ee,et){var er=this.length;return this.resize(er+1),this.emplace(er,i,o,s,_,F,N,j,Z,X,$,ee,et)},StructArrayLayout4i4ui4i24.prototype.emplace=function(i,o,s,_,F,N,j,Z,X,$,ee,et,er){var en=12*i;return this.int16[en+0]=o,this.int16[en+1]=s,this.int16[en+2]=_,this.int16[en+3]=F,this.uint16[en+4]=N,this.uint16[en+5]=j,this.uint16[en+6]=Z,this.uint16[en+7]=X,this.int16[en+8]=$,this.int16[en+9]=ee,this.int16[en+10]=et,this.int16[en+11]=er,i},StructArrayLayout4i4ui4i24}(StructArray);tI.prototype.bytesPerElement=24,register("StructArrayLayout4i4ui4i24",tI);var tO=function(i){function StructArrayLayout3f12(){i.apply(this,arguments)}return i&&(StructArrayLayout3f12.__proto__=i),StructArrayLayout3f12.prototype=Object.create(i&&i.prototype),StructArrayLayout3f12.prototype.constructor=StructArrayLayout3f12,StructArrayLayout3f12.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout3f12.prototype.emplaceBack=function(i,o,s){var _=this.length;return this.resize(_+1),this.emplace(_,i,o,s)},StructArrayLayout3f12.prototype.emplace=function(i,o,s,_){var F=3*i;return this.float32[F+0]=o,this.float32[F+1]=s,this.float32[F+2]=_,i},StructArrayLayout3f12}(StructArray);tO.prototype.bytesPerElement=12,register("StructArrayLayout3f12",tO);var tD=function(i){function StructArrayLayout1ul4(){i.apply(this,arguments)}return i&&(StructArrayLayout1ul4.__proto__=i),StructArrayLayout1ul4.prototype=Object.create(i&&i.prototype),StructArrayLayout1ul4.prototype.constructor=StructArrayLayout1ul4,StructArrayLayout1ul4.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},StructArrayLayout1ul4.prototype.emplaceBack=function(i){var o=this.length;return this.resize(o+1),this.emplace(o,i)},StructArrayLayout1ul4.prototype.emplace=function(i,o){return this.uint32[1*i+0]=o,i},StructArrayLayout1ul4}(StructArray);tD.prototype.bytesPerElement=4,register("StructArrayLayout1ul4",tD);var tR=function(i){function StructArrayLayout6i1ul2ui20(){i.apply(this,arguments)}return i&&(StructArrayLayout6i1ul2ui20.__proto__=i),StructArrayLayout6i1ul2ui20.prototype=Object.create(i&&i.prototype),StructArrayLayout6i1ul2ui20.prototype.constructor=StructArrayLayout6i1ul2ui20,StructArrayLayout6i1ul2ui20.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout6i1ul2ui20.prototype.emplaceBack=function(i,o,s,_,F,N,j,Z,X){var $=this.length;return this.resize($+1),this.emplace($,i,o,s,_,F,N,j,Z,X)},StructArrayLayout6i1ul2ui20.prototype.emplace=function(i,o,s,_,F,N,j,Z,X,$){var ee=10*i;return this.int16[ee+0]=o,this.int16[ee+1]=s,this.int16[ee+2]=_,this.int16[ee+3]=F,this.int16[ee+4]=N,this.int16[ee+5]=j,this.uint32[5*i+3]=Z,this.uint16[ee+8]=X,this.uint16[ee+9]=$,i},StructArrayLayout6i1ul2ui20}(StructArray);tR.prototype.bytesPerElement=20,register("StructArrayLayout6i1ul2ui20",tR);var tB=function(i){function StructArrayLayout2i2i2i12(){i.apply(this,arguments)}return i&&(StructArrayLayout2i2i2i12.__proto__=i),StructArrayLayout2i2i2i12.prototype=Object.create(i&&i.prototype),StructArrayLayout2i2i2i12.prototype.constructor=StructArrayLayout2i2i2i12,StructArrayLayout2i2i2i12.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout2i2i2i12.prototype.emplaceBack=function(i,o,s,_,F,N){var j=this.length;return this.resize(j+1),this.emplace(j,i,o,s,_,F,N)},StructArrayLayout2i2i2i12.prototype.emplace=function(i,o,s,_,F,N,j){var Z=6*i;return this.int16[Z+0]=o,this.int16[Z+1]=s,this.int16[Z+2]=_,this.int16[Z+3]=F,this.int16[Z+4]=N,this.int16[Z+5]=j,i},StructArrayLayout2i2i2i12}(StructArray);tB.prototype.bytesPerElement=12,register("StructArrayLayout2i2i2i12",tB);var tF=function(i){function StructArrayLayout2f1f2i16(){i.apply(this,arguments)}return i&&(StructArrayLayout2f1f2i16.__proto__=i),StructArrayLayout2f1f2i16.prototype=Object.create(i&&i.prototype),StructArrayLayout2f1f2i16.prototype.constructor=StructArrayLayout2f1f2i16,StructArrayLayout2f1f2i16.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout2f1f2i16.prototype.emplaceBack=function(i,o,s,_,F){var N=this.length;return this.resize(N+1),this.emplace(N,i,o,s,_,F)},StructArrayLayout2f1f2i16.prototype.emplace=function(i,o,s,_,F,N){var j=4*i,Z=8*i;return this.float32[j+0]=o,this.float32[j+1]=s,this.float32[j+2]=_,this.int16[Z+6]=F,this.int16[Z+7]=N,i},StructArrayLayout2f1f2i16}(StructArray);tF.prototype.bytesPerElement=16,register("StructArrayLayout2f1f2i16",tF);var tz=function(i){function StructArrayLayout2ub2f12(){i.apply(this,arguments)}return i&&(StructArrayLayout2ub2f12.__proto__=i),StructArrayLayout2ub2f12.prototype=Object.create(i&&i.prototype),StructArrayLayout2ub2f12.prototype.constructor=StructArrayLayout2ub2f12,StructArrayLayout2ub2f12.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout2ub2f12.prototype.emplaceBack=function(i,o,s,_){var F=this.length;return this.resize(F+1),this.emplace(F,i,o,s,_)},StructArrayLayout2ub2f12.prototype.emplace=function(i,o,s,_,F){var N=12*i,j=3*i;return this.uint8[N+0]=o,this.uint8[N+1]=s,this.float32[j+1]=_,this.float32[j+2]=F,i},StructArrayLayout2ub2f12}(StructArray);tz.prototype.bytesPerElement=12,register("StructArrayLayout2ub2f12",tz);var tN=function(i){function StructArrayLayout3ui6(){i.apply(this,arguments)}return i&&(StructArrayLayout3ui6.__proto__=i),StructArrayLayout3ui6.prototype=Object.create(i&&i.prototype),StructArrayLayout3ui6.prototype.constructor=StructArrayLayout3ui6,StructArrayLayout3ui6.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout3ui6.prototype.emplaceBack=function(i,o,s){var _=this.length;return this.resize(_+1),this.emplace(_,i,o,s)},StructArrayLayout3ui6.prototype.emplace=function(i,o,s,_){var F=3*i;return this.uint16[F+0]=o,this.uint16[F+1]=s,this.uint16[F+2]=_,i},StructArrayLayout3ui6}(StructArray);tN.prototype.bytesPerElement=6,register("StructArrayLayout3ui6",tN);var tj=function(i){function StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48(){i.apply(this,arguments)}return i&&(StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.__proto__=i),StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.prototype=Object.create(i&&i.prototype),StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.prototype.constructor=StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48,StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.prototype.emplaceBack=function(i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei,eo,es){var el=this.length;return this.resize(el+1),this.emplace(el,i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei,eo,es)},StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48.prototype.emplace=function(i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el){var ec=24*i,eu=12*i,ef=48*i;return this.int16[ec+0]=o,this.int16[ec+1]=s,this.uint16[ec+2]=_,this.uint16[ec+3]=F,this.uint32[eu+2]=N,this.uint32[eu+3]=j,this.uint32[eu+4]=Z,this.uint16[ec+10]=X,this.uint16[ec+11]=$,this.uint16[ec+12]=ee,this.float32[eu+7]=et,this.float32[eu+8]=er,this.uint8[ef+36]=en,this.uint8[ef+37]=ei,this.uint8[ef+38]=eo,this.uint32[eu+10]=es,this.int16[ec+22]=el,i},StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48}(StructArray);tj.prototype.bytesPerElement=48,register("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",tj);var tV=function(i){function StructArrayLayout8i15ui1ul4f68(){i.apply(this,arguments)}return i&&(StructArrayLayout8i15ui1ul4f68.__proto__=i),StructArrayLayout8i15ui1ul4f68.prototype=Object.create(i&&i.prototype),StructArrayLayout8i15ui1ul4f68.prototype.constructor=StructArrayLayout8i15ui1ul4f68,StructArrayLayout8i15ui1ul4f68.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout8i15ui1ul4f68.prototype.emplaceBack=function(i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg,em,ey,ev){var ex=this.length;return this.resize(ex+1),this.emplace(ex,i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg,em,ey,ev)},StructArrayLayout8i15ui1ul4f68.prototype.emplace=function(i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg,em,ey,ev,ex){var e_=34*i,ew=17*i;return this.int16[e_+0]=o,this.int16[e_+1]=s,this.int16[e_+2]=_,this.int16[e_+3]=F,this.int16[e_+4]=N,this.int16[e_+5]=j,this.int16[e_+6]=Z,this.int16[e_+7]=X,this.uint16[e_+8]=$,this.uint16[e_+9]=ee,this.uint16[e_+10]=et,this.uint16[e_+11]=er,this.uint16[e_+12]=en,this.uint16[e_+13]=ei,this.uint16[e_+14]=eo,this.uint16[e_+15]=es,this.uint16[e_+16]=el,this.uint16[e_+17]=ec,this.uint16[e_+18]=eu,this.uint16[e_+19]=ef,this.uint16[e_+20]=ed,this.uint16[e_+21]=eh,this.uint16[e_+22]=ep,this.uint32[ew+12]=eg,this.float32[ew+13]=em,this.float32[ew+14]=ey,this.float32[ew+15]=ev,this.float32[ew+16]=ex,i},StructArrayLayout8i15ui1ul4f68}(StructArray);tV.prototype.bytesPerElement=68,register("StructArrayLayout8i15ui1ul4f68",tV);var tU=function(i){function StructArrayLayout1f4(){i.apply(this,arguments)}return i&&(StructArrayLayout1f4.__proto__=i),StructArrayLayout1f4.prototype=Object.create(i&&i.prototype),StructArrayLayout1f4.prototype.constructor=StructArrayLayout1f4,StructArrayLayout1f4.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout1f4.prototype.emplaceBack=function(i){var o=this.length;return this.resize(o+1),this.emplace(o,i)},StructArrayLayout1f4.prototype.emplace=function(i,o){return this.float32[1*i+0]=o,i},StructArrayLayout1f4}(StructArray);tU.prototype.bytesPerElement=4,register("StructArrayLayout1f4",tU);var tH=function(i){function StructArrayLayout3i6(){i.apply(this,arguments)}return i&&(StructArrayLayout3i6.__proto__=i),StructArrayLayout3i6.prototype=Object.create(i&&i.prototype),StructArrayLayout3i6.prototype.constructor=StructArrayLayout3i6,StructArrayLayout3i6.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},StructArrayLayout3i6.prototype.emplaceBack=function(i,o,s){var _=this.length;return this.resize(_+1),this.emplace(_,i,o,s)},StructArrayLayout3i6.prototype.emplace=function(i,o,s,_){var F=3*i;return this.int16[F+0]=o,this.int16[F+1]=s,this.int16[F+2]=_,i},StructArrayLayout3i6}(StructArray);tH.prototype.bytesPerElement=6,register("StructArrayLayout3i6",tH);var tq=function(i){function StructArrayLayout1ul2ui8(){i.apply(this,arguments)}return i&&(StructArrayLayout1ul2ui8.__proto__=i),StructArrayLayout1ul2ui8.prototype=Object.create(i&&i.prototype),StructArrayLayout1ul2ui8.prototype.constructor=StructArrayLayout1ul2ui8,StructArrayLayout1ul2ui8.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout1ul2ui8.prototype.emplaceBack=function(i,o,s){var _=this.length;return this.resize(_+1),this.emplace(_,i,o,s)},StructArrayLayout1ul2ui8.prototype.emplace=function(i,o,s,_){var F=4*i;return this.uint32[2*i+0]=o,this.uint16[F+2]=s,this.uint16[F+3]=_,i},StructArrayLayout1ul2ui8}(StructArray);tq.prototype.bytesPerElement=8,register("StructArrayLayout1ul2ui8",tq);var tG=function(i){function StructArrayLayout2ui4(){i.apply(this,arguments)}return i&&(StructArrayLayout2ui4.__proto__=i),StructArrayLayout2ui4.prototype=Object.create(i&&i.prototype),StructArrayLayout2ui4.prototype.constructor=StructArrayLayout2ui4,StructArrayLayout2ui4.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout2ui4.prototype.emplaceBack=function(i,o){var s=this.length;return this.resize(s+1),this.emplace(s,i,o)},StructArrayLayout2ui4.prototype.emplace=function(i,o,s){var _=2*i;return this.uint16[_+0]=o,this.uint16[_+1]=s,i},StructArrayLayout2ui4}(StructArray);tG.prototype.bytesPerElement=4,register("StructArrayLayout2ui4",tG);var tW=function(i){function StructArrayLayout1ui2(){i.apply(this,arguments)}return i&&(StructArrayLayout1ui2.__proto__=i),StructArrayLayout1ui2.prototype=Object.create(i&&i.prototype),StructArrayLayout1ui2.prototype.constructor=StructArrayLayout1ui2,StructArrayLayout1ui2.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},StructArrayLayout1ui2.prototype.emplaceBack=function(i){var o=this.length;return this.resize(o+1),this.emplace(o,i)},StructArrayLayout1ui2.prototype.emplace=function(i,o){return this.uint16[1*i+0]=o,i},StructArrayLayout1ui2}(StructArray);tW.prototype.bytesPerElement=2,register("StructArrayLayout1ui2",tW);var tZ=function(i){function StructArrayLayout2f8(){i.apply(this,arguments)}return i&&(StructArrayLayout2f8.__proto__=i),StructArrayLayout2f8.prototype=Object.create(i&&i.prototype),StructArrayLayout2f8.prototype.constructor=StructArrayLayout2f8,StructArrayLayout2f8.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout2f8.prototype.emplaceBack=function(i,o){var s=this.length;return this.resize(s+1),this.emplace(s,i,o)},StructArrayLayout2f8.prototype.emplace=function(i,o,s){var _=2*i;return this.float32[_+0]=o,this.float32[_+1]=s,i},StructArrayLayout2f8}(StructArray);tZ.prototype.bytesPerElement=8,register("StructArrayLayout2f8",tZ);var tY=function(i){function StructArrayLayout4f16(){i.apply(this,arguments)}return i&&(StructArrayLayout4f16.__proto__=i),StructArrayLayout4f16.prototype=Object.create(i&&i.prototype),StructArrayLayout4f16.prototype.constructor=StructArrayLayout4f16,StructArrayLayout4f16.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},StructArrayLayout4f16.prototype.emplaceBack=function(i,o,s,_){var F=this.length;return this.resize(F+1),this.emplace(F,i,o,s,_)},StructArrayLayout4f16.prototype.emplace=function(i,o,s,_,F){var N=4*i;return this.float32[N+0]=o,this.float32[N+1]=s,this.float32[N+2]=_,this.float32[N+3]=F,i},StructArrayLayout4f16}(StructArray);tY.prototype.bytesPerElement=16,register("StructArrayLayout4f16",tY);var tX=function(i){function CollisionBoxStruct(){i.apply(this,arguments)}i&&(CollisionBoxStruct.__proto__=i),CollisionBoxStruct.prototype=Object.create(i&&i.prototype),CollisionBoxStruct.prototype.constructor=CollisionBoxStruct;var o={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return o.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},o.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},o.x1.get=function(){return this._structArray.int16[this._pos2+2]},o.y1.get=function(){return this._structArray.int16[this._pos2+3]},o.x2.get=function(){return this._structArray.int16[this._pos2+4]},o.y2.get=function(){return this._structArray.int16[this._pos2+5]},o.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},o.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},o.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},o.anchorPoint.get=function(){return new er(this.anchorPointX,this.anchorPointY)},Object.defineProperties(CollisionBoxStruct.prototype,o),CollisionBoxStruct}(Struct);tX.prototype.size=20;var tK=function(i){function CollisionBoxArray(){i.apply(this,arguments)}return i&&(CollisionBoxArray.__proto__=i),CollisionBoxArray.prototype=Object.create(i&&i.prototype),CollisionBoxArray.prototype.constructor=CollisionBoxArray,CollisionBoxArray.prototype.get=function(i){return new tX(this,i)},CollisionBoxArray}(tR);register("CollisionBoxArray",tK);var tJ=function(i){function PlacedSymbolStruct(){i.apply(this,arguments)}i&&(PlacedSymbolStruct.__proto__=i),PlacedSymbolStruct.prototype=Object.create(i&&i.prototype),PlacedSymbolStruct.prototype.constructor=PlacedSymbolStruct;var o={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return o.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},o.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},o.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},o.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},o.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},o.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},o.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},o.segment.get=function(){return this._structArray.uint16[this._pos2+10]},o.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},o.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},o.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},o.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},o.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},o.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},o.placedOrientation.set=function(i){this._structArray.uint8[this._pos1+37]=i},o.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},o.hidden.set=function(i){this._structArray.uint8[this._pos1+38]=i},o.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},o.crossTileID.set=function(i){this._structArray.uint32[this._pos4+10]=i},o.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(PlacedSymbolStruct.prototype,o),PlacedSymbolStruct}(Struct);tJ.prototype.size=48;var t$=function(i){function PlacedSymbolArray(){i.apply(this,arguments)}return i&&(PlacedSymbolArray.__proto__=i),PlacedSymbolArray.prototype=Object.create(i&&i.prototype),PlacedSymbolArray.prototype.constructor=PlacedSymbolArray,PlacedSymbolArray.prototype.get=function(i){return new tJ(this,i)},PlacedSymbolArray}(tj);register("PlacedSymbolArray",t$);var tQ=function(i){function SymbolInstanceStruct(){i.apply(this,arguments)}i&&(SymbolInstanceStruct.__proto__=i),SymbolInstanceStruct.prototype=Object.create(i&&i.prototype),SymbolInstanceStruct.prototype.constructor=SymbolInstanceStruct;var o={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return o.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},o.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},o.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},o.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},o.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},o.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},o.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},o.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},o.key.get=function(){return this._structArray.uint16[this._pos2+8]},o.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},o.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},o.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},o.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},o.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},o.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},o.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},o.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},o.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},o.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},o.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},o.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},o.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},o.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},o.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},o.crossTileID.set=function(i){this._structArray.uint32[this._pos4+12]=i},o.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},o.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},o.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},o.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(SymbolInstanceStruct.prototype,o),SymbolInstanceStruct}(Struct);tQ.prototype.size=68;var t0=function(i){function SymbolInstanceArray(){i.apply(this,arguments)}return i&&(SymbolInstanceArray.__proto__=i),SymbolInstanceArray.prototype=Object.create(i&&i.prototype),SymbolInstanceArray.prototype.constructor=SymbolInstanceArray,SymbolInstanceArray.prototype.get=function(i){return new tQ(this,i)},SymbolInstanceArray}(tV);register("SymbolInstanceArray",t0);var t1=function(i){function GlyphOffsetArray(){i.apply(this,arguments)}return i&&(GlyphOffsetArray.__proto__=i),GlyphOffsetArray.prototype=Object.create(i&&i.prototype),GlyphOffsetArray.prototype.constructor=GlyphOffsetArray,GlyphOffsetArray.prototype.getoffsetX=function(i){return this.float32[1*i+0]},GlyphOffsetArray}(tU);register("GlyphOffsetArray",t1);var t2=function(i){function SymbolLineVertexArray(){i.apply(this,arguments)}return i&&(SymbolLineVertexArray.__proto__=i),SymbolLineVertexArray.prototype=Object.create(i&&i.prototype),SymbolLineVertexArray.prototype.constructor=SymbolLineVertexArray,SymbolLineVertexArray.prototype.getx=function(i){return this.int16[3*i+0]},SymbolLineVertexArray.prototype.gety=function(i){return this.int16[3*i+1]},SymbolLineVertexArray.prototype.gettileUnitDistanceFromAnchor=function(i){return this.int16[3*i+2]},SymbolLineVertexArray}(tH);register("SymbolLineVertexArray",t2);var t3=function(i){function FeatureIndexStruct(){i.apply(this,arguments)}i&&(FeatureIndexStruct.__proto__=i),FeatureIndexStruct.prototype=Object.create(i&&i.prototype),FeatureIndexStruct.prototype.constructor=FeatureIndexStruct;var o={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return o.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},o.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},o.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(FeatureIndexStruct.prototype,o),FeatureIndexStruct}(Struct);t3.prototype.size=8;var t5=function(i){function FeatureIndexArray(){i.apply(this,arguments)}return i&&(FeatureIndexArray.__proto__=i),FeatureIndexArray.prototype=Object.create(i&&i.prototype),FeatureIndexArray.prototype.constructor=FeatureIndexArray,FeatureIndexArray.prototype.get=function(i){return new t3(this,i)},FeatureIndexArray}(tq);register("FeatureIndexArray",t5);var t4=createLayout([{name:"a_pos",components:2,type:"Int16"}],4).members,SegmentVector=function(i){void 0===i&&(i=[]),this.segments=i};function packUint8ToFloat(i,o){return 256*(i=clamp(Math.floor(i),0,255))+(o=clamp(Math.floor(o),0,255))}SegmentVector.prototype.prepareSegment=function(i,o,s,_){var F=this.segments[this.segments.length-1];return i>SegmentVector.MAX_VERTEX_ARRAY_LENGTH&&warnOnce("Max vertices per segment is "+SegmentVector.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+i),(!F||F.vertexLength+i>SegmentVector.MAX_VERTEX_ARRAY_LENGTH||F.sortKey!==_)&&(F={vertexOffset:o.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},void 0!==_&&(F.sortKey=_),this.segments.push(F)),F},SegmentVector.prototype.get=function(){return this.segments},SegmentVector.prototype.destroy=function(){for(var i=0,o=this.segments;i<o.length;i+=1){var s=o[i];for(var _ in s.vaos)s.vaos[_].destroy()}},SegmentVector.simpleSegment=function(i,o,s,_){return new SegmentVector([{vertexOffset:i,primitiveOffset:o,vertexLength:s,primitiveLength:_,vaos:{},sortKey:0}])},SegmentVector.MAX_VERTEX_ARRAY_LENGTH=65535,register("SegmentVector",SegmentVector);var t6=createLayout([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),t8=createCommonjsModule(function(i){function murmurhash3_32_gc(i,o){var s,_,F,N,j,Z;for(s=3&i.length,_=i.length-s,F=o,Z=0;Z<_;)j=255&i.charCodeAt(Z)|(255&i.charCodeAt(++Z))<<8|(255&i.charCodeAt(++Z))<<16|(255&i.charCodeAt(++Z))<<24,++Z,F^=j=(65535&(j=(j=(65535&j)*3432918353+(((j>>>16)*3432918353&65535)<<16)&4294967295)<<15|j>>>17))*461845907+(((j>>>16)*461845907&65535)<<16)&4294967295,F=(65535&(N=(65535&(F=F<<13|F>>>19))*5+(((F>>>16)*5&65535)<<16)&4294967295))+27492+(((N>>>16)+58964&65535)<<16);switch(j=0,s){case 3:j^=(255&i.charCodeAt(Z+2))<<16;case 2:j^=(255&i.charCodeAt(Z+1))<<8;case 1:j^=255&i.charCodeAt(Z),F^=j=(65535&(j=(j=(65535&j)*3432918353+(((j>>>16)*3432918353&65535)<<16)&4294967295)<<15|j>>>17))*461845907+(((j>>>16)*461845907&65535)<<16)&4294967295}return F^=i.length,F^=F>>>16,F=(65535&F)*2246822507+(((F>>>16)*2246822507&65535)<<16)&4294967295,F^=F>>>13,F=(65535&F)*3266489909+(((F>>>16)*3266489909&65535)<<16)&4294967295,(F^=F>>>16)>>>0}i.exports=murmurhash3_32_gc}),t7=createCommonjsModule(function(i){function murmurhash2_32_gc(i,o){for(var s,_=i.length,F=o^_,N=0;_>=4;)s=(65535&(s=255&i.charCodeAt(N)|(255&i.charCodeAt(++N))<<8|(255&i.charCodeAt(++N))<<16|(255&i.charCodeAt(++N))<<24))*1540483477+(((s>>>16)*1540483477&65535)<<16),s^=s>>>24,F=(65535&F)*1540483477+(((F>>>16)*1540483477&65535)<<16)^(s=(65535&s)*1540483477+(((s>>>16)*1540483477&65535)<<16)),_-=4,++N;switch(_){case 3:F^=(255&i.charCodeAt(N+2))<<16;case 2:F^=(255&i.charCodeAt(N+1))<<8;case 1:F^=255&i.charCodeAt(N),F=(65535&F)*1540483477+(((F>>>16)*1540483477&65535)<<16)}return F^=F>>>13,F=(65535&F)*1540483477+(((F>>>16)*1540483477&65535)<<16),(F^=F>>>15)>>>0}i.exports=murmurhash2_32_gc});t8.murmur3=t8,t8.murmur2=t7;var FeaturePositionMap=function(){this.ids=[],this.positions=[],this.indexed=!1};function getNumericId(i){var o=+i;return!isNaN(o)&&o<=9007199254740991?o:t8(String(i))}function sort(i,o,s,_){for(;s<_;){for(var F=i[s+_>>1],N=s-1,j=_+1;;){do N++;while(i[N]<F);do j--;while(i[j]>F);if(N>=j)break;swap(i,N,j),swap(o,3*N,3*j),swap(o,3*N+1,3*j+1),swap(o,3*N+2,3*j+2)}j-s<_-j?(sort(i,o,s,j),s=j+1):(sort(i,o,j+1,_),_=j)}}function swap(i,o,s){var _=i[o];i[o]=i[s],i[s]=_}FeaturePositionMap.prototype.add=function(i,o,s,_){this.ids.push(getNumericId(i)),this.positions.push(o,s,_)},FeaturePositionMap.prototype.getPositions=function(i){for(var o=getNumericId(i),s=0,_=this.ids.length-1;s<_;){var F=s+_>>1;this.ids[F]>=o?_=F:s=F+1}for(var N=[];this.ids[s]===o;){var j=this.positions[3*s],Z=this.positions[3*s+1],X=this.positions[3*s+2];N.push({index:j,start:Z,end:X}),s++}return N},FeaturePositionMap.serialize=function(i,o){var s=new Float64Array(i.ids),_=new Uint32Array(i.positions);return sort(s,_,0,s.length-1),o&&o.push(s.buffer,_.buffer),{ids:s,positions:_}},FeaturePositionMap.deserialize=function(i){var o=new FeaturePositionMap;return o.ids=i.ids,o.positions=i.positions,o.indexed=!0,o},register("FeaturePositionMap",FeaturePositionMap);var Uniform=function(i,o){this.gl=i.gl,this.location=o},t9=function(i){function Uniform1i(o,s){i.call(this,o,s),this.current=0}return i&&(Uniform1i.__proto__=i),Uniform1i.prototype=Object.create(i&&i.prototype),Uniform1i.prototype.constructor=Uniform1i,Uniform1i.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))},Uniform1i}(Uniform),re=function(i){function Uniform1f(o,s){i.call(this,o,s),this.current=0}return i&&(Uniform1f.__proto__=i),Uniform1f.prototype=Object.create(i&&i.prototype),Uniform1f.prototype.constructor=Uniform1f,Uniform1f.prototype.set=function(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))},Uniform1f}(Uniform),rt=function(i){function Uniform2f(o,s){i.call(this,o,s),this.current=[0,0]}return i&&(Uniform2f.__proto__=i),Uniform2f.prototype=Object.create(i&&i.prototype),Uniform2f.prototype.constructor=Uniform2f,Uniform2f.prototype.set=function(i){(i[0]!==this.current[0]||i[1]!==this.current[1])&&(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))},Uniform2f}(Uniform),rr=function(i){function Uniform3f(o,s){i.call(this,o,s),this.current=[0,0,0]}return i&&(Uniform3f.__proto__=i),Uniform3f.prototype=Object.create(i&&i.prototype),Uniform3f.prototype.constructor=Uniform3f,Uniform3f.prototype.set=function(i){(i[0]!==this.current[0]||i[1]!==this.current[1]||i[2]!==this.current[2])&&(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))},Uniform3f}(Uniform),rn=function(i){function Uniform4f(o,s){i.call(this,o,s),this.current=[0,0,0,0]}return i&&(Uniform4f.__proto__=i),Uniform4f.prototype=Object.create(i&&i.prototype),Uniform4f.prototype.constructor=Uniform4f,Uniform4f.prototype.set=function(i){(i[0]!==this.current[0]||i[1]!==this.current[1]||i[2]!==this.current[2]||i[3]!==this.current[3])&&(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))},Uniform4f}(Uniform),ri=function(i){function UniformColor(o,s){i.call(this,o,s),this.current=Color.transparent}return i&&(UniformColor.__proto__=i),UniformColor.prototype=Object.create(i&&i.prototype),UniformColor.prototype.constructor=UniformColor,UniformColor.prototype.set=function(i){(i.r!==this.current.r||i.g!==this.current.g||i.b!==this.current.b||i.a!==this.current.a)&&(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))},UniformColor}(Uniform),ro=new Float32Array(16),rs=function(i){function UniformMatrix4f(o,s){i.call(this,o,s),this.current=ro}return i&&(UniformMatrix4f.__proto__=i),UniformMatrix4f.prototype=Object.create(i&&i.prototype),UniformMatrix4f.prototype.constructor=UniformMatrix4f,UniformMatrix4f.prototype.set=function(i){if(i[12]!==this.current[12]||i[0]!==this.current[0]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);return}for(var o=1;o<16;o++)if(i[o]!==this.current[o]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}},UniformMatrix4f}(Uniform);function packColor(i){return[packUint8ToFloat(255*i.r,255*i.g),packUint8ToFloat(255*i.b,255*i.a)]}var ConstantBinder=function(i,o,s){this.value=i,this.uniformNames=o.map(function(i){return"u_"+i}),this.type=s};ConstantBinder.prototype.setUniform=function(i,o,s){i.set(s.constantOr(this.value))},ConstantBinder.prototype.getBinding=function(i,o,s){return"color"===this.type?new ri(i,o):new re(i,o)};var CrossFadedConstantBinder=function(i,o){this.uniformNames=o.map(function(i){return"u_"+i}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};CrossFadedConstantBinder.prototype.setConstantPatternPositions=function(i,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=i.tlbr},CrossFadedConstantBinder.prototype.setUniform=function(i,o,s,_){var F="u_pattern_to"===_?this.patternTo:"u_pattern_from"===_?this.patternFrom:"u_pixel_ratio_to"===_?this.pixelRatioTo:"u_pixel_ratio_from"===_?this.pixelRatioFrom:null;F&&i.set(F)},CrossFadedConstantBinder.prototype.getBinding=function(i,o,s){return"u_pattern"===s.substr(0,9)?new rn(i,o):new re(i,o)};var SourceExpressionBinder=function(i,o,s,_){this.expression=i,this.type=s,this.maxValue=0,this.paintVertexAttributes=o.map(function(i){return{name:"a_"+i,type:"Float32",components:"color"===s?2:1,offset:0}}),this.paintVertexArray=new _};SourceExpressionBinder.prototype.populatePaintArray=function(i,o,s,_,F){var N=this.paintVertexArray.length,j=this.expression.evaluate(new EvaluationParameters(0),o,{},_,[],F);this.paintVertexArray.resize(i),this._setPaintValue(N,i,j)},SourceExpressionBinder.prototype.updatePaintArray=function(i,o,s,_){var F=this.expression.evaluate({zoom:0},s,_);this._setPaintValue(i,o,F)},SourceExpressionBinder.prototype._setPaintValue=function(i,o,s){if("color"===this.type)for(var _=packColor(s),F=i;F<o;F++)this.paintVertexArray.emplace(F,_[0],_[1]);else{for(var N=i;N<o;N++)this.paintVertexArray.emplace(N,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},SourceExpressionBinder.prototype.upload=function(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},SourceExpressionBinder.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var CompositeExpressionBinder=function(i,o,s,_,F,N){this.expression=i,this.uniformNames=o.map(function(i){return"u_"+i+"_t"}),this.type=s,this.useIntegerZoom=_,this.zoom=F,this.maxValue=0,this.paintVertexAttributes=o.map(function(i){return{name:"a_"+i,type:"Float32",components:"color"===s?4:2,offset:0}}),this.paintVertexArray=new N};CompositeExpressionBinder.prototype.populatePaintArray=function(i,o,s,_,F){var N=this.expression.evaluate(new EvaluationParameters(this.zoom),o,{},_,[],F),j=this.expression.evaluate(new EvaluationParameters(this.zoom+1),o,{},_,[],F),Z=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(Z,i,N,j)},CompositeExpressionBinder.prototype.updatePaintArray=function(i,o,s,_){var F=this.expression.evaluate({zoom:this.zoom},s,_),N=this.expression.evaluate({zoom:this.zoom+1},s,_);this._setPaintValue(i,o,F,N)},CompositeExpressionBinder.prototype._setPaintValue=function(i,o,s,_){if("color"===this.type)for(var F=packColor(s),N=packColor(_),j=i;j<o;j++)this.paintVertexArray.emplace(j,F[0],F[1],N[0],N[1]);else{for(var Z=i;Z<o;Z++)this.paintVertexArray.emplace(Z,s,_);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(_))}},CompositeExpressionBinder.prototype.upload=function(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},CompositeExpressionBinder.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},CompositeExpressionBinder.prototype.setUniform=function(i,o){var s=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,_=clamp(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);i.set(_)},CompositeExpressionBinder.prototype.getBinding=function(i,o,s){return new re(i,o)};var CrossFadedCompositeBinder=function(i,o,s,_,F,N){this.expression=i,this.type=o,this.useIntegerZoom=s,this.zoom=_,this.layerId=N,this.zoomInPaintVertexArray=new F,this.zoomOutPaintVertexArray=new F};CrossFadedCompositeBinder.prototype.populatePaintArray=function(i,o,s){var _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(_,i,o.patterns&&o.patterns[this.layerId],s)},CrossFadedCompositeBinder.prototype.updatePaintArray=function(i,o,s,_,F){this._setPaintValues(i,o,s.patterns&&s.patterns[this.layerId],F)},CrossFadedCompositeBinder.prototype._setPaintValues=function(i,o,s,_){if(_&&s){var F=s.min,N=s.mid,j=s.max,Z=_[F],X=_[N],$=_[j];if(Z&&X&&$)for(var ee=i;ee<o;ee++)this.zoomInPaintVertexArray.emplace(ee,X.tl[0],X.tl[1],X.br[0],X.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],X.pixelRatio,Z.pixelRatio),this.zoomOutPaintVertexArray.emplace(ee,X.tl[0],X.tl[1],X.br[0],X.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],X.pixelRatio,$.pixelRatio)}},CrossFadedCompositeBinder.prototype.upload=function(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,t6.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,t6.members,this.expression.isStateDependent))},CrossFadedCompositeBinder.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ProgramConfiguration=function(i,o,s,_){this.binders={},this.layoutAttributes=_,this._buffers=[];var F=[];for(var N in i.paint._values)if(s(N)){var j=i.paint.get(N);if(j instanceof PossiblyEvaluatedPropertyValue&&supportsPropertyExpression(j.property.specification)){var Z=paintAttributeNames(N,i.type),X=j.value,$=j.property.specification.type,ee=j.property.useIntegerZoom,et=j.property.specification["property-type"],er="cross-faded"===et||"cross-faded-data-driven"===et;if("constant"===X.kind)this.binders[N]=er?new CrossFadedConstantBinder(X.value,Z):new ConstantBinder(X.value,Z,$),F.push("/u_"+N);else if("source"===X.kind||er){var en=layoutType(N,$,"source");this.binders[N]=er?new CrossFadedCompositeBinder(X,$,ee,o,en,i.id):new SourceExpressionBinder(X,Z,$,en),F.push("/a_"+N)}else{var ei=layoutType(N,$,"composite");this.binders[N]=new CompositeExpressionBinder(X,Z,$,ee,o,ei),F.push("/z_"+N)}}}this.cacheKey=F.sort().join("")};ProgramConfiguration.prototype.getMaxValue=function(i){var o=this.binders[i];return o instanceof SourceExpressionBinder||o instanceof CompositeExpressionBinder?o.maxValue:0},ProgramConfiguration.prototype.populatePaintArrays=function(i,o,s,_,F){for(var N in this.binders){var j=this.binders[N];(j instanceof SourceExpressionBinder||j instanceof CompositeExpressionBinder||j instanceof CrossFadedCompositeBinder)&&j.populatePaintArray(i,o,s,_,F)}},ProgramConfiguration.prototype.setConstantPatternPositions=function(i,o){for(var s in this.binders){var _=this.binders[s];_ instanceof CrossFadedConstantBinder&&_.setConstantPatternPositions(i,o)}},ProgramConfiguration.prototype.updatePaintArrays=function(i,o,s,_,F){var N=!1;for(var j in i)for(var Z=o.getPositions(j),X=0;X<Z.length;X+=1){var $=Z[X],ee=s.feature($.index);for(var et in this.binders){var er=this.binders[et];if((er instanceof SourceExpressionBinder||er instanceof CompositeExpressionBinder||er instanceof CrossFadedCompositeBinder)&&!0===er.expression.isStateDependent){var en=_.paint.get(et);er.expression=en.value,er.updatePaintArray($.start,$.end,ee,i[j],F),N=!0}}}return N},ProgramConfiguration.prototype.defines=function(){var i=[];for(var o in this.binders){var s=this.binders[o];(s instanceof ConstantBinder||s instanceof CrossFadedConstantBinder)&&i.push.apply(i,s.uniformNames.map(function(i){return"#define HAS_UNIFORM_"+i}))}return i},ProgramConfiguration.prototype.getPaintVertexBuffers=function(){return this._buffers},ProgramConfiguration.prototype.getUniforms=function(i,o){var s=[];for(var _ in this.binders){var F=this.binders[_];if(F instanceof ConstantBinder||F instanceof CrossFadedConstantBinder||F instanceof CompositeExpressionBinder)for(var N=0,j=F.uniformNames;N<j.length;N+=1){var Z=j[N];if(o[Z]){var X=F.getBinding(i,o[Z],Z);s.push({name:Z,property:_,binding:X})}}}return s},ProgramConfiguration.prototype.setUniforms=function(i,o,s,_){for(var F=0;F<o.length;F+=1){var N=o[F],j=N.name,Z=N.property,X=N.binding;this.binders[Z].setUniform(X,_,s.get(Z),j)}},ProgramConfiguration.prototype.updatePaintBuffers=function(i){for(var o in this._buffers=[],this.binders){var s=this.binders[o];if(i&&s instanceof CrossFadedCompositeBinder){var _=2===i.fromScale?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(s instanceof SourceExpressionBinder||s instanceof CompositeExpressionBinder)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},ProgramConfiguration.prototype.upload=function(i){for(var o in this.binders){var s=this.binders[o];(s instanceof SourceExpressionBinder||s instanceof CompositeExpressionBinder||s instanceof CrossFadedCompositeBinder)&&s.upload(i)}this.updatePaintBuffers()},ProgramConfiguration.prototype.destroy=function(){for(var i in this.binders){var o=this.binders[i];(o instanceof SourceExpressionBinder||o instanceof CompositeExpressionBinder||o instanceof CrossFadedCompositeBinder)&&o.destroy()}};var ProgramConfigurationSet=function(i,o,s,_){void 0===_&&(_=function(){return!0}),this.programConfigurations={};for(var F=0;F<o.length;F+=1){var N=o[F];this.programConfigurations[N.id]=new ProgramConfiguration(N,s,_,i)}this.needsUpload=!1,this._featureMap=new FeaturePositionMap,this._bufferOffset=0};function paintAttributeNames(i,o){return({"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]})[i]||[i.replace(o+"-","").replace(/-/g,"_")]}function getLayoutException(i){return({"line-pattern":{source:tP,composite:tP},"fill-pattern":{source:tP,composite:tP},"fill-extrusion-pattern":{source:tP,composite:tP}})[i]}function layoutType(i,o,s){var _=getLayoutException(i);return _&&_[s]||({color:{source:tZ,composite:tY},number:{source:tU,composite:tZ}})[o][s]}ProgramConfigurationSet.prototype.populatePaintArrays=function(i,o,s,_,F,N){for(var j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(i,o,_,F,N);void 0!==o.id&&this._featureMap.add(o.id,s,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0},ProgramConfigurationSet.prototype.updatePaintArrays=function(i,o,s,_){for(var F=0;F<s.length;F+=1){var N=s[F];this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(i,this._featureMap,o,N,_)||this.needsUpload}},ProgramConfigurationSet.prototype.get=function(i){return this.programConfigurations[i]},ProgramConfigurationSet.prototype.upload=function(i){if(this.needsUpload){for(var o in this.programConfigurations)this.programConfigurations[o].upload(i);this.needsUpload=!1}},ProgramConfigurationSet.prototype.destroy=function(){for(var i in this.programConfigurations)this.programConfigurations[i].destroy()},register("ConstantBinder",ConstantBinder),register("CrossFadedConstantBinder",CrossFadedConstantBinder),register("SourceExpressionBinder",SourceExpressionBinder),register("CrossFadedCompositeBinder",CrossFadedCompositeBinder),register("CompositeExpressionBinder",CompositeExpressionBinder),register("ProgramConfiguration",ProgramConfiguration,{omit:["_buffers"]}),register("ProgramConfigurationSet",ProgramConfigurationSet);var rl={min:-16384,max:16383};function loadGeometry(i){for(var o=8192/i.extent,s=i.loadGeometry(),_=0;_<s.length;_++)for(var F=s[_],N=0;N<F.length;N++){var j=F[N];j.x=Math.round(j.x*o),j.y=Math.round(j.y*o),(j.x<rl.min||j.x>rl.max||j.y<rl.min||j.y>rl.max)&&(warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size"),j.x=clamp(j.x,rl.min,rl.max),j.y=clamp(j.y,rl.min,rl.max))}return s}function addCircleVertex(i,o,s,_,F){i.emplaceBack(2*o+(_+1)/2,2*s+(F+1)/2)}var CircleBucket=function(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new tM,this.indexArray=new tN,this.segments=new SegmentVector,this.programConfigurations=new ProgramConfigurationSet(t4,i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function polygonIntersectsPolygon(i,o){for(var s=0;s<i.length;s++)if(polygonContainsPoint(o,i[s]))return!0;for(var _=0;_<o.length;_++)if(polygonContainsPoint(i,o[_]))return!0;return!!lineIntersectsLine(i,o)}function polygonIntersectsBufferedPoint(i,o,s){return!!(polygonContainsPoint(i,o)||pointIntersectsBufferedLine(o,i,s))}function polygonIntersectsMultiPolygon(i,o){if(1===i.length)return multiPolygonContainsPoint(o,i[0]);for(var s=0;s<o.length;s++)for(var _=o[s],F=0;F<_.length;F++)if(polygonContainsPoint(i,_[F]))return!0;for(var N=0;N<i.length;N++)if(multiPolygonContainsPoint(o,i[N]))return!0;for(var j=0;j<o.length;j++)if(lineIntersectsLine(i,o[j]))return!0;return!1}function polygonIntersectsBufferedMultiLine(i,o,s){for(var _=0;_<o.length;_++){var F=o[_];if(i.length>=3){for(var N=0;N<F.length;N++)if(polygonContainsPoint(i,F[N]))return!0}if(lineIntersectsBufferedLine(i,F,s))return!0}return!1}function lineIntersectsBufferedLine(i,o,s){if(i.length>1){if(lineIntersectsLine(i,o))return!0;for(var _=0;_<o.length;_++)if(pointIntersectsBufferedLine(o[_],i,s))return!0}for(var F=0;F<i.length;F++)if(pointIntersectsBufferedLine(i[F],o,s))return!0;return!1}function lineIntersectsLine(i,o){if(0===i.length||0===o.length)return!1;for(var s=0;s<i.length-1;s++)for(var _=i[s],F=i[s+1],N=0;N<o.length-1;N++)if(lineSegmentIntersectsLineSegment(_,F,o[N],o[N+1]))return!0;return!1}function lineSegmentIntersectsLineSegment(i,o,s,_){return isCounterClockwise(i,s,_)!==isCounterClockwise(o,s,_)&&isCounterClockwise(i,o,s)!==isCounterClockwise(i,o,_)}function pointIntersectsBufferedLine(i,o,s){var _=s*s;if(1===o.length)return i.distSqr(o[0])<_;for(var F=1;F<o.length;F++)if(distToSegmentSquared(i,o[F-1],o[F])<_)return!0;return!1}function distToSegmentSquared(i,o,s){var _=o.distSqr(s);if(0===_)return i.distSqr(o);var F=((i.x-o.x)*(s.x-o.x)+(i.y-o.y)*(s.y-o.y))/_;return F<0?i.distSqr(o):F>1?i.distSqr(s):i.distSqr(s.sub(o)._mult(F)._add(o))}function multiPolygonContainsPoint(i,o){for(var s,_,F,N=!1,j=0;j<i.length;j++){s=i[j];for(var Z=0,X=s.length-1;Z<s.length;X=Z++)_=s[Z],F=s[X],_.y>o.y!=F.y>o.y&&o.x<(F.x-_.x)*(o.y-_.y)/(F.y-_.y)+_.x&&(N=!N)}return N}function polygonContainsPoint(i,o){for(var s=!1,_=0,F=i.length-1;_<i.length;F=_++){var N=i[_],j=i[F];N.y>o.y!=j.y>o.y&&o.x<(j.x-N.x)*(o.y-N.y)/(j.y-N.y)+N.x&&(s=!s)}return s}function polygonIntersectsBox(i,o,s,_,F){for(var N=0;N<i.length;N+=1){var j=i[N];if(o<=j.x&&s<=j.y&&_>=j.x&&F>=j.y)return!0}var Z=[new er(o,s),new er(o,F),new er(_,F),new er(_,s)];if(i.length>2){for(var X=0;X<Z.length;X+=1)if(polygonContainsPoint(i,Z[X]))return!0}for(var $=0;$<i.length-1;$++)if(edgeIntersectsBox(i[$],i[$+1],Z))return!0;return!1}function edgeIntersectsBox(i,o,s){var _=s[0],F=s[2];if(i.x<_.x&&o.x<_.x||i.x>F.x&&o.x>F.x||i.y<_.y&&o.y<_.y||i.y>F.y&&o.y>F.y)return!1;var N=isCounterClockwise(i,o,s[0]);return N!==isCounterClockwise(i,o,s[1])||N!==isCounterClockwise(i,o,s[2])||N!==isCounterClockwise(i,o,s[3])}function getMaximumPaintValue(i,o,s){var _=o.paint.get(i).value;return"constant"===_.kind?_.value:s.programConfigurations.get(o.id).getMaxValue(i)}function translateDistance(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function translate(i,o,s,_,F){if(!o[0]&&!o[1])return i;var N=er.convert(o)._mult(F);"viewport"===s&&N._rotate(-_);for(var j=[],Z=0;Z<i.length;Z++){var X=i[Z];j.push(X.sub(N))}return j}CircleBucket.prototype.populate=function(i,o,s){var _=this.layers[0],F=[],N=null;"circle"===_.type&&(N=_.layout.get("circle-sort-key"));for(var j=0;j<i.length;j+=1){var Z=i[j],X=Z.feature,$=Z.id,ee=Z.index,et=Z.sourceLayerIndex,er=this.layers[0]._featureFilter.needGeometry,en={type:X.type,id:$,properties:X.properties,geometry:er?loadGeometry(X):[]};if(this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom),en,s)){er||(en.geometry=loadGeometry(X));var ei=N?N.evaluate(en,{},s):void 0,eo={id:$,properties:X.properties,type:X.type,sourceLayerIndex:et,index:ee,geometry:en.geometry,patterns:{},sortKey:ei};F.push(eo)}}N&&F.sort(function(i,o){return i.sortKey-o.sortKey});for(var es=0;es<F.length;es+=1){var el=F[es],ec=el.geometry,eu=el.index,ef=el.sourceLayerIndex,ed=i[eu].feature;this.addFeature(el,ec,eu,s),o.featureIndex.insert(ed,ec,eu,ef,this.index)}},CircleBucket.prototype.update=function(i,o,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,s)},CircleBucket.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},CircleBucket.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},CircleBucket.prototype.upload=function(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,t4),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0},CircleBucket.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},CircleBucket.prototype.addFeature=function(i,o,s,_){for(var F=0;F<o.length;F+=1)for(var N=o[F],j=0;j<N.length;j+=1){var Z=N[j],X=Z.x,$=Z.y;if(!(X<0)&&!(X>=8192)&&!($<0)&&!($>=8192)){var ee=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),et=ee.vertexLength;addCircleVertex(this.layoutVertexArray,X,$,-1,-1),addCircleVertex(this.layoutVertexArray,X,$,1,-1),addCircleVertex(this.layoutVertexArray,X,$,1,1),addCircleVertex(this.layoutVertexArray,X,$,-1,1),this.indexArray.emplaceBack(et,et+1,et+2),this.indexArray.emplaceBack(et,et+3,et+2),ee.vertexLength+=4,ee.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,s,{},_)},register("CircleBucket",CircleBucket,{omit:["layers"]});var rc=new Properties({"circle-sort-key":new DataDrivenProperty(eO.layout_circle["circle-sort-key"])}),ru={paint:new Properties({"circle-radius":new DataDrivenProperty(eO.paint_circle["circle-radius"]),"circle-color":new DataDrivenProperty(eO.paint_circle["circle-color"]),"circle-blur":new DataDrivenProperty(eO.paint_circle["circle-blur"]),"circle-opacity":new DataDrivenProperty(eO.paint_circle["circle-opacity"]),"circle-translate":new DataConstantProperty(eO.paint_circle["circle-translate"]),"circle-translate-anchor":new DataConstantProperty(eO.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new DataConstantProperty(eO.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new DataConstantProperty(eO.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new DataDrivenProperty(eO.paint_circle["circle-stroke-width"]),"circle-stroke-color":new DataDrivenProperty(eO.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new DataDrivenProperty(eO.paint_circle["circle-stroke-opacity"])}),layout:rc},rf="undefined"!=typeof Float32Array?Float32Array:Array;function create(){var i=new rf(4);return rf!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i}function rotate(i,o,s){var _=o[0],F=o[1],N=o[2],j=o[3],Z=Math.sin(s),X=Math.cos(s);return i[0]=_*X+N*Z,i[1]=F*X+j*Z,i[2]=-(_*Z)+N*X,i[3]=-(F*Z)+j*X,i}function create$1(){var i=new rf(9);return rf!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function fromRotation(i,o){var s=Math.sin(o),_=Math.cos(o);return i[0]=_,i[1]=s,i[2]=0,i[3]=-s,i[4]=_,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i}function create$2(){var i=new rf(16);return rf!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i}function clone$1(i){var o=new rf(16);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15],o}function identity(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function invert(i,o){var s=o[0],_=o[1],F=o[2],N=o[3],j=o[4],Z=o[5],X=o[6],$=o[7],ee=o[8],et=o[9],er=o[10],en=o[11],ei=o[12],eo=o[13],es=o[14],el=o[15],ec=s*Z-_*j,eu=s*X-F*j,ef=s*$-N*j,ed=_*X-F*Z,eh=_*$-N*Z,ep=F*$-N*X,eg=ee*eo-et*ei,em=ee*es-er*ei,ey=ee*el-en*ei,ev=et*es-er*eo,ex=et*el-en*eo,e_=er*el-en*es,ew=ec*e_-eu*ex+ef*ev+ed*ey-eh*em+ep*eg;return ew?(ew=1/ew,i[0]=(Z*e_-X*ex+$*ev)*ew,i[1]=(F*ex-_*e_-N*ev)*ew,i[2]=(eo*ep-es*eh+el*ed)*ew,i[3]=(er*eh-et*ep-en*ed)*ew,i[4]=(X*ey-j*e_-$*em)*ew,i[5]=(s*e_-F*ey+N*em)*ew,i[6]=(es*ef-ei*ep-el*eu)*ew,i[7]=(ee*ep-er*ef+en*eu)*ew,i[8]=(j*ex-Z*ey+$*eg)*ew,i[9]=(_*ey-s*ex-N*eg)*ew,i[10]=(ei*eh-eo*ef+el*ec)*ew,i[11]=(et*ef-ee*eh-en*ec)*ew,i[12]=(Z*em-j*ev-X*eg)*ew,i[13]=(s*ev-_*em+F*eg)*ew,i[14]=(eo*eu-ei*ed-es*ec)*ew,i[15]=(ee*ed-et*eu+er*ec)*ew,i):null}function multiply(i,o,s){var _=o[0],F=o[1],N=o[2],j=o[3],Z=o[4],X=o[5],$=o[6],ee=o[7],et=o[8],er=o[9],en=o[10],ei=o[11],eo=o[12],es=o[13],el=o[14],ec=o[15],eu=s[0],ef=s[1],ed=s[2],eh=s[3];return i[0]=eu*_+ef*Z+ed*et+eh*eo,i[1]=eu*F+ef*X+ed*er+eh*es,i[2]=eu*N+ef*$+ed*en+eh*el,i[3]=eu*j+ef*ee+ed*ei+eh*ec,eu=s[4],ef=s[5],ed=s[6],eh=s[7],i[4]=eu*_+ef*Z+ed*et+eh*eo,i[5]=eu*F+ef*X+ed*er+eh*es,i[6]=eu*N+ef*$+ed*en+eh*el,i[7]=eu*j+ef*ee+ed*ei+eh*ec,eu=s[8],ef=s[9],ed=s[10],eh=s[11],i[8]=eu*_+ef*Z+ed*et+eh*eo,i[9]=eu*F+ef*X+ed*er+eh*es,i[10]=eu*N+ef*$+ed*en+eh*el,i[11]=eu*j+ef*ee+ed*ei+eh*ec,eu=s[12],ef=s[13],ed=s[14],eh=s[15],i[12]=eu*_+ef*Z+ed*et+eh*eo,i[13]=eu*F+ef*X+ed*er+eh*es,i[14]=eu*N+ef*$+ed*en+eh*el,i[15]=eu*j+ef*ee+ed*ei+eh*ec,i}function translate$1(i,o,s){var _,F,N,j,Z,X,$,ee,et,er,en,ei,eo=s[0],es=s[1],el=s[2];return o===i?(i[12]=o[0]*eo+o[4]*es+o[8]*el+o[12],i[13]=o[1]*eo+o[5]*es+o[9]*el+o[13],i[14]=o[2]*eo+o[6]*es+o[10]*el+o[14],i[15]=o[3]*eo+o[7]*es+o[11]*el+o[15]):(_=o[0],F=o[1],N=o[2],j=o[3],Z=o[4],X=o[5],$=o[6],ee=o[7],et=o[8],er=o[9],en=o[10],ei=o[11],i[0]=_,i[1]=F,i[2]=N,i[3]=j,i[4]=Z,i[5]=X,i[6]=$,i[7]=ee,i[8]=et,i[9]=er,i[10]=en,i[11]=ei,i[12]=_*eo+Z*es+et*el+o[12],i[13]=F*eo+X*es+er*el+o[13],i[14]=N*eo+$*es+en*el+o[14],i[15]=j*eo+ee*es+ei*el+o[15]),i}function scale(i,o,s){var _=s[0],F=s[1],N=s[2];return i[0]=o[0]*_,i[1]=o[1]*_,i[2]=o[2]*_,i[3]=o[3]*_,i[4]=o[4]*F,i[5]=o[5]*F,i[6]=o[6]*F,i[7]=o[7]*F,i[8]=o[8]*N,i[9]=o[9]*N,i[10]=o[10]*N,i[11]=o[11]*N,i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],i}function rotateX(i,o,s){var _=Math.sin(s),F=Math.cos(s),N=o[4],j=o[5],Z=o[6],X=o[7],$=o[8],ee=o[9],et=o[10],er=o[11];return o!==i&&(i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[4]=N*F+$*_,i[5]=j*F+ee*_,i[6]=Z*F+et*_,i[7]=X*F+er*_,i[8]=$*F-N*_,i[9]=ee*F-j*_,i[10]=et*F-Z*_,i[11]=er*F-X*_,i}function rotateZ(i,o,s){var _=Math.sin(s),F=Math.cos(s),N=o[0],j=o[1],Z=o[2],X=o[3],$=o[4],ee=o[5],et=o[6],er=o[7];return o!==i&&(i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15]),i[0]=N*F+$*_,i[1]=j*F+ee*_,i[2]=Z*F+et*_,i[3]=X*F+er*_,i[4]=$*F-N*_,i[5]=ee*F-j*_,i[6]=et*F-Z*_,i[7]=er*F-X*_,i}function perspective(i,o,s,_,F){var N,j=1/Math.tan(o/2);return i[0]=j/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=j,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,null!=F&&F!==1/0?(N=1/(_-F),i[10]=(F+_)*N,i[14]=2*F*_*N):(i[10]=-1,i[14]=-2*_),i}function ortho(i,o,s,_,F,N,j){var Z=1/(o-s),X=1/(_-F),$=1/(N-j);return i[0]=-2*Z,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*X,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*$,i[11]=0,i[12]=(o+s)*Z,i[13]=(F+_)*X,i[14]=(j+N)*$,i[15]=1,i}Math.hypot||(Math.hypot=function(){for(var i=arguments,o=0,s=arguments.length;s--;)o+=i[s]*i[s];return Math.sqrt(o)});var rd=multiply;function clone$2(i){var o=new rf(3);return o[0]=i[0],o[1]=i[1],o[2]=i[2],o}function add(i,o,s){return i[0]=o[0]+s[0],i[1]=o[1]+s[1],i[2]=o[2]+s[2],i}function scale$1(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i}function normalize(i,o){var s=o[0],_=o[1],F=o[2],N=s*s+_*_+F*F;return N>0&&(N=1/Math.sqrt(N)),i[0]=o[0]*N,i[1]=o[1]*N,i[2]=o[2]*N,i}function dot(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]}function cross(i,o,s){var _=o[0],F=o[1],N=o[2],j=s[0],Z=s[1],X=s[2];return i[0]=F*X-N*Z,i[1]=N*j-_*X,i[2]=_*Z-F*j,i}function transformMat3(i,o,s){var _=o[0],F=o[1],N=o[2];return i[0]=_*s[0]+F*s[3]+N*s[6],i[1]=_*s[1]+F*s[4]+N*s[7],i[2]=_*s[2]+F*s[5]+N*s[8],i}function create$4(){var i=new rf(4);return rf!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[3]=0),i}function scale$2(i,o,s){return i[0]=o[0]*s,i[1]=o[1]*s,i[2]=o[2]*s,i[3]=o[3]*s,i}function dot$1(i,o){return i[0]*o[0]+i[1]*o[1]+i[2]*o[2]+i[3]*o[3]}function transformMat4(i,o,s){var _=o[0],F=o[1],N=o[2],j=o[3];return i[0]=s[0]*_+s[4]*F+s[8]*N+s[12]*j,i[1]=s[1]*_+s[5]*F+s[9]*N+s[13]*j,i[2]=s[2]*_+s[6]*F+s[10]*N+s[14]*j,i[3]=s[3]*_+s[7]*F+s[11]*N+s[15]*j,i}function create$5(){var i=new rf(2);return rf!=Float32Array&&(i[0]=0,i[1]=0),i}(function create$3(){var i=new rf(3);return rf!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0)})(),create$4(),create$5();var rh=function(i){function CircleStyleLayer(o){i.call(this,o,ru)}return i&&(CircleStyleLayer.__proto__=i),CircleStyleLayer.prototype=Object.create(i&&i.prototype),CircleStyleLayer.prototype.constructor=CircleStyleLayer,CircleStyleLayer.prototype.createBucket=function(i){return new CircleBucket(i)},CircleStyleLayer.prototype.queryRadius=function(i){return getMaximumPaintValue("circle-radius",this,i)+getMaximumPaintValue("circle-stroke-width",this,i)+translateDistance(this.paint.get("circle-translate"))},CircleStyleLayer.prototype.queryIntersectsFeature=function(i,o,s,_,F,N,j,Z){for(var X=translate(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),N.angle,j),$=this.paint.get("circle-radius").evaluate(o,s)+this.paint.get("circle-stroke-width").evaluate(o,s),ee="map"===this.paint.get("circle-pitch-alignment"),et=ee?X:projectQueryGeometry(X,Z),er=ee?$*j:$,en=0;en<_.length;en+=1)for(var ei=_[en],eo=0;eo<ei.length;eo+=1){var es=ei[eo],el=ee?es:projectPoint(es,Z),ec=er,eu=transformMat4([],[es.x,es.y,0,1],Z);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ec*=eu[3]/N.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ec*=N.cameraToCenterDistance/eu[3]),polygonIntersectsBufferedPoint(et,el,ec))return!0}return!1},CircleStyleLayer}(tA);function projectPoint(i,o){var s=transformMat4([],[i.x,i.y,0,1],o);return new er(s[0]/s[3],s[1]/s[3])}function projectQueryGeometry(i,o){return i.map(function(i){return projectPoint(i,o)})}var rp=function(i){function HeatmapBucket(){i.apply(this,arguments)}return i&&(HeatmapBucket.__proto__=i),HeatmapBucket.prototype=Object.create(i&&i.prototype),HeatmapBucket.prototype.constructor=HeatmapBucket,HeatmapBucket}(CircleBucket);function createImage(i,o,s,_){var F=o.width,N=o.height;if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==F*N*s)throw RangeError("mismatched image size")}else _=new Uint8Array(F*N*s);return i.width=F,i.height=N,i.data=_,i}function resizeImage(i,o,s){var _=o.width,F=o.height;if(_!==i.width||F!==i.height){var N=createImage({},{width:_,height:F},s);copyImage(i,N,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,_),height:Math.min(i.height,F)},s),i.width=_,i.height=F,i.data=N.data}}function copyImage(i,o,s,_,F,N){if(0===F.width||0===F.height)return o;if(F.width>i.width||F.height>i.height||s.x>i.width-F.width||s.y>i.height-F.height)throw RangeError("out of range source coordinates for image copy");if(F.width>o.width||F.height>o.height||_.x>o.width-F.width||_.y>o.height-F.height)throw RangeError("out of range destination coordinates for image copy");for(var j=i.data,Z=o.data,X=0;X<F.height;X++)for(var $=((s.y+X)*i.width+s.x)*N,ee=((_.y+X)*o.width+_.x)*N,et=0;et<F.width*N;et++)Z[ee+et]=j[$+et];return o}register("HeatmapBucket",rp,{omit:["layers"]});var AlphaImage=function(i,o){createImage(this,i,1,o)};AlphaImage.prototype.resize=function(i){resizeImage(this,i,1)},AlphaImage.prototype.clone=function(){return new AlphaImage({width:this.width,height:this.height},new Uint8Array(this.data))},AlphaImage.copy=function(i,o,s,_,F){copyImage(i,o,s,_,F,1)};var RGBAImage=function(i,o){createImage(this,i,4,o)};RGBAImage.prototype.resize=function(i){resizeImage(this,i,4)},RGBAImage.prototype.replace=function(i,o){o?this.data.set(i):i instanceof Uint8ClampedArray?this.data=new Uint8Array(i.buffer):this.data=i},RGBAImage.prototype.clone=function(){return new RGBAImage({width:this.width,height:this.height},new Uint8Array(this.data))},RGBAImage.copy=function(i,o,s,_,F){copyImage(i,o,s,_,F,4)},register("AlphaImage",AlphaImage),register("RGBAImage",RGBAImage);var rg={paint:new Properties({"heatmap-radius":new DataDrivenProperty(eO.paint_heatmap["heatmap-radius"]),"heatmap-weight":new DataDrivenProperty(eO.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new DataConstantProperty(eO.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ColorRampProperty(eO.paint_heatmap["heatmap-color"]),"heatmap-opacity":new DataConstantProperty(eO.paint_heatmap["heatmap-opacity"])})};function renderColorRamp(i,o){for(var s=new Uint8Array(1024),_={},F=0,N=0;F<256;F++,N+=4){_[o]=F/255;var j=i.evaluate(_);s[N+0]=Math.floor(255*j.r/j.a),s[N+1]=Math.floor(255*j.g/j.a),s[N+2]=Math.floor(255*j.b/j.a),s[N+3]=Math.floor(255*j.a)}return new RGBAImage({width:256,height:1},s)}var rm=function(i){function HeatmapStyleLayer(o){i.call(this,o,rg),this._updateColorRamp()}return i&&(HeatmapStyleLayer.__proto__=i),HeatmapStyleLayer.prototype=Object.create(i&&i.prototype),HeatmapStyleLayer.prototype.constructor=HeatmapStyleLayer,HeatmapStyleLayer.prototype.createBucket=function(i){return new rp(i)},HeatmapStyleLayer.prototype._handleSpecialPaintPropertyUpdate=function(i){"heatmap-color"===i&&this._updateColorRamp()},HeatmapStyleLayer.prototype._updateColorRamp=function(){var i=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=renderColorRamp(i,"heatmapDensity"),this.colorRampTexture=null},HeatmapStyleLayer.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},HeatmapStyleLayer.prototype.queryRadius=function(){return 0},HeatmapStyleLayer.prototype.queryIntersectsFeature=function(){return!1},HeatmapStyleLayer.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},HeatmapStyleLayer}(tA),ry={paint:new Properties({"hillshade-illumination-direction":new DataConstantProperty(eO.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new DataConstantProperty(eO.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new DataConstantProperty(eO.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new DataConstantProperty(eO.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new DataConstantProperty(eO.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new DataConstantProperty(eO.paint_hillshade["hillshade-accent-color"])})},rv=function(i){function HillshadeStyleLayer(o){i.call(this,o,ry)}return i&&(HillshadeStyleLayer.__proto__=i),HillshadeStyleLayer.prototype=Object.create(i&&i.prototype),HillshadeStyleLayer.prototype.constructor=HillshadeStyleLayer,HillshadeStyleLayer.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},HillshadeStyleLayer}(tA),rx=createLayout([{name:"a_pos",components:2,type:"Int16"}],4).members,r_=earcut,rw=earcut;function earcut(i,o,s){s=s||2;var _,F,N,j,Z,X,$,ee=o&&o.length,et=ee?o[0]*s:i.length,er=linkedList(i,0,et,s,!0),en=[];if(!er||er.next===er.prev)return en;if(ee&&(er=eliminateHoles(i,o,er,s)),i.length>80*s){_=N=i[0],F=j=i[1];for(var ei=s;ei<et;ei+=s)Z=i[ei],X=i[ei+1],Z<_&&(_=Z),X<F&&(F=X),Z>N&&(N=Z),X>j&&(j=X);$=0!==($=Math.max(N-_,j-F))?1/$:0}return earcutLinked(er,en,s,_,F,$),en}function linkedList(i,o,s,_,F){var N,j;if(F===signedArea(i,o,s,_)>0)for(N=o;N<s;N+=_)j=insertNode(N,i[N],i[N+1],j);else for(N=s-_;N>=o;N-=_)j=insertNode(N,i[N],i[N+1],j);return j&&equals(j,j.next)&&(removeNode(j),j=j.next),j}function filterPoints(i,o){if(!i)return i;o||(o=i);var s,_=i;do if(s=!1,!_.steiner&&(equals(_,_.next)||0===area(_.prev,_,_.next))){if(removeNode(_),(_=o=_.prev)===_.next)break;s=!0}else _=_.next;while(s||_!==o);return o}function earcutLinked(i,o,s,_,F,N,j){if(i){!j&&N&&indexCurve(i,_,F,N);for(var Z,X,$=i;i.prev!==i.next;){if(Z=i.prev,X=i.next,N?isEarHashed(i,_,F,N):isEar(i)){o.push(Z.i/s),o.push(i.i/s),o.push(X.i/s),removeNode(i),i=X.next,$=X.next;continue}if((i=X)===$){j?1===j?earcutLinked(i=cureLocalIntersections(filterPoints(i),o,s),o,s,_,F,N,2):2===j&&splitEarcut(i,o,s,_,F,N):earcutLinked(filterPoints(i),o,s,_,F,N,1);break}}}}function isEar(i){var o=i.prev,s=i.next;if(area(o,i,s)>=0)return!1;for(var _=i.next.next;_!==i.prev;){if(pointInTriangle(o.x,o.y,i.x,i.y,s.x,s.y,_.x,_.y)&&area(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function isEarHashed(i,o,s,_){var F=i.prev,N=i.next;if(area(F,i,N)>=0)return!1;for(var j=F.x<i.x?F.x<N.x?F.x:N.x:i.x<N.x?i.x:N.x,Z=F.y<i.y?F.y<N.y?F.y:N.y:i.y<N.y?i.y:N.y,X=F.x>i.x?F.x>N.x?F.x:N.x:i.x>N.x?i.x:N.x,$=F.y>i.y?F.y>N.y?F.y:N.y:i.y>N.y?i.y:N.y,ee=zOrder(j,Z,o,s,_),et=zOrder(X,$,o,s,_),er=i.prevZ,en=i.nextZ;er&&er.z>=ee&&en&&en.z<=et;){if(er!==i.prev&&er!==i.next&&pointInTriangle(F.x,F.y,i.x,i.y,N.x,N.y,er.x,er.y)&&area(er.prev,er,er.next)>=0||(er=er.prevZ,en!==i.prev&&en!==i.next&&pointInTriangle(F.x,F.y,i.x,i.y,N.x,N.y,en.x,en.y)&&area(en.prev,en,en.next)>=0))return!1;en=en.nextZ}for(;er&&er.z>=ee;){if(er!==i.prev&&er!==i.next&&pointInTriangle(F.x,F.y,i.x,i.y,N.x,N.y,er.x,er.y)&&area(er.prev,er,er.next)>=0)return!1;er=er.prevZ}for(;en&&en.z<=et;){if(en!==i.prev&&en!==i.next&&pointInTriangle(F.x,F.y,i.x,i.y,N.x,N.y,en.x,en.y)&&area(en.prev,en,en.next)>=0)return!1;en=en.nextZ}return!0}function cureLocalIntersections(i,o,s){var _=i;do{var F=_.prev,N=_.next.next;!equals(F,N)&&intersects(F,_,_.next,N)&&locallyInside(F,N)&&locallyInside(N,F)&&(o.push(F.i/s),o.push(_.i/s),o.push(N.i/s),removeNode(_),removeNode(_.next),_=i=N),_=_.next}while(_!==i);return filterPoints(_)}function splitEarcut(i,o,s,_,F,N){var j=i;do{for(var Z=j.next.next;Z!==j.prev;){if(j.i!==Z.i&&isValidDiagonal(j,Z)){var X=splitPolygon(j,Z);j=filterPoints(j,j.next),X=filterPoints(X,X.next),earcutLinked(j,o,s,_,F,N),earcutLinked(X,o,s,_,F,N);return}Z=Z.next}j=j.next}while(j!==i)}function eliminateHoles(i,o,s,_){var F,N,j,Z,X,$=[];for(F=0,N=o.length;F<N;F++)j=o[F]*_,Z=F<N-1?o[F+1]*_:i.length,(X=linkedList(i,j,Z,_,!1))===X.next&&(X.steiner=!0),$.push(getLeftmost(X));for($.sort(compareX),F=0;F<$.length;F++)eliminateHole($[F],s),s=filterPoints(s,s.next);return s}function compareX(i,o){return i.x-o.x}function eliminateHole(i,o){if(o=findHoleBridge(i,o)){var s=splitPolygon(o,i);filterPoints(o,o.next),filterPoints(s,s.next)}}function findHoleBridge(i,o){var s,_=o,F=i.x,N=i.y,j=-1/0;do{if(N<=_.y&&N>=_.next.y&&_.next.y!==_.y){var Z=_.x+(N-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(Z<=F&&Z>j){if(j=Z,Z===F){if(N===_.y)return _;if(N===_.next.y)return _.next}s=_.x<_.next.x?_:_.next}}_=_.next}while(_!==o);if(!s)return null;if(F===j)return s;var X,$=s,ee=s.x,et=s.y,er=1/0;_=s;do F>=_.x&&_.x>=ee&&F!==_.x&&pointInTriangle(N<et?F:j,N,ee,et,N<et?j:F,N,_.x,_.y)&&(X=Math.abs(N-_.y)/(F-_.x),locallyInside(_,i)&&(X<er||X===er&&(_.x>s.x||_.x===s.x&&sectorContainsSector(s,_)))&&(s=_,er=X)),_=_.next;while(_!==$);return s}function sectorContainsSector(i,o){return 0>area(i.prev,i,o.prev)&&0>area(o.next,i,i.next)}function indexCurve(i,o,s,_){var F=i;do null===F.z&&(F.z=zOrder(F.x,F.y,o,s,_)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==i);F.prevZ.nextZ=null,F.prevZ=null,sortLinked(F)}function sortLinked(i){var o,s,_,F,N,j,Z,X,$=1;do{for(s=i,i=null,N=null,j=0;s;){for(j++,_=s,Z=0,o=0;o<$&&(Z++,_=_.nextZ);o++);for(X=$;Z>0||X>0&&_;)0!==Z&&(0===X||!_||s.z<=_.z)?(F=s,s=s.nextZ,Z--):(F=_,_=_.nextZ,X--),N?N.nextZ=F:i=F,F.prevZ=N,N=F;s=_}N.nextZ=null,$*=2}while(j>1);return i}function zOrder(i,o,s,_,F){return(i=((i=((i=((i=((i=32767*(i-s)*F)|i<<8)&16711935)|i<<4)&252645135)|i<<2)&858993459)|i<<1)&1431655765)|(o=((o=((o=((o=((o=32767*(o-_)*F)|o<<8)&16711935)|o<<4)&252645135)|o<<2)&858993459)|o<<1)&1431655765)<<1}function getLeftmost(i){var o=i,s=i;do(o.x<s.x||o.x===s.x&&o.y<s.y)&&(s=o),o=o.next;while(o!==i);return s}function pointInTriangle(i,o,s,_,F,N,j,Z){return(F-j)*(o-Z)-(i-j)*(N-Z)>=0&&(i-j)*(_-Z)-(s-j)*(o-Z)>=0&&(s-j)*(N-Z)-(F-j)*(_-Z)>=0}function isValidDiagonal(i,o){return i.next.i!==o.i&&i.prev.i!==o.i&&!intersectsPolygon(i,o)&&(locallyInside(i,o)&&locallyInside(o,i)&&middleInside(i,o)&&(area(i.prev,i,o.prev)||area(i,o.prev,o))||equals(i,o)&&area(i.prev,i,i.next)>0&&area(o.prev,o,o.next)>0)}function area(i,o,s){return(o.y-i.y)*(s.x-o.x)-(o.x-i.x)*(s.y-o.y)}function equals(i,o){return i.x===o.x&&i.y===o.y}function intersects(i,o,s,_){var F=sign(area(i,o,s)),N=sign(area(i,o,_)),j=sign(area(s,_,i)),Z=sign(area(s,_,o));return!!(F!==N&&j!==Z||0===F&&onSegment(i,s,o)||0===N&&onSegment(i,_,o)||0===j&&onSegment(s,i,_)||0===Z&&onSegment(s,o,_))}function onSegment(i,o,s){return o.x<=Math.max(i.x,s.x)&&o.x>=Math.min(i.x,s.x)&&o.y<=Math.max(i.y,s.y)&&o.y>=Math.min(i.y,s.y)}function sign(i){return i>0?1:i<0?-1:0}function intersectsPolygon(i,o){var s=i;do{if(s.i!==i.i&&s.next.i!==i.i&&s.i!==o.i&&s.next.i!==o.i&&intersects(s,s.next,i,o))return!0;s=s.next}while(s!==i);return!1}function locallyInside(i,o){return 0>area(i.prev,i,i.next)?area(i,o,i.next)>=0&&area(i,i.prev,o)>=0:0>area(i,o,i.prev)||0>area(i,i.next,o)}function middleInside(i,o){var s=i,_=!1,F=(i.x+o.x)/2,N=(i.y+o.y)/2;do s.y>N!=s.next.y>N&&s.next.y!==s.y&&F<(s.next.x-s.x)*(N-s.y)/(s.next.y-s.y)+s.x&&(_=!_),s=s.next;while(s!==i);return _}function splitPolygon(i,o){var s=new Node(i.i,i.x,i.y),_=new Node(o.i,o.x,o.y),F=i.next,N=o.prev;return i.next=o,o.prev=i,s.next=F,F.prev=s,_.next=s,s.prev=_,N.next=_,_.prev=N,_}function insertNode(i,o,s,_){var F=new Node(i,o,s);return _?(F.next=_.next,F.prev=_,_.next.prev=F,_.next=F):(F.prev=F,F.next=F),F}function removeNode(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Node(i,o,s){this.i=i,this.x=o,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(i,o,s,_){for(var F=0,N=o,j=s-_;N<s;N+=_)F+=(i[j]-i[N])*(i[N+1]+i[j+1]),j=N;return F}function quickselect(i,o,s,_,F){quickselectStep(i,o,s||0,_||i.length-1,F||defaultCompare)}function quickselectStep(i,o,s,_,F){for(;_>s;){if(_-s>600){var N=_-s+1,j=o-s+1,Z=Math.log(N),X=.5*Math.exp(2*Z/3),$=.5*Math.sqrt(Z*X*(N-X)/N)*(j-N/2<0?-1:1),ee=Math.max(s,Math.floor(o-j*X/N+$)),et=Math.min(_,Math.floor(o+(N-j)*X/N+$));quickselectStep(i,o,ee,et,F)}var er=i[o],en=s,ei=_;for(swap$1(i,s,o),F(i[_],er)>0&&swap$1(i,s,_);en<ei;){for(swap$1(i,en,ei),en++,ei--;0>F(i[en],er);)en++;for(;F(i[ei],er)>0;)ei--}0===F(i[s],er)?swap$1(i,s,ei):swap$1(i,++ei,_),ei<=o&&(s=ei+1),o<=ei&&(_=ei-1)}}function swap$1(i,o,s){var _=i[o];i[o]=i[s],i[s]=_}function defaultCompare(i,o){return i<o?-1:i>o?1:0}function classifyRings(i,o){var s,_,F=i.length;if(F<=1)return[i];for(var N=[],j=0;j<F;j++){var Z=calculateSignedArea(i[j]);0!==Z&&(i[j].area=Math.abs(Z),void 0===_&&(_=Z<0),_===Z<0?(s&&N.push(s),s=[i[j]]):s.push(i[j]))}if(s&&N.push(s),o>1)for(var X=0;X<N.length;X++)N[X].length<=o||(quickselect(N[X],o,1,N[X].length-1,compareAreas),N[X]=N[X].slice(0,o));return N}function compareAreas(i,o){return o.area-i.area}function hasPattern(i,o,s){for(var _=s.patternDependencies,F=!1,N=0;N<o.length;N+=1){var j=o[N].paint.get(i+"-pattern");j.isConstant()||(F=!0);var Z=j.constantOr(null);Z&&(F=!0,_[Z.to]=!0,_[Z.from]=!0)}return F}function addPatternDependencies(i,o,s,_,F){for(var N=F.patternDependencies,j=0;j<o.length;j+=1){var Z=o[j],X=Z.paint.get(i+"-pattern").value;if("constant"!==X.kind){var $=X.evaluate({zoom:_-1},s,{},F.availableImages),ee=X.evaluate({zoom:_},s,{},F.availableImages),et=X.evaluate({zoom:_+1},s,{},F.availableImages);$=$&&$.name?$.name:$,ee=ee&&ee.name?ee.name:ee,et=et&&et.name?et.name:et,N[$]=!0,N[ee]=!0,N[et]=!0,s.patterns[Z.id]={min:$,mid:ee,max:et}}}return s}earcut.deviation=function(i,o,s,_){var F=o&&o.length,N=F?o[0]*s:i.length,j=Math.abs(signedArea(i,0,N,s));if(F)for(var Z=0,X=o.length;Z<X;Z++){var $=o[Z]*s,ee=Z<X-1?o[Z+1]*s:i.length;j-=Math.abs(signedArea(i,$,ee,s))}var et=0;for(Z=0;Z<_.length;Z+=3){var er=_[Z]*s,en=_[Z+1]*s,ei=_[Z+2]*s;et+=Math.abs((i[er]-i[ei])*(i[en+1]-i[er+1])-(i[er]-i[en])*(i[ei+1]-i[er+1]))}return 0===j&&0===et?0:Math.abs((et-j)/j)},earcut.flatten=function(i){for(var o=i[0][0].length,s={vertices:[],holes:[],dimensions:o},_=0,F=0;F<i.length;F++){for(var N=0;N<i[F].length;N++)for(var j=0;j<o;j++)s.vertices.push(i[F][N][j]);F>0&&(_+=i[F-1].length,s.holes.push(_))}return s},r_.default=rw;var FillBucket=function(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tM,this.indexArray=new tN,this.indexArray2=new tG,this.programConfigurations=new ProgramConfigurationSet(rx,i.layers,i.zoom),this.segments=new SegmentVector,this.segments2=new SegmentVector,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};FillBucket.prototype.populate=function(i,o,s){this.hasPattern=hasPattern("fill",this.layers,o);for(var _=this.layers[0].layout.get("fill-sort-key"),F=[],N=0;N<i.length;N+=1){var j=i[N],Z=j.feature,X=j.id,$=j.index,ee=j.sourceLayerIndex,et=this.layers[0]._featureFilter.needGeometry,er={type:Z.type,id:X,properties:Z.properties,geometry:et?loadGeometry(Z):[]};if(this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom),er,s)){et||(er.geometry=loadGeometry(Z));var en=_?_.evaluate(er,{},s,o.availableImages):void 0,ei={id:X,properties:Z.properties,type:Z.type,sourceLayerIndex:ee,index:$,geometry:er.geometry,patterns:{},sortKey:en};F.push(ei)}}_&&F.sort(function(i,o){return i.sortKey-o.sortKey});for(var eo=0;eo<F.length;eo+=1){var es=F[eo],el=es.geometry,ec=es.index,eu=es.sourceLayerIndex;if(this.hasPattern){var ef=addPatternDependencies("fill",this.layers,es,this.zoom,o);this.patternFeatures.push(ef)}else this.addFeature(es,el,ec,s,{});var ed=i[ec].feature;o.featureIndex.insert(ed,el,ec,eu,this.index)}},FillBucket.prototype.update=function(i,o,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,s)},FillBucket.prototype.addFeatures=function(i,o,s){for(var _=0,F=this.patternFeatures;_<F.length;_+=1){var N=F[_];this.addFeature(N,N.geometry,N.index,o,s)}},FillBucket.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},FillBucket.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},FillBucket.prototype.upload=function(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,rx),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0},FillBucket.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},FillBucket.prototype.addFeature=function(i,o,s,_,F){for(var N=0,j=classifyRings(o,500);N<j.length;N+=1){for(var Z=j[N],X=0,$=0;$<Z.length;$+=1)X+=Z[$].length;for(var ee=this.segments.prepareSegment(X,this.layoutVertexArray,this.indexArray),et=ee.vertexLength,er=[],en=[],ei=0;ei<Z.length;ei+=1){var eo=Z[ei];if(0!==eo.length){eo!==Z[0]&&en.push(er.length/2);var es=this.segments2.prepareSegment(eo.length,this.layoutVertexArray,this.indexArray2),el=es.vertexLength;this.layoutVertexArray.emplaceBack(eo[0].x,eo[0].y),this.indexArray2.emplaceBack(el+eo.length-1,el),er.push(eo[0].x),er.push(eo[0].y);for(var ec=1;ec<eo.length;ec++)this.layoutVertexArray.emplaceBack(eo[ec].x,eo[ec].y),this.indexArray2.emplaceBack(el+ec-1,el+ec),er.push(eo[ec].x),er.push(eo[ec].y);es.vertexLength+=eo.length,es.primitiveLength+=eo.length}}for(var eu=r_(er,en),ef=0;ef<eu.length;ef+=3)this.indexArray.emplaceBack(et+eu[ef],et+eu[ef+1],et+eu[ef+2]);ee.vertexLength+=X,ee.primitiveLength+=eu.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,s,F,_)},register("FillBucket",FillBucket,{omit:["layers","patternFeatures"]});var rT=new Properties({"fill-sort-key":new DataDrivenProperty(eO.layout_fill["fill-sort-key"])}),rk={paint:new Properties({"fill-antialias":new DataConstantProperty(eO.paint_fill["fill-antialias"]),"fill-opacity":new DataDrivenProperty(eO.paint_fill["fill-opacity"]),"fill-color":new DataDrivenProperty(eO.paint_fill["fill-color"]),"fill-outline-color":new DataDrivenProperty(eO.paint_fill["fill-outline-color"]),"fill-translate":new DataConstantProperty(eO.paint_fill["fill-translate"]),"fill-translate-anchor":new DataConstantProperty(eO.paint_fill["fill-translate-anchor"]),"fill-pattern":new tT(eO.paint_fill["fill-pattern"])}),layout:rT},rA=function(i){function FillStyleLayer(o){i.call(this,o,rk)}return i&&(FillStyleLayer.__proto__=i),FillStyleLayer.prototype=Object.create(i&&i.prototype),FillStyleLayer.prototype.constructor=FillStyleLayer,FillStyleLayer.prototype.recalculate=function(o,s){i.prototype.recalculate.call(this,o,s);var _=this.paint._values["fill-outline-color"];"constant"===_.value.kind&&void 0===_.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},FillStyleLayer.prototype.createBucket=function(i){return new FillBucket(i)},FillStyleLayer.prototype.queryRadius=function(){return translateDistance(this.paint.get("fill-translate"))},FillStyleLayer.prototype.queryIntersectsFeature=function(i,o,s,_,F,N,j){return polygonIntersectsMultiPolygon(translate(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),N.angle,j),_)},FillStyleLayer.prototype.isTileClipped=function(){return!0},FillStyleLayer}(tA),rS=createLayout([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,rM=VectorTileFeature;function VectorTileFeature(i,o,s,_,F){this.properties={},this.extent=s,this.type=0,this._pbf=i,this._geometry=-1,this._keys=_,this._values=F,i.readFields(readFeature,this,o)}function readFeature(i,o,s){1==i?o.id=s.readVarint():2==i?readTag(s,o):3==i?o.type=s.readVarint():4==i&&(o._geometry=s.pos)}function readTag(i,o){for(var s=i.readVarint()+i.pos;i.pos<s;){var _=o._keys[i.readVarint()],F=o._values[i.readVarint()];o.properties[_]=F}}function classifyRings$1(i){var o=i.length;if(o<=1)return[i];for(var s,_,F=[],N=0;N<o;N++){var j=signedArea$1(i[N]);0!==j&&(void 0===_&&(_=j<0),_===j<0?(s&&F.push(s),s=[i[N]]):s.push(i[N]))}return s&&F.push(s),F}function signedArea$1(i){for(var o,s,_=0,F=0,N=i.length,j=N-1;F<N;j=F++)o=i[F],_+=((s=i[j]).x-o.x)*(o.y+s.y);return _}VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var o,s=i.readVarint()+i.pos,_=1,F=0,N=0,j=0,Z=[];i.pos<s;){if(F<=0){var X=i.readVarint();_=7&X,F=X>>3}if(F--,1===_||2===_)N+=i.readSVarint(),j+=i.readSVarint(),1===_&&(o&&Z.push(o),o=[]),o.push(new er(N,j));else if(7===_)o&&o.push(o[0].clone());else throw Error("unknown command "+_)}return o&&Z.push(o),Z},VectorTileFeature.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var o=i.readVarint()+i.pos,s=1,_=0,F=0,N=0,j=1/0,Z=-1/0,X=1/0,$=-1/0;i.pos<o;){if(_<=0){var ee=i.readVarint();s=7&ee,_=ee>>3}if(_--,1===s||2===s)F+=i.readSVarint(),N+=i.readSVarint(),F<j&&(j=F),F>Z&&(Z=F),N<X&&(X=N),N>$&&($=N);else if(7!==s)throw Error("unknown command "+s)}return[j,X,Z,$]},VectorTileFeature.prototype.toGeoJSON=function(i,o,s){var _,F,N=this.extent*Math.pow(2,s),j=this.extent*i,Z=this.extent*o,X=this.loadGeometry(),$=VectorTileFeature.types[this.type];function project(i){for(var o=0;o<i.length;o++){var s=i[o],_=180-(s.y+Z)*360/N;i[o]=[(s.x+j)*360/N-180,360/Math.PI*Math.atan(Math.exp(_*Math.PI/180))-90]}}switch(this.type){case 1:var ee=[];for(_=0;_<X.length;_++)ee[_]=X[_][0];project(X=ee);break;case 2:for(_=0;_<X.length;_++)project(X[_]);break;case 3:for(_=0,X=classifyRings$1(X);_<X.length;_++)for(F=0;F<X[_].length;F++)project(X[_][F])}1===X.length?X=X[0]:$="Multi"+$;var et={type:"Feature",geometry:{type:$,coordinates:X},properties:this.properties};return"id"in this&&(et.id=this.id),et};var rC=VectorTileLayer;function VectorTileLayer(i,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(readLayer,this,o),this.length=this._features.length}function readLayer(i,o,s){15===i?o.version=s.readVarint():1===i?o.name=s.readString():5===i?o.extent=s.readVarint():2===i?o._features.push(s.pos):3===i?o._keys.push(s.readString()):4===i&&o._values.push(readValueMessage(s))}function readValueMessage(i){for(var o=null,s=i.readVarint()+i.pos;i.pos<s;){var _=i.readVarint()>>3;o=1===_?i.readString():2===_?i.readFloat():3===_?i.readDouble():4===_?i.readVarint64():5===_?i.readVarint():6===_?i.readSVarint():7===_?i.readBoolean():null}return o}function readTile(i,o,s){if(3===i){var _=new rC(s,s.readVarint()+s.pos);_.length&&(o[_.name]=_)}}VectorTileLayer.prototype.feature=function(i){if(i<0||i>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[i];var o=this._pbf.readVarint()+this._pbf.pos;return new rM(this._pbf,o,this.extent,this._keys,this._values)};var rE={VectorTile:function(i,o){this.layers=i.readFields(readTile,{},o)},VectorTileFeature:rM,VectorTileLayer:rC},rL=rE.VectorTileFeature.types;function addVertex(i,o,s,_,F,N,j,Z){i.emplaceBack(o,s,2*Math.floor(8192*_)+j,16384*F,16384*N,Math.round(Z))}var FillExtrusionBucket=function(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new tE,this.indexArray=new tN,this.programConfigurations=new ProgramConfigurationSet(rS,i.layers,i.zoom),this.segments=new SegmentVector,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function isBoundaryEdge(i,o){return i.x===o.x&&(i.x<0||i.x>8192)||i.y===o.y&&(i.y<0||i.y>8192)}function isEntirelyOutside(i){return i.every(function(i){return i.x<0})||i.every(function(i){return i.x>8192})||i.every(function(i){return i.y<0})||i.every(function(i){return i.y>8192})}FillExtrusionBucket.prototype.populate=function(i,o,s){this.features=[],this.hasPattern=hasPattern("fill-extrusion",this.layers,o);for(var _=0;_<i.length;_+=1){var F=i[_],N=F.feature,j=F.id,Z=F.index,X=F.sourceLayerIndex,$=this.layers[0]._featureFilter.needGeometry,ee={type:N.type,id:j,properties:N.properties,geometry:$?loadGeometry(N):[]};if(this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom),ee,s)){var et={id:j,sourceLayerIndex:X,index:Z,geometry:$?ee.geometry:loadGeometry(N),properties:N.properties,type:N.type,patterns:{}};void 0!==N.id&&(et.id=N.id),this.hasPattern?this.features.push(addPatternDependencies("fill-extrusion",this.layers,et,this.zoom,o)):this.addFeature(et,et.geometry,Z,s,{}),o.featureIndex.insert(N,et.geometry,Z,X,this.index,!0)}}},FillExtrusionBucket.prototype.addFeatures=function(i,o,s){for(var _=0,F=this.features;_<F.length;_+=1){var N=F[_],j=N.geometry;this.addFeature(N,j,N.index,o,s)}},FillExtrusionBucket.prototype.update=function(i,o,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,s)},FillExtrusionBucket.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},FillExtrusionBucket.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},FillExtrusionBucket.prototype.upload=function(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,rS),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0},FillExtrusionBucket.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},FillExtrusionBucket.prototype.addFeature=function(i,o,s,_,F){for(var N=0,j=classifyRings(o,500);N<j.length;N+=1){for(var Z=j[N],X=0,$=0;$<Z.length;$+=1)X+=Z[$].length;for(var ee=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),et=0;et<Z.length;et+=1){var er=Z[et];if(!(0===er.length||isEntirelyOutside(er)))for(var en=0,ei=0;ei<er.length;ei++){var eo=er[ei];if(ei>=1){var es=er[ei-1];if(!isBoundaryEdge(eo,es)){ee.vertexLength+4>SegmentVector.MAX_VERTEX_ARRAY_LENGTH&&(ee=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var el=eo.sub(es)._perp()._unit(),ec=es.dist(eo);en+ec>32768&&(en=0),addVertex(this.layoutVertexArray,eo.x,eo.y,el.x,el.y,0,0,en),addVertex(this.layoutVertexArray,eo.x,eo.y,el.x,el.y,0,1,en),en+=ec,addVertex(this.layoutVertexArray,es.x,es.y,el.x,el.y,0,0,en),addVertex(this.layoutVertexArray,es.x,es.y,el.x,el.y,0,1,en);var eu=ee.vertexLength;this.indexArray.emplaceBack(eu,eu+2,eu+1),this.indexArray.emplaceBack(eu+1,eu+2,eu+3),ee.vertexLength+=4,ee.primitiveLength+=2}}}}if(ee.vertexLength+X>SegmentVector.MAX_VERTEX_ARRAY_LENGTH&&(ee=this.segments.prepareSegment(X,this.layoutVertexArray,this.indexArray)),"Polygon"===rL[i.type]){for(var ef=[],ed=[],eh=ee.vertexLength,ep=0;ep<Z.length;ep+=1){var eg=Z[ep];if(0!==eg.length){eg!==Z[0]&&ed.push(ef.length/2);for(var em=0;em<eg.length;em++){var ey=eg[em];addVertex(this.layoutVertexArray,ey.x,ey.y,0,0,1,1,0),ef.push(ey.x),ef.push(ey.y)}}}for(var ev=r_(ef,ed),ex=0;ex<ev.length;ex+=3)this.indexArray.emplaceBack(eh+ev[ex],eh+ev[ex+2],eh+ev[ex+1]);ee.primitiveLength+=ev.length/3,ee.vertexLength+=X}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,s,F,_)},register("FillExtrusionBucket",FillExtrusionBucket,{omit:["layers","features"]});var rP={paint:new Properties({"fill-extrusion-opacity":new DataConstantProperty(eO["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new DataDrivenProperty(eO["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new DataConstantProperty(eO["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new DataConstantProperty(eO["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new tT(eO["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new DataDrivenProperty(eO["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new DataDrivenProperty(eO["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new DataConstantProperty(eO["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},rI=function(i){function FillExtrusionStyleLayer(o){i.call(this,o,rP)}return i&&(FillExtrusionStyleLayer.__proto__=i),FillExtrusionStyleLayer.prototype=Object.create(i&&i.prototype),FillExtrusionStyleLayer.prototype.constructor=FillExtrusionStyleLayer,FillExtrusionStyleLayer.prototype.createBucket=function(i){return new FillExtrusionBucket(i)},FillExtrusionStyleLayer.prototype.queryRadius=function(){return translateDistance(this.paint.get("fill-extrusion-translate"))},FillExtrusionStyleLayer.prototype.is3D=function(){return!0},FillExtrusionStyleLayer.prototype.queryIntersectsFeature=function(i,o,s,_,F,N,j,Z){var X=translate(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),N.angle,j),$=this.paint.get("fill-extrusion-height").evaluate(o,s),ee=this.paint.get("fill-extrusion-base").evaluate(o,s),et=projectQueryGeometry$1(X,Z,N,0),er=projectExtrusion(_,ee,$,Z);return checkIntersection(er[0],er[1],et)},FillExtrusionStyleLayer}(tA);function dot$2(i,o){return i.x*o.x+i.y*o.y}function getIntersectionDistance(i,o){if(1===i.length){for(var s,_=0,F=o[_++];!s||F.equals(s);)if(!(s=o[_++]))return 1/0;for(;_<o.length;_++){var N=o[_],j=i[0],Z=s.sub(F),X=N.sub(F),$=j.sub(F),ee=dot$2(Z,Z),et=dot$2(Z,X),er=dot$2(X,X),en=dot$2($,Z),ei=dot$2($,X),eo=ee*er-et*et,es=(er*en-et*ei)/eo,el=(ee*ei-et*en)/eo,ec=1-es-el,eu=F.z*ec+s.z*es+N.z*el;if(isFinite(eu))return eu}return 1/0}for(var ef=1/0,ed=0;ed<o.length;ed+=1)ef=Math.min(ef,o[ed].z);return ef}function checkIntersection(i,o,s){var _=1/0;polygonIntersectsMultiPolygon(s,o)&&(_=getIntersectionDistance(s,o[0]));for(var F=0;F<o.length;F++)for(var N=o[F],j=i[F],Z=0;Z<N.length-1;Z++){var X=N[Z],$=N[Z+1],ee=j[Z],et=[X,$,j[Z+1],ee,X];polygonIntersectsPolygon(s,et)&&(_=Math.min(_,getIntersectionDistance(s,et)))}return _!==1/0&&_}function projectExtrusion(i,o,s,_){for(var F=[],N=[],j=_[8]*o,Z=_[9]*o,X=_[10]*o,$=_[11]*o,ee=_[8]*s,et=_[9]*s,en=_[10]*s,ei=_[11]*s,eo=0;eo<i.length;eo+=1){for(var es=i[eo],el=[],ec=[],eu=0;eu<es.length;eu+=1){var ef=es[eu],ed=ef.x,eh=ef.y,ep=_[0]*ed+_[4]*eh+_[12],eg=_[1]*ed+_[5]*eh+_[13],em=_[2]*ed+_[6]*eh+_[14],ey=_[3]*ed+_[7]*eh+_[15],ev=ep+j,ex=eg+Z,e_=em+X,ew=ey+$,eT=ep+ee,ek=eg+et,eA=em+en,eS=ey+ei,eM=new er(ev/ew,ex/ew);eM.z=e_/ew,el.push(eM);var eC=new er(eT/eS,ek/eS);eC.z=eA/eS,ec.push(eC)}F.push(el),N.push(ec)}return[F,N]}function projectQueryGeometry$1(i,o,s,_){for(var F=[],N=0;N<i.length;N+=1){var j=i[N],Z=[j.x,j.y,_,1];transformMat4(Z,Z,o),F.push(new er(Z[0]/Z[3],Z[1]/Z[3]))}return F}var rO=createLayout([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,rD=rE.VectorTileFeature.types,rR=Math.cos(37.5*(Math.PI/180)),LineBucket=function(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tL,this.indexArray=new tN,this.programConfigurations=new ProgramConfigurationSet(rO,i.layers,i.zoom),this.segments=new SegmentVector,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};LineBucket.prototype.populate=function(i,o,s){this.hasPattern=hasPattern("line",this.layers,o);for(var _=this.layers[0].layout.get("line-sort-key"),F=[],N=0;N<i.length;N+=1){var j=i[N],Z=j.feature,X=j.id,$=j.index,ee=j.sourceLayerIndex,et=this.layers[0]._featureFilter.needGeometry,er={type:Z.type,id:X,properties:Z.properties,geometry:et?loadGeometry(Z):[]};if(this.layers[0]._featureFilter.filter(new EvaluationParameters(this.zoom),er,s)){et||(er.geometry=loadGeometry(Z));var en=_?_.evaluate(er,{},s):void 0,ei={id:X,properties:Z.properties,type:Z.type,sourceLayerIndex:ee,index:$,geometry:er.geometry,patterns:{},sortKey:en};F.push(ei)}}_&&F.sort(function(i,o){return i.sortKey-o.sortKey});for(var eo=0;eo<F.length;eo+=1){var es=F[eo],el=es.geometry,ec=es.index,eu=es.sourceLayerIndex;if(this.hasPattern){var ef=addPatternDependencies("line",this.layers,es,this.zoom,o);this.patternFeatures.push(ef)}else this.addFeature(es,el,ec,s,{});var ed=i[ec].feature;o.featureIndex.insert(ed,el,ec,eu,this.index)}},LineBucket.prototype.update=function(i,o,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,s)},LineBucket.prototype.addFeatures=function(i,o,s){for(var _=0,F=this.patternFeatures;_<F.length;_+=1){var N=F[_];this.addFeature(N,N.geometry,N.index,o,s)}},LineBucket.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},LineBucket.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},LineBucket.prototype.upload=function(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,rO),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0},LineBucket.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},LineBucket.prototype.addFeature=function(i,o,s,_,F){for(var N=this.layers[0].layout,j=N.get("line-join").evaluate(i,{}),Z=N.get("line-cap"),X=N.get("line-miter-limit"),$=N.get("line-round-limit"),ee=0;ee<o.length;ee+=1){var et=o[ee];this.addLine(et,i,j,Z,X,$)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,s,F,_)},LineBucket.prototype.addLine=function(i,o,s,_,F,N){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+o.properties.mapbox_clip_start,this.clipEnd=+o.properties.mapbox_clip_end;for(var j,Z=0;Z<i.length-1;Z++)this.totalDistance+=i[Z].dist(i[Z+1]);this.updateScaledDistance()}for(var X="Polygon"===rD[o.type],$=i.length;$>=2&&i[$-1].equals(i[$-2]);)$--;for(var ee=0;ee<$-1&&i[ee].equals(i[ee+1]);)ee++;if(!($<(X?3:2))){"bevel"===s&&(F=1.05);var et=this.overscaling<=16?122880/(512*this.overscaling):0,er=this.segments.prepareSegment(10*$,this.layoutVertexArray,this.indexArray),en=void 0,ei=void 0,eo=void 0,es=void 0;this.e1=this.e2=-1,X&&(j=i[$-2],es=i[ee].sub(j)._unit()._perp());for(var el=ee;el<$;el++)if(!((ei=el===$-1?X?i[ee+1]:void 0:i[el+1])&&i[el].equals(ei))){es&&(eo=es),j&&(en=j),j=i[el],es=ei?ei.sub(j)._unit()._perp():eo;var ec=(eo=eo||es).add(es);(0!==ec.x||0!==ec.y)&&ec._unit();var eu=eo.x*es.x+eo.y*es.y,ef=ec.x*es.x+ec.y*es.y,ed=0!==ef?1/ef:1/0,eh=2*Math.sqrt(2-2*ef),ep=ef<rR&&en&&ei,eg=eo.x*es.y-eo.y*es.x>0;if(ep&&el>ee){var em=j.dist(en);if(em>2*et){var ey=j.sub(j.sub(en)._mult(et/em)._round());this.updateDistance(en,ey),this.addCurrentVertex(ey,eo,0,0,er),en=ey}}var ev=en&&ei,ex=ev?s:X?"butt":_;if(ev&&"round"===ex&&(ed<N?ex="miter":ed<=2&&(ex="fakeround")),"miter"===ex&&ed>F&&(ex="bevel"),"bevel"===ex&&(ed>2&&(ex="flipbevel"),ed<F&&(ex="miter")),en&&this.updateDistance(en,j),"miter"===ex)ec._mult(ed),this.addCurrentVertex(j,ec,0,0,er);else if("flipbevel"===ex){if(ed>100)ec=es.mult(-1);else{var e_=ed*eo.add(es).mag()/eo.sub(es).mag();ec._perp()._mult(e_*(eg?-1:1))}this.addCurrentVertex(j,ec,0,0,er),this.addCurrentVertex(j,ec.mult(-1),0,0,er)}else if("bevel"===ex||"fakeround"===ex){var ew=-Math.sqrt(ed*ed-1),eT=eg?ew:0,ek=eg?0:ew;if(en&&this.addCurrentVertex(j,eo,eT,ek,er),"fakeround"===ex)for(var eA=Math.round(180*eh/Math.PI/20),eS=1;eS<eA;eS++){var eM=eS/eA;if(.5!==eM){var eC=eM-.5,eE=1.0904+eu*(-3.2452+eu*(3.55645-1.43519*eu)),eL=.848013+eu*(-1.06021+.215638*eu);eM+=eM*eC*(eM-1)*(eE*eC*eC+eL)}var eP=es.sub(eo)._mult(eM)._add(eo)._unit()._mult(eg?-1:1);this.addHalfVertex(j,eP.x,eP.y,!1,eg,0,er)}ei&&this.addCurrentVertex(j,es,-eT,-ek,er)}else if("butt"===ex)this.addCurrentVertex(j,ec,0,0,er);else if("square"===ex){var eI=en?1:-1;this.addCurrentVertex(j,ec,eI,eI,er)}else"round"===ex&&(en&&(this.addCurrentVertex(j,eo,0,0,er),this.addCurrentVertex(j,eo,1,1,er,!0)),ei&&(this.addCurrentVertex(j,es,-1,-1,er,!0),this.addCurrentVertex(j,es,0,0,er)));if(ep&&el<$-1){var eO=j.dist(ei);if(eO>2*et){var eD=j.add(ei.sub(j)._mult(et/eO)._round());this.updateDistance(j,eD),this.addCurrentVertex(eD,es,0,0,er),j=eD}}}}},LineBucket.prototype.addCurrentVertex=function(i,o,s,_,F,N){void 0===N&&(N=!1);var j=o.x+o.y*s,Z=o.y-o.x*s,X=-o.x+o.y*_,$=-o.y-o.x*_;this.addHalfVertex(i,j,Z,N,!1,s,F),this.addHalfVertex(i,X,$,N,!0,-_,F),this.distance>16384&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(i,o,s,_,F,N))},LineBucket.prototype.addHalfVertex=function(i,o,s,_,F,N,j){var Z=i.x,X=i.y,$=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((Z<<1)+(_?1:0),(X<<1)+(F?1:0),Math.round(63*o)+128,Math.round(63*s)+128,(0===N?0:N<0?-1:1)+1|(63&$)<<2,$>>6);var ee=j.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ee),j.primitiveLength++),F?this.e2=ee:this.e1=ee},LineBucket.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*32767:this.distance},LineBucket.prototype.updateDistance=function(i,o){this.distance+=i.dist(o),this.updateScaledDistance()},register("LineBucket",LineBucket,{omit:["layers","patternFeatures"]});var rB=new Properties({"line-cap":new DataConstantProperty(eO.layout_line["line-cap"]),"line-join":new DataDrivenProperty(eO.layout_line["line-join"]),"line-miter-limit":new DataConstantProperty(eO.layout_line["line-miter-limit"]),"line-round-limit":new DataConstantProperty(eO.layout_line["line-round-limit"]),"line-sort-key":new DataDrivenProperty(eO.layout_line["line-sort-key"])}),rF={paint:new Properties({"line-opacity":new DataDrivenProperty(eO.paint_line["line-opacity"]),"line-color":new DataDrivenProperty(eO.paint_line["line-color"]),"line-translate":new DataConstantProperty(eO.paint_line["line-translate"]),"line-translate-anchor":new DataConstantProperty(eO.paint_line["line-translate-anchor"]),"line-width":new DataDrivenProperty(eO.paint_line["line-width"]),"line-gap-width":new DataDrivenProperty(eO.paint_line["line-gap-width"]),"line-offset":new DataDrivenProperty(eO.paint_line["line-offset"]),"line-blur":new DataDrivenProperty(eO.paint_line["line-blur"]),"line-dasharray":new CrossFadedProperty(eO.paint_line["line-dasharray"]),"line-pattern":new tT(eO.paint_line["line-pattern"]),"line-gradient":new ColorRampProperty(eO.paint_line["line-gradient"])}),layout:rB},rz=new(function(i){function LineFloorwidthProperty(){i.apply(this,arguments)}return i&&(LineFloorwidthProperty.__proto__=i),LineFloorwidthProperty.prototype=Object.create(i&&i.prototype),LineFloorwidthProperty.prototype.constructor=LineFloorwidthProperty,LineFloorwidthProperty.prototype.possiblyEvaluate=function(o,s){return s=new EvaluationParameters(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),i.prototype.possiblyEvaluate.call(this,o,s)},LineFloorwidthProperty.prototype.evaluate=function(o,s,_,F){return s=extend({},s,{zoom:Math.floor(s.zoom)}),i.prototype.evaluate.call(this,o,s,_,F)},LineFloorwidthProperty}(DataDrivenProperty))(rF.paint.properties["line-width"].specification);rz.useIntegerZoom=!0;var rN=function(i){function LineStyleLayer(o){i.call(this,o,rF)}return i&&(LineStyleLayer.__proto__=i),LineStyleLayer.prototype=Object.create(i&&i.prototype),LineStyleLayer.prototype.constructor=LineStyleLayer,LineStyleLayer.prototype._handleSpecialPaintPropertyUpdate=function(i){"line-gradient"===i&&this._updateGradient()},LineStyleLayer.prototype._updateGradient=function(){var i=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=renderColorRamp(i,"lineProgress"),this.gradientTexture=null},LineStyleLayer.prototype.recalculate=function(o,s){i.prototype.recalculate.call(this,o,s),this.paint._values["line-floorwidth"]=rz.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)},LineStyleLayer.prototype.createBucket=function(i){return new LineBucket(i)},LineStyleLayer.prototype.queryRadius=function(i){var o,s;return o=getMaximumPaintValue("line-width",this,i),((s=getMaximumPaintValue("line-gap-width",this,i))>0?s+2*o:o)/2+Math.abs(getMaximumPaintValue("line-offset",this,i))+translateDistance(this.paint.get("line-translate"))},LineStyleLayer.prototype.queryIntersectsFeature=function(i,o,s,_,F,N,j){var Z,X,$=translate(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),N.angle,j),ee=j/2*(Z=this.paint.get("line-width").evaluate(o,s),(X=this.paint.get("line-gap-width").evaluate(o,s))>0?X+2*Z:Z),et=this.paint.get("line-offset").evaluate(o,s);return et&&(_=offsetLine(_,et*j)),polygonIntersectsBufferedMultiLine($,_,ee)},LineStyleLayer.prototype.isTileClipped=function(){return!0},LineStyleLayer}(tA);function offsetLine(i,o){for(var s=[],_=new er(0,0),F=0;F<i.length;F++){for(var N=i[F],j=[],Z=0;Z<N.length;Z++){var X=N[Z-1],$=N[Z],ee=N[Z+1],et=0===Z?_:$.sub(X)._unit()._perp(),en=Z===N.length-1?_:ee.sub($)._unit()._perp(),ei=et._add(en)._unit(),eo=ei.x*en.x+ei.y*en.y;ei._mult(1/eo),j.push(ei._mult(o)._add($))}s.push(j)}return s}var rj=createLayout([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rV=createLayout([{name:"a_projected_pos",components:3,type:"Float32"}],4);createLayout([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var rU=createLayout([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);createLayout([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var rH=createLayout([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rq=createLayout([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function transformText(i,o,s){var _=o.layout.get("text-transform").evaluate(s,{});return"uppercase"===_?i=i.toLocaleUpperCase():"lowercase"===_&&(i=i.toLocaleLowerCase()),tw.applyArabicShaping&&(i=tw.applyArabicShaping(i)),i}function transformText$1(i,o,s){return i.sections.forEach(function(i){i.text=transformText(i.text,o,s)}),i}function mergeLines(i){var o={},s={},_=[],F=0;function add(o){_.push(i[o]),F++}function mergeFromRight(i,o,F){var N=s[i];return delete s[i],s[o]=N,_[N].geometry[0].pop(),_[N].geometry[0]=_[N].geometry[0].concat(F[0]),N}function mergeFromLeft(i,s,F){var N=o[s];return delete o[s],o[i]=N,_[N].geometry[0].shift(),_[N].geometry[0]=F[0].concat(_[N].geometry[0]),N}function getKey(i,o,s){var _=s?o[0][o[0].length-1]:o[0][0];return i+":"+_.x+":"+_.y}for(var N=0;N<i.length;N++){var j=i[N],Z=j.geometry,X=j.text?j.text.toString():null;if(!X){add(N);continue}var $=getKey(X,Z),ee=getKey(X,Z,!0);if($ in s&&ee in o&&s[$]!==o[ee]){var et=mergeFromLeft($,ee,Z),er=mergeFromRight($,ee,_[et].geometry);delete o[$],delete s[ee],s[getKey(X,_[er].geometry,!0)]=er,_[et].geometry=null}else $ in s?mergeFromRight($,ee,Z):ee in o?mergeFromLeft($,ee,Z):(add(N),o[$]=F-1,s[ee]=F-1)}return _.filter(function(i){return i.geometry})}createLayout([{name:"triangle",components:3,type:"Uint16"}]),createLayout([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),createLayout([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),createLayout([{type:"Float32",name:"offsetX"}]),createLayout([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var rG={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","\xa2":"￠","\xa3":"￡","\xa5":"￥","\xa6":"￤","\xac":"￢","\xaf":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function verticalizePunctuation(i){for(var o="",s=0;s<i.length;s++){var _=i.charCodeAt(s+1)||null,F=i.charCodeAt(s-1)||null;(!_||charHasUprightVerticalOrientation(_)||charHasNeutralVerticalOrientation(_)||rG[i[s+1]])&&(!F||charHasUprightVerticalOrientation(F)||charHasNeutralVerticalOrientation(F)||rG[i[s-1]])&&rG[i[s]]?o+=rG[i[s]]:o+=i[s]}return o}var rW={read:function(i,o,s,_,F){var N,j,Z=8*F-_-1,X=(1<<Z)-1,$=X>>1,ee=-7,et=s?F-1:0,er=s?-1:1,en=i[o+et];for(et+=er,N=en&(1<<-ee)-1,en>>=-ee,ee+=Z;ee>0;N=256*N+i[o+et],et+=er,ee-=8);for(j=N&(1<<-ee)-1,N>>=-ee,ee+=_;ee>0;j=256*j+i[o+et],et+=er,ee-=8);if(0===N)N=1-$;else{if(N===X)return j?NaN:(en?-1:1)*(1/0);j+=Math.pow(2,_),N-=$}return(en?-1:1)*j*Math.pow(2,N-_)},write:function(i,o,s,_,F,N){var j,Z,X,$=8*N-F-1,ee=(1<<$)-1,et=ee>>1,er=23===F?5960464477539062e-23:0,en=_?0:N-1,ei=_?1:-1,eo=o<0||0===o&&1/o<0?1:0;for(isNaN(o=Math.abs(o))||o===1/0?(Z=isNaN(o)?1:0,j=ee):(j=Math.floor(Math.log(o)/Math.LN2),o*(X=Math.pow(2,-j))<1&&(j--,X*=2),j+et>=1?o+=er/X:o+=er*Math.pow(2,1-et),o*X>=2&&(j++,X/=2),j+et>=ee?(Z=0,j=ee):j+et>=1?(Z=(o*X-1)*Math.pow(2,F),j+=et):(Z=o*Math.pow(2,et-1)*Math.pow(2,F),j=0));F>=8;i[s+en]=255&Z,en+=ei,Z/=256,F-=8);for(j=j<<F|Z,$+=F;$>0;i[s+en]=255&j,en+=ei,j/=256,$-=8);i[s+en-ei]|=128*eo}},rZ=Pbf;function Pbf(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0,Pbf.Fixed64=1,Pbf.Bytes=2,Pbf.Fixed32=5;var rY="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function readVarintRemainder(i,o,s){var _,F,N=s.buf;if(_=(112&(F=N[s.pos++]))>>4,F<128||(_|=(127&(F=N[s.pos++]))<<3,F<128)||(_|=(127&(F=N[s.pos++]))<<10,F<128)||(_|=(127&(F=N[s.pos++]))<<17,F<128)||(_|=(127&(F=N[s.pos++]))<<24,F<128)||(_|=(1&(F=N[s.pos++]))<<31,F<128))return toNum(i,_,o);throw Error("Expected varint not more than 10 bytes")}function readPackedEnd(i){return i.type===Pbf.Bytes?i.readVarint()+i.pos:i.pos+1}function toNum(i,o,s){return s?4294967296*o+(i>>>0):(o>>>0)*4294967296+(i>>>0)}function writeBigVarint(i,o){var s,_;if(i>=0?(s=i%4294967296|0,_=i/4294967296|0):(s=~(-i%4294967296),_=~(-i/4294967296),4294967295^s?s=s+1|0:(s=0,_=_+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");o.realloc(10),writeBigVarintLow(s,_,o),writeBigVarintHigh(_,o)}function writeBigVarintLow(i,o,s){s.buf[s.pos++]=127&i|128,i>>>=7,s.buf[s.pos++]=127&i|128,i>>>=7,s.buf[s.pos++]=127&i|128,i>>>=7,s.buf[s.pos++]=127&i|128,i>>>=7,s.buf[s.pos]=127&i}function writeBigVarintHigh(i,o){var s=(7&i)<<4;o.buf[o.pos++]|=s|((i>>>=3)?128:0),i&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i)&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i)&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i)&&(o.buf[o.pos++]=127&i|((i>>>=7)?128:0),i&&(o.buf[o.pos++]=127&i))}function makeRoomForExtraLength(i,o,s){var _=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));s.realloc(_);for(var F=s.pos-1;F>=i;F--)s.buf[F+_]=s.buf[F]}function writePackedVarint(i,o){for(var s=0;s<i.length;s++)o.writeVarint(i[s])}function writePackedSVarint(i,o){for(var s=0;s<i.length;s++)o.writeSVarint(i[s])}function writePackedFloat(i,o){for(var s=0;s<i.length;s++)o.writeFloat(i[s])}function writePackedDouble(i,o){for(var s=0;s<i.length;s++)o.writeDouble(i[s])}function writePackedBoolean(i,o){for(var s=0;s<i.length;s++)o.writeBoolean(i[s])}function writePackedFixed32(i,o){for(var s=0;s<i.length;s++)o.writeFixed32(i[s])}function writePackedSFixed32(i,o){for(var s=0;s<i.length;s++)o.writeSFixed32(i[s])}function writePackedFixed64(i,o){for(var s=0;s<i.length;s++)o.writeFixed64(i[s])}function writePackedSFixed64(i,o){for(var s=0;s<i.length;s++)o.writeSFixed64(i[s])}function readUInt32(i,o){return(i[o]|i[o+1]<<8|i[o+2]<<16)+16777216*i[o+3]}function writeInt32(i,o,s){i[s]=o,i[s+1]=o>>>8,i[s+2]=o>>>16,i[s+3]=o>>>24}function readInt32(i,o){return(i[o]|i[o+1]<<8|i[o+2]<<16)+(i[o+3]<<24)}function readUtf8(i,o,s){for(var _="",F=o;F<s;){var N,j,Z,X=i[F],$=null,ee=X>239?4:X>223?3:X>191?2:1;if(F+ee>s)break;1===ee?X<128&&($=X):2===ee?(192&(N=i[F+1]))==128&&($=(31&X)<<6|63&N)<=127&&($=null):3===ee?(N=i[F+1],j=i[F+2],(192&N)==128&&(192&j)==128&&(($=(15&X)<<12|(63&N)<<6|63&j)<=2047||$>=55296&&$<=57343)&&($=null)):4===ee&&(N=i[F+1],j=i[F+2],Z=i[F+3],(192&N)==128&&(192&j)==128&&(192&Z)==128&&(($=(15&X)<<18|(63&N)<<12|(63&j)<<6|63&Z)<=65535||$>=1114112)&&($=null)),null===$?($=65533,ee=1):$>65535&&($-=65536,_+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),_+=String.fromCharCode($),F+=ee}return _}function readUtf8TextDecoder(i,o,s){return rY.decode(i.subarray(o,s))}function writeUtf8(i,o,s){for(var _,F,N=0;N<o.length;N++){if((_=o.charCodeAt(N))>55295&&_<57344){if(F){if(_<56320){i[s++]=239,i[s++]=191,i[s++]=189,F=_;continue}_=F-55296<<10|_-56320|65536,F=null}else{_>56319||N+1===o.length?(i[s++]=239,i[s++]=191,i[s++]=189):F=_;continue}}else F&&(i[s++]=239,i[s++]=191,i[s++]=189,F=null);_<128?i[s++]=_:(_<2048?i[s++]=_>>6|192:(_<65536?i[s++]=_>>12|224:(i[s++]=_>>18|240,i[s++]=_>>12&63|128),i[s++]=_>>6&63|128),i[s++]=63&_|128)}return s}function readFontstacks(i,o,s){1===i&&s.readMessage(readFontstack,o)}function readFontstack(i,o,s){if(3===i){var _=s.readMessage(readGlyph,{}),F=_.id,N=_.bitmap,j=_.width,Z=_.height,X=_.left,$=_.top,ee=_.advance;o.push({id:F,bitmap:new AlphaImage({width:j+6,height:Z+6},N),metrics:{width:j,height:Z,left:X,top:$,advance:ee}})}}function readGlyph(i,o,s){1===i?o.id=s.readVarint():2===i?o.bitmap=s.readBytes():3===i?o.width=s.readVarint():4===i?o.height=s.readVarint():5===i?o.left=s.readSVarint():6===i?o.top=s.readSVarint():7===i&&(o.advance=s.readVarint())}function parseGlyphPBF(i){return new rZ(i).readFields(readFontstacks,[])}function potpack(i){for(var o=0,s=0,_=0;_<i.length;_+=1){var F=i[_];o+=F.w*F.h,s=Math.max(s,F.w)}i.sort(function(i,o){return o.h-i.h});for(var N=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),s),h:1/0}],j=0,Z=0,X=0;X<i.length;X+=1)for(var $=i[X],ee=N.length-1;ee>=0;ee--){var et=N[ee];if(!($.w>et.w)&&!($.h>et.h)){if($.x=et.x,$.y=et.y,Z=Math.max(Z,$.y+$.h),j=Math.max(j,$.x+$.w),$.w===et.w&&$.h===et.h){var er=N.pop();ee<N.length&&(N[ee]=er)}else $.h===et.h?(et.x+=$.w,et.w-=$.w):($.w===et.w||N.push({x:et.x+$.w,y:et.y,w:et.w-$.w,h:$.h}),et.y+=$.h,et.h-=$.h);break}}return{w:j,h:Z,fill:o/(j*Z)||0}}Pbf.prototype={destroy:function(){this.buf=null},readFields:function(i,o,s){for(s=s||this.length;this.pos<s;){var _=this.readVarint(),F=_>>3,N=this.pos;this.type=7&_,i(F,o,this),this.pos===N&&this.skip(_)}return o},readMessage:function(i,o){return this.readFields(i,o,this.readVarint()+this.pos)},readFixed32:function(){var i=readUInt32(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=readInt32(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=readUInt32(this.buf,this.pos)+4294967296*readUInt32(this.buf,this.pos+4);return this.pos+=8,i},readSFixed64:function(){var i=readUInt32(this.buf,this.pos)+4294967296*readInt32(this.buf,this.pos+4);return this.pos+=8,i},readFloat:function(){var i=rW.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=rW.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var o,s,_=this.buf;return(o=127&(s=_[this.pos++]),s<128)?o:(o|=(127&(s=_[this.pos++]))<<7,s<128)?o:(o|=(127&(s=_[this.pos++]))<<14,s<128)?o:(o|=(127&(s=_[this.pos++]))<<21,s<128)?o:readVarintRemainder(o|=(15&(s=_[this.pos]))<<28,i,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?-((i+1)/2):i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,o=this.pos;return(this.pos=i,i-o>=12&&rY)?readUtf8TextDecoder(this.buf,o,i):readUtf8(this.buf,o,i)},readBytes:function(){var i=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,i);return this.pos=i,o},readPackedVarint:function(i,o){if(this.type!==Pbf.Bytes)return i.push(this.readVarint(o));var s=readPackedEnd(this);for(i=i||[];this.pos<s;)i.push(this.readVarint(o));return i},readPackedSVarint:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readSVarint());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readBoolean());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readFloat());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readDouble());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readFixed32());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readSFixed32());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readFixed64());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Pbf.Bytes)return i.push(this.readSFixed64());var o=readPackedEnd(this);for(i=i||[];this.pos<o;)i.push(this.readSFixed64());return i},skip:function(i){var o=7&i;if(o===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(o===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Pbf.Fixed32)this.pos+=4;else if(o===Pbf.Fixed64)this.pos+=8;else throw Error("Unimplemented type: "+o)},writeTag:function(i,o){this.writeVarint(i<<3|o)},realloc:function(i){for(var o=this.length||16;o<this.pos+i;)o*=2;if(o!==this.length){var s=new Uint8Array(o);s.set(this.buf),this.buf=s,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),writeInt32(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),writeInt32(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),writeInt32(this.buf,-1&i,this.pos),writeInt32(this.buf,Math.floor(23283064365386963e-26*i),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),writeInt32(this.buf,-1&i,this.pos),writeInt32(this.buf,Math.floor(23283064365386963e-26*i),this.pos+4),this.pos+=8},writeVarint:function(i){if((i=+i||0)>268435455||i<0){writeBigVarint(i,this);return}this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),!(i<=127))&&(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))},writeSVarint:function(i){this.writeVarint(i<0?-(2*i)-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var o=this.pos;this.pos=writeUtf8(this.buf,i,this.pos);var s=this.pos-o;s>=128&&makeRoomForExtraLength(o,s,this),this.pos=o-1,this.writeVarint(s),this.pos+=s},writeFloat:function(i){this.realloc(4),rW.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),rW.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var o=i.length;this.writeVarint(o),this.realloc(o);for(var s=0;s<o;s++)this.buf[this.pos++]=i[s]},writeRawMessage:function(i,o){this.pos++;var s=this.pos;i(o,this);var _=this.pos-s;_>=128&&makeRoomForExtraLength(s,_,this),this.pos=s-1,this.writeVarint(_),this.pos+=_},writeMessage:function(i,o,s){this.writeTag(i,Pbf.Bytes),this.writeRawMessage(o,s)},writePackedVarint:function(i,o){o.length&&this.writeMessage(i,writePackedVarint,o)},writePackedSVarint:function(i,o){o.length&&this.writeMessage(i,writePackedSVarint,o)},writePackedBoolean:function(i,o){o.length&&this.writeMessage(i,writePackedBoolean,o)},writePackedFloat:function(i,o){o.length&&this.writeMessage(i,writePackedFloat,o)},writePackedDouble:function(i,o){o.length&&this.writeMessage(i,writePackedDouble,o)},writePackedFixed32:function(i,o){o.length&&this.writeMessage(i,writePackedFixed32,o)},writePackedSFixed32:function(i,o){o.length&&this.writeMessage(i,writePackedSFixed32,o)},writePackedFixed64:function(i,o){o.length&&this.writeMessage(i,writePackedFixed64,o)},writePackedSFixed64:function(i,o){o.length&&this.writeMessage(i,writePackedSFixed64,o)},writeBytesField:function(i,o){this.writeTag(i,Pbf.Bytes),this.writeBytes(o)},writeFixed32Field:function(i,o){this.writeTag(i,Pbf.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(i,o){this.writeTag(i,Pbf.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(i,o){this.writeTag(i,Pbf.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(i,o){this.writeTag(i,Pbf.Fixed64),this.writeSFixed64(o)},writeVarintField:function(i,o){this.writeTag(i,Pbf.Varint),this.writeVarint(o)},writeSVarintField:function(i,o){this.writeTag(i,Pbf.Varint),this.writeSVarint(o)},writeStringField:function(i,o){this.writeTag(i,Pbf.Bytes),this.writeString(o)},writeFloatField:function(i,o){this.writeTag(i,Pbf.Fixed32),this.writeFloat(o)},writeDoubleField:function(i,o){this.writeTag(i,Pbf.Fixed64),this.writeDouble(o)},writeBooleanField:function(i,o){this.writeVarintField(i,!!o)}};var ImagePosition=function(i,o){var s=o.pixelRatio,_=o.version,F=o.stretchX,N=o.stretchY,j=o.content;this.paddedRect=i,this.pixelRatio=s,this.stretchX=F,this.stretchY=N,this.content=j,this.version=_},rX={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};rX.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},rX.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},rX.tlbr.get=function(){return this.tl.concat(this.br)},rX.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ImagePosition.prototype,rX);var ImageAtlas=function(i,o){var s={},_={};this.haveRenderCallbacks=[];var F=[];this.addImages(i,s,F),this.addImages(o,_,F);var N=potpack(F),j=new RGBAImage({width:N.w||1,height:N.h||1});for(var Z in i){var X=i[Z],$=s[Z].paddedRect;RGBAImage.copy(X.data,j,{x:0,y:0},{x:$.x+1,y:$.y+1},X.data)}for(var ee in o){var et=o[ee],er=_[ee].paddedRect,en=er.x+1,ei=er.y+1,eo=et.data.width,es=et.data.height;RGBAImage.copy(et.data,j,{x:0,y:0},{x:en,y:ei},et.data),RGBAImage.copy(et.data,j,{x:0,y:es-1},{x:en,y:ei-1},{width:eo,height:1}),RGBAImage.copy(et.data,j,{x:0,y:0},{x:en,y:ei+es},{width:eo,height:1}),RGBAImage.copy(et.data,j,{x:eo-1,y:0},{x:en-1,y:ei},{width:1,height:es}),RGBAImage.copy(et.data,j,{x:0,y:0},{x:en+eo,y:ei},{width:1,height:es})}this.image=j,this.iconPositions=s,this.patternPositions=_};ImageAtlas.prototype.addImages=function(i,o,s){for(var _ in i){var F=i[_],N={x:0,y:0,w:F.data.width+2,h:F.data.height+2};s.push(N),o[_]=new ImagePosition(N,F),F.hasRenderCallback&&this.haveRenderCallbacks.push(_)}},ImageAtlas.prototype.patchUpdatedImages=function(i,o){for(var s in i.dispatchRenderCallbacks(this.haveRenderCallbacks),i.updatedImages)this.patchUpdatedImage(this.iconPositions[s],i.getImage(s),o),this.patchUpdatedImage(this.patternPositions[s],i.getImage(s),o)},ImageAtlas.prototype.patchUpdatedImage=function(i,o,s){if(i&&o&&i.version!==o.version){i.version=o.version;var _=i.tl,F=_[0],N=_[1];s.update(o.data,void 0,{x:F,y:N})}},register("ImagePosition",ImagePosition),register("ImageAtlas",ImageAtlas);var rK={horizontal:1,vertical:2,horizontalOnly:3};function isEmpty(i){for(var o=0;o<i.length;o+=1)if(0!==i[o].positionedGlyphs.length)return!1;return!0}var SectionOptions=function(){this.scale=1,this.fontStack="",this.imageName=null};SectionOptions.forText=function(i,o){var s=new SectionOptions;return s.scale=i||1,s.fontStack=o,s},SectionOptions.forImage=function(i){var o=new SectionOptions;return o.imageName=i,o};var TaggedString=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function breakLines(i,o){for(var s=[],_=i.text,F=0,N=0;N<o.length;N+=1){var j=o[N];s.push(i.substring(F,j)),F=j}return F<_.length&&s.push(i.substring(F,_.length)),s}function shapeText(i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei,eo){var es,el=TaggedString.fromFeature(i,F);et===rK.vertical&&el.verticalizePunctuation();var ec=tw.processBidirectionalText,eu=tw.processStyledBidirectionalText;if(ec&&1===el.sections.length){es=[];for(var ef=ec(el.toString(),determineLineBreaks(el,$,N,o,_,en,ei)),ed=0;ed<ef.length;ed+=1){var eh=ef[ed],ep=new TaggedString;ep.text=eh,ep.sections=el.sections;for(var eg=0;eg<eh.length;eg++)ep.sectionIndex.push(0);es.push(ep)}}else if(eu){es=[];for(var em=eu(el.text,el.sectionIndex,determineLineBreaks(el,$,N,o,_,en,ei)),ey=0;ey<em.length;ey+=1){var ev=em[ey],ex=new TaggedString;ex.text=ev[0],ex.sectionIndex=ev[1],ex.sections=el.sections,es.push(ex)}}else es=breakLines(el,determineLineBreaks(el,$,N,o,_,en,ei));var e_=[],ew={positionedLines:e_,text:el.toString(),top:ee[1],bottom:ee[1],left:ee[0],right:ee[0],writingMode:et,iconsInText:!1,verticalizable:!1};return shapeLines(ew,o,s,_,es,j,Z,X,et,$,er,eo),!isEmpty(e_)&&ew}TaggedString.fromFeature=function(i,o){for(var s=new TaggedString,_=0;_<i.sections.length;_++){var F=i.sections[_];F.image?s.addImageSection(F):s.addTextSection(F,o)}return s},TaggedString.prototype.length=function(){return this.text.length},TaggedString.prototype.getSection=function(i){return this.sections[this.sectionIndex[i]]},TaggedString.prototype.getSectionIndex=function(i){return this.sectionIndex[i]},TaggedString.prototype.getCharCode=function(i){return this.text.charCodeAt(i)},TaggedString.prototype.verticalizePunctuation=function(){this.text=verticalizePunctuation(this.text)},TaggedString.prototype.trim=function(){for(var i=0,o=0;o<this.text.length&&rJ[this.text.charCodeAt(o)];o++)i++;for(var s=this.text.length,_=this.text.length-1;_>=0&&_>=i&&rJ[this.text.charCodeAt(_)];_--)s--;this.text=this.text.substring(i,s),this.sectionIndex=this.sectionIndex.slice(i,s)},TaggedString.prototype.substring=function(i,o){var s=new TaggedString;return s.text=this.text.substring(i,o),s.sectionIndex=this.sectionIndex.slice(i,o),s.sections=this.sections,s},TaggedString.prototype.toString=function(){return this.text},TaggedString.prototype.getMaxScale=function(){var i=this;return this.sectionIndex.reduce(function(o,s){return Math.max(o,i.sections[s].scale)},0)},TaggedString.prototype.addTextSection=function(i,o){this.text+=i.text,this.sections.push(SectionOptions.forText(i.scale,i.fontStack||o));for(var s=this.sections.length-1,_=0;_<i.text.length;++_)this.sectionIndex.push(s)},TaggedString.prototype.addImageSection=function(i){var o=i.image?i.image.name:"";if(0===o.length){warnOnce("Can't add FormattedSection with an empty image.");return}var s=this.getNextImageSectionCharCode();if(!s){warnOnce("Reached maximum number of images 6401");return}this.text+=String.fromCharCode(s),this.sections.push(SectionOptions.forImage(o)),this.sectionIndex.push(this.sections.length-1)},TaggedString.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var rJ={};rJ[9]=!0,rJ[10]=!0,rJ[11]=!0,rJ[12]=!0,rJ[13]=!0,rJ[32]=!0;var r$={};function getGlyphAdvance(i,o,s,_,F,N){if(o.imageName){var j=_[o.imageName];return j?j.displaySize[0]*o.scale*24/N+F:0}var Z=s[o.fontStack],X=Z&&Z[i];return X?X.metrics.advance*o.scale+F:0}function determineAverageLineWidth(i,o,s,_,F,N){for(var j=0,Z=0;Z<i.length();Z++){var X=i.getSection(Z);j+=getGlyphAdvance(i.getCharCode(Z),X,_,F,o,N)}var $=Math.max(1,Math.ceil(j/s));return j/$}function calculateBadness(i,o,s,_){var F=Math.pow(i-o,2);return _?i<o?F/2:2*F:F+Math.abs(s)*s}function calculatePenalty(i,o,s){var _=0;return 10===i&&(_-=1e4),s&&(_+=150),(40===i||65288===i)&&(_+=50),(41===o||65289===o)&&(_+=50),_}function evaluateBreak(i,o,s,_,F,N){for(var j=null,Z=calculateBadness(o,s,F,N),X=0;X<_.length;X+=1){var $=_[X],ee=calculateBadness(o-$.x,s,F,N)+$.badness;ee<=Z&&(j=$,Z=ee)}return{index:i,x:o,priorBreak:j,badness:Z}}function leastBadBreaks(i){return i?leastBadBreaks(i.priorBreak).concat(i.index):[]}function determineLineBreaks(i,o,s,_,F,N,j){if("point"!==N||!i)return[];for(var Z=[],X=determineAverageLineWidth(i,o,s,_,F,j),$=i.text.indexOf("​")>=0,ee=0,et=0;et<i.length();et++){var er=i.getSection(et),en=i.getCharCode(et);if(rJ[en]||(ee+=getGlyphAdvance(en,er,_,F,o,j)),et<i.length()-1){var ei=charAllowsIdeographicBreaking(en);(r$[en]||ei||er.imageName)&&Z.push(evaluateBreak(et+1,ee,X,Z,calculatePenalty(en,i.getCharCode(et+1),ei&&$),!1))}}return leastBadBreaks(evaluateBreak(i.length(),ee,X,Z,0,!0))}function getAnchorAlignment(i){var o=.5,s=.5;switch(i){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:o,verticalAlign:s}}function shapeLines(i,o,s,_,F,N,j,Z,X,$,ee,et){for(var er=0,en=-17,ei=0,eo=0,es="right"===Z?1:"left"===Z?0:.5,el=0,ec=0;ec<F.length;ec+=1){var eu=F[ec];eu.trim();var ef=eu.getMaxScale(),ed=(ef-1)*24,eh={positionedGlyphs:[],lineOffset:0};i.positionedLines[el]=eh;var ep=eh.positionedGlyphs,eg=0;if(!eu.length()){en+=N,++el;continue}for(var em=0;em<eu.length();em++){var ey=eu.getSection(em),ev=eu.getSectionIndex(em),ex=eu.getCharCode(em),e_=0,ew=null,eT=null,ek=null,eA=24,eS=!(X===rK.horizontal||!ee&&!charHasUprightVerticalOrientation(ex)||ee&&(rJ[ex]||charInComplexShapingScript(ex)));if(ey.imageName){var eM=_[ey.imageName];if(!eM)continue;ek=ey.imageName,i.iconsInText=i.iconsInText||!0,eT=eM.paddedRect;var eC=eM.displaySize;ey.scale=24*ey.scale/et,ew={width:eC[0],height:eC[1],left:1,top:-3,advance:eS?eC[1]:eC[0]},e_=ed+(24-eC[1]*ey.scale),eA=ew.advance;var eE=eS?eC[0]*ey.scale-24*ef:eC[1]*ey.scale-24*ef;eE>0&&eE>eg&&(eg=eE)}else{var eL=s[ey.fontStack],eP=eL&&eL[ex];if(eP&&eP.rect)eT=eP.rect,ew=eP.metrics;else{var eI=o[ey.fontStack],eO=eI&&eI[ex];if(!eO)continue;ew=eO.metrics}e_=(ef-ey.scale)*24}eS?(i.verticalizable=!0,ep.push({glyph:ex,imageName:ek,x:er,y:en+e_,vertical:eS,scale:ey.scale,fontStack:ey.fontStack,sectionIndex:ev,metrics:ew,rect:eT}),er+=eA*ey.scale+$):(ep.push({glyph:ex,imageName:ek,x:er,y:en+e_,vertical:eS,scale:ey.scale,fontStack:ey.fontStack,sectionIndex:ev,metrics:ew,rect:eT}),er+=ew.advance*ey.scale+$)}0!==ep.length&&(ei=Math.max(er-$,ei),justifyLine(ep,0,ep.length-1,es,eg)),er=0;var eD=N*ef+eg;eh.lineOffset=Math.max(eg,ed),en+=eD,eo=Math.max(eD,eo),++el}var eR=en- -17,eB=getAnchorAlignment(j),eF=eB.horizontalAlign,ez=eB.verticalAlign;align$1(i.positionedLines,es,eF,ez,ei,eo,N,eR,F.length),i.top+=-ez*eR,i.bottom=i.top+eR,i.left+=-eF*ei,i.right=i.left+ei}function justifyLine(i,o,s,_,F){if(_||F)for(var N=i[s],j=N.metrics.advance*N.scale,Z=(i[s].x+j)*_,X=o;X<=s;X++)i[X].x-=Z,i[X].y+=F}function align$1(i,o,s,_,F,N,j,Z,X){var $=(o-s)*F,ee=0;ee=N!==j?-Z*_- -17:(-_*X+.5)*j;for(var et=0;et<i.length;et+=1)for(var er=i[et],en=0,ei=er.positionedGlyphs;en<ei.length;en+=1){var eo=ei[en];eo.x+=$,eo.y+=ee}}function shapeIcon(i,o,s){var _=getAnchorAlignment(s),F=_.horizontalAlign,N=_.verticalAlign,j=o[0],Z=o[1],X=j-i.displaySize[0]*F,$=X+i.displaySize[0],ee=Z-i.displaySize[1]*N,et=ee+i.displaySize[1];return{image:i,top:ee,bottom:et,left:X,right:$}}function fitIconToText(i,o,s,_,F,N){var j,Z,X,$,ee,et=i.image;if(et.content){var er=et.content,en=et.pixelRatio||1;j=[er[0]/en,er[1]/en,et.displaySize[0]-er[2]/en,et.displaySize[1]-er[3]/en]}var ei=o.left*N,eo=o.right*N;"width"===s||"both"===s?(ee=F[0]+ei-_[3],X=F[0]+eo+_[1]):X=(ee=F[0]+(ei+eo-et.displaySize[0])/2)+et.displaySize[0];var es=o.top*N,el=o.bottom*N;return"height"===s||"both"===s?(Z=F[1]+es-_[0],$=F[1]+el+_[2]):$=(Z=F[1]+(es+el-et.displaySize[1])/2)+et.displaySize[1],{image:et,top:Z,right:X,bottom:$,left:ee,collisionPadding:j}}r$[10]=!0,r$[32]=!0,r$[38]=!0,r$[40]=!0,r$[41]=!0,r$[43]=!0,r$[45]=!0,r$[47]=!0,r$[173]=!0,r$[183]=!0,r$[8203]=!0,r$[8208]=!0,r$[8211]=!0,r$[8231]=!0;var rQ=function(i){function Anchor(o,s,_,F){i.call(this,o,s),this.angle=_,void 0!==F&&(this.segment=F)}return i&&(Anchor.__proto__=i),Anchor.prototype=Object.create(i&&i.prototype),Anchor.prototype.constructor=Anchor,Anchor.prototype.clone=function(){return new Anchor(this.x,this.y,this.angle,this.segment)},Anchor}(er);function getSizeData(i,o){var s=o.expression;if("constant"===s.kind)return{kind:"constant",layoutSize:s.evaluate(new EvaluationParameters(i+1))};if("source"===s.kind)return{kind:"source"};for(var _=s.zoomStops,F=s.interpolationType,N=0;N<_.length&&_[N]<=i;)N++;for(var j=N=Math.max(0,N-1);j<_.length&&_[j]<i+1;)j++;j=Math.min(_.length-1,j);var Z=_[N],X=_[j];if("composite"===s.kind)return{kind:"composite",minZoom:Z,maxZoom:X,interpolationType:F};var $=s.evaluate(new EvaluationParameters(Z)),ee=s.evaluate(new EvaluationParameters(X));return{kind:"camera",minZoom:Z,maxZoom:X,minSize:$,maxSize:ee,interpolationType:F}}function evaluateSizeForFeature(i,o,s){var _=o.uSize,F=o.uSizeT,N=s.lowerSize,j=s.upperSize;return"source"===i.kind?N/128:"composite"===i.kind?number(N/128,j/128,F):_}function evaluateSizeForZoom(i,o){var s=0,_=0;if("constant"===i.kind)_=i.layoutSize;else if("source"!==i.kind){var F=i.interpolationType,N=i.minZoom,j=i.maxZoom,Z=F?clamp(Interpolate.interpolationFactor(F,o,N,j),0,1):0;"camera"===i.kind?_=number(i.minSize,i.maxSize,Z):s=Z}return{uSizeT:s,uSize:_}}register("Anchor",rQ);var r0=Object.freeze({__proto__:null,getSizeData:getSizeData,evaluateSizeForFeature:evaluateSizeForFeature,evaluateSizeForZoom:evaluateSizeForZoom,SIZE_PACK_FACTOR:128});function checkMaxAngle(i,o,s,_,F){if(void 0===o.segment)return!0;for(var N=o,j=o.segment+1,Z=0;Z>-s/2;){if(--j<0)return!1;Z-=i[j].dist(N),N=i[j]}Z+=i[j].dist(i[j+1]),j++;for(var X=[],$=0;Z<s/2;){var ee=i[j-1],et=i[j],er=i[j+1];if(!er)return!1;var en=ee.angleTo(et)-et.angleTo(er);for(en=Math.abs((en+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:Z,angleDelta:en}),$+=en;Z-X[0].distance>_;)$-=X.shift().angleDelta;if($>F)return!1;j++,Z+=et.dist(er)}return!0}function getLineLength(i){for(var o=0,s=0;s<i.length-1;s++)o+=i[s].dist(i[s+1]);return o}function getShapedLabelLength(i,o){return Math.max(i?i.right-i.left:0,o?o.right-o.left:0)}function getCenterAnchor(i,o,s,_,F,N){for(var j=s?.6*F*N:0,Z=getShapedLabelLength(s,_)*N,X=0,$=getLineLength(i)/2,ee=0;ee<i.length-1;ee++){var et=i[ee],er=i[ee+1],en=et.dist(er);if(X+en>$){var ei=($-X)/en,eo=new rQ(number(et.x,er.x,ei),number(et.y,er.y,ei),er.angleTo(et),ee);if(eo._round(),!j||checkMaxAngle(i,eo,Z,j,o))return eo;return}X+=en}}function getAnchors(i,o,s,_,F,N,j,Z,X){var $=_?.6*N*j:0,ee=getShapedLabelLength(_,F),et=ee*j,er=0===i[0].x||i[0].x===X||0===i[0].y||i[0].y===X;return o-et<o/4&&(o=et+o/4),resample(i,er?o/2*Z%o:(ee/2+2*N)*j*Z%o,o,$,s,et,er,!1,X)}function resample(i,o,s,_,F,N,j,Z,X){for(var $=N/2,ee=getLineLength(i),et=0,er=o-s,en=[],ei=0;ei<i.length-1;ei++){for(var eo=i[ei],es=i[ei+1],el=eo.dist(es),ec=es.angleTo(eo);er+s<et+el;){var eu=((er+=s)-et)/el,ef=number(eo.x,es.x,eu),ed=number(eo.y,es.y,eu);if(ef>=0&&ef<X&&ed>=0&&ed<X&&er-$>=0&&er+$<=ee){var eh=new rQ(ef,ed,ec,ei);eh._round(),(!_||checkMaxAngle(i,eh,N,_,F))&&en.push(eh)}}et+=el}return Z||en.length||j||(en=resample(i,et/2,s,_,F,N,j,!0,X)),en}function clipLine(i,o,s,_,F){for(var N=[],j=0;j<i.length;j++)for(var Z=i[j],X=void 0,$=0;$<Z.length-1;$++){var ee=Z[$],et=Z[$+1];if((!(ee.x<o)||!(et.x<o))&&(ee.x<o?ee=new er(o,ee.y+(et.y-ee.y)*((o-ee.x)/(et.x-ee.x)))._round():et.x<o&&(et=new er(o,ee.y+(et.y-ee.y)*((o-ee.x)/(et.x-ee.x)))._round()),!(ee.y<s)||!(et.y<s)))ee.y<s?ee=new er(ee.x+(et.x-ee.x)*((s-ee.y)/(et.y-ee.y)),s)._round():et.y<s&&(et=new er(ee.x+(et.x-ee.x)*((s-ee.y)/(et.y-ee.y)),s)._round()),(!(ee.x>=_)||!(et.x>=_))&&(ee.x>=_?ee=new er(_,ee.y+(et.y-ee.y)*((_-ee.x)/(et.x-ee.x)))._round():et.x>=_&&(et=new er(_,ee.y+(et.y-ee.y)*((_-ee.x)/(et.x-ee.x)))._round()),ee.y>=F&&et.y>=F||(ee.y>=F?ee=new er(ee.x+(et.x-ee.x)*((F-ee.y)/(et.y-ee.y)),F)._round():et.y>=F&&(et=new er(ee.x+(et.x-ee.x)*((F-ee.y)/(et.y-ee.y)),F)._round()),X&&ee.equals(X[X.length-1])||(X=[ee],N.push(X)),X.push(et)))}return N}function getIconQuads(i,o,s,_){var F=[],N=i.image,j=N.pixelRatio,Z=N.paddedRect.w-2,X=N.paddedRect.h-2,$=i.right-i.left,ee=i.bottom-i.top,et=N.stretchX||[[0,Z]],en=N.stretchY||[[0,X]],reduceRanges=function(i,o){return i+o[1]-o[0]},ei=et.reduce(reduceRanges,0),eo=en.reduce(reduceRanges,0),es=Z-ei,el=X-eo,ec=0,eu=ei,ef=0,ed=eo,eh=0,ep=es,eg=0,em=el;if(N.content&&_){var ey=N.content;ec=sumWithinRange(et,0,ey[0]),ef=sumWithinRange(en,0,ey[1]),eu=sumWithinRange(et,ey[0],ey[2]),ed=sumWithinRange(en,ey[1],ey[3]),eh=ey[0]-ec,eg=ey[1]-ef,ep=ey[2]-ey[0]-eu,em=ey[3]-ey[1]-ed}var makeBox=function(_,F,Z,X){var et,en,es,el,ey,ev,ex,e_,ew,eT,ek,eA,eS=(_.stretch-ec)/eu*$+i.left,eM=(es=_.fixed-eh,es-ep*_.stretch/ei),eC=(F.stretch-ef)/ed*ee+i.top,eE=(ev=F.fixed-eg,ev-em*F.stretch/eo),eL=(Z.stretch-ec)/eu*$+i.left,eP=(ew=Z.fixed-eh,ew-ep*Z.stretch/ei),eI=(X.stretch-ef)/ed*ee+i.top,eO=(eA=X.fixed-eg,eA-em*X.stretch/eo),eD=new er(eS,eC),eR=new er(eL,eC),eB=new er(eL,eI),eF=new er(eS,eI),ez=new er(eM/j,eE/j),eN=new er(eP/j,eO/j),ej=o*Math.PI/180;if(ej){var eV=Math.sin(ej),eU=Math.cos(ej),eH=[eU,-eV,eV,eU];eD._matMult(eH),eR._matMult(eH),eF._matMult(eH),eB._matMult(eH)}var eG=_.stretch+_.fixed,eW=Z.stretch+Z.fixed,eZ=F.stretch+F.fixed,eY=X.stretch+X.fixed;return{tl:eD,tr:eR,bl:eF,br:eB,tex:{x:N.paddedRect.x+1+eG,y:N.paddedRect.y+1+eZ,w:eW-eG,h:eY-eZ},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ez,pixelOffsetBR:eN,minFontScaleX:ep/j/$,minFontScaleY:em/j/ee,isSDF:s}};if(_&&(N.stretchX||N.stretchY))for(var ev=stretchZonesToCuts(et,es,ei),ex=stretchZonesToCuts(en,el,eo),e_=0;e_<ev.length-1;e_++)for(var ew=ev[e_],eT=ev[e_+1],ek=0;ek<ex.length-1;ek++){var eA=ex[ek],eS=ex[ek+1];F.push(makeBox(ew,eA,eT,eS))}else F.push(makeBox({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Z+1},{fixed:0,stretch:X+1}));return F}function sumWithinRange(i,o,s){for(var _=0,F=0;F<i.length;F+=1){var N=i[F];_+=Math.max(o,Math.min(s,N[1]))-Math.max(o,Math.min(s,N[0]))}return _}function stretchZonesToCuts(i,o,s){for(var _=[{fixed:-1,stretch:0}],F=0;F<i.length;F+=1){var N=i[F],j=N[0],Z=N[1],X=_[_.length-1];_.push({fixed:j-X.stretch,stretch:X.stretch}),_.push({fixed:j-X.stretch,stretch:X.stretch+(Z-j)})}return _.push({fixed:o+1,stretch:s}),_}function getGlyphQuads(i,o,s,_,F,N,j,Z){for(var X=_.layout.get("text-rotate").evaluate(N,{})*Math.PI/180,$=[],ee=0,et=o.positionedLines;ee<et.length;ee+=1)for(var en=et[ee],ei=0,eo=en.positionedGlyphs;ei<eo.length;ei+=1){var es=eo[ei];if(es.rect){var el=es.rect||{},ec=4,eu=!0,ef=1,ed=0,eh=(F||Z)&&es.vertical,ep=es.metrics.advance*es.scale/2;if(Z&&o.verticalizable){var eg=(es.scale-1)*24,em=(24-es.metrics.width*es.scale)/2;ed=en.lineOffset/2-(es.imageName?-em:eg)}if(es.imageName){var ey=j[es.imageName];eu=ey.sdf,ec=1/(ef=ey.pixelRatio)}var ev=F?[es.x+ep,es.y]:[0,0],ex=F?[0,0]:[es.x+ep+s[0],es.y+s[1]-ed],e_=[0,0];eh&&(e_=ex,ex=[0,0]);var ew=(es.metrics.left-ec)*es.scale-ep+ex[0],eT=(-es.metrics.top-ec)*es.scale+ex[1],ek=ew+el.w*es.scale/ef,eA=eT+el.h*es.scale/ef,eS=new er(ew,eT),eM=new er(ek,eT),eC=new er(ew,eA),eE=new er(ek,eA);if(eh){var eL=new er(-ep,ep- -17),eP=-Math.PI/2,eI=12-ep,eO=es.imageName?eI:0,eD=new er(22-eI,-eO),eR=new(Function.prototype.bind.apply(er,[null].concat(e_)));eS._rotateAround(eP,eL)._add(eD)._add(eR),eM._rotateAround(eP,eL)._add(eD)._add(eR),eC._rotateAround(eP,eL)._add(eD)._add(eR),eE._rotateAround(eP,eL)._add(eD)._add(eR)}if(X){var eB=Math.sin(X),eF=Math.cos(X),ez=[eF,-eB,eB,eF];eS._matMult(ez),eM._matMult(ez),eC._matMult(ez),eE._matMult(ez)}var eN=new er(0,0),ej=new er(0,0);$.push({tl:eS,tr:eM,bl:eC,br:eE,tex:el,writingMode:o.writingMode,glyphOffset:ev,sectionIndex:es.sectionIndex,isSDF:eu,pixelOffsetTL:eN,pixelOffsetBR:ej,minFontScaleX:0,minFontScaleY:0})}}return $}var CollisionFeature=function(i,o,s,_,F,N,j,Z,X,$){if(this.boxStartIndex=i.length,X){var ee=N.top,et=N.bottom,en=N.collisionPadding;en&&(ee-=en[1],et+=en[3]);var ei=et-ee;ei>0&&(ei=Math.max(10,ei),this.circleDiameter=ei)}else{var eo=N.top*j-Z,es=N.bottom*j+Z,el=N.left*j-Z,ec=N.right*j+Z,eu=N.collisionPadding;if(eu&&(el-=eu[0]*j,eo-=eu[1]*j,ec+=eu[2]*j,es+=eu[3]*j),$){var ef=new er(el,eo),ed=new er(ec,eo),eh=new er(el,es),ep=new er(ec,es),eg=$*Math.PI/180;ef._rotate(eg),ed._rotate(eg),eh._rotate(eg),ep._rotate(eg),el=Math.min(ef.x,ed.x,eh.x,ep.x),ec=Math.max(ef.x,ed.x,eh.x,ep.x),eo=Math.min(ef.y,ed.y,eh.y,ep.y),es=Math.max(ef.y,ed.y,eh.y,ep.y)}i.emplaceBack(o.x,o.y,el,eo,ec,es,s,_,F)}this.boxEndIndex=i.length},TinyQueue=function(i,o){if(void 0===i&&(i=[]),void 0===o&&(o=defaultCompare$1),this.data=i,this.length=this.data.length,this.compare=o,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function defaultCompare$1(i,o){return i<o?-1:i>o?1:0}function findPoleOfInaccessibility(i,o,s){void 0===o&&(o=1),void 0===s&&(s=!1);for(var _=1/0,F=1/0,N=-1/0,j=-1/0,Z=i[0],X=0;X<Z.length;X++){var $=Z[X];(!X||$.x<_)&&(_=$.x),(!X||$.y<F)&&(F=$.y),(!X||$.x>N)&&(N=$.x),(!X||$.y>j)&&(j=$.y)}var ee=Math.min(N-_,j-F),et=ee/2,en=new TinyQueue([],compareMax);if(0===ee)return new er(_,F);for(var ei=_;ei<N;ei+=ee)for(var eo=F;eo<j;eo+=ee)en.push(new Cell(ei+et,eo+et,et,i));for(var es=getCentroidCell(i),el=en.length;en.length;){var ec=en.pop();(ec.d>es.d||!es.d)&&(es=ec,s&&console.log("found best %d after %d probes",Math.round(1e4*ec.d)/1e4,el)),ec.max-es.d<=o||(et=ec.h/2,en.push(new Cell(ec.p.x-et,ec.p.y-et,et,i)),en.push(new Cell(ec.p.x+et,ec.p.y-et,et,i)),en.push(new Cell(ec.p.x-et,ec.p.y+et,et,i)),en.push(new Cell(ec.p.x+et,ec.p.y+et,et,i)),el+=4)}return s&&(console.log("num probes: "+el),console.log("best distance: "+es.d)),es.p}function compareMax(i,o){return o.max-i.max}function Cell(i,o,s,_){this.p=new er(i,o),this.h=s,this.d=pointToPolygonDist(this.p,_),this.max=this.d+this.h*Math.SQRT2}function pointToPolygonDist(i,o){for(var s=!1,_=1/0,F=0;F<o.length;F++)for(var N=o[F],j=0,Z=N.length,X=Z-1;j<Z;X=j++){var $=N[j],ee=N[X];$.y>i.y!=ee.y>i.y&&i.x<(ee.x-$.x)*(i.y-$.y)/(ee.y-$.y)+$.x&&(s=!s),_=Math.min(_,distToSegmentSquared(i,$,ee))}return(s?1:-1)*Math.sqrt(_)}function getCentroidCell(i){for(var o=0,s=0,_=0,F=i[0],N=0,j=F.length,Z=j-1;N<j;Z=N++){var X=F[N],$=F[Z],ee=X.x*$.y-$.x*X.y;s+=(X.x+$.x)*ee,_+=(X.y+$.y)*ee,o+=3*ee}return new Cell(s/o,_/o,0,i)}TinyQueue.prototype.push=function(i){this.data.push(i),this.length++,this._up(this.length-1)},TinyQueue.prototype.pop=function(){if(0!==this.length){var i=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),i}},TinyQueue.prototype.peek=function(){return this.data[0]},TinyQueue.prototype._up=function(i){for(var o=this.data,s=this.compare,_=o[i];i>0;){var F=i-1>>1,N=o[F];if(s(_,N)>=0)break;o[i]=N,i=F}o[i]=_},TinyQueue.prototype._down=function(i){for(var o=this.data,s=this.compare,_=this.length>>1,F=o[i];i<_;){var N=(i<<1)+1,j=o[N],Z=N+1;if(Z<this.length&&0>s(o[Z],j)&&(N=Z,j=o[Z]),s(j,F)>=0)break;o[i]=j,i=N}o[i]=F};var r1=Number.POSITIVE_INFINITY;function evaluateVariableOffset(i,o){function fromRadialOffset(i,o){var s=0,_=0;o<0&&(o=0);var F=o/Math.sqrt(2);switch(i){case"top-right":case"top-left":_=F-7;break;case"bottom-right":case"bottom-left":_=-F+7;break;case"bottom":_=-o+7;break;case"top":_=o-7}switch(i){case"top-right":case"bottom-right":s=-F;break;case"top-left":case"bottom-left":s=F;break;case"left":s=o;break;case"right":s=-o}return[s,_]}function fromTextOffset(i,o,s){var _=0,F=0;switch(o=Math.abs(o),s=Math.abs(s),i){case"top-right":case"top-left":case"top":F=s-7;break;case"bottom-right":case"bottom-left":case"bottom":F=-s+7}switch(i){case"top-right":case"bottom-right":case"right":_=-o;break;case"top-left":case"bottom-left":case"left":_=o}return[_,F]}return o[1]!==r1?fromTextOffset(i,o[0],o[1]):fromRadialOffset(i,o[0])}function performSymbolLayout(i,o,s,_,F,N,j){i.createArrays();var Z=512*i.overscaling;i.tilePixelRatio=8192/Z,i.compareText={},i.iconsNeedLinear=!1;var X=i.layers[0].layout,$=i.layers[0]._unevaluatedLayout._values,ee={};if("composite"===i.textSizeData.kind){var et=i.textSizeData,er=et.minZoom,en=et.maxZoom;ee.compositeTextSizes=[$["text-size"].possiblyEvaluate(new EvaluationParameters(er),j),$["text-size"].possiblyEvaluate(new EvaluationParameters(en),j)]}if("composite"===i.iconSizeData.kind){var ei=i.iconSizeData,eo=ei.minZoom,es=ei.maxZoom;ee.compositeIconSizes=[$["icon-size"].possiblyEvaluate(new EvaluationParameters(eo),j),$["icon-size"].possiblyEvaluate(new EvaluationParameters(es),j)]}ee.layoutTextSize=$["text-size"].possiblyEvaluate(new EvaluationParameters(i.zoom+1),j),ee.layoutIconSize=$["icon-size"].possiblyEvaluate(new EvaluationParameters(i.zoom+1),j),ee.textMaxSize=$["text-size"].possiblyEvaluate(new EvaluationParameters(18));for(var el=24*X.get("text-line-height"),ec="map"===X.get("text-rotation-alignment")&&"point"!==X.get("symbol-placement"),eu=X.get("text-keep-upright"),ef=X.get("text-size"),ed=0,eh=i.features;ed<eh.length;ed+=1)!function(){var N=eh[ed],Z=X.get("text-font").evaluate(N,{},j).join(","),$=ef.evaluate(N,{},j),et=ee.layoutTextSize.evaluate(N,{},j),er=ee.layoutIconSize.evaluate(N,{},j),en={horizontal:{},vertical:void 0},ei=N.text,eo=[0,0];if(ei){var es=ei.toString(),ep=24*X.get("text-letter-spacing").evaluate(N,{},j),eg=allowsLetterSpacing(es)?ep:0,em=X.get("text-anchor").evaluate(N,{},j),ey=X.get("text-variable-anchor");if(!ey){var ev=X.get("text-radial-offset").evaluate(N,{},j);eo=ev?evaluateVariableOffset(em,[24*ev,r1]):X.get("text-offset").evaluate(N,{},j).map(function(i){return 24*i})}var ex=ec?"center":X.get("text-justify").evaluate(N,{},j),e_=X.get("symbol-placement"),ew="point"===e_?24*X.get("text-max-width").evaluate(N,{},j):0,addVerticalShapingForPointLabelIfNeeded=function(){i.allowVerticalPlacement&&allowsVerticalWritingMode(es)&&(en.vertical=shapeText(ei,o,s,F,Z,ew,el,em,"left",eg,eo,rK.vertical,!0,e_,et,$))};if(!ec&&ey){for(var eT="auto"===ex?ey.map(function(i){return getAnchorJustification(i)}):[ex],ek=!1,eA=0;eA<eT.length;eA++){var eS=eT[eA];if(!en.horizontal[eS]){if(ek)en.horizontal[eS]=en.horizontal[0];else{var eM=shapeText(ei,o,s,F,Z,ew,el,"center",eS,eg,eo,rK.horizontal,!1,e_,et,$);eM&&(en.horizontal[eS]=eM,ek=1===eM.positionedLines.length)}}}addVerticalShapingForPointLabelIfNeeded()}else{"auto"===ex&&(ex=getAnchorJustification(em));var eC=shapeText(ei,o,s,F,Z,ew,el,em,ex,eg,eo,rK.horizontal,!1,e_,et,$);eC&&(en.horizontal[ex]=eC),addVerticalShapingForPointLabelIfNeeded(),allowsVerticalWritingMode(es)&&ec&&eu&&(en.vertical=shapeText(ei,o,s,F,Z,ew,el,em,ex,eg,eo,rK.vertical,!1,e_,et,$))}}var eE=void 0,eL=!1;if(N.icon&&N.icon.name){var eP=_[N.icon.name];eP&&(eE=shapeIcon(F[N.icon.name],X.get("icon-offset").evaluate(N,{},j),X.get("icon-anchor").evaluate(N,{},j)),eL=eP.sdf,void 0===i.sdfIcons?i.sdfIcons=eP.sdf:i.sdfIcons!==eP.sdf&&warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),eP.pixelRatio!==i.pixelRatio?i.iconsNeedLinear=!0:0!==X.get("icon-rotate").constantOr(1)&&(i.iconsNeedLinear=!0))}var eI=getDefaultHorizontalShaping(en.horizontal)||en.vertical;i.iconsInText=!!eI&&eI.iconsInText,(eI||eE)&&addFeature(i,N,en,eE,_,ee,et,er,eo,eL,j)}();N&&i.generateCollisionDebugBuffers()}function getAnchorJustification(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function addFeature(i,o,s,_,F,N,j,Z,X,$,ee){var et,er=N.textMaxSize.evaluate(o,{});void 0===er&&(er=j);var en=i.layers[0].layout,ei=en.get("icon-offset").evaluate(o,{},ee),eo=getDefaultHorizontalShaping(s.horizontal),es=j/24,el=i.tilePixelRatio*es,ec=i.tilePixelRatio*er/24,eu=i.tilePixelRatio*Z,ef=i.tilePixelRatio*en.get("symbol-spacing"),ed=en.get("text-padding")*i.tilePixelRatio,eh=en.get("icon-padding")*i.tilePixelRatio,ep=en.get("text-max-angle")/180*Math.PI,eg="map"===en.get("text-rotation-alignment")&&"point"!==en.get("symbol-placement"),em="map"===en.get("icon-rotation-alignment")&&"point"!==en.get("symbol-placement"),ey=en.get("symbol-placement"),ev=ef/2,ex=en.get("icon-text-fit");_&&"none"!==ex&&(i.allowVerticalPlacement&&s.vertical&&(et=fitIconToText(_,s.vertical,ex,en.get("icon-text-fit-padding"),ei,es)),eo&&(_=fitIconToText(_,eo,ex,en.get("icon-text-fit-padding"),ei,es)));var addSymbolAtAnchor=function(Z,er){er.x<0||er.x>=8192||er.y<0||er.y>=8192||addSymbol(i,er,Z,s,_,F,et,i.layers[0],i.collisionBoxArray,o.index,o.sourceLayerIndex,i.index,el,ed,eg,X,eu,eh,em,ei,o,N,$,ee,j)};if("line"===ey)for(var e_=0,ew=clipLine(o.geometry,0,0,8192,8192);e_<ew.length;e_+=1)for(var eT=ew[e_],ek=getAnchors(eT,ef,ep,s.vertical||eo,_,24,ec,i.overscaling,8192),eA=0;eA<ek.length;eA+=1){var eS=ek[eA];eo&&anchorIsTooClose(i,eo.text,ev,eS)||addSymbolAtAnchor(eT,eS)}else if("line-center"===ey)for(var eM=0,eC=o.geometry;eM<eC.length;eM+=1){var eE=eC[eM];if(eE.length>1){var eL=getCenterAnchor(eE,ep,s.vertical||eo,_,24,ec);eL&&addSymbolAtAnchor(eE,eL)}}else if("Polygon"===o.type)for(var eP=0,eI=classifyRings(o.geometry,0);eP<eI.length;eP+=1){var eO=eI[eP],eD=findPoleOfInaccessibility(eO,16);addSymbolAtAnchor(eO[0],new rQ(eD.x,eD.y,0))}else if("LineString"===o.type)for(var eR=0,eB=o.geometry;eR<eB.length;eR+=1){var eF=eB[eR];addSymbolAtAnchor(eF,new rQ(eF[0].x,eF[0].y,0))}else if("Point"===o.type)for(var ez=0,eN=o.geometry;ez<eN.length;ez+=1)for(var ej=eN[ez],eV=0;eV<ej.length;eV+=1){var eU=ej[eV];addSymbolAtAnchor([eU],new rQ(eU.x,eU.y,0))}}function addTextVertices(i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei){var eo=getGlyphQuads(o,s,Z,F,N,j,_,i.allowVerticalPlacement),es=i.textSizeData,el=null;"source"===es.kind?(el=[128*F.layout.get("text-size").evaluate(j,{})])[0]>32640&&warnOnce(i.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===es.kind&&((el=[128*en.compositeTextSizes[0].evaluate(j,{},ei),128*en.compositeTextSizes[1].evaluate(j,{},ei)])[0]>32640||el[1]>32640)&&warnOnce(i.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),i.addSymbols(i.text,eo,el,Z,N,j,$,o,X.lineStartIndex,X.lineLength,er,ei);for(var ec=0;ec<ee.length;ec+=1)et[ee[ec]]=i.text.placedSymbolArray.length-1;return 4*eo.length}function getDefaultHorizontalShaping(i){for(var o in i)return i[o];return null}function addSymbol(i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei,eo,es,el,ec,eu,ef,ed,eh,ep,eg){var em,ey,ev,ex,e_,ew=i.addToLineVertexArray(o,s),eT=0,ek=0,eA=0,eS=0,eM=-1,eC=-1,eE={},eL=t8(""),eP=0,eI=0;if(void 0===Z._unevaluatedLayout.getValue("text-radial-offset")?(eP=(em=Z.layout.get("text-offset").evaluate(ef,{},ep).map(function(i){return 24*i}))[0],eI=em[1]):(eP=24*Z.layout.get("text-radial-offset").evaluate(ef,{},ep),eI=r1),i.allowVerticalPlacement&&_.vertical){var eO=Z.layout.get("text-rotate").evaluate(ef,{},ep)+90;ex=new CollisionFeature(X,o,$,ee,et,_.vertical,er,en,ei,eO),j&&(e_=new CollisionFeature(X,o,$,ee,et,j,es,el,ei,eO))}if(F){var eD=Z.layout.get("icon-rotate").evaluate(ef,{}),eR="none"!==Z.layout.get("icon-text-fit"),eB=getIconQuads(F,eD,eh,eR),eF=j?getIconQuads(j,eD,eh,eR):void 0;ev=new CollisionFeature(X,o,$,ee,et,F,es,el,!1,eD),eT=4*eB.length;var ez=i.iconSizeData,eN=null;"source"===ez.kind?(eN=[128*Z.layout.get("icon-size").evaluate(ef,{})])[0]>32640&&warnOnce(i.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===ez.kind&&((eN=[128*ed.compositeIconSizes[0].evaluate(ef,{},ep),128*ed.compositeIconSizes[1].evaluate(ef,{},ep)])[0]>32640||eN[1]>32640)&&warnOnce(i.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),i.addSymbols(i.icon,eB,eN,eu,ec,ef,!1,o,ew.lineStartIndex,ew.lineLength,-1,ep),eM=i.icon.placedSymbolArray.length-1,eF&&(ek=4*eF.length,i.addSymbols(i.icon,eF,eN,eu,ec,ef,rK.vertical,o,ew.lineStartIndex,ew.lineLength,-1,ep),eC=i.icon.placedSymbolArray.length-1)}for(var ej in _.horizontal){var eV=_.horizontal[ej];ey||(eL=t8(eV.text),ey=new CollisionFeature(X,o,$,ee,et,eV,er,en,ei,Z.layout.get("text-rotate").evaluate(ef,{},ep)));var eU=1===eV.positionedLines.length;if(eA+=addTextVertices(i,o,eV,N,Z,ei,ef,eo,ew,_.vertical?rK.horizontal:rK.horizontalOnly,eU?Object.keys(_.horizontal):[ej],eE,eM,ed,ep),eU)break}_.vertical&&(eS+=addTextVertices(i,o,_.vertical,N,Z,ei,ef,eo,ew,rK.vertical,["vertical"],eE,eC,ed,ep));var eH=ey?ey.boxStartIndex:i.collisionBoxArray.length,eG=ey?ey.boxEndIndex:i.collisionBoxArray.length,eW=ex?ex.boxStartIndex:i.collisionBoxArray.length,eZ=ex?ex.boxEndIndex:i.collisionBoxArray.length,eY=ev?ev.boxStartIndex:i.collisionBoxArray.length,eX=ev?ev.boxEndIndex:i.collisionBoxArray.length,eK=e_?e_.boxStartIndex:i.collisionBoxArray.length,eJ=e_?e_.boxEndIndex:i.collisionBoxArray.length,e$=-1,getCollisionCircleHeight=function(i,o){return i&&i.circleDiameter?Math.max(i.circleDiameter,o):o};e$=getCollisionCircleHeight(ey,-1),e$=getCollisionCircleHeight(ex,e$),e$=getCollisionCircleHeight(ev,e$);var eQ=(e$=getCollisionCircleHeight(e_,e$))>-1?1:0;eQ&&(e$*=eg/24),i.glyphOffsetArray.length>=SymbolBucket.MAX_GLYPHS&&warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==ef.sortKey&&i.addToSortKeyRanges(i.symbolInstances.length,ef.sortKey),i.symbolInstances.emplaceBack(o.x,o.y,eE.right>=0?eE.right:-1,eE.center>=0?eE.center:-1,eE.left>=0?eE.left:-1,eE.vertical||-1,eM,eC,eL,eH,eG,eW,eZ,eY,eX,eK,eJ,$,eA,eS,eT,ek,eQ,0,er,eP,eI,e$)}function anchorIsTooClose(i,o,s,_){var F=i.compareText;if(o in F){for(var N=F[o],j=N.length-1;j>=0;j--)if(_.dist(N[j])<s)return!0}else F[o]=[];return F[o].push(_),!1}var r2=rE.VectorTileFeature.types,r3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function addVertex$1(i,o,s,_,F,N,j,Z,X,$,ee,et,er){var en=Z?Math.min(32640,Math.round(Z[0])):0,ei=Z?Math.min(32640,Math.round(Z[1])):0;i.emplaceBack(o,s,Math.round(32*_),Math.round(32*F),N,j,(en<<1)+(X?1:0),ei,16*$,16*ee,256*et,256*er)}function addDynamicAttributes(i,o,s){i.emplaceBack(o.x,o.y,s),i.emplaceBack(o.x,o.y,s),i.emplaceBack(o.x,o.y,s),i.emplaceBack(o.x,o.y,s)}function containsRTLText(i){for(var o=0,s=i.sections;o<s.length;o+=1)if(stringContainsRTLText(s[o].text))return!0;return!1}var SymbolBuffers=function(i){this.layoutVertexArray=new tI,this.indexArray=new tN,this.programConfigurations=i,this.segments=new SegmentVector,this.dynamicLayoutVertexArray=new tO,this.opacityVertexArray=new tD,this.placedSymbolArray=new t$};SymbolBuffers.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},SymbolBuffers.prototype.upload=function(i,o,s,_){!this.isEmpty()&&(s&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,rj.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,rV.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,r3,!0),this.opacityVertexBuffer.itemSize=1),(s||_)&&this.programConfigurations.upload(i))},SymbolBuffers.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},register("SymbolBuffers",SymbolBuffers);var CollisionBuffers=function(i,o,s){this.layoutVertexArray=new i,this.layoutAttributes=o,this.indexArray=new s,this.segments=new SegmentVector,this.collisionVertexArray=new tz};CollisionBuffers.prototype.upload=function(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,rU.members,!0)},CollisionBuffers.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},register("CollisionBuffers",CollisionBuffers);var SymbolBucket=function(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=identity([]),this.placementViewportMatrix=identity([]);var o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=getSizeData(this.zoom,o["text-size"]),this.iconSizeData=getSizeData(this.zoom,o["icon-size"]);var s=this.layers[0].layout,_=s.get("symbol-sort-key"),F=s.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==F&&void 0!==_.constantOr(1);var N="viewport-y"===F||"auto"===F&&!this.sortFeaturesByKey;this.sortFeaturesByY=N&&(s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement")),"point"===s.get("symbol-placement")&&(this.writingModes=s.get("text-writing-mode").map(function(i){return rK[i]})),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id}),this.sourceID=i.sourceID};function resolveTokens(i,o){return o.replace(/{([^{}]+)}/g,function(o,s){return s in i?String(i[s]):""})}SymbolBucket.prototype.createArrays=function(){this.text=new SymbolBuffers(new ProgramConfigurationSet(rj.members,this.layers,this.zoom,function(i){return/^text/.test(i)})),this.icon=new SymbolBuffers(new ProgramConfigurationSet(rj.members,this.layers,this.zoom,function(i){return/^icon/.test(i)})),this.glyphOffsetArray=new t1,this.lineVertexArray=new t2,this.symbolInstances=new t0},SymbolBucket.prototype.calculateGlyphDependencies=function(i,o,s,_,F){for(var N=0;N<i.length;N++)if(o[i.charCodeAt(N)]=!0,(s||_)&&F){var j=rG[i.charAt(N)];j&&(o[j.charCodeAt(0)]=!0)}},SymbolBucket.prototype.populate=function(i,o,s){var _=this.layers[0],F=_.layout,N=F.get("text-font"),j=F.get("text-field"),Z=F.get("icon-image"),X=("constant"!==j.value.kind||j.value.value instanceof Formatted&&!j.value.value.isEmpty()||j.value.value.toString().length>0)&&("constant"!==N.value.kind||N.value.value.length>0),$="constant"!==Z.value.kind||!!Z.value.value||Object.keys(Z.parameters).length>0,ee=F.get("symbol-sort-key");if(this.features=[],X||$){for(var et=o.iconDependencies,er=o.glyphDependencies,en=o.availableImages,ei=new EvaluationParameters(this.zoom),eo=0;eo<i.length;eo+=1){var es=i[eo],el=es.feature,ec=es.id,eu=es.index,ef=es.sourceLayerIndex,ed=_._featureFilter.needGeometry,eh={type:el.type,id:ec,properties:el.properties,geometry:ed?loadGeometry(el):[]};if(_._featureFilter.filter(ei,eh,s)){ed||(eh.geometry=loadGeometry(el));var ep=void 0;if(X){var eg=_.getValueAndResolveTokens("text-field",eh,s,en),em=Formatted.factory(eg);containsRTLText(em)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===getRTLTextPluginStatus()||this.hasRTLText&&tw.isParsed())&&(ep=transformText$1(em,_,eh))}var ey=void 0;if($){var ev=_.getValueAndResolveTokens("icon-image",eh,s,en);ey=ev instanceof ResolvedImage?ev:ResolvedImage.fromString(ev)}if(ep||ey){var ex=this.sortFeaturesByKey?ee.evaluate(eh,{},s):void 0,e_={id:ec,text:ep,icon:ey,index:eu,sourceLayerIndex:ef,geometry:loadGeometry(el),properties:el.properties,type:r2[el.type],sortKey:ex};if(this.features.push(e_),ey&&(et[ey.name]=!0),ep){var ew=N.evaluate(eh,{},s).join(","),eT="map"===F.get("text-rotation-alignment")&&"point"!==F.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(rK.vertical)>=0;for(var ek=0,eA=ep.sections;ek<eA.length;ek+=1){var eS=eA[ek];if(eS.image)et[eS.image.name]=!0;else{var eM=allowsVerticalWritingMode(ep.toString()),eC=eS.fontStack||ew,eE=er[eC]=er[eC]||{};this.calculateGlyphDependencies(eS.text,eE,eT,this.allowVerticalPlacement,eM)}}}}}}"line"===F.get("symbol-placement")&&(this.features=mergeLines(this.features)),this.sortFeaturesByKey&&this.features.sort(function(i,o){return i.sortKey-o.sortKey})}},SymbolBucket.prototype.update=function(i,o,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,o,this.layers,s),this.icon.programConfigurations.updatePaintArrays(i,o,this.layers,s))},SymbolBucket.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},SymbolBucket.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},SymbolBucket.prototype.upload=function(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},SymbolBucket.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},SymbolBucket.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},SymbolBucket.prototype.addToLineVertexArray=function(i,o){var s=this.lineVertexArray.length;if(void 0!==i.segment){for(var _=i.dist(o[i.segment+1]),F=i.dist(o[i.segment]),N={},j=i.segment+1;j<o.length;j++)N[j]={x:o[j].x,y:o[j].y,tileUnitDistanceFromAnchor:_},j<o.length-1&&(_+=o[j+1].dist(o[j]));for(var Z=i.segment||0;Z>=0;Z--)N[Z]={x:o[Z].x,y:o[Z].y,tileUnitDistanceFromAnchor:F},Z>0&&(F+=o[Z-1].dist(o[Z]));for(var X=0;X<o.length;X++){var $=N[X];this.lineVertexArray.emplaceBack($.x,$.y,$.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},SymbolBucket.prototype.addSymbols=function(i,o,s,_,F,N,j,Z,X,$,ee,et){for(var er=i.indexArray,en=i.layoutVertexArray,ei=i.segments.prepareSegment(4*o.length,en,er,N.sortKey),eo=this.glyphOffsetArray.length,es=ei.vertexLength,el=this.allowVerticalPlacement&&j===rK.vertical?Math.PI/2:0,ec=N.text&&N.text.sections,eu=0;eu<o.length;eu++){var ef=o[eu],ed=ef.tl,eh=ef.tr,ep=ef.bl,eg=ef.br,em=ef.tex,ey=ef.pixelOffsetTL,ev=ef.pixelOffsetBR,ex=ef.minFontScaleX,e_=ef.minFontScaleY,ew=ef.glyphOffset,eT=ef.isSDF,ek=ef.sectionIndex,eA=ei.vertexLength,eS=ew[1];addVertex$1(en,Z.x,Z.y,ed.x,eS+ed.y,em.x,em.y,s,eT,ey.x,ey.y,ex,e_),addVertex$1(en,Z.x,Z.y,eh.x,eS+eh.y,em.x+em.w,em.y,s,eT,ev.x,ey.y,ex,e_),addVertex$1(en,Z.x,Z.y,ep.x,eS+ep.y,em.x,em.y+em.h,s,eT,ey.x,ev.y,ex,e_),addVertex$1(en,Z.x,Z.y,eg.x,eS+eg.y,em.x+em.w,em.y+em.h,s,eT,ev.x,ev.y,ex,e_),addDynamicAttributes(i.dynamicLayoutVertexArray,Z,el),er.emplaceBack(eA,eA+1,eA+2),er.emplaceBack(eA+1,eA+2,eA+3),ei.vertexLength+=4,ei.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ew[0]),(eu===o.length-1||ek!==o[eu+1].sectionIndex)&&i.programConfigurations.populatePaintArrays(en.length,N,N.index,{},et,ec&&ec[ek])}i.placedSymbolArray.emplaceBack(Z.x,Z.y,eo,this.glyphOffsetArray.length-eo,es,X,$,Z.segment,s?s[0]:0,s?s[1]:0,_[0],_[1],j,0,!1,0,ee)},SymbolBucket.prototype._addCollisionDebugVertex=function(i,o,s,_,F,N){return o.emplaceBack(0,0),i.emplaceBack(s.x,s.y,_,F,Math.round(N.x),Math.round(N.y))},SymbolBucket.prototype.addCollisionDebugVertices=function(i,o,s,_,F,N,j){var Z=F.segments.prepareSegment(4,F.layoutVertexArray,F.indexArray),X=Z.vertexLength,$=F.layoutVertexArray,ee=F.collisionVertexArray,et=j.anchorX,en=j.anchorY;this._addCollisionDebugVertex($,ee,N,et,en,new er(i,o)),this._addCollisionDebugVertex($,ee,N,et,en,new er(s,o)),this._addCollisionDebugVertex($,ee,N,et,en,new er(s,_)),this._addCollisionDebugVertex($,ee,N,et,en,new er(i,_)),Z.vertexLength+=4;var ei=F.indexArray;ei.emplaceBack(X,X+1),ei.emplaceBack(X+1,X+2),ei.emplaceBack(X+2,X+3),ei.emplaceBack(X+3,X),Z.primitiveLength+=4},SymbolBucket.prototype.addDebugCollisionBoxes=function(i,o,s,_){for(var F=i;F<o;F++){var N=this.collisionBoxArray.get(F),j=N.x1,Z=N.y1,X=N.x2,$=N.y2;this.addCollisionDebugVertices(j,Z,X,$,_?this.textCollisionBox:this.iconCollisionBox,N.anchorPoint,s)}},SymbolBucket.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new CollisionBuffers(tB,rH.members,tG),this.iconCollisionBox=new CollisionBuffers(tB,rH.members,tG);for(var i=0;i<this.symbolInstances.length;i++){var o=this.symbolInstances.get(i);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}},SymbolBucket.prototype._deserializeCollisionBoxesForSymbol=function(i,o,s,_,F,N,j,Z,X){for(var $={},ee=o;ee<s;ee++){var et=i.get(ee);$.textBox={x1:et.x1,y1:et.y1,x2:et.x2,y2:et.y2,anchorPointX:et.anchorPointX,anchorPointY:et.anchorPointY},$.textFeatureIndex=et.featureIndex;break}for(var er=_;er<F;er++){var en=i.get(er);$.verticalTextBox={x1:en.x1,y1:en.y1,x2:en.x2,y2:en.y2,anchorPointX:en.anchorPointX,anchorPointY:en.anchorPointY},$.verticalTextFeatureIndex=en.featureIndex;break}for(var ei=N;ei<j;ei++){var eo=i.get(ei);$.iconBox={x1:eo.x1,y1:eo.y1,x2:eo.x2,y2:eo.y2,anchorPointX:eo.anchorPointX,anchorPointY:eo.anchorPointY},$.iconFeatureIndex=eo.featureIndex;break}for(var es=Z;es<X;es++){var el=i.get(es);$.verticalIconBox={x1:el.x1,y1:el.y1,x2:el.x2,y2:el.y2,anchorPointX:el.anchorPointX,anchorPointY:el.anchorPointY},$.verticalIconFeatureIndex=el.featureIndex;break}return $},SymbolBucket.prototype.deserializeCollisionBoxes=function(i){this.collisionArrays=[];for(var o=0;o<this.symbolInstances.length;o++){var s=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},SymbolBucket.prototype.hasTextData=function(){return this.text.segments.get().length>0},SymbolBucket.prototype.hasIconData=function(){return this.icon.segments.get().length>0},SymbolBucket.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},SymbolBucket.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},SymbolBucket.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},SymbolBucket.prototype.addIndicesForPlacedSymbol=function(i,o){for(var s=i.placedSymbolArray.get(o),_=s.vertexStartIndex+4*s.numGlyphs,F=s.vertexStartIndex;F<_;F+=4)i.indexArray.emplaceBack(F,F+1,F+2),i.indexArray.emplaceBack(F+1,F+2,F+3)},SymbolBucket.prototype.getSortedSymbolIndexes=function(i){if(this.sortedAngle===i&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var o=Math.sin(i),s=Math.cos(i),_=[],F=[],N=[],j=0;j<this.symbolInstances.length;++j){N.push(j);var Z=this.symbolInstances.get(j);_.push(0|Math.round(o*Z.anchorX+s*Z.anchorY)),F.push(Z.featureIndex)}return N.sort(function(i,o){return _[i]-_[o]||F[o]-F[i]}),N},SymbolBucket.prototype.addToSortKeyRanges=function(i,o){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===o?s.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:i,symbolInstanceEnd:i+1})},SymbolBucket.prototype.sortFeatures=function(i){var o=this;if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1)&&!(this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,_=this.symbolInstanceIndexes;s<_.length;s+=1){var F=_[s],N=this.symbolInstances.get(F);this.featureSortOrder.push(N.featureIndex),[N.rightJustifiedTextSymbolIndex,N.centerJustifiedTextSymbolIndex,N.leftJustifiedTextSymbolIndex].forEach(function(i,s,_){i>=0&&_.indexOf(i)===s&&o.addIndicesForPlacedSymbol(o.text,i)}),N.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,N.verticalPlacedTextSymbolIndex),N.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,N.placedIconSymbolIndex),N.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,N.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},register("SymbolBucket",SymbolBucket,{omit:["layers","collisionBoxArray","features","compareText"]}),SymbolBucket.MAX_GLYPHS=65535,SymbolBucket.addDynamicAttributes=addDynamicAttributes;var r5=new Properties({"symbol-placement":new DataConstantProperty(eO.layout_symbol["symbol-placement"]),"symbol-spacing":new DataConstantProperty(eO.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new DataConstantProperty(eO.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new DataDrivenProperty(eO.layout_symbol["symbol-sort-key"]),"symbol-z-order":new DataConstantProperty(eO.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new DataConstantProperty(eO.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new DataConstantProperty(eO.layout_symbol["icon-ignore-placement"]),"icon-optional":new DataConstantProperty(eO.layout_symbol["icon-optional"]),"icon-rotation-alignment":new DataConstantProperty(eO.layout_symbol["icon-rotation-alignment"]),"icon-size":new DataDrivenProperty(eO.layout_symbol["icon-size"]),"icon-text-fit":new DataConstantProperty(eO.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new DataConstantProperty(eO.layout_symbol["icon-text-fit-padding"]),"icon-image":new DataDrivenProperty(eO.layout_symbol["icon-image"]),"icon-rotate":new DataDrivenProperty(eO.layout_symbol["icon-rotate"]),"icon-padding":new DataConstantProperty(eO.layout_symbol["icon-padding"]),"icon-keep-upright":new DataConstantProperty(eO.layout_symbol["icon-keep-upright"]),"icon-offset":new DataDrivenProperty(eO.layout_symbol["icon-offset"]),"icon-anchor":new DataDrivenProperty(eO.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new DataConstantProperty(eO.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new DataConstantProperty(eO.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new DataConstantProperty(eO.layout_symbol["text-rotation-alignment"]),"text-field":new DataDrivenProperty(eO.layout_symbol["text-field"]),"text-font":new DataDrivenProperty(eO.layout_symbol["text-font"]),"text-size":new DataDrivenProperty(eO.layout_symbol["text-size"]),"text-max-width":new DataDrivenProperty(eO.layout_symbol["text-max-width"]),"text-line-height":new DataConstantProperty(eO.layout_symbol["text-line-height"]),"text-letter-spacing":new DataDrivenProperty(eO.layout_symbol["text-letter-spacing"]),"text-justify":new DataDrivenProperty(eO.layout_symbol["text-justify"]),"text-radial-offset":new DataDrivenProperty(eO.layout_symbol["text-radial-offset"]),"text-variable-anchor":new DataConstantProperty(eO.layout_symbol["text-variable-anchor"]),"text-anchor":new DataDrivenProperty(eO.layout_symbol["text-anchor"]),"text-max-angle":new DataConstantProperty(eO.layout_symbol["text-max-angle"]),"text-writing-mode":new DataConstantProperty(eO.layout_symbol["text-writing-mode"]),"text-rotate":new DataDrivenProperty(eO.layout_symbol["text-rotate"]),"text-padding":new DataConstantProperty(eO.layout_symbol["text-padding"]),"text-keep-upright":new DataConstantProperty(eO.layout_symbol["text-keep-upright"]),"text-transform":new DataDrivenProperty(eO.layout_symbol["text-transform"]),"text-offset":new DataDrivenProperty(eO.layout_symbol["text-offset"]),"text-allow-overlap":new DataConstantProperty(eO.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new DataConstantProperty(eO.layout_symbol["text-ignore-placement"]),"text-optional":new DataConstantProperty(eO.layout_symbol["text-optional"])}),r4={paint:new Properties({"icon-opacity":new DataDrivenProperty(eO.paint_symbol["icon-opacity"]),"icon-color":new DataDrivenProperty(eO.paint_symbol["icon-color"]),"icon-halo-color":new DataDrivenProperty(eO.paint_symbol["icon-halo-color"]),"icon-halo-width":new DataDrivenProperty(eO.paint_symbol["icon-halo-width"]),"icon-halo-blur":new DataDrivenProperty(eO.paint_symbol["icon-halo-blur"]),"icon-translate":new DataConstantProperty(eO.paint_symbol["icon-translate"]),"icon-translate-anchor":new DataConstantProperty(eO.paint_symbol["icon-translate-anchor"]),"text-opacity":new DataDrivenProperty(eO.paint_symbol["text-opacity"]),"text-color":new DataDrivenProperty(eO.paint_symbol["text-color"],{runtimeType:eN,getOverride:function(i){return i.textColor},hasOverride:function(i){return!!i.textColor}}),"text-halo-color":new DataDrivenProperty(eO.paint_symbol["text-halo-color"]),"text-halo-width":new DataDrivenProperty(eO.paint_symbol["text-halo-width"]),"text-halo-blur":new DataDrivenProperty(eO.paint_symbol["text-halo-blur"]),"text-translate":new DataConstantProperty(eO.paint_symbol["text-translate"]),"text-translate-anchor":new DataConstantProperty(eO.paint_symbol["text-translate-anchor"])}),layout:r5},FormatSectionOverride=function(i){this.type=i.property.overrides?i.property.overrides.runtimeType:eR,this.defaultValue=i};FormatSectionOverride.prototype.evaluate=function(i){if(i.formattedSection){var o=this.defaultValue.property.overrides;if(o&&o.hasOverride(i.formattedSection))return o.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default},FormatSectionOverride.prototype.eachChild=function(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)},FormatSectionOverride.prototype.outputDefined=function(){return!1},FormatSectionOverride.prototype.serialize=function(){return null},register("FormatSectionOverride",FormatSectionOverride,{omit:["defaultValue"]});var r6=function(i){function SymbolStyleLayer(o){i.call(this,o,r4)}return i&&(SymbolStyleLayer.__proto__=i),SymbolStyleLayer.prototype=Object.create(i&&i.prototype),SymbolStyleLayer.prototype.constructor=SymbolStyleLayer,SymbolStyleLayer.prototype.recalculate=function(o,s){if(i.prototype.recalculate.call(this,o,s),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var _=this.layout.get("text-writing-mode");if(_){for(var F=[],N=0;N<_.length;N+=1){var j=_[N];0>F.indexOf(j)&&F.push(j)}this.layout._values["text-writing-mode"]=F}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},SymbolStyleLayer.prototype.getValueAndResolveTokens=function(i,o,s,_){var F=this.layout.get(i).evaluate(o,{},s,_),N=this._unevaluatedLayout._values[i];return N.isDataDriven()||isExpression(N.value)||!F?F:resolveTokens(o.properties,F)},SymbolStyleLayer.prototype.createBucket=function(i){return new SymbolBucket(i)},SymbolStyleLayer.prototype.queryRadius=function(){return 0},SymbolStyleLayer.prototype.queryIntersectsFeature=function(){return!1},SymbolStyleLayer.prototype._setPaintOverrides=function(){for(var i=0,o=r4.paint.overridableProperties;i<o.length;i+=1){var s=o[i];if(SymbolStyleLayer.hasPaintOverride(this.layout,s)){var _=this.paint.get(s),F=new StyleExpression(new FormatSectionOverride(_),_.property.specification),N=null;N="constant"===_.value.kind||"source"===_.value.kind?new ZoomConstantExpression("source",F):new ZoomDependentExpression("composite",F,_.value.zoomStops,_.value._interpolationType),this.paint._values[s]=new PossiblyEvaluatedPropertyValue(_.property,N,_.parameters)}}},SymbolStyleLayer.prototype._handleOverridablePaintPropertyUpdate=function(i,o,s){return!(!this.layout||o.isDataDriven()||s.isDataDriven())&&SymbolStyleLayer.hasPaintOverride(this.layout,i)},SymbolStyleLayer.hasPaintOverride=function(i,o){var s=i.get("text-field"),_=r4.paint.properties[o],F=!1,checkSections=function(i){for(var o=0;o<i.length;o+=1){var s=i[o];if(_.overrides&&_.overrides.hasOverride(s)){F=!0;return}}};if("constant"===s.value.kind&&s.value.value instanceof Formatted)checkSections(s.value.value.sections);else if("source"===s.value.kind){var checkExpression=function(i){F||(i instanceof Literal&&typeOf(i.value)===eH?checkSections(i.value.sections):i instanceof FormatExpression?checkSections(i.sections):i.eachChild(checkExpression))},N=s.value;N._styleExpression&&checkExpression(N._styleExpression.expression)}return F},SymbolStyleLayer}(tA),r8={paint:new Properties({"background-color":new DataConstantProperty(eO.paint_background["background-color"]),"background-pattern":new CrossFadedProperty(eO.paint_background["background-pattern"]),"background-opacity":new DataConstantProperty(eO.paint_background["background-opacity"])})},r7=function(i){function BackgroundStyleLayer(o){i.call(this,o,r8)}return i&&(BackgroundStyleLayer.__proto__=i),BackgroundStyleLayer.prototype=Object.create(i&&i.prototype),BackgroundStyleLayer.prototype.constructor=BackgroundStyleLayer,BackgroundStyleLayer}(tA),r9={paint:new Properties({"raster-opacity":new DataConstantProperty(eO.paint_raster["raster-opacity"]),"raster-hue-rotate":new DataConstantProperty(eO.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new DataConstantProperty(eO.paint_raster["raster-brightness-min"]),"raster-brightness-max":new DataConstantProperty(eO.paint_raster["raster-brightness-max"]),"raster-saturation":new DataConstantProperty(eO.paint_raster["raster-saturation"]),"raster-contrast":new DataConstantProperty(eO.paint_raster["raster-contrast"]),"raster-resampling":new DataConstantProperty(eO.paint_raster["raster-resampling"]),"raster-fade-duration":new DataConstantProperty(eO.paint_raster["raster-fade-duration"])})},ne=function(i){function RasterStyleLayer(o){i.call(this,o,r9)}return i&&(RasterStyleLayer.__proto__=i),RasterStyleLayer.prototype=Object.create(i&&i.prototype),RasterStyleLayer.prototype.constructor=RasterStyleLayer,RasterStyleLayer}(tA);function validateCustomStyleLayer(i){var o=[],s=i.id;return void 0===s&&o.push({message:"layers."+s+': missing required property "id"'}),void 0===i.render&&o.push({message:"layers."+s+': missing required method "render"'}),i.renderingMode&&"2d"!==i.renderingMode&&"3d"!==i.renderingMode&&o.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),o}var nt=function(i){function CustomStyleLayer(o){i.call(this,o,{}),this.implementation=o}return i&&(CustomStyleLayer.__proto__=i),CustomStyleLayer.prototype=Object.create(i&&i.prototype),CustomStyleLayer.prototype.constructor=CustomStyleLayer,CustomStyleLayer.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},CustomStyleLayer.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},CustomStyleLayer.prototype.recalculate=function(){},CustomStyleLayer.prototype.updateTransitions=function(){},CustomStyleLayer.prototype.hasTransition=function(){},CustomStyleLayer.prototype.serialize=function(){},CustomStyleLayer.prototype.onAdd=function(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)},CustomStyleLayer.prototype.onRemove=function(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)},CustomStyleLayer}(tA),nr={circle:rh,heatmap:rm,hillshade:rv,fill:rA,"fill-extrusion":rI,line:rN,symbol:r6,background:r7,raster:ne};function createStyleLayer(i){return"custom"===i.type?new nt(i):new nr[i.type](i)}var nn=self.HTMLImageElement,ni=self.HTMLCanvasElement,no=self.HTMLVideoElement,ns=self.ImageData,nl=self.ImageBitmap,Texture=function(i,o,s,_){this.context=i,this.format=s,this.texture=i.gl.createTexture(),this.update(o,_)};Texture.prototype.update=function(i,o,s){var _=i.width,F=i.height,N=(!this.size||this.size[0]!==_||this.size[1]!==F)&&!s,j=this.context,Z=j.gl;if(this.useMipmap=!!(o&&o.useMipmap),Z.bindTexture(Z.TEXTURE_2D,this.texture),j.pixelStoreUnpackFlipY.set(!1),j.pixelStoreUnpack.set(1),j.pixelStoreUnpackPremultiplyAlpha.set(this.format===Z.RGBA&&(!o||!1!==o.premultiply)),N)this.size=[_,F],i instanceof nn||i instanceof ni||i instanceof no||i instanceof ns||nl&&i instanceof nl?Z.texImage2D(Z.TEXTURE_2D,0,this.format,this.format,Z.UNSIGNED_BYTE,i):Z.texImage2D(Z.TEXTURE_2D,0,this.format,_,F,0,this.format,Z.UNSIGNED_BYTE,i.data);else{var X=s||{x:0,y:0},$=X.x,ee=X.y;i instanceof nn||i instanceof ni||i instanceof no||i instanceof ns||nl&&i instanceof nl?Z.texSubImage2D(Z.TEXTURE_2D,0,$,ee,Z.RGBA,Z.UNSIGNED_BYTE,i):Z.texSubImage2D(Z.TEXTURE_2D,0,$,ee,_,F,Z.RGBA,Z.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Z.generateMipmap(Z.TEXTURE_2D)},Texture.prototype.bind=function(i,o,s){var _=this.context.gl;_.bindTexture(_.TEXTURE_2D,this.texture),s!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,s||i),this.filter=i),o!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,o),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,o),this.wrap=o)},Texture.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Texture.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var ThrottledInvoker=function(i){var o=this;this._callback=i,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){o._triggered=!1,o._callback()})};ThrottledInvoker.prototype.trigger=function(){var i=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){i._triggered=!1,i._callback()},0))},ThrottledInvoker.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Actor=function(i,o,s){this.target=i,this.parent=o,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},bindAll(["receive","process"],this),this.invoker=new ThrottledInvoker(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=isWorker()?i:self};function getTileBBox(i,o,s){var _=getMercCoords(256*i,256*(o=Math.pow(2,s)-o-1),s),F=getMercCoords((i+1)*256,(o+1)*256,s);return _[0]+","+_[1]+","+F[0]+","+F[1]}function getMercCoords(i,o,s){var _=2*Math.PI*6378137/256/Math.pow(2,s);return[i*_-2*Math.PI*6378137/2,o*_-2*Math.PI*6378137/2]}Actor.prototype.send=function(i,o,s,_,F){var N=this;void 0===F&&(F=!1);var j=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[j]=s);var Z=isSafari(this.globalScope)?void 0:[];return this.target.postMessage({id:j,type:i,hasCallback:!!s,targetMapId:_,mustQueue:F,sourceMapId:this.mapId,data:serialize(o,Z)},Z),{cancel:function(){s&&delete N.callbacks[j],N.target.postMessage({id:j,type:"<cancel>",targetMapId:_,sourceMapId:N.mapId})}}},Actor.prototype.receive=function(i){var o=i.data,s=o.id;if(s&&(!o.targetMapId||this.mapId===o.targetMapId)){if("<cancel>"===o.type){delete this.tasks[s];var _=this.cancelCallbacks[s];delete this.cancelCallbacks[s],_&&_()}else isWorker()||o.mustQueue?(this.tasks[s]=o,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,o)}},Actor.prototype.process=function(){if(this.taskQueue.length){var i=this.taskQueue.shift(),o=this.tasks[i];delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),o&&this.processTask(i,o)}},Actor.prototype.processTask=function(i,o){var s=this;if("<response>"===o.type){var _=this.callbacks[i];delete this.callbacks[i],_&&(o.error?_(deserialize(o.error)):_(null,deserialize(o.data)))}else{var F=!1,N=isSafari(this.globalScope)?void 0:[],j=o.hasCallback?function(o,_){F=!0,delete s.cancelCallbacks[i],s.target.postMessage({id:i,type:"<response>",sourceMapId:s.mapId,error:o?serialize(o):null,data:serialize(_,N)},N)}:function(i){F=!0},Z=null,X=deserialize(o.data);if(this.parent[o.type])Z=this.parent[o.type](o.sourceMapId,X,j);else if(this.parent.getWorkerSource){var $=o.type.split(".");Z=this.parent.getWorkerSource(o.sourceMapId,$[0],X.source)[$[1]](X,j)}else j(Error("Could not find function "+o.type));!F&&Z&&Z.cancel&&(this.cancelCallbacks[i]=Z.cancel)}},Actor.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var LngLatBounds=function(i,o){i&&(o?this.setSouthWest(i).setNorthEast(o):4===i.length?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))};LngLatBounds.prototype.setNorthEast=function(i){return this._ne=i instanceof LngLat?new LngLat(i.lng,i.lat):LngLat.convert(i),this},LngLatBounds.prototype.setSouthWest=function(i){return this._sw=i instanceof LngLat?new LngLat(i.lng,i.lat):LngLat.convert(i),this},LngLatBounds.prototype.extend=function(i){var o,s,_=this._sw,F=this._ne;if(i instanceof LngLat)o=i,s=i;else if(!(i instanceof LngLatBounds))return Array.isArray(i)?4===i.length||i.every(Array.isArray)?this.extend(LngLatBounds.convert(i)):this.extend(LngLat.convert(i)):this;else if(o=i._sw,s=i._ne,!o||!s)return this;return _||F?(_.lng=Math.min(o.lng,_.lng),_.lat=Math.min(o.lat,_.lat),F.lng=Math.max(s.lng,F.lng),F.lat=Math.max(s.lat,F.lat)):(this._sw=new LngLat(o.lng,o.lat),this._ne=new LngLat(s.lng,s.lat)),this},LngLatBounds.prototype.getCenter=function(){return new LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},LngLatBounds.prototype.getSouthWest=function(){return this._sw},LngLatBounds.prototype.getNorthEast=function(){return this._ne},LngLatBounds.prototype.getNorthWest=function(){return new LngLat(this.getWest(),this.getNorth())},LngLatBounds.prototype.getSouthEast=function(){return new LngLat(this.getEast(),this.getSouth())},LngLatBounds.prototype.getWest=function(){return this._sw.lng},LngLatBounds.prototype.getSouth=function(){return this._sw.lat},LngLatBounds.prototype.getEast=function(){return this._ne.lng},LngLatBounds.prototype.getNorth=function(){return this._ne.lat},LngLatBounds.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},LngLatBounds.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},LngLatBounds.prototype.isEmpty=function(){return!(this._sw&&this._ne)},LngLatBounds.prototype.contains=function(i){var o=LngLat.convert(i),s=o.lng,_=o.lat,F=this._sw.lat<=_&&_<=this._ne.lat,N=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(N=this._sw.lng>=s&&s>=this._ne.lng),F&&N},LngLatBounds.convert=function(i){return!i||i instanceof LngLatBounds?i:new LngLatBounds(i)};var LngLat=function(i,o){if(isNaN(i)||isNaN(o))throw Error("Invalid LngLat object: ("+i+", "+o+")");if(this.lng=+i,this.lat=+o,this.lat>90||this.lat<-90)throw Error("Invalid LngLat latitude value: must be between -90 and 90")};LngLat.prototype.wrap=function(){return new LngLat(wrap(this.lng,-180,180),this.lat)},LngLat.prototype.toArray=function(){return[this.lng,this.lat]},LngLat.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},LngLat.prototype.distanceTo=function(i){var o=Math.PI/180,s=this.lat*o,_=i.lat*o;return 6371008.8*Math.acos(Math.min(Math.sin(s)*Math.sin(_)+Math.cos(s)*Math.cos(_)*Math.cos((i.lng-this.lng)*o),1))},LngLat.prototype.toBounds=function(i){void 0===i&&(i=0);var o=360*i/40075017,s=o/Math.cos(Math.PI/180*this.lat);return new LngLatBounds(new LngLat(this.lng-s,this.lat-o),new LngLat(this.lng+s,this.lat+o))},LngLat.convert=function(i){if(i instanceof LngLat)return i;if(Array.isArray(i)&&(2===i.length||3===i.length))return new LngLat(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&"object"==typeof i&&null!==i)return new LngLat(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var nc=2*Math.PI*6371008.8;function circumferenceAtLatitude(i){return nc*Math.cos(i*Math.PI/180)}function mercatorXfromLng$1(i){return(180+i)/360}function mercatorYfromLat$1(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function mercatorZfromAltitude(i,o){return i/circumferenceAtLatitude(o)}function lngFromMercatorX(i){return 360*i-180}function latFromMercatorY(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function altitudeFromMercatorZ(i,o){return i*circumferenceAtLatitude(latFromMercatorY(o))}function mercatorScale(i){return 1/Math.cos(i*Math.PI/180)}var MercatorCoordinate=function(i,o,s){void 0===s&&(s=0),this.x=+i,this.y=+o,this.z=+s};MercatorCoordinate.fromLngLat=function(i,o){void 0===o&&(o=0);var s=LngLat.convert(i);return new MercatorCoordinate(mercatorXfromLng$1(s.lng),mercatorYfromLat$1(s.lat),o/circumferenceAtLatitude(s.lat))},MercatorCoordinate.prototype.toLngLat=function(){return new LngLat(lngFromMercatorX(this.x),latFromMercatorY(this.y))},MercatorCoordinate.prototype.toAltitude=function(){return altitudeFromMercatorZ(this.z,this.y)},MercatorCoordinate.prototype.meterInMercatorCoordinateUnits=function(){return 1/nc*mercatorScale(latFromMercatorY(this.y))};var CanonicalTileID=function(i,o,s){this.z=i,this.x=o,this.y=s,this.key=calculateKey(0,i,i,o,s)};CanonicalTileID.prototype.equals=function(i){return this.z===i.z&&this.x===i.x&&this.y===i.y},CanonicalTileID.prototype.url=function(i,o){var s=getTileBBox(this.x,this.y,this.z),_=getQuadkey(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===o?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_).replace("{bbox-epsg-3857}",s)},CanonicalTileID.prototype.getTilePoint=function(i){var o=Math.pow(2,this.z);return new er((i.x*o-this.x)*8192,(i.y*o-this.y)*8192)},CanonicalTileID.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var UnwrappedTileID=function(i,o){this.wrap=i,this.canonical=o,this.key=calculateKey(i,o.z,o.z,o.x,o.y)},OverscaledTileID=function(i,o,s,_,F){this.overscaledZ=i,this.wrap=o,this.canonical=new CanonicalTileID(s,+_,+F),this.key=calculateKey(o,i,s,_,F)};function calculateKey(i,o,s,_,F){(i*=2)<0&&(i=-1*i-1);var N=1<<s;return(N*N*i+N*F+_).toString(36)+s.toString(36)+o.toString(36)}function getQuadkey(i,o,s){for(var _,F="",N=i;N>0;N--)F+=(o&(_=1<<N-1)?1:0)+(s&_?2:0);return F}OverscaledTileID.prototype.equals=function(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)},OverscaledTileID.prototype.scaledTo=function(i){var o=this.canonical.z-i;return i>this.canonical.z?new OverscaledTileID(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new OverscaledTileID(i,this.wrap,i,this.canonical.x>>o,this.canonical.y>>o)},OverscaledTileID.prototype.calculateScaledKey=function(i,o){var s=this.canonical.z-i;return i>this.canonical.z?calculateKey(this.wrap*+o,i,this.canonical.z,this.canonical.x,this.canonical.y):calculateKey(this.wrap*+o,i,i,this.canonical.x>>s,this.canonical.y>>s)},OverscaledTileID.prototype.isChildOf=function(i){if(i.wrap!==this.wrap)return!1;var o=this.canonical.z-i.canonical.z;return 0===i.overscaledZ||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>o&&i.canonical.y===this.canonical.y>>o},OverscaledTileID.prototype.children=function(i){if(this.overscaledZ>=i)return[new OverscaledTileID(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var o=this.canonical.z+1,s=2*this.canonical.x,_=2*this.canonical.y;return[new OverscaledTileID(o,this.wrap,o,s,_),new OverscaledTileID(o,this.wrap,o,s+1,_),new OverscaledTileID(o,this.wrap,o,s,_+1),new OverscaledTileID(o,this.wrap,o,s+1,_+1)]},OverscaledTileID.prototype.isLessThan=function(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))},OverscaledTileID.prototype.wrapped=function(){return new OverscaledTileID(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},OverscaledTileID.prototype.unwrapTo=function(i){return new OverscaledTileID(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)},OverscaledTileID.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},OverscaledTileID.prototype.toUnwrapped=function(){return new UnwrappedTileID(this.wrap,this.canonical)},OverscaledTileID.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},OverscaledTileID.prototype.getTilePoint=function(i){return this.canonical.getTilePoint(new MercatorCoordinate(i.x-this.wrap,i.y))},register("CanonicalTileID",CanonicalTileID),register("OverscaledTileID",OverscaledTileID,{omit:["posMatrix"]});var DEMData=function(i,o,s){if(this.uid=i,o.height!==o.width)throw RangeError("DEM tiles must be square");if(s&&"mapbox"!==s&&"terrarium"!==s)return warnOnce('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=o.height;var _=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=s||"mapbox";for(var F=0;F<_;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(_,F)]=this.data[this._idx(_-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,_)]=this.data[this._idx(F,_-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(_,-1)]=this.data[this._idx(_-1,0)],this.data[this._idx(-1,_)]=this.data[this._idx(0,_-1)],this.data[this._idx(_,_)]=this.data[this._idx(_-1,_-1)]};function deserialize$1(i,o){var s={};if(!o)return s;for(var _=0;_<i.length;_+=1)!function(){var F=i[_],N=F.layerIds.map(function(i){return o.getLayer(i)}).filter(Boolean);if(0!==N.length){F.layers=N,F.stateDependentLayerIds&&(F.stateDependentLayers=F.stateDependentLayerIds.map(function(i){return N.filter(function(o){return o.id===i})[0]}));for(var j=0;j<N.length;j+=1)s[N[j].id]=F}}();return s}DEMData.prototype.get=function(i,o){var s=new Uint8Array(this.data.buffer),_=4*this._idx(i,o);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(s[_],s[_+1],s[_+2])},DEMData.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},DEMData.prototype._idx=function(i,o){if(i<-1||i>=this.dim+1||o<-1||o>=this.dim+1)throw RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(i+1)},DEMData.prototype._unpackMapbox=function(i,o,s){return(65536*i+256*o+s)/10-1e4},DEMData.prototype._unpackTerrarium=function(i,o,s){return 256*i+o+s/256-32768},DEMData.prototype.getPixels=function(){return new RGBAImage({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},DEMData.prototype.backfillBorder=function(i,o,s){if(this.dim!==i.dim)throw Error("dem dimension mismatch");var _=o*this.dim,F=o*this.dim+this.dim,N=s*this.dim,j=s*this.dim+this.dim;switch(o){case -1:_=F-1;break;case 1:F=_+1}switch(s){case -1:N=j-1;break;case 1:j=N+1}for(var Z=-o*this.dim,X=-s*this.dim,$=N;$<j;$++)for(var ee=_;ee<F;ee++)this.data[this._idx(ee,$)]=i.data[this._idx(ee+Z,$+X)]},register("DEMData",DEMData);var DictionaryCoder=function(i){this._stringToNumber={},this._numberToString=[];for(var o=0;o<i.length;o++){var s=i[o];this._stringToNumber[s]=o,this._numberToString[o]=s}};DictionaryCoder.prototype.encode=function(i){return this._stringToNumber[i]},DictionaryCoder.prototype.decode=function(i){return this._numberToString[i]};var Feature=function(i,o,s,_,F){this.type="Feature",this._vectorTileFeature=i,i._z=o,i._x=s,i._y=_,this.properties=i.properties,this.id=F},nu={geometry:{configurable:!0}};nu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},nu.geometry.set=function(i){this._geometry=i},Feature.prototype.toJSON=function(){var i={geometry:this.geometry};for(var o in this)"_geometry"!==o&&"_vectorTileFeature"!==o&&(i[o]=this[o]);return i},Object.defineProperties(Feature.prototype,nu);var SourceFeatureState=function(){this.state={},this.stateChanges={},this.deletedStates={}};SourceFeatureState.prototype.updateState=function(i,o,s){var _=String(o);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][_]=this.stateChanges[i][_]||{},extend(this.stateChanges[i][_],s),null===this.deletedStates[i])for(var F in this.deletedStates[i]={},this.state[i])F!==_&&(this.deletedStates[i][F]=null);else if(this.deletedStates[i]&&null===this.deletedStates[i][_])for(var N in this.deletedStates[i][_]={},this.state[i][_])s[N]||(this.deletedStates[i][_][N]=null);else for(var j in s)this.deletedStates[i]&&this.deletedStates[i][_]&&null===this.deletedStates[i][_][j]&&delete this.deletedStates[i][_][j]},SourceFeatureState.prototype.removeFeatureState=function(i,o,s){if(null!==this.deletedStates[i]){var _=String(o);if(this.deletedStates[i]=this.deletedStates[i]||{},s&&void 0!==o)null!==this.deletedStates[i][_]&&(this.deletedStates[i][_]=this.deletedStates[i][_]||{},this.deletedStates[i][_][s]=null);else if(void 0!==o){if(this.stateChanges[i]&&this.stateChanges[i][_])for(s in this.deletedStates[i][_]={},this.stateChanges[i][_])this.deletedStates[i][_][s]=null;else this.deletedStates[i][_]=null}else this.deletedStates[i]=null}},SourceFeatureState.prototype.getState=function(i,o){var s=String(o),_=this.state[i]||{},F=this.stateChanges[i]||{},N=extend({},_[s],F[s]);if(null===this.deletedStates[i])return{};if(this.deletedStates[i]){var j=this.deletedStates[i][o];if(null===j)return{};for(var Z in j)delete N[Z]}return N},SourceFeatureState.prototype.initializeTileState=function(i,o){i.setFeatureState(this.state,o)},SourceFeatureState.prototype.coalesceChanges=function(i,o){var s={};for(var _ in this.stateChanges){this.state[_]=this.state[_]||{};var F={};for(var N in this.stateChanges[_])this.state[_][N]||(this.state[_][N]={}),extend(this.state[_][N],this.stateChanges[_][N]),F[N]=this.state[_][N];s[_]=F}for(var j in this.deletedStates){this.state[j]=this.state[j]||{};var Z={};if(null===this.deletedStates[j])for(var X in this.state[j])Z[X]={},this.state[j][X]={};else for(var $ in this.deletedStates[j]){if(null===this.deletedStates[j][$])this.state[j][$]={};else for(var ee=0,et=Object.keys(this.deletedStates[j][$]);ee<et.length;ee+=1){var er=et[ee];delete this.state[j][$][er]}Z[$]=this.state[j][$]}s[j]=s[j]||{},extend(s[j],Z)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(s).length)for(var en in i)i[en].setFeatureState(s,o)};var FeatureIndex=function(i,o){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new tf(8192,16,0),this.grid3D=new tf(8192,16,0),this.featureIndexArray=new t5,this.promoteId=o};function evaluateProperties(i,o,s,_,F){return mapObject(i,function(i,N){var j=o instanceof PossiblyEvaluated?o.get(N):null;return j&&j.evaluate?j.evaluate(s,_,F):j})}function getBounds(i){for(var o=1/0,s=1/0,_=-1/0,F=-1/0,N=0;N<i.length;N+=1){var j=i[N];o=Math.min(o,j.x),s=Math.min(s,j.y),_=Math.max(_,j.x),F=Math.max(F,j.y)}return{minX:o,minY:s,maxX:_,maxY:F}}function topDownFeatureComparator(i,o){return o-i}FeatureIndex.prototype.insert=function(i,o,s,_,F,N){var j=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,_,F);for(var Z=N?this.grid3D:this.grid,X=0;X<o.length;X++){for(var $=o[X],ee=[1/0,1/0,-1/0,-1/0],et=0;et<$.length;et++){var er=$[et];ee[0]=Math.min(ee[0],er.x),ee[1]=Math.min(ee[1],er.y),ee[2]=Math.max(ee[2],er.x),ee[3]=Math.max(ee[3],er.y)}ee[0]<8192&&ee[1]<8192&&ee[2]>=0&&ee[3]>=0&&Z.insert(j,ee[0],ee[1],ee[2],ee[3])}},FeatureIndex.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new rE.VectorTile(new rZ(this.rawTileData)).layers,this.sourceLayerCoder=new DictionaryCoder(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},FeatureIndex.prototype.query=function(i,o,s,_){var F,N=this;this.loadVTLayers();for(var j=i.params||{},Z=8192/i.tileSize/i.scale,X=createFilter(j.filter),$=i.queryGeometry,ee=i.queryPadding*Z,et=getBounds($),er=this.grid.query(et.minX-ee,et.minY-ee,et.maxX+ee,et.maxY+ee),en=getBounds(i.cameraQueryGeometry),ei=this.grid3D.query(en.minX-ee,en.minY-ee,en.maxX+ee,en.maxY+ee,function(o,s,_,F){return polygonIntersectsBox(i.cameraQueryGeometry,o-ee,s-ee,_+ee,F+ee)}),eo=0;eo<ei.length;eo+=1){var es=ei[eo];er.push(es)}er.sort(topDownFeatureComparator);for(var el={},ec=0;ec<er.length;ec++)!function(ee){var et=er[ee];if(et!==F){F=et;var en=N.featureIndexArray.get(et),ei=null;N.loadMatchingFeature(el,en.bucketIndex,en.sourceLayerIndex,en.featureIndex,X,j.layers,j.availableImages,o,s,_,function(o,s,_){return ei||(ei=loadGeometry(o)),s.queryIntersectsFeature($,o,_,ei,N.z,i.transform,Z,i.pixelPosMatrix)})}}(ec);return el},FeatureIndex.prototype.loadMatchingFeature=function(i,o,s,_,F,N,j,Z,X,$,ee){var et=this.bucketLayerIDs[o];if(!N||arraysIntersect(N,et)){var er=this.sourceLayerCoder.decode(s),en=this.vtLayers[er].feature(_);if(F.filter(new EvaluationParameters(this.tileID.overscaledZ),en))for(var ei=this.getId(en,er),eo=0;eo<et.length;eo++){var es=et[eo];if(!(N&&0>N.indexOf(es))){var el=Z[es];if(el){var ec={};void 0!==ei&&$&&(ec=$.getState(el.sourceLayer||"_geojsonTileLayer",ei));var eu=X[es];eu.paint=evaluateProperties(eu.paint,el.paint,en,ec,j),eu.layout=evaluateProperties(eu.layout,el.layout,en,ec,j);var ef=!ee||ee(en,el,ec);if(ef){var ed=new Feature(en,this.z,this.x,this.y,ei);ed.layer=eu;var eh=i[es];void 0===eh&&(eh=i[es]=[]),eh.push({featureIndex:_,feature:ed,intersectionZ:ef})}}}}}},FeatureIndex.prototype.lookupSymbolFeatures=function(i,o,s,_,F,N,j,Z){var X={};this.loadVTLayers();for(var $=createFilter(F),ee=0;ee<i.length;ee+=1){var et=i[ee];this.loadMatchingFeature(X,s,_,et,$,N,j,Z,o)}return X},FeatureIndex.prototype.hasLayer=function(i){for(var o=0,s=this.bucketLayerIDs;o<s.length;o+=1)for(var _=s[o],F=0;F<_.length;F+=1)if(i===_[F])return!0;return!1},FeatureIndex.prototype.getId=function(i,o){var s=i.id;if(this.promoteId){var _="string"==typeof this.promoteId?this.promoteId:this.promoteId[o];"boolean"==typeof(s=i.properties[_])&&(s=Number(s))}return s},register("FeatureIndex",FeatureIndex,{omit:["rawTileData","sourceLayerCoder"]});var Tile=function(i,o){this.tileID=i,this.uid=uniqueId(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Tile.prototype.registerFadeDuration=function(i){var o=i+this.timeAdded;o<ef.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)},Tile.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Tile.prototype.loadVectorData=function(i,o,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!i){this.collisionBoxArray=new tK;return}for(var _ in i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=deserialize$1(i.buckets,o.style),this.hasSymbolBuckets=!1,this.buckets){var F=this.buckets[_];if(F instanceof SymbolBucket){if(this.hasSymbolBuckets=!0,s)F.justReloaded=!0;else break}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var N in this.buckets){var j=this.buckets[N];if(j instanceof SymbolBucket&&j.hasRTLText){this.hasRTLText=!0,lazyLoadRTLTextPlugin();break}}for(var Z in this.queryPadding=0,this.buckets){var X=this.buckets[Z];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(Z).queryRadius(X))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)},Tile.prototype.unloadVectorData=function(){for(var i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Tile.prototype.getBucket=function(i){return this.buckets[i.id]},Tile.prototype.upload=function(i){for(var o in this.buckets){var s=this.buckets[o];s.uploadPending()&&s.upload(i)}var _=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Texture(i,this.imageAtlas.image,_.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Texture(i,this.glyphAtlasImage,_.ALPHA),this.glyphAtlasImage=null)},Tile.prototype.prepare=function(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)},Tile.prototype.queryRenderedFeatures=function(i,o,s,_,F,N,j,Z,X,$){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:F,scale:N,tileSize:this.tileSize,pixelPosMatrix:$,transform:Z,params:j,queryPadding:this.queryPadding*X},i,o,s):{}},Tile.prototype.querySourceFeatures=function(i,o){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var _=s.loadVTLayers(),F=o?o.sourceLayer:"",N=_._geojsonTileLayer||_[F];if(N)for(var j=createFilter(o&&o.filter),Z=this.tileID.canonical,X=Z.z,$=Z.x,ee=Z.y,et={z:X,x:$,y:ee},er=0;er<N.length;er++){var en=N.feature(er);if(j.filter(new EvaluationParameters(this.tileID.overscaledZ),en)){var ei=s.getId(en,F),eo=new Feature(en,X,$,ee,ei);eo.tile=et,i.push(eo)}}}},Tile.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Tile.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Tile.prototype.setExpiryData=function(i){var o=this.expirationTime;if(i.cacheControl){var s=parseCacheControl(i.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){var _=Date.now(),F=!1;if(this.expirationTime>_)F=!1;else if(o){if(this.expirationTime<o)F=!0;else{var N=this.expirationTime-o;N?this.expirationTime=_+Math.max(N,3e4):F=!0}}else F=!0;F?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Tile.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),2147483647)},Tile.prototype.setFeatureState=function(i,o){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(i).length){var s=this.latestFeatureIndex.loadVTLayers();for(var _ in this.buckets)if(o.style.hasLayer(_)){var F=this.buckets[_],N=F.layers[0].sourceLayer||"_geojsonTileLayer",j=s[N],Z=i[N];if(j&&Z&&0!==Object.keys(Z).length){F.update(Z,j,this.imageAtlas&&this.imageAtlas.patternPositions||{});var X=o&&o.style&&o.style.getLayer(_);X&&(this.queryPadding=Math.max(this.queryPadding,X.queryRadius(F)))}}}},Tile.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Tile.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ef.now()},Tile.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Tile.prototype.setHoldDuration=function(i){this.symbolFadeHoldUntil=ef.now()+i},Tile.prototype.setDependencies=function(i,o){for(var s={},_=0;_<o.length;_+=1)s[o[_]]=!0;this.dependencies[i]=s},Tile.prototype.hasDependency=function(i,o){for(var s=0;s<i.length;s+=1){var _=i[s],F=this.dependencies[_];if(F){for(var N=0;N<o.length;N+=1)if(F[o[N]])return!0}}return!1};var nf=self.performance,RequestPerformance=function(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},nf.mark(this._marks.start)};RequestPerformance.prototype.finish=function(){nf.mark(this._marks.end);var i=nf.getEntriesByName(this._marks.measure);return 0===i.length&&(nf.measure(this._marks.measure,this._marks.start,this._marks.end),i=nf.getEntriesByName(this._marks.measure),nf.clearMarks(this._marks.start),nf.clearMarks(this._marks.end),nf.clearMeasures(this._marks.measure)),i},i.Actor=Actor,i.AlphaImage=AlphaImage,i.CanonicalTileID=CanonicalTileID,i.CollisionBoxArray=tK,i.Color=Color,i.DEMData=DEMData,i.DataConstantProperty=DataConstantProperty,i.DictionaryCoder=DictionaryCoder,i.EXTENT=8192,i.ErrorEvent=eI,i.EvaluationParameters=EvaluationParameters,i.Event=Event,i.Evented=Evented,i.FeatureIndex=FeatureIndex,i.FillBucket=FillBucket,i.FillExtrusionBucket=FillExtrusionBucket,i.ImageAtlas=ImageAtlas,i.ImagePosition=ImagePosition,i.LineBucket=LineBucket,i.LngLat=LngLat,i.LngLatBounds=LngLatBounds,i.MercatorCoordinate=MercatorCoordinate,i.ONE_EM=24,i.OverscaledTileID=OverscaledTileID,i.Point=er,i.Point$1=er,i.Properties=Properties,i.Protobuf=rZ,i.RGBAImage=RGBAImage,i.RequestManager=RequestManager,i.RequestPerformance=RequestPerformance,i.ResourceType=eE,i.SegmentVector=SegmentVector,i.SourceFeatureState=SourceFeatureState,i.StructArrayLayout1ui2=tW,i.StructArrayLayout2f1f2i16=tF,i.StructArrayLayout2i4=tM,i.StructArrayLayout3ui6=tN,i.StructArrayLayout4i8=tC,i.SymbolBucket=SymbolBucket,i.Texture=Texture,i.Tile=Tile,i.Transitionable=Transitionable,i.Uniform1f=re,i.Uniform1i=t9,i.Uniform2f=rt,i.Uniform3f=rr,i.Uniform4f=rn,i.UniformColor=ri,i.UniformMatrix4f=rs,i.UnwrappedTileID=UnwrappedTileID,i.ValidationError=ValidationError,i.WritingMode=rK,i.ZoomHistory=ZoomHistory,i.add=add,i.addDynamicAttributes=addDynamicAttributes,i.asyncAll=asyncAll,i.bezier=bezier,i.bindAll=bindAll,i.browser=ef,i.cacheEntryPossiblyAdded=cacheEntryPossiblyAdded,i.clamp=clamp,i.clearTileCache=clearTileCache,i.clipLine=clipLine,i.clone=clone$1,i.clone$1=clone,i.clone$2=clone$2,i.collisionCircleLayout=rq,i.config=ed,i.create=create$2,i.create$1=create$1,i.create$2=create,i.createCommonjsModule=createCommonjsModule,i.createExpression=createExpression,i.createLayout=createLayout,i.createStyleLayer=createStyleLayer,i.cross=cross,i.deepEqual=deepEqual,i.dot=dot,i.dot$1=dot$1,i.ease=en,i.emitValidationErrors=emitValidationErrors,i.endsWith=endsWith,i.enforceCacheSizeLimit=enforceCacheSizeLimit,i.evaluateSizeForFeature=evaluateSizeForFeature,i.evaluateSizeForZoom=evaluateSizeForZoom,i.evaluateVariableOffset=evaluateVariableOffset,i.evented=t_,i.extend=extend,i.featureFilter=createFilter,i.filterObject=filterObject,i.fromRotation=fromRotation,i.getAnchorAlignment=getAnchorAlignment,i.getAnchorJustification=getAnchorJustification,i.getArrayBuffer=getArrayBuffer,i.getImage=getImage,i.getJSON=function(i,o){return makeRequest(extend(i,{type:"json"}),o)},i.getRTLTextPluginStatus=getRTLTextPluginStatus,i.getReferrer=eP,i.getVideo=function(i,o){var s=self.document.createElement("video");s.muted=!0,s.onloadstart=function(){o(null,s)};for(var _=0;_<i.length;_++){var F=self.document.createElement("source");sameOrigin(i[_])||(s.crossOrigin="Anonymous"),F.src=i[_],s.appendChild(F)}return{cancel:function(){}}},i.identity=identity,i.invert=invert,i.isChar=tm,i.isMapboxURL=isMapboxURL,i.keysDifference=keysDifference,i.makeRequest=makeRequest,i.mapObject=mapObject,i.mercatorXfromLng=mercatorXfromLng$1,i.mercatorYfromLat=mercatorYfromLat$1,i.mercatorZfromAltitude=mercatorZfromAltitude,i.mul=rd,i.multiply=multiply,i.mvt=rE,i.normalize=normalize,i.number=number,i.offscreenCanvasSupported=offscreenCanvasSupported,i.ortho=ortho,i.parseGlyphPBF=parseGlyphPBF,i.pbf=rZ,i.performSymbolLayout=performSymbolLayout,i.perspective=perspective,i.pick=pick,i.plugin=tw,i.polygonIntersectsPolygon=polygonIntersectsPolygon,i.postMapLoadEvent=ek,i.postTurnstileEvent=ew,i.potpack=potpack,i.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.register=register,i.registerForPluginStateChange=function(i){return i({pluginStatus:tx,pluginURL:tb}),t_.on("pluginStateChange",i),i},i.rotate=rotate,i.rotateX=rotateX,i.rotateZ=rotateZ,i.scale=scale,i.scale$1=scale$2,i.scale$2=scale$1,i.setCacheLimits=setCacheLimits,i.setRTLTextPlugin=function(i,o,s){if(void 0===s&&(s=!1),tx===ty.deferred||tx===ty.loading||tx===ty.loaded)throw Error("setRTLTextPlugin cannot be called multiple times.");tb=ef.resolveURL(i),tx=ty.deferred,tv=o,sendPluginStateToWorker(),s||downloadRTLTextPlugin()},i.sphericalToCartesian=sphericalToCartesian,i.sqrLen=function(i){var o=i[0],s=i[1];return o*o+s*s},i.styleSpec=eO,i.sub=function(i,o,s){return i[0]=o[0]-s[0],i[1]=o[1]-s[1],i[2]=o[2]-s[2],i},i.symbolSize=r0,i.transformMat3=transformMat3,i.transformMat4=transformMat4,i.translate=translate$1,i.triggerPluginCompletionEvent=triggerPluginCompletionEvent,i.uniqueId=uniqueId,i.validateCustomStyleLayer=validateCustomStyleLayer,i.validateLight=tl,i.validateStyle=ts,i.values=values,i.vectorTile=rE,i.version=ee,i.warnOnce=warnOnce,i.webpSupported=eh,i.window=self,i.wrap=wrap}),define(["./shared"],function(i){function stringify(i){var o=typeof i;if("number"===o||"boolean"===o||"string"===o||null==i)return JSON.stringify(i);if(Array.isArray(i)){for(var s="[",_=0;_<i.length;_+=1)s+=stringify(i[_])+",";return s+"]"}for(var F=Object.keys(i).sort(),N="{",j=0;j<F.length;j++)N+=JSON.stringify(F[j])+":"+stringify(i[F[j]])+",";return N+"}"}function getKey(o){for(var s="",_=0,F=i.refProperties;_<F.length;_+=1)s+="/"+stringify(o[F[_]]);return s}function groupByLayout(i,o){for(var s={},_=0;_<i.length;_++){var F=o&&o[i[_].id]||getKey(i[_]);o&&(o[i[_].id]=F);var N=s[F];N||(N=s[F]=[]),N.push(i[_])}var j=[];for(var Z in s)j.push(s[Z]);return j}var StyleLayerIndex=function(i){this.keyCache={},i&&this.replace(i)};StyleLayerIndex.prototype.replace=function(i){this._layerConfigs={},this._layers={},this.update(i,[])},StyleLayerIndex.prototype.update=function(o,s){for(var _=this,F=0;F<o.length;F+=1){var N=o[F];this._layerConfigs[N.id]=N;var j=this._layers[N.id]=i.createStyleLayer(N);j._featureFilter=i.featureFilter(j.filter),this.keyCache[N.id]&&delete this.keyCache[N.id]}for(var Z=0;Z<s.length;Z+=1){var X=s[Z];delete this.keyCache[X],delete this._layerConfigs[X],delete this._layers[X]}this.familiesBySource={};for(var $=groupByLayout(i.values(this._layerConfigs),this.keyCache),ee=0;ee<$.length;ee+=1){var et=$[ee].map(function(i){return _._layers[i.id]}),er=et[0];if("none"!==er.visibility){var en=er.source||"",ei=this.familiesBySource[en];ei||(ei=this.familiesBySource[en]={});var eo=er.sourceLayer||"_geojsonTileLayer",es=ei[eo];es||(es=ei[eo]=[]),es.push(et)}}};var GlyphAtlas=function(o){var s={},_=[];for(var F in o){var N=o[F],j=s[F]={};for(var Z in N){var X=N[+Z];if(X&&0!==X.bitmap.width&&0!==X.bitmap.height){var $={x:0,y:0,w:X.bitmap.width+2,h:X.bitmap.height+2};_.push($),j[Z]={rect:$,metrics:X.metrics}}}}var ee=i.potpack(_),et=ee.w,er=ee.h,en=new i.AlphaImage({width:et||1,height:er||1});for(var ei in o){var eo=o[ei];for(var es in eo){var el=eo[+es];if(el&&0!==el.bitmap.width&&0!==el.bitmap.height){var ec=s[ei][es].rect;i.AlphaImage.copy(el.bitmap,en,{x:0,y:0},{x:ec.x+1,y:ec.y+1},el.bitmap)}}}this.image=en,this.positions=s};i.register("GlyphAtlas",GlyphAtlas);var WorkerTile=function(o){this.tileID=new i.OverscaledTileID(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.uid=o.uid,this.zoom=o.zoom,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId};function recalculateLayers(o,s,_){for(var F=new i.EvaluationParameters(s),N=0;N<o.length;N+=1)o[N].recalculate(F,_)}function loadVectorTile(o,s){var _=i.getArrayBuffer(o.request,function(o,_,F,N){o?s(o):_&&s(null,{vectorTile:new i.vectorTile.VectorTile(new i.pbf(_)),rawData:_,cacheControl:F,expires:N})});return function(){_.cancel(),s()}}WorkerTile.prototype.parse=function(o,s,_,F,N){var j,Z,X,$,ee=this;this.status="parsing",this.data=o,this.collisionBoxArray=new i.CollisionBoxArray;var et=new i.DictionaryCoder(Object.keys(o.layers).sort()),er=new i.FeatureIndex(this.tileID,this.promoteId);er.bucketLayerIDs=[];var en={},ei={featureIndex:er,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:_},eo=s.familiesBySource[this.source];for(var es in eo){var el=o.layers[es];if(el){1===el.version&&i.warnOnce('Vector tile source "'+this.source+'" layer "'+es+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ec=et.encode(es),eu=[],ef=0;ef<el.length;ef++){var ed=el.feature(ef),eh=er.getId(ed,es);eu.push({feature:ed,id:eh,index:ef,sourceLayerIndex:ec})}for(var ep=0,eg=eo[es];ep<eg.length;ep+=1){var em=eg[ep],ey=em[0];ey.minzoom&&this.zoom<Math.floor(ey.minzoom)||ey.maxzoom&&this.zoom>=ey.maxzoom||"none"===ey.visibility||(recalculateLayers(em,this.zoom,_),(en[ey.id]=ey.createBucket({index:er.bucketLayerIDs.length,layers:em,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ec,sourceID:this.source})).populate(eu,ei,this.tileID.canonical),er.bucketLayerIDs.push(em.map(function(i){return i.id})))}}}var ev=i.mapObject(ei.glyphDependencies,function(i){return Object.keys(i).map(Number)});Object.keys(ev).length?F.send("getGlyphs",{uid:this.uid,stacks:ev},function(i,o){j||(j=i,Z=o,maybePrepare.call(ee))}):Z={};var ex=Object.keys(ei.iconDependencies);ex.length?F.send("getImages",{icons:ex,source:this.source,tileID:this.tileID,type:"icons"},function(i,o){j||(j=i,X=o,maybePrepare.call(ee))}):X={};var e_=Object.keys(ei.patternDependencies);function maybePrepare(){if(j)return N(j);if(Z&&X&&$){var o=new GlyphAtlas(Z),s=new i.ImageAtlas(X,$);for(var F in en){var ee=en[F];ee instanceof i.SymbolBucket?(recalculateLayers(ee.layers,this.zoom,_),i.performSymbolLayout(ee,Z,o.positions,X,s.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ee.hasPattern&&(ee instanceof i.LineBucket||ee instanceof i.FillBucket||ee instanceof i.FillExtrusionBucket)&&(recalculateLayers(ee.layers,this.zoom,_),ee.addFeatures(ei,this.tileID.canonical,s.patternPositions))}this.status="done",N(null,{buckets:i.values(en).filter(function(i){return!i.isEmpty()}),featureIndex:er,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:o.image,imageAtlas:s,glyphMap:this.returnDependencies?Z:null,iconMap:this.returnDependencies?X:null,glyphPositions:this.returnDependencies?o.positions:null})}}e_.length?F.send("getImages",{icons:e_,source:this.source,tileID:this.tileID,type:"patterns"},function(i,o){j||(j=i,$=o,maybePrepare.call(ee))}):$={},maybePrepare.call(this)};var VectorTileWorkerSource=function(i,o,s,_){this.actor=i,this.layerIndex=o,this.availableImages=s,this.loadVectorData=_||loadVectorTile,this.loading={},this.loaded={}};VectorTileWorkerSource.prototype.loadTile=function(o,s){var _=this,F=o.uid;this.loading||(this.loading={});var N=!!o&&!!o.request&&!!o.request.collectResourceTiming&&new i.RequestPerformance(o.request),j=this.loading[F]=new WorkerTile(o);j.abort=this.loadVectorData(o,function(o,Z){if(delete _.loading[F],o||!Z)return j.status="done",_.loaded[F]=j,s(o);var X=Z.rawData,$={};Z.expires&&($.expires=Z.expires),Z.cacheControl&&($.cacheControl=Z.cacheControl);var ee={};if(N){var et=N.finish();et&&(ee.resourceTiming=JSON.parse(JSON.stringify(et)))}j.vectorTile=Z.vectorTile,j.parse(Z.vectorTile,_.layerIndex,_.availableImages,_.actor,function(o,_){if(o||!_)return s(o);s(null,i.extend({rawTileData:X.slice(0)},_,$,ee))}),_.loaded=_.loaded||{},_.loaded[F]=j})},VectorTileWorkerSource.prototype.reloadTile=function(i,o){var s=this,_=this.loaded,F=i.uid,N=this;if(_&&_[F]){var j=_[F];j.showCollisionBoxes=i.showCollisionBoxes;var done=function(i,_){var F=j.reloadCallback;F&&(delete j.reloadCallback,j.parse(j.vectorTile,N.layerIndex,s.availableImages,N.actor,F)),o(i,_)};"parsing"===j.status?j.reloadCallback=done:"done"===j.status&&(j.vectorTile?j.parse(j.vectorTile,this.layerIndex,this.availableImages,this.actor,done):done())}},VectorTileWorkerSource.prototype.abortTile=function(i,o){var s=this.loading,_=i.uid;s&&s[_]&&s[_].abort&&(s[_].abort(),delete s[_]),o()},VectorTileWorkerSource.prototype.removeTile=function(i,o){var s=this.loaded,_=i.uid;s&&s[_]&&delete s[_],o()};var o=i.window.ImageBitmap,RasterDEMTileWorkerSource=function(){this.loaded={}};RasterDEMTileWorkerSource.prototype.loadTile=function(s,_){var F=s.uid,N=s.encoding,j=s.rawImageData,Z=o&&j instanceof o?this.getImageData(j):j,X=new i.DEMData(F,Z,N);this.loaded=this.loaded||{},this.loaded[F]=X,_(null,X)},RasterDEMTileWorkerSource.prototype.getImageData=function(o){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(o.width,o.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=o.width,this.offscreenCanvas.height=o.height,this.offscreenCanvasContext.drawImage(o,0,0,o.width,o.height);var s=this.offscreenCanvasContext.getImageData(-1,-1,o.width+2,o.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new i.RGBAImage({width:s.width,height:s.height},s.data)},RasterDEMTileWorkerSource.prototype.removeTile=function(i){var o=this.loaded,s=i.uid;o&&o[s]&&delete o[s]};var s=rewind;function rewind(i,o){var s,_=i&&i.type;if("FeatureCollection"===_)for(s=0;s<i.features.length;s++)rewind(i.features[s],o);else if("GeometryCollection"===_)for(s=0;s<i.geometries.length;s++)rewind(i.geometries[s],o);else if("Feature"===_)rewind(i.geometry,o);else if("Polygon"===_)rewindRings(i.coordinates,o);else if("MultiPolygon"===_)for(s=0;s<i.coordinates.length;s++)rewindRings(i.coordinates[s],o);return i}function rewindRings(i,o){if(0!==i.length){rewindRing(i[0],o);for(var s=1;s<i.length;s++)rewindRing(i[s],!o)}}function rewindRing(i,o){for(var s=0,_=0,F=i.length,N=F-1;_<F;N=_++)s+=(i[_][0]-i[N][0])*(i[N][1]+i[_][1]);s>=0!=!!o&&i.reverse()}var _=i.vectorTile.VectorTileFeature.prototype.toGeoJSON,FeatureWrapper=function(o){this._feature=o,this.extent=i.EXTENT,this.type=o.type,this.properties=o.tags,"id"in o&&!isNaN(o.id)&&(this.id=parseInt(o.id,10))};FeatureWrapper.prototype.loadGeometry=function(){if(1===this._feature.type){for(var o=[],s=0,_=this._feature.geometry;s<_.length;s+=1){var F=_[s];o.push([new i.Point$1(F[0],F[1])])}return o}for(var N=[],j=0,Z=this._feature.geometry;j<Z.length;j+=1){for(var X=Z[j],$=[],ee=0;ee<X.length;ee+=1){var et=X[ee];$.push(new i.Point$1(et[0],et[1]))}N.push($)}return N},FeatureWrapper.prototype.toGeoJSON=function(i,o,s){return _.call(this,i,o,s)};var GeoJSONWrapper=function(o){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.EXTENT,this.length=o.length,this._features=o};GeoJSONWrapper.prototype.feature=function(i){return new FeatureWrapper(this._features[i])};var F=i.vectorTile.VectorTileFeature,N=GeoJSONWrapper$1;function GeoJSONWrapper$1(i,o){this.options=o||{},this.features=i,this.length=i.length}function FeatureWrapper$1(i,o){this.id="number"==typeof i.id?i.id:void 0,this.type=i.type,this.rawGeometry=1===i.type?[i.geometry]:i.geometry,this.properties=i.tags,this.extent=o||4096}GeoJSONWrapper$1.prototype.feature=function(i){return new FeatureWrapper$1(this.features[i],this.options.extent)},FeatureWrapper$1.prototype.loadGeometry=function(){var o=this.rawGeometry;this.geometry=[];for(var s=0;s<o.length;s++){for(var _=o[s],F=[],N=0;N<_.length;N++)F.push(new i.Point$1(_[N][0],_[N][1]));this.geometry.push(F)}return this.geometry},FeatureWrapper$1.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var i=this.geometry,o=1/0,s=-1/0,_=1/0,F=-1/0,N=0;N<i.length;N++)for(var j=i[N],Z=0;Z<j.length;Z++){var X=j[Z];o=Math.min(o,X.x),s=Math.max(s,X.x),_=Math.min(_,X.y),F=Math.max(F,X.y)}return[o,_,s,F]},FeatureWrapper$1.prototype.toGeoJSON=F.prototype.toGeoJSON;var j=fromVectorTileJs,Z=fromVectorTileJs,X=fromGeojsonVt;function fromVectorTileJs(o){var s=new i.pbf;return writeTile(o,s),s.finish()}function fromGeojsonVt(i,o){o=o||{};var s={};for(var _ in i)s[_]=new N(i[_].features,o),s[_].name=_,s[_].version=o.version,s[_].extent=o.extent;return fromVectorTileJs({layers:s})}function writeTile(i,o){for(var s in i.layers)o.writeMessage(3,writeLayer,i.layers[s])}function writeLayer(i,o){o.writeVarintField(15,i.version||1),o.writeStringField(1,i.name||""),o.writeVarintField(5,i.extent||4096);var s,_={keys:[],values:[],keycache:{},valuecache:{}};for(s=0;s<i.length;s++)_.feature=i.feature(s),o.writeMessage(2,writeFeature,_);var F=_.keys;for(s=0;s<F.length;s++)o.writeStringField(3,F[s]);var N=_.values;for(s=0;s<N.length;s++)o.writeMessage(4,writeValue,N[s])}function writeFeature(i,o){var s=i.feature;void 0!==s.id&&o.writeVarintField(1,s.id),o.writeMessage(2,writeProperties,i),o.writeVarintField(3,s.type),o.writeMessage(4,writeGeometry,s)}function writeProperties(i,o){var s=i.feature,_=i.keys,F=i.values,N=i.keycache,j=i.valuecache;for(var Z in s.properties){var X=N[Z];void 0===X&&(_.push(Z),X=_.length-1,N[Z]=X),o.writeVarint(X);var $=s.properties[Z],ee=typeof $;"string"!==ee&&"boolean"!==ee&&"number"!==ee&&($=JSON.stringify($));var et=ee+":"+$,er=j[et];void 0===er&&(F.push($),er=F.length-1,j[et]=er),o.writeVarint(er)}}function writeGeometry(i,o){for(var s=i.loadGeometry(),_=i.type,F=0,N=0,j=s.length,Z=0;Z<j;Z++){var X=s[Z],$=1;1===_&&($=X.length),o.writeVarint(($<<3)+1);for(var ee=3===_?X.length-1:X.length,et=0;et<ee;et++){1===et&&1!==_&&o.writeVarint((ee-1<<3)+2);var er=X[et].x-F,en=X[et].y-N;o.writeVarint(er<<1^er>>31),o.writeVarint(en<<1^en>>31),F+=er,N+=en}3===_&&o.writeVarint(15)}}function writeValue(i,o){var s=typeof i;"string"===s?o.writeStringField(1,i):"boolean"===s?o.writeBooleanField(7,i):"number"===s&&(i%1!=0?o.writeDoubleField(3,i):i<0?o.writeSVarintField(6,i):o.writeVarintField(5,i))}function sortKD(i,o,s,_,F,N){if(!(F-_<=s)){var j=_+F>>1;select(i,o,j,_,F,N%2),sortKD(i,o,s,_,j-1,N+1),sortKD(i,o,s,j+1,F,N+1)}}function select(i,o,s,_,F,N){for(;F>_;){if(F-_>600){var j=F-_+1,Z=s-_+1,X=Math.log(j),$=.5*Math.exp(2*X/3),ee=.5*Math.sqrt(X*$*(j-$)/j)*(Z-j/2<0?-1:1),et=Math.max(_,Math.floor(s-Z*$/j+ee)),er=Math.min(F,Math.floor(s+(j-Z)*$/j+ee));select(i,o,s,et,er,N)}var en=o[2*s+N],ei=_,eo=F;for(swapItem(i,o,_,s),o[2*F+N]>en&&swapItem(i,o,_,F);ei<eo;){for(swapItem(i,o,ei,eo),ei++,eo--;o[2*ei+N]<en;)ei++;for(;o[2*eo+N]>en;)eo--}o[2*_+N]===en?swapItem(i,o,_,eo):swapItem(i,o,++eo,F),eo<=s&&(_=eo+1),s<=eo&&(F=eo-1)}}function swapItem(i,o,s,_){swap(i,s,_),swap(o,2*s,2*_),swap(o,2*s+1,2*_+1)}function swap(i,o,s){var _=i[o];i[o]=i[s],i[s]=_}function range(i,o,s,_,F,N,j){for(var Z,X,$=[0,i.length-1,0],ee=[];$.length;){var et=$.pop(),er=$.pop(),en=$.pop();if(er-en<=j){for(var ei=en;ei<=er;ei++)Z=o[2*ei],X=o[2*ei+1],Z>=s&&Z<=F&&X>=_&&X<=N&&ee.push(i[ei]);continue}var eo=Math.floor((en+er)/2);Z=o[2*eo],X=o[2*eo+1],Z>=s&&Z<=F&&X>=_&&X<=N&&ee.push(i[eo]);var es=(et+1)%2;(0===et?s<=Z:_<=X)&&($.push(en),$.push(eo-1),$.push(es)),(0===et?F>=Z:N>=X)&&($.push(eo+1),$.push(er),$.push(es))}return ee}function within(i,o,s,_,F,N){for(var j=[0,i.length-1,0],Z=[],X=F*F;j.length;){var $=j.pop(),ee=j.pop(),et=j.pop();if(ee-et<=N){for(var er=et;er<=ee;er++)sqDist(o[2*er],o[2*er+1],s,_)<=X&&Z.push(i[er]);continue}var en=Math.floor((et+ee)/2),ei=o[2*en],eo=o[2*en+1];sqDist(ei,eo,s,_)<=X&&Z.push(i[en]);var es=($+1)%2;(0===$?s-F<=ei:_-F<=eo)&&(j.push(et),j.push(en-1),j.push(es)),(0===$?s+F>=ei:_+F>=eo)&&(j.push(en+1),j.push(ee),j.push(es))}return Z}function sqDist(i,o,s,_){var F=i-s,N=o-_;return F*F+N*N}j.fromVectorTileJs=Z,j.fromGeojsonVt=X,j.GeoJSONWrapper=N;var defaultGetX=function(i){return i[0]},defaultGetY=function(i){return i[1]},KDBush=function(i,o,s,_,F){void 0===o&&(o=defaultGetX),void 0===s&&(s=defaultGetY),void 0===_&&(_=64),void 0===F&&(F=Float64Array),this.nodeSize=_,this.points=i;for(var N=i.length<65536?Uint16Array:Uint32Array,j=this.ids=new N(i.length),Z=this.coords=new F(2*i.length),X=0;X<i.length;X++)j[X]=X,Z[2*X]=o(i[X]),Z[2*X+1]=s(i[X]);sortKD(j,Z,_,0,j.length-1,0)};KDBush.prototype.range=function(i,o,s,_){return range(this.ids,this.coords,i,o,s,_,this.nodeSize)},KDBush.prototype.within=function(i,o,s){return within(this.ids,this.coords,i,o,s,this.nodeSize)};var $={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(i){return i}},Supercluster=function(i){this.options=extend(Object.create($),i),this.trees=Array(this.options.maxZoom+1)};function createCluster(i,o,s,_,F){return{x:i,y:o,zoom:1/0,id:s,parentId:-1,numPoints:_,properties:F}}function createPointCluster(i,o){var s=i.geometry.coordinates,_=s[0],F=s[1];return{x:lngX(_),y:latY(F),zoom:1/0,index:o,parentId:-1}}function getClusterJSON(i){return{type:"Feature",id:i.id,properties:getClusterProperties(i),geometry:{type:"Point",coordinates:[xLng(i.x),yLat(i.y)]}}}function getClusterProperties(i){var o=i.numPoints,s=o>=1e4?Math.round(o/1e3)+"k":o>=1e3?Math.round(o/100)/10+"k":o;return extend(extend({},i.properties),{cluster:!0,cluster_id:i.id,point_count:o,point_count_abbreviated:s})}function lngX(i){return i/360+.5}function latY(i){var o=Math.sin(i*Math.PI/180),s=.5-.25*Math.log((1+o)/(1-o))/Math.PI;return s<0?0:s>1?1:s}function xLng(i){return(i-.5)*360}function yLat(i){return 360*Math.atan(Math.exp((180-360*i)*Math.PI/180))/Math.PI-90}function extend(i,o){for(var s in o)i[s]=o[s];return i}function getX(i){return i.x}function getY(i){return i.y}function simplify(i,o,s,_){for(var F,N=_,j=s-o>>1,Z=s-o,X=i[o],$=i[o+1],ee=i[s],et=i[s+1],er=o+3;er<s;er+=3){var en=getSqSegDist(i[er],i[er+1],X,$,ee,et);if(en>N)F=er,N=en;else if(en===N){var ei=Math.abs(er-j);ei<Z&&(F=er,Z=ei)}}N>_&&(F-o>3&&simplify(i,o,F,_),i[F+2]=N,s-F>3&&simplify(i,F,s,_))}function getSqSegDist(i,o,s,_,F,N){var j=F-s,Z=N-_;if(0!==j||0!==Z){var X=((i-s)*j+(o-_)*Z)/(j*j+Z*Z);X>1?(s=F,_=N):X>0&&(s+=j*X,_+=Z*X)}return(j=i-s)*j+(Z=o-_)*Z}function createFeature(i,o,s,_){var F={id:void 0===i?null:i,type:o,geometry:s,tags:_,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return calcBBox(F),F}function calcBBox(i){var o=i.geometry,s=i.type;if("Point"===s||"MultiPoint"===s||"LineString"===s)calcLineBBox(i,o);else if("Polygon"===s||"MultiLineString"===s)for(var _=0;_<o.length;_++)calcLineBBox(i,o[_]);else if("MultiPolygon"===s)for(_=0;_<o.length;_++)for(var F=0;F<o[_].length;F++)calcLineBBox(i,o[_][F])}function calcLineBBox(i,o){for(var s=0;s<o.length;s+=3)i.minX=Math.min(i.minX,o[s]),i.minY=Math.min(i.minY,o[s+1]),i.maxX=Math.max(i.maxX,o[s]),i.maxY=Math.max(i.maxY,o[s+1])}function convert(i,o){var s=[];if("FeatureCollection"===i.type)for(var _=0;_<i.features.length;_++)convertFeature(s,i.features[_],o,_);else"Feature"===i.type?convertFeature(s,i,o):convertFeature(s,{geometry:i},o);return s}function convertFeature(i,o,s,_){if(o.geometry){var F=o.geometry.coordinates,N=o.geometry.type,j=Math.pow(s.tolerance/((1<<s.maxZoom)*s.extent),2),Z=[],X=o.id;if(s.promoteId?X=o.properties[s.promoteId]:s.generateId&&(X=_||0),"Point"===N)convertPoint(F,Z);else if("MultiPoint"===N)for(var $=0;$<F.length;$++)convertPoint(F[$],Z);else if("LineString"===N)convertLine(F,Z,j,!1);else if("MultiLineString"===N){if(s.lineMetrics){for($=0;$<F.length;$++)Z=[],convertLine(F[$],Z,j,!1),i.push(createFeature(X,"LineString",Z,o.properties));return}convertLines(F,Z,j,!1)}else if("Polygon"===N)convertLines(F,Z,j,!0);else if("MultiPolygon"===N)for($=0;$<F.length;$++){var ee=[];convertLines(F[$],ee,j,!0),Z.push(ee)}else if("GeometryCollection"===N){for($=0;$<o.geometry.geometries.length;$++)convertFeature(i,{id:X,geometry:o.geometry.geometries[$],properties:o.properties},s,_);return}else throw Error("Input data is not a valid GeoJSON object.");i.push(createFeature(X,N,Z,o.properties))}}function convertPoint(i,o){var s;o.push(i[0]/360+.5),o.push(projectY(i[1])),o.push(0)}function convertLine(i,o,s,_){for(var F,N,j=0,Z=0;Z<i.length;Z++){var X,$=i[Z][0]/360+.5,ee=projectY(i[Z][1]);o.push($),o.push(ee),o.push(0),Z>0&&(_?j+=(F*ee-$*N)/2:j+=Math.sqrt(Math.pow($-F,2)+Math.pow(ee-N,2))),F=$,N=ee}var et=o.length-3;o[2]=1,simplify(o,0,et,s),o[et+2]=1,o.size=Math.abs(j),o.start=0,o.end=o.size}function convertLines(i,o,s,_){for(var F=0;F<i.length;F++){var N=[];convertLine(i[F],N,s,_),o.push(N)}}function projectY(i){var o=Math.sin(i*Math.PI/180),s=.5-.25*Math.log((1+o)/(1-o))/Math.PI;return s<0?0:s>1?1:s}function clip(i,o,s,_,F,N,j,Z){if(s/=o,_/=o,N>=s&&j<_)return i;if(j<s||N>=_)return null;for(var X=[],$=0;$<i.length;$++){var ee=i[$],et=ee.geometry,er=ee.type,en=0===F?ee.minX:ee.minY,ei=0===F?ee.maxX:ee.maxY;if(en>=s&&ei<_){X.push(ee);continue}if(!(ei<s)&&!(en>=_)){var eo=[];if("Point"===er||"MultiPoint"===er)clipPoints(et,eo,s,_,F);else if("LineString"===er)clipLine(et,eo,s,_,F,!1,Z.lineMetrics);else if("MultiLineString"===er)clipLines(et,eo,s,_,F,!1);else if("Polygon"===er)clipLines(et,eo,s,_,F,!0);else if("MultiPolygon"===er)for(var es=0;es<et.length;es++){var el=[];clipLines(et[es],el,s,_,F,!0),el.length&&eo.push(el)}if(eo.length){if(Z.lineMetrics&&"LineString"===er){for(es=0;es<eo.length;es++)X.push(createFeature(ee.id,er,eo[es],ee.tags));continue}("LineString"===er||"MultiLineString"===er)&&(1===eo.length?(er="LineString",eo=eo[0]):er="MultiLineString"),("Point"===er||"MultiPoint"===er)&&(er=3===eo.length?"Point":"MultiPoint"),X.push(createFeature(ee.id,er,eo,ee.tags))}}}return X.length?X:null}function clipPoints(i,o,s,_,F){for(var N=0;N<i.length;N+=3){var j=i[N+F];j>=s&&j<=_&&(o.push(i[N]),o.push(i[N+1]),o.push(i[N+2]))}}function clipLine(i,o,s,_,F,N,j){for(var Z,X,$=newSlice(i),ee=0===F?intersectX:intersectY,et=i.start,er=0;er<i.length-3;er+=3){var en=i[er],ei=i[er+1],eo=i[er+2],es=i[er+3],el=i[er+4],ec=0===F?en:ei,eu=0===F?es:el,ef=!1;j&&(Z=Math.sqrt(Math.pow(en-es,2)+Math.pow(ei-el,2))),ec<s?eu>s&&(X=ee($,en,ei,es,el,s),j&&($.start=et+Z*X)):ec>_?eu<_&&(X=ee($,en,ei,es,el,_),j&&($.start=et+Z*X)):addPoint($,en,ei,eo),eu<s&&ec>=s&&(X=ee($,en,ei,es,el,s),ef=!0),eu>_&&ec<=_&&(X=ee($,en,ei,es,el,_),ef=!0),!N&&ef&&(j&&($.end=et+Z*X),o.push($),$=newSlice(i)),j&&(et+=Z)}var ed=i.length-3;en=i[ed],ei=i[ed+1],eo=i[ed+2],(ec=0===F?en:ei)>=s&&ec<=_&&addPoint($,en,ei,eo),ed=$.length-3,N&&ed>=3&&($[ed]!==$[0]||$[ed+1]!==$[1])&&addPoint($,$[0],$[1],$[2]),$.length&&o.push($)}function newSlice(i){var o=[];return o.size=i.size,o.start=i.start,o.end=i.end,o}function clipLines(i,o,s,_,F,N){for(var j=0;j<i.length;j++)clipLine(i[j],o,s,_,F,N,!1)}function addPoint(i,o,s,_){i.push(o),i.push(s),i.push(_)}function intersectX(i,o,s,_,F,N){var j=(N-o)/(_-o);return i.push(N),i.push(s+(F-s)*j),i.push(1),j}function intersectY(i,o,s,_,F,N){var j=(N-s)/(F-s);return i.push(o+(_-o)*j),i.push(N),i.push(1),j}function wrap(i,o){var s=o.buffer/o.extent,_=i,F=clip(i,1,-1-s,s,0,-1,2,o),N=clip(i,1,1-s,2+s,0,-1,2,o);return(F||N)&&(_=clip(i,1,-s,1+s,0,-1,2,o)||[],F&&(_=shiftFeatureCoords(F,1).concat(_)),N&&(_=_.concat(shiftFeatureCoords(N,-1)))),_}function shiftFeatureCoords(i,o){for(var s=[],_=0;_<i.length;_++){var F,N=i[_],j=N.type;if("Point"===j||"MultiPoint"===j||"LineString"===j)F=shiftCoords(N.geometry,o);else if("MultiLineString"===j||"Polygon"===j){F=[];for(var Z=0;Z<N.geometry.length;Z++)F.push(shiftCoords(N.geometry[Z],o))}else if("MultiPolygon"===j)for(Z=0,F=[];Z<N.geometry.length;Z++){for(var X=[],$=0;$<N.geometry[Z].length;$++)X.push(shiftCoords(N.geometry[Z][$],o));F.push(X)}s.push(createFeature(N.id,j,F,N.tags))}return s}function shiftCoords(i,o){var s=[];s.size=i.size,void 0!==i.start&&(s.start=i.start,s.end=i.end);for(var _=0;_<i.length;_+=3)s.push(i[_]+o,i[_+1],i[_+2]);return s}function transformTile(i,o){if(i.transformed)return i;var s,_,F,N=1<<i.z,j=i.x,Z=i.y;for(s=0;s<i.features.length;s++){var X=i.features[s],$=X.geometry,ee=X.type;if(X.geometry=[],1===ee)for(_=0;_<$.length;_+=2)X.geometry.push(transformPoint($[_],$[_+1],o,N,j,Z));else for(_=0;_<$.length;_++){var et=[];for(F=0;F<$[_].length;F+=2)et.push(transformPoint($[_][F],$[_][F+1],o,N,j,Z));X.geometry.push(et)}}return i.transformed=!0,i}function transformPoint(i,o,s,_,F,N){return[Math.round(s*(i*_-F)),Math.round(s*(o*_-N))]}function createTile(i,o,s,_,F){for(var N=o===F.maxZoom?0:F.tolerance/((1<<o)*F.extent),j={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:s,y:_,z:o,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Z=0;Z<i.length;Z++){j.numFeatures++,addFeature(j,i[Z],N,F);var X=i[Z].minX,$=i[Z].minY,ee=i[Z].maxX,et=i[Z].maxY;X<j.minX&&(j.minX=X),$<j.minY&&(j.minY=$),ee>j.maxX&&(j.maxX=ee),et>j.maxY&&(j.maxY=et)}return j}function addFeature(i,o,s,_){var F=o.geometry,N=o.type,j=[];if("Point"===N||"MultiPoint"===N)for(var Z=0;Z<F.length;Z+=3)j.push(F[Z]),j.push(F[Z+1]),i.numPoints++,i.numSimplified++;else if("LineString"===N)addLine(j,F,i,s,!1,!1);else if("MultiLineString"===N||"Polygon"===N)for(Z=0;Z<F.length;Z++)addLine(j,F[Z],i,s,"Polygon"===N,0===Z);else if("MultiPolygon"===N)for(var X=0;X<F.length;X++){var $=F[X];for(Z=0;Z<$.length;Z++)addLine(j,$[Z],i,s,!0,0===Z)}if(j.length){var ee=o.tags||null;if("LineString"===N&&_.lineMetrics){for(var et in ee={},o.tags)ee[et]=o.tags[et];ee.mapbox_clip_start=F.start/F.size,ee.mapbox_clip_end=F.end/F.size}var er={geometry:j,type:"Polygon"===N||"MultiPolygon"===N?3:"LineString"===N||"MultiLineString"===N?2:1,tags:ee};null!==o.id&&(er.id=o.id),i.features.push(er)}}function addLine(i,o,s,_,F,N){var j=_*_;if(_>0&&o.size<(F?j:_)){s.numPoints+=o.length/3;return}for(var Z=[],X=0;X<o.length;X+=3)(0===_||o[X+2]>j)&&(s.numSimplified++,Z.push(o[X]),Z.push(o[X+1])),s.numPoints++;F&&rewind$1(Z,N),i.push(Z)}function rewind$1(i,o){for(var s=0,_=0,F=i.length,N=F-2;_<F;N=_,_+=2)s+=(i[_]-i[N])*(i[_+1]+i[N+1]);if(s>0===o)for(_=0,F=i.length;_<F/2;_+=2){var j=i[_],Z=i[_+1];i[_]=i[F-2-_],i[_+1]=i[F-1-_],i[F-2-_]=j,i[F-1-_]=Z}}function geojsonvt(i,o){return new GeoJSONVT(i,o)}function GeoJSONVT(i,o){var s=(o=this.options=extend$1(Object.create(this.options),o)).debug;if(s&&console.time("preprocess data"),o.maxZoom<0||o.maxZoom>24)throw Error("maxZoom should be in the 0-24 range");if(o.promoteId&&o.generateId)throw Error("promoteId and generateId cannot be used together.");var _=convert(i,o);this.tiles={},this.tileCoords=[],s&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",o.indexMaxZoom,o.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(_=wrap(_,o)).length&&this.splitTile(_,0,0,0),s&&(_.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function toID(i,o,s){return((1<<i)*s+o)*32+i}function extend$1(i,o){for(var s in o)i[s]=o[s];return i}function loadGeoJSONTile(i,o){var s=i.tileID.canonical;if(!this._geoJSONIndex)return o(null,null);var _=this._geoJSONIndex.getTile(s.z,s.x,s.y);if(!_)return o(null,null);var F=new GeoJSONWrapper(_.features),N=j(F);(0!==N.byteOffset||N.byteLength!==N.buffer.byteLength)&&(N=new Uint8Array(N)),o(null,{vectorTile:F,rawData:N.buffer})}Supercluster.prototype.load=function(i){var o=this.options,s=o.log,_=o.minZoom,F=o.maxZoom,N=o.nodeSize;s&&console.time("total time");var j="prepare "+i.length+" points";s&&console.time(j),this.points=i;for(var Z=[],X=0;X<i.length;X++)i[X].geometry&&Z.push(createPointCluster(i[X],X));this.trees[F+1]=new KDBush(Z,getX,getY,N,Float32Array),s&&console.timeEnd(j);for(var $=F;$>=_;$--){var ee=+Date.now();Z=this._cluster(Z,$),this.trees[$]=new KDBush(Z,getX,getY,N,Float32Array),s&&console.log("z%d: %d clusters in %dms",$,Z.length,+Date.now()-ee)}return s&&console.timeEnd("total time"),this},Supercluster.prototype.getClusters=function(i,o){var s=((i[0]+180)%360+360)%360-180,_=Math.max(-90,Math.min(90,i[1])),F=180===i[2]?180:((i[2]+180)%360+360)%360-180,N=Math.max(-90,Math.min(90,i[3]));if(i[2]-i[0]>=360)s=-180,F=180;else if(s>F){var j=this.getClusters([s,_,180,N],o),Z=this.getClusters([-180,_,F,N],o);return j.concat(Z)}for(var X=this.trees[this._limitZoom(o)],$=X.range(lngX(s),latY(N),lngX(F),latY(_)),ee=[],et=0;et<$.length;et+=1){var er=$[et],en=X.points[er];ee.push(en.numPoints?getClusterJSON(en):this.points[en.index])}return ee},Supercluster.prototype.getChildren=function(i){var o=this._getOriginId(i),s=this._getOriginZoom(i),_="No cluster with the specified id.",F=this.trees[s];if(!F)throw Error(_);var N=F.points[o];if(!N)throw Error(_);for(var j=this.options.radius/(this.options.extent*Math.pow(2,s-1)),Z=F.within(N.x,N.y,j),X=[],$=0;$<Z.length;$+=1){var ee=Z[$],et=F.points[ee];et.parentId===i&&X.push(et.numPoints?getClusterJSON(et):this.points[et.index])}if(0===X.length)throw Error(_);return X},Supercluster.prototype.getLeaves=function(i,o,s){o=o||10,s=s||0;var _=[];return this._appendLeaves(_,i,o,s,0),_},Supercluster.prototype.getTile=function(i,o,s){var _=this.trees[this._limitZoom(i)],F=Math.pow(2,i),N=this.options,j=N.extent,Z=N.radius/j,X=(s-Z)/F,$=(s+1+Z)/F,ee={features:[]};return this._addTileFeatures(_.range((o-Z)/F,X,(o+1+Z)/F,$),_.points,o,s,F,ee),0===o&&this._addTileFeatures(_.range(1-Z/F,X,1,$),_.points,F,s,F,ee),o===F-1&&this._addTileFeatures(_.range(0,X,Z/F,$),_.points,-1,s,F,ee),ee.features.length?ee:null},Supercluster.prototype.getClusterExpansionZoom=function(i){for(var o=this._getOriginZoom(i)-1;o<=this.options.maxZoom;){var s=this.getChildren(i);if(o++,1!==s.length)break;i=s[0].properties.cluster_id}return o},Supercluster.prototype._appendLeaves=function(i,o,s,_,F){for(var N=this.getChildren(o),j=0;j<N.length;j+=1){var Z=N[j],X=Z.properties;if(X&&X.cluster?F+X.point_count<=_?F+=X.point_count:F=this._appendLeaves(i,X.cluster_id,s,_,F):F<_?F++:i.push(Z),i.length===s)break}return F},Supercluster.prototype._addTileFeatures=function(i,o,s,_,F,N){for(var j=0;j<i.length;j+=1){var Z=o[i[j]],X=Z.numPoints,$={type:1,geometry:[[Math.round(this.options.extent*(Z.x*F-s)),Math.round(this.options.extent*(Z.y*F-_))]],tags:X?getClusterProperties(Z):this.points[Z.index].properties},ee=void 0;X?ee=Z.id:this.options.generateId?ee=Z.index:this.points[Z.index].id&&(ee=this.points[Z.index].id),void 0!==ee&&($.id=ee),N.features.push($)}},Supercluster.prototype._limitZoom=function(i){return Math.max(this.options.minZoom,Math.min(i,this.options.maxZoom+1))},Supercluster.prototype._cluster=function(i,o){for(var s=[],_=this.options,F=_.radius,N=_.extent,j=_.reduce,Z=F/(N*Math.pow(2,o)),X=0;X<i.length;X++){var $=i[X];if(!($.zoom<=o)){$.zoom=o;for(var ee=this.trees[o+1],et=ee.within($.x,$.y,Z),er=$.numPoints||1,en=$.x*er,ei=$.y*er,eo=j&&er>1?this._map($,!0):null,es=(X<<5)+(o+1)+this.points.length,el=0;el<et.length;el+=1){var ec=et[el],eu=ee.points[ec];if(!(eu.zoom<=o)){eu.zoom=o;var ef=eu.numPoints||1;en+=eu.x*ef,ei+=eu.y*ef,er+=ef,eu.parentId=es,j&&(eo||(eo=this._map($,!0)),j(eo,this._map(eu)))}}1===er?s.push($):($.parentId=es,s.push(createCluster(en/er,ei/er,es,er,eo)))}}return s},Supercluster.prototype._getOriginId=function(i){return i-this.points.length>>5},Supercluster.prototype._getOriginZoom=function(i){return(i-this.points.length)%32},Supercluster.prototype._map=function(i,o){if(i.numPoints)return o?extend({},i.properties):i.properties;var s=this.points[i.index].properties,_=this.options.map(s);return o&&_===s?extend({},_):_},GeoJSONVT.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},GeoJSONVT.prototype.splitTile=function(i,o,s,_,F,N,j){for(var Z=[i,o,s,_],X=this.options,$=X.debug;Z.length;){_=Z.pop(),s=Z.pop(),o=Z.pop(),i=Z.pop();var ee=1<<o,et=toID(o,s,_),er=this.tiles[et];if(!er&&($>1&&console.time("creation"),er=this.tiles[et]=createTile(i,o,s,_,X),this.tileCoords.push({z:o,x:s,y:_}),$)){$>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",o,s,_,er.numFeatures,er.numPoints,er.numSimplified),console.timeEnd("creation"));var en="z"+o;this.stats[en]=(this.stats[en]||0)+1,this.total++}if(er.source=i,F){if(o===X.maxZoom||o===F)continue;var ei=1<<F-o;if(s!==Math.floor(N/ei)||_!==Math.floor(j/ei))continue}else if(o===X.indexMaxZoom||er.numPoints<=X.indexMaxPoints)continue;if(er.source=null,0!==i.length){$>1&&console.time("clipping");var eo,es,el,ec,eu,ef,ed=.5*X.buffer/X.extent,eh=.5-ed,ep=.5+ed,eg=1+ed;eo=es=el=ec=null,eu=clip(i,ee,s-ed,s+ep,0,er.minX,er.maxX,X),ef=clip(i,ee,s+eh,s+eg,0,er.minX,er.maxX,X),i=null,eu&&(eo=clip(eu,ee,_-ed,_+ep,1,er.minY,er.maxY,X),es=clip(eu,ee,_+eh,_+eg,1,er.minY,er.maxY,X),eu=null),ef&&(el=clip(ef,ee,_-ed,_+ep,1,er.minY,er.maxY,X),ec=clip(ef,ee,_+eh,_+eg,1,er.minY,er.maxY,X),ef=null),$>1&&console.timeEnd("clipping"),Z.push(eo||[],o+1,2*s,2*_),Z.push(es||[],o+1,2*s,2*_+1),Z.push(el||[],o+1,2*s+1,2*_),Z.push(ec||[],o+1,2*s+1,2*_+1)}}},GeoJSONVT.prototype.getTile=function(i,o,s){var _=this.options,F=_.extent,N=_.debug;if(i<0||i>24)return null;var j=1<<i,Z=toID(i,o=(o%j+j)%j,s);if(this.tiles[Z])return transformTile(this.tiles[Z],F);N>1&&console.log("drilling down to z%d-%d-%d",i,o,s);for(var X,$=i,ee=o,et=s;!X&&$>0;)$--,ee=Math.floor(ee/2),et=Math.floor(et/2),X=this.tiles[toID($,ee,et)];return X&&X.source?(N>1&&console.log("found parent tile z%d-%d-%d",$,ee,et),N>1&&console.time("drilling down"),this.splitTile(X.source,$,ee,et,i,o,s),N>1&&console.timeEnd("drilling down"),this.tiles[Z]?transformTile(this.tiles[Z],F):null):null};var ee=function(o){function GeoJSONWorkerSource(i,s,_,F){o.call(this,i,s,_,loadGeoJSONTile),F&&(this.loadGeoJSON=F)}return o&&(GeoJSONWorkerSource.__proto__=o),GeoJSONWorkerSource.prototype=Object.create(o&&o.prototype),GeoJSONWorkerSource.prototype.constructor=GeoJSONWorkerSource,GeoJSONWorkerSource.prototype.loadData=function(i,o){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=o,this._pendingLoadDataParams=i,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},GeoJSONWorkerSource.prototype._loadData=function(){var o=this;if(this._pendingCallback&&this._pendingLoadDataParams){var _=this._pendingCallback,F=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var N=!!F&&!!F.request&&!!F.request.collectResourceTiming&&new i.RequestPerformance(F.request);this.loadGeoJSON(F,function(i,j){if(i||!j)return _(i);if("object"!=typeof j)return _(Error("Input data given to '"+F.source+"' is not a valid GeoJSON object."));s(j,!0);try{o._geoJSONIndex=F.cluster?new Supercluster(getSuperclusterOptions(F)).load(j.features):geojsonvt(j,F.geojsonVtOptions)}catch(i){return _(i)}o.loaded={};var Z={};if(N){var X=N.finish();X&&(Z.resourceTiming={},Z.resourceTiming[F.source]=JSON.parse(JSON.stringify(X)))}_(null,Z)})}},GeoJSONWorkerSource.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},GeoJSONWorkerSource.prototype.reloadTile=function(i,s){var _=this.loaded,F=i.uid;return _&&_[F]?o.prototype.reloadTile.call(this,i,s):this.loadTile(i,s)},GeoJSONWorkerSource.prototype.loadGeoJSON=function(o,s){if(o.request)i.getJSON(o.request,s);else if("string"!=typeof o.data)return s(Error("Input data given to '"+o.source+"' is not a valid GeoJSON object."));else try{return s(null,JSON.parse(o.data))}catch(i){return s(Error("Input data given to '"+o.source+"' is not a valid GeoJSON object."))}},GeoJSONWorkerSource.prototype.removeSource=function(i,o){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),o()},GeoJSONWorkerSource.prototype.getClusterExpansionZoom=function(i,o){try{o(null,this._geoJSONIndex.getClusterExpansionZoom(i.clusterId))}catch(i){o(i)}},GeoJSONWorkerSource.prototype.getClusterChildren=function(i,o){try{o(null,this._geoJSONIndex.getChildren(i.clusterId))}catch(i){o(i)}},GeoJSONWorkerSource.prototype.getClusterLeaves=function(i,o){try{o(null,this._geoJSONIndex.getLeaves(i.clusterId,i.limit,i.offset))}catch(i){o(i)}},GeoJSONWorkerSource}(VectorTileWorkerSource);function getSuperclusterOptions(o){var s=o.superclusterOptions,_=o.clusterProperties;if(!_||!s)return s;for(var F={},N={},j={accumulated:null,zoom:0},Z={properties:null},X=Object.keys(_),$=0;$<X.length;$+=1){var ee=X[$],et=_[ee],er=et[0],en=et[1],ei=i.createExpression(en),eo=i.createExpression("string"==typeof er?[er,["accumulated"],["get",ee]]:er);F[ee]=ei.value,N[ee]=eo.value}return s.map=function(i){Z.properties=i;for(var o={},s=0;s<X.length;s+=1){var _=X[s];o[_]=F[_].evaluate(j,Z)}return o},s.reduce=function(i,o){Z.properties=o;for(var s=0;s<X.length;s+=1){var _=X[s];j.accumulated=i[_],i[_]=N[_].evaluate(j,Z)}},s}var Worker=function(o){var s=this;this.self=o,this.actor=new i.Actor(o,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:VectorTileWorkerSource,geojson:ee},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(i,o){if(s.workerSourceTypes[i])throw Error('Worker source with name "'+i+'" already registered.');s.workerSourceTypes[i]=o},this.self.registerRTLTextPlugin=function(o){if(i.plugin.isParsed())throw Error("RTL text plugin already registered.");i.plugin.applyArabicShaping=o.applyArabicShaping,i.plugin.processBidirectionalText=o.processBidirectionalText,i.plugin.processStyledBidirectionalText=o.processStyledBidirectionalText}};return Worker.prototype.setReferrer=function(i,o){this.referrer=o},Worker.prototype.setImages=function(i,o,s){for(var _ in this.availableImages[i]=o,this.workerSources[i]){var F=this.workerSources[i][_];for(var N in F)F[N].availableImages=o}s()},Worker.prototype.setLayers=function(i,o,s){this.getLayerIndex(i).replace(o),s()},Worker.prototype.updateLayers=function(i,o,s){this.getLayerIndex(i).update(o.layers,o.removedIds),s()},Worker.prototype.loadTile=function(i,o,s){this.getWorkerSource(i,o.type,o.source).loadTile(o,s)},Worker.prototype.loadDEMTile=function(i,o,s){this.getDEMWorkerSource(i,o.source).loadTile(o,s)},Worker.prototype.reloadTile=function(i,o,s){this.getWorkerSource(i,o.type,o.source).reloadTile(o,s)},Worker.prototype.abortTile=function(i,o,s){this.getWorkerSource(i,o.type,o.source).abortTile(o,s)},Worker.prototype.removeTile=function(i,o,s){this.getWorkerSource(i,o.type,o.source).removeTile(o,s)},Worker.prototype.removeDEMTile=function(i,o){this.getDEMWorkerSource(i,o.source).removeTile(o)},Worker.prototype.removeSource=function(i,o,s){if(this.workerSources[i]&&this.workerSources[i][o.type]&&this.workerSources[i][o.type][o.source]){var _=this.workerSources[i][o.type][o.source];delete this.workerSources[i][o.type][o.source],void 0!==_.removeSource?_.removeSource(o,s):s()}},Worker.prototype.loadWorkerSource=function(i,o,s){try{this.self.importScripts(o.url),s()}catch(i){s(i.toString())}},Worker.prototype.syncRTLPluginState=function(o,s,_){try{i.plugin.setState(s);var F=i.plugin.getPluginURL();if(i.plugin.isLoaded()&&!i.plugin.isParsed()&&null!=F){this.self.importScripts(F);var N=i.plugin.isParsed(),j=N?void 0:Error("RTL Text Plugin failed to import scripts from "+F);_(j,N)}}catch(i){_(i.toString())}},Worker.prototype.getAvailableImages=function(i){var o=this.availableImages[i];return o||(o=[]),o},Worker.prototype.getLayerIndex=function(i){var o=this.layerIndexes[i];return o||(o=this.layerIndexes[i]=new StyleLayerIndex),o},Worker.prototype.getWorkerSource=function(i,o,s){var _=this;return this.workerSources[i]||(this.workerSources[i]={}),this.workerSources[i][o]||(this.workerSources[i][o]={}),this.workerSources[i][o][s]||(this.workerSources[i][o][s]=new this.workerSourceTypes[o]({send:function(o,s,F){_.actor.send(o,s,F,i)}},this.getLayerIndex(i),this.getAvailableImages(i))),this.workerSources[i][o][s]},Worker.prototype.getDEMWorkerSource=function(i,o){return this.demWorkerSources[i]||(this.demWorkerSources[i]={}),this.demWorkerSources[i][o]||(this.demWorkerSources[i][o]=new RasterDEMTileWorkerSource),this.demWorkerSources[i][o]},Worker.prototype.enforceCacheSizeLimit=function(o,s){i.enforceCacheSizeLimit(s)},"undefined"!=typeof WorkerGlobalScope&&void 0!==i.window&&i.window instanceof WorkerGlobalScope&&(i.window.worker=new Worker(i.window)),Worker}),define(["./shared"],function(i){var o,s,_,F,N=i.createCommonjsModule(function(i){function isSupported(i){return!notSupportedReason(i)}function notSupportedReason(i){return isBrowser()?isArraySupported()?isFunctionSupported()?isObjectSupported()?isJSONSupported()?isWorkerSupported()?isUint8ClampedArraySupported()?isArrayBufferSupported()?isCanvasGetImageDataSupported()?isWebGLSupportedCached(i&&i.failIfMajorPerformanceCaveat)?void 0:"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}function isBrowser(){return"undefined"!=typeof window&&"undefined"!=typeof document}function isArraySupported(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function isFunctionSupported(){return Function.prototype&&Function.prototype.bind}function isObjectSupported(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function isJSONSupported(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function isWorkerSupported(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var i,o,s=new Blob([""],{type:"text/javascript"}),_=URL.createObjectURL(s);try{o=new Worker(_),i=!0}catch(o){i=!1}return o&&o.terminate(),URL.revokeObjectURL(_),i}function isUint8ClampedArraySupported(){return"Uint8ClampedArray"in window}function isArrayBufferSupported(){return ArrayBuffer.isView}function isCanvasGetImageDataSupported(){var i=document.createElement("canvas");i.width=i.height=1;var o=i.getContext("2d");if(!o)return!1;var s=o.getImageData(0,0,1,1);return s&&s.width===i.width}i.exports?i.exports=isSupported:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=isSupported,window.mapboxgl.notSupportedReason=notSupportedReason);var o={};function isWebGLSupportedCached(i){return void 0===o[i]&&(o[i]=isWebGLSupported(i)),o[i]}function getWebGLContext(i){var o=document.createElement("canvas"),s=Object.create(isSupported.webGLContextAttributes);return(s.failIfMajorPerformanceCaveat=i,o.probablySupportsContext)?o.probablySupportsContext("webgl",s)||o.probablySupportsContext("experimental-webgl",s):o.supportsContext?o.supportsContext("webgl",s)||o.supportsContext("experimental-webgl",s):o.getContext("webgl",s)||o.getContext("experimental-webgl",s)}function isWebGLSupported(i){var o=getWebGLContext(i);if(!o)return!1;var s=o.createShader(o.VERTEX_SHADER);return!(!s||o.isContextLost())&&(o.shaderSource(s,"void main() {}"),o.compileShader(s),!0===o.getShaderParameter(s,o.COMPILE_STATUS))}isSupported.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),j={};j.create=function(o,s,_){var F=i.window.document.createElement(o);return void 0!==s&&(F.className=s),_&&_.appendChild(F),F},j.createNS=function(o,s){return i.window.document.createElementNS(o,s)};var Z=i.window.document.documentElement.style;function testProp(i){if(!Z)return i[0];for(var o=0;o<i.length;o++)if(i[o]in Z)return i[o];return i[0]}var X=testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);j.disableDrag=function(){Z&&X&&(o=Z[X],Z[X]="none")},j.enableDrag=function(){Z&&X&&(Z[X]=o)};var $=testProp(["transform","WebkitTransform"]);j.setTransform=function(i,o){i.style[$]=o};var ee=!1;try{var et=Object.defineProperty({},"passive",{get:function(){ee=!0}});i.window.addEventListener("test",et,et),i.window.removeEventListener("test",et,et)}catch(i){ee=!1}j.addEventListener=function(i,o,s,_){void 0===_&&(_={}),"passive"in _&&ee?i.addEventListener(o,s,_):i.addEventListener(o,s,_.capture)},j.removeEventListener=function(i,o,s,_){void 0===_&&(_={}),"passive"in _&&ee?i.removeEventListener(o,s,_):i.removeEventListener(o,s,_.capture)};var suppressClick=function(o){o.preventDefault(),o.stopPropagation(),i.window.removeEventListener("click",suppressClick,!0)};function loadSprite(o,s,_){var F,N,j,Z=i.browser.devicePixelRatio>1?"@2x":"",X=i.getJSON(s.transformRequest(s.normalizeSpriteURL(o,Z,".json"),i.ResourceType.SpriteJSON),function(i,o){X=null,j||(j=i,F=o,maybeComplete())}),$=i.getImage(s.transformRequest(s.normalizeSpriteURL(o,Z,".png"),i.ResourceType.SpriteImage),function(i,o){$=null,j||(j=i,N=o,maybeComplete())});function maybeComplete(){if(j)_(j);else if(F&&N){var o=i.browser.getImageData(N),s={};for(var Z in F){var X=F[Z],$=X.width,ee=X.height,et=X.x,er=X.y,en=X.sdf,ei=X.pixelRatio,eo=X.stretchX,es=X.stretchY,el=X.content,ec=new i.RGBAImage({width:$,height:ee});i.RGBAImage.copy(o,ec,{x:et,y:er},{x:0,y:0},{width:$,height:ee}),s[Z]={data:ec,pixelRatio:ei,sdf:en,stretchX:eo,stretchY:es,content:el}}_(null,s)}}return{cancel:function(){X&&(X.cancel(),X=null),$&&($.cancel(),$=null)}}}function renderStyleImage(i){var o=i.userImage;return!!(o&&o.render&&o.render())&&(i.data.replace(new Uint8Array(o.data.buffer)),!0)}j.suppressClick=function(){i.window.addEventListener("click",suppressClick,!0),i.window.setTimeout(function(){i.window.removeEventListener("click",suppressClick,!0)},0)},j.mousePos=function(o,s){var _=o.getBoundingClientRect();return new i.Point(s.clientX-_.left-o.clientLeft,s.clientY-_.top-o.clientTop)},j.touchPos=function(o,s){for(var _=o.getBoundingClientRect(),F=[],N=0;N<s.length;N++)F.push(new i.Point(s[N].clientX-_.left-o.clientLeft,s[N].clientY-_.top-o.clientTop));return F},j.mouseButton=function(o){return void 0!==i.window.InstallTrigger&&2===o.button&&o.ctrlKey&&i.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:o.button},j.remove=function(i){i.parentNode&&i.parentNode.removeChild(i)};var er=function(o){function ImageManager(){o.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}return o&&(ImageManager.__proto__=o),ImageManager.prototype=Object.create(o&&o.prototype),ImageManager.prototype.constructor=ImageManager,ImageManager.prototype.isLoaded=function(){return this.loaded},ImageManager.prototype.setLoaded=function(i){if(this.loaded!==i&&(this.loaded=i,i)){for(var o=0,s=this.requestors;o<s.length;o+=1){var _=s[o],F=_.ids,N=_.callback;this._notify(F,N)}this.requestors=[]}},ImageManager.prototype.getImage=function(i){return this.images[i]},ImageManager.prototype.addImage=function(i,o){this._validate(i,o)&&(this.images[i]=o)},ImageManager.prototype._validate=function(o,s){var _=!0;return this._validateStretch(s.stretchX,s.data&&s.data.width)||(this.fire(new i.ErrorEvent(Error('Image "'+o+'" has invalid "stretchX" value'))),_=!1),this._validateStretch(s.stretchY,s.data&&s.data.height)||(this.fire(new i.ErrorEvent(Error('Image "'+o+'" has invalid "stretchY" value'))),_=!1),this._validateContent(s.content,s)||(this.fire(new i.ErrorEvent(Error('Image "'+o+'" has invalid "content" value'))),_=!1),_},ImageManager.prototype._validateStretch=function(i,o){if(!i)return!0;for(var s=0,_=0;_<i.length;_+=1){var F=i[_];if(F[0]<s||F[1]<F[0]||o<F[1])return!1;s=F[1]}return!0},ImageManager.prototype._validateContent=function(i,o){return!i||4===i.length&&!(i[0]<0)&&!(o.data.width<i[0])&&!(i[1]<0)&&!(o.data.height<i[1])&&!(i[2]<0)&&!(o.data.width<i[2])&&!(i[3]<0)&&!(o.data.height<i[3])&&!(i[2]<i[0])&&!(i[3]<i[1])},ImageManager.prototype.updateImage=function(i,o){var s=this.images[i];o.version=s.version+1,this.images[i]=o,this.updatedImages[i]=!0},ImageManager.prototype.removeImage=function(i){var o=this.images[i];delete this.images[i],delete this.patterns[i],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()},ImageManager.prototype.listImages=function(){return Object.keys(this.images)},ImageManager.prototype.getImages=function(i,o){var s=!0;if(!this.isLoaded())for(var _=0;_<i.length;_+=1){var F=i[_];this.images[F]||(s=!1)}this.isLoaded()||s?this._notify(i,o):this.requestors.push({ids:i,callback:o})},ImageManager.prototype._notify=function(o,s){for(var _={},F=0;F<o.length;F+=1){var N=o[F];this.images[N]||this.fire(new i.Event("styleimagemissing",{id:N}));var j=this.images[N];j?_[N]={data:j.data.clone(),pixelRatio:j.pixelRatio,sdf:j.sdf,version:j.version,stretchX:j.stretchX,stretchY:j.stretchY,content:j.content,hasRenderCallback:!!(j.userImage&&j.userImage.render)}:i.warnOnce('Image "'+N+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}s(null,_)},ImageManager.prototype.getPixelSize=function(){var i=this.atlasImage;return{width:i.width,height:i.height}},ImageManager.prototype.getPattern=function(o){var s=this.patterns[o],_=this.getImage(o);if(!_)return null;if(s&&s.position.version===_.version)return s.position;if(s)s.position.version=_.version;else{var F={w:_.data.width+2,h:_.data.height+2,x:0,y:0},N=new i.ImagePosition(F,_);this.patterns[o]={bin:F,position:N}}return this._updatePatternAtlas(),this.patterns[o].position},ImageManager.prototype.bind=function(o){var s=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.Texture(o,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)},ImageManager.prototype._updatePatternAtlas=function(){var o=[];for(var s in this.patterns)o.push(this.patterns[s].bin);var _=i.potpack(o),F=_.w,N=_.h,j=this.atlasImage;for(var Z in j.resize({width:F||1,height:N||1}),this.patterns){var X=this.patterns[Z].bin,$=X.x+1,ee=X.y+1,et=this.images[Z].data,er=et.width,en=et.height;i.RGBAImage.copy(et,j,{x:0,y:0},{x:$,y:ee},{width:er,height:en}),i.RGBAImage.copy(et,j,{x:0,y:en-1},{x:$,y:ee-1},{width:er,height:1}),i.RGBAImage.copy(et,j,{x:0,y:0},{x:$,y:ee+en},{width:er,height:1}),i.RGBAImage.copy(et,j,{x:er-1,y:0},{x:$-1,y:ee},{width:1,height:en}),i.RGBAImage.copy(et,j,{x:0,y:0},{x:$+er,y:ee},{width:1,height:en})}this.dirty=!0},ImageManager.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},ImageManager.prototype.dispatchRenderCallbacks=function(i){for(var o=0;o<i.length;o+=1){var s=i[o];if(!this.callbackDispatchedThisFrame[s]){this.callbackDispatchedThisFrame[s]=!0;var _=this.images[s];renderStyleImage(_)&&this.updateImage(s,_)}}},ImageManager}(i.Evented);function loadGlyphRange(o,s,_,F,N){var j=256*s,Z=j+255,X=F.transformRequest(F.normalizeGlyphsURL(_).replace("{fontstack}",o).replace("{range}",j+"-"+Z),i.ResourceType.Glyphs);i.getArrayBuffer(X,function(o,s){if(o)N(o);else if(s){for(var _={},F=0,j=i.parseGlyphPBF(s);F<j.length;F+=1){var Z=j[F];_[Z.id]=Z}N(null,_)}})}var en=TinySDF,ei=TinySDF;function TinySDF(i,o,s,_,F,N){this.fontSize=i||24,this.buffer=void 0===o?3:o,this.cutoff=_||.25,this.fontFamily=F||"sans-serif",this.fontWeight=N||"normal",this.radius=s||8;var j=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=j,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.d=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Int16Array(j),this.middle=Math.round(j/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function edt(i,o,s,_,F,N,j){for(var Z=0;Z<o;Z++){for(var X=0;X<s;X++)_[X]=i[X*o+Z];for(edt1d(_,F,N,j,s),X=0;X<s;X++)i[X*o+Z]=F[X]}for(X=0;X<s;X++){for(Z=0;Z<o;Z++)_[Z]=i[X*o+Z];for(edt1d(_,F,N,j,o),Z=0;Z<o;Z++)i[X*o+Z]=Math.sqrt(F[Z])}}function edt1d(i,o,s,_,F){s[0]=0,_[0]=-1e20,_[1]=1e20;for(var N=1,j=0;N<F;N++){for(var Z=(i[N]+N*N-(i[s[j]]+s[j]*s[j]))/(2*N-2*s[j]);Z<=_[j];)j--,Z=(i[N]+N*N-(i[s[j]]+s[j]*s[j]))/(2*N-2*s[j]);s[++j]=N,_[j]=Z,_[j+1]=1e20}for(N=0,j=0;N<F;N++){for(;_[j+1]<N;)j++;o[N]=(N-s[j])*(N-s[j])+i[s[j]]}}TinySDF.prototype.draw=function(i){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(i,this.buffer,this.middle);for(var o=this.ctx.getImageData(0,0,this.size,this.size),s=new Uint8ClampedArray(this.size*this.size),_=0;_<this.size*this.size;_++){var F=o.data[4*_+3]/255;this.gridOuter[_]=1===F?0:0===F?1e20:Math.pow(Math.max(0,.5-F),2),this.gridInner[_]=1===F?1e20:0===F?0:Math.pow(Math.max(0,F-.5),2)}for(edt(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),edt(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),_=0;_<this.size*this.size;_++){var N=this.gridOuter[_]-this.gridInner[_];s[_]=Math.max(0,Math.min(255,Math.round(255-255*(N/this.radius+this.cutoff))))}return s},en.default=ei;var GlyphManager=function(i,o){this.requestManager=i,this.localIdeographFontFamily=o,this.entries={}};GlyphManager.prototype.setURL=function(i){this.url=i},GlyphManager.prototype.getGlyphs=function(o,s){var _=this,F=[];for(var N in o)for(var j=0,Z=o[N];j<Z.length;j+=1){var X=Z[j];F.push({stack:N,id:X})}i.asyncAll(F,function(i,o){var s=i.stack,F=i.id,N=_.entries[s];N||(N=_.entries[s]={glyphs:{},requests:{},ranges:{}});var j=N.glyphs[F];if(void 0!==j){o(null,{stack:s,id:F,glyph:j});return}if(j=_._tinySDF(N,s,F)){N.glyphs[F]=j,o(null,{stack:s,id:F,glyph:j});return}var Z=Math.floor(F/256);if(256*Z>65535){o(Error("glyphs > 65535 not supported"));return}if(N.ranges[Z]){o(null,{stack:s,id:F,glyph:j});return}var X=N.requests[Z];X||(X=N.requests[Z]=[],GlyphManager.loadGlyphRange(s,Z,_.url,_.requestManager,function(i,o){if(o){for(var s in o)_._doesCharSupportLocalGlyph(+s)||(N.glyphs[+s]=o[+s]);N.ranges[Z]=!0}for(var F=0,j=X;F<j.length;F+=1)(0,j[F])(i,o);delete N.requests[Z]})),X.push(function(i,_){i?o(i):_&&o(null,{stack:s,id:F,glyph:_[F]||null})})},function(i,o){if(i)s(i);else if(o){for(var _={},F=0;F<o.length;F+=1){var N=o[F],j=N.stack,Z=N.id,X=N.glyph;(_[j]||(_[j]={}))[Z]=X&&{id:X.id,bitmap:X.bitmap.clone(),metrics:X.metrics}}s(null,_)}})},GlyphManager.prototype._doesCharSupportLocalGlyph=function(o){return!!this.localIdeographFontFamily&&(i.isChar["CJK Unified Ideographs"](o)||i.isChar["Hangul Syllables"](o)||i.isChar.Hiragana(o)||i.isChar.Katakana(o))},GlyphManager.prototype._tinySDF=function(o,s,_){var F=this.localIdeographFontFamily;if(F&&this._doesCharSupportLocalGlyph(_)){var N=o.tinySDF;if(!N){var j="400";/bold/i.test(s)?j="900":/medium/i.test(s)?j="500":/light/i.test(s)&&(j="200"),N=o.tinySDF=new GlyphManager.TinySDF(24,3,8,.25,F,j)}return{id:_,bitmap:new i.AlphaImage({width:30,height:30},N.draw(String.fromCharCode(_))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},GlyphManager.loadGlyphRange=loadGlyphRange,GlyphManager.TinySDF=en;var LightPositionProperty=function(){this.specification=i.styleSpec.light.position};LightPositionProperty.prototype.possiblyEvaluate=function(o,s){return i.sphericalToCartesian(o.expression.evaluate(s))},LightPositionProperty.prototype.interpolate=function(o,s,_){return{x:i.number(o.x,s.x,_),y:i.number(o.y,s.y,_),z:i.number(o.z,s.z,_)}};var eo=new i.Properties({anchor:new i.DataConstantProperty(i.styleSpec.light.anchor),position:new LightPositionProperty,color:new i.DataConstantProperty(i.styleSpec.light.color),intensity:new i.DataConstantProperty(i.styleSpec.light.intensity)}),es="-transition",el=function(o){function Light(s){o.call(this),this._transitionable=new i.Transitionable(eo),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}return o&&(Light.__proto__=o),Light.prototype=Object.create(o&&o.prototype),Light.prototype.constructor=Light,Light.prototype.getLight=function(){return this._transitionable.serialize()},Light.prototype.setLight=function(o,s){if(void 0===s&&(s={}),!this._validate(i.validateLight,o,s))for(var _ in o){var F=o[_];i.endsWith(_,es)?this._transitionable.setTransition(_.slice(0,-es.length),F):this._transitionable.setValue(_,F)}},Light.prototype.updateTransitions=function(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)},Light.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Light.prototype.recalculate=function(i){this.properties=this._transitioning.possiblyEvaluate(i)},Light.prototype._validate=function(o,s,_){return(!_||!1!==_.validate)&&i.emitValidationErrors(this,o.call(i.validateStyle,i.extend({value:s,style:{glyphs:!0,sprite:!0},styleSpec:i.styleSpec})))},Light}(i.Evented),LineAtlas=function(i,o){this.width=i,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};LineAtlas.prototype.getDash=function(i,o){var s=i.join(",")+String(o);return this.dashEntry[s]||(this.dashEntry[s]=this.addDash(i,o)),this.dashEntry[s]},LineAtlas.prototype.getDashRanges=function(i,o,s){var _=i.length%2==1,F=[],N=_?-i[i.length-1]*s:0,j=i[0]*s,Z=!0;F.push({left:N,right:j,isDash:Z,zeroLength:0===i[0]});for(var X=i[0],$=1;$<i.length;$++){Z=!Z;var ee=i[$];N=X*s,X+=ee,j=X*s,F.push({left:N,right:j,isDash:Z,zeroLength:0===ee})}return F},LineAtlas.prototype.addRoundDash=function(i,o,s){for(var _=o/2,F=-s;F<=s;F++)for(var N=this.nextRow+s+F,j=this.width*N,Z=0,X=i[0],$=0;$<this.width;$++){$/X.right>1&&(X=i[++Z]);var ee=Math.min(Math.abs($-X.left),Math.abs($-X.right)),et=void 0,er=F/s*(_+1);if(X.isDash){var en=_-Math.abs(er);et=Math.sqrt(ee*ee+en*en)}else et=_-Math.sqrt(ee*ee+er*er);this.data[j+$]=Math.max(0,Math.min(255,et+128))}},LineAtlas.prototype.addRegularDash=function(i){for(var o=i.length-1;o>=0;--o){var s=i[o],_=i[o+1];s.zeroLength?i.splice(o,1):_&&_.isDash===s.isDash&&(_.left=s.left,i.splice(o,1))}var F=i[0],N=i[i.length-1];F.isDash===N.isDash&&(F.left=N.left-this.width,N.right=F.right+this.width);for(var j=this.width*this.nextRow,Z=0,X=i[0],$=0;$<this.width;$++){$/X.right>1&&(X=i[++Z]);var ee=Math.min(Math.abs($-X.left),Math.abs($-X.right)),et=X.isDash?ee:-ee;this.data[j+$]=Math.max(0,Math.min(255,et+128))}},LineAtlas.prototype.addDash=function(o,s){var _=s?7:0,F=2*_+1;if(this.nextRow+F>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var N=0,j=0;j<o.length;j++)N+=o[j];if(0!==N){var Z=this.width/N,X=this.getDashRanges(o,this.width,Z);s?this.addRoundDash(X,Z,_):this.addRegularDash(X)}var $={y:(this.nextRow+_+.5)/this.height,height:2*_/this.height,width:N};return this.nextRow+=F,this.dirty=!0,$},LineAtlas.prototype.bind=function(i){var o=i.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))};var Dispatcher=function Dispatcher(o,s){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var _=this.workerPool.acquire(this.id),F=0;F<_.length;F++){var N=_[F],j=new Dispatcher.Actor(N,s,this.id);j.name="Worker "+F,this.actors.push(j)}};function loadTileJSON(o,s,_){var loaded=function(F,N){if(F)return _(F);if(N){var j=i.pick(i.extend(N,o),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);N.vector_layers&&(j.vectorLayers=N.vector_layers,j.vectorLayerIds=j.vectorLayers.map(function(i){return i.id})),j.tiles=s.canonicalizeTileset(j,o.url),_(null,j)}};return o.url?i.getJSON(s.transformRequest(s.normalizeSourceURL(o.url),i.ResourceType.Source),loaded):i.browser.frame(function(){return loaded(null,o)})}Dispatcher.prototype.broadcast=function(o,s,_){_=_||function(){},i.asyncAll(this.actors,function(i,_){i.send(o,s,_)},_)},Dispatcher.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Dispatcher.prototype.remove=function(){this.actors.forEach(function(i){i.remove()}),this.actors=[],this.workerPool.release(this.id)},Dispatcher.Actor=i.Actor;var TileBounds=function(o,s,_){this.bounds=i.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=s||0,this.maxzoom=_||24};TileBounds.prototype.validateBounds=function(i){return Array.isArray(i)&&4===i.length?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]},TileBounds.prototype.contains=function(o){var s=Math.pow(2,o.z),_={minX:Math.floor(i.mercatorXfromLng(this.bounds.getWest())*s),minY:Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*s),maxX:Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*s),maxY:Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*s)};return o.x>=_.minX&&o.x<_.maxX&&o.y>=_.minY&&o.y<_.maxY};var ec=function(o){function VectorTileSource(s,_,F,N){if(o.call(this),this.id=s,this.dispatcher=F,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(_,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},_),this._collectResourceTiming=_.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(N)}return o&&(VectorTileSource.__proto__=o),VectorTileSource.prototype=Object.create(o&&o.prototype),VectorTileSource.prototype.constructor=VectorTileSource,VectorTileSource.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=loadTileJSON(this._options,this.map._requestManager,function(s,_){o._tileJSONRequest=null,o._loaded=!0,s?o.fire(new i.ErrorEvent(s)):_&&(i.extend(o,_),_.bounds&&(o.tileBounds=new TileBounds(_.bounds,o.minzoom,o.maxzoom)),i.postTurnstileEvent(_.tiles,o.map._requestManager._customAccessToken),i.postMapLoadEvent(_.tiles,o.map._getMapId(),o.map._requestManager._skuToken,o.map._requestManager._customAccessToken),o.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},VectorTileSource.prototype.loaded=function(){return this._loaded},VectorTileSource.prototype.hasTile=function(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)},VectorTileSource.prototype.onAdd=function(i){this.map=i,this.load()},VectorTileSource.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},VectorTileSource.prototype.serialize=function(){return i.extend({},this._options)},VectorTileSource.prototype.loadTile=function(o,s){var _=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),F={request:this.map._requestManager.transformRequest(_,i.ResourceType.Tile),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function done(_,F){return(delete o.request,o.aborted)?s(null):_&&404!==_.status?s(_):void(F&&F.resourceTiming&&(o.resourceTiming=F.resourceTiming),this.map._refreshExpiredTiles&&F&&o.setExpiryData(F),o.loadVectorData(F,this.map.painter),i.cacheEntryPossiblyAdded(this.dispatcher),s(null),o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null))}F.request.collectResourceTiming=this._collectResourceTiming,o.actor&&"expired"!==o.state?"loading"===o.state?o.reloadCallback=s:o.request=o.actor.send("reloadTile",F,done.bind(this)):(o.actor=this.dispatcher.getActor(),o.request=o.actor.send("loadTile",F,done.bind(this)))},VectorTileSource.prototype.abortTile=function(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)},VectorTileSource.prototype.unloadTile=function(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)},VectorTileSource.prototype.hasTransition=function(){return!1},VectorTileSource}(i.Evented),eu=function(o){function RasterTileSource(s,_,F,N){o.call(this),this.id=s,this.dispatcher=F,this.setEventedParent(N),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},_),i.extend(this,i.pick(_,["url","scheme","tileSize"]))}return o&&(RasterTileSource.__proto__=o),RasterTileSource.prototype=Object.create(o&&o.prototype),RasterTileSource.prototype.constructor=RasterTileSource,RasterTileSource.prototype.load=function(){var o=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=loadTileJSON(this._options,this.map._requestManager,function(s,_){o._tileJSONRequest=null,o._loaded=!0,s?o.fire(new i.ErrorEvent(s)):_&&(i.extend(o,_),_.bounds&&(o.tileBounds=new TileBounds(_.bounds,o.minzoom,o.maxzoom)),i.postTurnstileEvent(_.tiles),i.postMapLoadEvent(_.tiles,o.map._getMapId(),o.map._requestManager._skuToken),o.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),o.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},RasterTileSource.prototype.loaded=function(){return this._loaded},RasterTileSource.prototype.onAdd=function(i){this.map=i,this.load()},RasterTileSource.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},RasterTileSource.prototype.serialize=function(){return i.extend({},this._options)},RasterTileSource.prototype.hasTile=function(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)},RasterTileSource.prototype.loadTile=function(o,s){var _=this,F=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);o.request=i.getImage(this.map._requestManager.transformRequest(F,i.ResourceType.Tile),function(F,N){if(delete o.request,o.aborted)o.state="unloaded",s(null);else if(F)o.state="errored",s(F);else if(N){_.map._refreshExpiredTiles&&o.setExpiryData(N),delete N.cacheControl,delete N.expires;var j=_.map.painter.context,Z=j.gl;o.texture=_.map.painter.getTileTexture(N.width),o.texture?o.texture.update(N,{useMipmap:!0}):(o.texture=new i.Texture(j,N,Z.RGBA,{useMipmap:!0}),o.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),j.extTextureFilterAnisotropic&&Z.texParameterf(Z.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax)),o.state="loaded",i.cacheEntryPossiblyAdded(_.dispatcher),s(null)}})},RasterTileSource.prototype.abortTile=function(i,o){i.request&&(i.request.cancel(),delete i.request),o()},RasterTileSource.prototype.unloadTile=function(i,o){i.texture&&this.map.painter.saveTileTexture(i.texture),o()},RasterTileSource.prototype.hasTransition=function(){return!1},RasterTileSource}(i.Evented),ef=function(o){function RasterDEMTileSource(s,_,F,N){o.call(this,s,_,F,N),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},_),this.encoding=_.encoding||"mapbox"}return o&&(RasterDEMTileSource.__proto__=o),RasterDEMTileSource.prototype=Object.create(o&&o.prototype),RasterDEMTileSource.prototype.constructor=RasterDEMTileSource,RasterDEMTileSource.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},RasterDEMTileSource.prototype.loadTile=function(o,s){var _=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function imageLoaded(_,F){if(delete o.request,o.aborted)o.state="unloaded",s(null);else if(_)o.state="errored",s(_);else if(F){this.map._refreshExpiredTiles&&o.setExpiryData(F),delete F.cacheControl,delete F.expires;var N=i.window.ImageBitmap&&F instanceof i.window.ImageBitmap&&i.offscreenCanvasSupported()?F:i.browser.getImageData(F,1),j={uid:o.uid,coord:o.tileID,source:this.id,rawImageData:N,encoding:this.encoding};o.actor&&"expired"!==o.state||(o.actor=this.dispatcher.getActor(),o.actor.send("loadDEMTile",j,done.bind(this)))}}function done(i,_){i&&(o.state="errored",s(i)),_&&(o.dem=_,o.needsHillshadePrepare=!0,o.state="loaded",s(null))}o.request=i.getImage(this.map._requestManager.transformRequest(_,i.ResourceType.Tile),imageLoaded.bind(this)),o.neighboringTiles=this._getNeighboringTiles(o.tileID)},RasterDEMTileSource.prototype._getNeighboringTiles=function(o){var s=o.canonical,_=Math.pow(2,s.z),F=(s.x-1+_)%_,N=0===s.x?o.wrap-1:o.wrap,j=(s.x+1+_)%_,Z=s.x+1===_?o.wrap+1:o.wrap,X={};return X[new i.OverscaledTileID(o.overscaledZ,N,s.z,F,s.y).key]={backfilled:!1},X[new i.OverscaledTileID(o.overscaledZ,Z,s.z,j,s.y).key]={backfilled:!1},s.y>0&&(X[new i.OverscaledTileID(o.overscaledZ,N,s.z,F,s.y-1).key]={backfilled:!1},X[new i.OverscaledTileID(o.overscaledZ,o.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},X[new i.OverscaledTileID(o.overscaledZ,Z,s.z,j,s.y-1).key]={backfilled:!1}),s.y+1<_&&(X[new i.OverscaledTileID(o.overscaledZ,N,s.z,F,s.y+1).key]={backfilled:!1},X[new i.OverscaledTileID(o.overscaledZ,o.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},X[new i.OverscaledTileID(o.overscaledZ,Z,s.z,j,s.y+1).key]={backfilled:!1}),X},RasterDEMTileSource.prototype.unloadTile=function(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})},RasterDEMTileSource}(eu),ed=function(o){function GeoJSONSource(s,_,F,N){o.call(this),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=F.getActor(),this.setEventedParent(N),this._data=_.data,this._options=i.extend({},_),this._collectResourceTiming=_.collectResourceTiming,this._resourceTiming=[],void 0!==_.maxzoom&&(this.maxzoom=_.maxzoom),_.type&&(this.type=_.type),_.attribution&&(this.attribution=_.attribution),this.promoteId=_.promoteId;var j=i.EXTENT/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:_.cluster||!1,geojsonVtOptions:{buffer:(void 0!==_.buffer?_.buffer:128)*j,tolerance:(void 0!==_.tolerance?_.tolerance:.375)*j,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:_.lineMetrics||!1,generateId:_.generateId||!1},superclusterOptions:{maxZoom:void 0!==_.clusterMaxZoom?Math.min(_.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:i.EXTENT,radius:(_.clusterRadius||50)*j,log:!1,generateId:_.generateId||!1},clusterProperties:_.clusterProperties},_.workerOptions)}return o&&(GeoJSONSource.__proto__=o),GeoJSONSource.prototype=Object.create(o&&o.prototype),GeoJSONSource.prototype.constructor=GeoJSONSource,GeoJSONSource.prototype.load=function(){var o=this;this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(s){if(s){o.fire(new i.ErrorEvent(s));return}var _={dataType:"source",sourceDataType:"metadata"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(_.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new i.Event("data",_))})},GeoJSONSource.prototype.onAdd=function(i){this.map=i,this.load()},GeoJSONSource.prototype.setData=function(o){var s=this;return this._data=o,this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(o){if(o){s.fire(new i.ErrorEvent(o));return}var _={dataType:"source",sourceDataType:"content"};s._collectResourceTiming&&s._resourceTiming&&s._resourceTiming.length>0&&(_.resourceTiming=s._resourceTiming,s._resourceTiming=[]),s.fire(new i.Event("data",_))}),this},GeoJSONSource.prototype.getClusterExpansionZoom=function(i,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},o),this},GeoJSONSource.prototype.getClusterChildren=function(i,o){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},o),this},GeoJSONSource.prototype.getClusterLeaves=function(i,o,s,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:o,offset:s},_),this},GeoJSONSource.prototype._updateWorkerData=function(o){var s=this;this._loaded=!1;var _=i.extend({},this.workerOptions),F=this._data;"string"==typeof F?(_.request=this.map._requestManager.transformRequest(i.browser.resolveURL(F),i.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(F),this.actor.send(this.type+".loadData",_,function(i,F){s._removed||F&&F.abandoned||(s._loaded=!0,F&&F.resourceTiming&&F.resourceTiming[s.id]&&(s._resourceTiming=F.resourceTiming[s.id].slice(0)),s.actor.send(s.type+".coalesce",{source:_.source},null),o(i))})},GeoJSONSource.prototype.loaded=function(){return this._loaded},GeoJSONSource.prototype.loadTile=function(o,s){var _=this,F=o.actor?"reloadTile":"loadTile";o.actor=this.actor;var N={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request=this.actor.send(F,N,function(i,N){return(delete o.request,o.unloadVectorData(),o.aborted)?s(null):i?s(i):(o.loadVectorData(N,_.map.painter,"reloadTile"===F),s(null))})},GeoJSONSource.prototype.abortTile=function(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0},GeoJSONSource.prototype.unloadTile=function(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})},GeoJSONSource.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},GeoJSONSource.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},GeoJSONSource.prototype.hasTransition=function(){return!1},GeoJSONSource}(i.Evented),eh=i.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ep=function(o){function ImageSource(i,s,_,F){o.call(this),this.id=i,this.dispatcher=_,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(F),this.options=s}return o&&(ImageSource.__proto__=o),ImageSource.prototype=Object.create(o&&o.prototype),ImageSource.prototype.constructor=ImageSource,ImageSource.prototype.load=function(o,s){var _=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,i.getImage(this.map._requestManager.transformRequest(this.url,i.ResourceType.Image),function(F,N){_._loaded=!0,F?_.fire(new i.ErrorEvent(F)):N&&(_.image=N,o&&(_.coordinates=o),s&&s(),_._finishLoading())})},ImageSource.prototype.loaded=function(){return this._loaded},ImageSource.prototype.updateImage=function(i){var o=this;return this.image&&i.url&&(this.options.url=i.url,this.load(i.coordinates,function(){o.texture=null})),this},ImageSource.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))},ImageSource.prototype.onAdd=function(i){this.map=i,this.load()},ImageSource.prototype.setCoordinates=function(o){var s=this;this.coordinates=o;var _=o.map(i.MercatorCoordinate.fromLngLat);this.tileID=getCoordinatesCenterTileID(_),this.minzoom=this.maxzoom=this.tileID.z;var F=_.map(function(i){return s.tileID.getTilePoint(i)._round()});return this._boundsArray=new i.StructArrayLayout4i8,this._boundsArray.emplaceBack(F[0].x,F[0].y,0,0),this._boundsArray.emplaceBack(F[1].x,F[1].y,i.EXTENT,0),this._boundsArray.emplaceBack(F[3].x,F[3].y,0,i.EXTENT),this._boundsArray.emplaceBack(F[2].x,F[2].y,i.EXTENT,i.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this},ImageSource.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var o=this.map.painter.context,s=o.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,eh.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new i.Texture(o,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this.tiles){var F=this.tiles[_];"loaded"!==F.state&&(F.state="loaded",F.texture=this.texture)}}},ImageSource.prototype.loadTile=function(i,o){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored",o(null)},ImageSource.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},ImageSource.prototype.hasTransition=function(){return!1},ImageSource}(i.Evented);function getCoordinatesCenterTileID(o){for(var s=1/0,_=1/0,F=-1/0,N=-1/0,j=0;j<o.length;j+=1){var Z=o[j];s=Math.min(s,Z.x),_=Math.min(_,Z.y),F=Math.max(F,Z.x),N=Math.max(N,Z.y)}var X=Math.max(0,Math.floor(-Math.log(Math.max(F-s,N-_))/Math.LN2)),$=Math.pow(2,X);return new i.CanonicalTileID(X,Math.floor((s+F)/2*$),Math.floor((_+N)/2*$))}var eg=function(o){function VideoSource(i,s,_,F){o.call(this,i,s,_,F),this.roundZoom=!0,this.type="video",this.options=s}return o&&(VideoSource.__proto__=o),VideoSource.prototype=Object.create(o&&o.prototype),VideoSource.prototype.constructor=VideoSource,VideoSource.prototype.load=function(){var o=this;this._loaded=!1;var s=this.options;this.urls=[];for(var _=0,F=s.urls;_<F.length;_+=1){var N=F[_];this.urls.push(this.map._requestManager.transformRequest(N,i.ResourceType.Source).url)}i.getVideo(this.urls,function(s,_){o._loaded=!0,s?o.fire(new i.ErrorEvent(s)):_&&(o.video=_,o.video.loop=!0,o.video.addEventListener("playing",function(){o.map.triggerRepaint()}),o.map&&o.video.play(),o._finishLoading())})},VideoSource.prototype.pause=function(){this.video&&this.video.pause()},VideoSource.prototype.play=function(){this.video&&this.video.play()},VideoSource.prototype.seek=function(o){if(this.video){var s=this.video.seekable;o<s.start(0)||o>s.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+s.start(0)+" and "+s.end(0)+"-second mark."))):this.video.currentTime=o}},VideoSource.prototype.getVideo=function(){return this.video},VideoSource.prototype.onAdd=function(i){!this.map&&(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},VideoSource.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&!(this.video.readyState<2)){var o=this.map.painter.context,s=o.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,eh.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new i.Texture(o,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE)),this.tiles){var F=this.tiles[_];"loaded"!==F.state&&(F.state="loaded",F.texture=this.texture)}}},VideoSource.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},VideoSource.prototype.hasTransition=function(){return this.video&&!this.video.paused},VideoSource}(ep),em=function(o){function CanvasSource(s,_,F,N){o.call(this,s,_,F,N),_.coordinates?(!Array.isArray(_.coordinates)||4!==_.coordinates.length||_.coordinates.some(function(i){return!Array.isArray(i)||2!==i.length||i.some(function(i){return"number"!=typeof i})}))&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+s,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+s,null,'missing required property "coordinates"'))),_.animate&&"boolean"!=typeof _.animate&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+s,null,'optional "animate" property must be a boolean value'))),_.canvas?"string"==typeof _.canvas||_.canvas instanceof i.window.HTMLCanvasElement||this.fire(new i.ErrorEvent(new i.ValidationError("sources."+s,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+s,null,'missing required property "canvas"'))),this.options=_,this.animate=void 0===_.animate||_.animate}return o&&(CanvasSource.__proto__=o),CanvasSource.prototype=Object.create(o&&o.prototype),CanvasSource.prototype.constructor=CanvasSource,CanvasSource.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof i.window.HTMLCanvasElement?this.options.canvas:i.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new i.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},CanvasSource.prototype.getCanvas=function(){return this.canvas},CanvasSource.prototype.onAdd=function(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()},CanvasSource.prototype.onRemove=function(){this.pause()},CanvasSource.prototype.prepare=function(){var o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var s=this.map.painter.context,_=s.gl;for(var F in this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,eh.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.Texture(s,this.canvas,_.RGBA,{premultiply:!0}),this.tiles){var N=this.tiles[F];"loaded"!==N.state&&(N.state="loaded",N.texture=this.texture)}}},CanvasSource.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},CanvasSource.prototype.hasTransition=function(){return this._playing},CanvasSource.prototype._hasInvalidDimensions=function(){for(var i=0,o=[this.canvas.width,this.canvas.height];i<o.length;i+=1){var s=o[i];if(isNaN(s)||s<=0)return!0}return!1},CanvasSource}(ep),ey={vector:ec,raster:eu,"raster-dem":ef,geojson:ed,video:eg,image:ep,canvas:em},create=function(o,s,_,F){var N=new ey[s.type](o,s,_,F);if(N.id!==o)throw Error("Expected Source id to be "+o+" instead of "+N.id);return i.bindAll(["load","abort","unload","serialize","prepare"],N),N};function getPixelPosMatrix(o,s){var _=i.identity([]);return i.translate(_,_,[1,1,0]),i.scale(_,_,[.5*o.width,.5*o.height,1]),i.multiply(_,_,o.calculatePosMatrix(s.toUnwrapped()))}function queryIncludes3DLayer(i,o,s){if(i)for(var _=0;_<i.length;_+=1){var F=o[i[_]];if(F&&F.source===s&&"fill-extrusion"===F.type)return!0}else for(var N in o){var j=o[N];if(j.source===s&&"fill-extrusion"===j.type)return!0}return!1}function queryRenderedFeatures(i,o,s,_,F,N){var j=queryIncludes3DLayer(F&&F.layers,o,i.id),Z=N.maxPitchScaleFactor(),X=i.tilesIn(_,Z,j);X.sort(sortTilesIn);for(var $=[],ee=0;ee<X.length;ee+=1){var et=X[ee];$.push({wrappedTileID:et.tileID.wrapped().key,queryResults:et.tile.queryRenderedFeatures(o,s,i._state,et.queryGeometry,et.cameraQueryGeometry,et.scale,F,N,Z,getPixelPosMatrix(i.transform,et.tileID))})}var er=mergeRenderedFeatureLayers($);for(var en in er)er[en].forEach(function(o){var s=o.feature,_=i.getFeatureState(s.layer["source-layer"],s.id);s.source=s.layer.source,s.layer["source-layer"]&&(s.sourceLayer=s.layer["source-layer"]),s.state=_});return er}function queryRenderedSymbols(i,o,s,_,F,N,j){for(var Z={},X=N.queryRenderedSymbols(_),$=[],ee=0,et=Object.keys(X).map(Number);ee<et.length;ee+=1){var er=et[ee];$.push(j[er])}$.sort(sortTilesIn);for(var en=0;en<$.length;en+=1)!function(){var s=$[en],_=s.featureIndex.lookupSymbolFeatures(X[s.bucketInstanceId],o,s.bucketIndex,s.sourceLayerIndex,F.filter,F.layers,F.availableImages,i);for(var N in _){var j=Z[N]=Z[N]||[],ee=_[N];ee.sort(function(i,o){var _=s.featureSortOrder;if(!_)return o.featureIndex-i.featureIndex;var F=_.indexOf(i.featureIndex);return _.indexOf(o.featureIndex)-F});for(var et=0;et<ee.length;et+=1){var er=ee[et];j.push(er)}}}();var loop$1=function(o){Z[o].forEach(function(_){var F=_.feature,N=s[i[o].source].getFeatureState(F.layer["source-layer"],F.id);F.source=F.layer.source,F.layer["source-layer"]&&(F.sourceLayer=F.layer["source-layer"]),F.state=N})};for(var ei in Z)loop$1(ei);return Z}function querySourceFeatures(i,o){for(var s=i.getRenderableIds().map(function(o){return i.getTileByID(o)}),_=[],F={},N=0;N<s.length;N++){var j=s[N],Z=j.tileID.canonical.key;F[Z]||(F[Z]=!0,j.querySourceFeatures(_,o))}return _}function sortTilesIn(i,o){var s=i.tileID,_=o.tileID;return s.overscaledZ-_.overscaledZ||s.canonical.y-_.canonical.y||s.wrap-_.wrap||s.canonical.x-_.canonical.x}function mergeRenderedFeatureLayers(i){for(var o={},s={},_=0;_<i.length;_+=1){var F=i[_],N=F.queryResults,j=F.wrappedTileID,Z=s[j]=s[j]||{};for(var X in N)for(var $=N[X],ee=Z[X]=Z[X]||{},et=o[X]=o[X]||[],er=0;er<$.length;er+=1){var en=$[er];ee[en.featureIndex]||(ee[en.featureIndex]=!0,et.push(en))}}return o}var TileCache=function(i,o){this.max=i,this.onRemove=o,this.reset()};TileCache.prototype.reset=function(){for(var i in this.data)for(var o=0,s=this.data[i];o<s.length;o+=1){var _=s[o];_.timeout&&clearTimeout(_.timeout),this.onRemove(_.value)}return this.data={},this.order=[],this},TileCache.prototype.add=function(i,o,s){var _=this,F=i.wrapped().key;void 0===this.data[F]&&(this.data[F]=[]);var N={value:o,timeout:void 0};if(void 0!==s&&(N.timeout=setTimeout(function(){_.remove(i,N)},s)),this.data[F].push(N),this.order.push(F),this.order.length>this.max){var j=this._getAndRemoveByKey(this.order[0]);j&&this.onRemove(j)}return this},TileCache.prototype.has=function(i){return i.wrapped().key in this.data},TileCache.prototype.getAndRemove=function(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null},TileCache.prototype._getAndRemoveByKey=function(i){var o=this.data[i].shift();return o.timeout&&clearTimeout(o.timeout),0===this.data[i].length&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),o.value},TileCache.prototype.getByKey=function(i){var o=this.data[i];return o?o[0].value:null},TileCache.prototype.get=function(i){return this.has(i)?this.data[i.wrapped().key][0].value:null},TileCache.prototype.remove=function(i,o){if(!this.has(i))return this;var s=i.wrapped().key,_=void 0===o?0:this.data[s].indexOf(o),F=this.data[s][_];return this.data[s].splice(_,1),F.timeout&&clearTimeout(F.timeout),0===this.data[s].length&&delete this.data[s],this.onRemove(F.value),this.order.splice(this.order.indexOf(s),1),this},TileCache.prototype.setMaxSize=function(i){for(this.max=i;this.order.length>this.max;){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},TileCache.prototype.filter=function(i){var o=[];for(var s in this.data)for(var _=0,F=this.data[s];_<F.length;_+=1){var N=F[_];i(N.value)||o.push(N)}for(var j=0;j<o.length;j+=1){var Z=o[j];this.remove(Z.value.tileID,Z)}};var IndexBuffer=function(i,o,s){this.context=i;var _=i.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!s,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer};IndexBuffer.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},IndexBuffer.prototype.updateData=function(i){var o=this.context.gl;this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)},IndexBuffer.prototype.destroy=function(){var i=this.context.gl;this.buffer&&(i.deleteBuffer(this.buffer),delete this.buffer)};var ev={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},VertexBuffer=function(i,o,s,_){this.length=o.length,this.attributes=s,this.itemSize=o.bytesPerElement,this.dynamicDraw=_,this.context=i;var F=i.gl;this.buffer=F.createBuffer(),i.bindVertexBuffer.set(this.buffer),F.bufferData(F.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?F.DYNAMIC_DRAW:F.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer};VertexBuffer.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},VertexBuffer.prototype.updateData=function(i){var o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,i.arrayBuffer)},VertexBuffer.prototype.enableAttributes=function(i,o){for(var s=0;s<this.attributes.length;s++){var _=this.attributes[s],F=o.attributes[_.name];void 0!==F&&i.enableVertexAttribArray(F)}},VertexBuffer.prototype.setVertexAttribPointers=function(i,o,s){for(var _=0;_<this.attributes.length;_++){var F=this.attributes[_],N=o.attributes[F.name];void 0!==N&&i.vertexAttribPointer(N,F.components,i[ev[F.type]],!1,this.itemSize,F.offset+this.itemSize*(s||0))}},VertexBuffer.prototype.destroy=function(){var i=this.context.gl;this.buffer&&(i.deleteBuffer(this.buffer),delete this.buffer)};var BaseValue=function(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};BaseValue.prototype.get=function(){return this.current},BaseValue.prototype.set=function(i){},BaseValue.prototype.getDefault=function(){return this.default},BaseValue.prototype.setDefault=function(){this.set(this.default)};var ex=function(o){function ClearColor(){o.apply(this,arguments)}return o&&(ClearColor.__proto__=o),ClearColor.prototype=Object.create(o&&o.prototype),ClearColor.prototype.constructor=ClearColor,ClearColor.prototype.getDefault=function(){return i.Color.transparent},ClearColor.prototype.set=function(i){var o=this.current;(i.r!==o.r||i.g!==o.g||i.b!==o.b||i.a!==o.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)},ClearColor}(BaseValue),e_=function(i){function ClearDepth(){i.apply(this,arguments)}return i&&(ClearDepth.__proto__=i),ClearDepth.prototype=Object.create(i&&i.prototype),ClearDepth.prototype.constructor=ClearDepth,ClearDepth.prototype.getDefault=function(){return 1},ClearDepth.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)},ClearDepth}(BaseValue),ew=function(i){function ClearStencil(){i.apply(this,arguments)}return i&&(ClearStencil.__proto__=i),ClearStencil.prototype=Object.create(i&&i.prototype),ClearStencil.prototype.constructor=ClearStencil,ClearStencil.prototype.getDefault=function(){return 0},ClearStencil.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)},ClearStencil}(BaseValue),eT=function(i){function ColorMask(){i.apply(this,arguments)}return i&&(ColorMask.__proto__=i),ColorMask.prototype=Object.create(i&&i.prototype),ColorMask.prototype.constructor=ColorMask,ColorMask.prototype.getDefault=function(){return[!0,!0,!0,!0]},ColorMask.prototype.set=function(i){var o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||i[3]!==o[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)},ColorMask}(BaseValue),ek=function(i){function DepthMask(){i.apply(this,arguments)}return i&&(DepthMask.__proto__=i),DepthMask.prototype=Object.create(i&&i.prototype),DepthMask.prototype.constructor=DepthMask,DepthMask.prototype.getDefault=function(){return!0},DepthMask.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)},DepthMask}(BaseValue),eA=function(i){function StencilMask(){i.apply(this,arguments)}return i&&(StencilMask.__proto__=i),StencilMask.prototype=Object.create(i&&i.prototype),StencilMask.prototype.constructor=StencilMask,StencilMask.prototype.getDefault=function(){return 255},StencilMask.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)},StencilMask}(BaseValue),eS=function(i){function StencilFunc(){i.apply(this,arguments)}return i&&(StencilFunc.__proto__=i),StencilFunc.prototype=Object.create(i&&i.prototype),StencilFunc.prototype.constructor=StencilFunc,StencilFunc.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},StencilFunc.prototype.set=function(i){var o=this.current;(i.func!==o.func||i.ref!==o.ref||i.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)},StencilFunc}(BaseValue),eM=function(i){function StencilOp(){i.apply(this,arguments)}return i&&(StencilOp.__proto__=i),StencilOp.prototype=Object.create(i&&i.prototype),StencilOp.prototype.constructor=StencilOp,StencilOp.prototype.getDefault=function(){var i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]},StencilOp.prototype.set=function(i){var o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)},StencilOp}(BaseValue),eC=function(i){function StencilTest(){i.apply(this,arguments)}return i&&(StencilTest.__proto__=i),StencilTest.prototype=Object.create(i&&i.prototype),StencilTest.prototype.constructor=StencilTest,StencilTest.prototype.getDefault=function(){return!1},StencilTest.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;i?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=i,this.dirty=!1}},StencilTest}(BaseValue),eE=function(i){function DepthRange(){i.apply(this,arguments)}return i&&(DepthRange.__proto__=i),DepthRange.prototype=Object.create(i&&i.prototype),DepthRange.prototype.constructor=DepthRange,DepthRange.prototype.getDefault=function(){return[0,1]},DepthRange.prototype.set=function(i){var o=this.current;(i[0]!==o[0]||i[1]!==o[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)},DepthRange}(BaseValue),eL=function(i){function DepthTest(){i.apply(this,arguments)}return i&&(DepthTest.__proto__=i),DepthTest.prototype=Object.create(i&&i.prototype),DepthTest.prototype.constructor=DepthTest,DepthTest.prototype.getDefault=function(){return!1},DepthTest.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;i?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=i,this.dirty=!1}},DepthTest}(BaseValue),eP=function(i){function DepthFunc(){i.apply(this,arguments)}return i&&(DepthFunc.__proto__=i),DepthFunc.prototype=Object.create(i&&i.prototype),DepthFunc.prototype.constructor=DepthFunc,DepthFunc.prototype.getDefault=function(){return this.gl.LESS},DepthFunc.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)},DepthFunc}(BaseValue),eI=function(i){function Blend(){i.apply(this,arguments)}return i&&(Blend.__proto__=i),Blend.prototype=Object.create(i&&i.prototype),Blend.prototype.constructor=Blend,Blend.prototype.getDefault=function(){return!1},Blend.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;i?o.enable(o.BLEND):o.disable(o.BLEND),this.current=i,this.dirty=!1}},Blend}(BaseValue),eO=function(i){function BlendFunc(){i.apply(this,arguments)}return i&&(BlendFunc.__proto__=i),BlendFunc.prototype=Object.create(i&&i.prototype),BlendFunc.prototype.constructor=BlendFunc,BlendFunc.prototype.getDefault=function(){var i=this.gl;return[i.ONE,i.ZERO]},BlendFunc.prototype.set=function(i){var o=this.current;(i[0]!==o[0]||i[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)},BlendFunc}(BaseValue),eD=function(o){function BlendColor(){o.apply(this,arguments)}return o&&(BlendColor.__proto__=o),BlendColor.prototype=Object.create(o&&o.prototype),BlendColor.prototype.constructor=BlendColor,BlendColor.prototype.getDefault=function(){return i.Color.transparent},BlendColor.prototype.set=function(i){var o=this.current;(i.r!==o.r||i.g!==o.g||i.b!==o.b||i.a!==o.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)},BlendColor}(BaseValue),eR=function(i){function BlendEquation(){i.apply(this,arguments)}return i&&(BlendEquation.__proto__=i),BlendEquation.prototype=Object.create(i&&i.prototype),BlendEquation.prototype.constructor=BlendEquation,BlendEquation.prototype.getDefault=function(){return this.gl.FUNC_ADD},BlendEquation.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)},BlendEquation}(BaseValue),eB=function(i){function CullFace(){i.apply(this,arguments)}return i&&(CullFace.__proto__=i),CullFace.prototype=Object.create(i&&i.prototype),CullFace.prototype.constructor=CullFace,CullFace.prototype.getDefault=function(){return!1},CullFace.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;i?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=i,this.dirty=!1}},CullFace}(BaseValue),eF=function(i){function CullFaceSide(){i.apply(this,arguments)}return i&&(CullFaceSide.__proto__=i),CullFaceSide.prototype=Object.create(i&&i.prototype),CullFaceSide.prototype.constructor=CullFaceSide,CullFaceSide.prototype.getDefault=function(){return this.gl.BACK},CullFaceSide.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)},CullFaceSide}(BaseValue),ez=function(i){function FrontFace(){i.apply(this,arguments)}return i&&(FrontFace.__proto__=i),FrontFace.prototype=Object.create(i&&i.prototype),FrontFace.prototype.constructor=FrontFace,FrontFace.prototype.getDefault=function(){return this.gl.CCW},FrontFace.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)},FrontFace}(BaseValue),eN=function(i){function Program(){i.apply(this,arguments)}return i&&(Program.__proto__=i),Program.prototype=Object.create(i&&i.prototype),Program.prototype.constructor=Program,Program.prototype.getDefault=function(){return null},Program.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)},Program}(BaseValue),ej=function(i){function ActiveTextureUnit(){i.apply(this,arguments)}return i&&(ActiveTextureUnit.__proto__=i),ActiveTextureUnit.prototype=Object.create(i&&i.prototype),ActiveTextureUnit.prototype.constructor=ActiveTextureUnit,ActiveTextureUnit.prototype.getDefault=function(){return this.gl.TEXTURE0},ActiveTextureUnit.prototype.set=function(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)},ActiveTextureUnit}(BaseValue),eV=function(i){function Viewport(){i.apply(this,arguments)}return i&&(Viewport.__proto__=i),Viewport.prototype=Object.create(i&&i.prototype),Viewport.prototype.constructor=Viewport,Viewport.prototype.getDefault=function(){var i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]},Viewport.prototype.set=function(i){var o=this.current;(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2]||i[3]!==o[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)},Viewport}(BaseValue),eU=function(i){function BindFramebuffer(){i.apply(this,arguments)}return i&&(BindFramebuffer.__proto__=i),BindFramebuffer.prototype=Object.create(i&&i.prototype),BindFramebuffer.prototype.constructor=BindFramebuffer,BindFramebuffer.prototype.getDefault=function(){return null},BindFramebuffer.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,i),this.current=i,this.dirty=!1}},BindFramebuffer}(BaseValue),eH=function(i){function BindRenderbuffer(){i.apply(this,arguments)}return i&&(BindRenderbuffer.__proto__=i),BindRenderbuffer.prototype=Object.create(i&&i.prototype),BindRenderbuffer.prototype.constructor=BindRenderbuffer,BindRenderbuffer.prototype.getDefault=function(){return null},BindRenderbuffer.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,i),this.current=i,this.dirty=!1}},BindRenderbuffer}(BaseValue),eG=function(i){function BindTexture(){i.apply(this,arguments)}return i&&(BindTexture.__proto__=i),BindTexture.prototype=Object.create(i&&i.prototype),BindTexture.prototype.constructor=BindTexture,BindTexture.prototype.getDefault=function(){return null},BindTexture.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.bindTexture(o.TEXTURE_2D,i),this.current=i,this.dirty=!1}},BindTexture}(BaseValue),eW=function(i){function BindVertexBuffer(){i.apply(this,arguments)}return i&&(BindVertexBuffer.__proto__=i),BindVertexBuffer.prototype=Object.create(i&&i.prototype),BindVertexBuffer.prototype.constructor=BindVertexBuffer,BindVertexBuffer.prototype.getDefault=function(){return null},BindVertexBuffer.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}},BindVertexBuffer}(BaseValue),eZ=function(i){function BindElementBuffer(){i.apply(this,arguments)}return i&&(BindElementBuffer.__proto__=i),BindElementBuffer.prototype=Object.create(i&&i.prototype),BindElementBuffer.prototype.constructor=BindElementBuffer,BindElementBuffer.prototype.getDefault=function(){return null},BindElementBuffer.prototype.set=function(i){var o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1},BindElementBuffer}(BaseValue),eY=function(i){function BindVertexArrayOES(o){i.call(this,o),this.vao=o.extVertexArrayObject}return i&&(BindVertexArrayOES.__proto__=i),BindVertexArrayOES.prototype=Object.create(i&&i.prototype),BindVertexArrayOES.prototype.constructor=BindVertexArrayOES,BindVertexArrayOES.prototype.getDefault=function(){return null},BindVertexArrayOES.prototype.set=function(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)},BindVertexArrayOES}(BaseValue),eX=function(i){function PixelStoreUnpack(){i.apply(this,arguments)}return i&&(PixelStoreUnpack.__proto__=i),PixelStoreUnpack.prototype=Object.create(i&&i.prototype),PixelStoreUnpack.prototype.constructor=PixelStoreUnpack,PixelStoreUnpack.prototype.getDefault=function(){return 4},PixelStoreUnpack.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}},PixelStoreUnpack}(BaseValue),eK=function(i){function PixelStoreUnpackPremultiplyAlpha(){i.apply(this,arguments)}return i&&(PixelStoreUnpackPremultiplyAlpha.__proto__=i),PixelStoreUnpackPremultiplyAlpha.prototype=Object.create(i&&i.prototype),PixelStoreUnpackPremultiplyAlpha.prototype.constructor=PixelStoreUnpackPremultiplyAlpha,PixelStoreUnpackPremultiplyAlpha.prototype.getDefault=function(){return!1},PixelStoreUnpackPremultiplyAlpha.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}},PixelStoreUnpackPremultiplyAlpha}(BaseValue),eJ=function(i){function PixelStoreUnpackFlipY(){i.apply(this,arguments)}return i&&(PixelStoreUnpackFlipY.__proto__=i),PixelStoreUnpackFlipY.prototype=Object.create(i&&i.prototype),PixelStoreUnpackFlipY.prototype.constructor=PixelStoreUnpackFlipY,PixelStoreUnpackFlipY.prototype.getDefault=function(){return!1},PixelStoreUnpackFlipY.prototype.set=function(i){if(i!==this.current||this.dirty){var o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}},PixelStoreUnpackFlipY}(BaseValue),e$=function(i){function FramebufferAttachment(o,s){i.call(this,o),this.context=o,this.parent=s}return i&&(FramebufferAttachment.__proto__=i),FramebufferAttachment.prototype=Object.create(i&&i.prototype),FramebufferAttachment.prototype.constructor=FramebufferAttachment,FramebufferAttachment.prototype.getDefault=function(){return null},FramebufferAttachment}(BaseValue),eQ=function(i){function ColorAttachment(){i.apply(this,arguments)}return i&&(ColorAttachment.__proto__=i),ColorAttachment.prototype=Object.create(i&&i.prototype),ColorAttachment.prototype.constructor=ColorAttachment,ColorAttachment.prototype.setDirty=function(){this.dirty=!0},ColorAttachment.prototype.set=function(i){if(i!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}},ColorAttachment}(e$),e0=function(i){function DepthAttachment(){i.apply(this,arguments)}return i&&(DepthAttachment.__proto__=i),DepthAttachment.prototype=Object.create(i&&i.prototype),DepthAttachment.prototype.constructor=DepthAttachment,DepthAttachment.prototype.set=function(i){if(i!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,i),this.current=i,this.dirty=!1}},DepthAttachment}(e$),Framebuffer=function(i,o,s,_){this.context=i,this.width=o,this.height=s;var F=i.gl,N=this.framebuffer=F.createFramebuffer();this.colorAttachment=new eQ(i,N),_&&(this.depthAttachment=new e0(i,N))};Framebuffer.prototype.destroy=function(){var i=this.context.gl,o=this.colorAttachment.get();if(o&&i.deleteTexture(o),this.depthAttachment){var s=this.depthAttachment.get();s&&i.deleteRenderbuffer(s)}i.deleteFramebuffer(this.framebuffer)};var DepthMode=function(i,o,s){this.func=i,this.mask=o,this.range=s};DepthMode.ReadOnly=!1,DepthMode.ReadWrite=!0,DepthMode.disabled=new DepthMode(519,DepthMode.ReadOnly,[0,1]);var StencilMode=function(i,o,s,_,F,N){this.test=i,this.ref=o,this.mask=s,this.fail=_,this.depthFail=F,this.pass=N};StencilMode.disabled=new StencilMode({func:519,mask:0},0,0,7680,7680,7680);var ColorMode=function(i,o,s){this.blendFunction=i,this.blendColor=o,this.mask=s};ColorMode.Replace=[1,0],ColorMode.disabled=new ColorMode(ColorMode.Replace,i.Color.transparent,[!1,!1,!1,!1]),ColorMode.unblended=new ColorMode(ColorMode.Replace,i.Color.transparent,[!0,!0,!0,!0]),ColorMode.alphaBlended=new ColorMode([1,771],i.Color.transparent,[!0,!0,!0,!0]);var CullFaceMode=function(i,o,s){this.enable=i,this.mode=o,this.frontFace=s};CullFaceMode.disabled=new CullFaceMode(!1,1029,2305),CullFaceMode.backCCW=new CullFaceMode(!0,1029,2305);var Context=function(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ex(this),this.clearDepth=new e_(this),this.clearStencil=new ew(this),this.colorMask=new eT(this),this.depthMask=new ek(this),this.stencilMask=new eA(this),this.stencilFunc=new eS(this),this.stencilOp=new eM(this),this.stencilTest=new eC(this),this.depthRange=new eE(this),this.depthTest=new eL(this),this.depthFunc=new eP(this),this.blend=new eI(this),this.blendFunc=new eO(this),this.blendColor=new eD(this),this.blendEquation=new eR(this),this.cullFace=new eB(this),this.cullFaceSide=new eF(this),this.frontFace=new ez(this),this.program=new eN(this),this.activeTexture=new ej(this),this.viewport=new eV(this),this.bindFramebuffer=new eU(this),this.bindRenderbuffer=new eH(this),this.bindTexture=new eG(this),this.bindVertexBuffer=new eW(this),this.bindElementBuffer=new eZ(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new eY(this),this.pixelStoreUnpack=new eX(this),this.pixelStoreUnpackPremultiplyAlpha=new eK(this),this.pixelStoreUnpackFlipY=new eJ(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query")};Context.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Context.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Context.prototype.createIndexBuffer=function(i,o){return new IndexBuffer(this,i,o)},Context.prototype.createVertexBuffer=function(i,o,s){return new VertexBuffer(this,i,o,s)},Context.prototype.createRenderbuffer=function(i,o,s){var _=this.gl,F=_.createRenderbuffer();return this.bindRenderbuffer.set(F),_.renderbufferStorage(_.RENDERBUFFER,i,o,s),this.bindRenderbuffer.set(null),F},Context.prototype.createFramebuffer=function(i,o,s){return new Framebuffer(this,i,o,s)},Context.prototype.clear=function(i){var o=i.color,s=i.depth,_=this.gl,F=0;o&&(F|=_.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),void 0!==s&&(F|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),_.clear(F)},Context.prototype.setCullFace=function(i){!1===i.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))},Context.prototype.setDepthMode=function(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)},Context.prototype.setStencilMode=function(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)},Context.prototype.setColorMode=function(o){i.deepEqual(o.blendFunction,ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)},Context.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var e1=function(o){function SourceCache(s,_,F){var N=this;o.call(this),this.id=s,this.dispatcher=F,this.on("data",function(i){"source"===i.dataType&&"metadata"===i.sourceDataType&&(N._sourceLoaded=!0),N._sourceLoaded&&!N._paused&&"source"===i.dataType&&"content"===i.sourceDataType&&(N.reload(),N.transform&&N.update(N.transform))}),this.on("error",function(){N._sourceErrored=!0}),this._source=create(s,_,F,this),this._tiles={},this._cache=new TileCache(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new i.SourceFeatureState}return o&&(SourceCache.__proto__=o),SourceCache.prototype=Object.create(o&&o.prototype),SourceCache.prototype.constructor=SourceCache,SourceCache.prototype.onAdd=function(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)},SourceCache.prototype.onRemove=function(i){this._source&&this._source.onRemove&&this._source.onRemove(i)},SourceCache.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var i in this._tiles){var o=this._tiles[i];if("loaded"!==o.state&&"errored"!==o.state)return!1}return!0},SourceCache.prototype.getSource=function(){return this._source},SourceCache.prototype.pause=function(){this._paused=!0},SourceCache.prototype.resume=function(){if(this._paused){var i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}},SourceCache.prototype._loadTile=function(i,o){return this._source.loadTile(i,o)},SourceCache.prototype._unloadTile=function(i){if(this._source.unloadTile)return this._source.unloadTile(i,function(){})},SourceCache.prototype._abortTile=function(i){if(this._source.abortTile)return this._source.abortTile(i,function(){})},SourceCache.prototype.serialize=function(){return this._source.serialize()},SourceCache.prototype.prepare=function(i){for(var o in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var s=this._tiles[o];s.upload(i),s.prepare(this.map.style.imageManager)}},SourceCache.prototype.getIds=function(){return i.values(this._tiles).map(function(i){return i.tileID}).sort(compareTileId).map(function(i){return i.key})},SourceCache.prototype.getRenderableIds=function(o){var s=this,_=[];for(var F in this._tiles)this._isIdRenderable(F,o)&&_.push(this._tiles[F]);return o?_.sort(function(o,_){var F=o.tileID,N=_.tileID,j=new i.Point(F.canonical.x,F.canonical.y)._rotate(s.transform.angle),Z=new i.Point(N.canonical.x,N.canonical.y)._rotate(s.transform.angle);return F.overscaledZ-N.overscaledZ||Z.y-j.y||Z.x-j.x}).map(function(i){return i.tileID.key}):_.map(function(i){return i.tileID}).sort(compareTileId).map(function(i){return i.key})},SourceCache.prototype.hasRenderableParent=function(i){var o=this.findLoadedParent(i,0);return!!o&&this._isIdRenderable(o.tileID.key)},SourceCache.prototype._isIdRenderable=function(i,o){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(o||!this._tiles[i].holdingForFade())},SourceCache.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}for(var i in this._cache.reset(),this._tiles)"errored"!==this._tiles[i].state&&this._reloadTile(i,"reloading")},SourceCache.prototype._reloadTile=function(i,o){var s=this._tiles[i];s&&("loading"!==s.state&&(s.state=o),this._loadTile(s,this._tileLoaded.bind(this,s,i,o)))},SourceCache.prototype._tileLoaded=function(o,s,_,F){if(F){o.state="errored",404!==F.status?this._source.fire(new i.ErrorEvent(F,{tile:o})):this.update(this.transform);return}o.timeAdded=i.browser.now(),"expired"===_&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(s,o),"raster-dem"===this.getSource().type&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new i.Event("data",{dataType:"source",tile:o,coord:o.tileID}))},SourceCache.prototype._backfillDEM=function(i){for(var o=this.getRenderableIds(),s=0;s<o.length;s++){var _=o[s];if(i.neighboringTiles&&i.neighboringTiles[_]){var F=this.getTileByID(_);fillBorder(i,F),fillBorder(F,i)}}function fillBorder(i,o){i.needsHillshadePrepare=!0;var s=o.tileID.canonical.x-i.tileID.canonical.x,_=o.tileID.canonical.y-i.tileID.canonical.y,F=Math.pow(2,i.tileID.canonical.z),N=o.tileID.key;!(0===s&&0===_||Math.abs(_)>1)&&(Math.abs(s)>1&&(1===Math.abs(s+F)?s+=F:1===Math.abs(s-F)&&(s-=F)),o.dem&&i.dem&&(i.dem.backfillBorder(o.dem,s,_),i.neighboringTiles&&i.neighboringTiles[N]&&(i.neighboringTiles[N].backfilled=!0)))}},SourceCache.prototype.getTile=function(i){return this.getTileByID(i.key)},SourceCache.prototype.getTileByID=function(i){return this._tiles[i]},SourceCache.prototype._retainLoadedChildren=function(i,o,s,_){for(var F in this._tiles){var N=this._tiles[F];if(!_[F]&&N.hasData()&&!(N.tileID.overscaledZ<=o)&&!(N.tileID.overscaledZ>s)){for(var j=N.tileID;N&&N.tileID.overscaledZ>o+1;){var Z=N.tileID.scaledTo(N.tileID.overscaledZ-1);(N=this._tiles[Z.key])&&N.hasData()&&(j=Z)}for(var X=j;X.overscaledZ>o;)if(i[(X=X.scaledTo(X.overscaledZ-1)).key]){_[j.key]=j;break}}}},SourceCache.prototype.findLoadedParent=function(i,o){if(i.key in this._loadedParentTiles){var s=this._loadedParentTiles[i.key];return s&&s.tileID.overscaledZ>=o?s:null}for(var _=i.overscaledZ-1;_>=o;_--){var F=i.scaledTo(_),N=this._getLoadedTile(F);if(N)return N}},SourceCache.prototype._getLoadedTile=function(i){var o=this._tiles[i.key];return o&&o.hasData()?o:this._cache.getByKey(i.wrapped().key)},SourceCache.prototype.updateCacheSize=function(i){var o=Math.floor((Math.ceil(i.width/this._source.tileSize)+1)*(Math.ceil(i.height/this._source.tileSize)+1)*5),s="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(s)},SourceCache.prototype.handleWrapJump=function(i){var o=void 0===this._prevLng?i:this._prevLng,s=Math.round((i-o)/360);if(this._prevLng=i,s){var _={};for(var F in this._tiles){var N=this._tiles[F];N.tileID=N.tileID.unwrapTo(N.tileID.wrap+s),_[N.tileID.key]=N}for(var j in this._tiles=_,this._timers)clearTimeout(this._timers[j]),delete this._timers[j];for(var Z in this._tiles){var X=this._tiles[Z];this._setTileReloadTimer(Z,X)}}},SourceCache.prototype.update=function(o){var s,_=this;if(this.transform=o,this._sourceLoaded&&!this._paused){this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?s=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(o){return new i.OverscaledTileID(o.canonical.z,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y)}):(s=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(s=s.filter(function(i){return _._source.hasTile(i)}))):s=[];var F=o.coveringZoomLevel(this._source),N=Math.max(F-SourceCache.maxOverzooming,this._source.minzoom),j=Math.max(F+SourceCache.maxUnderzooming,this._source.minzoom),Z=this._updateRetainedTiles(s,F);if(isRasterType(this._source.type)){for(var X={},$={},ee=Object.keys(Z),et=0;et<ee.length;et+=1){var er=ee[et],en=Z[er],ei=this._tiles[er];if(!(!ei||ei.fadeEndTime&&ei.fadeEndTime<=i.browser.now())){var eo=this.findLoadedParent(en,N);eo&&(this._addTile(eo.tileID),X[eo.tileID.key]=eo.tileID),$[er]=en}}for(var es in this._retainLoadedChildren($,F,j,Z),X)Z[es]||(this._coveredTiles[es]=!0,Z[es]=X[es])}for(var el in Z)this._tiles[el].clearFadeHold();for(var ec=i.keysDifference(this._tiles,Z),eu=0;eu<ec.length;eu+=1){var ef=ec[eu],ed=this._tiles[ef];ed.hasSymbolBuckets&&!ed.holdingForFade()?ed.setHoldDuration(this.map._fadeDuration):(!ed.hasSymbolBuckets||ed.symbolFadeFinished())&&this._removeTile(ef)}this._updateLoadedParentTileCache()}},SourceCache.prototype.releaseSymbolFadeTiles=function(){for(var i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)},SourceCache.prototype._updateRetainedTiles=function(i,o){for(var s={},_={},F=Math.max(o-SourceCache.maxOverzooming,this._source.minzoom),N=Math.max(o+SourceCache.maxUnderzooming,this._source.minzoom),j={},Z=0;Z<i.length;Z+=1){var X=i[Z],$=this._addTile(X);s[X.key]=X,!$.hasData()&&o<this._source.maxzoom&&(j[X.key]=X)}this._retainLoadedChildren(j,o,N,s);for(var ee=0;ee<i.length;ee+=1){var et=i[ee],er=this._tiles[et.key];if(!er.hasData()){if(o+1>this._source.maxzoom){var en=et.children(this._source.maxzoom)[0],ei=this.getTile(en);if(ei&&ei.hasData()){s[en.key]=en;continue}}else{var eo=et.children(this._source.maxzoom);if(s[eo[0].key]&&s[eo[1].key]&&s[eo[2].key]&&s[eo[3].key])continue}for(var es=er.wasRequested(),el=et.overscaledZ-1;el>=F;--el){var ec=et.scaledTo(el);if(_[ec.key]||(_[ec.key]=!0,(er=this.getTile(ec))||!es||(er=this._addTile(ec)),er&&(s[ec.key]=ec,es=er.wasRequested(),er.hasData())))break}}}return s},SourceCache.prototype._updateLoadedParentTileCache=function(){for(var i in this._loadedParentTiles={},this._tiles){for(var o=[],s=void 0,_=this._tiles[i].tileID;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){s=this._loadedParentTiles[_.key];break}o.push(_.key);var F=_.scaledTo(_.overscaledZ-1);if(s=this._getLoadedTile(F))break;_=F}for(var N=0;N<o.length;N+=1){var j=o[N];this._loadedParentTiles[j]=s}}},SourceCache.prototype._addTile=function(o){var s=this._tiles[o.key];if(s)return s;(s=this._cache.getAndRemove(o))&&(this._setTileReloadTimer(o.key,s),s.tileID=o,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,s)));var _=!!s;return(_||(s=new i.Tile(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(s,this._tileLoaded.bind(this,s,o.key,s.state))),s)?(s.uses++,this._tiles[o.key]=s,_||this._source.fire(new i.Event("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null},SourceCache.prototype._setTileReloadTimer=function(i,o){var s=this;i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);var _=o.getExpiryTimeout();_&&(this._timers[i]=setTimeout(function(){s._reloadTile(i,"expired"),delete s._timers[i]},_))},SourceCache.prototype._removeTile=function(i){var o=this._tiles[i];o&&(o.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),o.uses>0||(o.hasData()&&"reloading"!==o.state?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))},SourceCache.prototype.clearTiles=function(){for(var i in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(i);this._cache.reset()},SourceCache.prototype.tilesIn=function(o,s,_){var F=this,N=[],j=this.transform;if(!j)return N;for(var Z=_?j.getCameraQueryGeometry(o):o,X=o.map(function(i){return j.pointCoordinate(i)}),$=Z.map(function(i){return j.pointCoordinate(i)}),ee=this.getIds(),et=1/0,er=1/0,en=-1/0,ei=-1/0,eo=0;eo<$.length;eo+=1){var es=$[eo];et=Math.min(et,es.x),er=Math.min(er,es.y),en=Math.max(en,es.x),ei=Math.max(ei,es.y)}for(var el=0;el<ee.length;el++)!function(o){var _=F._tiles[ee[o]];if(!_.holdingForFade()){var Z=_.tileID,eo=Math.pow(2,j.zoom-_.tileID.overscaledZ),es=s*_.queryPadding*i.EXTENT/_.tileSize/eo,el=[Z.getTilePoint(new i.MercatorCoordinate(et,er)),Z.getTilePoint(new i.MercatorCoordinate(en,ei))];if(el[0].x-es<i.EXTENT&&el[0].y-es<i.EXTENT&&el[1].x+es>=0&&el[1].y+es>=0){var ec=X.map(function(i){return Z.getTilePoint(i)}),eu=$.map(function(i){return Z.getTilePoint(i)});N.push({tile:_,tileID:Z,queryGeometry:ec,cameraQueryGeometry:eu,scale:eo})}}}(el);return N},SourceCache.prototype.getVisibleCoordinates=function(i){for(var o=this,s=this.getRenderableIds(i).map(function(i){return o._tiles[i].tileID}),_=0;_<s.length;_+=1){var F=s[_];F.posMatrix=this.transform.calculatePosMatrix(F.toUnwrapped())}return s},SourceCache.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(isRasterType(this._source.type))for(var o in this._tiles){var s=this._tiles[o];if(void 0!==s.fadeEndTime&&s.fadeEndTime>=i.browser.now())return!0}return!1},SourceCache.prototype.setFeatureState=function(i,o,s){i=i||"_geojsonTileLayer",this._state.updateState(i,o,s)},SourceCache.prototype.removeFeatureState=function(i,o,s){i=i||"_geojsonTileLayer",this._state.removeFeatureState(i,o,s)},SourceCache.prototype.getFeatureState=function(i,o){return i=i||"_geojsonTileLayer",this._state.getState(i,o)},SourceCache.prototype.setDependencies=function(i,o,s){var _=this._tiles[i];_&&_.setDependencies(o,s)},SourceCache.prototype.reloadTilesForDependencies=function(i,o){for(var s in this._tiles)this._tiles[s].hasDependency(i,o)&&this._reloadTile(s,"reloading");this._cache.filter(function(s){return!s.hasDependency(i,o)})},SourceCache}(i.Evented);function compareTileId(i,o){var s=Math.abs(2*i.wrap)-+(i.wrap<0),_=Math.abs(2*o.wrap)-+(o.wrap<0);return i.overscaledZ-o.overscaledZ||_-s||o.canonical.y-i.canonical.y||o.canonical.x-i.canonical.x}function isRasterType(i){return"raster"===i||"image"===i||"video"===i}function WebWorker(){return new i.window.Worker(tZ.workerUrl)}e1.maxOverzooming=10,e1.maxUnderzooming=3;var e2="mapboxgl_preloaded_worker_pool",WorkerPool=function(){this.active={}};WorkerPool.prototype.acquire=function(i){if(!this.workers)for(this.workers=[];this.workers.length<WorkerPool.workerCount;)this.workers.push(new WebWorker);return this.active[i]=!0,this.workers.slice()},WorkerPool.prototype.release=function(i){delete this.active[i],0===this.numActive()&&(this.workers.forEach(function(i){i.terminate()}),this.workers=null)},WorkerPool.prototype.isPreloaded=function(){return!!this.active[e2]},WorkerPool.prototype.numActive=function(){return Object.keys(this.active).length};var e3=Math.floor(i.browser.hardwareConcurrency/2);function getGlobalWorkerPool(){return s||(s=new WorkerPool),s}function prewarm(){getGlobalWorkerPool().acquire(e2)}function clearPrewarmedResources(){var i=s;i&&(i.isPreloaded()&&1===i.numActive()?(i.release(e2),s=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function deref(o,s){var _={};for(var F in o)"ref"!==F&&(_[F]=o[F]);return i.refProperties.forEach(function(i){i in s&&(_[i]=s[i])}),_}function derefLayers(i){i=i.slice();for(var o=Object.create(null),s=0;s<i.length;s++)o[i[s].id]=i[s];for(var _=0;_<i.length;_++)"ref"in i[_]&&(i[_]=deref(i[_],o[i[_].ref]));return i}function emptyStyle(){var o={},s=i.styleSpec.$version;for(var _ in i.styleSpec.$root){var F=i.styleSpec.$root[_];if(F.required){var N=null;null!=(N="version"===_?s:"array"===F.type?[]:{})&&(o[_]=N)}}return o}WorkerPool.workerCount=Math.max(Math.min(e3,6),1);var e5={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function addSource(i,o,s){s.push({command:e5.addSource,args:[i,o[i]]})}function removeSource(i,o,s){o.push({command:e5.removeSource,args:[i]}),s[i]=!0}function updateSource(i,o,s,_){removeSource(i,s,_),addSource(i,o,s)}function canUpdateGeoJSON(o,s,_){var F;for(F in o[_])if(o[_].hasOwnProperty(F)&&"data"!==F&&!i.deepEqual(o[_][F],s[_][F]))return!1;for(F in s[_])if(s[_].hasOwnProperty(F)&&"data"!==F&&!i.deepEqual(o[_][F],s[_][F]))return!1;return!0}function diffSources(o,s,_,F){var N;for(N in s=s||{},o=o||{})o.hasOwnProperty(N)&&(s.hasOwnProperty(N)||removeSource(N,_,F));for(N in s)s.hasOwnProperty(N)&&(o.hasOwnProperty(N)?i.deepEqual(o[N],s[N])||("geojson"===o[N].type&&"geojson"===s[N].type&&canUpdateGeoJSON(o,s,N)?_.push({command:e5.setGeoJSONSourceData,args:[N,s[N].data]}):updateSource(N,s,_,F)):addSource(N,s,_))}function diffLayerPropertyChanges(o,s,_,F,N,j){var Z;for(Z in s=s||{},o=o||{})o.hasOwnProperty(Z)&&(i.deepEqual(o[Z],s[Z])||_.push({command:j,args:[F,Z,s[Z],N]}));for(Z in s)!(!s.hasOwnProperty(Z)||o.hasOwnProperty(Z))&&(i.deepEqual(o[Z],s[Z])||_.push({command:j,args:[F,Z,s[Z],N]}))}function pluckId(i){return i.id}function indexById(i,o){return i[o.id]=o,i}function diffLayers(o,s,_){s=s||[];var F,N,j,Z,X,$,ee,et=(o=o||[]).map(pluckId),er=s.map(pluckId),en=o.reduce(indexById,{}),ei=s.reduce(indexById,{}),eo=et.slice(),es=Object.create(null);for(F=0,N=0;F<et.length;F++)j=et[F],ei.hasOwnProperty(j)?N++:(_.push({command:e5.removeLayer,args:[j]}),eo.splice(eo.indexOf(j,N),1));for(F=0,N=0;F<er.length;F++)j=er[er.length-1-F],eo[eo.length-1-F]!==j&&(en.hasOwnProperty(j)?(_.push({command:e5.removeLayer,args:[j]}),eo.splice(eo.lastIndexOf(j,eo.length-N),1)):N++,$=eo[eo.length-F],_.push({command:e5.addLayer,args:[ei[j],$]}),eo.splice(eo.length-F,0,j),es[j]=!0);for(F=0;F<er.length;F++)if(Z=en[j=er[F]],X=ei[j],!(es[j]||i.deepEqual(Z,X))){if(!i.deepEqual(Z.source,X.source)||!i.deepEqual(Z["source-layer"],X["source-layer"])||!i.deepEqual(Z.type,X.type)){_.push({command:e5.removeLayer,args:[j]}),$=eo[eo.lastIndexOf(j)+1],_.push({command:e5.addLayer,args:[X,$]});continue}for(ee in diffLayerPropertyChanges(Z.layout,X.layout,_,j,null,e5.setLayoutProperty),diffLayerPropertyChanges(Z.paint,X.paint,_,j,null,e5.setPaintProperty),i.deepEqual(Z.filter,X.filter)||_.push({command:e5.setFilter,args:[j,X.filter]}),i.deepEqual(Z.minzoom,X.minzoom)&&i.deepEqual(Z.maxzoom,X.maxzoom)||_.push({command:e5.setLayerZoomRange,args:[j,X.minzoom,X.maxzoom]}),Z)Z.hasOwnProperty(ee)&&"layout"!==ee&&"paint"!==ee&&"filter"!==ee&&"metadata"!==ee&&"minzoom"!==ee&&"maxzoom"!==ee&&(0===ee.indexOf("paint.")?diffLayerPropertyChanges(Z[ee],X[ee],_,j,ee.slice(6),e5.setPaintProperty):i.deepEqual(Z[ee],X[ee])||_.push({command:e5.setLayerProperty,args:[j,ee,X[ee]]}));for(ee in X)!(!X.hasOwnProperty(ee)||Z.hasOwnProperty(ee))&&"layout"!==ee&&"paint"!==ee&&"filter"!==ee&&"metadata"!==ee&&"minzoom"!==ee&&"maxzoom"!==ee&&(0===ee.indexOf("paint.")?diffLayerPropertyChanges(Z[ee],X[ee],_,j,ee.slice(6),e5.setPaintProperty):i.deepEqual(Z[ee],X[ee])||_.push({command:e5.setLayerProperty,args:[j,ee,X[ee]]}))}}function diffStyles(o,s){if(!o)return[{command:e5.setStyle,args:[s]}];var _=[];try{if(!i.deepEqual(o.version,s.version))return[{command:e5.setStyle,args:[s]}];i.deepEqual(o.center,s.center)||_.push({command:e5.setCenter,args:[s.center]}),i.deepEqual(o.zoom,s.zoom)||_.push({command:e5.setZoom,args:[s.zoom]}),i.deepEqual(o.bearing,s.bearing)||_.push({command:e5.setBearing,args:[s.bearing]}),i.deepEqual(o.pitch,s.pitch)||_.push({command:e5.setPitch,args:[s.pitch]}),i.deepEqual(o.sprite,s.sprite)||_.push({command:e5.setSprite,args:[s.sprite]}),i.deepEqual(o.glyphs,s.glyphs)||_.push({command:e5.setGlyphs,args:[s.glyphs]}),i.deepEqual(o.transition,s.transition)||_.push({command:e5.setTransition,args:[s.transition]}),i.deepEqual(o.light,s.light)||_.push({command:e5.setLight,args:[s.light]});var F={},N=[];diffSources(o.sources,s.sources,N,F);var j=[];o.layers&&o.layers.forEach(function(i){F[i.source]?_.push({command:e5.removeLayer,args:[i.id]}):j.push(i)}),_=_.concat(N),diffLayers(j,s.layers,_)}catch(i){console.warn("Unable to compute style diff:",i),_=[{command:e5.setStyle,args:[s]}]}return _}var PathInterpolator=function(i,o){this.reset(i,o)};PathInterpolator.prototype.reset=function(i,o){this.points=i||[],this._distances=[0];for(var s=1;s<this.points.length;s++)this._distances[s]=this._distances[s-1]+this.points[s].dist(this.points[s-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding},PathInterpolator.prototype.lerp=function(o){if(1===this.points.length)return this.points[0];o=i.clamp(o,0,1);for(var s=1,_=this._distances[s],F=o*this.paddedLength+this.padding;_<F&&s<this._distances.length;)_=this._distances[++s];var N=s-1,j=this._distances[N],Z=_-j,X=Z>0?(F-j)/Z:0;return this.points[N].mult(1-X).add(this.points[s].mult(X))};var GridIndex=function(i,o,s){var _=this.boxCells=[],F=this.circleCells=[];this.xCellCount=Math.ceil(i/s),this.yCellCount=Math.ceil(o/s);for(var N=0;N<this.xCellCount*this.yCellCount;N++)_.push([]),F.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=o,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0};function getLabelPlaneMatrix(o,s,_,F,N){var j=i.create();return s?(i.scale(j,j,[1/N,1/N,1]),_||i.rotateZ(j,j,F.angle)):i.multiply(j,F.labelPlaneMatrix,o),j}function getGlCoordMatrix(o,s,_,F,N){if(!s)return F.glCoordMatrix;var j=i.clone(o);return i.scale(j,j,[N,N,1]),_||i.rotateZ(j,j,-F.angle),j}function project(o,s){var _=[o.x,o.y,0,1];xyTransformMat4(_,_,s);var F=_[3];return{point:new i.Point(_[0]/F,_[1]/F),signedDistanceFromCamera:F}}function getPerspectiveRatio(i,o){return .5+.5*(i/o)}function isVisible(i,o){var s=i[0]/i[3],_=i[1]/i[3];return s>=-o[0]&&s<=o[0]&&_>=-o[1]&&_<=o[1]}function updateLineLabels(o,s,_,F,N,j,Z,X){var $=F?o.textSizeData:o.iconSizeData,ee=i.evaluateSizeForZoom($,_.transform.zoom),et=[256/_.width*2+1,256/_.height*2+1],er=F?o.text.dynamicLayoutVertexArray:o.icon.dynamicLayoutVertexArray;er.clear();for(var en=o.lineVertexArray,ei=F?o.text.placedSymbolArray:o.icon.placedSymbolArray,eo=_.transform.width/_.transform.height,es=!1,el=0;el<ei.length;el++){var ec=ei.get(el);if(ec.hidden||ec.writingMode===i.WritingMode.vertical&&!es){hideGlyphs(ec.numGlyphs,er);continue}es=!1;var eu=[ec.anchorX,ec.anchorY,0,1];if(i.transformMat4(eu,eu,s),!isVisible(eu,et)){hideGlyphs(ec.numGlyphs,er);continue}var ef=eu[3],ed=getPerspectiveRatio(_.transform.cameraToCenterDistance,ef),eh=i.evaluateSizeForFeature($,ee,ec),ep=Z?eh/ed:eh*ed,eg=new i.Point(ec.anchorX,ec.anchorY),em=project(eg,N).point,ey={},ev=placeGlyphsAlongLine(ec,ep,!1,X,s,N,j,o.glyphOffsetArray,en,er,em,eg,ey,eo);es=ev.useVertical,(ev.notEnoughRoom||es||ev.needsFlipping&&placeGlyphsAlongLine(ec,ep,!0,X,s,N,j,o.glyphOffsetArray,en,er,em,eg,ey,eo).notEnoughRoom)&&hideGlyphs(ec.numGlyphs,er)}F?o.text.dynamicLayoutVertexBuffer.updateData(er):o.icon.dynamicLayoutVertexBuffer.updateData(er)}function placeFirstAndLastGlyph(i,o,s,_,F,N,j,Z,X,$,ee){var et=Z.glyphStartIndex+Z.numGlyphs,er=Z.lineStartIndex,en=Z.lineStartIndex+Z.lineLength,ei=o.getoffsetX(Z.glyphStartIndex),eo=o.getoffsetX(et-1),es=placeGlyphAlongLine(i*ei,s,_,F,N,j,Z.segment,er,en,X,$,ee);if(!es)return null;var el=placeGlyphAlongLine(i*eo,s,_,F,N,j,Z.segment,er,en,X,$,ee);return el?{first:es,last:el}:null}function requiresOrientationChange(o,s,_,F){return o===i.WritingMode.horizontal&&Math.abs(_.y-s.y)>Math.abs(_.x-s.x)*F?{useVertical:!0}:(o===i.WritingMode.vertical?s.y<_.y:s.x>_.x)?{needsFlipping:!0}:null}function placeGlyphsAlongLine(o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei){var eo,es=s/24,el=o.lineOffsetX*es,ec=o.lineOffsetY*es;if(o.numGlyphs>1){var eu=o.glyphStartIndex+o.numGlyphs,ef=o.lineStartIndex,ed=o.lineStartIndex+o.lineLength,eh=placeFirstAndLastGlyph(es,X,el,ec,_,et,er,o,$,j,en);if(!eh)return{notEnoughRoom:!0};var ep=project(eh.first.point,Z).point,eg=project(eh.last.point,Z).point;if(F&&!_){var em=requiresOrientationChange(o.writingMode,ep,eg,ei);if(em)return em}eo=[eh.first];for(var ey=o.glyphStartIndex+1;ey<eu-1;ey++)eo.push(placeGlyphAlongLine(es*X.getoffsetX(ey),el,ec,_,et,er,o.segment,ef,ed,$,j,en));eo.push(eh.last)}else{if(F&&!_){var ev=project(er,N).point,ex=o.lineStartIndex+o.segment+1,e_=new i.Point($.getx(ex),$.gety(ex)),ew=project(e_,N),eT=ew.signedDistanceFromCamera>0?ew.point:projectTruncatedLineSegment(er,e_,ev,1,N),ek=requiresOrientationChange(o.writingMode,ev,eT,ei);if(ek)return ek}var eA=placeGlyphAlongLine(es*X.getoffsetX(o.glyphStartIndex),el,ec,_,et,er,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,$,j,en);if(!eA)return{notEnoughRoom:!0};eo=[eA]}for(var eS=0,eM=eo;eS<eM.length;eS+=1){var eC=eM[eS];i.addDynamicAttributes(ee,eC.point,eC.angle)}return{}}function projectTruncatedLineSegment(i,o,s,_,F){var N=project(i.add(i.sub(o)._unit()),F).point,j=s.sub(N);return s.add(j._mult(_/j.mag()))}function placeGlyphAlongLine(o,s,_,F,N,j,Z,X,$,ee,et,er){var en=F?o-s:o+s,ei=en>0?1:-1,eo=0;F&&(ei*=-1,eo=Math.PI),ei<0&&(eo+=Math.PI);for(var es=ei>0?X+Z:X+Z+1,el=N,ec=N,eu=0,ef=0,ed=Math.abs(en),eh=[];eu+ef<=ed;){if((es+=ei)<X||es>=$)return null;if(ec=el,eh.push(el),void 0===(el=er[es])){var ep=new i.Point(ee.getx(es),ee.gety(es)),eg=project(ep,et);if(eg.signedDistanceFromCamera>0)el=er[es]=eg.point;else{var em=es-ei;el=projectTruncatedLineSegment(0===eu?j:new i.Point(ee.getx(em),ee.gety(em)),ep,ec,ed-eu+1,et)}}eu+=ef,ef=ec.dist(el)}var ey=(ed-eu)/ef,ev=el.sub(ec),ex=ev.mult(ey)._add(ec);ex._add(ev._unit()._perp()._mult(_*ei));var e_=eo+Math.atan2(el.y-ec.y,el.x-ec.x);return eh.push(ex),{point:ex,angle:e_,path:eh}}GridIndex.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},GridIndex.prototype.insert=function(i,o,s,_,F){this._forEachCell(o,s,_,F,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(o),this.bboxes.push(s),this.bboxes.push(_),this.bboxes.push(F)},GridIndex.prototype.insertCircle=function(i,o,s,_){this._forEachCell(o-_,s-_,o+_,s+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(o),this.circles.push(s),this.circles.push(_)},GridIndex.prototype._insertBoxCell=function(i,o,s,_,F,N){this.boxCells[F].push(N)},GridIndex.prototype._insertCircleCell=function(i,o,s,_,F,N){this.circleCells[F].push(N)},GridIndex.prototype._query=function(i,o,s,_,F,N){if(s<0||i>this.width||_<0||o>this.height)return!F&&[];var j=[];if(!(i<=0)||!(o<=0)||!(this.width<=s)||!(this.height<=_))return this._forEachCell(i,o,s,_,this._queryCell,j,{hitTest:F,seenUids:{box:{},circle:{}}},N),F?j.length>0:j;if(F)return!0;for(var Z=0;Z<this.boxKeys.length;Z++)j.push({key:this.boxKeys[Z],x1:this.bboxes[4*Z],y1:this.bboxes[4*Z+1],x2:this.bboxes[4*Z+2],y2:this.bboxes[4*Z+3]});for(var X=0;X<this.circleKeys.length;X++){var $=this.circles[3*X],ee=this.circles[3*X+1],et=this.circles[3*X+2];j.push({key:this.circleKeys[X],x1:$-et,y1:ee-et,x2:$+et,y2:ee+et})}return N?j.filter(N):j},GridIndex.prototype._queryCircle=function(i,o,s,_,F){var N=i-s,j=i+s,Z=o-s,X=o+s;if(j<0||N>this.width||X<0||Z>this.height)return!_&&[];var $=[];return this._forEachCell(N,Z,j,X,this._queryCellCircle,$,{hitTest:_,circle:{x:i,y:o,radius:s},seenUids:{box:{},circle:{}}},F),_?$.length>0:$},GridIndex.prototype.query=function(i,o,s,_,F){return this._query(i,o,s,_,!1,F)},GridIndex.prototype.hitTest=function(i,o,s,_,F){return this._query(i,o,s,_,!0,F)},GridIndex.prototype.hitTestCircle=function(i,o,s,_){return this._queryCircle(i,o,s,!0,_)},GridIndex.prototype._queryCell=function(i,o,s,_,F,N,j,Z){var X=j.seenUids,$=this.boxCells[F];if(null!==$)for(var ee=this.bboxes,et=0;et<$.length;et+=1){var er=$[et];if(!X.box[er]){X.box[er]=!0;var en=4*er;if(i<=ee[en+2]&&o<=ee[en+3]&&s>=ee[en+0]&&_>=ee[en+1]&&(!Z||Z(this.boxKeys[er]))){if(j.hitTest)return N.push(!0),!0;N.push({key:this.boxKeys[er],x1:ee[en],y1:ee[en+1],x2:ee[en+2],y2:ee[en+3]})}}}var ei=this.circleCells[F];if(null!==ei)for(var eo=this.circles,es=0;es<ei.length;es+=1){var el=ei[es];if(!X.circle[el]){X.circle[el]=!0;var ec=3*el;if(this._circleAndRectCollide(eo[ec],eo[ec+1],eo[ec+2],i,o,s,_)&&(!Z||Z(this.circleKeys[el]))){if(j.hitTest)return N.push(!0),!0;var eu=eo[ec],ef=eo[ec+1],ed=eo[ec+2];N.push({key:this.circleKeys[el],x1:eu-ed,y1:ef-ed,x2:eu+ed,y2:ef+ed})}}}},GridIndex.prototype._queryCellCircle=function(i,o,s,_,F,N,j,Z){var X=j.circle,$=j.seenUids,ee=this.boxCells[F];if(null!==ee)for(var et=this.bboxes,er=0;er<ee.length;er+=1){var en=ee[er];if(!$.box[en]){$.box[en]=!0;var ei=4*en;if(this._circleAndRectCollide(X.x,X.y,X.radius,et[ei+0],et[ei+1],et[ei+2],et[ei+3])&&(!Z||Z(this.boxKeys[en])))return N.push(!0),!0}}var eo=this.circleCells[F];if(null!==eo)for(var es=this.circles,el=0;el<eo.length;el+=1){var ec=eo[el];if(!$.circle[ec]){$.circle[ec]=!0;var eu=3*ec;if(this._circlesCollide(es[eu],es[eu+1],es[eu+2],X.x,X.y,X.radius)&&(!Z||Z(this.circleKeys[ec])))return N.push(!0),!0}}},GridIndex.prototype._forEachCell=function(i,o,s,_,F,N,j,Z){for(var X=this._convertToXCellCoord(i),$=this._convertToYCellCoord(o),ee=this._convertToXCellCoord(s),et=this._convertToYCellCoord(_),er=X;er<=ee;er++)for(var en=$;en<=et;en++){var ei=this.xCellCount*en+er;if(F.call(this,i,o,s,_,ei,N,j,Z))return}},GridIndex.prototype._convertToXCellCoord=function(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))},GridIndex.prototype._convertToYCellCoord=function(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))},GridIndex.prototype._circlesCollide=function(i,o,s,_,F,N){var j=_-i,Z=F-o,X=s+N;return X*X>j*j+Z*Z},GridIndex.prototype._circleAndRectCollide=function(i,o,s,_,F,N,j){var Z=(N-_)/2,X=Math.abs(i-(_+Z));if(X>Z+s)return!1;var $=(j-F)/2,ee=Math.abs(o-(F+$));if(ee>$+s)return!1;if(X<=Z||ee<=$)return!0;var et=X-Z,er=ee-$;return et*et+er*er<=s*s};var e4=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function hideGlyphs(i,o){for(var s=0;s<i;s++){var _=o.length;o.resize(_+4),o.float32.set(e4,3*_)}}function xyTransformMat4(i,o,s){var _=o[0],F=o[1];return i[0]=s[0]*_+s[4]*F+s[12],i[1]=s[1]*_+s[5]*F+s[13],i[3]=s[3]*_+s[7]*F+s[15],i}var CollisionIndex=function(i,o,s){void 0===o&&(o=new GridIndex(i.width+200,i.height+200,25)),void 0===s&&(s=new GridIndex(i.width+200,i.height+200,25)),this.transform=i,this.grid=o,this.ignoredGrid=s,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+100,this.screenBottomBoundary=i.height+100,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200};function pixelsToTileUnits(o,s,_){return s*(i.EXTENT/(o.tileSize*Math.pow(2,_-o.tileID.overscaledZ)))}CollisionIndex.prototype.placeCollisionBox=function(i,o,s,_,F){var N=this.projectAndGetPerspectiveRatio(_,i.anchorPointX,i.anchorPointY),j=s*N.perspectiveRatio,Z=i.x1*j+N.point.x,X=i.y1*j+N.point.y,$=i.x2*j+N.point.x,ee=i.y2*j+N.point.y;return!this.isInsideGrid(Z,X,$,ee)||!o&&this.grid.hitTest(Z,X,$,ee,F)?{box:[],offscreen:!1}:{box:[Z,X,$,ee],offscreen:this.isOffscreen(Z,X,$,ee)}},CollisionIndex.prototype.placeCollisionCircles=function(o,s,_,F,N,j,Z,X,$,ee,et,er,en){var ei=[],eo=new i.Point(s.anchorX,s.anchorY),es=project(eo,j),el=getPerspectiveRatio(this.transform.cameraToCenterDistance,es.signedDistanceFromCamera),ec=(ee?N/el:N*el)/i.ONE_EM,eu=project(eo,Z).point,ef=s.lineOffsetX*ec,ed=s.lineOffsetY*ec,eh=placeFirstAndLastGlyph(ec,F,ef,ed,!1,eu,eo,s,_,Z,{}),ep=!1,eg=!1,em=!0;if(eh){for(var ey=.5*er*el+en,ev=new i.Point(-100,-100),ex=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),e_=new PathInterpolator,ew=eh.first,eT=eh.last,ek=[],eA=ew.path.length-1;eA>=1;eA--)ek.push(ew.path[eA]);for(var eS=1;eS<eT.path.length;eS++)ek.push(eT.path[eS]);var eM=2.5*ey;if(X){var eC=ek.map(function(i){return project(i,X)});ek=eC.some(function(i){return i.signedDistanceFromCamera<=0})?[]:eC.map(function(i){return i.point})}var eE=[];if(ek.length>0){for(var eL=ek[0].clone(),eP=ek[0].clone(),eI=1;eI<ek.length;eI++)eL.x=Math.min(eL.x,ek[eI].x),eL.y=Math.min(eL.y,ek[eI].y),eP.x=Math.max(eP.x,ek[eI].x),eP.y=Math.max(eP.y,ek[eI].y);eE=eL.x>=ev.x&&eP.x<=ex.x&&eL.y>=ev.y&&eP.y<=ex.y?[ek]:eP.x<ev.x||eL.x>ex.x||eP.y<ev.y||eL.y>ex.y?[]:i.clipLine([ek],ev.x,ev.y,ex.x,ex.y)}for(var eO=0,eD=eE;eO<eD.length;eO+=1){var eR=eD[eO];e_.reset(eR,.25*ey);var eB=0;eB=e_.length<=.5*ey?1:Math.ceil(e_.paddedLength/eM)+1;for(var eF=0;eF<eB;eF++){var ez=eF/Math.max(eB-1,1),eN=e_.lerp(ez),ej=eN.x+100,eV=eN.y+100;ei.push(ej,eV,ey,0);var eU=ej-ey,eH=eV-ey,eG=ej+ey,eW=eV+ey;if(em=em&&this.isOffscreen(eU,eH,eG,eW),eg=eg||this.isInsideGrid(eU,eH,eG,eW),!o&&this.grid.hitTestCircle(ej,eV,ey,et)&&(ep=!0,!$))return{circles:[],offscreen:!1,collisionDetected:ep}}}}return{circles:($||!ep)&&eg?ei:[],offscreen:em,collisionDetected:ep}},CollisionIndex.prototype.queryRenderedSymbols=function(o){if(0===o.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var s=[],_=1/0,F=1/0,N=-1/0,j=-1/0,Z=0;Z<o.length;Z+=1){var X=o[Z],$=new i.Point(X.x+100,X.y+100);_=Math.min(_,$.x),F=Math.min(F,$.y),N=Math.max(N,$.x),j=Math.max(j,$.y),s.push($)}for(var ee=this.grid.query(_,F,N,j).concat(this.ignoredGrid.query(_,F,N,j)),et={},er={},en=0;en<ee.length;en+=1){var ei=ee[en],eo=ei.key;if(void 0===et[eo.bucketInstanceId]&&(et[eo.bucketInstanceId]={}),!et[eo.bucketInstanceId][eo.featureIndex]){var es=[new i.Point(ei.x1,ei.y1),new i.Point(ei.x2,ei.y1),new i.Point(ei.x2,ei.y2),new i.Point(ei.x1,ei.y2)];i.polygonIntersectsPolygon(s,es)&&(et[eo.bucketInstanceId][eo.featureIndex]=!0,void 0===er[eo.bucketInstanceId]&&(er[eo.bucketInstanceId]=[]),er[eo.bucketInstanceId].push(eo.featureIndex))}}return er},CollisionIndex.prototype.insertCollisionBox=function(i,o,s,_,F){(o?this.ignoredGrid:this.grid).insert({bucketInstanceId:s,featureIndex:_,collisionGroupID:F},i[0],i[1],i[2],i[3])},CollisionIndex.prototype.insertCollisionCircles=function(i,o,s,_,F){for(var N=o?this.ignoredGrid:this.grid,j={bucketInstanceId:s,featureIndex:_,collisionGroupID:F},Z=0;Z<i.length;Z+=4)N.insertCircle(j,i[Z],i[Z+1],i[Z+2])},CollisionIndex.prototype.projectAndGetPerspectiveRatio=function(o,s,_){var F=[s,_,0,1];return xyTransformMat4(F,F,o),{point:new i.Point((F[0]/F[3]+1)/2*this.transform.width+100,(-F[1]/F[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/F[3])}},CollisionIndex.prototype.isOffscreen=function(i,o,s,_){return s<100||i>=this.screenRightBoundary||_<100||o>this.screenBottomBoundary},CollisionIndex.prototype.isInsideGrid=function(i,o,s,_){return s>=0&&i<this.gridRightBoundary&&_>=0&&o<this.gridBottomBoundary},CollisionIndex.prototype.getViewportMatrix=function(){var o=i.identity([]);return i.translate(o,o,[-100,-100,0]),o};var OpacityState=function(i,o,s,_){i?this.opacity=Math.max(0,Math.min(1,i.opacity+(i.placed?o:-o))):this.opacity=_&&s?1:0,this.placed=s};OpacityState.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var JointOpacityState=function(i,o,s,_,F){this.text=new OpacityState(i?i.text:null,o,s,F),this.icon=new OpacityState(i?i.icon:null,o,_,F)};JointOpacityState.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var JointPlacement=function(i,o,s){this.text=i,this.icon=o,this.skipFade=s},CollisionCircleArray=function(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]},RetainedQueryData=function(i,o,s,_,F){this.bucketInstanceId=i,this.featureIndex=o,this.sourceLayerIndex=s,this.bucketIndex=_,this.tileID=F},CollisionGroups=function(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}};function calculateVariableLayoutShift(o,s,_,F,N){var j=i.getAnchorAlignment(o),Z=j.horizontalAlign,X=j.verticalAlign,$=i.evaluateVariableOffset(o,F);return new i.Point(-(Z-.5)*s+$[0]*N,-(X-.5)*_+$[1]*N)}function shiftVariableCollisionBox(o,s,_,F,N,j){var Z=o.x1,X=o.x2,$=o.y1,ee=o.y2,et=o.anchorPointX,er=o.anchorPointY,en=new i.Point(s,_);return F&&en._rotate(N?j:-j),{x1:Z+en.x,y1:$+en.y,x2:X+en.x,y2:ee+en.y,anchorPointX:et,anchorPointY:er}}CollisionGroups.prototype.get=function(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){var o=++this.maxGroupID;this.collisionGroups[i]={ID:o,predicate:function(i){return i.collisionGroupID===o}}}return this.collisionGroups[i]};var Placement=function(i,o,s,_){this.transform=i.clone(),this.collisionIndex=new CollisionIndex(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=o,this.retainedQueryData={},this.collisionGroups=new CollisionGroups(s),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}};function updateCollisionVertices(i,o,s,_,F){i.emplaceBack(o?1:0,s?1:0,_||0,F||0),i.emplaceBack(o?1:0,s?1:0,_||0,F||0),i.emplaceBack(o?1:0,s?1:0,_||0,F||0),i.emplaceBack(o?1:0,s?1:0,_||0,F||0)}function packOpacity(i){if(0===i.opacity&&!i.placed)return 0;if(1===i.opacity&&i.placed)return 4294967295;var o=i.placed?1:0,s=Math.floor(127*i.opacity);return 33554432*s+16777216*o+131072*s+65536*o+512*s+256*o+2*s+o}Placement.prototype.getBucketParts=function(o,s,_,F){var N=_.getBucket(s),j=_.latestFeatureIndex;if(N&&j&&s.id===N.layerIds[0]){var Z=_.collisionBoxArray,X=N.layers[0].layout,$=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),ee=_.tileSize/i.EXTENT,et=this.transform.calculatePosMatrix(_.tileID.toUnwrapped()),er="map"===X.get("text-pitch-alignment"),en="map"===X.get("text-rotation-alignment"),ei=pixelsToTileUnits(_,1,this.transform.zoom),eo=getLabelPlaneMatrix(et,er,en,this.transform,ei),es=null;if(er){var el=getGlCoordMatrix(et,er,en,this.transform,ei);es=i.multiply([],this.transform.labelPlaneMatrix,el)}this.retainedQueryData[N.bucketInstanceId]=new RetainedQueryData(N.bucketInstanceId,j,N.sourceLayerIndex,N.index,_.tileID);var ec={bucket:N,layout:X,posMatrix:et,textLabelPlaneMatrix:eo,labelToScreenMatrix:es,scale:$,textPixelRatio:ee,holdingForFade:_.holdingForFade(),collisionBoxArray:Z,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(N.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(N.sourceID)};if(F)for(var eu=0,ef=N.sortKeyRanges;eu<ef.length;eu+=1){var ed=ef[eu],eh=ed.sortKey,ep=ed.symbolInstanceStart,eg=ed.symbolInstanceEnd;o.push({sortKey:eh,symbolInstanceStart:ep,symbolInstanceEnd:eg,parameters:ec})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:N.symbolInstances.length,parameters:ec})}},Placement.prototype.attemptAnchorPlacement=function(i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei){var eo,es=[et.textOffset0,et.textOffset1],el=calculateVariableLayoutShift(i,s,_,es,F),ec=this.collisionIndex.placeCollisionBox(shiftVariableCollisionBox(o,el.x,el.y,N,j,this.transform.angle),ee,Z,X,$.predicate);if((!ei||0!==this.collisionIndex.placeCollisionBox(shiftVariableCollisionBox(ei,el.x,el.y,N,j,this.transform.angle),ee,Z,X,$.predicate).box.length)&&ec.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[et.crossTileID]&&this.prevPlacement.placements[et.crossTileID]&&this.prevPlacement.placements[et.crossTileID].text&&(eo=this.prevPlacement.variableOffsets[et.crossTileID].anchor),this.variableOffsets[et.crossTileID]={textOffset:es,width:s,height:_,anchor:i,textBoxScale:F,prevAnchor:eo},this.markUsedJustification(er,i,et,en),er.allowVerticalPlacement&&(this.markUsedOrientation(er,en,et),this.placedOrientations[et.crossTileID]=en),{shift:el,placedGlyphBoxes:ec}},Placement.prototype.placeLayerBucketPart=function(o,s,_){var F=this,N=o.parameters,j=N.bucket,Z=N.layout,X=N.posMatrix,$=N.textLabelPlaneMatrix,ee=N.labelToScreenMatrix,et=N.textPixelRatio,er=N.holdingForFade,en=N.collisionBoxArray,ei=N.partiallyEvaluatedTextSize,eo=N.collisionGroup,es=Z.get("text-optional"),el=Z.get("icon-optional"),ec=Z.get("text-allow-overlap"),eu=Z.get("icon-allow-overlap"),ef="map"===Z.get("text-rotation-alignment"),ed="map"===Z.get("text-pitch-alignment"),eh="none"!==Z.get("icon-text-fit"),ep="viewport-y"===Z.get("symbol-z-order"),eg=ec&&(eu||!j.hasIconData()||el),em=eu&&(ec||!j.hasTextData()||es);!j.collisionArrays&&en&&j.deserializeCollisionBoxes(en);var placeSymbol=function(o,N){if(!s[o.crossTileID]){if(er){F.placements[o.crossTileID]=new JointPlacement(!1,!1,!1);return}var en=!1,ep=!1,ey=!0,ev=null,ex={box:null,offscreen:null},e_={box:null,offscreen:null},ew=null,eT=null,ek=null,eA=0,eS=0,eM=0;N.textFeatureIndex?eA=N.textFeatureIndex:o.useRuntimeCollisionCircles&&(eA=o.featureIndex),N.verticalTextFeatureIndex&&(eS=N.verticalTextFeatureIndex);var eC=N.textBox;if(eC){var updatePreviousOrientationIfNotPlaced=function(s){var _=i.WritingMode.horizontal;if(j.allowVerticalPlacement&&!s&&F.prevPlacement){var N=F.prevPlacement.placedOrientations[o.crossTileID];N&&(F.placedOrientations[o.crossTileID]=N,_=N,F.markUsedOrientation(j,_,o))}return _},placeTextForPlacementModes=function(s,_){if(j.allowVerticalPlacement&&o.numVerticalGlyphVertices>0&&N.verticalTextBox)for(var F=0,Z=j.writingModes;F<Z.length&&(Z[F]===i.WritingMode.vertical?e_=ex=_():ex=s(),!ex||!ex.box||!ex.box.length);F+=1);else ex=s()};if(Z.get("text-variable-anchor")){var eE=Z.get("text-variable-anchor");if(F.prevPlacement&&F.prevPlacement.variableOffsets[o.crossTileID]){var eL=F.prevPlacement.variableOffsets[o.crossTileID];eE.indexOf(eL.anchor)>0&&(eE=eE.filter(function(i){return i!==eL.anchor})).unshift(eL.anchor)}var placeBoxForVariableAnchors=function(i,s,_){for(var N=i.x2-i.x1,Z=i.y2-i.y1,$=o.textBoxScale,ee=eh&&!eu?s:null,er={box:[],offscreen:!1},ei=ec?2*eE.length:eE.length,es=0;es<ei;++es){var el=eE[es%eE.length],ep=es>=eE.length,eg=F.attemptAnchorPlacement(el,i,N,Z,$,ef,ed,et,X,eo,ep,o,j,_,ee);if(eg&&(er=eg.placedGlyphBoxes)&&er.box&&er.box.length){en=!0,ev=eg.shift;break}}return er};placeTextForPlacementModes(function(){return placeBoxForVariableAnchors(eC,N.iconBox,i.WritingMode.horizontal)},function(){var s=N.verticalTextBox,_=ex&&ex.box&&ex.box.length;return j.allowVerticalPlacement&&!_&&o.numVerticalGlyphVertices>0&&s?placeBoxForVariableAnchors(s,N.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null}}),ex&&(en=ex.box,ey=ex.offscreen);var eP=updatePreviousOrientationIfNotPlaced(ex&&ex.box);if(!en&&F.prevPlacement){var eI=F.prevPlacement.variableOffsets[o.crossTileID];eI&&(F.variableOffsets[o.crossTileID]=eI,F.markUsedJustification(j,eI.anchor,o,eP))}}else{var placeBox=function(i,s){var _=F.collisionIndex.placeCollisionBox(i,ec,et,X,eo.predicate);return _&&_.box&&_.box.length&&(F.markUsedOrientation(j,s,o),F.placedOrientations[o.crossTileID]=s),_};placeTextForPlacementModes(function(){return placeBox(eC,i.WritingMode.horizontal)},function(){var s=N.verticalTextBox;return j.allowVerticalPlacement&&o.numVerticalGlyphVertices>0&&s?placeBox(s,i.WritingMode.vertical):{box:null,offscreen:null}}),updatePreviousOrientationIfNotPlaced(ex&&ex.box&&ex.box.length)}}if(en=(ew=ex)&&ew.box&&ew.box.length>0,ey=ew&&ew.offscreen,o.useRuntimeCollisionCircles){var eO=j.text.placedSymbolArray.get(o.centerJustifiedTextSymbolIndex),eD=i.evaluateSizeForFeature(j.textSizeData,ei,eO),eR=Z.get("text-padding"),eB=o.collisionCircleDiameter;eT=F.collisionIndex.placeCollisionCircles(ec,eO,j.lineVertexArray,j.glyphOffsetArray,eD,X,$,ee,_,ed,eo.predicate,eB,eR),en=ec||eT.circles.length>0&&!eT.collisionDetected,ey=ey&&eT.offscreen}if(N.iconFeatureIndex&&(eM=N.iconFeatureIndex),N.iconBox){var placeIconFeature=function(i){var o=eh&&ev?shiftVariableCollisionBox(i,ev.x,ev.y,ef,ed,F.transform.angle):i;return F.collisionIndex.placeCollisionBox(o,eu,et,X,eo.predicate)};ep=e_&&e_.box&&e_.box.length&&N.verticalIconBox?(ek=placeIconFeature(N.verticalIconBox)).box.length>0:(ek=placeIconFeature(N.iconBox)).box.length>0,ey=ey&&ek.offscreen}var eF=es||0===o.numHorizontalGlyphVertices&&0===o.numVerticalGlyphVertices,ez=el||0===o.numIconVertices;if(eF||ez?ez?eF||(ep=ep&&en):en=ep&&en:ep=en=ep&&en,en&&ew&&ew.box&&(e_&&e_.box&&eS?F.collisionIndex.insertCollisionBox(ew.box,Z.get("text-ignore-placement"),j.bucketInstanceId,eS,eo.ID):F.collisionIndex.insertCollisionBox(ew.box,Z.get("text-ignore-placement"),j.bucketInstanceId,eA,eo.ID)),ep&&ek&&F.collisionIndex.insertCollisionBox(ek.box,Z.get("icon-ignore-placement"),j.bucketInstanceId,eM,eo.ID),eT&&(en&&F.collisionIndex.insertCollisionCircles(eT.circles,Z.get("text-ignore-placement"),j.bucketInstanceId,eA,eo.ID),_)){var eN=j.bucketInstanceId,ej=F.collisionCircleArrays[eN];void 0===ej&&(ej=F.collisionCircleArrays[eN]=new CollisionCircleArray);for(var eV=0;eV<eT.circles.length;eV+=4)ej.circles.push(eT.circles[eV+0]),ej.circles.push(eT.circles[eV+1]),ej.circles.push(eT.circles[eV+2]),ej.circles.push(eT.collisionDetected?1:0)}F.placements[o.crossTileID]=new JointPlacement(en||eg,ep||em,ey||j.justReloaded),s[o.crossTileID]=!0}};if(ep)for(var ey=j.getSortedSymbolIndexes(this.transform.angle),ev=ey.length-1;ev>=0;--ev){var ex=ey[ev];placeSymbol(j.symbolInstances.get(ex),j.collisionArrays[ex])}else for(var e_=o.symbolInstanceStart;e_<o.symbolInstanceEnd;e_++)placeSymbol(j.symbolInstances.get(e_),j.collisionArrays[e_]);if(_&&j.bucketInstanceId in this.collisionCircleArrays){var ew=this.collisionCircleArrays[j.bucketInstanceId];i.invert(ew.invProjMatrix,X),ew.viewportMatrix=this.collisionIndex.getViewportMatrix()}j.justReloaded=!1},Placement.prototype.markUsedJustification=function(o,s,_,F){var N,j={left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex};N=F===i.WritingMode.vertical?_.verticalPlacedTextSymbolIndex:j[i.getAnchorJustification(s)];for(var Z=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex],X=0;X<Z.length;X+=1){var $=Z[X];$>=0&&(N>=0&&$!==N?o.text.placedSymbolArray.get($).crossTileID=0:o.text.placedSymbolArray.get($).crossTileID=_.crossTileID)}},Placement.prototype.markUsedOrientation=function(o,s,_){for(var F=s===i.WritingMode.horizontal||s===i.WritingMode.horizontalOnly?s:0,N=s===i.WritingMode.vertical?s:0,j=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex],Z=0;Z<j.length;Z+=1){var X=j[Z];o.text.placedSymbolArray.get(X).placedOrientation=F}_.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=N)},Placement.prototype.commit=function(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;var o=this.prevPlacement,s=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;var _=o?o.symbolFadeChange(i):1,F=o?o.opacities:{},N=o?o.variableOffsets:{},j=o?o.placedOrientations:{};for(var Z in this.placements){var X=this.placements[Z],$=F[Z];$?(this.opacities[Z]=new JointOpacityState($,_,X.text,X.icon),s=s||X.text!==$.text.placed||X.icon!==$.icon.placed):(this.opacities[Z]=new JointOpacityState(null,_,X.text,X.icon,X.skipFade),s=s||X.text||X.icon)}for(var ee in F){var et=F[ee];if(!this.opacities[ee]){var er=new JointOpacityState(et,_,!1,!1);er.isHidden()||(this.opacities[ee]=er,s=s||et.text.placed||et.icon.placed)}}for(var en in N)this.variableOffsets[en]||!this.opacities[en]||this.opacities[en].isHidden()||(this.variableOffsets[en]=N[en]);for(var ei in j)this.placedOrientations[ei]||!this.opacities[ei]||this.opacities[ei].isHidden()||(this.placedOrientations[ei]=j[ei]);s?this.lastPlacementChangeTime=i:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:i)},Placement.prototype.updateLayerOpacities=function(i,o){for(var s={},_=0;_<o.length;_+=1){var F=o[_],N=F.getBucket(i);N&&F.latestFeatureIndex&&i.id===N.layerIds[0]&&this.updateBucketOpacities(N,s,F.collisionBoxArray)}},Placement.prototype.updateBucketOpacities=function(o,s,_){var F=this;o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();var N=o.layers[0].layout,j=new JointOpacityState(null,0,!1,!1,!0),Z=N.get("text-allow-overlap"),X=N.get("icon-allow-overlap"),$=N.get("text-variable-anchor"),ee="map"===N.get("text-rotation-alignment"),et="map"===N.get("text-pitch-alignment"),er="none"!==N.get("icon-text-fit"),en=new JointOpacityState(null,0,Z&&(X||!o.hasIconData()||N.get("icon-optional")),X&&(Z||!o.hasTextData()||N.get("text-optional")),!0);!o.collisionArrays&&_&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(_);for(var addOpacities=function(i,o,s){for(var _=0;_<o/4;_++)i.opacityVertexArray.emplaceBack(s)},ei=0;ei<o.symbolInstances.length;ei++)!function(_){var N=o.symbolInstances.get(_),Z=N.numHorizontalGlyphVertices,X=N.numVerticalGlyphVertices,ei=N.crossTileID,eo=s[ei],es=F.opacities[ei];eo?es=j:es||(es=en,F.opacities[ei]=es),s[ei]=!0;var el=Z>0||X>0,ec=N.numIconVertices>0,eu=F.placedOrientations[N.crossTileID],ef=eu===i.WritingMode.vertical,ed=eu===i.WritingMode.horizontal||eu===i.WritingMode.horizontalOnly;if(el){var eh=packOpacity(es.text),ep=ef?e6:eh;addOpacities(o.text,Z,ep);var eg=ed?e6:eh;addOpacities(o.text,X,eg);var em=es.text.isHidden();[N.rightJustifiedTextSymbolIndex,N.centerJustifiedTextSymbolIndex,N.leftJustifiedTextSymbolIndex].forEach(function(i){i>=0&&(o.text.placedSymbolArray.get(i).hidden=em||ef?1:0)}),N.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(N.verticalPlacedTextSymbolIndex).hidden=em||ed?1:0);var ey=F.variableOffsets[N.crossTileID];ey&&F.markUsedJustification(o,ey.anchor,N,eu);var ev=F.placedOrientations[N.crossTileID];ev&&(F.markUsedJustification(o,"left",N,ev),F.markUsedOrientation(o,ev,N))}if(ec){var ex=packOpacity(es.icon),e_=!(er&&N.verticalPlacedIconSymbolIndex&&ef);if(N.placedIconSymbolIndex>=0){var ew=e_?ex:e6;addOpacities(o.icon,N.numIconVertices,ew),o.icon.placedSymbolArray.get(N.placedIconSymbolIndex).hidden=es.icon.isHidden()}if(N.verticalPlacedIconSymbolIndex>=0){var eT=e_?e6:ex;addOpacities(o.icon,N.numVerticalIconVertices,eT),o.icon.placedSymbolArray.get(N.verticalPlacedIconSymbolIndex).hidden=es.icon.isHidden()}}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){var ek=o.collisionArrays[_];if(ek){var eA=new i.Point(0,0);if(ek.textBox||ek.verticalTextBox){var eS=!0;if($){var eM=F.variableOffsets[ei];eM?(eA=calculateVariableLayoutShift(eM.anchor,eM.width,eM.height,eM.textOffset,eM.textBoxScale),ee&&eA._rotate(et?F.transform.angle:-F.transform.angle)):eS=!1}ek.textBox&&updateCollisionVertices(o.textCollisionBox.collisionVertexArray,es.text.placed,!eS||ef,eA.x,eA.y),ek.verticalTextBox&&updateCollisionVertices(o.textCollisionBox.collisionVertexArray,es.text.placed,!eS||ed,eA.x,eA.y)}var eC=!!(!ed&&ek.verticalIconBox);ek.iconBox&&updateCollisionVertices(o.iconCollisionBox.collisionVertexArray,es.icon.placed,eC,er?eA.x:0,er?eA.y:0),ek.verticalIconBox&&updateCollisionVertices(o.iconCollisionBox.collisionVertexArray,es.icon.placed,!eC,er?eA.x:0,er?eA.y:0)}}}(ei);if(o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){var eo=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=eo.invProjMatrix,o.placementViewportMatrix=eo.viewportMatrix,o.collisionCircleArray=eo.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}},Placement.prototype.symbolFadeChange=function(i){return 0===this.fadeDuration?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Placement.prototype.zoomAdjustment=function(i){return Math.max(0,(this.transform.zoom-i)/1.5)},Placement.prototype.hasTransitions=function(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration},Placement.prototype.stillRecent=function(i,o){var s=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*s>i},Placement.prototype.setStale=function(){this.stale=!0};var e6=0,LayerPlacement=function(i){this._sortAcrossTiles="viewport-y"!==i.layout.get("symbol-z-order")&&void 0!==i.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};LayerPlacement.prototype.continuePlacement=function(i,o,s,_,F){for(var N=this._bucketParts;this._currentTileIndex<i.length;){var j=i[this._currentTileIndex];if(o.getBucketParts(N,_,j,this._sortAcrossTiles),this._currentTileIndex++,F())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort(function(i,o){return i.sortKey-o.sortKey}));this._currentPartIndex<N.length;){var Z=N[this._currentPartIndex];if(o.placeLayerBucketPart(Z,this._seenCrossTileIDs,s),this._currentPartIndex++,F())return!0}return!1};var PauseablePlacement=function(i,o,s,_,F,N,j){this.placement=new Placement(i,F,N,j),this._currentPlacementIndex=o.length-1,this._forceFullPlacement=s,this._showCollisionBoxes=_,this._done=!1};PauseablePlacement.prototype.isDone=function(){return this._done},PauseablePlacement.prototype.continuePlacement=function(o,s,_){for(var F=this,N=i.browser.now(),shouldPausePlacement=function(){var o=i.browser.now()-N;return!F._forceFullPlacement&&o>2};this._currentPlacementIndex>=0;){var j=s[o[this._currentPlacementIndex]],Z=this.placement.collisionIndex.transform.zoom;if("symbol"===j.type&&(!j.minzoom||j.minzoom<=Z)&&(!j.maxzoom||j.maxzoom>Z)){if(this._inProgressLayer||(this._inProgressLayer=new LayerPlacement(j)),this._inProgressLayer.continuePlacement(_[j.source],this.placement,this._showCollisionBoxes,j,shouldPausePlacement))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},PauseablePlacement.prototype.commit=function(i){return this.placement.commit(i),this.placement};var e8=512/i.EXTENT/2,TileLayerIndex=function(i,o,s){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=s;for(var _=0;_<o.length;_++){var F=o.get(_),N=F.key;this.indexedSymbolInstances[N]||(this.indexedSymbolInstances[N]=[]),this.indexedSymbolInstances[N].push({crossTileID:F.crossTileID,coord:this.getScaledCoordinates(F,i)})}};TileLayerIndex.prototype.getScaledCoordinates=function(o,s){var _=e8/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*i.EXTENT+o.anchorX)*_),y:Math.floor((s.canonical.y*i.EXTENT+o.anchorY)*_)}},TileLayerIndex.prototype.findMatches=function(i,o,s){for(var _=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z),F=0;F<i.length;F++){var N=i.get(F);if(!N.crossTileID){var j=this.indexedSymbolInstances[N.key];if(j)for(var Z=this.getScaledCoordinates(N,o),X=0;X<j.length;X+=1){var $=j[X];if(Math.abs($.coord.x-Z.x)<=_&&Math.abs($.coord.y-Z.y)<=_&&!s[$.crossTileID]){s[$.crossTileID]=!0,N.crossTileID=$.crossTileID;break}}}}};var CrossTileIDs=function(){this.maxCrossTileID=0};CrossTileIDs.prototype.generate=function(){return++this.maxCrossTileID};var CrossTileSymbolLayerIndex=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};CrossTileSymbolLayerIndex.prototype.handleWrapJump=function(i){var o=Math.round((i-this.lng)/360);if(0!==o)for(var s in this.indexes){var _=this.indexes[s],F={};for(var N in _){var j=_[N];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+o),F[j.tileID.key]=j}this.indexes[s]=F}this.lng=i},CrossTileSymbolLayerIndex.prototype.addBucket=function(i,o,s){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(var _=0;_<o.symbolInstances.length;_++)o.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});var F=this.usedCrossTileIDs[i.overscaledZ];for(var N in this.indexes){var j=this.indexes[N];if(Number(N)>i.overscaledZ)for(var Z in j){var X=j[Z];X.tileID.isChildOf(i)&&X.findMatches(o.symbolInstances,i,F)}else{var $=j[i.scaledTo(Number(N)).key];$&&$.findMatches(o.symbolInstances,i,F)}}for(var ee=0;ee<o.symbolInstances.length;ee++){var et=o.symbolInstances.get(ee);et.crossTileID||(et.crossTileID=s.generate(),F[et.crossTileID]=!0)}return void 0===this.indexes[i.overscaledZ]&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new TileLayerIndex(i,o.symbolInstances,o.bucketInstanceId),!0},CrossTileSymbolLayerIndex.prototype.removeBucketCrossTileIDs=function(i,o){for(var s in o.indexedSymbolInstances)for(var _=0,F=o.indexedSymbolInstances[s];_<F.length;_+=1){var N=F[_];delete this.usedCrossTileIDs[i][N.crossTileID]}},CrossTileSymbolLayerIndex.prototype.removeStaleBuckets=function(i){var o=!1;for(var s in this.indexes){var _=this.indexes[s];for(var F in _)i[_[F].bucketInstanceId]||(this.removeBucketCrossTileIDs(s,_[F]),delete _[F],o=!0)}return o};var CrossTileSymbolIndex=function(){this.layerIndexes={},this.crossTileIDs=new CrossTileIDs,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};CrossTileSymbolIndex.prototype.addLayer=function(i,o,s){var _=this.layerIndexes[i.id];void 0===_&&(_=this.layerIndexes[i.id]=new CrossTileSymbolLayerIndex);var F=!1,N={};_.handleWrapJump(s);for(var j=0;j<o.length;j+=1){var Z=o[j],X=Z.getBucket(i);X&&i.id===X.layerIds[0]&&(X.bucketInstanceId||(X.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(Z.tileID,X,this.crossTileIDs)&&(F=!0),N[X.bucketInstanceId]=!0)}return _.removeStaleBuckets(N)&&(F=!0),F},CrossTileSymbolIndex.prototype.pruneUnusedLayers=function(i){var o={};for(var s in i.forEach(function(i){o[i]=!0}),this.layerIndexes)o[s]||delete this.layerIndexes[s]};var emitValidationErrors=function(o,s){return i.emitValidationErrors(o,s&&s.filter(function(i){return"source.canvas"!==i.identifier}))},e7=i.pick(e5,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),e9=i.pick(e5,["setCenter","setZoom","setBearing","setPitch"]),te=emptyStyle(),tt=function(o){function Style(s,_){var F=this;void 0===_&&(_={}),o.call(this),this.map=s,this.dispatcher=new Dispatcher(getGlobalWorkerPool(),this),this.imageManager=new er,this.imageManager.setEventedParent(this),this.glyphManager=new GlyphManager(s._requestManager,_.localIdeographFontFamily),this.lineAtlas=new LineAtlas(256,512),this.crossTileSymbolIndex=new CrossTileSymbolIndex,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",i.getReferrer());var N=this;this._rtlTextPluginCallback=Style.registerForPluginStateChange(function(o){var s={pluginStatus:o.pluginStatus,pluginURL:o.pluginURL};N.dispatcher.broadcast("syncRTLPluginState",s,function(o,s){if(i.triggerPluginCompletionEvent(o),s&&s.every(function(i){return i}))for(var _ in N.sourceCaches)N.sourceCaches[_].reload()})}),this.on("data",function(i){if("source"===i.dataType&&"metadata"===i.sourceDataType){var o=F.sourceCaches[i.sourceId];if(o){var s=o.getSource();if(s&&s.vectorLayerIds)for(var _ in F._layers){var N=F._layers[_];N.source===s.id&&F._validateLayer(N)}}}})}return o&&(Style.__proto__=o),Style.prototype=Object.create(o&&o.prototype),Style.prototype.constructor=Style,Style.prototype.loadURL=function(o,s){var _=this;void 0===s&&(s={}),this.fire(new i.Event("dataloading",{dataType:"style"}));var F="boolean"==typeof s.validate?s.validate:!i.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,s.accessToken);var N=this.map._requestManager.transformRequest(o,i.ResourceType.Style);this._request=i.getJSON(N,function(o,s){_._request=null,o?_.fire(new i.ErrorEvent(o)):s&&_._load(s,F)})},Style.prototype.loadJSON=function(o,s){var _=this;void 0===s&&(s={}),this.fire(new i.Event("dataloading",{dataType:"style"})),this._request=i.browser.frame(function(){_._request=null,_._load(o,!1!==s.validate)})},Style.prototype.loadEmpty=function(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(te,!1)},Style.prototype._load=function(o,s){if(!(s&&emitValidationErrors(this,i.validateStyle(o)))){for(var _ in this._loaded=!0,this.stylesheet=o,o.sources)this.addSource(_,o.sources[_],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs);var F=derefLayers(this.stylesheet.layers);this._order=F.map(function(i){return i.id}),this._layers={},this._serializedLayers={};for(var N=0;N<F.length;N+=1){var j=F[N];(j=i.createStyleLayer(j)).setEventedParent(this,{layer:{id:j.id}}),this._layers[j.id]=j,this._serializedLayers[j.id]=j.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new el(this.stylesheet.light),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}},Style.prototype._loadSprite=function(o){var s=this;this._spriteRequest=loadSprite(o,this.map._requestManager,function(o,_){if(s._spriteRequest=null,o)s.fire(new i.ErrorEvent(o));else if(_)for(var F in _)s.imageManager.addImage(F,_[F]);s.imageManager.setLoaded(!0),s._availableImages=s.imageManager.listImages(),s.dispatcher.broadcast("setImages",s._availableImages),s.fire(new i.Event("data",{dataType:"style"}))})},Style.prototype._validateLayer=function(o){var s=this.sourceCaches[o.source];if(s){var _=o.sourceLayer;if(_){var F=s.getSource();("geojson"===F.type||F.vectorLayerIds&&-1===F.vectorLayerIds.indexOf(_))&&this.fire(new i.ErrorEvent(Error('Source layer "'+_+'" does not exist on source "'+F.id+'" as specified by style layer "'+o.id+'"')))}}},Style.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()},Style.prototype._serializeLayers=function(i){for(var o=[],s=0;s<i.length;s+=1){var _=i[s],F=this._layers[_];"custom"!==F.type&&o.push(F.serialize())}return o},Style.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(var o in this._layers)if(this._layers[o].hasTransition())return!0;return!1},Style.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading")},Style.prototype.update=function(o){if(this._loaded){var s=this._changed;if(this._changed){var _=Object.keys(this._updatedLayers),F=Object.keys(this._removedLayers);for(var N in(_.length||F.length)&&this._updateWorkerLayers(_,F),this._updatedSources){var j=this._updatedSources[N];"reload"===j?this._reloadSource(N):"clear"===j&&this._clearSource(N)}for(var Z in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Z].updateTransitions(o);this.light.updateTransitions(o),this._resetUpdates()}for(var X in this.sourceCaches)this.sourceCaches[X].used=!1;for(var $=0,ee=this._order;$<ee.length;$+=1){var et=ee[$],er=this._layers[et];er.recalculate(o,this._availableImages),!er.isHidden(o.zoom)&&er.source&&(this.sourceCaches[er.source].used=!0)}this.light.recalculate(o),this.z=o.zoom,s&&this.fire(new i.Event("data",{dataType:"style"}))}},Style.prototype._updateTilesForChangedImages=function(){var i=Object.keys(this._changedImages);if(i.length){for(var o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}},Style.prototype._updateWorkerLayers=function(i,o){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:o})},Style.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Style.prototype.setState=function(o){var s=this;if(this._checkLoaded(),emitValidationErrors(this,i.validateStyle(o)))return!1;(o=i.clone$1(o)).layers=derefLayers(o.layers);var _=diffStyles(this.serialize(),o).filter(function(i){return!(i.command in e9)});if(0===_.length)return!1;var F=_.filter(function(i){return!(i.command in e7)});if(F.length>0)throw Error("Unimplemented: "+F.map(function(i){return i.command}).join(", ")+".");return _.forEach(function(i){"setTransition"!==i.command&&s[i.command].apply(s,i.args)}),this.stylesheet=o,!0},Style.prototype.addImage=function(o,s){if(this.getImage(o))return this.fire(new i.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(o,s),this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.fire(new i.Event("data",{dataType:"style"}))},Style.prototype.updateImage=function(i,o){this.imageManager.updateImage(i,o)},Style.prototype.getImage=function(i){return this.imageManager.getImage(i)},Style.prototype.removeImage=function(o){if(!this.getImage(o))return this.fire(new i.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(o),this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.fire(new i.Event("data",{dataType:"style"}))},Style.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Style.prototype.addSource=function(o,s,_){var F=this;if(void 0===_&&(_={}),this._checkLoaded(),void 0!==this.sourceCaches[o])throw Error("There is already a source with this ID");if(!s.type)throw Error("The type property must be defined, but the only the following properties were given: "+Object.keys(s).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(i.validateStyle.source,"sources."+o,s,null,_))){this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);var N=this.sourceCaches[o]=new e1(o,s,this.dispatcher);N.style=this,N.setEventedParent(this,function(){return{isSourceLoaded:F.loaded(),source:N.serialize(),sourceId:o}}),N.onAdd(this.map),this._changed=!0}},Style.prototype.removeSource=function(o){if(this._checkLoaded(),void 0===this.sourceCaches[o])throw Error("There is no source with this ID");for(var s in this._layers)if(this._layers[s].source===o)return this.fire(new i.ErrorEvent(Error('Source "'+o+'" cannot be removed while layer "'+s+'" is using it.')));var _=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],_.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),_.setEventedParent(null),_.clearTiles(),_.onRemove&&_.onRemove(this.map),this._changed=!0},Style.prototype.setGeoJSONSourceData=function(i,o){this._checkLoaded(),this.sourceCaches[i].getSource().setData(o),this._changed=!0},Style.prototype.getSource=function(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()},Style.prototype.addLayer=function(o,s,_){void 0===_&&(_={}),this._checkLoaded();var F,N=o.id;if(this.getLayer(N)){this.fire(new i.ErrorEvent(Error('Layer with id "'+N+'" already exists on this map')));return}if("custom"===o.type){if(emitValidationErrors(this,i.validateCustomStyleLayer(o)))return;F=i.createStyleLayer(o)}else{if("object"==typeof o.source&&(this.addSource(N,o.source),o=i.clone$1(o),o=i.extend(o,{source:N})),this._validate(i.validateStyle.layer,"layers."+N,o,{arrayIndex:-1},_))return;F=i.createStyleLayer(o),this._validateLayer(F),F.setEventedParent(this,{layer:{id:N}}),this._serializedLayers[F.id]=F.serialize()}var j=s?this._order.indexOf(s):this._order.length;if(s&&-1===j){this.fire(new i.ErrorEvent(Error('Layer with id "'+s+'" does not exist on this map.')));return}if(this._order.splice(j,0,N),this._layerOrderChanged=!0,this._layers[N]=F,this._removedLayers[N]&&F.source&&"custom"!==F.type){var Z=this._removedLayers[N];delete this._removedLayers[N],Z.type!==F.type?this._updatedSources[F.source]="clear":(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause())}this._updateLayer(F),F.onAdd&&F.onAdd(this.map)},Style.prototype.moveLayer=function(o,s){if(this._checkLoaded(),this._changed=!0,!this._layers[o]){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot be moved.")));return}if(o!==s){var _=this._order.indexOf(o);this._order.splice(_,1);var F=s?this._order.indexOf(s):this._order.length;if(s&&-1===F){this.fire(new i.ErrorEvent(Error('Layer with id "'+s+'" does not exist on this map.')));return}this._order.splice(F,0,o),this._layerOrderChanged=!0}},Style.prototype.removeLayer=function(o){this._checkLoaded();var s=this._layers[o];if(!s){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot be removed.")));return}s.setEventedParent(null);var _=this._order.indexOf(o);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=s,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],s.onRemove&&s.onRemove(this.map)},Style.prototype.getLayer=function(i){return this._layers[i]},Style.prototype.hasLayer=function(i){return i in this._layers},Style.prototype.setLayerZoomRange=function(o,s,_){this._checkLoaded();var F=this.getLayer(o);if(!F){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot have zoom extent.")));return}(F.minzoom!==s||F.maxzoom!==_)&&(null!=s&&(F.minzoom=s),null!=_&&(F.maxzoom=_),this._updateLayer(F))},Style.prototype.setFilter=function(o,s,_){void 0===_&&(_={}),this._checkLoaded();var F=this.getLayer(o);if(!F){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot be filtered.")));return}if(!i.deepEqual(F.filter,s)){if(null==s){F.filter=void 0,this._updateLayer(F);return}this._validate(i.validateStyle.filter,"layers."+F.id+".filter",s,null,_)||(F.filter=i.clone$1(s),this._updateLayer(F))}},Style.prototype.getFilter=function(o){return i.clone$1(this.getLayer(o).filter)},Style.prototype.setLayoutProperty=function(o,s,_,F){void 0===F&&(F={}),this._checkLoaded();var N=this.getLayer(o);if(!N){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")));return}i.deepEqual(N.getLayoutProperty(s),_)||(N.setLayoutProperty(s,_,F),this._updateLayer(N))},Style.prototype.getLayoutProperty=function(o,s){var _=this.getLayer(o);if(!_){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style.")));return}return _.getLayoutProperty(s)},Style.prototype.setPaintProperty=function(o,s,_,F){void 0===F&&(F={}),this._checkLoaded();var N=this.getLayer(o);if(!N){this.fire(new i.ErrorEvent(Error("The layer '"+o+"' does not exist in the map's style and cannot be styled.")));return}i.deepEqual(N.getPaintProperty(s),_)||(N.setPaintProperty(s,_,F)&&this._updateLayer(N),this._changed=!0,this._updatedPaintProps[o]=!0)},Style.prototype.getPaintProperty=function(i,o){return this.getLayer(i).getPaintProperty(o)},Style.prototype.setFeatureState=function(o,s){this._checkLoaded();var _=o.source,F=o.sourceLayer,N=this.sourceCaches[_];if(void 0===N){this.fire(new i.ErrorEvent(Error("The source '"+_+"' does not exist in the map's style.")));return}var j=N.getSource().type;if("geojson"===j&&F){this.fire(new i.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if("vector"===j&&!F){this.fire(new i.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));return}void 0===o.id&&this.fire(new i.ErrorEvent(Error("The feature id parameter must be provided."))),N.setFeatureState(F,o.id,s)},Style.prototype.removeFeatureState=function(o,s){this._checkLoaded();var _=o.source,F=this.sourceCaches[_];if(void 0===F){this.fire(new i.ErrorEvent(Error("The source '"+_+"' does not exist in the map's style.")));return}var N=F.getSource().type,j="vector"===N?o.sourceLayer:void 0;if("vector"===N&&!j){this.fire(new i.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));return}if(s&&"string"!=typeof o.id&&"number"!=typeof o.id){this.fire(new i.ErrorEvent(Error("A feature id is requred to remove its specific state property.")));return}F.removeFeatureState(j,o.id,s)},Style.prototype.getFeatureState=function(o){this._checkLoaded();var s=o.source,_=o.sourceLayer,F=this.sourceCaches[s];if(void 0===F){this.fire(new i.ErrorEvent(Error("The source '"+s+"' does not exist in the map's style.")));return}if("vector"===F.getSource().type&&!_){this.fire(new i.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")));return}return void 0===o.id&&this.fire(new i.ErrorEvent(Error("The feature id parameter must be provided."))),F.getFeatureState(_,o.id)},Style.prototype.getTransition=function(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Style.prototype.serialize=function(){return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i.mapObject(this.sourceCaches,function(i){return i.serialize()}),layers:this._serializeLayers(this._order)},function(i){return void 0!==i})},Style.prototype._updateLayer=function(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&"raster"!==this.sourceCaches[i.source].getSource().type&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0},Style.prototype._flattenAndSortRenderedFeatures=function(i){for(var o=this,isLayer3D=function(i){return"fill-extrusion"===o._layers[i].type},s={},_=[],F=this._order.length-1;F>=0;F--){var N=this._order[F];if(isLayer3D(N)){s[N]=F;for(var j=0;j<i.length;j+=1){var Z=i[j][N];if(Z)for(var X=0;X<Z.length;X+=1){var $=Z[X];_.push($)}}}}_.sort(function(i,o){return o.intersectionZ-i.intersectionZ});for(var ee=[],et=this._order.length-1;et>=0;et--){var er=this._order[et];if(isLayer3D(er))for(var en=_.length-1;en>=0;en--){var ei=_[en].feature;if(s[ei.layer.id]<et)break;ee.push(ei),_.pop()}else for(var eo=0;eo<i.length;eo+=1){var es=i[eo][er];if(es)for(var el=0;el<es.length;el+=1){var ec=es[el];ee.push(ec.feature)}}}return ee},Style.prototype.queryRenderedFeatures=function(o,s,_){s&&s.filter&&this._validate(i.validateStyle.filter,"queryRenderedFeatures.filter",s.filter,null,s);var F={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new i.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var N=0,j=s.layers;N<j.length;N+=1){var Z=j[N],X=this._layers[Z];if(!X)return this.fire(new i.ErrorEvent(Error("The layer '"+Z+"' does not exist in the map's style and cannot be queried for features."))),[];F[X.source]=!0}}var $=[];for(var ee in s.availableImages=this._availableImages,this.sourceCaches)(!s.layers||F[ee])&&$.push(queryRenderedFeatures(this.sourceCaches[ee],this._layers,this._serializedLayers,o,s,_));return this.placement&&$.push(queryRenderedSymbols(this._layers,this._serializedLayers,this.sourceCaches,o,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures($)},Style.prototype.querySourceFeatures=function(o,s){s&&s.filter&&this._validate(i.validateStyle.filter,"querySourceFeatures.filter",s.filter,null,s);var _=this.sourceCaches[o];return _?querySourceFeatures(_,s):[]},Style.prototype.addSourceType=function(i,o,s){return Style.getSourceType(i)?s(Error('A source type called "'+i+'" already exists.')):(Style.setSourceType(i,o),o.workerSourceURL)?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:o.workerSourceURL},s):s(null,null)},Style.prototype.getLight=function(){return this.light.getLight()},Style.prototype.setLight=function(o,s){void 0===s&&(s={}),this._checkLoaded();var _=this.light.getLight(),F=!1;for(var N in o)if(!i.deepEqual(o[N],_[N])){F=!0;break}if(F){var j={now:i.browser.now(),transition:i.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,s),this.light.updateTransitions(j)}},Style.prototype._validate=function(o,s,_,F,N){return void 0===N&&(N={}),(!N||!1!==N.validate)&&emitValidationErrors(this,o.call(i.validateStyle,i.extend({key:s,style:this.serialize(),value:_,styleSpec:i.styleSpec},F)))},Style.prototype._remove=function(){for(var o in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[o].setEventedParent(null);for(var s in this.sourceCaches)this.sourceCaches[s].clearTiles(),this.sourceCaches[s].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Style.prototype._clearSource=function(i){this.sourceCaches[i].clearTiles()},Style.prototype._reloadSource=function(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()},Style.prototype._updateSources=function(i){for(var o in this.sourceCaches)this.sourceCaches[o].update(i)},Style.prototype._generateCollisionBoxes=function(){for(var i in this.sourceCaches)this._reloadSource(i)},Style.prototype._updatePlacement=function(o,s,_,F,N){void 0===N&&(N=!1);for(var j=!1,Z=!1,X={},$=0,ee=this._order;$<ee.length;$+=1){var et=ee[$],er=this._layers[et];if("symbol"===er.type){if(!X[er.source]){var en=this.sourceCaches[er.source];X[er.source]=en.getRenderableIds(!0).map(function(i){return en.getTileByID(i)}).sort(function(i,o){return o.tileID.overscaledZ-i.tileID.overscaledZ||(i.tileID.isLessThan(o.tileID)?-1:1)})}var ei=this.crossTileSymbolIndex.addLayer(er,X[er.source],o.center.lng);j=j||ei}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((N=N||this._layerOrderChanged||0===_)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.browser.now(),o.zoom))&&(this.pauseablePlacement=new PauseablePlacement(o,this._order,N,s,_,F,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,X),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.browser.now()),Z=!0),j&&this.pauseablePlacement.placement.setStale()),Z||j)for(var eo=0,es=this._order;eo<es.length;eo+=1){var el=es[eo],ec=this._layers[el];"symbol"===ec.type&&this.placement.updateLayerOpacities(ec,X[ec.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.browser.now())},Style.prototype._releaseSymbolFadeTiles=function(){for(var i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()},Style.prototype.getImages=function(i,o,s){this.imageManager.getImages(o.icons,s),this._updateTilesForChangedImages();var _=this.sourceCaches[o.source];_&&_.setDependencies(o.tileID.key,o.type,o.icons)},Style.prototype.getGlyphs=function(i,o,s){this.glyphManager.getGlyphs(o.stacks,s)},Style.prototype.getResource=function(o,s,_){return i.makeRequest(s,_)},Style}(i.Evented);tt.getSourceType=function(i){return ey[i]},tt.setSourceType=function(i,o){ey[i]=o},tt.registerForPluginStateChange=i.registerForPluginStateChange;var tr=i.createLayout([{name:"a_pos",type:"Int16",components:2}]),tn=compile("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}");function compile(i,o){var s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_={};return{fragmentSource:i=i.replace(s,function(i,o,s,F,N){return(_[N]=!0,"define"===o)?"\n#ifndef HAS_UNIFORM_u_"+N+"\nvarying "+s+" "+F+" "+N+";\n#else\nuniform "+s+" "+F+" u_"+N+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+N+"\n    "+s+" "+F+" "+N+" = u_"+N+";\n#endif\n"}),vertexSource:o=o.replace(s,function(i,o,s,F,N){var j="float"===F?"vec2":"vec4",Z=N.match(/color/)?"color":j;return _[N]?"define"===o?"\n#ifndef HAS_UNIFORM_u_"+N+"\nuniform lowp float u_"+N+"_t;\nattribute "+s+" "+j+" a_"+N+";\nvarying "+s+" "+F+" "+N+";\n#else\nuniform "+s+" "+F+" u_"+N+";\n#endif\n":"vec4"===Z?"\n#ifndef HAS_UNIFORM_u_"+N+"\n    "+N+" = a_"+N+";\n#else\n    "+s+" "+F+" "+N+" = u_"+N+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+N+"\n    "+N+" = unpack_mix_"+Z+"(a_"+N+", u_"+N+"_t);\n#else\n    "+s+" "+F+" "+N+" = u_"+N+";\n#endif\n":"define"===o?"\n#ifndef HAS_UNIFORM_u_"+N+"\nuniform lowp float u_"+N+"_t;\nattribute "+s+" "+j+" a_"+N+";\n#else\nuniform "+s+" "+F+" u_"+N+";\n#endif\n":"vec4"===Z?"\n#ifndef HAS_UNIFORM_u_"+N+"\n    "+s+" "+F+" "+N+" = a_"+N+";\n#else\n    "+s+" "+F+" "+N+" = u_"+N+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+N+"\n    "+s+" "+F+" "+N+" = unpack_mix_"+Z+"(a_"+N+", u_"+N+"_t);\n#else\n    "+s+" "+F+" "+N+" = u_"+N+";\n#endif\n"})}}var ta=Object.freeze({__proto__:null,prelude:tn,background:compile("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:compile("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:compile("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:compile("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:compile("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:compile("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:compile("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:compile("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:compile("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:compile("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:compile("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:compile("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:compile("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:compile("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:compile("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:compile("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:compile("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:compile("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lineGradient:compile("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),linePattern:compile("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:compile("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:compile("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:compile("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),symbolSDF:compile("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:compile("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}")}),VertexArrayObject=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};VertexArrayObject.prototype.bind=function(i,o,s,_,F,N,j,Z){this.context=i;for(var X=this.boundPaintVertexBuffers.length!==_.length,$=0;!X&&$<_.length;$++)this.boundPaintVertexBuffers[$]!==_[$]&&(X=!0);var ee=!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==s||X||this.boundIndexBuffer!==F||this.boundVertexOffset!==N||this.boundDynamicVertexBuffer!==j||this.boundDynamicVertexBuffer2!==Z;!i.extVertexArrayObject||ee?this.freshBind(o,s,_,F,N,j,Z):(i.bindVertexArrayOES.set(this.vao),j&&j.bind(),F&&F.dynamicDraw&&F.bind(),Z&&Z.bind())},VertexArrayObject.prototype.freshBind=function(i,o,s,_,F,N,j){var Z,X=i.numAttributes,$=this.context,ee=$.gl;if($.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$.extVertexArrayObject.createVertexArrayOES(),$.bindVertexArrayOES.set(this.vao),Z=0,this.boundProgram=i,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=s,this.boundIndexBuffer=_,this.boundVertexOffset=F,this.boundDynamicVertexBuffer=N,this.boundDynamicVertexBuffer2=j;else{Z=$.currentNumAttributes||0;for(var et=X;et<Z;et++)ee.disableVertexAttribArray(et)}o.enableAttributes(ee,i);for(var er=0;er<s.length;er+=1)s[er].enableAttributes(ee,i);N&&N.enableAttributes(ee,i),j&&j.enableAttributes(ee,i),o.bind(),o.setVertexAttribPointers(ee,i,F);for(var en=0;en<s.length;en+=1){var ei=s[en];ei.bind(),ei.setVertexAttribPointers(ee,i,F)}N&&(N.bind(),N.setVertexAttribPointers(ee,i,F)),_&&_.bind(),j&&(j.bind(),j.setVertexAttribPointers(ee,i,F)),$.currentNumAttributes=X},VertexArrayObject.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Program$1=function(i,o,s,_,F){var N=i.gl;this.program=N.createProgram();var j=s?s.defines():[];F&&j.push("#define OVERDRAW_INSPECTOR;");var Z=j.concat(tn.fragmentSource,o.fragmentSource).join("\n"),X=j.concat(tn.vertexSource,o.vertexSource).join("\n"),$=N.createShader(N.FRAGMENT_SHADER);if(N.isContextLost()){this.failedToCreate=!0;return}N.shaderSource($,Z),N.compileShader($),N.attachShader(this.program,$);var ee=N.createShader(N.VERTEX_SHADER);if(N.isContextLost()){this.failedToCreate=!0;return}N.shaderSource(ee,X),N.compileShader(ee),N.attachShader(this.program,ee);for(var et=s?s.layoutAttributes:[],er=0;er<et.length;er++)N.bindAttribLocation(this.program,er,et[er].name);N.linkProgram(this.program),N.deleteShader(ee),N.deleteShader($),this.numAttributes=N.getProgramParameter(this.program,N.ACTIVE_ATTRIBUTES),this.attributes={};for(var en={},ei=0;ei<this.numAttributes;ei++){var eo=N.getActiveAttrib(this.program,ei);eo&&(this.attributes[eo.name]=N.getAttribLocation(this.program,eo.name))}for(var es=N.getProgramParameter(this.program,N.ACTIVE_UNIFORMS),el=0;el<es;el++){var ec=N.getActiveUniform(this.program,el);ec&&(en[ec.name]=N.getUniformLocation(this.program,ec.name))}this.fixedUniforms=_(i,en),this.binderUniforms=s?s.getUniforms(i,en):[]};function patternUniformValues(i,o,s){var _=1/pixelsToTileUnits(s,1,o.transform.tileZoom),F=Math.pow(2,s.tileID.overscaledZ),N=s.tileSize*Math.pow(2,o.transform.tileZoom)/F,j=N*(s.tileID.canonical.x+s.tileID.wrap*F),Z=N*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[_,i.fromScale,i.toScale],u_fade:i.t,u_pixel_coord_upper:[j>>16,Z>>16],u_pixel_coord_lower:[65535&j,65535&Z]}}function bgPatternUniformValues(i,o,s,_){var F=s.imageManager.getPattern(i.from.toString()),N=s.imageManager.getPattern(i.to.toString()),j=s.imageManager.getPixelSize(),Z=j.width,X=j.height,$=Math.pow(2,_.tileID.overscaledZ),ee=_.tileSize*Math.pow(2,s.transform.tileZoom)/$,et=ee*(_.tileID.canonical.x+_.tileID.wrap*$),er=ee*_.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[Z,X],u_mix:o.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:o.fromScale,u_scale_b:o.toScale,u_tile_units_to_pixels:1/pixelsToTileUnits(_,1,s.transform.tileZoom),u_pixel_coord_upper:[et>>16,er>>16],u_pixel_coord_lower:[65535&et,65535&er]}}Program$1.prototype.draw=function(i,o,s,_,F,N,j,Z,X,$,ee,et,er,en,ei,eo){var es,el=i.gl;if(!this.failedToCreate){for(var ec in i.program.set(this.program),i.setDepthMode(s),i.setStencilMode(_),i.setColorMode(F),i.setCullFace(N),this.fixedUniforms)this.fixedUniforms[ec].set(j[ec]);en&&en.setUniforms(i,this.binderUniforms,et,{zoom:er});for(var eu=((es={})[el.LINES]=2,es[el.TRIANGLES]=3,es[el.LINE_STRIP]=1,es)[o],ef=0,ed=ee.get();ef<ed.length;ef+=1){var eh=ed[ef],ep=eh.vaos||(eh.vaos={});(ep[Z]||(ep[Z]=new VertexArrayObject)).bind(i,this,X,en?en.getPaintVertexBuffers():[],$,eh.vertexOffset,ei,eo),el.drawElements(o,eh.primitiveLength*eu,el.UNSIGNED_SHORT,eh.primitiveOffset*eu*2)}}};var fillExtrusionUniformValues=function(o,s,_,F){var N=s.style.light,j=N.properties.get("position"),Z=[j.x,j.y,j.z],X=i.create$1();"viewport"===N.properties.get("anchor")&&i.fromRotation(X,-s.transform.angle),i.transformMat3(Z,Z,X);var $=N.properties.get("color");return{u_matrix:o,u_lightpos:Z,u_lightintensity:N.properties.get("intensity"),u_lightcolor:[$.r,$.g,$.b],u_vertical_gradient:+_,u_opacity:F}},fillUniformValues=function(i){return{u_matrix:i}},fillPatternUniformValues=function(o,s,_,F){return i.extend(fillUniformValues(o),patternUniformValues(_,s,F))},circleUniformValues=function(o,s,_,F){var N,j,Z=o.transform;if("map"===F.paint.get("circle-pitch-alignment")){var X=pixelsToTileUnits(_,1,Z.zoom);N=!0,j=[X,X]}else N=!1,j=Z.pixelsToGLUnits;return{u_camera_to_center_distance:Z.cameraToCenterDistance,u_scale_with_map:+("map"===F.paint.get("circle-pitch-scale")),u_matrix:o.translatePosMatrix(s.posMatrix,_,F.paint.get("circle-translate"),F.paint.get("circle-translate-anchor")),u_pitch_with_map:+N,u_device_pixel_ratio:i.browser.devicePixelRatio,u_extrude_scale:j}},collisionUniformValues=function(i,o,s){var _=pixelsToTileUnits(s,1,o.zoom),F=Math.pow(2,o.zoom-s.tileID.overscaledZ),N=s.tileID.overscaleFactor();return{u_matrix:i,u_camera_to_center_distance:o.cameraToCenterDistance,u_pixels_to_tile_units:_,u_extrude_scale:[o.pixelsToGLUnits[0]/(_*F),o.pixelsToGLUnits[1]/(_*F)],u_overscale_factor:N}},debugUniformValues=function(i,o,s){return void 0===s&&(s=1),{u_matrix:i,u_color:o,u_overlay:0,u_overlay_scale:s}},clippingMaskUniformValues=function(i){return{u_matrix:i}},heatmapTextureUniformValues=function(o,s,_,F){var N=i.create();i.ortho(N,0,o.width,o.height,0,0,1);var j=o.context.gl;return{u_matrix:N,u_world:[j.drawingBufferWidth,j.drawingBufferHeight],u_image:_,u_color_ramp:F,u_opacity:s.paint.get("heatmap-opacity")}},hillshadeUniformValues=function(i,o,s){var _=s.paint.get("hillshade-shadow-color"),F=s.paint.get("hillshade-highlight-color"),N=s.paint.get("hillshade-accent-color"),j=s.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===s.paint.get("hillshade-illumination-anchor")&&(j-=i.transform.angle);var Z=!i.options.moving;return{u_matrix:i.transform.calculatePosMatrix(o.tileID.toUnwrapped(),Z),u_image:0,u_latrange:getTileLatRange(i,o.tileID),u_light:[s.paint.get("hillshade-exaggeration"),j],u_shadow:_,u_highlight:F,u_accent:N}},hillshadeUniformPrepareValues=function(o,s,_){var F=s.stride,N=i.create();return i.ortho(N,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(N,N,[0,-i.EXTENT,0]),{u_matrix:N,u_image:1,u_dimension:[F,F],u_zoom:o.overscaledZ,u_maxzoom:_,u_unpack:s.getUnpackVector()}};function getTileLatRange(o,s){var _=Math.pow(2,s.canonical.z),F=s.canonical.y;return[new i.MercatorCoordinate(0,F/_).toLngLat().lat,new i.MercatorCoordinate(0,(F+1)/_).toLngLat().lat]}var lineUniformValues=function(o,s,_){var F=o.transform;return{u_matrix:calculateMatrix(o,s,_),u_ratio:1/pixelsToTileUnits(s,1,F.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]]}},linePatternUniformValues=function(o,s,_,F){var N=o.transform,j=calculateTileRatio(s,N);return{u_matrix:calculateMatrix(o,s,_),u_texsize:s.imageAtlasTexture.size,u_ratio:1/pixelsToTileUnits(s,1,N.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_image:0,u_scale:[j,F.fromScale,F.toScale],u_fade:F.t,u_units_to_pixels:[1/N.pixelsToGLUnits[0],1/N.pixelsToGLUnits[1]]}},lineSDFUniformValues=function(o,s,_,F,N){var j=o.transform,Z=o.lineAtlas,X=calculateTileRatio(s,j),$="round"===_.layout.get("line-cap"),ee=Z.getDash(F.from,$),et=Z.getDash(F.to,$),er=ee.width*N.fromScale,en=et.width*N.toScale;return i.extend(lineUniformValues(o,s,_),{u_patternscale_a:[X/er,-ee.height/2],u_patternscale_b:[X/en,-et.height/2],u_sdfgamma:Z.width/(256*Math.min(er,en)*i.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:ee.y,u_tex_y_b:et.y,u_mix:N.t})};function calculateTileRatio(i,o){return 1/pixelsToTileUnits(i,1,o.tileZoom)}function calculateMatrix(i,o,s){return i.translatePosMatrix(o.tileID.posMatrix,o,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}function spinWeights(i){var o=Math.sin(i*=Math.PI/180),s=Math.cos(i);return[(2*s+1)/3,(-Math.sqrt(3)*o-s+1)/3,(Math.sqrt(3)*o-s+1)/3]}function contrastFactor(i){return i>0?1/(1-i):1+i}function saturationFactor(i){return i>0?1-1/(1.001-i):-i}var symbolIconUniformValues=function(i,o,s,_,F,N,j,Z,X,$){var ee=F.transform;return{u_is_size_zoom_constant:+("constant"===i||"source"===i),u_is_size_feature_constant:+("constant"===i||"camera"===i),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pitch:ee.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:ee.width/ee.height,u_fade_change:F.options.fadeDuration?F.symbolFadeChange:1,u_matrix:N,u_label_plane_matrix:j,u_coord_matrix:Z,u_is_text:+X,u_pitch_with_map:+_,u_texsize:$,u_texture:0}},symbolSDFUniformValues=function(o,s,_,F,N,j,Z,X,$,ee,et){var er=N.transform;return i.extend(symbolIconUniformValues(o,s,_,F,N,j,Z,X,$,ee),{u_gamma_scale:F?Math.cos(er._pitch)*er.cameraToCenterDistance:1,u_device_pixel_ratio:i.browser.devicePixelRatio,u_is_halo:+et})},ti={fillExtrusion:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_lightpos:new i.Uniform3f(o,s.u_lightpos),u_lightintensity:new i.Uniform1f(o,s.u_lightintensity),u_lightcolor:new i.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new i.Uniform1f(o,s.u_vertical_gradient),u_opacity:new i.Uniform1f(o,s.u_opacity)}},fillExtrusionPattern:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_lightpos:new i.Uniform3f(o,s.u_lightpos),u_lightintensity:new i.Uniform1f(o,s.u_lightintensity),u_lightcolor:new i.Uniform3f(o,s.u_lightcolor),u_vertical_gradient:new i.Uniform1f(o,s.u_vertical_gradient),u_height_factor:new i.Uniform1f(o,s.u_height_factor),u_image:new i.Uniform1i(o,s.u_image),u_texsize:new i.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new i.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new i.Uniform3f(o,s.u_scale),u_fade:new i.Uniform1f(o,s.u_fade),u_opacity:new i.Uniform1f(o,s.u_opacity)}},fill:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix)}},fillPattern:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_image:new i.Uniform1i(o,s.u_image),u_texsize:new i.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new i.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new i.Uniform3f(o,s.u_scale),u_fade:new i.Uniform1f(o,s.u_fade)}},fillOutline:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_world:new i.Uniform2f(o,s.u_world)}},fillOutlinePattern:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_world:new i.Uniform2f(o,s.u_world),u_image:new i.Uniform1i(o,s.u_image),u_texsize:new i.Uniform2f(o,s.u_texsize),u_pixel_coord_upper:new i.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(o,s.u_pixel_coord_lower),u_scale:new i.Uniform3f(o,s.u_scale),u_fade:new i.Uniform1f(o,s.u_fade)}},circle:function(o,s){return{u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_scale_with_map:new i.Uniform1i(o,s.u_scale_with_map),u_pitch_with_map:new i.Uniform1i(o,s.u_pitch_with_map),u_extrude_scale:new i.Uniform2f(o,s.u_extrude_scale),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_matrix:new i.UniformMatrix4f(o,s.u_matrix)}},collisionBox:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_pixels_to_tile_units:new i.Uniform1f(o,s.u_pixels_to_tile_units),u_extrude_scale:new i.Uniform2f(o,s.u_extrude_scale),u_overscale_factor:new i.Uniform1f(o,s.u_overscale_factor)}},collisionCircle:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_inv_matrix:new i.UniformMatrix4f(o,s.u_inv_matrix),u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_viewport_size:new i.Uniform2f(o,s.u_viewport_size)}},debug:function(o,s){return{u_color:new i.UniformColor(o,s.u_color),u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_overlay:new i.Uniform1i(o,s.u_overlay),u_overlay_scale:new i.Uniform1f(o,s.u_overlay_scale)}},clippingMask:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix)}},heatmap:function(o,s){return{u_extrude_scale:new i.Uniform1f(o,s.u_extrude_scale),u_intensity:new i.Uniform1f(o,s.u_intensity),u_matrix:new i.UniformMatrix4f(o,s.u_matrix)}},heatmapTexture:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_world:new i.Uniform2f(o,s.u_world),u_image:new i.Uniform1i(o,s.u_image),u_color_ramp:new i.Uniform1i(o,s.u_color_ramp),u_opacity:new i.Uniform1f(o,s.u_opacity)}},hillshade:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_image:new i.Uniform1i(o,s.u_image),u_latrange:new i.Uniform2f(o,s.u_latrange),u_light:new i.Uniform2f(o,s.u_light),u_shadow:new i.UniformColor(o,s.u_shadow),u_highlight:new i.UniformColor(o,s.u_highlight),u_accent:new i.UniformColor(o,s.u_accent)}},hillshadePrepare:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_image:new i.Uniform1i(o,s.u_image),u_dimension:new i.Uniform2f(o,s.u_dimension),u_zoom:new i.Uniform1f(o,s.u_zoom),u_maxzoom:new i.Uniform1f(o,s.u_maxzoom),u_unpack:new i.Uniform4f(o,s.u_unpack)}},line:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_ratio:new i.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(o,s.u_units_to_pixels)}},lineGradient:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_ratio:new i.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(o,s.u_units_to_pixels),u_image:new i.Uniform1i(o,s.u_image)}},linePattern:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_texsize:new i.Uniform2f(o,s.u_texsize),u_ratio:new i.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_image:new i.Uniform1i(o,s.u_image),u_units_to_pixels:new i.Uniform2f(o,s.u_units_to_pixels),u_scale:new i.Uniform3f(o,s.u_scale),u_fade:new i.Uniform1f(o,s.u_fade)}},lineSDF:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_ratio:new i.Uniform1f(o,s.u_ratio),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(o,s.u_units_to_pixels),u_patternscale_a:new i.Uniform2f(o,s.u_patternscale_a),u_patternscale_b:new i.Uniform2f(o,s.u_patternscale_b),u_sdfgamma:new i.Uniform1f(o,s.u_sdfgamma),u_image:new i.Uniform1i(o,s.u_image),u_tex_y_a:new i.Uniform1f(o,s.u_tex_y_a),u_tex_y_b:new i.Uniform1f(o,s.u_tex_y_b),u_mix:new i.Uniform1f(o,s.u_mix)}},raster:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_tl_parent:new i.Uniform2f(o,s.u_tl_parent),u_scale_parent:new i.Uniform1f(o,s.u_scale_parent),u_buffer_scale:new i.Uniform1f(o,s.u_buffer_scale),u_fade_t:new i.Uniform1f(o,s.u_fade_t),u_opacity:new i.Uniform1f(o,s.u_opacity),u_image0:new i.Uniform1i(o,s.u_image0),u_image1:new i.Uniform1i(o,s.u_image1),u_brightness_low:new i.Uniform1f(o,s.u_brightness_low),u_brightness_high:new i.Uniform1f(o,s.u_brightness_high),u_saturation_factor:new i.Uniform1f(o,s.u_saturation_factor),u_contrast_factor:new i.Uniform1f(o,s.u_contrast_factor),u_spin_weights:new i.Uniform3f(o,s.u_spin_weights)}},symbolIcon:function(o,s){return{u_is_size_zoom_constant:new i.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new i.Uniform1f(o,s.u_size_t),u_size:new i.Uniform1f(o,s.u_size),u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new i.Uniform1f(o,s.u_pitch),u_rotate_symbol:new i.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new i.Uniform1f(o,s.u_fade_change),u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new i.Uniform1i(o,s.u_is_text),u_pitch_with_map:new i.Uniform1i(o,s.u_pitch_with_map),u_texsize:new i.Uniform2f(o,s.u_texsize),u_texture:new i.Uniform1i(o,s.u_texture)}},symbolSDF:function(o,s){return{u_is_size_zoom_constant:new i.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new i.Uniform1f(o,s.u_size_t),u_size:new i.Uniform1f(o,s.u_size),u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new i.Uniform1f(o,s.u_pitch),u_rotate_symbol:new i.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new i.Uniform1f(o,s.u_fade_change),u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new i.Uniform1i(o,s.u_is_text),u_pitch_with_map:new i.Uniform1i(o,s.u_pitch_with_map),u_texsize:new i.Uniform2f(o,s.u_texsize),u_texture:new i.Uniform1i(o,s.u_texture),u_gamma_scale:new i.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(o,s.u_is_halo)}},symbolTextAndIcon:function(o,s){return{u_is_size_zoom_constant:new i.Uniform1i(o,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(o,s.u_is_size_feature_constant),u_size_t:new i.Uniform1f(o,s.u_size_t),u_size:new i.Uniform1f(o,s.u_size),u_camera_to_center_distance:new i.Uniform1f(o,s.u_camera_to_center_distance),u_pitch:new i.Uniform1f(o,s.u_pitch),u_rotate_symbol:new i.Uniform1i(o,s.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(o,s.u_aspect_ratio),u_fade_change:new i.Uniform1f(o,s.u_fade_change),u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(o,s.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(o,s.u_coord_matrix),u_is_text:new i.Uniform1i(o,s.u_is_text),u_pitch_with_map:new i.Uniform1i(o,s.u_pitch_with_map),u_texsize:new i.Uniform2f(o,s.u_texsize),u_texsize_icon:new i.Uniform2f(o,s.u_texsize_icon),u_texture:new i.Uniform1i(o,s.u_texture),u_texture_icon:new i.Uniform1i(o,s.u_texture_icon),u_gamma_scale:new i.Uniform1f(o,s.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(o,s.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(o,s.u_is_halo)}},background:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_opacity:new i.Uniform1f(o,s.u_opacity),u_color:new i.UniformColor(o,s.u_color)}},backgroundPattern:function(o,s){return{u_matrix:new i.UniformMatrix4f(o,s.u_matrix),u_opacity:new i.Uniform1f(o,s.u_opacity),u_image:new i.Uniform1i(o,s.u_image),u_pattern_tl_a:new i.Uniform2f(o,s.u_pattern_tl_a),u_pattern_br_a:new i.Uniform2f(o,s.u_pattern_br_a),u_pattern_tl_b:new i.Uniform2f(o,s.u_pattern_tl_b),u_pattern_br_b:new i.Uniform2f(o,s.u_pattern_br_b),u_texsize:new i.Uniform2f(o,s.u_texsize),u_mix:new i.Uniform1f(o,s.u_mix),u_pattern_size_a:new i.Uniform2f(o,s.u_pattern_size_a),u_pattern_size_b:new i.Uniform2f(o,s.u_pattern_size_b),u_scale_a:new i.Uniform1f(o,s.u_scale_a),u_scale_b:new i.Uniform1f(o,s.u_scale_b),u_pixel_coord_upper:new i.Uniform2f(o,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(o,s.u_pixel_coord_lower),u_tile_units_to_pixels:new i.Uniform1f(o,s.u_tile_units_to_pixels)}}};function drawCollisionDebug(o,s,F,N,j,Z,X){for(var $=o.context,ee=$.gl,et=o.useProgram("collisionBox"),er=[],en=0,ei=0,eo=0;eo<N.length;eo++){var es=N[eo],el=s.getTile(es),ec=el.getBucket(F);if(ec){var eu=es.posMatrix;(0!==j[0]||0!==j[1])&&(eu=o.translatePosMatrix(es.posMatrix,el,j,Z));var ef=X?ec.textCollisionBox:ec.iconCollisionBox,ed=ec.collisionCircleArray;if(ed.length>0){var eh=i.create(),ep=eu;i.mul(eh,ec.placementInvProjMatrix,o.transform.glCoordMatrix),i.mul(eh,eh,ec.placementViewportMatrix),er.push({circleArray:ed,circleOffset:ei,transform:ep,invTransform:eh}),en+=ed.length/4,ei=en}ef&&et.draw($,ee.LINES,DepthMode.disabled,StencilMode.disabled,o.colorModeForRenderPass(),CullFaceMode.disabled,collisionUniformValues(eu,o.transform,el),F.id,ef.layoutVertexBuffer,ef.indexBuffer,ef.segments,null,o.transform.zoom,null,null,ef.collisionVertexBuffer)}}if(X&&er.length){var eg=o.useProgram("collisionCircle"),em=new i.StructArrayLayout2f1f2i16;em.resize(4*en),em._trim();for(var ey=0,ev=0;ev<er.length;ev+=1)for(var ex=er[ev],e_=0;e_<ex.circleArray.length/4;e_++){var ew=4*e_,eT=ex.circleArray[ew+0],ek=ex.circleArray[ew+1],eA=ex.circleArray[ew+2],eS=ex.circleArray[ew+3];em.emplace(ey++,eT,ek,eA,eS,0),em.emplace(ey++,eT,ek,eA,eS,1),em.emplace(ey++,eT,ek,eA,eS,2),em.emplace(ey++,eT,ek,eA,eS,3)}(!_||_.length<2*en)&&(_=createQuadTriangles(en));for(var eM=$.createIndexBuffer(_,!0),eC=$.createVertexBuffer(em,i.collisionCircleLayout.members,!0),eE=0;eE<er.length;eE+=1){var eL,eP=er[eE],eI={u_matrix:eP.transform,u_inv_matrix:eP.invTransform,u_camera_to_center_distance:(eL=o.transform).cameraToCenterDistance,u_viewport_size:[eL.width,eL.height]};eg.draw($,ee.TRIANGLES,DepthMode.disabled,StencilMode.disabled,o.colorModeForRenderPass(),CullFaceMode.disabled,eI,F.id,eC,eM,i.SegmentVector.simpleSegment(0,2*eP.circleOffset,eP.circleArray.length,eP.circleArray.length/2),null,o.transform.zoom,null,null,null)}eC.destroy(),eM.destroy()}}function createQuadTriangles(o){var s=2*o,_=new i.StructArrayLayout3ui6;_.resize(s),_._trim();for(var F=0;F<s;F++){var N=6*F;_.uint16[N+0]=4*F+0,_.uint16[N+1]=4*F+1,_.uint16[N+2]=4*F+2,_.uint16[N+3]=4*F+2,_.uint16[N+4]=4*F+3,_.uint16[N+5]=4*F+0}return _}var to=i.identity(new Float32Array(16));function drawSymbols(i,o,s,_,F){if("translucent"===i.renderPass){var N=StencilMode.disabled,j=i.colorModeForRenderPass();s.layout.get("text-variable-anchor")&&updateVariableAnchors(_,i,s,o,s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),F),0!==s.paint.get("icon-opacity").constantOr(1)&&drawLayerSymbols(i,o,s,_,!1,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),s.layout.get("icon-rotation-alignment"),s.layout.get("icon-pitch-alignment"),s.layout.get("icon-keep-upright"),N,j),0!==s.paint.get("text-opacity").constantOr(1)&&drawLayerSymbols(i,o,s,_,!0,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),s.layout.get("text-keep-upright"),N,j),o.map.showCollisionBoxes&&(drawCollisionDebug(i,o,s,_,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),!0),drawCollisionDebug(i,o,s,_,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),!1))}}function calculateVariableRenderShift(o,s,_,F,N,j){var Z=i.getAnchorAlignment(o),X=Z.horizontalAlign,$=Z.verticalAlign,ee=i.evaluateVariableOffset(o,F);return new i.Point((-(X-.5)*s/N+ee[0])*j,(-($-.5)*_/N+ee[1])*j)}function updateVariableAnchors(o,s,_,F,N,j,Z){for(var X=s.transform,$="map"===N,ee="map"===j,et=0;et<o.length;et+=1){var er=o[et],en=F.getTile(er),ei=en.getBucket(_);if(ei&&ei.text&&ei.text.segments.get().length){var eo=ei.textSizeData,es=i.evaluateSizeForZoom(eo,X.zoom),el=pixelsToTileUnits(en,1,s.transform.zoom),ec=getLabelPlaneMatrix(er.posMatrix,ee,$,s.transform,el),eu="none"!==_.layout.get("icon-text-fit")&&ei.hasIconData();if(es){var ef=Math.pow(2,X.zoom-en.tileID.overscaledZ);updateVariableAnchorsForBucket(ei,$,ee,Z,i.symbolSize,X,ec,er.posMatrix,ef,es,eu)}}}}function updateVariableAnchorsForBucket(o,s,_,F,N,j,Z,X,$,ee,et){var er=o.text.placedSymbolArray,en=o.text.dynamicLayoutVertexArray,ei=o.icon.dynamicLayoutVertexArray,eo={};en.clear();for(var es=0;es<er.length;es++){var el=er.get(es),ec=o.allowVerticalPlacement&&!el.placedOrientation,eu=el.hidden||!el.crossTileID||ec?null:F[el.crossTileID];if(eu){var ef=new i.Point(el.anchorX,el.anchorY),ed=project(ef,_?X:Z),eh=getPerspectiveRatio(j.cameraToCenterDistance,ed.signedDistanceFromCamera),ep=N.evaluateSizeForFeature(o.textSizeData,ee,el)*eh/i.ONE_EM;_&&(ep*=o.tilePixelRatio/$);for(var eg=eu.width,em=eu.height,ey=calculateVariableRenderShift(eu.anchor,eg,em,eu.textOffset,eu.textBoxScale,ep),ev=_?project(ef.add(ey),Z).point:ed.point.add(s?ey.rotate(-j.angle):ey),ex=o.allowVerticalPlacement&&el.placedOrientation===i.WritingMode.vertical?Math.PI/2:0,e_=0;e_<el.numGlyphs;e_++)i.addDynamicAttributes(en,ev,ex);et&&el.associatedIconIndex>=0&&(eo[el.associatedIconIndex]={shiftedAnchor:ev,angle:ex})}else hideGlyphs(el.numGlyphs,en)}if(et){ei.clear();for(var ew=o.icon.placedSymbolArray,eT=0;eT<ew.length;eT++){var ek=ew.get(eT);if(ek.hidden)hideGlyphs(ek.numGlyphs,ei);else{var eA=eo[eT];if(eA)for(var eS=0;eS<ek.numGlyphs;eS++)i.addDynamicAttributes(ei,eA.shiftedAnchor,eA.angle);else hideGlyphs(ek.numGlyphs,ei)}}o.icon.dynamicLayoutVertexBuffer.updateData(ei)}o.text.dynamicLayoutVertexBuffer.updateData(en)}function getSymbolProgramName(i,o,s){return s.iconsInText&&o?"symbolTextAndIcon":i?"symbolSDF":"symbolIcon"}function drawLayerSymbols(o,s,_,F,N,j,Z,X,$,ee,et,er){for(var en=o.context,ei=en.gl,eo=o.transform,es="map"===X,el="map"===$,ec=es&&"point"!==_.layout.get("symbol-placement"),eu=es&&!el&&!ec,ef=void 0!==_.layout.get("symbol-sort-key").constantOr(1),ed=o.depthModeForSublayer(0,DepthMode.ReadOnly),eh=_.layout.get("text-variable-anchor"),ep=[],eg=0;eg<F.length;eg+=1){var em,ey,ev,ex=F[eg],e_=s.getTile(ex),ew=e_.getBucket(_);if(ew){var eT=N?ew.text:ew.icon;if(eT&&eT.segments.get().length){var ek=eT.programConfigurations.get(_.id),eA=N||ew.sdfIcons,eS=N?ew.textSizeData:ew.iconSizeData,eM=el||0!==eo.pitch,eC=o.useProgram(getSymbolProgramName(eA,N,ew),ek),eE=i.evaluateSizeForZoom(eS,eo.zoom),eL=void 0,eP=[0,0],eI=void 0,eO=void 0,eD=null,eR=void 0;if(N){if(eI=e_.glyphAtlasTexture,eO=ei.LINEAR,eL=e_.glyphAtlasTexture.size,ew.iconsInText){eP=e_.imageAtlasTexture.size,eD=e_.imageAtlasTexture;var eB="composite"===eS.kind||"camera"===eS.kind;eR=eM||o.options.rotating||o.options.zooming||eB?ei.LINEAR:ei.NEAREST}}else{var eF=1!==_.layout.get("icon-size").constantOr(0)||ew.iconsNeedLinear;eI=e_.imageAtlasTexture,eO=eA||o.options.rotating||o.options.zooming||eF||eM?ei.LINEAR:ei.NEAREST,eL=e_.imageAtlasTexture.size}var ez=pixelsToTileUnits(e_,1,o.transform.zoom),eN=getLabelPlaneMatrix(ex.posMatrix,el,es,o.transform,ez),ej=getGlCoordMatrix(ex.posMatrix,el,es,o.transform,ez),eV=eh&&ew.hasTextData(),eU="none"!==_.layout.get("icon-text-fit")&&eV&&ew.hasIconData();ec&&updateLineLabels(ew,ex.posMatrix,o,N,eN,ej,el,ee);var eH=o.translatePosMatrix(ex.posMatrix,e_,j,Z),eG=ec||N&&eh||eU?to:eN,eW=o.translatePosMatrix(ej,e_,j,Z,!0),eZ=eA&&0!==_.paint.get(N?"text-halo-width":"icon-halo-width").constantOr(1),eY=void 0;eA?ew.iconsInText?(em=eS.kind,ey=eL,ev=eP,eY=i.extend(symbolSDFUniformValues(em,eE,eu,el,o,eH,eG,eW,!0,ey,!0),{u_texsize_icon:ev,u_texture_icon:1})):eY=symbolSDFUniformValues(eS.kind,eE,eu,el,o,eH,eG,eW,N,eL,!0):eY=symbolIconUniformValues(eS.kind,eE,eu,el,o,eH,eG,eW,N,eL);var eX={program:eC,buffers:eT,uniformValues:eY,atlasTexture:eI,atlasTextureIcon:eD,atlasInterpolation:eO,atlasInterpolationIcon:eR,isSDF:eA,hasHalo:eZ};if(ef)for(var eK=eT.segments.get(),eJ=0;eJ<eK.length;eJ+=1){var e$=eK[eJ];ep.push({segments:new i.SegmentVector([e$]),sortKey:e$.sortKey,state:eX})}else ep.push({segments:eT.segments,sortKey:0,state:eX})}}}ef&&ep.sort(function(i,o){return i.sortKey-o.sortKey});for(var eQ=0;eQ<ep.length;eQ+=1){var e0=ep[eQ],e1=e0.state;if(en.activeTexture.set(ei.TEXTURE0),e1.atlasTexture.bind(e1.atlasInterpolation,ei.CLAMP_TO_EDGE),e1.atlasTextureIcon&&(en.activeTexture.set(ei.TEXTURE1),e1.atlasTextureIcon&&e1.atlasTextureIcon.bind(e1.atlasInterpolationIcon,ei.CLAMP_TO_EDGE)),e1.isSDF){var e2=e1.uniformValues;e1.hasHalo&&(e2.u_is_halo=1,drawSymbolElements(e1.buffers,e0.segments,_,o,e1.program,ed,et,er,e2)),e2.u_is_halo=0}drawSymbolElements(e1.buffers,e0.segments,_,o,e1.program,ed,et,er,e1.uniformValues)}}function drawSymbolElements(i,o,s,_,F,N,j,Z,X){var $=_.context,ee=$.gl;F.draw($,ee.TRIANGLES,N,j,Z,CullFaceMode.disabled,X,s.id,i.layoutVertexBuffer,i.indexBuffer,o,s.paint,_.transform.zoom,i.programConfigurations.get(s.id),i.dynamicLayoutVertexBuffer,i.opacityVertexBuffer)}function drawCircles(o,s,_,F){if("translucent"===o.renderPass){var N=_.paint.get("circle-opacity"),j=_.paint.get("circle-stroke-width"),Z=_.paint.get("circle-stroke-opacity"),X=void 0!==_.layout.get("circle-sort-key").constantOr(1);if(0!==N.constantOr(1)||0!==j.constantOr(1)&&0!==Z.constantOr(1)){for(var $=o.context,ee=$.gl,et=o.depthModeForSublayer(0,DepthMode.ReadOnly),er=StencilMode.disabled,en=o.colorModeForRenderPass(),ei=[],eo=0;eo<F.length;eo++){var es=F[eo],el=s.getTile(es),ec=el.getBucket(_);if(ec){var eu=ec.programConfigurations.get(_.id),ef=o.useProgram("circle",eu),ed={programConfiguration:eu,program:ef,layoutVertexBuffer:ec.layoutVertexBuffer,indexBuffer:ec.indexBuffer,uniformValues:circleUniformValues(o,es,el,_)};if(X)for(var eh=ec.segments.get(),ep=0;ep<eh.length;ep+=1){var eg=eh[ep];ei.push({segments:new i.SegmentVector([eg]),sortKey:eg.sortKey,state:ed})}else ei.push({segments:ec.segments,sortKey:0,state:ed})}}X&&ei.sort(function(i,o){return i.sortKey-o.sortKey});for(var em=0;em<ei.length;em+=1){var ey=ei[em],ev=ey.state,ex=ev.programConfiguration,e_=ev.program,ew=ev.layoutVertexBuffer,eT=ev.indexBuffer,ek=ev.uniformValues,eA=ey.segments;e_.draw($,ee.TRIANGLES,et,er,en,CullFaceMode.disabled,ek,_.id,ew,eT,eA,_.paint,o.transform.zoom,ex)}}}}function drawHeatmap(o,s,_,F){if(0!==_.paint.get("heatmap-opacity")){if("offscreen"===o.renderPass){var N=o.context,j=N.gl,Z=StencilMode.disabled,X=new ColorMode([j.ONE,j.ONE],i.Color.transparent,[!0,!0,!0,!0]);bindFramebuffer(N,o,_),N.clear({color:i.Color.transparent});for(var $=0;$<F.length;$++){var ee,et,er=F[$];if(!s.hasRenderableParent(er)){var en=s.getTile(er),ei=en.getBucket(_);if(ei){var eo=ei.programConfigurations.get(_.id),es=o.useProgram("heatmap",eo),el=o.transform.zoom;es.draw(N,j.TRIANGLES,DepthMode.disabled,Z,X,CullFaceMode.disabled,(ee=er.posMatrix,et=_.paint.get("heatmap-intensity"),{u_matrix:ee,u_extrude_scale:pixelsToTileUnits(en,1,el),u_intensity:et}),_.id,ei.layoutVertexBuffer,ei.indexBuffer,ei.segments,_.paint,o.transform.zoom,eo)}}}N.viewport.set([0,0,o.width,o.height])}else"translucent"===o.renderPass&&(o.context.setColorMode(o.colorModeForRenderPass()),renderTextureToMap(o,_))}}function bindFramebuffer(i,o,s){var _=i.gl;i.activeTexture.set(_.TEXTURE1),i.viewport.set([0,0,o.width/4,o.height/4]);var F=s.heatmapFbo;if(F)_.bindTexture(_.TEXTURE_2D,F.colorAttachment.get()),i.bindFramebuffer.set(F.framebuffer);else{var N=_.createTexture();_.bindTexture(_.TEXTURE_2D,N),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR),F=s.heatmapFbo=i.createFramebuffer(o.width/4,o.height/4,!1),bindTextureToFramebuffer(i,o,N,F)}}function bindTextureToFramebuffer(i,o,s,_){var F=i.gl,N=i.extRenderToTextureHalfFloat?i.extTextureHalfFloat.HALF_FLOAT_OES:F.UNSIGNED_BYTE;F.texImage2D(F.TEXTURE_2D,0,F.RGBA,o.width/4,o.height/4,0,F.RGBA,N,null),_.colorAttachment.set(s)}function renderTextureToMap(o,s){var _=o.context,F=_.gl,N=s.heatmapFbo;if(N){_.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,N.colorAttachment.get()),_.activeTexture.set(F.TEXTURE1);var j=s.colorRampTexture;j||(j=s.colorRampTexture=new i.Texture(_,s.colorRamp,F.RGBA)),j.bind(F.LINEAR,F.CLAMP_TO_EDGE),o.useProgram("heatmapTexture").draw(_,F.TRIANGLES,DepthMode.disabled,StencilMode.disabled,o.colorModeForRenderPass(),CullFaceMode.disabled,heatmapTextureUniformValues(o,s,0,1),s.id,o.viewportBuffer,o.quadTriangleIndexBuffer,o.viewportSegments,s.paint,o.transform.zoom)}}function drawLine(o,s,_,F){if("translucent"===o.renderPass){var N=_.paint.get("line-opacity"),j=_.paint.get("line-width");if(0!==N.constantOr(1)&&0!==j.constantOr(1)){var Z=o.depthModeForSublayer(0,DepthMode.ReadOnly),X=o.colorModeForRenderPass(),$=_.paint.get("line-dasharray"),ee=_.paint.get("line-pattern"),et=ee.constantOr(1),er=_.paint.get("line-gradient"),en=_.getCrossfadeParameters(),ei=et?"linePattern":$?"lineSDF":er?"lineGradient":"line",eo=o.context,es=eo.gl,el=!0;if(er){eo.activeTexture.set(es.TEXTURE0);var ec=_.gradientTexture;if(!_.gradient)return;ec||(ec=_.gradientTexture=new i.Texture(eo,_.gradient,es.RGBA)),ec.bind(es.LINEAR,es.CLAMP_TO_EDGE)}for(var eu=0;eu<F.length;eu+=1){var ef=F[eu],ed=s.getTile(ef);if(!et||ed.patternsLoaded()){var eh=ed.getBucket(_);if(eh){var ep=eh.programConfigurations.get(_.id),eg=o.context.program.get(),em=o.useProgram(ei,ep),ey=el||em.program!==eg,ev=ee.constantOr(null);if(ev&&ed.imageAtlas){var ex=ed.imageAtlas,e_=ex.patternPositions[ev.to.toString()],ew=ex.patternPositions[ev.from.toString()];e_&&ew&&ep.setConstantPatternPositions(e_,ew)}var eT=et?linePatternUniformValues(o,ed,_,en):$?lineSDFUniformValues(o,ed,_,$,en):er?i.extend(lineUniformValues(o,ed,_),{u_image:0}):lineUniformValues(o,ed,_);et?(eo.activeTexture.set(es.TEXTURE0),ed.imageAtlasTexture.bind(es.LINEAR,es.CLAMP_TO_EDGE),ep.updatePaintBuffers(en)):$&&(ey||o.lineAtlas.dirty)&&(eo.activeTexture.set(es.TEXTURE0),o.lineAtlas.bind(eo)),em.draw(eo,es.TRIANGLES,Z,o.stencilModeForClipping(ef),X,CullFaceMode.disabled,eT,_.id,eh.layoutVertexBuffer,eh.indexBuffer,eh.segments,_.paint,o.transform.zoom,ep),el=!1}}}}}}function drawFill(o,s,_,F){var N=_.paint.get("fill-color"),j=_.paint.get("fill-opacity");if(0!==j.constantOr(1)){var Z=o.colorModeForRenderPass(),X=_.paint.get("fill-pattern"),$=o.opaquePassEnabledForLayer()&&!X.constantOr(1)&&1===N.constantOr(i.Color.transparent).a&&1===j.constantOr(0)?"opaque":"translucent";if(o.renderPass===$){var ee=o.depthModeForSublayer(1,"opaque"===o.renderPass?DepthMode.ReadWrite:DepthMode.ReadOnly);drawFillTiles(o,s,_,F,ee,Z,!1)}if("translucent"===o.renderPass&&_.paint.get("fill-antialias")){var et=o.depthModeForSublayer(_.getPaintProperty("fill-outline-color")?2:0,DepthMode.ReadOnly);drawFillTiles(o,s,_,F,et,Z,!0)}}}function drawFillTiles(o,s,_,F,N,j,Z){var X,$,ee,et,er,en=o.context.gl,ei=_.paint.get("fill-pattern"),eo=ei&&ei.constantOr(1),es=_.getCrossfadeParameters();Z?($=eo&&!_.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=en.LINES):($=eo?"fillPattern":"fill",X=en.TRIANGLES);for(var el=0;el<F.length;el+=1){var ec=F[el],eu=s.getTile(ec);if(!eo||eu.patternsLoaded()){var ef=eu.getBucket(_);if(ef){var ed=ef.programConfigurations.get(_.id),eh=o.useProgram($,ed);eo&&(o.context.activeTexture.set(en.TEXTURE0),eu.imageAtlasTexture.bind(en.LINEAR,en.CLAMP_TO_EDGE),ed.updatePaintBuffers(es));var ep=ei.constantOr(null);if(ep&&eu.imageAtlas){var eg=eu.imageAtlas,em=eg.patternPositions[ep.to.toString()],ey=eg.patternPositions[ep.from.toString()];em&&ey&&ed.setConstantPatternPositions(em,ey)}var ev=o.translatePosMatrix(ec.posMatrix,eu,_.paint.get("fill-translate"),_.paint.get("fill-translate-anchor"));if(Z){et=ef.indexBuffer2,er=ef.segments2;var ex=[en.drawingBufferWidth,en.drawingBufferHeight];ee="fillOutlinePattern"===$&&eo?i.extend(fillPatternUniformValues(ev,o,es,eu),{u_world:ex}):{u_matrix:ev,u_world:ex}}else et=ef.indexBuffer,er=ef.segments,ee=eo?fillPatternUniformValues(ev,o,es,eu):fillUniformValues(ev);eh.draw(o.context,X,N,o.stencilModeForClipping(ec),j,CullFaceMode.disabled,ee,_.id,ef.layoutVertexBuffer,et,er,_.paint,o.transform.zoom,ed)}}}}function draw(i,o,s,_){var F=s.paint.get("fill-extrusion-opacity");if(0!==F&&"translucent"===i.renderPass){var N=new DepthMode(i.context.gl.LEQUAL,DepthMode.ReadWrite,i.depthRangeFor3D);if(1!==F||s.paint.get("fill-extrusion-pattern").constantOr(1))drawExtrusionTiles(i,o,s,_,N,StencilMode.disabled,ColorMode.disabled),drawExtrusionTiles(i,o,s,_,N,i.stencilModeFor3D(),i.colorModeForRenderPass());else{var j=i.colorModeForRenderPass();drawExtrusionTiles(i,o,s,_,N,StencilMode.disabled,j)}}}function drawExtrusionTiles(o,s,_,F,N,j,Z){for(var X=o.context,$=X.gl,ee=_.paint.get("fill-extrusion-pattern"),et=ee.constantOr(1),er=_.getCrossfadeParameters(),en=_.paint.get("fill-extrusion-opacity"),ei=0;ei<F.length;ei+=1){var eo=F[ei],es=s.getTile(eo),el=es.getBucket(_);if(el){var ec=el.programConfigurations.get(_.id),eu=o.useProgram(et?"fillExtrusionPattern":"fillExtrusion",ec);et&&(o.context.activeTexture.set($.TEXTURE0),es.imageAtlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE),ec.updatePaintBuffers(er));var ef=ee.constantOr(null);if(ef&&es.imageAtlas){var ed=es.imageAtlas,eh=ed.patternPositions[ef.to.toString()],ep=ed.patternPositions[ef.from.toString()];eh&&ep&&ec.setConstantPatternPositions(eh,ep)}var eg=o.translatePosMatrix(eo.posMatrix,es,_.paint.get("fill-extrusion-translate"),_.paint.get("fill-extrusion-translate-anchor")),em=_.paint.get("fill-extrusion-vertical-gradient"),ey=et?i.extend(fillExtrusionUniformValues(eg,o,em,en),patternUniformValues(er,o,es),{u_height_factor:-Math.pow(2,eo.overscaledZ)/es.tileSize/8}):fillExtrusionUniformValues(eg,o,em,en);eu.draw(X,X.gl.TRIANGLES,N,j,Z,CullFaceMode.backCCW,ey,_.id,el.layoutVertexBuffer,el.indexBuffer,el.segments,_.paint,o.transform.zoom,ec)}}}function drawHillshade(i,o,s,_){if("offscreen"===i.renderPass||"translucent"===i.renderPass){for(var F=i.context,N=o.getSource().maxzoom,j=i.depthModeForSublayer(0,DepthMode.ReadOnly),Z=i.colorModeForRenderPass(),X="translucent"===i.renderPass?i.stencilConfigForOverlap(_):[{},_],$=X[0],ee=X[1],et=0;et<ee.length;et+=1){var er=ee[et],en=o.getTile(er);en.needsHillshadePrepare&&"offscreen"===i.renderPass?prepareHillshade(i,en,s,N,j,StencilMode.disabled,Z):"translucent"===i.renderPass&&renderHillshade(i,en,s,j,$[er.overscaledZ],Z)}F.viewport.set([0,0,i.width,i.height])}}function renderHillshade(i,o,s,_,F,N){var j=i.context,Z=j.gl,X=o.fbo;if(X){var $=i.useProgram("hillshade");j.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,X.colorAttachment.get());var ee=hillshadeUniformValues(i,o,s);$.draw(j,Z.TRIANGLES,_,F,N,CullFaceMode.disabled,ee,s.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments)}}function prepareHillshade(o,s,_,F,N,j,Z){var X=o.context,$=X.gl,ee=s.dem;if(ee&&ee.data){var et=ee.dim,er=ee.stride,en=ee.getPixels();if(X.activeTexture.set($.TEXTURE1),X.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||o.getTileTexture(er),s.demTexture){var ei=s.demTexture;ei.update(en,{premultiply:!1}),ei.bind($.NEAREST,$.CLAMP_TO_EDGE)}else s.demTexture=new i.Texture(X,en,$.RGBA,{premultiply:!1}),s.demTexture.bind($.NEAREST,$.CLAMP_TO_EDGE);X.activeTexture.set($.TEXTURE0);var eo=s.fbo;if(!eo){var es=new i.Texture(X,{width:et,height:et,data:null},$.RGBA);es.bind($.LINEAR,$.CLAMP_TO_EDGE),(eo=s.fbo=X.createFramebuffer(et,et,!0)).colorAttachment.set(es.texture)}X.bindFramebuffer.set(eo.framebuffer),X.viewport.set([0,0,et,et]),o.useProgram("hillshadePrepare").draw(X,$.TRIANGLES,N,j,Z,CullFaceMode.disabled,hillshadeUniformPrepareValues(s.tileID,ee,F),_.id,o.rasterBoundsBuffer,o.quadTriangleIndexBuffer,o.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function drawRaster(i,o,s,_){if("translucent"===i.renderPass&&0!==s.paint.get("raster-opacity")&&_.length)for(var F=i.context,N=F.gl,j=o.getSource(),Z=i.useProgram("raster"),X=i.colorModeForRenderPass(),$=j instanceof ep?[{},_]:i.stencilConfigForOverlap(_),ee=$[0],et=$[1],er=et[et.length-1].overscaledZ,en=!i.options.moving,ei=0;ei<et.length;ei+=1){var eo=et[ei],es=i.depthModeForSublayer(eo.overscaledZ-er,1===s.paint.get("raster-opacity")?DepthMode.ReadWrite:DepthMode.ReadOnly,N.LESS),el=o.getTile(eo),ec=i.transform.calculatePosMatrix(eo.toUnwrapped(),en);el.registerFadeDuration(s.paint.get("raster-fade-duration"));var eu=o.findLoadedParent(eo,0),ef=getFadeValues(el,eu,o,s,i.transform),ed=void 0,eh=void 0,eg="nearest"===s.paint.get("raster-resampling")?N.NEAREST:N.LINEAR;F.activeTexture.set(N.TEXTURE0),el.texture.bind(eg,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(N.TEXTURE1),eu?(eu.texture.bind(eg,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),ed=Math.pow(2,eu.tileID.overscaledZ-el.tileID.overscaledZ),eh=[el.tileID.canonical.x*ed%1,el.tileID.canonical.y*ed%1]):el.texture.bind(eg,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST);var em={u_matrix:ec,u_tl_parent:eh||[0,0],u_scale_parent:ed||1,u_buffer_scale:1,u_fade_t:ef.mix,u_opacity:ef.opacity*s.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:s.paint.get("raster-brightness-min"),u_brightness_high:s.paint.get("raster-brightness-max"),u_saturation_factor:saturationFactor(s.paint.get("raster-saturation")),u_contrast_factor:contrastFactor(s.paint.get("raster-contrast")),u_spin_weights:spinWeights(s.paint.get("raster-hue-rotate"))};j instanceof ep?Z.draw(F,N.TRIANGLES,es,StencilMode.disabled,X,CullFaceMode.disabled,em,s.id,j.boundsBuffer,i.quadTriangleIndexBuffer,j.boundsSegments):Z.draw(F,N.TRIANGLES,es,ee[eo.overscaledZ],X,CullFaceMode.disabled,em,s.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments)}}function getFadeValues(o,s,_,F,N){var j=F.paint.get("raster-fade-duration");if(!(j>0))return{opacity:1,mix:0};var Z=i.browser.now(),X=(Z-o.timeAdded)/j,$=s?(Z-s.timeAdded)/j:-1,ee=_.getSource(),et=N.coveringZoomLevel({tileSize:ee.tileSize,roundZoom:ee.roundZoom}),er=!s||Math.abs(s.tileID.overscaledZ-et)>Math.abs(o.tileID.overscaledZ-et),en=er&&o.refreshedUponExpiration?1:i.clamp(er?X:1-$,0,1);return(o.refreshedUponExpiration&&X>=1&&(o.refreshedUponExpiration=!1),s)?{opacity:1,mix:1-en}:{opacity:en,mix:0}}function drawBackground(o,s,_){var F=_.paint.get("background-color"),N=_.paint.get("background-opacity");if(0!==N){var j=o.context,Z=j.gl,X=o.transform,$=X.tileSize,ee=_.paint.get("background-pattern");if(!o.isPatternMissing(ee)){var et=!ee&&1===F.a&&1===N&&o.opaquePassEnabledForLayer()?"opaque":"translucent";if(o.renderPass===et){var er=StencilMode.disabled,en=o.depthModeForSublayer(0,"opaque"===et?DepthMode.ReadWrite:DepthMode.ReadOnly),ei=o.colorModeForRenderPass(),eo=o.useProgram(ee?"backgroundPattern":"background"),es=X.coveringTiles({tileSize:$});ee&&(j.activeTexture.set(Z.TEXTURE0),o.imageManager.bind(o.context));for(var el=_.getCrossfadeParameters(),ec=0;ec<es.length;ec+=1){var eu,ef=es[ec],ed=o.transform.calculatePosMatrix(ef.toUnwrapped()),eh=ee?(eu={tileID:ef,tileSize:$},i.extend(bgPatternUniformValues(ee,el,o,eu),{u_matrix:ed,u_opacity:N})):{u_matrix:ed,u_opacity:N,u_color:F};eo.draw(j,Z.TRIANGLES,en,er,ei,CullFaceMode.disabled,eh,_.id,o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}}}}var ts=new i.Color(1,0,0,1),tl=new i.Color(0,1,0,1),tc=new i.Color(0,0,1,1),tu=new i.Color(1,0,1,1),tf=new i.Color(0,1,1,1);function drawDebugPadding(i){var o=i.transform.padding;drawHorizontalLine(i,i.transform.height-(o.top||0),3,ts),drawHorizontalLine(i,o.bottom||0,3,tl),drawVerticalLine(i,o.left||0,3,tc),drawVerticalLine(i,i.transform.width-(o.right||0),3,tu);var s=i.transform.centerPoint;drawCrosshair(i,s.x,i.transform.height-s.y,tf)}function drawCrosshair(i,o,s,_){drawDebugSSRect(i,o-1,s-10,2,20,_),drawDebugSSRect(i,o-10,s-1,20,2,_)}function drawHorizontalLine(i,o,s,_){drawDebugSSRect(i,0,o+s/2,i.transform.width,s,_)}function drawVerticalLine(i,o,s,_){drawDebugSSRect(i,o-s/2,0,s,i.transform.height,_)}function drawDebugSSRect(o,s,_,F,N,j){var Z=o.context,X=Z.gl;X.enable(X.SCISSOR_TEST),X.scissor(s*i.browser.devicePixelRatio,_*i.browser.devicePixelRatio,F*i.browser.devicePixelRatio,N*i.browser.devicePixelRatio),Z.clear({color:j}),X.disable(X.SCISSOR_TEST)}function drawDebugTile(o,s,_){var F=o.context,N=F.gl,j=_.posMatrix,Z=o.useProgram("debug"),X=DepthMode.disabled,$=StencilMode.disabled,ee=o.colorModeForRenderPass(),et="$debug";F.activeTexture.set(N.TEXTURE0),o.emptyTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Z.draw(F,N.LINE_STRIP,X,$,ee,CullFaceMode.disabled,debugUniformValues(j,i.Color.red),et,o.debugBuffer,o.tileBorderIndexBuffer,o.debugSegments);var er=s.getTileByID(_.key).latestRawTileData,en=Math.floor((er&&er.byteLength||0)/1024),ei=512/Math.min(s.getTile(_).tileSize,512)*(_.overscaledZ/o.transform.zoom)*.5,eo=_.canonical.toString();_.overscaledZ!==_.canonical.z&&(eo+=" => "+_.overscaledZ),drawTextToOverlay(o,eo+" "+en+"kb"),Z.draw(F,N.TRIANGLES,X,$,ColorMode.alphaBlended,CullFaceMode.disabled,debugUniformValues(j,i.Color.transparent,ei),et,o.debugBuffer,o.quadTriangleIndexBuffer,o.debugSegments)}function drawTextToOverlay(i,o){i.initDebugOverlayCanvas();var s=i.debugOverlayCanvas,_=i.context.gl,F=i.debugOverlayCanvas.getContext("2d");F.clearRect(0,0,s.width,s.height),F.shadowColor="white",F.shadowBlur=2,F.lineWidth=1.5,F.strokeStyle="white",F.textBaseline="top",F.font="bold 36px Open Sans, sans-serif",F.fillText(o,5,5),F.strokeText(o,5,5),i.debugOverlayTexture.update(s),i.debugOverlayTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE)}var td={symbol:drawSymbols,circle:drawCircles,heatmap:drawHeatmap,line:drawLine,fill:drawFill,"fill-extrusion":draw,hillshade:drawHillshade,raster:drawRaster,background:drawBackground,debug:function(i,o,s){for(var _=0;_<s.length;_++)drawDebugTile(i,o,s[_])},custom:function(i,o,s){var _=i.context,F=s.implementation;if("offscreen"===i.renderPass){var N=F.prerender;N&&(i.setCustomLayerDefaults(),_.setColorMode(i.colorModeForRenderPass()),N.call(F,_.gl,i.transform.customLayerMatrix()),_.setDirty(),i.setBaseState())}else if("translucent"===i.renderPass){i.setCustomLayerDefaults(),_.setColorMode(i.colorModeForRenderPass()),_.setStencilMode(StencilMode.disabled);var j="3d"===F.renderingMode?new DepthMode(i.context.gl.LEQUAL,DepthMode.ReadWrite,i.depthRangeFor3D):i.depthModeForSublayer(0,DepthMode.ReadOnly);_.setDepthMode(j),F.render(_.gl,i.transform.customLayerMatrix()),_.setDirty(),i.setBaseState(),_.bindFramebuffer.set(null)}}},Painter=function(i,o){this.context=new Context(i),this.transform=o,this._tileTextures={},this.setup(),this.numSublayers=e1.maxUnderzooming+e1.maxOverzooming+1,this.depthEpsilon=1/65536,this.crossTileSymbolIndex=new CrossTileSymbolIndex,this.gpuTimers={}};Painter.prototype.resize=function(o,s){if(this.width=o*i.browser.devicePixelRatio,this.height=s*i.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var _=0,F=this.style._order;_<F.length;_+=1){var N=F[_];this.style._layers[N].resize()}},Painter.prototype.setup=function(){var o=this.context,s=new i.StructArrayLayout2i4;s.emplaceBack(0,0),s.emplaceBack(i.EXTENT,0),s.emplaceBack(0,i.EXTENT),s.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(s,tr.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2);var _=new i.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(i.EXTENT,0),_.emplaceBack(0,i.EXTENT),_.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=o.createVertexBuffer(_,tr.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5);var F=new i.StructArrayLayout4i8;F.emplaceBack(0,0,0,0),F.emplaceBack(i.EXTENT,0,i.EXTENT,0),F.emplaceBack(0,i.EXTENT,0,i.EXTENT),F.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.rasterBoundsBuffer=o.createVertexBuffer(F,eh.members),this.rasterBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2);var N=new i.StructArrayLayout2i4;N.emplaceBack(0,0),N.emplaceBack(1,0),N.emplaceBack(0,1),N.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(N,tr.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2);var j=new i.StructArrayLayout1ui2;j.emplaceBack(0),j.emplaceBack(1),j.emplaceBack(3),j.emplaceBack(2),j.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(j);var Z=new i.StructArrayLayout3ui6;Z.emplaceBack(0,1,2),Z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(Z),this.emptyTexture=new i.Texture(o,{width:1,height:1,data:new Uint8Array([0,0,0,0])},o.gl.RGBA);var X=this.context.gl;this.stencilClearMode=new StencilMode({func:X.ALWAYS,mask:0},0,255,X.ZERO,X.ZERO,X.ZERO)},Painter.prototype.clearStencil=function(){var o=this.context,s=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var _=i.create();i.ortho(_,0,this.width,this.height,0,0,1),i.scale(_,_,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(o,s.TRIANGLES,DepthMode.disabled,this.stencilClearMode,ColorMode.disabled,CullFaceMode.disabled,clippingMaskUniformValues(_),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Painter.prototype._renderTileClippingMasks=function(i,o){if(this.currentStencilSource!==i.source&&i.isTileClipped()&&o&&o.length){this.currentStencilSource=i.source;var s=this.context,_=s.gl;this.nextStencilID+o.length>256&&this.clearStencil(),s.setColorMode(ColorMode.disabled),s.setDepthMode(DepthMode.disabled);var F=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var N=0;N<o.length;N+=1){var j=o[N],Z=this._tileClippingMaskIDs[j.key]=this.nextStencilID++;F.draw(s,_.TRIANGLES,DepthMode.disabled,new StencilMode({func:_.ALWAYS,mask:0},Z,255,_.KEEP,_.KEEP,_.REPLACE),ColorMode.disabled,CullFaceMode.disabled,clippingMaskUniformValues(j.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Painter.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var i=this.nextStencilID++,o=this.context.gl;return new StencilMode({func:o.NOTEQUAL,mask:255},i,255,o.KEEP,o.KEEP,o.REPLACE)},Painter.prototype.stencilModeForClipping=function(i){var o=this.context.gl;return new StencilMode({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,o.KEEP,o.KEEP,o.REPLACE)},Painter.prototype.stencilConfigForOverlap=function(i){var o,s=this.context.gl,_=i.sort(function(i,o){return o.overscaledZ-i.overscaledZ}),F=_[_.length-1].overscaledZ,N=_[0].overscaledZ-F+1;if(N>1){this.currentStencilSource=void 0,this.nextStencilID+N>256&&this.clearStencil();for(var j={},Z=0;Z<N;Z++)j[Z+F]=new StencilMode({func:s.GEQUAL,mask:255},Z+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=N,[j,_]}return[((o={})[F]=StencilMode.disabled,o),_]},Painter.prototype.colorModeForRenderPass=function(){var o=this.context.gl;return this._showOverdrawInspector?new ColorMode([o.CONSTANT_COLOR,o.ONE],new i.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ColorMode.unblended:ColorMode.alphaBlended},Painter.prototype.depthModeForSublayer=function(i,o,s){if(!this.opaquePassEnabledForLayer())return DepthMode.disabled;var _=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new DepthMode(s||this.context.gl.LEQUAL,o,[_,_])},Painter.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Painter.prototype.render=function(o,s){var _,F,N=this;this.style=o,this.options=s,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(i.browser.now()),this.imageManager.beginFrame();var j=this.style._order,Z=this.style.sourceCaches;for(var X in Z){var $=Z[X];$.used&&$.prepare(this.context)}var ee={},et={},er={};for(var en in Z){var ei=Z[en];ee[en]=ei.getVisibleCoordinates(),et[en]=ee[en].slice().reverse(),er[en]=ei.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var eo=0;eo<j.length;eo++){var es=j[eo];if(this.style._layers[es].is3D()){this.opaquePassCutoff=eo;break}}this.renderPass="offscreen";for(var el=0;el<j.length;el+=1){var ec=j[el],eu=this.style._layers[ec];if(!(!eu.hasOffscreenPass()||eu.isHidden(this.transform.zoom))){var ef=et[eu.source];("custom"===eu.type||ef.length)&&this.renderLayer(this,Z[eu.source],eu,ef)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=j.length-1;this.currentLayer>=0;this.currentLayer--){var ed=this.style._layers[j[this.currentLayer]],eh=Z[ed.source],ep=ee[ed.source];this._renderTileClippingMasks(ed,ep),this.renderLayer(this,eh,ed,ep)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<j.length;this.currentLayer++){var eg=this.style._layers[j[this.currentLayer]],em=Z[eg.source],ey=("symbol"===eg.type?er:et)[eg.source];this._renderTileClippingMasks(eg,ee[eg.source]),this.renderLayer(this,em,eg,ey)}this.options.showTileBoundaries&&(i.values(this.style._layers).forEach(function(i){i.source&&!i.isHidden(N.transform.zoom)&&(i.source!==(F&&F.id)&&(F=N.style.sourceCaches[i.source]),(!_||_.getSource().maxzoom<F.getSource().maxzoom)&&(_=F))}),_&&td.debug(this,_,_.getVisibleCoordinates())),this.options.showPadding&&drawDebugPadding(this),this.context.setDefault()},Painter.prototype.renderLayer=function(i,o,s,_){!s.isHidden(this.transform.zoom)&&("background"===s.type||"custom"===s.type||_.length)&&(this.id=s.id,this.gpuTimingStart(s),td[s.type](i,o,s,_,this.style.placement.variableOffsets),this.gpuTimingEnd())},Painter.prototype.gpuTimingStart=function(i){if(this.options.gpuTiming){var o=this.context.extTimerQuery,s=this.gpuTimers[i.id];s||(s=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:o.createQueryEXT()}),s.calls++,o.beginQueryEXT(o.TIME_ELAPSED_EXT,s.query)}},Painter.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}},Painter.prototype.collectGpuTimers=function(){var i=this.gpuTimers;return this.gpuTimers={},i},Painter.prototype.queryGpuTimers=function(i){var o={};for(var s in i){var _=i[s],F=this.context.extTimerQuery,N=F.getQueryObjectEXT(_.query,F.QUERY_RESULT_EXT)/1e6;F.deleteQueryEXT(_.query),o[s]=N}return o},Painter.prototype.translatePosMatrix=function(o,s,_,F,N){if(!_[0]&&!_[1])return o;var j=N?"map"===F?this.transform.angle:0:"viewport"===F?-this.transform.angle:0;if(j){var Z=Math.sin(j),X=Math.cos(j);_=[_[0]*X-_[1]*Z,_[0]*Z+_[1]*X]}var $=[N?_[0]:pixelsToTileUnits(s,_[0],this.transform.zoom),N?_[1]:pixelsToTileUnits(s,_[1],this.transform.zoom),0],ee=new Float32Array(16);return i.translate(ee,o,$),ee},Painter.prototype.saveTileTexture=function(i){var o=this._tileTextures[i.size[0]];o?o.push(i):this._tileTextures[i.size[0]]=[i]},Painter.prototype.getTileTexture=function(i){var o=this._tileTextures[i];return o&&o.length>0?o.pop():null},Painter.prototype.isPatternMissing=function(i){if(!i)return!1;if(!i.from||!i.to)return!0;var o=this.imageManager.getPattern(i.from.toString()),s=this.imageManager.getPattern(i.to.toString());return!o||!s},Painter.prototype.useProgram=function(i,o){this.cache=this.cache||{};var s=""+i+(o?o.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[s]||(this.cache[s]=new Program$1(this.context,ta[i],o,ti[i],this._showOverdrawInspector)),this.cache[s]},Painter.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Painter.prototype.setBaseState=function(){var i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)},Painter.prototype.initDebugOverlayCanvas=function(){if(null==this.debugOverlayCanvas){this.debugOverlayCanvas=i.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var o=this.context.gl;this.debugOverlayTexture=new i.Texture(this.context,this.debugOverlayCanvas,o.RGBA)}},Painter.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Frustum=function(i,o){this.points=i,this.planes=o};Frustum.fromInvProjectionMatrix=function(o,s,_){var F=Math.pow(2,_),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(s){return i.transformMat4([],s,o)}).map(function(o){return i.scale$1([],o,1/o[3]/s*F)}),j=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(o){var s=i.sub([],N[o[0]],N[o[1]]),_=i.sub([],N[o[2]],N[o[1]]),F=i.normalize([],i.cross([],s,_)),j=-i.dot(F,N[o[1]]);return F.concat(j)});return new Frustum(N,j)};var Aabb=function(o,s){this.min=o,this.max=s,this.center=i.scale$2([],i.add([],this.min,this.max),.5)};Aabb.prototype.quadrant=function(o){for(var s=[o%2==0,o<2],_=i.clone$2(this.min),F=i.clone$2(this.max),N=0;N<s.length;N++)_[N]=s[N]?this.min[N]:this.center[N],F[N]=s[N]?this.center[N]:this.max[N];return F[2]=this.max[2],new Aabb(_,F)},Aabb.prototype.distanceX=function(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]},Aabb.prototype.distanceY=function(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]},Aabb.prototype.intersects=function(o){for(var s=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],_=!0,F=0;F<o.planes.length;F++){for(var N=o.planes[F],j=0,Z=0;Z<s.length;Z++)j+=i.dot$1(N,s[Z])>=0;if(0===j)return 0;j!==s.length&&(_=!1)}if(_)return 2;for(var X=0;X<3;X++){for(var $=Number.MAX_VALUE,ee=-Number.MAX_VALUE,et=0;et<o.points.length;et++){var er=o.points[et][X]-this.min[X];$=Math.min($,er),ee=Math.max(ee,er)}if(ee<0||$>this.max[X]-this.min[X])return 0}return 1};var EdgeInsets=function(i,o,s,_){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===_&&(_=0),isNaN(i)||i<0||isNaN(o)||o<0||isNaN(s)||s<0||isNaN(_)||_<0)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=o,this.left=s,this.right=_};EdgeInsets.prototype.interpolate=function(o,s,_){return null!=s.top&&null!=o.top&&(this.top=i.number(o.top,s.top,_)),null!=s.bottom&&null!=o.bottom&&(this.bottom=i.number(o.bottom,s.bottom,_)),null!=s.left&&null!=o.left&&(this.left=i.number(o.left,s.left,_)),null!=s.right&&null!=o.right&&(this.right=i.number(o.right,s.right,_)),this},EdgeInsets.prototype.getCenter=function(o,s){var _=i.clamp((this.left+o-this.right)/2,0,o),F=i.clamp((this.top+s-this.bottom)/2,0,s);return new i.Point(_,F)},EdgeInsets.prototype.equals=function(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right},EdgeInsets.prototype.clone=function(){return new EdgeInsets(this.top,this.bottom,this.left,this.right)},EdgeInsets.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Transform=function(o,s,_,F,N){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===N||N,this._minZoom=o||0,this._maxZoom=s||22,this._minPitch=null==_?0:_,this._maxPitch=null==F?60:F,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new EdgeInsets,this._posMatrixCache={},this._alignedPosMatrixCache={}},th={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};function throttle(i,o){var s=!1,_=null,later=function(){_=null,s&&(i(),_=setTimeout(later,o),s=!1)};return function(){return s=!0,_||later(),_}}Transform.prototype.clone=function(){var i=new Transform(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i},th.minZoom.get=function(){return this._minZoom},th.minZoom.set=function(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))},th.maxZoom.get=function(){return this._maxZoom},th.maxZoom.set=function(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))},th.minPitch.get=function(){return this._minPitch},th.minPitch.set=function(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))},th.maxPitch.get=function(){return this._maxPitch},th.maxPitch.set=function(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))},th.renderWorldCopies.get=function(){return this._renderWorldCopies},th.renderWorldCopies.set=function(i){void 0===i?i=!0:null===i&&(i=!1),this._renderWorldCopies=i},th.worldSize.get=function(){return this.tileSize*this.scale},th.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},th.size.get=function(){return new i.Point(this.width,this.height)},th.bearing.get=function(){return-this.angle/Math.PI*180},th.bearing.set=function(o){var s=-i.wrap(o,-180,180)*Math.PI/180;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=i.create$2(),i.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},th.pitch.get=function(){return this._pitch/Math.PI*180},th.pitch.set=function(o){var s=i.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())},th.fov.get=function(){return this._fov/Math.PI*180},th.fov.set=function(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())},th.zoom.get=function(){return this._zoom},th.zoom.set=function(i){var o=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom,this._constrain(),this._calcMatrices())},th.center.get=function(){return this._center},th.center.set=function(i){(i.lat!==this._center.lat||i.lng!==this._center.lng)&&(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())},th.padding.get=function(){return this._edgeInsets.toJSON()},th.padding.set=function(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())},th.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Transform.prototype.isPaddingEqual=function(i){return this._edgeInsets.equals(i)},Transform.prototype.interpolatePadding=function(i,o,s){this._unmodified=!1,this._edgeInsets.interpolate(i,o,s),this._constrain(),this._calcMatrices()},Transform.prototype.coveringZoomLevel=function(i){return Math.max(0,(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize)))},Transform.prototype.getVisibleUnwrappedCoordinates=function(o){var s=[new i.UnwrappedTileID(0,o)];if(this._renderWorldCopies)for(var _=this.pointCoordinate(new i.Point(0,0)),F=this.pointCoordinate(new i.Point(this.width,0)),N=this.pointCoordinate(new i.Point(this.width,this.height)),j=this.pointCoordinate(new i.Point(0,this.height)),Z=Math.floor(Math.min(_.x,F.x,N.x,j.x)),X=Math.floor(Math.max(_.x,F.x,N.x,j.x)),$=Z-1;$<=X+1;$++)0!==$&&s.push(new i.UnwrappedTileID($,o));return s},Transform.prototype.coveringTiles=function(o){var s=this.coveringZoomLevel(o),_=s;if(void 0!==o.minzoom&&s<o.minzoom)return[];void 0!==o.maxzoom&&s>o.maxzoom&&(s=o.maxzoom);var F=i.MercatorCoordinate.fromLngLat(this.center),N=Math.pow(2,s),j=[N*F.x,N*F.y,0],Z=Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s),X=o.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(X=s);var newRootTile=function(i){return{aabb:new Aabb([i*N,0,0],[(i+1)*N,N,0]),zoom:0,x:0,y:0,wrap:i,fullyVisible:!1}},$=[],ee=[],et=s,er=o.reparseOverscaled?_:s;if(this._renderWorldCopies)for(var en=1;en<=3;en++)$.push(newRootTile(-en)),$.push(newRootTile(en));for($.push(newRootTile(0));$.length>0;){var ei=$.pop(),eo=ei.x,es=ei.y,el=ei.fullyVisible;if(!el){var ec=ei.aabb.intersects(Z);if(0===ec)continue;el=2===ec}var eu=Math.max(Math.abs(ei.aabb.distanceX(j)),Math.abs(ei.aabb.distanceY(j))),ef=3+(1<<et-ei.zoom)-2;if(ei.zoom===et||eu>ef&&ei.zoom>=X){ee.push({tileID:new i.OverscaledTileID(ei.zoom===et?er:ei.zoom,ei.wrap,ei.zoom,eo,es),distanceSq:i.sqrLen([j[0]-.5-eo,j[1]-.5-es])});continue}for(var ed=0;ed<4;ed++){var eh=(eo<<1)+ed%2,ep=(es<<1)+(ed>>1);$.push({aabb:ei.aabb.quadrant(ed),zoom:ei.zoom+1,x:eh,y:ep,wrap:ei.wrap,fullyVisible:el})}}return ee.sort(function(i,o){return i.distanceSq-o.distanceSq}).map(function(i){return i.tileID})},Transform.prototype.resize=function(i,o){this.width=i,this.height=o,this.pixelsToGLUnits=[2/i,-2/o],this._constrain(),this._calcMatrices()},th.unmodified.get=function(){return this._unmodified},Transform.prototype.zoomScale=function(i){return Math.pow(2,i)},Transform.prototype.scaleZoom=function(i){return Math.log(i)/Math.LN2},Transform.prototype.project=function(o){var s=i.clamp(o.lat,-this.maxValidLatitude,this.maxValidLatitude);return new i.Point(i.mercatorXfromLng(o.lng)*this.worldSize,i.mercatorYfromLat(s)*this.worldSize)},Transform.prototype.unproject=function(o){return new i.MercatorCoordinate(o.x/this.worldSize,o.y/this.worldSize).toLngLat()},th.point.get=function(){return this.project(this.center)},Transform.prototype.setLocationAtPoint=function(o,s){var _=this.pointCoordinate(s),F=this.pointCoordinate(this.centerPoint),N=this.locationCoordinate(o),j=new i.MercatorCoordinate(N.x-(_.x-F.x),N.y-(_.y-F.y));this.center=this.coordinateLocation(j),this._renderWorldCopies&&(this.center=this.center.wrap())},Transform.prototype.locationPoint=function(i){return this.coordinatePoint(this.locationCoordinate(i))},Transform.prototype.pointLocation=function(i){return this.coordinateLocation(this.pointCoordinate(i))},Transform.prototype.locationCoordinate=function(o){return i.MercatorCoordinate.fromLngLat(o)},Transform.prototype.coordinateLocation=function(i){return i.toLngLat()},Transform.prototype.pointCoordinate=function(o){var s=[o.x,o.y,0,1],_=[o.x,o.y,1,1];i.transformMat4(s,s,this.pixelMatrixInverse),i.transformMat4(_,_,this.pixelMatrixInverse);var F=s[3],N=_[3],j=s[0]/F,Z=_[0]/N,X=s[1]/F,$=_[1]/N,ee=s[2]/F,et=_[2]/N,er=ee===et?0:(0-ee)/(et-ee);return new i.MercatorCoordinate(i.number(j,Z,er)/this.worldSize,i.number(X,$,er)/this.worldSize)},Transform.prototype.coordinatePoint=function(o){var s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return i.transformMat4(s,s,this.pixelMatrix),new i.Point(s[0]/s[3],s[1]/s[3])},Transform.prototype.getBounds=function(){return new i.LngLatBounds().extend(this.pointLocation(new i.Point(0,0))).extend(this.pointLocation(new i.Point(this.width,0))).extend(this.pointLocation(new i.Point(this.width,this.height))).extend(this.pointLocation(new i.Point(0,this.height)))},Transform.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new i.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Transform.prototype.setMaxBounds=function(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Transform.prototype.calculatePosMatrix=function(o,s){void 0===s&&(s=!1);var _=o.key,F=s?this._alignedPosMatrixCache:this._posMatrixCache;if(F[_])return F[_];var N=o.canonical,j=this.worldSize/this.zoomScale(N.z),Z=N.x+Math.pow(2,N.z)*o.wrap,X=i.identity(new Float64Array(16));return i.translate(X,X,[Z*j,N.y*j,0]),i.scale(X,X,[j/i.EXTENT,j/i.EXTENT,1]),i.multiply(X,s?this.alignedProjMatrix:this.projMatrix,X),F[_]=new Float32Array(X),F[_]},Transform.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Transform.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var o,s,_,F,N=-90,j=90,Z=-180,X=180,$=this.size,ee=this._unmodified;if(this.latRange){var et=this.latRange;N=i.mercatorYfromLat(et[1])*this.worldSize,o=(j=i.mercatorYfromLat(et[0])*this.worldSize)-N<$.y?$.y/(j-N):0}if(this.lngRange){var er=this.lngRange;Z=i.mercatorXfromLng(er[0])*this.worldSize,s=(X=i.mercatorXfromLng(er[1])*this.worldSize)-Z<$.x?$.x/(X-Z):0}var en=this.point,ei=Math.max(s||0,o||0);if(ei){this.center=this.unproject(new i.Point(s?(X+Z)/2:en.x,o?(j+N)/2:en.y)),this.zoom+=this.scaleZoom(ei),this._unmodified=ee,this._constraining=!1;return}if(this.latRange){var eo=en.y,es=$.y/2;eo-es<N&&(F=N+es),eo+es>j&&(F=j-es)}if(this.lngRange){var el=en.x,ec=$.x/2;el-ec<Z&&(_=Z+ec),el+ec>X&&(_=X-ec)}(void 0!==_||void 0!==F)&&(this.center=this.unproject(new i.Point(void 0!==_?_:en.x,void 0!==F?F:en.y))),this._unmodified=ee,this._constraining=!1}},Transform.prototype._calcMatrices=function(){if(this.height){var o=this._fov/2,s=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(o)*this.height;var _=Math.PI/2+this._pitch,F=this._fov*(.5+s.y/this.height),N=Math.sin(F)*this.cameraToCenterDistance/Math.sin(i.clamp(Math.PI-_-F,.01,Math.PI-.01)),j=this.point,Z=j.x,X=j.y,$=Math.cos(Math.PI/2-this._pitch)*N+this.cameraToCenterDistance,ee=this.height/50,et=new Float64Array(16);i.perspective(et,this._fov,this.width/this.height,ee,1.01*$),et[8]=-(2*s.x)/this.width,et[9]=2*s.y/this.height,i.scale(et,et,[1,-1,1]),i.translate(et,et,[0,0,-this.cameraToCenterDistance]),i.rotateX(et,et,this._pitch),i.rotateZ(et,et,this.angle),i.translate(et,et,[-Z,-X,0]),this.mercatorMatrix=i.scale([],et,[this.worldSize,this.worldSize,this.worldSize]),i.scale(et,et,[1,1,i.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=et,this.invProjMatrix=i.invert([],this.projMatrix);var er=this.width%2/2,en=this.height%2/2,ei=Math.cos(this.angle),eo=Math.sin(this.angle),es=Z-Math.round(Z)+ei*er+eo*en,el=X-Math.round(X)+ei*en+eo*er,ec=new Float64Array(et);if(i.translate(ec,ec,[es>.5?es-1:es,el>.5?el-1:el,0]),this.alignedProjMatrix=ec,et=i.create(),i.scale(et,et,[this.width/2,-this.height/2,1]),i.translate(et,et,[1,-1,0]),this.labelPlaneMatrix=et,et=i.create(),i.scale(et,et,[1,-1,1]),i.translate(et,et,[-1,-1,0]),i.scale(et,et,[2/this.width,2/this.height,1]),this.glCoordMatrix=et,this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(et=i.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=et,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Transform.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var o=this.pointCoordinate(new i.Point(0,0)),s=[o.x*this.worldSize,o.y*this.worldSize,0,1];return i.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance},Transform.prototype.getCameraPoint=function(){var o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,o))},Transform.prototype.getCameraQueryGeometry=function(o){var s=this.getCameraPoint();if(1===o.length)return[o[0],s];for(var _=s.x,F=s.y,N=s.x,j=s.y,Z=0;Z<o.length;Z+=1){var X=o[Z];_=Math.min(_,X.x),F=Math.min(F,X.y),N=Math.max(N,X.x),j=Math.max(j,X.y)}return[new i.Point(_,F),new i.Point(N,F),new i.Point(N,j),new i.Point(_,j),new i.Point(_,F)]},Object.defineProperties(Transform.prototype,th);var Hash=function(o){this._hashName=o&&encodeURIComponent(o),i.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=throttle(this._updateHashUnthrottled.bind(this),300)};Hash.prototype.addTo=function(o){return this._map=o,i.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Hash.prototype.remove=function(){return i.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Hash.prototype.getHashString=function(o){var s=this._map.getCenter(),_=Math.round(100*this._map.getZoom())/100,F=Math.pow(10,Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10)),N=Math.round(s.lng*F)/F,j=Math.round(s.lat*F)/F,Z=this._map.getBearing(),X=this._map.getPitch(),$="";if(o?$+="/"+N+"/"+j+"/"+_:$+=_+"/"+j+"/"+N,(Z||X)&&($+="/"+Math.round(10*Z)/10),X&&($+="/"+Math.round(X)),this._hashName){var ee=this._hashName,et=!1,er=i.window.location.hash.slice(1).split("&").map(function(i){var o=i.split("=")[0];return o===ee?(et=!0,o+"="+$):i}).filter(function(i){return i});return et||er.push(ee+"="+$),"#"+er.join("&")}return"#"+$},Hash.prototype._getCurrentHash=function(){var o,s=this,_=i.window.location.hash.replace("#","");return this._hashName?(_.split("&").map(function(i){return i.split("=")}).forEach(function(i){i[0]===s._hashName&&(o=i)}),(o&&o[1]||"").split("/")):_.split("/")},Hash.prototype._onHashChange=function(){var i=this._getCurrentHash();if(i.length>=3&&!i.some(function(i){return isNaN(i)})){var o=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:o,pitch:+(i[4]||0)}),!0}return!1},Hash.prototype._updateHashUnthrottled=function(){var o=this.getHashString();try{i.window.history.replaceState(i.window.history.state,"",o)}catch(i){}};var tp={linearity:.3,easing:i.bezier(0,0,.3,1)},tg=i.extend({deceleration:2500,maxSpeed:1400},tp),tm=i.extend({deceleration:20,maxSpeed:1400},tp),ty=i.extend({deceleration:1e3,maxSpeed:360},tp),tv=i.extend({deceleration:1e3,maxSpeed:90},tp),HandlerInertia=function(i){this._map=i,this.clear()};function extendDuration(i,o){(!i.duration||i.duration<o.duration)&&(i.duration=o.duration,i.easing=o.easing)}function calculateEasing(o,s,_){var F=_.maxSpeed,N=_.linearity,j=_.deceleration,Z=i.clamp(o*N/(s/1e3),-F,F),X=Math.abs(Z)/(j*N);return{easing:_.easing,duration:1e3*X,amount:Z*(X/2)}}HandlerInertia.prototype.clear=function(){this._inertiaBuffer=[]},HandlerInertia.prototype.record=function(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.browser.now(),settings:o})},HandlerInertia.prototype._drainInertiaBuffer=function(){for(var o=this._inertiaBuffer,s=i.browser.now();o.length>0&&s-o[0].time>160;)o.shift()},HandlerInertia.prototype._onMoveEnd=function(o){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var s={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0},_=0,F=this._inertiaBuffer;_<F.length;_+=1){var N=F[_].settings;s.zoom+=N.zoomDelta||0,s.bearing+=N.bearingDelta||0,s.pitch+=N.pitchDelta||0,N.panDelta&&s.pan._add(N.panDelta),N.around&&(s.around=N.around),N.pinchAround&&(s.pinchAround=N.pinchAround)}var j=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Z={};if(s.pan.mag()){var X=calculateEasing(s.pan.mag(),j,i.extend({},tg,o||{}));Z.offset=s.pan.mult(X.amount/s.pan.mag()),Z.center=this._map.transform.center,extendDuration(Z,X)}if(s.zoom){var $=calculateEasing(s.zoom,j,tm);Z.zoom=this._map.transform.zoom+$.amount,extendDuration(Z,$)}if(s.bearing){var ee=calculateEasing(s.bearing,j,ty);Z.bearing=this._map.transform.bearing+i.clamp(ee.amount,-179,179),extendDuration(Z,ee)}if(s.pitch){var et=calculateEasing(s.pitch,j,tv);Z.pitch=this._map.transform.pitch+et.amount,extendDuration(Z,et)}if(Z.zoom||Z.bearing){var er=void 0===s.pinchAround?s.around:s.pinchAround;Z.around=er?this._map.unproject(er):this._map.getCenter()}return this.clear(),i.extend(Z,{noMoveStart:!0})}};var tx=function(o){function MapMouseEvent(s,_,F,N){void 0===N&&(N={});var Z=j.mousePos(_.getCanvasContainer(),F),X=_.unproject(Z);o.call(this,s,i.extend({point:Z,lngLat:X,originalEvent:F},N)),this._defaultPrevented=!1,this.target=_}o&&(MapMouseEvent.__proto__=o),MapMouseEvent.prototype=Object.create(o&&o.prototype),MapMouseEvent.prototype.constructor=MapMouseEvent;var s={defaultPrevented:{configurable:!0}};return MapMouseEvent.prototype.preventDefault=function(){this._defaultPrevented=!0},s.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(MapMouseEvent.prototype,s),MapMouseEvent}(i.Event),tb=function(o){function MapTouchEvent(s,_,F){var N="touchend"===s?F.changedTouches:F.touches,Z=j.touchPos(_.getCanvasContainer(),N),X=Z.map(function(i){return _.unproject(i)}),$=Z.reduce(function(i,o,s,_){return i.add(o.div(_.length))},new i.Point(0,0)),ee=_.unproject($);o.call(this,s,{points:Z,point:$,lngLats:X,lngLat:ee,originalEvent:F}),this._defaultPrevented=!1}o&&(MapTouchEvent.__proto__=o),MapTouchEvent.prototype=Object.create(o&&o.prototype),MapTouchEvent.prototype.constructor=MapTouchEvent;var s={defaultPrevented:{configurable:!0}};return MapTouchEvent.prototype.preventDefault=function(){this._defaultPrevented=!0},s.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(MapTouchEvent.prototype,s),MapTouchEvent}(i.Event),t_=function(i){function MapWheelEvent(o,s,_){i.call(this,o,{originalEvent:_}),this._defaultPrevented=!1}i&&(MapWheelEvent.__proto__=i),MapWheelEvent.prototype=Object.create(i&&i.prototype),MapWheelEvent.prototype.constructor=MapWheelEvent;var o={defaultPrevented:{configurable:!0}};return MapWheelEvent.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(MapWheelEvent.prototype,o),MapWheelEvent}(i.Event),MapEventHandler=function(i,o){this._map=i,this._clickTolerance=o.clickTolerance};MapEventHandler.prototype.reset=function(){delete this._mousedownPos},MapEventHandler.prototype.wheel=function(i){return this._firePreventable(new t_(i.type,this._map,i))},MapEventHandler.prototype.mousedown=function(i,o){return this._mousedownPos=o,this._firePreventable(new tx(i.type,this._map,i))},MapEventHandler.prototype.mouseup=function(i){this._map.fire(new tx(i.type,this._map,i))},MapEventHandler.prototype.click=function(i,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new tx(i.type,this._map,i))},MapEventHandler.prototype.dblclick=function(i){return this._firePreventable(new tx(i.type,this._map,i))},MapEventHandler.prototype.mouseover=function(i){this._map.fire(new tx(i.type,this._map,i))},MapEventHandler.prototype.mouseout=function(i){this._map.fire(new tx(i.type,this._map,i))},MapEventHandler.prototype.touchstart=function(i){return this._firePreventable(new tb(i.type,this._map,i))},MapEventHandler.prototype.touchmove=function(i){this._map.fire(new tb(i.type,this._map,i))},MapEventHandler.prototype.touchend=function(i){this._map.fire(new tb(i.type,this._map,i))},MapEventHandler.prototype.touchcancel=function(i){this._map.fire(new tb(i.type,this._map,i))},MapEventHandler.prototype._firePreventable=function(i){if(this._map.fire(i),i.defaultPrevented)return{}},MapEventHandler.prototype.isEnabled=function(){return!0},MapEventHandler.prototype.isActive=function(){return!1},MapEventHandler.prototype.enable=function(){},MapEventHandler.prototype.disable=function(){};var BlockableMapEventHandler=function(i){this._map=i};BlockableMapEventHandler.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},BlockableMapEventHandler.prototype.mousemove=function(i){this._map.fire(new tx(i.type,this._map,i))},BlockableMapEventHandler.prototype.mousedown=function(){this._delayContextMenu=!0},BlockableMapEventHandler.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new tx("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},BlockableMapEventHandler.prototype.contextmenu=function(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new tx(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()},BlockableMapEventHandler.prototype.isEnabled=function(){return!0},BlockableMapEventHandler.prototype.isActive=function(){return!1},BlockableMapEventHandler.prototype.enable=function(){},BlockableMapEventHandler.prototype.disable=function(){};var BoxZoomHandler=function(i,o){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=o.clickTolerance||1};function indexTouches(i,o){for(var s={},_=0;_<i.length;_++)s[i[_].identifier]=o[_];return s}function getCentroid(o){for(var s=new i.Point(0,0),_=0;_<o.length;_+=1){var F=o[_];s._add(F)}return s.div(o.length)}BoxZoomHandler.prototype.isEnabled=function(){return!!this._enabled},BoxZoomHandler.prototype.isActive=function(){return!!this._active},BoxZoomHandler.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},BoxZoomHandler.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},BoxZoomHandler.prototype.mousedown=function(i,o){this.isEnabled()&&i.shiftKey&&0===i.button&&(j.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)},BoxZoomHandler.prototype.mousemoveWindow=function(i,o){if(this._active&&!(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)){var s=this._startPos;this._lastPos=o,this._box||(this._box=j.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));var _=Math.min(s.x,o.x),F=Math.max(s.x,o.x),N=Math.min(s.y,o.y),Z=Math.max(s.y,o.y);j.setTransform(this._box,"translate("+_+"px,"+N+"px)"),this._box.style.width=F-_+"px",this._box.style.height=Z-N+"px"}},BoxZoomHandler.prototype.mouseupWindow=function(o,s){var _=this;if(this._active&&0===o.button){var F=this._startPos;if(this.reset(),j.suppressClick(),F.x!==s.x||F.y!==s.y)return this._map.fire(new i.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:function(i){return i.fitScreenCoordinates(F,s,_._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",o)}},BoxZoomHandler.prototype.keydown=function(i){this._active&&27===i.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",i))},BoxZoomHandler.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos},BoxZoomHandler.prototype._fireEvent=function(o,s){return this._map.fire(new i.Event(o,{originalEvent:s}))};var SingleTapRecognizer=function(i){this.reset(),this.numTouches=i.numTouches};SingleTapRecognizer.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},SingleTapRecognizer.prototype.touchstart=function(i,o,s){(this.centroid||s.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=i.timeStamp),s.length===this.numTouches&&(this.centroid=getCentroid(o),this.touches=indexTouches(s,o)))},SingleTapRecognizer.prototype.touchmove=function(i,o,s){if(!this.aborted&&this.centroid){var _=indexTouches(s,o);for(var F in this.touches){var N=this.touches[F],j=_[F];(!j||j.dist(N)>30)&&(this.aborted=!0)}}},SingleTapRecognizer.prototype.touchend=function(i,o,s){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),0===s.length){var _=!this.aborted&&this.centroid;if(this.reset(),_)return _}};var TapRecognizer=function(i){this.singleTap=new SingleTapRecognizer(i),this.numTaps=i.numTaps,this.reset()};TapRecognizer.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},TapRecognizer.prototype.touchstart=function(i,o,s){this.singleTap.touchstart(i,o,s)},TapRecognizer.prototype.touchmove=function(i,o,s){this.singleTap.touchmove(i,o,s)},TapRecognizer.prototype.touchend=function(i,o,s){var _=this.singleTap.touchend(i,o,s);if(_){var F=i.timeStamp-this.lastTime<500,N=!this.lastTap||30>this.lastTap.dist(_);if(F&&N||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}};var TapZoomHandler=function(){this._zoomIn=new TapRecognizer({numTouches:1,numTaps:2}),this._zoomOut=new TapRecognizer({numTouches:2,numTaps:1}),this.reset()};TapZoomHandler.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},TapZoomHandler.prototype.touchstart=function(i,o,s){this._zoomIn.touchstart(i,o,s),this._zoomOut.touchstart(i,o,s)},TapZoomHandler.prototype.touchmove=function(i,o,s){this._zoomIn.touchmove(i,o,s),this._zoomOut.touchmove(i,o,s)},TapZoomHandler.prototype.touchend=function(i,o,s){var _=this,F=this._zoomIn.touchend(i,o,s),N=this._zoomOut.touchend(i,o,s);return F?(this._active=!0,i.preventDefault(),setTimeout(function(){return _.reset()},0),{cameraAnimation:function(o){return o.easeTo({duration:300,zoom:o.getZoom()+1,around:o.unproject(F)},{originalEvent:i})}}):N?(this._active=!0,i.preventDefault(),setTimeout(function(){return _.reset()},0),{cameraAnimation:function(o){return o.easeTo({duration:300,zoom:o.getZoom()-1,around:o.unproject(N)},{originalEvent:i})}}):void 0},TapZoomHandler.prototype.touchcancel=function(){this.reset()},TapZoomHandler.prototype.enable=function(){this._enabled=!0},TapZoomHandler.prototype.disable=function(){this._enabled=!1,this.reset()},TapZoomHandler.prototype.isEnabled=function(){return this._enabled},TapZoomHandler.prototype.isActive=function(){return this._active};var MouseHandler=function(i){this.reset(),this._clickTolerance=i.clickTolerance||1};MouseHandler.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},MouseHandler.prototype._correctButton=function(i,o){return!1},MouseHandler.prototype._move=function(i,o){return{}},MouseHandler.prototype.mousedown=function(i,o){if(!this._lastPoint){var s=j.mouseButton(i);this._correctButton(i,s)&&(this._lastPoint=o,this._eventButton=s)}},MouseHandler.prototype.mousemoveWindow=function(i,o){var s=this._lastPoint;if(s&&(i.preventDefault(),!(!this._moved&&o.dist(s)<this._clickTolerance)))return this._moved=!0,this._lastPoint=o,this._move(s,o)},MouseHandler.prototype.mouseupWindow=function(i){j.mouseButton(i)===this._eventButton&&(this._moved&&j.suppressClick(),this.reset())},MouseHandler.prototype.enable=function(){this._enabled=!0},MouseHandler.prototype.disable=function(){this._enabled=!1,this.reset()},MouseHandler.prototype.isEnabled=function(){return this._enabled},MouseHandler.prototype.isActive=function(){return this._active};var tw=function(i){function MousePanHandler(){i.apply(this,arguments)}return i&&(MousePanHandler.__proto__=i),MousePanHandler.prototype=Object.create(i&&i.prototype),MousePanHandler.prototype.constructor=MousePanHandler,MousePanHandler.prototype.mousedown=function(o,s){i.prototype.mousedown.call(this,o,s),this._lastPoint&&(this._active=!0)},MousePanHandler.prototype._correctButton=function(i,o){return 0===o&&!i.ctrlKey},MousePanHandler.prototype._move=function(i,o){return{around:o,panDelta:o.sub(i)}},MousePanHandler}(MouseHandler),tT=function(i){function MouseRotateHandler(){i.apply(this,arguments)}return i&&(MouseRotateHandler.__proto__=i),MouseRotateHandler.prototype=Object.create(i&&i.prototype),MouseRotateHandler.prototype.constructor=MouseRotateHandler,MouseRotateHandler.prototype._correctButton=function(i,o){return 0===o&&i.ctrlKey||2===o},MouseRotateHandler.prototype._move=function(i,o){var s=(o.x-i.x)*.8;if(s)return this._active=!0,{bearingDelta:s}},MouseRotateHandler.prototype.contextmenu=function(i){i.preventDefault()},MouseRotateHandler}(MouseHandler),tk=function(i){function MousePitchHandler(){i.apply(this,arguments)}return i&&(MousePitchHandler.__proto__=i),MousePitchHandler.prototype=Object.create(i&&i.prototype),MousePitchHandler.prototype.constructor=MousePitchHandler,MousePitchHandler.prototype._correctButton=function(i,o){return 0===o&&i.ctrlKey||2===o},MousePitchHandler.prototype._move=function(i,o){var s=-((o.y-i.y)*.5);if(s)return this._active=!0,{pitchDelta:s}},MousePitchHandler.prototype.contextmenu=function(i){i.preventDefault()},MousePitchHandler}(MouseHandler),TouchPanHandler=function(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()};TouchPanHandler.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)},TouchPanHandler.prototype.touchstart=function(i,o,s){return this._calculateTransform(i,o,s)},TouchPanHandler.prototype.touchmove=function(i,o,s){if(this._active)return i.preventDefault(),this._calculateTransform(i,o,s)},TouchPanHandler.prototype.touchend=function(i,o,s){this._calculateTransform(i,o,s),this._active&&s.length<this._minTouches&&this.reset()},TouchPanHandler.prototype.touchcancel=function(){this.reset()},TouchPanHandler.prototype._calculateTransform=function(o,s,_){_.length>0&&(this._active=!0);var F=indexTouches(_,s),N=new i.Point(0,0),j=new i.Point(0,0),Z=0;for(var X in F){var $=F[X],ee=this._touches[X];ee&&(N._add($),j._add($.sub(ee)),Z++,F[X]=$)}if(this._touches=F,!(Z<this._minTouches)&&j.mag()){var et=j.div(Z);if(this._sum._add(et),!(this._sum.mag()<this._clickTolerance))return{around:N.div(Z),panDelta:et}}},TouchPanHandler.prototype.enable=function(){this._enabled=!0},TouchPanHandler.prototype.disable=function(){this._enabled=!1,this.reset()},TouchPanHandler.prototype.isEnabled=function(){return this._enabled},TouchPanHandler.prototype.isActive=function(){return this._active};var TwoTouchHandler=function(){this.reset()};function getTouchById(i,o,s){for(var _=0;_<i.length;_++)if(i[_].identifier===s)return o[_]}function getZoomDelta(i,o){return Math.log(i/o)/Math.LN2}TwoTouchHandler.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},TwoTouchHandler.prototype._start=function(i){},TwoTouchHandler.prototype._move=function(i,o,s){return{}},TwoTouchHandler.prototype.touchstart=function(i,o,s){this._firstTwoTouches||s.length<2||(this._firstTwoTouches=[s[0].identifier,s[1].identifier],this._start([o[0],o[1]]))},TwoTouchHandler.prototype.touchmove=function(i,o,s){if(this._firstTwoTouches){i.preventDefault();var _=this._firstTwoTouches,F=_[0],N=_[1],j=getTouchById(s,o,F),Z=getTouchById(s,o,N);if(j&&Z){var X=this._aroundCenter?null:j.add(Z).div(2);return this._move([j,Z],X,i)}}},TwoTouchHandler.prototype.touchend=function(i,o,s){if(this._firstTwoTouches){var _=this._firstTwoTouches,F=_[0],N=_[1],Z=getTouchById(s,o,F),X=getTouchById(s,o,N);Z&&X||(this._active&&j.suppressClick(),this.reset())}},TwoTouchHandler.prototype.touchcancel=function(){this.reset()},TwoTouchHandler.prototype.enable=function(i){this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around},TwoTouchHandler.prototype.disable=function(){this._enabled=!1,this.reset()},TwoTouchHandler.prototype.isEnabled=function(){return this._enabled},TwoTouchHandler.prototype.isActive=function(){return this._active};var tA=function(i){function TouchZoomHandler(){i.apply(this,arguments)}return i&&(TouchZoomHandler.__proto__=i),TouchZoomHandler.prototype=Object.create(i&&i.prototype),TouchZoomHandler.prototype.constructor=TouchZoomHandler,TouchZoomHandler.prototype.reset=function(){i.prototype.reset.call(this),delete this._distance,delete this._startDistance},TouchZoomHandler.prototype._start=function(i){this._startDistance=this._distance=i[0].dist(i[1])},TouchZoomHandler.prototype._move=function(i,o){var s=this._distance;if(this._distance=i[0].dist(i[1]),!(!this._active&&.1>Math.abs(getZoomDelta(this._distance,this._startDistance))))return this._active=!0,{zoomDelta:getZoomDelta(this._distance,s),pinchAround:o}},TouchZoomHandler}(TwoTouchHandler);function getBearingDelta(i,o){return 180*i.angleWith(o)/Math.PI}var tS=function(i){function TouchRotateHandler(){i.apply(this,arguments)}return i&&(TouchRotateHandler.__proto__=i),TouchRotateHandler.prototype=Object.create(i&&i.prototype),TouchRotateHandler.prototype.constructor=TouchRotateHandler,TouchRotateHandler.prototype.reset=function(){i.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},TouchRotateHandler.prototype._start=function(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])},TouchRotateHandler.prototype._move=function(i,o){var s=this._vector;if(this._vector=i[0].sub(i[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:getBearingDelta(this._vector,s),pinchAround:o}},TouchRotateHandler.prototype._isBelowThreshold=function(i){this._minDiameter=Math.min(this._minDiameter,i.mag());var o=Math.PI*this._minDiameter;return Math.abs(getBearingDelta(i,this._startVector))<25/o*360},TouchRotateHandler}(TwoTouchHandler);function isVertical(i){return Math.abs(i.y)>Math.abs(i.x)}var tM=function(i){function TouchPitchHandler(){i.apply(this,arguments)}return i&&(TouchPitchHandler.__proto__=i),TouchPitchHandler.prototype=Object.create(i&&i.prototype),TouchPitchHandler.prototype.constructor=TouchPitchHandler,TouchPitchHandler.prototype.reset=function(){i.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},TouchPitchHandler.prototype._start=function(i){this._lastPoints=i,isVertical(i[0].sub(i[1]))&&(this._valid=!1)},TouchPitchHandler.prototype._move=function(i,o,s){var _=i[0].sub(this._lastPoints[0]),F=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(_,F,s.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:-.5*((_.y+F.y)/2)}},TouchPitchHandler.prototype.gestureBeginsVertically=function(i,o,s){if(void 0!==this._valid)return this._valid;var _=i.mag()>=2,F=o.mag()>=2;if(_||F){if(!_||!F){if(void 0===this._firstMove&&(this._firstMove=s),s-this._firstMove<100)return;return!1}var N=i.y>0==o.y>0;return isVertical(i)&&isVertical(o)&&N}},TouchPitchHandler}(TwoTouchHandler),KeyboardHandler=function(){this._panStep=100,this._bearingStep=15,this._pitchStep=10};function easeOut(i){return i*(2-i)}KeyboardHandler.prototype.reset=function(){this._active=!1},KeyboardHandler.prototype.keydown=function(i){var o=this;if(!i.altKey&&!i.ctrlKey&&!i.metaKey){var s=0,_=0,F=0,N=0,j=0;switch(i.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:i.shiftKey?_=-1:(i.preventDefault(),N=-1);break;case 39:i.shiftKey?_=1:(i.preventDefault(),N=1);break;case 38:i.shiftKey?F=1:(i.preventDefault(),j=-1);break;case 40:i.shiftKey?F=-1:(i.preventDefault(),j=1);break;default:return}return{cameraAnimation:function(Z){var X=Z.getZoom();Z.easeTo({duration:300,easeId:"keyboardHandler",easing:easeOut,zoom:s?Math.round(X)+s*(i.shiftKey?2:1):X,bearing:Z.getBearing()+_*o._bearingStep,pitch:Z.getPitch()+F*o._pitchStep,offset:[-N*o._panStep,-j*o._panStep],center:Z.getCenter()},{originalEvent:i})}}}},KeyboardHandler.prototype.enable=function(){this._enabled=!0},KeyboardHandler.prototype.disable=function(){this._enabled=!1,this.reset()},KeyboardHandler.prototype.isEnabled=function(){return this._enabled},KeyboardHandler.prototype.isActive=function(){return this._active};var tC=1/450,ScrollZoomHandler=function(o,s){this._map=o,this._el=o.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=tC,i.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ScrollZoomHandler.prototype.setZoomRate=function(i){this._defaultZoomRate=i},ScrollZoomHandler.prototype.setWheelZoomRate=function(i){this._wheelZoomRate=i},ScrollZoomHandler.prototype.isEnabled=function(){return!!this._enabled},ScrollZoomHandler.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ScrollZoomHandler.prototype.isZooming=function(){return!!this._zooming},ScrollZoomHandler.prototype.enable=function(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&"center"===i.around)},ScrollZoomHandler.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ScrollZoomHandler.prototype.wheel=function(o){if(this.isEnabled()){var s=o.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY,_=i.browser.now(),F=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,0!==s&&s%4.000244140625==0?this._type="wheel":0!==s&&4>Math.abs(s)?this._type="trackpad":F>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,o)):!this._type&&(this._type=200>Math.abs(F*s)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),o.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=o,this._delta-=s,this._active||this._start(o)),o.preventDefault()}},ScrollZoomHandler.prototype._onTimeout=function(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)},ScrollZoomHandler.prototype._start=function(o){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var s=j.mousePos(this._el,o);this._around=i.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ScrollZoomHandler.prototype.renderFrame=function(){return this._onScrollFrame()},ScrollZoomHandler.prototype._onScrollFrame=function(){var o,s=this;if(this._frameId&&(this._frameId=null,this.isActive())){var _=this._map.transform;if(0!==this._delta){var F="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,N=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&0!==N&&(N=1/N);var j="number"==typeof this._targetZoom?_.zoomScale(this._targetZoom):_.scale;this._targetZoom=Math.min(_.maxZoom,Math.max(_.minZoom,_.scaleZoom(j*N))),"wheel"===this._type&&(this._startZoom=_.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Z="number"==typeof this._targetZoom?this._targetZoom:_.zoom,X=this._startZoom,$=this._easing,ee=!1;if("wheel"===this._type&&X&&$){var et=Math.min((i.browser.now()-this._lastWheelEventTime)/200,1),er=$(et);o=i.number(X,Z,er),et<1?this._frameId||(this._frameId=!0):ee=!0}else o=Z,ee=!0;return this._active=!0,ee&&(this._active=!1,this._finishTimeout=setTimeout(function(){s._zooming=!1,s._handler._triggerRenderFrame(),delete s._targetZoom,delete s._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ee,zoomDelta:o-_.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ScrollZoomHandler.prototype._smoothOutEasing=function(o){var s=i.ease;if(this._prevEase){var _=this._prevEase,F=(i.browser.now()-_.start)/_.duration,N=_.easing(F+.01)-_.easing(F),j=.27/Math.sqrt(N*N+1e-4)*.01,Z=Math.sqrt(.0729-j*j);s=i.bezier(j,Z,.25,1)}return this._prevEase={start:i.browser.now(),duration:o,easing:s},s},ScrollZoomHandler.prototype.reset=function(){this._active=!1};var DoubleClickZoomHandler=function(i,o){this._clickZoom=i,this._tapZoom=o};DoubleClickZoomHandler.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},DoubleClickZoomHandler.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},DoubleClickZoomHandler.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},DoubleClickZoomHandler.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ClickZoomHandler=function(){this.reset()};ClickZoomHandler.prototype.reset=function(){this._active=!1},ClickZoomHandler.prototype.dblclick=function(i,o){return i.preventDefault(),{cameraAnimation:function(s){s.easeTo({duration:300,zoom:s.getZoom()+(i.shiftKey?-1:1),around:s.unproject(o)},{originalEvent:i})}}},ClickZoomHandler.prototype.enable=function(){this._enabled=!0},ClickZoomHandler.prototype.disable=function(){this._enabled=!1,this.reset()},ClickZoomHandler.prototype.isEnabled=function(){return this._enabled},ClickZoomHandler.prototype.isActive=function(){return this._active};var TapDragZoomHandler=function(){this._tap=new TapRecognizer({numTouches:1,numTaps:1}),this.reset()};TapDragZoomHandler.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},TapDragZoomHandler.prototype.touchstart=function(i,o,s){!this._swipePoint&&(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?s.length>0&&(this._swipePoint=o[0],this._swipeTouch=s[0].identifier):this._tap.touchstart(i,o,s))},TapDragZoomHandler.prototype.touchmove=function(i,o,s){if(this._tapTime){if(this._swipePoint){if(s[0].identifier!==this._swipeTouch)return;var _=o[0],F=_.y-this._swipePoint.y;return this._swipePoint=_,i.preventDefault(),this._active=!0,{zoomDelta:F/128}}}else this._tap.touchmove(i,o,s)},TapDragZoomHandler.prototype.touchend=function(i,o,s){this._tapTime?this._swipePoint&&0===s.length&&this.reset():this._tap.touchend(i,o,s)&&(this._tapTime=i.timeStamp)},TapDragZoomHandler.prototype.touchcancel=function(){this.reset()},TapDragZoomHandler.prototype.enable=function(){this._enabled=!0},TapDragZoomHandler.prototype.disable=function(){this._enabled=!1,this.reset()},TapDragZoomHandler.prototype.isEnabled=function(){return this._enabled},TapDragZoomHandler.prototype.isActive=function(){return this._active};var DragPanHandler=function(i,o,s){this._el=i,this._mousePan=o,this._touchPan=s};DragPanHandler.prototype.enable=function(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},DragPanHandler.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},DragPanHandler.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},DragPanHandler.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var DragRotateHandler=function(i,o,s){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=o,this._mousePitch=s};DragRotateHandler.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},DragRotateHandler.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},DragRotateHandler.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},DragRotateHandler.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var TouchZoomRotateHandler=function(i,o,s,_){this._el=i,this._touchZoom=o,this._touchRotate=s,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0};TouchZoomRotateHandler.prototype.enable=function(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},TouchZoomRotateHandler.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},TouchZoomRotateHandler.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},TouchZoomRotateHandler.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},TouchZoomRotateHandler.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},TouchZoomRotateHandler.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var isMoving=function(i){return i.zoom||i.drag||i.pitch||i.rotate},tE=function(i){function RenderFrameEvent(){i.apply(this,arguments)}return i&&(RenderFrameEvent.__proto__=i),RenderFrameEvent.prototype=Object.create(i&&i.prototype),RenderFrameEvent.prototype.constructor=RenderFrameEvent,RenderFrameEvent}(i.Event);function hasChange(i){return i.panDelta&&i.panDelta.mag()||i.zoomDelta||i.bearingDelta||i.pitchDelta}var HandlerManager=function(o,s){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new HandlerInertia(o),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),i.bindAll(["handleEvent","handleWindowEvent"],this);var _=this._el;this._listeners=[[_,"touchstart",{passive:!1}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[i.window.document,"mousemove",{capture:!0}],[i.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[i.window,"blur",void 0]];for(var F=0,N=this._listeners;F<N.length;F+=1){var Z=N[F],X=Z[0],$=Z[1],ee=Z[2];j.addEventListener(X,$,X===i.window.document?this.handleWindowEvent:this.handleEvent,ee)}};HandlerManager.prototype.destroy=function(){for(var o=0,s=this._listeners;o<s.length;o+=1){var _=s[o],F=_[0],N=_[1],Z=_[2];j.removeEventListener(F,N,F===i.window.document?this.handleWindowEvent:this.handleEvent,Z)}},HandlerManager.prototype._addDefaultHandlers=function(i){var o=this._map,s=o.getCanvasContainer();this._add("mapEvent",new MapEventHandler(o,i));var _=o.boxZoom=new BoxZoomHandler(o,i);this._add("boxZoom",_);var F=new TapZoomHandler,N=new ClickZoomHandler;o.doubleClickZoom=new DoubleClickZoomHandler(N,F),this._add("tapZoom",F),this._add("clickZoom",N);var j=new TapDragZoomHandler;this._add("tapDragZoom",j);var Z=o.touchPitch=new tM;this._add("touchPitch",Z);var X=new tT(i),$=new tk(i);o.dragRotate=new DragRotateHandler(i,X,$),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",$,["mouseRotate"]);var ee=new tw(i),et=new TouchPanHandler(i);o.dragPan=new DragPanHandler(s,ee,et),this._add("mousePan",ee),this._add("touchPan",et,["touchZoom","touchRotate"]);var er=new tS,en=new tA;o.touchZoomRotate=new TouchZoomRotateHandler(s,en,er,j),this._add("touchRotate",er,["touchPan","touchZoom"]),this._add("touchZoom",en,["touchPan","touchRotate"]);var ei=o.scrollZoom=new ScrollZoomHandler(o,this);this._add("scrollZoom",ei,["mousePan"]);var eo=o.keyboard=new KeyboardHandler;this._add("keyboard",eo),this._add("blockableMapEvent",new BlockableMapEventHandler(o));for(var es=0,el=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];es<el.length;es+=1){var ec=el[es];i.interactive&&i[ec]&&o[ec].enable(i[ec])}},HandlerManager.prototype._add=function(i,o,s){this._handlers.push({handlerName:i,handler:o,allowed:s}),this._handlersById[i]=o},HandlerManager.prototype.stop=function(){if(!this._updatingCamera){for(var i=0,o=this._handlers;i<o.length;i+=1)o[i].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},HandlerManager.prototype.isActive=function(){for(var i=0,o=this._handlers;i<o.length;i+=1)if(o[i].handler.isActive())return!0;return!1},HandlerManager.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},HandlerManager.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},HandlerManager.prototype.isMoving=function(){return!!isMoving(this._eventsInProgress)||this.isZooming()},HandlerManager.prototype._blockedByActive=function(i,o,s){for(var _ in i)if(_!==s&&(!o||0>o.indexOf(_)))return!0;return!1},HandlerManager.prototype.handleWindowEvent=function(i){this.handleEvent(i,i.type+"Window")},HandlerManager.prototype._getMapTouches=function(i){for(var o=[],s=0;s<i.length;s+=1){var _=i[s],F=_.target;this._el.contains(F)&&o.push(_)}return o},HandlerManager.prototype.handleEvent=function(i,o){if("blur"===i.type){this.stop();return}this._updatingCamera=!0;for(var s="renderFrame"===i.type?void 0:i,_={needsRenderFrame:!1},F={},N={},Z=i.touches?this._getMapTouches(i.touches):void 0,X=Z?j.touchPos(this._el,Z):j.mousePos(this._el,i),$=0,ee=this._handlers;$<ee.length;$+=1){var et=ee[$],er=et.handlerName,en=et.handler,ei=et.allowed;if(en.isEnabled()){var eo=void 0;this._blockedByActive(N,ei,er)?en.reset():en[o||i.type]&&(eo=en[o||i.type](i,X,Z),this.mergeHandlerResult(_,F,eo,er,s),eo&&eo.needsRenderFrame&&this._triggerRenderFrame()),(eo||en.isActive())&&(N[er]=en)}}var es={};for(var el in this._previousActiveHandlers)N[el]||(es[el]=s);this._previousActiveHandlers=N,(Object.keys(es).length||hasChange(_))&&(this._changes.push([_,F,es]),this._triggerRenderFrame()),(Object.keys(N).length||hasChange(_))&&this._map._stop(!0),this._updatingCamera=!1;var ec=_.cameraAnimation;ec&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],ec(this._map))},HandlerManager.prototype.mergeHandlerResult=function(o,s,_,F,N){if(_){i.extend(o,_);var j={handlerName:F,originalEvent:_.originalEvent||N};void 0!==_.zoomDelta&&(s.zoom=j),void 0!==_.panDelta&&(s.drag=j),void 0!==_.pitchDelta&&(s.pitch=j),void 0!==_.bearingDelta&&(s.rotate=j)}},HandlerManager.prototype._applyChanges=function(){for(var o={},s={},_={},F=0,N=this._changes;F<N.length;F+=1){var j=N[F],Z=j[0],X=j[1],$=j[2];Z.panDelta&&(o.panDelta=(o.panDelta||new i.Point(0,0))._add(Z.panDelta)),Z.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+Z.zoomDelta),Z.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+Z.bearingDelta),Z.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+Z.pitchDelta),void 0!==Z.around&&(o.around=Z.around),void 0!==Z.pinchAround&&(o.pinchAround=Z.pinchAround),Z.noInertia&&(o.noInertia=Z.noInertia),i.extend(s,X),i.extend(_,$)}this._updateMapTransform(o,s,_),this._changes=[]},HandlerManager.prototype._updateMapTransform=function(i,o,s){var _=this._map,F=_.transform;if(!hasChange(i))return this._fireEvents(o,s);var N=i.panDelta,j=i.zoomDelta,Z=i.bearingDelta,X=i.pitchDelta,$=i.around,ee=i.pinchAround;void 0!==ee&&($=ee),_._stop(!0),$=$||_.transform.centerPoint;var et=F.pointLocation(N?$.sub(N):$);Z&&(F.bearing+=Z),X&&(F.pitch+=X),j&&(F.zoom+=j),F.setLocationAtPoint(et,$),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(o,s)},HandlerManager.prototype._fireEvents=function(o,s){var _,F=this,N=isMoving(this._eventsInProgress),j=isMoving(o),Z={};for(var X in o){var $=o[X].originalEvent;this._eventsInProgress[X]||(Z[X+"start"]=$),this._eventsInProgress[X]=o[X]}for(var ee in!N&&j&&this._fireEvent("movestart",j.originalEvent),Z)this._fireEvent(ee,Z[ee]);for(var et in o.rotate&&(this._bearingChanged=!0),j&&this._fireEvent("move",j.originalEvent),o){var er=o[et].originalEvent;this._fireEvent(et,er)}var en={};for(var ei in this._eventsInProgress){var eo=this._eventsInProgress[ei],es=eo.handlerName,el=eo.originalEvent;this._handlersById[es].isActive()||(delete this._eventsInProgress[ei],_=s[es]||el,en[ei+"end"]=_)}for(var ec in en)this._fireEvent(ec,en[ec]);var eu=isMoving(this._eventsInProgress);if((N||j)&&!eu){this._updatingCamera=!0;var ef=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),shouldSnapToNorth=function(i){return 0!==i&&-F._bearingSnap<i&&i<F._bearingSnap};ef?(shouldSnapToNorth(ef.bearing||this._map.getBearing())&&(ef.bearing=0),this._map.easeTo(ef,{originalEvent:_})):(this._map.fire(new i.Event("moveend",{originalEvent:_})),shouldSnapToNorth(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},HandlerManager.prototype._fireEvent=function(o,s){this._map.fire(new i.Event(o,s?{originalEvent:s}:{}))},HandlerManager.prototype._triggerRenderFrame=function(){var i=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(o){delete i._frameId,i.handleEvent(new tE("renderFrame",{timeStamp:o})),i._applyChanges()}))};var tL=function(o){function Camera(s,_){o.call(this),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=_.bearingSnap,i.bindAll(["_renderFrameCallback"],this)}return o&&(Camera.__proto__=o),Camera.prototype=Object.create(o&&o.prototype),Camera.prototype.constructor=Camera,Camera.prototype.getCenter=function(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)},Camera.prototype.setCenter=function(i,o){return this.jumpTo({center:i},o)},Camera.prototype.panBy=function(o,s,_){return o=i.Point.convert(o).mult(-1),this.panTo(this.transform.center,i.extend({offset:o},s),_)},Camera.prototype.panTo=function(o,s,_){return this.easeTo(i.extend({center:o},s),_)},Camera.prototype.getZoom=function(){return this.transform.zoom},Camera.prototype.setZoom=function(i,o){return this.jumpTo({zoom:i},o),this},Camera.prototype.zoomTo=function(o,s,_){return this.easeTo(i.extend({zoom:o},s),_)},Camera.prototype.zoomIn=function(i,o){return this.zoomTo(this.getZoom()+1,i,o),this},Camera.prototype.zoomOut=function(i,o){return this.zoomTo(this.getZoom()-1,i,o),this},Camera.prototype.getBearing=function(){return this.transform.bearing},Camera.prototype.setBearing=function(i,o){return this.jumpTo({bearing:i},o),this},Camera.prototype.getPadding=function(){return this.transform.padding},Camera.prototype.setPadding=function(i,o){return this.jumpTo({padding:i},o),this},Camera.prototype.rotateTo=function(o,s,_){return this.easeTo(i.extend({bearing:o},s),_)},Camera.prototype.resetNorth=function(o,s){return this.rotateTo(0,i.extend({duration:1e3},o),s),this},Camera.prototype.resetNorthPitch=function(o,s){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},o),s),this},Camera.prototype.snapToNorth=function(i,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,o):this},Camera.prototype.getPitch=function(){return this.transform.pitch},Camera.prototype.setPitch=function(i,o){return this.jumpTo({pitch:i},o),this},Camera.prototype.cameraForBounds=function(o,s){return o=i.LngLatBounds.convert(o),this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),0,s)},Camera.prototype._cameraForBoxAndBearing=function(o,s,_,F){var N={top:0,bottom:0,right:0,left:0};if("number"==typeof(F=i.extend({padding:N,offset:[0,0],maxZoom:this.transform.maxZoom},F)).padding){var j=F.padding;F.padding={top:j,bottom:j,right:j,left:j}}F.padding=i.extend(N,F.padding);var Z=this.transform,X=Z.padding,$=Z.project(i.LngLat.convert(o)),ee=Z.project(i.LngLat.convert(s)),et=$.rotate(-_*Math.PI/180),er=ee.rotate(-_*Math.PI/180),en=new i.Point(Math.max(et.x,er.x),Math.max(et.y,er.y)),ei=new i.Point(Math.min(et.x,er.x),Math.min(et.y,er.y)),eo=en.sub(ei),es=(Z.width-(X.left+X.right+F.padding.left+F.padding.right))/eo.x,el=(Z.height-(X.top+X.bottom+F.padding.top+F.padding.bottom))/eo.y;if(el<0||es<0){i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var ec=Math.min(Z.scaleZoom(Z.scale*Math.min(es,el)),F.maxZoom),eu=i.Point.convert(F.offset),ef=(F.padding.left-F.padding.right)/2,ed=(F.padding.top-F.padding.bottom)/2,eh=new i.Point(eu.x+ef,eu.y+ed).mult(Z.scale/Z.zoomScale(ec));return{center:Z.unproject($.add(ee).div(2).sub(eh)),zoom:ec,bearing:_}},Camera.prototype.fitBounds=function(i,o,s){return this._fitInternal(this.cameraForBounds(i,o),o,s)},Camera.prototype.fitScreenCoordinates=function(o,s,_,F,N){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.Point.convert(o)),this.transform.pointLocation(i.Point.convert(s)),_,F),F,N)},Camera.prototype._fitInternal=function(o,s,_){return o?(s=i.extend(o,s),delete s.padding,s.linear?this.easeTo(s,_):this.flyTo(s,_)):this},Camera.prototype.jumpTo=function(o,s){this.stop();var _=this.transform,F=!1,N=!1,j=!1;return"zoom"in o&&_.zoom!==+o.zoom&&(F=!0,_.zoom=+o.zoom),void 0!==o.center&&(_.center=i.LngLat.convert(o.center)),"bearing"in o&&_.bearing!==+o.bearing&&(N=!0,_.bearing=+o.bearing),"pitch"in o&&_.pitch!==+o.pitch&&(j=!0,_.pitch=+o.pitch),null==o.padding||_.isPaddingEqual(o.padding)||(_.padding=o.padding),this.fire(new i.Event("movestart",s)).fire(new i.Event("move",s)),F&&this.fire(new i.Event("zoomstart",s)).fire(new i.Event("zoom",s)).fire(new i.Event("zoomend",s)),N&&this.fire(new i.Event("rotatestart",s)).fire(new i.Event("rotate",s)).fire(new i.Event("rotateend",s)),j&&this.fire(new i.Event("pitchstart",s)).fire(new i.Event("pitch",s)).fire(new i.Event("pitchend",s)),this.fire(new i.Event("moveend",s))},Camera.prototype.easeTo=function(o,s){var _,F,N=this;this._stop(!1,o.easeId),(!1===(o=i.extend({offset:[0,0],duration:500,easing:i.ease},o)).animate||!o.essential&&i.browser.prefersReducedMotion)&&(o.duration=0);var j=this.transform,Z=this.getZoom(),X=this.getBearing(),$=this.getPitch(),ee=this.getPadding(),et="zoom"in o?+o.zoom:Z,er="bearing"in o?this._normalizeBearing(o.bearing,X):X,en="pitch"in o?+o.pitch:$,ei="padding"in o?o.padding:j.padding,eo=i.Point.convert(o.offset),es=j.centerPoint.add(eo),el=j.pointLocation(es),ec=i.LngLat.convert(o.center||el);this._normalizeCenter(ec);var eu=j.project(el),ef=j.project(ec).sub(eu),ed=j.zoomScale(et-Z);o.around&&(_=i.LngLat.convert(o.around),F=j.locationPoint(_));var eh={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||et!==Z,this._rotating=this._rotating||X!==er,this._pitching=this._pitching||en!==$,this._padding=!j.isPaddingEqual(ei),this._easeId=o.easeId,this._prepareEase(s,o.noMoveStart,eh),clearTimeout(this._easeEndTimeoutID),this._ease(function(o){if(N._zooming&&(j.zoom=i.number(Z,et,o)),N._rotating&&(j.bearing=i.number(X,er,o)),N._pitching&&(j.pitch=i.number($,en,o)),N._padding&&(j.interpolatePadding(ee,ei,o),es=j.centerPoint.add(eo)),_)j.setLocationAtPoint(_,F);else{var el=j.zoomScale(j.zoom-Z),ec=Math.pow(et>Z?Math.min(2,ed):Math.max(.5,ed),1-o),eh=j.unproject(eu.add(ef.mult(o*ec)).mult(el));j.setLocationAtPoint(j.renderWorldCopies?eh.wrap():eh,es)}N._fireMoveEvents(s)},function(i){N._afterEase(s,i)},o),this},Camera.prototype._prepareEase=function(o,s,_){void 0===_&&(_={}),this._moving=!0,s||_.moving||this.fire(new i.Event("movestart",o)),this._zooming&&!_.zooming&&this.fire(new i.Event("zoomstart",o)),this._rotating&&!_.rotating&&this.fire(new i.Event("rotatestart",o)),this._pitching&&!_.pitching&&this.fire(new i.Event("pitchstart",o))},Camera.prototype._fireMoveEvents=function(o){this.fire(new i.Event("move",o)),this._zooming&&this.fire(new i.Event("zoom",o)),this._rotating&&this.fire(new i.Event("rotate",o)),this._pitching&&this.fire(new i.Event("pitch",o))},Camera.prototype._afterEase=function(o,s){if(!this._easeId||!s||this._easeId!==s){delete this._easeId;var _=this._zooming,F=this._rotating,N=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new i.Event("zoomend",o)),F&&this.fire(new i.Event("rotateend",o)),N&&this.fire(new i.Event("pitchend",o)),this.fire(new i.Event("moveend",o))}},Camera.prototype.flyTo=function(o,s){var _=this;if(!o.essential&&i.browser.prefersReducedMotion){var F=i.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(F,s)}this.stop(),o=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},o);var N=this.transform,j=this.getZoom(),Z=this.getBearing(),X=this.getPitch(),$=this.getPadding(),ee="zoom"in o?i.clamp(+o.zoom,N.minZoom,N.maxZoom):j,et="bearing"in o?this._normalizeBearing(o.bearing,Z):Z,er="pitch"in o?+o.pitch:X,en="padding"in o?o.padding:N.padding,ei=N.zoomScale(ee-j),eo=i.Point.convert(o.offset),es=N.centerPoint.add(eo),el=N.pointLocation(es),ec=i.LngLat.convert(o.center||el);this._normalizeCenter(ec);var eu=N.project(el),ef=N.project(ec).sub(eu),ed=o.curve,eh=Math.max(N.width,N.height),ep=eh/ei,eg=ef.mag();if("minZoom"in o){var em=i.clamp(Math.min(o.minZoom,j,ee),N.minZoom,N.maxZoom);ed=Math.sqrt(eh/N.zoomScale(em-j)/eg*2)}var ey=ed*ed;function r(i){var o=(ep*ep-eh*eh+(i?-1:1)*ey*ey*eg*eg)/(2*(i?ep:eh)*ey*eg);return Math.log(Math.sqrt(o*o+1)-o)}function sinh(i){return(Math.exp(i)-Math.exp(-i))/2}function cosh(i){return(Math.exp(i)+Math.exp(-i))/2}function tanh(i){return sinh(i)/cosh(i)}var ev=r(0),w=function(i){return cosh(ev)/cosh(ev+ed*i)},u=function(i){return eh*((cosh(ev)*tanh(ev+ed*i)-sinh(ev))/ey)/eg},ex=(r(1)-ev)/ed;if(1e-6>Math.abs(eg)||!isFinite(ex)){if(1e-6>Math.abs(eh-ep))return this.easeTo(o,s);var e_=ep<eh?-1:1;ex=Math.abs(Math.log(ep/eh))/ed,u=function(){return 0},w=function(i){return Math.exp(e_*ed*i)}}if("duration"in o)o.duration=+o.duration;else{var ew="screenSpeed"in o?+o.screenSpeed/ed:+o.speed;o.duration=1e3*ex/ew}return o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=Z!==et,this._pitching=er!==X,this._padding=!N.isPaddingEqual(en),this._prepareEase(s,!1),this._ease(function(o){var F=o*ex,ei=1/w(F);N.zoom=1===o?ee:j+N.scaleZoom(ei),_._rotating&&(N.bearing=i.number(Z,et,o)),_._pitching&&(N.pitch=i.number(X,er,o)),_._padding&&(N.interpolatePadding($,en,o),es=N.centerPoint.add(eo));var el=1===o?ec:N.unproject(eu.add(ef.mult(u(F))).mult(ei));N.setLocationAtPoint(N.renderWorldCopies?el.wrap():el,es),_._fireMoveEvents(s)},function(){return _._afterEase(s)},o),this},Camera.prototype.isEasing=function(){return!!this._easeFrameId},Camera.prototype.stop=function(){return this._stop()},Camera.prototype._stop=function(i,o){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var s=this._onEaseEnd;delete this._onEaseEnd,s.call(this,o)}if(!i){var _=this.handlers;_&&_.stop()}return this},Camera.prototype._ease=function(o,s,_){!1===_.animate||0===_.duration?(o(1),s()):(this._easeStart=i.browser.now(),this._easeOptions=_,this._onEaseFrame=o,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Camera.prototype._renderFrameCallback=function(){var o=Math.min((i.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Camera.prototype._normalizeBearing=function(o,s){var _=Math.abs((o=i.wrap(o,-180,180))-s);return Math.abs(o-360-s)<_&&(o-=360),Math.abs(o+360-s)<_&&(o+=360),o},Camera.prototype._normalizeCenter=function(i){var o=this.transform;if(o.renderWorldCopies&&!o.lngRange){var s=i.lng-o.center.lng;i.lng+=s>180?-360:s<-180?360:0}},Camera}(i.Evented),AttributionControl=function(o){void 0===o&&(o={}),this.options=o,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};AttributionControl.prototype.getDefaultPosition=function(){return"bottom-right"},AttributionControl.prototype.onAdd=function(i){var o=this.options&&this.options.compact;return this._map=i,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=j.create("div","mapboxgl-ctrl-attrib-inner",this._container),o&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===o&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},AttributionControl.prototype.onRemove=function(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},AttributionControl.prototype._updateEditLink=function(){var o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));var s=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.config.ACCESS_TOKEN}];if(o){var _=s.reduce(function(i,o,_){return o.value&&(i+=o.key+"="+o.value+(_<s.length-1?"&":"")),i},"?");o.href=i.config.FEEDBACK_URL+"/"+_+(this._map._hash?this._map._hash.getHashString(!0):""),o.rel="noopener nofollow"}},AttributionControl.prototype._updateData=function(i){i&&("metadata"===i.sourceDataType||"style"===i.dataType)&&(this._updateAttributions(),this._updateEditLink())},AttributionControl.prototype._updateAttributions=function(){if(this._map.style){var i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(function(i){return"string"!=typeof i?"":i})):"string"==typeof this.options.customAttribution&&i.push(this.options.customAttribution)),this._map.style.stylesheet){var o=this._map.style.stylesheet;this.styleOwner=o.owner,this.styleId=o.id}var s=this._map.style.sourceCaches;for(var _ in s){var F=s[_];if(F.used){var N=F.getSource();N.attribution&&0>i.indexOf(N.attribution)&&i.push(N.attribution)}}i.sort(function(i,o){return i.length-o.length});var j=(i=i.filter(function(o,s){for(var _=s+1;_<i.length;_++)if(i[_].indexOf(o)>=0)return!1;return!0})).join(" | ");j!==this._attribHTML&&(this._attribHTML=j,i.length?(this._innerContainer.innerHTML=j,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},AttributionControl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var LogoControl=function(){i.bindAll(["_updateLogo"],this),i.bindAll(["_updateCompact"],this)};LogoControl.prototype.onAdd=function(i){this._map=i,this._container=j.create("div","mapboxgl-ctrl");var o=j.create("a","mapboxgl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://www.mapbox.com/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},LogoControl.prototype.onRemove=function(){j.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},LogoControl.prototype.getDefaultPosition=function(){return"bottom-left"},LogoControl.prototype._updateLogo=function(i){i&&"metadata"!==i.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},LogoControl.prototype._logoRequired=function(){if(this._map.style){var i=this._map.style.sourceCaches;for(var o in i)if(i[o].getSource().mapbox_logo)return!0;return!1}},LogoControl.prototype._updateCompact=function(){var i=this._container.children;if(i.length){var o=i[0];this._map.getCanvasContainer().offsetWidth<250?o.classList.add("mapboxgl-compact"):o.classList.remove("mapboxgl-compact")}};var TaskQueue=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};TaskQueue.prototype.add=function(i){var o=++this._id;return this._queue.push({callback:i,id:o,cancelled:!1}),o},TaskQueue.prototype.remove=function(i){for(var o=this._currentlyRunning,s=o?this._queue.concat(o):this._queue,_=0;_<s.length;_+=1){var F=s[_];if(F.id===i){F.cancelled=!0;return}}},TaskQueue.prototype.run=function(i){void 0===i&&(i=0);var o=this._currentlyRunning=this._queue;this._queue=[];for(var s=0;s<o.length;s+=1){var _=o[s];if(!_.cancelled&&(_.callback(i),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},TaskQueue.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var tP={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},tI=i.window.HTMLImageElement,tO=i.window.HTMLElement,tD=i.window.ImageBitmap,tR={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},tB=function(o){function Map(s){var _=this;if(null!=(s=i.extend({},tR,s)).minZoom&&null!=s.maxZoom&&s.minZoom>s.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=s.minPitch&&null!=s.maxPitch&&s.minPitch>s.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=s.minPitch&&s.minPitch<0)throw Error("minPitch must be greater than or equal to 0");if(null!=s.maxPitch&&s.maxPitch>60)throw Error("maxPitch must be less than or equal to 60");var F=new Transform(s.minZoom,s.maxZoom,s.minPitch,s.maxPitch,s.renderWorldCopies);if(o.call(this,F,s),this._interactive=s.interactive,this._maxTileCacheSize=s.maxTileCacheSize,this._failIfMajorPerformanceCaveat=s.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=s.preserveDrawingBuffer,this._antialias=s.antialias,this._trackResize=s.trackResize,this._bearingSnap=s.bearingSnap,this._refreshExpiredTiles=s.refreshExpiredTiles,this._fadeDuration=s.fadeDuration,this._crossSourceCollisions=s.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=s.collectResourceTiming,this._renderTaskQueue=new TaskQueue,this._controls=[],this._mapId=i.uniqueId(),this._locale=i.extend({},tP,s.locale),this._requestManager=new i.RequestManager(s.transformRequest,s.accessToken),"string"==typeof s.container){if(this._container=i.window.document.getElementById(s.container),!this._container)throw Error("Container '"+s.container+"' not found.")}else if(s.container instanceof tO)this._container=s.container;else throw Error("Invalid type: 'container' must be a String or HTMLElement.");if(s.maxBounds&&this.setMaxBounds(s.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return _._update(!1)}),this.on("moveend",function(){return _._update(!1)}),this.on("zoom",function(){return _._update(!0)}),void 0!==i.window&&(i.window.addEventListener("online",this._onWindowOnline,!1),i.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new HandlerManager(this,s);var N="string"==typeof s.hash&&s.hash||void 0;this._hash=s.hash&&new Hash(N).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}),s.bounds&&(this.resize(),this.fitBounds(s.bounds,i.extend({},s.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=s.localIdeographFontFamily,s.style&&this.setStyle(s.style,{localIdeographFontFamily:s.localIdeographFontFamily}),s.attributionControl&&this.addControl(new AttributionControl({customAttribution:s.customAttribution})),this.addControl(new LogoControl,s.logoPosition),this.on("style.load",function(){_.transform.unmodified&&_.jumpTo(_.style.stylesheet)}),this.on("data",function(o){_._update("style"===o.dataType),_.fire(new i.Event(o.dataType+"data",o))}),this.on("dataloading",function(o){_.fire(new i.Event(o.dataType+"dataloading",o))})}o&&(Map.__proto__=o),Map.prototype=Object.create(o&&o.prototype),Map.prototype.constructor=Map;var s={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Map.prototype._getMapId=function(){return this._mapId},Map.prototype.addControl=function(o,s){if(void 0===s&&o.getDefaultPosition&&(s=o.getDefaultPosition()),void 0===s&&(s="top-right"),!o||!o.onAdd)return this.fire(new i.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var _=o.onAdd(this);this._controls.push(o);var F=this._controlPositions[s];return -1!==s.indexOf("bottom")?F.insertBefore(_,F.firstChild):F.appendChild(_),this},Map.prototype.removeControl=function(o){if(!o||!o.onRemove)return this.fire(new i.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var s=this._controls.indexOf(o);return s>-1&&this._controls.splice(s,1),o.onRemove(this),this},Map.prototype.resize=function(o){var s=this._containerDimensions(),_=s[0],F=s[1];this._resizeCanvas(_,F),this.transform.resize(_,F),this.painter.resize(_,F);var N=!this._moving;return N&&(this.stop(),this.fire(new i.Event("movestart",o)).fire(new i.Event("move",o))),this.fire(new i.Event("resize",o)),N&&this.fire(new i.Event("moveend",o)),this},Map.prototype.getBounds=function(){return this.transform.getBounds()},Map.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Map.prototype.setMaxBounds=function(o){return this.transform.setMaxBounds(i.LngLatBounds.convert(o)),this._update()},Map.prototype.setMinZoom=function(i){if((i=null==i?-2:i)>=-2&&i<=this.transform.maxZoom)return this.transform.minZoom=i,this._update(),this.getZoom()<i&&this.setZoom(i),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive")},Map.prototype.getMinZoom=function(){return this.transform.minZoom},Map.prototype.setMaxZoom=function(i){if((i=null==i?22:i)>=this.transform.minZoom)return this.transform.maxZoom=i,this._update(),this.getZoom()>i&&this.setZoom(i),this;throw Error("maxZoom must be greater than the current minZoom")},Map.prototype.getMaxZoom=function(){return this.transform.maxZoom},Map.prototype.setMinPitch=function(i){if((i=null==i?0:i)<0)throw Error("minPitch must be greater than or equal to 0");if(i>=0&&i<=this.transform.maxPitch)return this.transform.minPitch=i,this._update(),this.getPitch()<i&&this.setPitch(i),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive")},Map.prototype.getMinPitch=function(){return this.transform.minPitch},Map.prototype.setMaxPitch=function(i){if((i=null==i?60:i)>60)throw Error("maxPitch must be less than or equal to 60");if(i>=this.transform.minPitch)return this.transform.maxPitch=i,this._update(),this.getPitch()>i&&this.setPitch(i),this;throw Error("maxPitch must be greater than the current minPitch")},Map.prototype.getMaxPitch=function(){return this.transform.maxPitch},Map.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Map.prototype.setRenderWorldCopies=function(i){return this.transform.renderWorldCopies=i,this._update()},Map.prototype.project=function(o){return this.transform.locationPoint(i.LngLat.convert(o))},Map.prototype.unproject=function(o){return this.transform.pointLocation(i.Point.convert(o))},Map.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Map.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Map.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Map.prototype._createDelegatedListener=function(i,o,s){var _,F=this;if("mouseenter"===i||"mouseover"===i){var N=!1;return{layer:o,listener:s,delegates:{mousemove:function(_){var j=F.getLayer(o)?F.queryRenderedFeatures(_.point,{layers:[o]}):[];j.length?N||(N=!0,s.call(F,new tx(i,F,_.originalEvent,{features:j}))):N=!1},mouseout:function(){N=!1}}}}if("mouseleave"!==i&&"mouseout"!==i)return{layer:o,listener:s,delegates:((_={})[i]=function(i){var _=F.getLayer(o)?F.queryRenderedFeatures(i.point,{layers:[o]}):[];_.length&&(i.features=_,s.call(F,i),delete i.features)},_)};var j=!1;return{layer:o,listener:s,delegates:{mousemove:function(_){(F.getLayer(o)?F.queryRenderedFeatures(_.point,{layers:[o]}):[]).length?j=!0:j&&(j=!1,s.call(F,new tx(i,F,_.originalEvent)))},mouseout:function(o){j&&(j=!1,s.call(F,new tx(i,F,o.originalEvent)))}}}},Map.prototype.on=function(i,s,_){if(void 0===_)return o.prototype.on.call(this,i,s);var F=this._createDelegatedListener(i,s,_);for(var N in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[i]=this._delegatedListeners[i]||[],this._delegatedListeners[i].push(F),F.delegates)this.on(N,F.delegates[N]);return this},Map.prototype.once=function(i,s,_){if(void 0===_)return o.prototype.once.call(this,i,s);var F=this._createDelegatedListener(i,s,_);for(var N in F.delegates)this.once(N,F.delegates[N]);return this},Map.prototype.off=function(i,s,_){var F=this;return void 0===_?o.prototype.off.call(this,i,s):(this._delegatedListeners&&this._delegatedListeners[i]&&function(o){for(var N=o[i],j=0;j<N.length;j++){var Z=N[j];if(Z.layer===s&&Z.listener===_){for(var X in Z.delegates)F.off(X,Z.delegates[X]);return N.splice(j,1),F}}}(this._delegatedListeners),this)},Map.prototype.queryRenderedFeatures=function(o,s){if(!this.style)return[];if(void 0!==s||void 0===o||o instanceof i.Point||Array.isArray(o)||(s=o,o=void 0),s=s||{},(o=o||[[0,0],[this.transform.width,this.transform.height]])instanceof i.Point||"number"==typeof o[0])_=[i.Point.convert(o)];else{var _,F=i.Point.convert(o[0]),N=i.Point.convert(o[1]);_=[F,new i.Point(N.x,F.y),N,new i.Point(F.x,N.y),F]}return this.style.queryRenderedFeatures(_,s,this.transform)},Map.prototype.querySourceFeatures=function(i,o){return this.style.querySourceFeatures(i,o)},Map.prototype.setStyle=function(o,s){return!1!==(s=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},s)).diff&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&o?(this._diffStyle(o,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(o,s))},Map.prototype._getUIString=function(i){var o=this._locale[i];if(null==o)throw Error("Missing UI string '"+i+"'");return o},Map.prototype._updateStyle=function(i,o){return(this.style&&(this.style.setEventedParent(null),this.style._remove()),i)?(this.style=new tt(this,o||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof i?this.style.loadURL(i):this.style.loadJSON(i)):delete this.style,this},Map.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new tt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Map.prototype._diffStyle=function(o,s){var _=this;if("string"==typeof o){var F=this._requestManager.normalizeStyleURL(o),N=this._requestManager.transformRequest(F,i.ResourceType.Style);i.getJSON(N,function(o,F){o?_.fire(new i.ErrorEvent(o)):F&&_._updateDiff(F,s)})}else"object"==typeof o&&this._updateDiff(o,s)},Map.prototype._updateDiff=function(o,s){try{this.style.setState(o)&&this._update(!0)}catch(_){i.warnOnce("Unable to perform style diff: "+(_.message||_.error||_)+".  Rebuilding the style from scratch."),this._updateStyle(o,s)}},Map.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Map.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},Map.prototype.addSource=function(i,o){return this._lazyInitEmptyStyle(),this.style.addSource(i,o),this._update(!0)},Map.prototype.isSourceLoaded=function(o){var s=this.style&&this.style.sourceCaches[o];if(void 0===s){this.fire(new i.ErrorEvent(Error("There is no source with ID '"+o+"'")));return}return s.loaded()},Map.prototype.areTilesLoaded=function(){var i=this.style&&this.style.sourceCaches;for(var o in i){var s=i[o]._tiles;for(var _ in s){var F=s[_];if(!("loaded"===F.state||"errored"===F.state))return!1}}return!0},Map.prototype.addSourceType=function(i,o,s){return this._lazyInitEmptyStyle(),this.style.addSourceType(i,o,s)},Map.prototype.removeSource=function(i){return this.style.removeSource(i),this._update(!0)},Map.prototype.getSource=function(i){return this.style.getSource(i)},Map.prototype.addImage=function(o,s,_){void 0===_&&(_={});var F=_.pixelRatio;void 0===F&&(F=1);var N=_.sdf;void 0===N&&(N=!1);var j=_.stretchX,Z=_.stretchY,X=_.content;if(this._lazyInitEmptyStyle(),s instanceof tI||tD&&s instanceof tD){var $=i.browser.getImageData(s),ee=$.width,et=$.height,er=$.data;this.style.addImage(o,{data:new i.RGBAImage({width:ee,height:et},er),pixelRatio:F,stretchX:j,stretchY:Z,content:X,sdf:N,version:0})}else{if(void 0===s.width||void 0===s.height)return this.fire(new i.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var en=s.width,ei=s.height,eo=s.data;this.style.addImage(o,{data:new i.RGBAImage({width:en,height:ei},new Uint8Array(eo)),pixelRatio:F,stretchX:j,stretchY:Z,content:X,sdf:N,version:0,userImage:s}),s.onAdd&&s.onAdd(this,o)}},Map.prototype.updateImage=function(o,s){var _=this.style.getImage(o);if(!_)return this.fire(new i.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var F=s instanceof tI||tD&&s instanceof tD?i.browser.getImageData(s):s,N=F.width,j=F.height,Z=F.data;if(void 0===N||void 0===j)return this.fire(new i.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(N!==_.data.width||j!==_.data.height)return this.fire(new i.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image")));var X=!(s instanceof tI||tD&&s instanceof tD);_.data.replace(Z,X),this.style.updateImage(o,_)},Map.prototype.hasImage=function(o){return o?!!this.style.getImage(o):(this.fire(new i.ErrorEvent(Error("Missing required image id"))),!1)},Map.prototype.removeImage=function(i){this.style.removeImage(i)},Map.prototype.loadImage=function(o,s){i.getImage(this._requestManager.transformRequest(o,i.ResourceType.Image),s)},Map.prototype.listImages=function(){return this.style.listImages()},Map.prototype.addLayer=function(i,o){return this._lazyInitEmptyStyle(),this.style.addLayer(i,o),this._update(!0)},Map.prototype.moveLayer=function(i,o){return this.style.moveLayer(i,o),this._update(!0)},Map.prototype.removeLayer=function(i){return this.style.removeLayer(i),this._update(!0)},Map.prototype.getLayer=function(i){return this.style.getLayer(i)},Map.prototype.setLayerZoomRange=function(i,o,s){return this.style.setLayerZoomRange(i,o,s),this._update(!0)},Map.prototype.setFilter=function(i,o,s){return void 0===s&&(s={}),this.style.setFilter(i,o,s),this._update(!0)},Map.prototype.getFilter=function(i){return this.style.getFilter(i)},Map.prototype.setPaintProperty=function(i,o,s,_){return void 0===_&&(_={}),this.style.setPaintProperty(i,o,s,_),this._update(!0)},Map.prototype.getPaintProperty=function(i,o){return this.style.getPaintProperty(i,o)},Map.prototype.setLayoutProperty=function(i,o,s,_){return void 0===_&&(_={}),this.style.setLayoutProperty(i,o,s,_),this._update(!0)},Map.prototype.getLayoutProperty=function(i,o){return this.style.getLayoutProperty(i,o)},Map.prototype.setLight=function(i,o){return void 0===o&&(o={}),this._lazyInitEmptyStyle(),this.style.setLight(i,o),this._update(!0)},Map.prototype.getLight=function(){return this.style.getLight()},Map.prototype.setFeatureState=function(i,o){return this.style.setFeatureState(i,o),this._update()},Map.prototype.removeFeatureState=function(i,o){return this.style.removeFeatureState(i,o),this._update()},Map.prototype.getFeatureState=function(i){return this.style.getFeatureState(i)},Map.prototype.getContainer=function(){return this._container},Map.prototype.getCanvasContainer=function(){return this._canvasContainer},Map.prototype.getCanvas=function(){return this._canvas},Map.prototype._containerDimensions=function(){var i=0,o=0;return this._container&&(i=this._container.clientWidth||400,o=this._container.clientHeight||300),[i,o]},Map.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==i.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&i.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Map.prototype._setupContainer=function(){var i=this._container;i.classList.add("mapboxgl-map"),(this._missingCSSCanary=j.create("div","mapboxgl-canary",i)).style.visibility="hidden",this._detectMissingCSS();var o=this._canvasContainer=j.create("div","mapboxgl-canvas-container",i);this._interactive&&o.classList.add("mapboxgl-interactive"),this._canvas=j.create("canvas","mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var s=this._containerDimensions();this._resizeCanvas(s[0],s[1]);var _=this._controlContainer=j.create("div","mapboxgl-control-container",i),F=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(i){F[i]=j.create("div","mapboxgl-ctrl-"+i,_)})},Map.prototype._resizeCanvas=function(o,s){var _=i.browser.devicePixelRatio||1;this._canvas.width=_*o,this._canvas.height=_*s,this._canvas.style.width=o+"px",this._canvas.style.height=s+"px"},Map.prototype._setupPainter=function(){var o=i.extend({},N.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._canvas.getContext("webgl",o)||this._canvas.getContext("experimental-webgl",o);if(!s){this.fire(new i.ErrorEvent(Error("Failed to initialize WebGL")));return}this.painter=new Painter(s,this.transform),i.webpSupported.testSupport(s)},Map.prototype._contextLost=function(o){o.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.Event("webglcontextlost",{originalEvent:o}))},Map.prototype._contextRestored=function(o){this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:o}))},Map.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Map.prototype._update=function(i){return this.style&&(this._styleDirty=this._styleDirty||i,this._sourcesDirty=!0,this.triggerRepaint()),this},Map.prototype._requestRenderFrame=function(i){return this._update(),this._renderTaskQueue.add(i)},Map.prototype._cancelRenderFrame=function(i){this._renderTaskQueue.remove(i)},Map.prototype._render=function(o){var s,_=this,F=0,N=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(s=N.createQueryEXT(),N.beginQueryEXT(N.TIME_ELAPSED_EXT,s),F=i.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(o),!this._removed){var j=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Z=this.transform.zoom,X=i.browser.now();this.style.zoomHistory.update(Z,X);var $=new i.EvaluationParameters(Z,{now:X,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ee=$.crossFadingFactor();(1!==ee||ee!==this._crossFadingFactor)&&(j=!0,this._crossFadingFactor=ee),this.style.update($)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new i.Event("load"))),this.style&&(this.style.hasTransitions()||j)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var et=i.browser.now()-F;N.endQueryEXT(N.TIME_ELAPSED_EXT,s),setTimeout(function(){var o=N.getQueryObjectEXT(s,N.QUERY_RESULT_EXT)/1e6;N.deleteQueryEXT(s),_.fire(new i.Event("gpu-timing-frame",{cpuTime:et,gpuTime:o}))},50)}if(this.listens("gpu-timing-layer")){var er=this.painter.collectGpuTimers();setTimeout(function(){var o=_.painter.queryGpuTimers(er);_.fire(new i.Event("gpu-timing-layer",{layerTimes:o}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new i.Event("idle"))),this}},Map.prototype.remove=function(){this._hash&&this._hash.remove();for(var o=0,s=this._controls;o<s.length;o+=1)s[o].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==i.window&&(i.window.removeEventListener("resize",this._onWindowResize,!1),i.window.removeEventListener("online",this._onWindowOnline,!1));var _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),removeNode(this._canvasContainer),removeNode(this._controlContainer),removeNode(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new i.Event("remove"))},Map.prototype.triggerRepaint=function(){var o=this;this.style&&!this._frame&&(this._frame=i.browser.frame(function(i){o._frame=null,o._render(i)}))},Map.prototype._onWindowOnline=function(){this._update()},Map.prototype._onWindowResize=function(i){this._trackResize&&this.resize({originalEvent:i})._update()},s.showTileBoundaries.get=function(){return!!this._showTileBoundaries},s.showTileBoundaries.set=function(i){this._showTileBoundaries!==i&&(this._showTileBoundaries=i,this._update())},s.showPadding.get=function(){return!!this._showPadding},s.showPadding.set=function(i){this._showPadding!==i&&(this._showPadding=i,this._update())},s.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},s.showCollisionBoxes.set=function(i){this._showCollisionBoxes!==i&&(this._showCollisionBoxes=i,i?this.style._generateCollisionBoxes():this._update())},s.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},s.showOverdrawInspector.set=function(i){this._showOverdrawInspector!==i&&(this._showOverdrawInspector=i,this._update())},s.repaint.get=function(){return!!this._repaint},s.repaint.set=function(i){this._repaint!==i&&(this._repaint=i,this.triggerRepaint())},s.vertices.get=function(){return!!this._vertices},s.vertices.set=function(i){this._vertices=i,this._update()},Map.prototype._setCacheLimits=function(o,s){i.setCacheLimits(o,s)},s.version.get=function(){return i.version},Object.defineProperties(Map.prototype,s),Map}(tL);function removeNode(i){i.parentNode&&i.parentNode.removeChild(i)}var tF={showCompass:!0,showZoom:!0,visualizePitch:!1},NavigationControl=function(o){var s=this;this.options=i.extend({},tF,o),this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(i){return i.preventDefault()}),this.options.showZoom&&(i.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(i){return s._map.zoomIn({},{originalEvent:i})}),j.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(i){return s._map.zoomOut({},{originalEvent:i})}),j.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(i){s.options.visualizePitch?s._map.resetNorthPitch({},{originalEvent:i}):s._map.resetNorth({},{originalEvent:i})}),this._compassIcon=j.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};NavigationControl.prototype._updateZoomButtons=function(){var i=this._map.getZoom();this._zoomInButton.disabled=i===this._map.getMaxZoom(),this._zoomOutButton.disabled=i===this._map.getMinZoom()},NavigationControl.prototype._rotateCompassArrow=function(){var i=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=i},NavigationControl.prototype.onAdd=function(i){return this._map=i,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new MouseRotateWrapper(this._map,this._compass,this.options.visualizePitch)),this._container},NavigationControl.prototype.onRemove=function(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},NavigationControl.prototype._createButton=function(i,o){var s=j.create("button",i,this._container);return s.type="button",s.addEventListener("click",o),s},NavigationControl.prototype._setButtonTitle=function(i,o){var s=this._map._getUIString("NavigationControl."+o);i.title=s,i.setAttribute("aria-label",s)};var MouseRotateWrapper=function(o,s,_){void 0===_&&(_=!1),this._clickTolerance=10,this.element=s,this.mouseRotate=new tT({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,_&&(this.mousePitch=new tk({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),i.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),j.addEventListener(s,"mousedown",this.mousedown),j.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(s,"touchmove",this.touchmove),j.addEventListener(s,"touchend",this.touchend),j.addEventListener(s,"touchcancel",this.reset)};function smartWrap(o,s,_){if(o=new i.LngLat(o.lng,o.lat),s){var F=new i.LngLat(o.lng-360,o.lat),N=new i.LngLat(o.lng+360,o.lat),j=_.locationPoint(o).distSqr(s);_.locationPoint(F).distSqr(s)<j?o=F:_.locationPoint(N).distSqr(s)<j&&(o=N)}for(;Math.abs(o.lng-_.center.lng)>180;){var Z=_.locationPoint(o);if(Z.x>=0&&Z.y>=0&&Z.x<=_.width&&Z.y<=_.height)break;o.lng>_.center.lng?o.lng-=360:o.lng+=360}return o}MouseRotateWrapper.prototype.down=function(i,o){this.mouseRotate.mousedown(i,o),this.mousePitch&&this.mousePitch.mousedown(i,o),j.disableDrag()},MouseRotateWrapper.prototype.move=function(i,o){var s=this.map,_=this.mouseRotate.mousemoveWindow(i,o);if(_&&_.bearingDelta&&s.setBearing(s.getBearing()+_.bearingDelta),this.mousePitch){var F=this.mousePitch.mousemoveWindow(i,o);F&&F.pitchDelta&&s.setPitch(s.getPitch()+F.pitchDelta)}},MouseRotateWrapper.prototype.off=function(){var i=this.element;j.removeEventListener(i,"mousedown",this.mousedown),j.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(i,"touchmove",this.touchmove),j.removeEventListener(i,"touchend",this.touchend),j.removeEventListener(i,"touchcancel",this.reset),this.offTemp()},MouseRotateWrapper.prototype.offTemp=function(){j.enableDrag(),j.removeEventListener(i.window,"mousemove",this.mousemove),j.removeEventListener(i.window,"mouseup",this.mouseup)},MouseRotateWrapper.prototype.mousedown=function(o){this.down(i.extend({},o,{ctrlKey:!0,preventDefault:function(){return o.preventDefault()}}),j.mousePos(this.element,o)),j.addEventListener(i.window,"mousemove",this.mousemove),j.addEventListener(i.window,"mouseup",this.mouseup)},MouseRotateWrapper.prototype.mousemove=function(i){this.move(i,j.mousePos(this.element,i))},MouseRotateWrapper.prototype.mouseup=function(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()},MouseRotateWrapper.prototype.touchstart=function(i){1!==i.targetTouches.length?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return i.preventDefault()}},this._startPos))},MouseRotateWrapper.prototype.touchmove=function(i){1!==i.targetTouches.length?this.reset():(this._lastPos=j.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:function(){return i.preventDefault()}},this._lastPos))},MouseRotateWrapper.prototype.touchend=function(i){0===i.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},MouseRotateWrapper.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var tz={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function applyAnchorClass(i,o,s){var _=i.classList;for(var F in tz)_.remove("mapboxgl-"+s+"-anchor-"+F);_.add("mapboxgl-"+s+"-anchor-"+o)}var tN=function(o){function Marker(s,_){var F=this;if(o.call(this),(s instanceof i.window.HTMLElement||_)&&(s=i.extend({element:s},_)),i.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._draggable=s&&s.draggable||!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&"auto"!==s.pitchAlignment?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=i.Point.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div"),this._element.setAttribute("aria-label","Map marker");var N=j.createNS("http://www.w3.org/2000/svg","svg");N.setAttributeNS(null,"display","block"),N.setAttributeNS(null,"height","41px"),N.setAttributeNS(null,"width","27px"),N.setAttributeNS(null,"viewBox","0 0 27 41");var Z=j.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"stroke","none"),Z.setAttributeNS(null,"stroke-width","1"),Z.setAttributeNS(null,"fill","none"),Z.setAttributeNS(null,"fill-rule","evenodd");var X=j.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"fill-rule","nonzero");var $=j.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"transform","translate(3.0, 29.0)"),$.setAttributeNS(null,"fill","#000000");for(var ee=0,et=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ee<et.length;ee+=1){var er=et[ee],en=j.createNS("http://www.w3.org/2000/svg","ellipse");en.setAttributeNS(null,"opacity","0.04"),en.setAttributeNS(null,"cx","10.5"),en.setAttributeNS(null,"cy","5.80029008"),en.setAttributeNS(null,"rx",er.rx),en.setAttributeNS(null,"ry",er.ry),$.appendChild(en)}var ei=j.createNS("http://www.w3.org/2000/svg","g");ei.setAttributeNS(null,"fill",this._color);var eo=j.createNS("http://www.w3.org/2000/svg","path");eo.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ei.appendChild(eo);var es=j.createNS("http://www.w3.org/2000/svg","g");es.setAttributeNS(null,"opacity","0.25"),es.setAttributeNS(null,"fill","#000000");var el=j.createNS("http://www.w3.org/2000/svg","path");el.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),es.appendChild(el);var ec=j.createNS("http://www.w3.org/2000/svg","g");ec.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ec.setAttributeNS(null,"fill","#FFFFFF");var eu=j.createNS("http://www.w3.org/2000/svg","g");eu.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ef=j.createNS("http://www.w3.org/2000/svg","circle");ef.setAttributeNS(null,"fill","#000000"),ef.setAttributeNS(null,"opacity","0.25"),ef.setAttributeNS(null,"cx","5.5"),ef.setAttributeNS(null,"cy","5.5"),ef.setAttributeNS(null,"r","5.4999962");var ed=j.createNS("http://www.w3.org/2000/svg","circle");ed.setAttributeNS(null,"fill","#FFFFFF"),ed.setAttributeNS(null,"cx","5.5"),ed.setAttributeNS(null,"cy","5.5"),ed.setAttributeNS(null,"r","5.4999962"),eu.appendChild(ef),eu.appendChild(ed),X.appendChild($),X.appendChild(ei),X.appendChild(es),X.appendChild(ec),X.appendChild(eu),N.appendChild(X),this._element.appendChild(N),this._offset=i.Point.convert(s&&s.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(i){i.preventDefault()}),this._element.addEventListener("mousedown",function(i){i.preventDefault()}),this._element.addEventListener("focus",function(){var i=F._map.getContainer();i.scrollTop=0,i.scrollLeft=0}),applyAnchorClass(this._element,this._anchor,"marker"),this._popup=null}return o&&(Marker.__proto__=o),Marker.prototype=Object.create(o&&o.prototype),Marker.prototype.constructor=Marker,Marker.prototype.addTo=function(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Marker.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this},Marker.prototype.getLngLat=function(){return this._lngLat},Marker.prototype.setLngLat=function(o){return this._lngLat=i.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Marker.prototype.getElement=function(){return this._element},Marker.prototype.setPopup=function(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){var o=Math.sqrt(91.125);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[o,-((24.6+o)*1)],"bottom-right":[-o,-((24.6+o)*1)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Marker.prototype._onKeyPress=function(i){var o=i.code,s=i.charCode||i.keyCode;("Space"===o||"Enter"===o||32===s||13===s)&&this.togglePopup()},Marker.prototype._onMapClick=function(i){var o=i.originalEvent.target,s=this._element;this._popup&&(o===s||s.contains(o))&&this.togglePopup()},Marker.prototype.getPopup=function(){return this._popup},Marker.prototype.togglePopup=function(){var i=this._popup;return i&&(i.isOpen()?i.remove():i.addTo(this._map)),this},Marker.prototype._update=function(i){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=smartWrap(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var o="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?o="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(o="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var s="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?s="rotateX(0deg)":"map"===this._pitchAlignment&&(s="rotateX("+this._map.getPitch()+"deg)"),i&&"moveend"!==i.type||(this._pos=this._pos.round()),j.setTransform(this._element,tz[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+s+" "+o)}},Marker.prototype.getOffset=function(){return this._offset},Marker.prototype.setOffset=function(o){return this._offset=i.Point.convert(o),this._update(),this},Marker.prototype._onMove=function(o){this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag"))},Marker.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new i.Event("dragend")),this._state="inactive"},Marker.prototype._addDragHandler=function(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Marker.prototype.setDraggable=function(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Marker.prototype.isDraggable=function(){return this._draggable},Marker.prototype.setRotation=function(i){return this._rotation=i||0,this._update(),this},Marker.prototype.getRotation=function(){return this._rotation},Marker.prototype.setRotationAlignment=function(i){return this._rotationAlignment=i||"auto",this._update(),this},Marker.prototype.getRotationAlignment=function(){return this._rotationAlignment},Marker.prototype.setPitchAlignment=function(i){return this._pitchAlignment=i&&"auto"!==i?i:this._rotationAlignment,this._update(),this},Marker.prototype.getPitchAlignment=function(){return this._pitchAlignment},Marker}(i.Evented),tj={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};function checkGeolocationSupport(o){void 0!==F?o(F):void 0!==i.window.navigator.permissions?i.window.navigator.permissions.query({name:"geolocation"}).then(function(i){o(F="denied"!==i.state)}):o(F=!!i.window.navigator.geolocation)}var tV=0,tU=!1,tH=function(o){function GeolocateControl(s){o.call(this),this.options=i.extend({},tj,s),i.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return o&&(GeolocateControl.__proto__=o),GeolocateControl.prototype=Object.create(o&&o.prototype),GeolocateControl.prototype.constructor=GeolocateControl,GeolocateControl.prototype.onAdd=function(i){return this._map=i,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),checkGeolocationSupport(this._setupUI),this._container},GeolocateControl.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,tV=0,tU=!1},GeolocateControl.prototype._isOutOfMapMaxBounds=function(i){var o=this._map.getMaxBounds(),s=i.coords;return o&&(s.longitude<o.getWest()||s.longitude>o.getEast()||s.latitude<o.getSouth()||s.latitude>o.getNorth())},GeolocateControl.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},GeolocateControl.prototype._onSuccess=function(o){if(this._map){if(this._isOutOfMapMaxBounds(o)){this._setErrorState(),this.fire(new i.Event("outofmaxbounds",o)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(o),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("geolocate",o)),this._finish()}},GeolocateControl.prototype._updateCamera=function(o){var s=new i.LngLat(o.coords.longitude,o.coords.latitude),_=o.coords.accuracy,F=this._map.getBearing(),N=i.extend({bearing:F},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(_),N,{geolocateSource:!0})},GeolocateControl.prototype._updateMarker=function(o){if(o){var s=new i.LngLat(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},GeolocateControl.prototype._updateCircleRadius=function(){var i=this._map._container.clientHeight/2,o=this._map.unproject([0,i]),s=this._map.unproject([1,i]),_=o.distanceTo(s),F=Math.ceil(2*this._accuracy/_);this._circleElement.style.width=F+"px",this._circleElement.style.height=F+"px"},GeolocateControl.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},GeolocateControl.prototype._onError=function(o){if(this._map){if(this.options.trackUserLocation){if(1===o.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===o.code&&tU)return;this._setErrorState()}}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("error",o)),this._finish()}},GeolocateControl.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},GeolocateControl.prototype._setupUI=function(o){var s=this;if(this._container.addEventListener("contextmenu",function(i){return i.preventDefault()}),this._geolocateButton=j.create("button","mapboxgl-ctrl-geolocate",this._container),j.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===o){i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var _=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=_,this._geolocateButton.setAttribute("aria-label",_)}else{var F=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=F,this._geolocateButton.setAttribute("aria-label",F)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new tN(this._dotElement),this._circleElement=j.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tN({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(o){var _=o.originalEvent&&"resize"===o.originalEvent.type;o.geolocateSource||"ACTIVE_LOCK"!==s._watchState||_||(s._watchState="BACKGROUND",s._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),s._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),s.fire(new i.Event("trackuserlocationend")))})},GeolocateControl.prototype.trigger=function(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":tV--,tU=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var o;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++tV>1?(o={maximumAge:6e5,timeout:0},tU=!0):(o=this.options.positionOptions,tU=!1),this._geolocationWatchID=i.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,o)}}else i.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},GeolocateControl.prototype._clearWatch=function(){i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},GeolocateControl}(i.Evented),tq={maxWidth:100,unit:"metric"},ScaleControl=function(o){this.options=i.extend({},tq,o),i.bindAll(["_onMove","setUnit"],this)};function updateScale(i,o,s){var _=s&&s.maxWidth||100,F=i._container.clientHeight/2,N=i.unproject([0,F]),j=i.unproject([_,F]),Z=N.distanceTo(j);if(s&&"imperial"===s.unit){var X=3.2808*Z;X>5280?setScale(o,_,X/5280,i._getUIString("ScaleControl.Miles")):setScale(o,_,X,i._getUIString("ScaleControl.Feet"))}else s&&"nautical"===s.unit?setScale(o,_,Z/1852,i._getUIString("ScaleControl.NauticalMiles")):Z>=1e3?setScale(o,_,Z/1e3,i._getUIString("ScaleControl.Kilometers")):setScale(o,_,Z,i._getUIString("ScaleControl.Meters"))}function setScale(i,o,s,_){var F=getRoundNum(s),N=F/s;i.style.width=o*N+"px",i.innerHTML=F+"&nbsp;"+_}function getDecimalRoundNum(i){var o=Math.pow(10,Math.ceil(-Math.log(i)/Math.LN10));return Math.round(i*o)/o}function getRoundNum(i){var o=Math.pow(10,(""+Math.floor(i)).length-1),s=i/o;return o*(s=s>=10?10:s>=5?5:s>=3?3:s>=2?2:s>=1?1:getDecimalRoundNum(s))}ScaleControl.prototype.getDefaultPosition=function(){return"bottom-left"},ScaleControl.prototype._onMove=function(){updateScale(this._map,this._container,this.options)},ScaleControl.prototype.onAdd=function(i){return this._map=i,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",i.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ScaleControl.prototype.onRemove=function(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ScaleControl.prototype.setUnit=function(i){this.options.unit=i,updateScale(this._map,this._container,this.options)};var FullscreenControl=function(o){this._fullscreen=!1,o&&o.container&&(o.container instanceof i.window.HTMLElement?this._container=o.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.window.document&&(this._fullscreenchange="MSFullscreenChange")};FullscreenControl.prototype.onAdd=function(o){return this._map=o,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},FullscreenControl.prototype.onRemove=function(){j.remove(this._controlContainer),this._map=null,i.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},FullscreenControl.prototype._checkFullscreenSupport=function(){return!!(i.window.document.fullscreenEnabled||i.window.document.mozFullScreenEnabled||i.window.document.msFullscreenEnabled||i.window.document.webkitFullscreenEnabled)},FullscreenControl.prototype._setupUI=function(){var o=this._fullscreenButton=j.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);j.create("span","mapboxgl-ctrl-icon",o).setAttribute("aria-hidden",!0),o.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},FullscreenControl.prototype._updateTitle=function(){var i=this._getTitle();this._fullscreenButton.setAttribute("aria-label",i),this._fullscreenButton.title=i},FullscreenControl.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},FullscreenControl.prototype._isFullscreen=function(){return this._fullscreen},FullscreenControl.prototype._changeIcon=function(){(i.window.document.fullscreenElement||i.window.document.mozFullScreenElement||i.window.document.webkitFullscreenElement||i.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},FullscreenControl.prototype._onClickFullscreen=function(){this._isFullscreen()?i.window.document.exitFullscreen?i.window.document.exitFullscreen():i.window.document.mozCancelFullScreen?i.window.document.mozCancelFullScreen():i.window.document.msExitFullscreen?i.window.document.msExitFullscreen():i.window.document.webkitCancelFullScreen&&i.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var tG={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},tW=function(o){function Popup(s){o.call(this),this.options=i.extend(Object.create(tG),s),i.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return o&&(Popup.__proto__=o),Popup.prototype=Object.create(o&&o.prototype),Popup.prototype.constructor=Popup,Popup.prototype.addTo=function(o){return this._map&&this.remove(),this._map=o,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new i.Event("open")),this},Popup.prototype.isOpen=function(){return!!this._map},Popup.prototype.remove=function(){return this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new i.Event("close")),this},Popup.prototype.getLngLat=function(){return this._lngLat},Popup.prototype.setLngLat=function(o){return this._lngLat=i.LngLat.convert(o),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Popup.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Popup.prototype.getElement=function(){return this._container},Popup.prototype.setText=function(o){return this.setDOMContent(i.window.document.createTextNode(o))},Popup.prototype.setHTML=function(o){var s,_=i.window.document.createDocumentFragment(),F=i.window.document.createElement("body");for(F.innerHTML=o;s=F.firstChild;)_.appendChild(s);return this.setDOMContent(_)},Popup.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Popup.prototype.setMaxWidth=function(i){return this.options.maxWidth=i,this._update(),this},Popup.prototype.setDOMContent=function(i){return this._createContent(),this._content.appendChild(i),this._update(),this},Popup.prototype.addClassName=function(i){this._container&&this._container.classList.add(i)},Popup.prototype.removeClassName=function(i){this._container&&this._container.classList.remove(i)},Popup.prototype.toggleClassName=function(i){if(this._container)return this._container.classList.toggle(i)},Popup.prototype._createContent=function(){this._content&&j.remove(this._content),this._content=j.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=j.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Popup.prototype._onMouseUp=function(i){this._update(i.point)},Popup.prototype._onMouseMove=function(i){this._update(i.point)},Popup.prototype._onDrag=function(i){this._update(i.point)},Popup.prototype._update=function(i){var o=this,s=this._lngLat||this._trackPointer;if(this._map&&s&&this._content&&(!this._container&&(this._container=j.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=j.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(i){return o._container.classList.add(i)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=smartWrap(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||i)){var _=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat),F=this.options.anchor,N=normalizeOffset(this.options.offset);if(!F){var Z,X=this._container.offsetWidth,$=this._container.offsetHeight;Z=_.y+N.bottom.y<$?["top"]:_.y>this._map.transform.height-$?["bottom"]:[],_.x<X/2?Z.push("left"):_.x>this._map.transform.width-X/2&&Z.push("right"),F=0===Z.length?"bottom":Z.join("-")}var ee=_.add(N[F]).round();j.setTransform(this._container,tz[F]+" translate("+ee.x+"px,"+ee.y+"px)"),applyAnchorClass(this._container,F,"popup")}},Popup.prototype._onClose=function(){this.remove()},Popup}(i.Evented);function normalizeOffset(o){if(!o)return normalizeOffset(new i.Point(0,0));if("number"==typeof o){var s=Math.round(Math.sqrt(.5*Math.pow(o,2)));return{center:new i.Point(0,0),top:new i.Point(0,o),"top-left":new i.Point(s,s),"top-right":new i.Point(-s,s),bottom:new i.Point(0,-o),"bottom-left":new i.Point(s,-s),"bottom-right":new i.Point(-s,-s),left:new i.Point(o,0),right:new i.Point(-o,0)}}if(!(o instanceof i.Point||Array.isArray(o)))return{center:i.Point.convert(o.center||[0,0]),top:i.Point.convert(o.top||[0,0]),"top-left":i.Point.convert(o["top-left"]||[0,0]),"top-right":i.Point.convert(o["top-right"]||[0,0]),bottom:i.Point.convert(o.bottom||[0,0]),"bottom-left":i.Point.convert(o["bottom-left"]||[0,0]),"bottom-right":i.Point.convert(o["bottom-right"]||[0,0]),left:i.Point.convert(o.left||[0,0]),right:i.Point.convert(o.right||[0,0])};var _=i.Point.convert(o);return{center:_,top:_,"top-left":_,"top-right":_,bottom:_,"bottom-left":_,"bottom-right":_,left:_,right:_}}var tZ={version:i.version,supported:N,setRTLTextPlugin:i.setRTLTextPlugin,getRTLTextPluginStatus:i.getRTLTextPluginStatus,Map:tB,NavigationControl:NavigationControl,GeolocateControl:tH,AttributionControl:AttributionControl,ScaleControl:ScaleControl,FullscreenControl:FullscreenControl,Popup:tW,Marker:tN,Style:tt,LngLat:i.LngLat,LngLatBounds:i.LngLatBounds,Point:i.Point,MercatorCoordinate:i.MercatorCoordinate,Evented:i.Evented,config:i.config,prewarm:prewarm,clearPrewarmedResources:clearPrewarmedResources,get accessToken(){return i.config.ACCESS_TOKEN},set accessToken(token){i.config.ACCESS_TOKEN=token},get baseApiUrl(){return i.config.API_URL},set baseApiUrl(url){i.config.API_URL=url},get workerCount(){return WorkerPool.workerCount},set workerCount(count){WorkerPool.workerCount=count},get maxParallelImageRequests(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(numRequests){i.config.MAX_PARALLEL_IMAGE_REQUESTS=numRequests},clearStorage:function(o){i.clearTileCache(o)},workerUrl:""};return tZ}),s}()},27084:function(i){"use strict";i.exports=Math.log2||function(i){return Math.log(i)*Math.LOG2E}},16825:function(i,o,s){"use strict";i.exports=mouseListen;var _=s(74311);function mouseListen(i,o){o||(o=i,i=window);var s=0,F=0,N=0,j={shift:!1,alt:!1,control:!1,meta:!1},Z=!1;function updateMods(i){var o=!1;return"altKey"in i&&(o=o||i.altKey!==j.alt,j.alt=!!i.altKey),"shiftKey"in i&&(o=o||i.shiftKey!==j.shift,j.shift=!!i.shiftKey),"ctrlKey"in i&&(o=o||i.ctrlKey!==j.control,j.control=!!i.ctrlKey),"metaKey"in i&&(o=o||i.metaKey!==j.meta,j.meta=!!i.metaKey),o}function handleEvent(i,Z){var X=_.x(Z),$=_.y(Z);"buttons"in Z&&(i=0|Z.buttons),(i!==s||X!==F||$!==N||updateMods(Z))&&(s=0|i,F=X||0,N=$||0,o&&o(s,F,N,j))}function clearState(i){handleEvent(0,i)}function handleBlur(){(s||F||N||j.shift||j.alt||j.meta||j.control)&&(F=N=0,s=0,j.shift=j.alt=j.control=j.meta=!1,o&&o(0,0,0,j))}function handleMods(i){updateMods(i)&&o&&o(s,F,N,j)}function handleMouseMove(i){0===_.buttons(i)?handleEvent(0,i):handleEvent(s,i)}function handleMouseDown(i){handleEvent(s|_.buttons(i),i)}function handleMouseUp(i){handleEvent(s&~_.buttons(i),i)}function attachListeners(){Z||(Z=!0,i.addEventListener("mousemove",handleMouseMove),i.addEventListener("mousedown",handleMouseDown),i.addEventListener("mouseup",handleMouseUp),i.addEventListener("mouseleave",clearState),i.addEventListener("mouseenter",clearState),i.addEventListener("mouseout",clearState),i.addEventListener("mouseover",clearState),i.addEventListener("blur",handleBlur),i.addEventListener("keyup",handleMods),i.addEventListener("keydown",handleMods),i.addEventListener("keypress",handleMods),i!==window&&(window.addEventListener("blur",handleBlur),window.addEventListener("keyup",handleMods),window.addEventListener("keydown",handleMods),window.addEventListener("keypress",handleMods)))}function detachListeners(){Z&&(Z=!1,i.removeEventListener("mousemove",handleMouseMove),i.removeEventListener("mousedown",handleMouseDown),i.removeEventListener("mouseup",handleMouseUp),i.removeEventListener("mouseleave",clearState),i.removeEventListener("mouseenter",clearState),i.removeEventListener("mouseout",clearState),i.removeEventListener("mouseover",clearState),i.removeEventListener("blur",handleBlur),i.removeEventListener("keyup",handleMods),i.removeEventListener("keydown",handleMods),i.removeEventListener("keypress",handleMods),i!==window&&(window.removeEventListener("blur",handleBlur),window.removeEventListener("keyup",handleMods),window.removeEventListener("keydown",handleMods),window.removeEventListener("keypress",handleMods)))}attachListeners();var X={element:i};return Object.defineProperties(X,{enabled:{get:function(){return Z},set:function(i){i?attachListeners():detachListeners()},enumerable:!0},buttons:{get:function(){return s},enumerable:!0},x:{get:function(){return F},enumerable:!0},y:{get:function(){return N},enumerable:!0},mods:{get:function(){return j},enumerable:!0}}),X}},48956:function(i){var o={left:0,top:0};function mouseEventOffset(i,o,s){o=o||i.currentTarget||i.srcElement,Array.isArray(s)||(s=[0,0]);var _=i.clientX||0,F=i.clientY||0,N=getBoundingClientOffset(o);return s[0]=_-N.left,s[1]=F-N.top,s}function getBoundingClientOffset(i){return i===window||i===document||i===document.body?o:i.getBoundingClientRect()}i.exports=mouseEventOffset},74311:function(i,o){"use strict";function mouseButtons(i){if("object"==typeof i){if("buttons"in i)return i.buttons;if("which"in i){var o=i.which;if(2===o)return 4;if(3===o)return 2;if(o>0)return 1<<o-1}else if("button"in i){var o=i.button;if(1===o)return 4;if(2===o)return 2;if(o>=0)return 1<<o}}return 0}function mouseElement(i){return i.target||i.srcElement||window}function mouseRelativeX(i){if("object"==typeof i){if("offsetX"in i)return i.offsetX;var o=mouseElement(i).getBoundingClientRect();return i.clientX-o.left}return 0}function mouseRelativeY(i){if("object"==typeof i){if("offsetY"in i)return i.offsetY;var o=mouseElement(i).getBoundingClientRect();return i.clientY-o.top}return 0}o.buttons=mouseButtons,o.element=mouseElement,o.x=mouseRelativeX,o.y=mouseRelativeY},1195:function(i,o,s){"use strict";var _=s(75686);function mouseWheelListen(i,o,s){"function"==typeof i&&(s=!!o,o=i,i=window);var F=_("ex",i),listener=function(i){s&&i.preventDefault();var _=i.deltaX||0,N=i.deltaY||0,j=i.deltaZ||0,Z=i.deltaMode,X=1;switch(Z){case 1:X=F;break;case 2:X=window.innerHeight}if(_*=X,N*=X,j*=X,_||N||j)return o(_,N,j,i)};return i.addEventListener("wheel",listener),listener}i.exports=mouseWheelListen},7417:function(i,o,s){var _,F,N;F="Promise",(N=void 0!==s.g?s.g:this)[F]=N[F]||function(){"use strict";var i,o,s,_=Object.prototype.toString,F="undefined"!=typeof setImmediate?function(i){return setImmediate(i)}:setTimeout;try{Object.defineProperty({},"x",{}),i=function(i,o,s,_){return Object.defineProperty(i,o,{value:s,writable:!0,configurable:!1!==_})}}catch(o){i=function(i,o,s){return i[o]=s,i}}function schedule(i,_){s.add(i,_),o||(o=F(s.drain))}function isThenable(i){var o,s=typeof i;return null!=i&&("object"==s||"function"==s)&&(o=i.then),"function"==typeof o&&o}function notify(){for(var i=0;i<this.chain.length;i++)notifyIsolated(this,1===this.state?this.chain[i].success:this.chain[i].failure,this.chain[i]);this.chain.length=0}function notifyIsolated(i,o,s){var _,F;try{!1===o?s.reject(i.msg):(_=!0===o?i.msg:o.call(void 0,i.msg))===s.promise?s.reject(TypeError("Promise-chain cycle")):(F=isThenable(_))?F.call(_,s.resolve,s.reject):s.resolve(_)}catch(i){s.reject(i)}}function resolve(i){var o,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(o=isThenable(i))?schedule(function(){var _=new MakeDefWrapper(s);try{o.call(i,function(){resolve.apply(_,arguments)},function(){reject.apply(_,arguments)})}catch(i){reject.call(_,i)}}):(s.msg=i,s.state=1,s.chain.length>0&&schedule(notify,s))}catch(i){reject.call(new MakeDefWrapper(s),i)}}}function reject(i){var o=this;!o.triggered&&(o.triggered=!0,o.def&&(o=o.def),o.msg=i,o.state=2,o.chain.length>0&&schedule(notify,o))}function iteratePromises(i,o,s,_){for(var F=0;F<o.length;F++)!function(F){i.resolve(o[F]).then(function(i){s(F,i)},_)}(F)}function MakeDefWrapper(i){this.def=i,this.triggered=!1}function MakeDef(i){this.promise=i,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Promise(i){if("function"!=typeof i)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var o=new MakeDef(this);this.then=function(i,s){var _={success:"function"!=typeof i||i,failure:"function"==typeof s&&s};return _.promise=new this.constructor(function(i,o){if("function"!=typeof i||"function"!=typeof o)throw TypeError("Not a function");_.resolve=i,_.reject=o}),o.chain.push(_),0!==o.state&&schedule(notify,o),_.promise},this.catch=function(i){return this.then(void 0,i)};try{i.call(void 0,function(i){resolve.call(o,i)},function(i){reject.call(o,i)})}catch(i){reject.call(o,i)}}s=function(){var i,s,_;function Item(i,o){this.fn=i,this.self=o,this.next=void 0}return{add:function(o,F){_=new Item(o,F),s?s.next=_:i=_,s=_,_=void 0},drain:function(){var _=i;for(i=s=o=void 0;_;)_.fn.call(_.self),_=_.next}}}();var N=i({},"constructor",Promise,!1);return Promise.prototype=N,i(N,"__NPO__",0,!1),i(Promise,"resolve",function(i){return i&&"object"==typeof i&&1===i.__NPO__?i:new this(function(o,s){if("function"!=typeof o||"function"!=typeof s)throw TypeError("Not a function");o(i)})}),i(Promise,"reject",function(i){return new this(function(o,s){if("function"!=typeof o||"function"!=typeof s)throw TypeError("Not a function");s(i)})}),i(Promise,"all",function(i){var o=this;return"[object Array]"!=_.call(i)?o.reject(TypeError("Not an array")):0===i.length?o.resolve([]):new o(function(s,_){if("function"!=typeof s||"function"!=typeof _)throw TypeError("Not a function");var F=i.length,N=Array(F),j=0;iteratePromises(o,i,function(i,o){N[i]=o,++j===F&&s(N)},_)})}),i(Promise,"race",function(i){var o=this;return"[object Array]"!=_.call(i)?o.reject(TypeError("Not an array")):new o(function(s,_){if("function"!=typeof s||"function"!=typeof _)throw TypeError("Not a function");iteratePromises(o,i,function(i,o){s(o)},_)})}),Promise}(),i.exports?i.exports=N[F]:void 0===(_=(function(){return N[F]}).call(o,s,o,i))||(i.exports=_)},18625:function(i){var o=Math.PI,s=120*(o/180);function normalize(i){for(var s,_=[],F=0,N=0,j=0,Z=0,X=null,$=null,ee=0,et=0,er=0,en=i.length;er<en;er++){var ei,eo=i[er],es=eo[0];switch(es){case"M":j=eo[1],Z=eo[2];break;case"A":(eo=arc(ee,et,eo[1],eo[2],eo[3]*(o/180),eo[4],eo[5],eo[6],eo[7])).unshift("C"),eo.length>7&&(_.push(eo.splice(0,7)),eo.unshift("C"));break;case"S":var el=ee,ec=et;("C"==s||"S"==s)&&(el+=el-F,ec+=ec-N),eo=["C",el,ec,eo[1],eo[2],eo[3],eo[4]];break;case"T":"Q"==s||"T"==s?(X=2*ee-X,$=2*et-$):(X=ee,$=et),eo=quadratic(ee,et,X,$,eo[1],eo[2]);break;case"Q":X=eo[1],$=eo[2],eo=quadratic(ee,et,eo[1],eo[2],eo[3],eo[4]);break;case"L":eo=line(ee,et,eo[1],eo[2]);break;case"H":eo=line(ee,et,eo[1],et);break;case"V":eo=line(ee,et,ee,eo[1]);break;case"Z":eo=line(ee,et,j,Z)}s=es,ee=eo[eo.length-2],et=eo[eo.length-1],eo.length>4?(F=eo[eo.length-4],N=eo[eo.length-3]):(F=ee,N=et),_.push(eo)}return _}function line(i,o,s,_){return["C",i,o,s,_,s,_]}function quadratic(i,o,s,_,F,N){return["C",i/3+2/3*s,o/3+2/3*_,F/3+2/3*s,N/3+2/3*_,F,N]}function arc(i,_,F,N,j,Z,X,$,ee,et){if(et)ed=et[0],eh=et[1],eu=et[2],ef=et[3];else{var er=rotate(i,_,-j);i=er.x,_=er.y,$=(er=rotate($,ee,-j)).x,ee=er.y;var en=(i-$)/2,ei=(_-ee)/2,eo=en*en/(F*F)+ei*ei/(N*N);eo>1&&(F*=eo=Math.sqrt(eo),N*=eo);var es=F*F,el=N*N,ec=(Z==X?-1:1)*Math.sqrt(Math.abs((es*el-es*ei*ei-el*en*en)/(es*ei*ei+el*en*en)));ec==1/0&&(ec=1);var eu=ec*F*ei/N+(i+$)/2,ef=-(ec*N)*en/F+(_+ee)/2,ed=Math.asin(((_-ef)/N).toFixed(9)),eh=Math.asin(((ee-ef)/N).toFixed(9));ed=i<eu?o-ed:ed,eh=$<eu?o-eh:eh,ed<0&&(ed=2*o+ed),eh<0&&(eh=2*o+eh),X&&ed>eh&&(ed-=2*o),!X&&eh>ed&&(eh-=2*o)}if(Math.abs(eh-ed)>s)var ep=eh,eg=$,em=ee,ey=arc($=eu+F*Math.cos(eh=ed+s*(X&&eh>ed?1:-1)),ee=ef+N*Math.sin(eh),F,N,j,0,X,eg,em,[eh,ep,eu,ef]);var ev=Math.tan((eh-ed)/4),ex=4/3*F*ev,e_=4/3*N*ev,ew=[2*i-(i+ex*Math.sin(ed)),2*_-(_-e_*Math.cos(ed)),$+ex*Math.sin(eh),ee-e_*Math.cos(eh),$,ee];if(et)return ew;ey&&(ew=ew.concat(ey));for(var eT=0;eT<ew.length;){var ek=rotate(ew[eT],ew[eT+1],j);ew[eT++]=ek.x,ew[eT++]=ek.y}return ew}function rotate(i,o,s){return{x:i*Math.cos(s)-o*Math.sin(s),y:i*Math.sin(s)+o*Math.cos(s)}}i.exports=normalize},56131:function(i){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;function toObject(i){if(null==i)throw TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function shouldUseNative(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de","5"===Object.getOwnPropertyNames(i)[0])return!1;for(var o={},s=0;s<10;s++)o["_"+String.fromCharCode(s)]=s;var _=Object.getOwnPropertyNames(o).map(function(i){return o[i]});if("0123456789"!==_.join(""))return!1;var F={};if("abcdefghijklmnopqrst".split("").forEach(function(i){F[i]=i}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},F)).join(""))return!1;return!0}catch(i){return!1}}i.exports=shouldUseNative()?Object.assign:function(i,F){for(var N,j,Z=toObject(i),X=1;X<arguments.length;X++){for(var $ in N=Object(arguments[X]))s.call(N,$)&&(Z[$]=N[$]);if(o){j=o(N);for(var ee=0;ee<j.length;ee++)_.call(N,j[ee])&&(Z[j[ee]]=N[j[ee]])}}return Z}},65848:function(i){"use strict";var numberIsNaN=function(i){return i!=i};i.exports=function(i,o){return 0===i&&0===o?1/i==1/o:!!(i===o||numberIsNaN(i)&&numberIsNaN(o))}},64003:function(i,o,s){"use strict";var _=s(17045),F=s(68222),N=s(65848),j=s(27015),Z=s(55572),X=F(j(),Object);_(X,{getPolyfill:j,implementation:N,shim:Z}),i.exports=X},27015:function(i,o,s){"use strict";var _=s(65848);i.exports=function(){return"function"==typeof Object.is?Object.is:_}},55572:function(i,o,s){"use strict";var _=s(27015),F=s(17045);i.exports=function(){var i=_();return F(Object,{is:i},{is:function(){return Object.is!==i}}),i}},99019:function(i,o,s){"use strict";var _;if(!Object.keys){var F=Object.prototype.hasOwnProperty,N=Object.prototype.toString,j=s(64178),Z=Object.prototype.propertyIsEnumerable,X=!Z.call({toString:null},"toString"),$=Z.call(function(){},"prototype"),ee=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(i){var o=i.constructor;return o&&o.prototype===i},et={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},er=function(){if("undefined"==typeof window)return!1;for(var i in window)try{if(!et["$"+i]&&F.call(window,i)&&null!==window[i]&&"object"==typeof window[i])try{equalsConstructorPrototype(window[i])}catch(i){return!0}}catch(i){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(i){if("undefined"==typeof window||!er)return equalsConstructorPrototype(i);try{return equalsConstructorPrototype(i)}catch(i){return!1}};_=function(i){var o=null!==i&&"object"==typeof i,s="[object Function]"===N.call(i),_=j(i),Z=o&&"[object String]"===N.call(i),et=[];if(!o&&!s&&!_)throw TypeError("Object.keys called on a non-object");var er=$&&s;if(Z&&i.length>0&&!F.call(i,0))for(var en=0;en<i.length;++en)et.push(String(en));if(_&&i.length>0)for(var ei=0;ei<i.length;++ei)et.push(String(ei));else for(var eo in i)!(er&&"prototype"===eo)&&F.call(i,eo)&&et.push(String(eo));if(X)for(var es=equalsConstructorPrototypeIfNotBuggy(i),el=0;el<ee.length;++el)!(es&&"constructor"===ee[el])&&F.call(i,ee[el])&&et.push(ee[el]);return et}}i.exports=_},8709:function(i,o,s){"use strict";var _=Array.prototype.slice,F=s(64178),N=Object.keys,j=N?function(i){return N(i)}:s(99019),Z=Object.keys;j.shim=function(){return Object.keys?!function(){var i=Object.keys(arguments);return i&&i.length===arguments.length}(1,2)&&(Object.keys=function(i){return F(i)?Z(_.call(i)):Z(i)}):Object.keys=j,Object.keys||j},i.exports=j},64178:function(i){"use strict";var o=Object.prototype.toString;i.exports=function(i){var s=o.call(i),_="[object Arguments]"===s;return _||(_="[object Array]"!==s&&null!==i&&"object"==typeof i&&"number"==typeof i.length&&i.length>=0&&"[object Function]"===o.call(i.callee)),_}},88641:function(i){"use strict";function parse(i,o){if("string"!=typeof i)return[i];var s=[i];"string"==typeof o||Array.isArray(o)?o={brackets:o}:o||(o={});var _=o.brackets?Array.isArray(o.brackets)?o.brackets:[o.brackets]:["{}","[]","()"],F=o.escape||"___",N=!!o.flat;_.forEach(function(i){var o=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),_=[];function replaceToken(o,N,j){var Z=s.push(o.slice(i[0].length,-i[1].length))-1;return _.push(Z),F+Z+F}s.forEach(function(i,_){for(var F,N=0;i!=F;)if(F=i,i=i.replace(o,replaceToken),N++>1e4)throw Error("References have circular dependency. Please, check them.");s[_]=i}),_=_.reverse(),s=s.map(function(o){return _.forEach(function(s){o=o.replace(RegExp("(\\"+F+s+"\\"+F+")","g"),i[0]+"$1"+i[1])}),o})});var j=RegExp("\\"+F+"([0-9]+)\\"+F);function nest(i,o,s){for(var _,F=[],N=0;_=j.exec(i);){if(N++>1e4)throw Error("Circular references in parenthesis");F.push(i.slice(0,_.index)),F.push(nest(o[_[1]],o)),i=i.slice(_.index+_[0].length)}return F.push(i),F}return N?s:nest(s[0],s)}function stringify(i,o){if(o&&o.flat){var s,_=o&&o.escape||"___",F=i[0];if(!F)return"";for(var N=RegExp("\\"+_+"([0-9]+)\\"+_),j=0;F!=s;){if(j++>1e4)throw Error("Circular references in "+i);s=F,F=F.replace(N,replaceRef)}return F}return i.reduce(function f(i,o){return Array.isArray(o)&&(o=o.reduce(f,"")),i+o},"");function replaceRef(o,s){if(null==i[s])throw Error("Reference "+s+"is undefined");return i[s]}}function parenthesis(i,o){return Array.isArray(i)?stringify(i,o):parse(i,o)}parenthesis.parse=parse,parenthesis.stringify=stringify,i.exports=parenthesis},18863:function(i,o,s){"use strict";var _=s(71299);function parseRect(i){var o;return arguments.length>1&&(i=arguments),"string"==typeof i?i=i.split(/\s/).map(parseFloat):"number"==typeof i&&(i=[i]),i.length&&"number"==typeof i[0]?o=1===i.length?{width:i[0],height:i[0],x:0,y:0}:2===i.length?{width:i[0],height:i[1],x:0,y:0}:{x:i[0],y:i[1],width:i[2]-i[0]||0,height:i[3]-i[1]||0}:i&&(o={x:(i=_(i,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:i.top||0},null==i.width?i.right?o.width=i.right-o.x:o.width=0:o.width=i.width,null==i.height?i.bottom?o.height=i.bottom-o.y:o.height=0:o.height=i.height),o}i.exports=parseRect},95616:function(i){i.exports=parse;var o={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function parse(i){var _=[];return i.replace(s,function(i,s,F){var N=s.toLowerCase();for(F=parseValues(F),"m"==N&&F.length>2&&(_.push([s].concat(F.splice(0,2))),N="l",s="m"==s?"l":"L");;){if(F.length==o[N])return F.unshift(s),_.push(F);if(F.length<o[N])throw Error("malformed path data");_.push([s].concat(F.splice(0,o[N])))}}),_}var _=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function parseValues(i){var o=i.match(_);return o?o.map(Number):[]}},25677:function(i){i.exports=function(i,o){o||(o=[0,""]);var s=parseFloat(i=String(i),10);return o[0]=s,o[1]=i.match(/[\d.\-\+]*\s*(.*)/)[1]||"",o}},9748:function(i,o,s){var _=s(90386);(function(){var o,s,F,N;"undefined"!=typeof performance&&null!==performance&&performance.now?i.exports=function(){return performance.now()}:null!=_&&_.hrtime?(i.exports=function(){return(o()-N)/1e6},s=_.hrtime,N=(o=function(){var i;return 1e9*(i=s())[0]+i[1]})()-1e9*_.uptime()):Date.now?(i.exports=function(){return Date.now()-F},F=Date.now()):(i.exports=function(){return new Date().getTime()-F},F=new Date().getTime())}).call(this)},71299:function(i){"use strict";i.exports=function(i,o,s){var _,F,N={};if("string"==typeof o&&(o=toList(o)),Array.isArray(o)){var j={};for(F=0;F<o.length;F++)j[o[F]]=!0;o=j}for(_ in o)o[_]=toList(o[_]);var Z={};for(_ in o){var X=o[_];if(Array.isArray(X))for(F=0;F<X.length;F++){var $=X[F];if(s&&(Z[$]=!0),$ in i){if(N[_]=i[$],s)for(var ee=F;ee<X.length;ee++)Z[X[ee]]=!0;break}}else _ in i&&(o[_]&&(N[_]=i[_]),s&&(Z[_]=!0))}if(s)for(_ in i)Z[_]||(N[_]=i[_]);return N};var o={};function toList(i){return o[i]?o[i]:("string"==typeof i&&(i=o[i]=i.split(/\s*,\s*|\s+/)),i)}},38258:function(i){i.exports=function(i,o,s,_){var F=i[0],N=i[1],j=!1;void 0===s&&(s=0),void 0===_&&(_=o.length);for(var Z=_-s,X=0,$=Z-1;X<Z;$=X++){var ee=o[X+s][0],et=o[X+s][1],er=o[$+s][0],en=o[$+s][1];et>N!=en>N&&F<(er-ee)*(N-et)/(en-et)+ee&&(j=!j)}return j}},52142:function(i,o,s){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var _,F=s(69444),N=s(29023),j=s(87263),Z=s(11328),X=s(55968),$=s(10670),ee=!1,et=N();function operate(i,o,s){var F=_.segments(i),N=_.segments(o),j=s(_.combine(F,N));return _.polygon(j)}_={buildLog:function(i){return!0===i?ee=F():!1===i&&(ee=!1),!1!==ee&&ee.list},epsilon:function(i){return et.epsilon(i)},segments:function(i){var o=j(!0,et,ee);return i.regions.forEach(o.addRegion),{segments:o.calculate(i.inverted),inverted:i.inverted}},combine:function(i,o){return{combined:j(!1,et,ee).calculate(i.segments,i.inverted,o.segments,o.inverted),inverted1:i.inverted,inverted2:o.inverted}},selectUnion:function(i){return{segments:X.union(i.combined,ee),inverted:i.inverted1||i.inverted2}},selectIntersect:function(i){return{segments:X.intersect(i.combined,ee),inverted:i.inverted1&&i.inverted2}},selectDifference:function(i){return{segments:X.difference(i.combined,ee),inverted:i.inverted1&&!i.inverted2}},selectDifferenceRev:function(i){return{segments:X.differenceRev(i.combined,ee),inverted:!i.inverted1&&i.inverted2}},selectXor:function(i){return{segments:X.xor(i.combined,ee),inverted:i.inverted1!==i.inverted2}},polygon:function(i){return{regions:Z(i.segments,et,ee),inverted:i.inverted}},polygonFromGeoJSON:function(i){return $.toPolygon(_,i)},polygonToGeoJSON:function(i){return $.fromPolygon(_,et,i)},union:function(i,o){return operate(i,o,_.selectUnion)},intersect:function(i,o){return operate(i,o,_.selectIntersect)},difference:function(i,o){return operate(i,o,_.selectDifference)},differenceRev:function(i,o){return operate(i,o,_.selectDifferenceRev)},xor:function(i,o){return operate(i,o,_.selectXor)}},"object"==typeof window&&(window.PolyBool=_),i.exports=_},69444:function(i){function BuildLog(){var i,o=0,s=!1;function push(o,s){return i.list.push({type:o,data:s?JSON.parse(JSON.stringify(s)):void 0}),i}return i={list:[],segmentId:function(){return o++},checkIntersection:function(i,o){return push("check",{seg1:i,seg2:o})},segmentChop:function(i,o){return push("div_seg",{seg:i,pt:o}),push("chop",{seg:i,pt:o})},statusRemove:function(i){return push("pop_seg",{seg:i})},segmentUpdate:function(i){return push("seg_update",{seg:i})},segmentNew:function(i,o){return push("new_seg",{seg:i,primary:o})},segmentRemove:function(i){return push("rem_seg",{seg:i})},tempStatus:function(i,o,s){return push("temp_status",{seg:i,above:o,below:s})},rewind:function(i){return push("rewind",{seg:i})},status:function(i,o,s){return push("status",{seg:i,above:o,below:s})},vert:function(o){return o===s?i:(s=o,push("vert",{x:o}))},log:function(i){return"string"!=typeof i&&(i=JSON.stringify(i,!1,"  ")),push("log",{txt:i})},reset:function(){return push("reset")},selected:function(i){return push("selected",{segs:i})},chainStart:function(i){return push("chain_start",{seg:i})},chainRemoveHead:function(i,o){return push("chain_rem_head",{index:i,pt:o})},chainRemoveTail:function(i,o){return push("chain_rem_tail",{index:i,pt:o})},chainNew:function(i,o){return push("chain_new",{pt1:i,pt2:o})},chainMatch:function(i){return push("chain_match",{index:i})},chainClose:function(i){return push("chain_close",{index:i})},chainAddHead:function(i,o){return push("chain_add_head",{index:i,pt:o})},chainAddTail:function(i,o){return push("chain_add_tail",{index:i,pt:o})},chainConnect:function(i,o){return push("chain_con",{index1:i,index2:o})},chainReverse:function(i){return push("chain_rev",{index:i})},chainJoin:function(i,o){return push("chain_join",{index1:i,index2:o})},done:function(){return push("done")}}}i.exports=BuildLog},29023:function(i){function Epsilon(i){"number"!=typeof i&&(i=1e-10);var o={epsilon:function(o){return"number"==typeof o&&(i=o),i},pointAboveOrOnLine:function(o,s,_){var F=s[0],N=s[1],j=_[0],Z=_[1],X=o[0];return(j-F)*(o[1]-N)-(Z-N)*(X-F)>=-i},pointBetween:function(o,s,_){var F=o[1]-s[1],N=_[0]-s[0],j=o[0]-s[0],Z=_[1]-s[1],X=j*N+F*Z;return!(X<i)&&!(X-(N*N+Z*Z)>-i)},pointsSameX:function(o,s){return Math.abs(o[0]-s[0])<i},pointsSameY:function(o,s){return Math.abs(o[1]-s[1])<i},pointsSame:function(i,s){return o.pointsSameX(i,s)&&o.pointsSameY(i,s)},pointsCompare:function(i,s){return o.pointsSameX(i,s)?o.pointsSameY(i,s)?0:i[1]<s[1]?-1:1:i[0]<s[0]?-1:1},pointsCollinear:function(o,s,_){var F=o[0]-s[0],N=o[1]-s[1],j=s[0]-_[0];return Math.abs(F*(s[1]-_[1])-j*N)<i},linesIntersect:function(o,s,_,F){var N=s[0]-o[0],j=s[1]-o[1],Z=F[0]-_[0],X=F[1]-_[1],$=N*X-j*Z;if(Math.abs($)<i)return!1;var ee=o[0]-_[0],et=o[1]-_[1],er=(Z*et-X*ee)/$,en=(N*et-j*ee)/$,ei={alongA:0,alongB:0,pt:[o[0]+er*N,o[1]+er*j]};return er<=-i?ei.alongA=-2:er<i?ei.alongA=-1:er-1<=-i?ei.alongA=0:er-1<i?ei.alongA=1:ei.alongA=2,en<=-i?ei.alongB=-2:en<i?ei.alongB=-1:en-1<=-i?ei.alongB=0:en-1<i?ei.alongB=1:ei.alongB=2,ei},pointInsideRegion:function(o,s){for(var _=o[0],F=o[1],N=s[s.length-1][0],j=s[s.length-1][1],Z=!1,X=0;X<s.length;X++){var $=s[X][0],ee=s[X][1];ee-F>i!=j-F>i&&(N-$)*(F-ee)/(j-ee)+$-_>i&&(Z=!Z),N=$,j=ee}return Z}};return o}i.exports=Epsilon},10670:function(i){i.exports={toPolygon:function(i,o){function GeoPoly(o){if(o.length<=0)return i.segments({inverted:!1,regions:[]});function LineString(o){var s=o.slice(0,o.length-1);return i.segments({inverted:!1,regions:[s]})}for(var s=LineString(o[0]),_=1;_<o.length;_++)s=i.selectDifference(i.combine(s,LineString(o[_])));return s}if("Polygon"===o.type)return i.polygon(GeoPoly(o.coordinates));if("MultiPolygon"===o.type){for(var s=i.segments({inverted:!1,regions:[]}),_=0;_<o.coordinates.length;_++)s=i.selectUnion(i.combine(s,GeoPoly(o.coordinates[_])));return i.polygon(s)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(i,o,s){function regionInsideRegion(i,s){return o.pointInsideRegion([(i[0][0]+i[1][0])*.5,(i[0][1]+i[1][1])*.5],s)}function newNode(i){return{region:i,children:[]}}s=i.polygon(i.segments(s));var _=newNode(null);function addChild(i,o){for(var s=0;s<i.children.length;s++){var _=i.children[s];if(regionInsideRegion(o,_.region)){addChild(_,o);return}}for(var F=newNode(o),s=0;s<i.children.length;s++){var _=i.children[s];regionInsideRegion(_.region,o)&&(F.children.push(_),i.children.splice(s,1),s--)}i.children.push(F)}for(var F=0;F<s.regions.length;F++){var N=s.regions[F];N.length<3||addChild(_,N)}function forceWinding(i,o){for(var s=0,_=i[i.length-1][0],F=i[i.length-1][1],N=[],j=0;j<i.length;j++){var Z=i[j][0],X=i[j][1];N.push([Z,X]),s+=X*_-Z*F,_=Z,F=X}return s<0!==o&&N.reverse(),N.push([N[0][0],N[0][1]]),N}var j=[];function addExterior(i){var o=[forceWinding(i.region,!1)];j.push(o);for(var s=0;s<i.children.length;s++)o.push(getInterior(i.children[s]))}function getInterior(i){for(var o=0;o<i.children.length;o++)addExterior(i.children[o]);return forceWinding(i.region,!0)}for(var F=0;F<_.children.length;F++)addExterior(_.children[F]);return j.length<=0?{type:"Polygon",coordinates:[]}:1==j.length?{type:"Polygon",coordinates:j[0]}:{type:"MultiPolygon",coordinates:j}}}},87263:function(i,o,s){var _=s(26859);function Intersecter(i,o,s){function segmentNew(i,o){return{id:s?s.segmentId():-1,start:i,end:o,myFill:{above:null,below:null},otherFill:null}}function segmentCopy(i,o,_){return{id:s?s.segmentId():-1,start:i,end:o,myFill:{above:_.myFill.above,below:_.myFill.below},otherFill:null}}var F=_.create();function eventCompare(i,s,_,F,N,j){var Z=o.pointsCompare(s,N);return 0!==Z?Z:o.pointsSame(_,j)?0:i!==F?i?1:-1:o.pointAboveOrOnLine(_,F?N:j,F?j:N)?1:-1}function eventAdd(i,o){F.insertBefore(i,function(s){return 0>eventCompare(i.isStart,i.pt,o,s.isStart,s.pt,s.other.pt)})}function eventAddSegmentStart(i,o){var s=_.node({isStart:!0,pt:i.start,seg:i,primary:o,other:null,status:null});return eventAdd(s,i.end),s}function eventAddSegmentEnd(i,o,s){var F=_.node({isStart:!1,pt:o.end,seg:o,primary:s,other:i,status:null});i.other=F,eventAdd(F,i.pt)}function eventAddSegment(i,o){var s=eventAddSegmentStart(i,o);return eventAddSegmentEnd(s,i,o),s}function eventUpdateEnd(i,o){s&&s.segmentChop(i.seg,o),i.other.remove(),i.seg.end=o,i.other.pt=o,eventAdd(i.other,i.pt)}function eventDivide(i,o){var s=segmentCopy(o,i.seg.end,i.seg);return eventUpdateEnd(i,o),eventAddSegment(s,i.primary)}function calculate(N,j){var Z=_.create();function statusCompare(i,s){var _=i.seg.start,F=i.seg.end,N=s.seg.start,j=s.seg.end;return o.pointsCollinear(_,N,j)?o.pointsCollinear(F,N,j)?1:o.pointAboveOrOnLine(F,N,j)?1:-1:o.pointAboveOrOnLine(_,N,j)?1:-1}function statusFindSurrounding(i){return Z.findTransition(function(o){return statusCompare(i,o.ev)>0})}function checkIntersection(i,_){var F=i.seg,N=_.seg,j=F.start,Z=F.end,X=N.start,$=N.end;s&&s.checkIntersection(F,N);var ee=o.linesIntersect(j,Z,X,$);if(!1===ee){if(!o.pointsCollinear(j,Z,X)||o.pointsSame(j,$)||o.pointsSame(Z,X))return!1;var et=o.pointsSame(j,X),er=o.pointsSame(Z,$);if(et&&er)return _;var en=!et&&o.pointBetween(j,X,$),ei=!er&&o.pointBetween(Z,X,$);if(et)return ei?eventDivide(_,Z):eventDivide(i,$),_;en&&(er||(ei?eventDivide(_,Z):eventDivide(i,$)),eventDivide(_,j))}else 0===ee.alongA&&(-1===ee.alongB?eventDivide(i,X):0===ee.alongB?eventDivide(i,ee.pt):1===ee.alongB&&eventDivide(i,$)),0===ee.alongB&&(-1===ee.alongA?eventDivide(_,j):0===ee.alongA?eventDivide(_,ee.pt):1===ee.alongA&&eventDivide(_,Z));return!1}for(var X=[];!F.isEmpty();){var $=F.getHead();if(s&&s.vert($.pt[0]),$.isStart){s&&s.segmentNew($.seg,$.primary);var ee,et,er=statusFindSurrounding($),en=er.before?er.before.ev:null,ei=er.after?er.after.ev:null;s&&s.tempStatus($.seg,!!en&&en.seg,!!ei&&ei.seg);var eo=function(){if(en){var i=checkIntersection($,en);if(i)return i}return!!ei&&checkIntersection($,ei)}();if(eo&&(i?(ee=null===$.seg.myFill.below||$.seg.myFill.above!==$.seg.myFill.below)&&(eo.seg.myFill.above=!eo.seg.myFill.above):eo.seg.otherFill=$.seg.myFill,s&&s.segmentUpdate(eo.seg),$.other.remove(),$.remove()),F.getHead()!==$){s&&s.rewind($.seg);continue}i?(ee=null===$.seg.myFill.below||$.seg.myFill.above!==$.seg.myFill.below,ei?$.seg.myFill.below=ei.seg.myFill.above:$.seg.myFill.below=N,ee?$.seg.myFill.above=!$.seg.myFill.below:$.seg.myFill.above=$.seg.myFill.below):null===$.seg.otherFill&&(et=ei?$.primary===ei.primary?ei.seg.otherFill.above:ei.seg.myFill.above:$.primary?j:N,$.seg.otherFill={above:et,below:et}),s&&s.status($.seg,!!en&&en.seg,!!ei&&ei.seg),$.other.status=er.insert(_.node({ev:$}))}else{var es=$.status;if(null===es)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(Z.exists(es.prev)&&Z.exists(es.next)&&checkIntersection(es.prev.ev,es.next.ev),s&&s.statusRemove(es.ev.seg),es.remove(),!$.primary){var el=$.seg.myFill;$.seg.myFill=$.seg.otherFill,$.seg.otherFill=el}X.push($.seg)}F.getHead().remove()}return s&&s.done(),X}return i?{addRegion:function(i){for(var s,_=i[i.length-1],F=0;F<i.length;F++){s=_,_=i[F];var N=o.pointsCompare(s,_);0!==N&&eventAddSegment(segmentNew(N<0?s:_,N<0?_:s),!0)}},calculate:function(i){return calculate(i,!1)}}:{calculate:function(i,o,s,_){return i.forEach(function(i){eventAddSegment(segmentCopy(i.start,i.end,i),!0)}),s.forEach(function(i){eventAddSegment(segmentCopy(i.start,i.end,i),!1)}),calculate(o,_)}}}i.exports=Intersecter},26859:function(i){i.exports={create:function(){var i={root:{root:!0,next:null},exists:function(o){return null!==o&&o!==i.root},isEmpty:function(){return null===i.root.next},getHead:function(){return i.root.next},insertBefore:function(o,s){for(var _=i.root,F=i.root.next;null!==F;){if(s(F)){o.prev=F.prev,o.next=F,F.prev.next=o,F.prev=o;return}_=F,F=F.next}_.next=o,o.prev=_,o.next=null},findTransition:function(o){for(var s=i.root,_=i.root.next;null!==_&&!o(_);)s=_,_=_.next;return{before:s===i.root?null:s,after:_,insert:function(i){return i.prev=s,i.next=_,s.next=i,null!==_&&(_.prev=i),i}}}};return i},node:function(i){return i.prev=null,i.next=null,i.remove=function(){i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.prev=null,i.next=null},i}}},11328:function(i){function SegmentChainer(i,o,s){var _=[],F=[];return i.forEach(function(i){var N=i.start,j=i.end;if(o.pointsSame(N,j)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}s&&s.chainStart(i);var Z={index:0,matches_head:!1,matches_pt1:!1},X={index:0,matches_head:!1,matches_pt1:!1},$=Z;function setMatch(i,o,s){return($.index=i,$.matches_head=o,$.matches_pt1=s,$===Z)?($=X,!1):($=null,!0)}for(var ee=0;ee<_.length;ee++){var et=_[ee],er=et[0];et[1];var en=et[et.length-1];if(et[et.length-2],o.pointsSame(er,N)){if(setMatch(ee,!0,!0))break}else if(o.pointsSame(er,j)){if(setMatch(ee,!0,!1))break}else if(o.pointsSame(en,N)){if(setMatch(ee,!1,!0))break}else if(o.pointsSame(en,j)&&setMatch(ee,!1,!1))break}if($===Z){_.push([N,j]),s&&s.chainNew(N,j);return}if($===X){s&&s.chainMatch(Z.index);var ei=Z.index,eo=Z.matches_pt1?j:N,es=Z.matches_head,et=_[ei],el=es?et[0]:et[et.length-1],ec=es?et[1]:et[et.length-2],eu=es?et[et.length-1]:et[0],ef=es?et[et.length-2]:et[1];if(o.pointsCollinear(ec,el,eo)&&(es?(s&&s.chainRemoveHead(Z.index,eo),et.shift()):(s&&s.chainRemoveTail(Z.index,eo),et.pop()),el=ec),o.pointsSame(eu,eo)){_.splice(ei,1),o.pointsCollinear(ef,eu,el)&&(es?(s&&s.chainRemoveTail(Z.index,el),et.pop()):(s&&s.chainRemoveHead(Z.index,el),et.shift())),s&&s.chainClose(Z.index),F.push(et);return}es?(s&&s.chainAddHead(Z.index,eo),et.unshift(eo)):(s&&s.chainAddTail(Z.index,eo),et.push(eo));return}function reverseChain(i){s&&s.chainReverse(i),_[i].reverse()}function appendChain(i,F){var N=_[i],j=_[F],Z=N[N.length-1],X=N[N.length-2],$=j[0],ee=j[1];o.pointsCollinear(X,Z,$)&&(s&&s.chainRemoveTail(i,Z),N.pop(),Z=X),o.pointsCollinear(Z,$,ee)&&(s&&s.chainRemoveHead(F,$),j.shift()),s&&s.chainJoin(i,F),_[i]=N.concat(j),_.splice(F,1)}var ed=Z.index,eh=X.index;s&&s.chainConnect(ed,eh);var ep=_[ed].length<_[eh].length;Z.matches_head?X.matches_head?ep?(reverseChain(ed),appendChain(ed,eh)):(reverseChain(eh),appendChain(eh,ed)):appendChain(eh,ed):X.matches_head?appendChain(ed,eh):ep?(reverseChain(ed),appendChain(eh,ed)):(reverseChain(eh),appendChain(ed,eh))}),F}i.exports=SegmentChainer},55968:function(i){function select(i,o,s){var _=[];return i.forEach(function(i){var F=(i.myFill.above?8:0)+(i.myFill.below?4:0)+(i.otherFill&&i.otherFill.above?2:0)+(i.otherFill&&i.otherFill.below?1:0);0!==o[F]&&_.push({id:s?s.segmentId():-1,start:i.start,end:i.end,myFill:{above:1===o[F],below:2===o[F]},otherFill:null})}),s&&s.selected(_),_}i.exports={union:function(i,o){return select(i,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],o)},intersect:function(i,o){return select(i,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],o)},difference:function(i,o){return select(i,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],o)},differenceRev:function(i,o){return select(i,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],o)},xor:function(i,o){return select(i,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],o)}}},14847:function(i,o,s){"use strict";var _=s(21630).Transform,F=s(90715);function ParserStream(){_.call(this,{readableObjectMode:!0})}function ProbeError(i,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack||"",this.name=this.constructor.name,this.message=i,o&&(this.code=o),s&&(this.statusCode=s)}ParserStream.prototype=Object.create(_.prototype),ParserStream.prototype.constructor=ParserStream,F(ParserStream.prototype),o.OF=function(i,o,s){for(var _=o,F=0;F<s.length;)if(i[_++]!==s[F++])return!1;return!0},o.eG=function(i,o){var s=[],_=0;if(o&&"hex"===o)for(;_<i.length;)s.push(parseInt(i.slice(_,_+2),16)),_+=2;else for(;_<i.length;_++)s.push(255&i.charCodeAt(_));return s},o.mP=function(i,o){return i[o]|i[o+1]<<8},o.n8=function(i,o){return i[o+1]|i[o]<<8},o.nm=function(i,o){return i[o]|i[o+1]<<8|i[o+2]<<16|16777216*i[o+3]},o.Ag=function(i,o){return i[o+3]|i[o+2]<<8|i[o+1]<<16|16777216*i[o]},ProbeError.prototype=Object.create(Error.prototype),ProbeError.prototype.constructor=ProbeError},71371:function(i){"use strict";function error(i,o){var s=Error(i);return s.code=o,s}function utf8_decode(i){try{return decodeURIComponent(escape(i))}catch(o){return i}}function ExifParser(i,o,s){this.input=i.subarray(o,s),this.start=o;var _=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\x00"!==_&&"MM\x00*"!==_)throw error("invalid TIFF signature","EBADDATA");this.big_endian="M"===_[0]}ExifParser.prototype.each=function(i){this.aborted=!1;var o=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:o}];this.ifds_to_read.length>0&&!this.aborted;){var s=this.ifds_to_read.shift();s.offset&&this.scan_ifd(s.id,s.offset,i)}},ExifParser.prototype.read_uint16=function(i){var o=this.input;if(i+2>o.length)throw error("unexpected EOF","EBADDATA");return this.big_endian?256*o[i]+o[i+1]:o[i]+256*o[i+1]},ExifParser.prototype.read_uint32=function(i){var o=this.input;if(i+4>o.length)throw error("unexpected EOF","EBADDATA");return this.big_endian?16777216*o[i]+65536*o[i+1]+256*o[i+2]+o[i+3]:o[i]+256*o[i+1]+65536*o[i+2]+16777216*o[i+3]},ExifParser.prototype.is_subifd_link=function(i,o){return 0===i&&34665===o||0===i&&34853===o||34665===i&&40965===o},ExifParser.prototype.exif_format_length=function(i){switch(i){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},ExifParser.prototype.exif_format_read=function(i,o){var s;switch(i){case 1:case 2:return this.input[o];case 6:return(s=this.input[o])|(128&s)*33554430;case 3:return this.read_uint16(o);case 8:return(s=this.read_uint16(o))|(32768&s)*131070;case 4:return this.read_uint32(o);case 9:return 0|(s=this.read_uint32(o));default:return null}},ExifParser.prototype.scan_ifd=function(i,o,s){var _=this.read_uint16(o);o+=2;for(var F=0;F<_;F++){var N=this.read_uint16(o),j=this.read_uint16(o+2),Z=this.read_uint32(o+4),X=this.exif_format_length(j),$=Z*X,ee=$<=4?o+8:this.read_uint32(o+8),et=!1;if(ee+$>this.input.length)throw error("unexpected EOF","EBADDATA");for(var er=[],en=ee,ei=0;ei<Z;ei++,en+=X){var eo=this.exif_format_read(j,en);if(null===eo){er=null;break}er.push(eo)}if(Array.isArray(er)&&2===j&&(er=utf8_decode(String.fromCharCode.apply(null,er)))&&"\x00"===er[er.length-1]&&(er=er.slice(0,-1)),this.is_subifd_link(i,N)&&Array.isArray(er)&&Number.isInteger(er[0])&&er[0]>0&&(this.ifds_to_read.push({id:N,offset:er[0]}),et=!0),!1===s({is_big_endian:this.big_endian,ifd:i,tag:N,format:j,count:Z,entry_offset:o+this.start,data_length:$,data_offset:ee+this.start,value:er,is_subifd_link:et})){this.aborted=!0;return}o+=12}0===i&&this.ifds_to_read.push({id:1,offset:this.read_uint32(o)})},i.exports.ExifParser=ExifParser,i.exports.get_orientation=function(i){var o=0;try{return new ExifParser(i,0,i.length).each(function(i){if(0===i.ifd&&274===i.tag&&Array.isArray(i.value))return o=i.value[0],!1}),o}catch(i){return -1}}},76767:function(i,o,s){"use strict";var _=s(14847).n8,F=s(14847).Ag;function unbox(i,o){if(i.length<4+o)return null;var s=F(i,o);return i.length<s+o||s<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(o+4,o+8)),data:i.slice(o+8,o+s),end:o+s}}function scan_ipco(i,o){for(var s=0;;){var _=unbox(i,s);if(!_)break;switch(_.boxtype){case"ispe":o.sizes.push({width:F(_.data,4),height:F(_.data,8)});break;case"irot":o.transforms.push({type:"irot",value:3&_.data[0]});break;case"imir":o.transforms.push({type:"imir",value:1&_.data[0]})}s=_.end}}function readUIntBE(i,o,s){for(var _=0,F=0;F<s;F++)_=256*_+(i[o+F]||0);return _}function scan_iloc(i,o){for(var s=i[4]>>4&15,F=15&i[4],N=i[5]>>4&15,j=_(i,6),Z=8,X=0;X<j;X++){var $=_(i,Z),ee=_(i,Z+=2),et=readUIntBE(i,Z+=2,N),er=_(i,Z+=N);if(Z+=2,0===ee&&1===er){var en=readUIntBE(i,Z,s),ei=readUIntBE(i,Z+s,F);o.item_loc[$]={length:ei,offset:en+et}}Z+=er*(s+F)}}function scan_iinf(i,o){for(var s=_(i,4),F=6,N=0;N<s;N++){var j=unbox(i,F);if(!j)break;if("infe"===j.boxtype){for(var Z=_(j.data,4),X="",$=8;$<j.data.length&&j.data[$];$++)X+=String.fromCharCode(j.data[$]);o.item_inf[X]=Z}F=j.end}}function scan_iprp(i,o){for(var s=0;;){var _=unbox(i,s);if(!_)break;"ipco"===_.boxtype&&scan_ipco(_.data,o),s=_.end}}function scan_meta(i,o){for(var s=4;;){var _=unbox(i,s);if(!_)break;"iprp"===_.boxtype&&scan_iprp(_.data,o),"iloc"===_.boxtype&&scan_iloc(_.data,o),"iinf"===_.boxtype&&scan_iinf(_.data,o),s=_.end}}function getMaxSize(i){var o=i.reduce(function(i,o){return i.width>o.width||i.width===o.width&&i.height>o.height?i:o}),s=i.reduce(function(i,o){return i.height>o.height||i.height===o.height&&i.width>o.width?i:o});return o.width>s.height||o.width===s.height&&o.height>s.width?o:s}i.exports.unbox=unbox,i.exports.readSizeFromMeta=function(i){var o={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(scan_meta(i,o),o.sizes.length){var s=getMaxSize(o.sizes),_=1;o.transforms.forEach(function(i){var o={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},s={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===i.type&&(0===i.value?_=s[_]:(_=o[_=s[_]],_=o[_])),"irot"===i.type)for(var F=0;F<i.value;F++)_=o[_]});var F=null;return o.item_inf.Exif&&(F=o.item_loc[o.item_inf.Exif]),{width:s.width,height:s.height,orientation:o.transforms.length?_:null,variants:o.sizes,exif_location:F}}},i.exports.getMimeType=function(i){var o=String.fromCharCode.apply(null,i.slice(0,4)),s={};s[o]=!0;for(var _=8;_<i.length;_+=4)s[String.fromCharCode.apply(null,i.slice(_,_+4))]=!0;if(s.mif1||s.msf1||s.miaf)return"avif"===o||"avis"===o||"avio"===o?{type:"avif",mime:"image/avif"}:"heic"===o||"heix"===o?{type:"heic",mime:"image/heic"}:"hevc"===o||"hevx"===o?{type:"heic",mime:"image/heic-sequence"}:s.avif||s.avis?{type:"avif",mime:"image/avif"}:s.heic||s.heix||s.hevc||s.hevx||s.heis?s.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(i,o,s){"use strict";var _=s(14847).eG,F=s(14847).OF,N=s(14847).Ag,j=s(76767),Z=s(71371),X=_("ftyp");i.exports=function(i){if(F(i,4,X)){var o=j.unbox(i,0);if(o){var s=j.getMimeType(o.data);if(s){for(var _,$=o.end;;){var ee=j.unbox(i,$);if(!ee)break;if($=ee.end,"mdat"===ee.boxtype)return;if("meta"===ee.boxtype){_=ee.data;break}}if(_){var et=j.readSizeFromMeta(_);if(et){var er={width:et.width,height:et.height,type:s.type,mime:s.mime,wUnits:"px",hUnits:"px"};if(et.variants.length>1&&(er.variants=et.variants),et.orientation&&(er.orientation=et.orientation),et.exif_location&&et.exif_location.offset+et.exif_location.length<=i.length){var en=N(i,et.exif_location.offset),ei=i.slice(et.exif_location.offset+en+4,et.exif_location.offset+et.exif_location.length),eo=Z.get_orientation(ei);eo>0&&(er.orientation=eo)}return er}}}}}}},2504:function(i,o,s){"use strict";var _=s(14847).eG,F=s(14847).OF,N=s(14847).mP,j=_("BM");i.exports=function(i){if(!(i.length<26)&&F(i,0,j))return{width:N(i,18),height:N(i,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(i,o,s){"use strict";var _=s(14847).eG,F=s(14847).OF,N=s(14847).mP,j=_("GIF87a"),Z=_("GIF89a");i.exports=function(i){if(!(i.length<10)&&(F(i,0,j)||F(i,0,Z)))return{width:N(i,6),height:N(i,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(i,o,s){"use strict";var _=s(14847).mP;i.exports=function(i){var o=_(i,0),s=_(i,2),F=_(i,4);if(0===o&&1===s&&F){for(var N=[],j={width:0,height:0},Z=0;Z<F;Z++){var X=i[6+16*Z]||256,$=i[6+16*Z+1]||256,ee={width:X,height:$};N.push(ee),(X>j.width||$>j.height)&&(j=ee)}return{width:j.width,height:j.height,variants:N,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(i,o,s){"use strict";var _=s(14847).n8,F=s(14847).eG,N=s(14847).OF,j=s(71371),Z=F("Exif\x00\x00");i.exports=function(i){if(!(i.length<2)&&255===i[0]&&216===i[1]&&255===i[2])for(var o=2;;){for(;;){if(i.length-o<2)return;if(255===i[o++])break}for(var s,F,X=i[o++];255===X;)X=i[o++];if(208<=X&&X<=217||1===X)s=0;else{if(!(192<=X)||!(X<=254)||i.length-o<2)return;s=_(i,o)-2,o+=2}if(217===X||218===X)return;if(225===X&&s>=10&&N(i,o,Z)&&(F=j.get_orientation(i.slice(o+6,o+s))),s>=5&&192<=X&&X<=207&&196!==X&&200!==X&&204!==X){if(i.length-o<s)return;var $={width:_(i,o+3),height:_(i,o+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return F>0&&($.orientation=F),$}o+=s}}},6303:function(i,o,s){"use strict";var _=s(14847).eG,F=s(14847).OF,N=s(14847).Ag,j=_("\x89PNG\r\n\x1a\n"),Z=_("IHDR");i.exports=function(i){if(!(i.length<24)&&F(i,0,j)&&F(i,12,Z))return{width:N(i,16),height:N(i,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(i,o,s){"use strict";var _=s(14847).eG,F=s(14847).OF,N=s(14847).Ag,j=_("8BPS\x00\x01");i.exports=function(i){if(!(i.length<22)&&F(i,0,j))return{width:N(i,18),height:N(i,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(i){"use strict";function isWhiteSpace(i){return 32===i||9===i||13===i||10===i}function isFinitePositive(i){return"number"==typeof i&&isFinite(i)&&i>0}function canBeSvg(i){var o=0,s=i.length;for(239===i[0]&&187===i[1]&&191===i[2]&&(o=3);o<s&&isWhiteSpace(i[o]);)o++;return o!==s&&60===i[o]}var o=/<[-_.:a-zA-Z0-9][^>]*>/,s=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,_=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,F=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,N=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,j=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function svgAttrs(i){var o=i.match(_),s=i.match(F),j=i.match(N);return{width:o&&(o[1]||o[2]),height:s&&(s[1]||s[2]),viewbox:j&&(j[1]||j[2])}}function units(i){return j.test(i)?i.match(j)[0]:"px"}i.exports=function(i){if(canBeSvg(i)){for(var _="",F=0;F<i.length;F++)_+=String.fromCharCode(i[F]);var N=(_.match(o)||[""])[0];if(s.test(N)){var j=svgAttrs(N),Z=parseFloat(j.width),X=parseFloat(j.height);if(j.width&&j.height){if(!isFinitePositive(Z)||!isFinitePositive(X))return;return{width:Z,height:X,type:"svg",mime:"image/svg+xml",wUnits:units(j.width),hUnits:units(j.height)}}var $=(j.viewbox||"").split(" "),ee={width:$[2],height:$[3]},et=parseFloat(ee.width),er=parseFloat(ee.height);if(isFinitePositive(et)&&isFinitePositive(er)&&units(ee.width)===units(ee.height)){var en=et/er;if(j.width){if(!isFinitePositive(Z))return;return{width:Z,height:Z/en,type:"svg",mime:"image/svg+xml",wUnits:units(j.width),hUnits:units(j.width)}}if(j.height){if(!isFinitePositive(X))return;return{width:X*en,height:X,type:"svg",mime:"image/svg+xml",wUnits:units(j.height),hUnits:units(j.height)}}return{width:et,height:er,type:"svg",mime:"image/svg+xml",wUnits:units(ee.width),hUnits:units(ee.height)}}}}}},66278:function(i,o,s){"use strict";var _=s(14847).eG,F=s(14847).OF,N=s(14847).mP,j=s(14847).n8,Z=s(14847).nm,X=s(14847).Ag,$=_("II*\x00"),ee=_("MM\x00*");function readUInt16(i,o,s){return s?j(i,o):N(i,o)}function readUInt32(i,o,s){return s?X(i,o):Z(i,o)}function readIFDValue(i,o,s){var _=readUInt16(i,o+2,s);return 1!==readUInt32(i,o+4,s)||3!==_&&4!==_?null:3===_?readUInt16(i,o+8,s):readUInt32(i,o+8,s)}i.exports=function(i){if(!(i.length<8)&&(F(i,0,$)||F(i,0,ee))){var o,s,_,N,j=77===i[0],Z=readUInt32(i,4,j)-8;if(!(Z<0)){var X=Z+8;if(!(i.length-X<2)){var et=12*readUInt16(i,X+0,j);if(!(et<=0)&&(X+=2,!(i.length-X<et))){for(o=0;o<et;o+=12)256===(N=readUInt16(i,X+o,j))?s=readIFDValue(i,X+o,j):257===N&&(_=readIFDValue(i,X+o,j));if(s&&_)return{width:s,height:_,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},90784:function(i,o,s){"use strict";var _=s(14847).eG,F=s(14847).OF,N=s(14847).mP,j=s(14847).nm,Z=s(71371),X=_("RIFF"),$=_("WEBP");function parseVP8(i,o){if(157===i[o+3]&&1===i[o+4]&&42===i[o+5])return{width:16383&N(i,o+6),height:16383&N(i,o+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function parseVP8L(i,o){if(47===i[o]){var s=j(i,o+1);return{width:(16383&s)+1,height:(s>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function parseVP8X(i,o){return{width:(i[o+6]<<16|i[o+5]<<8|i[o+4])+1,height:(i[o+9]<<o|i[o+8]<<8|i[o+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}i.exports=function(i){if(!(i.length<16)&&(F(i,0,X)||F(i,8,$))){var o=12,s=null,_=0,N=j(i,4)+8;if(!(N>i.length)){for(;o+8<N;){if(0===i[o]){o++;continue}var ee=String.fromCharCode.apply(null,i.slice(o,o+4)),et=j(i,o+4);"VP8 "===ee&&et>=10?s=s||parseVP8(i,o+8):"VP8L"===ee&&et>=9?s=s||parseVP8L(i,o+8):"VP8X"===ee&&et>=10?s=s||parseVP8X(i,o+8):"EXIF"===ee&&(_=Z.get_orientation(i.slice(o+8,o+8+et)),o=1/0),o+=8+et}if(s)return _>0&&(s.orientation=_),s}}}},91497:function(i,o,s){"use strict";i.exports={avif:s(24461),bmp:s(2504),gif:s(47342),ico:s(31355),jpeg:s(54261),png:s(6303),psd:s(38689),svg:s(6881),tiff:s(66278),webp:s(90784)}},33575:function(i,o,s){"use strict";var _=s(91497);function probeBuffer(i){for(var o=Object.keys(_),s=0;s<o.length;s++){var F=_[o[s]](i);if(F)return F}return null}i.exports=function(i){return probeBuffer(i)},i.exports.parsers=_},90386:function(i){var o,s,_,F=i.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(i){if(o===setTimeout)return setTimeout(i,0);if((o===defaultSetTimout||!o)&&setTimeout)return o=setTimeout,setTimeout(i,0);try{return o(i,0)}catch(s){try{return o.call(null,i,0)}catch(s){return o.call(this,i,0)}}}function runClearTimeout(i){if(s===clearTimeout)return clearTimeout(i);if((s===defaultClearTimeout||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(i);try{return s(i)}catch(o){try{return s.call(null,i)}catch(o){return s.call(this,i)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(i){o=defaultSetTimout}try{s="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(i){s=defaultClearTimeout}}();var N=[],j=!1,Z=-1;function cleanUpNextTick(){j&&_&&(j=!1,_.length?N=_.concat(N):Z=-1,N.length&&drainQueue())}function drainQueue(){if(!j){var i=runTimeout(cleanUpNextTick);j=!0;for(var o=N.length;o;){for(_=N,N=[];++Z<o;)_&&_[Z].run();Z=-1,o=N.length}_=null,j=!1,runClearTimeout(i)}}function Item(i,o){this.fun=i,this.array=o}function noop(){}F.nextTick=function(i){var o=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)o[s-1]=arguments[s];N.push(new Item(i,o)),1!==N.length||j||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},F.title="browser",F.browser=!0,F.env={},F.argv=[],F.version="",F.versions={},F.on=noop,F.addListener=noop,F.once=noop,F.off=noop,F.removeListener=noop,F.removeAllListeners=noop,F.emit=noop,F.prependListener=noop,F.prependOnceListener=noop,F.listeners=function(i){return[]},F.binding=function(i){throw Error("process.binding is not supported")},F.cwd=function(){return"/"},F.chdir=function(i){throw Error("process.chdir is not supported")},F.umask=function(){return 0}},5877:function(i,o,s){for(var _=s(9748),F="undefined"==typeof window?s.g:window,N=["moz","webkit"],j="AnimationFrame",Z=F["request"+j],X=F["cancel"+j]||F["cancelRequest"+j],$=0;!Z&&$<N.length;$++)Z=F[N[$]+"Request"+j],X=F[N[$]+"Cancel"+j]||F[N[$]+"CancelRequest"+j];if(!Z||!X){var ee=0,et=0,er=[],en=1e3/60;Z=function(i){if(0===er.length){var o=_(),s=Math.max(0,en-(o-ee));ee=s+o,setTimeout(function(){var i=er.slice(0);er.length=0;for(var o=0;o<i.length;o++)if(!i[o].cancelled)try{i[o].callback(ee)}catch(i){setTimeout(function(){throw i},0)}},Math.round(s))}return er.push({handle:++et,callback:i,cancelled:!1}),et},X=function(i){for(var o=0;o<er.length;o++)er[o].handle===i&&(er[o].cancelled=!0)}}i.exports=function(i){return Z.call(F,i)},i.exports.cancel=function(){X.apply(F,arguments)},i.exports.polyfill=function(i){i||(i=F),i.requestAnimationFrame=Z,i.cancelAnimationFrame=X}},3593:function(i,o,s){"use strict";var _=s(21527),F=s(25075),N=s(93447),j=s(71299),Z=s(56131),X=s(30120),$=s(57060),ee=$.float32,et=$.fract32;i.exports=Error2D;var er=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function Error2D(i,o){if("function"==typeof i?(o||(o={}),o.regl=i):o=i,o.length&&(o.positions=o),!(i=o.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var s,$,en,ei,eo,es,el=i._gl,ec={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},eu=[];return ei=i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),$=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),en=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),eo=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),es=i.buffer({usage:"static",type:"float",data:er}),update(o),s=i({vert:"\n		precision highp float;\n\n		attribute vec2 position, positionFract;\n		attribute vec4 error;\n		attribute vec4 color;\n\n		attribute vec2 direction, lineOffset, capOffset;\n\n		uniform vec4 viewport;\n		uniform float lineWidth, capSize;\n		uniform vec2 scale, scaleFract, translate, translateFract;\n\n		varying vec4 fragColor;\n\n		void main() {\n			fragColor = color / 255.;\n\n			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n			vec2 position = position + dxy;\n\n			vec2 pos = (position + translate) * scale\n				+ (positionFract + translateFract) * scale\n				+ (position + translate) * scaleFract\n				+ (positionFract + translateFract) * scaleFract;\n\n			pos += pixelOffset / viewport.zw;\n\n			gl_Position = vec4(pos * 2. - 1., 0, 1);\n		}\n		",frag:"\n		precision highp float;\n\n		varying vec4 fragColor;\n\n		uniform float opacity;\n\n		void main() {\n			gl_FragColor = fragColor;\n			gl_FragColor.a *= opacity;\n		}\n		",uniforms:{range:i.prop("range"),lineWidth:i.prop("lineWidth"),capSize:i.prop("capSize"),opacity:i.prop("opacity"),scale:i.prop("scale"),translate:i.prop("translate"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),viewport:function(i,o){return[o.viewport.x,o.viewport.y,i.viewportWidth,i.viewportHeight]}},attributes:{color:{buffer:ei,offset:function(i,o){return 4*o.offset},divisor:1},position:{buffer:$,offset:function(i,o){return 8*o.offset},divisor:1},positionFract:{buffer:en,offset:function(i,o){return 8*o.offset},divisor:1},error:{buffer:eo,offset:function(i,o){return 16*o.offset},divisor:1},direction:{buffer:es,stride:24,offset:0},lineOffset:{buffer:es,stride:24,offset:8},capOffset:{buffer:es,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:!1,instances:i.prop("count"),count:er.length}),Z(error2d,{update:update,draw:draw,destroy:destroy,regl:i,gl:el,canvas:el.canvas,groups:eu}),error2d;function error2d(i){i?update(i):null===i&&destroy(),draw()}function draw(o){if("number"==typeof o)return drawGroup(o);o&&!Array.isArray(o)&&(o=[o]),i._refresh(),eu.forEach(function(i,s){if(i){if(o&&(o[s]?i.draw=!0:i.draw=!1),!i.draw){i.draw=!0;return}drawGroup(s)}})}function drawGroup(i){"number"==typeof i&&(i=eu[i]),null!=i&&i&&i.count&&i.color&&i.opacity&&i.positions&&i.positions.length>1&&(i.scaleRatio=[i.scale[0]*i.viewport.width,i.scale[1]*i.viewport.height],s(i),i.after&&i.after(i))}function update(i){if(i){null!=i.length?"number"==typeof i[0]&&(i=[{positions:i}]):Array.isArray(i)||(i=[i]);var o=0,s=0;if(error2d.groups=eu=i.map(function(i,$){var ee=eu[$];return i&&("function"==typeof i?i={after:i}:"number"==typeof i[0]&&(i={positions:i}),i=j(i,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),ee||(eu[$]=ee={id:$,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},i=Z({},ec,i)),N(ee,i,[{lineWidth:function(i){return .5*+i},capSize:function(i){return .5*+i},opacity:parseFloat,errors:function(i){return i=X(i),s+=i.length,i},positions:function(i,s){return i=X(i,"float64"),s.count=Math.floor(i.length/2),s.bounds=_(i,2),s.offset=o,o+=s.count,i}},{color:function(i,o){var s=o.count;if(i||(i="transparent"),!Array.isArray(i)||"number"==typeof i[0]){var _=i;i=Array(s);for(var N=0;N<s;N++)i[N]=_}if(i.length<s)throw Error("Not enough colors");for(var j=new Uint8Array(4*s),Z=0;Z<s;Z++){var X=F(i[Z],"uint8");j.set(X,4*Z)}return j},range:function(i,o,s){var _=o.bounds;return i||(i=_),o.scale=[1/(i[2]-i[0]),1/(i[3]-i[1])],o.translate=[-i[0],-i[1]],o.scaleFract=et(o.scale),o.translateFract=et(o.translate),i},viewport:function(i){var o;return Array.isArray(i)?o={x:i[0],y:i[1],width:i[2]-i[0],height:i[3]-i[1]}:i?(o={x:i.x||i.left||0,y:i.y||i.top||0},i.right?o.width=i.right-o.x:o.width=i.w||i.width||0,i.bottom?o.height=i.bottom-o.y:o.height=i.h||i.height||0):o={x:0,y:0,width:el.drawingBufferWidth,height:el.drawingBufferHeight},o}}])),ee}),o||s){var er=eu.reduce(function(i,o,s){return i+(o?o.count:0)},0),es=new Float64Array(2*er),ef=new Uint8Array(4*er),ed=new Float32Array(4*er);eu.forEach(function(i,o){if(i){var s=i.positions,_=i.count,F=i.offset,N=i.color,j=i.errors;_&&(ef.set(N,4*F),ed.set(j,4*F),es.set(s,2*F))}});var eh=ee(es);$(eh),en(et(es,eh)),ei(ef),eo(ed)}}}function destroy(){$.destroy(),en.destroy(),ei.destroy(),eo.destroy(),es.destroy()}}},46075:function(i,o,s){"use strict";var _=s(25075),F=s(21527),N=s(56131),j=s(56068),Z=s(71299),X=s(30120),$=s(11474),ee=s(54),et=s(57060),er=et.float32,en=et.fract32,ei=s(83522),eo=s(18863),es=s(6851);function Line2D(i,o){if(!(this instanceof Line2D))return new Line2D(i,o);if("function"==typeof i?(o||(o={}),o.regl=i):o=i,o.length&&(o.positions=o),!(i=o.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=i._gl,this.regl=i,this.passes=[],this.shaders=Line2D.shaders.has(i)?Line2D.shaders.get(i):Line2D.shaders.set(i,Line2D.createShaders(i)).get(i),this.update(o)}i.exports=Line2D,Line2D.dashMult=2,Line2D.maxPatternLength=256,Line2D.precisionThreshold=3e6,Line2D.maxPoints=1e4,Line2D.maxLines=2048,Line2D.shaders=new ei,Line2D.createShaders=function(i){var o,s=i.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),_={primitive:"triangle strip",instances:i.prop("count"),count:4,offset:0,uniforms:{miterMode:function(i,o){return"round"===o.join?2:1},miterLimit:i.prop("miterLimit"),scale:i.prop("scale"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),translate:i.prop("translate"),thickness:i.prop("thickness"),dashTexture:i.prop("dashTexture"),opacity:i.prop("opacity"),pixelRatio:i.context("pixelRatio"),id:i.prop("id"),dashLength:i.prop("dashLength"),viewport:function(i,o){return[o.viewport.x,o.viewport.y,i.viewportWidth,i.viewportHeight]},depth:i.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(i,o){return!o.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport")},F=i(N({vert:j(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n	// the order is important\n	return position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n	float lineStart = 1. - lineEnd;\n	float lineOffset = lineTop * 2. - 1.;\n\n	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n	tangent = normalize(diff * scale * viewport.zw);\n	vec2 normal = vec2(-tangent.y, tangent.x);\n\n	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n		+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n	fragColor = color / 255.;\n}\n"]),frag:j(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n	float alpha = 1.;\n\n	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n	float dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n	gl_FragColor = fragColor;\n	gl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:s,divisor:0,stride:8,offset:0},lineTop:{buffer:s,divisor:0,stride:8,offset:4},aCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:i.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:i.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:i.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},_));try{o=i(N({cull:{enable:!0,face:"back"},vert:j(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n	vec2 diff = b - a;\n	vec2 perp = normalize(vec2(-diff.y, diff.x));\n	return dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n	vec2 normalWidth = thickness / scaleRatio;\n\n	float lineStart = 1. - lineEnd;\n	float lineBot = 1. - lineTop;\n\n	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n	vec2 prevDiff = aCoord - prevCoord;\n	vec2 currDiff = bCoord - aCoord;\n	vec2 nextDiff = nextCoord - bCoord;\n\n	vec2 prevTangent = normalize(prevDiff * scaleRatio);\n	vec2 currTangent = normalize(currDiff * scaleRatio);\n	vec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n	vec2 currNormal = vec2(-currTangent.y, currTangent.x);\n	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n	vec2 startJoinDirection = normalize(prevTangent - currTangent);\n	vec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n	// collapsed/unidirectional segment cases\n	// FIXME: there should be more elegant solution\n	vec2 prevTanDiff = abs(prevTangent - currTangent);\n	vec2 nextTanDiff = abs(nextTangent - currTangent);\n	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n		startJoinDirection = currNormal;\n	}\n	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n		endJoinDirection = currNormal;\n	}\n	if (aCoord == bCoord) {\n		endJoinDirection = startJoinDirection;\n		currNormal = prevNormal;\n		currTangent = prevTangent;\n	}\n\n	tangent = currTangent;\n\n	//calculate join shifts relative to normals\n	float startJoinShift = dot(currNormal, startJoinDirection);\n	float endJoinShift = dot(currNormal, endJoinDirection);\n\n	float startMiterRatio = abs(1. / startJoinShift);\n	float endMiterRatio = abs(1. / endJoinShift);\n\n	vec2 startJoin = startJoinDirection * startMiterRatio;\n	vec2 endJoin = endJoinDirection * endMiterRatio;\n\n	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n	startTopJoin = sign(startJoinShift) * startJoin * .5;\n	startBotJoin = -startTopJoin;\n\n	endTopJoin = sign(endJoinShift) * endJoin * .5;\n	endBotJoin = -endTopJoin;\n\n	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n	//miter anti-clipping\n	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n	//prevent close to reverse direction switch\n	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n	if (prevReverse) {\n		//make join rectangular\n		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n	}\n	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n		//handle miter clipping\n		bTopCoord -= normalWidth * endTopJoin;\n		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n	}\n\n	if (nextReverse) {\n		//make join rectangular\n		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n	}\n	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n		//handle miter clipping\n		aBotCoord -= normalWidth * startBotJoin;\n		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n	}\n\n	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n	//position is normalized 0..1 coord on the screen\n	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n	enableStartMiter = step(dot(currTangent, prevTangent), .5);\n	enableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n	//bevel miter cutoffs\n	if (miterMode == 1.) {\n		if (enableStartMiter == 1.) {\n			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n			startCutoff = vec4(aCoord, aCoord);\n			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			startCutoff += viewport.xyxy;\n			startCutoff += startMiterWidth.xyxy;\n		}\n\n		if (enableEndMiter == 1.) {\n			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n			endCutoff = vec4(bCoord, bCoord);\n			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			endCutoff += viewport.xyxy;\n			endCutoff += endMiterWidth.xyxy;\n		}\n	}\n\n	//round miter cutoffs\n	else if (miterMode == 2.) {\n		if (enableStartMiter == 1.) {\n			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n			startCutoff = vec4(aCoord, aCoord);\n			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			startCutoff += viewport.xyxy;\n			startCutoff += startMiterWidth.xyxy;\n		}\n\n		if (enableEndMiter == 1.) {\n			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n			endCutoff = vec4(bCoord, bCoord);\n			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n			endCutoff += viewport.xyxy;\n			endCutoff += endMiterWidth.xyxy;\n		}\n	}\n}\n"]),frag:j(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n	vec2 diff = b - a;\n	vec2 perp = normalize(vec2(-diff.y, diff.x));\n	return dot(p - a, perp);\n}\n\nvoid main() {\n	float alpha = 1., distToStart, distToEnd;\n	float cutoff = thickness * .5;\n\n	//bevel miter\n	if (miterMode == 1.) {\n		if (enableStartMiter == 1.) {\n			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n			if (distToStart < -1.) {\n				discard;\n				return;\n			}\n			alpha *= min(max(distToStart + 1., 0.), 1.);\n		}\n\n		if (enableEndMiter == 1.) {\n			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n			if (distToEnd < -1.) {\n				discard;\n				return;\n			}\n			alpha *= min(max(distToEnd + 1., 0.), 1.);\n		}\n	}\n\n	// round miter\n	else if (miterMode == 2.) {\n		if (enableStartMiter == 1.) {\n			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n			if (distToStart < 0.) {\n				float radius = length(gl_FragCoord.xy - startCoord);\n\n				if(radius > cutoff + .5) {\n					discard;\n					return;\n				}\n\n				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n			}\n		}\n\n		if (enableEndMiter == 1.) {\n			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n			if (distToEnd < 0.) {\n				float radius = length(gl_FragCoord.xy - endCoord);\n\n				if(radius > cutoff + .5) {\n					discard;\n					return;\n				}\n\n				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n			}\n		}\n	}\n\n	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n	float dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n	gl_FragColor = fragColor;\n	gl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:s,divisor:0,stride:8,offset:0},lineTop:{buffer:s,divisor:0,stride:8,offset:4},aColor:{buffer:i.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:i.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:i.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},_))}catch(i){o=F}return{fill:i({primitive:"triangle",elements:function(i,o){return o.triangles},offset:0,vert:j(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n	vec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n	fragColor = color / 255.;\n	fragColor.a *= opacity;\n}\n"]),frag:j(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n	gl_FragColor = fragColor;\n}\n"]),uniforms:{scale:i.prop("scale"),color:i.prop("fill"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),translate:i.prop("translate"),opacity:i.prop("opacity"),pixelRatio:i.context("pixelRatio"),id:i.prop("id"),viewport:function(i,o){return[o.viewport.x,o.viewport.y,i.viewportWidth,i.viewportHeight]}},attributes:{position:{buffer:i.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:i.prop("positionFractBuffer"),stride:8,offset:8}},blend:_.blend,depth:{enable:!1},scissor:_.scissor,stencil:_.stencil,viewport:_.viewport}),rect:F,miter:o}},Line2D.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},Line2D.prototype.render=function(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];i.length&&this.update.apply(this,i),this.draw()},Line2D.prototype.draw=function(){for(var i=this,o=[],s=arguments.length;s--;)o[s]=arguments[s];return(o.length?o:this.passes).forEach(function(o,s){if(o&&Array.isArray(o))return i.draw.apply(i,o);"number"==typeof o&&(o=i.passes[o]),o&&o.count>1&&o.opacity&&(i.regl._refresh(),o.fill&&o.triangles&&o.triangles.length>2&&i.shaders.fill(o),o.thickness&&(o.scale[0]*o.viewport.width>Line2D.precisionThreshold||o.scale[1]*o.viewport.height>Line2D.precisionThreshold?i.shaders.rect(o):"rect"===o.join||!o.join&&(o.thickness<=2||o.count>=Line2D.maxPoints)?i.shaders.rect(o):i.shaders.miter(o)))}),this},Line2D.prototype.update=function(i){var o=this;if(i){null!=i.length?"number"==typeof i[0]&&(i=[{positions:i}]):Array.isArray(i)||(i=[i]);var s=this.regl,j=this.gl;if(i.forEach(function(i,et){var ei=o.passes[et];if(void 0!==i){if(null===i){o.passes[et]=null;return}if("number"==typeof i[0]&&(i={positions:i}),i=Z(i,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),ei||(o.passes[et]=ei={id:et,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:s.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:s.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:s.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},i=N({},Line2D.defaults,i)),null!=i.thickness&&(ei.thickness=parseFloat(i.thickness)),null!=i.opacity&&(ei.opacity=parseFloat(i.opacity)),null!=i.miterLimit&&(ei.miterLimit=parseFloat(i.miterLimit)),null!=i.overlay&&(ei.overlay=!!i.overlay,et<Line2D.maxLines&&(ei.depth=2*(Line2D.maxLines-1-et%Line2D.maxLines)/Line2D.maxLines-1)),null!=i.join&&(ei.join=i.join),null!=i.hole&&(ei.hole=i.hole),null!=i.fill&&(ei.fill=i.fill?_(i.fill,"uint8"):null),null!=i.viewport&&(ei.viewport=eo(i.viewport)),ei.viewport||(ei.viewport=eo([j.drawingBufferWidth,j.drawingBufferHeight])),null!=i.close&&(ei.close=i.close),null===i.positions&&(i.positions=[]),i.positions){if(i.positions.x&&i.positions.y){var el,ec,eu=i.positions.x,ef=i.positions.y;ec=ei.count=Math.max(eu.length,ef.length),el=new Float64Array(2*ec);for(var ed=0;ed<ec;ed++)el[2*ed]=eu[ed],el[2*ed+1]=ef[ed]}else el=X(i.positions,"float64"),ec=ei.count=Math.floor(el.length/2);var eh=ei.bounds=F(el,2);if(ei.fill){for(var ep=[],eg={},em=0,ey=0,ev=0,ex=ei.count;ey<ex;ey++){var e_=el[2*ey],ew=el[2*ey+1];isNaN(e_)||isNaN(ew)||null==e_||null==ew?(e_=el[2*em],ew=el[2*em+1],eg[ey]=em):em=ey,ep[ev++]=e_,ep[ev++]=ew}if(i.splitNull){ei.count-1 in eg||(eg[ei.count]=ei.count-1);var eT=Object.keys(eg).map(Number).sort(function(i,o){return i-o}),ek=[],eA=0,eS=null!=ei.hole?ei.hole[0]:null;if(null!=eS){var eM=es(eT,function(i){return i>=eS});(eT=eT.slice(0,eM)).push(eS)}for(var loop=function(i){var o=$(ep.slice(2*eA,2*eT[i]).concat(eS?ep.slice(2*eS):[]),(ei.hole||[]).map(function(o){return o-eS+(eT[i]-eA)}));o=o.map(function(o){return o+eA+(o+eA<eT[i]?0:eS-eT[i])}),ek.push.apply(ek,o),eA=eT[i]+1},eC=0;eC<eT.length;eC++)loop(eC);for(var eE=0,eL=ek.length;eE<eL;eE++)null!=eg[ek[eE]]&&(ek[eE]=eg[ek[eE]]);ei.triangles=ek}else{for(var eP=$(ep,ei.hole||[]),eI=0,eO=eP.length;eI<eO;eI++)null!=eg[eP[eI]]&&(eP[eI]=eg[eP[eI]]);ei.triangles=eP}}var eD=new Float64Array(el);ee(eD,2,eh);var eR=new Float64Array(2*ec+6);ei.close?el[0]===el[2*ec-2]&&el[1]===el[2*ec-1]?(eR[0]=eD[2*ec-4],eR[1]=eD[2*ec-3]):(eR[0]=eD[2*ec-2],eR[1]=eD[2*ec-1]):(eR[0]=eD[0],eR[1]=eD[1]),eR.set(eD,2),ei.close?el[0]===el[2*ec-2]&&el[1]===el[2*ec-1]?(eR[2*ec+2]=eD[2],eR[2*ec+3]=eD[3],ei.count-=1):(eR[2*ec+2]=eD[0],eR[2*ec+3]=eD[1],eR[2*ec+4]=eD[2],eR[2*ec+5]=eD[3]):(eR[2*ec+2]=eD[2*ec-2],eR[2*ec+3]=eD[2*ec-1],eR[2*ec+4]=eD[2*ec-2],eR[2*ec+5]=eD[2*ec-1]);var eB=er(eR);ei.positionBuffer(eB);var eF=en(eR,eB);ei.positionFractBuffer(eF)}if(i.range?ei.range=i.range:ei.range||(ei.range=ei.bounds),(i.range||i.positions)&&ei.count){var ez=ei.bounds,eN=ez[2]-ez[0],ej=ez[3]-ez[1],eV=ei.range[2]-ei.range[0],eU=ei.range[3]-ei.range[1];ei.scale=[eN/eV,ej/eU],ei.translate=[-ei.range[0]/eV+ez[0]/eV||0,-ei.range[1]/eU+ez[1]/eU||0],ei.scaleFract=en(ei.scale),ei.translateFract=en(ei.translate)}if(i.dashes){var eH,eG=0;if(!i.dashes||i.dashes.length<2)eG=1,eH=new Uint8Array([255,255,255,255,255,255,255,255]);else{eG=0;for(var eW=0;eW<i.dashes.length;++eW)eG+=i.dashes[eW];eH=new Uint8Array(eG*Line2D.dashMult);for(var eZ=0,eY=255,eX=0;eX<2;eX++)for(var eK=0;eK<i.dashes.length;++eK){for(var eJ=0,e$=i.dashes[eK]*Line2D.dashMult*.5;eJ<e$;++eJ)eH[eZ++]=eY;eY^=255}}ei.dashLength=eG,ei.dashTexture({channels:1,data:eH,width:eH.length,height:1,mag:"linear",min:"linear"},0,0)}if(i.color){var eQ=ei.count,e0=i.color;e0||(e0="transparent");var e1=new Uint8Array(4*eQ+4);if(Array.isArray(e0)&&"number"!=typeof e0[0]){for(var e2=0;e2<eQ;e2++){var e3=_(e0[e2],"uint8");e1.set(e3,4*e2)}e1.set(_(e0[0],"uint8"),4*eQ)}else for(var e5=_(e0,"uint8"),e4=0;e4<eQ+1;e4++)e1.set(e5,4*e4);ei.colorBuffer({usage:"dynamic",type:"uint8",data:e1})}}}),i.length<this.passes.length){for(var et=i.length;et<this.passes.length;et++){var ei=this.passes[et];ei&&(ei.colorBuffer.destroy(),ei.positionBuffer.destroy(),ei.dashTexture.destroy())}this.passes.length=i.length}for(var el=[],ec=0;ec<this.passes.length;ec++)null!==this.passes[ec]&&el.push(this.passes[ec]);return this.passes=el,this}},Line2D.prototype.destroy=function(){return this.passes.forEach(function(i){i.colorBuffer.destroy(),i.positionBuffer.destroy(),i.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(i,o,s){"use strict";function _iterableToArrayLimit(i,o){var s=null==i?null:"undefined"!=typeof Symbol&&i[Symbol.iterator]||i["@@iterator"];if(null!=s){var _,F,N,j,Z=[],X=!0,$=!1;try{if(N=(s=s.call(i)).next,0===o){if(Object(s)!==s)return;X=!1}else for(;!(X=(_=N.call(s)).done)&&(Z.push(_.value),Z.length!==o);X=!0);}catch(i){$=!0,F=i}finally{try{if(!X&&null!=s.return&&(j=s.return(),Object(j)!==j))return}finally{if($)throw F}}return Z}}function _slicedToArray(i,o){return _arrayWithHoles(i)||_iterableToArrayLimit(i,o)||_unsupportedIterableToArray(i,o)||_nonIterableRest()}function _toConsumableArray(i){return _arrayWithoutHoles(i)||_iterableToArray(i)||_unsupportedIterableToArray(i)||_nonIterableSpread()}function _arrayWithoutHoles(i){if(Array.isArray(i))return _arrayLikeToArray(i)}function _arrayWithHoles(i){if(Array.isArray(i))return i}function _iterableToArray(i){if("undefined"!=typeof Symbol&&null!=i[Symbol.iterator]||null!=i["@@iterator"])return Array.from(i)}function _unsupportedIterableToArray(i,o){if(i){if("string"==typeof i)return _arrayLikeToArray(i,o);var s=Object.prototype.toString.call(i).slice(8,-1);if("Object"===s&&i.constructor&&(s=i.constructor.name),"Map"===s||"Set"===s)return Array.from(i);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(i,o)}}function _arrayLikeToArray(i,o){(null==o||o>i.length)&&(o=i.length);for(var s=0,_=Array(o);s<o;s++)_[s]=i[s];return _}function _nonIterableSpread(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _=s(25075),F=s(21527),N=s(6475),j=s(88294),Z=s(56131),X=s(56068),$=s(71299),ee=s(93447),et=s(30120),er=s(62683),en=s(57060),ei=s(18863),eo=Scatter;function Scatter(i,o){var s=this;if(!(this instanceof Scatter))return new Scatter(i,o);"function"==typeof i?(o||(o={}),o.regl=i):(o=i,i=null),o&&o.length&&(o.positions=o);var _,F=(i=o.regl)._gl,N=[];this.tooManyColors=er,_=i.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),Z(this,{regl:i,gl:F,groups:[],markerCache:[null],markerTextures:[null],palette:N,paletteIds:{},paletteTexture:_,maxColors:255,maxSize:100,canvas:F.canvas}),this.update(o);var j={uniforms:{constPointSize:!!o.constPointSize,opacity:i.prop("opacity"),paletteSize:function(i,o){return[s.tooManyColors?0:255,_.height]},pixelRatio:i.context("pixelRatio"),scale:i.prop("scale"),scaleFract:i.prop("scaleFract"),translate:i.prop("translate"),translateFract:i.prop("translateFract"),markerTexture:i.prop("markerTexture"),paletteTexture:_},attributes:{x:function(i,o){return o.xAttr||{buffer:o.positionBuffer,stride:8,offset:0}},y:function(i,o){return o.yAttr||{buffer:o.positionBuffer,stride:8,offset:4}},xFract:function(i,o){return o.xAttr?{constant:[0,0]}:{buffer:o.positionFractBuffer,stride:8,offset:0}},yFract:function(i,o){return o.yAttr?{constant:[0,0]}:{buffer:o.positionFractBuffer,stride:8,offset:4}},size:function(i,o){return o.size.length?{buffer:o.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*o.size/s.maxSize)]}},borderSize:function(i,o){return o.borderSize.length?{buffer:o.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*o.borderSize/s.maxSize)]}},colorId:function(i,o){return o.color.length?{buffer:o.colorBuffer,stride:s.tooManyColors?8:4,offset:0}:{constant:s.tooManyColors?N.slice(4*o.color,4*o.color+4):[o.color]}},borderColorId:function(i,o){return o.borderColor.length?{buffer:o.colorBuffer,stride:s.tooManyColors?8:4,offset:s.tooManyColors?4:2}:{constant:s.tooManyColors?N.slice(4*o.borderColor,4*o.borderColor+4):[o.borderColor]}},isActive:function(i,o){return!0===o.activation?{constant:[1]}:o.activation?o.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:i.prop("elements"),count:i.prop("count"),offset:i.prop("offset"),primitive:"points"},$=Z({},j);$.frag=X(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),$.vert=X(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=i($);var ee=Z({},j);ee.frag=X(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n	float t;\n	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n	return t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n	float radius, alpha = 1.0, delta = fragWidth;\n\n	radius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n	if (radius > 1.0 + delta) {\n		discard;\n	}\n\n	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n	float borderRadius = fragBorderRadius;\n	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n	vec4 color = mix(fragColor, fragBorderColor, ratio);\n	color.a *= alpha * opacity;\n	gl_FragColor = color;\n}\n"]),ee.vert=X(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),er&&(ee.frag=ee.frag.replace("smoothstep","smoothStep"),$.frag=$.frag.replace("smoothstep","smoothStep")),this.drawCircle=i(ee)}Scatter.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},Scatter.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},Scatter.prototype.draw=function(){for(var i=this,o=arguments.length,s=Array(o),_=0;_<o;_++)s[_]=arguments[_];var F=this.groups;if(1===s.length&&Array.isArray(s[0])&&(null===s[0][0]||Array.isArray(s[0][0]))&&(s=s[0]),this.regl._refresh(),s.length)for(var N=0;N<s.length;N++)this.drawItem(N,s[N]);else F.forEach(function(o,s){i.drawItem(s)});return this},Scatter.prototype.drawItem=function(i,o){var s=this.groups,_=s[i];if("number"==typeof o&&(i=o,_=s[o],o=null),_&&_.count&&_.opacity){_.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,_,o));for(var F=[],N=1;N<_.activation.length;N++)_.activation[N]&&(!0===_.activation[N]||_.activation[N].data.length)&&F.push.apply(F,_toConsumableArray(this.getMarkerDrawOptions(N,_,o)));F.length&&this.drawMarker(F)}},Scatter.prototype.getMarkerDrawOptions=function(i,o,s){var _=o.range,F=o.tree,N=o.viewport,j=o.activation,X=o.selectionBuffer,$=o.count;if(this.regl,!F)return s?[Z({},o,{markerTexture:this.markerTextures[i],activation:j[i],count:s.length,elements:s,offset:0})]:[Z({},o,{markerTexture:this.markerTextures[i],activation:j[i],offset:0})];var ee=[],et=F.range(_,{lod:!0,px:[(_[2]-_[0])/N.width,(_[3]-_[1])/N.height]});if(s){for(var er=j[i].data,en=new Uint8Array($),ei=0;ei<s.length;ei++){var eo=s[ei];en[eo]=er?er[eo]:1}X.subdata(en)}for(var es=et.length;es--;){var el=_slicedToArray(et[es],2),ec=el[0],eu=el[1];ee.push(Z({},o,{markerTexture:this.markerTextures[i],activation:s?X:j[i],offset:ec,count:eu-ec}))}return ee},Scatter.prototype.update=function(){for(var i=this,o=arguments.length,s=Array(o),_=0;_<o;_++)s[_]=arguments[_];if(s.length){1===s.length&&Array.isArray(s[0])&&(s=s[0]);var N=this.groups,X=this.gl,er=this.regl,eo=this.maxSize,es=this.maxColors,el=this.palette;this.groups=N=s.map(function(o,s){var _=N[s];if(void 0===o)return _;null===o?o={positions:null}:"function"==typeof o?o={ondraw:o}:"number"==typeof o[0]&&(o={positions:o}),null===(o=$(o,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(o.positions=[]),null!=o.tooManyColors&&(i.tooManyColors=o.tooManyColors),_||(N[s]=_={id:s,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:er.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:er.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:er.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:er.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:er.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},o=Z({},Scatter.defaults,o)),!o.positions||"marker"in o||(o.marker=_.marker,delete _.marker),!o.marker||"positions"in o||(o.positions=_.positions,delete _.positions);var ec=0,eu=0;if(ee(_,o,[{snap:!0,size:function(i,o){return null==i&&(i=Scatter.defaults.size),ec+=i&&i.length?1:0,i},borderSize:function(i,o){return null==i&&(i=Scatter.defaults.borderSize),ec+=i&&i.length?1:0,i},opacity:parseFloat,color:function(o,s){return null==o&&(o=Scatter.defaults.color),o=i.updateColor(o),eu++,o},borderColor:function(o,s){return null==o&&(o=Scatter.defaults.borderColor),o=i.updateColor(o),eu++,o},bounds:function(i,o,s){return"range"in s||(s.range=null),i},positions:function(i,o,s){var _=o.snap,N=o.positionBuffer,Z=o.positionFractBuffer,X=o.selectionBuffer;if(i.x||i.y)return i.x.length?o.xAttr={buffer:er.buffer(i.x),offset:0,stride:4,count:i.x.length}:o.xAttr={buffer:i.x.buffer,offset:4*i.x.offset||0,stride:4*(i.x.stride||1),count:i.x.count},i.y.length?o.yAttr={buffer:er.buffer(i.y),offset:0,stride:4,count:i.y.length}:o.yAttr={buffer:i.y.buffer,offset:4*i.y.offset||0,stride:4*(i.y.stride||1),count:i.y.count},o.count=Math.max(o.xAttr.count,o.yAttr.count),i;i=et(i,"float64");var $=o.count=Math.floor(i.length/2),ee=o.bounds=$?F(i,2):null;if(s.range||o.range||(delete o.range,s.range=ee),s.marker||o.marker||(delete o.marker,s.marker=null),_&&(!0===_||$>_)?o.tree=j(i,{bounds:ee}):_&&_.length&&(o.tree=_),o.tree){var ei={primitive:"points",usage:"static",data:o.tree,type:"uint32"};o.elements?o.elements(ei):o.elements=er.elements(ei)}var eo=en.float32(i);return N({data:eo,usage:"dynamic"}),Z({data:en.fract32(i,eo),usage:"dynamic"}),X({data:new Uint8Array($),type:"uint8",usage:"stream"}),i}},{marker:function(o,s,_){var F=s.activation;if(F.forEach(function(i){return i&&i.destroy&&i.destroy()}),F.length=0,o&&"number"!=typeof o[0]){for(var N=[],j=0,Z=Math.min(o.length,s.count);j<Z;j++){var X=i.addMarker(o[j]);N[X]||(N[X]=new Uint8Array(s.count)),N[X][j]=1}for(var $=0;$<N.length;$++)if(N[$]){var ee={data:N[$],type:"uint8",usage:"static"};F[$]?F[$](ee):F[$]=er.buffer(ee),F[$].data=N[$]}}else F[i.addMarker(o)]=!0;return o},range:function(i,o,s){var _=o.bounds;if(_)return i||(i=_),o.scale=[1/(i[2]-i[0]),1/(i[3]-i[1])],o.translate=[-i[0],-i[1]],o.scaleFract=en.fract(o.scale),o.translateFract=en.fract(o.translate),i},viewport:function(i){return ei(i||[X.drawingBufferWidth,X.drawingBufferHeight])}}]),ec){var ef=_,ed=ef.count,eh=ef.size,ep=ef.borderSize,eg=ef.sizeBuffer,em=new Uint8Array(2*ed);if(eh.length||ep.length)for(var ey=0;ey<ed;ey++)em[2*ey]=Math.round((null==eh[ey]?eh:eh[ey])*255/eo),em[2*ey+1]=Math.round((null==ep[ey]?ep:ep[ey])*255/eo);eg({data:em,usage:"dynamic"})}if(eu){var ev,ex=_,e_=ex.count,ew=ex.color,eT=ex.borderColor,ek=ex.colorBuffer;if(i.tooManyColors){if(ew.length||eT.length){ev=new Uint8Array(8*e_);for(var eA=0;eA<e_;eA++){var eS=ew[eA];ev[8*eA]=el[4*eS],ev[8*eA+1]=el[4*eS+1],ev[8*eA+2]=el[4*eS+2],ev[8*eA+3]=el[4*eS+3];var eM=eT[eA];ev[8*eA+4]=el[4*eM],ev[8*eA+5]=el[4*eM+1],ev[8*eA+6]=el[4*eM+2],ev[8*eA+7]=el[4*eM+3]}}}else if(ew.length||eT.length){ev=new Uint8Array(4*e_+2);for(var eC=0;eC<e_;eC++)null!=ew[eC]&&(ev[4*eC]=ew[eC]%es,ev[4*eC+1]=Math.floor(ew[eC]/es)),null!=eT[eC]&&(ev[4*eC+2]=eT[eC]%es,ev[4*eC+3]=Math.floor(eT[eC]/es))}ek({data:ev||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return _})}},Scatter.prototype.addMarker=function(i){var o,s=this.markerTextures,_=this.regl,F=this.markerCache,N=null==i?0:F.indexOf(i);if(N>=0)return N;if(i instanceof Uint8Array||i instanceof Uint8ClampedArray)o=i;else{o=new Uint8Array(i.length);for(var j=0,Z=i.length;j<Z;j++)o[j]=255*i[j]}var X=Math.floor(Math.sqrt(o.length));return N=s.length,F.push(i),s.push(_.texture({channels:1,data:o,radius:X,mag:"linear",min:"linear"})),N},Scatter.prototype.updateColor=function(i){var o=this.paletteIds,s=this.palette,F=this.maxColors;Array.isArray(i)||(i=[i]);var j=[];if("number"==typeof i[0]){var Z=[];if(Array.isArray(i))for(var X=0;X<i.length;X+=4)Z.push(i.slice(X,X+4));else for(var $=0;$<i.length;$+=4)Z.push(i.subarray($,$+4));i=Z}for(var ee=0;ee<i.length;ee++){var et=i[ee],er=N(et=_(et,"uint8"),!1);if(null==o[er]){var en=s.length;o[er]=Math.floor(en/4),s[en]=et[0],s[en+1]=et[1],s[en+2]=et[2],s[en+3]=et[3]}j[ee]=o[er]}return!this.tooManyColors&&s.length>4*F&&(this.tooManyColors=!0),this.updatePalette(s),1===j.length?j[0]:j},Scatter.prototype.updatePalette=function(i){if(!this.tooManyColors){var o=this.maxColors,s=this.paletteTexture,_=Math.ceil(.25*i.length/o);if(_>1){i=i.slice();for(var F=.25*i.length%o;F<_*o;F++)i.push(0,0,0,0)}s.height<_&&s.resize(o,_),s.subimage({width:Math.min(.25*i.length,o),height:_,data:i},0,0)}},Scatter.prototype.destroy=function(){return this.groups.forEach(function(i){i.sizeBuffer.destroy(),i.positionBuffer.destroy(),i.positionFractBuffer.destroy(),i.colorBuffer.destroy(),i.activation.forEach(function(i){return i&&i.destroy&&i.destroy()}),i.selectionBuffer.destroy(),i.elements&&i.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(i){return i&&i.destroy&&i.destroy()}),this};var es=s(56131);i.exports=function(i,o){var s=new eo(i,o),_=s.render.bind(s);return es(_,{render:_,update:s.update.bind(s),draw:s.draw.bind(s),destroy:s.destroy.bind(s),regl:s.regl,gl:s.gl,canvas:s.gl.canvas,groups:s.groups,markers:s.markerCache,palette:s.palette}),_}},60487:function(i,o,s){"use strict";var _=s(11870),F=s(71299),N=s(21527),j=s(5877),Z=s(57471),X=s(18863),$=s(30120);function SPLOM(i,o){if(!(this instanceof SPLOM))return new SPLOM(i,o);this.traces=[],this.passes={},this.regl=i,this.scatter=_(i),this.canvas=this.scatter.canvas}function passId(i,o,s){return(null!=i.id?i.id:i)<<16|(255&o)<<8|255&s}function getBox(i,o,s){var _,F,N,j,Z=i[o],X=i[s];return Z.length>2?(Z[0],Z[2],_=Z[1],F=Z[3]):Z.length?(_=Z[0],F=Z[1]):(Z.x,_=Z.y,Z.x,Z.width,F=Z.y+Z.height),X.length>2?(N=X[0],j=X[2],X[1],X[3]):X.length?(N=X[0],j=X[1]):(N=X.x,X.y,j=X.x+X.width,X.y,X.height),[N,_,j,F]}function getPad(i){if("number"==typeof i)return[i,i,i,i];if(2===i.length)return[i[0],i[1],i[0],i[1]];var o=X(i);return[o.x,o.y,o.x+o.width,o.y+o.height]}i.exports=SPLOM,SPLOM.prototype.render=function(){for(var i=this,o=[],s=arguments.length;s--;)o[s]=arguments[s];return(o.length&&this.update.apply(this,o),this.regl.attributes.preserveDrawingBuffer)?this.draw():(this.dirty?null==this.planned&&(this.planned=j(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,j(function(){i.dirty=!1})),this)},SPLOM.prototype.update=function(){for(var i,o=[],s=arguments.length;s--;)o[s]=arguments[s];if(o.length){for(var _=0;_<o.length;_++)this.updateItem(_,o[_]);this.traces=this.traces.filter(Boolean);for(var F=[],N=0,j=0;j<this.traces.length;j++){for(var Z=this.traces[j],X=this.traces[j].passes,$=0;$<X.length;$++)F.push(this.passes[X[$]]);Z.passOffset=N,N+=Z.passes.length}return(i=this.scatter).update.apply(i,F),this}},SPLOM.prototype.updateItem=function(i,o){var s,_=this.regl;if(null===o)return this.traces[i]=null,this;if(!o)return this;var j=F(o,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),Z=this.traces[i]||(this.traces[i]={id:i,buffer:_.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:X([_._gl.drawingBufferWidth,_._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=j.color&&(Z.color=j.color),null!=j.size&&(Z.size=j.size),null!=j.marker&&(Z.marker=j.marker),null!=j.borderColor&&(Z.borderColor=j.borderColor),null!=j.borderSize&&(Z.borderSize=j.borderSize),null!=j.opacity&&(Z.opacity=j.opacity),j.viewport&&(Z.viewport=X(j.viewport)),null!=j.diagonal&&(Z.diagonal=j.diagonal),null!=j.upper&&(Z.upper=j.upper),null!=j.lower&&(Z.lower=j.lower),j.data){Z.buffer($(j.data)),Z.columns=j.data.length,Z.count=j.data[0].length,Z.bounds=[];for(var ee=0;ee<Z.columns;ee++)Z.bounds[ee]=N(j.data[ee],1)}j.range&&(Z.range=j.range,s=Z.range&&"number"!=typeof Z.range[0]),j.domain&&(Z.domain=j.domain);var et=!1;null!=j.padding&&(Array.isArray(j.padding)&&j.padding.length===Z.columns&&"number"==typeof j.padding[j.padding.length-1]?(Z.padding=j.padding.map(getPad),et=!0):Z.padding=getPad(j.padding));var er=Z.columns,en=Z.count,ei=Z.viewport.width,eo=Z.viewport.height,es=Z.viewport.x,el=Z.viewport.y,ec=ei/er,eu=eo/er;Z.passes=[];for(var ef=0;ef<er;ef++)for(var ed=0;ed<er;ed++)if((Z.diagonal||ed!==ef)&&(Z.upper||!(ef>ed))&&(Z.lower||!(ef<ed))){var eh=passId(Z.id,ef,ed),ep=this.passes[eh]||(this.passes[eh]={});if(j.data&&(j.transpose?ep.positions={x:{buffer:Z.buffer,offset:ed,count:en,stride:er},y:{buffer:Z.buffer,offset:ef,count:en,stride:er}}:ep.positions={x:{buffer:Z.buffer,offset:ed*en,count:en},y:{buffer:Z.buffer,offset:ef*en,count:en}},ep.bounds=getBox(Z.bounds,ef,ed)),j.domain||j.viewport||j.data){var eg=et?getBox(Z.padding,ef,ed):Z.padding;if(Z.domain){var em=getBox(Z.domain,ef,ed),ey=em[0],ev=em[1],ex=em[2],e_=em[3];ep.viewport=[es+ey*ei+eg[0],el+ev*eo+eg[1],es+ex*ei-eg[2],el+e_*eo-eg[3]]}else ep.viewport=[es+ed*ec+ec*eg[0],el+ef*eu+eu*eg[1],es+(ed+1)*ec-ec*eg[2],el+(ef+1)*eu-eu*eg[3]]}j.color&&(ep.color=Z.color),j.size&&(ep.size=Z.size),j.marker&&(ep.marker=Z.marker),j.borderSize&&(ep.borderSize=Z.borderSize),j.borderColor&&(ep.borderColor=Z.borderColor),j.opacity&&(ep.opacity=Z.opacity),j.range&&(ep.range=s?getBox(Z.range,ef,ed):Z.range||ep.bounds),Z.passes.push(eh)}return this},SPLOM.prototype.draw=function(){for(var i,o=[],s=arguments.length;s--;)o[s]=arguments[s];if(o.length){for(var _=[],F=0;F<o.length;F++)if("number"==typeof o[F]){var N=this.traces[o[F]],j=N.passes,X=N.passOffset;_.push.apply(_,Z(X,X+j.length))}else if(o[F].length){var $=o[F],ee=this.traces[F],et=ee.passes,er=ee.passOffset;et=et.map(function(i,o){_[er+o]=$})}(i=this.scatter).draw.apply(i,_)}else this.scatter.draw();return this},SPLOM.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(i){i.exports=function(){function da(o,s){this.id=i++,this.type=o,this.data=s}function ea(i){if(0===i.length)return[];var o=i.charAt(0),s=i.charAt(i.length-1);if(1<i.length&&o===s&&('"'===o||"'"===o))return['"'+i.substr(1,i.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(o=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(i))return ea(i.substr(0,o.index)).concat(ea(o[1])).concat(ea(i.substr(o.index+o[0].length)));if(1===(o=i.split(".")).length)return['"'+i.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(s=0,i=[];s<o.length;++s)i=i.concat(ea(o[s]));return i}function bb(i){return"["+ea(i).join("][")+"]"}function cb(i,o){return"function"==typeof i?new da(0,i):"number"==typeof i||"boolean"==typeof i?new da(5,i):Array.isArray(i)?new da(6,i.map(function(i,s){return cb(i,o+"["+s+"]")})):i instanceof da?i:void 0}function Eb(){var i={"":0},o=[""];return{id:function(s){var _=i[s];return _||(_=i[s]=o.length,o.push(s)),_},str:function(i){return o[i]}}}function Fb(i,o,s){function d(){var o=window.innerWidth,_=window.innerHeight;i!==document.body&&(o=(_=F.getBoundingClientRect()).right-_.left,_=_.bottom-_.top),F.width=s*o,F.height=s*_}var _,F=document.createElement("canvas");return O(F.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),i.appendChild(F),i===document.body&&(F.style.position="absolute",O(i.style,{margin:0,padding:0})),i!==document.body&&"function"==typeof ResizeObserver?(_=new ResizeObserver(function(){setTimeout(d)})).observe(i):window.addEventListener("resize",d,!1),d(),{canvas:F,onDestroy:function(){_?_.disconnect():window.removeEventListener("resize",d),i.removeChild(F)}}}function Gb(i,o){function c(s){try{return i.getContext(s,o)}catch(i){return null}}return c("webgl")||c("experimental-webgl")||c("webgl-experimental")}function db(i){return"string"==typeof i?i.split():i}function eb(i){return"string"==typeof i?document.querySelector(i):i}function Hb(i){var o,s,_,F,N=i||{};i={};var j=[],Z=[],X="undefined"==typeof window?1:window.devicePixelRatio,$=!1,ee={},n=function(i){},t=function(){};if("string"==typeof N?o=document.querySelector(N):"object"==typeof N&&("string"==typeof N.nodeName&&"function"==typeof N.appendChild&&"function"==typeof N.getBoundingClientRect?o=N:"function"==typeof N.drawArrays||"function"==typeof N.drawElements?_=(F=N).canvas:("gl"in N?F=N.gl:"canvas"in N?_=eb(N.canvas):"container"in N&&(s=eb(N.container)),"attributes"in N&&(i=N.attributes),"extensions"in N&&(j=db(N.extensions)),"optionalExtensions"in N&&(Z=db(N.optionalExtensions)),"onDone"in N&&(n=N.onDone),"profile"in N&&($=!!N.profile),"pixelRatio"in N&&(X=+N.pixelRatio),"cachedCode"in N&&(ee=N.cachedCode))),o&&("canvas"===o.nodeName.toLowerCase()?_=o:s=o),!F){if(!_){if(!(o=Fb(s||document.body,n,X)))return null;_=o.canvas,t=o.onDestroy}void 0===i.premultipliedAlpha&&(i.premultipliedAlpha=!0),F=Gb(_,i)}return F?{gl:F,canvas:_,container:s,extensions:j,optionalExtensions:Z,pixelRatio:X,profile:$,cachedCode:ee,onDone:n,onDestroy:t}:(t(),n("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ib(i,o){function c(o){var _;o=o.toLowerCase();try{_=s[o]=i.getExtension(o)}catch(i){}return!!_}for(var s={},_=0;_<o.extensions.length;++_){var F=o.extensions[_];if(!c(F))return o.onDestroy(),o.onDone('"'+F+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return o.optionalExtensions.forEach(c),{extensions:s,restore:function(){Object.keys(s).forEach(function(i){if(s[i]&&!c(i))throw Error("(regl): error restoring extension "+i)})}}}function S(i,o){for(var s=Array(i),_=0;_<i;++_)s[_]=o(_);return s}function fb(i){var o,s;return o=(65535<i)<<4,i>>>=o,s=(255<i)<<3,i>>>=s,o|=s,s=(15<i)<<2,i>>>=s,(o|=s)|(s=(3<i)<<1)|i>>>s>>1}function gb(){function a(o){b:{for(var s=16;268435456>=s;s*=16)if(o<=s){o=s;break b}o=0}return 0<(s=i[fb(o)>>2]).length?s.pop():new ArrayBuffer(o)}function b(o){i[fb(o.byteLength)>>2].push(o)}var i=S(8,function(){return[]});return{alloc:a,free:b,allocType:function(i,o){var s=null;switch(i){case 5120:s=new Int8Array(a(o),0,o);break;case 5121:s=new Uint8Array(a(o),0,o);break;case 5122:s=new Int16Array(a(2*o),0,o);break;case 5123:s=new Uint16Array(a(2*o),0,o);break;case 5124:s=new Int32Array(a(4*o),0,o);break;case 5125:s=new Uint32Array(a(4*o),0,o);break;case 5126:s=new Float32Array(a(4*o),0,o);break;default:return null}return s.length!==o?s.subarray(0,o):s},freeType:function(i){b(i.buffer)}}}function fa(i){return!!i&&"object"==typeof i&&Array.isArray(i.shape)&&Array.isArray(i.stride)&&"number"==typeof i.offset&&i.shape.length===i.stride.length&&(Array.isArray(i.data)||P(i.data))}function hb(i,o,s,_,F,N){for(var j=0;j<o;++j)for(var Z=i[j],X=0;X<s;++X)for(var $=Z[X],ee=0;ee<_;++ee)F[N++]=$[ee]}function ib(i,o,s,_,F){for(var N=1,j=s+1;j<o.length;++j)N*=o[j];var Z=o[s];if(4==o.length-s){var X=o[s+1],$=o[s+2];for(j=0,o=o[s+3];j<Z;++j)hb(i[j],X,$,o,_,F),F+=N}else for(j=0;j<Z;++j)ib(i[j],o,s+1,_,F),F+=N}function Ha(i){return 0|j[Object.prototype.toString.call(i)]}function jb(i,o){for(var s=0;s<o.length;++s)i[s]=o[s]}function kb(i,o,s,_,F,N,j){for(var Z=0,X=0;X<s;++X)for(var $=0;$<_;++$)i[Z++]=o[F*X+N*$+j]}function Jb(i,o,s,_){function f(o){this.id=N++,this.buffer=i.createBuffer(),this.type=o,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,s.profile&&(this.stats={size:0})}function e(o,s,_){o.byteLength=s.byteLength,i.bufferData(o.type,s,_)}function m(i,o,s,_,N,j){if(i.usage=s,Array.isArray(o)){if(i.dtype=_||5126,0<o.length){if(Array.isArray(o[0])){N=ee(o);for(var Z=_=1;Z<N.length;++Z)_*=N[Z];i.dimension=_,o=$(o,N,i.dtype),e(i,o,s),j?i.persistentData=o:F.freeType(o)}else"number"==typeof o[0]?(i.dimension=N,jb(N=F.allocType(i.dtype,o.length),o),e(i,N,s),j?i.persistentData=N:F.freeType(N)):P(o[0])&&(i.dimension=o[0].length,i.dtype=_||Ha(o[0])||5126,o=$(o,[o.length,o[0].length],i.dtype),e(i,o,s),j?i.persistentData=o:F.freeType(o))}}else if(P(o))i.dtype=_||Ha(o),i.dimension=N,e(i,o,s),j&&(i.persistentData=new Uint8Array(new Uint8Array(o.buffer)));else if(fa(o)){N=o.shape;var X=o.stride,Z=o.offset,et=0,er=0,en=0,ei=0;1===N.length?(et=N[0],er=1,en=X[0],ei=0):2===N.length&&(et=N[0],er=N[1],en=X[0],ei=X[1]),i.dtype=_||Ha(o.data)||5126,i.dimension=er,kb(N=F.allocType(i.dtype,et*er),o.data,et,er,en,ei,Z),e(i,N,s),j?i.persistentData=N:F.freeType(N)}else o instanceof ArrayBuffer&&(i.dtype=5121,i.dimension=N,e(i,o,s),j&&(i.persistentData=new Uint8Array(new Uint8Array(o))))}function q(s){o.bufferCount--,_(s),i.deleteBuffer(s.buffer),s.buffer=null,delete j[s.id]}var N=0,j={};f.prototype.bind=function(){i.bindBuffer(this.type,this.buffer)},f.prototype.destroy=function(){q(this)};var er=[];return s.profile&&(o.getTotalBufferSize=function(){var i=0;return Object.keys(j).forEach(function(o){i+=j[o].stats.size}),i}),{create:function(_,N,er,en){function h(o){var _=35044,F=null,N=0,j=0,$=1;return Array.isArray(o)||P(o)||fa(o)||o instanceof ArrayBuffer?F=o:"number"==typeof o?N=0|o:o&&("data"in o&&(F=o.data),"usage"in o&&(_=X[o.usage]),"type"in o&&(j=Z[o.type]),"dimension"in o&&($=0|o.dimension),"length"in o&&(N=0|o.length)),ei.bind(),F?m(ei,F,_,j,$,en):(N&&i.bufferData(ei.type,N,_),ei.dtype=j||5121,ei.usage=_,ei.dimension=$,ei.byteLength=N),s.profile&&(ei.stats.size=ei.byteLength*et[ei.dtype]),h}o.bufferCount++;var ei=new f(N);return j[ei.id]=ei,er||h(_),h._reglType="buffer",h._buffer=ei,h.subdata=function(o,s){var _,N=0|(s||0);if(ei.bind(),P(o)||o instanceof ArrayBuffer)i.bufferSubData(ei.type,N,o);else if(Array.isArray(o)){if(0<o.length){if("number"==typeof o[0]){var j=F.allocType(ei.dtype,o.length);jb(j,o),i.bufferSubData(ei.type,N,j),F.freeType(j)}else(Array.isArray(o[0])||P(o[0]))&&(_=ee(o),j=$(o,_,ei.dtype),i.bufferSubData(ei.type,N,j),F.freeType(j))}}else if(fa(o)){_=o.shape;var Z=o.stride,X=j=0,et=0,er=0;1===_.length?(j=_[0],X=1,et=Z[0],er=0):2===_.length&&(j=_[0],X=_[1],et=Z[0],er=Z[1]),_=Array.isArray(o.data)?ei.dtype:Ha(o.data),kb(_=F.allocType(_,j*X),o.data,j,X,et,er,o.offset),i.bufferSubData(ei.type,N,_),F.freeType(_)}return h},s.profile&&(h.stats=ei.stats),h.destroy=function(){q(ei)},h},createStream:function(i,o){var s=er.pop();return s||(s=new f(i)),s.bind(),m(s,o,35040,0,1,!1),s},destroyStream:function(i){er.push(i)},clear:function(){T(j).forEach(q),er.forEach(q)},getBuffer:function(i){return i&&i._buffer instanceof f?i._buffer:null},restore:function(){T(j).forEach(function(o){o.buffer=i.createBuffer(),i.bindBuffer(o.type,o.buffer),i.bufferData(o.type,o.persistentData||o.byteLength,o.usage)})},_initBuffer:m}}function Kb(i,o,s,_){function f(i){this.id=N++,F[this.id]=this,this.buffer=i,this.primType=4,this.type=this.vertCount=0}function e(_,F,N,j,Z,X,$){var ee;if(_.buffer.bind(),F?((ee=$)||P(F)&&(!fa(F)||P(F.data))||(ee=o.oes_element_index_uint?5125:5123),s._initBuffer(_.buffer,F,N,ee,3)):(i.bufferData(34963,X,N),_.buffer.dtype=ee||5121,_.buffer.usage=N,_.buffer.dimension=3,_.buffer.byteLength=X),ee=$,!$){switch(_.buffer.dtype){case 5121:case 5120:ee=5121;break;case 5123:case 5122:ee=5123;break;case 5125:case 5124:ee=5125}_.buffer.dtype=ee}_.type=ee,0>(F=Z)&&(F=_.buffer.byteLength,5123===ee?F>>=1:5125===ee&&(F>>=2)),_.vertCount=F,F=j,0>j&&(F=4,1===(j=_.buffer.dimension)&&(F=0),2===j&&(F=1),3===j&&(F=4)),_.primType=F}function m(i){_.elementsCount--,delete F[i.id],i.buffer.destroy(),i.buffer=null}var F={},N=0,j={uint8:5121,uint16:5123};o.oes_element_index_uint&&(j.uint32=5125),f.prototype.bind=function(){this.buffer.bind()};var Z=[];return{create:function(i,o){function g(i){if(i){if("number"==typeof i)F(i),N.primType=4,N.vertCount=0|i,N.type=5121;else{var o=null,s=35044,_=-1,Z=-1,$=0,ee=0;Array.isArray(i)||P(i)||fa(i)?o=i:("data"in i&&(o=i.data),"usage"in i&&(s=X[i.usage]),"primitive"in i&&(_=er[i.primitive]),"count"in i&&(Z=0|i.count),"type"in i&&(ee=j[i.type]),"length"in i)?$=0|i.length:($=Z,5123===ee||5122===ee)?$*=2:(5125===ee||5124===ee)&&($*=4),e(N,o,s,_,Z,$,ee)}}else F(),N.primType=4,N.vertCount=0,N.type=5121;return g}var F=s.create(null,34963,!0),N=new f(F._buffer);return _.elementsCount++,g(i),g._reglType="elements",g._elements=N,g.subdata=function(i,o){return F.subdata(i,o),g},g.destroy=function(){m(N)},g},createStream:function(i){var o=Z.pop();return o||(o=new f(s.create(null,34963,!0,!1)._buffer)),e(o,i,35040,-1,-1,0,0),o},destroyStream:function(i){Z.push(i)},getElements:function(i){return"function"==typeof i&&i._elements instanceof f?i._elements:null},clear:function(){T(F).forEach(m)}}}function ob(i){for(var o=F.allocType(5123,i.length),s=0;s<i.length;++s)if(isNaN(i[s]))o[s]=65535;else if(1/0===i[s])o[s]=31744;else if(-1/0===i[s])o[s]=64512;else{en[0]=i[s];var _=ei[0],N=_>>>31<<15,j=(_<<1>>>24)-127,_=_>>13&1023;o[s]=-24>j?N:-14>j?N+(_+1024>>-14-j):15<j?N+31744:N+(j+15<<10)+_}return o}function qa(i){return Array.isArray(i)||P(i)}function ra(i){return"[object "+i+"]"}function qb(i){return Array.isArray(i)&&(0===i.length||"number"==typeof i[0])}function rb(i){return!!(Array.isArray(i)&&0!==i.length&&qa(i[0]))}function R(i){return Object.prototype.toString.call(i)}function Va(i){if(!i)return!1;var o=R(i);return 0<=eg.indexOf(o)||qb(i)||rb(i)||fa(i)}function sb(i,o){36193===i.type?(i.data=ob(o),F.freeType(o)):i.data=o}function La(i,o,s,_,F,N){if(i=void 0!==ey[i]?ey[i]:el[i]*em[o],N&&(i*=6),F){for(_=0;1<=s;)_+=i*s*s,s/=2;return _}return i*s*_}function Nb(i,o,s,_,Z,X,$){function q(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function u(i,o){i.internalformat=o.internalformat,i.format=o.format,i.type=o.type,i.compressed=o.compressed,i.premultiplyAlpha=o.premultiplyAlpha,i.flipY=o.flipY,i.unpackAlignment=o.unpackAlignment,i.colorSpace=o.colorSpace,i.width=o.width,i.height=o.height,i.channels=o.channels}function r(i,o){if("object"==typeof o&&o){"premultiplyAlpha"in o&&(i.premultiplyAlpha=o.premultiplyAlpha),"flipY"in o&&(i.flipY=o.flipY),"alignment"in o&&(i.unpackAlignment=o.alignment),"colorSpace"in o&&(i.colorSpace=ei[o.colorSpace]),"type"in o&&(i.type=eg[o.type]);var s=i.width,_=i.height,F=i.channels,N=!1;"shape"in o?(s=o.shape[0],_=o.shape[1],3===o.shape.length&&(F=o.shape[2],N=!0)):("radius"in o&&(s=_=o.radius),"width"in o&&(s=o.width),"height"in o&&(_=o.height),"channels"in o&&(F=o.channels,N=!0)),i.width=0|s,i.height=0|_,i.channels=0|F,s=!1,"format"in o&&(s=o.format,_=i.internalformat=em[s],i.format=eS[_],s in eg&&!("type"in o)&&(i.type=eg[s]),s in ey&&(i.compressed=!0),s=!0),!N&&s?i.channels=el[i.format]:N&&!s&&i.channels!==es[i.format]&&(i.format=i.internalformat=es[i.channels])}}function k(o){i.pixelStorei(37440,o.flipY),i.pixelStorei(37441,o.premultiplyAlpha),i.pixelStorei(37443,o.colorSpace),i.pixelStorei(3317,o.unpackAlignment)}function n(){q.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function t(i,o){var s=null;if(Va(o)?s=o:o&&(r(i,o),"x"in o&&(i.xOffset=0|o.x),"y"in o&&(i.yOffset=0|o.y),Va(o.data)&&(s=o.data)),o.copy){var _=Z.viewportWidth,X=Z.viewportHeight;i.width=i.width||_-i.xOffset,i.height=i.height||X-i.yOffset,i.needsCopy=!0}else if(s){if(P(s))i.channels=i.channels||4,i.data=s,"type"in o||5121!==i.type||(i.type=0|j[Object.prototype.toString.call(s)]);else if(qb(s)){switch(i.channels=i.channels||4,X=(_=s).length,i.type){case 5121:case 5123:case 5125:case 5126:(X=F.allocType(i.type,X)).set(_),i.data=X;break;case 36193:i.data=ob(_)}i.alignment=1,i.needsFree=!0}else if(fa(s)){Array.isArray(_=s.data)||5121!==i.type||(i.type=0|j[Object.prototype.toString.call(_)]);var $,ee,et,er,X=s.shape,en=s.stride;3===X.length?(et=X[2],er=en[2]):er=et=1,$=X[0],ee=X[1],X=en[0],en=en[1],i.alignment=1,i.width=$,i.height=ee,i.channels=et,i.format=i.internalformat=es[et],i.needsFree=!0,$=er,s=s.offset,et=i.width,er=i.height,ee=i.channels;for(var ei=F.allocType(36193===i.type?5126:i.type,et*er*ee),eo=0,el=0;el<er;++el)for(var eg=0;eg<et;++eg)for(var em=0;em<ee;++em)ei[eo++]=_[X*eg+en*el+$*em+s];sb(i,ei)}else if(R(s)===ec||R(s)===eu||R(s)===ef)R(s)===ec||R(s)===eu?i.element=s:i.element=s.canvas,i.width=i.element.width,i.height=i.element.height,i.channels=4;else if(R(s)===ed)i.element=s,i.width=s.width,i.height=s.height,i.channels=4;else if(R(s)===eh)i.element=s,i.width=s.naturalWidth,i.height=s.naturalHeight,i.channels=4;else if(R(s)===ep)i.element=s,i.width=s.videoWidth,i.height=s.videoHeight,i.channels=4;else if(rb(s)){for(er=0,_=i.width||s[0].length,X=i.height||s.length,en=i.channels,en=qa(s[0][0])?en||s[0][0].length:en||1,$=N.shape(s),et=1;er<$.length;++er)et*=$[er];et=F.allocType(36193===i.type?5126:i.type,et),N.flatten(s,$,"",et),sb(i,et),i.alignment=1,i.width=_,i.height=X,i.channels=en,i.format=i.internalformat=es[en],i.needsFree=!0}}else i.width=i.width||1,i.height=i.height||1,i.channels=i.channels||4}function g(o,s,F,N,j){var Z=o.element,X=o.data,$=o.internalformat,ee=o.format,et=o.type,er=o.width,en=o.height;k(o),Z?i.texSubImage2D(s,j,F,N,ee,et,Z):o.compressed?i.compressedTexSubImage2D(s,j,F,N,$,er,en,X):o.needsCopy?(_(),i.copyTexSubImage2D(s,j,F,N,o.xOffset,o.yOffset,er,en)):i.texSubImage2D(s,j,F,N,er,en,ee,et,X)}function l(){return eM.pop()||new n}function h(i){i.needsFree&&F.freeType(i.data),n.call(i),eM.push(i)}function p(){q.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function y(i,o,s){var _=i.images[0]=l();i.mipmask=1,_.width=i.width=o,_.height=i.height=s,_.channels=i.channels=4}function C(i,o){var s=null;if(Va(o))u(s=i.images[0]=l(),i),t(s,o),i.mipmask=1;else if(r(i,o),Array.isArray(o.mipmap))for(var _=o.mipmap,F=0;F<_.length;++F)u(s=i.images[F]=l(),i),s.width>>=F,s.height>>=F,t(s,_[F]),i.mipmask|=1<<F;else u(s=i.images[0]=l(),i),t(s,o),i.mipmask=1;u(i,i.images[0])}function w(o,s){for(var F=o.images,N=0;N<F.length&&F[N];++N){var j=F[N],Z=N,X=j.element,$=j.data,ee=j.internalformat,et=j.format,er=j.type,en=j.width,ei=j.height;k(j),X?i.texImage2D(s,Z,et,et,er,X):j.compressed?i.compressedTexImage2D(s,Z,ee,en,ei,0,$):j.needsCopy?(_(),i.copyTexImage2D(s,Z,et,j.xOffset,j.yOffset,en,ei,0)):i.texImage2D(s,Z,et,en,ei,0,et,er,$||null)}}function z(){var i=eC.pop()||new p;q.call(i);for(var o=i.mipmask=0;16>o;++o)i.images[o]=null;return i}function wa(i){for(var o=i.images,s=0;s<o.length;++s)o[s]&&h(o[s]),o[s]=null;eC.push(i)}function E(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function nb(i,o){"min"in o&&(i.minFilter=en[o.min],!(0<=eo.indexOf(i.minFilter))||"faces"in o||(i.genMipmaps=!0)),"mag"in o&&(i.magFilter=er[o.mag]);var s=i.wrapS,_=i.wrapT;if("wrap"in o){var F=o.wrap;"string"==typeof F?s=_=et[F]:Array.isArray(F)&&(s=et[F[0]],_=et[F[1]])}else"wrapS"in o&&(s=et[o.wrapS]),"wrapT"in o&&(_=et[o.wrapT]);if(i.wrapS=s,i.wrapT=_,"anisotropic"in o&&(i.anisotropic=o.anisotropic),"mipmap"in o){switch(s=!1,typeof o.mipmap){case"string":i.mipmapHint=ee[o.mipmap],s=i.genMipmaps=!0;break;case"boolean":s=i.genMipmaps=o.mipmap;break;case"object":i.genMipmaps=!1,s=!0}!s||"min"in o||(i.minFilter=9984)}}function D(s,_){i.texParameteri(_,10241,s.minFilter),i.texParameteri(_,10240,s.magFilter),i.texParameteri(_,10242,s.wrapS),i.texParameteri(_,10243,s.wrapT),o.ext_texture_filter_anisotropic&&i.texParameteri(_,34046,s.anisotropic),s.genMipmaps&&(i.hint(33170,s.mipmapHint),i.generateMipmap(_))}function v(o){q.call(this),this.mipmask=0,this.internalformat=6408,this.id=eE++,this.refCount=1,this.target=o,this.texture=i.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new E,$.profile&&(this.stats={size:0})}function ba(o){i.activeTexture(33984),i.bindTexture(o.target,o.texture)}function za(){var o=eI[0];o?i.bindTexture(o.target,o.texture):i.bindTexture(3553,null)}function A(o){var s=o.texture,_=o.unit,F=o.target;0<=_&&(i.activeTexture(33984+_),i.bindTexture(F,null),eI[_]=null),i.deleteTexture(s),o.texture=null,o.params=null,o.pixels=null,o.refCount=0,delete eL[o.id],X.textureCount--}var ee={"don't care":4352,"dont care":4352,nice:4354,fast:4353},et={repeat:10497,clamp:33071,mirror:33648},er={nearest:9728,linear:9729},en=O({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},er),ei={none:0,browser:37444},eg={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},em={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ey={};o.ext_srgb&&(em.srgb=35904,em.srgba=35906),o.oes_texture_float&&(eg.float32=eg.float=5126),o.oes_texture_half_float&&(eg.float16=eg["half float"]=36193),o.webgl_depth_texture&&(O(em,{depth:6402,"depth stencil":34041}),O(eg,{uint16:5123,uint32:5125,"depth stencil":34042})),o.webgl_compressed_texture_s3tc&&O(ey,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),o.webgl_compressed_texture_atc&&O(ey,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),o.webgl_compressed_texture_pvrtc&&O(ey,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),o.webgl_compressed_texture_etc1&&(ey["rgb etc1"]=36196);var ev=Array.prototype.slice.call(i.getParameter(34467));Object.keys(ey).forEach(function(i){var o=ey[i];0<=ev.indexOf(o)&&(em[i]=o)});var ex=Object.keys(em);s.textureFormats=ex;var e_=[];Object.keys(em).forEach(function(i){e_[em[i]]=i});var ew=[];Object.keys(eg).forEach(function(i){ew[eg[i]]=i});var eT=[];Object.keys(er).forEach(function(i){eT[er[i]]=i});var ek=[];Object.keys(en).forEach(function(i){ek[en[i]]=i});var eA=[];Object.keys(et).forEach(function(i){eA[et[i]]=i});var eS=ex.reduce(function(i,s){var _=em[s];return 6409===_||6406===_||6409===_||6410===_||6402===_||34041===_||o.ext_srgb&&(35904===_||35906===_)?i[_]=_:32855===_||0<=s.indexOf("rgba")?i[_]=6408:i[_]=6407,i},{}),eM=[],eC=[],eE=0,eL={},eP=s.maxTextureUnits,eI=Array(eP).map(function(){return null});return O(v.prototype,{bind:function(){this.bindCount+=1;var o=this.unit;if(0>o){for(var s=0;s<eP;++s){var _=eI[s];if(_){if(0<_.bindCount)continue;_.unit=-1}eI[s]=this,o=s;break}$.profile&&X.maxTextureUnits<o+1&&(X.maxTextureUnits=o+1),this.unit=o,i.activeTexture(33984+o),i.bindTexture(this.target,this.texture)}return o},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&A(this)}}),$.profile&&(X.getTotalTextureSize=function(){var i=0;return Object.keys(eL).forEach(function(o){i+=eL[o].stats.size}),i}),{create2D:function(o,s){function d(i,o){var s=_.texInfo;E.call(s);var F=z();return"number"==typeof i?"number"==typeof o?y(F,0|i,0|o):y(F,0|i,0|i):i?(nb(s,i),C(F,i)):y(F,1,1),s.genMipmaps&&(F.mipmask=(F.width<<1)-1),_.mipmask=F.mipmask,u(_,F),_.internalformat=F.internalformat,d.width=F.width,d.height=F.height,ba(_),w(F,3553),D(s,3553),za(),wa(F),$.profile&&(_.stats.size=La(_.internalformat,_.type,F.width,F.height,s.genMipmaps,!1)),d.format=e_[_.internalformat],d.type=ew[_.type],d.mag=eT[s.magFilter],d.min=ek[s.minFilter],d.wrapS=eA[s.wrapS],d.wrapT=eA[s.wrapT],d}var _=new v(3553);return eL[_.id]=_,X.textureCount++,d(o,s),d.subimage=function(i,o,s,F){o|=0,s|=0,F|=0;var N=l();return u(N,_),N.width=0,N.height=0,t(N,i),N.width=N.width||(_.width>>F)-o,N.height=N.height||(_.height>>F)-s,ba(_),g(N,3553,o,s,F),za(),h(N),d},d.resize=function(o,s){var F=0|o,N=0|s||F;if(F===_.width&&N===_.height)return d;d.width=_.width=F,d.height=_.height=N,ba(_);for(var j=0;_.mipmask>>j;++j){var Z=F>>j,X=N>>j;if(!Z||!X)break;i.texImage2D(3553,j,_.format,Z,X,0,_.format,_.type,null)}return za(),$.profile&&(_.stats.size=La(_.internalformat,_.type,F,N,!1,!1)),d},d._reglType="texture2d",d._texture=_,$.profile&&(d.stats=_.stats),d.destroy=function(){_.decRef()},d},createCube:function(o,s,_,F,N,j){function p(i,o,s,_,F,N){var j,X=Z.texInfo;for(E.call(X),j=0;6>j;++j)ee[j]=z();if("number"!=typeof i&&i){if("object"==typeof i){if(o)C(ee[0],i),C(ee[1],o),C(ee[2],s),C(ee[3],_),C(ee[4],F),C(ee[5],N);else if(nb(X,i),r(Z,i),"faces"in i)for(i=i.faces,j=0;6>j;++j)u(ee[j],Z),C(ee[j],i[j]);else for(j=0;6>j;++j)C(ee[j],i)}}else for(i=0|i||1,j=0;6>j;++j)y(ee[j],i,i);for(u(Z,ee[0]),Z.mipmask=X.genMipmaps?(ee[0].width<<1)-1:ee[0].mipmask,Z.internalformat=ee[0].internalformat,p.width=ee[0].width,p.height=ee[0].height,ba(Z),j=0;6>j;++j)w(ee[j],34069+j);for(D(X,34067),za(),$.profile&&(Z.stats.size=La(Z.internalformat,Z.type,p.width,p.height,X.genMipmaps,!0)),p.format=e_[Z.internalformat],p.type=ew[Z.type],p.mag=eT[X.magFilter],p.min=ek[X.minFilter],p.wrapS=eA[X.wrapS],p.wrapT=eA[X.wrapT],j=0;6>j;++j)wa(ee[j]);return p}var Z=new v(34067);eL[Z.id]=Z,X.cubeCount++;var ee=Array(6);return p(o,s,_,F,N,j),p.subimage=function(i,o,s,_,F){s|=0,_|=0,F|=0;var N=l();return u(N,Z),N.width=0,N.height=0,t(N,o),N.width=N.width||(Z.width>>F)-s,N.height=N.height||(Z.height>>F)-_,ba(Z),g(N,34069+i,s,_,F),za(),h(N),p},p.resize=function(o){if((o|=0)!==Z.width){p.width=Z.width=o,p.height=Z.height=o,ba(Z);for(var s=0;6>s;++s)for(var _=0;Z.mipmask>>_;++_)i.texImage2D(34069+s,_,Z.format,o>>_,o>>_,0,Z.format,Z.type,null);return za(),$.profile&&(Z.stats.size=La(Z.internalformat,Z.type,p.width,p.height,!1,!0)),p}},p._reglType="textureCube",p._texture=Z,$.profile&&(p.stats=Z.stats),p.destroy=function(){Z.decRef()},p},clear:function(){for(var o=0;o<eP;++o)i.activeTexture(33984+o),i.bindTexture(3553,null),eI[o]=null;T(eL).forEach(A),X.cubeCount=0,X.textureCount=0},getTexture:function(i){return null},restore:function(){for(var o=0;o<eP;++o){var s=eI[o];s&&(s.bindCount=0,s.unit=-1,eI[o]=null)}T(eL).forEach(function(o){o.texture=i.createTexture(),i.bindTexture(o.target,o.texture);for(var s=0;32>s;++s)if(0!=(o.mipmask&1<<s)){if(3553===o.target)i.texImage2D(3553,s,o.internalformat,o.width>>s,o.height>>s,0,o.internalformat,o.type,null);else for(var _=0;6>_;++_)i.texImage2D(34069+_,s,o.internalformat,o.width>>s,o.height>>s,0,o.internalformat,o.type,null)}D(o.texInfo,o.target)})},refresh:function(){for(var o=0;o<eP;++o){var s=eI[o];s&&(s.bindCount=0,s.unit=-1,eI[o]=null),i.activeTexture(33984+o),i.bindTexture(3553,null),i.bindTexture(34067,null)}}}}function Qb(i,o,s,_,F,N){function m(i,o,s){this.target=i,this.texture=o,this.renderbuffer=s;var _=i=0;o?(i=o.width,_=o.height):s&&(i=s.width,_=s.height),this.width=i,this.height=_}function q(i){i&&(i.texture&&i.texture._texture.decRef(),i.renderbuffer&&i.renderbuffer._renderbuffer.decRef())}function u(i,o,s){i&&(i.texture?i.texture._texture.refCount+=1:i.renderbuffer._renderbuffer.refCount+=1)}function r(o,s){s&&(s.texture?i.framebufferTexture2D(36160,o,s.target,s.texture._texture.texture,0):i.framebufferRenderbuffer(36160,o,36161,s.renderbuffer._renderbuffer.renderbuffer))}function k(i){var o=3553,s=null,_=null,F=i;return"object"==typeof i&&(F=i.data,"target"in i&&(o=0|i.target)),"texture2d"===(i=F._reglType)?s=F:"textureCube"===i?s=F:"renderbuffer"===i&&(_=F,o=36161),new m(o,s,_)}function n(i,o,s,N,j){return s?((i=_.create2D({width:i,height:o,format:N,type:j}))._texture.refCount=0,new m(3553,i,null)):((i=F.create({width:i,height:o,format:N}))._renderbuffer.refCount=0,new m(36161,null,i))}function t(i){return i&&(i.texture||i.renderbuffer)}function g(i,o,s){i&&(i.texture?i.texture.resize(o,s):i.renderbuffer&&i.renderbuffer.resize(o,s),i.width=o,i.height=s)}function l(){this.id=ee++,et[this.id]=this,this.framebuffer=i.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function h(i){i.colorAttachments.forEach(q),q(i.depthAttachment),q(i.stencilAttachment),q(i.depthStencilAttachment)}function p(o){i.deleteFramebuffer(o.framebuffer),o.framebuffer=null,N.framebufferCount--,delete et[o.id]}function y(o){i.bindFramebuffer(36160,o.framebuffer);var _,F=o.colorAttachments;for(_=0;_<F.length;++_)r(36064+_,F[_]);for(_=F.length;_<s.maxColorAttachments;++_)i.framebufferTexture2D(36160,36064+_,3553,null,0);i.framebufferTexture2D(36160,33306,3553,null,0),i.framebufferTexture2D(36160,36096,3553,null,0),i.framebufferTexture2D(36160,36128,3553,null,0),r(36096,o.depthAttachment),r(36128,o.stencilAttachment),r(33306,o.depthStencilAttachment),i.checkFramebufferStatus(36160),i.isContextLost(),i.bindFramebuffer(36160,j.next?j.next.framebuffer:null),j.cur=j.next,i.getError()}function C(i,o){function c(i,o){var _,F=0,N=0,j=!0,$=!0;_=null;var ee=!0,et="rgba",er="uint8",en=1,ei=null,eo=null,es=null,el=!1;"number"==typeof i?(F=0|i,N=0|o||F):i?("shape"in i?(F=(N=i.shape)[0],N=N[1]):("radius"in i&&(F=N=i.radius),"width"in i&&(F=i.width),"height"in i&&(N=i.height)),("color"in i||"colors"in i)&&Array.isArray(_=i.color||i.colors),!_&&("colorCount"in i&&(en=0|i.colorCount),"colorTexture"in i&&(ee=!!i.colorTexture,et="rgba4"),"colorType"in i&&(er=i.colorType,!ee)&&("half float"===er||"float16"===er?et="rgba16f":("float"===er||"float32"===er)&&(et="rgba32f")),"colorFormat"in i&&(0<=Z.indexOf(et=i.colorFormat)?ee=!0:0<=X.indexOf(et)&&(ee=!1))),("depthTexture"in i||"depthStencilTexture"in i)&&(el=!(!i.depthTexture&&!i.depthStencilTexture)),"depth"in i&&("boolean"==typeof i.depth?j=i.depth:(ei=i.depth,$=!1)),"stencil"in i&&("boolean"==typeof i.stencil?$=i.stencil:(eo=i.stencil,j=!1)),"depthStencil"in i&&("boolean"==typeof i.depthStencil?j=$=i.depthStencil:(es=i.depthStencil,$=j=!1))):F=N=1;var ec=null,eu=null,ef=null,ed=null;if(Array.isArray(_))ec=_.map(k);else if(_)ec=[k(_)];else for(ec=Array(en),_=0;_<en;++_)ec[_]=n(F,N,ee,et,er);for(F=F||ec[0].width,N=N||ec[0].height,ei?eu=k(ei):j&&!$&&(eu=n(F,N,el,"depth","uint32")),eo?ef=k(eo):$&&!j&&(ef=n(F,N,!1,"stencil","uint8")),es?ed=k(es):!ei&&!eo&&$&&j&&(ed=n(F,N,el,"depth stencil","depth stencil")),j=null,_=0;_<ec.length;++_)u(ec[_],F,N),ec[_]&&ec[_].texture&&($=ex[ec[_].texture._texture.format]*e_[ec[_].texture._texture.type],null===j&&(j=$));return u(eu,F,N),u(ef,F,N),u(ed,F,N),h(s),s.width=F,s.height=N,s.colorAttachments=ec,s.depthAttachment=eu,s.stencilAttachment=ef,s.depthStencilAttachment=ed,c.color=ec.map(t),c.depth=t(eu),c.stencil=t(ef),c.depthStencil=t(ed),c.width=s.width,c.height=s.height,y(s),c}var s=new l;return N.framebufferCount++,c(i,o),O(c,{resize:function(i,o){var _=Math.max(0|i,1),F=Math.max(0|o||_,1);if(_===s.width&&F===s.height)return c;for(var N=s.colorAttachments,j=0;j<N.length;++j)g(N[j],_,F);return g(s.depthAttachment,_,F),g(s.stencilAttachment,_,F),g(s.depthStencilAttachment,_,F),s.width=c.width=_,s.height=c.height=F,y(s),c},_reglType:"framebuffer",_framebuffer:s,destroy:function(){p(s),h(s)},use:function(i){j.setFBO({framebuffer:c},i)}})}var j={cur:null,next:null,dirty:!1,setFBO:null},Z=["rgba"],X=["rgba4","rgb565","rgb5 a1"];o.ext_srgb&&X.push("srgba"),o.ext_color_buffer_half_float&&X.push("rgba16f","rgb16f"),o.webgl_color_buffer_float&&X.push("rgba32f");var $=["uint8"];o.oes_texture_half_float&&$.push("half float","float16"),o.oes_texture_float&&$.push("float","float32");var ee=0,et={};return O(j,{getFramebuffer:function(i){return"function"==typeof i&&"framebuffer"===i._reglType&&(i=i._framebuffer)instanceof l?i:null},create:C,createCube:function(i){function b(i){var s,F={color:null},N=0,j=null;s="rgba";var Z="uint8",X=1;if("number"==typeof i?N=0|i:i?("shape"in i?N=i.shape[0]:("radius"in i&&(N=0|i.radius),"width"in i?N=0|i.width:"height"in i&&(N=0|i.height)),("color"in i||"colors"in i)&&Array.isArray(j=i.color||i.colors),j||("colorCount"in i&&(X=0|i.colorCount),"colorType"in i&&(Z=i.colorType),"colorFormat"in i&&(s=i.colorFormat)),"depth"in i&&(F.depth=i.depth),"stencil"in i&&(F.stencil=i.stencil),"depthStencil"in i&&(F.depthStencil=i.depthStencil)):N=1,j){if(Array.isArray(j))for(i=[],s=0;s<j.length;++s)i[s]=j[s];else i=[j]}else for(i=Array(X),j={radius:N,format:s,type:Z},s=0;s<X;++s)i[s]=_.createCube(j);for(s=0,F.color=Array(i.length);s<i.length;++s)X=i[s],N=N||X.width,F.color[s]={target:34069,data:i[s]};for(s=0;6>s;++s){for(X=0;X<i.length;++X)F.color[X].target=34069+s;0<s&&(F.depth=o[0].depth,F.stencil=o[0].stencil,F.depthStencil=o[0].depthStencil),o[s]?o[s](F):o[s]=C(F)}return O(b,{width:N,height:N,color:i})}var o=Array(6);return b(i),O(b,{faces:o,resize:function(i){var s=0|i;if(s===b.width)return b;var _=b.color;for(i=0;i<_.length;++i)_[i].resize(s);for(i=0;6>i;++i)o[i].resize(s);return b.width=b.height=s,b},_reglType:"framebufferCube",destroy:function(){o.forEach(function(i){i.destroy()})}})},clear:function(){T(et).forEach(p)},restore:function(){j.cur=null,j.next=null,j.dirty=!0,T(et).forEach(function(o){o.framebuffer=i.createFramebuffer(),y(o)})}})}function Za(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function Rb(i,o,s,_,F,N,j){function q(i){if(i!==en.currentVAO){var s=o.oes_vertex_array_object;i?s.bindVertexArrayOES(i.vao):s.bindVertexArrayOES(null),en.currentVAO=i}}function u(s){if(s!==en.currentVAO){if(s)s.bindAttrs();else{for(var _=o.angle_instanced_arrays,F=0;F<$.length;++F){var N=$[F];N.buffer?(i.enableVertexAttribArray(F),N.buffer.bind(),i.vertexAttribPointer(F,N.size,N.type,N.normalized,N.stride,N.offfset),_&&N.divisor&&_.vertexAttribDivisorANGLE(F,N.divisor)):(i.disableVertexAttribArray(F),i.vertexAttrib4f(F,N.x,N.y,N.z,N.w))}j.elements?i.bindBuffer(34963,j.elements.buffer.buffer):i.bindBuffer(34963,null)}en.currentVAO=s}}function r(){T(et).forEach(function(i){i.destroy()})}function k(){this.id=++ee,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var i=o.oes_vertex_array_object;this.vao=i?i.createVertexArrayOES():null,et[this.id]=this,this.buffers=[]}function n(){o.oes_vertex_array_object&&T(et).forEach(function(i){i.refresh()})}var X=s.maxAttributes,$=Array(X);for(s=0;s<X;++s)$[s]=new Za;var ee=0,et={},en={Record:Za,scope:{},state:$,currentVAO:null,targetVAO:null,restore:o.oes_vertex_array_object?n:function(){},createVAO:function(i){function b(i){Array.isArray(i)?(j=i,o.elements&&o.ownsElements&&o.elements.destroy(),o.elements=null,o.ownsElements=!1,o.offset=0,o.count=0,o.instances=-1,o.primitive=4):(i.elements?(j=i.elements,o.ownsElements?("function"==typeof j&&"elements"===j._reglType?o.elements.destroy():o.elements(j),o.ownsElements=!1):N.getElements(i.elements)?(o.elements=i.elements,o.ownsElements=!1):(o.elements=N.create(i.elements),o.ownsElements=!0)):(o.elements=null,o.ownsElements=!1),j=i.attributes,o.offset=0,o.count=-1,o.instances=-1,o.primitive=4,o.elements&&(o.count=o.elements._elements.vertCount,o.primitive=o.elements._elements.primType),"offset"in i&&(o.offset=0|i.offset),"count"in i&&(o.count=0|i.count),"instances"in i&&(o.instances=0|i.instances),"primitive"in i&&(o.primitive=er[i.primitive])),i={};var s=o.attributes;s.length=j.length;for(var _=0;_<j.length;++_){var j,X,$=j[_],ee=s[_]=new Za,et=$.data||$;Array.isArray(et)||P(et)||fa(et)?(o.buffers[_]&&(X=o.buffers[_],P(et)&&X._buffer.byteLength>=et.byteLength?X.subdata(et):(X.destroy(),o.buffers[_]=null)),o.buffers[_]||(X=o.buffers[_]=F.create($,34962,!1,!0)),ee.buffer=F.getBuffer(X),ee.size=0|ee.buffer.dimension,ee.normalized=!1,ee.type=ee.buffer.dtype,ee.offset=0,ee.stride=0,ee.divisor=0,ee.state=1,i[_]=1):F.getBuffer($)?(ee.buffer=F.getBuffer($),ee.size=0|ee.buffer.dimension,ee.normalized=!1,ee.type=ee.buffer.dtype,ee.offset=0,ee.stride=0,ee.divisor=0,ee.state=1):F.getBuffer($.buffer)?(ee.buffer=F.getBuffer($.buffer),ee.size=0|(+$.size||ee.buffer.dimension),ee.normalized=!!$.normalized,ee.type="type"in $?Z[$.type]:ee.buffer.dtype,ee.offset=0|($.offset||0),ee.stride=0|($.stride||0),ee.divisor=0|($.divisor||0),ee.state=1):"x"in $&&(ee.x=+$.x||0,ee.y=+$.y||0,ee.z=+$.z||0,ee.w=+$.w||0,ee.state=2)}for(X=0;X<o.buffers.length;++X)!i[X]&&o.buffers[X]&&(o.buffers[X].destroy(),o.buffers[X]=null);return o.refresh(),b}var o=new k;return _.vaoCount+=1,b.destroy=function(){for(var i=0;i<o.buffers.length;++i)o.buffers[i]&&o.buffers[i].destroy();o.buffers.length=0,o.ownsElements&&(o.elements.destroy(),o.elements=null,o.ownsElements=!1),o.destroy()},b._vao=o,b._reglType="vao",b(i)},getVAO:function(i){return"function"==typeof i&&i._vao?i._vao:null},destroyBuffer:function(o){for(var s=0;s<$.length;++s){var _=$[s];_.buffer===o&&(i.disableVertexAttribArray(s),_.buffer=null)}},setVAO:o.oes_vertex_array_object?q:u,clear:o.oes_vertex_array_object?r:function(){}};return k.prototype.bindAttrs=function(){for(var s=o.angle_instanced_arrays,_=this.attributes,F=0;F<_.length;++F){var j=_[F];j.buffer?(i.enableVertexAttribArray(F),i.bindBuffer(34962,j.buffer.buffer),i.vertexAttribPointer(F,j.size,j.type,j.normalized,j.stride,j.offset),s&&j.divisor&&s.vertexAttribDivisorANGLE(F,j.divisor)):(i.disableVertexAttribArray(F),i.vertexAttrib4f(F,j.x,j.y,j.z,j.w))}for(s=_.length;s<X;++s)i.disableVertexAttribArray(s);(s=N.getElements(this.elements))?i.bindBuffer(34963,s.buffer.buffer):i.bindBuffer(34963,null)},k.prototype.refresh=function(){var i=o.oes_vertex_array_object;i&&(i.bindVertexArrayOES(this.vao),this.bindAttrs(),en.currentVAO=null,i.bindVertexArrayOES(null))},k.prototype.destroy=function(){if(this.vao){var i=o.oes_vertex_array_object;this===en.currentVAO&&(en.currentVAO=null,i.bindVertexArrayOES(null)),i.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),et[this.id]&&(delete et[this.id],--_.vaoCount)},en}function Sb(i,o,s,_){function f(i,o,s,_){this.name=i,this.id=o,this.location=s,this.info=_}function e(i,o){for(var s=0;s<i.length;++s)if(i[s].id===o.id){i[s].location=o.location;return}i.push(o)}function m(s,_,j){var Z=(j=35632===s?F:N)[_];if(!Z){var X=o.str(_),Z=i.createShader(s);i.shaderSource(Z,X),i.compileShader(Z),j[_]=Z}return Z}function q(i,o){this.id=X++,this.fragId=i,this.vertId=o,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,_.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(s,F,N){j=m(35632,s.fragId);var j,Z=m(35633,s.vertId);if(F=s.program=i.createProgram(),i.attachShader(F,j),i.attachShader(F,Z),N)for(j=0;j<N.length;++j)Z=N[j],i.bindAttribLocation(F,Z[0],Z[1]);i.linkProgram(F),Z=i.getProgramParameter(F,35718),_.profile&&(s.stats.uniformsCount=Z);var X=s.uniforms;for(j=0;j<Z;++j)if(N=i.getActiveUniform(F,j)){if(1<N.size)for(var $=0;$<N.size;++$){var ee=N.name.replace("[0]","["+$+"]");e(X,new f(ee,o.id(ee),i.getUniformLocation(F,ee),N))}else e(X,new f(N.name,o.id(N.name),i.getUniformLocation(F,N.name),N))}for(Z=i.getProgramParameter(F,35721),_.profile&&(s.stats.attributesCount=Z),s=s.attributes,j=0;j<Z;++j)(N=i.getActiveAttrib(F,j))&&e(s,new f(N.name,o.id(N.name),i.getAttribLocation(F,N.name),N))}var F={},N={},j={},Z=[],X=0;return _.profile&&(s.getMaxUniformsCount=function(){var i=0;return Z.forEach(function(o){o.stats.uniformsCount>i&&(i=o.stats.uniformsCount)}),i},s.getMaxAttributesCount=function(){var i=0;return Z.forEach(function(o){o.stats.attributesCount>i&&(i=o.stats.attributesCount)}),i}),{clear:function(){var o=i.deleteShader.bind(i);T(F).forEach(o),F={},T(N).forEach(o),N={},Z.forEach(function(o){i.deleteProgram(o.program)}),Z.length=0,j={},s.shaderCount=0},program:function(o,_,X,$){var ee=j[_];ee||(ee=j[_]={});var et=ee[o];if(et&&(et.refCount++,!$))return et;var er=new q(_,o);return s.shaderCount++,u(er,X,$),et||(ee[o]=er),Z.push(er),O(er,{destroy:function(){if(er.refCount--,0>=er.refCount){i.deleteProgram(er.program);var o=Z.indexOf(er);Z.splice(o,1),s.shaderCount--}0>=ee[er.vertId].refCount&&(i.deleteShader(N[er.vertId]),delete N[er.vertId],delete j[er.fragId][er.vertId]),Object.keys(j[er.fragId]).length||(i.deleteShader(F[er.fragId]),delete F[er.fragId],delete j[er.fragId])}})},restore:function(){F={},N={};for(var i=0;i<Z.length;++i)u(Z[i],null,Z[i].attributes.map(function(i){return[i.location,i.name]}))},shader:m,frag:-1,vert:-1}}function Tb(i,o,s,_,F,N,j){function q(F){N=null===o.next?5121:o.next.colorAttachments[0].texture._texture.type;var N,j=0,Z=0,X=_.framebufferWidth,$=_.framebufferHeight,ee=null;return P(F)?ee=F:F&&(j=0|F.x,Z=0|F.y,X=0|(F.width||_.framebufferWidth-j),$=0|(F.height||_.framebufferHeight-Z),ee=F.data||null),s(),F=X*$*4,ee||(5121===N?ee=new Uint8Array(F):5126===N&&(ee=ee||new Float32Array(F))),i.pixelStorei(3333,4),i.readPixels(j,Z,X,$,6408,N,ee),ee}function u(i){var s;return o.setFBO({framebuffer:i.framebuffer},function(){s=q(i)}),s}return function(i){return i&&"framebuffer"in i?u(i):q(i)}}function Ub(i){for(var o,s=Array(i.length>>2),_=0;_<s.length;_++)s[_]=0;for(_=0;_<8*i.length;_+=8)s[_>>5]|=(255&i.charCodeAt(_/8))<<24-_%32;var F=8*i.length;i=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var N,j,Z,X,$,ee,et,er,en,ei,eo,_=Array(64);for(s[F>>5]|=128<<24-F%32,s[(F+64>>9<<4)+15]=F,er=0;er<s.length;er+=16){for(en=0,F=i[0],N=i[1],j=i[2],Z=i[3],X=i[4],$=i[5],ee=i[6],et=i[7];64>en;en++)16>en?_[en]=s[en+er]:(ei=en,eo=H(eo=Y(eo=_[en-2],17)^Y(eo,19)^eo>>>10,_[en-7]),o=Y(o=_[en-15],7)^Y(o,18)^o>>>3,_[ei]=H(H(eo,o),_[en-16])),ei=H(H(H(H(et,ei=Y(ei=X,6)^Y(ei,11)^Y(ei,25)),X&$^~X&ee),ew[en]),_[en]),eo=H(et=Y(et=F,2)^Y(et,13)^Y(et,22),F&N^F&j^N&j),et=ee,ee=$,$=X,X=H(Z,ei),Z=j,j=N,N=F,F=H(ei,eo);i[0]=H(F,i[0]),i[1]=H(N,i[1]),i[2]=H(j,i[2]),i[3]=H(Z,i[3]),i[4]=H(X,i[4]),i[5]=H($,i[5]),i[6]=H(ee,i[6]),i[7]=H(et,i[7])}for(_=0,s="";_<32*i.length;_+=8)s+=String.fromCharCode(i[_>>5]>>>24-_%32&255);return s}function Wb(i){for(var o,s="",_=0;_<i.length;_++)o=i.charCodeAt(_),s+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return s}function Xb(i){for(var o,s,_="",F=-1;++F<i.length;)o=i.charCodeAt(F),s=F+1<i.length?i.charCodeAt(F+1):0,55296<=o&&56319>=o&&56320<=s&&57343>=s&&(o=65536+((1023&o)<<10)+(1023&s),F++),127>=o?_+=String.fromCharCode(o):2047>=o?_+=String.fromCharCode(192|o>>>6&31,128|63&o):65535>=o?_+=String.fromCharCode(224|o>>>12&15,128|o>>>6&63,128|63&o):2097151>=o&&(_+=String.fromCharCode(240|o>>>18&7,128|o>>>12&63,128|o>>>6&63,128|63&o));return _}function Y(i,o){return i>>>o|i<<32-o}function H(i,o){var s=(65535&i)+(65535&o);return(i>>16)+(o>>16)+(s>>16)<<16|65535&s}function Aa(i){return Array.prototype.slice.call(i)}function Ba(i){return Aa(i).join("")}function Yb(i){function b(){var i=[],o=[];return O(function(){i.push.apply(i,Aa(arguments))},{def:function(){var _="v"+s++;return o.push(_),0<arguments.length&&(i.push(_,"="),i.push.apply(i,Aa(arguments)),i.push(";")),_},toString:function(){return Ba([0<o.length?"var "+o.join(",")+";":"",Ba(i)])}})}function c(){function a(s,_){o(s,_,"=",i.def(s,_),";")}var i=b(),o=b(),s=i.toString,_=o.toString;return O(function(){i.apply(i,Aa(arguments))},{def:i.def,entry:i,exit:o,save:a,set:function(o,s,_){a(o,s),i(o,s,"=",_,";")},toString:function(){return s()+_()}})}var o=i&&i.cache,s=0,_=[],F=[],N=[],j=b(),Z={};return{global:j,link:function(i,o){var j=o&&o.stable;if(!j){for(var Z=0;Z<F.length;++Z)if(F[Z]===i&&!N[Z])return _[Z]}return Z="g"+s++,_.push(Z),F.push(i),N.push(j),Z},block:b,proc:function(i,o){function d(){var i="a"+s.length;return s.push(i),i}var s=[];o=o||0;for(var _=0;_<o;++_)d();var _=c(),F=_.toString;return Z[i]=O(_,{arg:d,toString:function(){return Ba(["function(",s.join(),"){",F(),"}"])}})},scope:c,cond:function(){var i=Ba(arguments),o=c(),s=c(),_=o.toString,F=s.toString;return O(o,{then:function(){return o.apply(o,Aa(arguments)),this},else:function(){return s.apply(s,Aa(arguments)),this},toString:function(){var o=F();return o&&(o="else{"+o+"}"),Ba(["if(",i,"){",_(),"}",o])}})},compile:function(){var i=['"use strict";',j,"return {"];Object.keys(Z).forEach(function(o){i.push('"',o,'":',Z[o].toString(),",")}),i.push("}");var s,N=Ba(i).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return o&&o[s=Wb(Ub(Xb(N)))]?o[s].apply(null,F):(N=Function.apply(null,_.concat(N)),o&&(o[s]=N),N.apply(null,F))}}}function Sa(i){return Array.isArray(i)||P(i)||fa(i)}function yb(i){return i.sort(function(i,o){return"viewport"===i?-1:"viewport"===o?1:i<o?-1:1})}function K(i,o,s,_){this.thisDep=i,this.contextDep=o,this.propDep=s,this.append=_}function la(i){return i&&!(i.thisDep||i.contextDep||i.propDep)}function E(i){return new K(!1,!1,!1,i)}function L(i,o){var s=i.type;if(0===s)return new K(!0,1<=(s=i.data.length),2<=s,o);if(4===s)return new K((s=i.data).thisDep,s.contextDep,s.propDep,o);if(5===s)return new K(!1,!1,!1,o);if(6===s){for(var _=s=!1,F=!1,N=0;N<i.data.length;++N){var j=i.data[N];1===j.type?F=!0:2===j.type?_=!0:3===j.type?s=!0:0===j.type?(s=!0,1<=(j=j.data)&&(_=!0),2<=j&&(F=!0)):4===j.type&&(s=s||j.data.thisDep,_=_||j.data.contextDep,F=F||j.data.propDep)}return new K(s,_,F,o)}return new K(3===s,2===s,1===s,o)}function Zb(i,s,_,F,N,j,X,$,ee,et,en,ei,eo,es,el,ec){function p(i){return i.replace(".","_")}function y(i,o,s){var _=p(i);eF.push(i),eB[_]=eR[_]=!!s,ez[_]=o}function C(i,o,s){var _=p(i);eF.push(i),Array.isArray(s)?(eR[_]=s.slice(),eB[_]=s.slice()):eR[_]=eB[_]=s,eN[_]=o}function w(){var i=Yb({cache:el}),o=i.link,_=i.global;i.id=eU++,i.batchId="0";var F=o(ej),N=i.shared={props:"a0"};Object.keys(ej).forEach(function(i){N[i]=_.def(F,".",i)});var j=i.next={},Z=i.current={};Object.keys(eN).forEach(function(i){Array.isArray(eR[i])&&(j[i]=_.def(N.next,".",i),Z[i]=_.def(N.current,".",i))});var X=i.constants={};Object.keys(eV).forEach(function(i){X[i]=_.def(JSON.stringify(eV[i]))}),i.invoke=function(s,_){switch(_.type){case 0:var F=["this",N.context,N.props,i.batchId];return s.def(o(_.data),".call(",F.slice(0,Math.max(_.data.length+1,4)),")");case 1:return s.def(N.props,_.data);case 2:return s.def(N.context,_.data);case 3:return s.def("this",_.data);case 4:return _.data.append(i,s),_.data.ref;case 5:return _.data.toString();case 6:return _.data.map(function(o){return i.invoke(s,o)})}},i.attribCache={};var $={};return i.scopeAttrib=function(i){if((i=s.id(i))in $)return $[i];var _=et.scope[i];return _||(_=et.scope[i]=new eL),$[i]=o(_)},i}function z(i){var o,s=i.static;if(i=i.dynamic,"profile"in s){var _=!!s.profile;(o=E(function(i,o){return _})).enable=_}else if("profile"in i){var F=i.profile;o=L(F,function(i,o){return i.invoke(o,F)})}return o}function B(i,o){var s=i.static,_=i.dynamic;if("framebuffer"in s){var F=s.framebuffer;return F?(F=$.getFramebuffer(F),E(function(i,o){var s=i.link(F),_=i.shared;return o.set(_.framebuffer,".next",s),_=_.context,o.set(_,".framebufferWidth",s+".width"),o.set(_,".framebufferHeight",s+".height"),s})):E(function(i,o){var s=i.shared;return o.set(s.framebuffer,".next","null"),s=s.context,o.set(s,".framebufferWidth",s+".drawingBufferWidth"),o.set(s,".framebufferHeight",s+".drawingBufferHeight"),"null"})}if("framebuffer"in _){var N=_.framebuffer;return L(N,function(i,o){var s=i.invoke(o,N),_=i.shared,F=_.framebuffer,s=o.def(F,".getFramebuffer(",s,")");return o.set(F,".next",s),_=_.context,o.set(_,".framebufferWidth",s+"?"+s+".width:"+_+".drawingBufferWidth"),o.set(_,".framebufferHeight",s+"?"+s+".height:"+_+".drawingBufferHeight"),s})}return null}function H(i,o,s){function d(i){if(i in _){var s=_[i];i=!0;var N,j,Z=0|s.x,X=0|s.y;return"width"in s?N=0|s.width:i=!1,"height"in s?j=0|s.height:i=!1,new K(!i&&o&&o.thisDep,!i&&o&&o.contextDep,!i&&o&&o.propDep,function(i,o){var _=i.shared.context,F=N;"width"in s||(F=o.def(_,".","framebufferWidth","-",Z));var $=j;return"height"in s||($=o.def(_,".","framebufferHeight","-",X)),[Z,X,F,$]})}if(i in F){var $=F[i];return i=L($,function(i,o){var s=i.invoke(o,$),_=i.shared.context,F=o.def(s,".x|0"),N=o.def(s,".y|0"),j=o.def('"width" in ',s,"?",s,".width|0:","(",_,".","framebufferWidth","-",F,")"),s=o.def('"height" in ',s,"?",s,".height|0:","(",_,".","framebufferHeight","-",N,")");return[F,N,j,s]}),o&&(i.thisDep=i.thisDep||o.thisDep,i.contextDep=i.contextDep||o.contextDep,i.propDep=i.propDep||o.propDep),i}return o?new K(o.thisDep,o.contextDep,o.propDep,function(i,o){var s=i.shared.context;return[0,0,o.def(s,".","framebufferWidth"),o.def(s,".","framebufferHeight")]}):null}var _=i.static,F=i.dynamic;if(i=d("viewport")){var N=i;i=new K(i.thisDep,i.contextDep,i.propDep,function(i,o){var s=N.append(i,o),_=i.shared.context;return o.set(_,".viewportWidth",s[2]),o.set(_,".viewportHeight",s[3]),s})}return{viewport:i,scissor_box:d("scissor.box")}}function G(i,o){var s=i.static;if("string"==typeof s.frag&&"string"==typeof s.vert){if(0<Object.keys(o.dynamic).length)return null;var s=o.static,_=Object.keys(s);if(0<_.length&&"number"==typeof s[_[0]]){for(var F=[],N=0;N<_.length;++N)F.push([0|s[_[N]],_[N]]);return F}}return null}function D(i,o,_){function e(i){if(i in F){var o=s.id(F[i]);return(i=E(function(){return o})).id=o,i}if(i in N){var _=N[i];return L(_,function(i,o){var s=i.invoke(o,_);return o.def(i.shared.strings,".id(",s,")")})}return null}var F=i.static,N=i.dynamic,j=e("frag"),Z=e("vert"),X=null;return la(j)&&la(Z)?(X=en.program(Z.id,j.id,null,_),i=E(function(i,o){return i.link(X)})):i=new K(j&&j.thisDep||Z&&Z.thisDep,j&&j.contextDep||Z&&Z.contextDep,j&&j.propDep||Z&&Z.propDep,function(i,o){var s,_,F=i.shared.shader;return _=j?j.append(i,o):o.def(F,".","frag"),s=Z?Z.append(i,o):o.def(F,".","vert"),o.def(F+".program("+s+","+_+")")}),{frag:j,vert:Z,progVar:i,program:X}}function v(i,o){function c(i,o){if(i in s){var j=0|s[i];return o?F.offset=j:F.instances=j,E(function(i,s){return o&&(i.OFFSET=j),j})}if(i in _){var $=_[i];return L($,function(i,s){var _=i.invoke(s,$);return o&&(i.OFFSET=_),_})}if(o){if(X)return E(function(i,o){return i.OFFSET=0});if(N)return new K(Z.thisDep,Z.contextDep,Z.propDep,function(i,o){return o.def(i.shared.vao+".currentVAO?"+i.shared.vao+".currentVAO.offset:0")})}else if(N)return new K(Z.thisDep,Z.contextDep,Z.propDep,function(i,o){return o.def(i.shared.vao+".currentVAO?"+i.shared.vao+".currentVAO.instances:-1")});return null}var s=i.static,_=i.dynamic,F={},N=!1,Z=function(){if("vao"in s){var i=s.vao;return null!==i&&null===et.getVAO(i)&&(i=et.createVAO(i)),N=!0,F.vao=i,E(function(o){var s=et.getVAO(i);return s?o.link(s):"null"})}if("vao"in _){N=!0;var o=_.vao;return L(o,function(i,s){var _=i.invoke(s,o);return s.def(i.shared.vao+".getVAO("+_+")")})}return null}(),X=!1,$=function(){if("elements"in s){var i=s.elements;if(F.elements=i,Sa(i)){var o=F.elements=j.create(i,!0),i=j.getElements(o);X=!0}else i&&(i=j.getElements(i),X=!0);return(o=E(function(o,s){if(i){var _=o.link(i);return o.ELEMENTS=_}return o.ELEMENTS=null})).value=i,o}if("elements"in _){X=!0;var $=_.elements;return L($,function(i,o){var s=i.shared,_=s.isBufferArgs,s=s.elements,F=i.invoke(o,$),N=o.def("null"),_=o.def(_,"(",F,")"),F=i.cond(_).then(N,"=",s,".createStream(",F,");").else(N,"=",s,".getElements(",F,");");return o.entry(F),o.exit(i.cond(_).then(s,".destroyStream(",N,");")),i.ELEMENTS=N})}return N?new K(Z.thisDep,Z.contextDep,Z.propDep,function(i,o){return o.def(i.shared.vao+".currentVAO?"+i.shared.elements+".getElements("+i.shared.vao+".currentVAO.elements):null")}):null}(),ee=c("offset",!0),en=function(){if("primitive"in s){var i=s.primitive;return F.primitive=i,E(function(o,s){return er[i]})}if("primitive"in _){var o=_.primitive;return L(o,function(i,s){var _=i.constants.primTypes,F=i.invoke(s,o);return s.def(_,"[",F,"]")})}return X?la($)?$.value?E(function(i,o){return o.def(i.ELEMENTS,".primType")}):E(function(){return 4}):new K($.thisDep,$.contextDep,$.propDep,function(i,o){var s=i.ELEMENTS;return o.def(s,"?",s,".primType:",4)}):N?new K(Z.thisDep,Z.contextDep,Z.propDep,function(i,o){return o.def(i.shared.vao+".currentVAO?"+i.shared.vao+".currentVAO.primitive:4")}):null}(),ei=function(){if("count"in s){var i=0|s.count;return F.count=i,E(function(){return i})}if("count"in _){var o=_.count;return L(o,function(i,s){return i.invoke(s,o)})}return X?la($)?$?ee?new K(ee.thisDep,ee.contextDep,ee.propDep,function(i,o){return o.def(i.ELEMENTS,".vertCount-",i.OFFSET)}):E(function(i,o){return o.def(i.ELEMENTS,".vertCount")}):E(function(){return -1}):new K($.thisDep||ee.thisDep,$.contextDep||ee.contextDep,$.propDep||ee.propDep,function(i,o){var s=i.ELEMENTS;return i.OFFSET?o.def(s,"?",s,".vertCount-",i.OFFSET,":-1"):o.def(s,"?",s,".vertCount:-1")}):N?new K(Z.thisDep,Z.contextDep,Z.propDep,function(i,o){return o.def(i.shared.vao,".currentVAO?",i.shared.vao,".currentVAO.count:-1")}):null}();return{elements:$,primitive:en,count:ei,instances:c("instances",!1),offset:ee,vao:Z,vaoActive:N,elementsActive:X,static:F}}function ba(i,o){var s=i.static,_=i.dynamic,F={};return eF.forEach(function(i){function b(N,j){if(i in s){var Z=N(s[i]);F[o]=E(function(){return Z})}else if(i in _){var X=_[i];F[o]=L(X,function(i,o){return j(i,o,i.invoke(o,X))})}}var o=p(i);switch(i){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return b(function(i){return i},function(i,o,s){return s});case"depth.func":return b(function(i){return eS[i]},function(i,o,s){return o.def(i.constants.compareFuncs,"[",s,"]")});case"depth.range":return b(function(i){return i},function(i,o,s){return[o.def("+",s,"[0]"),o=o.def("+",s,"[1]")]});case"blend.func":return b(function(i){return[eA["srcRGB"in i?i.srcRGB:i.src],eA["dstRGB"in i?i.dstRGB:i.dst],eA["srcAlpha"in i?i.srcAlpha:i.src],eA["dstAlpha"in i?i.dstAlpha:i.dst]]},function(i,o,s){function d(i,_){return o.def('"',i,_,'" in ',s,"?",s,".",i,_,":",s,".",i)}i=i.constants.blendFuncs;var _=d("src","RGB"),F=d("dst","RGB"),_=o.def(i,"[",_,"]"),N=o.def(i,"[",d("src","Alpha"),"]"),F=o.def(i,"[",F,"]");return[_,F,N,i=o.def(i,"[",d("dst","Alpha"),"]")]});case"blend.equation":return b(function(i){return"string"==typeof i?[eP[i],eP[i]]:"object"==typeof i?[eP[i.rgb],eP[i.alpha]]:void 0},function(i,o,s){var _=i.constants.blendEquations,F=o.def(),N=o.def();return(i=i.cond("typeof ",s,'==="string"')).then(F,"=",N,"=",_,"[",s,"];"),i.else(F,"=",_,"[",s,".rgb];",N,"=",_,"[",s,".alpha];"),o(i),[F,N]});case"blend.color":return b(function(i){return S(4,function(o){return+i[o]})},function(i,o,s){return S(4,function(i){return o.def("+",s,"[",i,"]")})});case"stencil.mask":return b(function(i){return 0|i},function(i,o,s){return o.def(s,"|0")});case"stencil.func":return b(function(i){return[eS[i.cmp||"keep"],i.ref||0,"mask"in i?i.mask:-1]},function(i,o,s){return[i=o.def('"cmp" in ',s,"?",i.constants.compareFuncs,"[",s,".cmp]",":",7680),o.def(s,".ref|0"),o=o.def('"mask" in ',s,"?",s,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return b(function(o){return["stencil.opBack"===i?1029:1028,eM[o.fail||"keep"],eM[o.zfail||"keep"],eM[o.zpass||"keep"]]},function(o,s,_){function e(i){return s.def('"',i,'" in ',_,"?",F,"[",_,".",i,"]:",7680)}var F=o.constants.stencilOps;return["stencil.opBack"===i?1029:1028,e("fail"),e("zfail"),e("zpass")]});case"polygonOffset.offset":return b(function(i){return[0|i.factor,0|i.units]},function(i,o,s){return[o.def(s,".factor|0"),o=o.def(s,".units|0")]});case"cull.face":return b(function(i){var o=0;return"front"===i?o=1028:"back"===i&&(o=1029),o},function(i,o,s){return o.def(s,'==="front"?',1028,":",1029)});case"lineWidth":return b(function(i){return i},function(i,o,s){return s});case"frontFace":return b(function(i){return eC[i]},function(i,o,s){return o.def(s+'==="cw"?2304:2305')});case"colorMask":return b(function(i){return i.map(function(i){return!!i})},function(i,o,s){return S(4,function(i){return"!!"+s+"["+i+"]"})});case"sample.coverage":return b(function(i){return["value"in i?i.value:1,!!i.invert]},function(i,o,s){return[o.def('"value" in ',s,"?+",s,".value:1"),o=o.def("!!",s,".invert")]})}}),F}function P(i,o){var s=i.static,_=i.dynamic,F={};return Object.keys(s).forEach(function(i){var o,_=s[i];if("number"==typeof _||"boolean"==typeof _)o=E(function(){return _});else if("function"==typeof _){var N=_._reglType;"texture2d"===N||"textureCube"===N?o=E(function(i){return i.link(_)}):("framebuffer"===N||"framebufferCube"===N)&&(o=E(function(i){return i.link(_.color[0])}))}else qa(_)&&(o=E(function(i){return i.global.def("[",S(_.length,function(i){return _[i]}),"]")}));o.value=_,F[i]=o}),Object.keys(_).forEach(function(i){var o=_[i];F[i]=L(o,function(i,s){return i.invoke(s,o)})}),F}function A(i,o){var _=i.static,F=i.dynamic,j={};return Object.keys(_).forEach(function(i){var o=_[i],F=s.id(i),X=new eL;if(Sa(o))X.state=1,X.buffer=N.getBuffer(N.create(o,34962,!1,!0)),X.type=0;else{var $=N.getBuffer(o);if($)X.state=1,X.buffer=$,X.type=0;else if("constant"in o){var ee=o.constant;X.buffer="null",X.state=2,"number"==typeof ee?X.x=ee:eT.forEach(function(i,o){o<ee.length&&(X[i]=ee[o])})}else{var $=Sa(o.buffer)?N.getBuffer(N.create(o.buffer,34962,!1,!0)):N.getBuffer(o.buffer),et=0|o.offset,er=0|o.stride,en=0|o.size,ei=!!o.normalized,eo=0;"type"in o&&(eo=Z[o.type]),o=0|o.divisor,X.buffer=$,X.state=1,X.size=en,X.normalized=ei,X.type=eo||$.dtype,X.offset=et,X.stride=er,X.divisor=o}}j[i]=E(function(i,o){var s=i.attribCache;if(F in s)return s[F];var _={isStream:!1};return Object.keys(X).forEach(function(i){_[i]=X[i]}),X.buffer&&(_.buffer=i.link(X.buffer),_.type=_.type||_.buffer+".dtype"),s[F]=_})}),Object.keys(F).forEach(function(i){var o=F[i];j[i]=L(o,function(i,s){function d(i){s(Z[i],"=",_,".",i,"|0;")}var _=i.invoke(s,o),F=i.shared,N=i.constants,j=F.isBufferArgs,F=F.buffer,Z={isStream:s.def(!1)},X=new eL;X.state=1,Object.keys(X).forEach(function(i){Z[i]=s.def(""+X[i])});var $=Z.buffer,ee=Z.type;return s("if(",j,"(",_,")){",Z.isStream,"=true;",$,"=",F,".createStream(",34962,",",_,");",ee,"=",$,".dtype;","}else{",$,"=",F,".getBuffer(",_,");","if(",$,"){",ee,"=",$,".dtype;",'}else if("constant" in ',_,"){",Z.state,"=",2,";","if(typeof "+_+'.constant === "number"){',Z[eT[0]],"=",_,".constant;",eT.slice(1).map(function(i){return Z[i]}).join("="),"=0;","}else{",eT.map(function(i,o){return Z[i]+"="+_+".constant.length>"+o+"?"+_+".constant["+o+"]:0;"}).join(""),"}}else{","if(",j,"(",_,".buffer)){",$,"=",F,".createStream(",34962,",",_,".buffer);","}else{",$,"=",F,".getBuffer(",_,".buffer);","}",ee,'="type" in ',_,"?",N.glTypes,"[",_,".type]:",$,".dtype;",Z.normalized,"=!!",_,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),s("}}"),s.exit("if(",Z.isStream,"){",F,".destroyStream(",$,");","}"),Z})}),j}function J(i){var o=i.static,s=i.dynamic,_={};return Object.keys(o).forEach(function(i){var s=o[i];_[i]=E(function(i,o){return"number"==typeof s||"boolean"==typeof s?""+s:i.link(s)})}),Object.keys(s).forEach(function(i){var o=s[i];_[i]=L(o,function(i,s){return i.invoke(s,o)})}),_}function oa(i,o,s,F,N){function g(i){var o=X[i];o&&(ee[i]=o)}var j=G(i,o),Z=B(i,N),X=H(i,Z,N),$=v(i,N),ee=ba(i,N),er=D(i,N,j);g("viewport"),g(p("scissor.box"));var en=0<Object.keys(ee).length,Z={framebuffer:Z,draw:$,shader:er,state:ee,dirty:en,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Z.profile=z(i,N),Z.uniforms=P(s,N),Z.drawVAO=Z.scopeVAO=$.vao,!Z.drawVAO&&er.program&&!j&&_.angle_instanced_arrays&&$.static.elements){var ei=!0;if(i=er.program.attributes.map(function(i){return i=o.static[i],ei=ei&&!!i,i}),ei&&0<i.length){var eo=et.getVAO(et.createVAO({attributes:i,elements:$.static.elements}));Z.drawVAO=new K(null,null,null,function(i,o){return i.link(eo)}),Z.useVAO=!0}}return j?Z.useVAO=!0:Z.attributes=A(o,N),Z.context=J(F,N),Z}function na(i,o,s){var _=i.shared.context,F=i.scope();Object.keys(s).forEach(function(N){o.save(_,"."+N);var j=s[N].append(i,o);Array.isArray(j)?F(_,".",N,"=[",j.join(),"];"):F(_,".",N,"=",j,";")}),o(F)}function V(i,o,s,_){var F,N=i.shared,j=N.gl,Z=N.framebuffer;eO&&(F=o.def(N.extensions,".webgl_draw_buffers"));var X=i.constants,N=X.drawBuffer,X=X.backBuffer;i=s?s.append(i,o):o.def(Z,".next"),_||o("if(",i,"!==",Z,".cur){"),o("if(",i,"){",j,".bindFramebuffer(",36160,",",i,".framebuffer);"),eO&&o(F,".drawBuffersWEBGL(",N,"[",i,".colorAttachments.length]);"),o("}else{",j,".bindFramebuffer(",36160,",null);"),eO&&o(F,".drawBuffersWEBGL(",X,");"),o("}",Z,".cur=",i,";"),_||o("}")}function T(i,o,s){var _=i.shared,F=_.gl,N=i.current,j=i.next,Z=_.current,X=_.next,$=i.cond(Z,".dirty");eF.forEach(function(o){if(!((o=p(o))in s.state)){var _,ee;if(o in j){_=j[o],ee=N[o];var et=S(eR[o].length,function(i){return $.def(_,"[",i,"]")});$(i.cond(et.map(function(i,o){return i+"!=="+ee+"["+o+"]"}).join("||")).then(F,".",eN[o],"(",et,");",et.map(function(i,o){return ee+"["+o+"]="+i}).join(";"),";"))}else _=$.def(X,".",o),$(et=i.cond(_,"!==",Z,".",o)),o in ez?et(i.cond(_).then(F,".enable(",ez[o],");").else(F,".disable(",ez[o],");"),Z,".",o,"=",_,";"):et(F,".",eN[o],"(",_,");",Z,".",o,"=",_,";")}}),0===Object.keys(s.state).length&&$(Z,".dirty=false;"),o($)}function W(i,o,s,_){var F,N=i.shared,j=i.current,Z=N.current,X=N.gl;yb(Object.keys(s)).forEach(function(N){var $=s[N];if(!_||_($)){var ee=$.append(i,o);if(ez[N]){var et=ez[N];la($)?(F=i.link(ee,{stable:!0}),o(i.cond(F).then(X,".enable(",et,");").else(X,".disable(",et,");")),o(Z,".",N,"=",F,";")):(o(i.cond(ee).then(X,".enable(",et,");").else(X,".disable(",et,");")),o(Z,".",N,"=",ee,";"))}else if(qa(ee)){var er=j[N];o(X,".",eN[N],"(",ee,");",ee.map(function(i,o){return er+"["+o+"]="+i}).join(";"),";")}else la($)?(F=i.link(ee,{stable:!0}),o(X,".",eN[N],"(",F,");",Z,".",N,"=",F,";")):o(X,".",eN[N],"(",ee,");",Z,".",N,"=",ee,";")}})}function Q(i,o){eI&&(i.instancing=o.def(i.shared.extensions,".angle_instanced_arrays"))}function I(i,o,s,_,F){function f(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function h(i){i(N=o.def(),"=",f(),";"),"string"==typeof F?i(X,".count+=",F,";"):i(X,".count++;"),es&&(_?i(j=o.def(),"=",ee,".getNumPendingQueries();"):i(ee,".beginQuery(",X,");"))}function k(i){i(X,".cpuTime+=",f(),"-",N,";"),es&&(_?i(ee,".pushScopeStats(",j,",",ee,".getNumPendingQueries(),",X,");"):i(ee,".endQuery();"))}function l(i){var s=o.def($,".profile");o($,".profile=",i,";"),o.exit($,".profile=",s,";")}var N,j,Z=i.shared,X=i.stats,$=Z.current,ee=Z.timer;if(s=s.profile){if(la(s)){s.enable?(h(o),k(o.exit),l("true")):l("false");return}l(s=s.append(i,o))}else s=o.def($,".profile");h(Z=i.block()),o("if(",s,"){",Z,"}"),k(i=i.block()),o.exit("if(",s,"){",i,"}")}function M(i,o,s,_,F){function f(i){switch(i){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function g(s,_,F){function f(){o("if(!",X,".buffer){",j,".enableVertexAttribArray(",Z,");}");var s,N=F.type;s=F.size?o.def(F.size,"||",_):_,o("if(",X,".type!==",N,"||",X,".size!==",s,"||",et.map(function(i){return X+"."+i+"!=="+F[i]}).join("||"),"){",j,".bindBuffer(",34962,",",$,".buffer);",j,".vertexAttribPointer(",[Z,s,N,F.normalized,F.stride,F.offset],");",X,".type=",N,";",X,".size=",s,";",et.map(function(i){return X+"."+i+"="+F[i]+";"}).join(""),"}"),eI&&o("if(",X,".divisor!==",N=F.divisor,"){",i.instancing,".vertexAttribDivisorANGLE(",[Z,N],");",X,".divisor=",N,";}")}function k(){o("if(",X,".buffer){",j,".disableVertexAttribArray(",Z,");",X,".buffer=null;","}if(",eT.map(function(i,o){return X+"."+i+"!=="+ee[o]}).join("||"),"){",j,".vertexAttrib4f(",Z,",",ee,");",eT.map(function(i,o){return X+"."+i+"="+ee[o]+";"}).join(""),"}")}var j=N.gl,Z=o.def(s,".location"),X=o.def(N.attributes,"[",Z,"]");s=F.state;var $=F.buffer,ee=[F.x,F.y,F.z,F.w],et=["buffer","normalized","offset","stride"];1===s?f():2===s?k():(o("if(",s,"===",1,"){"),f(),o("}else{"),k(),o("}"))}var N=i.shared;_.forEach(function(_){var N,j=_.name,Z=s.attributes[j];if(Z){if(!F(Z))return;N=Z.append(i,o)}else{if(!F(eE))return;var X=i.scopeAttrib(j);N={},Object.keys(new eL).forEach(function(i){N[i]=o.def(X,".",i)})}g(i.link(_),f(_.info.type),N)})}function U(i,o,_,F,N,j){for(var Z,X=i.shared,$=X.gl,ee=0;ee<F.length;++ee){var et,er=F[ee],en=er.name,ei=er.info.type,eo=_.uniforms[en],er=i.link(er)+".location";if(eo){if(!N(eo))continue;if(la(eo)){if(en=eo.value,35678===ei||35680===ei)o($,".uniform1i(",er,",",(ei=i.link(en._texture||en.color[0]._texture))+".bind());"),o.exit(ei,".unbind();");else if(35674===ei||35675===ei||35676===ei)en=i.global.def("new Float32Array(["+Array.prototype.slice.call(en)+"])"),eo=2,35675===ei?eo=3:35676===ei&&(eo=4),o($,".uniformMatrix",eo,"fv(",er,",false,",en,");");else{switch(ei){case 5126:Z="1f";break;case 35664:Z="2f";break;case 35665:Z="3f";break;case 35666:Z="4f";break;case 35670:case 5124:Z="1i";break;case 35671:case 35667:Z="2i";break;case 35672:case 35668:Z="3i";break;case 35673:case 35669:Z="4i"}o($,".uniform",Z,"(",er,",",qa(en)?Array.prototype.slice.call(en):en,");")}continue}et=eo.append(i,o)}else{if(!N(eE))continue;et=o.def(X.uniforms,"[",s.id(en),"]")}switch(35678===ei?o("if(",et,"&&",et,'._reglType==="framebuffer"){',et,"=",et,".color[0];","}"):35680===ei&&o("if(",et,"&&",et,'._reglType==="framebufferCube"){',et,"=",et,".color[0];","}"),en=1,ei){case 35678:case 35680:ei=o.def(et,"._texture"),o($,".uniform1i(",er,",",ei,".bind());"),o.exit(ei,".unbind();");continue;case 5124:case 35670:Z="1i";break;case 35667:case 35671:Z="2i",en=2;break;case 35668:case 35672:Z="3i",en=3;break;case 35669:case 35673:Z="4i",en=4;break;case 5126:Z="1f";break;case 35664:Z="2f",en=2;break;case 35665:Z="3f",en=3;break;case 35666:Z="4f",en=4;break;case 35674:Z="Matrix2fv";break;case 35675:Z="Matrix3fv";break;case 35676:Z="Matrix4fv"}if("M"===Z.charAt(0)){o($,".uniform",Z,"(",er,",");var er=Math.pow(ei-35674+2,2),es=i.global.def("new Float32Array(",er,")");Array.isArray(et)?o("false,(",S(er,function(i){return es+"["+i+"]="+et[i]}),",",es,")"):o("false,(Array.isArray(",et,")||",et," instanceof Float32Array)?",et,":(",S(er,function(i){return es+"["+i+"]="+et+"["+i+"]"}),",",es,")"),o(");")}else{if(1<en){for(var ei=[],el=[],eo=0;eo<en;++eo)Array.isArray(et)?el.push(et[eo]):el.push(o.def(et+"["+eo+"]")),j&&ei.push(o.def());j&&o("if(!",i.batchId,"||",ei.map(function(i,o){return i+"!=="+el[o]}).join("||"),"){",ei.map(function(i,o){return i+"="+el[o]+";"}).join("")),o($,".uniform",Z,"(",er,",",el.join(","),");")}else j&&(ei=o.def(),o("if(!",i.batchId,"||",ei,"!==",et,"){",ei,"=",et,";")),o($,".uniform",Z,"(",er,",",et,");");j&&o("}")}}}function Y(i,o,s,_){function e(F){var N=en[F];return N?N.contextDep&&_.contextDynamic||N.propDep?N.append(i,s):N.append(i,o):o.def(er,".",F)}function f(){function a(){s($,".drawElementsInstancedANGLE(",[eo,el,ec,es+"<<(("+ec+"-5121)>>1)",X],");")}function b(){s($,".drawArraysInstancedANGLE(",[eo,es,el,X],");")}ei&&"null"!==ei?eu?a():(s("if(",ei,"){"),a(),s("}else{"),b(),s("}")):b()}function g(){function a(){s(et+".drawElements("+[eo,el,ec,es+"<<(("+ec+"-5121)>>1)"]+");")}function b(){s(et+".drawArrays("+[eo,es,el]+");")}ei&&"null"!==ei?eu?a():(s("if(",ei,"){"),a(),s("}else{"),b(),s("}")):b()}var F,N,j,Z,X,$,ee=i.shared,et=ee.gl,er=ee.draw,en=_.draw,ei=(F=en.elements,N=o,F?((F.contextDep&&_.contextDynamic||F.propDep)&&(N=s),F=F.append(i,N),en.elementsActive&&N("if("+F+")"+et+".bindBuffer(34963,"+F+".buffer.buffer);")):(F=N.def(),N(F,"=",er,".","elements",";","if(",F,"){",et,".bindBuffer(",34963,",",F,".buffer.buffer);}","else if(",ee.vao,".currentVAO){",F,"=",i.shared.elements+".getElements("+ee.vao,".currentVAO.elements);",eD?"":"if("+F+")"+et+".bindBuffer(34963,"+F+".buffer.buffer);","}")),F),eo=e("primitive"),es=e("offset"),el=(j=en.count,Z=o,j?((j.contextDep&&_.contextDynamic||j.propDep)&&(Z=s),j=j.append(i,Z)):j=Z.def(er,".","count"),j);if("number"==typeof el){if(0===el)return}else s("if(",el,"){"),s.exit("}");eI&&(X=e("instances"),$=i.instancing);var ec=ei+".type",eu=en.elements&&la(en.elements)&&!en.vaoActive;eI&&("number"!=typeof X||0<=X)?"string"==typeof X?(s("if(",X,">0){"),f(),s("}else if(",X,"<0){"),g(),s("}")):f():g()}function xa(i,o,s,_,F){return F=(o=w()).proc("body",F),eI&&(o.instancing=F.def(o.shared.extensions,".angle_instanced_arrays")),i(o,F,s,_),o.compile().body}function da(i,o,s,_){Q(i,o),s.useVAO?s.drawVAO?o(i.shared.vao,".setVAO(",s.drawVAO.append(i,o),");"):o(i.shared.vao,".setVAO(",i.shared.vao,".targetVAO);"):(o(i.shared.vao,".setVAO(null);"),M(i,o,s,_.attributes,function(){return!0})),U(i,o,s,_.uniforms,function(){return!0},!1),Y(i,o,o,s)}function pa(i,o){var s=i.proc("draw",1);Q(i,s),na(i,s,o.context),V(i,s,o.framebuffer),T(i,s,o),W(i,s,o.state),I(i,s,o,!1,!0);var _=o.shader.progVar.append(i,s);if(s(i.shared.gl,".useProgram(",_,".program);"),o.shader.program)da(i,s,o,o.shader.program);else{s(i.shared.vao,".setVAO(null);");var F=i.global.def("{}"),N=s.def(_,".id"),j=s.def(F,"[",N,"]");s(i.cond(j).then(j,".call(this,a0);").else(j,"=",F,"[",N,"]=",i.link(function(s){return xa(da,i,o,s,1)}),"(",_,");",j,".call(this,a0);"))}0<Object.keys(o.state).length&&s(i.shared.current,".dirty=true;"),i.shared.vao&&s(i.shared.vao,".setVAO(null);")}function ga(i,o,s,_){function e(){return!0}i.batchId="a1",Q(i,o),M(i,o,s,_.attributes,e),U(i,o,s,_.uniforms,e,!1),Y(i,o,o,s)}function Ea(i,o,s,_){function e(i){return i.contextDep&&F||i.propDep}function f(i){return!e(i)}Q(i,o);var F=s.contextDep,N=o.def(),j=o.def();i.shared.props=j,i.batchId=N;var Z=i.scope(),X=i.scope();o(Z.entry,"for(",N,"=0;",N,"<","a1",";++",N,"){",j,"=","a0","[",N,"];",X,"}",Z.exit),s.needsContext&&na(i,X,s.context),s.needsFramebuffer&&V(i,X,s.framebuffer),W(i,X,s.state,e),s.profile&&e(s.profile)&&I(i,X,s,!1,!0),_?(s.useVAO?s.drawVAO?e(s.drawVAO)?X(i.shared.vao,".setVAO(",s.drawVAO.append(i,X),");"):Z(i.shared.vao,".setVAO(",s.drawVAO.append(i,Z),");"):Z(i.shared.vao,".setVAO(",i.shared.vao,".targetVAO);"):(Z(i.shared.vao,".setVAO(null);"),M(i,Z,s,_.attributes,f),M(i,X,s,_.attributes,e)),U(i,Z,s,_.uniforms,f,!1),U(i,X,s,_.uniforms,e,!0),Y(i,Z,X,s)):(o=i.global.def("{}"),_=s.shader.progVar.append(i,X),j=X.def(_,".id"),Z=X.def(o,"[",j,"]"),X(i.shared.gl,".useProgram(",_,".program);","if(!",Z,"){",Z,"=",o,"[",j,"]=",i.link(function(o){return xa(ga,i,s,o,2)}),"(",_,");}",Z,".call(this,a0[",N,"],",N,");"))}function Qa(i,o){function c(i){return i.contextDep&&_||i.propDep}var s=i.proc("batch",2);i.batchId="0",Q(i,s);var _=!1,F=!0;Object.keys(o.context).forEach(function(i){_=_||o.context[i].propDep}),_||(na(i,s,o.context),F=!1);var N=o.framebuffer,j=!1;if(N?(N.propDep?_=j=!0:N.contextDep&&_&&(j=!0),j||V(i,s,N)):V(i,s,null),o.state.viewport&&o.state.viewport.propDep&&(_=!0),T(i,s,o),W(i,s,o.state,function(i){return!c(i)}),o.profile&&c(o.profile)||I(i,s,o,!1,"a1"),o.contextDep=_,o.needsContext=F,o.needsFramebuffer=j,(F=o.shader.progVar).contextDep&&_||F.propDep)Ea(i,s,o,null);else if(F=F.append(i,s),s(i.shared.gl,".useProgram(",F,".program);"),o.shader.program)Ea(i,s,o,o.shader.program);else{s(i.shared.vao,".setVAO(null);");var N=i.global.def("{}"),j=s.def(F,".id"),Z=s.def(N,"[",j,"]");s(i.cond(Z).then(Z,".call(this,a0,a1);").else(Z,"=",N,"[",j,"]=",i.link(function(s){return xa(Ea,i,o,s,2)}),"(",F,");",Z,".call(this,a0,a1);"))}0<Object.keys(o.state).length&&s(i.shared.current,".dirty=true;"),i.shared.vao&&s(i.shared.vao,".setVAO(null);")}function ea(i,o){function d(s){var N=o.shader[s];N&&(isNaN(N=N.append(i,_))?_.set(F.shader,"."+s,N):_.set(F.shader,"."+s,i.link(N,{stable:!0})))}var _=i.proc("scope",3);i.batchId="a2";var F=i.shared,N=F.current;if(na(i,_,o.context),o.framebuffer&&o.framebuffer.append(i,_),yb(Object.keys(o.state)).forEach(function(s){var N=o.state[s],j=N.append(i,_);qa(j)?j.forEach(function(o,F){isNaN(o)?_.set(i.next[s],"["+F+"]",o):_.set(i.next[s],"["+F+"]",i.link(o,{stable:!0}))}):la(N)?_.set(F.next,"."+s,i.link(j,{stable:!0})):_.set(F.next,"."+s,j)}),I(i,_,o,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(s){var N=o.draw[s];N&&(isNaN(N=N.append(i,_))?_.set(F.draw,"."+s,N):_.set(F.draw,"."+s,i.link(N),{stable:!0}))}),Object.keys(o.uniforms).forEach(function(N){var j=o.uniforms[N].append(i,_);Array.isArray(j)&&(j="["+j.map(function(o){return isNaN(o)?o:i.link(o,{stable:!0})})+"]"),_.set(F.uniforms,"["+i.link(s.id(N),{stable:!0})+"]",j)}),Object.keys(o.attributes).forEach(function(s){var F=o.attributes[s].append(i,_),N=i.scopeAttrib(s);Object.keys(new eL).forEach(function(i){_.set(N,"."+i,F[i])})}),o.scopeVAO){var j=o.scopeVAO.append(i,_);isNaN(j)?_.set(F.vao,".targetVAO",j):_.set(F.vao,".targetVAO",i.link(j,{stable:!0}))}d("vert"),d("frag"),0<Object.keys(o.state).length&&(_(N,".dirty=true;"),_.exit(N,".dirty=true;")),_("a1(",i.shared.context,",a0,",i.batchId,");")}function fa(i){if("object"==typeof i&&!qa(i)){for(var s=Object.keys(i),_=0;_<s.length;++_)if(o.isDynamic(i[s[_]]))return!0;return!1}}function ka(i,s,_){function d(i,s){j.forEach(function(_){var N=F[_];o.isDynamic(N)&&(N=i.invoke(s,N),s(ee,".",_,"=",N,";"))})}var F=s.static[_];if(F&&fa(F)){var N=i.global,j=Object.keys(F),Z=!1,X=!1,$=!1,ee=i.global.def("{}");j.forEach(function(s){var _=F[s];if(o.isDynamic(_))"function"==typeof _&&(_=F[s]=o.unbox(_)),s=L(_,null),Z=Z||s.thisDep,$=$||s.propDep,X=X||s.contextDep;else{switch(N(ee,".",s,"="),typeof _){case"number":N(_);break;case"string":N('"',_,'"');break;case"object":Array.isArray(_)&&N("[",_.join(),"]");break;default:N(i.link(_))}N(";")}}),s.dynamic[_]=new o.DynamicVariable(4,{thisDep:Z,contextDep:X,propDep:$,ref:ee,append:d}),delete s.static[_]}}var eu,ef,ed,eh,ep,eg,em,ey,ev,ex,e_,ew,eL=et.Record,eP={add:32774,subtract:32778,"reverse subtract":32779};_.ext_blend_minmax&&(eP.min=32775,eP.max=32776);var eI=_.angle_instanced_arrays,eO=_.webgl_draw_buffers,eD=_.oes_vertex_array_object,eR={dirty:!0,profile:ec.profile},eB={},eF=[],ez={},eN={};y("dither",3024),y("blend.enable",3042),C("blend.color","blendColor",[0,0,0,0]),C("blend.equation","blendEquationSeparate",[32774,32774]),C("blend.func","blendFuncSeparate",[1,0,1,0]),y("depth.enable",2929,!0),C("depth.func","depthFunc",513),C("depth.range","depthRange",[0,1]),C("depth.mask","depthMask",!0),C("colorMask","colorMask",[!0,!0,!0,!0]),y("cull.enable",2884),C("cull.face","cullFace",1029),C("frontFace","frontFace",2305),C("lineWidth","lineWidth",1),y("polygonOffset.enable",32823),C("polygonOffset.offset","polygonOffset",[0,0]),y("sample.alpha",32926),y("sample.enable",32928),C("sample.coverage","sampleCoverage",[1,!1]),y("stencil.enable",2960),C("stencil.mask","stencilMask",-1),C("stencil.func","stencilFunc",[519,0,-1]),C("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),C("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),y("scissor.enable",3089),C("scissor.box","scissor",[0,0,i.drawingBufferWidth,i.drawingBufferHeight]),C("viewport","viewport",[0,0,i.drawingBufferWidth,i.drawingBufferHeight]);var ej={gl:i,context:eo,strings:s,next:eB,current:eR,draw:ei,elements:j,buffer:N,shader:en,attributes:et.state,vao:et,uniforms:ee,framebuffer:$,extensions:_,timer:es,isBufferArgs:Sa},eV={primTypes:er,compareFuncs:eS,blendFuncs:eA,blendEquations:eP,stencilOps:eM,glTypes:Z,orientationType:eC};eO&&(eV.backBuffer=[1029],eV.drawBuffer=S(F.maxDrawbuffers,function(i){return 0===i?[0]:S(i,function(i){return 36064+i})}));var eU=0;return{next:eB,current:eR,procs:(ed=(ef=w()).proc("poll"),eh=ef.proc("refresh"),ed(ep=ef.block()),eh(ep),eg=(ev=ef.shared).gl,em=ev.next,ep(ey=ev.current,".dirty=false;"),V(ef,ed),V(ef,eh,null,!0),eI&&(eu=ef.link(eI)),_.oes_vertex_array_object&&eh(ef.link(_.oes_vertex_array_object),".bindVertexArrayOES(null);"),ev=eh.def(ev.attributes),ex=eh.def(0),(e_=ef.cond(ex,".buffer")).then(eg,".enableVertexAttribArray(i);",eg,".bindBuffer(",34962,",",ex,".buffer.buffer);",eg,".vertexAttribPointer(i,",ex,".size,",ex,".type,",ex,".normalized,",ex,".stride,",ex,".offset);").else(eg,".disableVertexAttribArray(i);",eg,".vertexAttrib4f(i,",ex,".x,",ex,".y,",ex,".z,",ex,".w);",ex,".buffer=null;"),eh("for(var i=0;i<",ew=ef.link(F.maxAttributes,{stable:!0}),";++i){",ex,"=",ev,"[i];",e_,"}"),eI&&eh("for(var i=0;i<",ew,";++i){",eu,".vertexAttribDivisorANGLE(i,",ev,"[i].divisor);","}"),eh(ef.shared.vao,".currentVAO=null;",ef.shared.vao,".setVAO(",ef.shared.vao,".targetVAO);"),Object.keys(ez).forEach(function(i){var o=ez[i],s=ep.def(em,".",i),_=ef.block();_("if(",s,"){",eg,".enable(",o,")}else{",eg,".disable(",o,")}",ey,".",i,"=",s,";"),eh(_),ed("if(",s,"!==",ey,".",i,"){",_,"}")}),Object.keys(eN).forEach(function(i){var o,s,_=eN[i],F=eR[i],N=ef.block();N(eg,".",_,"("),qa(F)?(_=F.length,o=ef.global.def(em,".",i),s=ef.global.def(ey,".",i),N(S(_,function(i){return o+"["+i+"]"}),");",S(_,function(i){return s+"["+i+"]="+o+"["+i+"];"}).join("")),ed("if(",S(_,function(i){return o+"["+i+"]!=="+s+"["+i+"]"}).join("||"),"){",N,"}")):(o=ep.def(em,".",i),s=ep.def(ey,".",i),N(o,");",ey,".",i,"=",o,";"),ed("if(",o,"!==",s,"){",N,"}")),eh(N)}),ef.compile()),compile:function(i,o,s,_,F){var N=w();N.stats=N.link(F),Object.keys(o.static).forEach(function(i){ka(N,o,i)}),ek.forEach(function(o){ka(N,i,o)});var j=oa(i,o,s,_,N);return j.shader.program&&(j.shader.program.attributes.sort(function(i,o){return i.name<o.name?-1:1}),j.shader.program.uniforms.sort(function(i,o){return i.name<o.name?-1:1})),pa(N,j),ea(N,j),Qa(N,j),O(N.compile(),{destroy:function(){j.shader.program.destroy()}})}}}function Bb(i,o){for(var s=0;s<i.length;++s)if(i[s]===o)return s;return -1}var O=function(i,o){for(var s=Object.keys(o),_=0;_<s.length;++_)i[s[_]]=o[s[_]];return i},i=0,o={DynamicVariable:da,define:function(i,o){return new da(i,bb(o+""))},isDynamic:function(i){return"function"==typeof i&&!i._reglType||i instanceof da},unbox:cb,accessor:bb},s={next:"function"==typeof requestAnimationFrame?function(i){return requestAnimationFrame(i)}:function(i){return setTimeout(i,16)},cancel:"function"==typeof cancelAnimationFrame?function(i){return cancelAnimationFrame(i)}:clearTimeout},_="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},F=gb();F.zero=gb();var bc=function(i,o){var s=1;o.ext_texture_filter_anisotropic&&(s=i.getParameter(34047));var _=1,N=1;o.webgl_draw_buffers&&(_=i.getParameter(34852),N=i.getParameter(36063));var j=!!o.oes_texture_float;if(j){j=i.createTexture(),i.bindTexture(3553,j),i.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Z=i.createFramebuffer();if(i.bindFramebuffer(36160,Z),i.framebufferTexture2D(36160,36064,3553,j,0),i.bindTexture(3553,null),36053!==i.checkFramebufferStatus(36160))j=!1;else{i.viewport(0,0,1,1),i.clearColor(1,0,0,1),i.clear(16384);var X=F.allocType(5126,4);i.readPixels(0,0,1,1,6408,5126,X),i.getError()?j=!1:(i.deleteFramebuffer(Z),i.deleteTexture(j),j=1===X[0]),F.freeType(X)}}return X=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(X=i.createTexture(),Z=F.allocType(5121,36),i.activeTexture(33984),i.bindTexture(34067,X),i.texImage2D(34069,0,6408,3,3,0,6408,5121,Z),F.freeType(Z),i.bindTexture(34067,null),i.deleteTexture(X),X=!i.getError()),{colorBits:[i.getParameter(3410),i.getParameter(3411),i.getParameter(3412),i.getParameter(3413)],depthBits:i.getParameter(3414),stencilBits:i.getParameter(3415),subpixelBits:i.getParameter(3408),extensions:Object.keys(o).filter(function(i){return!!o[i]}),maxAnisotropic:s,maxDrawbuffers:_,maxColorAttachments:N,pointSizeDims:i.getParameter(33901),lineWidthDims:i.getParameter(33902),maxViewportDims:i.getParameter(3386),maxCombinedTextureUnits:i.getParameter(35661),maxCubeMapSize:i.getParameter(34076),maxRenderbufferSize:i.getParameter(34024),maxTextureUnits:i.getParameter(34930),maxTextureSize:i.getParameter(3379),maxAttributes:i.getParameter(34921),maxVertexUniforms:i.getParameter(36347),maxVertexTextureUnits:i.getParameter(35660),maxVaryingVectors:i.getParameter(36348),maxFragmentUniforms:i.getParameter(36349),glsl:i.getParameter(35724),renderer:i.getParameter(7937),vendor:i.getParameter(7936),version:i.getParameter(7938),readFloat:j,npotTextureCube:X}},P=function(i){return i instanceof Uint8Array||i instanceof Uint16Array||i instanceof Uint32Array||i instanceof Int8Array||i instanceof Int16Array||i instanceof Int32Array||i instanceof Float32Array||i instanceof Float64Array||i instanceof Uint8ClampedArray},T=function(i){return Object.keys(i).map(function(o){return i[o]})},N={shape:function(i){for(var o=[];i.length;i=i[0])o.push(i.length);return o},flatten:function(i,o,s,_){var N=1;if(o.length)for(var j=0;j<o.length;++j)N*=o[j];else N=0;switch(s=_||F.allocType(s,N),o.length){case 0:break;case 1:for(_=o[0],o=0;o<_;++o)s[o]=i[o];break;case 2:for(_=o[0],o=o[1],j=N=0;j<_;++j)for(var Z=i[j],X=0;X<o;++X)s[N++]=Z[X];break;case 3:hb(i,o[0],o[1],o[2],s,0);break;default:ib(i,o,0,s,0)}return s}},j={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Z={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},X={dynamic:35048,stream:35040,static:35044},$=N.flatten,ee=N.shape,et=[];et[5120]=1,et[5122]=2,et[5124]=4,et[5121]=1,et[5123]=2,et[5125]=4,et[5126]=4;var er={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},en=new Float32Array(1),ei=new Uint32Array(en.buffer),eo=[9984,9986,9985,9987],es=[0,6409,6410,6407,6408],el={};el[6409]=el[6406]=el[6402]=1,el[34041]=el[6410]=2,el[6407]=el[35904]=3,el[6408]=el[35906]=4;var ec=ra("HTMLCanvasElement"),eu=ra("OffscreenCanvas"),ef=ra("CanvasRenderingContext2D"),ed=ra("ImageBitmap"),eh=ra("HTMLImageElement"),ep=ra("HTMLVideoElement"),eg=Object.keys(j).concat([ec,eu,ef,ed,eh,ep]),em=[];em[5121]=1,em[5126]=4,em[36193]=2,em[5123]=2,em[5125]=4;var ey=[];ey[32854]=2,ey[32855]=2,ey[36194]=2,ey[34041]=4,ey[33776]=.5,ey[33777]=.5,ey[33778]=1,ey[33779]=1,ey[35986]=.5,ey[35987]=1,ey[34798]=1,ey[35840]=.5,ey[35841]=.25,ey[35842]=.5,ey[35843]=.25,ey[36196]=.5;var ev=[];ev[32854]=2,ev[32855]=2,ev[36194]=2,ev[33189]=2,ev[36168]=1,ev[34041]=4,ev[35907]=4,ev[34836]=16,ev[34842]=8,ev[34843]=6;var cc=function(i,o,s,_,F){function e(i){this.id=Z++,this.refCount=1,this.renderbuffer=i,this.format=32854,this.height=this.width=0,F.profile&&(this.stats={size:0})}function m(o){var s=o.renderbuffer;i.bindRenderbuffer(36161,null),i.deleteRenderbuffer(s),o.renderbuffer=null,o.refCount=0,delete X[o.id],_.renderbufferCount--}var N={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};o.ext_srgb&&(N.srgba=35907),o.ext_color_buffer_half_float&&(N.rgba16f=34842,N.rgb16f=34843),o.webgl_color_buffer_float&&(N.rgba32f=34836);var j=[];Object.keys(N).forEach(function(i){j[N[i]]=i});var Z=0,X={};return e.prototype.decRef=function(){0>=--this.refCount&&m(this)},F.profile&&(_.getTotalRenderbufferSize=function(){var i=0;return Object.keys(X).forEach(function(o){i+=X[o].stats.size}),i}),{create:function(o,s){function g(o,s){var _=0,X=0,$=32854;if("object"==typeof o&&o?("shape"in o?(_=0|(X=o.shape)[0],X=0|X[1]):("radius"in o&&(_=X=0|o.radius),"width"in o&&(_=0|o.width),"height"in o&&(X=0|o.height)),"format"in o&&($=N[o.format])):"number"==typeof o?(_=0|o,X="number"==typeof s?0|s:_):o||(_=X=1),_!==Z.width||X!==Z.height||$!==Z.format)return g.width=Z.width=_,g.height=Z.height=X,Z.format=$,i.bindRenderbuffer(36161,Z.renderbuffer),i.renderbufferStorage(36161,$,_,X),F.profile&&(Z.stats.size=ev[Z.format]*Z.width*Z.height),g.format=j[Z.format],g}var Z=new e(i.createRenderbuffer());return X[Z.id]=Z,_.renderbufferCount++,g(o,s),g.resize=function(o,s){var _=0|o,N=0|s||_;return _===Z.width&&N===Z.height||(g.width=Z.width=_,g.height=Z.height=N,i.bindRenderbuffer(36161,Z.renderbuffer),i.renderbufferStorage(36161,Z.format,_,N),F.profile&&(Z.stats.size=ev[Z.format]*Z.width*Z.height)),g},g._reglType="renderbuffer",g._renderbuffer=Z,F.profile&&(g.stats=Z.stats),g.destroy=function(){Z.decRef()},g},clear:function(){T(X).forEach(m)},restore:function(){T(X).forEach(function(o){o.renderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,o.renderbuffer),i.renderbufferStorage(36161,o.format,o.width,o.height)}),i.bindRenderbuffer(36161,null)}}},ex=[];ex[6408]=4,ex[6407]=3;var e_=[];e_[5121]=1,e_[5126]=4,e_[36193]=2;var ew=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],eT=["x","y","z","w"],ek="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),eA={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},eS={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},eM={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},eC={cw:2304,ccw:2305},eE=new K(!1,!1,!1,function(){}),dc=function(i,o){function c(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function d(i,o,s){var _=F.pop()||new c;_.startQueryIndex=i,_.endQueryIndex=o,_.sum=0,_.stats=s,N.push(_)}if(!o.ext_disjoint_timer_query)return null;var s=[],_=[],F=[],N=[],j=[],Z=[];return{beginQuery:function(i){var F=s.pop()||o.ext_disjoint_timer_query.createQueryEXT();o.ext_disjoint_timer_query.beginQueryEXT(35007,F),_.push(F),d(_.length-1,_.length,i)},endQuery:function(){o.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:d,update:function(){var i,X;if(0!==(i=_.length)){Z.length=Math.max(Z.length,i+1),j.length=Math.max(j.length,i+1),j[0]=0;var $=Z[0]=0;for(X=i=0;X<_.length;++X){var ee=_[X];o.ext_disjoint_timer_query.getQueryObjectEXT(ee,34919)?($+=o.ext_disjoint_timer_query.getQueryObjectEXT(ee,34918),s.push(ee)):_[i++]=ee,j[X+1]=$,Z[X+1]=i}for(_.length=i,X=i=0;X<N.length;++X){var $=N[X],et=$.startQueryIndex,ee=$.endQueryIndex;$.sum+=j[ee]-j[et],et=Z[et],(ee=Z[ee])===et?($.stats.gpuTime+=$.sum/1e6,F.push($)):($.startQueryIndex=et,$.endQueryIndex=ee,N[i++]=$)}N.length=i}},getNumPendingQueries:function(){return _.length},clear:function(){s.push.apply(s,_);for(var i=0;i<s.length;i++)o.ext_disjoint_timer_query.deleteQueryEXT(s[i]);_.length=0,s.length=0},restore:function(){_.length=0,s.length=0}}};return function(i){function b(){if(0===ev.length)et&&et.update(),eT=null;else{eT=s.next(b),k();for(var i=ev.length-1;0<=i;--i){var o=ev[i];o&&o(eo,null,0)}F.flush(),et&&et.update()}}function c(){!eT&&0<ev.length&&(eT=s.next(b))}function d(){eT&&(s.cancel(b),eT=null)}function f(i){i.preventDefault(),d(),ex.forEach(function(i){i()})}function e(i){F.getError(),j.restore(),ef.restore(),el.restore(),ed.restore(),eh.restore(),ep.restore(),eu.restore(),et&&et.restore(),eg.procs.refresh(),c(),e_.forEach(function(i){i()})}function m(i){function b(i,s){var _={},F={};return Object.keys(i).forEach(function(N){var j=i[N];if(o.isDynamic(j))F[N]=o.unbox(j,N);else{if(s&&Array.isArray(j)){for(var Z=0;Z<j.length;++Z)if(o.isDynamic(j[Z])){F[N]=o.unbox(j,N);return}}_[N]=j}}),{dynamic:F,static:_}}function c(i){for(;ee.length<i;)ee.push(null);return ee}var s=b(i.context||{},!0),_=b(i.uniforms||{},!0),F=b(i.attributes||{},!1);i=b(function(i){function b(i){if(i in o){var s=o[i];delete o[i],Object.keys(s).forEach(function(_){o[i+"."+_]=s[_]})}}var o=O({},i);return delete o.uniforms,delete o.attributes,delete o.context,delete o.vao,"stencil"in o&&o.stencil.op&&(o.stencil.opBack=o.stencil.opFront=o.stencil.op,delete o.stencil.op),b("blend"),b("depth"),b("cull"),b("stencil"),b("polygonOffset"),b("scissor"),b("sample"),"vao"in i&&(o.vao=i.vao),o}(i),!1);var N={gpuTime:0,cpuTime:0,count:0},j=eg.compile(i,F,_,s,N),Z=j.draw,X=j.batch,$=j.scope,ee=[];return O(function(i,o){var s;if("function"==typeof i)return $.call(this,null,i,0);if("function"==typeof o){if("number"==typeof i)for(s=0;s<i;++s)$.call(this,null,o,s);else if(!Array.isArray(i))return $.call(this,i,o,0);else for(s=0;s<i.length;++s)$.call(this,i[s],o,s)}else if("number"==typeof i){if(0<i)return X.call(this,c(0|i),0|i)}else if(!Array.isArray(i))return Z.call(this,i);else if(i.length)return X.call(this,i,i.length)},{stats:N,destroy:function(){j.destroy()}})}function q(i,o){var s=0;eg.procs.poll();var _=o.color;_&&(F.clearColor(+_[0]||0,+_[1]||0,+_[2]||0,+_[3]||0),s|=16384),"depth"in o&&(F.clearDepth(+o.depth),s|=256),"stencil"in o&&(F.clearStencil(0|o.stencil),s|=1024),F.clear(s)}function u(i){return ev.push(i),c(),{cancel:function(){function b(){var i=Bb(ev,b);ev[i]=ev[ev.length-1],--ev.length,0>=ev.length&&d()}var o=Bb(ev,i);ev[o]=b}}}function r(){var i=em.viewport,o=em.scissor_box;i[0]=i[1]=o[0]=o[1]=0,eo.viewportWidth=eo.framebufferWidth=eo.drawingBufferWidth=i[2]=o[2]=F.drawingBufferWidth,eo.viewportHeight=eo.framebufferHeight=eo.drawingBufferHeight=i[3]=o[3]=F.drawingBufferHeight}function k(){eo.tick+=1,eo.time=t(),r(),eg.procs.poll()}function n(){ed.refresh(),r(),eg.procs.refresh(),et&&et.update()}function t(){return(_()-er)/1e3}if(!(i=Hb(i)))return null;var F=i.gl,N=F.getContextAttributes();F.isContextLost();var j=Ib(F,i);if(!j)return null;var Z=Eb(),X={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},$=i.cachedCode||{},ee=j.extensions,et=dc(F,ee),er=_(),en=F.drawingBufferWidth,ei=F.drawingBufferHeight,eo={tick:0,time:0,viewportWidth:en,viewportHeight:ei,framebufferWidth:en,framebufferHeight:ei,drawingBufferWidth:en,drawingBufferHeight:ei,pixelRatio:i.pixelRatio},en={elements:null,primitive:4,count:-1,offset:0,instances:-1},es=bc(F,ee),el=Jb(F,X,i,function(i){return eu.destroyBuffer(i)}),ec=Kb(F,ee,el,X),eu=Rb(F,ee,es,X,el,ec,en),ef=Sb(F,Z,X,i),ed=Nb(F,ee,es,function(){eg.procs.poll()},eo,X,i),eh=cc(F,ee,es,X,i),ep=Qb(F,ee,es,ed,eh,X),eg=Zb(F,Z,ee,es,el,ec,ed,ep,{},eu,ef,en,eo,et,$,i),Z=Tb(F,ep,eg.procs.poll,eo,N,ee,es),em=eg.next,ey=F.canvas,ev=[],ex=[],e_=[],ew=[i.onDestroy],eT=null;ey&&(ey.addEventListener("webglcontextlost",f,!1),ey.addEventListener("webglcontextrestored",e,!1));var ek=ep.setFBO=m({framebuffer:o.define.call(null,1,"framebuffer")});return n(),N=O(m,{clear:function(i){if("framebuffer"in i){if(i.framebuffer&&"framebufferCube"===i.framebuffer_reglType)for(var o=0;6>o;++o)ek(O({framebuffer:i.framebuffer.faces[o]},i),q);else ek(i,q)}else q(null,i)},prop:o.define.bind(null,1),context:o.define.bind(null,2),this:o.define.bind(null,3),draw:m({}),buffer:function(i){return el.create(i,34962,!1,!1)},elements:function(i){return ec.create(i,!1)},texture:ed.create2D,cube:ed.createCube,renderbuffer:eh.create,framebuffer:ep.create,framebufferCube:ep.createCube,vao:eu.createVAO,attributes:N,frame:u,on:function(i,o){var s;switch(i){case"frame":return u(o);case"lost":s=ex;break;case"restore":s=e_;break;case"destroy":s=ew}return s.push(o),{cancel:function(){for(var i=0;i<s.length;++i)if(s[i]===o){s[i]=s[s.length-1],s.pop();break}}}},limits:es,hasExtension:function(i){return 0<=es.extensions.indexOf(i.toLowerCase())},read:Z,destroy:function(){ev.length=0,d(),ey&&(ey.removeEventListener("webglcontextlost",f),ey.removeEventListener("webglcontextrestored",e)),ef.clear(),ep.clear(),eh.clear(),eu.clear(),ed.clear(),ec.clear(),el.clear(),et&&et.clear(),ew.forEach(function(i){i()})},_gl:F,_refresh:n,poll:function(){k(),et&&et.update()},now:t,stats:X,getCachedCode:function(){return $},preloadCachedCode:function(i){Object.entries(i).forEach(function(i){$[i[0]]=i[1]})}}),i.onDone(null,N),N}}()},71665:function(i,o,s){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var _=s(12856),F=_.Buffer;function copyProps(i,o){for(var s in i)o[s]=i[s]}function SafeBuffer(i,o,s){return F(i,o,s)}F.from&&F.alloc&&F.allocUnsafe&&F.allocUnsafeSlow?i.exports=_:(copyProps(_,o),o.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(F.prototype),copyProps(F,SafeBuffer),SafeBuffer.from=function(i,o,s){if("number"==typeof i)throw TypeError("Argument must not be a number");return F(i,o,s)},SafeBuffer.alloc=function(i,o,s){if("number"!=typeof i)throw TypeError("Argument must be a number");var _=F(i);return void 0!==o?"string"==typeof s?_.fill(o,s):_.fill(o):_.fill(0),_},SafeBuffer.allocUnsafe=function(i){if("number"!=typeof i)throw TypeError("Argument must be a number");return F(i)},SafeBuffer.allocUnsafeSlow=function(i){if("number"!=typeof i)throw TypeError("Argument must be a number");return _.SlowBuffer(i)}},21630:function(i,o,s){i.exports=Stream;var _=s(15398).EventEmitter;function Stream(){_.call(this)}s(42018)(Stream,_),Stream.Readable=s(40410),Stream.Writable=s(37493),Stream.Duplex=s(37865),Stream.Transform=s(74308),Stream.PassThrough=s(66897),Stream.finished=s(12726),Stream.pipeline=s(10168),Stream.Stream=Stream,Stream.prototype.pipe=function(i,o){var s=this;function ondata(o){i.writable&&!1===i.write(o)&&s.pause&&s.pause()}function ondrain(){s.readable&&s.resume&&s.resume()}s.on("data",ondata),i.on("drain",ondrain),i._isStdio||o&&!1===o.end||(s.on("end",onend),s.on("close",onclose));var F=!1;function onend(){F||(F=!0,i.end())}function onclose(){F||(F=!0,"function"==typeof i.destroy&&i.destroy())}function onerror(i){if(cleanup(),0===_.listenerCount(this,"error"))throw i}function cleanup(){s.removeListener("data",ondata),i.removeListener("drain",ondrain),s.removeListener("end",onend),s.removeListener("close",onclose),s.removeListener("error",onerror),i.removeListener("error",onerror),s.removeListener("end",cleanup),s.removeListener("close",cleanup),i.removeListener("close",cleanup)}return s.on("error",onerror),i.on("error",onerror),s.on("end",cleanup),s.on("close",cleanup),i.on("close",cleanup),i.emit("pipe",s),i}},74322:function(i){"use strict";function _inheritsLoose(i,o){i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.__proto__=o}var o={};function createErrorType(i,s,_){function getMessage(i,o,_){return"string"==typeof s?s:s(i,o,_)}_||(_=Error);var F=function(i){function NodeError(o,s,_){return i.call(this,getMessage(o,s,_))||this}return _inheritsLoose(NodeError,i),NodeError}(_);F.prototype.name=_.name,F.prototype.code=i,o[i]=F}function oneOf(i,o){if(!Array.isArray(i))return"of ".concat(o," ").concat(String(i));var s=i.length;return(i=i.map(function(i){return String(i)}),s>2)?"one of ".concat(o," ").concat(i.slice(0,s-1).join(", "),", or ")+i[s-1]:2===s?"one of ".concat(o," ").concat(i[0]," or ").concat(i[1]):"of ".concat(o," ").concat(i[0])}function startsWith(i,o,s){return i.substr(!s||s<0?0:+s,o.length)===o}function endsWith(i,o,s){return(void 0===s||s>i.length)&&(s=i.length),i.substring(s-o.length,s)===o}function includes(i,o,s){return"number"!=typeof s&&(s=0),!(s+o.length>i.length)&&-1!==i.indexOf(o,s)}createErrorType("ERR_INVALID_OPT_VALUE",function(i,o){return'The value "'+o+'" is invalid for option "'+i+'"'},TypeError),createErrorType("ERR_INVALID_ARG_TYPE",function(i,o,s){if("string"==typeof o&&startsWith(o,"not ")?(_="must not be",o=o.replace(/^not /,"")):_="must be",endsWith(i," argument"))F="The ".concat(i," ").concat(_," ").concat(oneOf(o,"type"));else{var _,F,N=includes(i,".")?"property":"argument";F='The "'.concat(i,'" ').concat(N," ").concat(_," ").concat(oneOf(o,"type"))}return F+". Received type ".concat(typeof s)},TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(i){return"The "+i+" method is not implemented"}),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",function(i){return"Cannot call "+i+" after a stream was destroyed"}),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",function(i){return"Unknown encoding: "+i},TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.q=o},37865:function(i,o,s){"use strict";var _=s(90386),F=Object.keys||function(i){var o=[];for(var s in i)o.push(s);return o};i.exports=Duplex;var N=s(40410),j=s(37493);s(42018)(Duplex,N);for(var Z=F(j.prototype),X=0;X<Z.length;X++){var $=Z[X];Duplex.prototype[$]||(Duplex.prototype[$]=j.prototype[$])}function Duplex(i){if(!(this instanceof Duplex))return new Duplex(i);N.call(this,i),j.call(this,i),this.allowHalfOpen=!0,i&&(!1===i.readable&&(this.readable=!1),!1===i.writable&&(this.writable=!1),!1===i.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||_.nextTick(onEndNT,this)}function onEndNT(i){i.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(i){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=i,this._writableState.destroyed=i)}})},66897:function(i,o,s){"use strict";i.exports=PassThrough;var _=s(74308);function PassThrough(i){if(!(this instanceof PassThrough))return new PassThrough(i);_.call(this,i)}s(42018)(PassThrough,_),PassThrough.prototype._transform=function(i,o,s){s(null,i)}},40410:function(i,o,s){"use strict";var _,F,N,j,Z,X=s(90386);i.exports=Readable,Readable.ReadableState=ReadableState,s(15398).EventEmitter;var EElistenerCount=function(i,o){return i.listeners(o).length},$=s(71405),ee=s(12856).Buffer,et=s.g.Uint8Array||function(){};function _uint8ArrayToBuffer(i){return ee.from(i)}function _isUint8Array(i){return ee.isBuffer(i)||i instanceof et}var er=s(40964);F=er&&er.debuglog?er.debuglog("stream"):function(){};var en=s(31125),ei=s(65756),eo=s(56306).getHighWaterMark,es=s(74322).q,el=es.ERR_INVALID_ARG_TYPE,ec=es.ERR_STREAM_PUSH_AFTER_EOF,eu=es.ERR_METHOD_NOT_IMPLEMENTED,ef=es.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;s(42018)(Readable,$);var ed=ei.errorOrDestroy,eh=["error","close","destroy","pause","resume"];function prependListener(i,o,s){if("function"==typeof i.prependListener)return i.prependListener(o,s);i._events&&i._events[o]?Array.isArray(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]:i.on(o,s)}function ReadableState(i,o,F){_=_||s(37865),i=i||{},"boolean"!=typeof F&&(F=o instanceof _),this.objectMode=!!i.objectMode,F&&(this.objectMode=this.objectMode||!!i.readableObjectMode),this.highWaterMark=eo(this,i,"readableHighWaterMark",F),this.buffer=new en,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==i.emitClose,this.autoDestroy=!!i.autoDestroy,this.destroyed=!1,this.defaultEncoding=i.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,i.encoding&&(N||(N=s(68019).s),this.decoder=new N(i.encoding),this.encoding=i.encoding)}function Readable(i){if(_=_||s(37865),!(this instanceof Readable))return new Readable(i);var o=this instanceof _;this._readableState=new ReadableState(i,this,o),this.readable=!0,i&&("function"==typeof i.read&&(this._read=i.read),"function"==typeof i.destroy&&(this._destroy=i.destroy)),$.call(this)}function readableAddChunk(i,o,s,_,N){F("readableAddChunk",o);var j,Z=i._readableState;if(null===o)Z.reading=!1,onEofChunk(i,Z);else if(N||(j=chunkInvalid(Z,o)),j)ed(i,j);else if(Z.objectMode||o&&o.length>0){if("string"==typeof o||Z.objectMode||Object.getPrototypeOf(o)===ee.prototype||(o=_uint8ArrayToBuffer(o)),_)Z.endEmitted?ed(i,new ef):addChunk(i,Z,o,!0);else if(Z.ended)ed(i,new ec);else{if(Z.destroyed)return!1;Z.reading=!1,Z.decoder&&!s?(o=Z.decoder.write(o),Z.objectMode||0!==o.length?addChunk(i,Z,o,!1):maybeReadMore(i,Z)):addChunk(i,Z,o,!1)}}else _||(Z.reading=!1,maybeReadMore(i,Z));return!Z.ended&&(Z.length<Z.highWaterMark||0===Z.length)}function addChunk(i,o,s,_){o.flowing&&0===o.length&&!o.sync?(o.awaitDrain=0,i.emit("data",s)):(o.length+=o.objectMode?1:s.length,_?o.buffer.unshift(s):o.buffer.push(s),o.needReadable&&emitReadable(i)),maybeReadMore(i,o)}function chunkInvalid(i,o){var s;return _isUint8Array(o)||"string"==typeof o||void 0===o||i.objectMode||(s=new el("chunk",["string","Buffer","Uint8Array"],o)),s}function computeNewHighWaterMark(i){return i>=1073741824?i=1073741824:(i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++),i}function howMuchToRead(i,o){return i<=0||0===o.length&&o.ended?0:o.objectMode?1:i!=i?o.flowing&&o.length?o.buffer.head.data.length:o.length:(i>o.highWaterMark&&(o.highWaterMark=computeNewHighWaterMark(i)),i<=o.length)?i:o.ended?o.length:(o.needReadable=!0,0)}function onEofChunk(i,o){if(F("onEofChunk"),!o.ended){if(o.decoder){var s=o.decoder.end();s&&s.length&&(o.buffer.push(s),o.length+=o.objectMode?1:s.length)}o.ended=!0,o.sync?emitReadable(i):(o.needReadable=!1,o.emittedReadable||(o.emittedReadable=!0,emitReadable_(i)))}}function emitReadable(i){var o=i._readableState;F("emitReadable",o.needReadable,o.emittedReadable),o.needReadable=!1,o.emittedReadable||(F("emitReadable",o.flowing),o.emittedReadable=!0,X.nextTick(emitReadable_,i))}function emitReadable_(i){var o=i._readableState;F("emitReadable_",o.destroyed,o.length,o.ended),!o.destroyed&&(o.length||o.ended)&&(i.emit("readable"),o.emittedReadable=!1),o.needReadable=!o.flowing&&!o.ended&&o.length<=o.highWaterMark,flow(i)}function maybeReadMore(i,o){o.readingMore||(o.readingMore=!0,X.nextTick(maybeReadMore_,i,o))}function maybeReadMore_(i,o){for(;!o.reading&&!o.ended&&(o.length<o.highWaterMark||o.flowing&&0===o.length);){var s=o.length;if(F("maybeReadMore read 0"),i.read(0),s===o.length)break}o.readingMore=!1}function pipeOnDrain(i){return function(){var o=i._readableState;F("pipeOnDrain",o.awaitDrain),o.awaitDrain&&o.awaitDrain--,0===o.awaitDrain&&EElistenerCount(i,"data")&&(o.flowing=!0,flow(i))}}function updateReadableListening(i){var o=i._readableState;o.readableListening=i.listenerCount("readable")>0,o.resumeScheduled&&!o.paused?o.flowing=!0:i.listenerCount("data")>0&&i.resume()}function nReadingNextTick(i){F("readable nexttick read 0"),i.read(0)}function resume(i,o){o.resumeScheduled||(o.resumeScheduled=!0,X.nextTick(resume_,i,o))}function resume_(i,o){F("resume",o.reading),o.reading||i.read(0),o.resumeScheduled=!1,i.emit("resume"),flow(i),o.flowing&&!o.reading&&i.read(0)}function flow(i){var o=i._readableState;for(F("flow",o.flowing);o.flowing&&null!==i.read(););}function fromList(i,o){var s;return 0===o.length?null:(o.objectMode?s=o.buffer.shift():!i||i>=o.length?(s=o.decoder?o.buffer.join(""):1===o.buffer.length?o.buffer.first():o.buffer.concat(o.length),o.buffer.clear()):s=o.buffer.consume(i,o.decoder),s)}function endReadable(i){var o=i._readableState;F("endReadable",o.endEmitted),o.endEmitted||(o.ended=!0,X.nextTick(endReadableNT,o,i))}function endReadableNT(i,o){if(F("endReadableNT",i.endEmitted,i.length),!i.endEmitted&&0===i.length&&(i.endEmitted=!0,o.readable=!1,o.emit("end"),i.autoDestroy)){var s=o._writableState;(!s||s.autoDestroy&&s.finished)&&o.destroy()}}function indexOf(i,o){for(var s=0,_=i.length;s<_;s++)if(i[s]===o)return s;return -1}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(i){this._readableState&&(this._readableState.destroyed=i)}}),Readable.prototype.destroy=ei.destroy,Readable.prototype._undestroy=ei.undestroy,Readable.prototype._destroy=function(i,o){o(i)},Readable.prototype.push=function(i,o){var s,_=this._readableState;return _.objectMode?s=!0:"string"==typeof i&&((o=o||_.defaultEncoding)!==_.encoding&&(i=ee.from(i,o),o=""),s=!0),readableAddChunk(this,i,o,!1,s)},Readable.prototype.unshift=function(i){return readableAddChunk(this,i,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(i){N||(N=s(68019).s);var o=new N(i);this._readableState.decoder=o,this._readableState.encoding=this._readableState.decoder.encoding;for(var _=this._readableState.buffer.head,F="";null!==_;)F+=o.write(_.data),_=_.next;return this._readableState.buffer.clear(),""!==F&&this._readableState.buffer.push(F),this._readableState.length=F.length,this},Readable.prototype.read=function(i){F("read",i),i=parseInt(i,10);var o,s=this._readableState,_=i;if(0!==i&&(s.emittedReadable=!1),0===i&&s.needReadable&&((0!==s.highWaterMark?s.length>=s.highWaterMark:s.length>0)||s.ended))return F("read: emitReadable",s.length,s.ended),0===s.length&&s.ended?endReadable(this):emitReadable(this),null;if(0===(i=howMuchToRead(i,s))&&s.ended)return 0===s.length&&endReadable(this),null;var N=s.needReadable;return F("need readable",N),(0===s.length||s.length-i<s.highWaterMark)&&F("length less than watermark",N=!0),s.ended||s.reading?F("reading or ended",N=!1):N&&(F("do read"),s.reading=!0,s.sync=!0,0===s.length&&(s.needReadable=!0),this._read(s.highWaterMark),s.sync=!1,s.reading||(i=howMuchToRead(_,s))),null===(o=i>0?fromList(i,s):null)?(s.needReadable=s.length<=s.highWaterMark,i=0):(s.length-=i,s.awaitDrain=0),0===s.length&&(s.ended||(s.needReadable=!0),_!==i&&s.ended&&endReadable(this)),null!==o&&this.emit("data",o),o},Readable.prototype._read=function(i){ed(this,new eu("_read()"))},Readable.prototype.pipe=function(i,o){var s=this,_=this._readableState;switch(_.pipesCount){case 0:_.pipes=i;break;case 1:_.pipes=[_.pipes,i];break;default:_.pipes.push(i)}_.pipesCount+=1,F("pipe count=%d opts=%j",_.pipesCount,o);var N=o&&!1===o.end||i===X.stdout||i===X.stderr?unpipe:onend;function onunpipe(i,o){F("onunpipe"),i===s&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,cleanup())}function onend(){F("onend"),i.end()}_.endEmitted?X.nextTick(N):s.once("end",N),i.on("unpipe",onunpipe);var j=pipeOnDrain(s);i.on("drain",j);var Z=!1;function cleanup(){F("cleanup"),i.removeListener("close",onclose),i.removeListener("finish",onfinish),i.removeListener("drain",j),i.removeListener("error",onerror),i.removeListener("unpipe",onunpipe),s.removeListener("end",onend),s.removeListener("end",unpipe),s.removeListener("data",ondata),Z=!0,_.awaitDrain&&(!i._writableState||i._writableState.needDrain)&&j()}function ondata(o){F("ondata");var N=i.write(o);F("dest.write",N),!1===N&&((1===_.pipesCount&&_.pipes===i||_.pipesCount>1&&-1!==indexOf(_.pipes,i))&&!Z&&(F("false write response, pause",_.awaitDrain),_.awaitDrain++),s.pause())}function onerror(o){F("onerror",o),unpipe(),i.removeListener("error",onerror),0===EElistenerCount(i,"error")&&ed(i,o)}function onclose(){i.removeListener("finish",onfinish),unpipe()}function onfinish(){F("onfinish"),i.removeListener("close",onclose),unpipe()}function unpipe(){F("unpipe"),s.unpipe(i)}return s.on("data",ondata),prependListener(i,"error",onerror),i.once("close",onclose),i.once("finish",onfinish),i.emit("pipe",s),_.flowing||(F("pipe resume"),s.resume()),i},Readable.prototype.unpipe=function(i){var o=this._readableState,s={hasUnpiped:!1};if(0===o.pipesCount)return this;if(1===o.pipesCount)return i&&i!==o.pipes||(i||(i=o.pipes),o.pipes=null,o.pipesCount=0,o.flowing=!1,i&&i.emit("unpipe",this,s)),this;if(!i){var _=o.pipes,F=o.pipesCount;o.pipes=null,o.pipesCount=0,o.flowing=!1;for(var N=0;N<F;N++)_[N].emit("unpipe",this,{hasUnpiped:!1});return this}var j=indexOf(o.pipes,i);return -1===j||(o.pipes.splice(j,1),o.pipesCount-=1,1===o.pipesCount&&(o.pipes=o.pipes[0]),i.emit("unpipe",this,s)),this},Readable.prototype.on=function(i,o){var s=$.prototype.on.call(this,i,o),_=this._readableState;return"data"===i?(_.readableListening=this.listenerCount("readable")>0,!1!==_.flowing&&this.resume()):"readable"!==i||_.endEmitted||_.readableListening||(_.readableListening=_.needReadable=!0,_.flowing=!1,_.emittedReadable=!1,F("on readable",_.length,_.reading),_.length?emitReadable(this):_.reading||X.nextTick(nReadingNextTick,this)),s},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(i,o){var s=$.prototype.removeListener.call(this,i,o);return"readable"===i&&X.nextTick(updateReadableListening,this),s},Readable.prototype.removeAllListeners=function(i){var o=$.prototype.removeAllListeners.apply(this,arguments);return("readable"===i||void 0===i)&&X.nextTick(updateReadableListening,this),o},Readable.prototype.resume=function(){var i=this._readableState;return i.flowing||(F("resume"),i.flowing=!i.readableListening,resume(this,i)),i.paused=!1,this},Readable.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(i){var o=this,s=this._readableState,_=!1;for(var N in i.on("end",function(){if(F("wrapped end"),s.decoder&&!s.ended){var i=s.decoder.end();i&&i.length&&o.push(i)}o.push(null)}),i.on("data",function(N){F("wrapped data"),s.decoder&&(N=s.decoder.write(N)),(!s.objectMode||null!=N)&&(s.objectMode||N&&N.length)&&(o.push(N)||(_=!0,i.pause()))}),i)void 0===this[N]&&"function"==typeof i[N]&&(this[N]=function(o){return function(){return i[o].apply(i,arguments)}}(N));for(var j=0;j<eh.length;j++)i.on(eh[j],this.emit.bind(this,eh[j]));return this._read=function(o){F("wrapped _read",o),_&&(_=!1,i.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===j&&(j=s(68221)),j(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(i){this._readableState&&(this._readableState.flowing=i)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(i,o){return void 0===Z&&(Z=s(31748)),Z(Readable,i,o)})},74308:function(i,o,s){"use strict";i.exports=Transform;var _=s(74322).q,F=_.ERR_METHOD_NOT_IMPLEMENTED,N=_.ERR_MULTIPLE_CALLBACK,j=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,Z=_.ERR_TRANSFORM_WITH_LENGTH_0,X=s(37865);function afterTransform(i,o){var s=this._transformState;s.transforming=!1;var _=s.writecb;if(null===_)return this.emit("error",new N);s.writechunk=null,s.writecb=null,null!=o&&this.push(o),_(i);var F=this._readableState;F.reading=!1,(F.needReadable||F.length<F.highWaterMark)&&this._read(F.highWaterMark)}function Transform(i){if(!(this instanceof Transform))return new Transform(i);X.call(this,i),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,i&&("function"==typeof i.transform&&(this._transform=i.transform),"function"==typeof i.flush&&(this._flush=i.flush)),this.on("prefinish",prefinish)}function prefinish(){var i=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush(function(o,s){done(i,o,s)})}function done(i,o,s){if(o)return i.emit("error",o);if(null!=s&&i.push(s),i._writableState.length)throw new Z;if(i._transformState.transforming)throw new j;return i.push(null)}s(42018)(Transform,X),Transform.prototype.push=function(i,o){return this._transformState.needTransform=!1,X.prototype.push.call(this,i,o)},Transform.prototype._transform=function(i,o,s){s(new F("_transform()"))},Transform.prototype._write=function(i,o,s){var _=this._transformState;if(_.writecb=s,_.writechunk=i,_.writeencoding=o,!_.transforming){var F=this._readableState;(_.needTransform||F.needReadable||F.length<F.highWaterMark)&&this._read(F.highWaterMark)}},Transform.prototype._read=function(i){var o=this._transformState;null===o.writechunk||o.transforming?o.needTransform=!0:(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform))},Transform.prototype._destroy=function(i,o){X.prototype._destroy.call(this,i,function(i){o(i)})}},37493:function(i,o,s){"use strict";var _,F,N=s(90386);function CorkedRequest(i){var o=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(o,i)}}i.exports=Writable,Writable.WritableState=WritableState;var j={deprecate:s(20588)},Z=s(71405),X=s(12856).Buffer,$=s.g.Uint8Array||function(){};function _uint8ArrayToBuffer(i){return X.from(i)}function _isUint8Array(i){return X.isBuffer(i)||i instanceof $}var ee=s(65756),et=s(56306).getHighWaterMark,er=s(74322).q,en=er.ERR_INVALID_ARG_TYPE,ei=er.ERR_METHOD_NOT_IMPLEMENTED,eo=er.ERR_MULTIPLE_CALLBACK,es=er.ERR_STREAM_CANNOT_PIPE,el=er.ERR_STREAM_DESTROYED,ec=er.ERR_STREAM_NULL_VALUES,eu=er.ERR_STREAM_WRITE_AFTER_END,ef=er.ERR_UNKNOWN_ENCODING,ed=ee.errorOrDestroy;function nop(){}function WritableState(i,o,F){_=_||s(37865),i=i||{},"boolean"!=typeof F&&(F=o instanceof _),this.objectMode=!!i.objectMode,F&&(this.objectMode=this.objectMode||!!i.writableObjectMode),this.highWaterMark=et(this,i,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var N=!1===i.decodeStrings;this.decodeStrings=!N,this.defaultEncoding=i.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){onwrite(o,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==i.emitClose,this.autoDestroy=!!i.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(i){var o=this instanceof(_=_||s(37865));if(!o&&!F.call(Writable,this))return new Writable(i);this._writableState=new WritableState(i,this,o),this.writable=!0,i&&("function"==typeof i.write&&(this._write=i.write),"function"==typeof i.writev&&(this._writev=i.writev),"function"==typeof i.destroy&&(this._destroy=i.destroy),"function"==typeof i.final&&(this._final=i.final)),Z.call(this)}function writeAfterEnd(i,o){var s=new eu;ed(i,s),N.nextTick(o,s)}function validChunk(i,o,s,_){var F;return null===s?F=new ec:"string"==typeof s||o.objectMode||(F=new en("chunk",["string","Buffer"],s)),!F||(ed(i,F),N.nextTick(_,F),!1)}function decodeChunk(i,o,s){return i.objectMode||!1===i.decodeStrings||"string"!=typeof o||(o=X.from(o,s)),o}function writeOrBuffer(i,o,s,_,F,N){if(!s){var j=decodeChunk(o,_,F);_!==j&&(s=!0,F="buffer",_=j)}var Z=o.objectMode?1:_.length;o.length+=Z;var X=o.length<o.highWaterMark;if(X||(o.needDrain=!0),o.writing||o.corked){var $=o.lastBufferedRequest;o.lastBufferedRequest={chunk:_,encoding:F,isBuf:s,callback:N,next:null},$?$.next=o.lastBufferedRequest:o.bufferedRequest=o.lastBufferedRequest,o.bufferedRequestCount+=1}else doWrite(i,o,!1,Z,_,F,N);return X}function doWrite(i,o,s,_,F,N,j){o.writelen=_,o.writecb=j,o.writing=!0,o.sync=!0,o.destroyed?o.onwrite(new el("write")):s?i._writev(F,o.onwrite):i._write(F,N,o.onwrite),o.sync=!1}function onwriteError(i,o,s,_,F){--o.pendingcb,s?(N.nextTick(F,_),N.nextTick(finishMaybe,i,o),i._writableState.errorEmitted=!0,ed(i,_)):(F(_),i._writableState.errorEmitted=!0,ed(i,_),finishMaybe(i,o))}function onwriteStateUpdate(i){i.writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0}function onwrite(i,o){var s=i._writableState,_=s.sync,F=s.writecb;if("function"!=typeof F)throw new eo;if(onwriteStateUpdate(s),o)onwriteError(i,s,_,o,F);else{var j=needFinish(s)||i.destroyed;j||s.corked||s.bufferProcessing||!s.bufferedRequest||clearBuffer(i,s),_?N.nextTick(afterWrite,i,s,j,F):afterWrite(i,s,j,F)}}function afterWrite(i,o,s,_){s||onwriteDrain(i,o),o.pendingcb--,_(),finishMaybe(i,o)}function onwriteDrain(i,o){0===o.length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))}function clearBuffer(i,o){o.bufferProcessing=!0;var s=o.bufferedRequest;if(i._writev&&s&&s.next){var _=Array(o.bufferedRequestCount),F=o.corkedRequestsFree;F.entry=s;for(var N=0,j=!0;s;)_[N]=s,s.isBuf||(j=!1),s=s.next,N+=1;_.allBuffers=j,doWrite(i,o,!0,o.length,_,"",F.finish),o.pendingcb++,o.lastBufferedRequest=null,F.next?(o.corkedRequestsFree=F.next,F.next=null):o.corkedRequestsFree=new CorkedRequest(o),o.bufferedRequestCount=0}else{for(;s;){var Z=s.chunk,X=s.encoding,$=s.callback,ee=o.objectMode?1:Z.length;if(doWrite(i,o,!1,ee,Z,X,$),s=s.next,o.bufferedRequestCount--,o.writing)break}null===s&&(o.lastBufferedRequest=null)}o.bufferedRequest=s,o.bufferProcessing=!1}function needFinish(i){return i.ending&&0===i.length&&null===i.bufferedRequest&&!i.finished&&!i.writing}function callFinal(i,o){i._final(function(s){o.pendingcb--,s&&ed(i,s),o.prefinished=!0,i.emit("prefinish"),finishMaybe(i,o)})}function prefinish(i,o){o.prefinished||o.finalCalled||("function"!=typeof i._final||o.destroyed?(o.prefinished=!0,i.emit("prefinish")):(o.pendingcb++,o.finalCalled=!0,N.nextTick(callFinal,i,o)))}function finishMaybe(i,o){var s=needFinish(o);if(s&&(prefinish(i,o),0===o.pendingcb&&(o.finished=!0,i.emit("finish"),o.autoDestroy))){var _=i._readableState;(!_||_.autoDestroy&&_.endEmitted)&&i.destroy()}return s}function endWritable(i,o,s){o.ending=!0,finishMaybe(i,o),s&&(o.finished?N.nextTick(s):i.once("finish",s)),o.ended=!0,i.writable=!1}function onCorkedFinish(i,o,s){var _=i.entry;for(i.entry=null;_;){var F=_.callback;o.pendingcb--,F(s),_=_.next}o.corkedRequestsFree.next=i}s(42018)(Writable,Z),WritableState.prototype.getBuffer=function(){for(var i=this.bufferedRequest,o=[];i;)o.push(i),i=i.next;return o},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(i){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(i){return!!F.call(this,i)||this===Writable&&i&&i._writableState instanceof WritableState}})):F=function(i){return i instanceof this},Writable.prototype.pipe=function(){ed(this,new es)},Writable.prototype.write=function(i,o,s){var _=this._writableState,F=!1,N=!_.objectMode&&_isUint8Array(i);return N&&!X.isBuffer(i)&&(i=_uint8ArrayToBuffer(i)),"function"==typeof o&&(s=o,o=null),N?o="buffer":o||(o=_.defaultEncoding),"function"!=typeof s&&(s=nop),_.ending?writeAfterEnd(this,s):(N||validChunk(this,_,i,s))&&(_.pendingcb++,F=writeOrBuffer(this,_,N,i,o,s)),F},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var i=this._writableState;!i.corked||(i.corked--,i.writing||i.corked||i.bufferProcessing||!i.bufferedRequest||clearBuffer(this,i))},Writable.prototype.setDefaultEncoding=function(i){if("string"==typeof i&&(i=i.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((i+"").toLowerCase())>-1))throw new ef(i);return this._writableState.defaultEncoding=i,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(i,o,s){s(new ei("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(i,o,s){var _=this._writableState;return"function"==typeof i?(s=i,i=null,o=null):"function"==typeof o&&(s=o,o=null),null!=i&&this.write(i,o),_.corked&&(_.corked=1,this.uncork()),_.ending||endWritable(this,_,s),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(i){this._writableState&&(this._writableState.destroyed=i)}}),Writable.prototype.destroy=ee.destroy,Writable.prototype._undestroy=ee.undestroy,Writable.prototype._destroy=function(i,o){o(i)}},68221:function(i,o,s){"use strict";var _,F=s(90386);function _defineProperty(i,o,s){return o in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,i}var N=s(12726),j=Symbol("lastResolve"),Z=Symbol("lastReject"),X=Symbol("error"),$=Symbol("ended"),ee=Symbol("lastPromise"),et=Symbol("handlePromise"),er=Symbol("stream");function createIterResult(i,o){return{value:i,done:o}}function readAndResolve(i){var o=i[j];if(null!==o){var s=i[er].read();null!==s&&(i[ee]=null,i[j]=null,i[Z]=null,o(createIterResult(s,!1)))}}function onReadable(i){F.nextTick(readAndResolve,i)}function wrapForNext(i,o){return function(s,_){i.then(function(){if(o[$]){s(createIterResult(void 0,!0));return}o[et](s,_)},_)}}var en=Object.getPrototypeOf(function(){}),ei=Object.setPrototypeOf((_defineProperty(_={get stream(){return this[er]},next:function(){var i,o=this,s=this[X];if(null!==s)return Promise.reject(s);if(this[$])return Promise.resolve(createIterResult(void 0,!0));if(this[er].destroyed)return new Promise(function(i,s){F.nextTick(function(){o[X]?s(o[X]):i(createIterResult(void 0,!0))})});var _=this[ee];if(_)i=new Promise(wrapForNext(_,this));else{var N=this[er].read();if(null!==N)return Promise.resolve(createIterResult(N,!1));i=new Promise(this[et])}return this[ee]=i,i}},Symbol.asyncIterator,function(){return this}),_defineProperty(_,"return",function(){var i=this;return new Promise(function(o,s){i[er].destroy(null,function(i){if(i){s(i);return}o(createIterResult(void 0,!0))})})}),_),en);i.exports=function(i){var o,s=Object.create(ei,(_defineProperty(o={},er,{value:i,writable:!0}),_defineProperty(o,j,{value:null,writable:!0}),_defineProperty(o,Z,{value:null,writable:!0}),_defineProperty(o,X,{value:null,writable:!0}),_defineProperty(o,$,{value:i._readableState.endEmitted,writable:!0}),_defineProperty(o,et,{value:function(i,o){var _=s[er].read();_?(s[ee]=null,s[j]=null,s[Z]=null,i(createIterResult(_,!1))):(s[j]=i,s[Z]=o)},writable:!0}),o));return s[ee]=null,N(i,function(i){if(i&&"ERR_STREAM_PREMATURE_CLOSE"!==i.code){var o=s[Z];null!==o&&(s[ee]=null,s[j]=null,s[Z]=null,o(i)),s[X]=i;return}var _=s[j];null!==_&&(s[ee]=null,s[j]=null,s[Z]=null,_(createIterResult(void 0,!0))),s[$]=!0}),i.on("readable",onReadable.bind(null,s)),s}},31125:function(i,o,s){"use strict";function ownKeys(i,o){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(i);o&&(_=_.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),s.push.apply(s,_)}return s}function _objectSpread(i){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?ownKeys(Object(s),!0).forEach(function(o){_defineProperty(i,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(o){Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(s,o))})}return i}function _defineProperty(i,o,s){return o in i?Object.defineProperty(i,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[o]=s,i}function _classCallCheck(i,o){if(!(i instanceof o))throw TypeError("Cannot call a class as a function")}function _defineProperties(i,o){for(var s=0;s<o.length;s++){var _=o[s];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(i,_.key,_)}}function _createClass(i,o,s){return o&&_defineProperties(i.prototype,o),s&&_defineProperties(i,s),i}var _=s(12856).Buffer,F=s(69862).inspect,N=F&&F.custom||"inspect";function copyBuffer(i,o,s){_.prototype.copy.call(i,o,s)}i.exports=function(){function BufferList(){_classCallCheck(this,BufferList),this.head=null,this.tail=null,this.length=0}return _createClass(BufferList,[{key:"push",value:function(i){var o={data:i,next:null};this.length>0?this.tail.next=o:this.head=o,this.tail=o,++this.length}},{key:"unshift",value:function(i){var o={data:i,next:this.head};0===this.length&&(this.tail=o),this.head=o,++this.length}},{key:"shift",value:function(){if(0!==this.length){var i=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,i}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(i){if(0===this.length)return"";for(var o=this.head,s=""+o.data;o=o.next;)s+=i+o.data;return s}},{key:"concat",value:function(i){if(0===this.length)return _.alloc(0);for(var o=_.allocUnsafe(i>>>0),s=this.head,F=0;s;)copyBuffer(s.data,o,F),F+=s.data.length,s=s.next;return o}},{key:"consume",value:function(i,o){var s;return i<this.head.data.length?(s=this.head.data.slice(0,i),this.head.data=this.head.data.slice(i)):s=i===this.head.data.length?this.shift():o?this._getString(i):this._getBuffer(i),s}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(i){var o=this.head,s=1,_=o.data;for(i-=_.length;o=o.next;){var F=o.data,N=i>F.length?F.length:i;if(N===F.length?_+=F:_+=F.slice(0,i),0==(i-=N)){N===F.length?(++s,o.next?this.head=o.next:this.head=this.tail=null):(this.head=o,o.data=F.slice(N));break}++s}return this.length-=s,_}},{key:"_getBuffer",value:function(i){var o=_.allocUnsafe(i),s=this.head,F=1;for(s.data.copy(o),i-=s.data.length;s=s.next;){var N=s.data,j=i>N.length?N.length:i;if(N.copy(o,o.length-i,0,j),0==(i-=j)){j===N.length?(++F,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=N.slice(j));break}++F}return this.length-=F,o}},{key:N,value:function(i,o){return F(this,_objectSpread({},o,{depth:0,customInspect:!1}))}}]),BufferList}()},65756:function(i,o,s){"use strict";var _=s(90386);function destroy(i,o){var s=this,F=this._readableState&&this._readableState.destroyed,N=this._writableState&&this._writableState.destroyed;return F||N?o?o(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(emitErrorNT,this,i)):_.nextTick(emitErrorNT,this,i)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(i){!o&&i?s._writableState?s._writableState.errorEmitted?_.nextTick(emitCloseNT,s):(s._writableState.errorEmitted=!0,_.nextTick(emitErrorAndCloseNT,s,i)):_.nextTick(emitErrorAndCloseNT,s,i):o?(_.nextTick(emitCloseNT,s),o(i)):_.nextTick(emitCloseNT,s)})),this}function emitErrorAndCloseNT(i,o){emitErrorNT(i,o),emitCloseNT(i)}function emitCloseNT(i){(!i._writableState||i._writableState.emitClose)&&(!i._readableState||i._readableState.emitClose)&&i.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(i,o){i.emit("error",o)}function errorOrDestroy(i,o){var s=i._readableState,_=i._writableState;s&&s.autoDestroy||_&&_.autoDestroy?i.destroy(o):i.emit("error",o)}i.exports={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy}},12726:function(i,o,s){"use strict";var _=s(74322).q.ERR_STREAM_PREMATURE_CLOSE;function once(i){var o=!1;return function(){if(!o){o=!0;for(var s=arguments.length,_=Array(s),F=0;F<s;F++)_[F]=arguments[F];i.apply(this,_)}}}function noop(){}function isRequest(i){return i.setHeader&&"function"==typeof i.abort}function eos(i,o,s){if("function"==typeof o)return eos(i,null,o);o||(o={}),s=once(s||noop);var F=o.readable||!1!==o.readable&&i.readable,N=o.writable||!1!==o.writable&&i.writable,onlegacyfinish=function(){i.writable||onfinish()},j=i._writableState&&i._writableState.finished,onfinish=function(){N=!1,j=!0,F||s.call(i)},Z=i._readableState&&i._readableState.endEmitted,onend=function(){F=!1,Z=!0,N||s.call(i)},onerror=function(o){s.call(i,o)},onclose=function(){var o;return F&&!Z?(i._readableState&&i._readableState.ended||(o=new _),s.call(i,o)):N&&!j?(i._writableState&&i._writableState.ended||(o=new _),s.call(i,o)):void 0},onrequest=function(){i.req.on("finish",onfinish)};return isRequest(i)?(i.on("complete",onfinish),i.on("abort",onclose),i.req?onrequest():i.on("request",onrequest)):N&&!i._writableState&&(i.on("end",onlegacyfinish),i.on("close",onlegacyfinish)),i.on("end",onend),i.on("finish",onfinish),!1!==o.error&&i.on("error",onerror),i.on("close",onclose),function(){i.removeListener("complete",onfinish),i.removeListener("abort",onclose),i.removeListener("request",onrequest),i.req&&i.req.removeListener("finish",onfinish),i.removeListener("end",onlegacyfinish),i.removeListener("close",onlegacyfinish),i.removeListener("finish",onfinish),i.removeListener("end",onend),i.removeListener("error",onerror),i.removeListener("close",onclose)}}i.exports=eos},31748:function(i){i.exports=function(){throw Error("Readable.from is not available in the browser")}},10168:function(i,o,s){"use strict";function once(i){var o=!1;return function(){o||(o=!0,i.apply(void 0,arguments))}}var _,F=s(74322).q,N=F.ERR_MISSING_ARGS,j=F.ERR_STREAM_DESTROYED;function noop(i){if(i)throw i}function isRequest(i){return i.setHeader&&"function"==typeof i.abort}function destroyer(i,o,F,N){N=once(N);var Z=!1;i.on("close",function(){Z=!0}),void 0===_&&(_=s(12726)),_(i,{readable:o,writable:F},function(i){if(i)return N(i);Z=!0,N()});var X=!1;return function(o){if(!Z&&!X){if(X=!0,isRequest(i))return i.abort();if("function"==typeof i.destroy)return i.destroy();N(o||new j("pipe"))}}}function call(i){i()}function pipe(i,o){return i.pipe(o)}function popCallback(i){return i.length&&"function"==typeof i[i.length-1]?i.pop():noop}function pipeline(){for(var i,o=arguments.length,s=Array(o),_=0;_<o;_++)s[_]=arguments[_];var F=popCallback(s);if(Array.isArray(s[0])&&(s=s[0]),s.length<2)throw new N("streams");var j=s.map(function(o,_){var N=_<s.length-1;return destroyer(o,N,_>0,function(o){i||(i=o),o&&j.forEach(call),N||(j.forEach(call),F(i))})});return s.reduce(pipe)}i.exports=pipeline},56306:function(i,o,s){"use strict";var _=s(74322).q.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(i,o,s){return null!=i.highWaterMark?i.highWaterMark:o?i[s]:null}function getHighWaterMark(i,o,s,F){var N=highWaterMarkFrom(o,F,s);if(null!=N){if(!(isFinite(N)&&Math.floor(N)===N)||N<0)throw new _(F?s:"highWaterMark",N);return Math.floor(N)}return i.objectMode?16:16384}i.exports={getHighWaterMark:getHighWaterMark}},71405:function(i,o,s){i.exports=s(15398).EventEmitter},68019:function(i,o,s){"use strict";var _=s(71665).Buffer,F=_.isEncoding||function(i){switch((i=""+i)&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(i){var o;if(!i)return"utf8";for(;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(o)return;i=(""+i).toLowerCase(),o=!0}}function normalizeEncoding(i){var o=_normalizeEncoding(i);if("string"!=typeof o&&(_.isEncoding===F||!F(i)))throw Error("Unknown encoding: "+i);return o||i}function StringDecoder(i){var o;switch(this.encoding=normalizeEncoding(i),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,o=4;break;case"utf8":this.fillLast=utf8FillLast,o=4;break;case"base64":this.text=base64Text,this.end=base64End,o=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(o)}function utf8CheckByte(i){return i<=127?0:i>>5==6?2:i>>4==14?3:i>>3==30?4:i>>6==2?-1:-2}function utf8CheckIncomplete(i,o,s){var _=o.length-1;if(_<s)return 0;var F=utf8CheckByte(o[_]);return F>=0?(F>0&&(i.lastNeed=F-1),F):--_<s||-2===F?0:(F=utf8CheckByte(o[_]))>=0?(F>0&&(i.lastNeed=F-2),F):--_<s||-2===F?0:(F=utf8CheckByte(o[_]))>=0?(F>0&&(2===F?F=0:i.lastNeed=F-3),F):0}function utf8CheckExtraBytes(i,o,s){if((192&o[0])!=128)return i.lastNeed=0,"�";if(i.lastNeed>1&&o.length>1){if((192&o[1])!=128)return i.lastNeed=1,"�";if(i.lastNeed>2&&o.length>2&&(192&o[2])!=128)return i.lastNeed=2,"�"}}function utf8FillLast(i){var o=this.lastTotal-this.lastNeed,s=utf8CheckExtraBytes(this,i,o);return void 0!==s?s:this.lastNeed<=i.length?(i.copy(this.lastChar,o,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(i.copy(this.lastChar,o,0,i.length),this.lastNeed-=i.length)}function utf8Text(i,o){var s=utf8CheckIncomplete(this,i,o);if(!this.lastNeed)return i.toString("utf8",o);this.lastTotal=s;var _=i.length-(s-this.lastNeed);return i.copy(this.lastChar,0,_),i.toString("utf8",o,_)}function utf8End(i){var o=i&&i.length?this.write(i):"";return this.lastNeed?o+"�":o}function utf16Text(i,o){if((i.length-o)%2==0){var s=i.toString("utf16le",o);if(s){var _=s.charCodeAt(s.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",o,i.length-1)}function utf16End(i){var o=i&&i.length?this.write(i):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return o+this.lastChar.toString("utf16le",0,s)}return o}function base64Text(i,o){var s=(i.length-o)%3;return 0===s?i.toString("base64",o):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",o,i.length-s))}function base64End(i){var o=i&&i.length?this.write(i):"";return this.lastNeed?o+this.lastChar.toString("base64",0,3-this.lastNeed):o}function simpleWrite(i){return i.toString(this.encoding)}function simpleEnd(i){return i&&i.length?this.write(i):""}o.s=StringDecoder,StringDecoder.prototype.write=function(i){var o,s;if(0===i.length)return"";if(this.lastNeed){if(void 0===(o=this.fillLast(i)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<i.length?o?o+this.text(i,s):this.text(i,s):o||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length}},90715:function(i,o,s){var F=s(32791),N=s(41633)("stream-parser");function Parser(i){var o=i&&"function"==typeof i._transform,s=i&&"function"==typeof i._write;if(!o&&!s)throw Error("must pass a Writable or Transform stream in");N("extending Parser into stream"),i._bytes=_bytes,i._skipBytes=_skipBytes,o&&(i._passthrough=_passthrough),o?i._transform=transform:i._write=write}function init(i){N("initializing parser stream"),i._parserBytesLeft=0,i._parserBuffers=[],i._parserBuffered=0,i._parserState=-1,i._parserCallback=null,"function"==typeof i.push&&(i._parserOutput=i.push.bind(i)),i._parserInit=!0}function _bytes(i,o){F(!this._parserCallback,'there is already a "callback" set!'),F(isFinite(i)&&i>0,'can only buffer a finite number of bytes > 0, got "'+i+'"'),this._parserInit||init(this),N("buffering %o bytes",i),this._parserBytesLeft=i,this._parserCallback=o,this._parserState=0}function _skipBytes(i,o){F(!this._parserCallback,'there is already a "callback" set!'),F(i>0,'can only skip > 0 bytes, got "'+i+'"'),this._parserInit||init(this),N("skipping %o bytes",i),this._parserBytesLeft=i,this._parserCallback=o,this._parserState=1}function _passthrough(i,o){F(!this._parserCallback,'There is already a "callback" set!'),F(i>0,'can only pass through > 0 bytes, got "'+i+'"'),this._parserInit||init(this),N("passing through %o bytes",i),this._parserBytesLeft=i,this._parserCallback=o,this._parserState=2}function write(i,o,s){this._parserInit||init(this),N("write(%o bytes)",i.length),"function"==typeof o&&(s=o),j(this,i,null,s)}function transform(i,o,s){this._parserInit||init(this),N("transform(%o bytes)",i.length),"function"!=typeof o&&(o=this._parserOutput),j(this,i,o,s)}function _data(i,o,s,_){return i._parserBytesLeft<=0?_(Error("got data but not currently parsing anything")):o.length<=i._parserBytesLeft?function(){return process(i,o,s,_)}:function(){var F=o.slice(0,i._parserBytesLeft);return process(i,F,s,function(N){return N?_(N):o.length>F.length?function(){return _data(i,o.slice(F.length),s,_)}:void 0})}}function process(i,o,s,F){if(i._parserBytesLeft-=o.length,N("%o bytes left for stream piece",i._parserBytesLeft),0===i._parserState?(i._parserBuffers.push(o),i._parserBuffered+=o.length):2===i._parserState&&s(o),0!==i._parserBytesLeft)return F;var j=i._parserCallback;if(j&&0===i._parserState&&i._parserBuffers.length>1&&(o=_.concat(i._parserBuffers,i._parserBuffered)),0!==i._parserState&&(o=null),i._parserCallback=null,i._parserBuffered=0,i._parserState=-1,i._parserBuffers.splice(0),j){var Z=[];o&&Z.push(o),s&&Z.push(s);var X=j.length>Z.length;X&&Z.push(trampoline(F));var $=j.apply(i,Z);if(!X||F===$)return F}}i.exports=Parser;var j=trampoline(_data);function trampoline(i){return function(){for(var o=i.apply(this,arguments);"function"==typeof o;)o=o();return o}}},41633:function(i,o,s){var _=s(90386);function useColors(){return"undefined"!=typeof window&&!!window.process&&"renderer"===window.process.type||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(i){var s=this.useColors;if(i[0]=(s?"%c":"")+this.namespace+(s?" %c":" ")+i[0]+(s?"%c ":" ")+"+"+o.humanize(this.diff),s){var _="color: "+this.color;i.splice(1,0,_,"color: inherit");var F=0,N=0;i[0].replace(/%[a-zA-Z%]/g,function(i){"%%"!==i&&(F++,"%c"===i&&(N=F))}),i.splice(N,0,_)}}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(i){try{null==i?o.storage.removeItem("debug"):o.storage.debug=i}catch(i){}}function load(){var i;try{i=o.storage.debug}catch(i){}return!i&&void 0!==_&&"env"in _&&(i=_.env.DEBUG),i}function localstorage(){try{return window.localStorage}catch(i){}}(o=i.exports=s(74469)).log=log,o.formatArgs=formatArgs,o.save=save,o.load=load,o.useColors=useColors,o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:localstorage(),o.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],o.formatters.j=function(i){try{return JSON.stringify(i)}catch(i){return"[UnexpectedJSONParseError]: "+i.message}},o.enable(load())},74469:function(i,o,s){var _;function selectColor(i){var s,_=0;for(s in i)_=(_<<5)-_+i.charCodeAt(s)|0;return o.colors[Math.abs(_)%o.colors.length]}function createDebug(i){function debug(){if(debug.enabled){var i=debug,s=+new Date,F=s-(_||s);i.diff=F,i.prev=_,i.curr=s,_=s;for(var N=Array(arguments.length),j=0;j<N.length;j++)N[j]=arguments[j];N[0]=o.coerce(N[0]),"string"!=typeof N[0]&&N.unshift("%O");var Z=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,function(s,_){if("%%"===s)return s;Z++;var F=o.formatters[_];if("function"==typeof F){var j=N[Z];s=F.call(i,j),N.splice(Z,1),Z--}return s}),o.formatArgs.call(i,N),(debug.log||o.log||console.log.bind(console)).apply(i,N)}}return debug.namespace=i,debug.enabled=o.enabled(i),debug.useColors=o.useColors(),debug.color=selectColor(i),"function"==typeof o.init&&o.init(debug),debug}function enable(i){o.save(i),o.names=[],o.skips=[];for(var s=("string"==typeof i?i:"").split(/[\s,]+/),_=s.length,F=0;F<_;F++)s[F]&&("-"===(i=s[F].replace(/\*/g,".*?"))[0]?o.skips.push(RegExp("^"+i.substr(1)+"$")):o.names.push(RegExp("^"+i+"$")))}function disable(){o.enable("")}function enabled(i){var s,_;for(s=0,_=o.skips.length;s<_;s++)if(o.skips[s].test(i))return!1;for(s=0,_=o.names.length;s<_;s++)if(o.names[s].test(i))return!0;return!1}function coerce(i){return i instanceof Error?i.stack||i.message:i}(o=i.exports=createDebug.debug=createDebug.default=createDebug).coerce=coerce,o.disable=disable,o.enable=enable,o.enabled=enabled,o.humanize=s(11375),o.names=[],o.skips=[],o.formatters={}},11375:function(i){function parse(i){if(!((i=String(i)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(i);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return 864e5*s;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*s;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*s;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function fmtShort(i){return i>=864e5?Math.round(i/864e5)+"d":i>=36e5?Math.round(i/36e5)+"h":i>=6e4?Math.round(i/6e4)+"m":i>=1e3?Math.round(i/1e3)+"s":i+"ms"}function fmtLong(i){return plural(i,864e5,"day")||plural(i,36e5,"hour")||plural(i,6e4,"minute")||plural(i,1e3,"second")||i+" ms"}function plural(i,o,s){return i<o?void 0:i<1.5*o?Math.floor(i/o)+" "+s:Math.ceil(i/o)+" "+s+"s"}i.exports=function(i,o){o=o||{};var s=typeof i;if("string"===s&&i.length>0)return parse(i);if("number"===s&&!1===isNaN(i))return o.long?fmtLong(i):fmtShort(i);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))}},99011:function(i,o,s){"use strict";var _=s(88641);i.exports=function(i,o,s){if(null==i)throw Error("First argument should be a string");if(null==o)throw Error("Separator should be a string or a RegExp");s?("string"==typeof s||Array.isArray(s))&&(s={ignore:s}):s={},null==s.escape&&(s.escape=!0),null==s.ignore?s.ignore=["[]","()","{}","<>",'""',"''","``","“”","\xab\xbb"]:("string"==typeof s.ignore&&(s.ignore=[s.ignore]),s.ignore=s.ignore.map(function(i){return 1===i.length&&(i+=i),i}));var F=_.parse(i,{flat:!0,brackets:s.ignore}),N=F[0].split(o);if(s.escape){for(var j=[],Z=0;Z<N.length;Z++){var X=N[Z],$=N[Z+1];"\\"===X[X.length-1]&&"\\"!==X[X.length-2]?(j.push(X+o+$),Z++):j.push(X)}N=j}for(var Z=0;Z<N.length;Z++)F[0]=N[Z],N[Z]=_.stringify(F,{flat:!0});return N}},68664:function(i){"use strict";function stronglyConnectedComponents(i){for(var o,s=i.length,_=Array(s),F=Array(s),N=Array(s),j=Array(s),Z=Array(s),X=Array(s),$=0;$<s;++$)_[$]=-1,F[$]=0,N[$]=!1,j[$]=0,Z[$]=-1,X[$]=[];var ee=0,et=[],er=[];function strongConnect(o){var s=[o],$=[o];for(_[o]=F[o]=ee,N[o]=!0,ee+=1;$.length>0;){var en=i[o=$[$.length-1]];if(j[o]<en.length){for(var ei=j[o];ei<en.length;++ei){var eo=en[ei];if(_[eo]<0){_[eo]=F[eo]=ee,N[eo]=!0,ee+=1,s.push(eo),$.push(eo);break}N[eo]&&(F[o]=0|Math.min(F[o],F[eo])),Z[eo]>=0&&X[o].push(Z[eo])}j[o]=ei}else{if(F[o]===_[o]){for(var es=[],el=[],ec=0,ei=s.length-1;ei>=0;--ei){var eu=s[ei];if(N[eu]=!1,es.push(eu),el.push(X[eu]),ec+=X[eu].length,Z[eu]=et.length,eu===o){s.length=ei;break}}et.push(es);for(var ef=Array(ec),ei=0;ei<el.length;ei++)for(var ed=0;ed<el[ei].length;ed++)ef[--ec]=el[ei][ed];er.push(ef)}$.pop()}}}for(var $=0;$<s;++$)_[$]<0&&strongConnect($);for(var $=0;$<er.length;$++){var en=er[$];if(0!==en.length){en.sort(function(i,o){return i-o}),o=[en[0]];for(var ei=1;ei<en.length;ei++)en[ei]!==en[ei-1]&&o.push(en[ei]);er[$]=o}}return{components:et,adjacencyList:er}}i.exports=stronglyConnectedComponents},7095:function(i,o,s){"use strict";s.r(o);var _=function(){function sliceIterator(i,o){var s=[],_=!0,F=!1,N=void 0;try{for(var j,Z=i[Symbol.iterator]();!(_=(j=Z.next()).done)&&(s.push(j.value),!o||s.length!==o);_=!0);}catch(i){F=!0,N=i}finally{try{!_&&Z.return&&Z.return()}finally{if(F)throw N}}return s}return function(i,o){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return sliceIterator(i,o);throw TypeError("Invalid attempt to destructure non-iterable instance")}}(),F=2*Math.PI,mapToEllipse=function(i,o,s,_,F,N,j){var Z=i.x,X=i.y;return{x:_*(Z*=o)-F*(X*=s)+N,y:F*Z+_*X+j}},approxUnitArc=function(i,o){var s=1.5707963267948966===o?.551915024494:-1.5707963267948966===o?-.551915024494:4/3*Math.tan(o/4),_=Math.cos(i),F=Math.sin(i),N=Math.cos(i+o),j=Math.sin(i+o);return[{x:_-F*s,y:F+_*s},{x:N+j*s,y:j-N*s},{x:N,y:j}]},vectorAngle=function(i,o,s,_){var F=i*s+o*_;return F>1&&(F=1),F<-1&&(F=-1),(i*_-o*s<0?-1:1)*Math.acos(F)},getArcCenter=function(i,o,s,_,N,j,Z,X,$,ee,et,er){var en=Math.pow(N,2),ei=Math.pow(j,2),eo=Math.pow(et,2),es=Math.pow(er,2),el=en*ei-en*es-ei*eo;el<0&&(el=0),el/=en*es+ei*eo;var ec=(el=Math.sqrt(el)*(Z===X?-1:1))*N/j*er,eu=-(el*j)/N*et,ef=(et-ec)/N,ed=(er-eu)/j,eh=vectorAngle(1,0,ef,ed),ep=vectorAngle(ef,ed,(-et-ec)/N,(-er-eu)/j);return 0===X&&ep>0&&(ep-=F),1===X&&ep<0&&(ep+=F),[ee*ec-$*eu+(i+s)/2,$*ec+ee*eu+(o+_)/2,eh,ep]};o.default=function(i){var o=i.px,s=i.py,N=i.cx,j=i.cy,Z=i.rx,X=i.ry,$=i.xAxisRotation,ee=void 0===$?0:$,et=i.largeArcFlag,er=void 0===et?0:et,en=i.sweepFlag,ei=void 0===en?0:en,eo=[];if(0===Z||0===X)return[];var es=Math.sin(ee*F/360),el=Math.cos(ee*F/360),ec=el*(o-N)/2+es*(s-j)/2,eu=-es*(o-N)/2+el*(s-j)/2;if(0===ec&&0===eu)return[];var ef=Math.pow(ec,2)/Math.pow(Z=Math.abs(Z),2)+Math.pow(eu,2)/Math.pow(X=Math.abs(X),2);ef>1&&(Z*=Math.sqrt(ef),X*=Math.sqrt(ef));var ed=_(getArcCenter(o,s,N,j,Z,X,er,ei,es,el,ec,eu),4),eh=ed[0],ep=ed[1],eg=ed[2],em=ed[3],ey=Math.abs(em)/(F/4);1e-7>Math.abs(1-ey)&&(ey=1);var ev=Math.max(Math.ceil(ey),1);em/=ev;for(var ex=0;ex<ev;ex++)eo.push(approxUnitArc(eg,em)),eg+=em;return eo.map(function(i){var o=mapToEllipse(i[0],Z,X,el,es,eh,ep),s=o.x,_=o.y,F=mapToEllipse(i[1],Z,X,el,es,eh,ep),N=F.x,j=F.y,$=mapToEllipse(i[2],Z,X,el,es,eh,ep);return{x1:s,y1:_,x2:N,y2:j,x:$.x,y:$.y}})}},1750:function(i,o,s){"use strict";var _=s(95616),F=s(65185),N=s(29988),j=s(89546),Z=s(32791);function pathBounds(i){if(Array.isArray(i)&&1===i.length&&"string"==typeof i[0]&&(i=i[0]),"string"==typeof i&&(Z(j(i),"String is not an SVG path."),i=_(i)),Z(Array.isArray(i),"Argument should be a string or an array of path segments."),!(i=N(i=F(i))).length)return[0,0,0,0];for(var o=[1/0,1/0,-1/0,-1/0],s=0,X=i.length;s<X;s++)for(var $=i[s].slice(1),ee=0;ee<$.length;ee+=2)$[ee+0]<o[0]&&(o[0]=$[ee+0]),$[ee+1]<o[1]&&(o[1]=$[ee+1]),$[ee+0]>o[2]&&(o[2]=$[ee+0]),$[ee+1]>o[3]&&(o[3]=$[ee+1]);return o}i.exports=pathBounds},29988:function(i,o,s){"use strict";i.exports=normalize;var _=s(7095);function normalize(i){for(var o=[],s=0,F=0,N=0,j=0,Z=null,X=null,$=0,ee=0,et=0,er=i.length;et<er;et++){var en=i[et],ei=en[0];switch(ei){case"M":N=en[1],j=en[2];break;case"A":var eo=_({px:$,py:ee,cx:en[6],cy:en[7],rx:en[1],ry:en[2],xAxisRotation:en[3],largeArcFlag:en[4],sweepFlag:en[5]});if(!eo.length)continue;for(var es,el,ec=0;ec<eo.length;ec++)en=["C",(el=eo[ec]).x1,el.y1,el.x2,el.y2,el.x,el.y],ec<eo.length-1&&o.push(en);break;case"S":var eu=$,ef=ee;("C"==es||"S"==es)&&(eu+=eu-s,ef+=ef-F),en=["C",eu,ef,en[1],en[2],en[3],en[4]];break;case"T":"Q"==es||"T"==es?(Z=2*$-Z,X=2*ee-X):(Z=$,X=ee),en=quadratic($,ee,Z,X,en[1],en[2]);break;case"Q":Z=en[1],X=en[2],en=quadratic($,ee,en[1],en[2],en[3],en[4]);break;case"L":en=line($,ee,en[1],en[2]);break;case"H":en=line($,ee,en[1],ee);break;case"V":en=line($,ee,$,en[1]);break;case"Z":en=line($,ee,N,j)}es=ei,$=en[en.length-2],ee=en[en.length-1],en.length>4?(s=en[en.length-4],F=en[en.length-3]):(s=$,F=ee),o.push(en)}return o}function line(i,o,s,_){return["C",i,o,s,_,s,_]}function quadratic(i,o,s,_,F,N){return["C",i/3+2/3*s,o/3+2/3*_,F/3+2/3*s,N/3+2/3*_,F,N]}},82019:function(i,o,s){"use strict";var _,F=s(1750),N=s(95616),j=s(31457),Z=s(89546),X=s(44781),$=document.createElement("canvas"),ee=$.getContext("2d");function pathSdf(i,o){if(!Z(i))throw Error("Argument should be valid svg path string");o||(o={}),o.shape?(s=o.shape[0],_=o.shape[1]):(s=$.width=o.w||o.width||200,_=$.height=o.h||o.height||200);var s,_,et=Math.min(s,_),er=o.stroke||0,en=o.viewbox||o.viewBox||F(i),ei=[s/(en[2]-en[0]),_/(en[3]-en[1])],eo=Math.min(ei[0]||0,ei[1]||0)/2;if(ee.fillStyle="black",ee.fillRect(0,0,s,_),ee.fillStyle="white",er&&("number"!=typeof er&&(er=1),er>0?ee.strokeStyle="white":ee.strokeStyle="black",ee.lineWidth=Math.abs(er)),ee.translate(.5*s,.5*_),ee.scale(eo,eo),isPath2DSupported()){var es=new Path2D(i);ee.fill(es),er&&ee.stroke(es)}else j(ee,N(i)),ee.fill(),er&&ee.stroke();return ee.setTransform(1,0,0,1,0,0),X(ee,{cutoff:null!=o.cutoff?o.cutoff:.5,radius:null!=o.radius?o.radius:.5*et})}function isPath2DSupported(){if(null!=_)return _;var i=document.createElement("canvas").getContext("2d");if(i.canvas.width=i.canvas.height=1,!window.Path2D)return _=!1;var o=new Path2D("M0,0h1v1h-1v-1Z");i.fillStyle="black",i.fill(o);var s=i.getImageData(0,0,1,1);return _=s&&s.data&&255===s.data[3]}i.exports=pathSdf},84267:function(i,o,s){var _;!function(F){var N,j,Z,X=/^\s+/,$=/\s+$/,ee=0,et=F.round,er=F.min,en=F.max,ei=F.random;function tinycolor(i,o){if(o=o||{},(i=i||"")instanceof tinycolor)return i;if(!(this instanceof tinycolor))return new tinycolor(i,o);var s=inputToRGB(i);this._originalInput=i,this._r=s.r,this._g=s.g,this._b=s.b,this._a=s.a,this._roundA=et(100*this._a)/100,this._format=o.format||s.format,this._gradientType=o.gradientType,this._r<1&&(this._r=et(this._r)),this._g<1&&(this._g=et(this._g)),this._b<1&&(this._b=et(this._b)),this._ok=s.ok,this._tc_id=ee++}function inputToRGB(i){var o={r:0,g:0,b:0},s=1,_=null,F=null,N=null,j=!1,Z=!1;return"string"==typeof i&&(i=stringInputToObject(i)),"object"==typeof i&&(isValidCSSUnit(i.r)&&isValidCSSUnit(i.g)&&isValidCSSUnit(i.b)?(o=rgbToRgb(i.r,i.g,i.b),j=!0,Z="%"===String(i.r).substr(-1)?"prgb":"rgb"):isValidCSSUnit(i.h)&&isValidCSSUnit(i.s)&&isValidCSSUnit(i.v)?(_=convertToPercentage(i.s),F=convertToPercentage(i.v),o=hsvToRgb(i.h,_,F),j=!0,Z="hsv"):isValidCSSUnit(i.h)&&isValidCSSUnit(i.s)&&isValidCSSUnit(i.l)&&(_=convertToPercentage(i.s),N=convertToPercentage(i.l),o=hslToRgb(i.h,_,N),j=!0,Z="hsl"),i.hasOwnProperty("a")&&(s=i.a)),s=boundAlpha(s),{ok:j,format:i.format||Z,r:er(255,en(o.r,0)),g:er(255,en(o.g,0)),b:er(255,en(o.b,0)),a:s}}function rgbToRgb(i,o,s){return{r:255*bound01(i,255),g:255*bound01(o,255),b:255*bound01(s,255)}}function rgbToHsl(i,o,s){var _,F,N=en(i=bound01(i,255),o=bound01(o,255),s=bound01(s,255)),j=er(i,o,s),Z=(N+j)/2;if(N==j)_=F=0;else{var X=N-j;switch(F=Z>.5?X/(2-N-j):X/(N+j),N){case i:_=(o-s)/X+(o<s?6:0);break;case o:_=(s-i)/X+2;break;case s:_=(i-o)/X+4}_/=6}return{h:_,s:F,l:Z}}function hslToRgb(i,o,s){var _,F,N;function hue2rgb(i,o,s){return(s<0&&(s+=1),s>1&&(s-=1),s<1/6)?i+(o-i)*6*s:s<.5?o:s<2/3?i+(o-i)*(2/3-s)*6:i}if(i=bound01(i,360),o=bound01(o,100),s=bound01(s,100),0===o)_=F=N=s;else{var j=s<.5?s*(1+o):s+o-s*o,Z=2*s-j;_=hue2rgb(Z,j,i+1/3),F=hue2rgb(Z,j,i),N=hue2rgb(Z,j,i-1/3)}return{r:255*_,g:255*F,b:255*N}}function rgbToHsv(i,o,s){var _,F=en(i=bound01(i,255),o=bound01(o,255),s=bound01(s,255)),N=er(i,o,s),j=F-N;if(F==N)_=0;else{switch(F){case i:_=(o-s)/j+(o<s?6:0);break;case o:_=(s-i)/j+2;break;case s:_=(i-o)/j+4}_/=6}return{h:_,s:0===F?0:j/F,v:F}}function hsvToRgb(i,o,s){i=6*bound01(i,360),o=bound01(o,100),s=bound01(s,100);var _=F.floor(i),N=i-_,j=s*(1-o),Z=s*(1-N*o),X=s*(1-(1-N)*o),$=_%6;return{r:255*[s,Z,j,j,X,s][$],g:255*[X,s,s,Z,j,j][$],b:255*[j,j,X,s,s,Z][$]}}function rgbToHex(i,o,s,_){var F=[pad2(et(i).toString(16)),pad2(et(o).toString(16)),pad2(et(s).toString(16))];return _&&F[0].charAt(0)==F[0].charAt(1)&&F[1].charAt(0)==F[1].charAt(1)&&F[2].charAt(0)==F[2].charAt(1)?F[0].charAt(0)+F[1].charAt(0)+F[2].charAt(0):F.join("")}function rgbaToHex(i,o,s,_,F){var N=[pad2(et(i).toString(16)),pad2(et(o).toString(16)),pad2(et(s).toString(16)),pad2(convertDecimalToHex(_))];return F&&N[0].charAt(0)==N[0].charAt(1)&&N[1].charAt(0)==N[1].charAt(1)&&N[2].charAt(0)==N[2].charAt(1)&&N[3].charAt(0)==N[3].charAt(1)?N[0].charAt(0)+N[1].charAt(0)+N[2].charAt(0)+N[3].charAt(0):N.join("")}function rgbaToArgbHex(i,o,s,_){return[pad2(convertDecimalToHex(_)),pad2(et(i).toString(16)),pad2(et(o).toString(16)),pad2(et(s).toString(16))].join("")}function desaturate(i,o){o=0===o?0:o||10;var s=tinycolor(i).toHsl();return s.s-=o/100,s.s=clamp01(s.s),tinycolor(s)}function saturate(i,o){o=0===o?0:o||10;var s=tinycolor(i).toHsl();return s.s+=o/100,s.s=clamp01(s.s),tinycolor(s)}function greyscale(i){return tinycolor(i).desaturate(100)}function lighten(i,o){o=0===o?0:o||10;var s=tinycolor(i).toHsl();return s.l+=o/100,s.l=clamp01(s.l),tinycolor(s)}function brighten(i,o){o=0===o?0:o||10;var s=tinycolor(i).toRgb();return s.r=en(0,er(255,s.r-et(-(255*(o/100))))),s.g=en(0,er(255,s.g-et(-(255*(o/100))))),s.b=en(0,er(255,s.b-et(-(255*(o/100))))),tinycolor(s)}function darken(i,o){o=0===o?0:o||10;var s=tinycolor(i).toHsl();return s.l-=o/100,s.l=clamp01(s.l),tinycolor(s)}function spin(i,o){var s=tinycolor(i).toHsl(),_=(s.h+o)%360;return s.h=_<0?360+_:_,tinycolor(s)}function complement(i){var o=tinycolor(i).toHsl();return o.h=(o.h+180)%360,tinycolor(o)}function triad(i){var o=tinycolor(i).toHsl(),s=o.h;return[tinycolor(i),tinycolor({h:(s+120)%360,s:o.s,l:o.l}),tinycolor({h:(s+240)%360,s:o.s,l:o.l})]}function tetrad(i){var o=tinycolor(i).toHsl(),s=o.h;return[tinycolor(i),tinycolor({h:(s+90)%360,s:o.s,l:o.l}),tinycolor({h:(s+180)%360,s:o.s,l:o.l}),tinycolor({h:(s+270)%360,s:o.s,l:o.l})]}function splitcomplement(i){var o=tinycolor(i).toHsl(),s=o.h;return[tinycolor(i),tinycolor({h:(s+72)%360,s:o.s,l:o.l}),tinycolor({h:(s+216)%360,s:o.s,l:o.l})]}function analogous(i,o,s){o=o||6,s=s||30;var _=tinycolor(i).toHsl(),F=360/s,N=[tinycolor(i)];for(_.h=(_.h-(F*o>>1)+720)%360;--o;)_.h=(_.h+F)%360,N.push(tinycolor(_));return N}function monochromatic(i,o){o=o||6;for(var s=tinycolor(i).toHsv(),_=s.h,F=s.s,N=s.v,j=[],Z=1/o;o--;)j.push(tinycolor({h:_,s:F,v:N})),N=(N+Z)%1;return j}tinycolor.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var i=this.toRgb();return(299*i.r+587*i.g+114*i.b)/1e3},getLuminance:function(){var i,o,s,_=this.toRgb();return i=_.r/255,o=_.g/255,s=_.b/255,.2126*(i<=.03928?i/12.92:F.pow((i+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:F.pow((o+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:F.pow((s+.055)/1.055,2.4))},setAlpha:function(i){return this._a=boundAlpha(i),this._roundA=et(100*this._a)/100,this},toHsv:function(){var i=rgbToHsv(this._r,this._g,this._b);return{h:360*i.h,s:i.s,v:i.v,a:this._a}},toHsvString:function(){var i=rgbToHsv(this._r,this._g,this._b),o=et(360*i.h),s=et(100*i.s),_=et(100*i.v);return 1==this._a?"hsv("+o+", "+s+"%, "+_+"%)":"hsva("+o+", "+s+"%, "+_+"%, "+this._roundA+")"},toHsl:function(){var i=rgbToHsl(this._r,this._g,this._b);return{h:360*i.h,s:i.s,l:i.l,a:this._a}},toHslString:function(){var i=rgbToHsl(this._r,this._g,this._b),o=et(360*i.h),s=et(100*i.s),_=et(100*i.l);return 1==this._a?"hsl("+o+", "+s+"%, "+_+"%)":"hsla("+o+", "+s+"%, "+_+"%, "+this._roundA+")"},toHex:function(i){return rgbToHex(this._r,this._g,this._b,i)},toHexString:function(i){return"#"+this.toHex(i)},toHex8:function(i){return rgbaToHex(this._r,this._g,this._b,this._a,i)},toHex8String:function(i){return"#"+this.toHex8(i)},toRgb:function(){return{r:et(this._r),g:et(this._g),b:et(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+et(this._r)+", "+et(this._g)+", "+et(this._b)+")":"rgba("+et(this._r)+", "+et(this._g)+", "+et(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:et(100*bound01(this._r,255))+"%",g:et(100*bound01(this._g,255))+"%",b:et(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+et(100*bound01(this._r,255))+"%, "+et(100*bound01(this._g,255))+"%, "+et(100*bound01(this._b,255))+"%)":"rgba("+et(100*bound01(this._r,255))+"%, "+et(100*bound01(this._g,255))+"%, "+et(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(es[rgbToHex(this._r,this._g,this._b,!0)]||!1)},toFilter:function(i){var o="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),s=o,_=this._gradientType?"GradientType = 1, ":"";if(i){var F=tinycolor(i);s="#"+rgbaToArgbHex(F._r,F._g,F._b,F._a)}return"progid:DXImageTransform.Microsoft.gradient("+_+"startColorstr="+o+",endColorstr="+s+")"},toString:function(i){var o=!!i;i=i||this._format;var s=!1,_=this._a<1&&this._a>=0;return!o&&_&&("hex"===i||"hex6"===i||"hex3"===i||"hex4"===i||"hex8"===i||"name"===i)?"name"===i&&0===this._a?this.toName():this.toRgbString():("rgb"===i&&(s=this.toRgbString()),"prgb"===i&&(s=this.toPercentageRgbString()),("hex"===i||"hex6"===i)&&(s=this.toHexString()),"hex3"===i&&(s=this.toHexString(!0)),"hex4"===i&&(s=this.toHex8String(!0)),"hex8"===i&&(s=this.toHex8String()),"name"===i&&(s=this.toName()),"hsl"===i&&(s=this.toHslString()),"hsv"===i&&(s=this.toHsvString()),s||this.toHexString())},clone:function(){return tinycolor(this.toString())},_applyModification:function(i,o){var s=i.apply(null,[this].concat([].slice.call(o)));return this._r=s._r,this._g=s._g,this._b=s._b,this.setAlpha(s._a),this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(i,o){return i.apply(null,[this].concat([].slice.call(o)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(triad,arguments)},tetrad:function(){return this._applyCombination(tetrad,arguments)}},tinycolor.fromRatio=function(i,o){if("object"==typeof i){var s={};for(var _ in i)i.hasOwnProperty(_)&&("a"===_?s[_]=i[_]:s[_]=convertToPercentage(i[_]));i=s}return tinycolor(i,o)},tinycolor.equals=function(i,o){return!!i&&!!o&&tinycolor(i).toRgbString()==tinycolor(o).toRgbString()},tinycolor.random=function(){return tinycolor.fromRatio({r:ei(),g:ei(),b:ei()})},tinycolor.mix=function(i,o,s){s=0===s?0:s||50;var _=tinycolor(i).toRgb(),F=tinycolor(o).toRgb(),N=s/100;return tinycolor({r:(F.r-_.r)*N+_.r,g:(F.g-_.g)*N+_.g,b:(F.b-_.b)*N+_.b,a:(F.a-_.a)*N+_.a})},tinycolor.readability=function(i,o){var s=tinycolor(i),_=tinycolor(o);return(F.max(s.getLuminance(),_.getLuminance())+.05)/(F.min(s.getLuminance(),_.getLuminance())+.05)},tinycolor.isReadable=function(i,o,s){var _,F,N=tinycolor.readability(i,o);switch(F=!1,(_=validateWCAG2Parms(s)).level+_.size){case"AAsmall":case"AAAlarge":F=N>=4.5;break;case"AAlarge":F=N>=3;break;case"AAAsmall":F=N>=7}return F},tinycolor.mostReadable=function(i,o,s){var _,F,N,j,Z=null,X=0;F=(s=s||{}).includeFallbackColors,N=s.level,j=s.size;for(var $=0;$<o.length;$++)(_=tinycolor.readability(i,o[$]))>X&&(X=_,Z=tinycolor(o[$]));return tinycolor.isReadable(i,Z,{level:N,size:j})||!F?Z:(s.includeFallbackColors=!1,tinycolor.mostReadable(i,["#fff","#000"],s))};var eo=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},es=tinycolor.hexNames=flip(eo);function flip(i){var o={};for(var s in i)i.hasOwnProperty(s)&&(o[i[s]]=s);return o}function boundAlpha(i){return(isNaN(i=parseFloat(i))||i<0||i>1)&&(i=1),i}function bound01(i,o){isOnePointZero(i)&&(i="100%");var s=isPercentage(i);return(i=er(o,en(0,parseFloat(i))),s&&(i=parseInt(i*o,10)/100),1e-6>F.abs(i-o))?1:i%o/parseFloat(o)}function clamp01(i){return er(1,en(0,i))}function parseIntFromHex(i){return parseInt(i,16)}function isOnePointZero(i){return"string"==typeof i&&-1!=i.indexOf(".")&&1===parseFloat(i)}function isPercentage(i){return"string"==typeof i&&-1!=i.indexOf("%")}function pad2(i){return 1==i.length?"0"+i:""+i}function convertToPercentage(i){return i<=1&&(i=100*i+"%"),i}function convertDecimalToHex(i){return F.round(255*parseFloat(i)).toString(16)}var el=(j="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",Z="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:RegExp("rgb"+j),rgba:RegExp("rgba"+Z),hsl:RegExp("hsl"+j),hsla:RegExp("hsla"+Z),hsv:RegExp("hsv"+j),hsva:RegExp("hsva"+Z),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function isValidCSSUnit(i){return!!el.CSS_UNIT.exec(i)}function stringInputToObject(i){i=i.replace(X,"").replace($,"").toLowerCase();var o,s=!1;if(eo[i])i=eo[i],s=!0;else if("transparent"==i)return{r:0,g:0,b:0,a:0,format:"name"};return(o=el.rgb.exec(i))?{r:o[1],g:o[2],b:o[3]}:(o=el.rgba.exec(i))?{r:o[1],g:o[2],b:o[3],a:o[4]}:(o=el.hsl.exec(i))?{h:o[1],s:o[2],l:o[3]}:(o=el.hsla.exec(i))?{h:o[1],s:o[2],l:o[3],a:o[4]}:(o=el.hsv.exec(i))?{h:o[1],s:o[2],v:o[3]}:(o=el.hsva.exec(i))?{h:o[1],s:o[2],v:o[3],a:o[4]}:(o=el.hex8.exec(i))?{r:parseIntFromHex(o[1]),g:parseIntFromHex(o[2]),b:parseIntFromHex(o[3]),a:parseIntFromHex(o[4])/255,format:s?"name":"hex8"}:(o=el.hex6.exec(i))?{r:parseIntFromHex(o[1]),g:parseIntFromHex(o[2]),b:parseIntFromHex(o[3]),format:s?"name":"hex"}:(o=el.hex4.exec(i))?{r:parseIntFromHex(o[1]+""+o[1]),g:parseIntFromHex(o[2]+""+o[2]),b:parseIntFromHex(o[3]+""+o[3]),a:parseIntFromHex(o[4]+""+o[4])/255,format:s?"name":"hex8"}:!!(o=el.hex3.exec(i))&&{r:parseIntFromHex(o[1]+""+o[1]),g:parseIntFromHex(o[2]+""+o[2]),b:parseIntFromHex(o[3]+""+o[3]),format:s?"name":"hex"}}function validateWCAG2Parms(i){var o,s;return o=((i=i||{level:"AA",size:"small"}).level||"AA").toUpperCase(),s=(i.size||"small").toLowerCase(),"AA"!==o&&"AAA"!==o&&(o="AA"),"small"!==s&&"large"!==s&&(s="small"),{level:o,size:s}}i.exports?i.exports=tinycolor:void 0!==(_=(function(){return tinycolor}).call(o,s,o,i))&&(i.exports=_)}(Math)},57060:function(i){"use strict";i.exports=float32,i.exports.float32=i.exports.float=float32,i.exports.fract32=i.exports.fract=fract32;var o=new Float32Array(1);function fract32(i,o){if(i.length){if(i instanceof Float32Array)return new Float32Array(i.length);o instanceof Float32Array||(o=float32(i));for(var s=0,_=o.length;s<_;s++)o[s]=i[s]-o[s];return o}return float32(i-float32(i))}function float32(i){return i.length?i instanceof Float32Array?i:new Float32Array(i):(o[0]=i,o[0])}},75686:function(i,o,s){"use strict";var _=s(25677);function getPropertyInPX(i,o){var s=_(getComputedStyle(i).getPropertyValue(o));return s[0]*toPX(s[1],i)}function getSizeBrutal(i,o){var s=document.createElement("div");s.style["font-size"]="128"+i,o.appendChild(s);var _=getPropertyInPX(s,"font-size")/128;return o.removeChild(s),_}function toPX(i,o){switch(o=o||document.body,i=(i||"px").trim().toLowerCase(),(o===window||o===document)&&(o=document.body),i){case"%":return o.clientHeight/100;case"ch":case"ex":return getSizeBrutal(i,o);case"em":return getPropertyInPX(o,"font-size");case"rem":return getPropertyInPX(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}i.exports=toPX},96892:function(i,o,s){"use strict";function reverse(i,o){for(var s,_=i.length,F=_-o;F<--_;)s=i[F],i[F++]=i[_],i[_]=s}function identity(i){return i}function transform(i){if(null==i)return identity;var o,s,_=i.scale[0],F=i.scale[1],N=i.translate[0],j=i.translate[1];return function(i,Z){Z||(o=s=0);var X=2,$=i.length,ee=Array($);for(ee[0]=(o+=i[0])*_+N,ee[1]=(s+=i[1])*F+j;X<$;)ee[X]=i[X],++X;return ee}}function feature(i,o){return"string"==typeof o&&(o=i.objects[o]),"GeometryCollection"===o.type?{type:"FeatureCollection",features:o.geometries.map(function(o){return feature_feature(i,o)})}:feature_feature(i,o)}function feature_feature(i,o){var s=o.id,_=o.bbox,F=null==o.properties?{}:o.properties,N=object(i,o);return null==s&&null==_?{type:"Feature",properties:F,geometry:N}:null==_?{type:"Feature",id:s,properties:F,geometry:N}:{type:"Feature",id:s,bbox:_,properties:F,geometry:N}}function object(i,o){var s=transform(i.transform),_=i.arcs;function arc(i,o){o.length&&o.pop();for(var F=_[i<0?~i:i],N=0,j=F.length;N<j;++N)o.push(s(F[N],N));i<0&&reverse(o,j)}function point(i){return s(i)}function line(i){for(var o=[],s=0,_=i.length;s<_;++s)arc(i[s],o);return o.length<2&&o.push(o[0]),o}function ring(i){for(var o=line(i);o.length<4;)o.push(o[0]);return o}function polygon(i){return i.map(ring)}function geometry(i){var o,s=i.type;switch(s){case"GeometryCollection":return{type:s,geometries:i.geometries.map(geometry)};case"Point":o=point(i.coordinates);break;case"MultiPoint":o=i.coordinates.map(point);break;case"LineString":o=line(i.arcs);break;case"MultiLineString":o=i.arcs.map(line);break;case"Polygon":o=polygon(i.arcs);break;case"MultiPolygon":o=i.arcs.map(polygon);break;default:return null}return{type:s,coordinates:o}}return geometry(o)}s.d(o,{zL:function(){return feature}})},73116:function(i,o,s){"use strict";var _=s(24511);i.exports=function(i){if("function"!=typeof i||!hasOwnProperty.call(i,"length"))return!1;try{if("number"!=typeof i.length||"function"!=typeof i.call||"function"!=typeof i.apply)return!1}catch(i){return!1}return!_(i)}},69190:function(i,o,s){"use strict";var _=s(24582),F=s(47403),N=s(9234),j=s(6048),resolveMessage=function(i,o){return i.replace("%v",j(o))};i.exports=function(i,o,s){if(!F(s))throw TypeError(resolveMessage(o,i));if(!_(i)){if("default"in s)return s.default;if(s.isOptional)return null}var j=N(s.errorMessage);throw _(j)||(j=o),TypeError(resolveMessage(j,i))}},18497:function(i){"use strict";i.exports=function(i){try{return i.toString()}catch(o){try{return String(i)}catch(i){return null}}}},6048:function(i,o,s){"use strict";var _=s(18497),F=/[\n\r\u2028\u2029]/g;i.exports=function(i){var o=_(i);return null===o?"<Non-coercible to string value>":(o.length>100&&(o=o.slice(0,99)+"…"),o=o.replace(F,function(i){switch(i){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("Unexpected character")}}))}},47403:function(i,o,s){"use strict";var _=s(24582),F={object:!0,function:!0,undefined:!0};i.exports=function(i){return!!_(i)&&hasOwnProperty.call(F,typeof i)}},82527:function(i,o,s){"use strict";var _=s(69190),F=s(84985);i.exports=function(i){return F(i)?i:_(i,"%v is not a plain function",arguments[1])}},84985:function(i,o,s){"use strict";var _=s(73116),F=/^\s*class[\s{/}]/,N=Function.prototype.toString;i.exports=function(i){return!(!_(i)||F.test(N.call(i)))}},24511:function(i,o,s){"use strict";var _=s(47403);i.exports=function(i){if(!_(i))return!1;try{if(!i.constructor)return!1;return i.constructor.prototype===i}catch(i){return!1}}},9234:function(i,o,s){"use strict";var _=s(24582),F=s(47403),N=Object.prototype.toString;i.exports=function(i){if(!_(i))return null;if(F(i)){var o=i.toString;if("function"!=typeof o||o===N)return null}try{return""+i}catch(i){return null}}},10424:function(i,o,s){"use strict";var _=s(69190),F=s(24582);i.exports=function(i){return F(i)?i:_(i,"Cannot use %v",arguments[1])}},24582:function(i){"use strict";var o=void 0;i.exports=function(i){return i!==o&&null!==i}},58404:function(i,o,s){"use strict";var _=s(13547),F=s(12129),N=s(12856).Buffer;s.g.__TYPEDARRAY_POOL||(s.g.__TYPEDARRAY_POOL={UINT8:F([32,0]),UINT16:F([32,0]),UINT32:F([32,0]),BIGUINT64:F([32,0]),INT8:F([32,0]),INT16:F([32,0]),INT32:F([32,0]),BIGINT64:F([32,0]),FLOAT:F([32,0]),DOUBLE:F([32,0]),DATA:F([32,0]),UINT8C:F([32,0]),BUFFER:F([32,0])});var j="undefined"!=typeof Uint8ClampedArray,Z="undefined"!=typeof BigUint64Array,X="undefined"!=typeof BigInt64Array,$=s.g.__TYPEDARRAY_POOL;$.UINT8C||($.UINT8C=F([32,0])),$.BIGUINT64||($.BIGUINT64=F([32,0])),$.BIGINT64||($.BIGINT64=F([32,0])),$.BUFFER||($.BUFFER=F([32,0]));var ee=$.DATA,et=$.BUFFER;function freeArrayBuffer(i){if(i){var o=i.length||i.byteLength;ee[_.log2(o)].push(i)}}function freeTypedArray(i){freeArrayBuffer(i.buffer)}function mallocArrayBuffer(i){var i=_.nextPow2(i),o=ee[_.log2(i)];return o.length>0?o.pop():new ArrayBuffer(i)}function mallocUint8(i){return new Uint8Array(mallocArrayBuffer(i),0,i)}function mallocUint16(i){return new Uint16Array(mallocArrayBuffer(2*i),0,i)}function mallocUint32(i){return new Uint32Array(mallocArrayBuffer(4*i),0,i)}function mallocInt8(i){return new Int8Array(mallocArrayBuffer(i),0,i)}function mallocInt16(i){return new Int16Array(mallocArrayBuffer(2*i),0,i)}function mallocInt32(i){return new Int32Array(mallocArrayBuffer(4*i),0,i)}function mallocFloat(i){return new Float32Array(mallocArrayBuffer(4*i),0,i)}function mallocDouble(i){return new Float64Array(mallocArrayBuffer(8*i),0,i)}function mallocUint8Clamped(i){return j?new Uint8ClampedArray(mallocArrayBuffer(i),0,i):mallocUint8(i)}function mallocBigUint64(i){return Z?new BigUint64Array(mallocArrayBuffer(8*i),0,i):null}function mallocBigInt64(i){return X?new BigInt64Array(mallocArrayBuffer(8*i),0,i):null}function mallocDataView(i){return new DataView(mallocArrayBuffer(i),0,i)}function mallocBuffer(i){i=_.nextPow2(i);var o=et[_.log2(i)];return o.length>0?o.pop():new N(i)}o.free=function(i){if(N.isBuffer(i))et[_.log2(i.length)].push(i);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(i)&&(i=i.buffer),!i)return;var o=i.length||i.byteLength;ee[0|_.log2(o)].push(i)}},o.freeUint8=o.freeUint16=o.freeUint32=o.freeBigUint64=o.freeInt8=o.freeInt16=o.freeInt32=o.freeBigInt64=o.freeFloat32=o.freeFloat=o.freeFloat64=o.freeDouble=o.freeUint8Clamped=o.freeDataView=freeTypedArray,o.freeArrayBuffer=freeArrayBuffer,o.freeBuffer=function(i){et[_.log2(i.length)].push(i)},o.malloc=function(i,o){if(void 0===o||"arraybuffer"===o)return mallocArrayBuffer(i);switch(o){case"uint8":return mallocUint8(i);case"uint16":return mallocUint16(i);case"uint32":return mallocUint32(i);case"int8":return mallocInt8(i);case"int16":return mallocInt16(i);case"int32":return mallocInt32(i);case"float":case"float32":return mallocFloat(i);case"double":case"float64":return mallocDouble(i);case"uint8_clamped":return mallocUint8Clamped(i);case"bigint64":return mallocBigInt64(i);case"biguint64":return mallocBigUint64(i);case"buffer":return mallocBuffer(i);case"data":case"dataview":return mallocDataView(i)}return null},o.mallocArrayBuffer=mallocArrayBuffer,o.mallocUint8=mallocUint8,o.mallocUint16=mallocUint16,o.mallocUint32=mallocUint32,o.mallocInt8=mallocInt8,o.mallocInt16=mallocInt16,o.mallocInt32=mallocInt32,o.mallocFloat32=o.mallocFloat=mallocFloat,o.mallocFloat64=o.mallocDouble=mallocDouble,o.mallocUint8Clamped=mallocUint8Clamped,o.mallocBigUint64=mallocBigUint64,o.mallocBigInt64=mallocBigInt64,o.mallocDataView=mallocDataView,o.mallocBuffer=mallocBuffer,o.clearCache=function(){for(var i=0;i<32;++i)$.UINT8[i].length=0,$.UINT16[i].length=0,$.UINT32[i].length=0,$.INT8[i].length=0,$.INT16[i].length=0,$.INT32[i].length=0,$.FLOAT[i].length=0,$.DOUBLE[i].length=0,$.BIGUINT64[i].length=0,$.BIGINT64[i].length=0,$.UINT8C[i].length=0,ee[i].length=0,et[i].length=0}},90448:function(i){var o=/[\'\"]/;i.exports=function(i){return i?(o.test(i.charAt(0))&&(i=i.substr(1)),o.test(i.charAt(i.length-1))&&(i=i.substr(0,i.length-1)),i):""}},93447:function(i){"use strict";i.exports=function(i,o,s){Array.isArray(s)||(s=[].slice.call(arguments,2));for(var _=0,F=s.length;_<F;_++){var N,j=s[_];for(var Z in j)if((void 0===o[Z]||Array.isArray(o[Z])||i[Z]!==o[Z])&&Z in o){if(!0===j[Z])N=o[Z];else if(!1===j[Z])continue;else if("function"==typeof j[Z]&&void 0===(N=j[Z](o[Z],i,o)))continue;i[Z]=N}}return i}},20588:function(i,o,s){function deprecate(i,o){if(config("noDeprecation"))return i;var s=!1;return function(){if(!s){if(config("throwDeprecation"))throw Error(o);config("traceDeprecation")?console.trace(o):console.warn(o),s=!0}return i.apply(this,arguments)}}function config(i){try{if(!s.g.localStorage)return!1}catch(i){return!1}var o=s.g.localStorage[i];return null!=o&&"true"===String(o).toLowerCase()}i.exports=deprecate},45920:function(i){i.exports=function(i){return i&&"object"==typeof i&&"function"==typeof i.copy&&"function"==typeof i.fill&&"function"==typeof i.readUInt8}},4936:function(i,o,s){"use strict";var _=s(47216),F=s(65481),N=s(21099),j=s(9187);function uncurryThis(i){return i.call.bind(i)}var Z="undefined"!=typeof BigInt,X="undefined"!=typeof Symbol,$=uncurryThis(Object.prototype.toString),ee=uncurryThis(Number.prototype.valueOf),et=uncurryThis(String.prototype.valueOf),er=uncurryThis(Boolean.prototype.valueOf);if(Z)var en=uncurryThis(BigInt.prototype.valueOf);if(X)var ei=uncurryThis(Symbol.prototype.valueOf);function checkBoxedPrimitive(i,o){if("object"!=typeof i)return!1;try{return o(i),!0}catch(i){return!1}}function isPromise(i){return"undefined"!=typeof Promise&&i instanceof Promise||null!==i&&"object"==typeof i&&"function"==typeof i.then&&"function"==typeof i.catch}function isArrayBufferView(i){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(i):j(i)||isDataView(i)}function isUint8Array(i){return"Uint8Array"===N(i)}function isUint8ClampedArray(i){return"Uint8ClampedArray"===N(i)}function isUint16Array(i){return"Uint16Array"===N(i)}function isUint32Array(i){return"Uint32Array"===N(i)}function isInt8Array(i){return"Int8Array"===N(i)}function isInt16Array(i){return"Int16Array"===N(i)}function isInt32Array(i){return"Int32Array"===N(i)}function isFloat32Array(i){return"Float32Array"===N(i)}function isFloat64Array(i){return"Float64Array"===N(i)}function isBigInt64Array(i){return"BigInt64Array"===N(i)}function isBigUint64Array(i){return"BigUint64Array"===N(i)}function isMapToString(i){return"[object Map]"===$(i)}function isMap(i){return"undefined"!=typeof Map&&(isMapToString.working?isMapToString(i):i instanceof Map)}function isSetToString(i){return"[object Set]"===$(i)}function isSet(i){return"undefined"!=typeof Set&&(isSetToString.working?isSetToString(i):i instanceof Set)}function isWeakMapToString(i){return"[object WeakMap]"===$(i)}function isWeakMap(i){return"undefined"!=typeof WeakMap&&(isWeakMapToString.working?isWeakMapToString(i):i instanceof WeakMap)}function isWeakSetToString(i){return"[object WeakSet]"===$(i)}function isWeakSet(i){return isWeakSetToString(i)}function isArrayBufferToString(i){return"[object ArrayBuffer]"===$(i)}function isArrayBuffer(i){return"undefined"!=typeof ArrayBuffer&&(isArrayBufferToString.working?isArrayBufferToString(i):i instanceof ArrayBuffer)}function isDataViewToString(i){return"[object DataView]"===$(i)}function isDataView(i){return"undefined"!=typeof DataView&&(isDataViewToString.working?isDataViewToString(i):i instanceof DataView)}o.isArgumentsObject=_,o.isGeneratorFunction=F,o.isTypedArray=j,o.isPromise=isPromise,o.isArrayBufferView=isArrayBufferView,o.isUint8Array=isUint8Array,o.isUint8ClampedArray=isUint8ClampedArray,o.isUint16Array=isUint16Array,o.isUint32Array=isUint32Array,o.isInt8Array=isInt8Array,o.isInt16Array=isInt16Array,o.isInt32Array=isInt32Array,o.isFloat32Array=isFloat32Array,o.isFloat64Array=isFloat64Array,o.isBigInt64Array=isBigInt64Array,o.isBigUint64Array=isBigUint64Array,isMapToString.working="undefined"!=typeof Map&&isMapToString(new Map),o.isMap=isMap,isSetToString.working="undefined"!=typeof Set&&isSetToString(new Set),o.isSet=isSet,isWeakMapToString.working="undefined"!=typeof WeakMap&&isWeakMapToString(new WeakMap),o.isWeakMap=isWeakMap,isWeakSetToString.working="undefined"!=typeof WeakSet&&isWeakSetToString(new WeakSet),o.isWeakSet=isWeakSet,isArrayBufferToString.working="undefined"!=typeof ArrayBuffer&&isArrayBufferToString(new ArrayBuffer),o.isArrayBuffer=isArrayBuffer,isDataViewToString.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&isDataViewToString(new DataView(new ArrayBuffer(1),0,1)),o.isDataView=isDataView;var eo="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function isSharedArrayBufferToString(i){return"[object SharedArrayBuffer]"===$(i)}function isSharedArrayBuffer(i){return void 0!==eo&&(void 0===isSharedArrayBufferToString.working&&(isSharedArrayBufferToString.working=isSharedArrayBufferToString(new eo)),isSharedArrayBufferToString.working?isSharedArrayBufferToString(i):i instanceof eo)}function isAsyncFunction(i){return"[object AsyncFunction]"===$(i)}function isMapIterator(i){return"[object Map Iterator]"===$(i)}function isSetIterator(i){return"[object Set Iterator]"===$(i)}function isGeneratorObject(i){return"[object Generator]"===$(i)}function isWebAssemblyCompiledModule(i){return"[object WebAssembly.Module]"===$(i)}function isNumberObject(i){return checkBoxedPrimitive(i,ee)}function isStringObject(i){return checkBoxedPrimitive(i,et)}function isBooleanObject(i){return checkBoxedPrimitive(i,er)}function isBigIntObject(i){return Z&&checkBoxedPrimitive(i,en)}function isSymbolObject(i){return X&&checkBoxedPrimitive(i,ei)}function isBoxedPrimitive(i){return isNumberObject(i)||isStringObject(i)||isBooleanObject(i)||isBigIntObject(i)||isSymbolObject(i)}function isAnyArrayBuffer(i){return"undefined"!=typeof Uint8Array&&(isArrayBuffer(i)||isSharedArrayBuffer(i))}o.isSharedArrayBuffer=isSharedArrayBuffer,o.isAsyncFunction=isAsyncFunction,o.isMapIterator=isMapIterator,o.isSetIterator=isSetIterator,o.isGeneratorObject=isGeneratorObject,o.isWebAssemblyCompiledModule=isWebAssemblyCompiledModule,o.isNumberObject=isNumberObject,o.isStringObject=isStringObject,o.isBooleanObject=isBooleanObject,o.isBigIntObject=isBigIntObject,o.isSymbolObject=isSymbolObject,o.isBoxedPrimitive=isBoxedPrimitive,o.isAnyArrayBuffer=isAnyArrayBuffer,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(i){Object.defineProperty(o,i,{enumerable:!1,value:function(){throw Error(i+" is not supported in userland")}})})},43827:function(i,o,s){var _=s(90386),F=Object.getOwnPropertyDescriptors||function(i){for(var o=Object.keys(i),s={},_=0;_<o.length;_++)s[o[_]]=Object.getOwnPropertyDescriptor(i,o[_]);return s},N=/%[sdj%]/g;o.format=function(i){if(!isString(i)){for(var o=[],s=0;s<arguments.length;s++)o.push(inspect(arguments[s]));return o.join(" ")}for(var s=1,_=arguments,F=_.length,j=String(i).replace(N,function(i){if("%%"===i)return"%";if(s>=F)return i;switch(i){case"%s":return String(_[s++]);case"%d":return Number(_[s++]);case"%j":try{return JSON.stringify(_[s++])}catch(i){return"[Circular]"}default:return i}}),Z=_[s];s<F;Z=_[++s])isNull(Z)||!isObject(Z)?j+=" "+Z:j+=" "+inspect(Z);return j},o.deprecate=function(i,s){if(void 0!==_&&!0===_.noDeprecation)return i;if(void 0===_)return function(){return o.deprecate(i,s).apply(this,arguments)};var F=!1;return function(){if(!F){if(_.throwDeprecation)throw Error(s);_.traceDeprecation?console.trace(s):console.error(s),F=!0}return i.apply(this,arguments)}};var j={},Z=/^$/;if(_.env.NODE_DEBUG){var X=_.env.NODE_DEBUG;Z=RegExp("^"+(X=X.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function inspect(i,s){var _={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(_.depth=arguments[2]),arguments.length>=4&&(_.colors=arguments[3]),isBoolean(s)?_.showHidden=s:s&&o._extend(_,s),isUndefined(_.showHidden)&&(_.showHidden=!1),isUndefined(_.depth)&&(_.depth=2),isUndefined(_.colors)&&(_.colors=!1),isUndefined(_.customInspect)&&(_.customInspect=!0),_.colors&&(_.stylize=stylizeWithColor),formatValue(_,i,_.depth)}function stylizeWithColor(i,o){var s=inspect.styles[o];return s?"\x1b["+inspect.colors[s][0]+"m"+i+"\x1b["+inspect.colors[s][1]+"m":i}function stylizeNoColor(i,o){return i}function arrayToHash(i){var o={};return i.forEach(function(i,s){o[i]=!0}),o}function formatValue(i,s,_){if(i.customInspect&&s&&isFunction(s.inspect)&&s.inspect!==o.inspect&&!(s.constructor&&s.constructor.prototype===s)){var F,N=s.inspect(_,i);return isString(N)||(N=formatValue(i,N,_)),N}var j=formatPrimitive(i,s);if(j)return j;var Z=Object.keys(s),X=arrayToHash(Z);if(i.showHidden&&(Z=Object.getOwnPropertyNames(s)),isError(s)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return formatError(s);if(0===Z.length){if(isFunction(s)){var $=s.name?": "+s.name:"";return i.stylize("[Function"+$+"]","special")}if(isRegExp(s))return i.stylize(RegExp.prototype.toString.call(s),"regexp");if(isDate(s))return i.stylize(Date.prototype.toString.call(s),"date");if(isError(s))return formatError(s)}var ee="",et=!1,er=["{","}"];return(isArray(s)&&(et=!0,er=["[","]"]),isFunction(s)&&(ee=" [Function"+(s.name?": "+s.name:"")+"]"),isRegExp(s)&&(ee=" "+RegExp.prototype.toString.call(s)),isDate(s)&&(ee=" "+Date.prototype.toUTCString.call(s)),isError(s)&&(ee=" "+formatError(s)),0!==Z.length||et&&0!=s.length)?_<0?isRegExp(s)?i.stylize(RegExp.prototype.toString.call(s),"regexp"):i.stylize("[Object]","special"):(i.seen.push(s),F=et?formatArray(i,s,_,X,Z):Z.map(function(o){return formatProperty(i,s,_,X,o,et)}),i.seen.pop(),reduceToSingleString(F,ee,er)):er[0]+ee+er[1]}function formatPrimitive(i,o){if(isUndefined(o))return i.stylize("undefined","undefined");if(isString(o)){var s="'"+JSON.stringify(o).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return i.stylize(s,"string")}return isNumber(o)?i.stylize(""+o,"number"):isBoolean(o)?i.stylize(""+o,"boolean"):isNull(o)?i.stylize("null","null"):void 0}function formatError(i){return"["+Error.prototype.toString.call(i)+"]"}function formatArray(i,o,s,_,F){for(var N=[],j=0,Z=o.length;j<Z;++j)hasOwnProperty(o,String(j))?N.push(formatProperty(i,o,s,_,String(j),!0)):N.push("");return F.forEach(function(F){F.match(/^\d+$/)||N.push(formatProperty(i,o,s,_,F,!0))}),N}function formatProperty(i,o,s,_,F,N){var j,Z,X;if((X=Object.getOwnPropertyDescriptor(o,F)||{value:o[F]}).get?Z=X.set?i.stylize("[Getter/Setter]","special"):i.stylize("[Getter]","special"):X.set&&(Z=i.stylize("[Setter]","special")),hasOwnProperty(_,F)||(j="["+F+"]"),!Z&&(0>i.seen.indexOf(X.value)?(Z=isNull(s)?formatValue(i,X.value,null):formatValue(i,X.value,s-1)).indexOf("\n")>-1&&(Z=N?Z.split("\n").map(function(i){return"  "+i}).join("\n").slice(2):"\n"+Z.split("\n").map(function(i){return"   "+i}).join("\n")):Z=i.stylize("[Circular]","special")),isUndefined(j)){if(N&&F.match(/^\d+$/))return Z;(j=JSON.stringify(""+F)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(j=j.slice(1,-1),j=i.stylize(j,"name")):(j=j.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),j=i.stylize(j,"string"))}return j+": "+Z}function reduceToSingleString(i,o,s){var _=0;return i.reduce(function(i,o){return _++,o.indexOf("\n")>=0&&_++,i+o.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?s[0]+(""===o?"":o+"\n ")+" "+i.join(",\n  ")+" "+s[1]:s[0]+o+" "+i.join(", ")+" "+s[1]}function isArray(i){return Array.isArray(i)}function isBoolean(i){return"boolean"==typeof i}function isNull(i){return null===i}function isNullOrUndefined(i){return null==i}function isNumber(i){return"number"==typeof i}function isString(i){return"string"==typeof i}function isSymbol(i){return"symbol"==typeof i}function isUndefined(i){return void 0===i}function isRegExp(i){return isObject(i)&&"[object RegExp]"===objectToString(i)}function isObject(i){return"object"==typeof i&&null!==i}function isDate(i){return isObject(i)&&"[object Date]"===objectToString(i)}function isError(i){return isObject(i)&&("[object Error]"===objectToString(i)||i instanceof Error)}function isFunction(i){return"function"==typeof i}function isPrimitive(i){return null===i||"boolean"==typeof i||"number"==typeof i||"string"==typeof i||"symbol"==typeof i||void 0===i}function objectToString(i){return Object.prototype.toString.call(i)}function pad(i){return i<10?"0"+i.toString(10):i.toString(10)}o.debuglog=function(i){if(!j[i=i.toUpperCase()]){if(Z.test(i)){var s=_.pid;j[i]=function(){var _=o.format.apply(o,arguments);console.error("%s %d: %s",i,s,_)}}else j[i]=function(){}}return j[i]},o.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},o.types=s(4936),o.isArray=isArray,o.isBoolean=isBoolean,o.isNull=isNull,o.isNullOrUndefined=isNullOrUndefined,o.isNumber=isNumber,o.isString=isString,o.isSymbol=isSymbol,o.isUndefined=isUndefined,o.isRegExp=isRegExp,o.types.isRegExp=isRegExp,o.isObject=isObject,o.isDate=isDate,o.types.isDate=isDate,o.isError=isError,o.types.isNativeError=isError,o.isFunction=isFunction,o.isPrimitive=isPrimitive,o.isBuffer=s(45920);var $=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var i=new Date,o=[pad(i.getHours()),pad(i.getMinutes()),pad(i.getSeconds())].join(":");return[i.getDate(),$[i.getMonth()],o].join(" ")}function hasOwnProperty(i,o){return Object.prototype.hasOwnProperty.call(i,o)}o.log=function(){console.log("%s - %s",timestamp(),o.format.apply(o,arguments))},o.inherits=s(42018),o._extend=function(i,o){if(!o||!isObject(o))return i;for(var s=Object.keys(o),_=s.length;_--;)i[s[_]]=o[s[_]];return i};var ee="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function callbackifyOnRejected(i,o){if(!i){var s=Error("Promise was rejected with a falsy value");s.reason=i,i=s}return o(i)}function callbackify(i){if("function"!=typeof i)throw TypeError('The "original" argument must be of type Function');function callbackified(){for(var o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);var F=o.pop();if("function"!=typeof F)throw TypeError("The last argument must be of type Function");var N=this,cb=function(){return F.apply(N,arguments)};i.apply(this,o).then(function(i){_.nextTick(cb.bind(null,null,i))},function(i){_.nextTick(callbackifyOnRejected.bind(null,i,cb))})}return Object.setPrototypeOf(callbackified,Object.getPrototypeOf(i)),Object.defineProperties(callbackified,F(i)),callbackified}o.promisify=function(i){if("function"!=typeof i)throw TypeError('The "original" argument must be of type Function');if(ee&&i[ee]){var fn=i[ee];if("function"!=typeof fn)throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(fn,ee,{value:fn,enumerable:!1,writable:!1,configurable:!0}),fn}function fn(){for(var o,s,_=new Promise(function(i,_){o=i,s=_}),F=[],N=0;N<arguments.length;N++)F.push(arguments[N]);F.push(function(i,_){i?s(i):o(_)});try{i.apply(this,F)}catch(i){s(i)}return _}return Object.setPrototypeOf(fn,Object.getPrototypeOf(i)),ee&&Object.defineProperty(fn,ee,{value:fn,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(fn,F(i))},o.promisify.custom=ee,o.callbackify=callbackify},40372:function(i,o,s){var _=s(86249);i.exports=function(i){return _("webgl",i)}},21099:function(i,o,s){"use strict";var _=s(31353),F=s(72077),N=s(6614),j=s(40383),Z=N("Object.prototype.toString"),X=s(84543)(),$="undefined"==typeof globalThis?s.g:globalThis,ee=F(),et=N("String.prototype.slice"),er={},en=Object.getPrototypeOf;X&&j&&en&&_(ee,function(i){if("function"==typeof $[i]){var o=new $[i];if(Symbol.toStringTag in o){var s=en(o),_=j(s,Symbol.toStringTag);_||(_=j(en(s),Symbol.toStringTag)),er[i]=_.get}}});var tryTypedArrays=function(i){var o=!1;return _(er,function(s,_){if(!o)try{var F=s.call(i);F===_&&(o=F)}catch(i){}}),o},ei=s(9187);i.exports=function(i){return!!ei(i)&&(X&&Symbol.toStringTag in i?tryTypedArrays(i):et(Z(i),8,-1))}},3961:function(i,o,s){var _=s(63489),F=s(56131),N=_.instance();function ChineseCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}ChineseCalendar.prototype=new _.baseCalendar,F(ChineseCalendar.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(i,o){if("string"==typeof i){var s=i.match(Z);return s?s[0]:""}var _=this._validateYear(i),F=i.month(),N=""+this.toChineseMonth(_,F);return o&&N.length<2&&(N="0"+N),this.isIntercalaryMonth(_,F)&&(N+="i"),N},monthNames:function(i){if("string"==typeof i){var o=i.match(X);return o?o[0]:""}var s=this._validateYear(i),_=i.month(),F=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][this.toChineseMonth(s,_)-1];return this.isIntercalaryMonth(s,_)&&(F="闰"+F),F},monthNamesShort:function(i){if("string"==typeof i){var o=i.match($);return o?o[0]:""}var s=this._validateYear(i),_=i.month(),F=["一","二","三","四","五","六","七","八","九","十","十一","十二"][this.toChineseMonth(s,_)-1];return this.isIntercalaryMonth(s,_)&&(F="闰"+F),F},parseMonth:function(i,o){i=this._validateYear(i);var s,_=parseInt(o);if(isNaN(_))"闰"===o[0]&&(s=!0,o=o.substring(1)),"月"===o[o.length-1]&&(o=o.substring(0,o.length-1)),_=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(o);else{var F=o[o.length-1];s="i"===F||"I"===F}return this.toMonthIndex(i,_,s)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(i,o){if(i.year&&(i=i.year()),"number"!=typeof i||i<1888||i>2111)throw o.replace(/\{0\}/,this.local.name);return i},toMonthIndex:function(i,o,s){var F=this.intercalaryMonth(i);if(s&&o!==F||o<1||o>12)throw _.local.invalidMonth.replace(/\{0\}/,this.local.name);return F?!s&&o<=F?o-1:o:o-1},toChineseMonth:function(i,o){i.year&&(o=(i=i.year()).month());var s=this.intercalaryMonth(i);if(o<0||o>(s?12:11))throw _.local.invalidMonth.replace(/\{0\}/,this.local.name);return s?o<s?o+1:o:o+1},intercalaryMonth:function(i){return ee[(i=this._validateYear(i))-ee[0]]>>13},isIntercalaryMonth:function(i,o){i.year&&(o=(i=i.year()).month());var s=this.intercalaryMonth(i);return!!s&&s===o},leapYear:function(i){return 0!==this.intercalaryMonth(i)},weekOfYear:function(i,o,s){var F,j=et[this._validateYear(i,_.local.invalidyear)-et[0]];return(F=N.newDate(j>>9&4095,j>>5&15,31&j)).add(4-(F.dayOfWeek()||7),"d"),1+Math.floor((this.toJD(i,o,s)-F.toJD())/7)},monthsInYear:function(i){return this.leapYear(i)?13:12},daysInMonth:function(i,o){i.year&&(o=i.month(),i=i.year());var s=ee[(i=this._validateYear(i))-ee[0]];if(o>(s>>13?12:11))throw _.local.invalidMonth.replace(/\{0\}/,this.local.name);return s&1<<12-o?30:29},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var F=this._validate(i,Z,s,_.local.invalidDate);i=this._validateYear(F.year()),o=F.month(),s=F.day();var j=this.isIntercalaryMonth(i,o),Z=this.toChineseMonth(i,o),X=toSolar(i,Z,s,j);return N.toJD(X.year,X.month,X.day)},fromJD:function(i){var o=N.fromJD(i),s=toLunar(o.year(),o.month(),o.day()),_=this.toMonthIndex(s.year,s.month,s.isIntercalary);return this.newDate(s.year,_,s.day)},fromString:function(i){var o=i.match(j),s=this._validateYear(+o[1]),_=+o[2],F=!!o[3],N=this.toMonthIndex(s,_,F),Z=+o[4];return this.newDate(s,N,Z)},add:function(i,o,s){var _=i.year(),F=i.month(),N=this.isIntercalaryMonth(_,F),j=this.toChineseMonth(_,F),Z=Object.getPrototypeOf(ChineseCalendar.prototype).add.call(this,i,o,s);if("y"===s){var X=Z.year(),$=Z.month(),ee=this.isIntercalaryMonth(X,j),et=N&&ee?this.toMonthIndex(X,j,!0):this.toMonthIndex(X,j,!1);et!==$&&Z.month(et)}return Z}});var j=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,Z=/^\d?\d[iI]?/m,X=/^闰?十?[一二三四五六七八九]?月/m,$=/^闰?十?[一二三四五六七八九]?/m;_.calendars.chinese=ChineseCalendar;var ee=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],et=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function toLunar(i,o,s,_){if("object"==typeof i)F=i,N=o||{};else{var F,N,j,Z;if(!("number"==typeof i&&i>=1888&&i<=2111))throw Error("Solar year outside range 1888-2111");if(!("number"==typeof o&&o>=1&&o<=12))throw Error("Solar month outside range 1 - 12");if(!("number"==typeof s&&s>=1&&s<=31))throw Error("Solar day outside range 1 - 31");F={year:i,month:o,day:s},N=_||{}}var X=et[F.year-et[0]],$=F.year<<9|F.month<<5|F.day;N.year=$>=X?F.year:F.year-1;var er=new Date((X=et[N.year-et[0]])>>9&4095,(X>>5&15)-1,31&X);j=Math.round((new Date(F.year,F.month-1,F.day)-er)/864e5);var en=ee[N.year-ee[0]];for(Z=0;Z<13;Z++){var ei=en&1<<12-Z?30:29;if(j<ei)break;j-=ei}var eo=en>>13;return!eo||Z<eo?(N.isIntercalary=!1,N.month=1+Z):(Z===eo?N.isIntercalary=!0:N.isIntercalary=!1,N.month=Z),N.day=1+j,N}function toSolar(i,o,s,_,F){if("object"==typeof i)X=i,Z=o||{};else{var N,j,Z,X,$;if(!("number"==typeof i&&i>=1888&&i<=2111))throw Error("Lunar year outside range 1888-2111");if(!("number"==typeof o&&o>=1&&o<=12))throw Error("Lunar month outside range 1 - 12");if(!("number"==typeof s&&s>=1&&s<=30))throw Error("Lunar day outside range 1 - 30");"object"==typeof _?($=!1,Z=_):($=!!_,Z=F||{}),X={year:i,month:o,day:s,isIntercalary:$}}N=X.day-1;var er=ee[X.year-ee[0]],en=er>>13;j=en?X.month>en?X.month:X.isIntercalary?X.month:X.month-1:X.month-1;for(var ei=0;ei<j;ei++)N+=er&1<<12-ei?30:29;var eo=et[X.year-et[0]],es=new Date(eo>>9&4095,(eo>>5&15)-1,(31&eo)+N);return Z.year=es.getFullYear(),Z.month=1+es.getMonth(),Z.day=es.getDate(),Z}},38751:function(i,o,s){var _=s(63489),F=s(56131);function CopticCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}CopticCalendar.prototype=new _.baseCalendar,F(CopticCalendar.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),i=o.year()+(0>o.year()?1:0);return i%4==3||i%4==-1},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear),13},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(-_.dayOfWeek(),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(13===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate);return(i=F.year())<0&&i++,F.day()+(F.month()-1)*30+(i-1)*365+Math.floor(i/4)+this.jdEpoch-1},fromJD:function(i){var o=Math.floor(i)+.5-this.jdEpoch,s=Math.floor((o-Math.floor((o+366)/1461))/365)+1;s<=0&&s--;var _=Math.floor((o=Math.floor(i)+.5-this.newDate(s,1,1).toJD())/30)+1,F=o-(_-1)*30+1;return this.newDate(s,_,F)}}),_.calendars.coptic=CopticCalendar},86825:function(i,o,s){var _=s(63489),F=s(56131);function DiscworldCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}DiscworldCalendar.prototype=new _.baseCalendar,F(DiscworldCalendar.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(i){return this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),!1},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),13},daysInYear:function(i){return this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),400},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(-_.dayOfWeek(),"d"),Math.floor((_.dayOfYear()-1)/8)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth);return this.daysPerMonth[s.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(i,o,s){return(this._validate(i,o,s,_.local.invalidDate).day()+1)%8},weekDay:function(i,o,s){var _=this.dayOfWeek(i,o,s);return _>=2&&_<=6},extraInfo:function(i,o,s){return{century:N[Math.floor((this._validate(i,o,s,_.local.invalidDate).year()-1)/100)+1]||""}},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate);return i=F.year()+(0>F.year()?1:0),o=F.month(),(s=F.day())+(o>1?16:0)+(o>2?(o-2)*32:0)+(i-1)*400+this.jdEpoch-1},fromJD:function(i){var o=Math.floor((i=Math.floor(i+.5)-Math.floor(this.jdEpoch)-1)/400)+1;i-=(o-1)*400;var s=Math.floor((i+=i>15?16:0)/32)+1,_=i-(s-1)*32+1;return this.newDate(o<=0?o-1:o,s,_)}});var N={20:"Fruitbat",21:"Anchovy"};_.calendars.discworld=DiscworldCalendar},37715:function(i,o,s){var _=s(63489),F=s(56131);function EthiopianCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}EthiopianCalendar.prototype=new _.baseCalendar,F(EthiopianCalendar.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),i=o.year()+(0>o.year()?1:0);return i%4==3||i%4==-1},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear),13},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(-_.dayOfWeek(),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(13===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate);return(i=F.year())<0&&i++,F.day()+(F.month()-1)*30+(i-1)*365+Math.floor(i/4)+this.jdEpoch-1},fromJD:function(i){var o=Math.floor(i)+.5-this.jdEpoch,s=Math.floor((o-Math.floor((o+366)/1461))/365)+1;s<=0&&s--;var _=Math.floor((o=Math.floor(i)+.5-this.newDate(s,1,1).toJD())/30)+1,F=o-(_-1)*30+1;return this.newDate(s,_,F)}}),_.calendars.ethiopian=EthiopianCalendar},99384:function(i,o,s){var _=s(63489),F=s(56131);function HebrewCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}function mod(i,o){return i-o*Math.floor(i/o)}HebrewCalendar.prototype=new _.baseCalendar,F(HebrewCalendar.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear);return this._leapYear(o.year())},_leapYear:function(i){return 7>mod(7*(i=i<0?i+1:i)+1,19)},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),this._leapYear(i.year?i.year():i)?13:12},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(-_.dayOfWeek(),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInYear:function(i){return i=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear).year(),this.toJD(-1===i?1:i+1,7,1)-this.toJD(i,7,1)},daysInMonth:function(i,o){return i.year&&(o=i.month(),i=i.year()),this._validate(i,o,this.minDay,_.local.invalidMonth),12===o&&this.leapYear(i)?30:8===o&&5===mod(this.daysInYear(i),10)?30:9===o&&3===mod(this.daysInYear(i),10)?29:this.daysPerMonth[o-1]},weekDay:function(i,o,s){return 6!==this.dayOfWeek(i,o,s)},extraInfo:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate);return{yearType:(this.leapYear(F)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(F)%10-3]}},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate);i=F.year(),o=F.month(),s=F.day();var N=i<=0?i+1:i,j=this.jdEpoch+this._delay1(N)+this._delay2(N)+s+1;if(o<7){for(var Z=7;Z<=this.monthsInYear(i);Z++)j+=this.daysInMonth(i,Z);for(var Z=1;Z<o;Z++)j+=this.daysInMonth(i,Z)}else for(var Z=7;Z<o;Z++)j+=this.daysInMonth(i,Z);return j},_delay1:function(i){var o=Math.floor((235*i-234)/19),s=29*o+Math.floor((12084+13753*o)/25920);return 3>mod(3*(s+1),7)&&s++,s},_delay2:function(i){var o=this._delay1(i-1),s=this._delay1(i);return this._delay1(i+1)-s==356?2:s-o==382?1:0},fromJD:function(i){for(var o=Math.floor(((i=Math.floor(i)+.5)-this.jdEpoch)*98496/35975351)-1;i>=this.toJD(-1===o?1:o+1,7,1);)o++;for(var s=i<this.toJD(o,1,1)?7:1;i>this.toJD(o,s,this.daysInMonth(o,s));)s++;var _=i-this.toJD(o,s,1)+1;return this.newDate(o,s,_)}}),_.calendars.hebrew=HebrewCalendar},43805:function(i,o,s){var _=s(63489),F=s(56131);function IslamicCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}IslamicCalendar.prototype=new _.baseCalendar,F(IslamicCalendar.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(i){return(11*this._validate(i,this.minMonth,this.minDay,_.local.invalidYear).year()+14)%30<11},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(-_.dayOfWeek(),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInYear:function(i){return this.leapYear(i)?355:354},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(12===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 5!==this.dayOfWeek(i,o,s)},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate);return i=F.year(),o=F.month(),(s=F.day())+Math.ceil(29.5*(o-1))+((i=i<=0?i+1:i)-1)*354+Math.floor((3+11*i)/30)+this.jdEpoch-1},fromJD:function(i){var o=Math.floor((30*((i=Math.floor(i)+.5)-this.jdEpoch)+10646)/10631);o=o<=0?o-1:o;var s=Math.min(12,Math.ceil((i-29-this.toJD(o,1,1))/29.5)+1),_=i-this.toJD(o,s,1)+1;return this.newDate(o,s,_)}}),_.calendars.islamic=IslamicCalendar},88874:function(i,o,s){var _=s(63489),F=s(56131);function JulianCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}JulianCalendar.prototype=new _.baseCalendar,F(JulianCalendar.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),i=0>o.year()?o.year()+1:o.year();return i%4==0},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(4-(_.dayOfWeek()||7),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate);return i=F.year(),o=F.month(),s=F.day(),i<0&&i++,o<=2&&(i--,o+=12),Math.floor(365.25*(i+4716))+Math.floor(30.6001*(o+1))+s-1524.5},fromJD:function(i){var o=Math.floor(i+.5)+1524,s=Math.floor((o-122.1)/365.25),_=Math.floor(365.25*s),F=Math.floor((o-_)/30.6001),N=F-Math.floor(F<14?1:13),j=s-Math.floor(N>2?4716:4715),Z=o-_-Math.floor(30.6001*F);return j<=0&&j--,this.newDate(j,N,Z)}}),_.calendars.julian=JulianCalendar},83290:function(i,o,s){var _=s(63489),F=s(56131);function MayanCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}function mod(i,o){return i-o*Math.floor(i/o)}MayanCalendar.prototype=new _.baseCalendar,F(MayanCalendar.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(i){return this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),!1},formatYear:function(i){var o=Math.floor((i=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear).year())/400);return i%=400,o+"."+Math.floor((i+=i<0?400:0)/20)+"."+i%20},forYear:function(i){if((i=i.split(".")).length<3)throw"Invalid Mayan year";for(var o=0,s=0;s<i.length;s++){var _=parseInt(i[s],10);if(Math.abs(_)>19||s>0&&_<0)throw"Invalid Mayan year";o=20*o+_}return o},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),18},weekOfYear:function(i,o,s){return this._validate(i,o,s,_.local.invalidDate),0},daysInYear:function(i){return this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),360},daysInMonth:function(i,o){return this._validate(i,o,this.minDay,_.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(i,o,s){return this._validate(i,o,s,_.local.invalidDate).day()},weekDay:function(i,o,s){return this._validate(i,o,s,_.local.invalidDate),!0},extraInfo:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate).toJD(),N=this._toHaab(F),j=this._toTzolkin(F);return{haabMonthName:this.local.haabMonths[N[0]-1],haabMonth:N[0],haabDay:N[1],tzolkinDayName:this.local.tzolkinMonths[j[0]-1],tzolkinDay:j[0],tzolkinTrecena:j[1]}},_toHaab:function(i){var o=mod((i-=this.jdEpoch)+8+340,365);return[Math.floor(o/20)+1,mod(o,20)]},_toTzolkin:function(i){var o;return[mod((i-=this.jdEpoch)+20-1,20)+1,mod(i+4-1,13)+1]},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate);return F.day()+20*F.month()+360*F.year()+this.jdEpoch},fromJD:function(i){var o=Math.floor((i=Math.floor(i)+.5-this.jdEpoch)/360);i%=360;var s=Math.floor((i+=i<0?360:0)/20),_=i%20;return this.newDate(o,s,_)}}),_.calendars.mayan=MayanCalendar},29108:function(i,o,s){var _=s(63489),F=s(56131);function NanakshahiCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}NanakshahiCalendar.prototype=new _.baseCalendar;var N=_.instance("gregorian");F(NanakshahiCalendar.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear||_.regionalOptions[""].invalidYear);return N.leapYear(o.year()+(1>o.year()?1:0)+1469)},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(1-(_.dayOfWeek()||7),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(12===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidMonth),i=F.year();i<0&&i++;for(var j=F.day(),Z=1;Z<F.month();Z++)j+=this.daysPerMonth[Z-1];return j+N.toJD(i+1468,3,13)},fromJD:function(i){for(var o=Math.floor(((i=Math.floor(i+.5))-(this.jdEpoch-1))/366);i>=this.toJD(o+1,1,1);)o++;for(var s=i-Math.floor(this.toJD(o,1,1)+.5)+1,_=1;s>this.daysInMonth(o,_);)s-=this.daysInMonth(o,_),_++;return this.newDate(o,_,s)}}),_.calendars.nanakshahi=NanakshahiCalendar},55422:function(i,o,s){var _=s(63489),F=s(56131);function NepaliCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}NepaliCalendar.prototype=new _.baseCalendar,F(NepaliCalendar.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(i){return this.daysInYear(i)!==this.daysPerYear},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(-_.dayOfWeek(),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInYear:function(i){if(i=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[i])return this.daysPerYear;for(var o=0,s=this.minMonth;s<=12;s++)o+=this.NEPALI_CALENDAR_DATA[i][s];return o},daysInMonth:function(i,o){return i.year&&(o=i.month(),i=i.year()),this._validate(i,o,this.minDay,_.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[i]?this.daysPerMonth[o-1]:this.NEPALI_CALENDAR_DATA[i][o]},weekDay:function(i,o,s){return 6!==this.dayOfWeek(i,o,s)},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate);i=F.year(),o=F.month(),s=F.day();var N=_.instance(),j=0,Z=o,X=i;this._createMissingCalendarData(i);var $=i-(Z>9||9===Z&&s>=this.NEPALI_CALENDAR_DATA[X][0]?56:57);for(9!==o&&(j=s,Z--);9!==Z;)Z<=0&&(Z=12,X--),j+=this.NEPALI_CALENDAR_DATA[X][Z],Z--;return 9===o?(j+=s-this.NEPALI_CALENDAR_DATA[X][0])<0&&(j+=N.daysInYear($)):j+=this.NEPALI_CALENDAR_DATA[X][9]-this.NEPALI_CALENDAR_DATA[X][0],N.newDate($,1,1).add(j,"d").toJD()},fromJD:function(i){var o=_.instance().fromJD(i),s=o.year(),F=o.dayOfYear(),N=s+56;this._createMissingCalendarData(N);for(var j=9,Z=this.NEPALI_CALENDAR_DATA[N][0],X=this.NEPALI_CALENDAR_DATA[N][j]-Z+1;F>X;)++j>12&&(j=1,N++),X+=this.NEPALI_CALENDAR_DATA[N][j];var $=this.NEPALI_CALENDAR_DATA[N][j]-(X-F);return this.newDate(N,j,$)},_createMissingCalendarData:function(i){var o=this.daysPerMonth.slice(0);o.unshift(17);for(var s=i-1;s<i+2;s++)void 0===this.NEPALI_CALENDAR_DATA[s]&&(this.NEPALI_CALENDAR_DATA[s]=o)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),_.calendars.nepali=NepaliCalendar},94320:function(i,o,s){var _=s(63489),F=s(56131);function PersianCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}function mod(i,o){return i-o*Math.floor(i/o)}PersianCalendar.prototype=new _.baseCalendar,F(PersianCalendar.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear);return((o.year()-(o.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(-((_.dayOfWeek()+1)%7),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(12===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 5!==this.dayOfWeek(i,o,s)},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate);i=F.year(),o=F.month(),s=F.day();var N=i-(i>=0?474:473),j=474+mod(N,2820);return s+(o<=7?(o-1)*31:(o-1)*30+6)+Math.floor((682*j-110)/2816)+(j-1)*365+1029983*Math.floor(N/2820)+this.jdEpoch-1},fromJD:function(i){var o=(i=Math.floor(i)+.5)-this.toJD(475,1,1),s=Math.floor(o/1029983),_=mod(o,1029983),F=2820;if(1029982!==_){var N=Math.floor(_/366);F=Math.floor((2134*N+2816*mod(_,366)+2815)/1028522)+N+1}var j=F+2820*s+474;j=j<=0?j-1:j;var Z=i-this.toJD(j,1,1)+1,X=Z<=186?Math.ceil(Z/31):Math.ceil((Z-6)/30),$=i-this.toJD(j,X,1)+1;return this.newDate(j,X,$)}}),_.calendars.persian=PersianCalendar,_.calendars.jalali=PersianCalendar},31320:function(i,o,s){var _=s(63489),F=s(56131),N=_.instance();function TaiwanCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}TaiwanCalendar.prototype=new _.baseCalendar,F(TaiwanCalendar.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),i=this._t2gYear(o.year());return N.leapYear(i)},weekOfYear:function(i,o,s){var F=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),i=this._t2gYear(F.year());return N.weekOfYear(i,F.month(),F.day())},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate),i=this._t2gYear(F.year());return N.toJD(i,F.month(),F.day())},fromJD:function(i){var o=N.fromJD(i),s=this._g2tYear(o.year());return this.newDate(s,o.month(),o.day())},_t2gYear:function(i){return i+this.yearsOffset+(i>=-this.yearsOffset&&i<=-1?1:0)},_g2tYear:function(i){return i-this.yearsOffset-(i>=1&&i<=this.yearsOffset?1:0)}}),_.calendars.taiwan=TaiwanCalendar},51367:function(i,o,s){var _=s(63489),F=s(56131),N=_.instance();function ThaiCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}ThaiCalendar.prototype=new _.baseCalendar,F(ThaiCalendar.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),i=this._t2gYear(o.year());return N.leapYear(i)},weekOfYear:function(i,o,s){var F=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear),i=this._t2gYear(F.year());return N.weekOfYear(i,F.month(),F.day())},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,_.local.invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate),i=this._t2gYear(F.year());return N.toJD(i,F.month(),F.day())},fromJD:function(i){var o=N.fromJD(i),s=this._g2tYear(o.year());return this.newDate(s,o.month(),o.day())},_t2gYear:function(i){return i-this.yearsOffset-(i>=1&&i<=this.yearsOffset?1:0)},_g2tYear:function(i){return i+this.yearsOffset+(i>=-this.yearsOffset&&i<=-1?1:0)}}),_.calendars.thai=ThaiCalendar},21457:function(i,o,s){var _=s(63489),F=s(56131);function UmmAlQuraCalendar(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}UmmAlQuraCalendar.prototype=new _.baseCalendar,F(UmmAlQuraCalendar.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,_.local.invalidYear);return 355===this.daysInYear(o.year())},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(-_.dayOfWeek(),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInYear:function(i){for(var o=0,s=1;s<=12;s++)o+=this.daysInMonth(i,s);return o},daysInMonth:function(i,o){for(var s=this._validate(i,o,this.minDay,_.local.invalidMonth).toJD()-24e5+.5,F=0,j=0;j<N.length;j++){if(N[j]>s)return N[F]-N[F-1];F++}return 30},weekDay:function(i,o,s){return 5!==this.dayOfWeek(i,o,s)},toJD:function(i,o,s){var F=this._validate(i,o,s,_.local.invalidDate),j=12*(F.year()-1)+F.month()-15292;return F.day()+N[j-1]-1+24e5-.5},fromJD:function(i){for(var o=i-24e5+.5,s=0,_=0;_<N.length&&!(N[_]>o);_++)s++;var F=s+15292,j=Math.floor((F-1)/12),Z=o-N[s-1]+1;return this.newDate(j+1,F-12*j,Z)},isValid:function(i,o,s){var F=_.baseCalendar.prototype.isValid.apply(this,arguments);return F&&(F=(i=null!=i.year?i.year:i)>=1276&&i<=1500),F},_validate:function(i,o,s,F){var N=_.baseCalendar.prototype._validate.apply(this,arguments);if(N.year<1276||N.year>1500)throw F.replace(/\{0\}/,this.local.name);return N}}),_.calendars.ummalqura=UmmAlQuraCalendar;var N=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(i,o,s){var _=s(56131);function Calendars(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function CDate(i,o,s,_){if(this._calendar=i,this._year=o,this._month=s,this._day=_,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(F.local.invalidDate||F.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function pad(i,o){return i=""+i,"000000".substring(0,o-i.length)+i}function BaseCalendar(){this.shortYearCutoff="+10"}function GregorianCalendar(i){this.local=this.regionalOptions[i]||this.regionalOptions[""]}_(Calendars.prototype,{instance:function(i,o){i=(i||"gregorian").toLowerCase(),o=o||"";var s=this._localCals[i+"-"+o];if(!s&&this.calendars[i]&&(s=new this.calendars[i](o),this._localCals[i+"-"+o]=s),!s)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,i);return s},newDate:function(i,o,s,_,F){return(_=(null!=i&&i.year?i.calendar():"string"==typeof _?this.instance(_,F):_)||this.instance()).newDate(i,o,s)},substituteDigits:function(i){return function(o){return(o+"").replace(/[0-9]/g,function(o){return i[o]})}},substituteChineseDigits:function(i,o){return function(s){for(var _="",F=0;s>0;){var N=s%10;_=(0===N?"":i[N]+o[F])+_,F++,s=Math.floor(s/10)}return 0===_.indexOf(i[1]+o[1])&&(_=_.substr(1)),_||i[0]}}}),_(CDate.prototype,{newDate:function(i,o,s){return this._calendar.newDate(null==i?this:i,o,s)},year:function(i){return 0==arguments.length?this._year:this.set(i,"y")},month:function(i){return 0==arguments.length?this._month:this.set(i,"m")},day:function(i){return 0==arguments.length?this._day:this.set(i,"d")},date:function(i,o,s){if(!this._calendar.isValid(i,o,s))throw(F.local.invalidDate||F.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=i,this._month=o,this._day=s,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(i,o){return this._calendar.add(this,i,o)},set:function(i,o){return this._calendar.set(this,i,o)},compareTo:function(i){if(this._calendar.name!==i._calendar.name)throw(F.local.differentCalendars||F.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,i._calendar.local.name);var o=this._year!==i._year?this._year-i._year:this._month!==i._month?this.monthOfYear()-i.monthOfYear():this._day-i._day;return 0===o?0:o<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(i){return this._calendar.fromJD(i)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(i){return this._calendar.fromJSDate(i)},toString:function(){return(0>this.year()?"-":"")+pad(Math.abs(this.year()),4)+"-"+pad(this.month(),2)+"-"+pad(this.day(),2)}}),_(BaseCalendar.prototype,{_validateLevel:0,newDate:function(i,o,s){return null==i?this.today():(i.year&&(this._validate(i,o,s,F.local.invalidDate||F.regionalOptions[""].invalidDate),s=i.day(),o=i.month(),i=i.year()),new CDate(this,i,o,s))},today:function(){return this.fromJSDate(new Date)},epoch:function(i){return 0>this._validate(i,this.minMonth,this.minDay,F.local.invalidYear||F.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,F.local.invalidYear||F.regionalOptions[""].invalidYear);return(0>o.year()?"-":"")+pad(Math.abs(o.year()),4)},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,F.local.invalidYear||F.regionalOptions[""].invalidYear),12},monthOfYear:function(i,o){var s=this._validate(i,o,this.minDay,F.local.invalidMonth||F.regionalOptions[""].invalidMonth);return(s.month()+this.monthsInYear(s)-this.firstMonth)%this.monthsInYear(s)+this.minMonth},fromMonthOfYear:function(i,o){var s=(o+this.firstMonth-2*this.minMonth)%this.monthsInYear(i)+this.minMonth;return this._validate(i,s,this.minDay,F.local.invalidMonth||F.regionalOptions[""].invalidMonth),s},daysInYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,F.local.invalidYear||F.regionalOptions[""].invalidYear);return this.leapYear(o)?366:365},dayOfYear:function(i,o,s){var _=this._validate(i,o,s,F.local.invalidDate||F.regionalOptions[""].invalidDate);return _.toJD()-this.newDate(_.year(),this.fromMonthOfYear(_.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(i,o,s){var _=this._validate(i,o,s,F.local.invalidDate||F.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(_))+2)%this.daysInWeek()},extraInfo:function(i,o,s){return this._validate(i,o,s,F.local.invalidDate||F.regionalOptions[""].invalidDate),{}},add:function(i,o,s){return this._validate(i,this.minMonth,this.minDay,F.local.invalidDate||F.regionalOptions[""].invalidDate),this._correctAdd(i,this._add(i,o,s),o,s)},_add:function(i,o,s){if(this._validateLevel++,"d"===s||"w"===s){var _=i.toJD()+o*("w"===s?this.daysInWeek():1),F=i.calendar().fromJD(_);return this._validateLevel--,[F.year(),F.month(),F.day()]}try{var N=i.year()+("y"===s?o:0),j=i.monthOfYear()+("m"===s?o:0),F=i.day();"y"===s?(i.month()!==this.fromMonthOfYear(N,j)&&(j=this.newDate(N,i.month(),this.minDay).monthOfYear()),j=Math.min(j,this.monthsInYear(N)),F=Math.min(F,this.daysInMonth(N,this.fromMonthOfYear(N,j)))):"m"===s&&(function(i){for(;j<i.minMonth;)N--,j+=i.monthsInYear(N);for(var o=i.monthsInYear(N);j>o-1+i.minMonth;)N++,j-=o,o=i.monthsInYear(N)}(this),F=Math.min(F,this.daysInMonth(N,this.fromMonthOfYear(N,j))));var Z=[N,this.fromMonthOfYear(N,j),F];return this._validateLevel--,Z}catch(i){throw this._validateLevel--,i}},_correctAdd:function(i,o,s,_){if(!this.hasYearZero&&("y"===_||"m"===_)&&(0===o[0]||i.year()>0!=o[0]>0)){var F={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[_],N=s<0?-1:1;o=this._add(i,s*F[0]+N*F[1],F[2])}return i.date(o[0],o[1],o[2])},set:function(i,o,s){this._validate(i,this.minMonth,this.minDay,F.local.invalidDate||F.regionalOptions[""].invalidDate);var _="y"===s?o:i.year(),N="m"===s?o:i.month(),j="d"===s?o:i.day();return("y"===s||"m"===s)&&(j=Math.min(j,this.daysInMonth(_,N))),i.date(_,N,j)},isValid:function(i,o,s){this._validateLevel++;var _=this.hasYearZero||0!==i;if(_){var F=this.newDate(i,o,this.minDay);_=o>=this.minMonth&&o-this.minMonth<this.monthsInYear(F)&&s>=this.minDay&&s-this.minDay<this.daysInMonth(F)}return this._validateLevel--,_},toJSDate:function(i,o,s){var _=this._validate(i,o,s,F.local.invalidDate||F.regionalOptions[""].invalidDate);return F.instance().fromJD(this.toJD(_)).toJSDate()},fromJSDate:function(i){return this.fromJD(F.instance().fromJSDate(i).toJD())},_validate:function(i,o,s,_){if(i.year){if(0===this._validateLevel&&this.name!==i.calendar().name)throw(F.local.differentCalendars||F.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,i.calendar().local.name);return i}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(i,o,s))throw _.replace(/\{0\}/,this.local.name);var N=this.newDate(i,o,s);return this._validateLevel--,N}catch(i){throw this._validateLevel--,i}}}),GregorianCalendar.prototype=new BaseCalendar,_(GregorianCalendar.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var o=this._validate(i,this.minMonth,this.minDay,F.local.invalidYear||F.regionalOptions[""].invalidYear),i=o.year()+(0>o.year()?1:0);return i%4==0&&(i%100!=0||i%400==0)},weekOfYear:function(i,o,s){var _=this.newDate(i,o,s);return _.add(4-(_.dayOfWeek()||7),"d"),Math.floor((_.dayOfYear()-1)/7)+1},daysInMonth:function(i,o){var s=this._validate(i,o,this.minDay,F.local.invalidMonth||F.regionalOptions[""].invalidMonth);return this.daysPerMonth[s.month()-1]+(2===s.month()&&this.leapYear(s.year())?1:0)},weekDay:function(i,o,s){return 6>(this.dayOfWeek(i,o,s)||7)},toJD:function(i,o,s){var _=this._validate(i,o,s,F.local.invalidDate||F.regionalOptions[""].invalidDate);i=_.year(),o=_.month(),s=_.day(),i<0&&i++,o<3&&(o+=12,i--);var N=Math.floor(i/100);return Math.floor(365.25*(i+4716))+Math.floor(30.6001*(o+1))+s+(2-N+Math.floor(N/4))-1524.5},fromJD:function(i){var o=Math.floor(i+.5),s=Math.floor((o-1867216.25)/36524.25),_=(s=o+1+s-Math.floor(s/4))+1524,F=Math.floor((_-122.1)/365.25),N=Math.floor(365.25*F),j=Math.floor((_-N)/30.6001),Z=_-N-Math.floor(30.6001*j),X=j-(j>13.5?13:1),$=F-(X>2.5?4716:4715);return $<=0&&$--,this.newDate($,X,Z)},toJSDate:function(i,o,s){var _=this._validate(i,o,s,F.local.invalidDate||F.regionalOptions[""].invalidDate),N=new Date(_.year(),_.month()-1,_.day());return N.setHours(0),N.setMinutes(0),N.setSeconds(0),N.setMilliseconds(0),N.setHours(N.getHours()>12?N.getHours()+2:0),N},fromJSDate:function(i){return this.newDate(i.getFullYear(),i.getMonth()+1,i.getDate())}});var F=i.exports=new Calendars;F.cdate=CDate,F.baseCalendar=BaseCalendar,F.calendars.gregorian=GregorianCalendar},94338:function(i,o,s){var _=s(56131),F=s(63489);_(F.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),F.local=F.regionalOptions[""],_(F.cdate.prototype,{formatDate:function(i,o){return"string"!=typeof i&&(o=i,i=""),this._calendar.formatDate(i||"",this,o)}}),_(F.baseCalendar.prototype,{UNIX_EPOCH:F.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:F.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(i,o,s){if("string"!=typeof i&&(s=o,o=i,i=""),!o)return"";if(o.calendar()!==this)throw F.local.invalidFormat||F.regionalOptions[""].invalidFormat;i=i||this.local.dateFormat;var _,N,j,Z=(s=s||{}).dayNamesShort||this.local.dayNamesShort,X=s.dayNames||this.local.dayNames,$=s.monthNumbers||this.local.monthNumbers,ee=s.monthNamesShort||this.local.monthNamesShort,et=s.monthNames||this.local.monthNames;s.calculateWeek||this.local.calculateWeek;for(var doubled=function(o,s){for(var _=1;eo+_<i.length&&i.charAt(eo+_)===o;)_++;return eo+=_-1,Math.floor(_/(s||1))>1},formatNumber=function(i,o,s,_){var F=""+o;if(doubled(i,_))for(;F.length<s;)F="0"+F;return F},er=this.local.digits,localiseNumbers=function(i){return s.localNumbers&&er?er(i):i},en="",ei=!1,eo=0;eo<i.length;eo++)if(ei)"'"!==i.charAt(eo)||doubled("'")?en+=i.charAt(eo):ei=!1;else switch(i.charAt(eo)){case"d":en+=localiseNumbers(formatNumber("d",o.day(),2));break;case"D":en+=(_=o.dayOfWeek(),doubled("D")?X[_]:Z[_]);break;case"o":en+=formatNumber("o",o.dayOfYear(),3);break;case"w":en+=formatNumber("w",o.weekOfYear(),2);break;case"m":en+=(N=o,"function"==typeof $?$.call(this,N,doubled("m")):localiseNumbers(formatNumber("m",N.month(),2)));break;case"M":en+=(j=o,doubled("M")?"function"==typeof et?et.call(this,j):et[j.month()-this.minMonth]:"function"==typeof ee?ee.call(this,j):ee[j.month()-this.minMonth]);break;case"y":en+=doubled("y",2)?o.year():(o.year()%100<10?"0":"")+o.year()%100;break;case"Y":doubled("Y",2),en+=o.formatYear();break;case"J":en+=o.toJD();break;case"@":en+=(o.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":en+=(o.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":doubled("'")?en+="'":ei=!0;break;default:en+=i.charAt(eo)}return en},parseDate:function(i,o,s){if(null==o)throw F.local.invalidArguments||F.regionalOptions[""].invalidArguments;if(""===(o="object"==typeof o?o.toString():o+""))return null;i=i||this.local.dateFormat;var _=(s=s||{}).shortYearCutoff||this.shortYearCutoff;_="string"!=typeof _?_:this.today().year()%100+parseInt(_,10);for(var N=s.dayNamesShort||this.local.dayNamesShort,j=s.dayNames||this.local.dayNames,Z=s.parseMonth||this.local.parseMonth,X=s.monthNumbers||this.local.monthNumbers,$=s.monthNamesShort||this.local.monthNamesShort,ee=s.monthNames||this.local.monthNames,et=-1,er=-1,en=-1,ei=-1,eo=-1,es=!1,el=!1,doubled=function(o,s){for(var _=1;ef+_<i.length&&i.charAt(ef+_)===o;)_++;return ef+=_-1,Math.floor(_/(s||1))>1},getNumber=function(i,s){var _=doubled(i,s),N=RegExp("^-?\\d{1,"+[2,3,_?4:2,_?4:2,10,11,20]["oyYJ@!".indexOf(i)+1]+"}"),j=o.substring(eu).match(N);if(!j)throw(F.local.missingNumberAt||F.regionalOptions[""].missingNumberAt).replace(/\{0\}/,eu);return eu+=j[0].length,parseInt(j[0],10)},ec=this,getName=function(i,s,_,N){for(var j=doubled(i,N)?_:s,Z=0;Z<j.length;Z++)if(o.substr(eu,j[Z].length).toLowerCase()===j[Z].toLowerCase())return eu+=j[Z].length,Z+ec.minMonth;throw(F.local.unknownNameAt||F.regionalOptions[""].unknownNameAt).replace(/\{0\}/,eu)},checkLiteral=function(){if(o.charAt(eu)!==i.charAt(ef))throw(F.local.unexpectedLiteralAt||F.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,eu);eu++},eu=0,ef=0;ef<i.length;ef++)if(el)"'"!==i.charAt(ef)||doubled("'")?checkLiteral():el=!1;else switch(i.charAt(ef)){case"d":ei=getNumber("d");break;case"D":getName("D",N,j);break;case"o":eo=getNumber("o");break;case"w":getNumber("w");break;case"m":en=function(){if("function"==typeof X){doubled("m");var i=X.call(ec,o.substring(eu));return eu+=i.length,i}return getNumber("m")}();break;case"M":en=function(){if("function"==typeof ee){var i=doubled("M")?ee.call(ec,o.substring(eu)):$.call(ec,o.substring(eu));return eu+=i.length,i}return getName("M",$,ee)}();break;case"y":var ed=ef;es=!doubled("y",2),ef=ed,er=getNumber("y",2);break;case"Y":er=getNumber("Y",2);break;case"J":et=getNumber("J")+.5,"."===o.charAt(eu)&&(eu++,getNumber("J"));break;case"@":et=getNumber("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":et=getNumber("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":eu=o.length;break;case"'":doubled("'")?checkLiteral():el=!0;break;default:checkLiteral()}if(eu<o.length)throw F.local.unexpectedText||F.regionalOptions[""].unexpectedText;if(-1===er?er=this.today().year():er<100&&es&&(er+=-1===_?1900:this.today().year()-this.today().year()%100-(er<=_?0:100)),"string"==typeof en&&(en=Z.call(this,er,en)),eo>-1){en=1,ei=eo;for(var eh=this.daysInMonth(er,en);ei>eh;eh=this.daysInMonth(er,en))en++,ei-=eh}return et>-1?this.fromJD(et):this.newDate(er,en,ei)},determineDate:function(i,o,s,_,F){s&&"object"!=typeof s&&(F=_,_=s,s=null),"string"!=typeof _&&(F=_,_="");var N=this;return o=o?o.newDate():null,i=null==i?o:"string"==typeof i?function(i){try{return N.parseDate(_,i,F)}catch(i){}for(var o=((i=i.toLowerCase()).match(/^c/)&&s?s.newDate():null)||N.today(),j=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,Z=j.exec(i);Z;)o.add(parseInt(Z[1],10),Z[2]||"d"),Z=j.exec(i);return o}(i):"number"==typeof i?isNaN(i)||i===1/0||i===-1/0?o:N.today().add(i,"d"):N.newDate(i)}})},69862:function(){},40964:function(){},72077:function(i,o,s){"use strict";var _=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],F="undefined"==typeof globalThis?s.g:globalThis;i.exports=function(){for(var i=[],o=0;o<_.length;o++)"function"==typeof F[_[o]]&&(i[i.length]=_[o]);return i}},81684:function(i,o,s){"use strict";function src_define(i,o,s){i.prototype=o.prototype=s,s.constructor=i}function extend(i,o){var s=Object.create(i.prototype);for(var _ in o)s[_]=o[_];return s}function Color(){}s.d(o,{sX:function(){return value},k4:function(){return number}});var _="\\s*([+-]?\\d+)\\s*",F="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",N="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",j=/^#([0-9a-f]{3,8})$/,Z=new RegExp("^rgb\\(".concat(_,",").concat(_,",").concat(_,"\\)$")),X=new RegExp("^rgb\\(".concat(N,",").concat(N,",").concat(N,"\\)$")),$=new RegExp("^rgba\\(".concat(_,",").concat(_,",").concat(_,",").concat(F,"\\)$")),ee=new RegExp("^rgba\\(".concat(N,",").concat(N,",").concat(N,",").concat(F,"\\)$")),et=new RegExp("^hsl\\(".concat(F,",").concat(N,",").concat(N,"\\)$")),er=new RegExp("^hsla\\(".concat(F,",").concat(N,",").concat(N,",").concat(F,"\\)$")),en={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(i){var o,s;return i=(i+"").trim().toLowerCase(),(o=j.exec(i))?(s=o[1].length,o=parseInt(o[1],16),6===s?rgbn(o):3===s?new Rgb(o>>8&15|o>>4&240,o>>4&15|240&o,(15&o)<<4|15&o,1):8===s?rgba(o>>24&255,o>>16&255,o>>8&255,(255&o)/255):4===s?rgba(o>>12&15|o>>8&240,o>>8&15|o>>4&240,o>>4&15|240&o,((15&o)<<4|15&o)/255):null):(o=Z.exec(i))?new Rgb(o[1],o[2],o[3],1):(o=X.exec(i))?new Rgb(255*o[1]/100,255*o[2]/100,255*o[3]/100,1):(o=$.exec(i))?rgba(o[1],o[2],o[3],o[4]):(o=ee.exec(i))?rgba(255*o[1]/100,255*o[2]/100,255*o[3]/100,o[4]):(o=et.exec(i))?hsla(o[1],o[2]/100,o[3]/100,1):(o=er.exec(i))?hsla(o[1],o[2]/100,o[3]/100,o[4]):en.hasOwnProperty(i)?rgbn(en[i]):"transparent"===i?new Rgb(NaN,NaN,NaN,0):null}function rgbn(i){return new Rgb(i>>16&255,i>>8&255,255&i,1)}function rgba(i,o,s,_){return _<=0&&(i=o=s=NaN),new Rgb(i,o,s,_)}function rgbConvert(i){return(i instanceof Color||(i=color(i)),i)?new Rgb((i=i.rgb()).r,i.g,i.b,i.opacity):new Rgb}function color_rgb(i,o,s,_){return 1==arguments.length?rgbConvert(i):new Rgb(i,o,s,null==_?1:_)}function Rgb(i,o,s,_){this.r=+i,this.g=+o,this.b=+s,this.opacity=+_}function rgb_formatHex(){return"#".concat(hex(this.r)).concat(hex(this.g)).concat(hex(this.b))}function rgb_formatHex8(){return"#".concat(hex(this.r)).concat(hex(this.g)).concat(hex(this.b)).concat(hex((isNaN(this.opacity)?1:this.opacity)*255))}function rgb_formatRgb(){var i=clampa(this.opacity);return"".concat(1===i?"rgb(":"rgba(").concat(clampi(this.r),", ").concat(clampi(this.g),", ").concat(clampi(this.b)).concat(1===i?")":", ".concat(i,")"))}function clampa(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function clampi(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function hex(i){return((i=clampi(i))<16?"0":"")+i.toString(16)}function hsla(i,o,s,_){return _<=0?i=o=s=NaN:s<=0||s>=1?i=o=NaN:o<=0&&(i=NaN),new Hsl(i,o,s,_)}function hslConvert(i){if(i instanceof Hsl)return new Hsl(i.h,i.s,i.l,i.opacity);if(i instanceof Color||(i=color(i)),!i)return new Hsl;if(i instanceof Hsl)return i;var o=(i=i.rgb()).r/255,s=i.g/255,_=i.b/255,F=Math.min(o,s,_),N=Math.max(o,s,_),j=NaN,Z=N-F,X=(N+F)/2;return Z?(j=o===N?(s-_)/Z+(s<_)*6:s===N?(_-o)/Z+2:(o-s)/Z+4,Z/=X<.5?N+F:2-N-F,j*=60):Z=X>0&&X<1?0:j,new Hsl(j,Z,X,i.opacity)}function hsl(i,o,s,_){return 1==arguments.length?hslConvert(i):new Hsl(i,o,s,null==_?1:_)}function Hsl(i,o,s,_){this.h=+i,this.s=+o,this.l=+s,this.opacity=+_}function clamph(i){return(i=(i||0)%360)<0?i+360:i}function clampt(i){return Math.max(0,Math.min(1,i||0))}function hsl2rgb(i,o,s){return(i<60?o+(s-o)*i/60:i<180?s:i<240?o+(s-o)*(240-i)/60:o)*255}function basis(i,o,s,_,F){var N=i*i,j=N*i;return((1-3*i+3*N-j)*o+(4-6*N+3*j)*s+(1+3*i+3*N-3*j)*_+j*F)/6}function src_basis(i){var o=i.length-1;return function(s){var _=s<=0?s=0:s>=1?(s=1,o-1):Math.floor(s*o),F=i[_],N=i[_+1],j=_>0?i[_-1]:2*F-N,Z=_<o-1?i[_+2]:2*N-F;return basis((s-_/o)*o,j,F,N,Z)}}function basisClosed(i){var o=i.length;return function(s){var _=Math.floor(((s%=1)<0?++s:s)*o),F=i[(_+o-1)%o],N=i[_%o],j=i[(_+1)%o],Z=i[(_+2)%o];return basis((s-_/o)*o,F,N,j,Z)}}src_define(Color,color,{copy:function(i){return Object.assign(new this.constructor,this,i)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),src_define(Rgb,color_rgb,extend(Color,{brighter:function(i){return i=null==i?1.4285714285714286:Math.pow(1.4285714285714286,i),new Rgb(this.r*i,this.g*i,this.b*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new Rgb(this.r*i,this.g*i,this.b*i,this.opacity)},rgb:function(){return this},clamp:function(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable:function(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),src_define(Hsl,hsl,extend(Color,{brighter:function(i){return i=null==i?1.4285714285714286:Math.pow(1.4285714285714286,i),new Hsl(this.h,this.s,this.l*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new Hsl(this.h,this.s,this.l*i,this.opacity)},rgb:function(){var i=this.h%360+(this.h<0)*360,o=isNaN(i)||isNaN(this.s)?0:this.s,s=this.l,_=s+(s<.5?s:1-s)*o,F=2*s-_;return new Rgb(hsl2rgb(i>=240?i-240:i+120,F,_),hsl2rgb(i,F,_),hsl2rgb(i<120?i+240:i-120,F,_),this.opacity)},clamp:function(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var i=clampa(this.opacity);return"".concat(1===i?"hsl(":"hsla(").concat(clamph(this.h),", ").concat(100*clampt(this.s),"%, ").concat(100*clampt(this.l),"%").concat(1===i?")":", ".concat(i,")"))}}));var src_constant=function(i){return function(){return i}};function linear(i,o){return function(s){return i+s*o}}function exponential(i,o,s){return i=Math.pow(i,s),o=Math.pow(o,s)-i,s=1/s,function(_){return Math.pow(i+_*o,s)}}function gamma(i){return 1==(i=+i)?nogamma:function(o,s){return s-o?exponential(o,s,i):src_constant(isNaN(o)?s:o)}}function nogamma(i,o){var s=o-i;return s?linear(i,s):src_constant(isNaN(i)?o:i)}var ei=function rgbGamma(i){var o=gamma(i);function rgb(i,s){var _=o((i=color_rgb(i)).r,(s=color_rgb(s)).r),F=o(i.g,s.g),N=o(i.b,s.b),j=nogamma(i.opacity,s.opacity);return function(o){return i.r=_(o),i.g=F(o),i.b=N(o),i.opacity=j(o),i+""}}return rgb.gamma=rgbGamma,rgb}(1);function rgbSpline(i){return function(o){var s,_,F=o.length,N=Array(F),j=Array(F),Z=Array(F);for(s=0;s<F;++s)_=color_rgb(o[s]),N[s]=_.r||0,j[s]=_.g||0,Z[s]=_.b||0;return N=i(N),j=i(j),Z=i(Z),_.opacity=1,function(i){return _.r=N(i),_.g=j(i),_.b=Z(i),_+""}}}function genericArray(i,o){var s,_=o?o.length:0,F=i?Math.min(_,i.length):0,N=Array(F),j=Array(_);for(s=0;s<F;++s)N[s]=value(i[s],o[s]);for(;s<_;++s)j[s]=o[s];return function(i){for(s=0;s<F;++s)j[s]=N[s](i);return j}}function date(i,o){var s=new Date;return i=+i,o=+o,function(_){return s.setTime(i*(1-_)+o*_),s}}function number(i,o){return i=+i,o=+o,function(s){return i*(1-s)+o*s}}function _typeof(i){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}function object(i,o){var s,_={},F={};for(s in(null===i||"object"!==_typeof(i))&&(i={}),(null===o||"object"!==_typeof(o))&&(o={}),o)s in i?_[s]=value(i[s],o[s]):F[s]=o[s];return function(i){for(s in _)F[s]=_[s](i);return F}}rgbSpline(src_basis),rgbSpline(basisClosed);var eo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,es=RegExp(eo.source,"g");function zero(i){return function(){return i}}function one(i){return function(o){return i(o)+""}}function string(i,o){var s,_,F,N=eo.lastIndex=es.lastIndex=0,j=-1,Z=[],X=[];for(i+="",o+="";(s=eo.exec(i))&&(_=es.exec(o));)(F=_.index)>N&&(F=o.slice(N,F),Z[j]?Z[j]+=F:Z[++j]=F),(s=s[0])===(_=_[0])?Z[j]?Z[j]+=_:Z[++j]=_:(Z[++j]=null,X.push({i:j,x:number(s,_)})),N=es.lastIndex;return N<o.length&&(F=o.slice(N),Z[j]?Z[j]+=F:Z[++j]=F),Z.length<2?X[0]?one(X[0].x):zero(o):(o=X.length,function(i){for(var s,_=0;_<o;++_)Z[(s=X[_]).i]=s.x(i);return Z.join("")})}function src_numberArray(i,o){o||(o=[]);var s,_=i?Math.min(o.length,i.length):0,F=o.slice();return function(N){for(s=0;s<_;++s)F[s]=i[s]*(1-N)+o[s]*N;return F}}function numberArray_isNumberArray(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function value_typeof(i){return(value_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(i)}function value(i,o){var s,_=value_typeof(o);return null==o||"boolean"===_?src_constant(o):("number"===_?number:"string"===_?(s=color(o))?(o=s,ei):string:o instanceof color?ei:o instanceof Date?date:numberArray_isNumberArray(o)?src_numberArray:Array.isArray(o)?genericArray:"function"!=typeof o.valueOf&&"function"!=typeof o.toString||isNaN(o)?object:number)(i,o)}},40402:function(i){"use strict";i.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(i){"use strict";i.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(i){"use strict";i.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(i){"use strict";i.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(i){"use strict";i.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(i){"use strict";i.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},o={};function __nested_webpack_require_8554308__(s){var _=o[s];if(void 0!==_)return _.exports;var F=o[s]={exports:{}};return i[s].call(F.exports,F,F.exports,__nested_webpack_require_8554308__),F.exports}return __nested_webpack_require_8554308__.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return __nested_webpack_require_8554308__.d(o,{a:o}),o},__nested_webpack_require_8554308__.d=function(i,o){for(var s in o)__nested_webpack_require_8554308__.o(o,s)&&!__nested_webpack_require_8554308__.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},__nested_webpack_require_8554308__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(i){if("object"==typeof window)return window}}(),__nested_webpack_require_8554308__.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},__nested_webpack_require_8554308__.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},__nested_webpack_require_8554308__(27909)}()}}]);